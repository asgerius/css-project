[{"tags": ["c#", "c++", "union"], "comments": [{"owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "edited": false, "score": 0, "creation_date": 1529539943, "post_id": 50958521, "comment_id": 88914651, "body": "In the second union, there is the int64  which would be an 8 byte long, The unsigned long data[2], the second long is not mapped anywhere else ... correct?"}, {"owner": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 2, "creation_date": 1529540595, "post_id": 50958521, "comment_id": 88914767, "body": "You may find this helpful: <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/attributes/how-to-create-a-c-cpp-union-by-using-attributes\" rel=\"nofollow noreferrer\">How to: Create a C-C++ Union Type by Using Attributes</a>. You aren&#39;t going to be able to accomplish this with a class, but you can do something similar with a struct."}, {"owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "reply_to_user": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 0, "creation_date": 1529542437, "post_id": 50958521, "comment_id": 88915066, "body": "Mr Chase, thank you. That makes the crappy class i wrote obsolete. Anyone have an idea to where the data in lng_cnvt.data[1] comes from. im pretty sure C# wont overflow into that memory,and ive posted all the relavent code from the use of that struct."}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 1, "creation_date": 1529543860, "post_id": 50958521, "comment_id": 88915336, "body": "I would recommend splitting the code into separate lines and it testing out the behavior in C++. It&#39;s a left shift of 8 bits on a long."}, {"owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "reply_to_user": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "edited": false, "score": 0, "creation_date": 1529544264, "post_id": 50958521, "comment_id": 88915440, "body": "@ffhighwind , thank you. If this was c# i already would have done that. C++ im a little uncomfortable so it never dawned on me ++."}, {"owner": {"reputation": 5724, "user_id": 1655674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1440c2e508496b3e95684461a6ba6a95?s=128&d=identicon&r=PG", "display_name": "Dave Doknjas", "link": "https://stackoverflow.com/users/1655674/dave-doknjas"}, "reply_to_user": {"reputation": 8885, "user_id": 5402620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21079ba43a1f39464935b350d2649049?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon Chase", "link": "https://stackoverflow.com/users/5402620/jonathon-chase"}, "edited": false, "score": 0, "creation_date": 1529547446, "post_id": 50958521, "comment_id": 88916052, "body": "You can simulate a union using the information in the link that @JonathonChase provided, but you really have to ask yourself - why?  Unions are a concept that had more relevance in the distant past."}, {"owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "edited": false, "score": 0, "creation_date": 1529548237, "post_id": 50958521, "comment_id": 88916197, "body": "Dave, i completely agree with you. I am trying to update and refresh a code base that is arcane magic. And i really need to understand it, before i shatter it and reassemble it. A major benefit of this is learning how things work and expanding my knowledge."}], "answers": [{"tags": [], "owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "is_accepted": false, "score": 2, "last_activity_date": 1529541743, "last_edit_date": 1529541743, "creation_date": 1529540478, "answer_id": 50958740, "question_id": 50958521, "link": "https://stackoverflow.com/questions/50958521/c-union-to-c-working-class/50958740#50958740", "title": "c++ union to C# working class", "body": "<p>I didn't downvote but I can't comment without 50+ rep, so perhaps somebody else is in the same boat. What is the purpose of this and why couldn't you just cast to object?</p>\n\n<p>Perhaps you want to limit the types that the object can contain. If so will this do?</p>\n\n<pre><code>class MyUnion\n{\n   object obj;\n\n   MyUnion(SomeType o) { obj = o; }\n   //... constructors for all accepted Types\n\n   public object Value { get { return obj; } }\n}\n</code></pre>\n\n<p>C# is managed so you can't really expect fine tuned low level controls on data. If you want fine tuned control like C++ you will need <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.marshal.sizeof?view=netframework-4.7.2\" rel=\"nofollow noreferrer\">sizeof</a> and <a href=\"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/unsafe-code-pointers/index\" rel=\"nofollow noreferrer\">unmanaged unsafe code</a>.</p>\n\n<p>EDIT: Apparently you can make unions using Attributes like Jonathon Chase said.</p>\n"}, {"comments": [{"owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "edited": false, "score": 0, "creation_date": 1529603483, "post_id": 50961286, "comment_id": 88945703, "body": "thank you for the answer and the explanation of unsafe,"}], "tags": [], "owner": {"reputation": 1300, "user_id": 9250153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3d55650526a7e58bb9739dda4a0cff?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.Wei", "link": "https://stackoverflow.com/users/9250153/alex-wei"}, "is_accepted": true, "score": 1, "last_activity_date": 1529560581, "creation_date": 1529560581, "answer_id": 50961286, "question_id": 50958521, "link": "https://stackoverflow.com/questions/50958521/c-union-to-c-working-class/50961286#50961286", "title": "c++ union to C# working class", "body": "<p>It's simple if you can accept unsafe code.</p>\n\n<pre><code>[StructLayout(LayoutKind.Explicit)]\nunsafe public struct lng_cnvt\n{\n    [FieldOffset(0)]\n    public fixed byte cmd[4];\n\n    [FieldOffset(0)]\n    public fixed long data[2];\n\n    [FieldOffset(0)]\n    public long data64;\n}\n</code></pre>\n\n<p>CLR will treat <code>lng_cnvt.cmd</code> and <code>lng_cnvt.data</code> as pointer, and you can use indexer to access their element under an <code>unsafe</code> context. But if you can't accept unsafe code, you have to build up fixed size buffer through field declaration, then write a indexer to provide access to the right field.</p>\n\n<pre><code>[StructLayout(LayoutKind.Explicit)]\npublic class lng_cnvt\n{\n    private static Dictionary&lt;string, FieldInfo[]&gt; arrayMembers;\n\n    static lng_cnvt()\n    {\n        arrayMembers = new Dictionary&lt;string, FieldInfo[]&gt;();\n        arrayMembers.Add(\"cmd\", typeof(lng_cnvt).GetFields(BindingFlags.NonPublic | BindingFlags.Instance).\n            Where(x =&gt; x.Name.StartsWith(\"cmd\")).OrderBy(y =&gt; y.Name).ToArray());\n        arrayMembers.Add(\"data\", typeof(lng_cnvt).GetFields(BindingFlags.NonPublic | BindingFlags.Instance).\n            Where(x =&gt; x.Name.StartsWith(\"data\")).OrderBy(y =&gt; y.Name).ToArray());\n    }\n\n    [FieldOffset(0)]\n    private short cmd0;\n    [FieldOffset(2)]\n    private short cmd1;\n    [FieldOffset(4)]\n    private short cmd2;\n    [FieldOffset(6)]\n    private short cmd3;\n\n    [FieldOffset(0)]\n    private long data0;\n    [FieldOffset(8)]\n    private long data1;\n\n    [FieldOffset(0)]\n    public long data64;\n\n    public dynamic this[int index, string name = \"cmd\"]\n    {\n        get\n        {\n            return arrayMembers[name][index].GetValue(this);\n        }\n        set\n        {\n            arrayMembers[name][index].SetValue(this, value);\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1079, "user_id": 388976, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2cd2d68533b6dc75a9f8718caec6efb?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/388976/gauthier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 50961286, "answer_count": 2, "score": 2, "last_activity_date": 1529560581, "creation_date": 1529538254, "last_edit_date": 1529540975, "question_id": 50958521, "link": "https://stackoverflow.com/questions/50958521/c-union-to-c-working-class", "title": "c++ union to C# working class", "body": "<p>I only understand how unions in C++ work a little.\nThe first comment block i think i've duplicated in the c# class mac_const. (if not please explain why)\nI'm not worried about efficiency at the moment, just that it works properly.\nThe second comment block I don't even know where to begin on how to translate it.\nI dont get where the data[2] gets mapped to, could someone </p>\n\n<pre><code>//union {\n//    unsigned short wd[4];\n//    double data;\n//    __int64 data64;\n//}\n//dbl_cnvt;\n\npublic class mac_const\n{\n    byte[] basedata = new byte[8];\n    //public ushort[] wd\n    public ushort this[byte index]\n    {\n        get { return BitConverter.ToUInt16(basedata, index * 2); }\n        set { Array.Copy(BitConverter.GetBytes(value), 0, basedata, index * 2, 2); }\n    }\n    public double data\n    {\n        get { return BitConverter.ToDouble(basedata, 0); }\n        set { basedata = BitConverter.GetBytes(value); }\n    }\n    public long data64\n    {\n        get { return BitConverter.ToInt64(basedata, 0); }\n        set { basedata = BitConverter.GetBytes(value); }\n    }\n}\n\n\n//union {\n//    unsigned short cmd[4];\n//    unsigned long data[2];\n//    __int64 data64;\n//}\n//data_conversion;\n\npublic class data_conversion_csharp\n{\n    byte[] basedata = new byte[8];\n    // the c++ class only \n    //public ushort[] cmd\n    public ushort this[byte index]\n    {\n        get { return BitConverter.ToUInt16(basedata, index * 2); }\n        set { Array.Copy(BitConverter.GetBytes(value), 0, basedata, index * 2, 2); }\n    }\n    public long[] data\n    {\n        // not sure what the mapping would be here, or if this should be data1 and data2 instead of an array\n        ???\n    }\n    public long data64\n    {\n        ???\n    }\n}\n</code></pre>\n\n<p>Edit - explanation on the need for the union\n@ffhighwind\nIm trying to port some C++ code which makes use of unions as they should be \nI dont understand how the mapping to the second long in data occurs</p>\n\n<pre><code>lng_cnvt.data64 = (dbl_cnvt.data64 &gt;&gt; 6) + (long)0x400000000000; \n\nif (data &lt; 0)\n{\n    lng_cnvt.data64 = -lng_cnvt.data64;\n    lng_cnvt.cmd[3] = 0;\n    if (lng_cnvt.data64 == (__int64)0xC00000000000)\n    {\n        lng_cnvt.data64 = (__int64)0x800000000000; \n        exp -= 1;\n    }\n}\nlng_cnvt.cmd[0] = (Ushort)((lng_cnvt.cmd[0] &amp; 0xF000) | exp);\n*ldata++ = lng_cnvt.ldata[0] &amp; 0xFFFFFFL;\n*ldata++ = ((lng_cnvt.data[0] &gt;&gt; 24) &amp; 0x000FFL) |                                          \n    ((lng_cnvt.data[1] &lt;&lt; 8) &amp; 0x0FFFF00L);\n</code></pre>\n"}, {"tags": ["c++", "static", "friend"], "comments": [{"owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "edited": false, "score": 1, "creation_date": 1529538135, "post_id": 50958499, "comment_id": 88914228, "body": "Never put <code>using namespace std;</code> in a header file."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1529538340, "post_id": 50958499, "comment_id": 88914275, "body": "Function name lookup does not search static class members , you always have to qualify them (or call on an object), e.g. <code>PhoneNumber::operator&gt;&gt;(cin, phone);</code>"}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1529543232, "post_id": 50958499, "comment_id": 88915234, "body": "If I may ask why you don&#39;t want to use <code>friend</code>?"}, {"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "reply_to_user": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1529551040, "post_id": 50958499, "comment_id": 88916755, "body": "@codekaizer Its fine. I am just asking to know more"}], "answers": [{"tags": [], "owner": {"reputation": 9980, "user_id": 1944004, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/60f3cc97f94fa3690ba406f8c1a7fc4f?s=128&d=identicon&r=PG", "display_name": "Henri Menke", "link": "https://stackoverflow.com/users/1944004/henri-menke"}, "is_accepted": true, "score": 0, "last_activity_date": 1529538449, "creation_date": 1529538449, "answer_id": 50958533, "question_id": 50958499, "link": "https://stackoverflow.com/questions/50958499/can-we-use-static-instead-of-friend-in-this-case-and-what-are-the-other-solution/50958533#50958533", "title": "can we use static instead of friend in this case and what are the other solutions", "body": "<p>Overloaded operators cannot be static member functions, see <a href=\"http://eel.is/c++draft/over.oper#6\" rel=\"nofollow noreferrer\">[over.oper]</a> (emphasis is mine).</p>\n\n<blockquote>\n  <p>An operator function shall either be a <strong>non-static member function or be a non-member function</strong> that has at least one parameter whose type is a class, a reference to a class, an enumeration, or a reference to an enumeration.</p>\n</blockquote>\n"}], "owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 50958533, "answer_count": 1, "score": 1, "last_activity_date": 1529538449, "creation_date": 1529538051, "question_id": 50958499, "link": "https://stackoverflow.com/questions/50958499/can-we-use-static-instead-of-friend-in-this-case-and-what-are-the-other-solution", "title": "can we use static instead of friend in this case and what are the other solutions", "body": "<p>When I used friend for the operator functions in the PhoneNumber.h, PhoneNumber.cpp performed well. But with static it couldn't be compiled (why?) and what are the other ways to declare it (i.e) all the ways except for friend.</p>\n\n<p>PhoneNumber.h</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include &lt;string&gt;\n#include&lt;iomanip&gt;\nusing namespace std;\nclass PhoneNumber{\n    public:\n    string areaCode, exchange, line;\n    static ostream&amp; operator&lt;&lt;(ostream &amp;output, const PhoneNumber&amp;);\n    static istream&amp; operator&gt;&gt;(istream &amp;input, PhoneNumber&amp;);\n};\n</code></pre>\n\n<p>PhoneNumber.cpp</p>\n\n<pre><code>#include\"PhoneNumber.h\"\nusing namespace std;\n\nostream&amp; PhoneNumber::operator&lt;&lt;(ostream &amp;output, const PhoneNumber&amp; obj){\n    output &lt;&lt; \"(\" &lt;&lt;obj. areaCode &lt;&lt; \") \"\n    &lt;&lt; obj.exchange &lt;&lt; \"-\" &lt;&lt; obj.line;\n    return output;\n};\n\n\nistream&amp; PhoneNumber::operator&gt;&gt;(istream &amp;input, PhoneNumber&amp;obj){\n\n    input.ignore(); \n    input &gt;&gt; setw( 3 ) &gt;&gt; obj.areaCode;\n    input.ignore( 2 );\n    input &gt;&gt; setw( 3 ) &gt;&gt; obj.exchange;\n    input.ignore();\n    input &gt;&gt; setw( 4 ) &gt;&gt; obj.line;\n    return input;\n    };\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include\"PhoneNumber.h\"\nusing namespace std;\n\nint main(){\n\nPhoneNumber phone;\n cout &lt;&lt; \"Enter phone number in the form (123) 456-7890:\" &lt;&lt; endl;\ncin&gt;&gt;phone;\ncout &lt;&lt; \"The phone number entered was: \";\ncout&lt;&lt;phone;cout &lt;&lt; endl;\nint y;cin&gt;&gt;y;\nreturn 0;}\n</code></pre>\n"}, {"tags": ["c++", "unix", "boost", "asio", "deadline-timer"], "answers": [{"tags": [], "owner": {"reputation": 118, "user_id": 5165257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392695fc7b90f8b2c288c35094deae8?s=128&d=identicon&r=PG&f=1", "display_name": "Androprise", "link": "https://stackoverflow.com/users/5165257/androprise"}, "is_accepted": false, "score": 0, "last_activity_date": 1529681439, "creation_date": 1529681439, "answer_id": 50991271, "question_id": 50958359, "link": "https://stackoverflow.com/questions/50958359/why-does-boost-deadline-timer-used-as-timeout-for-async-connect-not-work-on-unix/50991271#50991271", "title": "Why does boost deadline_timer used as timeout for async_connect not work on unix?", "body": "<p>Ok, I found the answer after testing many different scenarios both on Ubuntu and Windows. It turns out that using a thread to continuously call <code>io_service::run</code> does not work on Unix OSes if the thread calling <code>io_service.run</code> is created before the async tasks (<code>async_wait</code>, <code>async_connect</code>) are started. The second example I posted breaks (on unix not windows) if the worker thread is created before the calls to <code>async_connect</code> and <code>async_wait</code>. I have just modified my NetManger class to remove the always running thread.</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/deadline_timer.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nusing namespace boost::asio;\nusing namespace boost::asio::ip;\n\nclass NetManager{\nprivate:\n    io_service io;\n    tcp::socket socket1, socket2, socket3;\n    deadline_timer connectDeadline;\n    int connectCounter = 0;\n\n    void handleConnect(const boost::system::error_code &amp;ec){\n        if(ec){\n            std::cout &lt;&lt; \"Connect error: \" &lt;&lt; ec.message() &lt;&lt; std::endl;\n            connectDeadline.cancel();\n            disconnect();\n        }else\n            connectCounter++;\n        if(connectCounter == 3)\n            std::cout &lt;&lt; \"Connected\" &lt;&lt; std::endl;\n\n    }\n    void handleConnectTimeout(const boost::system::error_code &amp;ec){\n        std::cout &lt;&lt; \"Timeout fired.\" &lt;&lt; std::endl;\n        disconnect();\n    }\npublic:\n    void connect(){\n        connectCounter = 0;\n        connectDeadline.expires_from_now(boost::posix_time::seconds(5));\n        socket1.async_connect(tcp::endpoint(boost::asio::ip::address::from_string(\"10.50.30.1\"), 8090), boost::bind(&amp;NetManager::handleConnect, this, _1));\n        socket2.async_connect(tcp::endpoint(boost::asio::ip::address::from_string(\"10.50.30.1\"), 8091), boost::bind(&amp;NetManager::handleConnect, this, _1));\n        socket3.async_connect(tcp::endpoint(boost::asio::ip::address::from_string(\"10.50.30.1\"), 8092), boost::bind(&amp;NetManager::handleConnect, this, _1));\n        connectDeadline.async_wait(boost::bind(&amp;NetManager::handleConnectTimeout, this, _1));\n        std::thread([&amp;]{io.run();}).detach(); // Run the async operations on a separate thread\n    }\n    void disconnect(){\n        socket1.close();\n        socket2.close();\n        socket3.close();\n    }\n    NetManager(): connectDeadline(io),\n                  socket1(io),\n                  socket2(io),\n                  socket3(io){\n\n    }\n    ~NetManager(){\n        io.stop();\n    }\n};\n\nint main(){\n    NetManager manager;\n    manager.connect();\n    std::cout &lt;&lt; \"Trying to connect...\" &lt;&lt; std::endl;\n    while(true); // Simulate the busy main (GUI) thread.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3755, "user_id": 252370, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0b4baabc7a09b9c9a55a1305e59d3bfb?s=128&d=identicon&r=PG", "display_name": "f4.", "link": "https://stackoverflow.com/users/252370/f4"}, "is_accepted": true, "score": 0, "last_activity_date": 1529702486, "last_edit_date": 1529702486, "creation_date": 1529682810, "answer_id": 50991610, "question_id": 50958359, "link": "https://stackoverflow.com/questions/50958359/why-does-boost-deadline-timer-used-as-timeout-for-async-connect-not-work-on-unix/50991610#50991610", "title": "Why does boost deadline_timer used as timeout for async_connect not work on unix?", "body": "<p><code>boost::io_service::run</code> stops if there is no work. You should not be calling it in a loop like this because as the documentation state:</p>\n\n<blockquote>\n  <p>A normal exit from the run() function implies that the io_service\n  object is stopped (the stopped() function returns true). Subsequent\n  calls to run(), run_one(), poll() or poll_one() will return\n  immediately unless there is a prior call to reset().</p>\n</blockquote>\n\n<p>You don't show when you call connect() in your first example, I assume it is not long after, so the fact that it works or not comes down to how fast the thread is launched and the <code>run()</code> call executed.</p>\n\n<p>You can circumvent this behavior by using <code>boost::io_service::work</code> which will prevent the <code>io_service</code> from running out of work.</p>\n"}], "owner": {"reputation": 118, "user_id": 5165257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0392695fc7b90f8b2c288c35094deae8?s=128&d=identicon&r=PG&f=1", "display_name": "Androprise", "link": "https://stackoverflow.com/users/5165257/androprise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "accepted_answer_id": 50991610, "answer_count": 2, "score": 0, "last_activity_date": 1529702486, "creation_date": 1529536954, "last_edit_date": 1529544423, "question_id": 50958359, "link": "https://stackoverflow.com/questions/50958359/why-does-boost-deadline-timer-used-as-timeout-for-async-connect-not-work-on-unix", "title": "Why does boost deadline_timer used as timeout for async_connect not work on unix?", "body": "<p>I have a program that uses boost asio to connect to 3 TCP sockets asynchronously using a <code>deadline_timer</code> as a connect timeout. On windows everything works as expected. The connection times out after 5 seconds. However, on Unix(Ubuntu on WSL, Linux Mint VM, macOS) the connectDeadline never fires. The async_connect operation just runs on forever. Why does this not work and how can I make this work on Unix as well?</p>\n\n<p>Code:\nNote: connect is called from the main thread (which is also a GUI thread).</p>\n\n<pre><code>#include \"NetManager.h\"\n\nNetManager::NetManager(NetManagerListener&amp; listener) :  listener(listener),\nconnectDeadline(io),\n                                                        socket1(io),\n                                                        socket2(io),\n                                                        socket3(io),\n                                                        asioThread(&amp;NetManager::handleAsioOperations, this){\n\n}\nNetManager::~NetManager() {\n    running = false;\n    io.stop();\n    asioThread.join();\n}\n\nvoid NetManager::connect(){\n    connectCounter = 0;\n    hasHandledConnectError = false;\n    socket1.async_connect(\n            tcp::endpoint(boost::asio::ip::address::from_string(IP_STRING), PORT_1),\n            boost::bind(&amp;NetManager::handleConnect, this, _1));\n    socket2.async_connect(\n            tcp::endpoint(boost::asio::ip::address::from_string(IP_STRING), PORT_2),\n            boost::bind(&amp;NetManager::handleConnect, this, _1));\n    socket3.async_connect(\n            tcp::endpoint(boost::asio::ip::address::from_string(IP_STRING), PORT_3),\n            boost::bind(&amp;NetManager::handleConnect, this, _1));\n    connectDeadline.expires_from_now(boost::posix_time::seconds(CONNECT_TIMEOUT));\n    connectDeadline.async_wait(boost::bind(&amp;NetManager::handleConnectTimeout, this, _1));\n}\n\nvoid NetManager::disconnect(){\n    //NOTE: Close also cancels incomplete async operations\n    socket1.close();\n    socket2.close();\n    socket3.close();\n}\n\n////////////////////////////////////////////////////////////////////////\n/// ASIO Handlers\n////////////////////////////////////////////////////////////////////////\nvoid NetManager::handleAsioOperations(){\n    while(running){\n        io.run(); // Run any async operations\n    }\n}\n\nvoid NetManager::handleConnect(const boost::system::error_code &amp;ec){\n    // When connections are canceled the handler is called with operation_aborted. No need to respond to that.\n    if(ec &amp;&amp; ec != boost::asio::error::operation_aborted &amp;&amp; !hasHandledConnectError){\n        hasHandledConnectError = true; // Likely to be 3 repeated errors. Make sure to only handle the first one\n        cerr &lt;&lt; \"Connect Failed: \" &lt;&lt; ec.message() &lt;&lt; endl;\n        connectDeadline.cancel(); // Don't fire the timeout\n        disconnect(); // Disconnect any already connected sockets\n        connectedToRobot = false;\n        listener.onConnect(false);\n    }else if (!ec){\n        connectCounter++;\n    }\n\n    if(connectCounter == 3){\n        cout &lt;&lt; \"Successful connect\" &lt;&lt; endl;\n        connectDeadline.cancel(); // Don't fire the timeout\n        connectedToRobot = true;\n        listener.onConnect(true);\n    }\n}\n\nvoid NetManager::handleConnectTimeout(const boost::system::error_code &amp;ec){\n    if(ec != boost::asio::error::operation_aborted){\n        cerr &lt;&lt; \"Connect timed out.\" &lt;&lt; endl;\n        disconnect(); // Disconnect any already connected sockets\n        connectedToRobot = false;\n        listener.onConnect(false);\n    }\n}\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>Confusingly, this works fine on Unix OSes:</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;                                                                                                                    \n#include &lt;boost/asio/deadline_timer.hpp&gt;                                                                                                     \n#include &lt;iostream&gt;                                                                                                                          \n#include &lt;thread&gt;                                                                                                                            \n\nusing namespace boost::asio;                                                                                                                 \nusing namespace boost::asio::ip;                                                                                                             \n\nint main(){                                                                                                                                  \n        io_service io;                                                                                                                       \n        deadline_timer timer1(io);                                                                                                           \n        tcp::socket sock(io);                                                                                                                \n\n        timer1.expires_from_now(boost::posix_time::seconds(3));                                                                              \n        sock.async_connect(tcp::endpoint(boost::asio::ip::address::from_string(\"10.50.30.1\"), 8090), [](const boost::system::error_code &amp;ec){\n                std::cout &lt;&lt; \"SocketError: \" &lt;&lt; ec.message() &lt;&lt; std::endl;                                                                   \n        });                                                                                                                                  \n        timer1.async_wait([&amp;](const boost::system::error_code &amp;ec){                                                                          \n                std::cout &lt;&lt; \"First timer\" &lt;&lt; std::endl;                                                                                     \n                sock.close();                                                                                                                \n        });                                                                                                                                  \n        std::thread worker([&amp;](){                                                                                                            \n                while(true){                                                                                                                 \n                        io.run();                                                                                                            \n                }                                                                                                                            \n        });                                                                                                                                  \n        worker.detach();                                                                                                                     \n        while(true){} // Simulate the unavailable main (GUI) thread                                                                          \n}  \n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>First timer\nSocketError: Operation canceled\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "googlemock", "gmock"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5085489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e612472218328a49bf50b5170e6647?s=128&d=identicon&r=PG&f=1", "display_name": "Qwer", "link": "https://stackoverflow.com/users/5085489/qwer"}, "edited": false, "score": 0, "creation_date": 1529571835, "post_id": 50958643, "comment_id": 88925525, "body": "It compiles ok but there is no control over Line returned by the arg of getLine function. As a result there is SEGFAULT at addEntry(...)  I tried to modify your EXPECT_CALL to add SetArgPointee: EXPECT_CALL(m_DataBaseMock, callGetLine(<i>,</i>).WillOnce(DoAll(SetArgPointee&lt; 1 &gt;(line.get()), Return...  but it result in gmock-actions.h:813:30: error: no match for &#39;operator=&#39; (operand types are &#39;Line&#39; and &#39;Line* const&#39;)      <i>::testing::get&lt;N&gt;(args) = value_; Line.hpp:30:16: note:   no known conversion for argument 1 from &#39;Line</i> const&#39; to &#39;const Line&amp;&#39; at: Line&amp; operator=(const Line &amp;rhs);"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "reply_to_user": {"reputation": 73, "user_id": 5085489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e612472218328a49bf50b5170e6647?s=128&d=identicon&r=PG&f=1", "display_name": "Qwer", "link": "https://stackoverflow.com/users/5085489/qwer"}, "edited": false, "score": 0, "creation_date": 1529596051, "post_id": 50958643, "comment_id": 88941711, "body": "I do not see <code>addEntry</code> definition, sorry, I can not help more."}, {"owner": {"reputation": 73, "user_id": 5085489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e612472218328a49bf50b5170e6647?s=128&d=identicon&r=PG&f=1", "display_name": "Qwer", "link": "https://stackoverflow.com/users/5085489/qwer"}, "edited": false, "score": 0, "creation_date": 1529862070, "post_id": 50958643, "comment_id": 89017497, "body": "Problem is not within addEntry function. The problem is that getLine mock returns OK but line argument is not assigned valid reference. As a result addEntry operates on nullptr unique_ptr. Anyway, thanks for help."}], "tags": [], "owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1529539489, "creation_date": 1529539489, "answer_id": 50958643, "question_id": 50958137, "link": "https://stackoverflow.com/questions/50958137/expect-call-for-a-mock-function-with-argument-of-type-unique-ptr-reference/50958643#50958643", "title": "EXPECT_CALL for a mock function with argument of type unique_ptr reference", "body": "<p>Solution consists of the trick, that is to delegate the <code>getLine()</code> method to a mock method (let\u2019s call it <code>callGetLine()</code>) that does not take move-only <code>std::unique_ptr</code> parameter:</p>\n\n<pre><code>MOCK_METHOD2(callGetLine, Result(const ShapeId&amp; shapeId, Line* line));\nResult getLine(const ShapeId&amp; shapeId, const std::unique_ptr&lt; Line &gt;&amp; line) {\n    return callGetLine(shapeId, line.get());\n}\n</code></pre>\n\n<p>Note that there's no need to define or declare <code>callGetLine()</code> in a base class. You only need to define it as a <code>MOCK_METHOD</code> in the mock class.</p>\n\n<p>Now you set expectation on the <code>callGetLine()</code> method.</p>\n\n<pre><code>EXPECT_CALL(m_DataBaseMock, callGetLine(_,NotNull()).WillOnce(Return(Result::OK));\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5085489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e612472218328a49bf50b5170e6647?s=128&d=identicon&r=PG&f=1", "display_name": "Qwer", "link": "https://stackoverflow.com/users/5085489/qwer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1529539489, "creation_date": 1529535195, "question_id": 50958137, "link": "https://stackoverflow.com/questions/50958137/expect-call-for-a-mock-function-with-argument-of-type-unique-ptr-reference", "title": "EXPECT_CALL for a mock function with argument of type unique_ptr reference", "body": "<p>I want to unit test following function:</p>\n\n<pre><code>void\nMyClass::add(const Shape&amp; shape)\n{\n   std::unique_ptr&lt; Line&gt; line;\n   if (m_DataBase.getLine(shape-&gt;getId(), line).ok())\n   {\n      addEntry(line-&gt;getDimensions());\n   }\n}\n</code></pre>\n\n<p>In order to do that I need to mock getLine function of the DataBase class:</p>\n\n<pre><code>class DataBase\n{\n public:\n   virtual Result getLine(const ShapeId&amp; shapeId, const std::unique_ptr&lt; Line &gt;&amp; line) = 0;\n...\n}\n</code></pre>\n\n<p>DataBase class mock:</p>\n\n<pre><code>class DataBaseMock\n{\n public:\n   MOCK_METHOD2(getLine, Result(const ShapeId&amp; shapeId, const std::unique_ptr&lt; Line &gt;&amp; line));\n...\n};\n</code></pre>\n\n<p>MyClass::add function test goes as follows:</p>\n\n<pre><code>MyClassTest::MyClassTest{\n    DataBaseMock m_DataBaseMock;\n    std::unique_ptr&lt; MyClass&gt; m_MyClass;\n}\n\nvoid MyClassTest::setUp(){\n    m_MyClass = std::unique_ptr&lt; MyClass &gt;(new MyClass(m_DataBaseMock));\n}\n\nvoid MyClassTest::Test_Add()\n{\n   Shape shape;\n   std::unique_ptr &lt;Line&gt; line = std::unique_ptr &lt;Line&gt; (new Line());\n\n   EXPECT_CALL(m_DataBaseMock, getLine(_,_)).WillOnce(DoAll(SetArgReferee&lt; 1 &gt;(line), Return(Result::OK);\n   CPPUNIT_ASSERT_NO_THROW(m_MyClass-&gt;add(shape));\n}\n</code></pre>\n\n<p>While above code works when getLine function takes shared_ptr as parameter, in case of unique_ptr there is following error at EXPECT_CALL line:</p>\n\n<pre><code>error: use of deleted function 'std::unique_ptr&lt;_Tp, _Dp&gt;::unique_ptr(const std::unique_ptr&lt;_Tp, _Dp&gt;&amp;) [with _Tp = Line; _Dp = std::default_delete&lt;Line&gt;]'\n    EXPECT_CALL(m_DataBaseMock, getLine(_,_)).WillOnce(DoAll(SetArgReferee&lt; 1 &gt;(line), Return(Result::OK);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 1, "creation_date": 1529535543, "post_id": 50958089, "comment_id": 88913655, "body": "Welcome to Stack Overflow. Please look at our <a href=\"https://stackoverflow.com/help\">intro pages</a>, with special attention to the page on <a href=\"https://stackoverflow.com/help/mcve\">minimal complete examples</a>. Simplify the code as much as you can -- while still reproducing the error -- and then give us the minimal code along with the file that it reads."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1529540965, "post_id": 50958089, "comment_id": 88914836, "body": "I need your help.  My debugger is out of commission at the moment, so could you run the debugger and step through your code?  Edit your post with the results of your debugging session.  Thanks."}, {"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1529555348, "post_id": 50958089, "comment_id": 88917608, "body": "See this <a href=\"https://stackoverflow.com/q/5605125/9254539\">post about why <code>eof()</code> in a loop condition is wrong</a>. <code>good()</code> in a loop condition is wrong for the same reason."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1529548404, "creation_date": 1529548404, "answer_id": 50959536, "question_id": 50958089, "link": "https://stackoverflow.com/questions/50958089/fails-to-check-for-string-in-file/50959536#50959536", "title": "Fails to check for string in file", "body": "<p>You are opening <code>prod_file</code> for output only, not for input, so there is nothing for <code>std::getline()</code> to read from it.</p>\n\n<p>You should NOT be trying to read from and write to the same file using a single stream.  Open the original file for reading with one stream, and create a new file for writing with a separate stream.  Use the first stream to scan the original file for existing entries, and use the second stream to write entries to the new file. When done, replace the original file with the new file if needed.</p>\n\n<p>Try something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;limits&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nstruct Product {\n    string Name;\n    int Quantity;\n};\n\nint main() {\n    string line;\n    char answer;\n    bool found, added = false, copyLines = true;\n    Product product;\n\n    ifstream prod_file(\"data/available.dat\");\n    ofstream prod_file_new(\"data/available_new.dat\", ios_base:::trunc);\n\n    do {\n        if (!prod_file || !prod_file_new) {\n            cerr &lt;&lt; \"Error: File inaccessible.\" &lt;&lt; endl;\n            return 0;\n        }\n\n        do {\n            cout &lt;&lt; \"Molq vavedete imeto na produkta: \" &lt;&lt; endl;\n            if (!getline(cin, product.Name)) {\n                if (!cin.eof()) {\n                    cerr &lt;&lt; \"Error: user input failure.\" &lt;&lt; endl;\n                    return 0;\n                }\n                break;\n            }\n\n            if (product.Name.length() &lt;= 30) {\n                break;\n            }\n\n            cerr &lt;&lt; \"Product name cannot exceed 30 characters.\" &lt;&lt; endl;\n        }\n        while (true);\n\n        if (cin.eof()) {\n            break;\n        }\n\n        if (product.Name.length() &lt; 30) {\n            product.Name.append(30 - product.Name.length(), '.');\n        }\n\n        //\n\n        found = false;\n\n        do {\n            if (!getline(prod_file, line)) {\n                if (!prod_file.eof()) {\n                    cerr &lt;&lt; \"Error: input file failure.\" &lt;&lt; endl;\n                    return 0;\n                }\n                break;\n            }\n\n            if (copyLines) {\n                if (!(prod_file_new &lt;&lt; line &lt;&lt; \"\\n\")) {\n                    cerr &lt;&lt; \"Error: output file failure.\" &lt;&lt; endl;\n                    return 0;\n                }\n            }\n\n            found = (line.find(product.Name) != string::npos);\n        }\n        while (!found);\n\n        if (!found) {\n            cout &lt;&lt; \"Molq vavedete kolichestvoto na produkta: \" &lt;&lt; endl;\n\n            if (!(cin &gt;&gt; product.Quantity)) {\n                cerr &lt;&lt; \"Error: user input failure.\" &lt;&lt; endl;\n                return 0;\n            }\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n\n            if (!(prod_file_new &lt;&lt; product.Name &lt;&lt; \"-\" &lt;&lt; product.Quantity &lt;&lt; \"\\n\")) {\n                cerr &lt;&lt; \"Error: output file failure.\" &lt;&lt; endl;\n                return 0;\n            }\n\n            added = true;\n        }\n\n        cout &lt;&lt; \"Do you want to add another product? Y/N\" &lt;&lt; endl &lt;&lt; endl;\n\n        cin &gt;&gt; answer;\n        while (answer != 'y' &amp;&amp; answer != 'Y' &amp;&amp; answer != 'n' &amp;&amp; answer != 'N') {\n            cin &gt;&gt; answer;\n        }\n\n        if (answer != 'Y' &amp;&amp; answer != 'y')\n            break;\n\n        if (!prod_file.seekg(0)) {\n            cerr &lt;&lt; \"Error: input file failure.\" &lt;&lt; endl;\n            return 0;\n        }\n\n        copyLines = false;\n    }\n    while (true);\n\n    prod_file.close();\n    prod_file_new.close();\n\n    if (added) {\n        if (remove(\"data/available.dat\") == 0) {\n            if (rename(\"data/available_new.dat\", \"data/available.dat\") == 0) {\n                cout &lt;&lt; \"Entries added.\" &lt;&lt; endl &lt;&lt; endl;\n            }\n            else {\n                cerr &lt;&lt; \"Error: renaming available_new.dat to available.dat\" &lt;&lt; endl &lt;&lt; endl;\n            }\n        }\n        else {\n            cerr &lt;&lt; \"Error: removing available.dat\" &lt;&lt; endl &lt;&lt; endl;\n        }\n    }\n    else {\n        remove(\"data/available_new.dat\");\n        cout &lt;&lt; \"No Entries added.\" &lt;&lt; endl &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Alternatively, read the existing file into memory, and then search and append to that as needed, and then write out a new file only if entries have been added, eg:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;limits&gt;\n#include &lt;cstdio&gt;\n\nusing namespace std;\n\nstruct Product {\n    string Name;\n    int Quantity;\n};\n\nint main() {\n    string line;\n    char answer;\n    bool found, added = false;\n    Product product;\n    vector&lt;Product&gt; products;\n\n    ifstream prod_file(\"data/available.dat\");\n    if (!prod_file) {\n        cerr &lt;&lt; \"Error: input file inaccessible.\" &lt;&lt; endl;\n        return 0;\n    }\n\n    while (getline(prod_file, line)) {\n        istringstream iss(line);\n        if (!(getline(iss, product.Name, '-') &amp;&amp; (iss &gt;&gt; product.Quantity))) {\n            cerr &lt;&lt; \"Error: input file malformed.\" &lt;&lt; endl;\n            return 0;\n        }\n        products.push_back(product);\n    }\n\n    if (!prod_file) {\n        cerr &lt;&lt; \"Error: input file failure.\" &lt;&lt; endl;\n        return 0;\n    }\n\n    prod_file.close();\n\n    do {\n        do {\n            cout &lt;&lt; \"Molq vavedete imeto na produkta: \" &lt;&lt; endl;\n            if (!getline(cin, product.Name)) {\n                if (!cin.eof()) {\n                    cerr &lt;&lt; \"Error: user input failure.\" &lt;&lt; endl;\n                    return 0;\n                }\n                break;\n            }\n\n            if (product.Name.length() &lt;= 30) {\n                break;\n\n            cerr &lt;&lt; \"Product name cannot exceed 30 characters.\" &lt;&lt; endl;\n        }\n        while (true);\n\n        if (cin.eof()) {\n            break;\n        }\n\n        if (product.Name.length() &lt; 30) {\n            product.Name.append(30 - product.Name.length(), '.');\n        }\n\n        //\n\n        found = std::find_if(products.begin(), products.end(),\n            [&amp;](const Product &amp;p){ return (p.Name == product.Name); }\n            ) != products.end();\n\n        if (!found) {\n            cout &lt;&lt; \"Molq vavedete kolichestvoto na produkta: \" &lt;&lt; endl;\n\n            if (!(cin &gt;&gt; product.Quantity)) {\n                cerr &lt;&lt; \"Error: user input failure.\" &lt;&lt; endl;\n                return 0;\n            }\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n\n            products.push_back(product);\n            added = true;\n        }\n\n        cout &lt;&lt; \"Do you want to add another product? Y/N\" &lt;&lt; endl &lt;&lt; endl;\n\n        cin &gt;&gt; answer;\n        while (answer != 'y' &amp;&amp; answer != 'Y' &amp;&amp; answer != 'n' &amp;&amp; answer != 'N') {\n            cin &gt;&gt; answer;\n        }\n\n        if (answer != 'Y' &amp;&amp; answer != 'y')\n            break;\n    }\n    while (true);\n\n    if (added) {\n        ofstream prod_file_new(\"data/available_new.dat\", ios_base:::trunc);\n\n        if (!prod_file_new) {\n            cerr &lt;&lt; \"Error: output file inaccessible.\" &lt;&lt; endl;\n            return 0;\n        }\n\n        for (auto &amp;p : products) {\n            if (!(prod_file_new &lt;&lt; p.Name &lt;&lt; \"-\" &lt;&lt; p.Quantity &lt;&lt; \"\\n\")) {\n                cerr &lt;&lt; \"Error: output file failure.\" &lt;&lt; endl;\n                return 0;\n            }\n        }\n\n        prod_file_new.close();\n\n        if (remove(\"data/available.dat\") == 0) {\n            if (rename(\"data/available_new.dat\", \"data/available.dat\") == 0) {\n                cout &lt;&lt; \"Entries added.\" &lt;&lt; endl &lt;&lt; endl;\n            }\n            else {\n                cerr &lt;&lt; \"Error: renaming available_new.dat to available.dat\" &lt;&lt; endl &lt;&lt; endl;\n            }\n        }\n        else {\n            cerr &lt;&lt; \"Error: removing available.dat\" &lt;&lt; endl &lt;&lt; endl;\n        }\n    }\n    else {\n        cout &lt;&lt; \"No Entries added.\" &lt;&lt; endl &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9935143, "user_type": "registered", "profile_image": "https://graph.facebook.com/2102355543126793/picture?type=large", "display_name": "Angel Andreev", "link": "https://stackoverflow.com/users/9935143/angel-andreev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529548404, "creation_date": 1529534798, "question_id": 50958089, "link": "https://stackoverflow.com/questions/50958089/fails-to-check-for-string-in-file", "title": "Fails to check for string in file", "body": "<p>I have this school project of mine and I need some help to troubleshoot; I've debugged as far as if it goes into the while(prod_file.good()) loop and it does, it just fails to find an existing string within a file.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\n#define PROD_SIZE 22\n\nclass PRODUCT {\npublic:\n\n    string NAME;\n    string QUANTITY;\n\n} product;\n\n\nint main() {\n    int diff;\n    string length;\n    char answer = 0;\n    string line;\n    bool foundAndReplaced = false;\n\n    cout &lt;&lt; product.NAME.length() &lt;&lt; endl;\n    cout &lt;&lt; product.NAME;\n\n    fstream prod_file(\"data/available.dat\", ios::out | ios::app);\n    do {\n        if(prod_file.is_open()) {\n\n            cout &lt;&lt; \"Molq vavedete imeto na produkta: \\n\";\n            getline(cin, product.NAME);\n\n\n            if(product.NAME.length() &lt; 30) {\n                diff = 30 - product.NAME.length();\n\n                for(int i = 1; i &lt; diff; i++){\n                    product.NAME.append(\".\");\n                }\n            }\n            else if(product.NAME.length() &gt; 30) {\n                cout &lt;&lt; \"Product name cannot exceed 30 characters.\";\n                return 0;\n            }\n\n            //\n\n            cout &lt;&lt; \"Molq vavedete kolichestvoto na produkta: \\n\";\n\n            getline(cin, product.QUANTITY);\n\n\n\n            size_t pos;\n\n            while(prod_file.good()) {\n                cout &lt;&lt; \"asd\\n\";\n                getline(prod_file, line);\n                pos = line.find(product.NAME);\n                cout &lt;&lt; \"stignah\\n\";\n                if(pos != string::npos) {\n                    prod_file &lt;&lt; product.NAME;\n                    prod_file &lt;&lt; \"-\" &lt;&lt; product.QUANTITY &lt;&lt; \"\\n\";\n                }\n            }\n\n        }\n\n        else {\n            cout &lt;&lt; \"Error: File inaccessible. (0x1)\";\n            return 0;\n        }\n\n        cout &lt;&lt; \"Do you want to add more products? Y/N \\n\\n\";\n        answer = 0;\n        while (answer != 'y' &amp;&amp; answer != 'Y' &amp;&amp; answer != 'n' &amp;&amp; answer != 'N') {\n        answer = _getch();\n        }\n    }\n\n    while(answer == 'Y' || answer == 'y');\n    prod_file.close();\n\n    cout &lt;&lt; \"Entries added.\" &lt;&lt; \"\\n\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>The idea of </p>\n\n<pre><code>size_t pos;\n\n            while(prod_file.good()) {\n                cout &lt;&lt; \"asd\\n\";\n                getline(prod_file, line);\n                pos = line.find(product.NAME);\n                cout &lt;&lt; \"stignah\\n\";\n                if(pos != string::npos) {\n                    prod_file &lt;&lt; product.NAME;\n                    prod_file &lt;&lt; \"-\" &lt;&lt; product.QUANTITY &lt;&lt; \"\\n\";\n                }\n            }\n</code></pre>\n\n<p>Is to check for a certain string in a file and if it does not find the string to add to the file, if it finds it then it will not add it. Any idea why it fails the if?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 1, "creation_date": 1529533336, "post_id": 50957837, "comment_id": 88913123, "body": "&quot;Hello_World&quot; is not a <code>string</code>. its a <code>const char*</code>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1529534974, "post_id": 50957837, "comment_id": 88913537, "body": "&quot;Hello_World&quot; is not a <code>const char*</code>, it&#39;s a <code>char[12]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1529551305, "post_id": 50958391, "comment_id": 88916798, "body": "That makes sense. Thanks."}], "tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": true, "score": 3, "last_activity_date": 1529537551, "last_edit_date": 1529537551, "creation_date": 1529537168, "answer_id": 50958391, "question_id": 50957837, "link": "https://stackoverflow.com/questions/50957837/boostvariant-with-bool-and-string/50958391#50958391", "title": "boost::variant with bool and string", "body": "<p><code>boost::variant</code> has one constructor overload for each stated type. In your first example there will be one overload for <code>bool</code> and one for <code>std::string</code>. You are now calling the constructor with a <code>char[n]</code> which can be imlicitly converted to both of them. So there is no perfect match but two candidates. But instead of telling you that the call is ambiguous, the compiler will choose the <code>bool</code> overload as the better match.</p>\n\n<p>Why? That is already perfectly answered <a href=\"https://stackoverflow.com/q/14770252/9883438\">in this question</a>.</p>\n\n<p>In your second example with <code>int</code> and <code>std::string</code> you are passing <code>bool</code>s and <code>char[n]</code> to the constructors. <code>bool</code> is implicitly convertable to <code>int</code> but not to <code>std::string</code>. <code>char[n]</code> is implicitly convertable to <code>std::string</code> but not to <code>int</code>. So the according constructors are called as there is only one candidate for each. </p>\n"}], "owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 50958391, "answer_count": 1, "score": 2, "last_activity_date": 1529537551, "creation_date": 1529532999, "last_edit_date": 1529534627, "question_id": 50957837, "link": "https://stackoverflow.com/questions/50957837/boostvariant-with-bool-and-string", "title": "boost::variant with bool and string", "body": "<p>I'm having trouble with <code>boost::variant</code> (using boost 1.67.0).</p>\n\n<p>When my template parameter list includes both <code>bool</code> and <code>std::string</code>, any variant objects which should be treated as string, seem to be implicitly bound to bool instead. For example:</p>\n\n<pre><code>using Varval = boost::variant&lt;bool, std::string&gt;;\n\nvoid main()\n{\n    std::vector&lt;Varval&gt; vect{ true, false, \"Hello_World\" };\n\n    std::cout &lt;&lt; \"[ \";\n    for (const auto &amp;v : vect)\n        std::cout &lt;&lt; v &lt;&lt; \"  \";\n    std::cout &lt;&lt; \"]\\n\";\n}\n</code></pre>\n\n<p>Outputs:</p>\n\n<blockquote>\n  <p>[ 1  0  1 ]</p>\n</blockquote>\n\n<p>whereas if I change nothing but the first template argument, from <code>bool</code> to <code>int</code>, it works fine:</p>\n\n<pre><code>using Varval = boost::variant&lt;int, std::string&gt;;\n\nvoid main()\n{\n    std::vector&lt;Varval&gt; vect{ true, false, \"Hello_World\" };\n\n    std::cout &lt;&lt; \"[ \";\n    for (const auto &amp;v : vect)\n        std::cout &lt;&lt; v &lt;&lt; \"  \";\n    std::cout &lt;&lt; \"]\\n\";\n}\n</code></pre>\n\n<p>Properly outputs:</p>\n\n<blockquote>\n  <p>[ 1  0  Hello_World ]</p>\n</blockquote>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "multithreading", "raytracing"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1529534149, "post_id": 50957825, "comment_id": 88913333, "body": "It is more likely to be a bug in your code than a pthread bug. You say you did this that and the other, but who is to say you did not make any mistakes with that? Describing what you did doesn&#39;t help us figure out what mistakes you may have made. Can you post a code example that reproduces the error?"}, {"owner": {"reputation": 310, "user_id": 2752471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/db0f898d45f128b4f8f755eeb6494bae?s=128&d=identicon&r=PG&f=1", "display_name": "user2752471", "link": "https://stackoverflow.com/users/2752471/user2752471"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1529886151, "post_id": 50957825, "comment_id": 89022670, "body": "No I cannot do so (how I would do with something so complex). Nonetheless, I posted some code in a previous post here: <a href=\"https://stackoverflow.com/questions/50401206/multithreading-raytracer-generating-artifacts-with-two-different-algorithms\" title=\"multithreading raytracer generating artifacts with two different algorithms\">stackoverflow.com/questions/50401206/&hellip;</a>"}], "owner": {"reputation": 310, "user_id": 2752471, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/db0f898d45f128b4f8f755eeb6494bae?s=128&d=identicon&r=PG&f=1", "display_name": "user2752471", "link": "https://stackoverflow.com/users/2752471/user2752471"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529532929, "creation_date": 1529532929, "question_id": 50957825, "link": "https://stackoverflow.com/questions/50957825/visual-artifacts-on-a-multithreaded-ray-tracing", "title": "Visual artifacts on a multithreaded ray-tracing", "body": "<p>I have been trying to port a RayTracer from a single thread version to a multithrea one. On most cases, it work as expected, but on two test cases, problems arise. In one, where there is a big triangle that covers most of the  screen, in some executions, its color, blue, turns into black</p>\n\n<p>In the other case, the problem always happens. The image that has a blue plane as the background, should be a smooth one. However this is what happens in a MT execution: <a href=\"https://postimg.cc/image/erm55m6ff/\" rel=\"nofollow noreferrer\">https://postimg.cc/image/erm55m6ff/</a></p>\n\n<p>If I tell my program to print some debugging information, this is what is produced:</p>\n\n<blockquote>\n  <p>BOTO x: 403 y 405 thread_id: 1</p>\n  \n  <p>BOTO x: 403 y 405 thread_id: 1</p>\n  \n  <p>BOTO x: 403 y 405 thread_id: 1</p>\n  \n  <p>BOTO x: 403 y 405 thread_id: 1</p>\n</blockquote>\n\n<p>In other words, it is running the ray-tracing procedure over a single pixel four times for some unknown reason. This does not happen to all the pixels m neither is a constant one. When I run again, the printed info will show one a single</p>\n\n<blockquote>\n  <p>BOTO x: 403 y 405 thread_id: 1</p>\n</blockquote>\n\n<p>line, but this will happen with other pixels. In other words, it's variable and it can be noted visually.</p>\n\n<p>This is the third time a open a thread here to discuss here. I received a bunch of suggestions that I followed. From these I realized that it's not a algorithm thing, because I tried two different ones. One that splits the screen in both halfs and one that gives each thread a different pixel (i.e thread0 -> pixel0, thread1 -> pixel1, thread0 -> pixel2, thread1 -> pixel 3, etc). The artifacts happens in both algorithms, although they vary a little bit (the split screen one produces less artifacts on the top of the screen, as the link I posted before shows).</p>\n\n<p>I followed the suggestion of allowing only one thread to render each time. Executed the tests with both algorithms, and in both there was no artifacts.</p>\n\n<p>Followed the suggestion of using completely separate copies of the data. Actually the original version used a single instance of an object RayTracer, but that instance was send to each thread, where it executed the ray-tracing subroutine. So it created all the needed data for each different thread, but there was a single memory pool where the pixel color were written. So while there was shared memory, there never was the case of a thread writing to a same position of this shared memory area that the other thread did. Ever. That's way I never was worried about using things as locks, semaphores or mutex. \nAnyway, I started to use two different instances, and so two different memory pools. Adjusted a couple of counters in the ray-tracing procedure and started to doing the file writing with a for loop, writing a pixel from thread 0 followed by pixel of thread 1, using the \"put\" member function (before I did a single call to \"write\" member function, taking advantage of a single memory pool).\nIt did not work either.</p>\n\n<p>Summoning what I have here it is a visual artifact induced by MT that was possible to realize that:</p>\n\n<p>1) Is not related the choice of the algorithms used.\n2) If only a single thread works, I obtain no artifacts. Which probably means the problem is not on the algorithm.\n3) It's not lock related. First there never really was memory sharing, since the common memory pool never had a single position accessed by both threads.</p>\n\n<p>So what can be? I remember a comment about non thread safe API, but I am only using standard c++ stuff (iostream, string, etc...). Might it be a pthread bug? I am using a quite old OS, compiler and libraries (about ten years old). I accept ANY suggestions!</p>\n"}, {"tags": ["c++", "windows-10", "codeblocks"], "comments": [{"owner": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1529533501, "post_id": 50957784, "comment_id": 88913172, "body": "don&#39;t know anything about codeblocks ,but have you tried giving anyFunction a return type ? Sometimes Formatting Tools get confused by syntax-errors (Intellisense in Visual Studio suffers sometimes from that)."}, {"owner": {"reputation": 13, "user_id": 9593284, "user_type": "registered", "profile_image": "https://graph.facebook.com/2095878543775082/picture?type=large", "display_name": "F&#248;rty Tw&#248; Bus Drivers", "link": "https://stackoverflow.com/users/9593284/f%c3%b8rty-tw%c3%b8-bus-drivers"}, "reply_to_user": {"reputation": 3834, "user_id": 517580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d04aa91a34f0171bcf5898f0b6d81101?s=128&d=identicon&r=PG", "display_name": "engf-010", "link": "https://stackoverflow.com/users/517580/engf-010"}, "edited": false, "score": 0, "creation_date": 1529534947, "post_id": 50957784, "comment_id": 88913532, "body": "Yeah, this happens in all codes for all functions, int, double, void, etc"}], "owner": {"reputation": 13, "user_id": 9593284, "user_type": "registered", "profile_image": "https://graph.facebook.com/2095878543775082/picture?type=large", "display_name": "F&#248;rty Tw&#248; Bus Drivers", "link": "https://stackoverflow.com/users/9593284/f%c3%b8rty-tw%c3%b8-bus-drivers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529532674, "creation_date": 1529532674, "question_id": 50957784, "link": "https://stackoverflow.com/questions/50957784/codeblocks-auto-indent-suddenly-stops-working-windows-10", "title": "codeblocks auto-indent suddenly stops working (Windows 10)", "body": "<p>All of a sudden, my codeblocks auto-indentation has stopped properly working.</p>\n\n<p>This affects all previous programs, new programs - it is not code-specific.</p>\n\n<p>I have tried all of the indentation settings on and off and in all sorts of combinations.</p>\n\n<p>The actual error is that curly braces all line up with the beginning of the most indented code.</p>\n\n<pre><code>anyFunction()\n{\n    variables;\n    for(int i(0); j&lt;variable; i++){\n        for(int j(0); j &lt; 100; j++){\n            code;\n            }\n            }\n            }\n</code></pre>\n\n<p><strong>THIS IS NOT A MISSING ; OR ANY CODE-RELATED ISSUE.</strong> </p>\n\n<p>This error now happens in all codes. </p>\n\n<p>Again, this is strange because it happened in the middle of coding, and I wasn't in any kind of settings when it did happen.</p>\n\n<p>Anybody have any ideas?</p>\n"}, {"tags": ["c++", "loops", "stdvector"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 1, "creation_date": 1529532995, "post_id": 50957737, "comment_id": 88913038, "body": "Btw, why did you forget all <code>;</code>s?"}, {"owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "edited": false, "score": 0, "creation_date": 1529534170, "post_id": 50957737, "comment_id": 88913340, "body": "Comments are written with <code>&#47;&#47;</code> or <code>&#47;* comment *&#47;</code> in C++"}, {"owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "edited": false, "score": 0, "creation_date": 1529536581, "post_id": 50957737, "comment_id": 88913884, "body": "the same reason why I use abstract variables to represent undefined functions that convey what i am trying to do...context."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "edited": false, "score": 0, "creation_date": 1529536659, "post_id": 50957814, "comment_id": 88913901, "body": "I am not trying to sort the first N elements.  I am trying to return the first N elements of a sorted vec.  So replace <code>std::partial_sort</code> with my original line then use your next two lines."}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "reply_to_user": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "edited": false, "score": 0, "creation_date": 1529538252, "post_id": 50957814, "comment_id": 88914258, "body": "@user18764 have a look at <a href=\"https://en.cppreference.com/w/cpp/algorithm/partial_sort\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/partial_sort</a> It considers <b>all</b> elements in the specified range, but stops sorting once it can assure that the N smallest elements are at their final location namely at the front."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": false, "score": 4, "last_activity_date": 1529532864, "creation_date": 1529532864, "answer_id": 50957814, "question_id": 50957737, "link": "https://stackoverflow.com/questions/50957737/best-way-to-slice-stdvector-inside-loop-with-dummy-variable/50957814#50957814", "title": "best way to slice std::vector inside loop with dummy variable", "body": "<p>This should work:</p>\n\n<pre><code>// sort only first limit elements\nstd::partial_sort(next.begin(), next.begin() + limit, next.end(), myComparator);\n\n// truncate\nnext.resize(limit);\n\n// update now\nnow = std::move(next);\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 6091064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/190dd9bcee16cd86a3ea1b1f5f75efc7?s=128&d=identicon&r=PG", "display_name": "user18764", "link": "https://stackoverflow.com/users/6091064/user18764"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529536827, "creation_date": 1529532391, "last_edit_date": 1529536827, "question_id": 50957737, "link": "https://stackoverflow.com/questions/50957737/best-way-to-slice-stdvector-inside-loop-with-dummy-variable", "title": "best way to slice std::vector inside loop with dummy variable", "body": "<p>I have the general code structure that iterates over a vector of structs, does some operations to the structs and appends them to a new vector of structs.  I then sort the new vector of structs.</p>\n\n<pre><code>vec&lt;myStruct&gt; now\nnow.push_back(someStruct)\n\nfor (i = 0; i &lt; end; i++){\n  vec&lt;myStruct&gt; next;\n  for (j = 0; j &lt; now.size(); j++){\n    for (k = 0; k &lt; end_k; k++){\n      myStruct anotherStruct = now[j];\n      anotherStruct = somefunction(anotherStruct, k);\n      next.push_back(anotherStruct);\n    }\n  }\n  std::sort(next.begin(), next.end(), myComparitor);\n\n  //return top_n structs from vec&lt;myStruct&gt;\n  vec&lt;myStruct&gt; dummy;\n  for (i = 0; i &lt; limit; i++){\n    dummy.push_back(next[i]);\n  }\n  now = dummy;\n}\n</code></pre>\n\n<p>My problem is mainly with the last part where I create a dummy vector that takes the top-n structs:</p>\n\n<pre><code>  //return top_n structs from vec&lt;myStruct&gt;\n  std::sort(next.begin(), next.end(), myComparitor);\n  vec&lt;myStruct&gt; dummy;\n  for (i = 0; i &lt; limit; i++){\n    dummy.push_back(next[i]);\n  }\n  now = dummy;\n</code></pre>\n\n<p>Is there a more effective way of slicing from a sorted vector?  More specifically, I am questioning the use of a dummy vector to store the top-n results.  For now, I would say that <code>std::sort</code> should be considered some general sorting algorithm (not taken literally).  Since top-n results are required, I could use a priority queue.  But the question about the dummy variable to store the intermediate results still holds.</p>\n"}, {"tags": ["c++", "constructor", "unique-ptr"], "comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1529532479, "post_id": 50957683, "comment_id": 88912867, "body": "What is the checklist of question you asked yourself when choosing to use unique-ptr vs the type itself, raw ptr, or sharedptr? I know &quot;are you sure you are barking up the right tree?&quot; responses can be annoying, but I dont often see people trying to make a collection of uniqueptr, that&#39;s counter to its purpose. unique_ptr is usually used to hand off ownership from something that allocates to a caller."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1529532696, "post_id": 50957683, "comment_id": 88912945, "body": "Actually, you are right. I probably should use shared_ptr in this case as m_TextureMap contains all the tiles and this definitely should be shared instead of unique.  I&#39;m not sure if shared_ptr will give me the same error, will try it out. Thanks!"}], "owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1529532100, "creation_date": 1529532100, "question_id": 50957683, "link": "https://stackoverflow.com/questions/50957683/no-appropriate-default-constructor-available-for-a-stdunique-ptrsdl-texture", "title": "No appropriate default constructor available for a std::unique_ptr&lt;SDL_Texture&gt; inside of std::unordered_map", "body": "<p>This is a continuation of my previous post: (Sorry for the chain of questions)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/50956579/no-appropriate-default-constructor-available-for-stdunique-ptr/50956667\">No appropriate default constructor available for std::unique_ptr</a></p>\n\n<p>I encountered a similar error, this time with <code>std::unique_ptr</code> in an <code>std::unordered_map</code> container: (Sorry that I have to put the whole code)</p>\n\n<pre><code>class cGraphics\n{\npublic:\n    //  Creator functions\n    std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; Create_Window(int xWin, int yWin);\n    std::unique_ptr&lt;SDL_Renderer, decltype(&amp;SDL_DestroyRenderer)&gt; Create_Renderer();\n    bool Create_TextureMap(std::string texid, std::string texres, int r, int g, int b);         //  Using helper function Create_Texture()\n\n    //  ctor &amp; dtor\n\n    cGraphics(int xWin, int yWin, std::string texid, std::string texres);\n    ~cGraphics();\n\n    //  Rendering\n    void ClearScreen();\n    bool SetRendererDrawColor(int r, int g, int b, int opaque);\n    void RenderTexture(std::string texres, int xDes, int yDes);\n    bool Show();\nprivate:\n    std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; m_Window;\n    std::unique_ptr&lt;SDL_Renderer, decltype(&amp;SDL_DestroyRenderer)&gt; m_Renderer;\n    std::unordered_map&lt;std::string, std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt;&gt; m_TextureMap;\n\n    //  Private default ctor\n    cGraphics() : m_Window(nullptr, SDL_DestroyWindow), m_Renderer(nullptr, SDL_DestroyRenderer) {}\n\n    //  Creator helper\n    SDL_Texture* CreateTextureRawPtr(std::string texres, int r, int g, int b);\n    std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt; CreateTexture(std::string texres, int r, int g, int b);\n};\n\ncGraphics::cGraphics(int xWin, int yWin, std::string texid, std::string texres) : cGraphics()\n{\n    SDL_Init(SDL_INIT_VIDEO);\n\n    m_Window = Create_Window(xWin, yWin);\n    m_Renderer = Create_Renderer();\n\n    if (m_Window == nullptr || m_Renderer == nullptr)\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }\n\n    /*if (m_Window == nullptr || m_Renderer == nullptr || !Create_TextureMap(texid, texres, 255, 255, 255))\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }*/\n}\n\ncGraphics::~cGraphics()\n{\n    IMG_Quit();\n    SDL_Quit();\n}\n\nvoid cGraphics::ClearScreen()\n{\n    SDL_RenderClear(m_Renderer.get());\n}\n\nbool cGraphics::SetRendererDrawColor(int r, int g, int b, int opaque)\n{\n    SDL_SetRenderDrawColor(m_Renderer.get(), r, g, b, opaque);      //  Should use reset here\n    return true;\n}\n\nvoid cGraphics::RenderTexture(std::string texres, int xDes, int yDes)\n{\n    SDL_Rect g_SrcRect = { 0, 0, 32, 32 };          //  hard-coded for test\n    SDL_Rect g_DesRect = { xDes, yDes, 32, 32 };\n    SDL_RenderCopy(m_Renderer.get(), m_TextureMap[texres].get(), &amp;g_SrcRect, &amp;g_DesRect);\n}\n\nbool cGraphics::Show()\n{\n    SDL_RenderPresent(m_Renderer.get());\n}\n\nstd::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; cGraphics::Create_Window(int xWin, int yWin)\n{\n    return std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt;(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, xWin, yWin, SDL_WINDOW_SHOWN), SDL_DestroyWindow);\n}\n\nstd::unique_ptr&lt;SDL_Renderer, decltype(&amp;SDL_DestroyRenderer)&gt; cGraphics::Create_Renderer()\n{\n    SDL_Renderer* temprenderer = SDL_CreateRenderer(m_Window.get(), -1, 0);\n    SDL_SetRenderDrawColor(temprenderer, 255, 255, 255, 0xff);\n    return std::unique_ptr&lt;SDL_Renderer, decltype(&amp;SDL_DestroyRenderer)&gt;(temprenderer, SDL_DestroyRenderer);\n}\n\n\nbool cGraphics::Create_TextureMap(std::string texid, std::string texres, int r, int g, int b)\n{\n    m_TextureMap.emplace(texid, CreateTexture(texres, r, g, b));\n    return true;\n}\n\nSDL_Texture* cGraphics::CreateTextureRawPtr(std::string texres, int r, int g, int b)\n{\n    SDL_Surface* temp = IMG_Load(texres.c_str());\n    //Set color key\n    SDL_SetColorKey(temp, SDL_TRUE,\n        SDL_MapRGB(temp-&gt;format, r, g, b));\n\n    SDL_Texture* pTexture = SDL_CreateTextureFromSurface(m_Renderer.get(), temp);\n\n    SDL_FreeSurface(temp);\n    return pTexture;\n}\n\nstd::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt; cGraphics::CreateTexture(std::string texres, int r, int g, int b)\n{\n    return std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt;(CreateTextureRawPtr(texres, r, g, b), SDL_DestroyTexture);\n}\n</code></pre>\n\n<p>The error message is:</p>\n\n<p><code>error C2512: 'std::unique_ptr&lt;SDL_Texture,void (__cdecl *)(SDL_Texture *)&gt;::unique_ptr': no appropriate default constructor available</code></p>\n\n<p>This is definitely similar to the previous question, with one exception: That unique pointer is inside of a container. I'm thinking that maybe I can put that <code>std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt;</code> in a wrapper class, and provide the compiler with a default ctor for the wrapper class. But this is definitely very cumbersome, and I'm not sure if there are better ways.</p>\n\n<p>Another thing is that I'm using a lot of <code>.get()</code>, which I now understand to be wrong, because it only returns a copy of the raw pointer inside of the unique pointer. Maybe I should use <code>.reset()</code>.</p>\n"}, {"tags": ["c++", "oop", "operator-overloading", "blas", "intel-mkl"], "answers": [{"tags": [], "owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "is_accepted": false, "score": 0, "last_activity_date": 1529659261, "creation_date": 1529659261, "answer_id": 50984731, "question_id": 50957530, "link": "https://stackoverflow.com/questions/50957530/intel-mkl-oop-wrapper-design-and-operator-overloading/50984731#50984731", "title": "Intel MKL OOP Wrapper Design and Operator Overloading", "body": "<p>I wrote a library for medical image reconstruction <a href=\"https://github.com/kvahed/codeare\" rel=\"nofollow noreferrer\">https://github.com/kvahed/codeare</a>. The matrix object there has a lot of overloaded operators and convenience function to allow one to write efficiently matlab-like code in c++. </p>\n\n<p>What you want to do for passing the data between MKL and other libraries / algorithms is in my view impossible. How do you want to distinguish 0 from 1e-18. What when you want to go to some numeric optimisation etc. This is premature optimisation that you are looking at. Even if you wanted to use sparsity, you could only do it say column-wise or row-wise, or like above note down, that you have an upper triangular form. But skipping individual 0s. Crazy. Of course copying 0s around doesn't feel right, but getting your algorithms optimised first and then worry about the above would be the way I'd go. </p>\n\n<p>Also don't forget, that a lot of libraries out there cannot handle sparse matrixes, at which point you would have to put in place a recopying of the non-zero part or some bad ass expensive iterator, that would deliver the results. </p>\n\n<p>Btw you would not only need the operator you noted down in your question but also the const variant; in other words:</p>\n\n<pre><code>template &lt;typename T&gt; class Matrix {\n  ...\n  T&amp; operator()(size_t n, size_t m);\n  const T&amp; operator()(size_t n, size_t m) const;\n  ...\n};\n</code></pre>\n\n<p>There is so much more expensive stuff to optimise than <code>std::copy</code>ing stuff. For example SIMD intrinsics ... \n<a href=\"https://github.com/kvahed/codeare/blob/master/src/matrix/SIMDTraits.hpp\" rel=\"nofollow noreferrer\">https://github.com/kvahed/codeare/blob/master/src/matrix/SIMDTraits.hpp</a></p>\n"}], "owner": {"reputation": 408, "user_id": 5929501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e55da6eb392a3fb30c6c122d2ed2ea3?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Schmitz", "link": "https://stackoverflow.com/users/5929501/thorsten-schmitz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529659261, "creation_date": 1529531177, "question_id": 50957530, "link": "https://stackoverflow.com/questions/50957530/intel-mkl-oop-wrapper-design-and-operator-overloading", "title": "Intel MKL OOP Wrapper Design and Operator Overloading", "body": "<p>I started writing an oop wrapper for Intels MKL library and came across some design issues. I hope you can help me find the \"best\" way to handle these issues. The issues are mainly concerning operator overloading and are not critical two the wrapper but effect readability and/or performance.</p>\n\n<hr>\n\n<p>The first issue is overloading operators considering how the blas functions are defined. As an example, matrix multiplication is defined as </p>\n\n<p><img src=\"https://latex.codecogs.com/png.latex?C&space;=&space;%5Calpha%5Ccdot&space;A%5Ccdot&space;B&plus;%5Cbeta%5Ccdot&space;C\" alt=\"eq\"> </p>\n\n<p>(<img src=\"https://latex.codecogs.com/png.latex?A,B,C\" alt=\"eq\"> being matrices, <img src=\"https://latex.codecogs.com/png.latex?%5Calpha,%5Cbeta\" alt=\"eq\"> scalars). \nNow i can overload <img src=\"https://latex.codecogs.com/png.latex?%5Calpha%5Ccdot&space;A\" alt=\"eq\"> , <img src=\"https://latex.codecogs.com/png.latex?A%5Ccdot&space;B\" alt=\"eq\"> and <img src=\"https://latex.codecogs.com/png.latex?A&plus;C\" alt=\"eq\"> alone, but for the implementation of BLAS I would need 4 function calls using overloaded operators instead of one. Or i could use a normal function call (which will be implemented anyway), but lose the \"natural\" way of writing the equation using overloaded operators, making it less readable (but still more readible than with those horrible BLAS names). </p>\n\n<hr>\n\n<p>The second issue is read and write access to the matrices. As example we can consider the following upper triangular matrix:</p>\n\n<p><img src=\"https://latex.codecogs.com/svg.latex?%5Cbegin%7Bbmatrix%7D&space;a_%7B1,1%7D&space;&amp;&space;a_%7B1,2%7D&space;&amp;&space;a_%7B1,3%7D&space;&amp;&space;a_%7B1,4%7D&space;%5C%5C&space;0&space;&amp;&space;a_%7B2,2%7D&space;&amp;&space;a_%7B2,3%7D&space;&amp;&space;a_%7B2,4%7D&space;%5C%5C&space;0&space;&amp;&space;0&space;&amp;&space;a_%7B3,3%7D&space;&amp;&space;a_%7B3,4%7D&space;%5C%5C&space;0&space;&amp;&space;0&space;&amp;&space;0&space;&amp;&space;a_%7B4,4%7D&space;%5Cend%7Bbmatrix%7D\" alt=\"mat\"></p>\n\n<p>This matrix would be stored efficiently in a 1D array like this (order may vary depending on row/column major order):</p>\n\n<p><img src=\"https://latex.codecogs.com/svg.latex?%5Cbegin%7Bbmatrix%7D&space;a_%7B1,1%7D&space;&amp;&space;a_%7B1,2%7D&space;&amp;&space;a_%7B1,3%7D&space;&amp;&space;a_%7B1,4%7D&space;&space;&amp;&space;a_%7B2,2%7D&space;&amp;&space;a_%7B2,3%7D&space;&amp;&space;a_%7B2,4%7D&space;&space;&amp;&space;&space;a_%7B3,3%7D&space;&amp;&space;a_%7B3,4%7D&space;&space;&amp;&space;a_%7B4,4%7D&space;%5Cend%7Bbmatrix%7D\" alt=\"mat\"></p>\n\n<p>Since a matrix has two indices, the easiest way to overload reading would be using</p>\n\n<pre><code>&lt;TYPE&gt; &amp; operator() (size_t row, size_t column);\n</code></pre>\n\n<p>instead of some work around with subscript operators. The problem is handling the zeros. They may not be stored in the array, but mathematically they exist. If I want to read these values in another function (not MKL) I may need to be able to return the zero to handle this (aside from storing the matrix type, which is done for BLAS anyway).</p>\n\n<p>Since () returns a reference, I can't return 0. I could make a dummy variable, but if I were to write to that value, I wouldn't have a upper triangular matrix anymore. So I would have to either change the matrix type, forbid writing to these elements, or ignore it (bad idea).</p>\n\n<p>To change the matrix type I would need to detect writing, that would require explicitly using some kind of proxy object.</p>\n\n<p>To prevent writing, I would probably have to do the same since I can't return a const value because the overload doesn't fit that definition. Alternatively I could forbid writing this way in general, but then I couldn't change the existing matrix itself, which I don't want.</p>\n\n<hr>\n\n<p>I hope you can give me some pointers on how to handle these issues and what design principles I may be forgetting/should take into account. As I said, they are not critical (I can write appropriate functions for everything instead of operators).</p>\n\n<p>T</p>\n"}, {"tags": ["c++", "gcc", "gdb", "32-bit"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1529531781, "post_id": 50957525, "comment_id": 88912622, "body": "What is the real problem you are facing? Why do you believe the address should be different?"}, {"owner": {"reputation": 13, "user_id": 8644195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aab3ca3dbc349556b4a0bcf081e4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "x7309wh", "link": "https://stackoverflow.com/users/8644195/x7309wh"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529531900, "post_id": 50957525, "comment_id": 88912654, "body": "No just curious"}, {"owner": {"reputation": 350, "user_id": 9723461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8fd01cd442e062d643682e3ac4d3b10?s=128&d=identicon&r=PG&f=1", "display_name": "MPops", "link": "https://stackoverflow.com/users/9723461/mpops"}, "edited": false, "score": 0, "creation_date": 1529532427, "post_id": 50957525, "comment_id": 88912851, "body": "Why do you say &quot;instead&quot;? Why don&#39;t you think the address should be <code>0xDEADBEEF</code>?"}, {"owner": {"reputation": 13, "user_id": 8644195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aab3ca3dbc349556b4a0bcf081e4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "x7309wh", "link": "https://stackoverflow.com/users/8644195/x7309wh"}, "edited": false, "score": 0, "creation_date": 1529533171, "post_id": 50957525, "comment_id": 88913082, "body": "No I&#39;ve seen examples that have address starting with 0x08 and mine are 0x56 and I was just wondering why, thats it. Its just question. Its not getting in the way of anything for me."}], "answers": [{"tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 3, "last_activity_date": 1529553068, "last_edit_date": 1529553068, "creation_date": 1529543627, "answer_id": 50959050, "question_id": 50957525, "link": "https://stackoverflow.com/questions/50957525/i-have-questions-about-gdb-memory-address/50959050#50959050", "title": "I have questions about gdb memory address", "body": "<blockquote>\n  <p>am wondering if its just because its a different distribution or am I missing some C libraries?</p>\n</blockquote>\n\n<p>This is because you built a <a href=\"https://en.wikipedia.org/wiki/Position-independent_code#Position-independent_executables\" rel=\"nofollow noreferrer\">position independent executable</a>, while other people didn't.</p>\n\n<p>The default load address for non-PIE binaries on 32-bit x86 systems is <code>0x08048000</code>. The default load address for PIE binaries under GDB is somewhere in the <code>0x5855....</code> region (it can be very random outside of GDB; if you <code>set disable-randomization off</code>, you'll observe that the executable starts \"jumping around\" to different addresses).</p>\n\n<p>Some newer distributions default to building PIE binaries. You can avoid this with:</p>\n\n<pre><code>gcc -no-pie main.c\n</code></pre>\n\n<p>The resulting binary should now start around <code>0x08048xxx</code>.</p>\n\n<p>You can check whether you have a PIE binary or not with <code>file a.out</code> -- it will say <code>executable</code> for non-PIE binary, and <code>shared library</code> for a PIE binary. See also <a href=\"https://stackoverflow.com/questions/34519521/gcc-creates-a-shared-object-instead-of-an-executable-binary\">this answer</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 8644195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aab3ca3dbc349556b4a0bcf081e4bc3?s=128&d=identicon&r=PG&f=1", "display_name": "x7309wh", "link": "https://stackoverflow.com/users/8644195/x7309wh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 50959050, "answer_count": 1, "score": 0, "last_activity_date": 1529553068, "creation_date": 1529531164, "last_edit_date": 1529533251, "question_id": 50957525, "link": "https://stackoverflow.com/questions/50957525/i-have-questions-about-gdb-memory-address", "title": "I have questions about gdb memory address", "body": "<p>When I use gcc to compile a C++ program to a 32 bit and I run it through gdb. When I disassemble the main function the gdb reads out the memory addresses EXAMPLE: 0x585583d0 and in other peoples examples of 32 bit it reads out  0x080483d0. Im using Kali linux and am wondering if its just because its a different distribution or am I missing some C libraries?</p>\n"}, {"tags": ["c++", "clang", "clang-static-analyzer", "clang-ast-matchers"], "owner": {"reputation": 11, "user_id": 9969886, "user_type": "registered", "profile_image": "https://graph.facebook.com/2420973547914541/picture?type=large", "display_name": "Naimesh Maddula", "link": "https://stackoverflow.com/users/9969886/naimesh-maddula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529530485, "creation_date": 1529530485, "question_id": 50957374, "link": "https://stackoverflow.com/questions/50957374/how-to-find-the-parent-initialization-of-a-variable-of-a-function-using-clang-as", "title": "How to find the parent initialization of a variable of a function using clang ast?", "body": "<p>Hi so I'm able to match function calls using ASTMatchers. But I need to find the statement where one of the parameters of this function has been initialized. How do I do that?</p>\n\n<pre><code>int main(){\nchar* str = \"abcde\";\nchar dest[19];\nsize_t len = strlen(str);\nstrncpy(dest,str,len+1);\n}\n</code></pre>\n\n<p>In the above example I found the call to <code>strncpy</code> and I need to find the initialization for <code>len</code> which should point to <code>strlen</code>.</p>\n\n<p>Is there any way to do it using Clang?\nThanks. </p>\n"}, {"tags": ["c++", "printing", "boost-test"], "comments": [{"owner": {"reputation": 217, "user_id": 4250401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Qdmf.png?s=128&g=1", "display_name": "esoterik", "link": "https://stackoverflow.com/users/4250401/esoterik"}, "edited": false, "score": 0, "creation_date": 1529532370, "post_id": 50957237, "comment_id": 88912834, "body": "could this be a namespace issue; maybe the PREDICATE version calls the predicate in a way that can&#39;t see your print operator? I know when I was trying to get boost to custom print things putting it in the correct namespace solved an issue."}, {"owner": {"reputation": 10076, "user_id": 1692107, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/xDo5Y.jpg?s=128&g=1", "display_name": "hivert", "link": "https://stackoverflow.com/users/1692107/hivert"}, "reply_to_user": {"reputation": 217, "user_id": 4250401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Qdmf.png?s=128&g=1", "display_name": "esoterik", "link": "https://stackoverflow.com/users/4250401/esoterik"}, "edited": false, "score": 0, "creation_date": 1529645802, "post_id": 50957237, "comment_id": 88957878, "body": "@esoterik: this is exactly the issue: operator&lt;&lt; must be defined in std ! Please post an answer and I&#39;ll happily accept it."}], "answers": [{"tags": [], "owner": {"reputation": 217, "user_id": 4250401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Qdmf.png?s=128&g=1", "display_name": "esoterik", "link": "https://stackoverflow.com/users/4250401/esoterik"}, "is_accepted": true, "score": 3, "last_activity_date": 1529690641, "creation_date": 1529690641, "answer_id": 50993452, "question_id": 50957237, "link": "https://stackoverflow.com/questions/50957237/boost-test-fails-to-find-custom-print/50993452#50993452", "title": "boost test fails to find custom print", "body": "<p>BOOST::test requires the console output operator&lt;&lt; to be in the std namespace</p>\n\n<pre><code>namespace std\n{\n    ostream &amp;operator&lt;&lt;(...)\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 10076, "user_id": 1692107, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/xDo5Y.jpg?s=128&g=1", "display_name": "hivert", "link": "https://stackoverflow.com/users/1692107/hivert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 0, "accepted_answer_id": 50993452, "answer_count": 1, "score": 1, "last_activity_date": 1535791637, "creation_date": 1529529903, "question_id": 50957237, "link": "https://stackoverflow.com/questions/50957237/boost-test-fails-to-find-custom-print", "title": "boost test fails to find custom print", "body": "<p>For some reason <code>boost::test</code> can't manage to compile the following code</p>\n\n<pre><code>#define BOOST_TEST_MODULE EPUTests\n\n#include &lt;iostream&gt;\n#include &lt;boost/test/unit_test.hpp&gt;\n\nusing epu8 = uint8_t __attribute__((vector_size(16)));\n\nstd::ostream &amp;operator&lt;&lt;(std::ostream &amp;stream, epu8 const &amp;term) {\n    stream &lt;&lt; \"[\" &lt;&lt; unsigned(term[0]);\n    for (unsigned i = 1; i &lt; 16; ++i)\n        stream &lt;&lt; \",\" &lt;&lt; unsigned(term[i]);\n    stream &lt;&lt; \"]\";\n    return stream;\n}\n\nbool failtest(epu8 x) { return false; }\n\n\n//****************************************************************************//\nBOOST_AUTO_TEST_SUITE(EPU8_test)\n\nBOOST_AUTO_TEST_CASE(EPU8_equal) {\n    epu8 x {};\n    BOOST_CHECK_PREDICATE(failtest, (x));\n}\n\nBOOST_AUTO_TEST_SUITE_END()\n//****************************************************************************//\n</code></pre>\n\n<p>The error message is </p>\n\n<pre><code>In file included from /usr/include/boost/test/tools/floating_point_comparison.hpp:21:0,\n             from /usr/include/boost/test/tools/old/impl.hpp:21,\n             from /usr/include/boost/test/test_tools.hpp:46,\n             from /usr/include/boost/test/unit_test.hpp:18,\n             from boost_test_epu.cpp:4:\n/usr/include/boost/test/tools/detail/print_helper.hpp: In instantiation of 'struct boost::test_tools::tt_detail::print_log_value&lt;__vector(16) unsigned char&gt;':\n/usr/include/boost/test/tools/detail/print_helper.hpp:178:5:   required from 'std::ostream&amp; boost::test_tools::tt_detail::operator&lt;&lt;(std::ostream&amp;, const boost::test_tools::tt_detail::print_helper_t&lt;T&gt;&amp;) [with T = __vector(16) unsigned char; std::ostream = std::basic_ostream&lt;char&gt;]'\n/usr/include/boost/test/utils/lazy_ostream.hpp:66:29:   required from 'std::ostream&amp; boost::unit_test::lazy_ostream_impl&lt;PrevType, T, StorageT&gt;::operator()(std::ostream&amp;) const [with PrevType = boost::unit_test::lazy_ostream; T = boost::test_tools::tt_detail::print_helper_t&lt;__vector(16) unsigned char&gt;; StorageT = const boost::test_tools::tt_detail::print_helper_t&lt;__vector(16) unsigned char&gt;&amp;; std::ostream = std::basic_ostream&lt;char&gt;]'\nboost_test_epu.cpp:29:1:   required from here\n/usr/include/boost/test/tools/detail/print_helper.hpp:47:5: error: static assertion failed: Type has to implement operator&lt;&lt; to be printable\n BOOST_STATIC_ASSERT_MSG( (boost::has_left_shift&lt;std::ostream,T&gt;::value),\n</code></pre>\n\n<p>I understand that g++ is complaining that my <code>epu8</code> type is not printable. However I know it is because changing</p>\n\n<pre><code>    BOOST_CHECK_PREDICATE(failtest, (x));\n</code></pre>\n\n<p>by</p>\n\n<pre><code>    std::cout &lt;&lt; x &lt;&lt; std::endl;\n    BOOST_CHECK(failtest(x));\n</code></pre>\n\n<p>works as expected and print by vector variable correctly. </p>\n\n<p>The same error is reported with various version of clang++ and g++</p>\n\n<p>What am I doing wrong ?</p>\n"}, {"tags": ["c++", "class", "agent-based-modeling"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1529528104, "post_id": 50956837, "comment_id": 88911175, "body": "numberHunters is wrong.  It returns numberPreys."}, {"owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1529528289, "post_id": 50956837, "comment_id": 88911262, "body": "@stark I&#39;m correcting it in my main code also. Thanks"}, {"owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "reply_to_user": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1529528446, "post_id": 50956837, "comment_id": 88911332, "body": "I shall add that the issue with the display() function not working is still there,"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529528835, "post_id": 50956837, "comment_id": 88911467, "body": "<code>if (grid[i][j]-&gt;getType() == PREY)</code> is also wrong. It should be <code>if (grid[i][j] &amp;&amp; grid[i][j]-&gt;getType() == PREY)</code> . Same goes for the hunter count."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529530255, "post_id": 50956837, "comment_id": 88912045, "body": "@WhozCraig  It already checked for NULL.  I don&#39;t see a problem with this code.  What happens the calls are moved below the display loop?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529530608, "post_id": 50956837, "comment_id": 88912176, "body": "ok let me put this another way. Unless <b>every</b> position in your grid is occupied with either a hunter, a prey, or some other derivation of agent, the code I stated in my prior comment <i>is broken</i>. you can choose to believe that or not; but it doesn&#39;t make it any less true either way.  You invoke <i>undefined behavior</i> as soon as first null element is encountered. If <code>createOrganisms</code> gets a <code>count</code> that is not <i>precisely</i> worldsizey * worldsizex, that broken behavior is <i>guaranteed</i> on the first execution of either prey or hunter count calculation."}, {"owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529553242, "post_id": 50956837, "comment_id": 88917138, "body": "@WhozCraig You are right. I was invoking the function correctly, but the function was wrong.  I was filling the main code with lots of counters like this (without verifying for null), I&#39;m double checking so that I am not making the same mistake."}, {"owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "edited": false, "score": 0, "creation_date": 1529553285, "post_id": 50956837, "comment_id": 88917148, "body": "Whit the sugested change implemmented it works like I intended"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529553327, "post_id": 50956837, "comment_id": 88917156, "body": "@EloyRD I expected as such. I rewrote the entire app to use smart pointers for better RAII, as well as some loop restructuring. It works well, so I think you&#39;re set. Best of luck."}, {"owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1529553867, "post_id": 50956837, "comment_id": 88917254, "body": "@WhozCraig Thanks for the solution. I&#39;ll check tutorials on those topics (smart pointers and loop structures) to see what I can improve. I&#39;m learning a lot of C++ with this implementation, but my book of agent simulation with C is outdated."}], "owner": {"reputation": 124, "user_id": 4304456, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uXtMM.jpg?s=128&g=1", "display_name": "EloyRD", "link": "https://stackoverflow.com/users/4304456/eloyrd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529553533, "creation_date": 1529527862, "last_edit_date": 1529553533, "question_id": 50956837, "link": "https://stackoverflow.com/questions/50956837/unable-to-call-a-public-function-inside-of-another-public-function", "title": "Unable to call a public function inside of another public function", "body": "<p>(Edit: change suggested in the comments section now allows the desired behavior)</p>\n\n<p>I'm developing an agent-based simulation in C++, and so far I'm able to run 1 simulation and I transcribe the results manually. It consists of an Environment class with a 2-d array with agents (hunters and preys)</p>\n\n<p>To automate the data collection, I'm trying to implement some functions so that I can later transcribe relevant results of each simulation to a CSV file.</p>\n\n<p>The following code in Visual Studio generates the Environment, populates it, counts the agents and display an ASCI map of the hunters and preys with a legend.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;  // for rand\n#include &lt;ctime&gt;    // for time\n#include &lt;vector&gt;\n#include &lt;Windows.h&gt; //for color in output\n\nusing namespace std;\n\nconst int WORLDSIZEX = 100;\nconst int WORLDSIZEY = 30;\n\nenum AgentType { PREY, HUNTER };\n\nclass Environment;\n\nclass Agent {\npublic:\n    Agent(Environment* aWorld, int xcoord, int ycoord);\n    virtual ~Agent() { }\n    virtual AgentType getType() const = 0;\n    virtual char representation() const = 0;\n\nprotected:\n    int x;\n    int y;\n    Environment* world;\nprivate:\n};\n\nstruct Position {\n    int x;\n    int y;\n};\n\nclass Environment {\npublic:\n    Environment(unsigned int seed, int _id, int _initialPopulationPreys, int _initialPopulationHunmters);\n    ~Environment();\n    Agent* getAt(int x, int y) const; \n    void setAt(int x, int y, Agent* org);\n    void display();\n    Position randomPosition() const;\n    Position randomPositionHunter() const;\n    int numberPreys();\n    int numberHunters();\n\nprivate:\n    Agent* grid[WORLDSIZEX][WORLDSIZEY];\n\n    void createOrganisms(AgentType orgType, int count);\n    int id;\n\n    int timeStep;\n    int initialPopulationPreys;\n    int initialPopulationHunters;\n\n};\n\nclass Hunter : public Agent {\npublic:\n    Hunter(Environment* aWorld, int xcoord, int ycoord);\n    AgentType getType() const;\n    char representation() const;\n\nprivate:\n    bool altruistic;\n};\n\nclass Prey : public Agent {\npublic:\n    Prey(Environment* aWorld, int xcoord, int ycoord);\n    AgentType getType() const;\n    char representation() const;\n\nprivate:\n    int huntingDifficulty;\n};\n\nPrey::Prey(Environment* aWorld, int xcoord, int ycoord) : Agent(aWorld, xcoord, ycoord) { huntingDifficulty = int(rand() % 3); }\nAgentType Prey::getType() const { return PREY; }\nchar Prey::representation() const { return 'o'; }\n\nHunter::Hunter(Environment* aWorld, int xcoord, int ycoord) : Agent(aWorld, xcoord, ycoord) { }\nAgentType Hunter::getType() const { return HUNTER; }\nchar Hunter::representation()const { return 'X'; }\n\nAgent::Agent(Environment* aWorld, int xcoord, int ycoord) {\n    world = aWorld;\n    x = xcoord;\n    y = ycoord;\n    world-&gt;setAt(x, y, this);\n}\n\nEnvironment::Environment(unsigned int seed, int _id, int _initialPopulationPreys, int _initialPopulationHunters) {\n    srand(seed);\n    id = _id;\n\n    initialPopulationPreys = _initialPopulationPreys;\n    initialPopulationHunters = _initialPopulationHunters;\n\n    for (int i = 0; i &lt; WORLDSIZEX; i++) {\n        for (int j = 0; j &lt; WORLDSIZEY; j++) {\n            grid[i][j] = NULL;\n        }\n    }\n    timeStep = 0;\n    createOrganisms(PREY, initialPopulationPreys);\n    createOrganisms(HUNTER, initialPopulationHunters);\n}\n\nEnvironment::~Environment() {\n    for (int i = 0; i &lt; WORLDSIZEX; i++) {\n        for (int j = 0; j &lt; WORLDSIZEY; j++) {\n            if (grid[i][j] != NULL) {\n                delete grid[i][j];\n            }\n        }\n    }\n}\n\nAgent* Environment::getAt(int x, int y) const {\n    if ((x &gt;= 0) &amp;&amp; (x &lt; WORLDSIZEX) &amp;&amp; (y &gt;= 0) &amp;&amp; (y &lt; WORLDSIZEY)) {\n        return grid[x][y];\n    }\n    else {\n        return NULL;\n    }\n}\n\nvoid Environment::setAt(int x, int y, Agent* org) {\n    if ((x &gt;= 0) &amp;&amp; (x &lt; WORLDSIZEX) &amp;&amp; (y &gt;= 0) &amp;&amp; (y &lt; WORLDSIZEY)) {\n        grid[x][y] = org;\n    }\n}\n\n// Displays the world in ASCII.\nvoid Environment::display() {\n    int numPreys = 0;\n    int numHunters = 0;\n\n    HANDLE hstdout = GetStdHandle(STD_OUTPUT_HANDLE);\n    // Remember how things were when we started\n    CONSOLE_SCREEN_BUFFER_INFO csbi;\n    GetConsoleScreenBufferInfo(hstdout, &amp;csbi);\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n    for (int j = 0; j &lt; WORLDSIZEY; j++) {\n        for (int i = 0; i &lt; WORLDSIZEX; i++) {\n            if (grid[i][j] == NULL) {\n                cout &lt;&lt; \"_\";\n            }\n            else {\n                if (grid[i][j]-&gt;getType() == PREY) {\n                    SetConsoleTextAttribute(hstdout, 10);\n                    numPreys++;\n                }\n                else if (grid[i][j]-&gt;getType() == HUNTER) {\n                    SetConsoleTextAttribute(hstdout, 12);\n                    numHunters++;\n                }\n                cout &lt;&lt; grid[i][j]-&gt;representation();\n                SetConsoleTextAttribute(hstdout, csbi.wAttributes);\n            }\n        }\n        cout &lt;&lt; endl;\n    }\n    cout &lt;&lt; \"Preys 'o': \" &lt;&lt; numPreys &lt;&lt; \" Hunters 'X': \" &lt;&lt; numHunters &lt;&lt; endl;\n    cout &lt;&lt; \"Timestep:\" &lt;&lt; timeStep &lt;&lt; \" World ID:\" &lt;&lt; id &lt;&lt; endl;\n}\n\nPosition Environment::randomPosition() const {    // returns a random number in the range 0 to WORLDSIZEX - 1 (or WORLDSIZEY - 1)\n    Position p;\n    p.x = rand() % WORLDSIZEX;\n    p.y = rand() % WORLDSIZEY;\n    return p;\n}\n\nPosition Environment::randomPositionHunter() const { // returns a random number in the central fifth of the grid\n    Position p;\n    int subGridSizeX = WORLDSIZEX / 5;\n    int subGridSizeY = WORLDSIZEY / 5;\n\n    p.x = subGridSizeX * 1 + (rand() % (3 * subGridSizeX));\n    p.y = subGridSizeY * 2 + (rand() % subGridSizeY);\n    return p;\n}\n\nint Environment::numberPreys() {\n    int numPreys = 0;\n    for (int j = 0; j &lt; WORLDSIZEY; j++) {\n        for (int i = 0; i &lt; WORLDSIZEX; i++) {\n            if (grid[i][j] &amp;&amp; grid[i][j]-&gt;getType() == PREY) {\n                numPreys++;\n            }\n        }\n    }\n    return numPreys;\n}\n\nint Environment::numberHunters() {\n    int numHunters = 0;\n    for (int j = 0; j &lt; WORLDSIZEY; j++) {\n        for (int i = 0; i &lt; WORLDSIZEX; i++) {\n            if (grid[i][j] &amp;&amp; grid[i][j]-&gt;getType() == HUNTER) {\n                numHunters++;\n            }\n        }\n    }\n    return numHunters;\n}\n\n\nvoid Environment::createOrganisms(AgentType orgType, int count) {\n    int orgCount = 0;\n    while (orgCount &lt; count) {\n\n        Position p = randomPosition();\n        Position q = randomPositionHunter();\n\n        if (orgType == PREY) {\n            if (grid[p.x][p.y] == NULL) {           // Only put Organism in empty spot\n                orgCount++;\n                new Prey(this, p.x, p.y);       // Create a Prey and put it into the world\n            }\n        }\n        else if (orgType == HUNTER) {\n            if (grid[q.x][q.y] == NULL) {           // Only put Organism in empty spot\n                orgCount++;\n                new Hunter(this, q.x, q.y);     // Create a Hunter and put it into the world\n            }\n        }\n    }\n}\n\n\nint main() {\n    int initialPreys = 60;\n    int initialHunters = 15;\n    int id = 0;\n\n    //Creating the environment\n    int seed = time(0);\n    Environment myWorld(seed, id, initialPreys, initialHunters);\n\n    cout &lt;&lt; \"This is the setup of the environment for all the simulations\" &lt;&lt; endl;\n    myWorld.display();\n\n    char ch;\n\n    return 0;\n}\n</code></pre>\n\n<p>I would like to replace the Environment::display() function with:</p>\n\n<pre><code>void Environment::display() {\n    int numPreys = numberPreys();\n    int numHunters = numberHunters();\n\n        HANDLE hstdout = GetStdHandle(STD_OUTPUT_HANDLE);\n        // Remember how things were when we started\n        CONSOLE_SCREEN_BUFFER_INFO csbi;\n        GetConsoleScreenBufferInfo(hstdout, &amp;csbi);\n\n        cout &lt;&lt; endl &lt;&lt; endl;\n        for (int j = 0; j &lt; WORLDSIZEY; j++) {\n            for (int i = 0; i &lt; WORLDSIZEX; i++) {\n                if (grid[i][j] == NULL) {\n                    cout &lt;&lt; \"_\";\n                }\n                else {\n                    if (grid[i][j]-&gt;getType() == PREY) {\n                        SetConsoleTextAttribute(hstdout, 10);\n                    }\n                    else if (grid[i][j]-&gt;getType() == HUNTER) {\n                        SetConsoleTextAttribute(hstdout, 12);\n                    }\n                    cout &lt;&lt; grid[i][j]-&gt;representation();\n                    SetConsoleTextAttribute(hstdout, csbi.wAttributes);\n                }\n            }\n            cout &lt;&lt; endl;\n        }\n        cout &lt;&lt; \"Preys 'o': \" &lt;&lt; numPreys &lt;&lt; \" Hunters 'X': \" &lt;&lt; numHunters &lt;&lt; endl;\n        cout &lt;&lt; \"Timestep:\" &lt;&lt; timeStep &lt;&lt; \" World ID:\" &lt;&lt; id &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>But then, the function doesn't display anything and the console window closes after a while.</p>\n\n<p>My question: How can I call the counting functions inside of the display function?</p>\n"}, {"tags": ["c++", "vector", "erase"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1529528153, "post_id": 50956817, "comment_id": 88911204, "body": "You need to provide MCVE, you also need to explain what do you mean by &quot;doesn&#39;t work&quot;. Your code has <code>while</code> loop inside it, which I do not understand, and it also has a very serious issue - it is going to skip elements immediately after erased ones."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1529528213, "post_id": 50956889, "comment_id": 88911230, "body": "While your code seems to be correct, it is not an answer - it doesn&#39;t educate OP, it doesn&#39;t explain what&#39;s wrong with OP code, it just gives a magic incantation"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529530494, "post_id": 50956889, "comment_id": 88912129, "body": "erase-remove was there well before C++11. Of course, C++11 made it easier with lambdas, but it was always possible and encouraged. Also it is worth noting that original code with your fix, while correct, suffers from terrible performance degradation."}], "tags": [], "owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "is_accepted": true, "score": 1, "last_activity_date": 1529531065, "last_edit_date": 1529531065, "creation_date": 1529528130, "answer_id": 50956889, "question_id": 50956817, "link": "https://stackoverflow.com/questions/50956817/how-to-erase-an-element-hasnt-a-certain-character-in-vector-elements/50956889#50956889", "title": "how to erase an element hasn&#39;t a certain character in vector elements", "body": "<p>You could do it this way:</p>\n\n<pre><code>auto newEnd = std::remove_if(v.begin(), v.end(),\n    [](const auto&amp; s) { return s.find_first_of(\"xX\") == std::string::npos; });\nv.erase(newEnd, v.end());\n</code></pre>\n\n<p><code>remove_if</code> moves all elements <em>not</em> matching the condition to front, replacing those that satisfy the it. The condition here is satisfied when the lambda given as the third argument returns true. <code>newEnd</code> is the iterator pointing to the first element after those that are not removed.</p>\n\n<p>For example, if input is this: <code>{\"aaa\", \"bbx\", \"ccc\"}</code>, after call to <code>remove_if</code> the vector looks like this: <code>{\"aaa\", \"ccc\", &lt;used to be bbx&gt;}</code>.</p>\n\n<p>The second line removes all elements starting from<code>newEnd</code>. So in example above, you end up with <code>{\"aaa\", \"ccc\"}</code>.</p>\n\n<p>The condition here is a lambda which returns true for each element that contains neither <code>'x'</code> nor <code>'X'</code>.</p>\n\n<p>This is the same condition you tried - and is correct one. Problem with your original code different.</p>\n\n<p>Look at: <code>while(temp[k].find_first_of(\"xX\")!= string::npos)</code>. If the string <em>does not</em> contain <code>X</code>, the body of this nested loop will not be executed and nothing gets removed. Also, you could replace the loop with a simple <code>if</code> statement.</p>\n\n<p>There's another problem with the outer loop. You increment <code>k</code> each time, even if you've just removed an element. Consider this example: <code>{\"x\", \"x\"}</code>. When incrementing <code>k</code> each time, you will skip the second string and end up with <code>{\"x\"}</code>.</p>\n\n<p>The corrected code looks would look like this:</p>\n\n<pre><code>for(size_t k=0; k&lt;v.size(); )\n{\n     if(v[k].find_first_of(\"xX\") == std::string::npos)\n     {\n         v.erase(v.begin()+k);\n     }\n     else\n     {\n          ++k;\n     }\n}\n</code></pre>\n\n<p>Compare this with the first version. It's not only shorter, but also leaves much less room for bugs.</p>\n\n<p>As @Bob_ points out in comments, the first version is known as <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">erase-remove idiom</a>. It's a common thing to see in modern C++ (i. e. C++11 and newer), so it's worth getting used to it and using it.</p>\n"}], "owner": {"reputation": 1, "user_id": 8833267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jml3t.jpg?s=128&g=1", "display_name": "Ahmed Awaad", "link": "https://stackoverflow.com/users/8833267/ahmed-awaad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 50956889, "answer_count": 1, "score": -2, "last_activity_date": 1529531065, "creation_date": 1529527751, "question_id": 50956817, "link": "https://stackoverflow.com/questions/50956817/how-to-erase-an-element-hasnt-a-certain-character-in-vector-elements", "title": "how to erase an element hasn&#39;t a certain character in vector elements", "body": "<p>i found many answers for erase an element of vector has a certain character \nbut i tried to make some of these solutions to erase the element which hasn't that character but dosen't work</p>\n\n<pre><code> for(int k=0; k&lt;temp.size();k++)\n{\n     while(temp[k].find_first_of(\"xX\")!= string::npos)\n     {\n         temp.erase(temp.begin()+k);\n     }\n}\nvariables_print.push_back(temp);\n</code></pre>\n\n<p>here an example , these code erase the elements have char \"xX\" but i tried to make it  <strong>temp[K].find_first_not_of(\"xX\")</strong> and doesn't work</p>\n\n<p>also make it <strong>temp[K].find_first_of(\"xX\")== string::npos</strong> and doesn't work</p>\n\n<p>how to erase the elements haven't x or X characters </p>\n"}, {"tags": ["c++", "sdl", "unique-ptr"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 3, "creation_date": 1529528404, "post_id": 50956579, "comment_id": 88911312, "body": "As an aside, consider defining your own deleter manually (<code>struct Invoke_SDL_DestroyWindow { void operator()(SDL_WINDOW* p) const noexcept { SDL_DestroyWindow(p); } };</code>) and use that instead of lugging around additional pointers and indirecting through them."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1529529000, "post_id": 50956579, "comment_id": 88911535, "body": "What @Deduplicator says is very true. <code>std::unique_ptr</code> with a deleter function pointer is twice the size as one without it. It&#39;s a waste of space. You&#39;re lugging around an extra pointer that you never change, and it also makes it harder for the compiler to optimize (it might not be able to tell that the deleter function never changes). If it&#39;s too much of a pain (IMO it is), write a simple wrapper that creates a deleter from a function pointer: <a href=\"https://godbolt.org/g/sM75NC\" rel=\"nofollow noreferrer\">godbolt.org/g/sM75NC</a> (C++17, but you can get close to that syntax before it)"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1529530143, "post_id": 50956579, "comment_id": 88911999, "body": "@Justin: Or maybe it might be easier just to <a href=\"https://en.cppreference.com/w/cpp/language/extending_std\" rel=\"nofollow noreferrer\">add an explicit template-specialization</a>: <code>template &lt;&gt; inline void std::default_delete&lt;SDL_Window&gt;::operator()(SDL_Window* p) const { SDL_DestroyWindow(p); }</code>. <a href=\"http://coliru.stacked-crooked.com/a/91120d518230a816\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/91120d518230a816</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 2, "creation_date": 1529530420, "post_id": 50956579, "comment_id": 88912107, "body": "@Deduplicator That is on the borderline of what&#39;s allowed. I would strongly recommend not doing it. It makes it very easy to make mistakes. Consider how <code>SDL_Window*</code> is created by <code>SDL_CreateWindow</code>, not via <code>new SDL_Window;</code>. Thus, after writing that code, if <code>std::make_unique&lt;SDL_Window&gt;(...)</code> were written, you&#39;d have undefined behavior. Simply put, that&#39;s extremely easy to mess up."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1529530529, "post_id": 50956579, "comment_id": 88912140, "body": "@Justin: As <code>SDL_Window</code> is incomplete, the call to <code>std::make_unique</code> will result in a compilation-error. No danger there."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1529530649, "post_id": 50956579, "comment_id": 88912197, "body": "@Deduplicator Yes, I assumed so. However, if you tried to do that in the general case, it&#39;s easy to go wrong. If I saw that code in a code review, I&#39;d be really skeptical."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1529527449, "post_id": 50956667, "comment_id": 88910885, "body": "You do not need <code>std::move</code> there - the <code>CreateWindow</code> function is already returning a temporary."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1529527450, "post_id": 50956667, "comment_id": 88910886, "body": "Aside: the <code>std::move</code> is unnecessary in all these bits of code."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 0, "creation_date": 1529527590, "post_id": 50956667, "comment_id": 88910940, "body": "Thanks! This definitely solves my problem. The delegation is more elegant I guess, but the key is that I forgot to inform the compiler how to initialize m_Window (I thought I could use the method inside of the ctor which is wrong)."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529527619, "post_id": 50956667, "comment_id": 88910959, "body": "@SergeyA @aschepler Thank you guys, yeah you are right, they return a temp object already so no need to <code>std::move</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1529527632, "post_id": 50956667, "comment_id": 88910966, "body": "@SergeyA I&#39;ve removed the moves, didn&#39;t see they were redundant, thanks.  As far as why delegating works, it is because the OP correctly initializes the pointer to <code>nullptr</code> in the default constructor."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1529527755, "post_id": 50956667, "comment_id": 88911025, "body": "@NathanOliver, sure I figured it out after I typed the comment (and even was within grace window to remove this evidence of my stupidity!) :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 1, "creation_date": 1529527796, "post_id": 50956667, "comment_id": 88911051, "body": "@NicholasHumphrey, as a matter of fact, initializer list is more elegant than delegating constructor."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529530491, "post_id": 50956667, "comment_id": 88912128, "body": "@SergeyA Thanks! Good to know. BTW can I ask an additional question? Suppose I put some <code>std::unique_ptr</code> of <code>SDL</code> objects (e.g. <code>SDL_Texture</code>, like <code>SDL_Window</code> they are just C structs, so no default ctor) into a container, say <code>std::unordered_map</code>, how can I avoid the same error msg? Do I need to wrap the <code>std::unique_ptr</code> with another class and write a default ctor? Seems to be too much though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 1, "creation_date": 1529530644, "post_id": 50956667, "comment_id": 88912196, "body": "@NicholasHumphrey use <code>insert</code> or <code>emplace</code> to insert elements, <code>find</code> for lookup. You won&#39;t be able to use subscript operator, unfortunately. You also seem to misunderstand the cause of the problem. It is not that C structs do not have default ctor - the do! It is the <code>unique_ptr</code> with deleter which does not have one."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 0, "creation_date": 1529530986, "post_id": 50956667, "comment_id": 88912331, "body": "Thanks for clarifying that, I didn&#39;t know C struct also has ctor, my fault~ Yes I&#39;m using <code>emplace</code> but get the same complaint (Basically I have a <code>std::unordered_map&lt;std::string, std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt;&gt; m_TextureMap</code>, and compiler complains that there is no default ctor for that unique pointer. The only way I can think about is to create a wrapper class for that unique pointer and then create a ctor for it, because I cannot use the same method in this post. Is there a better way?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 1, "creation_date": 1529531119, "post_id": 50956667, "comment_id": 88912382, "body": "@NicholasHumphrey Something like <code>m_TextureMap.emaplce(&quot;some string&quot;, function_that_returns_uinique_ptr());</code> should work."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 0, "creation_date": 1529531315, "post_id": 50956667, "comment_id": 88912454, "body": "@NathanOliver Thanks. I&#39;m indeed using something similar: <code>m_TextureMap.emplace(texid, CreateTexture(texres, r, g, b));</code> in which m_TextureMap is the <code>std::unordered_map</code> and <code>CreateTexture()</code> returns a unique pointer. I think the error is of similar reason I encountered in my main post?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 1, "creation_date": 1529531395, "post_id": 50956667, "comment_id": 88912489, "body": "@NicholasHumphrey You might be better off asking another question.  Without seeing a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> it&#39;s hard for me to say what the problem is."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "edited": false, "score": 0, "creation_date": 1529531515, "post_id": 50956667, "comment_id": 88912527, "body": "Sure I&#39;m going to open another post. :D"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1529527573, "last_edit_date": 1529527573, "creation_date": 1529527041, "answer_id": 50956667, "question_id": 50956579, "link": "https://stackoverflow.com/questions/50956579/no-appropriate-default-constructor-available-for-stdunique-ptr/50956667#50956667", "title": "No appropriate default constructor available for std::unique_ptr", "body": "<p>A <code>std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt;</code> is not default constructable.  That means in</p>\n\n<pre><code>cGraphics::cGraphics(int xWin, int yWin) ***\n{\n    m_Window = std::move(Create_Window(xWin, yWin));\n\n    if (m_Window == nullptr)\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }\n}\n</code></pre>\n\n<p>When you reach the part <code>***</code> the compiler is going to try and default construct <code>m_Window</code> since you didn't do so in the member initialization list.  That attempt from the compiler ro default construct <code>m_Window</code> is what causes the error.  We can fix this by moving <code>m_Window = std::move(Create_Window(xWin, yWin));</code> out of the constructor body and putting it in the member initialization list like</p>\n\n<pre><code>cGraphics::cGraphics(int xWin, int yWin) : m_Window(Create_Window(xWin, yWin))\n{   \n    if (m_Window == nullptr)\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }\n}\n</code></pre>\n\n<p>If you don't want to do that then you can delegate to the default constructor and then assign to <code>m_Window</code> like you were doing originally.  That would look like</p>\n\n<pre><code>cGraphics::cGraphics(int xWin, int yWin) : cGraphics()\n{\n    m_Window = Create_Window(xWin, yWin);\n\n    if (m_Window == nullptr)\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1529527285, "creation_date": 1529527285, "answer_id": 50956717, "question_id": 50956579, "link": "https://stackoverflow.com/questions/50956579/no-appropriate-default-constructor-available-for-stdunique-ptr/50956717#50956717", "title": "No appropriate default constructor available for std::unique_ptr", "body": "<p>Here is how you defined your <code>unique_ptr</code>:</p>\n\n<pre><code>std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; m_Window;\n</code></pre>\n\n<p>That means, it's constructor has to be called with an <strong>instance</strong> of the custome deleter, in your case, function <code>SDL_DestroyWindow</code> - remember, you told the pointer what is deleter's type, not what the actual deleter (a function pointer in your case).</p>\n\n<p>To make this code work, you have to properly construct your pointer with a deleter instance, for example:</p>\n\n<pre><code>cGraphics::cGraphics(int xWin, int yWin) : \n                     m_Window{Create_Window(xWin, yWin)} {...}\n</code></pre>\n"}], "owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1794, "favorite_count": 1, "accepted_answer_id": 50956667, "answer_count": 2, "score": 3, "last_activity_date": 1529527869, "creation_date": 1529526663, "last_edit_date": 1529527869, "question_id": 50956579, "link": "https://stackoverflow.com/questions/50956579/no-appropriate-default-constructor-available-for-stdunique-ptr", "title": "No appropriate default constructor available for std::unique_ptr", "body": "<p>This is a continuation of my previous post. Since it has already been closed I decided to make a new post. I removed half of the code to make it more readable.</p>\n\n<p>Some of the posts I read:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24251747/smart-pointers-with-sdl\">Smart pointers with SDL</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/48672399/is-it-possible-to-use-sdl2-with-smart-pointers\">Is it possible to use SDL2 with smart pointers?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/29424877/couple-of-questions-about-sdl-window-and-unique-ptr\">Couple of questions about SDL_Window and unique_ptr</a></p>\n\n<pre><code>class cGraphics\n{\npublic:\n    //  Creator functions\n    std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; Create_Window(int xWin, int yWin);\n\n    //  ctor &amp; dtor\n    cGraphics() : m_Window(nullptr, SDL_DestroyWindow) {}\n    cGraphics(int xWin, int yWin);\n    ~cGraphics();\nprivate:\n    std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; m_Window;\n\n};\n\ncGraphics::cGraphics(int xWin, int yWin)\n{\n    m_Window = std::move(Create_Window(xWin, yWin));\n\n    if (m_Window == nullptr)\n    {\n        throw \"SDL_Window or SDL_Renderer not ready!\";\n    }\n}\n\ncGraphics::~cGraphics()\n{\n    IMG_Quit();\n    SDL_Quit();\n}\n\nstd::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; cGraphics::Create_Window(int xWin, int yWin)\n{\n    return std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt;(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, xWin, yWin, SDL_WINDOW_SHOWN), SDL_DestroyWindow);\n}\n</code></pre>\n\n<p>The compiler complains that:</p>\n\n<pre><code>'std::unique_ptr&lt;SDL_Window,void (__cdecl *)(SDL_Window *)&gt;::unique_ptr': no appropriate default constructor available\n</code></pre>\n\n<p>I understand that this error usually shows up when the compiler cannot locate a default constructor for some of the members. However this is not true as I explicitly declared a default value for the <code>std::unique_ptr</code>.</p>\n\n<p>If the compiler is actually complaining about <code>SDL_Window</code>, which is an incomplete type (a C struct), what can I do about this?</p>\n"}, {"tags": ["c#", "c++", ".net", "windows", "search"], "owner": {"reputation": 607, "user_id": 1689220, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2b50e9ea6783d2466f8bcb7c9ba30d46?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/1689220/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1529526422, "creation_date": 1529526422, "question_id": 50956532, "link": "https://stackoverflow.com/questions/50956532/how-to-obtain-search-result-snippets-from-windows-search", "title": "How to obtain search result snippets from Windows Search", "body": "<p>My goal is to obtain result snippets (a.k.a. query-biased summaries) from the Windows Search API (the same thing used by Explorer).</p>\n\n<p>Similar posts:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/8828088/1689220\">Less detail</a></li>\n<li><a href=\"https://stackoverflow.com/q/9285099/1689220\">Doesn't cover the Shell/COM approach</a></li>\n<li><a href=\"https://stackoverflow.com/q/6071766/1689220\">Also doesn't cover the Shell/COM approach</a></li>\n</ul>\n\n<p>My focus is on the <code>System.Search.QueryFocusedSummary</code> property (<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760171(v=vs.85).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/windows/desktop/bb760171(v=vs.85).aspx</a>), since it's the only (semi-)documented field that should provide what I need. I'm open to a <em>different</em> approach if it is feasible using only .NET (C#) or C++ native code.</p>\n\n<p>I have a working search tool, implemented in C++, that uses the <a href=\"https://msdn.microsoft.com/en-us/library/ms722784(v=vs.85).aspx\" rel=\"nofollow noreferrer\">OLE DB API</a> successfully to search\nthe local Windows machine (assuming indexing is enabled) and return results such as <code>System.ItemName</code>, <code>System.MIMEType</code>, <code>System.Size</code>, etc. As expected, I can\nalso obtain the <code>System.Search.AutoSummary</code> field, which is basically just the first N characters of human-readable files (like UNIX <code>head</code>). See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff684395(v=vs.85).aspx#qryidx_oledb\" rel=\"nofollow noreferrer\">this Microsoft page</a> for more.</p>\n\n<p><a href=\"https://stackoverflow.com/a/8947241/1689220\">If I understand correctly</a>, the <code>System.Search.QueryFocusedSummary</code> property is \"virtual\" in the sense that it is dynamically created by Windows (at some point in time), and not stored in the Index database. Therefore, it is not accessible using the OLE DB approach.</p>\n\n<p>Although Microsoft officially \"retired\" the Windows API Code Pack, this page (and others linking to it) describes how to use the Windows Search SDK. I followed the Search App example in the <a href=\"https://github.com/aybe/Windows-API-Code-Pack-1.1/blob/ae73c1294fe9d47c5052d090b945f69a6364e3a8/source/Samples/Shell/SearchApplication/CS/SearchApp/Window1.xaml.cs\" rel=\"nofollow noreferrer\">de facto Windows API Code Pack repository</a>, and added the <code>QueryFocusedSummary</code> property in place of one of the existing, extracted properties. This had no effect and the property is <em>still</em> empty for all search results.</p>\n\n<p>Does anyone have any insight into how to obtain search snippets from the Windows Search API? I'm concerned only with <em>local client Windows Search</em>.</p>\n"}, {"tags": ["c++", "sockets", "tcp", "tcpserver"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1529526705, "post_id": 50956504, "comment_id": 88910589, "body": "<a href=\"//stackoverflow.com/a/30655169\">Socket Programming -- recv() is not receiving data correctly</a>"}], "answers": [{"tags": [], "owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1529530551, "last_edit_date": 1529530551, "creation_date": 1529527659, "answer_id": 50956808, "question_id": 50956504, "link": "https://stackoverflow.com/questions/50956504/how-do-i-know-if-the-request-was-received-completely-using-tcp-sockets/50956808#50956808", "title": "How do I know if the request was received completely using TCP sockets?", "body": "<blockquote>\n  <p>I was thinking about writing parser that might tell me if a full request was received, but I don't really know how to detect full request.</p>\n</blockquote>\n\n<p>When implementing a protocol, it is recommended to actually take a closer look at the specification of the protocol.</p>\n\n<p>If you read the <a href=\"https://tools.ietf.org/html/rfc2616\" rel=\"nofollow noreferrer\">HTTP 1.1 specification</a>, you will realize that each <a href=\"https://tools.ietf.org/html/rfc2616#section-4\" rel=\"nofollow noreferrer\">HTTP message</a> consists of headers and an optional body. The request is fully read once you have read the request headers and optional body. <strong>The headers end with an empty line <code>\\r\\n</code> sequence</strong>. Some HTTP methods, like <code>POST</code>, might have a body, in which case you'll find the length of the body in the <code>Content-Length</code> header, or you have to deal with the <a href=\"https://tools.ietf.org/html/rfc2616#section-3.6.1\" rel=\"nofollow noreferrer\">chunked transfer encoding</a>.</p>\n\n<p>Please study the specification for more details.</p>\n"}], "owner": {"reputation": 169, "user_id": 8521177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f18fa0fb4c99aba839ce387057cfa1b?s=128&d=identicon&r=PG&f=1", "display_name": "TwITe", "link": "https://stackoverflow.com/users/8521177/twite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50956808, "answer_count": 1, "score": 0, "last_activity_date": 1529530551, "creation_date": 1529526300, "question_id": 50956504, "link": "https://stackoverflow.com/questions/50956504/how-do-i-know-if-the-request-was-received-completely-using-tcp-sockets", "title": "How do I know if the request was received completely using TCP sockets?", "body": "<p>I have a multi-thread HTTP TCP server (written in Linux) and below is the function, that handles the client:</p>\n\n<pre><code>    void tcp_server::connection_handler(client* cl) {\n    // add client to the clients &lt;vector&gt;\n    mx.lock();\n\n    cl-&gt;set_id(static_cast&lt;int&gt;(clients.size()));\n    clients.push_back(*cl);\n    cout &lt;&lt; \"New client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; \" has been added to the clients list\" &lt;&lt; endl &lt;&lt; endl;\n\n    mx.unlock();\n\n    char read_buffer[1024];\n    ssize_t message_size;\n    string received_message;\n    while (accept_connections) {\n        memset(&amp;read_buffer, 0, sizeof(read_buffer));\n        received_message.clear();\n\n        message_size = recv(cl-&gt;sock, read_buffer, sizeof(read_buffer) - 1, 0);\n\n        if (message_size == 0) {\n            // client disconnected\n            cout &lt;&lt; \"Client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; \" has been disconnected\" &lt;&lt; endl;\n            close(cl-&gt;sock);\n\n            //remove client from the clients &lt;vector&gt;\n            mx.lock();\n\n            int client_index = find_client_index(cl);\n            clients.erase(clients.begin() + client_index);\n            cout &lt;&lt; \"Client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; \" has been removed from the clients list\" &lt;&lt; endl;\n\n            mx.unlock();\n\n            delete cl;\n\n            break;\n        }\n        if (message_size == -1) {\n            if (!accept_connections) {\n                cerr &lt;&lt; \"Unable to receive message from client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; \". Server has been shut down. Stop receiving messages from this client\" &lt;&lt; endl;\n            }\n            else {\n                cerr &lt;&lt; \"Error while receiving message from client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; endl;\n            }\n            cerr &lt;&lt; strerror(errno) &lt;&lt; endl;\n        }\n        else {\n            //message was received succesfully\n\n            cout &lt;&lt; \"[Server] Client's message has been received\" &lt;&lt; endl;\n            cout &lt;&lt; \"[Server] Client's message: \" &lt;&lt; endl;\n            cout &lt;&lt; \"----------------------------\" &lt;&lt; endl;\n            cout &lt;&lt; read_buffer &lt;&lt; endl;\n            cout &lt;&lt; \"----------------------------\" &lt;&lt; endl;\n\n            for (unsigned int i = 0; i &lt; message_size; i++) {\n                received_message.push_back(read_buffer[i]);\n            }\n\n            string response_message = convert_client_message(received_message);\n\n            if (send(cl-&gt;sock, response_message.c_str(), response_message.size(), 0) == -1) {\n                cout &lt;&lt; \"[Server] Message sending to client with id \" &lt;&lt; cl-&gt;get_id() &lt;&lt; \" failed\" &lt;&lt; endl;\n            }\n\n            cout &lt;&lt; \"[Server] Server's response: \" &lt;&lt; endl;\n            cout &lt;&lt; \"----------------------------\" &lt;&lt; endl;\n            cout &lt;&lt; response_message &lt;&lt; endl;\n            cout &lt;&lt; \"----------------------------\" &lt;&lt; endl &lt;&lt; endl;\n\n            cout &lt;&lt; \"[Server] Message has been sent to client\" &lt;&lt; endl &lt;&lt; endl;\n            cout &lt;&lt; \"============================\" &lt;&lt; endl &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>How can you see, there's a buffer, that contains client's message, only is 1024 bytes, when request can be bigger than 1024 bytes.\nSo, the problem is: I need to know if request was received completely.\nI was thinking about writing parser that might tell me if a full request was received, but I don't really know how to detect full request. </p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1529524868, "post_id": 50956158, "comment_id": 88909795, "body": "<i>&quot;I tried declaring the variable as a pointer and passing the window&#39;s address&quot;</i> - you were on the right path, show us how that didn&#39;t work instead. The error message here tells you that making a copy of <code>sf::RenderWindow</code> is forbidden. You <b>have to</b> use a pointer/reference."}, {"owner": {"reputation": 1, "user_id": 9969563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80574b08bfa43eb937cc15b4d66f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "throwaway1234", "link": "https://stackoverflow.com/users/9969563/throwaway1234"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1529525076, "post_id": 50956158, "comment_id": 88909886, "body": "I used a pointer, but the thing is, When I tried to use the functions of <code>sf::RenderWindow</code> it wouldn&#39;t let me, so I assumed it wouldn&#39;t be correct. Adding extra code"}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "reply_to_user": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1529525082, "post_id": 50956158, "comment_id": 88909888, "body": "Or you could dispense with the member variable completely and pass the <code>RenderWindow</code> by reference to your <code>draw()</code> function. In any case, as @LogicStuff writes, you cannot copy a <code>RenderWindow</code> object. If you think about it hard enough, you&#39;ll understand why..."}, {"owner": {"reputation": 1, "user_id": 9969563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80574b08bfa43eb937cc15b4d66f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "throwaway1234", "link": "https://stackoverflow.com/users/9969563/throwaway1234"}, "edited": false, "score": 0, "creation_date": 1529525178, "post_id": 50956158, "comment_id": 88909926, "body": "I edited the code again, how would I go about drawing the sprite"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 0, "creation_date": 1529525227, "post_id": 50956158, "comment_id": 88909953, "body": "We use <code>-&gt;</code> to call a member function on an instance pointed-to by a pointer."}, {"owner": {"reputation": 1, "user_id": 9969563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80574b08bfa43eb937cc15b4d66f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "throwaway1234", "link": "https://stackoverflow.com/users/9969563/throwaway1234"}, "edited": false, "score": 0, "creation_date": 1529525247, "post_id": 50956158, "comment_id": 88909959, "body": "Oh! Thanks. Solved."}, {"owner": {"reputation": 1096, "user_id": 4477125, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JYZmH.jpg?s=128&g=1", "display_name": "Lorence Hernandez", "link": "https://stackoverflow.com/users/4477125/lorence-hernandez"}, "edited": false, "score": 0, "creation_date": 1529544141, "post_id": 50956158, "comment_id": 88915395, "body": "@throwaway1234 solved? how about the real error"}], "owner": {"reputation": 1, "user_id": 9969563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a80574b08bfa43eb937cc15b4d66f6c0?s=128&d=identicon&r=PG&f=1", "display_name": "throwaway1234", "link": "https://stackoverflow.com/users/9969563/throwaway1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529525155, "creation_date": 1529524745, "last_edit_date": 1529525155, "question_id": 50956158, "link": "https://stackoverflow.com/questions/50956158/cant-associate-an-sfrenderwindow-to-a-different-one", "title": "cant associate an sf::Renderwindow to a different one", "body": "<p>I have a class called stickyNotes, and in it I have a variable - <code>sf::RenderWindow windowPaint</code>, I want to assign that variable a window that I pass in with the constructor. I tried declaring the variable as a pointer and passing the window's address, but then I couldn't use its functions or do anything with it.</p>\n\n<p>Whenever I try doing that I get the error:</p>\n\n<blockquote>\n  <p>sf::RenderWindow::operator=(const sf::RenderWindow &amp;) (declared implicitly) cannot be referenced -- it is a deleted function</p>\n</blockquote>\n\n<p>The class:</p>\n\n<pre><code> class stickyNotes\n{\nprivate:\n    sf::RenderWindow* windowPaint;\n    void someFunction();\n    .....\n    .....\npublic:\n    stickyNotes(sf::RenderWindow);\n    ......\n    ......\n    ~stickyNotes();\n};\n</code></pre>\n\n<p>The constructor:</p>\n\n<pre><code>stickyNotes::stickyNotes(sf::RenderWindow wnd) {\n\n   this-&gt;windowPaint = &amp;wnd;\n}\n</code></pre>\n\n<p>someFunction()</p>\n\n<pre><code>void stickyNotes::someFunction() {\n    ....\n    windowPaint.draw(someSprite); &lt;--- doesn't work when I use a pointer in windowPaint\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1529525080, "post_id": 50956152, "comment_id": 88909887, "body": "After <code>column_number--;</code> you want to check against 0...6, not 1...7, don&#39;t you?"}, {"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1529525189, "post_id": 50956152, "comment_id": 88909934, "body": "Please only tag the language used."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1529525324, "post_id": 50956152, "comment_id": 88909997, "body": "When you used a <i>debugger</i>, which line is causing the issue?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9022438"}, "edited": false, "score": 0, "creation_date": 1529531604, "post_id": 50956280, "comment_id": 88912559, "body": "Thanks. The program works now. But why is a do while loop better than using goto?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1529532613, "post_id": 50956280, "comment_id": 88912909, "body": "@Ajesh In the vast majority of cases, regular looping constructs such as <code>while</code> or <code>for</code> are clearer and better structured.  There are very few cases where <code>goto</code> makes sense in C and practically none in C++."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1529532646, "post_id": 50956280, "comment_id": 88912922, "body": "@Ajesh Also, feel free to <a href=\"https://stackoverflow.com/help/accepted-answer\">accept this answer</a> if you found it useful."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": true, "score": 1, "last_activity_date": 1529525331, "creation_date": 1529525331, "answer_id": 50956280, "question_id": 50956152, "link": "https://stackoverflow.com/questions/50956152/input-logic-error-for-connect-4-game-in-c/50956280#50956280", "title": "Input logic error for Connect 4 game in C++", "body": "<p>You need to check if the column number is valid <strong>before</strong> doing anything else with it.</p>\n\n<p>Also, get rid of the <code>goto</code> and use a loop instead.</p>\n\n<pre><code>do {\n    bool valid = true;\n    std::cout &lt;&lt; \"Player \" &lt;&lt; player &lt;&lt; \": \";\n\n    std::cin &gt;&gt; column_number;\n\n    if((column_number &lt; 1) || (column_number &gt; 7))\n    {\n        std::cout &lt;&lt; \"That number was not between 1 and 7\" &lt;&lt; std::endl;\n        valid = false;\n        continue;\n    }\n\n    column_number--;\n\n    if(grid[0][column_number] != '0')\n    {\n        std::cout &lt;&lt; \"Column is full.\" &lt;&lt; std::endl;\n        valid = false;\n    }\n} while (!valid);\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9022438"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 50956280, "answer_count": 1, "score": -4, "last_activity_date": 1529525331, "creation_date": 1529524722, "last_edit_date": 1529525267, "question_id": 50956152, "link": "https://stackoverflow.com/questions/50956152/input-logic-error-for-connect-4-game-in-c", "title": "Input logic error for Connect 4 game in C++", "body": "<p>I have coded Connect 4 in C++. The program mostly works, but there is a logic error in the player_turn function.</p>\n\n<p>connect4.cpp:</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;stdlib.h&gt;\n\n    void setup_grid();\n    void display_grid();\n    void player_turn(char);\n    bool four_in_a_row(char);\n\n    char grid[6][7];\n\n    int main()\n    {\n        char player = '1';\n\n        setup_grid();\n        system(\"cls\");\n\n        while(true)\n        {       \n            display_grid();\n            player_turn(player);\n\n            if(four_in_a_row(player))\n            {\n                system(\"cls\");\n                display_grid();\n                std::cout &lt;&lt; \"Player \" &lt;&lt; player &lt;&lt; \" has won!\" &lt;&lt; std::endl;\n                goto end;\n            }\n\n            if(player == '1')\n                player = '2';\n            else if(player == '2')\n                player = '1';\n\n            system(\"cls\");\n        }\n\n    end:\n        std::cin.get();\n        std::cin.get();\n        return 0;\n    }\n\n    void setup_grid()\n    {   \n        for(int i = 0; i &lt; 6; i++)\n            for(int j = 0; j &lt; 7; j++)\n                grid[i][j] = '0';\n    }\n\n    void display_grid()\n    {\n        std::cout &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Enter a column number (1-7) to put a piece into that column.\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; std::endl;\n\n        for(int i = 0; i &lt; 6; i++)\n        {\n            for(int j = 0; j &lt; 7; j++)\n                std::cout &lt;&lt; grid[i][j] &lt;&lt; ' ';\n\n            std::cout &lt;&lt; std::endl;\n        }\n\n        std::cout &lt;&lt; std::endl;\n    }\n\n    void player_turn(char player)\n    {\n        int column_number;\n\n    input:\n        std::cout &lt;&lt; \"Player \" &lt;&lt; player &lt;&lt; \": \";\n\n        std::cin &gt;&gt; column_number;\n\n        column_number--;\n\n        if(grid[0][column_number] != '0')\n        {\n            std::cout &lt;&lt; \"Column is full.\" &lt;&lt; std::endl;\n            goto input;\n        }\n        if((column_number &lt; 1) || (column_number &gt; 7))\n        {\n            std::cout &lt;&lt; \"That number was not between 1 and 7\" &lt;&lt; std::endl;\n            goto input;\n        }\n\n        for(int i = 0; i &lt; 6; i++)\n        {\n            if(grid[i + 1][column_number] != '0')\n            {\n                grid[i][column_number] = player;\n                break;\n            }\n            else if(i == 6)\n            {\n                grid[i][column_number] = player;\n                break;\n            }\n        }\n    }\n\n    bool four_in_a_row(char player)\n    {\n        // Horizontal check:\n\n        for(int i = 0; i &lt; 6; i++)\n\n            for(int j = 0; j &lt; 4; j++)\n\n                if(grid[i][j] == player &amp;&amp; grid[i][j+1] == player)\n                    if(grid[i][j+2] == player &amp;&amp; grid[i][j+3] == player)\n                        return true;\n\n        // Vertical check:\n\n        for(int i = 0; i &lt; 3; i++)\n\n            for(int j = 0; j &lt; 7; j++)\n\n                if(grid[i][j] == player &amp;&amp; grid[i+1][j] == player)\n                    if(grid[i+2][j] == player &amp;&amp; grid[i+3][j] == player)\n                        return true;\n\n        // Diagonal check:\n\n        for(int y = 0; y &lt; 3; y++)\n        {\n            for(int x = 0; x &lt; 7; x++)\n            {\n                if(grid[y][x] == player)\n                {\n\n                    // Diagonally left:\n                    if(grid[y+1][x-1] == player)\n                    {\n                        if(grid[y+2][x-2] == player)\n                            if(grid[y+3][x-3] == player)\n                                return true;\n                    }\n\n                    // Diagonally right: (There is an error here)\n                    if(grid[y+1][x+1] == player)\n                    {\n                        if(grid[y+2][x+2] == player)\n                            if(grid[y+3][x+3] == player)\n                                return true;\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n</code></pre>\n\n<p>If the user types in a 1-digit number above 7, the program puts the piece in the first column instead of printing \"That number was not between 1 and 7\".</p>\n\n<p>If the user types in 0 or an integer above 9, the program prints \"Column is full\" which should only print if the column actually exists.</p>\n"}, {"tags": ["c++", "string", "visual-studio", "csv", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1529524548, "post_id": 50956070, "comment_id": 88909646, "body": "Post code and sample input. And <code>while (getline(file, line,&#39;,&#39;))</code> won&#39;t work."}, {"owner": {"reputation": 143, "user_id": 7973972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eee4df5cb5a66952c76df133c69af12?s=128&d=identicon&r=PG&f=1", "display_name": "Cole", "link": "https://stackoverflow.com/users/7973972/cole"}, "edited": false, "score": 0, "creation_date": 1529524986, "post_id": 50956070, "comment_id": 88909844, "body": "@NeilButterworth I&#39;ve added sample code. Not sure how you want me to add sample excel input. It&#39;s just like <code>Name | Phone | Address</code>. And why won&#39;t <code>while (getline(file,line,&#39;,&#39;))</code> work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1529525086, "post_id": 50956070, "comment_id": 88909890, "body": "Well, it obviously won&#39;t work if your field separator is a <code>|</code>  and not a comma. But even if it is a comma, it won&#39;t work because a record does not end in a comma."}, {"owner": {"reputation": 143, "user_id": 7973972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eee4df5cb5a66952c76df133c69af12?s=128&d=identicon&r=PG&f=1", "display_name": "Cole", "link": "https://stackoverflow.com/users/7973972/cole"}, "edited": false, "score": 0, "creation_date": 1529525337, "post_id": 50956070, "comment_id": 88910000, "body": "Oh I just used the | to represent the end of a cell in excel. It&#39;s not like that in the excel file. I do believe it separates them by commas though. When I open the excel file up in notepad, the entries are as follows: <code>&quot;Name&quot;,&quot;Phone&quot;,&quot;Address&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 7973972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eee4df5cb5a66952c76df133c69af12?s=128&d=identicon&r=PG&f=1", "display_name": "Cole", "link": "https://stackoverflow.com/users/7973972/cole"}, "edited": false, "score": 0, "creation_date": 1529585916, "post_id": 50957172, "comment_id": 88934562, "body": "This works. One thing I noticed though is that when I copied the value of &quot;line&quot; from Visual Studio, it always ended in &quot;...&quot; when I pasted it somewhere. However, the actual value doesn&#39;t end in &quot;...&quot;. This happened with my method as well as this method."}], "tags": [], "owner": {"reputation": 46, "user_id": 9962950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f1cedb2c5b6d4c79443ac1107b4a76?s=128&d=identicon&r=PG", "display_name": "mostawk", "link": "https://stackoverflow.com/users/9962950/mostawk"}, "is_accepted": true, "score": 1, "last_activity_date": 1529536679, "last_edit_date": 1529536679, "creation_date": 1529529525, "answer_id": 50957172, "question_id": 50956070, "link": "https://stackoverflow.com/questions/50956070/reading-from-csv-file-into-vector-of-vector-of-strings-with-unknown-rows-colu/50957172#50957172", "title": "Reading from .csv file into vector of vector of strings with unknown # rows/columns", "body": "<p>I think you can try the std::stringstream to split the comma.\nHere is a sample code for reading csv file to a 2D vector:</p>\n\n<pre><code>vector&lt;vector&lt;string&gt;&gt; list;    \nifstream file(\"myfile.csv\");\nwhile(file){\n  string line;\n  if(!getline(file,line)) break;\n\n  istringstream ss(line);\n  vector&lt;string&gt; words;\n\n  while(ss){\n    string s;\n    if(!getline(ss, s, ',')) break;\n    words.push_back(s);\n  }\n  list.push_back(words);\n}\n</code></pre>\n\n<p>Testing:</p>\n\n<pre><code>for(size_t row = 0, maxrow = list.size(); row &lt; maxrow; row++)\n{\n    for (size_t col = 0, maxcol = list[row].size(); col &lt; maxcol; col++)\n        cout &lt;&lt; list[row][col] &lt;&lt; \", \";\n    cout &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 7973972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eee4df5cb5a66952c76df133c69af12?s=128&d=identicon&r=PG&f=1", "display_name": "Cole", "link": "https://stackoverflow.com/users/7973972/cole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "accepted_answer_id": 50957172, "answer_count": 1, "score": -1, "last_activity_date": 1529536679, "creation_date": 1529524408, "last_edit_date": 1529524850, "question_id": 50956070, "link": "https://stackoverflow.com/questions/50956070/reading-from-csv-file-into-vector-of-vector-of-strings-with-unknown-rows-colu", "title": "Reading from .csv file into vector of vector of strings with unknown # rows/columns", "body": "<p>I'm reading in from an excel file into a vector of vector of strings. However, the first line of my example excel file has 12 columns and when I try to read in that line into a single string in a while loop with <code>while(getline(file,line,'\\n'))</code>, it gets most of it but at the end of the string it finishes with \"...\" </p>\n\n<p>I'm assuming this is because the string cannot hold any more information. One workaround I tried was to simply use <code>while (getline(file, line,','))</code> and save each element in each column in its respective index in its vector. This way actually works better for me because I'm going to have to do this anyways so I might as well start off with doing it. However...doing it this way is complicated because I have no way of knowing when the pointer has moved to the next line. Without knowing when it's at the end of the line, I can't possibly put each element in the correct index of the vector. How can I know when the pointer is at the end of the line or is there a different way to approach this problem?</p>\n\n<p>This is in C++</p>\n\n<pre><code>vector&lt;vector&lt;string&gt;&gt; list;\nint size; //number of columns\nwhile(getline(file,line,','))\n{\nvector&lt;string&gt; test;\nlist.push_back(test);\nlist[i%size].push_back(line)\n}\n</code></pre>\n"}, {"tags": ["c++", "computer-science", "static-analysis"], "comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1529527165, "post_id": 50956017, "comment_id": 88910775, "body": "Are you sure those scores are supposed to be cyclomatic complexity? Neither one matches that definition."}, {"owner": {"reputation": 467, "user_id": 1038502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/988ace59bba7e0784d7ffcedc1d69a73?s=128&d=identicon&r=PG", "display_name": "user1038502", "link": "https://stackoverflow.com/users/1038502/user1038502"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1529527601, "post_id": 50956017, "comment_id": 88910945, "body": "I think so, I have updated the post with a screen shot"}], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 1000190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e212972f9e282e9bc9304e6c500fa6?s=128&d=identicon&r=PG", "display_name": "James from CppDepend Team", "link": "https://stackoverflow.com/users/1000190/james-from-cppdepend-team"}, "is_accepted": true, "score": 0, "last_activity_date": 1529599416, "creation_date": 1529599416, "answer_id": 50973684, "question_id": 50956017, "link": "https://stackoverflow.com/questions/50956017/cyclomatic-complexity-in-cppdepend/50973684#50973684", "title": "Cyclomatic complexity in CppDepend", "body": "<p>It's an issue in CppDepend, the new version 2018.2 planned in July 2018 will resolve it.\nThanks to Kristian who give us a sample to reproduce it.</p>\n"}], "owner": {"reputation": 467, "user_id": 1038502, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/988ace59bba7e0784d7ffcedc1d69a73?s=128&d=identicon&r=PG", "display_name": "user1038502", "link": "https://stackoverflow.com/users/1038502/user1038502"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50973684, "answer_count": 1, "score": 1, "last_activity_date": 1607805556, "creation_date": 1529524180, "last_edit_date": 1607805556, "question_id": 50956017, "link": "https://stackoverflow.com/questions/50956017/cyclomatic-complexity-in-cppdepend", "title": "Cyclomatic complexity in CppDepend", "body": "<p>I am trying to understand how cyclomatic complexity work, could someone explain to me why the following code gives a score of 3:</p>\n<pre><code>CommandLineAgruments Parse(int argc, char *argv[])\n{\n    CommandLineAgruments result;\n\n    std::string command;\n    std::vector&lt;std::string&gt; arguments;\n    for (int i = 0; i &lt; argc; i++)\n    {\n        std::string currentArg = std::string(argv[i]);\n        size_t index = currentArg.find('-');\n        if (index == 0)\n        {\n            // new commandline argument. Parse the old argument if we have one, then reset\n            if (command.size() != 0)\n            {\n                if (m_supportedCommandLines.find(command) != m_supportedCommandLines.end())\n                    m_supportedCommandLines[command](arguments, result);\n                else\n                    throw std::invalid_argument(&quot;Argument not supported : '&quot; + command + &quot;'&quot;);\n            }\n\n            command = currentArg;\n            arguments.clear();\n        }\n        else\n        {\n            arguments.push_back(currentArg);\n        }\n    }\n\n    // Parse last command if we have one\n    if (command.size() != 0)\n    {\n        if (m_supportedCommandLines.find(command) != m_supportedCommandLines.end())\n            m_supportedCommandLines[command](arguments, result);\n        else\n            throw std::invalid_argument(&quot;Argument not supported : '&quot; + command + &quot;'&quot;);\n    }\n\n    return result;\n}\n</code></pre>\n<p>And this function gives a score of 1:</p>\n<pre><code>void ParseOutputArgument(const std::vector&lt;std::string&gt; &amp;arguments, \nCommandLineAgruments &amp;commandLine)\n{\n    std::string arg = arguments[0];\n    std::transform(arg.begin(), arg.end(), arg.begin(), ::tolower);\n    if (arg == &quot;file&quot;)\n    {\n        if (arguments.size() != 2)\n            throw std::invalid_argument(&quot;Missing output file path&quot;);\n\n        commandLine.OutputFile = arguments[1];\n        commandLine.FileOutputType = CommandLineAgruments::OutputEnum::File;\n    }\n    else if (arg == &quot;console&quot;)\n    {\n        if (arguments.size() != 1)\n            throw std::invalid_argument(&quot;Invalid arguments for output&quot;);\n\n        commandLine.FileOutputType = CommandLineAgruments::OutputEnum::Console;\n    }\n    else\n    {\n        throw std::invalid_argument(&quot;'&quot; + arg + &quot;' is an invalid argument for output&quot;);\n    }\n}\n</code></pre>\n<p>I understand that function A is more complex then function B, but I find it hard to see how function B can be given a score of 1</p>\n<p><a href=\"https://i.stack.imgur.com/a897d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a897d.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["c++", "openssl", "libtomcrypt"], "comments": [{"owner": {"reputation": 21, "user_id": 9968777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0048c2ade8af69bfafd6cb7048b010?s=128&d=identicon&r=PG&f=1", "display_name": "rek0204", "link": "https://stackoverflow.com/users/9968777/rek0204"}, "edited": false, "score": 0, "creation_date": 1529594898, "post_id": 50955962, "comment_id": 88940933, "body": "Update: I have also tried using the libtom ecc_sign_hash() then ecc_verify_hash() methods, and I&#39;m getting the same results, failure to verify."}, {"owner": {"reputation": 21, "user_id": 9968777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0048c2ade8af69bfafd6cb7048b010?s=128&d=identicon&r=PG&f=1", "display_name": "rek0204", "link": "https://stackoverflow.com/users/9968777/rek0204"}, "edited": false, "score": 0, "creation_date": 1529685986, "post_id": 50955962, "comment_id": 88979395, "body": "Ok, figured out my problem, and it was an IDE issue, sort of. I was working in Visual Studio in debug mode.  A coworker got the code working using Cygwin, and that triggered my memory of previous issues with VS debug mode, so I switched to release mode and like magic the code worked.  That indicates to me that somewhere in the underlying code there are values that are used without initialization, so when VS debug sets those to a pattern value instead of 0, the code breaks."}], "owner": {"reputation": 21, "user_id": 9968777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b0048c2ade8af69bfafd6cb7048b010?s=128&d=identicon&r=PG&f=1", "display_name": "rek0204", "link": "https://stackoverflow.com/users/9968777/rek0204"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529523954, "creation_date": 1529523954, "question_id": 50955962, "link": "https://stackoverflow.com/questions/50955962/c-calling-libtomcrypt-ecc-sign-and-verify-with-data-created-using-openssl", "title": "C++ calling libtomcrypt ecc sign and verify with data created using OpenSSL", "body": "<p>I am looking for examples of calling the libtomcrypt ecc sign and verify code using inputs created using the OpenSSL command line. I have created private and public keys, using the prime256v1 curve, created a signature for a text file and verified it using the command line.  I have pulled those keys and the signature in to my C++ test driver and used the libtomcrypt methods to import those. I created the hash of the text file using the openssl command line and put that into my test driver as well, but when I call the libtomcrypt ecc_verify_hash method, it fails to verify.  At this point I have verified that the keys and the signature are importing correctly, so I'm not sure what I'm doing incorrectly.</p>\n\n<p>Here is the code for my test driver. Any help with this would be greatly appreciated.</p>\n\n<pre><code>int main ()\n{\n    ltc_mp = ltm_desc;\n\n    int idx = 0;\n\n    prng_state myPrng;\n\n    //unsigned char buf[4096];\n    //unsigned long b;\n    int         stat, err;\n    ecc_key pubKey;\n    ecc_key privKey;\n    void* sig;\n\n    static unsigned char MSG_STR[] = \"Test Message\";\n    const int MSG_STR_LEN = 12;\n\n    static unsigned char DGST[] = \n       \"C87D25A09584C040F3BFC53B5701199591DEB10BA\";\n    const int DGST_LEN = 41;\n\n    // the DER forms of the keys\n    static unsigned char PRIV_KEY[] =\n    {\n        0x30, 0x77, 0x02, 0x01, 0x01, 0x04, 0x20, 0x4f,\n        0xab, 0xef, 0xfb, 0x6a, 0xe4, 0xcd, 0xd5, 0x83,\n        0xb7, 0x39, 0x57, 0xf5, 0x63, 0xd4, 0x60, 0xa6,\n        0x83, 0x26, 0x56, 0xb8, 0x1e, 0x78, 0xee, 0x3d,\n        0xf0, 0xa9, 0xe8, 0x3b, 0x2c, 0x34, 0xc1, 0xa0,\n        0x0a, 0x06, 0x08, 0x2a, 0x86, 0x48, 0xce, 0x3d,\n        0x03, 0x01, 0x07, 0xa1, 0x44, 0x03, 0x42, 0x00,\n        0x04, 0x24, 0x72, 0xcb, 0x56, 0xb5, 0xae, 0x0a,\n        0x8e, 0x14, 0xc9, 0x89, 0x3d, 0xc8, 0x61, 0xb6,\n        0xed, 0x74, 0xa2, 0x2f, 0x15, 0xb7, 0x31, 0x14,\n        0xc6, 0xd5, 0x38, 0x71, 0xaa, 0x3f, 0x52, 0x5c,\n        0x8e, 0x3e, 0x59, 0xaa, 0x68, 0xcd, 0xcd, 0x8c,\n        0x2c, 0x63, 0x9b, 0xbc, 0x46, 0x79, 0x87, 0xd4,\n        0xdd, 0x4f, 0xbd, 0x97, 0x2b, 0xc2, 0x6a, 0x5d,\n        0x5c, 0xb5, 0xc7, 0x91, 0xaa, 0x15, 0xf8, 0x7c,\n        0x27\n    };\n    const int PRIV_KEY_LEN = 121;\n\n    static unsigned char PUB_KEY[] =\n    {\n        0x30, 0x59, 0x30, 0x13, 0x06, 0x07, 0x2a, 0x86,\n        0x48, 0xce, 0x3d, 0x02, 0x01, 0x06, 0x08, 0x2a,\n        0x86, 0x48, 0xce, 0x3d, 0x03, 0x01, 0x07, 0x03,\n        0x42, 0x00, 0x04, 0x24, 0x72, 0xcb, 0x56, 0xb5,\n        0xae, 0x0a, 0x8e, 0x14, 0xc9, 0x89, 0x3d, 0xc8,\n        0x61, 0xb6, 0xed, 0x74, 0xa2, 0x2f, 0x15, 0xb7,\n        0x31, 0x14, 0xc6, 0xd5, 0x38, 0x71, 0xaa, 0x3f,\n        0x52, 0x5c, 0x8e, 0x3e, 0x59, 0xaa, 0x68, 0xcd,\n        0xcd, 0x8c, 0x2c, 0x63, 0x9b, 0xbc, 0x46, 0x79,\n        0x87, 0xd4, 0xdd, 0x4f, 0xbd, 0x97, 0x2b, 0xc2,\n        0x6a, 0x5d, 0x5c, 0xb5, 0xc7, 0x91, 0xaa, 0x15,\n        0xf8, 0x7c, 0x27\n    };\n    const int PUB_KEY_LEN = 91;\n\n    static unsigned char OPENSSL_SIG[] =\n    {\n        0x30, 0x46, 0x02, 0x21, 0x00, 0xf3, 0x69, 0xd9,\n        0xaf, 0xad, 0xc7, 0x16, 0xac, 0x03, 0x9a, 0x5c,\n        0xae, 0xf7, 0x05, 0x86, 0x56, 0x24, 0x18, 0x09,\n        0x44, 0x3b, 0x07, 0xc9, 0xec, 0x6b, 0x72, 0x69,\n        0x18, 0x13, 0x10, 0xd7, 0x32, 0x02, 0x21, 0x00,\n        0xd5, 0xa1, 0x21, 0xc0, 0xf8, 0x5d, 0xb6, 0x6f,\n        0x46, 0x04, 0x9b, 0x2e, 0x1f, 0x96, 0xdc, 0x55,\n        0xd6, 0x5e, 0xc5, 0x14, 0x3c, 0x68, 0x70, 0x2a,\n        0x0c, 0x17, 0xad, 0xa1, 0xb8, 0x90, 0x0b, 0x07\n    };\n    const int OPENSSL_SIG_LEN = 72;\n\n    static unsigned char RAND_DATA[] =\n         \"8e2582c586c37099c3126170e48352c5416c41ef44972ec0708ef2caab08\"\n         \"583f10b277276c2507dee509a0c492bb806108590db675f6d908025999a6\"\n         \"7cc049290fe4ea0beb6b62004cbc82c580e5c00fa360d2f55b565535f6ec\"\n         \"41a2adfe83ffc3a2007ee1e1ba03b94fb777350e1c3a2caffcf6434534bd\"\n         \"8d29c2b62a9abf279c9a419a53ae54c3f22d0d0886ced81d7422bfb2493b\"\n         \"2231d8aad890d80f1dc42280e6803fa768d2a5ebaf954e91713d9e0d93d9\"\n         \"9749b7b29d8deac683fa930d39758212020e6ebc850993804ce6a6a969a3\"\n         \"261ad870040634bb2c506c911e06b20ab723d03df239c39ecf210fa67ab2\"\n         \"54573c5531a475c3e7158eb89074a77238182b9b72d0f4d1407cffb6d59c\"\n         \"53ec202a5b36bd649b2a6f31ad182072d549402df2e1ed8289ad08973444\"\n         \"1269bbccca6bc8899e8a750329c35a1c7a19281bf90c1575ebc5c197e19f\"\n         \"5cc4e3f3dd5f507df6457a6e39b4609a774c11e5b15210d2a49ee3dab9e3\"\n         \"fb89966b8fa83cc9c3045f67001f8447d9d035c512f3c1c6332c701b403c\"\n         \"52d424d116b78426e013e34b1c3b7dbf87669970799a719971e1583135db\"\n         \"727ea7297bf76d093fc4648fca0cf79dbd6144963061838178d8b32efe9d\"\n         \"ee5ff58e9c6e6fc922b9e94631c7d76e06a0d28fc1c40d634e65e332ed4d\"\n         \"ff85293e5a9f103410c5e974775be91a773508293b5fcd8672a1a30640a7\"\n         \"9e42755d2b5229292848b6e56b540ba2d1bd2e7e5d61895293c5e9ee83ce\"\n         \"bba4194a3191fc9f0e6924835761c512d0515bb63b334c5e98dc0d43e7ce\"\n         \"3ee11e46872e4d8d767104189429f5cbcf4fd8db7c3022dd5e5ae99f5a48\"\n         \"e595fdff8d9db23e3beebef219341c53aa7e6da2fad750d2a648b58a0151\"\n         \"d0b029cf5d1900b65c047b95dd3004a048be4611d49f6a96f3f054b3c476\"\n         \"4b2e1a521a57e46b3df537d8a442726ce0e318fc356538e888d8825edfa2\"\n         \"4c3c42716a628c331db6261455c9c5d4b98d466f4831d28a6f9eb2abe758\"\n         \"38f81ca42e06f362d3d263a9c0e7bffaff635fc640434b02dd2f740a4737\"\n         \"6180bbe217436b86d481f83825e28b92ab3444b7c3326e18d796ac9c2633\"\n         \"4d9cc9310f29f42dfe4d9b53bd40b7f1433708c87ad412bbf8b646ec1468\"\n         \"76a8083e08029de1b84f7ebb606bf84a59dc7f1b46df2cc5c0ba5008761d\"\n         \"9da2344434f524e7ad6e648964a761907c1a0ccb1fdee645ad7aaf4ea0c8\"\n         \"68fd39ae75b2bc41b8c86f5adaa2105f84e9b187c5a887c9e0d726383564\"\n         \"34fe79c7ae0460cc7eddffe3f3109f83cf7a80ba8432ff9dd9f0b664cb6d\"\n         \"fc215800e4253d0bfa1a74df5f7b52f0d0ac9e3ce1af856058d7c2b117ae\"\n         \"7a5a7cfac7ea592e88c8417d16fe10f4545af981e937fb194c26a2e44f3f\"\n         \"40ea26dd794ad8f2d16f36eb27c6eaa6780925e8d7e96dfdde483800a9b3\"\n         \"95c7a358\";\n    const int RAND_DATA_LEN = 2049;\n\n    ltm_desc.init(&amp;privKey.k);\n    ltm_desc.init(&amp;pubKey.pubkey.x);\n    ltm_desc.init(&amp;pubKey.pubkey.y);\n    ltm_desc.init(&amp;pubKey.pubkey.z);\n    ltm_desc.init(&amp;sig);\n\n\n    // set up the random number generator\n    if ((err = register_prng(&amp;yarrow_desc)) != CRYPT_OK) {\n        cout &lt;&lt; \"Failed to register prng. Err = \" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n\n    if ((err = yarrow_start(&amp;myPrng)) != CRYPT_OK) {\n        cout &lt;&lt; \"Yarrow failed to start! Err = \" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n    if ((err = yarrow_add_entropy(RAND_DATA, RAND_DATA_LEN, &amp;myPrng))\n        != CRYPT_OK) {\n        cout &lt;&lt; \"Failed adding entropy Err = \" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n\n    if ((err = yarrow_ready(&amp;myPrng)) != CRYPT_OK) {\n        cout &lt;&lt; \"Failed to set state to ready.  Err = \" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n\n    // read in the private key information\n    if ((err = ecc_import_openssl(PRIV_KEY, PRIV_KEY_LEN, &amp;privKey))\n         != CRYPT_OK)\n    {\n        cout &lt;&lt; \"Failed to import private key, err =\" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n    // read in the public key information\n    if ((err = ecc_import_openssl(PUB_KEY, PUB_KEY_LEN, &amp;pubKey))\n         != CRYPT_OK)\n    {\n        cout &lt;&lt; \"Failed to import public key, err =\" &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n\n    // try to verify the signature created using OpenSSL\n    // with the libtom verify method\n    if (((err = ecc_verify_hash(OPENSSL_SIG,\n                                OPENSSL_SIG_LEN,\n                                DGST,\n                                DGST_LEN,\n                                &amp;stat,\n                                &amp;pubKey)) != CRYPT_OK)) {\n        cout &lt;&lt; \"Failed to verify OpenSSL signature using libtom. Error =\"\n             &lt;&lt; err &lt;&lt; endl;\n        return err;\n\n    } else if (stat == 0) {\n        cout &lt;&lt; \"Failed to verify OpenSSL signature using libtom. Error =\"\n             &lt;&lt; err &lt;&lt; endl;\n        return err;\n    }\n    else {\n        cout &lt;&lt; \"Successfully verifed OpenSSL signature using libtom.\"\n             &lt;&lt; endl;\n    }\n\n    ecc_free (&amp;pubKey);\n    ecc_free (&amp;privKey);\n}\n</code></pre>\n"}, {"tags": ["c++", "opencl", "timing"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529525066, "post_id": 50955943, "comment_id": 88909882, "body": "<code>std::chrono::system_clock</code> gives you elapsed time. <code>clock</code> gives you CPU time. They are two totally different things. Which one you want depends on your goals."}], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 5121373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/682a61eacb08098831bb8a0e1bdbd9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tu\u1ea5n Ph\u1ea1m", "link": "https://stackoverflow.com/users/5121373/tu%e1%ba%a5n-ph%e1%ba%a1m"}, "edited": false, "score": 0, "creation_date": 1529524959, "post_id": 50956113, "comment_id": 88909834, "body": "Thank for your answer, can you explain further why should i use Kernel Profiling, instead of doing what i did ? In the methode there are 3 different kernels, and i really want to measure the total duration of them."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 622, "user_id": 5121373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/682a61eacb08098831bb8a0e1bdbd9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tu\u1ea5n Ph\u1ea1m", "link": "https://stackoverflow.com/users/5121373/tu%e1%ba%a5n-ph%e1%ba%a1m"}, "edited": false, "score": 0, "creation_date": 1529525105, "post_id": 50956113, "comment_id": 88909898, "body": "@Tu\u1ea5nPh\u1ea1m Host Profiling isn&#39;t strictly bad, per-se, but if you&#39;re trying to calculate precisely how long it&#39;s taking for your tasks to complete, you should prefer measuring at the device level, rather than at the host level. If you actually do need profiling at the host level, then use the same code you&#39;re already using, but change your <code>clock_t</code> alias to <code>std::chrono::steady_clock</code> or <code>std::chrono::high_resolution_clock</code> instead of (what you appear to already be using) <code>std::chrono::system_clock</code>."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 2, "last_activity_date": 1529524581, "creation_date": 1529524581, "answer_id": 50956113, "question_id": 50955943, "link": "https://stackoverflow.com/questions/50955943/measuring-elapsed-time-for-an-opencl-application/50956113#50956113", "title": "Measuring Elapsed Time for an OpenCL Application", "body": "<p>You should probably be using Kernel profiling.</p>\n\n<pre><code>cl_command_queue_properties properties[] {CL_QUEUE_PROPERTIES, CL_QUEUE_PROFILING_ENABLE, 0};\ncl_command_queue queue = clCreateCommandQueueWithProperties(context, device, properties, &amp;err);\n\n/*Later...*/\ncl_event event;\nclEnqueueNDRangeKernel(queue, kernel, /*...*/, &amp;event);\nclWaitForEvents(1, &amp;event);\ncl_ulong start, end;\nclGetEventProfilingInfo(event, CL_PROFILING_COMMAND_START, sizeof(cl_ulong), &amp;start, nullptr);\nclGetEventProfilingInfo(event, CL_PROFILING_COMMAND_END, sizeof(cl_ulong), &amp;end, nullptr);\n\nstd::chrono::nanoseconds duration{end - start};\n</code></pre>\n\n<p>At the end of that code, <code>duration</code> contains the amount of nanoseconds (reported as precisely as the device is capable; note that many devices don't have sub-microsecond precision) that passed between the beginning and end of execution of the kernel.</p>\n"}, {"comments": [{"owner": {"reputation": 622, "user_id": 5121373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/682a61eacb08098831bb8a0e1bdbd9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tu\u1ea5n Ph\u1ea1m", "link": "https://stackoverflow.com/users/5121373/tu%e1%ba%a5n-ph%e1%ba%a1m"}, "edited": false, "score": 0, "creation_date": 1529529711, "post_id": 50956246, "comment_id": 88911816, "body": "Hi , thanks for your answer, The reason i put onthe clFinish() and clFlush() because I want the readers to know that inside that method, i waited for the kernels to be fully executed and moved on, not just adding the kernel to the queue. And the initial question is, by flushing and finishing the queue, could i get the right answer with CPU clock time ?  In my case the difference between the two method is really significant, but i cant tell by sensing the time which one is true, for example its like 20 ms and 100ms."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 2, "last_activity_date": 1529528784, "last_edit_date": 1529528784, "creation_date": 1529525178, "answer_id": 50956246, "question_id": 50955943, "link": "https://stackoverflow.com/questions/50955943/measuring-elapsed-time-for-an-opencl-application/50956246#50956246", "title": "Measuring Elapsed Time for an OpenCL Application", "body": "<p>There are (at least) 3 ways to time OpenCL/CUDA execution:</p>\n\n<ol>\n<li>Use of CPU timers + queue flushing</li>\n<li>Use of OpenCL / CUDA events</li>\n<li>Use of an external profiler tool (e.g. whatever AMD offers or nvprof for nVIDIA cards)</li>\n</ol>\n\n<p>Your first example falls in the first category, but - you don't seem seem to be flushing the queues which the OpenCL function uses (I'm assuming that's a function enqueueing a kernel). So - unless the execution is somehow forced to be synchronous, what you would be measuring is the time it takes to enqueue the kernel and do whatever CPU-side work you do before or after that. That could explain the discrepancy with the clFlush/clFinish method. </p>\n\n<p>Another reason for the discrepancy could be setup/tear-down work (e.g. memory allocation or run-time internal overhead) which your second method times and your first does not.</p>\n\n<p>A final note is that all three methods will produce slightly different results due to either measurement inaccuracy or differences in the overheads required to make use of them. These differences may not be so slight if your kernels are small, though: In my experience, profiler-provided kernel execution times vs event-measured times, in CUDA and on nVIDIA Maxwell and Pascal cards can differ by dozens of microseconds. And the lessons of that fact are: 1. Try measuring on more data when relevant and possible, and normalizing by the amount of data. 2. Be consistent in how you measure execution times when making comparisons.</p>\n"}], "owner": {"reputation": 622, "user_id": 5121373, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/682a61eacb08098831bb8a0e1bdbd9b0?s=128&d=identicon&r=PG&f=1", "display_name": "Tu\u1ea5n Ph\u1ea1m", "link": "https://stackoverflow.com/users/5121373/tu%e1%ba%a5n-ph%e1%ba%a1m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "accepted_answer_id": 50956246, "answer_count": 2, "score": 1, "last_activity_date": 1529528784, "creation_date": 1529523888, "last_edit_date": 1529528739, "question_id": 50955943, "link": "https://stackoverflow.com/questions/50955943/measuring-elapsed-time-for-an-opencl-application", "title": "Measuring Elapsed Time for an OpenCL Application", "body": "<p>I know this question is asked several times, but in my application its critical to have the time right, so i might want to try again:</p>\n\n<p>I calculate the time for a kernel Method like this, first for CPU Clock time with clock_t;</p>\n\n<pre><code>clock_t start = clock(); // Or std::chrono::system_clock::now() for WALL CLOCK TIME\nopenCLFunction();\nclock_t end = clock; // Or std::chrono::system_clock::now() for WALL CLOCK TIME\ndouble time_elapsed = start-end;\n</code></pre>\n\n<p>And my openCLFunction():</p>\n\n<pre><code>{\n//some OpenCLKernelfunction\nclFlush(queue);\nclFinish(queue);\n}\n</code></pre>\n\n<p>There is a big different in results between two method, and to be honest i dont know which is right, because they are in miliseconds. Can i trust the CPU clock time on this ? Is there a definitive way to measure without concerning about the results ?(Note that I call two functions to finish my kernel function.) </p>\n"}, {"tags": ["c++", "gcc", "meson-build", "gcc-pedantic"], "comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 1, "creation_date": 1529523158, "post_id": 50955666, "comment_id": 88909078, "body": "You could dodge all this mess and conditionally set flags depending on the gcc version"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1529523230, "post_id": 50955666, "comment_id": 88909109, "body": "Have you tried std=gnu++11?"}, {"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1529610584, "post_id": 50955666, "comment_id": 88948956, "body": "@bolov I don&#39;t want to work around the issue but fix it. I consider adding version checks a dirty hack which gets even dirtier when other compilers (clang) and other targets come into play."}], "owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529522786, "creation_date": 1529522786, "question_id": 50955666, "link": "https://stackoverflow.com/questions/50955666/wno-pedantic-ignored-on-older-gcc", "title": "-Wno-pedantic ignored on older gcc", "body": "<p>I have a C++ application where I am using zero-arguments-variadic macros. However, I don't really like the standard conforming solution posted here on SO in various answers, but rather keep the GCC specific <code>##__VAR_ARGS__</code>.</p>\n\n<p>I'd like to catch as much warnings as possible though.</p>\n\n<p>My build system is meson and I passed the options <code>--buildtype=debugoptimized --warning_level=2 --werror=true</code> and specify <code>-Wno-pedantic</code> as an addtional project argument.</p>\n\n<p>Ob Ubuntu 18.04, gcc 7.3.0, meson 0.45.1 this adds the following options to the compiler: <code>-Wall -Wextra -Werror -Wpedantic -Wno-pedantic -std=c++11</code> and everything builds fine.</p>\n\n<p>The same code, the same options on CentOS 7.4.1708, gcc 4.8.5, meson 0.44.1 adds extactly the same options to the compiler but does not compile and I get the following error:</p>\n\n<p><code>ISO C99 requires rest arguments to be used</code> (for the variadic macros)</p>\n\n<p>It seems that <code>-Wno-pedantic</code> is ignored in this compiler.</p>\n\n<p>I can play around with the warning options a bit, but either on Ubuntu or CentOS the build is failing. When the Ubuntu build fails, the error message is a bit different:</p>\n\n<p><code>ISO C++11 requires at least one argument for the \"...\" in a variadic macro</code></p>\n\n<p>The only solution to make both builds succeed I found so far is using <code>meson --buildtype=plain --warning_level=1 -werror=true</code> and setting <code>-Wall -Wextra</code> as project arguments.</p>\n\n<p>So I'm not sure if this is a compiler issue, a meson issue or just some unfortunate version difference I'm hitting.</p>\n"}, {"tags": ["c++", "pdf", "winapi", "pdf-generation"], "comments": [{"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1529942359, "post_id": 50955639, "comment_id": 89047494, "body": "Can you share an example PDF illustrating the issue?"}, {"owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "reply_to_user": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1529949185, "post_id": 50955639, "comment_id": 89050882, "body": "@mkl done, but now I believe my problem it&#39;s with my PDF object not with the data of the font but I&#39;m still not sure."}, {"owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "edited": false, "score": 1, "creation_date": 1529953792, "post_id": 50955639, "comment_id": 89052933, "body": "Xpdf is reporting a problem with the xref <code>Internal Error: xref num 5 not found but needed, try to reconstruct&lt;0a&gt;</code>"}, {"owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "edited": false, "score": 1, "creation_date": 1529954259, "post_id": 50955639, "comment_id": 89053144, "body": "I think that&#39;s what the online validator is trying to tell you as well. The xref has mapped objects 5 &amp; 6 to the same byte offset 1081."}, {"owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "edited": false, "score": 1, "creation_date": 1529954476, "post_id": 50955639, "comment_id": 89053238, "body": "Also note there&#39;s some junk at the end of the contents stream (8 0 R), which ends with <code>ET 0\ufffd4Oendstream endobj</code>"}, {"owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "reply_to_user": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "edited": false, "score": 0, "creation_date": 1529955012, "post_id": 50955639, "comment_id": 89053466, "body": "@dwarring YOU ARE A HERO SIR, THANK YOU SO MUCH, I was going crazy with this. THANK YOU"}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "reply_to_user": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "edited": false, "score": 0, "creation_date": 1529986571, "post_id": 50955639, "comment_id": 89061543, "body": "@dwarring would you make that an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 4411, "user_id": 2105284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759991764080ee52a3dc02b3d88ec4fc?s=128&d=identicon&r=PG", "display_name": "dwarring", "link": "https://stackoverflow.com/users/2105284/dwarring"}, "is_accepted": true, "score": 2, "last_activity_date": 1530039645, "creation_date": 1530039645, "answer_id": 51049805, "question_id": 50955639, "link": "https://stackoverflow.com/questions/50955639/how-to-obtain-font-data-to-embed-in-a-pdf/51049805#51049805", "title": "How to obtain font data to embed in a PDF?", "body": "<p>The font emedding itself look ok. There's actually a lower-level error fetching the font objects.</p>\n\n<p>Attempting the view the PDF with Xpdf gives an error with the cross reference table: <code>xref num 5 not found but needed, try to reconstruct&lt;0a&gt;</code>.</p>\n\n<p>Looking at the cross reference table at the end of the PDF:</p>\n\n<p><code>\nxref\n0 10\n0000000000 65535 f \n0000242485 00000 n\n0000242426 00000 n\n0000000016 00000 n\n0000000155 00000 n \n0000001081 00000 n % Wrong should be 0000241738\n0000001081 00000 n<br>\n0000241929 00000 n \n0000242056 00000 n \n0000242353 00000 n\n</code></p>\n\n<p>The actual error is on line 6 of the cross reference table, which contains the byte offset for object <code>6 0 R</code>, instead of <code>5 0 R</code>.</p>\n\n<p>The message from the online validator <code>The object's identity 6 doesn't match with the object's reference identity 5.</code> is caused by the online validator trying to fetch object <code>5 0 R</code> via the index, but actually getting object <code>6 0 R</code>.</p>\n\n<p>Cross reference table for this PDF needs to be fixed.</p>\n"}], "owner": {"reputation": 319, "user_id": 4246164, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b302a6348d5859bad773a03af0880c25?s=128&d=identicon&r=PG&f=1", "display_name": "Penachia", "link": "https://stackoverflow.com/users/4246164/penachia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 1, "accepted_answer_id": 51049805, "answer_count": 1, "score": 3, "last_activity_date": 1530039645, "creation_date": 1529522684, "last_edit_date": 1529948939, "question_id": 50955639, "link": "https://stackoverflow.com/questions/50955639/how-to-obtain-font-data-to-embed-in-a-pdf", "title": "How to obtain font data to embed in a PDF?", "body": "<p>My MFC application creates a PDF and now I'm trying to embed fonts, the PDF created opens in Foxit, Chrome, and the Windows 8 PDF Reader but doesn't in Acrobat.</p>\n\n<p>I tried validating the pdf file with <a href=\"http://www.pdf-online.com/osa/validate.aspx\" rel=\"nofollow noreferrer\">this online validator</a> and it says </p>\n\n<blockquote>\n  <p>The object's identity 6 doesn't match with the object's reference identity 5.</p>\n  \n  <p>The embedded font program 'Candara' cannot be read.</p>\n</blockquote>\n\n<p><br>\nI think the way I am embedding it's correct</p>\n\n<pre><code>3 0 obj\n&lt;&lt;/Type /Font\n    /Subtype /TrueType\n    /BaseFont /Candara\n    /FirstChar 0\n    /LastChar 255\n    /Widths 4 0 R\n    /FontDescriptor 5 0 R\n&gt;&gt;\nendobj\n\n5 0 obj\n&lt;&lt;\n    /Type /FontDescriptor\n    /FontName /Candara\n    /Flags 32\n    /FontBBox [-700 -500 1800 1500]\n    /ItalicAngle 0\n    /Ascent 12\n    /Descent -4\n    /CapHeight 8\n    /StemV 109\n    /FontFile2 6 0 R\n&gt;&gt;\nendobj\n\n6 0 obj\n&lt;&lt;\n    /Length 100376\n    /Length1 100376\n&gt;&gt;\nstream\n    ... font bytes ...\nendstream\nendobj\n</code></pre>\n\n<p><br>\nI believe my problem it is with the font data which is obtained with</p>\n\n<pre><code>LONG ret = ::TTEmbedFont(pDC-&gt;GetSafeHdc(),\n                    TTEMBED_TTCOMPRESSED, \n                    CHARSET_UNICODE,\n                    &amp;ulPrivStatus,\n                    &amp;ulStatus,\n                    WriteEmbedProc,\n                    lpvVecBytes,\n                    nullptr,\n                    0,\n                    0,\n                    nullptr);\n</code></pre>\n\n<p>I also tried using <strong>TTEMBED_RAW</strong> and <strong>TTEMBED_EMBEDEUDC</strong></p>\n\n<p><br><br>\nSorry for the long and maybe vague explanation but I'm kinda lost, </p>\n\n<p>So <strong>Is this the right way to obtain the font data to embed? If it is, should I applied a filter to the Font file object?</strong></p>\n\n<p><strong>EDIT:</strong> I Changed my application to use <a href=\"https://msdn.microsoft.com/pt-br/library/windows/desktop/dd144885(v=vs.85).aspx\" rel=\"nofollow noreferrer\">GetFontData</a> which returns the bytes of the font file and according to my research it is ok to use like this, But I still can't open in Acrobat and the online validation site still gives me the same error message.</p>\n\n<p><a href=\"https://www.dropbox.com/s/b4cl25ua05t425h/Teste_.pdf?dl=0\" rel=\"nofollow noreferrer\">link</a> to an example PDF with my issue.</p>\n\n<p>Thanks and any help will be appreciated!</p>\n"}, {"tags": ["c++", "compilation", "poco-libraries"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1529544016, "post_id": 50955638, "comment_id": 88915365, "body": "You can compile Poco as static libraries and link to that"}], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1529538663, "post_id": 50955807, "comment_id": 88914338, "body": "Thanks SergeyA, is there a common way to get a static library?"}, {"owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1529540823, "post_id": 50955807, "comment_id": 88914815, "body": "I was able to recompile the poco library after running ./configure --static.  Then when I did make and make install it created the static libraries.  But I still can&#39;t seem to get it working, see my edited post."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "edited": false, "score": 0, "creation_date": 1529600654, "post_id": 50955807, "comment_id": 88944235, "body": "@RustyLemur <code>-Bstatic</code> is a linker flag. You need to use it like <code>-Wl,-Bstatic</code> when invoking through gcc compiler."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1529523290, "creation_date": 1529523290, "answer_id": 50955807, "question_id": 50955638, "link": "https://stackoverflow.com/questions/50955638/how-to-statically-link-to-a-poco-c-so-file/50955807#50955807", "title": "How to statically link to a POCO C++ so file", "body": "<p>Unless you have a static (.a) library available, you can't link statically with it. <code>.so</code> files are not usable in static linking, they can only be used for dynamic linking.</p>\n\n<p>Also, using <code>-static</code> as a command-line argument to gcc makes it link statically <strong>everything</strong>, including, for example, <code>libstdc++</code>, which is probably not what you want to do. If it is only Poco library you want linked statically, you need to supply linker flags <code>-Bstatic</code> and <code>-Bdynamic</code> around it.</p>\n"}], "owner": {"reputation": 1266, "user_id": 1303577, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e96b0196e8e968b1a2d8f6ddfda87ab1?s=128&d=identicon&r=PG", "display_name": "Rusty Lemur", "link": "https://stackoverflow.com/users/1303577/rusty-lemur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1529541565, "creation_date": 1529522680, "last_edit_date": 1529541565, "question_id": 50955638, "link": "https://stackoverflow.com/questions/50955638/how-to-statically-link-to-a-poco-c-so-file", "title": "How to statically link to a POCO C++ so file", "body": "<p>In Linux I am trying to statically link a POCO C++ library so that I can distribute the resulting executable to other machines which don't have the POCO libraries installed.  I can compile my source file (a simple gunzip replacement) like this:</p>\n\n<pre><code>$ g++ mygunzip.cpp  -L/usr/local/lib/ -lPocoFoundation\n</code></pre>\n\n<p>But the resulting executable requires that the PocoFoundation library is installed in the machine which executes it.  I can't figure out how to statically link the PocoFoundation library so that the POCO library doesn't need to be installed on the target device.  I've tried this and a couple other things, but nothing has worked:</p>\n\n<pre><code>$ g++ -o mygunzip.o mygunzip.cpp -static  /usr/local/lib/libPocoFoundation.so.60\n/usr/bin/ld: attempted static link of dynamic object `/usr/local/lib/libPocoFoundation.so.60'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>I haven't delved in this kind of compilation before, so any guidance is appreciated.</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE</strong>\nI was able to get the static libraries built for POCO by running <code>./configure --static, make, sudo make install</code>.  Now I have the following static libraries:</p>\n\n<pre><code>$ sudo find /usr/local/lib/ -iname \"*poco*a\"\n/usr/local/lib/libPocoJSON.a\n/usr/local/lib/libPocoFoundationd.a\n/usr/local/lib/libPocoUtild.a\n/usr/local/lib/libPocoXMLd.a\n/usr/local/lib/libPocoEncodingsd.a\n/usr/local/lib/libPocoXML.a\n/usr/local/lib/libPocoNet.a\n/usr/local/lib/libPocoFoundation.a\n/usr/local/lib/libPocoNetd.a\n/usr/local/lib/libPocoJSONd.a\n/usr/local/lib/libPocoEncodings.a\n/usr/local/lib/libPocoUtil.a\n</code></pre>\n\n<p>But my compiled code still does not seem to be linked statically, since it is there is no difference when I add the -Bstatic flag.</p>\n\n<pre><code>$ g++ -o withoutStatic mygunzip.cpp  -L/usr/local/lib/ -lPocoFoundation\n$ g++ -o withStatic mygunzip.cpp -Bstatic  -L/usr/local/lib/ -lPocoFoundation\n$ g++ -o withStatic2 mygunzip.cpp -L/usr/local/lib/ -Bstatic -lPocoFoundation\n\n$ md5sum with*\n7b9374bb3f8772ed23db99090c269a84  withoutStatic\n7b9374bb3f8772ed23db99090c269a84  withStatic\n7b9374bb3f8772ed23db99090c269a84  withStatic2\n</code></pre>\n\n<p><strong>ANSWER</strong>\nI think I found the solution: instead of -lPocoFoundation I used -l:libPocoFoundation.a.  That resulted in a larger executable file, I'm assuming because it contains the static POCO library:</p>\n\n<pre><code>$ g++ -o withStatic3 mygunzip.cpp -L/usr/local/lib/ -l:libPocoFoundation.a\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 1, "creation_date": 1529523656, "post_id": 50955615, "comment_id": 88909311, "body": "<code>[teach-me]</code> Declare <code>stringstream stream(line)</code> outside of the <code>for</code> loop. Then you can read in like this: <code>stream &gt;&gt; atoms_ptr[i].count;</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529526045, "post_id": 50955615, "comment_id": 88910306, "body": "<code>stringstream(line)</code> creates a brand new <code>stringstream</code> from <code>line</code>. Why do you think it will know anything about the previous <code>stringstream</code> created from the same <code>line</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9969224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jzTBwApYzVo/AAAAAAAAAAI/AAAAAAAAAD8/8rV9bqZFQm4/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/9969224/patrick"}, "edited": false, "score": 0, "creation_date": 1529593706, "post_id": 50956353, "comment_id": 88940188, "body": "I&#39;m sure this will work, but the simplest solution that best fit my extant code was given by  Arkadiy in a comment up top: &quot;Declare stringstream stream(line) outside of the for loop. Then you can read in like this: stream &gt;&gt; atoms_ptr[i].count;&quot;"}, {"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "reply_to_user": {"reputation": 49, "user_id": 9969224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jzTBwApYzVo/AAAAAAAAAAI/AAAAAAAAAD8/8rV9bqZFQm4/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/9969224/patrick"}, "edited": false, "score": 0, "creation_date": 1529602046, "post_id": 50956353, "comment_id": 88944967, "body": "@Patrick yes, that comment fixes your code. The problem is, that your solution is hard to read, error-prone and hard to maintain. I tried to show you, how to solve the problem using modern c++ in a simple and maintainable way."}], "tags": [], "owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "is_accepted": true, "score": 3, "last_activity_date": 1529526189, "last_edit_date": 1529526189, "creation_date": 1529525695, "answer_id": 50956353, "question_id": 50955615, "link": "https://stackoverflow.com/questions/50955615/use-of-stringstream-in-a-loop/50956353#50956353", "title": "Use of stringstream in a loop", "body": "<p>this should do the trick</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n#include &lt;vector&gt;\n\nstruct Element\n{\n    std::string symbol;\n    int count;\n};\n\nint main()\n{\n    std::ifstream myfile(\"test.txt\");\n\n    std::vector&lt;std::string&gt; tokens(\n        (std::istream_iterator&lt;std::string&gt;(myfile)),\n        (std::istream_iterator&lt;std::string&gt;()));\n\n    myfile.close();\n\n    std::vector&lt;Element&gt; elements;\n\n    const size_t numEntries = tokens.size() / 2;\n\n    for (size_t i = 0; i &lt; numEntries; i++)\n    {\n        elements.push_back({ tokens[i], std::stoi(tokens[i+ numEntries]) });\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>some explanation: </p>\n\n<p>it first reads your file content into a vector of strings (first half are the element names, second part the count)\nthen it runs over the vector and aggregates the information into a vector of Element (converting the count to a integer on the way)</p>\n"}, {"tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1529586661, "creation_date": 1529586661, "answer_id": 50969434, "question_id": 50955615, "link": "https://stackoverflow.com/questions/50955615/use-of-stringstream-in-a-loop/50969434#50969434", "title": "Use of stringstream in a loop", "body": "<p>OK, a couple suggestions here that will help you:</p>\n\n<ol>\n<li>Get rid of <code>Element</code> and use a <code>map&lt;string, int&gt;</code></li>\n<li>Next use <a href=\"https://en.cppreference.com/w/cpp/iterator/istream_iterator\" rel=\"nofollow noreferrer\"><code>istream_iterator</code></a> to populate</li>\n</ol>\n\n<p>Given the hopefully validated <code>ifstream myfile</code> and the target output <code>map&lt;string, int&gt; atoms</code>, you can use an <code>istream_iterator</code> something like this:</p>\n\n<pre><code>string line;\n\ngetline(myfile, line);\n\nistringstream myline{ line };\n\ntransform(istream_iterator&lt;string&gt;{ myline }, istream_iterator&lt;string&gt;{}, istream_iterator&lt;int&gt;{ myfile }, inserter(atoms, end(atoms)), [](const auto&amp; key, const auto&amp; value){ return make_pair(key, value); });\n</code></pre>\n\n<p><a href=\"https://ideone.com/uIgcpx\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 49, "user_id": 9969224, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jzTBwApYzVo/AAAAAAAAAAI/AAAAAAAAAD8/8rV9bqZFQm4/photo.jpg?sz=128", "display_name": "Patrick", "link": "https://stackoverflow.com/users/9969224/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 0, "accepted_answer_id": 50956353, "answer_count": 2, "score": 2, "last_activity_date": 1529586661, "creation_date": 1529522582, "question_id": 50955615, "link": "https://stackoverflow.com/questions/50955615/use-of-stringstream-in-a-loop", "title": "Use of stringstream in a loop", "body": "<p>My problem is summarized at the bottom of this page if this wall of text is excessive.  Anyway, I am trying to read lines from a file containing a list of atoms and their types, formatted like so:</p>\n\n<pre><code>   Li   O    Ti   La\n 1    24     8     5\n</code></pre>\n\n<p>This example has four elements and 38 total atoms, but I'm writing my code to accommodate an arbitrary number of each.  Regardless of the contents, the elements symbols are always on one line, and the atoms on the next.  I figured the best way to do this would be to use getline to insert each line into a string, and then use stringstream to parse those strings appropriately.  But the arbitrary size consideration has proved to be a problem for me.  My attempt at using stringstream:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nint main() {\n  string line;\n  int num_elements;\n  struct Element {\n    string symbol;\n    int count;\n  };\n  Element* atoms_ptr = NULL;  //to be allocated\n  ifstream myfile(\"filename\");\n  getline(myfile, line);\n  num_elements = (int)(line.size()/5);  //symbols in file have field width 5\n  atoms_ptr = new Element[num_elements];\n  for (int i=0; i&lt;num_elements; ++i) {\n        stringstream(line) &gt;&gt; (*(atoms_ptr+i)).symbol;  //does not work\n      }\n      getline(myfile, line);\n      for (int i=0; i&lt;num_elements; ++i) {\n        stringstream(line) &gt;&gt; (*(atoms_ptr+i)).count;  //does not work\n      }\n...\nreturn 0;\n}\n</code></pre>\n\n<p>You may have already realized the problem with my stringstream statements.  Instead of reading in each of the four elements once, the first element is read four times.  So the .symbol member for every entry of my array is initialized to Li.  Similarly with the number of atoms, the .count member is initialized to 1.</p>\n\n<p>I was able to write something that works as intended by reconstructing my loops in this way:</p>\n\n<pre><code>int j = 3;\nfor (int i=0; i&lt;num_elements; ++i) {\n  (*(atoms_ptr+i)).symbol = line.substr(j, 2);\n  j += 5;\n  cout &lt;&lt; (*(atoms_ptr + i)).symbol &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>But I don't like this solution because it depends on the exact file spacing, isn't especially readable, and I still don't know how to use stringstream properly.</p>\n\n<p>Fundamentally, I think the problem results from my use of stringstream inside the loops.  Maybe the position of the string file pointer gets reset with each iteration?  If so I would need a workaround for this.  I would greatly appreciate any help that can be offered.  Thanks in advance! </p>\n"}, {"tags": ["c++", "boost", "websocket", "beast"], "comments": [{"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1529532709, "post_id": 50955405, "comment_id": 88912947, "body": "I don&#39;t understand, this is synchronous communication so remove it from the vector before exiting the function. Also remember to use mutual exclusion on the global and that a write can fail because the socket is already closed."}, {"owner": {"reputation": 59, "user_id": 4190206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eb3a6e02e3dc6e6089e3d74ebcf223b?s=128&d=identicon&r=PG&f=1", "display_name": "iron24", "link": "https://stackoverflow.com/users/4190206/iron24"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1529575333, "post_id": 50955405, "comment_id": 88927760, "body": "Thanks for the reply! Yes this is sync communcation, but the function itself is an infinite loop, as you can see in the boost example. But when a client disconnects then my vector element is still there, and i&#39;m gonna try to send the message to him whenever someone else writes something. And its gonna result in an exception i believe, since the connection is closed. So to avoid that, i&#39;d like to remove the vector element from my vector, when someone disconnects. I&#39;m sorry if i&#39;m saying it wrong or it is not so clear to understand."}], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "is_accepted": true, "score": 2, "last_activity_date": 1529588678, "last_edit_date": 1529588678, "creation_date": 1529581916, "answer_id": 50967920, "question_id": 50955405, "link": "https://stackoverflow.com/questions/50955405/boost-beast-websocket-connection-close-handler/50967920#50967920", "title": "boost beast websocket connection close handler", "body": "<p>From what I understand, your problem is to extend the lifetime of the stream outside the try/catch clause.</p>\n\n<p>Keeping the assumption that the constructor can throw, you can use the copy constructor inside the try : </p>\n\n<pre><code>void do_session(tcp::socket&amp; socket)\n{\n    websocket::stream&lt;tcp::socket&gt; ws;\n    try\n    {\n        ws = std::move(websocket::stream&lt;tcp::socket&gt;&gt;(std::move(socket)));\n        add_socket(&amp;ws);\n        // ....\n    }\n    catch(boost::system::system_error const&amp; se) { ... }\n    catch(std::exception const&amp; e) {}\n\n    erase_socket_if_exists(&amp;ws);\n}\n</code></pre>\n\n<p>If the move-assignment hadn't existed, you could have used std::uniq_ptr&lt;>.</p>\n\n<p>Note that you cannot avoid the race condition of trying to write to a close stream. That's why you have to handle the case where a write throws an exception.</p>\n\n<p>Also note that with you scheme, you must hold the lock of the container until you have finished writing to all sockets.</p>\n"}], "owner": {"reputation": 59, "user_id": 4190206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7eb3a6e02e3dc6e6089e3d74ebcf223b?s=128&d=identicon&r=PG&f=1", "display_name": "iron24", "link": "https://stackoverflow.com/users/4190206/iron24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 0, "accepted_answer_id": 50967920, "answer_count": 1, "score": 1, "last_activity_date": 1529588678, "creation_date": 1529521718, "question_id": 50955405, "link": "https://stackoverflow.com/questions/50955405/boost-beast-websocket-connection-close-handler", "title": "boost beast websocket connection close handler", "body": "<p>I am new to boost and i am trying to write a simple chat application for websocket. For reference i'm using the <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/beast/doc/html/beast/examples.html#beast.examples.servers\" rel=\"nofollow noreferrer\">websocket-server-sync</a> example from the website.</p>\n\n<p>I made a global vector that stores websocket::streams, and in the do_session method after creating the websocket i push it in the vector.</p>\n\n<pre><code>std::vector&lt;websocket::stream&lt;tcp::socket&gt;*&gt; socket_streams;\n</code></pre>\n\n<p>Everytime i read a message i send it to everyone from this vector, so its working well so far. However when someone closes the connection (even when its not properly closed, e.g. the internet connection goes down) i want to remove the stream object from my vector. I tried to look in the beast headers for a \"close handler\" or something like that, but i couldn't find anything. Is there a way to do this? Like:</p>\n\n<pre><code>void close_handler(websocket::stream&lt;tcp::socket&gt;* _stream) \n{\n   //remove _stream from socket_streams\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "qt", "release", "mingw32"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6505257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29046fa661298dd8f7202a99efaa0fdc?s=128&d=identicon&r=PG&f=1", "display_name": "MrKew", "link": "https://stackoverflow.com/users/6505257/mrkew"}, "is_accepted": true, "score": 0, "last_activity_date": 1529601847, "creation_date": 1529601847, "answer_id": 50974343, "question_id": 50955390, "link": "https://stackoverflow.com/questions/50955390/error-mingw32-make-no-rule-to-make-target-install-stop/50974343#50974343", "title": "Error: mingw32-make: *** No rule to make target &#39;install&#39;. Stop", "body": "<p>I solved it, I was runing make from mingw, not from android.</p>\n\n<p>I should first navigate into D:\\Android-Build directory and then run C:\\android-ndk-r10e\\prebuilt\\windows-x86_64\\bin\\make.exe install INSTALL_ROOT=D:\\Android-Build</p>\n"}], "owner": {"reputation": 11, "user_id": 6505257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29046fa661298dd8f7202a99efaa0fdc?s=128&d=identicon&r=PG&f=1", "display_name": "MrKew", "link": "https://stackoverflow.com/users/6505257/mrkew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1390, "favorite_count": 0, "accepted_answer_id": 50974343, "answer_count": 1, "score": -2, "last_activity_date": 1529601847, "creation_date": 1529521633, "question_id": 50955390, "link": "https://stackoverflow.com/questions/50955390/error-mingw32-make-no-rule-to-make-target-install-stop", "title": "Error: mingw32-make: *** No rule to make target &#39;install&#39;. Stop", "body": "<p>I am trying to release really simple Qt app into .apk format using <a href=\"http://doc.qt.io/qt-5/deployment-android.html#androiddeployqt\" rel=\"nofollow noreferrer\">Deploying an Application on Android tutorial</a>. In step one im getting make error \"mingw32-make: *** No rule to make target 'install'. Stop.\".</p>\n\n<p>I have done:</p>\n\n<p>Installed Qt (I did not know what is really needed so I ticked everything under Qt 5.11.0 and Tools), Android NDK r10e and Android SDK (again ticked full android-28 and Android 7.1). Set up paths in settings.</p>\n\n<p>Written simple app (just combo box which writes selected index using qDebug()), I changed nothing in .pro file</p>\n\n<p>Created empty directory D:\\Android-Build where I want to release app so I changed Projects->Android for armeabi-v7a (GCC 4.9, Qt 5.11.0 for Android armv7)->Build->Edit build configuration: Release->General->Build Directory to \"D:\\Android-Build\" (Shadow Build is ticked)</p>\n\n<p>Hit run qmake (by right click on project folder) and build</p>\n\n<p>Opened cmd (basic windows one, not anything from Qt what pops up when I searched for \"cmd\") and navigated to my project folder D:\\Users\\User\\Documents\\QtProjects\\Android\\App01</p>\n\n<p>Run \"D:\\Qt\\5.11.0\\android_armv7\\bin\\androiddeployqt.exe --output D:\\Android-Build --input D:\\Android-Build\\android-libApp01.so-deployment-settings.json\" and it said: \"Application binary is not in output directory: D:/Android-Build//libs/armeabi-v7a/libApp01.so. Please run 'mingw32-make install INSTALL_ROOT=D:/Android-Build/' first.\"</p>\n\n<p>So I run \"D:\\Qt\\Tools\\mingw530_32\\bin\\mingw32-make install INSTALL_ROOT=D:\\Android-Build\" and error \"mingw32-make: *** No rule to make target 'install'. Stop.\" occured</p>\n\n<p>Thanks for any ideas as I am completelly stuck here</p>\n"}, {"tags": ["c++", "winforms"], "comments": [{"owner": {"reputation": 103049, "user_id": 3110834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777326f9f1ab58d98d927662f028944e?s=128&d=identicon&r=PG", "display_name": "Reza Aghaei", "link": "https://stackoverflow.com/users/3110834/reza-aghaei"}, "edited": false, "score": 0, "creation_date": 1529521471, "post_id": 50955298, "comment_id": 88908316, "body": "Make a public property to get/set text of <code>TextBox</code>. Keep reference to the main form in a public static field/property of a class like <code>Program</code>."}, {"owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "reply_to_user": {"reputation": 103049, "user_id": 3110834, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/777326f9f1ab58d98d927662f028944e?s=128&d=identicon&r=PG", "display_name": "Reza Aghaei", "link": "https://stackoverflow.com/users/3110834/reza-aghaei"}, "edited": false, "score": 0, "creation_date": 1529521924, "post_id": 50955298, "comment_id": 88908516, "body": "@RezaAghaei I&#39;ve got a public set method for the textbox. Keeping reference is what I&#39;m struggling with and it&#39;s a bit tricky because <code>GUI</code> is a <code>ref class</code>. Could you further explain what you mean by &quot;public static field/property of a class&quot;?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1529527646, "post_id": 50955298, "comment_id": 88910971, "body": "The thread does not do anything useful, it invokes right back to the UI thread.  It is not clear to me what BufferRecieveLoop() does, but if it &quot;loops&quot; then your UI stops working.  You&#39;d actually update the Text property but you just can&#39;t see it because the controls can no longer paint themselves.  The looping must be done on the worker thread, only use BeginInvoke() where necessary to update the UI.  BackgroundWorker is a class that helps you get this right."}, {"owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1529965307, "post_id": 50955298, "comment_id": 89057325, "body": "@HansPassant  this would be more appropriate in another question, but I don&#39;t want to split things.  I changed things to get rid of threads to test your theory:  <code>GUI.h</code> now does not start a thread for <code>ContinueNormally()</code> and instead just calls the method.  <code>GUI.cpp</code> also normally calls <code>BufferRecieveLoop()</code> instead of Invoking it.  Now when <code>EntityStatePduProcessor.cpp</code> calls <code>SetConsoleTextBoxText()</code>, it still changes a different Form than the one visible. I know this because I check what the textbox contains with <code>auto temp = this-&gt;consoleTextBox-&gt;Text;</code> and it is what I set it to."}, {"owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "edited": false, "score": 0, "creation_date": 1529965721, "post_id": 50955298, "comment_id": 89057404, "body": "The above comment got too long. I&#39;ve tried to call <code>this-&gt;consoleTextBox-&gt;Invalidate();</code> and <code>this-&gt;Invalidate();</code> within my <code>SetConsoleTextBoxText()</code> method to force a visual update/repaint. Me not seeing any changes tells me it&#39;s a different Form that&#39;s being changed. Though I could just be doing that incorrectly.  Furthermore, it could actually not update because it&#39;s stuck within that <code>while(true)</code> loop and won&#39;t display a redraw/repaint/Invalidate, but that doesn&#39;t make much sense to me."}], "answers": [{"tags": [], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "is_accepted": true, "score": 0, "last_activity_date": 1530038062, "creation_date": 1530038062, "answer_id": 51049450, "question_id": 50955298, "link": "https://stackoverflow.com/questions/50955298/access-a-static-global-winform-ui-object-from-multiple-files/51049450#51049450", "title": "Access a static global WinForm UI object from multiple files", "body": "<p>Use <code>Refresh()</code> instead of <code>Invalidate()</code></p>\n\n<p>In C# form projects I've made, <code>Invalidate()</code> was used to repaint controls. For some reason, that isn't working in this project, but <code>this-&gt;consoleTextBox-&gt;Refresh()</code> repaints my textbox.</p>\n\n<p>I am now dealing with an unresponsive form due to a constantly looping <code>while(true)</code> on the main thread, but that's for a different question.</p>\n"}], "owner": {"reputation": 444, "user_id": 4730778, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/698ec16b61164c94aee6a20da396f0f3?s=128&d=identicon&r=PG&f=1", "display_name": "Tawm", "link": "https://stackoverflow.com/users/4730778/tawm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 51049450, "answer_count": 1, "score": 0, "last_activity_date": 1530038062, "creation_date": 1529521252, "last_edit_date": 1529521590, "question_id": 50955298, "link": "https://stackoverflow.com/questions/50955298/access-a-static-global-winform-ui-object-from-multiple-files", "title": "Access a static global WinForm UI object from multiple files", "body": "<p>I'm trying to change the <code>TextBox-&gt;Text</code> on my main UI from multiple places.</p>\n\n<p>I've got a <code>GUI.h</code> which includes the VS2013 default WinForm construction code as well as some methods and variables.</p>\n\n<p>I've commented out some things I've tried, but the basic idea can be seen in many forms:  </p>\n\n<p><strong>I'm trying to get a handle or reference to the <em>one</em> UI for the whole program.</strong></p>\n\n<p>The current solution I'm trying to work with includes a <code>ref struct Globals{}</code> from which I can access the <code>GUI gui</code>.</p>\n\n<pre><code>//GUI.h\n\nnamespace GUI_Example_Receive {\n\n    public ref class GUI : public System::Windows::Forms::Form\n    {\n        public:\n            GUI(void)\n            {\n                InitializeComponent();\n                //\n                //TODO: Add the constructor code here\n                //\n            }\n            //static GUI ^gui = nullptr;\n            /*\n            static GUI^ GetGUI(){\n                static GUI gui = gcnew GUI;\n            }\n            */\n\n       //UI Construction code\n\n      void SetConsoleTextBoxText(System::String^ input)\n      {\n        this-&gt;consoleTextBox-&gt;Text = input;\n      }\n\n      System::Void startButton_Click(System::Object^  sender, System::EventArgs^  e)\n      {\n        Thread^ t1 = gcnew Thread(gcnew ThreadStart(this, &amp;GUI::ContinueNormally));\n        t1-&gt;Start();\n        //t1-&gt;Join();\n      }\n    };\n\n    ref struct Globals {\n        static GUI ^gui;\n    };\n\n\n    //static gcroot&lt;GUI ^&gt; gui = gcnew GUI;\n}\n</code></pre>\n\n<p>I implement these in <code>GUI.cpp</code>. The important bits to note are that <code>ContinueNormally()</code> calls a <code>while(true)</code> loop, constantly reading from a broadcast. Thus, in order to maintain control of the UI, that loop must be called on a separate thread. I'm currently using <code>Invoke()</code> to do so, though I was using a different solution earlier.</p>\n\n<p>In <code>Start()</code>, you can see where I define <code>Globals::gui</code> and run the UI.</p>\n\n<pre><code>//GUI.cpp\n\nvoid GUI::ContinueNormally() //Object^ data for threading purposes?\n{\n    //Setup\n\n    Example::EntityStatePduProcessor processor; //defined here and used during the while loop\n\n    //BufferRecieveLoop();\n    this-&gt;Invoke(gcnew MethodInvoker(&amp;BufferRecieveLoop));\n    /*System::Threading::Thread^ t1 = \n        gcnew System::Threading::Thread(\n        gcnew System::Threading::ParameterizedThreadStart(BufferRecieveLoop));\n    t1-&gt;Start();\n    t1-&gt;Join();*/\n\n    //Cleanup\n}\n\nstatic void Start()\n{\n    Globals::gui = gcnew GUI;\n    System::Windows::Forms::Application::Run(Globals::gui);\n\n    //gui = gcnew GUI;\n    //System::Windows::Forms::Application::Run(gui);\n}\n\nint __cdecl main(int argc, char* argv[])\n{\n    System::Windows::Forms::Application::EnableVisualStyles();\n    System::Windows::Forms::Application::SetCompatibleTextRenderingDefault(false);\n\n    Start();\n\n    return 0;\n}\n</code></pre>\n\n<p>Finally, I have a file with one large method which is called continuously from my <code>while(true)</code> loop and attempts to access my <code>Globals::gui</code> object, but <strong>seems to change a non-visible <code>GUI</code> object's <code>TextBox-&gt;Text</code> instead of the one I want to act as the <code>static global GUI</code></strong></p>\n\n<pre><code>//EntityStatePduProcessor.cpp\n\nvoid EntityStatePduProcessor::Process(const DIS::Pdu&amp; packet)\n{\n    GUI_Example_Receive::Globals::gui-&gt;SetConsoleTextBoxText(\"eventually a std::ostringstream\");\n}\n</code></pre>\n\n<hr>\n\n<p>It is quite possible that I am having issues because I'm on a different thread trying to access the <code>GUI</code>'s method. I'm not sure how to correctly <code>Invoke()</code> a method in this example.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 2, "creation_date": 1529521398, "post_id": 50955286, "comment_id": 88908275, "body": "<code>array_appender</code> is a function. A function is not a class type, but you are trying to instantiate it like a class type."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1529521448, "post_id": 50955286, "comment_id": 88908299, "body": "You created a function template but are trying to use it as a class template."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529521608, "post_id": 50955286, "comment_id": 88908384, "body": "what are you acutally trying to achieve? your have more errors than the one you report. In <code>array_appender</code>: <code>std::vector</code> has no <code>add()</code> method, you cannot push a <code>T</code> into a <code>vector&lt;T*&gt;</code> and <code>vector&lt;T const&amp;&gt;</code> looks at best questionable"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529521720, "post_id": 50955286, "comment_id": 88908433, "body": "...<code>std::vector&lt;T*&gt; vec [size]</code> is an array of <code>vectors</code> .... I guess there are more. Best suggestion is to <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">read a book</a> instead of guessing"}, {"owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1529521733, "post_id": 50955286, "comment_id": 88908440, "body": "@Quentin wow, what is the basic difference? I am totally in darkness at this point."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529521799, "post_id": 50955286, "comment_id": 88908466, "body": "<code>void foo(){}</code> is a function <code>struct bar {};</code> is a class"}, {"owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "reply_to_user": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529521951, "post_id": 50955286, "comment_id": 88908538, "body": "@Whatever could you explain me a bit more, please?"}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1529522081, "post_id": 50955286, "comment_id": 88908612, "body": "There are really a lot of errors. Not sure it makes a good question. By example, you reuse T for the size parameter; if T is std::string ..."}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 2, "creation_date": 1529522196, "post_id": 50955286, "comment_id": 88908649, "body": "There is nothing more to be explained. Defining a function allows you to call it, but not instantiate. You are trying to instantiate it, which is exactly what you are not allowed to do and what the compiler is complaining about. Don&#39;t try writing generic code if you don&#39;t have the basic understanding of C++. Learn the basics of C++ and then try templates to avoid such mistakes."}, {"owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "reply_to_user": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 0, "creation_date": 1529522494, "post_id": 50955286, "comment_id": 88908780, "body": "@mdoubez well, this is true, but I&#39;m a beginner in templates, can you explain me how to use than <code>T</code> correctly in this case? I know there are a lot of errors, but now this error is what I can&#39;t understand."}, {"owner": {"reputation": 3320, "user_id": 3480808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbca64f49de22131b4b51fddfa8a7df4?s=128&d=identicon&r=PG", "display_name": "Michael Doubez", "link": "https://stackoverflow.com/users/3480808/michael-doubez"}, "edited": false, "score": 2, "creation_date": 1529523102, "post_id": 50955286, "comment_id": 88909049, "body": "Sorry, you have too much to learn and this is not the place. A piece of advise : restart from scratch and try the compilation at every line you write to get runable code. It won&#39;t teach you but it will prevent you from having such a huge number of thing to correct at once. As it is you won&#39;t even know if you made a progress."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1529523613, "post_id": 50955286, "comment_id": 88909289, "body": "OP needs to read a book on C++, not ask how to make a specific template function (likely a homework for a completely missed course)"}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 9775850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbb2fe93c368d757bc6e0cfe6eaa68a?s=128&d=identicon&r=PG&f=1", "display_name": "skeller", "link": "https://stackoverflow.com/users/9775850/skeller"}, "edited": false, "score": 0, "creation_date": 1529522887, "post_id": 50955627, "comment_id": 88908961, "body": "but you are so right...the question is like a non-swimmer asking for diving advice :)"}, {"owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "edited": false, "score": 0, "creation_date": 1529525730, "post_id": 50955627, "comment_id": 88910164, "body": "Thanks, now I now where to start. You helped me a lot in this topic."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1529522893, "last_edit_date": 1529522893, "creation_date": 1529522644, "answer_id": 50955627, "question_id": 50955286, "link": "https://stackoverflow.com/questions/50955286/template-programming-beginner-problems/50955627#50955627", "title": "Template programming beginner problems", "body": "<p>Try something simpler first. You seem to miss some basic concepts, so I will try to give you a basic example.</p>\n\n<p>A template function:</p>\n\n<pre><code>template &lt;typename T&gt; \nT add(const T&amp; a,const T&amp; b) { return a+b; }\n</code></pre>\n\n<p>A template class:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct adder {\n    T result;\n    adder(const T&amp; a, const T&amp; b) : result(a+b) {}\n};\n</code></pre>\n\n<p>Those can be used like this:</p>\n\n<pre><code>int a = 4;\nint b = 5;\nstd::cout &lt;&lt; add(a,b);\n\nauto x = adder&lt;int&gt;(a,b);\nstd::cout &lt;&lt; x.result;\n</code></pre>\n\n<p>I have to mention that I am not proud at all of this answer. You should be aware that you wont learn basics by asking questions here and to fully explain everything that enters those two simple examples I could write two chapters (well to be honest I could not otherwise I would ;). The sad truth is that you will have to read some books.  </p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "edited": false, "score": 0, "creation_date": 1529525816, "post_id": 50955668, "comment_id": 88910204, "body": "Yes you understand right. Thank you."}], "tags": [], "owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "is_accepted": true, "score": 0, "last_activity_date": 1529522789, "creation_date": 1529522789, "answer_id": 50955668, "question_id": 50955286, "link": "https://stackoverflow.com/questions/50955286/template-programming-beginner-problems/50955668#50955668", "title": "Template programming beginner problems", "body": "<p>If I understand right, you need to write <code>array_appender</code> that works with the <code>main.cpp</code> that you already have.</p>\n\n<p>You have defined a template function, but you need a template class, something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass array_appender {\npublic:\n    array_appender(T* array, size_t size) {\n        append(array, size);\n    }\n    void append(T* array, size_t size) {\n        // ...\n    }\n    T at(size_t index) {\n        // ...\n    }\n    size_t size() {\n        // ...  \n    }\nprivate:\n    std::vector&lt;T&gt; data;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7973735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-PGKcmLNd_rk/AAAAAAAAAAI/AAAAAAAAABM/YxLsRTaTV54/photo.jpg?sz=128", "display_name": "Korte Alma", "link": "https://stackoverflow.com/users/7973735/korte-alma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "closed_date": 1529523468, "accepted_answer_id": 50955668, "answer_count": 2, "score": -2, "last_activity_date": 1529522893, "creation_date": 1529521214, "question_id": 50955286, "link": "https://stackoverflow.com/questions/50955286/template-programming-beginner-problems", "closed_reason": "Duplicate", "title": "Template programming beginner problems", "body": "<p>I have some basic template programming errors.</p>\n\n<p>I have this code in <code>main.cpp</code>:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include \"arrapp.h\"\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nconst int max = 1000;\n\nint main()\n{\n  int your_mark = 1;\n  /* 2-es*/\n  int s[] = {3, 2};\n  array_appender&lt;int&gt; ia ( s, sizeof( s ) / sizeof( s[ 0 ] ) );\n  for( int i = 0; i &lt; max - 1; ++i )\n  {\n    ia.append( s, sizeof( s ) / sizeof( s[ 0 ] ) );\n  }\n\n  std::string hw[] = { \"Hello\", \"World\" };\n  std::string langs[] = { \"C++\", \"Ada\", \"Brainfuck\" };\n  std::string x[] = { \"Goodbye\", \"Cruel\", \"World\" };\n  array_appender&lt;std::string&gt; sa ( hw, sizeof( hw ) / sizeof( hw[ 0 ] ) );\n  sa.append( langs, sizeof( langs ) / sizeof( langs[ 0 ] ) );\n  sa.append( x, sizeof( x ) / sizeof( x[ 0 ] ) );\n\n  const array_appender&lt;std::string&gt; ha( hw, sizeof( hw ) / sizeof( hw[ 0 ] ) );\n\n\n  if ( max * 2 == ia.size() &amp;&amp; 3 == ia.at( max ) &amp;&amp; 2 == ia.at( 3 ) &amp;&amp;\n       &amp;( s[ 0 ] ) == &amp;(ia.at( max / 2 ) ) &amp;&amp; 2 == ha.size() &amp;&amp; 8 == sa.size() &amp;&amp;\n       \"C++\" == sa.at( 2 ) &amp;&amp; 7 == sa.at( 5 ).length() &amp;&amp; &amp;( ha.at( 0 ) ) == hw )\n  {\n    your_mark = ia.at( max + 1 );\n  }\n  std::cout &lt;&lt; \"Your mark is \" &lt;&lt; your_mark;\n  std::endl( std::cout );\n}\n</code></pre>\n\n<p>And I have to solve this, by writing <code>\"arrapp.h\"</code>. So I created this:</p>\n\n<pre><code>#ifndef arrapp_H\n#include &lt;algorithm&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n#include &lt;array&gt;\n\ntemplate &lt;typename T&gt;\nT const&amp; array_appender (std::vector &lt;T const&amp;&gt; v, T const&amp; size) {\n   std::vector&lt;T*&gt; vec [size]= {};\n    for( int idx = 0; idx &lt; size; ++idx)\n    {\n        std::cout &lt;&lt; \"value of v: \" &lt;&lt; v[idx] &lt;&lt; std::endl;\n        vec.add(v[idx]);\n    }\n   return vec;\n}\n#endif // arrapp_H\n</code></pre>\n\n<p>But If I use this i got the error <code>main.cpp|14|error: expected ';' before 'ia'|</code>. So this isn't working. How can I create these template things, to work? Am I  misunderstood, here <code>array_appender</code> don't have work as I think, as I wrote?</p>\n"}, {"tags": ["c++", "class", "constructor", "abstract-class"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1529520860, "post_id": 50955168, "comment_id": 88908037, "body": "It&#39;s much shorter and much clearer to just post a small example of the code you are describing than it is to try to describe your code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529521087, "post_id": 50955168, "comment_id": 88908122, "body": "^ this and you dont say how the two functions are supposed to be composed. Should it be <code>compfunc(x) = outer(inner(x))</code> ?"}, {"owner": {"reputation": 11, "user_id": 9969250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de5c9a3d9acca495ab1a48aaf133e8?s=128&d=identicon&r=PG&f=1", "display_name": "N.M", "link": "https://stackoverflow.com/users/9969250/n-m"}, "edited": false, "score": 0, "creation_date": 1529521259, "post_id": 50955168, "comment_id": 88908204, "body": "I added the relevant pieces of the code. Thanks"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529521260, "post_id": 50955168, "comment_id": 88908205, "body": "Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. It is rather hard to make any sense out of the fragment you show."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529521337, "post_id": 50955168, "comment_id": 88908249, "body": "It doesn&#39;t make much sense to have any user-defined constructors in <code>func</code>. It does however make a lot of sense to have at least one more virtual function there. It would be rather impossible to accomplish your task without one."}, {"owner": {"reputation": 11, "user_id": 9969250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de5c9a3d9acca495ab1a48aaf133e8?s=128&d=identicon&r=PG&f=1", "display_name": "N.M", "link": "https://stackoverflow.com/users/9969250/n-m"}, "edited": false, "score": 0, "creation_date": 1529522339, "post_id": 50955168, "comment_id": 88908712, "body": "Edited one more time"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529524461, "post_id": 50955168, "comment_id": 88909610, "body": "Still makes no sense. What does your <code>function</code> class <b>do</b>?"}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529524912, "post_id": 50955168, "comment_id": 88909816, "body": "@n.m. nothing. It&#39;s there because he&#39;s using type erasure."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529525339, "post_id": 50955168, "comment_id": 88910002, "body": "@Whatever Huh? No. <i>Because</i> of type erasure the class <b>must</b> do something, otherwise it is totally useless."}], "answers": [{"comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529524586, "post_id": 50955911, "comment_id": 88909663, "body": "&quot;Because you are passing the classes by const reference, I assume you want to copy them&quot;. That&#39;s a non sequitur if I ever saw one."}], "tags": [], "owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "is_accepted": true, "score": 0, "last_activity_date": 1529523669, "creation_date": 1529523669, "answer_id": 50955911, "question_id": 50955168, "link": "https://stackoverflow.com/questions/50955168/c-abstract-classes-inheritance-and-construction/50955911#50955911", "title": "C++: Abstract classes inheritance and construction", "body": "<p>Because you are passing the classes by const reference, I assume you want to copy them. For that you will need additional virtual member function <code>clone</code> which will return a pointer to a dynamically allocated copy of the object.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class func {\n    ...\n    virtual func* clone() const;\n    ...\n};\n\nclass polynom: public func {\n    ...\n    virtual polynom* clone() const override {\n        return new polynom(n_, coefs_);\n    }\n    ...\n};\n\nclass compfunc: public func {\n    ...\n    compfunc(const func&amp; outter, const func&amp; inner): outer_(outter.clone()), inner_(inner.clone()) {}\n    ...\n    virtual compfunc* clone() const override {\n        ...\n    }\n};\n</code></pre>\n\n<p>This way you can copy the passed objects regardless of their dynamic type.</p>\n"}], "owner": {"reputation": 11, "user_id": 9969250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28de5c9a3d9acca495ab1a48aaf133e8?s=128&d=identicon&r=PG&f=1", "display_name": "N.M", "link": "https://stackoverflow.com/users/9969250/n-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 2, "accepted_answer_id": 50955911, "answer_count": 1, "score": -8, "last_activity_date": 1529523669, "creation_date": 1529520728, "last_edit_date": 1529521960, "question_id": 50955168, "link": "https://stackoverflow.com/questions/50955168/c-abstract-classes-inheritance-and-construction", "title": "C++: Abstract classes inheritance and construction", "body": "<p>I need to build a C++ program the does function composition of 2 objects.\nThe objects can be either a polynome, a rational function or a composed function.</p>\n\n<p>I have an abstract class named 'func'. I also have 2 classes that inherited 'func', named 'ratfunc'and 'polynom'.\nA third class 'compfunc', also inherits 'func' and it's constructor header is given to me.\nComfunc receives 2 abstract objects from the 'func' class (by reference) and needs to compose a new function out of them (syntax: new compfunc(*outer,*inner). outer,inner are *func) </p>\n\n<p>Outter and inner can be either ratfunc, polynome, or comfunc itself.</p>\n\n<p>My question is how can I build a constructor like this WITHOUT using templates and without knowing the objects classes.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The code:</p>\n\n<p>Main:</p>\n\n<pre><code>  func* outer;\n  func* inner;\n  char* outer_name = strtok(func_value, \",\");\n  char* inner_name = strtok(NULL, \",\"); \n  try{\n       outer = func_list.at(outer_name);\n       inner = func_list.at(inner_name);\n       func_list[string(outer_name)+\"(\"+string(inner_name)+\")\"]=new \n       compfunc(*outer,*inner);\n      }\n</code></pre>\n\n<p>Func class (Abstract):</p>\n\n<pre><code>class func {\n public: \nfunc(); //constructor\nfunc(const func&amp; f); //copy constructor\nvirtual ~func(); \n\nprotected:\nbool flag; //values has been assigned, initialised to false in the constructor \n};\n</code></pre>\n\n<p>Polynom class:</p>\n\n<pre><code>class polynom : public func {\npublic:\npolynom(); //default constructor \npolynom(int n, int* coefs); //constructor\npolynom(const polynom&amp; pol); //copy constructor\n~polynom(); //destrcutor\n protected:\nint n_; //order of the polynom\nint* coefs_; //coefficients \n };\n</code></pre>\n\n<p>Ratfunc class:</p>\n\n<pre><code>class ratfunc : public func{\npublic:\nratfunc(const polynom&amp; p, const polynom&amp; q); //constructor\nratfunc(const ratfunc&amp; rf); //copy constructor\n~ratfunc(); //desctrcutor\nprotected:\npolynom p_; //down\npolynom q_; //up \n };\n</code></pre>\n\n<p>Compfunc:</p>\n\n<pre><code>class compfunc : public func{\npublic:\ncompfunc(const func&amp; outter, const func&amp; inner); \ncompfunc(const compfunc&amp; cf); //copy constructor\n~compfunc(); //destrcutor\n protected:\nfunc* outer_; \nfunc* inner_; \n};\n</code></pre>\n\n<p>Thanks!!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 7, "creation_date": 1529520500, "post_id": 50955093, "comment_id": 88907863, "body": "&quot;<i>I&#39;ve tried everything</i>&quot;\u2014then it should be pretty easy to show us what you&#39;ve tried."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 2, "creation_date": 1529521391, "post_id": 50955093, "comment_id": 88908273, "body": "The rules for this website clearly specify that we&#39;re not a homework website. You&#39;re expected to show us, in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, what you&#39;ve already tried to do to solve your problem. Posting the definitions for the two types you&#39;re working with doesn&#39;t satisfy that requirement. Additionally, your question is still unclear: what does &quot;move between them&quot; mean in this context? What&#39;s stopping you from just transforming the <code>std::complex&lt;float&gt;</code> array into a <code>_Complex</code> array, using elementary functions?"}, {"owner": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1529682589, "post_id": 50955093, "comment_id": 88977706, "body": "I&#39;ve clarified my problem Xirema. Still can&#39;t figure this out."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1529683310, "post_id": 50955093, "comment_id": 88978113, "body": "<a href=\"https://godbolt.org/g/WKx6kF\" rel=\"nofollow noreferrer\">I punched your code into an online compiler</a>, and got a different error message, related to the <code>complex</code> keyword not mapping to a valid type. Swapping <code>complex</code> with <code>_Complex</code> eliminated the compile errors. I don&#39;t know which compiler you&#39;re using, but your compiler doesn&#39;t appear to alias <code>_Complex</code> to <code>complex</code> like the documentation suggests is possible."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1529521873, "post_id": 50955330, "comment_id": 88908493, "body": "@Xirema C++ has made a specific exemption for <code>std::complex</code> for binary compatibility with C."}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529522068, "post_id": 50955330, "comment_id": 88908606, "body": "@NathanOliver Noted. The answer should probably have a reference added to the relevant text to verify that: <a href=\"https://en.cppreference.com/w/cpp/numeric/complex\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/complex</a>"}, {"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1529522264, "post_id": 50955330, "comment_id": 88908682, "body": "What&#39;s this <code>cfloat</code>? I tried to search the Internet for it, but failed. Is there anything more convenient than simple casting?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "reply_to_user": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1529528235, "post_id": 50955330, "comment_id": 88911240, "body": "@anatolyg, please see my edit"}], "tags": [], "owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "is_accepted": false, "score": 3, "last_activity_date": 1529565208, "last_edit_date": 1529565208, "creation_date": 1529521372, "answer_id": 50955330, "question_id": 50955093, "link": "https://stackoverflow.com/questions/50955093/c11-complexfloat-to-c-float-complex/50955330#50955330", "title": "C++11 complex&lt;float&gt;* to C float complex*", "body": "<p>This incompatibility is syntax only, both languages guarantee that their complex types have the same layout as a <code>float[2]</code> (or <code>double[2]</code> etc). So you could mediate between the two on having a macro <code>cfloat</code> that is defined according to the language in which it is expanded. Something along the lines of</p>\n\n<pre><code>#ifdef __cplusplus\ntypedef std::complex&lt;float&gt; cfloat;\n#else\ntypedef float _Complex cfloat;\n#endif\n</code></pre>\n\n<p>And then use this <code>cfloat</code> in all your function prototypes.</p>\n"}, {"comments": [{"owner": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "edited": false, "score": 0, "creation_date": 1529682494, "post_id": 50955357, "comment_id": 88977649, "body": "I&#39;ve tried this. Please see my edits. There&#39;s something up with my headers clashing because I get some syntax errors within the library I am using. The libraries header forces me to include &lt;complex.h&gt; and I have to include &lt;complex&gt; in my C++11 code. I think the problem is that I have to have both."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "edited": false, "score": 0, "creation_date": 1529685522, "post_id": 50955357, "comment_id": 88979192, "body": "In your original post you said your older C library used <code>_Complex</code> which is how C works and now you have changed it to <code>complex</code> which will clash as well as undefined. Hard to help without a more complete example."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "edited": false, "score": 0, "creation_date": 1529692469, "post_id": 50955357, "comment_id": 88982194, "body": "Check out this: <a href=\"https://stackoverflow.com/questions/23414270/c-complex-and-complex-h-in-the-same-file\" title=\"c complex and complex h in the same file\">stackoverflow.com/questions/23414270/&hellip;</a>   It goes into the necessary machinations to use &lt;complex.h&gt; and &lt;complex&gt; in the same translation unit. In particular the clash between <code>complex</code> and a macro defined in <code>&lt;complex.h&gt;</code>"}, {"owner": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "edited": false, "score": 0, "creation_date": 1529937778, "post_id": 50955357, "comment_id": 89044702, "body": "doug, thanks for the link. That provided <i>some</i> clarity. The problem is the functions in the header file for the library I am using. They all use &quot;float complex*&quot;  so &quot;#undef complex&quot; causes compilation errors for those function."}], "tags": [], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "is_accepted": false, "score": 3, "last_activity_date": 1529714130, "last_edit_date": 1529714130, "creation_date": 1529521483, "answer_id": 50955357, "question_id": 50955093, "link": "https://stackoverflow.com/questions/50955093/c11-complexfloat-to-c-float-complex/50955357#50955357", "title": "C++11 complex&lt;float&gt;* to C float complex*", "body": "<p>It may be quite easy. <code>std::complex</code> defines the storage order of complex objects and provides ways to access the real and imaginary parts of arrays of complex objects. If the order is the same as in your older library you may be in luck</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/numeric/complex\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/numeric/complex</a></p>\n\n<blockquote>\n  <p>For any object <code>z</code> of type <code>complex&lt;T&gt;</code>, <code>reinterpret_cast&lt;T(&amp;)[2]&gt;(z)[0]</code> is the real part of <code>z</code> and <code>reinterpret_cast&lt;T(&amp;)[2]&gt;(z)[1]</code> is the imaginary part of <code>z</code></p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>For any pointer to an element of an array of <code>complex&lt;T&gt;</code> named <code>p</code> and any valid array index <code>i</code>, <code>reinterpret_cast&lt;T*&gt;(p)[2*i]</code> is the real part of the complex number <code>p[i]</code>, and <code>reinterpret_cast&lt;T*&gt;(p)[2*i + 1]</code> is the imaginary part of the complex number <code>p[i]</code></p>\n</blockquote>\n\n<p>Thus you can refer to a C99 compatible <code>float _Complex *cx</code> simply.</p>\n\n<blockquote>\n  <p>`std::complex *cx1 = reinterpret_cast*> cx;</p>\n</blockquote>\n\n<p>Due to conflicts when including both <code>complex</code> and <code>complex.h</code> one approach is to pull out the basic declarations from the C header and include it in a \"C\" extern statement along with the used C function declarations like so:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;complex&gt;\n\nextern \"C\" {\n    // this is commented out because it is also declared in the c++ complex header\n    //typedef struct _C_float_complex\n    //{ /* float complex */\n    //    float _Val[2];\n    //} _C_float_complex;\n    typedef _C_float_complex _Fcomplex;\nvoid double_my_reals(_Fcomplex *pcx, int len);\n}\n\n\nint main()\n{\n    std::complex&lt;float&gt; cf[5]{ 1,2,3,4,5 };\n    for (auto x:cf)\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n    double_my_reals(reinterpret_cast&lt;_Fcomplex*&gt;(cf), 5);\n    for (auto x:cf)\n        std::cout &lt;&lt; x &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This code is specific to Visual Studio C and C++. VSC is not compatible with C99 but the data structures are the same so you will need to pull out the specific declaration for a complex float in whatever C compiler is being used.</p>\n\n<p>And this would be an example of the called \"C\" code for VC.</p>\n\n<pre><code>#include &lt;complex.h&gt;\n\nvoid double_my_reals(_Fcomplex *pcx, int len)\n{\n    for (int i = 0; i &lt; len; i++)\n    {\n        pcx[i]._Val[0] *= 2.0f;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1051, "user_id": 916046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ac4f5c34b40b8626dbeb447d6d0b1bc8?s=128&d=identicon&r=PG&f=1", "display_name": "CompEng88", "link": "https://stackoverflow.com/users/916046/compeng88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 0, "closed_date": 1529560352, "answer_count": 2, "score": -6, "last_activity_date": 1609870611, "creation_date": 1529520349, "last_edit_date": 1609870611, "question_id": 50955093, "link": "https://stackoverflow.com/questions/50955093/c11-complexfloat-to-c-float-complex", "closed_reason": "Needs details or clarity", "title": "C++11 complex&lt;float&gt;* to C float complex*", "body": "<p>I have an array of complex floats that I'm working with in C++11:</p>\n<pre><code>std::complex&lt;float&gt; *cx;\n</code></pre>\n<p>I am trying to use an older library which takes in C style complex floats:</p>\n<pre><code>float complex *cx;\n</code></pre>\n<p>When I try this:</p>\n<pre><code>std::complex&lt;float&gt; *cpp = new std::complex&lt;float&gt;[100];\ncomplex float *c = reinterpret_cast&lt;complex float*&gt;(cpp);\nc_process(c); // c_process(complex float *c)    [ c library function ]\n</code></pre>\n<p>I get:</p>\n<pre><code>error: expected ';' before 'float'   \ncomplex float *c = reinterpret_cast&lt;complex float*&gt;(cpp);\n        ^\n</code></pre>\n<p>The problem is that the library <code>#includes &lt;complex.h&gt;</code> in its header and I have to include that header, and I have to <code>#include &lt;complex&gt;</code> in my C++11 code to use std::complex.</p>\n<p><code>class complex</code> from <code>&lt;complex&gt;</code> and <code>#define complex _Complex</code> from <code>&lt;complex.h&gt;</code> seem to be clashing on the word <code>complex</code>.</p>\n<p><strong>One Solution:</strong>\n<strong>This solution only works if you can modify the other library's headers.</strong></p>\n<p>Since the powers at be closed this question (although I think it's a pretty good), here's what I did:</p>\n<p>Since <code>&lt;complex.h&gt;</code> has a <code>#define complex _Complex</code> and <code>&lt;complex&gt;</code> contains a <code>class complex</code>, there is some conflict when including both headers.</p>\n<p>I had to change all <code>float complex*</code> to <code>float _Complex*</code> everywhere in my code and other library's header files. This removed the clash on the word <code>complex</code> from the cstyle &lt;complex.h&gt;'s define and c++ style's class complex without changing what the code does.</p>\n"}, {"tags": ["python", "c++", "gdb", "cython", "cythonize"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529521126, "post_id": 50955064, "comment_id": 88908140, "body": "First, are you sure the debugging symbols are not there, as opposed to just not being picked up by gdb? If you <code>objdump</code> your module, are there no debug symbols there?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1529521305, "post_id": 50955064, "comment_id": 88908232, "body": "Also, is there a reason you&#39;re not using <code>gdb_debug=True</code> in your build, and not using <code>cygdb</code> instead of <code>gdb</code>?"}], "owner": {"reputation": 3338, "user_id": 1284353, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PZ8tK.jpg?s=128&g=1", "display_name": "Kirby", "link": "https://stackoverflow.com/users/1284353/kirby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529520251, "creation_date": 1529520251, "question_id": 50955064, "link": "https://stackoverflow.com/questions/50955064/why-arent-debugging-symbols-loaded-for-my-cython-application", "title": "Why aren&#39;t debugging symbols loaded for my Cython application?", "body": "<p>I am utilizing Cython to invoke a C++ API from python, and I'd like to debug the application.</p>\n\n<p>My <code>setup.py</code> file is structured as follows:</p>\n\n<pre><code>from distutils.core import setup\nfrom distutils.extension import Extension\nfrom distutils.util import get_platform\nfrom Cython.Build import cythonize\nimport glob\nimport os\n\nmyplatform = get_platform().split(\"-\")[0]\nif myplatform[:3] == 'mac':\n    compile_args = [\"-g\", \"-std=c++11\", \"-stdlib=libc++\"]\nelif myplatform == \"linux\":\n    compile_args = [\"-g\", \"-std=c++11\"]\nelse:\n    raise ValueError(\"Not using Unix-based OS\")\n\nextensions = [\n    Extension(...,\n              include_dirs=['/'],\n              extra_compile_args=compile_args,\n              extra_link_args=[\"-g\"],\n              language='c++'\n              )\n]\nsetup(\n    name=\"app name\",\n    ext_modules=cythonize(extensions),\n    packages=['app_wrapper']\n)\n</code></pre>\n\n<p>I've added the <code>-g</code> flags in an effort to generate debug symbols. I invoke <code>setup.py</code> using the following:</p>\n\n<pre><code>python setup.py build_ext --inplace --debug\n</code></pre>\n\n<p>After building, I invoke gdb to debug:</p>\n\n<pre><code>~/projdir: gdb python\n(gdb) run scripts/myscript.py\n</code></pre>\n\n<p>When I hit the exception I'm trying to debug, I have no symbols:</p>\n\n<pre><code>0x00007ffff0980c28 in ?? ()\n(gdb) bt\n#0  0x00007ffff0980c28 in ?? ()\n#1  0x0000000104c5efa2 in ?? ()\n#2  0x0000000000000000 in ?? ()\n</code></pre>\n\n<p>How do I debug this script?</p>\n"}, {"tags": ["c++", "sorting", "std", "c++98"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1529519226, "post_id": 50954826, "comment_id": 88907258, "body": "How did it &quot;not work&quot;?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529519345, "post_id": 50954826, "comment_id": 88907317, "body": "If <code>T</code> is a pointer, <code>lhs.z</code> and <code>rhz.z</code> don&#39;t make sense."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1529519379, "post_id": 50954826, "comment_id": 88907333, "body": "How does &quot;My vector V can contains either some A or some pointers to A?&quot; A single vector can only contain one type."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1529519424, "post_id": 50954826, "comment_id": 88907347, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  As the commentators above have noted your question is currently unclear."}, {"owner": {"reputation": 2304, "user_id": 8442410, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6421347be0480937c5b116eee3e33a67?s=128&d=identicon&r=PG&f=1", "display_name": "JRR", "link": "https://stackoverflow.com/users/8442410/jrr"}, "edited": false, "score": 1, "creation_date": 1529519579, "post_id": 50954826, "comment_id": 88907431, "body": "<code>V</code> does not contains either <code>A*</code> or <code>A</code> but I have vectors of <code>A</code> and vectors of <code>A*</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1529519774, "post_id": 50954826, "comment_id": 88907536, "body": "Cannot reproduce <a href=\"https://ideone.com/IWiyZP\" rel=\"nofollow noreferrer\">ideone.com/IWiyZP</a> works fine for me, post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529520302, "post_id": 50954826, "comment_id": 88907776, "body": "When you sort the vector of <code>A*</code>&#39;s do you use <code>std::sort(V.begin(), V.end(), ZSort&lt;A&gt;());</code> or <code>std::sort(V.begin(), V.end(), ZSort&lt;A*&gt;());</code>?"}, {"owner": {"reputation": 2304, "user_id": 8442410, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6421347be0480937c5b116eee3e33a67?s=128&d=identicon&r=PG&f=1", "display_name": "JRR", "link": "https://stackoverflow.com/users/8442410/jrr"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529520382, "post_id": 50954826, "comment_id": 88907805, "body": "@NathanOliver <code>std::sort(V.begin(), V.end(), ZSort&lt;A*&gt;());</code> This is what I did wrongly and I understood that from @slava comment"}], "owner": {"reputation": 2304, "user_id": 8442410, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6421347be0480937c5b116eee3e33a67?s=128&d=identicon&r=PG&f=1", "display_name": "JRR", "link": "https://stackoverflow.com/users/8442410/jrr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529520479, "creation_date": 1529519158, "last_edit_date": 1529520479, "question_id": 50954826, "link": "https://stackoverflow.com/questions/50954826/stdsort-using-custom-function-that-perform-on-pointer-and-value", "title": "std::sort using custom function that perform on pointer and value", "body": "<p>I want to sort a <code>std::vector</code> of objects <code>A</code> by their attribute <code>z</code>. I have some vector that contain some <code>A</code> and other that contain some pointers to <code>A</code>.</p>\n\n<p>Reading the documentation of <code>std::sort</code> I was able to build my costum comparator (that is templated because <code>A</code> is not my only one object).</p>\n\n<pre><code>template&lt;typename T&gt; struct ZSort\n{\n  bool operator()(const T lhs, const T rhs) const { return lhs.z &gt; rhs.z; }\n};\n\nstd::sort(V.begin(), V.end(), ZSort&lt;A&gt;());\n</code></pre>\n\n<p>However I'm struggled at making a <code>ZSort</code> that either work with <code>std::vector&lt;A&gt;</code> or <code>std::vector&lt;A*&gt;</code> I tried to overload the operator but it does not compile.</p>\n\n<pre><code>template&lt;typename T&gt; struct ZSort\n{\n  bool operator()(const T lhs, const T rhs) const { return lhs.z &gt; rhs.z; \n  bool operator()(const T* lhs, const T* rhs) const { return lhs-&gt;z &gt; rhs-&gt;z ;}\n}\n</code></pre>\n\n<p>Is there a solution without creating two structures?</p>\n\n<p><strong>Edit</strong> from @slava comment the correct way to call the sorting structure is </p>\n\n<pre><code>std::sort(V.begin(), V.end(), ZSort&lt;A&gt;());\n</code></pre>\n\n<p>and not</p>\n\n<pre><code> std::sort(V.begin(), V.end(), ZSort&lt;A*&gt;());\n</code></pre>\n"}, {"tags": ["c++", "node.js", "types", "node-ffi", "file-pointer"], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 5587251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db08e52f36b4931f05d14f75b64bd109?s=128&d=identicon&r=PG&f=1", "display_name": "Callum Thomas", "link": "https://stackoverflow.com/users/5587251/callum-thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1531341933, "creation_date": 1531341933, "answer_id": 51293919, "question_id": 50954641, "link": "https://stackoverflow.com/questions/50954641/what-is-the-reference-type-for-node-ffi-for-a-c-file-pointer/51293919#51293919", "title": "What is the reference type for Node-FFI for a c++ file pointer?", "body": "<p>For anybody else with this problem, since this question got no responses, the answer seems to be that Node-FFI does not have a file pointer at all. You must change the source code for C or C++ to use char * instead.</p>\n"}], "owner": {"reputation": 63, "user_id": 5587251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db08e52f36b4931f05d14f75b64bd109?s=128&d=identicon&r=PG&f=1", "display_name": "Callum Thomas", "link": "https://stackoverflow.com/users/5587251/callum-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 51293919, "answer_count": 1, "score": 0, "last_activity_date": 1531341933, "creation_date": 1529518399, "question_id": 50954641, "link": "https://stackoverflow.com/questions/50954641/what-is-the-reference-type-for-node-ffi-for-a-c-file-pointer", "title": "What is the reference type for Node-FFI for a c++ file pointer?", "body": "<p>I can't figure out which 'ref' module type to use in this situation.</p>\n\n<p>I have a DLL function that returns a bool and takes a file pointer as a parameter:</p>\n\n<pre><code>__declspec(dllexport) BOOL __stdcall GB_Build( FILE *fname )\n{ return Greenhouse.Build(fname) == true ? TRUE : FALSE; }\n</code></pre>\n\n<p>And a Node-FFI binding:</p>\n\n<pre><code>var ffi = require('ffi');\nvar ref = require('ref');\n\nvar greenbuildlib = null;\n\ngreenbuildlib = './PGD/GreenBuild_DLL.dll';\n\nvar greenbuild = ffi.Library(greenbuildlib, {\n    \"GB_GetBayLength\": ['double', []],\n    \"GB_SetBayLength\": ['void', ['double']],\n    \"GB_Build\": ['bool', [ref.types.Object]],\n});\n\nmodule.exports = greenbuild;\n</code></pre>\n\n<p>The \"GB_Build\" function creates a json file, and returns a bool based on if the file was created or not. fname stands for \"file name\" and is a C++ nullptr in the C++ code within the DLL.</p>\n\n<p>I am wondering what the ref.type would be to properly pass a file pointer in Node-FFI. I've tried null pointers, null, string, and Object, but all of them crash the application when I try this in the client-code:</p>\n\n<pre><code>var file_name = \"test.json\";\ngreenbuild.GB_Build(file_name)\n</code></pre>\n\n<p>Thank you for any help. I couldn't find another question on stackoverflow about file pointers in Node-FFI.</p>\n"}, {"tags": ["c++", "async-await", "c++-coroutine"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1529518474, "post_id": 50954609, "comment_id": 88906894, "body": "Have you read <a href=\"https://lewissbaker.github.io/2017/11/17/understanding-operator-co-await\" rel=\"nofollow noreferrer\">this</a>?"}, {"owner": {"reputation": 355, "user_id": 5955876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5b29bb86b71b9c789283bd5180355d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Count Zero", "link": "https://stackoverflow.com/users/5955876/count-zero"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529519151, "post_id": 50954609, "comment_id": 88907223, "body": "Thank you! This article is quite difficult for me to follow. :( Could you please explain the concept in a simpler way?"}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 2604941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f14b61e2afea8feb1625e9a14a20fc?s=128&d=identicon&r=PG&f=1", "display_name": "jenkas", "link": "https://stackoverflow.com/users/2604941/jenkas"}, "is_accepted": false, "score": 3, "last_activity_date": 1552857400, "last_edit_date": 1552857400, "creation_date": 1552856653, "answer_id": 55211915, "question_id": 50954609, "link": "https://stackoverflow.com/questions/50954609/what-does-co-await-operator-actually-do/55211915#55211915", "title": "What does co_await operator actually do?", "body": "<p>In short</p>\n\n<p>If function contains at least one co_await operator, then whole function is converted to coroutine. All it's scope variables, including parameters are stored on the heap, instead stack. This makes possible to suspend function without loosing it's state, and resume when needed. Also the function(coroutine) returns to the caller on the first suspend, and completes on the first \"return value\" statement. Since it returns uncompleted, the return type must be from \"awaitable types\" family, such as std::future (c++ allows you to create your own awaitable types - and it's awesome!), so the caller can subscribe/co_await on function completion.</p>\n\n<p>Important to note that:\nSuspended function may resume and complete at any time and any thread, depends on the implementation.</p>\n\n<p>In your example, when you write \"co_await Foo()\", you will get to the next line only after Foo() is completed and this line may be executed in another thread, however writing \"Foo()\", will get to the next line when Foo() is only suspended in the same thread, and you won't have any feedback about Foo() completion. </p>\n"}], "owner": {"reputation": 355, "user_id": 5955876, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5b29bb86b71b9c789283bd5180355d5c?s=128&d=identicon&r=PG&f=1", "display_name": "Count Zero", "link": "https://stackoverflow.com/users/5955876/count-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1552857400, "creation_date": 1529518295, "last_edit_date": 1552856796, "question_id": 50954609, "link": "https://stackoverflow.com/questions/50954609/what-does-co-await-operator-actually-do", "title": "What does co_await operator actually do?", "body": "<p>I have searched the Internet trying to find what does the <code>co_await</code> operator do, but I still can't understand that. I guess that the following code:</p>\n\n<pre><code>co_await foo();\n</code></pre>\n\n<p>suspends the coroutine until <code>foo</code> is done, but in this case how it differs from simply calling <code>foo</code> like:</p>\n\n<pre><code>foo();\n</code></pre>\n\n<p>This will also suspend the current function until <code>foo</code> is done. Please, explain me.</p>\n"}, {"tags": ["c++", "winapi", "mfc", "driver"], "comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1529518529, "post_id": 50954450, "comment_id": 88906919, "body": "Have you tried to debug the code? What is the actual value of <code>strDrvPath</code> at the call to <code>CreateService()</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529521123, "post_id": 50954450, "comment_id": 88908138, "body": "I have tons of services installed on my machine that have spaces in their paths and thus are quoted in their <code>ImagePath</code>, just like yours. I have a few services that have BOTH a quoted path AND command-line parameters, and they start up just fine. Most of my services that use command-line parameters do not have paths with spaces in them, though. As an alternative, you might consider creating a <code>Parameters</code> subkey and put the <code>v=1</code> value in that key instead, and then update your service code to look for that parameter in the Registry instead of the command line."}, {"owner": {"reputation": 821, "user_id": 3170929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64f78bd85dff5fd4bf8911f9b0c91177?s=128&d=identicon&r=PG", "display_name": "MikeF", "link": "https://stackoverflow.com/users/3170929/mikef"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529538021, "post_id": 50954450, "comment_id": 88914194, "body": "@RemyLebeau: Yes, I&#39;ve done it myself with service paths too. Could it be something specific for a kernel driver though? Maybe it doesn&#39;t like that I placed the <code>.sys</code> file on the desktop in my test process?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 2, "creation_date": 1529538078, "post_id": 50954450, "comment_id": 88914215, "body": "you install kernel mode driver. it must not have &quot; in path. even if it have space. and can not have command line. simply remove &quot; from path"}, {"owner": {"reputation": 821, "user_id": 3170929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64f78bd85dff5fd4bf8911f9b0c91177?s=128&d=identicon&r=PG", "display_name": "MikeF", "link": "https://stackoverflow.com/users/3170929/mikef"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1529539416, "post_id": 50954450, "comment_id": 88914524, "body": "@RbMm: Oh, wow, it does make sense now since you said it. That&#39;s right, there&#39;s nowhere in <code>DriverEntry()</code> that it receives those command line parameters. So that sentence in MSDN is just for user-mode services only. Thank you for pointing it out! One last question though, while digging thru paths of other installed drivers I noticed that their paths begin with <code>%SystemRoot%</code>, but when I tried <code>%UserProfile%</code> in my case it wasn&#39;t recognized. Are there different env variables that exist for that path there that I can use and some that I cannot?"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1529562831, "post_id": 50954450, "comment_id": 88920383, "body": "you can not use %UserProfile% because it depend from concrete user (token), while driver is global and loaded not in context of concrete user"}], "owner": {"reputation": 821, "user_id": 3170929, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64f78bd85dff5fd4bf8911f9b0c91177?s=128&d=identicon&r=PG", "display_name": "MikeF", "link": "https://stackoverflow.com/users/3170929/mikef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1529519374, "creation_date": 1529517642, "last_edit_date": 1529519374, "question_id": 50954450, "link": "https://stackoverflow.com/questions/50954450/createservice-and-quotes-for-lpbinarypathname-parameter", "title": "CreateService and quotes for lpBinaryPathName parameter", "body": "<p>I'm trying to install a kernel driver from an MFC application using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682450(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>CreateService</code></a> function and I'm not sure that I fully understand how <code>lpBinaryPathName</code> parameter is supposed to be set up.</p>\n\n<p>Quoting MSDN:</p>\n\n<blockquote>\n  <p>The fully qualified path to the service binary file. If the path\n  contains a space, it must be quoted so that it is correctly\n  interpreted. For example, \"d:\\my share\\myservice.exe\" should be\n  specified as \"\\\"d:\\my share\\myservice.exe\\\"\".</p>\n  \n  <p>The path can also include arguments for an auto-start service. For\n  example, \"d:\\myshare\\myservice.exe arg1 arg2\". These arguments are\n  passed to the service entry point (typically the main function).</p>\n</blockquote>\n\n<p>So I do this:</p>\n\n<pre><code>LPCTSTR pStrDriverFilePath;     //Driver full path\nLPCTSTR pStrDriverFileParams;       //Parameters\n\n\nhSCManager = OpenSCManager(NULL, NULL, SC_MANAGER_CREATE_SERVICE);\n\nCString strDrvPath;\nstrDrvPath.Format(L\"\\\"%s\\\"\", pStrDriverFilePath);\n\nif(pStrDriverFileParams &amp;&amp;\n    pStrDriverFileParams[0])\n{\n    strDrvPath.AppendFormat(L\" %s\", pStrDriverFileParams);\n}\n\nCreateService(hSCManager, pStrDriverName, pStrDriverDispName, \n    SERVICE_START | DELETE | SERVICE_STOP | SERVICE_QUERY_STATUS,\n    dwDriverType, dwStartType, dwErrorCtrl,\n    strDrvPath,\n    NULL, NULL, NULL,\n    NULL, NULL);\n</code></pre>\n\n<p>But then when I try to start it:</p>\n\n<pre><code>StartService(hScDrvHandle, 0, NULL);\n</code></pre>\n\n<p>it fails with the error code 123, or <code>ERROR_INVALID_NAME</code>:</p>\n\n<blockquote>\n  <p>The filename, directory name, or volume label syntax is incorrect.</p>\n</blockquote>\n\n<p><em>Edit: This is how it ends up looking in <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\</code> key:</em></p>\n\n<p><a href=\"https://i.stack.imgur.com/T94sI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T94sI.png\" alt=\"enter image description here\"></a></p>\n\n<p>It only works if I remove double quotes (but only w/o a parameter.)</p>\n"}, {"tags": ["c++", "sdl", "unique-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1529517570, "post_id": 50954427, "comment_id": 88906495, "body": "<code>make_unique</code> is incompatible with custom deleters."}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529518534, "post_id": 50954427, "comment_id": 88906922, "body": "@Fran&#231;oisAndrieux Thanks I&#39;ll try the other methods in that post. BTW is there a way to hide the default ctor and explicitly use the Creator functions?"}, {"owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529518764, "post_id": 50954427, "comment_id": 88907031, "body": "Hi! I change the code to <code>cGraphics() : m_Window(nullptr, SDL_DestroyWindow), m_Renderer(nullptr, SDL_DestroyRenderer) {}</code> and now the first error disappears. The second one still shows and I&#39;m not sure how to deal with it. I thought providing a default ctor is good enough but it seems to be more than this."}], "owner": {"reputation": 1041, "user_id": 1811159, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/JBmj0.png?s=128&g=1", "display_name": "Nicholas Humphrey", "link": "https://stackoverflow.com/users/1811159/nicholas-humphrey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 1, "closed_date": 1529517648, "answer_count": 0, "score": 0, "last_activity_date": 1529518961, "creation_date": 1529517536, "last_edit_date": 1529518961, "question_id": 50954427, "link": "https://stackoverflow.com/questions/50954427/how-to-initiate-stdunique-ptr-in-the-constructor-with-stdmake-unique", "closed_reason": "Duplicate", "title": "How to initiate std::unique_ptr in the constructor with std::make_unique()", "body": "<p><strong>Update</strong>\nI read the other post and figured out that I can write:\n<code>cGraphics() : m_Window(nullptr, SDL_DestroyWindow), m_Renderer(nullptr, SDL_DestroyRenderer) {}</code>, which removes the first error. However it still shows the second error:</p>\n\n<blockquote>\n  <p>error C2512: 'std::unique_ptr::unique_ptr': no appropriate default constructor available</p>\n</blockquote>\n\n<p><strong>End of Update</strong></p>\n\n<p>I'm trying to use smart pointers with SDL2 and so far I'm struggling with the grammar:</p>\n\n<pre><code>#pragma once\n\n#include &lt;memory&gt;\n#include &lt;unordered_map&gt;\n#include &lt;string&gt;\n#include \"SDL.h\"\n#include \"SDL_image.h\"\n\nstruct cRGB\n{\n    int r, g, b;\n};\n\nclass cGraphics\n{\npublic:\n    //  Creator functions for initialization\n    bool Create_Window(int xWin, int yWin);\n    bool Create_Renderer();\n    bool Create_Texture(std::string texid, std::string texres, int r, int g, int b);\n\n    //  ctor &amp; dtor\n    cGraphics() : m_Window(std::make_unique&lt;SDL_Window&gt;(nullptr, [](SDL_Window* w) {delete w; })), m_Renderer(std::make_unique&lt;SDL_Renderer&gt;(nullptr, [](SDL_Renderer* r) {delete r; })) {}\n    cGraphics(int xWin, int yWin);\n    ~cGraphics();\n\n    //  Rendering\n    void ClearScreen();\n    void RenderTexture(std::string texres, int xDes, int yDes);\nprivate:\n    m_Renderer(nullptr, SDL_DestroyRenderer) {}\n    std::unique_ptr&lt;SDL_Window, decltype(&amp;SDL_DestroyWindow)&gt; m_Window;\n    std::unique_ptr&lt;SDL_Renderer, decltype(&amp;SDL_DestroyRenderer)&gt; m_Renderer;\n    std::unordered_map&lt;std::string, std::unique_ptr&lt;SDL_Texture, decltype(&amp;SDL_DestroyTexture)&gt;&gt; m_Texture;\n\n    //  Creator helper\n    SDL_Texture* CreateTextureRawPtr(std::string texres, int r, int g, int b);\n};\n\ncGraphics::cGraphics(int xWin, int yWin)\n{\n    if (!Create_Window(xWin, yWin) || !Create_Renderer())\n    {\n\n    }\n}\n\ncGraphics::~cGraphics()\n{\n    IMG_Quit();\n    SDL_Quit();\n}\n\nvoid cGraphics::ClearScreen()\n{\n    SDL_RenderClear(m_Renderer.get());\n}\n\nvoid cGraphics::RenderTexture(std::string texres, int xDes, int yDes)\n{\n    SDL_Rect g_SrcRect = { 0, 0, 32, 32 };          //  hard-coded for test\n    SDL_Rect g_DesRect = { xDes, yDes, 32, 32 };\n    SDL_RenderCopy(m_Renderer.get(), m_Texture[texres].get(), &amp;g_SrcRect, &amp;g_DesRect);\n}\n\nbool cGraphics::Create_Window(int xWin, int yWin)\n{\n    m_Window.reset(SDL_CreateWindow(\"SDL Window\", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, xWin, yWin, SDL_WINDOW_SHOWN));\n    return true;\n}\n\nbool cGraphics::Create_Renderer()\n{\n    m_Renderer.reset(SDL_CreateRenderer(m_Window.get(), -1, 0));\n    SDL_SetRenderDrawColor(m_Renderer.get(), 255, 255, 255, 0xff);\n    return true;\n}\n\nbool cGraphics::Create_Texture(std::string texid, std::string texres, int r, int g, int b)\n{\n    m_Texture.emplace(texid, std::make_unique&lt;SDL_Texture&gt;(CreateTextureRawPtr(texres, r, g, b)));\n    return true;\n}\n\nSDL_Texture* cGraphics::CreateTextureRawPtr(std::string texres, int r, int g, int b)\n{\n    SDL_Surface* temp = IMG_Load(texres.c_str());\n    //Set color key\n    SDL_SetColorKey(temp, SDL_TRUE,\n        SDL_MapRGB(temp-&gt;format, r, g, b));\n\n    SDL_Texture* pTexture = SDL_CreateTextureFromSurface(m_Renderer.get(), temp);\n\n    SDL_FreeSurface(temp);\n    return pTexture;\n}\n</code></pre>\n\n<p>I got two errors:</p>\n\n<p>First one on this line (<strong>I added this line thinking that it may solve second error</strong>:</p>\n\n<pre><code>cGraphics() : m_Window(std::make_unique&lt;SDL_Window&gt;(nullptr, [](SDL_Window* w) {delete w; })), m_Renderer(std::make_unique&lt;SDL_Renderer&gt;(nullptr, [](SDL_Renderer* r) {delete r; })) {}\n</code></pre>\n\n<p>It complains that no instances of the constructor matches the arguments. Basically I'm trying to initialize them with a default deletor and use <code>reset</code> to  put a real deletor which is <code>SDL_DestroyWindow()</code>.</p>\n\n<p>This error causes a chain reaction and almost every line contains an error. So I'm assuming that once this is fixed most of the other errors will disappear.</p>\n\n<p>The second error (<strong>i.e. if I remove the line causing the first error</strong>):</p>\n\n<pre><code>cGraphics::cGraphics(int xWin, int yWin)\n{\n    if (!Create_Window(xWin, yWin) || !Create_Renderer())\n    {\n\n    }\n}\n</code></pre>\n\n<p>I didn't complete the inner code block, but it's already complaining that </p>\n\n<blockquote>\n  <p>No default ctor for class std::unique_ptr</p>\n</blockquote>\n\n<p>I'm not sure how to proceed from here, and even googling shows zero result for this particular error. So I think maybe it's because there is no default ctor (I actually want to put the default ctor to <code>private</code>) , and I added the line which causes the first error.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529518606, "post_id": 50954377, "comment_id": 88906953, "body": "@user463035818 I doubt OP has even the slightest idea what he is dealing with."}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529518659, "post_id": 50954377, "comment_id": 88906974, "body": "Are there any restrictions on the relations?"}, {"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "reply_to_user": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529518782, "post_id": 50954377, "comment_id": 88907049, "body": "@Whatever nope. Also could you elaborate on your first comment please?"}, {"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529520317, "post_id": 50954377, "comment_id": 88907781, "body": "@user463035818 english isn&#39;t my first language so maybe I am not too clear(I&#39;ve translated the problem) but I don&#39;t think you understood what the task is about"}, {"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "edited": false, "score": 0, "creation_date": 1529520508, "post_id": 50954377, "comment_id": 88907869, "body": "5 is not a friend with 3 and 2. 1 4 5 is the solution because 1 knows 4 and 5, 2 knows 1 and 5 and 5 knows 1 and 4. All of them know each other and there are 3 people in the sequence so it satisfies the task."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529520671, "post_id": 50954377, "comment_id": 88907945, "body": "<a href=\"https://en.wikipedia.org/wiki/Clique_(graph_theory)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Clique_(graph_theory)</a> i think this is what you are looking for"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "edited": false, "score": 0, "creation_date": 1529520169, "post_id": 50954990, "comment_id": 88907710, "body": "Thank you for giving me resources. So does that mean checking for all possible solutions is actually a good method?"}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529520321, "post_id": 50954990, "comment_id": 88907784, "body": "Nope. Brute-force algorithm will result in exponential time complexity. You won&#39;t get a solution for a graph of size 100+ in any reasonable time."}, {"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529520585, "post_id": 50954990, "comment_id": 88907901, "body": "@user463035818 wait, what is the difference between a node and a vertex?"}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 0, "creation_date": 1529520676, "post_id": 50954990, "comment_id": 88907949, "body": "There is no difference unless otherwise specified."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "edited": false, "score": 0, "creation_date": 1529520794, "post_id": 50954990, "comment_id": 88908010, "body": "@AlexandruIca just forget everything i said ;) I completely misunderstood the question and as mentioned before my knowledge of graph theory is zero"}, {"owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "edited": false, "score": 0, "creation_date": 1529520936, "post_id": 50954990, "comment_id": 88908065, "body": "After studying a bit about the clique problem I am wondering what they mean when they say &#39;efficient&#39;."}, {"owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "edited": false, "score": 1, "creation_date": 1529520990, "post_id": 50954990, "comment_id": 88908091, "body": "Subexponential time complexity as opposed to pure exponential time complexity."}], "tags": [], "owner": {"reputation": 891, "user_id": 6749481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38e30962b980293ffaff05455b7c013e?s=128&d=identicon&r=PG&f=1", "display_name": "An0num0us", "link": "https://stackoverflow.com/users/6749481/an0num0us"}, "is_accepted": false, "score": 3, "last_activity_date": 1529520560, "last_edit_date": 1529520560, "creation_date": 1529519887, "answer_id": 50954990, "question_id": 50954377, "link": "https://stackoverflow.com/questions/50954377/how-to-find-a-sequence-of-size-kor-more-of-people-that-are-friends-with-each-o/50954990#50954990", "title": "How to find a sequence of size k(or more) of people that are friends with each other?", "body": "<p>Your problem is about finding a clique of size k or smaller. I don't know if there are any algorithms capable of doing that, but there are certainly algorithms able to find maximum size clique. Once you find the maximum size clique (let's call it n-clique) in your graph, finding a clique of size &lt;= n reduces to extracting a subset of vertices from n-clique.</p>\n\n<p>There is no polynomial time algorithm for the general case because this problem is NP-complete, so don't expect awesome results. <a href=\"https://stackoverflow.com/questions/22750434/how-to-find-the-size-of-maximal-clique-or-clique-number\">This answer</a> containts a short list of algorithms that will solve this problem quicker than brute-force algorithm. You should also take a look at <a href=\"https://people.eecs.berkeley.edu/~luca/cs172/karp.pdf\" rel=\"nofollow noreferrer\">Karp's paper on problem reducibility</a> if you want to learn a little more about it (even if you don't apply this concept to that problem, it's worth reading because many solutions to NP-complete problems rely on reduction). </p>\n"}], "owner": {"reputation": 109, "user_id": 8622014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d6c20094d65ed66baefdede6e3e0ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandru Ica", "link": "https://stackoverflow.com/users/8622014/alexandru-ica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529520560, "creation_date": 1529517390, "last_edit_date": 1529518986, "question_id": 50954377, "link": "https://stackoverflow.com/questions/50954377/how-to-find-a-sequence-of-size-kor-more-of-people-that-are-friends-with-each-o", "title": "How to find a sequence of size k(or more) of people that are friends with each other?", "body": "<p>I am trying to solve a problem that was given at an exam in a university in my country. It gives me as input a file that contains on the first line 3 numbers:\n<li>The first one(n) represents the number of people</li>\n<li>The second one(m) represents the number of friendships between people</li>\n<li>The third one(k) is the size of the sequence(but the sequence doesn't have to be exactly as large as this number, it can be bigger)</li></p>\n\n<p>...and on the second line the relations(m pairs of numbers with the form (a, b) meaning a is friend with b and b is friend with a). </p>\n\n<p>The task is to find the sequence with the maximum length(which is at least k people) in which people are friends with each other as efficiently as possible. If there is no such sequence \"NO\" will be printed.</p>\n\n<p>Their examples:</p>\n\n<h1>data.txt:</h1>\n\n<pre><code>5 5 3\n1 2 5 1 3 2 4 5 1 4 \n</code></pre>\n\n<h1>output:</h1>\n\n<pre><code>1 4 5\n</code></pre>\n\n<h1>data.txt:</h1>\n\n<pre><code>5 5 4\n1 2 5 1 3 2 4 5 1 4 \n</code></pre>\n\n<h1>output:</h1>\n\n<pre><code>No\n</code></pre>\n\n<h1>data.txt:</h1>\n\n<pre><code>11 18 3 \n1 8 4 7 7 10 11 10 2 1 2 3 8 9 8 3 9 3 9 2 5 6 5 11 1 4 10 6 7 6 2 8 11 7 11 6 \n</code></pre>\n\n<h1>output.txt:</h1>\n\n<pre><code>2 3 6 7 8 9 10 11\n</code></pre>\n\n<h1>My approach</h1>\n\n<p>Friendships in this case can be represented with an undirected graph (for me at least this seems the most logical data structure to use) where vertices represent people and edges represent friendships. To be part of the sequence a vertex needs to have a degree greater than or equal to k - 1.</p>\n\n<p>And that's where I stop. Currently all I can do is eliminate the nodes that don't have a degree of at least k - 1:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n\nstd::ifstream f{ \"data.txt\" };\n\nconstexpr size_t LIMIT = 101;\n\n// graph[i][j]: i is friend with j\n// short to avoid vector&lt;bool&gt; specialization\nstd::vector&lt;std::vector&lt;short&gt;&gt; graph(LIMIT, std::vector&lt;short&gt;(LIMIT, 0));\nstd::vector&lt;int&gt; validNodes;\n\nint numOfNodes, numOfRelationships, sequenceSize;\n\nvoid Read()\n{\n    f &gt;&gt; numOfNodes &gt;&gt; numOfRelationships &gt;&gt; sequenceSize;\n\n    int a;\n    int b;\n\n    for(int i = 1; i &lt;= numOfRelationships; ++i) {\n        f &gt;&gt; a &gt;&gt; b;\n\n        graph[a][b] = graph[b][a] = 1;\n    }\n}\n\nint Degree(int node)\n{\n    int result = 0;\n\n    for(int i = 1; i &lt;= numOfNodes; ++i) {\n        if(i != node &amp;&amp; graph[node][i] == 1) {\n            ++result;\n        }\n    } \n\n    return result;\n}\n\nvoid KeepValidNodes()\n{\n    for(int i = 1; i &lt;= numOfNodes; ++i) {\n        if(Degree(i) &lt; sequenceSize - 1) {\n            // Don't add the node to validNodes vector\n            // \"Remove it from the graph\" aka it's not friend with anyone\n            // all nodes that were friends with it now have a lower degree, remove them from the validNodes vector if that's the case\n            for(int j = 1; j &lt;= numOfNodes; ++j) {\n                auto findPos = std::find(validNodes.begin(), validNodes.end(), j);\n\n                if(findPos != validNodes.end() &amp;&amp; Degree(j) - 1 &lt; sequenceSize - 1) {\n                    *findPos = -1;\n                }\n\n                graph[i][j] = graph[j][i] = 0;\n            } \n        }\n        else {\n            validNodes.push_back(i);\n        }\n    } \n}\n\nvoid PrintSequence()\n{\n    bool empty = true;\n\n    for(const int&amp; node : validNodes) {\n        if(node != -1) {\n            empty = false;\n            std::cout &lt;&lt; node &lt;&lt; std::endl;\n        }\n    }\n\n    if(empty) {\n        std::cout &lt;&lt; \"No\" &lt;&lt; std::endl;\n    }\n}\n\nint main()\n{\n    Read();\n    KeepValidNodes();\n    PrintSequence();\n}\n</code></pre>\n\n<p>This works only for their first 2 examples. The only possible solution that I could think of is generating all possible combinations of nodes and see which one satisfies the requirements. How can I solve this problem efficiently as they say?</p>\n\n<h1>EDIT:</h1>\n\n<p>I am not necessarily looking for a fully working code but I don't even know how I could approach this problem.</p>\n"}, {"tags": ["c++", "c", "lua", "stack"], "answers": [{"comments": [{"owner": {"reputation": 422, "user_id": 9922866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OSxxbkIUZrA/AAAAAAAAAAI/AAAAAAAAADU/tiPj589rmBE/photo.jpg?sz=128", "display_name": "Personage", "link": "https://stackoverflow.com/users/9922866/personage"}, "edited": false, "score": 0, "creation_date": 1529520119, "post_id": 50954232, "comment_id": 88907678, "body": "Thank you for the excellent answer. As far as raising an error in the event of too many or too few arguments being passed, would <code>luaL_error</code> also be appropriate?"}, {"owner": {"reputation": 1476, "user_id": 9383219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97fabe5d903589acb1dfdf17fe4e405e?s=128&d=identicon&r=PG&f=1", "display_name": "cyclaminist", "link": "https://stackoverflow.com/users/9383219/cyclaminist"}, "edited": false, "score": 1, "creation_date": 1529797291, "post_id": 50954232, "comment_id": 89005184, "body": "<code>luaL_error</code> (and <code>luaL_argerror</code>) both call <code>lua_error</code>, but provide extra functionality that is sometimes useful, so you can use whichever one suits your purposes."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 3, "last_activity_date": 1529516886, "creation_date": 1529516886, "answer_id": 50954232, "question_id": 50954049, "link": "https://stackoverflow.com/questions/50954049/can-i-guarantee-the-size-of-the-lua-stack/50954232#50954232", "title": "Can I guarantee the size of the Lua stack?", "body": "<p>If you have directly registered a function to Lua, and a Lua script calls that function with N arguments, then that function will have N values on the stack when it gets called. That's how it works, and no process can interfere with this (well, you could <em>manually</em> call that function from C with an improper <code>lua_State</code>, but that's your fault).</p>\n\n<p>So long as you don't do any stack manipulation between the start of that function and whatever you use to check the current stack size, then your test will be accurate.</p>\n\n<p>Every Lua function is well-documented in how (or if) it manipulates the stack. Whether it inserts values to the stack, removes them from the stack, and so forth.</p>\n\n<p>That being said, <code>assert</code> is probably the wrong tool. If the user provides the wrong number of parameters, and you consider that erroneous behavior, you should invoke <code>lua_error</code>. And not just on debug builds.</p>\n"}], "owner": {"reputation": 422, "user_id": 9922866, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OSxxbkIUZrA/AAAAAAAAAAI/AAAAAAAAADU/tiPj589rmBE/photo.jpg?sz=128", "display_name": "Personage", "link": "https://stackoverflow.com/users/9922866/personage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 50954232, "answer_count": 1, "score": 2, "last_activity_date": 1529516886, "creation_date": 1529516230, "question_id": 50954049, "link": "https://stackoverflow.com/questions/50954049/can-i-guarantee-the-size-of-the-lua-stack", "title": "Can I guarantee the size of the Lua stack?", "body": "<p>I am using the Lua API for C/C++ to create functions in C/C++ and then register them for use in Lua scripts. Obviously these functions expect a certain number of arguments with specific types, which is no problem in C/C++ because of static typing. However, given that Lua is dynamic, I need to manually check the number of arguments passed and their types when I call this C-function from Lua. These arguments are pushed onto the Lua stack, so I can check the number of arguments with <code>lua_gettop</code> and then check their individual types with <code>lua_type</code>.</p>\n\n<p>My question, though, is can I guarantee the number of elements on the stack, that is, the number of arguments passed to my function? That way, I could check this at the beginning of my C-function with an assertion: <code>assert(lua_gettop(L) == x)</code>, with <code>x</code> just being a placeholder for the desired number of arguments and <code>L</code> being a <code>lua_State*</code>. This extends a little deeper, as I wonder if other functions that interact with the Lua stack clean up so that the stack is empty when I call this function; otherwise, if some things were left sitting on the stack from a previous function call, the assertion would fail. Below is a simple example.</p>\n\n<p>C/C++ code:</p>\n\n<pre><code>int foo(lua_State* L) {\n    assert(lua_gettop(L) == 2);\n\n    // do stuff\n\n    return 1;\n}\n</code></pre>\n\n<p>Calling the function in Lua. Assume that the function expects two strings as arguments; thus, the first call would succeed and the second would fail.</p>\n\n<pre><code>foo(\"hello\", \"world\")\nfoo(\"hello\", \"world\", 1)\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1529514890, "creation_date": 1529514890, "answer_id": 50953704, "question_id": 50953676, "link": "https://stackoverflow.com/questions/50953676/c-define-directive-on-class-in-header-file/50953704#50953704", "title": "c++ define directive on class in header file", "body": "<p>This is what is called <a href=\"https://en.wikipedia.org/wiki/Include_guard\" rel=\"nofollow noreferrer\">Include Guard</a>. It's so that you header is included only once (to avoid ODR violations, i.e. multiple definitions of the same entity). </p>\n\n<p>For example if <code>A</code> includes <code>B</code> and <code>C</code> but <code>B</code> also includes <code>C</code>.</p>\n\n<p>Basically they work this way: when compiler includes the header the 1st time it defines the include guard macro. In all the subsequent includes it just skips the file contents, since the macro is already defined (ifndef).</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 2, "last_activity_date": 1529514935, "creation_date": 1529514935, "answer_id": 50953716, "question_id": 50953676, "link": "https://stackoverflow.com/questions/50953676/c-define-directive-on-class-in-header-file/50953716#50953716", "title": "c++ define directive on class in header file", "body": "<p>If your source code (by whatever path) did this:</p>\n\n<pre><code>  #include \"savings.h\"\n  #include \"savings.h\"\n</code></pre>\n\n<p>then <code>SAVINGS_H</code> <em>would</em> be defined after the first <code>#include</code>, and would prevent a re-definition of the names in the <code>savings.h</code> header file. This is what is known as an \"include guard\", and prevents redefinition of names in header files in the same translation unit.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1529514946, "creation_date": 1529514946, "answer_id": 50953720, "question_id": 50953676, "link": "https://stackoverflow.com/questions/50953676/c-define-directive-on-class-in-header-file/50953720#50953720", "title": "c++ define directive on class in header file", "body": "<p>Look up \"header guard\" aka \"include guard\".</p>\n\n<p>The purpose is to prevent multiple inclusion (including multiple transitive inclusion) of the header file. Which would lead to problems with the same type being defined multiple times.</p>\n"}], "owner": {"reputation": 732, "user_id": 7344314, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/3b758dd8322df54678979c104f56b420?s=128&d=identicon&r=PG&f=1", "display_name": "henhen", "link": "https://stackoverflow.com/users/7344314/henhen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "closed_date": 1529515049, "answer_count": 3, "score": -1, "last_activity_date": 1529514946, "creation_date": 1529514758, "question_id": 50953676, "link": "https://stackoverflow.com/questions/50953676/c-define-directive-on-class-in-header-file", "closed_reason": "Duplicate", "title": "c++ define directive on class in header file", "body": "<p>I am somewhat aware of what the #define directive does and its conveniences but what does it mean when using it on a class such as:</p>\n\n<pre><code>#ifndef SAVINGS_H\n#define SAVINGS_H\n#include \"account.h\"\n\nclass Savings\n{\nprotected:\npublic:\n};\n#endif\n</code></pre>\n\n<p>If SAVINGS_H is not defined, it defines SAVINGS_H, but where is SAVINGS_H ever used? And why is the class referred to as SAVINGS_H in all capital letters?</p>\n\n<p>I know when you define a variable such as </p>\n\n<pre><code>#define num 1\n\nint arr[num]\n</code></pre>\n\n<p>num gets replaced with 1 but for my question, SAVINGS_H is not used any where else in the program</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 2, "creation_date": 1529514914, "post_id": 50953662, "comment_id": 88905142, "body": "How about basic escaping <code>&quot;test\\\\ntest2&quot;</code>?"}, {"owner": {"reputation": 135, "user_id": 9968819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0v87EXP0rQ4/AAAAAAAAAAI/AAAAAAAAABU/O7Y53FSJ_PQ/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/9968819/sean"}, "reply_to_user": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1529515508, "post_id": 50953662, "comment_id": 88905445, "body": "The variable is set, I cannot change it, as stated in my question."}, {"owner": {"reputation": 13359, "user_id": 1779477, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/f62e1d28063f41fd9728d811fea3a84c?s=128&d=identicon&r=PG&f=1", "display_name": "idmean", "link": "https://stackoverflow.com/users/1779477/idmean"}, "edited": false, "score": 0, "creation_date": 1529515637, "post_id": 50953662, "comment_id": 88905511, "body": "I see. The last paragraph was misleading because it implied that you could change the literal. (But I edited mainly so that I could retract my vote...)"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1529516512, "post_id": 50953662, "comment_id": 88905981, "body": "Are you trying to get <i>the original</i> representation, or just <i>an unambiguous</i> representation?"}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "edited": false, "score": 0, "creation_date": 1529516932, "post_id": 50953662, "comment_id": 88906193, "body": "The brute force way would be to replace every occurrence of <code>&quot;\\n&quot;</code> with <code>&quot;\\\\n&quot;</code> in your string (and then repeat for all the other escape sequences).  See the SO question <a href=\"https://stackoverflow.com/q/2896600/654614\">How to replace all occurrences of a character in string?</a> for code."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1529518572, "post_id": 50953662, "comment_id": 88906936, "body": "<code>qDebug()</code> from the Qt library does something like that. Perhaps take a look at how that it implemented (it&#39;s open source)."}], "answers": [{"tags": [], "owner": {"reputation": 3812, "user_id": 7697209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zmCe.png?s=128&g=1", "display_name": "Kostas", "link": "https://stackoverflow.com/users/7697209/kostas"}, "is_accepted": true, "score": 7, "last_activity_date": 1529533382, "last_edit_date": 1529533382, "creation_date": 1529517192, "answer_id": 50954323, "question_id": 50953662, "link": "https://stackoverflow.com/questions/50953662/ouputting-string-literal-from-a-variable/50954323#50954323", "title": "Ouputting String Literal from a variable", "body": "<p>An escape sequence <code>\\x</code> is translated into only <strong>one</strong> character.</p>\n\n<p>There are probably some platforms out there for which an endline character is printed as <code>\\n</code> but this is solely implementation dependent.</p>\n\n<p>Translating this then to <strong>two</strong> characters (<code>\\</code> and <code>x</code>), would mean you would have to modify the <code>string</code> itself.</p>\n\n<p>The easiest way of doing that is making a custom function.</p>\n\n<pre><code>void print_all(std::string s)\n{\n    for (char c : s) {\n        switch (c) {\n            case '\\n' : std::cout &lt;&lt; \"\\\\n\"; break;\n            case '\\t' : std::cout &lt;&lt; \"\\\\t\"; break;\n\n            // etc.. etc..\n\n            default : std::cout &lt;&lt; c;\n        }\n    }\n}\n</code></pre>\n\n<p>For all <a href=\"http://en.cppreference.com/w/cpp/language/escape\" rel=\"nofollow noreferrer\">escape sequences</a> you care about.</p>\n\n<p>Note: unlike <code>ctrl-x</code> and <code>x</code>, there is no direct correlation between the values of <code>\\x</code> and <code>x</code>, <em>at least in the ASCII table</em>, so a <code>switch</code> statement is necessary.</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 9968819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0v87EXP0rQ4/AAAAAAAAAAI/AAAAAAAAABU/O7Y53FSJ_PQ/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/9968819/sean"}, "edited": false, "score": 0, "creation_date": 1529614855, "post_id": 50958111, "comment_id": 88950721, "body": "I had it originally in my post, but it seems it was edited out, but I cannot access the string stored in the variable at all, I have to use the variable declaration"}], "tags": [], "owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "is_accepted": false, "score": 2, "last_activity_date": 1529534989, "creation_date": 1529534989, "answer_id": 50958111, "question_id": 50953662, "link": "https://stackoverflow.com/questions/50953662/ouputting-string-literal-from-a-variable/50958111#50958111", "title": "Ouputting String Literal from a variable", "body": "<p>You could also use raw string literals if you have c++11.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    cout &lt;&lt; R\"(test\\ntest2)\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Mike</p>\n"}], "owner": {"reputation": 135, "user_id": 9968819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0v87EXP0rQ4/AAAAAAAAAAI/AAAAAAAAABU/O7Y53FSJ_PQ/photo.jpg?sz=128", "display_name": "Sean", "link": "https://stackoverflow.com/users/9968819/sean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 1, "accepted_answer_id": 50954323, "answer_count": 2, "score": 4, "last_activity_date": 1529534989, "creation_date": 1529514718, "last_edit_date": 1529515584, "question_id": 50953662, "link": "https://stackoverflow.com/questions/50953662/ouputting-string-literal-from-a-variable", "title": "Ouputting String Literal from a variable", "body": "<p>I want to know if it is possible to output a raw string from a preset variable whose value I cannot change. For example:</p>\n\n<pre><code>string test = \"test\\ntest2\";\ncout &lt;&lt; test;\n</code></pre>\n\n<p>would output</p>\n\n<pre><code>test\ntest2\n</code></pre>\n\n<p>Is it possible to run similar code as above but change the cout statement to print the raw string like so:</p>\n\n<pre><code>test\\ntest2\n</code></pre>\n"}, {"tags": ["c++", "makefile", "wxwidgets", "configure"], "comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1529514236, "post_id": 50953431, "comment_id": 88904759, "body": "where did you get the compiler from? What version? Where it is installed? Did you update the $PATH variable so that the toolchain can be found?"}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "reply_to_user": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "edited": false, "score": 0, "creation_date": 1529514468, "post_id": 50953431, "comment_id": 88904885, "body": "I have Cygwin64 installed.   MinGW64 is installed in hope of fixing the problem.  <code>gcc -v</code> gives me GCC posix 7.3.0."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529520125, "post_id": 50953431, "comment_id": 88907683, "body": "In the same command line window, type <code>PATH</code> and press <code>enter</code>. It must show something related to <code>mingw\\bin</code>, If not, that path must be added."}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529520552, "post_id": 50953431, "comment_id": 88907888, "body": "In the command prompt windows, <code>PATH</code> does show <code>C:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin</code>.  Is it good?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529520983, "post_id": 50953431, "comment_id": 88908084, "body": "Then edit your Windows PATH var or execute <code>PATH=%PATH%;C:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\m&zwnj;&#8203;ingw64\\bin</code> before <code>mingw32-make</code>"}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529521763, "post_id": 50953431, "comment_id": 88908455, "body": "So add <code>PATH=%PATH%;</code> before the link to <code>....\\mingw64\\bin</code> ?"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529522040, "post_id": 50953431, "comment_id": 88908595, "body": "Add the link by editing Windows environment var called PATH. This is permanent. Executing <code>PATH=%PATH%;C:\\mingw....</code> only lives while the command line window is opened."}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529522197, "post_id": 50953431, "comment_id": 88908650, "body": "OK, so my edit to PATH is permanent and it is just fine right?  Can you explain to you why I need <code>PATH=%PATH%;</code>?"}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529522619, "post_id": 50953431, "comment_id": 88908832, "body": "OK that doesnt help.  Same error as in picture."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529522647, "post_id": 50953431, "comment_id": 88908839, "body": "You only need <code>PATH=%PATH%;...</code> as a local update, so Windows can find <code>mingw32-exe</code>"}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529522694, "post_id": 50953431, "comment_id": 88908859, "body": "I removed the permanent fix, and only did that temporary fix.  It doesnt work."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529523002, "post_id": 50953431, "comment_id": 88909011, "body": "Your PATH may be mixing things. Post it here (edit your question)."}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529524211, "post_id": 50953431, "comment_id": 88909509, "body": "This is <code>PATH: C:\\cygwin64;C:\\cygwin64\\bin;C:\\mingw-w64\\x86_64-8.1.0-posix-&zwnj;&#8203;seh-rt_v6-rev0\\mingw&zwnj;&#8203;64\\bin</code> in Environment Variables.  The result of <code>PATH</code> in command prompt is seen in my edited post."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529524951, "post_id": 50953431, "comment_id": 88909831, "body": "Remove from that PATH anything related to Python36, cygwin, and mingw. Then restart your computer. It seems they are messing <code>mingw32-make</code> (which calls other executables during the proccess). Try the &quot;local&quot; approach."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1529529890, "post_id": 50953431, "comment_id": 88911895, "body": "This exact problem seems to be addressed by <a href=\"https://wiki.wxwidgets.org/Compiling_wxWidgets_with_MinGW\" rel=\"nofollow noreferrer\">the documentation</a>"}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1529529832, "post_id": 50956634, "comment_id": 88911873, "body": "mingw-w64 comes with batch files to set up the path"}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529536210, "post_id": 50956634, "comment_id": 88913805, "body": "Adding `%PATH% at the end is better than my proposal (at the beginning). It will find executables at the first try, without seeking into the rest of PATH."}, {"owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529555755, "post_id": 50956634, "comment_id": 88917700, "body": "As per <a href=\"https://github.com/wxWidgets/wxWidgets/blob/v3.1.1/docs/msw/install.txt#L201\" rel=\"nofollow noreferrer\">official instructions</a> I ran <code>..&#47;configure</code> when I was in <code>C:\\wxWidgets-3.1.1\\build\\msw\\build-debug</code>.  I am doing it right?"}, {"owner": {"reputation": 1572, "user_id": 3636621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef6473d290d66740556cd4a73dd8dcb?s=128&d=identicon&r=PG&f=1", "display_name": "catalin", "link": "https://stackoverflow.com/users/3636621/catalin"}, "reply_to_user": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "edited": false, "score": 0, "creation_date": 1529558966, "post_id": 50956634, "comment_id": 88918715, "body": "@CaTx: No, you misread them. <code>$WXWIN</code>is the location where you had installed wxWidgets, in your case <code>C:\\wxWidgets-3.1.1</code>. So you need to call <code>..&#47;configure</code> from <code>C:\\wxWidgets-3.1.1\\build-debug</code>."}], "tags": [], "owner": {"reputation": 1572, "user_id": 3636621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef6473d290d66740556cd4a73dd8dcb?s=128&d=identicon&r=PG&f=1", "display_name": "catalin", "link": "https://stackoverflow.com/users/3636621/catalin"}, "is_accepted": false, "score": 1, "last_activity_date": 1529526912, "creation_date": 1529526912, "answer_id": 50956634, "question_id": 50953431, "link": "https://stackoverflow.com/questions/50953431/failed-to-build-wxwidgets-with-gcc-in-command-prompt/50956634#50956634", "title": "Failed to build WxWidgets with GCC in command prompt", "body": "<p>You have several simple ways to try:</p>\n\n<ul>\n<li>Use VS 2014 which <code>PATH</code> suggests you have installed, and open\n<code>c:\\wxWidgets-3.1.1\\build\\msw\\wx_vc14.sln</code>;</li>\n</ul>\n\n<p>OR</p>\n\n<ul>\n<li>Open a console and do\n\n<ul>\n<li><code>PATH=C:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin;%PATH%</code></li>\n<li><code>cd c:\\wxWidgets-3.1.1\\build\\msw</code></li>\n<li><code>mingw32-make.exe -f makefile.gcc</code></li>\n</ul></li>\n</ul>\n\n<p>OR</p>\n\n<p>Where exactly did you run configure from? You need to be in a <em>new subfolder</em> below <code>c:\\wxWidgets-3.1.1</code>. From that subfolder you run <code>../configure</code>, see <code>c:\\wxWidgets-3.1.1\\configure</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "is_accepted": false, "score": 0, "last_activity_date": 1529569511, "creation_date": 1529569511, "answer_id": 50963801, "question_id": 50953431, "link": "https://stackoverflow.com/questions/50953431/failed-to-build-wxwidgets-with-gcc-in-command-prompt/50963801#50963801", "title": "Failed to build WxWidgets with GCC in command prompt", "body": "<p>This is how I managed to get it compiled using Command Prompt (console) and this <a href=\"https://wiki.wxwidgets.org/Compiling_wxWidgets_with_MinGW\" rel=\"nofollow noreferrer\">Wiki guide</a>:</p>\n\n<ul>\n<li>Open a console:\n\n<ul>\n<li><code>PATH=C:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin;C:\\wxWidgets-3.1.1\\include\\wx;%PATH%</code></li>\n<li><code>cd c:\\wxWidgets-3.1.1\\build\\msw</code></li>\n<li><code>mingw32-make SHELL=CMD.exe -j4 -f makefile.gcc BUILD=release UNICODE=1 SHARED=0</code></li>\n</ul></li>\n</ul>\n\n<p>That extra <code>SHELL=CMD.exe</code> saves me from running into some error codes.  I still have problem with the Cygwin64 method.  Will update.</p>\n"}], "owner": {"reputation": 1121, "user_id": 1336427, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/pnOmt.png?s=128&g=1", "display_name": "CaTx", "link": "https://stackoverflow.com/users/1336427/catx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529571226, "creation_date": 1529513879, "last_edit_date": 1529571226, "question_id": 50953431, "link": "https://stackoverflow.com/questions/50953431/failed-to-build-wxwidgets-with-gcc-in-command-prompt", "title": "Failed to build WxWidgets with GCC in command prompt", "body": "<p>I am following the <a href=\"https://github.com/wxWidgets/wxWidgets/blob/v3.1.1/docs/msw/install.txt#L239\" rel=\"nofollow noreferrer\">official instructions</a> to build WxWidgets with GCC.  For some reason, it fails to build and gives me this error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GUQN0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GUQN0.png\" alt=\"failed\"></a></p>\n\n<p>Could someone tell me what is the problem here?  I did try to use Cygwin to build, but encountered error when trying this line:</p>\n\n<pre><code>../configure --enable-debug\n</code></pre>\n\n<p>It complained:</p>\n\n<pre><code>-bash: ../configure: No such file or directory\n</code></pre>\n\n<p>I am at the end of my wits now, and cannot figure out how to get it done.  Someone please help.</p>\n\n<p>This is what PATH shows up in commmand prompt:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DDnL1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DDnL1.png\" alt=\"PATH\"></a></p>\n\n<p>===========================================</p>\n\n<p>OK, I tried something new.</p>\n\n<ul>\n<li>Using Cygwin64 terminal:\n\n<ul>\n<li><code>cd /cygdrive/C/wxWidgets-3.1.1/build-debug</code></li>\n<li><code>../configure --enable-debug</code></li>\n<li><code>make</code></li>\n</ul></li>\n</ul>\n\n<p>Afterwards, I tried:</p>\n\n<ul>\n<li><code>cd samples/minimal</code></li>\n<li><code>make</code></li>\n</ul>\n\n<p>And I encountered this error:</p>\n\n<pre><code>g++ -o minimal.exe minimal_sample_rc.o minimal_minimal.o    -L/cygdrive/C/wxWidgets-3.1.1/build-debug/lib -mwindows    -lwx_mswu_core-3.1  -lwx_baseu-3.1    -lwxtiff-3.1 -lwxjpeg-3.1 -lwxpng-3.1   -lwxzlib-3.1 -lwxregexu-3.1 -lwxexpat-3.1 -lrpcrt4 -loleaut32 -lole32 -luuid -luxtheme -lwinspool -lwinmm -lshell32 -lshlwapi -lcomctl32 -lcomdlg32 -ladvapi32 -lversion -lwsock32 -lgdi32 -loleacc -lkernel32 -luser32  -lrpcrt4 -loleaut32 -lole32 -luuid -luxtheme -lwinspool -lwinmm -lshell32 -lshlwapi -lcomctl32 -lcomdlg32 -ladvapi32 -lversion -lwsock32 -lgdi32 -loleacc -lkernel32 -luser32\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwx_mswu_core-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwx_baseu-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxtiff-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxjpeg-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxpng-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxzlib-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxregexu-3.1\n/usr/lib/gcc/x86_64-pc-cygwin/7.3.0/../../../../x86_64-pc-cygwin/bin/ld: cannot find -lwxexpat-3.1\ncollect2: error: ld returned 1 exit status\nmake: *** [Makefile:149: minimal.exe] Error 1\n</code></pre>\n\n<p>Can someone tell me why my Cygwin64 build failed?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1529513421, "post_id": 50953323, "comment_id": 88904328, "body": "They are casts. I think you need to read a good C++  textbook."}, {"owner": {"reputation": 85, "user_id": 8412193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b52b71c76dc986ec177387ac93e78e40?s=128&d=identicon&r=PG&f=1", "display_name": "Aux", "link": "https://stackoverflow.com/users/8412193/aux"}, "edited": false, "score": 0, "creation_date": 1529513545, "post_id": 50953323, "comment_id": 88904394, "body": "Can you give a reference link @Neil Butterworth"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529513578, "post_id": 50953323, "comment_id": 88904413, "body": "In C++, this is known as a <a href=\"https://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">functional cast</a>: &quot;<i>The functional cast expression consists of a simple type specifier or a typedef specifier (in other words, a single-word type name: <code>unsigned int(expression)</code> or <code>int*(expression)</code> are not valid), followed by a single expression in parentheses. <b>This cast expression is exactly equivalent to the corresponding C-style cast expression</b>.</i>&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1529513756, "post_id": 50953323, "comment_id": 88904516, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/explicit_cast</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1529513973, "post_id": 50953323, "comment_id": 88904616, "body": "Whoever wrote that line of code needs a different job."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8412193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b52b71c76dc986ec177387ac93e78e40?s=128&d=identicon&r=PG&f=1", "display_name": "Aux", "link": "https://stackoverflow.com/users/8412193/aux"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529514244, "post_id": 50953385, "comment_id": 88904765, "body": "@Remy Lebeau     <code>char(x)</code> is equivalent to <code>(char) x</code>?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 85, "user_id": 8412193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b52b71c76dc986ec177387ac93e78e40?s=128&d=identicon&r=PG&f=1", "display_name": "Aux", "link": "https://stackoverflow.com/users/8412193/aux"}, "edited": false, "score": 2, "creation_date": 1529514421, "post_id": 50953385, "comment_id": 88904860, "body": "@Aux Yes. I&#39;m not sure what the order of operations is for stuff like <code>char(x) + 200</code> vs <code>(char)x + 200</code>, but <code>T(...)</code> and <code>(T)...</code> is equivalent for any type which doesn&#39;t have a constructor that takes <code>...</code> as arguments."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1529515528, "post_id": 50953385, "comment_id": 88905455, "body": "@Xirema See <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">C++ Operator Precedence</a>. <code>char(x)</code> and <code>(char)x</code> both have a higher precedence than <code>+</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1529519459, "post_id": 50953385, "comment_id": 88907368, "body": "&quot;But functionally, it&#39;s all identical&quot; - Not quite. A C-style case (and a function-style cast) will start out trying to do a <code>static_cast</code> but if that fails it will attempt other casts, eventually degenerating into a <code>reinterpret_cast</code> followed by a <code>const_cast</code> (rarely what you want). The C++ casts don&#39;t have that problem (of trying multiple types of casts and just going with whatever succeeds first) - that&#39;s why C++ casts are safer and you should never write C-style (or function-style) casts in your code; it&#39;s really hard to work out what conversion they will <i>actually</i> end up doing."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 2, "last_activity_date": 1529513730, "last_edit_date": 1529513730, "creation_date": 1529513646, "answer_id": 50953385, "question_id": 50953323, "link": "https://stackoverflow.com/questions/50953323/char-and-int-are-functions-in-c/50953385#50953385", "title": "char () and int () are functions in c++?", "body": "<p>They're not functions. They're just alternate syntax for type-casting. <code>char(x)</code> is more-or-less equivalent to <code>static_cast&lt;char&gt;(x)</code>.</p>\n\n<p>In general, in C++, one should prefer the C++-specific constructs for casting objects (<code>static_cast</code>, <code>dynamic_cast</code>, <code>const_cast</code>, and <code>reinterpret_cast</code>), as those help ensure you don't do anything dumb when casting objects. So in your code example, I'd recommend rewriting it as</p>\n\n<pre><code>result += static_cast&lt;char&gt;(static_cast&lt;int&gt;(text[i]+s-65)%26 +65);\n</code></pre>\n\n<p>But functionally, it's all identical.</p>\n"}], "owner": {"reputation": 85, "user_id": 8412193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b52b71c76dc986ec177387ac93e78e40?s=128&d=identicon&r=PG&f=1", "display_name": "Aux", "link": "https://stackoverflow.com/users/8412193/aux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "closed_date": 1529547813, "accepted_answer_id": 50953385, "answer_count": 1, "score": -3, "last_activity_date": 1529513730, "creation_date": 1529513345, "question_id": 50953323, "link": "https://stackoverflow.com/questions/50953323/char-and-int-are-functions-in-c", "closed_reason": "Duplicate", "title": "char () and int () are functions in c++?", "body": "<p>after 30 min of googling I decided to ask here my doubt \nIt maybe invalid question if I am not understanding below line of code correctly </p>\n\n<p><code>result += char(int(text[i]+s-65)%26 +65);</code></p>\n\n<p>In above code char() is a function ? If yes so I am unable to find any information about it and if no so what is this ?\nAnd same doubt for inner int() .</p>\n\n<p>Above code is copied from a C++ program.</p>\n"}, {"tags": ["c++", "destructor", "allocation", "constexpr"], "answers": [{"comments": [{"owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 0, "creation_date": 1529514115, "post_id": 50953340, "comment_id": 88904681, "body": "I&#39;d suggest <code>char[]</code> instead of <code>char*</code>, as the former preserves size of the array (so you could use e. g. <code>std::size</code> on it)."}, {"owner": {"reputation": 737, "user_id": 4860693, "user_type": "registered", "profile_image": "https://graph.facebook.com/838129839615438/picture?type=large", "display_name": "Anthony Monterrosa", "link": "https://stackoverflow.com/users/4860693/anthony-monterrosa"}, "edited": false, "score": 0, "creation_date": 1529514197, "post_id": 50953340, "comment_id": 88904737, "body": "Thank you for the quick answer! I misassumed how strings were stored apparently. In response to your mentioned workaround: isn&#39;t that informationally equivalent to just typing chars where I need them, since templates are compile-time? I guess it&#39;s hard for me to see the benefit, but I&#39;m just a beginning C++ user. I think I&#39;ll default to const char* for the time being."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 0, "creation_date": 1529514236, "post_id": 50953340, "comment_id": 88904757, "body": "@joe_chip or <code>array&lt;char, N&gt;</code>. But I was looking at the code in the question where the author already stores strings in array. he wouldn&#39;t be able to store strings of different sizes in such a structure. Only pointers."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 737, "user_id": 4860693, "user_type": "registered", "profile_image": "https://graph.facebook.com/838129839615438/picture?type=large", "display_name": "Anthony Monterrosa", "link": "https://stackoverflow.com/users/4860693/anthony-monterrosa"}, "edited": false, "score": 0, "creation_date": 1529514456, "post_id": 50953340, "comment_id": 88904876, "body": "@AnthonyMonterrosa sometimes you may want to parametrize your type based on a string. For example for some sort of compile-time reflection or maybe compile-time regexp or something. People are creative."}, {"owner": {"reputation": 737, "user_id": 4860693, "user_type": "registered", "profile_image": "https://graph.facebook.com/838129839615438/picture?type=large", "display_name": "Anthony Monterrosa", "link": "https://stackoverflow.com/users/4860693/anthony-monterrosa"}, "edited": false, "score": 0, "creation_date": 1529514549, "post_id": 50953340, "comment_id": 88904930, "body": "Oh I see now. Thanks for the explanation"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 737, "user_id": 4860693, "user_type": "registered", "profile_image": "https://graph.facebook.com/838129839615438/picture?type=large", "display_name": "Anthony Monterrosa", "link": "https://stackoverflow.com/users/4860693/anthony-monterrosa"}, "edited": false, "score": 0, "creation_date": 1529514649, "post_id": 50953340, "comment_id": 88904996, "body": "@AnthonyMonterrosa No problem. here is one cool example <a href=\"https://www.boost.org/doc/libs/1_64_0/doc/html/metaparse/user_manual.html\" rel=\"nofollow noreferrer\">boost.org/doc/libs/1_64_0/doc/html/metaparse/user_manual.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 0, "creation_date": 1529514861, "post_id": 50953340, "comment_id": 88905117, "body": "@DanM. didn&#39;t notice that (is it supposed to be used in <code>BooleanIndicator</code>?). In that case, <code>std::string_view</code> would work, it&#39;s constexpr-friendly."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 0, "creation_date": 1529515174, "post_id": 50953340, "comment_id": 88905272, "body": "@joe_chip yep, <code>string_view</code> would also work, since it&#39;s basically a pointer with a size."}], "tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1529513437, "creation_date": 1529513437, "answer_id": 50953340, "question_id": 50953296, "link": "https://stackoverflow.com/questions/50953296/classes-constexpr-constructors-and-stdstring/50953340#50953340", "title": "classes, constexpr constructors, and std::string", "body": "<p><code>std::string</code> is not an array. It allocates its contents on the heap (cons SSO) and as such it can't be made <code>constexpr</code> in the current C++ (there are proposals in the works to make <code>constexpr</code> \"dynamic\" allocation possible).</p>\n\n<p>However, there are several workarounds to use compile-time strings in one way or another, like embedding them into template parameters (<code>Foo&lt;'H', 'e', 'l', 'l', 'o'&gt;</code>). You can also just use <code>const char *</code> in most cases,</p>\n"}], "owner": {"reputation": 737, "user_id": 4860693, "user_type": "registered", "profile_image": "https://graph.facebook.com/838129839615438/picture?type=large", "display_name": "Anthony Monterrosa", "link": "https://stackoverflow.com/users/4860693/anthony-monterrosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 50953340, "answer_count": 1, "score": -1, "last_activity_date": 1529513437, "creation_date": 1529513232, "question_id": 50953296, "link": "https://stackoverflow.com/questions/50953296/classes-constexpr-constructors-and-stdstring", "title": "classes, constexpr constructors, and std::string", "body": "<p>I've been messing around with constexpr as replacements for enumerations lately, but I've ran into an issue with strings (ostensibly).</p>\n\n<p>Here is my code:</p>\n\n<pre><code>namespace Constant {\n    namespace Implementation {\n        using std::array;\n        using std::string;\n\n        using type = uint8_t;\n\n        namespace Items::Compile_Time {\n            template&lt;class element, type size&gt;\n            struct Ray {\n\n                const array&lt;element, size&gt; constants {};\n\n                constexpr explicit Ray(const array&lt;element, size&gt; constants_in) : constants(constants_in) {}\n\n                element constexpr operator[](const type index) const {\n                    return this-&gt;constants[index];\n                }\n            };\n\n            static constexpr type\n                methods = 0,\n                signals = 1;\n\n            // Plan on cleaning this up later.\n            constexpr auto BooleanIndicator = Ray&lt;Ray&lt;int, 1&gt;, 2&gt;(array&lt;Ray&lt;int, 1&gt;, 2&gt; {Ray&lt;int, 1&gt; {array&lt;int, 1&gt; {0}}, Ray&lt;int, 1&gt; {array&lt;int, 1&gt; {1}}});\n        }\n    }\n    using namespace Implementation::Items;\n}\n</code></pre>\n\n<p>This works fine. But, if I replace the 'int' template parameters with 'string' and put strings into their respective places (replacing the most-nested 0 and 1), then I get an error about the instantiation having a nontrivial destructor. </p>\n\n<p>Why is this? I assumed all arrays, including strings, were trivial. Are they allocated on the heap?? I'm guessing if that's the case then it might work with const char* but I haven't tried yet (don't want to unless I have to). If they do go on the heap, is there a way to force them onto the stack?</p>\n\n<p>Future thanks.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array", "printf"], "comments": [{"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 2, "creation_date": 1529515002, "post_id": 50953291, "comment_id": 88905192, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/8767166/passing-a-2d-array-to-a-c-function\">Passing a 2D array to a C++ function</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1055, "user_id": 690645, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1c80476747c4570463f2e0b3e10d5649?s=128&d=identicon&r=PG&f=1", "display_name": "Bas van Ommen", "link": "https://stackoverflow.com/users/690645/bas-van-ommen"}, "is_accepted": false, "score": -2, "last_activity_date": 1529513212, "creation_date": 1529513212, "answer_id": 50953292, "question_id": 50953291, "link": "https://stackoverflow.com/questions/50953291/c-how-to-create-an-2d-array-pass-it-to-another-function-and-print-it/50953292#50953292", "title": "C++ How to create an 2d array, pass it to another function, and print it", "body": "<p>Because it took me ages to find this I'm just gonna put this here. My goal was to create a 2d array, pass it to some function (in this case a 'printer') and then let that function print the 2d array for me because I didn't want to repeat it and/or write it every sexing time to know what the 2d array looked like.</p>\n\n<pre><code>void pre(int *grid, int x, int y) {\n    const int base = 8;\n    for (int y = 0; y &lt; base; y++) {\n        for (int x = 0; x &lt; base; x++) {\n            printf(\"%d \", *(grid+x*base+y));\n        }\n        printf(\"\\n\");\n    }\n}\n\nint main(int argc, char **argv) {\n    const int base = 8;\n    int cursor = 0;\n    int grid[base][base];\n    for (int y = 0; y &lt; base; y++) {\n        for (int x = 0; x &lt; base; x++) {\n            grid[x][y] = x;\n        }\n    }\n    pre((int*)grid, base, base);\n}\n</code></pre>\n\n<p>PS1: Source: <a href=\"http://www.youtube.com/watch?v=QEKmS221MtM&amp;t=4m57s\" rel=\"nofollow noreferrer\">YouTube video by CppNuts</a></p>\n\n<p>PS2: I sincerely hope someone is helped with this, not a weird attempt for upvotes.</p>\n"}], "owner": {"reputation": 1055, "user_id": 690645, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1c80476747c4570463f2e0b3e10d5649?s=128&d=identicon&r=PG&f=1", "display_name": "Bas van Ommen", "link": "https://stackoverflow.com/users/690645/bas-van-ommen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1530970049, "creation_date": 1529513212, "last_edit_date": 1530970049, "question_id": 50953291, "link": "https://stackoverflow.com/questions/50953291/c-how-to-create-an-2d-array-pass-it-to-another-function-and-print-it", "title": "C++ How to create an 2d array, pass it to another function, and print it", "body": "<p>How can I create an 2d array in one function and then pass it to some other function which prints it?</p>\n"}, {"tags": ["c++", "sparse-matrix", "eigen", "eigen3"], "comments": [{"owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 0, "creation_date": 1529513119, "post_id": 50953179, "comment_id": 88904166, "body": "Does this qualify as a sparse matrix?  It seems more triangular."}, {"owner": {"reputation": 1, "user_id": 3764659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBMfo.jpg?s=128&g=1", "display_name": "Karpov", "link": "https://stackoverflow.com/users/3764659/karpov"}, "reply_to_user": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 0, "creation_date": 1529582285, "post_id": 50953179, "comment_id": 88932239, "body": "It doesn&#39;t matter for the sake of this example. I could have filled it in any other way."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 3, "last_activity_date": 1529513850, "creation_date": 1529513850, "answer_id": 50953421, "question_id": 50953179, "link": "https://stackoverflow.com/questions/50953179/eigen-sparsematrix-with-openmp-crash-when-inserting-values/50953421#50953421", "title": "Eigen SparseMatrix with OpenMP - crash when inserting values", "body": "<p>Without looking further into <code>SparseMatrix</code>, it almost definitely has to (re-)allocate memory when you add more elements than it has capacity. This is not a thread-safe operation, thus you should never concurrently add elements to a <code>SparseMatrix</code> unless you know it won't reallocate. Even then, you should check the documentation to verify that doing this is thread-safe, because I have my doubts about that (but maybe inserting into different columns or rows concurrently may be ok). Even if it is unsafe, it may not crash but just do wrong things (i.e. undefined behavior).</p>\n\n<p>For the record, this is similar to how <code>std::vector</code> behaves. Calling <code>push_back</code> concurrently in such a way that the vector reallocates is a race condition on the reallocation and thus undefined behavior (and will quickly lead to double frees like you are seeing). <em>[There would of course also be a race condition on the insertion itself, which <code>SparseMatrix</code> may or may not avoid for concurrent insertions at different coordinates, but I would not bet on it.]</em></p>\n"}], "owner": {"reputation": 1, "user_id": 3764659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rBMfo.jpg?s=128&g=1", "display_name": "Karpov", "link": "https://stackoverflow.com/users/3764659/karpov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 50953421, "answer_count": 1, "score": -2, "last_activity_date": 1529513850, "creation_date": 1529512739, "question_id": 50953179, "link": "https://stackoverflow.com/questions/50953179/eigen-sparsematrix-with-openmp-crash-when-inserting-values", "title": "Eigen SparseMatrix with OpenMP - crash when inserting values", "body": "<p>For a very simple test example when trying to fill <code>Eigen::SparseMatrix</code> within OpenMP construct, application crashes.  </p>\n\n<pre><code>SparseMatrix&lt;double&gt; A_mat( nCol, nRow );\n//A_mat.reserve( VectorXi::Constant( nCol, nRow ) );  // When commented crashes\n\nauto numThreads = omp_get_max_threads();\n#pragma omp parallel for num_threads( numThreads )\nfor ( int j = 0; j &lt; nCol; ++j )\n    {\n        for ( int i = 0; i &lt; nRow; ++i )\n            {\n                if ( i &gt;= j )\n                    {\n                        double val           = i * nCol + j;\n                        A_mat.insert( i, j ) = val;\n                    }\n            }\n    }\n</code></pre>\n\n<p>This code runs how expected only when I use <code>1</code> thread. However, when run with multiple threads following errors are thrown:</p>\n\n<pre><code>double free or corruption (!prev)\ndouble free or corruption (!prev)\ndouble free or corruption (!prev)\ndouble free or corruption (top)\ndouble free or corruption (!prev)\ndouble free or corruption (out)\n</code></pre>\n\n<p>When I uncomment the following line:</p>\n\n<pre><code>A_mat.reserve( VectorXi::Constant( nCol, nRow ) );\n</code></pre>\n\n<p>then above given block of code again produces expected results even when run with multiple threads. </p>\n\n<p>Could someone explain to me why is this happening?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1529512073, "post_id": 50952981, "comment_id": 88903604, "body": "This code looks fine."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1529512193, "post_id": 50952981, "comment_id": 88903674, "body": "Looks OK to me.  Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that give you the error?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 10, "creation_date": 1529512308, "post_id": 50952981, "comment_id": 88903738, "body": "When found, search_Keyword() returns false.  Is that what you want?  There is probably a better function name ..."}, {"owner": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1529512521, "post_id": 50952981, "comment_id": 88903853, "body": "Where exactly is this error displayed? It doesn&#39;t sound like something that would be coming from this function. Have you tried using a debugger to see the actual contents of the string that is causing this error?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1529513124, "post_id": 50952981, "comment_id": 88904170, "body": "@SeanBurton That is exactly his problem - this is something that the debugger may say (e.g. due to things being optimized out or stepping before the opening brace of the function). But the debugger has no authority over the correctness of your program."}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1529513250, "creation_date": 1529513250, "answer_id": 50953300, "question_id": 50952981, "link": "https://stackoverflow.com/questions/50952981/stdfind-failure-in-c-with-vector-of-strings/50953300#50953300", "title": "std::find failure in C++ with vector of strings", "body": "<p>It sounds like the debugger is telling you about being unable to read out the string. This may happen for various reasons (e.g. optimizations that mangled debug information, trying to read function arguments before entering the function body, bugs in the debugger) and is not necessarily indicative of a problem. Look at the program's output, inspect other places in the program with the debugger, and/or use a debug build to verify that your code is doing the correct things.</p>\n"}, {"tags": [], "owner": {"reputation": 6371, "user_id": 1266688, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/1KqkE.jpg?s=128&g=1", "display_name": "Elvis Dukaj", "link": "https://stackoverflow.com/users/1266688/elvis-dukaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1529513410, "creation_date": 1529513410, "answer_id": 50953334, "question_id": 50952981, "link": "https://stackoverflow.com/questions/50952981/stdfind-failure-in-c-with-vector-of-strings/50953334#50953334", "title": "std::find failure in C++ with vector of strings", "body": "<p>The code you write is fine... the only thing that is suspect is that you return <code>false</code> if you find an item! A better solution is this:</p>\n\n<pre><code>bool isKeyword(const std::string&amp; keyword_text) // &lt;-- better name\n{\n    auto pos = std::find(keywords.begin() , keywords.end( ), keyword_text);\n    return pos != keywords.end();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 9695972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aad066b9f9de1c63dd14a80d319c112b?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/9695972/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1529522695, "creation_date": 1529522695, "answer_id": 50955641, "question_id": 50952981, "link": "https://stackoverflow.com/questions/50952981/stdfind-failure-in-c-with-vector-of-strings/50955641#50955641", "title": "std::find failure in C++ with vector of strings", "body": "<p>This is a snippet i used to do exactly what you need, if you only need this for strings you can remove all the template stuff ( i needed it to be literal type agnostic ) :</p>\n\n<pre><code>template &lt;typename T, typename X&gt;\nbool KeywordLookUp(std::vector&lt;T&gt; &amp;vec, X toFind) \n{\n    auto pos = find(vec.begin(), vec.end(), toFind);\n    if (pos == vec.end())\n    {\n        return false;\n    }\n    else\n    {\n        return true;\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9884173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ec9e4eb3f9ddad72f28c660b7ca6bb?s=128&d=identicon&r=PG&f=1", "display_name": "Alpha Monkey", "link": "https://stackoverflow.com/users/9884173/alpha-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1529522695, "creation_date": 1529511974, "question_id": 50952981, "link": "https://stackoverflow.com/questions/50952981/stdfind-failure-in-c-with-vector-of-strings", "title": "std::find failure in C++ with vector of strings", "body": "<p>I was writing a small program in C++ where the function  checks whether the given string is present in a vector of strings or not. Here is the code</p>\n\n<pre><code>std::vector&lt;std::string&gt; keywords {std::string(\"add_contact\"),std::string(\"who\"),std::string(\"block\"),std::string(\"make_group\"),std::string(\"send_images\")}; // List of keywords defined in the grammar\nbool search_Keyword(std::string keyword_text)\n    {\n\n        auto pos = std::find(keywords.begin() , keywords.end( ), keyword_text);\n        return pos == keywords.end( );\n\n    }      \n</code></pre>\n\n<p>On debugging this code i found that there was an error with std::find saying Errors reading Characters of string. i am not able to understand where the code went wrong. Thanks for  the help in advance.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "c++14", "this-pointer"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1529511243, "post_id": 50952690, "comment_id": 88903102, "body": "I am surprised you were able to build the executable with those commands. See <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">Why can templates only be implemented in the header file?</a>"}, {"owner": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1529511433, "post_id": 50952690, "comment_id": 88903203, "body": "Your confusion probably comes from the first output line which is being generated by: <code>const Uint_32&amp; Uint_32::UNIQUEID=Uint_32(3);</code>, That line is actually a lot fancier than you think."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "reply_to_user": {"reputation": 8856, "user_id": 4442671, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-nSzcZygTwLs/AAAAAAAAAAI/AAAAAAAAADA/virGKG3deIo/photo.jpg?sz=128", "display_name": "Frank", "link": "https://stackoverflow.com/users/4442671/frank"}, "edited": false, "score": 0, "creation_date": 1529512227, "post_id": 50952690, "comment_id": 88903695, "body": "@R Sahu I know that template class should have it&#39;s function definition at the time of compiling therefore I made a file that include .hpp and .cpp file in one and I just included here is it <code>include&#47;&#47;lang&#47;&#47;Class.hpp</code> and <code>include&#47;&#47;lang&#47;&#47;Object.hpp</code>. And @Frank I know this line has something to do with output my problem is not that I just can&#39;t understand why Object class non parameterized constructor is called and not parameterised?"}, {"owner": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 2, "creation_date": 1529513304, "post_id": 50952690, "comment_id": 88904265, "body": "Breaking the rule of 3 and rule of 5 here is most likely your issue... You are expecting autogenerated code (like operator=) to behave in a certain way, which it doesn&#39;t. Implement proper move/copy operators/ctors and you will be able to trace this much easier. <a href=\"https://cpppatterns.com/patterns/rule-of-five.html\" rel=\"nofollow noreferrer\">See here for more on the rule of 5</a>"}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "reply_to_user": {"reputation": 1167, "user_id": 5339807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5db3c9fa9b80760fc44ae03008f7a1?s=128&d=identicon&r=PG&f=1", "display_name": "mascoj", "link": "https://stackoverflow.com/users/5339807/mascoj"}, "edited": false, "score": 0, "creation_date": 1529555088, "post_id": 50952690, "comment_id": 88917541, "body": "@mascoj I make class as you said for rule of 5 but still output remains the same even assignment or move assignment are not even called since I have made a reference. I cant still figure out the calling of Object default constructor from class constructor."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529555125, "post_id": 50952690, "comment_id": 88917549, "body": "I also double check the output and even tried changing the code a bit"}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529555239, "post_id": 50952690, "comment_id": 88917572, "body": "I figure out my second problem its just one constructor call is for a variable in Class.cpp =&gt; ref(variable name)."}], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529730397, "post_id": 50997099, "comment_id": 88990242, "body": "thanks for replying. I get the reason why my output is like this but can you please also tell how can I get my desired output. I mean I don&#39;t wont multiple copies of Object class in derived classes but I also want to run it in way I inherit it."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529730655, "post_id": 50997099, "comment_id": 88990288, "body": "In java we can make object of Object class and Class class and even change it accordingly to any object we want. Like if we have some Object  o1 of class A, o2 of class B and obj of Object class then we can do like this obj = o1 and after few line obj = o2. Can I do the same? also In java we make Object class object like this : Object obj; I want to do the same way."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529730741, "post_id": 50997099, "comment_id": 88990306, "body": "Instances : 1) a"}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529730789, "post_id": 50997099, "comment_id": 88990317, "body": "2) b   ,  3)  Uint32::UNIQUEID   and 4) Class&lt;T&gt;&amp; Object&lt;T&gt;::ref=Class&lt;T&gt;();"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529730952, "post_id": 50997099, "comment_id": 88990348, "body": "<i>&quot;I don&#39;t wont multiple copies of Object class in derived classes&quot;</i> If you think you may end up with a diamond hierarchy, then which branch of it should initialize <code>Object</code> base? Java doesn&#39;t have multiple inheritance - thus no possibility of diamond hierarchy and no concept of virtual inheritance."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529731021, "post_id": 50997099, "comment_id": 88990361, "body": "The closest C++ has to Java&#39;s <code>Object</code> is <code>void*</code>. It&#39;s much less useful since, unlike Java, C++ doesn&#39;t have reflection. But even in Java, dropping type safety and working in terms of <code>Object</code> is a sign of a bad design, most of the time. Anyway, it&#39;s unclear what you are trying to achieve; your code doesn&#39;t make any sense to me, quite frankly."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529731075, "post_id": 50997099, "comment_id": 88990370, "body": "(4) instantiates a <code>Class&lt;T&gt;</code>, not a <code>Uint_32</code>. I&#39;m not sure I understand what it is you are counting, exactly."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529732338, "post_id": 50997099, "comment_id": 88990606, "body": "The code I write is very basic of my project. I tried to build a library such that I have knowledge of every class and object but since c++ is multiple inheritance I thought the every class that want to use my library must inherit the Class class but if multiple inheritance is done then at every level there will be an instance of Class class and Object class and will give me redundant data. Thus I made virtual classes."}, {"owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529732989, "post_id": 50997099, "comment_id": 88990724, "body": "I am counting Object constructor calls."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "edited": false, "score": 0, "creation_date": 1529762153, "post_id": 50997099, "comment_id": 88997455, "body": "One from <code>a</code>, one from <code>b</code>, one indeed from <code>Class&lt;T&gt;&amp; Object&lt;T&gt;::ref=Class&lt;T&gt;();</code>, and one from <code>const Uint_32&amp; Uint_32::UNIQUEID=Uint_32(3)</code>. The third one prints <code>checking</code>, the others print <code>ohk</code>"}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 0, "last_activity_date": 1529716340, "last_edit_date": 1529716340, "creation_date": 1529715620, "answer_id": 50997099, "question_id": 50952690, "link": "https://stackoverflow.com/questions/50952690/template-class-multiple-inheritance-constructor-with-this-pointer-doesnt-work/50997099#50997099", "title": "template class multiple inheritance constructor with this pointer doesn&#39;t work?", "body": "<p>You are using virtual inheritance. The most-derived class is responsible for initializing all its virtual base classes.</p>\n\n<p>When you write</p>\n\n<pre><code>Uint_32::Uint_32(const int&amp;&amp; val):Class&lt;Uint_32&gt;(){ ... }\n</code></pre>\n\n<p>you appear to expect <code>Uint_32</code> constructor to call <code>Class&lt;Uint_32&gt;()</code> constructor, and that in turn to call <code>Object(*this)</code>. But that's not what happens. Since <code>Object</code> is a virtual base class, <code>Uint_32</code> is responsible for initializing it, not <code>Class</code>. And since <code>Uint_32</code> doesn't mention it in its initializer list, <code>Object</code>'s default constructor is used (rather than the single-parameter one).</p>\n\n<hr>\n\n<p>That one call to <code>Object(Class&lt;T&gt;&amp;)</code> comes from <code>template&lt;class T&gt;const Class&lt;T&gt;&amp; Object&lt;T&gt;::ref=Class&lt;T&gt;();</code>. This is the only place where you instantiate <code>Class</code> as the most-derived object (as opposed to a base class subobject of another object), which makes it responsible for calling <code>Object</code> constructor, which it does with <code>Object(*this)</code>.</p>\n\n<hr>\n\n<p>How do you count four instances? In the output you show, the word <code>there</code> occurs once and the word <code>here</code> twice, for a total of three instances of <code>Uint_32</code> being constructed. Those are <code>a</code>, <code>b</code> and <code>Uint_32::UNIQUEID</code>.</p>\n\n<hr>\n\n<p>I'm not sure I understand your question 4. Are you asking whether you can write, say,</p>\n\n<pre><code>Object&lt;Object&lt;int&gt;&gt; obj;\n</code></pre>\n\n<p>? I don't see why not, but you can easily try it and see for yourself.</p>\n"}], "owner": {"reputation": 57, "user_id": 6003089, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-aFNOsZbCOYM/AAAAAAAAAAI/AAAAAAAAAB4/myNB6g0I2eo/photo.jpg?sz=128", "display_name": "Ravinder Singh", "link": "https://stackoverflow.com/users/6003089/ravinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 50997099, "answer_count": 1, "score": -1, "last_activity_date": 1529716340, "creation_date": 1529510964, "last_edit_date": 1529516063, "question_id": 50952690, "link": "https://stackoverflow.com/questions/50952690/template-class-multiple-inheritance-constructor-with-this-pointer-doesnt-work", "title": "template class multiple inheritance constructor with this pointer doesn&#39;t work?", "body": "<p>I have a very basic code keeping in mind of java. I made a Object and Class class but in Template.</p>\n\n<p><strong>Object.hpp</strong></p>\n\n<pre><code>#ifndef _OBJECT_HPP_\n#define _OBJECT_HPP_\n\nnamespace library{\n\ntemplate&lt;class T&gt; class Object;\ntemplate&lt;class T&gt; class Class;\nclass Uint_32;\n\ntemplate&lt;class T&gt;\nclass Object{\npublic:\n  const static Uint_32&amp; UNIQUEID;\nprivate:\n  const Class&lt;T&gt;&amp; myClass;\n  const static Class&lt;T&gt;&amp; ref;\nprotected:\n  Object(Class&lt;T&gt;&amp; myReference);\n  Object();\n};\n\n}\n\n#endif\n</code></pre>\n\n<p><strong>Object.cpp</strong></p>\n\n<pre><code>#include \"include//lang//template//Object.hpp\"\n#include \"include//lang//template//Class.hpp\"\n#include \"include//lang//Uint_32.hpp\"\n#include \"iostream\"\nusing namespace std;\nusing namespace library;\n\ntemplate&lt;class T&gt;const Uint_32&amp; Object&lt;T&gt;::UNIQUEID=Uint_32(1);\n\ntemplate&lt;class T&gt;const Class&lt;T&gt;&amp; Object&lt;T&gt;::ref=Class&lt;T&gt;();\n\n\ntemplate&lt;class T&gt;\nObject&lt;T&gt;::Object(Class&lt;T&gt;&amp; myReference):myClass(myReference){cout&lt;&lt;\" \nchecking \";}\n\n\n\ntemplate&lt;class T&gt;\nObject&lt;T&gt;::Object():myClass(ref){cout&lt;&lt;\"ohk\";}\n</code></pre>\n\n<p><strong>Class.hpp</strong></p>\n\n<pre><code>#ifndef _CLASS_HPP_\n#define _CLASS_HPP_\n\n#include\"include//lang//Object.hpp\"\n\nnamespace library{\ntemplate&lt;class T&gt;\nclass Class:public virtual Object&lt;T&gt;{\npublic:\n  Class();\n  const static Uint_32&amp; UNIQUEID;\n};\n}\n\n#endif\n</code></pre>\n\n<p><strong>Class.cpp</strong></p>\n\n<pre><code>#include \"include//lang//template//Class.hpp\"\n#include \"include//lang//Uint_32.hpp\"\nusing namespace library;\n\ntemplate&lt;class T&gt;const Uint_32&amp; Class&lt;T&gt;::UNIQUEID=Uint_32(2);\n\ntemplate&lt;class T&gt;\nClass&lt;T&gt;::Class():Object(*this){\ncout&lt;&lt;\" hello \";\n}\n</code></pre>\n\n<p><strong>Uint_32.hpp</strong></p>\n\n<pre><code>#ifndef  _UINT_32_HPP_\n#define _UINT_32_HPP_\n\n#include \"include//lang//Class.hpp\"\n#include \"include//lang//Operators.hpp\"\n\n\nnamespace library{\n\nclass Uint_32:public virtual Class&lt;Uint_32&gt;{\npublic:\n  Uint_32();\n  Uint_32(const int&amp;&amp;);\n  friend Uint_32&amp; operator+(const Uint_32&amp; a,const Uint_32&amp; b);\n  friend Uint_32&amp; operator&lt;&lt;(const Uint_32&amp; a,const int&amp; b);\n  const static Uint_32&amp; UNIQUEID;\nprivate:\n  int value;\n};\n}\n\n#endif\n</code></pre>\n\n<p><strong>Uint_32.cpp</strong></p>\n\n<pre><code>#include \"include//lang//Uint_32.hpp\"\nusing namespace library;\n\nconst Uint_32&amp; Uint_32::UNIQUEID=Uint_32(3);\n\nUint_32::Uint_32():Class&lt;Uint_32&gt;(){\nvalue=0;\ncout&lt;&lt;\" here \";\n}\n\nUint_32::Uint_32(const int&amp;&amp; val):Class&lt;Uint_32&gt;(){\nvalue=val;\ncout&lt;&lt;\" there \";\n}\n</code></pre>\n\n<p><strong>t1.cpp</strong></p>\n\n<pre><code>#include \"include//lang//Uint_32.hpp\"\nusing namespace library;\n\nint main()\n{\n cout&lt;&lt;\"\\n\";\n Uint_32 a,b;\n return 0;\n}\n</code></pre>\n\n<p><strong>Compile Command :</strong></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ -std=c++14 -I. -c src//lang//Uint_32.cpp -o obj//lang//Uint_32.o\ng++ -std=c++14 -I. src//test//t1.cpp obj//lang//Uint_32.o -o bin//test\n</code></pre>\n\n<p>there is no compilation error for now at last. I have one more file with operators.hpp that just contain a template definition for every operator. </p>\n\n<p><strong>OUTPUT</strong>\nwhen I run the executable I get the following output and I probably cannot understand why? I tried every possible way to know. I also run over different system with different version. </p>\n\n<pre><code>ohk hello  there  checking  hello\nohk hello  here ohk hello  here\n</code></pre>\n\n<p>What is happening here? Why my inheritance doesn't call correctly? I know I should not pass this pointer as it's not safe but I think I don't have alternative.</p>\n\n<p><strong>My problems</strong></p>\n\n<ol>\n<li><code>Object&lt;T&gt;::Object(Class&lt;T&gt;&amp; myReference)</code> is being called only once but that should be called thrice.</li>\n<li>there are four object creation in my point it must be either 3 or 5 (a and b in t1.cpp and UNIEQUEID initialisation in every class.</li>\n<li>why this is not working in Class.cpp file in constructor call?</li>\n<li>Is there any way I can check if I can make Object class to call <code>Object&lt;T&gt;::Object()</code> constructor so that T = Object class?</li>\n</ol>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "constexpr"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1529510252, "post_id": 50952415, "comment_id": 88902516, "body": "What is <code>a</code>? Please <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>, and edit your question to show us a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1529510397, "post_id": 50952415, "comment_id": 88902608, "body": "Your question would have been useless once the link rotted, so I moved the content into the question."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1529510452, "post_id": 50952415, "comment_id": 88902639, "body": "Please read about <a href=\"http://en.cppreference.com/w/c/language/conversion#Usual_arithmetic_conversions\" rel=\"nofollow noreferrer\"><i>usual arithmetic conversions</i></a>."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1529512026, "post_id": 50952415, "comment_id": 88903578, "body": "@Someprogrammerdude: yes but an iteresting point is that when the variables are <code>const</code> or <code>constexpr</code> qualified the warning is raised (even if declared <code>extern</code>) but not when they are not const qualified..."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1529515421, "last_edit_date": 1592644375, "creation_date": 1529514617, "answer_id": 50953632, "question_id": 50952415, "link": "https://stackoverflow.com/questions/50952415/unexpected-imo-constant-conversion-warning/50953632#50953632", "title": "Unexpected (IMO) constant-conversion warning", "body": "<p>There are no <code>operator~</code> that accept integers shorter than <code>int</code>. In <code>~uint8_t(0x80)</code> <code>uint8_t</code> is first promoted to <code>int</code>, and returns an <code>int</code> result, hence the warning.</p>\n<p>See <a href=\"http://en.cppreference.com/w/c/language/operator_arithmetic#Bitwise_logic\" rel=\"nofollow noreferrer\">bitwise logic</a>:</p>\n<blockquote>\n<p>First, operators <code>&amp;</code>, <code>^</code>, and <code>|</code> perform usual arithmetic conversions on both operands and <strong>the operator <code>~</code> performs integer promotions on its only operand</strong>.</p>\n<p><strong>Integer promotions</strong></p>\n<p>Integer promotion is the implicit conversion of a value of any integer type with rank less or equal to rank of <code>int</code> or of a bit field of type <code>_Bool</code>, <code>int</code>, <code>signed int</code>, <code>unsigned int</code>, to the value of type <code>int</code> or <code>unsigned int</code></p>\n<p>If <code>int</code> can represent the entire range of values of the original type (or the range of values of the original bit field), the value is converted to type <code>int</code>. Otherwise the value is converted to <code>unsigned int</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 291, "user_id": 9968492, "user_type": "registered", "profile_image": "https://graph.facebook.com/359169217940338/picture?type=large", "display_name": "Szymon Zimnowoda", "link": "https://stackoverflow.com/users/9968492/szymon-zimnowoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 50953632, "answer_count": 1, "score": 0, "last_activity_date": 1529515421, "creation_date": 1529510119, "last_edit_date": 1529510445, "question_id": 50952415, "link": "https://stackoverflow.com/questions/50952415/unexpected-imo-constant-conversion-warning", "title": "Unexpected (IMO) constant-conversion warning", "body": "<p>consider following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstatic constexpr uint8_t a = 0x80;\nstatic constexpr uint8_t b = ~a;\n</code></pre>\n\n<p>It produces the following warning:</p>\n\n<pre><code>&lt;source&gt;:5:30: warning: implicit conversion from 'int' to 'const uint8_t' (aka 'const unsigned char') changes value from -129 to 127 [-Wconstant-conversion]\n\nstatic constexpr uint8_t b = ~a;\n</code></pre>\n\n<p>I do not understand, why overflow warning is here, there is no explicite int in this code. I am operating on variables with the same type.\nWhen removing constexpr, warning disappears, when changing to:</p>\n\n<pre><code>static constexpr uint8_t b = uint8_t{~a}; \n</code></pre>\n\n<p>warning disappears. So looks like <code>~</code> operator implicitly changes variable to <code>int</code>?</p>\n\n<p>Could someone explain it to me?</p>\n"}, {"tags": ["c++", "visual-studio", "qt", "qt-vs-addin"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529510980, "post_id": 50952414, "comment_id": 88902946, "body": "have your tried Full Rebuild (after clean)?"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529511217, "post_id": 50952414, "comment_id": 88903078, "body": "@DanM. Yes, the problem is that the project file is modified when the .cpp file is saved: subsequent builds, cleans, rebuilds do nothing."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529511512, "post_id": 50952414, "comment_id": 88903263, "body": "do you build in Debug? Does it build in Release? I wonder why it excludes both Release and Debug mocs in Debug and only Debug in Release (as it probably should). Also, there is a chance you&#39;ll receive help faster if you try and ask this on qt forums directly. Maybe it&#39;s a bug in a new extension."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529511626, "post_id": 50952414, "comment_id": 88903339, "body": "@DanM. If build in Debug (and the issue occurs) just fails in Debug, but when working in Release it may happen too."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529511795, "post_id": 50952414, "comment_id": 88903438, "body": "seems related/duplicate: <a href=\"https://stackoverflow.com/questions/28455525/qt-vs-addin-obj-files-are-not-generated-for-moc-cpp-files\" title=\"qt vs addin obj files are not generated for moc cpp files\">stackoverflow.com/questions/28455525/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/11941885/moc-ed-files-being-exluded-from-build-in-visual-studio-2010\" title=\"moc ed files being exluded from build in visual studio 2010\">stackoverflow.com/questions/11941885/&hellip;</a> (though it doesn&#39;t look like there was a definite solution to the 1st one)"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529511961, "post_id": 50952414, "comment_id": 88903541, "body": "@DanM. seems to be very similar (probably the same issue although no information about versions is given), but unfortunately no valid answers are given :("}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529512355, "post_id": 50952414, "comment_id": 88903764, "body": "@buchart, just to be sure: the project was created with the latest (2.2.0+) version of Qt Add-in? Same problem with 2.2.1. But yeah, I&#39;m out of ideas. Maybe folks on Qt forums can help: <a href=\"https://forum.qt.io/\" rel=\"nofollow noreferrer\">forum.qt.io</a>"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529512470, "post_id": 50952414, "comment_id": 88903825, "body": "@DanM. thanks for your help, the second question didn&#39;t help neither (actually, it was already applied). And sorry, yes, plugin is 2.2.1. I&#39;ll refer directly to plugin&#39;s project page and post the solution here (if any). Thanks again!"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530027296, "post_id": 50952414, "comment_id": 89084354, "body": "@DanM. I was discussing with the plugin&#39;s team and got a solution (with some tweaks), in case you were interested in this issue"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530042986, "post_id": 50952414, "comment_id": 89091991, "body": "Thanks. Nice knowing you&#39;ve sorted this out. Was this some bug in the plugin or some problem with configuration? Will it be fixed in future versions?"}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530082982, "post_id": 50952414, "comment_id": 89103372, "body": "@DanM. It seems to be a known issue (or at least related to other ones), but no more information was given. On the other hand, custom build steps are on their way to be deprecated by Qt VS Tools in favor of MSBuild, so I&#39;m not sure if it&#39;s going to be fixed"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530099222, "post_id": 50952414, "comment_id": 89113229, "body": "Ah, OK. I thought latest addin already used MSBuild instead of custom steps."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530099622, "post_id": 50952414, "comment_id": 89113452, "body": "@DanM. yes it does... for new projects, old ones are not automatically migrated, that was my case... and even though, migration can create new issues to be solved (see the answer for more detail)."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1530099855, "post_id": 50952414, "comment_id": 89113596, "body": "That explains it. I though you answered positively to mu previous question regarding the version of Addin that was used to create the project, but I now see that you were only replying to the second part of the question, hence my confusion."}], "answers": [{"comments": [{"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1570451377, "post_id": 51045878, "comment_id": 102906161, "body": "All I had to do in my case was remove and re-add the header.  It was working in Debug but not Release, and the project had been &quot;upgraded&quot; on import - something got missed along the way it seems."}, {"owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1573741808, "post_id": 51045878, "comment_id": 103989285, "body": "@Clifford that also happened to me, but after a <i>while</i> (undetermined) it happened again, and again..."}], "tags": [], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "is_accepted": true, "score": 4, "last_activity_date": 1530774306, "last_edit_date": 1530774306, "creation_date": 1530024919, "answer_id": 51045878, "question_id": 50952414, "link": "https://stackoverflow.com/questions/50952414/moced-file-gets-mysteriously-excluded-from-visual-studio-project/51045878#51045878", "title": "Moc&#39;ed file gets mysteriously excluded from Visual Studio project", "body": "<p>After discussing it with the Qt VS Tools team, I managed to solve the problem. I've tested it using the latest version of the plugin currently available (2.2.1).</p>\n\n<p>Solution consisted in converting the custom build steps into Qt/MSBuild commands (more about it <a href=\"https://blog.qt.io/blog/2018/02/16/qt-visual-studio-improving-performance/\" rel=\"nofollow noreferrer\">here</a>). To do so I used the menu option <em>Qt VS Tools / Convert custom build steps to Qt/MSBuild</em>.</p>\n\n<p>After conversion, I had to deal with some issue tough. I document them here:</p>\n\n<ul>\n<li><p>I had to remove all header files with the <code>Q_OBJECT</code> macro and re-add them manually in order to be able to moc'ed them (I also removed/re-added all .ui files, not sure if influenced in anyway).</p></li>\n<li><p>Precompiled headers setting (using PCH) was not respected when adding existing files (.h with <code>Q_OBJECT</code>). Files were added through drag&amp;drop. If I switched PCH off and then on it work for already added files, new ones still needed manual intervention (PCH off/on or editing the <code>.vcxproj</code> as shown below).</p>\n\n<p>Invalid entry in <code>.vcxproj</code>:</p>\n\n<pre><code>&lt;QtMoc Include=\"new_file_added.h\" /&gt;\n</code></pre>\n\n<p>Changed to:</p>\n\n<pre><code>&lt;QtMoc Include=\"example.h\"&gt;\n  &lt;ForceInclude Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;StdAfx.h;../../%(Filename)%(Extension)&lt;/ForceInclude&gt;\n  &lt;ForceInclude Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\"&gt;StdAfx.h;../../%(Filename)%(Extension)&lt;/ForceInclude&gt;\n&lt;/QtMoc&gt;\n</code></pre>\n\n<p>Another way to solve it is to open the properties of the affected header file and change <em>Qt Meta-Object Compiler / Force Include</em> option to <code>StdAfx.h;../../%(Filename)%(Extension)</code> (change <code>StdAfx.h</code> with your PCH filename if different):</p>\n\n<p><a href=\"https://i.stack.imgur.com/OSq1A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OSq1A.png\" alt=\"header file properties\"></a></p></li>\n<li><p>I had some QRC files being compiled to a binary file. The binary output was set for every QRC file by default. I had to change the global property to <code>false</code> to solve it:</p>\n\n<pre><code>&lt;QtRcc&gt;\n  &lt;BinaryOutput&gt;false&lt;/BinaryOutput&gt;\n&lt;/QtRcc&gt;\n</code></pre>\n\n<p>Or using .qrc properties:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PbUBB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PbUBB.png\" alt=\"QRC properties\"></a></p>\n\n<p>Also, output files for them were C++ sources (<code>qrc_*.cpp</code>, instead of the output name in the original project, <code>*.rcc</code>). Just change set the <code>DynamicSource</code> to <code>false</code> and the<code>OutputFile</code> elements in the corresponding <code>ItemGroup</code>s:</p>\n\n<pre><code>&lt;ItemGroup&gt;\n  &lt;QtRcc Include=\"resources\\resources.qrc\"&gt;\n    &lt;BinaryOutput&gt;true&lt;/BinaryOutput&gt;\n    &lt;DynamicSource&gt;false&lt;/DynamicSource&gt;\n    &lt;OutputFile&gt;$(SolutionDir)\\output\\resources.rcc&lt;/OutputFile&gt;\n  &lt;/QtRcc&gt;\n&lt;/ItemGroup&gt;\n</code></pre>\n\n<p>Or using the GUI:\n<a href=\"https://i.stack.imgur.com/RiKO0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RiKO0.png\" alt=\"DynamicSource\"></a></p></li>\n</ul>\n\n<p>After those changes it worked perfectly (in my two environments, VS 2010 and VS 2017).</p>\n\n<p>PS: It seems to be a known issue (or at least related to other ones), but no more information was given. On the other hand, custom build steps are on their way to be deprecated by Qt VS Tools in favor of MSBuild, so I'm not sure if it's going to be fixed.</p>\n"}], "owner": {"reputation": 8601, "user_id": 1485885, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tdPE1.jpg?s=128&g=1", "display_name": "cbuchart", "link": "https://stackoverflow.com/users/1485885/cbuchart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "accepted_answer_id": 51045878, "answer_count": 1, "score": 1, "last_activity_date": 1530774306, "creation_date": 1529510117, "last_edit_date": 1530099575, "question_id": 50952414, "link": "https://stackoverflow.com/questions/50952414/moced-file-gets-mysteriously-excluded-from-visual-studio-project", "title": "Moc&#39;ed file gets mysteriously excluded from Visual Studio project", "body": "<p>I have several Visual Studio projects created with the Qt Visual Studio Tools (always the latest version available at the moment of the project creation, some dating from the first versions supporting Qt 5, now is the 2.2.1). All projects are compiled with VS 2010, although the IDE is VS 2017 (15.7.4 so far).</p>\n\n<p>From some time on, some projects started to report link errors such as</p>\n\n<blockquote>\n  <p>error LNK2001: unresolved external symbol \"public: static struct QMetaObject const MyQtClass::staticMetaObject\" (?staticMetaObject@MyQtClass@@2UQMetaObject@@B)</p>\n</blockquote>\n\n<p>For this example, <code>MyQtClass.h</code> file declares <code>MyQtClass</code> and has the <code>Q_OBJECT</code> macro. <code>MyQtClass.cpp</code> defines the methods.</p>\n\n<p>After a quick inspection, I discovered that the problem came from fact that the associated moc'ed file (<code>moc_MyQtClass.cpp</code> for above example) was <em>excluded</em> from compilation for current configuration. Here the extract of the .vcxproj file:</p>\n\n<pre><code>&lt;ClCompile Include=\"GeneratedFiles\\Debug\\moc_MyQtClass.cpp\"&gt;\n  &lt;ExcludedFromBuild Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;true&lt;/ExcludedFromBuild&gt;\n  &lt;ExcludedFromBuild Condition=\"'$(Configuration)|$(Platform)'=='Release|Win32'\"&gt;true&lt;/ExcludedFromBuild&gt;\n&lt;/ClCompile&gt;\n&lt;ClCompile Include=\"GeneratedFiles\\Release\\moc_MyQtClass.cpp\"&gt;\n  &lt;ExcludedFromBuild Condition=\"'$(Configuration)|$(Platform)'=='Debug|Win32'\"&gt;true&lt;/ExcludedFromBuild&gt;\n&lt;/ClCompile&gt;\n</code></pre>\n\n<p>If I modify the .vcxproj file to remove the exclusion from the Debug configuration, then the project works.</p>\n\n<p>The problem only happens when the <em>main</em> .cpp file associated to the <code>Q_OBJECT</code>ed class is modified (<code>MyQtClass.cpp</code> in my example). At the time such file is saved, the .vcxproj file is modified with the exclusions.</p>\n\n<p>This issue doesn't appears in every Qt project I have, but once it starts it keeps appearing every time the associated .cpp file is modified. I haven't been able to discover a pattern for it. In addition, it happens in several development systems at the company, so it doesn't seem to be a problem of my computer.</p>\n\n<p>The only workaround I've found is to discard the changes from the project file, but it is a headache to be discarding and relaunching the project <em>every time</em> those files are modified (which happens to be a <em>lot</em> of times).</p>\n\n<p>Has anybody experienced the same issue? Any ideas how to solve it?</p>\n\n<hr>\n\n<p>Update: the issue only happens when the modified file is the .cpp file with identical basename regarding the header file (<code>MyQtClass.cpp</code> in my example). If I modified another file that also defines more methods of the <code>MyQtClass</code> class (such as <code>MyQtClass_more_definitions.cpp</code>), no error is given.</p>\n\n<hr>\n\n<p>As it seems to be a bug in the Qt Visual Studio Tools with no workaround, I've reported it under <a href=\"https://bugreports.qt.io/browse/QTVSADDINBUG-555\" rel=\"nofollow noreferrer\">QTVSADDINBUG-555</a>.</p>\n"}, {"tags": ["c++", "ffmpeg", "h.264", "openh264"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1529512536, "post_id": 50952336, "comment_id": 88903862, "body": "Which version of <code>ffmpeg</code> are you using?  <code>av_register_all</code> and <code>av_codec_next</code> have been deprecated for a while now."}, {"owner": {"reputation": 1503, "user_id": 1078116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0911cee39ffe69b10ec3352c17368537?s=128&d=identicon&r=PG", "display_name": "alvion", "link": "https://stackoverflow.com/users/1078116/alvion"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1529516012, "post_id": 50952336, "comment_id": 88905734, "body": "n3.3.7, which still uses this api"}], "answers": [{"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1529591233, "creation_date": 1529591233, "answer_id": 50970973, "question_id": 50952336, "link": "https://stackoverflow.com/questions/50952336/ffmpeg-why-arent-all-my-codecs-showing-up-when-i-call-av-codec-next/50970973#50970973", "title": "FFMPEG: Why aren&#39;t all my codecs showing up when I call av_codec_next()", "body": "<p>Given that the <code>av_register_all</code>/<code>av_codec_next</code> APIs are deprecated you might want to try <code>av_codec_iterate</code> instead...</p>\n\n<pre><code>const AVCodec *current_codec = nullptr;\nvoid *i = 0;\nwhile ((current_codec = av_codec_iterate(&amp;i))) {\n  if (av_codec_is_encoder(current_codec)) {\n    std::cout &lt;&lt; \"Found encoder \" &lt;&lt; current_codec-&gt;long_name &lt;&lt; std::endl;\n  }\n}\n</code></pre>\n\n<p>Seems to work as expected (Linux + libavcodec.so.58.19.104).</p>\n"}], "owner": {"reputation": 1503, "user_id": 1078116, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/0911cee39ffe69b10ec3352c17368537?s=128&d=identicon&r=PG", "display_name": "alvion", "link": "https://stackoverflow.com/users/1078116/alvion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1042, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1529591233, "creation_date": 1529509869, "question_id": 50952336, "link": "https://stackoverflow.com/questions/50952336/ffmpeg-why-arent-all-my-codecs-showing-up-when-i-call-av-codec-next", "title": "FFMPEG: Why aren&#39;t all my codecs showing up when I call av_codec_next()", "body": "<p>I'm trying to make a custom build of ffmpeg to use in my c++ application.  The only codecs I need are encode/decode for h264 and aac.  Because I cannot use GPL code, I'm trying to use openh264.</p>\n\n<p>I successfully built openh264.</p>\n\n<p>I am configuring my ffmpeg build thusly:</p>\n\n<pre><code>../../../configure\\\n --toolchain=msvc\\\n --arch=x86_64\\\n --enable-shared\\\n --prefix=../../../Build/Windows10/x64\\\n --disable-programs\\\n --disable-everything\\\n --enable-libopenh264\\\n --extra-ldflags=../../../../openh264/openh264.lib\\\n --enable-hwaccel=h264_d3d11va\\\n --enable-encoder=libopenh264\\\n --enable-encoder=aac\\\n --enable-decoder=h264\\\n --enable-decoder=aac\\\n --enable-muxer=mp4\\\n --enable-demuxer=mov\\\n --enable-parser=h264\\\n --enable-parser=aac\\\n --disable-dxva2\\\n --enable-protocol=file\n</code></pre>\n\n<p>Here is my configure output:</p>\n\n<pre><code>install prefix            ../../../Build/Windows10/x64\nsource path               /c/ffmpeg\nC compiler                cl\nC library                 msvcrt\nARCH                      x86 (generic)\nbig-endian                no\nruntime cpu detection     yes\nyasm                      yes\nMMX enabled               yes\nMMXEXT enabled            yes\n3DNow! enabled            yes\n3DNow! extended enabled   yes\nSSE enabled               yes\nSSSE3 enabled             yes\nAESNI enabled             yes\nAVX enabled               yes\nXOP enabled               yes\nFMA3 enabled              yes\nFMA4 enabled              yes\ni686 features enabled     yes\nCMOV is fast              yes\nEBX available             no\nEBP available             no\ndebug symbols             yes\nstrip symbols             no\noptimize for size         no\noptimizations             yes\nstatic                    no\nshared                    yes\npostprocessing support    no\nnetwork support           no\nthreading support         w32threads\nsafe bitstream reader     yes\ntexi2html enabled         no\nperl enabled              yes\npod2man enabled           no\nmakeinfo enabled          yes\nmakeinfo supports HTML    no\n\nExternal libraries:\nlibopenh264             schannel                xlib\n\nExternal libraries providing hardware acceleration:\ncuda                    cuvid                   d3d11va                 nvenc\n\nLibraries:\navcodec                 avfilter                avformat                avutil                  swresample              swscale\navdevice\n\nPrograms:\n\nEnabled decoders:\naac                     h264\n\nEnabled encoders:\naac                     libopenh264\n\nEnabled hwaccels:\nh264_d3d11va\n\nEnabled parsers:\naac                     h264\n\nEnabled demuxers:\nmov\n\nEnabled muxers:\nmov                     mp4\n\nEnabled protocols:\nfile\n\nEnabled filters:\n\nEnabled bsfs:\n\nEnabled indevs:\n\nEnabled outdevs:\n\nLicense: LGPL version 2.1 or later\n</code></pre>\n\n<p>As you can see, it is listing two values each for encoders and decoders.  HOWEVER, when I try to list the codecs available like so:</p>\n\n<pre><code>av_register_all();\nAVCodec* current_codec = av_codec_next(nullptr);\nwhile (current_codec != nullptr)\n{\n    if (av_codec_is_encoder(current_codec))\n    {\n        cout &lt;&lt; \"Found encoder \" &lt;&lt; current_codec-&gt;long_name &lt;&lt; endl;\n    }\n    current_codec = av_codec_next(current_codec);\n}\n</code></pre>\n\n<p>Only the first call to av_codec_next returns non-null, and it is the h264 decoder.  I don't see the aac decoder, and I don't see any encoders at all.</p>\n\n<p>I've tried the same source code but linking to a prebuilt version of ffmpeg (from Zeroane), so I'm sure the code to iterate over the codecs is correct.</p>\n\n<p>What do I need to do to get openh264 and aac to be listed as codecs?</p>\n"}, {"tags": ["c++", "c++11", "bitset"], "comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 2, "creation_date": 1529509946, "post_id": 50952307, "comment_id": 88902295, "body": "Is <code>unsigned long z = bitset&lt;4&gt;(&quot;1010&quot;).to_ulong();</code> acceptable?"}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1529510118, "post_id": 50952307, "comment_id": 88902416, "body": "no, because it too messy to keep converting it....  I have it used in complicated Boolean equations across several files... it just looks ulgy if its not implicitly converted..."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1529510251, "post_id": 50952307, "comment_id": 88902515, "body": "To be honest, if your bitset is not too big, you could directly use a binary literal: <code>auto z = 0b1010ul;</code>. On the other hand having <code>bitset</code> implicitly convertible to <code>unsigned long</code> might cause more problems than it solves."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1529510503, "post_id": 50952307, "comment_id": 88902678, "body": "that&#39;s a good point... except, I really want to use bitset because it has bounds checking and doesn&#39;t allow my inputs to go out of of range of the specified number of bits."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1529556376, "post_id": 50952307, "comment_id": 88917882, "body": "Ok, agreed.  If you are writing normal programmer code it\u2019s good enough to use c++14 0b0010...etc, But, I would like to keep track of bit widths because it\u2019s modeling hardware in c++ like verilog, systemc, vhdl. etc."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1529556833, "post_id": 50952307, "comment_id": 88918011, "body": "I thought about just throwing away bitset and creating a class wrapper around uint64_t instead that enforces a given bit width onto input and output variables to logical function as a sanity check of doing all the logic equations in 64 bit ints."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1529557206, "post_id": 50952307, "comment_id": 88918116, "body": "It would be nice if for instance the bitset replacement class could keep track of how the bitwidths expand when you add or multiple bit vectors of different bit lengths...but I suppose I can just hand calculate the bit width of the final result and assign the truncation width for output bit vector using uint64_t class wrapper... if that makes sense to anyone.."}], "answers": [{"comments": [{"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "edited": false, "score": 0, "creation_date": 1529510563, "post_id": 50952397, "comment_id": 88902717, "body": "I&#39;m willing to derive a new class from bitset to fix the problem.. how would you do it in this case?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1529510775, "post_id": 50952397, "comment_id": 88902843, "body": "For most <code>std</code> classes, you are <a href=\"https://stackoverflow.com/questions/6006860/why-should-one-not-derive-from-c-std-string-class\">not supposed to derive from them</a>. You could encapsulate it in a new class though."}, {"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "edited": false, "score": 0, "creation_date": 1529510912, "post_id": 50952397, "comment_id": 88902909, "body": "Is this possible in C++11:  template&lt;size_t N&gt; operator unsigned long(bitset&lt;N&gt;&amp; x) {return x.to_ulong();}    ??  (A helper function that satisfies bullet two)"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 7, "last_activity_date": 1529514331, "last_edit_date": 1529514331, "creation_date": 1529510078, "answer_id": 50952397, "question_id": 50952307, "link": "https://stackoverflow.com/questions/50952307/c11-template-function-to-implicity-convert-bitsetn-to-unsigned-long/50952397#50952397", "title": "C++11 Template function to &quot;implicity&quot; convert bitset&lt;N&gt; to &quot;unsigned long&quot;", "body": "<p>To <em>implicitly</em> convert <code>A</code> to <code>B</code>, either:</p>\n\n<ul>\n<li><code>B</code> must have a non-explicit constructor taking <code>A</code>, or</li>\n<li><code>A</code> must have a non-explicit conversion <code>operator B()</code>.</li>\n</ul>\n\n<p>Both of these must be member functions only.</p>\n\n<p>Since you cannot modify <code>std::bitset</code> or <code>unsigned long</code> the answer is: no, you cannot <em>implicitly</em> convert <code>std::bitset</code> to <code>unsigned long</code>. Only <em>explicitly</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "edited": false, "score": 0, "creation_date": 1529512109, "post_id": 50952880, "comment_id": 88903628, "body": "I like this idea of using a wrapper... it hides all the public functions of bitset and lets you define your own..."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 2, "last_activity_date": 1529511983, "last_edit_date": 1529511983, "creation_date": 1529511584, "answer_id": 50952880, "question_id": 50952307, "link": "https://stackoverflow.com/questions/50952307/c11-template-function-to-implicity-convert-bitsetn-to-unsigned-long/50952880#50952880", "title": "C++11 Template function to &quot;implicity&quot; convert bitset&lt;N&gt; to &quot;unsigned long&quot;", "body": "<p>You could wrap <code>std::bitset</code> in your own implicitly convertible class:</p>\n\n<pre><code>template&lt;size_t N&gt;\nclass MyBitset\n{\npublic:\n    // constructors elided here\n\n    operator unsigned long()\n    {\n        return _bitset.to_ulong();\n    }\n\n    operator std::bitset&lt;N&gt;()\n    {\n        return _bitset; // Note that you get a copy here.\n    }\n\nprivate:\n    std::bitset&lt;N&gt; _bitset;\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/euuB3f\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>If you are trying to derive from non-polymorphic classes in <code>namespace std</code> (i.e. those without virtual destructors), you are <a href=\"https://stackoverflow.com/questions/6006860/why-should-one-not-derive-from-c-std-string-class\">not writing idiomatic C++</a>, don't do it. Whether the above is really a solution to your problem we can't tell. If all you need is <code>unsigned long</code> constants from your bitstrings, you could skip the class wrapper and replace its constructors with templated functions directly:</p>\n\n<pre><code>template&lt;size_t N, class CharT&gt;\nunsigned long toUlong(const CharT* str,\n                 typename std::basic_string&lt;CharT&gt;::size_type n =\n                     std::basic_string&lt;CharT&gt;::npos,\n                 CharT zero = CharT('0'),\n                 CharT one = CharT('1'))\n{\n    return std::bitset&lt;N&gt;(str, n, zero, one).to_ulong();\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/YJxJeG\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1529513103, "last_edit_date": 1529513103, "creation_date": 1529512067, "answer_id": 50953003, "question_id": 50952307, "link": "https://stackoverflow.com/questions/50952307/c11-template-function-to-implicity-convert-bitsetn-to-unsigned-long/50953003#50953003", "title": "C++11 Template function to &quot;implicity&quot; convert bitset&lt;N&gt; to &quot;unsigned long&quot;", "body": "<p>Another Solution based on Maxim's Bullet 2:</p>\n\n<pre><code>template&lt;size_t N&gt;\nclass bits : public bitset&lt;N&gt; {\npublic:\n    bits(unsigned long num) : bitset&lt;N&gt;(num) {}\n    bits(char* binstr) : bitset&lt;N&gt;(binstr){}\n\n    operator unsigned long() {\n        return this-&gt;to_ulong();\n    }\n\n    // Slice Bit Range\n    unsigned long slice(unsigned L, unsigned R)\n    {\n        unsigned long P1;\n        unsigned long P2;\n\n        if (L&gt;R) {\n            P2 = L;\n            P1 = R;\n        }\n        else {\n            P2 = R;\n            P1 = L;\n        }\n\n        unsigned long x = this-&gt;to_ulong();\n        unsigned long W = P2 - P1 + 1;\n\n        unsigned long Value = (x &gt;&gt; P1) &amp; ((1&lt;&lt;W) - 1);\n\n        return Value;\n    }\n\n    // Return Hex String\n    string hstr() {\n        stringstream xx;\n        xx &lt;&lt; \"0x\" &lt;&lt; hex &lt;&lt; this-&gt;to_ulong();\n        return xx.str();\n    }\n};\n\nint main(int argc, char** argv) {\n    // Implicit conversion...\n    unsigned long xxx = bits&lt;4&gt;(\"0101\");\n    unsigned long yyy = bits&lt;4&gt;(xxx).slice(1, 2);\n}\n</code></pre>\n"}], "owner": {"reputation": 4442, "user_id": 5632412, "user_type": "registered", "accept_rate": 2, "profile_image": "https://www.gravatar.com/avatar/7922497d2bfc3a8fe33d4a22b15d995a?s=128&d=identicon&r=PG&f=1", "display_name": "Bimo", "link": "https://stackoverflow.com/users/5632412/bimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1529514331, "creation_date": 1529509771, "last_edit_date": 1529510391, "question_id": 50952307, "link": "https://stackoverflow.com/questions/50952307/c11-template-function-to-implicity-convert-bitsetn-to-unsigned-long", "title": "C++11 Template function to &quot;implicity&quot; convert bitset&lt;N&gt; to &quot;unsigned long&quot;", "body": "<p>I can create a C++11 Template function to explicitly convert a bitset into an unsigned long:</p>\n\n<pre><code>template&lt;size_t N&gt;\nunsigned long U(bitset&lt;N&gt; x) {\n    return x.to_ulong();\n}\n\n// Explicit conversion\nunsigned long y = U(bitset&lt;4&gt;(\"1010\"));\n</code></pre>\n\n<p>Is there a way to \"implicitly\" convert bitset to an unsigned long using a C++11 template helper function.  For Example, if I assign a bitset to an unsigned long, then I want it to automatically convert the bitset to the correct type:</p>\n\n<pre><code>// What Template Function in C++11?\n\n// Implicit Conversion\nunsigned long z = bitset&lt;4&gt;(\"1010\");\n</code></pre>\n\n<p>(If its not possible to create an implicit convertion rule to convert to \"unsigned long using a C++11 template function, its also acceptable to derive a new class from bitset that has casting function to unsigned long.  Is that possible as well?) </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 2, "creation_date": 1529509943, "post_id": 50952303, "comment_id": 88902292, "body": "Your code doesn&#39;t match the error messages and your words."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 1, "creation_date": 1529509988, "post_id": 50952303, "comment_id": 88902319, "body": "@S.M. yes it does, <a href=\"https://www.ideone.com/39i5e1\" rel=\"nofollow noreferrer\">see here</a>"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 3, "creation_date": 1529510130, "post_id": 50952303, "comment_id": 88902422, "body": "No, it doesn&#39;t. Ideone&#39;s error messages don&#39;t show <code>unsigned</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1529510221, "post_id": 50952303, "comment_id": 88902493, "body": "@S.M. Touche. Luckily for me my answer still applies."}], "answers": [{"comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1529511027, "post_id": 50952345, "comment_id": 88902972, "body": "OK, so I just somewhat misunderstood the overload lookup system."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1529511220, "post_id": 50952345, "comment_id": 88903082, "body": "@Jabberwocky Fortunately the C++ one is beautifully consistent. If you want to dispose of your lunch quickly, have a look at the Java one!"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 5, "last_activity_date": 1529509896, "creation_date": 1529509896, "answer_id": 50952345, "question_id": 50952303, "link": "https://stackoverflow.com/questions/50952303/function-overloading-and-confusion-between-double-and-long/50952345#50952345", "title": "Function overloading and confusion between double and long", "body": "<p><code>1</code> and <code>2</code> are literals of type <code>int</code>, and <code>2.0</code> is a <code>double</code>.</p>\n\n<p>So neither overload is an exact match for your types, they are ranked similarly for the purposes of overload resolution, so the compiler is required to issue a diagnostic. (Note that <code>int</code> and <code>long</code> must be different types even if they have the same size and complementing scheme.)</p>\n\n<p>You could fix with <code>Foo(1L, 2L);</code>.</p>\n"}], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 50952345, "answer_count": 1, "score": 0, "last_activity_date": 1529511222, "creation_date": 1529509763, "last_edit_date": 1529511222, "question_id": 50952303, "link": "https://stackoverflow.com/questions/50952303/function-overloading-and-confusion-between-double-and-long", "title": "Function overloading and confusion between double and long", "body": "<p>I expected this simple code to compile:</p>\n\n<pre><code>void Foo(long a, long);\nvoid Foo(long a, double b);\n\nint main()\n{\n  Foo(1, 2);\n  Foo(1, 2.0);\n}\n</code></pre>\n\n<p>Compiler output:</p>\n\n<pre><code>prog.cpp: In function \u2018int main()\u2019:\nprog.cpp:8:11: error: call of overloaded \u2018Foo(int, int)\u2019 is ambiguous\n   Foo(1, 2);\n           ^\nprog.cpp:3:6: note: candidate: void Foo(long int, long int)\n void Foo(long a, long);\n      ^~~\nprog.cpp:4:6: note: candidate: void Foo(long int, double)\n void Foo(long a, double b);\n      ^~~\n</code></pre>\n\n<p>I don't understand why the call is ambigous. For me <code>Foo(unsigned long a, unsigned long)</code> is clearly a closer match than <code>void Foo(unsigned long a, double b)</code> for <code>Foo(1, 2)</code>.</p>\n\n<p>But if I replace <code>long</code> by <code>int</code> it compiles:</p>\n\n<pre><code>void Foo(int a, int);\nvoid Foo(int a, double b);\n\nint main()\n{\n  Foo(1, 2);\n  Foo(1, 2.0);\n}\n</code></pre>\n\n<p>I'm really lost here.</p>\n"}, {"tags": ["c++", "visual-studio", "stl", "iterator", "find"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529510032, "post_id": 50952253, "comment_id": 88902343, "body": "If the pattern you are searching for is fixed (such as <code>6</code> followed by <code>7</code>), you can use <code>std::search</code>. If you are searching for something more elaborate (such as an element followed by an element that&#39;s one larger) you likely have to write your own algorithm."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1529510575, "post_id": 50952253, "comment_id": 88902722, "body": "There is no function that will map a value to an iterator.  That said if the lambda takes the parameter in by reference then it&#39;s address is the address of the object in the vector and you can use that to to find its position and then get an iterator to it."}, {"owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529512296, "post_id": 50952253, "comment_id": 88903725, "body": "@NathanOliver Ok, but how would i go from the address to it&#39;s relative position (index) in the container?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529512459, "post_id": 50952253, "comment_id": 88903816, "body": "<code>auto pos = &amp;some_element_from_the_vector - &amp;the_vector[0];</code> gives you the index of the element in the vector.  Then <code>auto it = the_vector.begin() + pos;</code> gives you an iterator to that element."}], "answers": [{"comments": [{"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1529510226, "post_id": 50952347, "comment_id": 88902496, "body": "True, didn&#39;t think of that; fixed."}, {"owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "edited": false, "score": 0, "creation_date": 1529510268, "post_id": 50952347, "comment_id": 88902533, "body": "Ok, thanks.  So there is no function at all that gives you an iterator to a specific object in a container, irrespective of where it is in the container (no function at all = not just in the example above)?  (You can get everywhere by using .begin() and then advance, but no function that just returns an iterator to a given object i mean.)"}, {"owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "reply_to_user": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "edited": false, "score": 0, "creation_date": 1529510492, "post_id": 50952347, "comment_id": 88902669, "body": "@someonesomewhere std::find will give you an iterator to an object"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "edited": false, "score": 0, "creation_date": 1529510620, "post_id": 50952347, "comment_id": 88902754, "body": "@someonesomewhere It&#39;s not clear what you want, but if you mean to get an element in a sequential container based on it&#39;s index, you can use <code>container.begin() + index</code> for random access iterators of <code>std::next(container.begin(), index)</code> for non-random access iterators or in a generic context."}, {"owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529511062, "post_id": 50952347, "comment_id": 88902992, "body": "@Fran&#231;ois Andrieux Thanks. My specific question is (i think) that I have an reference to an object that is inside a container, and then i want an iterator to this specific object (without needing to know the index of the object in the container)."}, {"owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "edited": false, "score": 0, "creation_date": 1529511231, "post_id": 50952347, "comment_id": 88903092, "body": "@Dominic Price  True, but i would like to get the iterator without using find (to a given object, e.g. to get the iterator to the object curnum in the example-code above.)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "edited": false, "score": 0, "creation_date": 1529511771, "post_id": 50952347, "comment_id": 88903415, "body": "@someonesomewhere I see. NathanOliver has made a comment in the question that should address your concern."}], "tags": [], "owner": {"reputation": 412, "user_id": 5194459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z3iVN.jpg?s=128&g=1", "display_name": "Dominic Price", "link": "https://stackoverflow.com/users/5194459/dominic-price"}, "is_accepted": false, "score": 0, "last_activity_date": 1529510544, "last_edit_date": 1529510544, "creation_date": 1529509913, "answer_id": 50952347, "question_id": 50952253, "link": "https://stackoverflow.com/questions/50952253/how-to-get-iterator-to-a-certain-object-in-a-container/50952347#50952347", "title": "How to get iterator to a certain object in a container?", "body": "<p>You can use a custom find function, for example (not tested)</p>\n\n<pre><code>template &lt;typename It, typename T&gt;\nIt find_succ(It begin, It end, T v1, T v2)\n{\n    if (begin == end)\n        return end;\n    It next = begin;\n    ++next;\n    while (next != end) {\n        if (*begin == v1 &amp;&amp; *next == v2)\n            return begin;\n        ++begin, ++next;\n    }\n    return end;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1529510524, "post_id": 50952531, "comment_id": 88902693, "body": "Interesting, I did not know <code>std::adjacent_find</code> could take a predicate."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529512297, "post_id": 50952531, "comment_id": 88903728, "body": "@Fran&#231;oisAndrieux Don&#39;t most <code>&lt;algorithm&gt;</code> functions that compare anything take one nowadays?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1529514759, "post_id": 50952531, "comment_id": 88905059, "body": "@MaxLanghof yea but design still flawed - you do not need to create so many in functional language. Ranges hopefully would fix that"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1529582727, "post_id": 50952531, "comment_id": 88932530, "body": "I mean, most languages provide a syntax where you just pass a container to library functions. I don&#39;t think C++ would be a worse language if every <code>std</code> function that takes a <code>begin</code>/<code>end</code> pair had an additional overload taking a <code>T&amp;</code> or <code>const T&amp;</code> that it just calls <code>begin</code> and <code>end</code> on - you could then finally write <code>std::sort(myVector)</code> without all the iterator noise. It would just mean a lot more functions in the standard library."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 6, "last_activity_date": 1529510926, "last_edit_date": 1529510926, "creation_date": 1529510479, "answer_id": 50952531, "question_id": 50952253, "link": "https://stackoverflow.com/questions/50952253/how-to-get-iterator-to-a-certain-object-in-a-container/50952531#50952531", "title": "How to get iterator to a certain object in a container?", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/adjacent_find\" rel=\"nofollow noreferrer\">std::adjacent_find</a> in this case:</p>\n\n<pre><code>auto it = std::adjacent_find( originalvec.begin(), originalvec.end(), []( int i1, int i2 )   {\n    return i1 == 6 and i2 == 7;\n} );\n</code></pre>\n\n<p><a href=\"https://ideone.com/xJObau\" rel=\"nofollow noreferrer\">Live example</a></p>\n"}], "owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1529514101, "creation_date": 1529509593, "last_edit_date": 1529514101, "question_id": 50952253, "link": "https://stackoverflow.com/questions/50952253/how-to-get-iterator-to-a-certain-object-in-a-container", "title": "How to get iterator to a certain object in a container?", "body": "<p>I'm currently trying to copy a part of a <code>std::vector</code>, starting with the first value until a sequence of values has been \"encountered\". I\u2019m using mainly STL algorithms and especially <code>std::find_if()</code> (I know there are other ways to accomplish the goal stated in the first sentence, but I'm mainly doing this to understand the STL, so using them would be defeating the underlying purpose).</p>\n\n<p>As an example, let's say a <code>vector</code> holding integer elements (<code>originalvec</code> in the code) is to be copied until first a 6 and then in direct succession a 7 is encountered. I know how to compare for the 6, and then I would like to compare in the same call of the lambda if behind the 6 there is a 7. I think (not sure) for that, I would need to get an iterator to the 6, then use either <code>std::advance()</code> or just <code>operator++</code> on the iterator and compare the dereferenced value to 7. However, I do not know how to get an iterator to the 6/the number currently compared?</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main() {\n    vector &lt;int&gt; originalvec = { 4, 8, 7, 6, 55, 2, 6, 7, 8 };\n    vector &lt;int&gt; newvec;\n\n    copy(originalvec.begin(),\n        find_if(originalvec.begin(), originalvec.end(), [](int curnum) {\n            return (curnum == 6);\n        }),\n        back_inserter(newvec));\n    //why does newvec.begin() (instead of back_inserter(newvec)) not work?\n\n    //current result:   newvec = {4, 8, 7}\n    //wanted result :   newvec = {4, 8, 7, 6, 55, 2}\n\n    /*wanted function is roughly in this style:\n    copy(originalvec.begin(),\n        find_if(originalvec.begin(), originalvec.end(), [](int curnum) {\n            return (curnum == 6 &amp;&amp; [curnum* +1] == 7);\n        }),\n        back_inserter(newvec)); \n    */\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1529682534, "post_id": 50974254, "comment_id": 88977677, "body": "Hi Kuba thanks for the answer, Why you say &quot;it pretends that an asynchronous action is synchronous&quot;? I just reuse the event loop of <code>QMessageBox::exec()</code> that the doc say &quot;Shows the message box as a modal dialog, blocking until the user closes it.&quot;. My API (maybe the API is the wrong terminology?) is just a shortcut to have the creation of <code>QMessageBox</code> and the execution of <code>exec()</code> in one call. basically something like <code>int execMessageBox(params){return QMessageBox(params).exec()}</code>. what is wrong with that?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1529913603, "post_id": 50974254, "comment_id": 89029924, "body": "At should have never provided those <code>exec</code> methods. They are horrible hacks with roots in the times when writing async code was considered a black art and the macabre of C APIs was overshadowing everything. The event loop concept is designed to always be in control, and re-entering the event loop by calling <code>processEvents</code> or <code>exec</code> is absolutely unnecessary. When the dialog has some data to share, run a continuation or emit a signal. That\u2019s howodern async APIs should be made. It\u2019s not Qt specific at all \u2014 all modern .Net APIs are that way too and use events."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1529913865, "post_id": 50974254, "comment_id": 89030062, "body": "All synchronous wrappers around async APIs are essentially broken by design. They are only usable from the most basic linear-flow applications of the old \u201cquery and step\u201d design, where you are issued a series of prompts in sequence with no way to do anything else. E.g. <code>QInputDialog::get</code> methods are of \u201cgreat use\u201d when you port a command line application that essentially does a series of <code>printf</code>/<code>sscanf</code> queries. Awesome for trivial classroom code, useless for anything else. No modern UI should work that way, never mind no code should be written with those APIs."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1529913917, "post_id": 50974254, "comment_id": 89030090, "body": "Qt does everyone a big disservice by not deprecating those methods and not explaining how bad of a user experience they provide, and how they are a subtle source of bugs that are very hard to test for. A recursive <code>exec</code> forces all of your code to be reentrant. Good luck with that."}, {"owner": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1529999249, "post_id": 50974254, "comment_id": 89066579, "body": "Hi Kuba, I have some case when I need to block my code waiting for some user decision. At the moment it does not come to my mind another solution. You are talking about &quot;modern&quot; api. Can you give me some reference, or some &quot;name&quot; or &quot;keyword&quot; to look for?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "edited": false, "score": 0, "creation_date": 1530127335, "post_id": 50974254, "comment_id": 89129962, "body": "Such code should be driven by a state machine or a coroutine. You&#39;re not stopping the world for the user decision. You&#39;re just pausing some sequence of actions. Your program, including its UI thread, must still be responsive to other events. So in truth you&#39;re not stopping, and writing code that look as if things were exclusively stopped is unhelpful and a source of bugs.It also makes testing a pain - there&#39;s a reason why it&#39;s a pain: pseudo-synchronous code is very hard to use for anything, including testing."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1529602520, "last_edit_date": 1529602520, "creation_date": 1529601538, "answer_id": 50974254, "question_id": 50951935, "link": "https://stackoverflow.com/questions/50951935/qt-testing-qmessageboxes-or-a-general-qdialog-with-exec-loop/50974254#50974254", "title": "Qt Testing QMessageBoxes (or a general QDialog) with exec() loop", "body": "<p>Why would you want to \"simulate\" the event loop? You want to run the real event loop! You just want to inject your code into it, and that's what timers are for (or events in general).</p>\n\n<p>Qt Test has all sorts of convenience wrappers around the event loop, e.g. <code>keyClick</code> delivers the event and drains the event queue, etc., but you don't need to simulate anything. If you don't find something that you need, you can make your own.</p>\n\n<p>The API you're using is of course broken: it pretends that an asynchronous action is synchronous. It should invert the control into a continuation passing style, i.e.:</p>\n\n<pre><code>// horrible\nint Api::askForValue();\n// better\nQ_SIGNAL void askForValueResult(int);\nvoid Api::askForValue(); // emits the signal\ntemplate &lt;typename F&gt;\nvoid Api::askForValue(F &amp;&amp;fun) { // convenience wrapper\n  auto *conn = new QMetaObject::Connection;\n  *conn = connect(this, &amp;Class::askForValueResult, \n    [fun = std::forward&lt;F&gt;(fun), \n     c = std::unique_ptr&lt;QMetaObject::Connection&gt;(conn)]\n    (int val){\n      fun(val);\n      QObject::disconnect(*c);\n    });\n  askForValue();\n}\n</code></pre>\n\n<p>The synchronous APIs like make a lot of application code have to face reentrancy, and this is not a hypothetical problem. Questions about it <a href=\"https://stackoverflow.com/q/50927964/1329652\">are not uncommon</a>. Few people realize how bad of a problem it is.</p>\n\n<p>But assuming that you are forced to stick with the horrible API: what you really want is to react to the message window being shown. You can do this by adding a global, application-wide event filter on the <code>QEvent::WindowActivate</code>. Simply install your event filter object on the application instance. This could be wrapped in some helper code:</p>\n\n<pre><code>/// Invokes setup, waits for a new window of a type T to be activated,\n/// then invokes fun on it. Returns true when fun was invoked before the timeout elapsed.\ntemplate &lt;typename T, typename F1, typename F2&gt;\nbool waitForWindowAnd(F1 &amp;&amp;setup, F2 &amp;&amp;fun, int timeout = -1) {\n  QEventLoop loop;\n  QWidgetList const exclude = QApplication::topLevelWidgets();\n  struct Filter : QObject {\n    QEventLoop &amp;loop;\n    F2 &amp;fun;\n    bool eventFilter(QObject *obj, QEvent *ev) override {\n      if (ev.type() == QEvent::WindowActivate)\n        if (auto *w = qobject_cast&lt;T*&gt;(obj))\n          if (w-&gt;isWindow() &amp;&amp; !exclude.contains(w)) {\n            fun(w);\n            loop.exit(0);\n          }\n      return false;\n    }\n    Filter(QEventLoop &amp;loop, F2 &amp;fun) : loop(loop), fun(fun) {}\n  } filter{loop, fun};\n  qApp-&gt;installEventFilter(&amp;filter);\n\n  QTimer::singleShot(0, std::forward&lt;F1&gt;(setup));\n  if (timeout &gt; -1)\n    QTimer::singleShot(timeout, &amp;loop, [&amp;]{ loop.exit(1); });\n  return loop.exec() == 0;\n}\n</code></pre>\n\n<p>Further wrappers could be made that factor out common requirements:</p>\n\n<pre><code>/// Invokes setup, waits for new widget of type T to be shown,\n/// then clicks the standard OK button on it. Returns true if the button\n/// was clicked before the timeout.\ntemplate &lt;typename T, typename F&gt;\nbool waitForStandardOK(F &amp;&amp;setup, int timeout = -1) {\n  return waitForWindowAnd&lt;T&gt;(setup,\n    [](QWidget *w){\n        if (auto *box = w-&gt;findChild&lt;QDialogButtonBox*&gt;())\n          if (auto *ok = box-&gt;standardButton(QDialogButtonBox::Ok))\n            ok-&gt;click();\n    }, timeout);\n}\n</code></pre>\n\n<p>Then, supposed you wanted to test the blocking API <code>QDialogInput::getInt</code>:</p>\n\n<pre><code>waitForStandardOK&lt;QDialog&gt;([]{ QInputDialog::getInt(nullptr, \"Hello\", \"Gimme int!\"); }, 500);\n</code></pre>\n\n<p>You could also make a wrapper that builds the bound call without needing to use a lambda:</p>\n\n<pre><code>/// Binds and invokes the setup call, waits for new widget of type T to be shown,\n/// then clicks the standard OK button on it. Returns true if the button\n/// was clicked before the timeout.\ntemplate&lt;typename T, class ...Args&gt;\nvoid waitForStandardOKCall(int timeout, Args&amp;&amp;... setup) {\n  auto bound = std::bind(&amp;invoke&lt;Args&amp;...&gt;, std::forward&lt;Args&gt;(args)...);\n  return waitForStandardOK&lt;T&gt;(bound, timeout);\n}\n</code></pre>\n\n<p>And thus:</p>\n\n<pre><code>waitForStandardOKCall&lt;QDialog&gt;(500, &amp;QInputDialog::getInt, nullptr, \"Hello\", \"Gimme int!\");\n</code></pre>\n\n<p>For more about <code>std::bind</code> and perfect forwarding, see <a href=\"https://stackoverflow.com/q/30968573/1329652\">this question</a>.</p>\n"}], "owner": {"reputation": 551, "user_id": 7624611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bee1844193d120089e6c7d185dc11f62?s=128&d=identicon&r=PG&f=1", "display_name": "n3mo", "link": "https://stackoverflow.com/users/7624611/n3mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 1, "accepted_answer_id": 50974254, "answer_count": 1, "score": 1, "last_activity_date": 1529602520, "creation_date": 1529508693, "last_edit_date": 1529509030, "question_id": 50951935, "link": "https://stackoverflow.com/questions/50951935/qt-testing-qmessageboxes-or-a-general-qdialog-with-exec-loop", "title": "Qt Testing QMessageBoxes (or a general QDialog) with exec() loop", "body": "<p>I want to test a custom <code>QMessageBox</code> that I created. In particular, my API will execute automatically the <code>exec()</code> loop of the <code>QMessageBox</code>, and I want to check the result when the user clicks a button or closes the widget.</p>\n\n<p>The problem is that I am blocked in the <code>exec()</code> loop.</p>\n\n<p>The only solution I found is creating a <code>QTimer</code> that will do what I want just before the loop is executed. References to this solution are <a href=\"https://stackoverflow.com/a/38731570/7624611\">this</a> and <a href=\"https://stackoverflow.com/a/44761273/7624611\">this</a>.</p>\n\n<p>The tests are working correctly, but really there isn't a more <em>native</em> way in Qt to test the <code>exec()</code> loop of the <code>QDialog</code>s? I mean, there are ways to activate/simulate signals in <code>QTest</code>, there is nothing that can <em>simulate</em> the <code>exec()</code> loop?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 190, "user_id": 3984892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8e311ed4521dda03e9b04dfffb2349b?s=128&d=identicon&r=PG&f=1", "display_name": "zaw", "link": "https://stackoverflow.com/users/3984892/zaw"}, "edited": false, "score": 0, "creation_date": 1529508712, "post_id": 50951860, "comment_id": 88901504, "body": "I believe that is not the full error message, only the notes. If you could provide the part (line) where it actually says &quot;error&quot;, that may be helpful"}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1529509790, "post_id": 50951860, "comment_id": 88902193, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/27590239/wrong-use-of-stdcopy\">Wrong use of std::copy?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1529509881, "post_id": 50951860, "comment_id": 88902255, "body": "Unrelated: <code>Stack&lt;T&gt;::Stack(const Stack&lt;T&gt; &amp;obj)</code> doesn&#39;t allocate storage for <code>buffer</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1529510173, "post_id": 50951860, "comment_id": 88902449, "body": "Not an error, by the way. This is Visual Studio warning you that using pointers in place of iterators implies that you are taking on some additional risk. Your math computing the end pointer MUST be correct or the program will misbehave. Your math looks good to me."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1529514090, "post_id": 50951860, "comment_id": 88904669, "body": "This doesn&#39;t address the question, but names that begin with an underscore followed by a capital letter (<code>_STACK</code>) and names that contain two consecutive underscores are reserved for use by the implementation. Don&#39;t use them in your code."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1529514216, "post_id": 50951860, "comment_id": 88904744, "body": "Reading compiler messages can be tedious, but the first rule is <b>begin at the beginning</b>. All those lines marked &quot;note&quot; are giving you more information about the issue, but it&#39;s the first line, marked &quot;warning&quot; (<b>not</b> &quot;error&quot; in this case), that tells you what the issue is."}], "owner": {"reputation": 109, "user_id": 8656057, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/d6567491f6cc3188d6ae68cdef182fa6?s=128&d=identicon&r=PG&f=1", "display_name": "P. Bolfa", "link": "https://stackoverflow.com/users/8656057/p-bolfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1037, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529510184, "creation_date": 1529508445, "last_edit_date": 1529509270, "question_id": 50951860, "link": "https://stackoverflow.com/questions/50951860/note-while-compiling-class-template-member-function-c", "title": "Note: while compiling class template member function C++", "body": "<p>Why is VS giving me this error? I am quite new to OOP and Templates in C++ and I am trying to write simple Stack implementation using these techniques. I tried to google it but I did not find anything useful.</p>\n\n<p>Code:</p>\n\n<pre><code>#ifndef _STACK\n#define _STACK\ntemplate &lt;class T&gt;\nclass Stack {\n\n    public:\n        Stack();\n        Stack(const int &amp;num);\n        Stack(const Stack&lt;T&gt; &amp;obj);\n        Stack&amp; operator=(const Stack&lt;T&gt; &amp;obj);\n        ~Stack();\n\n    private:\n        T * buffer;\n        unsigned int actualSize;\n        unsigned int maxSize;\n};\ntemplate &lt;class T&gt;\nStack&lt;T&gt;::Stack() : maxSize(5), actualSize(0), buffer(new T[5]) {};\n\ntemplate &lt;class T&gt;\nStack&lt;T&gt;::Stack(const int &amp;num) : maxSize(num), actualSize(num), buffer(new T[num]) {};\n\ntemplate &lt;class T&gt;\nStack&lt;T&gt;::Stack(const Stack&lt;T&gt; &amp;obj) {\n    this-&gt;actualSize = obj.actualSize;\n    this-&gt;maxSize = obj.maxSize;\n    std::copy(obj.buffer, obj.buffer + obj.actualSize, this-&gt;buffer);\n}\n\ntemplate &lt;class T&gt;\nStack&lt;T&gt;&amp;  Stack&lt;T&gt;::operator=(const Stack&lt;T&gt; &amp;obj) {\n    T * temp = new T[obj.actualSize];\n    std::copy(obj.buffer, obj.buffer + obj.actualSize, temp);\n    this-&gt;actualSize = obj.actualSize;\n    this-&gt;maxSize = obj.maxSize;\n    delete[] buffer;\n    buffer = temp;\n    return *this;\n}\n\ntemplate &lt;class T&gt;\nStack&lt;T&gt;::~Stack() {\n    delete[] buffer;\n}\n\n#endif\n</code></pre>\n\n<p>Full build log - obviously there is a problem with std::copy :</p>\n\n<pre><code>1&gt;------ Build started: Project: Stack, Configuration: Debug Win32 ------\n1&gt;main.cpp\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(2483): warning C4996: 'std::copy::_Unchecked_iterators::_Deprecate': Call to 'std::copy' with parameters that may be unsafe - this call relies on the caller to check that the passed values are correct. To disable this warning, use -D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++ 'Checked Iterators'\n1&gt;c:\\program files (x86)\\microsoft visual studio\\2017\\community\\vc\\tools\\msvc\\14.14.26428\\include\\xutility(2483): note: see declaration of 'std::copy::_Unchecked_iterators::_Deprecate'\n1&gt;c:\\users\\peter\\documents\\pb071hw\\circle\\stack\\stack.h(34): note: see reference to function template instantiation '_OutIt std::copy&lt;T*,T*&gt;(_InIt,_InIt,_OutIt)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            _OutIt=int *,\n1&gt;            T=int,\n1&gt;            _InIt=int *\n1&gt;        ]\n1&gt;c:\\users\\peter\\documents\\pb071hw\\circle\\stack\\stack.h(32): note: while compiling class template member function 'Stack&lt;int&gt; &amp;Stack&lt;int&gt;::operator =(const Stack&lt;int&gt; &amp;)'\n1&gt;c:\\users\\peter\\documents\\pb071hw\\circle\\stack\\main.cpp(13): note: see reference to function template instantiation 'Stack&lt;int&gt; &amp;Stack&lt;int&gt;::operator =(const Stack&lt;int&gt; &amp;)' being compiled\n1&gt;c:\\users\\peter\\documents\\pb071hw\\circle\\stack\\main.cpp(10): note: see reference to class template instantiation 'Stack&lt;int&gt;' being compiled\n1&gt;Stack.vcxproj -&gt; \n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "boost", "signals"], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 5068532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h1OYQ.jpg?s=128&g=1", "display_name": "alovaros", "link": "https://stackoverflow.com/users/5068532/alovaros"}, "edited": false, "score": 0, "creation_date": 1529508512, "post_id": 50951653, "comment_id": 88901360, "body": "First thank you (again) I gonna have a look at <code>signal_set</code>. Yeah I know that boost contains ` boost::stacktrace::safe_dump_to(&quot;&quot;)` I worked myself througth the tutorial the problem is that <code>safe_dump_to()</code> is deactivated and shouldn&#39;t be used on windows since it crashes.  <i>Async safe dumping into files on Windows OS was causing hangs on some platforms and now is disabled #33. Users are encouraged to update to the latest Boost release.</i>   From the 1.67.0 Patchnotes. I would be damn Happy if this would just work haha :D"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 456, "user_id": 5068532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h1OYQ.jpg?s=128&g=1", "display_name": "alovaros", "link": "https://stackoverflow.com/users/5068532/alovaros"}, "edited": false, "score": 0, "creation_date": 1529508953, "post_id": 50951653, "comment_id": 88901664, "body": "@alovaros I&#39;d look at the <code>signal_set</code> then. Perhaps you can just use condition variable instead, depending on your program. Also, perhaps you can compare with some ... more &quot;mature&quot; (read: old) libraries that might fit your requirements... <a href=\"https://stackoverflow.com/questions/691719/c-display-stack-trace-on-exception\" title=\"c display stack trace on exception\">stackoverflow.com/questions/691719/&hellip;</a> I can&#39;t say I have much experience there, so: good luck!"}, {"owner": {"reputation": 456, "user_id": 5068532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h1OYQ.jpg?s=128&g=1", "display_name": "alovaros", "link": "https://stackoverflow.com/users/5068532/alovaros"}, "edited": false, "score": 0, "creation_date": 1529509606, "post_id": 50951653, "comment_id": 88902081, "body": "Okay thank you very much again :) I&#39;ll hopefully will finish this project soon. Gonna read me through the alternatives (lol even c++11 hase such functionallity....)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 2, "last_activity_date": 1529508201, "last_edit_date": 1529508201, "creation_date": 1529507836, "answer_id": 50951653, "question_id": 50951614, "link": "https://stackoverflow.com/questions/50951614/async-safe-writing-functions-for-signal-handler-on-windows/50951653#50951653", "title": "Async safe writing functions for Signal handler on windows", "body": "<p>There is little authoritative information on this in general, even on POSIX. Instead, I'd suggest posting to a queue/signaling a condition from inside the async handler (using safe primitives) and doing the rest elsewhere.</p>\n\n<p>TTBOMK this abstraction is already present and ready-to-use in Boost:</p>\n\n<ul>\n<li>Boost Asio <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio/reference/signal_set.html\" rel=\"nofollow noreferrer\"><code>signal_set</code></a></li>\n</ul>\n\n<p>Also, for your particular purpose it does appear that Boost Stacktrace has helper functions that are expressly async-safe: <a href=\"http://boostorg.github.io/stacktrace/stacktrace/getting_started.html#stacktrace.getting_started.handle_terminates_aborts_and_seg\" rel=\"nofollow noreferrer\">Handling terminates, aborts and Segmentation Faults</a>:</p>\n\n<pre><code>#include &lt;signal.h&gt;     // ::signal, ::raise\n#include &lt;boost/stacktrace.hpp&gt;\n\nvoid my_signal_handler(int signum) {\n    ::signal(signum, SIG_DFL);\n    boost::stacktrace::safe_dump_to(\"./backtrace.dump\");\n    ::raise(SIGABRT);\n}\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 5068532, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/h1OYQ.jpg?s=128&g=1", "display_name": "alovaros", "link": "https://stackoverflow.com/users/5068532/alovaros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 50951653, "answer_count": 1, "score": 2, "last_activity_date": 1529508201, "creation_date": 1529507702, "last_edit_date": 1529507870, "question_id": 50951614, "link": "https://stackoverflow.com/questions/50951614/async-safe-writing-functions-for-signal-handler-on-windows", "title": "Async safe writing functions for Signal handler on windows", "body": "<p>I'm trying to write a Signal handler that gets everytime called when my programm crashes and than writes the informations the <code>boost::stacktracer</code> api gives me into a file on my harddrive.\nWriting the handler is no problem as well as crashing my programm isn't.\nBut now I am totally unsure what functions I <em>can</em> use in my handler.\nThe functions I'm going to use needs to be Async safe I get that but I just can't find a list for windows which functions are <em>allowed</em> to use I got a list for <a href=\"http://man7.org/linux/man-pages/man7/signal-safety.7.html\" rel=\"nofollow noreferrer\">Linux</a> which is pretty clear and pretty easy to understand but useless since the most functions are from <code>&lt;unistd.h&gt;</code> and this does not exist in windows or atleast not in VS2017s compiler.\nSince I read that <code>&lt;io.h&gt;</code> is pretty simillar to <code>&lt;unistd.h&gt;</code> I tried to achiev my goal with functions out of this header.</p>\n\n<p>So I use <code>_sopen_s(&amp;fileHandle,\"E:\\\\UslessStuff\\\\stacktracer.txt\",_O_RDWR,_SH_DENYNO,_S_IWRITE);</code></p>\n\n<p>to open a file and</p>\n\n<pre><code>  if(_write(fileHandle,&amp;boost::stacktrace::stacktrace(),boost::stacktrace::stacktrace().size())==-1) {\nswitch(errno) {\n  case EBADF:\n    perror(\"Bad File Discription\");\n    break;\n  case ENOSPC:\n    perror(\"No Space left on Device\");\n    break;\n  case EINVAL:\n    perror(\"Invalid Parameter: Buffer was NULL\");\n    break;\n   default:\n     perror(\"Unexpectet Error\");\n\n\n    break;\n    }\n  }\n</code></pre>\n\n<p>for writing.\nSo I want to no is it <em>okay</em> to use this functions?\nAlso how far can I go with strings in a Signal?\nAs you see I try to get informations from <code>boost::stacktrace::stacktrace()</code> which gives me a perfect result when I use it with <code>cout &lt;&lt; boost::stacktrace::stacktrace()</code> but writes me just 2 RAM addresses in my Textfile when I try to write it like shown above so I think I migth need to <em>extract</em> the string from <code>boost::stacktrace::stacktrace()</code> with creating a  <code>boost::stacktrace::frame fr</code> which would result in <code>fr.source_file().c_str();</code> so it'd give me a <code>std::string</code> back which I probably would need to pack in a <code>char*</code> which really sounds like I shouldn't do it in a Signal</p>\n"}, {"tags": ["c++", "package", "installation", "tesseract", "vcpkg"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 1, "creation_date": 1529516922, "post_id": 50953603, "comment_id": 88906189, "body": "I made the change from x86 to x64 and now it compiles, which is great news. For the second step where you mention choosing &quot;multi-threaded dynamically linked&quot; in the library settings, where in visual studio are the library settings? I can&#39;t find them under any of the drop down menus."}, {"owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 0, "creation_date": 1529524628, "post_id": 50953603, "comment_id": 88909689, "body": "Since in that simple test program I pasted into the original post, the if statement on line 9,  <code>if (api-&gt;Init(NULL, &quot;eng&quot;))</code> is getting triggered which errors, printing out &quot;could not initialize tesseract&quot;.  Once I find out how to enable &quot;multi-threaded dynamically linked&quot; might that solve the problem?"}, {"owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "reply_to_user": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 1, "creation_date": 1529561983, "post_id": 50953603, "comment_id": 88919969, "body": "In your project property page under c++/code Generation /Runtime library choose multi-threaded debug DLL . Hope you will be able to build the executable with the dependency lib files."}, {"owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 1, "creation_date": 1529586704, "post_id": 50953603, "comment_id": 88935089, "body": "I really appreciate the help. I checked and found that &quot; multi-threaded debug DLL&quot; was already selected. The problem seems to be that the call to <code>api-&gt;Init(NULL, &quot;eng&quot;)</code> returns -1 which triggers the if statement, <a href=\"https://i.imgur.com/OFGKzLI.jpg\" rel=\"nofollow noreferrer\">as shown in this image.</a>. I&#39;m not sure if this is  a problem with the English language data or something else."}, {"owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 0, "creation_date": 1529590919, "post_id": 50953603, "comment_id": 88938180, "body": "Also, If I delete that if block and try to run the program I receive <a href=\"https://imgur.com/vlMNA2W.jpg\" rel=\"nofollow noreferrer\">this error</a> on the console window."}, {"owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "edited": false, "score": 0, "creation_date": 1529614437, "post_id": 50953603, "comment_id": 88950535, "body": "I just downloaded the tessdata file from github and stuck it in the directory that tesseract was looking for it in. Hopefully that&#39;s acceptable since tesseract is running fine now. However, I would like to upgrade to tesseract 4.0 for greater OCR accuracy. How could I easily do that,considering I have 3.05.01 currently?"}], "tags": [], "owner": {"reputation": 4650, "user_id": 6755083, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/CVobU.png?s=128&g=1", "display_name": "seccpur", "link": "https://stackoverflow.com/users/6755083/seccpur"}, "is_accepted": true, "score": 3, "last_activity_date": 1529514495, "creation_date": 1529514495, "answer_id": 50953603, "question_id": 50951283, "link": "https://stackoverflow.com/questions/50951283/tesseract-install-using-vcpkg-in-windows-10/50953603#50953603", "title": "Tesseract install using vcpkg in Windows 10", "body": "<p>Looks like your tesseract package has been installed for x64 platform, but your project settings seems to be in x86. Correct that and ensure you choose \"multi-threaded dynamically linked\" in the library settings. If all goes well, MSCV IDE will automatically copy those dependency DLLs to your application directory at runtime.</p>\n"}], "owner": {"reputation": 197, "user_id": 5540309, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a17a32633186e8847d1b05ae5eb9f9bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mrcitrusboots", "link": "https://stackoverflow.com/users/5540309/mrcitrusboots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2229, "favorite_count": 0, "accepted_answer_id": 50953603, "answer_count": 1, "score": 3, "last_activity_date": 1529514495, "creation_date": 1529506828, "last_edit_date": 1529508938, "question_id": 50951283, "link": "https://stackoverflow.com/questions/50951283/tesseract-install-using-vcpkg-in-windows-10", "title": "Tesseract install using vcpkg in Windows 10", "body": "<p><strong>My setup:</strong> Currently I'm working with c++ in visual studio 2017 on Windows 10.</p>\n\n<p><strong>The objective</strong>: To start using tesseract ocr in my basic c++ application.  First, to make sure I'm able to #include the tesseract library and compile and execute a very simple program, I'm trying to run the simple test program below, provided on the official <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/APIExample\" rel=\"nofollow noreferrer\">tesseract project's \"APIExample\" page</a>. </p>\n\n<p><strong>What I've done so far:</strong> Following the advice of <a href=\"https://stackoverflow.com/a/50662383/5540309\">this stack overflow answer</a>, I've ran the <code>vcpkg install tesseract:x64-windows</code> command in the command prompt along with the command <code>.\\vcpkg integrate install</code>. When I run the command <code>vcpkg list</code> I see all of the packages that I installed(shown below in screenshot), but despite this intellisense in visual studio gives me errors saying it can't find the includes to run the aforementioned test project whose code I've posted below. What gives? I've provided a screenshot below of my visual studio setup with the errors and error codes produced for reference.</p>\n\n<pre><code>#include &lt;tesseract/baseapi.h&gt;\n#include &lt;leptonica/allheaders.h&gt;\n\nint main()\n{\n    char *outText;\n\n    tesseract::TessBaseAPI *api = new tesseract::TessBaseAPI();\n    // Initialize tesseract-ocr with English, without specifying tessdata path\n    if (api-&gt;Init(NULL, \"eng\")) {\n        fprintf(stderr, \"Could not initialize tesseract.\\n\");\n        exit(1);\n    }\n\n    // Open input image with leptonica library\n    Pix *image = pixRead(\"/usr/src/tesseract/testing/phototest.tif\");\n    api-&gt;SetImage(image);\n    // Get OCR result\n    outText = api-&gt;GetUTF8Text();\n    printf(\"OCR output:\\n%s\", outText);\n\n    // Destroy used object and release memory\n    api-&gt;End();\n    delete[] outText;\n    pixDestroy(&amp;image);\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MVJUD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MVJUD.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/qgp3h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qgp3h.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "string", "stl", "overloading", "delegating-constructor"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1529506710, "post_id": 50951164, "comment_id": 88900170, "body": "<code>But what would change, if we make a std::string constructor &quot;primary&quot;?</code> What?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1529506759, "post_id": 50951164, "comment_id": 88900214, "body": "I think &quot;primary&quot; is meant to indicate the constructor that calls the delegate."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 2, "creation_date": 1529506997, "post_id": 50951164, "comment_id": 88900364, "body": "@tkausl Regardless of which constructor delegates to which, <code>Foo bar(&quot;&quot;);</code> will call the <code>const char*</code> constructor. Delegation doesn&#39;t impact overload resolution."}, {"owner": {"reputation": 623, "user_id": 2008273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTTvj.jpg?s=128&g=1", "display_name": "ricco19", "link": "https://stackoverflow.com/users/2008273/ricco19"}, "edited": false, "score": 0, "creation_date": 1529507044, "post_id": 50951164, "comment_id": 88900404, "body": "Seems pretty straight forward to me, you&#39;re passing a <code>const char*</code> and it&#39;s using the <code>const char*</code> constructor in both cases. The <code>std::string</code> delegate just gets called immediately in the second case."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529507138, "post_id": 50951164, "comment_id": 88900469, "body": "@Fran&#231;oisAndrieux That could pass for an answer. Especially the <i>Delegation doesn&#39;t impact overload resolution.</i> part."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1529507253, "post_id": 50951164, "comment_id": 88900557, "body": "@Ron Maybe, but I&#39;m not actually sure that&#39;s what the question is asking. Come to think of it, this question may need to be closed as being unclear."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529508099, "post_id": 50951164, "comment_id": 88901104, "body": "not answering your question, but I wouldnt write a <code>std::string</code> and a <code>const char*</code> for every constructor / method that takes a string, but rather provide only the <code>string</code> one and if the user really thinks they need to use <code>const char*</code> they can still create a string first (or go for <code>const char*</code> only and let the user call <code>c_str()</code>)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529508314, "post_id": 50951164, "comment_id": 88901228, "body": "@user463035818 That depends. It seems OP is only interested in the <code>std::string</code>&#39;s <code>c_str()</code>. Having a <code>const char*</code> constructor means not having to construct a temporary <code>std::string</code> when making a <code>Foo</code>. But this example is incomplete as even the <code>const char*</code> constructor doesn&#39;t care about it&#39;s argument. It&#39;s hard to see what the intent is."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1529506792, "creation_date": 1529506792, "answer_id": 50951265, "question_id": 50951164, "link": "https://stackoverflow.com/questions/50951164/c-choosing-a-const-char-vs-stdstring-when-using-delegating-constructo/50951265#50951265", "title": "C++: choosing a `const char *` vs `std::string` when using delegating constructor", "body": "<p>There is no such thing as <em>primary</em> constructor in C++.</p>\n\n<p>What you observe is that the delegated to constructor (<em>target constructor</em>) body is executed first. Then the body of the constructor that delegates (<em>delegating constructor</em>). </p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/initializer_list#Delegating_constructor\" rel=\"nofollow noreferrer\">Delegating constructor</a>:</p>\n\n<blockquote>\n  <p>In this case, the <em>target constructor</em> is selected by overload resolution and executed first, then the control returns to the <em>delegating constructor</em> and its body is executed.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "is_accepted": true, "score": 3, "last_activity_date": 1529514410, "last_edit_date": 1529514410, "creation_date": 1529507069, "answer_id": 50951382, "question_id": 50951164, "link": "https://stackoverflow.com/questions/50951164/c-choosing-a-const-char-vs-stdstring-when-using-delegating-constructo/50951382#50951382", "title": "C++: choosing a `const char *` vs `std::string` when using delegating constructor", "body": "<p><code>\"I never asked for this\"</code> is a <a href=\"http://eel.is/c++draft/lex.string#8\" rel=\"nofollow noreferrer\">string literal</a> which consists of <code>const char</code> elements:</p>\n\n<pre><code>Foo bar (\"I never asked for this\"); // calls Foo (const char *in)\n</code></pre>\n\n<p>Thus, <code>Foo (const char *in)</code> will always get <em>selected</em> by overload resolution <strong>regardless</strong> of the \"order\" in which you declare your constructors.</p>\n\n<p>As seen in your 2nd example,</p>\n\n<pre><code>Foo (const char *in) : Foo(std::string (in))\n</code></pre>\n\n<p>The <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list#Delegating_constructor\" rel=\"nofollow noreferrer\">delegating constructor</a> is selected and will call the <em>target constructor</em>, as selected by the only member of the initialization list.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1529515366, "last_edit_date": 1529515366, "creation_date": 1529514800, "answer_id": 50953690, "question_id": 50951164, "link": "https://stackoverflow.com/questions/50951164/c-choosing-a-const-char-vs-stdstring-when-using-delegating-constructo/50953690#50953690", "title": "C++: choosing a `const char *` vs `std::string` when using delegating constructor", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">Overload Resolution</a> and <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list#Delegating_constructor\" rel=\"nofollow noreferrer\">Constructor Delegation</a> are two completely different things that do not influence each other at all.</p>\n\n<p>Overload Resolution avoids implicit conversions when possible.</p>\n\n<p>A string literal like <code>\"I never asked for this\"</code> is a <code>const char[]</code>, which decays to <code>const char *</code>.  That is an exact match for your <code>const char *</code> constructor, so that is the one that gets called.  Calling your <code>std::string</code> constructor with a string literal as input would require an implicit conversion, as the compiler would have construct a temporary <code>std::string</code> object to bind to the <code>std::string const &amp;</code> reference.</p>\n\n<p>Had you written this code instead:</p>\n\n<pre><code>Foo bar (std::string(\"I never asked for this\"));\n</code></pre>\n\n<p>Or this:</p>\n\n<pre><code>std::string str = \"I never asked for this\";\nFoo bar (str);\n</code></pre>\n\n<p>Then the <code>std::string const &amp;</code> constructor would be called instead of the <code>const char *</code> constructor, as there is no implicit conversion from <code>std::string</code> to <code>const char *</code>.</p>\n\n<p>How constructors delegate to each other is an <em>implementation detail</em> AFTER the compiler decides <em>which</em> constructor to call.</p>\n"}], "owner": {"reputation": 152, "user_id": 6237789, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/cfpXf.png?s=128&g=1", "display_name": "trexxet", "link": "https://stackoverflow.com/users/6237789/trexxet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 1, "accepted_answer_id": 50951382, "answer_count": 3, "score": 1, "last_activity_date": 1543722803, "creation_date": 1529506494, "last_edit_date": 1543722803, "question_id": 50951164, "link": "https://stackoverflow.com/questions/50951164/c-choosing-a-const-char-vs-stdstring-when-using-delegating-constructo", "title": "C++: choosing a `const char *` vs `std::string` when using delegating constructor", "body": "<p>Consider the following:</p>\n\n<pre><code>class Foo {\npublic:\n    Foo (const char *in) {\n        printf (\"C string constructor called\\n\");\n    }\n    Foo (std::string const &amp;in) : Foo(in.c_str()) {\n        printf (\"C++ string constructor called\\n\");\n    }\n};\nFoo bar (\"I never asked for this\");\n//C string constructor called\n</code></pre>\n\n<p>So, a constant <code>string</code> is treated as a <code>const char *</code> one.</p>\n\n<p>But what would change, if we make a <code>std::string</code> constructor \"primary\"?</p>\n\n<p>Can we expect that an <code>std::string</code> object would be created and passed to corresponding constructor without calling a C-string related one?</p>\n\n<pre><code>class Foo {\npublic:\n    Foo (std::string const &amp;in) {\n        printf (\"C++ string constructor called\\n\");\n    }\n    Foo (const char *in) : Foo(std::string (in)) {\n        printf (\"C string constructor called\\n\");\n    }\n};\nFoo bar (\"I never asked for this\");\n//C++ string constructor called\n//C string constructor called\n</code></pre>\n\n<p>Again, the C-string constructor was called <em>first</em>.</p>\n\n<p>Is this behavior described in C++ standard, or is it compiler-related?</p>\n\n<p>Would this work the same way for e.g. templates or overloaded functions?</p>\n\n<p>I compiled with GCC 7.3.0 (MSYS2 x64).</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1529506369, "post_id": 50951073, "comment_id": 88899904, "body": "Do you want the Windows 10 Settings app or the old Control Panel pages for the same thing?"}, {"owner": {"reputation": 13, "user_id": 8340215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e435d59d0d72b9d220f72cf2ab3495?s=128&d=identicon&r=PG&f=1", "display_name": "James Njoroge", "link": "https://stackoverflow.com/users/8340215/james-njoroge"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1529506475, "post_id": 50951073, "comment_id": 88899989, "body": "windows 7 version.."}], "answers": [{"comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1529508124, "post_id": 50951351, "comment_id": 88901118, "body": "Why would you wrap a single function call in another function, when you don&#39;t do anything except pass the exact same arguments in exact same order? IOW, what is the purpose of having <code>launch</code> function instead of just calling the function everybody else would expect directly?"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1529509061, "post_id": 50951351, "comment_id": 88901728, "body": "The OP could actually resort to a different implementation of the <code>launch</code> function, e.g. instantiate a <code>QProcess</code> object and call <code>start</code> on it, maybe connect its signals to some slots,  etc. or simply use the other overload of <code>QProcess::startDetached</code>. In my very short answer I gave the simplest example, just to show the core concept, which is expressed at the very beginning of it: see how to launch programs through the CL, then use Qt to launch them programmatically."}, {"owner": {"reputation": 13, "user_id": 8340215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e435d59d0d72b9d220f72cf2ab3495?s=128&d=identicon&r=PG&f=1", "display_name": "James Njoroge", "link": "https://stackoverflow.com/users/8340215/james-njoroge"}, "edited": false, "score": 0, "creation_date": 1529512794, "post_id": 50951351, "comment_id": 88903982, "body": "Great. Works like a charm."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": false, "score": 5, "last_activity_date": 1529507883, "last_edit_date": 1529507883, "creation_date": 1529507002, "answer_id": 50951351, "question_id": 50951073, "link": "https://stackoverflow.com/questions/50951073/how-to-launch-microsoft-windows-control-panel-from-qt/50951351#50951351", "title": "How to launch Microsoft windows&#39; control panel from Qt", "body": "<p>First, you could learn how to launch control panel applets using the command line (e.g. take a look at <a href=\"https://support.microsoft.com/en-us/help/192806/how-to-run-control-panel-tools-by-typing-a-command\" rel=\"nofollow noreferrer\">this</a>). Then issue the same commands from a Qt app using the <a href=\"http://doc.qt.io/qt-5/qprocess.html\" rel=\"nofollow noreferrer\"><code>QProcess</code> class</a>:</p>\n\n<pre><code>#include &lt;QProcess&gt;\nvoid launch(QString command, QStringList arguments)\n{\n    QProcess::startDetached(command, arguments);\n}\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    launch(\"control\", QStringList() &lt;&lt; \"printers\");\n\n    return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8340215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50e435d59d0d72b9d220f72cf2ab3495?s=128&d=identicon&r=PG&f=1", "display_name": "James Njoroge", "link": "https://stackoverflow.com/users/8340215/james-njoroge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529507883, "creation_date": 1529506226, "last_edit_date": 1529506447, "question_id": 50951073, "link": "https://stackoverflow.com/questions/50951073/how-to-launch-microsoft-windows-control-panel-from-qt", "title": "How to launch Microsoft windows&#39; control panel from Qt", "body": "<p>I would like to create shortcuts in my Windows-Qt application to open the control panel items : devices and printers and network and sharing and maybe the control panel itself .I am yet to find a solution (windows 7 version).</p>\n"}, {"tags": ["c++", "cuda", "g++", "nvcc"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1529506309, "post_id": 50951036, "comment_id": 88899855, "body": "Compile with MSVC the object formats are tool-chain specific.  <code>LNK1143</code> is from the MS linker, it can&#39;t understand the format of the obj file produced by the other tool-chain.  ps why remove <i>&quot;It is the main.obj (the file compiled by my g++ (MinGW_w64)) that is causing this error.&quot;</i> ?"}, {"owner": {"reputation": 161, "user_id": 9230772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sBaIy.jpg?s=128&g=1", "display_name": "dtn34-", "link": "https://stackoverflow.com/users/9230772/dtn34"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1529506627, "post_id": 50951036, "comment_id": 88900105, "body": "@RichardCritten  <i>why remove &quot;It is the main.obj (the file compiled by my g++ (MinGW_w64)) that is causing this error.&quot; ?</i> I didn&#39;t want to say anything myself. And thanks for replying. I will try that and report back."}, {"owner": {"reputation": 161, "user_id": 9230772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sBaIy.jpg?s=128&g=1", "display_name": "dtn34-", "link": "https://stackoverflow.com/users/9230772/dtn34"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1529507044, "post_id": 50951036, "comment_id": 88900401, "body": "@RichardCritten An extra question, is there any way of doing this without using MSVC? Any way of doing it just from terminals? The way it can be done from my Ubuntu? If not, then please explain why."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1529508340, "post_id": 50951036, "comment_id": 88901247, "body": "<i>&quot;please explain why&quot;</i>: <i>&quot;object formats are tool-chain specific&quot;</i>.  Can it be done from Ubuntu - that should be asked in another question."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1529509713, "post_id": 50951036, "comment_id": 88902141, "body": "well you removed the only clue to what&#39;s going on. You can&#39;t compile with MinGW and expect it to link with MSVC. They have incompatible object file formats."}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 9230772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sBaIy.jpg?s=128&g=1", "display_name": "dtn34-", "link": "https://stackoverflow.com/users/9230772/dtn34"}, "is_accepted": true, "score": 3, "last_activity_date": 1529513954, "last_edit_date": 1529513954, "creation_date": 1529509077, "answer_id": 50952074, "question_id": 50951036, "link": "https://stackoverflow.com/questions/50951036/main-obj-fatal-error-lnk1143-invalid-or-corrupt-file-no-symbol-for-comdat-se/50952074#50952074", "title": "main.obj : fatal error LNK1143: invalid or corrupt file: no symbol for COMDAT section 0x6", "body": "<p>As pointed out by @RichardCritten, </p>\n\n<blockquote>\n  <p>the files should be compiled with MSVC as the object formats are\n  tool-chain specific. LNK1143 is from the MS linker and it can't\n  understand the format of the obj files produced by the other\n  tool-chain.</p>\n</blockquote>\n\n<p>So object files created by MinGW's g++ can't be linked with a cuda program's object file with MSVC</p>\n"}], "owner": {"reputation": 161, "user_id": 9230772, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sBaIy.jpg?s=128&g=1", "display_name": "dtn34-", "link": "https://stackoverflow.com/users/9230772/dtn34"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2263, "favorite_count": 0, "accepted_answer_id": 50952074, "answer_count": 1, "score": 3, "last_activity_date": 1534263287, "creation_date": 1529506124, "last_edit_date": 1534263287, "question_id": 50951036, "link": "https://stackoverflow.com/questions/50951036/main-obj-fatal-error-lnk1143-invalid-or-corrupt-file-no-symbol-for-comdat-se", "title": "main.obj : fatal error LNK1143: invalid or corrupt file: no symbol for COMDAT section 0x6", "body": "<p>I am on a Windows 10 machine, I have 2 files, main.cpp and cuda.cu (I have built this project on Ubuntu successfully I am trying to get it to build on Windows). I compiled both of them to make object files of 64 bit architecture. I have MS Visual Studio 2010 currently installed and I know it is too old. I can install 2015 if you think that is causing this (but I don't think so).</p>\n\n<p>When I try to link the two files using the command</p>\n\n<pre><code>nvcc main.obj cuda.obj\n</code></pre>\n\n<p>I get this error:-</p>\n\n<pre><code>main.obj : fatal error LNK1143: invalid or corrupt file: no symbol for COMDAT section 0x6\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["c++", "libuv"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1529507359, "post_id": 50950988, "comment_id": 88900623, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/283375/detecting-tcp-client-disconnect\">Detecting TCP Client Disconnect</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1529565564, "post_id": 50950988, "comment_id": 88921843, "body": "@FantasticMrFox: Does that work for libuv as well?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1529566529, "post_id": 50950988, "comment_id": 88922408, "body": "@MSalters My guess is yes. the answer here <a href=\"https://stackoverflow.com/a/17665015/1294207\">stackoverflow.com/a/17665015/1294207</a> is pretty simply, write a bunch and expect to eventually receive a <code>ECONNRESET</code> error. This is a TCP problem, not a wrapping lib problem. So the TCP_handle of libuv will likely exhibit the same behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 9359469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caaedafd756f86efda6b482ada1cb7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Grutt", "link": "https://stackoverflow.com/users/9359469/grutt"}, "is_accepted": false, "score": 1, "last_activity_date": 1530620300, "creation_date": 1530620300, "answer_id": 51154480, "question_id": 50950988, "link": "https://stackoverflow.com/questions/50950988/the-right-way-to-detect-a-tcp-disconnection-with-libuv/51154480#51154480", "title": "The right way to detect a TCP disconnection with libuv", "body": "<p>@MSalters, I finally found the answer. The libuv callback function of \"uv_read_start\" does not return 0 (nread != 0) when the connexion is closed, it returns UV_EOF. In my configuration UV_EOF is -4095. The disconnection happens when nread == UV_EOF. I think it is possible to make a posix read on the FD associated to the handle, but this is not pretty at all (and much more complicated because the IOs are asynchronous...).</p>\n"}], "owner": {"reputation": 21, "user_id": 9359469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caaedafd756f86efda6b482ada1cb7e2?s=128&d=identicon&r=PG&f=1", "display_name": "Grutt", "link": "https://stackoverflow.com/users/9359469/grutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 883, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1530620300, "creation_date": 1529505985, "question_id": 50950988, "link": "https://stackoverflow.com/questions/50950988/the-right-way-to-detect-a-tcp-disconnection-with-libuv", "title": "The right way to detect a TCP disconnection with libuv", "body": "<p>In the server part, how could i detect that an allready connected client(TCP stream) has just disconnect?</p>\n"}, {"tags": ["c++", "hex", "decimal", "data-conversion"], "comments": [{"owner": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 0, "creation_date": 1529505070, "post_id": 50950661, "comment_id": 88899028, "body": "Just stick <code>&quot;0x&quot;</code> string on the front... wait, do you mean for display output? What data type are you expecting for the result?"}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "edited": false, "score": 0, "creation_date": 1529505151, "post_id": 50950661, "comment_id": 88899081, "body": "How do you output your variables? Via a serial interface, or debug logs, or a display or something different?"}, {"owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "reply_to_user": {"reputation": 45516, "user_id": 838807, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/372d495ca83f81cfadb782894ee41b17?s=128&d=identicon&r=PG", "display_name": "musefan", "link": "https://stackoverflow.com/users/838807/musefan"}, "edited": false, "score": 0, "creation_date": 1529505263, "post_id": 50950661, "comment_id": 88899146, "body": "@musefan These values are computed during runtime. So 45 is the decimal value that I want people to see from the output. These are all outputted as unsigned chars."}, {"owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "reply_to_user": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "edited": false, "score": 0, "creation_date": 1529505267, "post_id": 50950661, "comment_id": 88899148, "body": "@izlin the outupt comes through a serial interface through USB"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1529505580, "post_id": 50950661, "comment_id": 88899339, "body": "&quot; My output is the three decimal numbers 45, 27, 91&quot;   so when you get 4A, how does that work?  0x45 and 45 are not the same"}, {"owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1529505592, "post_id": 50950661, "comment_id": 88899347, "body": "@Ron I don&#39;t think I can use streams as the hex characters are packed into a response which is then sent through USB, they are not directly output from my code. What I mean is that if I have the decimal number 45 which I want to put out through the USB wire. To show this I have to output the number 69 which is 0x45"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529505624, "post_id": 50950661, "comment_id": 88899374, "body": "please show your code. converting 27 to 0x27 only makes sense in a string representation, because decimal 27 is not the same as hex 27, so maybe you simply have to prepend &quot;0x&quot; to your output. However, I wonder where you got the 27 from. Do you calculate it yourself? You dont need to do that, but simply take the original value and use an output manipulator (<code>std::hex</code>)"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 2, "creation_date": 1529565694, "post_id": 50950661, "comment_id": 88921924, "body": "@UKMonkey: The old folks will know this format as BCD, Binary Coded Decimal.  When you get 0x4A hex, you convert it to 0x74 BCD."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1529579709, "post_id": 50950661, "comment_id": 88930553, "body": "@MSaltersThanks - learn something new everyday, AND nice to feel young again! :)"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529505936, "post_id": 50950921, "comment_id": 88899604, "body": "i am a bit confused... why all this voodoo instead of <code>std::cout &lt;&lt; &quot;0x&quot; &lt;&lt; 45;</code> ?"}, {"owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529506035, "post_id": 50950921, "comment_id": 88899667, "body": "@user463035818 If I understood the question right he needs to send the value via a serial interface. That&#39;s why the OP asked to convert 45 to 69 that you can see 0x45 on the serial stream."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529506077, "post_id": 50950921, "comment_id": 88899696, "body": "still dont get it completely but sounds reasonable"}, {"owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "edited": false, "score": 0, "creation_date": 1529506108, "post_id": 50950921, "comment_id": 88899725, "body": "Hi, thank you this is exactly what I was looking for! Sorry if I didn&#39;t word it properly"}], "tags": [], "owner": {"reputation": 1820, "user_id": 3849158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/q1Gcg.png?s=128&g=1", "display_name": "izlin", "link": "https://stackoverflow.com/users/3849158/izlin"}, "is_accepted": true, "score": 2, "last_activity_date": 1529505789, "creation_date": 1529505789, "answer_id": 50950921, "question_id": 50950661, "link": "https://stackoverflow.com/questions/50950661/converting-a-decimal-value-into-a-hex-value-with-the-same-visible-representation/50950921#50950921", "title": "Converting a decimal value into a hex value with the same visible representation", "body": "<p>If I understand you correctly you want something like this:</p>\n\n<pre><code>unsigned char convert(unsigned char in) {\n    return ((in % 10) * 0x01) + ((in / 10) * 0x10);\n}\n\nint main()\n{\n    unsigned char a = 45;\n    printf (\"0x%02X\", convert(a)); // prints \"0x45\"\n    return 0;\n}\n</code></pre>\n\n<p>It converts the decimal value <code>45</code> to <code>0x45</code> which is equivalent to decimal <code>69</code>.\nNote that the convert function is not really fast on microcontrollers because of the division <code>/</code>.</p>\n\n<p>It can only print decimal values from 0 to 99 because there are only two digits to use.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 9962950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f1cedb2c5b6d4c79443ac1107b4a76?s=128&d=identicon&r=PG", "display_name": "mostawk", "link": "https://stackoverflow.com/users/9962950/mostawk"}, "is_accepted": false, "score": 1, "last_activity_date": 1529506135, "creation_date": 1529506135, "answer_id": 50951037, "question_id": 50950661, "link": "https://stackoverflow.com/questions/50950661/converting-a-decimal-value-into-a-hex-value-with-the-same-visible-representation/50951037#50951037", "title": "Converting a decimal value into a hex value with the same visible representation", "body": "<p>Though I think it is not a good idea to convert 45 to 0x45, here is the method:</p>\n\n<pre><code>int dec = 45;\nint hex = 0;\nint i = 1;\nwhile(dec/10 != 0){\n    int digit = dec%10;\n    hex += digit*i;\n    i *=16;\n}\ncout &lt;&lt; hex &lt;&lt; endl;// if you convert \"hex\" to hexadecimal, it would be 0x45\n</code></pre>\n"}], "owner": {"reputation": 614, "user_id": 2936113, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14f8658e470eb23b9f316f3268165fe7?s=128&d=identicon&r=PG&f=1", "display_name": "cdn", "link": "https://stackoverflow.com/users/2936113/cdn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 50950921, "answer_count": 2, "score": 0, "last_activity_date": 1529506135, "creation_date": 1529504994, "question_id": 50950661, "link": "https://stackoverflow.com/questions/50950661/converting-a-decimal-value-into-a-hex-value-with-the-same-visible-representation", "title": "Converting a decimal value into a hex value with the same visible representation", "body": "<p>I am working on a microcontroller which only outputs number in a hexadecimal representation. I have data which is calculated in decimal and is meant for a human to read and interpret. My output is the three decimal numbers 45, 27, and 91, when I output these I get 0x2D, 0x1B, and 0x5B. What operation can I perform to convert 45 to 0x45, 27 to 0x27 and so on.</p>\n"}, {"tags": ["c++", "c++11", "visual-studio-2015", "visual-studio-2013", "stl"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1529505552, "post_id": 50950659, "comment_id": 88899321, "body": "Why do you place <code>double(double &amp;)</code> function into <code>double(double)</code>? Also, why do you use <code>bind</code> instead of lambda? Lambdas are much better, easier to debug and compile to better code."}, {"owner": {"reputation": 169, "user_id": 4750437, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c79c2655f86c60b0e9f16f3a8db5066?s=128&d=identicon&r=PG&f=1", "display_name": "Canardini", "link": "https://stackoverflow.com/users/4750437/canardini"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529506873, "post_id": 50950659, "comment_id": 88900282, "body": "The only reason I used bind is because it worked in VS2013... Of course , if there is a better way of doing it, I m listening"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529509263, "post_id": 50950659, "comment_id": 88901842, "body": "I&#39;m pretty sure this was supported by VS2013 as well: <code>... oFunc = [this](double &amp;x){ return myfunction(x); };</code>. I can turn this into an answer if you want."}, {"owner": {"reputation": 169, "user_id": 4750437, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c79c2655f86c60b0e9f16f3a8db5066?s=128&d=identicon&r=PG&f=1", "display_name": "Canardini", "link": "https://stackoverflow.com/users/4750437/canardini"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529611271, "post_id": 50950659, "comment_id": 88949228, "body": "An answer explaining why it works in VS2013, plus a better way to write it will be welcome"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529623478, "post_id": 50950659, "comment_id": 88953233, "body": "why what works? Lambdas or your old code?"}, {"owner": {"reputation": 169, "user_id": 4750437, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c79c2655f86c60b0e9f16f3a8db5066?s=128&d=identicon&r=PG&f=1", "display_name": "Canardini", "link": "https://stackoverflow.com/users/4750437/canardini"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1529677988, "post_id": 50950659, "comment_id": 88975076, "body": "The code that I posted works in VS2013, but not in VS2015. A lambda version would be additional to complete the answer ."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 5, "last_activity_date": 1529505943, "last_edit_date": 1529505943, "creation_date": 1529505668, "answer_id": 50950878, "question_id": 50950659, "link": "https://stackoverflow.com/questions/50950659/c-stdbind-to-stdfunction-what-went-wrong-in-vs2015/50950878#50950878", "title": "C++ std::bind to std::function, what went wrong in VS2015?", "body": "<p>Function signatures do not match: <code>double(double)</code> vs <code>double(double&amp;)</code>. Hence the compilation error. One of these needs to be changed, e.g.:</p>\n\n<pre><code>double MyClass::myfunction(double inX){\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612437470, "post_id": 51002580, "comment_id": 116769310, "body": "Lambdas are fine for one line functions. What do you do when you want a function with a lot more code in it? Have a lambda that simply calls another function? If you are going to do that you might as well use std::bind. Or maybe put the full function in the lambda. That&#39;s extremely confusing, having a function defined inside another function!"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612438804, "post_id": 51002580, "comment_id": 116769866, "body": "@AlastairG &quot;If you are going to do that you might as well use std::bind.&quot; Why? As this (and numerous other similar questions, not to mention general experience) show, the better approach is &quot;If you have std::bind you might as well replace it lambda&quot;. Lambda approach is easier to read and understand, often shorter, generates better code, avoids conformance bugs and produces sane error messages (and faster to compile and more flexible to boot). There is a really small niche there std::bind is still useful (and even that is arguable)."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612456007, "post_id": 51002580, "comment_id": 116778315, "body": "Whenever I have read code, in any language, with lambdas, it is only readable if you can put the lambda on a very few lines and none of the code needs any context. A more complex class function using member variables is very hard to write as a lambda without being very unreadable. Or at least using any indentation/style that I have ever been asked to code to. Essentially I find lambdas very hard or impossible to read, especially if there is any complexity to them. You are basically writing a function inside a function call! A simple call like `RegisterForEventX(my_callback) is very readable."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612456264, "post_id": 51002580, "comment_id": 116778428, "body": "However, a call like <code>OnEventX({int i; for (i = 0; i &lt; size; i++) { etc. etc.</code> is completely unreadable, and if it has many levels (2 or more) of indentation on top of however many levels of indentation there already are when the call is made then the code is even more of a mess. I am looking at examples from my code where I use std::bind and I cannot see how I could possible implement the 100 line function (with switch statement) that gets called, as a readable lambda."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612459918, "post_id": 51002580, "comment_id": 116780242, "body": "@AlastairG As I said, the solution involving lambda is -- among numerous over advantages -- shorter and more readable that the std::bind one. Compare them yourself. It&#39;s about 20% shorter and easily fits on the single line (not that the std::bind version couldn&#39;t be made shorter, but that&#39;s not the point). I don&#39;t get where your idea of a 100-line lambda function is coming from."}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 0, "creation_date": 1612709924, "post_id": 51002580, "comment_id": 116845906, "body": "I realise now that you are just using the lambda to call a single function rather than implementing the function in its entirety in the function. Doesn&#39;t that add an extra layer of function call though, thus making it less efficient? With std::bind you generate a function pointer that can be called directly. With your lambda you generate a function pointer that calls another function. An extra stack frame."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 1, "creation_date": 1612783372, "post_id": 51002580, "comment_id": 116865256, "body": "@AlastairG std::bind doesn&#39;t generate a function pointer. It generates &quot;bind expression&quot; of unspecified type. It is at best jsut a functor with extra stack frame, but usually it&#39;s much worse, since all the TMP makes it opaque to the compiler. Lambdas, on the other hand, are optimized rather well by the compilers. Note that there is no way to avoid the additional indirection for the case like in OP in general case (you need to store this pointer somewhere), but lambda still gives much better codegen: <a href=\"https://godbolt.org/z/bj8Wff\" rel=\"nofollow noreferrer\">godbolt.org/z/bj8Wff</a>.  Btw, clang is able to optimize it out completely, impressive!"}, {"owner": {"reputation": 3460, "user_id": 526477, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/eb2015e67fa3c1d484771ea44d93a639?s=128&d=identicon&r=PG", "display_name": "AlastairG", "link": "https://stackoverflow.com/users/526477/alastairg"}, "edited": false, "score": 1, "creation_date": 1612870057, "post_id": 51002580, "comment_id": 116895634, "body": "Very convincing. Thankyou for taking the time to explain it. I really appreciate it."}], "tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1529767604, "creation_date": 1529767604, "answer_id": 51002580, "question_id": 50950659, "link": "https://stackoverflow.com/questions/50950659/c-stdbind-to-stdfunction-what-went-wrong-in-vs2015/51002580#51002580", "title": "C++ std::bind to std::function, what went wrong in VS2015?", "body": "<p>Your function takes its argument by reference (<code>double &amp;</code>) while your are trying to assign it to the function with signature that takes by value (<code>double</code>).</p>\n\n<p>This has compiled in VS2013 most likely due to conformance bugs (maybe some weird interaction with non-const ref to temporary MSVC extension). Basically it's not a valid C++ code. VS2015 is leagues ahead of previous VSes (VS2017 is even more so) in terms of standard support and conformance so this faulty code is no longer compiling.</p>\n\n<p>Anyway, std::bind is almost entirely obsoleted by lambdas, which should be supported by VS2010+. They produce better code, better warnings/errors, easier to write and debug.</p>\n\n<p>For example, your code could'be rewritten like this:</p>\n\n<p><code>std::function&lt;double(double)&gt; oFunc = [this](double x){ return myfunction(x); };</code></p>\n\n<p>Or like this if you actually want to pass by reference:</p>\n\n<p><code>std::function&lt;double(double &amp;)&gt; oFunc = [this](double &amp;x){ return myfunction(x); };</code></p>\n\n<p>Notice how shorter and simpler it is.</p>\n"}], "owner": {"reputation": 169, "user_id": 4750437, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c79c2655f86c60b0e9f16f3a8db5066?s=128&d=identicon&r=PG&f=1", "display_name": "Canardini", "link": "https://stackoverflow.com/users/4750437/canardini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 51002580, "answer_count": 2, "score": 0, "last_activity_date": 1529767604, "creation_date": 1529504982, "last_edit_date": 1529516137, "question_id": 50950659, "link": "https://stackoverflow.com/questions/50950659/c-stdbind-to-stdfunction-what-went-wrong-in-vs2015", "title": "C++ std::bind to std::function, what went wrong in VS2015?", "body": "<p>I was a user of VS2013 and I often use initialization as follows and it was working like a charm:</p>\n\n<pre><code>MyClass::MyClass myRoutine(){\n    std::function&lt;double(double)&gt; oFunc = std::bind(&amp;Myclass::myfunction, this, std::placeholders::_1);\n}\n\nMyClass::MyClass myfunction(double &amp; inX){\n    return 0;\n}\n</code></pre>\n\n<p>I decided to upgrade to VS2015, but the compiler reports errors:</p>\n\n<blockquote>\n  <p>error C2440: 'initializing': cannot convert from 'std::_Binder&lt;std::_Unforced,double (__thiscall MyClass::* )(double &amp;),MyClass *const ,const std::_Ph&lt;1> &amp;>' to 'std::function&lt;double (double)>'</p>\n</blockquote>\n\n<p>What happened?</p>\n"}, {"tags": ["c++", "opengl", "glfw", "framebuffer"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529511871, "post_id": 50950559, "comment_id": 88903485, "body": "This is not the complete code, right? For example, where do you compile the shaders? Also, <code>glGetError()</code> will not catch all errors, for FrameBuffers use <code>glCheckFramebufferStatus</code>"}, {"owner": {"reputation": 478, "user_id": 5446815, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2a57abf3b2d1ba10b18f2557afe339a2?s=128&d=identicon&r=PG&f=1", "display_name": "Matrefeytontias", "link": "https://stackoverflow.com/users/5446815/matrefeytontias"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1529512161, "post_id": 50950559, "comment_id": 88903653, "body": "As I said, I didn&#39;t include all the setup code since it&#39;s several dozen lines of creating, binding and locating various stuff - not really interesting. I can edit to add it if needed. And good call, I&#39;ll try and catch framebuffer errors that way, if any."}], "owner": {"reputation": 478, "user_id": 5446815, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2a57abf3b2d1ba10b18f2557afe339a2?s=128&d=identicon&r=PG&f=1", "display_name": "Matrefeytontias", "link": "https://stackoverflow.com/users/5446815/matrefeytontias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529505224, "creation_date": 1529504714, "last_edit_date": 1529505224, "question_id": 50950559, "link": "https://stackoverflow.com/questions/50950559/call-to-gldrawelements-breaks-display-on-some-gpus", "title": "Call to glDrawElements breaks display on some GPUs?", "body": "<p>I'm working on a 3D PBR engine along with some colleagues (OpenGL 3.3 + GLFW3 and ImGui), and we have a peculiar error : the application enters its drawing loop normally and gives no OpenGL error whatsoever (as shown by extensive use of <code>glCheckError()</code>), but the screen is completely blank. The peculiar part is that this only happens on my colleagues' computer that uses an Nvidia GeForce GTX 1060 as its graphic cards (2 of my friends have the same exact computer).</p>\n\n<p>After some investigation, it turns out that this error is triggered by a function that is called a single time before the main loop. Long story short, it renders a quad to a texture bound via a framebuffer using a couple shaders. I narrowed down the problem to the <code>glDrawElements</code> call ; on those computers, not changing anything except commenting out this line fixes the display (at the cost of the texture displaying garbage instead of the expected result of the draw call), whereas all of the other computers run the app fine even with the line uncommented.</p>\n\n<p>The culprit function is as follows :</p>\n\n<pre><code>/**\n * Returns a texture identifier filled with a precomputed irradiance map calculated\n * from a provided, already set up-environment map\n */\nGLuint precomputeIrradianceMap(GLuint envMapId)\n{\n    std::cerr &lt;&lt; \"Precomputing irradiance map ... \" &lt;&lt; std::endl;\n\n    GLuint irradianceVAO, irradianceVBO, irradianceMap,\n        irradianceVertShader, irradianceFragShader, irradianceProgram, captureFBO,\n        captureRBO;\n    GLint aPos_location, env_map;\n\n    glGenVertexArrays(1, &amp;irradianceVAO);\n    glBindVertexArray(irradianceVAO);\n    glGenBuffers(1, &amp;irradianceVBO);\n    glBindBuffer(GL_ARRAY_BUFFER, irradianceVBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(quad_vertices), quad_vertices, GL_STATIC_DRAW);\n\n    glGenFramebuffers(1, &amp;captureFBO);\n    glGenRenderbuffers(1, &amp;captureRBO);\n\n    glBindFramebuffer(GL_FRAMEBUFFER, captureFBO);\n    glBindRenderbuffer(GL_RENDERBUFFER, captureRBO);\n    glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT24, 320, 320);\n    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, captureRBO);\n\n    checkGLerror();\n\n    glGenTextures(1, &amp;irradianceMap);\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, irradianceMap);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA16F, 320, 320, 0, GL_RGBA, GL_FLOAT, NULL);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);\n\n    glBindTexture(GL_TEXTURE_2D, envMapId);\n\n    checkGLerror();\n\n    irradianceVertShader = createShaderFromSource(GL_VERTEX_SHADER, \"shaders/irradiance_vert.glsl\");\n    irradianceFragShader = createShaderFromSource(GL_FRAGMENT_SHADER, \"shaders/irradiance_frag.glsl\");\n\n    irradianceProgram = glCreateProgram();\n    glAttachShader(irradianceProgram, irradianceVertShader);\n    glAttachShader(irradianceProgram, irradianceFragShader);\n    printShaderLog(irradianceVertShader);\n    printShaderLog(irradianceFragShader);\n    glLinkProgram(irradianceProgram);\n\n    glUseProgram(irradianceProgram);\n\n    checkGLerror();\n\n    env_map = glGetUniformLocation(irradianceProgram, \"environmentMap\");\n    aPos_location = glGetAttribLocation(irradianceProgram, \"aPos\");\n    glEnableVertexAttribArray(aPos_location);\n    checkGLerror();\n    glVertexAttribPointer(aPos_location, 3, GL_FLOAT, GL_FALSE, 0, (void *) 0);\n\n    glUniform1i(env_map, 0);\n\n    checkGLerror();\n\n    glViewport(0, 0, 320, 320);\n    glBindFramebuffer(GL_FRAMEBUFFER, captureFBO);\n\n    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, irradianceMap, 0);\n\n    checkGLerror();\n\n    glClearDepth(1.f);\n    glClearColor(0.f, 0.f, 0.f, 1.f);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    checkGLerror();\n\n    // This is the culprit\n    // glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, quad_indices);\n\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    glBindRenderbuffer(GL_RENDERBUFFER, 0);\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n\n    checkGLerror();\n\n    // glDisableVertexAttribArray(aPos_location);\n    glDeleteShader(irradianceVertShader);\n    glDeleteShader(irradianceFragShader);\n    glDeleteProgram(irradianceProgram);\n    glDeleteFramebuffers(1, &amp;captureFBO);\n    glDeleteRenderbuffers(1, &amp;captureRBO);\n    glDeleteBuffers(1, &amp;irradianceVBO);\n    glDeleteVertexArrays(1, &amp;irradianceVAO);\n\n    checkGLerror();\n\n    std::cerr &lt;&lt; \"... done \" &lt;&lt; std::endl;\n\n    return irradianceMap;\n}\n</code></pre>\n\n<p>You can safely replace <code>checkGLerror()</code> by <code>std::cerr &lt;&lt; glCheckError() &lt;&lt; std::endl</code>. As I said before, there is no OpenGL error whatsoever, all the shaders compile fine, and this only breaks on computers equipped with an Nvidia GeForce GTX 1060.</p>\n\n<p>The rest of the code is mostly setting up VAOs, VBOs and the like, and the render loop is as follows :</p>\n\n<pre><code>while (!glfwWindowShouldClose(window))\n{\n    glfwGetFramebufferSize(window, &amp;display_w, &amp;display_h);\n    float newRatio = (float)display_w / display_h;\n    if(ratio != newRatio)\n    {\n        ratio = newRatio;\n        setAspectRatio(p, ratio);\n        invP = p.inverse();\n        glViewport(0, 0, display_w, display_h);\n    }\n\n    ImGui_ImplGlfwGL3_NewFrame();\n\n    // Rendering + OpenGL rendering\n    // Draw the skybox, then the model\n    ImGui::Begin(\"Physical parameters\", NULL, ImGuiWindowFlags_AlwaysAutoResize);\n    ImGui::SliderFloat(\"Dielectric specularity\", &amp;ds, 0.f, 1.f, \"%.3f\");\n    ImGui::SliderFloat(\"Light intensity\", &amp;l0, 0.f, 10.f, \"%.2f\");\n    ImGui::Checkbox(\"Use irradiance map as skybox\", &amp;skyOrIrradiance);\n    ImGui::Checkbox(\"Debug draw irradiance map\", &amp;debugDraw);\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, skyOrIrradiance ? irradianceTexture : skybox_texture);\n    ImGui::End();\n    Matrix4f v = camera-&gt;getMatrix(), invV = v.inverse();\n\n    // glClearColor(0.45f, 0.55f, 0.60f, 1.00f);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    glBindVertexArray(vertex_array_objs[0]);\n    glUseProgram(skybox_program);\n    glUniformMatrix4fv(skybox_v_location, 1, GL_FALSE, (const GLfloat *) invV.data());\n    glUniformMatrix4fv(skybox_p_location, 1, GL_FALSE, (const GLfloat *) invP.data());\n    glDisable(GL_DEPTH_TEST);\n    glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, quad_indices);\n\n    glBindVertexArray(vertex_array_objs[1]);\n    glUseProgram(program);\n\n    glUniformMatrix4fv(mv_location, 1, GL_FALSE, (const GLfloat *) v.data());\n    glUniformMatrix4fv(p_location, 1, GL_FALSE, (const GLfloat *)p.data());\n    glUniform1f(uDS_location, ds);\n    glUniform1f(L0_location, l0);\n    glActiveTexture(GL_TEXTURE0 + model.activeTexturesCount());\n    glBindTexture(GL_TEXTURE_2D, irradianceTexture);\n    glUniform1i(irradiance_location, model.activeTexturesCount());\n\n    glEnable(GL_DEPTH_TEST);\n    model.render();\n\n    if(debugDraw)\n    {\n        displayTexture(irradianceTexture);\n        displayTexture(skybox_texture, 0.f, -1.f);\n    }\n\n    camera-&gt;drawControls();\n    // Draw basic interface\n    basicInterface();\n\n    ImGui::Render();\n    ImGui_ImplGlfwGL3_RenderDrawData(ImGui::GetDrawData());\n    glfwSwapBuffers(window);\n    glfwPollEvents();\n    camera-&gt;update(window);\n}\n</code></pre>\n\n<p><code>model.render()</code> is as follows :</p>\n\n<pre><code>void GltfModel::render() const\n{\n    for(unsigned int i = 0; i &lt; _activeTextures.size(); i++)\n    {\n        if(_textureLocations[i] &gt; -1)\n        {\n            int j = _activeTextures[i];\n            glActiveTexture(GL_TEXTURE0 + i);\n            glBindTexture(GL_TEXTURE_2D, _textureIds[j]);\n            glUniform1i(_textureLocations[i], i);\n        }\n    }\n    glBindBuffer(GL_ARRAY_BUFFER, _buffers[ARRAY_BUFFER]);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _buffers[ELEMENT_ARRAY_BUFFER]);\n    glDrawElements(_drawingMode, _indicesCount, _indicesType, NULL);\n}\n</code></pre>\n\n<p>Thanks by advance for your time !</p>\n\n<p>EDIT : putting a <code>glClear(GL_COLOR_BUFFER_BIT)</code> call right before <code>glfwSwapBuffers(window)</code> still displays a white screen with the culprit line uncommented even though the clear color has been set to light blue. Commenting the culprit line indeed displays a light blue screen, so this makes me think it's a framebuffer issue, but I can't say for sure.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 805, "user_id": 3857473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fef4a561dd16de766dce81f87f345e74?s=128&d=identicon&r=PG&f=1", "display_name": "Vikash Kesarwani", "link": "https://stackoverflow.com/users/3857473/vikash-kesarwani"}, "edited": false, "score": 0, "creation_date": 1529505077, "post_id": 50950521, "comment_id": 88899032, "body": "use stod or stold"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1529522254, "post_id": 50950521, "comment_id": 88908678, "body": "Why aren&#39;t you using <code>double</code> values, as in JS?"}, {"owner": {"reputation": 550, "user_id": 4138671, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bRegRphxthA/AAAAAAAAAAI/AAAAAAAAABk/-vlFzHBI8Jk/photo.jpg?sz=128", "display_name": "Md. Mahmudur Rahman", "link": "https://stackoverflow.com/users/4138671/md-mahmudur-rahman"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1529522974, "post_id": 50950521, "comment_id": 88908997, "body": "In js side i am not using any typed variable. Also, i didn&#39;t think i will face this problem as the actual value is in range of float but the precision is not. @bob"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 1, "creation_date": 1529523537, "post_id": 50950521, "comment_id": 88909253, "body": "Sorry to be nitpicking, but I belived that <a href=\"https://www.w3schools.com/Js/js_numbers.asp\" rel=\"nofollow noreferrer\">JavaScript Numbers are Always 64-bit Floating Point</a> ;), also, the actual value (1.something -52) isn&#39;t in <a href=\"https://en.wikipedia.org/wiki/IEEE_754-1985\" rel=\"nofollow noreferrer\">the range of a <code>float</code></a>... In C++, nowadays, is common to use <code>double</code>s, unless there are specific reasons."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1529504852, "creation_date": 1529504852, "answer_id": 50950606, "question_id": 50950521, "link": "https://stackoverflow.com/questions/50950521/handle-stof-out-of-range-error/50950606#50950606", "title": "Handle stof out of range error", "body": "<p>You can parse it as <code>double</code> first with <code>std::stod</code> and then assign it to <code>float</code>. Then check that <code>float</code> for <code>0</code>, positive/negative infinity and <code>NaN</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 1261664, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2fb810cf7313d38d554fdea16371519f?s=128&d=identicon&r=PG", "display_name": "Victor Istomin", "link": "https://stackoverflow.com/users/1261664/victor-istomin"}, "is_accepted": false, "score": 2, "last_activity_date": 1529505308, "creation_date": 1529505308, "answer_id": 50950763, "question_id": 50950521, "link": "https://stackoverflow.com/questions/50950521/handle-stof-out-of-range-error/50950763#50950763", "title": "Handle stof out of range error", "body": "<p>Perhaps, the safest way is to use <code>std::stod()</code>, save it to temporary double and then check against <code>std::numeric_limits&lt;float&gt;::max()</code> and <code>std::numeric_limits&lt;float&gt;::min()</code>. </p>\n"}], "owner": {"reputation": 550, "user_id": 4138671, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bRegRphxthA/AAAAAAAAAAI/AAAAAAAAABk/-vlFzHBI8Jk/photo.jpg?sz=128", "display_name": "Md. Mahmudur Rahman", "link": "https://stackoverflow.com/users/4138671/md-mahmudur-rahman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1529505308, "creation_date": 1529504610, "question_id": 50950521, "link": "https://stackoverflow.com/questions/50950521/handle-stof-out-of-range-error", "title": "Handle stof out of range error", "body": "<p>I am sending some floating value as string from JavaScript to C++ using websocket. Now while converting the value from string to back to float sometimes it gives <code>out of range</code> error when the precision is too high like for the input  value in the code:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nint main() {\n    try {\n        string ans = \"1.6704779438076223e-52\";\n        float val = stof(ans);\n        cout &lt;&lt; val &lt;&lt; endl;\n    }\n    catch (exception &amp;ex) {\n        cout &lt;&lt; ex.what() &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>What i want to do is decrease the precision if it is out of range in c++ side so that i can use the value.</p>\n\n<p>Is there any built it function which can do that or do i need to write a separate function to parse the string &amp; check for the precision? Also what things, do i need to check if i need to parse the string manually?</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "specialization"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1529505134, "post_id": 50950409, "comment_id": 88899066, "body": "You could add <code>template&lt;class T, size_t N&gt; struct is_array&lt;T[N]&gt; : std::true_type {};</code> do handle that situation."}, {"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1529506413, "post_id": 50950409, "comment_id": 88899933, "body": "@Eljay Yes, I know, as I have mentioned in the question."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529506301, "post_id": 50950933, "comment_id": 88899851, "body": "once initialized <code>a1</code> and <code>a2</code> <a href=\"https://ideone.com/3LHnrq\" rel=\"nofollow noreferrer\">seem to be of same type</a>. raw arrays are just too weird for me"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529506397, "post_id": 50950933, "comment_id": 88899925, "body": "@user463035818 - The <i>objects</i> are of the same type (assuming we pass 3 initializers for <code>a1</code>). The types are still fundamentally different. They have to be, if we treat <code>T[]</code> like an actual type and not just a kludge that allows the bound to be deduced."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1529506484, "post_id": 50950933, "comment_id": 88899997, "body": "yes I think I got it. Of course <code>a1</code>s type cannot be incomplete, so it has to be deduced and once deduced it is the same as <code>AC</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529506535, "post_id": 50950933, "comment_id": 88900033, "body": "...still raw arrays are too weird for me :P"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1529505817, "creation_date": 1529505817, "answer_id": 50950933, "question_id": 50950409, "link": "https://stackoverflow.com/questions/50950409/as-template-type-argument-why-doesnt-typen-match-its-specialized-version/50950933#50950933", "title": "As template type argument, why doesn&#39;t type[N] match its specialized version ---- template&lt;class T&gt; class S&lt;T[]&gt;", "body": "<p>The short answer is in the paragraph you quoted yourself:</p>\n\n<blockquote>\n  <p>The declared type of an array object might be an array of unknown\n  bound and therefore be incomplete at one point in a translation unit\n  and complete later on; <strong>the array types at those two points (\u201carray of\n  unknown bound of T\u201d and \u201carray of N T\u201d) are different types</strong>. The type\n  of a pointer to array of unknown bound, or of a type defined by a\n  typedef declaration to be an array of unknown bound, cannot be\n  completed</p>\n</blockquote>\n\n<p>Those are different types. While you may \"fix\" the type of an array <em>object</em> after the first point of declaration, it still doesn't change the fact those are different types. They behave differently. For instance:</p>\n\n<pre><code>using AI = int[];\nusing AC = int[3];\n\nAI a1 = {1, 2, 3, 4};\nAC a2 = {1, 2, 3, 4}; // error\n</code></pre>\n\n<p>The object <code>a1</code> can be initialized with the initializer <code>{1, 2, 3, 4}</code>. We see that the type I aliased as <code>AI</code> kinda behaves like <code>auto</code>, an initializer can be used  to help deduce the complete type.</p>\n\n<p>On the other hand, <code>a2</code> causes an error, because I provided too many initializers. And if I were to provide too few, I'd still have 3 elements in my array, where the ones not explicitly initialized will be default initialized.</p>\n\n<p>I hope you are convinced by now those are indeed very different types. So as template arguments, they <em>shouldn't</em> match.</p>\n"}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 50950933, "answer_count": 1, "score": 3, "last_activity_date": 1529507577, "creation_date": 1529504292, "last_edit_date": 1529507577, "question_id": 50950409, "link": "https://stackoverflow.com/questions/50950409/as-template-type-argument-why-doesnt-typen-match-its-specialized-version", "title": "As template type argument, why doesn&#39;t type[N] match its specialized version ---- template&lt;class T&gt; class S&lt;T[]&gt;", "body": "<p>Here is a demo (shortened from <a href=\"https://en.cppreference.com/w/cpp/types/is_array\" rel=\"nofollow noreferrer\">cppreference</a>): </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\ntemplate&lt;class T&gt;\nstruct is_array : std::false_type {};\n\ntemplate&lt;class T&gt;\nstruct is_array&lt;T[]&gt; : std::true_type {};\n\n\nclass A {};\n\nint main() \n{\n    std::cout &lt;&lt; std::boolalpha;\n    std::cout &lt;&lt; is_array&lt;A&gt;::value &lt;&lt; '\\n';\n    std::cout &lt;&lt; is_array&lt;A[]&gt;::value &lt;&lt; '\\n';\n    std::cout &lt;&lt; is_array&lt;A[3]&gt;::value &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>output(<a href=\"https://wandbox.org/permlink/ge5vlqGFdxrZtw1V\" rel=\"nofollow noreferrer\"><strong><code>live demo</code></strong></a>): </p>\n\n<pre><code>false\ntrue\nfalse\n</code></pre>\n\n<p>We can see that <code>is_array&lt;A[3]&gt;</code> is resolved as the primary specialization: <code>template&lt;class T&gt; struct is_array</code>, and not <code>template&lt;class T&gt; struct is_array&lt;T[]&gt;</code>. </p>\n\n<p>It confuses me a fair bit. Of course I know the complete implementation of <code>std::is_array</code> (as documented in cppreference) also contains a specialization for length: <code>template&lt;class T, std::size_t N&gt; struct is_array&lt;T[N]&gt;</code>, and <code>std::is_array&lt;A[3]&gt;</code> will resolve to this specialization as expected. But that cannot explain the uppermost demo, right? </p>\n\n<p>After searching, I found <a href=\"https://stackoverflow.com/questions/12261762/partial-template-specialization-for-arrays\">this thread</a>, but it is a question about <em>how</em>, not <em>why</em>. But in a <a href=\"https://stackoverflow.com/questions/12261762/partial-template-specialization-for-arrays#comment16439522_12261762\">comment</a>, <a href=\"https://stackoverflow.com/users/13005/steve-jessop\"><em>@Steve Jessop</em></a> mentioned: </p>\n\n<blockquote>\n  <p>I'm not entirely sure, but I think what you've written there is a specialization for arrays of unknown size. That's an incomplete type, but can be used in an extern declaration of an array that some other TU will provide.</p>\n</blockquote>\n\n<hr>\n\n<p>It seems to related to <a href=\"http://eel.is/c++draft/basic.types#6\" rel=\"nofollow noreferrer\">it being an <strong>incomplete type</strong></a>: </p>\n\n<blockquote>\n  <p>The declared type of an array object might be an array of unknown bound and therefore be incomplete at one point in a translation unit and complete later on; the array types at those two points (\u201carray of unknown bound of T\u201d and \u201carray of N T\u201d) are different types. The type of a pointer to array of unknown bound, or of a type defined by a typedef declaration to be an array of unknown bound, cannot be completed</p>\n</blockquote>\n\n<pre><code>extern int arr[];               // the type of arr is incomplete\nint  arr[10];                   // now the type of arr is complete\n</code></pre>\n\n<p><a href=\"http://eel.is/c++draft/basic.types#6\" rel=\"nofollow noreferrer\">[basic.types]/6</a> doesn't offer any other useful information about this.</p>\n\n<hr>\n\n<p>I noticed an error in the sample from the spec, which got me thinking that maybe it is not about specialization, but because <code>A[3]</code> cannot match <code>struct is_array&lt;T[]&gt;</code>. That's what the compiler seems to affirm: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;class T&gt;\nstruct is_array&lt;T[]&gt; : std::true_type {};\n\n\nclass A {};\n\nint main() \n{\n    is_array&lt;A[3]&gt; *a; // error\n    is_array&lt;A[3]&gt; b; // error\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/dPOi20eGIsulM0p6\" rel=\"nofollow noreferrer\"><strong><code>demo</code></strong></a></p>\n\n<hr>\n\n<p>Above is what I tried to solve this by myself, without success. So I am here to find a <strong>thorough</strong> answer.</p>\n"}, {"tags": ["python", "c++", "dictionary"], "comments": [{"owner": {"reputation": 413, "user_id": 828828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFIBr.png?s=128&g=1", "display_name": "N. Faure", "link": "https://stackoverflow.com/users/828828/n-faure"}, "edited": false, "score": 2, "creation_date": 1529503831, "post_id": 50950220, "comment_id": 88898090, "body": "String in C++ use double quotes, have you tried changing your simple quotes to those?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1529503872, "post_id": 50950220, "comment_id": 88898118, "body": "C++ doesn&#39;t use <code>&#39;</code> and <code>&quot;</code> interchangeably. They are use to define different types of literals."}, {"owner": {"reputation": 3210, "user_id": 3045351, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/QvwUz.jpg?s=128&g=1", "display_name": "gdogg371", "link": "https://stackoverflow.com/users/3045351/gdogg371"}, "edited": false, "score": 0, "creation_date": 1529503955, "post_id": 50950220, "comment_id": 88898177, "body": "thank you both. that sorted my issue."}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 828828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uFIBr.png?s=128&g=1", "display_name": "N. Faure", "link": "https://stackoverflow.com/users/828828/n-faure"}, "is_accepted": true, "score": 2, "last_activity_date": 1529504320, "last_edit_date": 1529504320, "creation_date": 1529503948, "answer_id": 50950304, "question_id": 50950220, "link": "https://stackoverflow.com/questions/50950220/python-dictionary-to-c-map/50950304#50950304", "title": "Python dictionary to C++ map", "body": "<p>While many languages (such as Python) allow developers to use either single or double quotes for strings, in C++ you need to use double quotes (<a href=\"https://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">reference</a>). Simple quotes are used for the <code>char</code> type which describes a single character (<a href=\"https://en.cppreference.com/w/cpp/language/character_literal\" rel=\"nofollow noreferrer\">reference</a>).</p>\n\n<p>So your code should be:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\ntypedef std::map&lt;string, int&gt; BasePairMap;\n\nint main()\n{\n    BasePairMap m;\n\n    m[\"power\"] = 0;\n    m[\"select\"] = 1;\n    m[\"backup\"] = 2;\n    // ...\n    m[\"rewind\"] = 71;\n    m[\"boxoffice\"] = 240;\n    m[\"sky\"] = 241;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3210, "user_id": 3045351, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/QvwUz.jpg?s=128&g=1", "display_name": "gdogg371", "link": "https://stackoverflow.com/users/3045351/gdogg371"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 50950304, "answer_count": 1, "score": 0, "last_activity_date": 1529504320, "creation_date": 1529503682, "question_id": 50950220, "link": "https://stackoverflow.com/questions/50950220/python-dictionary-to-c-map", "title": "Python dictionary to C++ map", "body": "<p>I am very new to C++ and am trying to translate a dictionary into a C++ format. I can't quite seem to find the answer I am looking for from the previous questions submitted on here. </p>\n\n<p>I have code as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\ntypedef std::map&lt;string, int&gt; BasePairMap;\n\nint main()\n{\n    BasePairMap m;\n\n    m['power'] = 0;\n    m['select'] = 1;\n    m['backup'] = 2;\n    ...\n    ...\n    ...\n    m['rewind'] = 71;\n    m['boxoffice'] = 240;\n    m['sky'] = 241;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>But I keep getting character overflow errors. How can I map string/int pairs together in C++?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1529503689, "post_id": 50950173, "comment_id": 88897997, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">What is array decaying?</a>"}, {"owner": {"reputation": 2405, "user_id": 1526321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5TKE.jpg?s=128&g=1", "display_name": "PhilMasterG", "link": "https://stackoverflow.com/users/1526321/philmasterg"}, "edited": false, "score": 0, "creation_date": 1529503708, "post_id": 50950173, "comment_id": 88898009, "body": "Have a look at &quot;pointer arithmetic&quot;."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1529503715, "post_id": 50950173, "comment_id": 88898013, "body": "The name of an array decays into a pointer to its first element in almost all contexts. <code>x+2</code> is, in fact, valid."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1529503778, "post_id": 50950173, "comment_id": 88898055, "body": "You need to read a textbook, SO is not a replacement for that"}, {"owner": {"reputation": 111, "user_id": 9279385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7usMnA4JV5I/AAAAAAAAAAI/AAAAAAAAAHk/AVksjQ5H9pU/photo.jpg?sz=128", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/9279385/aryaman"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1529592264, "post_id": 50950173, "comment_id": 88939166, "body": "@Slava I did read through the entire pointers chapter in my textbook, as well as (as mentioned in the question) the original textbook from the 90s where the Question was from. It wasn&#39;t there. I tried running it on my compiler as well and it threw an error. (in hindsight, since they&#39;re valid expressions, this was probably my fault).   So I apologise, but asking questions is an integral part of learning and I was trying to do just that. SO usually explains things much better than textbooks and I didn&#39;t really see the harm in asking. My bad."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1529503777, "creation_date": 1529503777, "answer_id": 50950238, "question_id": 50950173, "link": "https://stackoverflow.com/questions/50950173/array-variable-decaying-to-be-a-pointer/50950238#50950238", "title": "Array Variable Decaying to be a pointer", "body": "<p><code>x</code> is an array of 8 <code>int</code>s with <code>static</code> storage duration.</p>\n\n<p>The important thing to note that this question is about <em>pointer decay</em>.</p>\n\n<p>When you write <code>(x + 2)</code>, <code>x</code> <em>decays</em> to a pointer of type <code>int*</code>, with the address set to the first element of <code>x</code>. So <code>x + 2</code> is the same as <code>&amp;x[2]</code>; i.e. the address of the third element. This is called <em>pointer arithmetic</em>.</p>\n\n<p><code>*x</code> is equivalent to <code>x[0]</code>; you are <em>dereferencing</em> <code>x</code> when it's <em>decayed</em> to a pointer. It's value is 10.</p>\n\n<p><code>*x + 2</code> is adding 2 to that value 10.</p>\n\n<p><code>*(x + 2)</code> is the same as <code>x[2]</code>, i.e. 30.</p>\n"}], "owner": {"reputation": 111, "user_id": 9279385, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7usMnA4JV5I/AAAAAAAAAAI/AAAAAAAAAHk/AVksjQ5H9pU/photo.jpg?sz=128", "display_name": "Aryaman", "link": "https://stackoverflow.com/users/9279385/aryaman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1529504014, "answer_count": 1, "score": -3, "last_activity_date": 1529593588, "creation_date": 1529503529, "last_edit_date": 1529593588, "question_id": 50950173, "link": "https://stackoverflow.com/questions/50950173/array-variable-decaying-to-be-a-pointer", "closed_reason": "Needs more focus", "title": "Array Variable Decaying to be a pointer", "body": "<p>EDIT: I'm paraphrasing the original question since it was deemed too broad.</p>\n\n<p>An an array, such as </p>\n\n<blockquote>\n  <p>int x[5] = {1, 2, 3, 4, 5};</p>\n</blockquote>\n\n<p>What does an expression such as *(x + 2) mean?</p>\n\n<p>Answer: the variable x decays to act as a pointer to the first element of the array, similar to assigning an int pointer to the array name:</p>\n\n<blockquote>\n  <p>int *ptr = x;</p>\n</blockquote>\n\n<p>Hence, *(x + 2) points to index value 2, and hence has the value 3 in this case.</p>\n\n<p>Original Question:</p>\n\n<blockquote>\n  <p>static int x[8]={10,20,30,40,50,60,70,80};</p>\n  \n  <p>i) What is the meaning of x?</p>\n  \n  <p>ii) What is the meaning of (x+2)?</p>\n  \n  <p>iii) What is the value of *x?</p>\n  \n  <p>iv) What is the value of (*x+2)?</p>\n  \n  <p>v) What is the value of *(x + 2)?</p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio", "gcc"], "comments": [{"owner": {"reputation": 2405, "user_id": 1526321, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g5TKE.jpg?s=128&g=1", "display_name": "PhilMasterG", "link": "https://stackoverflow.com/users/1526321/philmasterg"}, "edited": false, "score": 7, "creation_date": 1529503466, "post_id": 50950103, "comment_id": 88897858, "body": "And what exactly is the problem?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 3, "creation_date": 1529503512, "post_id": 50950103, "comment_id": 88897887, "body": "You should check for errors when you call functions like <code>file.open()</code>"}, {"owner": {"reputation": 11, "user_id": 4978666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7758d2eaa41852cbe83c85281c7405?s=128&d=identicon&r=PG&f=1", "display_name": "G T", "link": "https://stackoverflow.com/users/4978666/g-t"}, "edited": false, "score": 0, "creation_date": 1529503579, "post_id": 50950103, "comment_id": 88897916, "body": "able to read the bin file correctly in windows, but if i try same code in GCC it give end of file without reading any data."}, {"owner": {"reputation": 11, "user_id": 4978666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7758d2eaa41852cbe83c85281c7405?s=128&d=identicon&r=PG&f=1", "display_name": "G T", "link": "https://stackoverflow.com/users/4978666/g-t"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1529503631, "post_id": 50950103, "comment_id": 88897957, "body": "@Galik i&#39;m not getting any error messages/compile errors, it&#39;s working fine in windows though."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1529503632, "post_id": 50950103, "comment_id": 88897960, "body": "<code>vector</code> -&gt; <code>std::vector</code>, <code>main()</code> -&gt; <code>int main()</code>."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 4, "creation_date": 1529503698, "post_id": 50950103, "comment_id": 88898006, "body": "My crystal ball tells me it&#39;s a working directory problem..."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1529503713, "post_id": 50950103, "comment_id": 88898012, "body": "<i>&quot;data in bin file looks like ff a0 b0 c0 a0 b0 c0 d0&quot;</i> - in what? In a text editor? When you dump out the binary values into hexadecimal notation? How are you viewing that data?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1529503765, "post_id": 50950103, "comment_id": 88898047, "body": "You are not checking for errors, that&#39;s why you are not finding any. When you do <code>file.open()</code> that can fail. You should check for that failure."}, {"owner": {"reputation": 11, "user_id": 4978666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7758d2eaa41852cbe83c85281c7405?s=128&d=identicon&r=PG&f=1", "display_name": "G T", "link": "https://stackoverflow.com/users/4978666/g-t"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1529503768, "post_id": 50950103, "comment_id": 88898049, "body": "@Paul R As mentioned in the description, it&#39;s just a part of my code, i&#39;m trying to understand what is the missing factor which makes my code fail only with GCC compiler."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1529503819, "post_id": 50950103, "comment_id": 88898083, "body": "You need to provide a proper <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, not just a random approximation of your code that doesn&#39;t even compile. You also need to tell us how you&#39;re building the executable, and how you are running it (in particular the working directory and where the data file is located relative to the working directory)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1529503885, "post_id": 50950103, "comment_id": 88898131, "body": "After opening the file try adding <code>if(!file.is_open()) std::cout &lt;&lt; std::strerror(errno) &lt;&lt; &#39;\\n&#39;;</code> see what that says."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 1, "creation_date": 1529503902, "post_id": 50950103, "comment_id": 88898139, "body": "Related:   <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\" title=\"what is a debugger and how can it help me diagnose problems\">stackoverflow.com/questions/25385173/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "is_accepted": false, "score": 1, "last_activity_date": 1529504223, "creation_date": 1529504223, "answer_id": 50950388, "question_id": 50950103, "link": "https://stackoverflow.com/questions/50950103/im-able-to-read-bin-file-in-windowsvisual-c-but-not-on-linux-gcc/50950388#50950388", "title": "I&#39;m able to read bin file in windows(Visual C++) but not on linux (GCC)", "body": "<p>Probably your code fails because the file <code>file.bin</code> does not exist in the working directory which depends on your development platform.</p>\n\n<p>Try this (this code compiles unlike your code in the question):</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n  std::ifstream file;\n  file.open(\"file.bin\", std::ios::binary);\n\n  if (file.fail())  // check if file could actually be opened\n  {\n    // you end up here if the file does not exist\n    std::cout &lt;&lt; \"File could not be opened. Check if it exists.\";\n    return 1;\n  }\n\n  std::vector&lt;uint32_t&gt; data;\n  uint32_t temp;\n  // now read the data in uint32_t format\n  while (file.read(reinterpret_cast&lt;char *&gt;(&amp;temp), sizeof(temp)))\n  {\n    data.push_back(temp);\n  }\n\n  file.close();\n\n  for (auto value : data)\n    std::cout &lt;&lt; value &lt;&lt; \"\\n\";      \n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4978666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7758d2eaa41852cbe83c85281c7405?s=128&d=identicon&r=PG&f=1", "display_name": "G T", "link": "https://stackoverflow.com/users/4978666/g-t"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1529515131, "answer_count": 1, "score": -4, "last_activity_date": 1529504223, "creation_date": 1529503305, "question_id": 50950103, "link": "https://stackoverflow.com/questions/50950103/im-able-to-read-bin-file-in-windowsvisual-c-but-not-on-linux-gcc", "closed_reason": "Needs details or clarity", "title": "I&#39;m able to read bin file in windows(Visual C++) but not on linux (GCC)", "body": "<blockquote>\n  <p>part of my code which is working with Visual C++ is below.\n  data in bin file looks like \n  ff a0 b0 c0 a0 b0 c0 d0      </p>\n</blockquote>\n\n<pre><code>#include&lt;fstream&gt;\n#include&lt;vector&gt;\nmain()\n{\n    std::ifstream file;\n    file.open(\"file.bin\", std::ios::binary);\n    vector&lt;uint32_t&gt; data;\n    uint32_t temp;\n    // now read the data in uint32_t format\n    while(file.read(reinterpret_cast&lt;char *&gt;(&amp;temp), sizeof(temp)))\n    {\n        data.push_back(temp);\n    }\n    file.close();\n}\n</code></pre>\n"}, {"tags": ["c++", "mingw"], "comments": [{"owner": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1529504007, "post_id": 50950060, "comment_id": 88898214, "body": "The title of the question emphasis that <code>GetModuleHandle(NULL)</code> is a condition for the problem to occur. You didn&#39;t explain in the question how this conditions comes in. You further didn&#39;t show if the <code>handle</code> is NULL before the call to <code>GetProcAddress</code>. Didn&#39;t you get a handle or do you assume you got an invalid handle?"}, {"owner": {"reputation": 1, "user_id": 7192092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae0ad99efbf9b7cd16c1f31ceb632f1?s=128&d=identicon&r=PG&f=1", "display_name": "MindSpunk", "link": "https://stackoverflow.com/users/7192092/mindspunk"}, "reply_to_user": {"reputation": 12461, "user_id": 266487, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/585595b6a24df9b742ebc186788e9a8e?s=128&d=identicon&r=PG", "display_name": "harper", "link": "https://stackoverflow.com/users/266487/harper"}, "edited": false, "score": 0, "creation_date": 1529504446, "post_id": 50950060, "comment_id": 88898580, "body": "I emphasize GetModuleHandle(NULL) as passing NULL to GetModuleHandle is used to get a handle to the calling process <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx\" rel=\"nofollow noreferrer\">outlined here</a>. GetModuleHandle(NULL) returns a non null handle and no error is given by GetLastError()."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1529516008, "post_id": 50950060, "comment_id": 88905729, "body": "Why are you doing this in the first place?  There is NO good reason for an EXE to use <code>GetProcAddress()</code> to get a pointer to its own functions.  It has direct access to them: <code>FuncType func = &amp;local_lookup_test;</code> What are you really trying to accomplish?"}, {"owner": {"reputation": 1, "user_id": 7192092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae0ad99efbf9b7cd16c1f31ceb632f1?s=128&d=identicon&r=PG&f=1", "display_name": "MindSpunk", "link": "https://stackoverflow.com/users/7192092/mindspunk"}, "edited": false, "score": 0, "creation_date": 1529553431, "post_id": 50950060, "comment_id": 88917175, "body": "I am using the <a href=\"https://hashlink.haxe.org/\" rel=\"nofollow noreferrer\">hashlink</a> virtual machine to embed a scripting language into my game engine. Haxe allows me to specify external native code that can be called inside the virtual machine by a script. To do this I can tell it to lookup function pointers by name in the host executable like this <code>@hlNative(&quot;builtin&quot;, &quot;local_lookup_test&quot;) public static function local_lookup_test() {}</code> This uses the internal lookup into the executable that I&#39;m having trouble with. Because the functions it needs are looked by a name that changes at runtime I need to lookup in the exe."}, {"owner": {"reputation": 1, "user_id": 7192092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae0ad99efbf9b7cd16c1f31ceb632f1?s=128&d=identicon&r=PG&f=1", "display_name": "MindSpunk", "link": "https://stackoverflow.com/users/7192092/mindspunk"}, "edited": false, "score": 0, "creation_date": 1529553766, "post_id": 50950060, "comment_id": 88917237, "body": "There is also a mechanism for specifying a dll to lookup function pointers in but that will needlessly complicate the build and ergonomics of working with hashlink by forcing me to compile as a dll and use a tiny .exe wrapper."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1529566543, "post_id": 50950060, "comment_id": 88922421, "body": "<code>nm</code> shows that the symbol exists. <code>DUMPBIN &#47;EXPORTS</code> will tell you whether it&#39;s exported."}, {"owner": {"reputation": 1090, "user_id": 1983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bba922326537fd12144b9a2587f742f?s=128&d=identicon&r=PG", "display_name": "ssbssa", "link": "https://stackoverflow.com/users/1983398/ssbssa"}, "edited": false, "score": 0, "creation_date": 1529576520, "post_id": 50950060, "comment_id": 88928536, "body": "Why is <code>__declspec(dllexport)</code> only used for <code>#ifdef _MSC_VER</code>? I think you need <code>#ifdef _WIN32</code> instead."}, {"owner": {"reputation": 1, "user_id": 7192092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae0ad99efbf9b7cd16c1f31ceb632f1?s=128&d=identicon&r=PG&f=1", "display_name": "MindSpunk", "link": "https://stackoverflow.com/users/7192092/mindspunk"}, "edited": false, "score": 0, "creation_date": 1529670369, "post_id": 50950060, "comment_id": 88970310, "body": "I am compiling with both msvc, clang and gcc on windows which don&#39;t all support <code>declspec(dllexport)</code> properly to my knowledge."}], "owner": {"reputation": 1, "user_id": 7192092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bae0ad99efbf9b7cd16c1f31ceb632f1?s=128&d=identicon&r=PG&f=1", "display_name": "MindSpunk", "link": "https://stackoverflow.com/users/7192092/mindspunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529515939, "creation_date": 1529503185, "last_edit_date": 1529515939, "question_id": 50950060, "link": "https://stackoverflow.com/questions/50950060/getprocaddress-on-getmodulehandlenullptr-fails-under-mingw", "title": "GetProcAddress() on GetModuleHandle(nullptr) fails under MinGW", "body": "<p>I'm using <code>GetModuleHandle(nullptr)</code> to get the handle for the current process and then using <code>GetProcAddress()</code> on the handle to lookup a function inside the calling executable.</p>\n\n<p>This works perfectly when compiled with MSVC, but when using either Clang or GCC under MinGW, the <code>GetProcAddress()</code> call fails with error code 127 (<code>ERROR_PROC_NOT_FOUND</code>) and returns <code>nullptr</code>.</p>\n\n<p>The function I am looking up is defined as:</p>\n\n<pre><code>extern \"C\"\n{\n    void NOVA_API local_lookup_test(void* thing)\n    {\n        std::stringstream* out = static_cast&lt;std::stringstream *&gt;(thing);\n        *out &lt;&lt; \"YouFoundMe!\\n\";\n    }\n}\n</code></pre>\n\n<p>With the <code>NOVA_API</code> macro defined as:</p>\n\n<pre><code>#ifdef _MSC_VER\n#define NOVA_API __declspec(dllexport)\n#else\n#define NOVA_API __attribute__((visibility(\"default\")))\n#endif\n</code></pre>\n\n<p>The function is being exported correctly, with no mangling, as running <code>rm</code> on the executable shows it has been exported:</p>\n\n<pre>\n$ nm NovaTest.exe | grep local_lookup_test\n0000000000421160 T local_lookup_test\n</pre>\n\n<p>I have tried numerous ways of messing with the names, marking for export in different ways, using different calling conventions, but only under MinGW will <code>GetProcAddress()</code> fail.</p>\n\n<p>The code I'm using for getting the function pointer:</p>\n\n<pre><code>typedef void(*FuncType)(void*);\nHMODULE handle = GetModuleHandle(nullptr);\nauto func = (FuncType)GetProcAddress(handle, \"local_lookup_test\");\n</code></pre>\n\n<p>edit:</p>\n\n<p><code>GetModuleHandle(nullptr)</code> returns a handle to the calling process, which I use to dynamically lookup function names inside the calling <code>.exe</code> file.</p>\n\n<p>The handle returned by <code>GetModuleHandle(nullptr)</code> is not <code>nullptr</code>, and no error is seen by <code>GetLastError()</code>, so to my knowledge the handle should be valid.</p>\n"}, {"tags": ["c++", "multithreading", "shared-ptr"], "comments": [{"owner": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 2, "creation_date": 1529503769, "post_id": 50950010, "comment_id": 88898051, "body": "As a stylistic sidenote: Please reconsider the use of Capital Letters for variable- and function names. It makes variables and functions look like Types / Declarations at the first glance, which makes reading the code much more difficult (at least for me). Also naming <i>anything</i> in C++ <code>New</code> is rather... bold (I spent 30s thinking &quot;new? new what? are you missing the type for the pointer allocation?&quot; before I realized <code>New</code> was a variable...)"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1529503812, "post_id": 50950010, "comment_id": 88898078, "body": "Why don&#39;t you just use shared memory-mapping of the files and not worry about all this yourself?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1529504333, "post_id": 50950010, "comment_id": 88898496, "body": "As you noted you can make your cache thread safe with a simple mutex. The real question is how to make accessing the shared objects you obtain from the cache thread safe? That&#39;s a problem independant of the cache itself."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 4, "creation_date": 1529504452, "post_id": 50950010, "comment_id": 88898582, "body": "<i>&quot;Even if I protect content of GetFile() by a mutex, it still can return non-null pointer from weak_ptr::lock() while other thread is running destructor of pointed File object.&quot;</i> - are you sure about that? I would think the <code>std::shared_ptr</code> would prevent <code>std::weak_ptr</code> access before destroying its target."}, {"owner": {"reputation": 833, "user_id": 8047760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4420b0b735bf473e56fb2996ae53d39?s=128&d=identicon&r=PG&f=1", "display_name": "Christian G", "link": "https://stackoverflow.com/users/8047760/christian-g"}, "reply_to_user": {"reputation": 1705, "user_id": 9103250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3c613d7186c7314ee818673ea4c79fd?s=128&d=identicon&r=PG&f=1", "display_name": "CharonX", "link": "https://stackoverflow.com/users/9103250/charonx"}, "edited": false, "score": 0, "creation_date": 1529504749, "post_id": 50950010, "comment_id": 88898795, "body": "@CharonX this looked like Unreal Engine style to me at first, they have Capital variable naming ... but in usual C++ code this is slightly confusing"}, {"owner": {"reputation": 37, "user_id": 3582652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e884853d69b49b35b546a2466c803ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Raider", "link": "https://stackoverflow.com/users/3582652/raider"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1529506424, "post_id": 50950010, "comment_id": 88899945, "body": "@Galik I&#39;m not sure. May be I&#39;m not right. I&#39;ll do a test."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 3582652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e884853d69b49b35b546a2466c803ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Raider", "link": "https://stackoverflow.com/users/3582652/raider"}, "edited": false, "score": 0, "creation_date": 1529508529, "post_id": 50950391, "comment_id": 88901373, "body": "I wrote a test (see bellow). It prove you&#39;re right. <code>weak_ptr</code> does not return pointer to a dead object."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": true, "score": 1, "last_activity_date": 1529514092, "last_edit_date": 1529514092, "creation_date": 1529504246, "answer_id": 50950391, "question_id": 50950010, "link": "https://stackoverflow.com/questions/50950010/how-to-create-thread-safe-cache-of-shared-ptr/50950391#50950391", "title": "How to create thread safe cache of shared_ptr", "body": "<p>Unless I'm misunderstanding the scenario you've described, A <code>lock()</code> of a <code>WeakPtr</code> will fail (i.e. return a dummy <code>shared_ptr</code>) if another thread is running a destructor of the File object. That's the logic of shared and weak pointers. So - your current solution should be thread safe in this respect; but - it may be non-thread-safe as you add or remove elemnrs. Read about that, say, in this question: <a href=\"https://stackoverflow.com/questions/820526/c-thread-safe-map\">C++ Thread-Safe Map</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 3582652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e884853d69b49b35b546a2466c803ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Raider", "link": "https://stackoverflow.com/users/3582652/raider"}, "is_accepted": false, "score": 1, "last_activity_date": 1529508354, "creation_date": 1529508354, "answer_id": 50951833, "question_id": 50950010, "link": "https://stackoverflow.com/questions/50950010/how-to-create-thread-safe-cache-of-shared-ptr/50951833#50951833", "title": "How to create thread safe cache of shared_ptr", "body": "<p>I expected the following code will fail. But it's not. It seems like <code>weak_ptr::lock()</code> will not return pointer to an object that is in destruction process. And if so, it is a simpliest solution to just add a mutex and don't worry about returning dead objects by <code>weak_ptr::lock()</code>.</p>\n\n<pre><code>char const *TestPath = \"file.xml\";\n\nvoid Log(char const *Message, std::string const &amp;Name, void const *File)\n{\n    std::cout &lt;&lt; Message\n        &lt;&lt; \": \" &lt;&lt; Name\n        &lt;&lt; \" at memory=\" &lt;&lt; File\n        &lt;&lt; \", thread=\" &lt;&lt; std::this_thread::get_id()\n        &lt;&lt; std::endl;\n}\n\nvoid Sleep(int Seconds)\n{\n    std::this_thread::sleep_for(std::chrono::seconds(Seconds));\n}\n\nstruct File\n{\n    File(std::string Name) : Name(Name)\n    {\n        Log(\"created\", Name, this);\n    }\n\n    ~File()\n    {\n        Log(\"destroying\", Name, this);\n        Sleep(5);\n        Log(\"destroyed\", Name, this);\n    }\n\n    std::string Name;\n};\n\nstd::map&lt;std::string, std::weak_ptr&lt;File&gt;&gt; Cache;\nstd::mutex Mutex;\n\nstd::shared_ptr&lt;File&gt; GetFile(std::string Name)\n{\n    std::unique_lock&lt;std::mutex&gt; Lock(Mutex); // locking is added\n    auto Found = Cache.find(Name);\n    if (Found != Cache.end())\n        if (auto Exist = Found-&gt;second.lock())\n        {\n            Log(\"found in cache\", Name, Exist.get());\n            return Exist;\n        }\n\n    auto New = std::make_shared&lt;File&gt;(Name);\n    Cache[Name] = New;\n    return New;\n}\n\nvoid Thread2()\n{\n    auto File = GetFile(TestPath);\n    //Sleep(3); // uncomment to share file with main thead\n}\n\nint main()\n{\n    std::thread thread(&amp;Thread2);\n    Sleep(1);\n    auto File = GetFile(TestPath);\n    thread.join();\n    return 0;\n}\n</code></pre>\n\n<p>My expectation:</p>\n\n<pre><code>thread2: created\nthread2: destroying\nthread1: found in cache &lt;--- fail. dead object :(\nthread2: destroyed\n</code></pre>\n\n<p>VS2017 results:</p>\n\n<pre><code>thread2: created\nthread2: destroying\nthread1: created &lt;--- old object is not re-used! great ;)\nthread2: destroyed\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3582652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e884853d69b49b35b546a2466c803ec9?s=128&d=identicon&r=PG&f=1", "display_name": "Raider", "link": "https://stackoverflow.com/users/3582652/raider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 1, "accepted_answer_id": 50950391, "answer_count": 2, "score": -1, "last_activity_date": 1529514092, "creation_date": 1529503046, "question_id": 50950010, "link": "https://stackoverflow.com/questions/50950010/how-to-create-thread-safe-cache-of-shared-ptr", "title": "How to create thread safe cache of shared_ptr", "body": "<p>I have a code that reads a lot of files. Some files can be cached. Consumer receives <code>shared_ptr</code> when asks for a file. Other consumers can ask for this file and get it from the cache if file is still in memory. If file is not in memory, it will be loaded and put in to the cache.</p>\n\n<p>Simplified code:</p>\n\n<pre><code>struct File\n{\n    File(std::string);\n    bool AllowCache() const;\n};\n\ntypedef std::shared_ptr&lt;File&gt; SharedPtr;\ntypedef std::weak_ptr&lt;File&gt; WeakPtr;\nstd::map&lt;std::string, WeakPtr&gt; Cache;\n\nSharedPtr GetFile(std::wstring Name)\n{\n    auto Found = Cache.find(Name);\n    if (Found != Cache.end())\n        if (auto Exist = Found-&gt;second.lock())\n            return Exist;\n\n    auto New = boost::make_shared&lt;File&gt;(Name);\n    if (New-&gt;AllowCache())\n        Cache[Name] = New;\n    return New;\n}\n</code></pre>\n\n<p>My question is: how to make this code thead safe? Even if I protect content of <code>GetFile()</code> by a mutex, it still can return non-null pointer from <code>weak_ptr::lock()</code> while other thread is running destructor of pointed <code>File</code> object.</p>\n\n<p>I see some solutions, like:</p>\n\n<ol>\n<li>Store <code>shared_ptr</code>s in the cache and run a separate thread that will\ncontinuously remove <code>shared_ptr</code>-s with <code>use_count()==1</code> (let's call it <code>Cleanup()</code>).</li>\n<li>Store <code>shared_ptr</code>s in the cache and require consumers to use special wrapper of <code>shared_ptr&lt;File&gt;</code>. This wrapper will have <code>shared_ptr&lt;File&gt;</code> as a member and will <code>reset()</code> it at destructor and then call <code>Cleanup()</code>.</li>\n</ol>\n\n<p>1st solution is a bit ofoverkill. 2nd solution require to refactor all the code in my project. Both solutions are bad for me. Is any other way to make it thead safe?</p>\n"}, {"tags": ["c++", "templates", "dependency-injection", "polymorphism", "real-time"], "owner": {"reputation": 135, "user_id": 9967707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e752dfc42372e8c8a4da13c70dc2565?s=128&d=identicon&r=PG&f=1", "display_name": "luxderfux", "link": "https://stackoverflow.com/users/9967707/luxderfux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529503009, "creation_date": 1529503009, "question_id": 50950000, "link": "https://stackoverflow.com/questions/50950000/dependency-inversion-implementations-for-real-time-applications", "title": "Dependency inversion implementations for real time applications", "body": "<p>After reading Robert Martin's \"Clean Architecture\", I want to implement dependency inversion for computational heavy real time applications. More precisely:</p>\n\n<ul>\n<li>decoupling and independence of lowlevel IO modules</li>\n<li>no / minimal overhead</li>\n<li>static polymorphism</li>\n</ul>\n\n<p>The use of interfaces / actract classes with virtual functions seems to add too much overhead (table lookups, ...) for real time scenarios.</p>\n\n<p><strong>What implementations do you recommend?</strong></p>\n\n<p>Regarding <a href=\"https://i.stack.imgur.com/zureA.jpg\" rel=\"nofollow noreferrer\">Robert's example</a>, I came up with a simple template-based approach:</p>\n\n<pre><code>#include \"stdio.h\"\n\nclass TestReader {\npublic:\n    int read() {\n        int input = 5;\n        printf(\"Input:\\t%d\\n\", input);\n        return input;\n    }\n};\n\nclass ConsoleReader {\npublic:\n    int read() {\n        int input;\n        printf(\"Enter Integer:\\t\");\n        scanf(\"%d\", &amp;input);\n        printf(\"Input:\\t%d\\n\", input);\n        return input;\n    }\n};\n\nclass ConsoleWriter {\npublic:\n    void write(int input) {\n        printf(\"Output:\\t%d\\n\", input);\n    }\n};\n\ntemplate &lt;typename TRead, typename TWrite&gt;\nclass Encrypt {\npublic:\n    void transform() {\n        int input = IRead.read();\n\n        printf(\"Encrypt...\\n\");\n        int output = input + input;\n\n        IWrite.write(output);\n    };\n\nprivate:\n    TRead IRead;\n    TWrite IWrite;\n};\n\n\nint main() {\n    Encrypt&lt;ConsoleReader, ConsoleWriter&gt; b;\n    b.transform();\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "video-codecs"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529503792, "post_id": 50949886, "comment_id": 88898064, "body": "What exactly <code>int codec = opencvfourcc(codec)</code> is suposed to do? Can you show some real code?"}, {"owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1529506576, "post_id": 50949886, "comment_id": 88900070, "body": "<a href=\"http://answers.opencv.org/question/100967/codecs-list/\" rel=\"nofollow noreferrer\">answers.opencv.org/question/100967/codecs-list</a>"}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "reply_to_user": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "edited": false, "score": 0, "creation_date": 1529507850, "post_id": 50949886, "comment_id": 88900957, "body": "@GPPK Could you please explain your reaction. I already read it and ensured to mention in the question, that this won&#39;t help."}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529508071, "post_id": 50949886, "comment_id": 88901083, "body": "@n.m. OpenCV works internally mostly on integer flags, opencvfourcc is actually <code>cv::VideoWriter::fourcc</code> and is a defined function, taking in 4 chars and returns an integer. So it&#39;s already defined ^^."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1529510253, "post_id": 50949886, "comment_id": 88902518, "body": "<i>OpenCV works</i> Well, having read the description of the API, I strongly disagree with this statement (at least as far as writing video files is concerned)."}, {"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1529536138, "post_id": 50949886, "comment_id": 88913781, "body": "Let&#39;s restate that, most important flags, like codecs, modes or types are all handled with integers in OpenCV."}], "answers": [{"comments": [{"owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1529508668, "post_id": 50951243, "comment_id": 88901479, "body": "Nice workaround, isn&#39;t the most beautiful solution, but it&#39;s none the less really helpful. Will wait a few hours before I accept the answer."}, {"owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "reply_to_user": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "edited": false, "score": 0, "creation_date": 1529528937, "post_id": 50951243, "comment_id": 88911508, "body": "@PatrickAbraham You can use FFmpeg to get codec &amp; container availability. Just as OpenCV does <a href=\"https://github.com/opencv/opencv/blob/3.4/modules/videoio/src/cap_ffmpeg_impl.hpp#L1966\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/opencv/opencv/blob/3.4/modules/videoio/src/cap_ffmpeg_impl.hpp#L1993\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 5482, "user_id": 2286337, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/A8dkr.jpg?s=128&g=1", "display_name": "zindarod", "link": "https://stackoverflow.com/users/2286337/zindarod"}, "is_accepted": true, "score": 1, "last_activity_date": 1529507175, "last_edit_date": 1529507175, "creation_date": 1529506719, "answer_id": 50951243, "question_id": 50949886, "link": "https://stackoverflow.com/questions/50949886/opencv-checking-if-video-codec-is-installed-on-machine-c/50951243#50951243", "title": "OpenCV checking if video-codec is installed on machine (C++)", "body": "<p>OpenCV uses <code>FFmpeg</code> to decode video files. So if OpenCV has been built with the version of FFmpeg on the system, then we can use the FFmpeg command line to check for availability of our codec of choice. To run system commands from C++, I've used code from <a href=\"https://stackoverflow.com/a/478960/2286337\">here</a>. <a href=\"https://stackoverflow.com/a/8249232/2286337\">This post</a> details how to check for OS type.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;stdexcept&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\n\n#if defined(_WIN32) || defined(_WIN64)\n#define OS_WINDOWS\n#elif defined(__APPLE__) || defined(__MACH__)\n#define OS_OSX\n#elif defined(__linux__)\n#define OS_LINUX\n#endif\n\nstd::string exec(const std::string&amp; command ) {\n    const char* cmd = command.c_str();\n    std::array&lt;char, 128&gt; buffer;\n    std::string result;\n\n    #if defined(OS_WINDOWS)\n    std::shared_ptr&lt;FILE&gt; pipe(_popen(cmd, \"r\"), _pclose);\n    #elif defined(OS_LINUX) || defined (OS_OSX)\n    std::shared_ptr&lt;FILE&gt; pipe(popen(cmd, \"r\"), pclose);\n    #endif\n\n    if (!pipe) throw std::runtime_error(\"popen() failed!\");\n    while (!feof(pipe.get())) {\n        if (fgets(buffer.data(), 128, pipe.get()) != nullptr)\n            result += buffer.data();\n    }\n    return result;\n}\n\nint main() {\n\n  // codec of choice\n  std::string codec = \"H264\";\n\n  // if OS is linux or OSX then use FFmpeg with grep command\n  #if defined (OS_LINUX) || defined (OS_OSX)\n  std::string command = \"ffmpeg -codecs | grep -i \";\n  // if WINDOWS then FFmpeg with findstr\n  #elif defined (OS_WINDOWS)\n  std::string command = \"ffmpeg -codecs | findstr /i \";\n  #endif\n\n  // execute the system command and get the output\n  std::string str = exec(command+codec);\n\n  // if the output string contains the letters DEV then FFmpeg supports the codec\n  // D: Decoding supported\n  // E: Encoding supported\n  // V: Video codec\n  std::size_t found = str.find(\"DEV\");\n\n  if(found != std::string::npos)\n    std::cout&lt;&lt;\"Codec Found\"&lt;&lt;std::endl;\n\nreturn 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 210, "user_id": 6533158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a01e414b198b5100c5ccde7a307bf3e8?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Abraham", "link": "https://stackoverflow.com/users/6533158/patrick-abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1740, "favorite_count": 0, "accepted_answer_id": 50951243, "answer_count": 1, "score": 0, "last_activity_date": 1529507175, "creation_date": 1529502663, "question_id": 50949886, "link": "https://stackoverflow.com/questions/50949886/opencv-checking-if-video-codec-is-installed-on-machine-c", "title": "OpenCV checking if video-codec is installed on machine (C++)", "body": "<p>Problem:</p>\n\n<p>I want to implement a safe version to process data into a video via OpenCV, this should work on Windows, Mac and Linux. The data has to be saved in a lossless video-codec.</p>\n\n<hr>\n\n<p>Saving the file under my current setup is no problem at all, and I know that using <code>-1</code> as <code>fourcc</code> with <code>videoWriter</code> will pop up a window.\nWhat I can't assure is that the system has the ability to show a window at all! So the popup-menu is okay as fallback, but not as the main solution.</p>\n\n<hr>\n\n<p>Question:</p>\n\n<p>Is there a way to check with OpenCV if a specific video-codec is installed on the machine without running into compile problems? Something like:</p>\n\n<pre><code>if (`codec installed`)\n    int codec = opencvfourcc(codec)\nelse\n    int codec = -1\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2017", "command-line-interface", "warnings"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 6859105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a7e81da574252363630c283c7268ec?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/6859105/christian"}, "is_accepted": false, "score": 0, "last_activity_date": 1530877706, "creation_date": 1530877706, "answer_id": 51209817, "question_id": 50949789, "link": "https://stackoverflow.com/questions/50949789/compiler-warnings-c4691-when-referencing-nuget-package-in-c-clr-project/51209817#51209817", "title": "Compiler warnings C4691 when referencing NuGet package in C++/CLR project", "body": "<p>I fixed the problem by updating the NuGet package of Unity. The old Unity package did only contain dlls up to version 4.5, while in the project version 4.6.2 was set up. </p>\n\n<p>By updating the unity package to the newest version (currently 5.8.2, which is compatible with .net framework up to 4.7), the warnings disappeared completely!</p>\n"}], "owner": {"reputation": 23, "user_id": 6859105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a7e81da574252363630c283c7268ec?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/6859105/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1530877706, "creation_date": 1529502344, "last_edit_date": 1529667569, "question_id": 50949789, "link": "https://stackoverflow.com/questions/50949789/compiler-warnings-c4691-when-referencing-nuget-package-in-c-clr-project", "title": "Compiler warnings C4691 when referencing NuGet package in C++/CLR project", "body": "<p>I have the following situation within Visual Studio 2017:</p>\n\n<p>A C++ project which is compiled with the /clr (Common Language Runtime Support switch) has a depedency to Microsoft.Practices.Unity, since we use the IUnityContainer therein. However, several warnings arise in the cpp-File where the reference is made:</p>\n\n<pre><code>using namespace Microsoft::Practices::Unity;\n</code></pre>\n\n<p>The warnings after build:</p>\n\n<pre><code>warning C4691: 'System::Object': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::IDisposable': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::IUnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::Collections::Generic::IEnumerable': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::IUnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::ParamArrayAttribute': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::IUnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::Type': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::IUnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::EventHandler': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::Collections::Generic::IDictionary': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::Collections::Generic::List': type referenced was expected in unreferenced assembly 'System.Collections', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\nwarning C4691: 'System::Action': type referenced was expected in unreferenced assembly 'System.Runtime', type defined in current translation unit used instead\nnote: This diagnostic occurred while importing type 'Microsoft::Practices::Unity::UnityContainer ' from assembly 'Microsoft.Practices.Unity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=6d32ff45e0ccc69f'.\n</code></pre>\n\n<p>I already found the following topics on several places, which seem to somehow address this issue, but unfortunately without any fix that helped in my case.</p>\n\n<ul>\n<li><a href=\"https://github.com/aspnet/Logging/issues/734\" rel=\"nofollow noreferrer\">https://github.com/aspnet/Logging/issues/734</a></li>\n<li><a href=\"https://github.com/dotnet/sdk/issues/1781\" rel=\"nofollow noreferrer\">https://github.com/dotnet/sdk/issues/1781</a></li>\n<li><a href=\"https://developercommunity.visualstudio.com/content/problem/158463/c4691-warnings-with-ccli-nuget.html\" rel=\"nofollow noreferrer\">https://developercommunity.visualstudio.com/content/problem/158463/c4691-warnings-with-ccli-nuget.html</a></li>\n</ul>\n\n<p>Has anyone already found a solution to avoid this warning, apart from deactivating it by #pragma?</p>\n\n<hr>\n\n<p><strong><em>Amendment</em></strong>:\nThe problem is simply reproducible by creating a new CLR Console Application project within Visual Studio 2017, add a reference to the Microsoft.Practices.Unity.dll (Version 4.0.1, from the net45 folder of the NuGet packages) and the following snippet:</p>\n\n<pre><code>#include \"stdafx.h\"\n\nusing namespace System;\n\n\nint main(array&lt;System::String ^&gt; ^args)\n{\n  Microsoft::Practices::Unity::IUnityContainer^ unityContainer = gcnew Microsoft::Practices::Unity::UnityContainer();\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "time"], "comments": [{"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1529502582, "post_id": 50949516, "comment_id": 88897271, "body": "According to <a href=\"https://www.timeanddate.com/date/durationresult.html?d1=01&amp;m1=01&amp;y1=1970&amp;d2=01&amp;m2=01&amp;y2=2004&amp;h1=0&amp;i1=0&amp;s1=0&amp;h2=0&amp;i2=0&amp;s2=0\" rel=\"nofollow noreferrer\">timeanddate.com/date/&hellip;</a> the amount of seconds are 1,072,915,200"}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "reply_to_user": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1529503044, "post_id": 50949516, "comment_id": 88897599, "body": "So it is that easy? I only have to add the offset seconds to the UTC time and then subtract the 1,072,915,200 seconds to get the valid amount of elapsed TAI seconds?"}, {"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1529507362, "post_id": 50949516, "comment_id": 88900629, "body": "It&#39;s a bit ugly, but it would do. No pitfalls there."}, {"owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "reply_to_user": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 0, "creation_date": 1529517538, "post_id": 50949516, "comment_id": 88906484, "body": "Yes, it&#39;s ugly. But nice to know that there are no pitfalls. However, can you suggest a better solution?"}], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "is_accepted": true, "score": 1, "last_activity_date": 1529571996, "last_edit_date": 1529571996, "creation_date": 1529571677, "answer_id": 50964502, "question_id": 50949516, "link": "https://stackoverflow.com/questions/50949516/changing-tai-time-epoch-correctly/50964502#50964502", "title": "Changing TAI Time epoch correctly", "body": "<p>You can use <code>boost</code> to get the current time , build a time object for <code>2004-01-01T00:00:00Z</code> and calculate the diff</p>\n\n<pre><code>#include \"boost/date_time/posix_time/posix_time.hpp\"\n\nboost::posix_time::ptime now(boost::posix_time::microsec_clock::universal_time());\nboost::posix_time::ptime before(time_from_string(\"20040101T000000Z\"));\nlong long diff = (now - before).total_microseconds();\n</code></pre>\n"}], "owner": {"reputation": 765, "user_id": 3959871, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c458e09e6b51e4c9f8533aa20429e217?s=128&d=identicon&r=PG&f=1", "display_name": "Ventu", "link": "https://stackoverflow.com/users/3959871/ventu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 50964502, "answer_count": 1, "score": 0, "last_activity_date": 1529571996, "creation_date": 1529501556, "question_id": 50949516, "link": "https://stackoverflow.com/questions/50949516/changing-tai-time-epoch-correctly", "title": "Changing TAI Time epoch correctly", "body": "<p>Currently, I'm working on an implementation which requires a specific time two work correctly.\nHow the time should be encoded is described as following: </p>\n\n<p><code>Timestamp = Timestamp(TAI) % 2^32\nwhere Timestamp(TAI) is the number of elapsed \nTAI milliseconds since 2004-01-01 00:00:00.000 UTC</code></p>\n\n<p>Now, I tried the following which basically works but I'm not sure if the output is correct.</p>\n\n<pre><code>timespec now;\nif (clock_gettime(CLOCK_TAI, &amp;now) == 0) {\n    // tai_clock uses microsecond ticks\n    tai_clock::rep ticks = 0;\n    ticks = now.tv_sec * period::den;\n    ticks += now.tv_nsec / 1000;\n    return tai_clock::time_point(std::chrono::microseconds(ticks));\n} else {\n    throw std::runtime_error(\"reading CLOCK_TAI failed\");\n}\n</code></pre>\n\n<p>This code snippet fetches the current TAI time on my system.\nAlso, the code requires the TAI offset seconds to be configured correctly on the system.\nUsing this code part, I get the TAI time with an epoch starting at <code>1970-01-01 00:00:00.000</code></p>\n\n<p>Now it comes to the tricky part: I have to convert the epoch to meet my requirement.</p>\n\n<p>So my quite silly approach was the following:\nOne day has <code>86400</code> TAI seconds.\nFrom <code>1970-01-01 00:00:00.000</code> to <code>2004-01-01 00:00:00.000</code> are <code>12418</code> days.\nHence, I have to subtract <code>1072915200</code> seconds from my current TAI time to get the elapsed TAI seconds since <code>2004-01-01 00:00:00.000</code>.</p>\n\n<p>So, my question is now: Can I correctly convert the epoch of my TAI time using this approach or is this trickier?</p>\n"}, {"tags": ["c++", "combinations", "permutation", "combinatorics"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 7, "creation_date": 1529500789, "post_id": 50949159, "comment_id": 88895996, "body": "If the code works, and you only want to increase performance, <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> is better suited for such a question."}, {"owner": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 1, "creation_date": 1529501103, "post_id": 50949159, "comment_id": 88896186, "body": "may be there are 4 combinations {0.5 , 1} , {1, 0.5} , {0.5 , 0.5} , {1, 1} ?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1529501119, "post_id": 50949159, "comment_id": 88896197, "body": "There are well established equations for calculating the number of combinations. The correct solution is to use the correct mathematics. See <a href=\"https://en.wikipedia.org/wiki/Combination\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Combination</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 706, "user_id": 4070330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de272559ba2ec727fe9b3108afa222f?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Kashpur", "link": "https://stackoverflow.com/users/4070330/andrew-kashpur"}, "edited": false, "score": 2, "creation_date": 1529501153, "post_id": 50949159, "comment_id": 88896226, "body": "@AndrewKashpur Order doesn&#39;t matter when generating combinations. <code>{1, 0.5}</code> is the came combination as <code>{0.5, 1}</code>. If the order matters, it&#39;s a permutation."}, {"owner": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 2, "creation_date": 1529501267, "post_id": 50949159, "comment_id": 88896302, "body": "Why won&#39;t you just compute value of binomial coefficient directly?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1529501444, "post_id": 50949159, "comment_id": 88896421, "body": "For <code>nums = {1,2,3,4}</code>, is <code>{1,1}</code> a valid output? Since this is what repetition typically means."}, {"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 1, "creation_date": 1529501822, "post_id": 50949159, "comment_id": 88896681, "body": "No, in my case the number of items in the combination is limited to the items in the input array. If the input is {1,2,3,4} then I can have these combinations: {1,2}, {1,3}, {1,4}, {2,3}, {2,4}, {3,4}"}, {"owner": {"reputation": 525, "user_id": 4418163, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0bd3eaa3560a67a8b2117c7aa02c18ec?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/4418163/atul"}, "edited": false, "score": 0, "creation_date": 1529502968, "post_id": 50949159, "comment_id": 88897543, "body": "@jacobi do you want unique combinations."}, {"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529503231, "post_id": 50949159, "comment_id": 88897720, "body": "@Fran&#231;oisAndrieux - I&#39;m unsure how to apply the mathematical formulae in my case. Can you help?"}, {"owner": {"reputation": 525, "user_id": 4418163, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/0bd3eaa3560a67a8b2117c7aa02c18ec?s=128&d=identicon&r=PG", "display_name": "Atul", "link": "https://stackoverflow.com/users/4418163/atul"}, "edited": false, "score": 0, "creation_date": 1529503249, "post_id": 50949159, "comment_id": 88897730, "body": "@jacobi just see <a href=\"https://stackoverflow.com/questions/12991758/creating-all-possible-k-combinations-of-n-items-in-c/28698654\" title=\"creating all possible k combinations of n items in c\">stackoverflow.com/questions/12991758/&hellip;</a>"}, {"owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1529510263, "post_id": 50949159, "comment_id": 88902530, "body": "@Fran&#231;oisAndrieux, those equations assume that the number of repetition is the same for each element. Counting where each element is repeated a different number of times is a little more involved."}, {"owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "reply_to_user": {"reputation": 2270, "user_id": 8964493, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/569f20d32952eb1847a1c159e95997aa?s=128&d=identicon&r=PG&f=1", "display_name": "joe_chip", "link": "https://stackoverflow.com/users/8964493/joe-chip"}, "edited": false, "score": 0, "creation_date": 1529510313, "post_id": 50949159, "comment_id": 88902551, "body": "@joe_chip, there is no binomial coefficient that I&#39;m aware of when the number of repetitions for each element is different."}], "answers": [{"comments": [{"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 0, "creation_date": 1529504279, "post_id": 50950134, "comment_id": 88898461, "body": "@JosephWood Thanks. This definitely works faster but an explanation would help."}, {"owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "reply_to_user": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 0, "creation_date": 1529512258, "post_id": 50950134, "comment_id": 88903706, "body": "I had a difficult time clearly explaining this algorithm. If anybody thinks they can add more clarity, I will gladly convert this to a community wiki."}, {"owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "edited": false, "score": 0, "creation_date": 1529514891, "post_id": 50950134, "comment_id": 88905126, "body": "I can understand the theory of the matrix. However, I am still getting my head around the code. What is &#39;myMax&#39; used for? Aren&#39;t you building an array for the sum of combinations in &#39;triangleVec&#39;?"}, {"owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "reply_to_user": {"reputation": 4369, "user_id": 3102935, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/22985d9fffff3b76a11b1f2bccbf2f42?s=128&d=identicon&r=PG&f=1", "display_name": "WorldSEnder", "link": "https://stackoverflow.com/users/3102935/worldsender"}, "edited": false, "score": 0, "creation_date": 1529630376, "post_id": 50950134, "comment_id": 88954665, "body": "@WorldSEnder, thank you so much for that link.. there is a great article in the comments to the answer."}], "tags": [], "owner": {"reputation": 5814, "user_id": 4408538, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/cPoEu.jpg?s=128&g=1", "display_name": "Joseph Wood", "link": "https://stackoverflow.com/users/4408538/joseph-wood"}, "is_accepted": true, "score": 5, "last_activity_date": 1577905609, "last_edit_date": 1577905609, "creation_date": 1529503440, "answer_id": 50950134, "question_id": 50949159, "link": "https://stackoverflow.com/questions/50949159/count-of-combinations-with-repetitions/50950134#50950134", "title": "Count of combinations with repetitions", "body": "<h1>Counting Combinations</h1>\n\n<p>Generally speaking, determining the number of combinations of a particular set is quite trivial. However, extending this to a multiset where each element is repeated a specific number of times is considerably more difficult and not as well documented. @WorldSEnder linked to a math/stackexchange answer that has a <a href=\"https://math.stackexchange.com/questions/1395657/on-counting-and-generating-all-k-permutations-of-a-multiset#comment2844974_1397088\">comment</a> with a link to this wonderful article in combinatorics called <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.93.5967&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">Combinatorial Generation</a> by Frank Ruskey. If you go to page 71, there is a section that treats this topic with greater rigor.</p>\n\n<h2>Basic definitions</h2>\n\n<ol>\n<li>Set - A collection of <strong>distinct</strong> objects.\n    - E.g.  <code>{a, b}</code> is the same as <code>{a, a, b}</code> and both have cardinality 2</li>\n<li>Multiset - Similar to a set, but allows for duplicate entries.\n    - E.g.  <code>{a, b}</code> and <code>{a, a, b}</code> are different multisets with cardinality 2 and 3 respectively</li>\n<li>Binomial Coefficient - Gives the number of <em>k</em>-element subsets of an <em>n</em>-element set.</li>\n<li>Multiset Coefficient/Number - The number of multisets of cardinality <em>k</em> with elements taken from a finite set.</li>\n</ol>\n\n<h2>Misconceptions</h2>\n\n<p>There is a belief that there is a simple formula that will quickly calculate the number of combinations for a multiset of length <em>k</em> where each element is repeated a specific number of times (see the highly upvoted comments above). Below, we examine each of the well-known methods.</p>\n\n<p>Let us start with the general application of the binomial coefficient. We immediately see that this will fail as it is strictly meant to calculate the number of combinations of a <strong>set</strong>, where duplicate entries are not allowed. In our case, duplicates are allowed.</p>\n\n<p>Reading further down on the Wikipedia page, there is a section called <a href=\"https://en.wikipedia.org/wiki/Combination#Number_of_combinations_with_repetition\" rel=\"nofollow noreferrer\">Number of combinations with repetition</a>. This looks promising as we do have <em>some</em> replication. We also see a modified binomial coefficient, which seems even more promising. A closer look reveals that this too will fail as this strictly applies to multisets where each element is repeated up to <em>k</em> times.</p>\n\n<p>Lastly, we try out the <a href=\"https://en.wikipedia.org/wiki/Multiset_coefficient\" rel=\"nofollow noreferrer\">multiset coefficient</a>. One of the examples listed looks very similar to what we are trying to accomplish.</p>\n\n<p>\"First, consider the notation for multisets that would represent {a, a, a, a, a, a, b, b, c, c, c, d, d, d, d, d, d, d} (6 as, 2 bs, 3 cs, 7 ds) in this form:\"</p>\n\n<p>This looks like a good candidate for what we are trying to derive.  However, you will see that they continue to derive the number of ways you can construct a multiset of cardinality 18 from a set of 4 distinct elements. This is equivalent to the number of <a href=\"https://en.wikipedia.org/wiki/Composition_(combinatorics)\" rel=\"nofollow noreferrer\">integer compositions</a> of 18 of length 4. E.g.</p>\n\n<pre><code>18 + 0 + 0 + 0\n17 + 1 + 0 + 0\n16 + 2 + 0 + 0\n       .\n       .\n       .\n5 +  4 + 6 + 3\n4 +  5 + 6 + 3\n3 +  6 + 6 + 3\n       .\n       .\n       .\n0 +  1 + 0 + 17\n0 +  0 + 1 + 17\n0 +  0 + 0 + 18\n</code></pre>\n\n<p>As you can see, order matters with compositions which clearly doesn't apply to our situation.</p>\n\n<p>The last two methods mentioned are derived from the renowned <a href=\"https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)\" rel=\"nofollow noreferrer\">Stars and Bars</a> method for simple counting problems. As far as I can tell, this method cannot easily be extended to our case.</p>\n\n<h2>A Working Algorithm</h2>\n\n<pre><code>unsigned long int getCombinationCount(std::vector&lt;double&gt; nums) {\n\n    unsigned long int n = nums.size();\n    unsigned long int n2 = n / 2;\n    unsigned long int numUnique = 1;\n    unsigned long int numCombinations;\n\n    std::sort(nums.begin(), nums.end());\n    std::vector&lt;int&gt; numReps;\n\n    double testVal = nums[0];\n    numReps.push_back(1);\n\n    for (std::size_t i = 1; i &lt; n; ++i) {\n        if (nums[i] != testVal) {\n            numReps.push_back(1);\n            testVal = nums[i];\n            ++numUnique;\n        } else {\n            ++numReps[numUnique - 1];\n        }\n    }\n\n    int myMax, r = n2 + 1;\n    std::vector&lt;double&gt; triangleVec(r);\n    std::vector&lt;double&gt; temp(r);\n    double tempSum;\n\n    myMax = r;\n    if (myMax &gt; numReps[0] + 1)\n        myMax = numReps[0] + 1;\n\n    for (int i = 0; i &lt; myMax; ++i)\n        triangleVec[i] = 1;\n\n    temp = triangleVec;\n\n    for (std::size_t k = 1; k &lt; numUnique; ++k) {\n        for (int i = n2; i &gt; 0; --i) {\n            myMax = i - numReps[k];\n            if (myMax &lt; 0)\n                myMax = 0;\n\n            tempSum = 0;\n            for (int j = myMax; j &lt;= i; ++j)\n                tempSum += triangleVec[j];\n\n            temp[i] = tempSum;\n        }\n        triangleVec = temp;\n    }\n\n    numCombinations = (unsigned long int) triangleVec[n2];\n\n    return numCombinations;\n}\n</code></pre>\n\n<h2>Explanation using a Modified Pascal's Triangle</h2>\n\n<p>The entries in the traditional <a href=\"https://en.wikipedia.org/wiki/Pascal%27s_triangle\" rel=\"nofollow noreferrer\">Pascal's Triangle</a> (PT from here on out) represent the binomial coefficient where the row of the triangle is the number of elements in your set and the column is the length of combinations you wish to generate. The construction of the triangle is the key to how we will attack the problem at hand.</p>\n\n<p>If you note that for the traditional PT, to obtain a particular entry, say <em>(i, j)</em> where <em>i</em> is the row and <em>j</em> is the column, you must add the entries <em>(i - 1, j - 1)</em> and <em>(i - 1, j)</em>. Here is an illustration.</p>\n\n<pre><code>                  1\n                1   1\n              1   2   1            N.B. The first 10 is in the 5th row and 3rd column\n            1   3   3   1               and is obtained by adding the entries from the\n          1   4   6   4   1             4th row and 2nd/3rd.\n        1   5   10  10  5   1\n      1   6   15  20  15  6   1\n</code></pre>\n\n<p>We can extend this to a general multiset where each element is repeated a specific number of times. Let us consider a couple of examples.</p>\n\n<p>Example 1: <code>v1 = {1, 2, 2}</code>, <code>v2 = {1, 2, 2, 3, 3, 3}</code>, and <code>v3 = {1,2,2,3,3,3,4,4,4,4}</code></p>\n\n<p>Below we have all of the possible combinations of <code>v1 choose 1 - 3</code> as well as <code>v2 choose 1 - 6</code>.</p>\n\n<pre><code>     [,1]                    [,1]\n[1,]    1               [1,]    1\n[2,]    2               [2,]    2\n                        [3,]    3\n\n     [,1] [,2]               [,1] [,2]\n[1,]    1    2          [1,]    1    2\n[2,]    2    2          [2,]    1    3\n                        [3,]    2    2\n                        [4,]    2    3\n                        [5,]    3    3\n\n     [,1] [,2] [,3]          [,1] [,2] [,3]\n[1,]    1    2    2     [1,]    1    2    2\n                        [2,]    1    2    3\n                        [3,]    1    3    3\n                        [4,]    2    2    3\n                        [5,]    2    3    3\n                        [6,]    3    3    3\n\n                             [,1] [,2] [,3] [,4]\n                        [1,]    1    2    2    3\n                        [2,]    1    2    3    3\n                        [3,]    1    3    3    3\n                        [4,]    2    2    3    3\n                        [5,]    2    3    3    3\n\n                             [,1] [,2] [,3] [,4] [,5]\n                        [1,]    1    2    2    3    3\n                        [2,]    1    2    3    3    3\n                        [3,]    2    2    3    3    3\n\n                             [,1] [,2] [,3] [,4] [,5] [,6]\n                        [1,]    1    2    2    3    3    3\n</code></pre>\n\n<p>Let us write down the number of combinations for all <em>k</em> for both <code>v1</code> and <code>v2</code>.</p>\n\n<pre><code>2  2  1\n3  5  6  5  3  1\n</code></pre>\n\n<p>I am going to give you the number of combinations for all <em>k</em>  of <code>v3</code> (I will leave it to the reader to enumerate them).</p>\n\n<pre><code>4  9 15 20 22 20 15  9  4  1\n</code></pre>\n\n<p>We combine the results above in a special way and note that things are starting to look very familiar.</p>\n\n<pre><code>         2  2  1\n     3   5   6   5  3  1\n4  9  15  20  22  20  15  9  4  1\n</code></pre>\n\n<p>We add a few ones as place holders to complete this modified PT </p>\n\n<pre><code>                1   1\n            1   2   2   1\n      1   3   5   6   5   3   1\n1  4  9  15  20  22  20  15   9  4  1\n</code></pre>\n\n<p>What does this mean? It is somewhat clear that the numbers in each successive row are a combination of the numbers in the previous row. But how?....</p>\n\n<blockquote>\n  <p>We let the frequency of each element guide us.</p>\n</blockquote>\n\n<p>For example, to obtain the third row representing the number of combinations of <code>v2 choose 1 - 6</code> (ignoring the first 1), we look to row 2. Since the frequency of the 3rd element is 3, we add the 4 elements (3 + 1.. just like with binomial coefficients for finding number of combinations of sets with distinct elements, we add 2 entries to together or 1 + 1) in the row above with the column less than or equal to the column we are finding. So we have:</p>\n\n<pre><code>if the column index is non-positive or greater than the \nnumber of columns in the previous row, the value is 0\n\n    v2 choose 3\n(3, 2) =  (2, 2 - 3) + (2, 2 - 2) + (2, 2 - 1) + (2, 2 - 0)\n       =       0     +      0     +      1     +    2 \n       =   3\n\nv2 choose 4           \n(3, 3) =  (2, 3 - 3) + (2, 3 - 2) + (2, 3 - 1) + (2, 3 - 0)\n       =       0     +      1     +      2     +    2 \n       =   5           \n\nv2 choose 5 \n(3, 4) =  (2, 4 - 3) + (2, 4 - 2) + (2, 4 - 1) + (2, 4 - 0)\n       =       1     +      2     +      2     +    1 \n       =   6\n\nv2 choose 6                                   outside of range\n(3, 5) =  (2, 5 - 3) + (2, 5 - 2) + (2, 5 - 1) + (2, 5 - 0)\n       =       2     +      2     +      1     +    0 \n       =   5\n\n       etc.\n</code></pre>\n\n<p>Continuing with this logic, let's see if we can obtain the number of <em>k</em>-combinations for <code>v3</code>. Since the frequency of the 4th element is 4, we will need to add 5 entries together.</p>\n\n<pre><code>v3 choose 3\n(4, 2) =  (3, 2 - 4) + (3, 2 - 3) + (3, 2 - 2) + (3, 2 - 1) + (3, 2 - 0)\n       =       0     +      0     +     0      +      1     +     3 \n       =   4\n\nv3 choose 4 \n(4, 3) =  (3, 3 - 4) + (3, 3 - 3) + (3, 3 - 2) + (3, 3 - 1) + (3, 3 - 0)\n       =       0     +      0     +      1     +    3       +     5\n       =   9           \n\nv3 choose 5  \n(4, 4) =  (3, 4 - 4) + (3, 4 - 3) + (3, 4 - 2) + (3, 4 - 1) + (3, 4 - 0)\n       =       0     +     1      +      3     +     5      +     6\n       =   15\n\nv3 choose 6\n(4, 5) =  (3, 5 - 4) + (3, 5 - 3) + (3, 5 - 2) + (3, 5 - 1) + (3, 5 - 0)\n       =       1     +     3      +      5     +       6    +    5\n       =   20\n\n       etc.\n</code></pre>\n\n<p>And indeed, we do get the correct number of <em>k</em>-combinations of <code>v3</code>.</p>\n\n<p>Example 2:  <code>z1 = {1,1,1,2}</code>, <code>z2 = {1,1,1,1,2,3,3,3,3,3}</code>, and <code>z3 = {1,1,1,1,2,3,3,3,3,3,4,4}</code></p>\n\n<p>You will notice that we are constructing these vectors such that each successive vector contains the previous vectors. We do this so that we will be able to properly construct our modified PT. This is analogous to the traditional PT where with each successive row, we are simply adding one number to the previous row. The modified PT for these vectors is:</p>\n\n<pre><code>                1   1   1  1\n             1   2   2   2   1\n      1  3  5  7   8   8   7   5   3  1\n  1  4   9  15  20  23   23  20  15  9  4  1\n</code></pre>\n\n<p>Let's construct <code>z2 choose 6</code> and <code>z3 choose 9</code> to see if we are correct:</p>\n\n<pre><code> z2 choose 6\n      [,1] [,2] [,3] [,4] [,5] [,6]\n [1,]    1    1    1    2    3    3\n [2,]    1    1    1    3    3    3      This shows that we produce 7 combs\n [3,]    1    1    2    3    3    3      just as predicted by our modified\n [4,]    1    1    3    3    3    3      PT (i.e. entry (3, 6 + 1) = 7)\n [5,]    1    2    3    3    3    3\n [6,]    1    3    3    3    3    3\n [7,]    2    3    3    3    3    3\n\n\n z3 choose 9\n     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9]\n[1,]    1    1    1    2    3    3    3    3    3\n[2,]    1    1    1    2    3    3    3    3    4\n[3,]    1    1    1    2    3    3    3    4    4  This shows that we produce 9 \n[4,]    1    1    1    3    3    3    3    3    4  combs just as predicted by \n[5,]    1    1    1    3    3    3    3    4    4  our modified PT (i.e. entry\n[6,]    1    1    2    3    3    3    3    3    4  (4, 9 + 1) = 9)\n[7,]    1    1    2    3    3    3    3    4    4\n[8,]    1    1    3    3    3    3    3    4    4\n[9,]    1    2    3    3    3    3    3    4    4\n</code></pre>\n\n<p>Just as a quick note, the first row of place holding ones is analogous to the second row of the traditional PT (i.e. <code>1 1</code>).  Loosely speaking (see the code for edge cases), if the first element has frequency <em>m</em>, the first row of the modified PT will contain <em>m + 1</em> ones.</p>\n\n<h2>Reason why there isn't a general formula (e.g. something similar to the binomial coefficient)</h2>\n\n<p>As you can see from the 2 examples above, the modified PT's are based on specific multisets, and thus cannot be generalized. Even if you considered multisets of certain cardinality made up of the same distinct elements, the modified PT's would differ. For example, the multiset <code>a = {1, 2, 2, 3, 3, 3}</code> and <code>b = {1, 1, 2, 2, 3, 3}</code> generate the following modified PT's respectively:</p>\n\n<pre><code>     1 1\n   1 2 2 1\n1 3 5 6 5 3 1\n\n    1 1 1\n  1 2 3 2 1\n1 3 6 7 6 3 1\n</code></pre>\n\n<p>Note that <code>a choose 2 = 5</code> whereas <code>b choose 2 = 6</code>.</p>\n\n<h2>Benchmarks:</h2>\n\n<p>Here is a link to <a href=\"https://ideone.com/F8OQXb\" rel=\"nofollow noreferrer\">ideone</a> demonstrating the speed up of the new algorithm. For the vector <code>{4, 2, 6, 4, 9, 8, 2, 4, 1, 1, 6, 9}</code>, the timing for the original was <code>2285718</code> clock ticks whereas the algorithm above completed in <code>8</code> clock ticks for a total speed up of <code>2285728 / 8 = 285714.75</code>... over one hundred thousands times faster. They both return the same number of combinations as well (i.e. 122). Most of the speed gains come from avoiding explicitly generating any combinations (or permutations as the OP's code does).</p>\n"}], "owner": {"reputation": 5541, "user_id": 9967571, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EwjwT.png?s=128&g=1", "display_name": "jignatius", "link": "https://stackoverflow.com/users/9967571/jignatius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 1, "accepted_answer_id": 50950134, "answer_count": 1, "score": 8, "last_activity_date": 1577905609, "creation_date": 1529500468, "last_edit_date": 1556625562, "question_id": 50949159, "link": "https://stackoverflow.com/questions/50949159/count-of-combinations-with-repetitions", "title": "Count of combinations with repetitions", "body": "<p>I have a very inefficient way of counting the combinations of <code>N/2</code> items from an array of size N. What I do is sort the array to begin with and then loop through the the permutations of the array, creating multisets with half the elements and insert that into a set. Finally I get the count of the set.</p>\n\n<pre><code>long GetCombinations(std::vector&lt;double&gt; nums) {\n    long combinations = 0;\n    std::sort(nums.begin(), nums.end());\n    std::set&lt;std::multiset&lt;double&gt;&gt; super_set;\n\n    do {\n        std::multiset&lt;double&gt; multi_set;\n\n        for (unsigned int i = 0; i &lt; nums.size() / 2; ++i)\n            multi_set.insert(nums[i]);\n\n        auto el = (super_set.insert(multi_set));\n\n        if (el.second)\n            ++combinations;\n\n    } while (std::next_permutation(nums.begin(), nums.end()));\n\n    return combinations;\n}\n</code></pre>\n\n<p>The code works but it is very inefficient. For the given array <code>[0.5, 0.5, 1, 1]</code> there are 3 combinations of size 2:\n<br></p>\n\n<blockquote>\n  <p>0.5, 0.5<br>\n  1, 1<br>\n  1, 0.5</p>\n</blockquote>\n\n<p><strong>Is there a different algorithm or approach that can increase the speed of this code?</strong></p>\n"}, {"tags": ["c++", "esp8266", "mbed", "nucleo"], "comments": [{"owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1529506804, "post_id": 50949103, "comment_id": 88900247, "body": "ESP-01 needs more than those 4 wires."}, {"owner": {"reputation": 19, "user_id": 9858213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ALDSMQJF", "link": "https://stackoverflow.com/users/9858213/aldsmqjf"}, "reply_to_user": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "edited": false, "score": 0, "creation_date": 1529517804, "post_id": 50949103, "comment_id": 88906594, "body": "At this point I tried most wirings you&#39;d find online. Most of them do use 4 wires only and bridge RST to VCC."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 9858213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ALDSMQJF", "link": "https://stackoverflow.com/users/9858213/aldsmqjf"}, "edited": false, "score": 0, "creation_date": 1529564939, "post_id": 50960695, "comment_id": 88921488, "body": "Thanks for the answer. Unfortunately, it doesn&#39;t seem to work. Although I do have a message saying &quot;Ai-Thinker Technology Co. Ltd.  Ready&quot; when I reset it."}], "tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1529557352, "creation_date": 1529557352, "answer_id": 50960695, "question_id": 50949103, "link": "https://stackoverflow.com/questions/50949103/esp8266-doesnt-respond-to-at-commands/50960695#50960695", "title": "ESP8266 doesn&#39;t respond to AT commands", "body": "<p>Wire the ESP module <a href=\"https://github.com/ARMmbed/dsa-2017/raw/master/img/pinout-esp8266.jpg\" rel=\"nofollow noreferrer\">like this</a> - so CH_PD also to high. After you can use <a href=\"https://os.mbed.com/users/mbedAustin/code/SerialPassthrough/file/96cb82af9996/main.cpp/\" rel=\"nofollow noreferrer\">SerialPassthrough</a> to verify whether the module works (set baud rate to 115,200 on both).</p>\n\n<p>Optionally also wire the RESET pin of the module to a digital pin. Useful to reset the ESP module (pull low, then pull high to reset).</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 9858213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ALDSMQJF", "link": "https://stackoverflow.com/users/9858213/aldsmqjf"}, "is_accepted": false, "score": 0, "last_activity_date": 1529570646, "creation_date": 1529570646, "answer_id": 50964149, "question_id": 50949103, "link": "https://stackoverflow.com/questions/50949103/esp8266-doesnt-respond-to-at-commands/50964149#50964149", "title": "ESP8266 doesn&#39;t respond to AT commands", "body": "<p>Answering my own question...</p>\n\n<p>Contrary to what you might find online in several documentations including mbed's, using character per character passthrough won't work because the module will interpret each character one by one. Using <code>puts</code> instead of <code>putc</code> solved my issue.</p>\n"}], "owner": {"reputation": 19, "user_id": 9858213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ALDSMQJF", "link": "https://stackoverflow.com/users/9858213/aldsmqjf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1596184596, "creation_date": 1529500306, "last_edit_date": 1529501295, "question_id": 50949103, "link": "https://stackoverflow.com/questions/50949103/esp8266-doesnt-respond-to-at-commands", "title": "ESP8266 doesn&#39;t respond to AT commands", "body": "<p>I have a <a href=\"http://www.st.com/en/evaluation-tools/nucleo-f103rb.html\" rel=\"nofollow noreferrer\">Nucleo F103RB</a> and a <a href=\"https://www.sparkfun.com/products/13678\" rel=\"nofollow noreferrer\">Sparkfun ESP8266</a>.</p>\n\n<p>I wanted to send AT commands to the ESP8266 through the Nucleo. </p>\n\n<p><strong>The Wiring I used:</strong></p>\n\n<pre><code>TX  =&gt; D8\nRX  =&gt; D2\nGND =&gt; GND\n3V3 =&gt; 3V3\n</code></pre>\n\n<p>I used <code>D8</code> and <code>D2</code> of Serial1 because  <code>D0</code> and <code>D1</code> pins are not available per default as they are used by the STLink Virtual Comm Port. I also tried <code>D10</code> instead of <code>D8</code> as well as putting <code>RST</code> on <code>3V3</code> and inverting <code>TX</code> and <code>RX</code></p>\n\n<p><strong>Here is the code I have on mbed:</strong></p>\n\n<pre><code>#include \"mbed.h\"\n\nSerial pc (D1, D0);  \nSerial esp(D8, D2);\n\nint main() \n{\n    pc.baud(115200);\n    esp.baud(115200);\n    wait(0.1);\n    pc.printf(\"start\\r\\n\");\n    esp.printf(\"AT+RST\\r\\n\");\n    while(true) {\n        if(pc.readable()) {\n            char c = pc.getc();\n            pc.putc(c); //local echo\n            esp.putc(c);\n        }\n        if(esp.readable()) {\n            pc.printf(\"reading esp\");\n            char c = esp.getc();\n            pc.putc(c);\n        }\n    }\n}\n</code></pre>\n\n<p>I used <code>Serial</code> instead of <code>RawSerial</code> because <code>RawSerial</code> wasn't working at all for me, I'm not sure why.</p>\n\n<p>The ESP8266 module doesn't respond to <a href=\"https://cdn.sparkfun.com/datasheets/Wireless/WiFi/Command%20Doc.pdf\" rel=\"nofollow noreferrer\">any AT command available to the factory firmware</a>. <code>esp.readable()</code> returns false no matter what and <code>esp.printf(\"AT+RST\\r\\n\");</code> doesn't do anything.</p>\n\n<p>The board is brand new and the LEDs work fine.</p>\n"}, {"tags": ["c++", "visual-studio", "opencv", "exception", "camera-calibration"], "comments": [{"owner": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "edited": false, "score": 0, "creation_date": 1529500913, "post_id": 50949024, "comment_id": 88896070, "body": "Could you write also what types of parameters does &#39;findChessboardCorners&#39; take? Maybe you are passing your arguments in incorrect way? (I mean e.g. passing pointer where there is no need for it or something like that)"}, {"owner": {"reputation": 154, "user_id": 5121683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KK9JY.png?s=128&g=1", "display_name": "tommy61157", "link": "https://stackoverflow.com/users/5121683/tommy61157"}, "reply_to_user": {"reputation": 711, "user_id": 4802475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZETd6.png?s=128&g=1", "display_name": "Paradowski", "link": "https://stackoverflow.com/users/4802475/paradowski"}, "edited": false, "score": 0, "creation_date": 1529501641, "post_id": 50949024, "comment_id": 88896563, "body": "This link: <a href=\"https://docs.opencv.org/3.4.1/d9/d0c/group__calib3d.html#ga93efa9b0aa890de240ca32b11253dd4a\" rel=\"nofollow noreferrer\">docs.opencv.org/3.4.1/d9/d0c/&hellip;</a> should be able to explain how it finds parameters, if it doesn&#39;t take you to it automatically on the page, just scroll down a bit, it&#39;s a bit awkward to post as a comment, so I&#39;m putting the link here."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 5121683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KK9JY.png?s=128&g=1", "display_name": "tommy61157", "link": "https://stackoverflow.com/users/5121683/tommy61157"}, "edited": false, "score": 0, "creation_date": 1530099535, "post_id": 51033715, "comment_id": 89113416, "body": "I started with the code offered at the links provided and it has always frozen with the IP cameras, yet never with the webcam. I have two instances of the waitkey statement, one towards the bottom and one in the middle which is int key == waitkey(1); and I never quite fully understood how that worked myself. Do I modify the bottom one, higher up one, or both? Also, what do you mean by referencing my scanf_s statements? They&#39;re essentially trying to fill in variables for the calculations. I&#39;m currently just having it build through visual studio code itself to run it and I just input the info."}], "tags": [], "owner": {"reputation": 1, "user_id": 9991794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d781e78e82926fcf9dabf7a9843bc845?s=128&d=identicon&r=PG", "display_name": "thehibbard1", "link": "https://stackoverflow.com/users/9991794/thehibbard1"}, "is_accepted": false, "score": 0, "last_activity_date": 1529977252, "last_edit_date": 1529977252, "creation_date": 1529976334, "answer_id": 51033715, "question_id": 50949024, "link": "https://stackoverflow.com/questions/50949024/opencv3-4-1-error-assertion-failed-dims-2-step0-0-in-cvmatloc/51033715#51033715", "title": "OpenCV(3.4.1) Error: Assertion failed (dims &lt;= 2 &amp;&amp; step[0] &gt; 0) in cv::Mat::locateROI", "body": "<p>What was the last code you added before it started to freeze in the first frame calibration code?</p>\n\n<p>#\nReference your sleep statement (which is in the first frame calibration code). I'm assuming you introduced to reduce CPU usage, I would remove it and modify the waitKey() method in the main loop at the bottom to waitKey (100) to wait 100 milliseconds (or less) in between reads from the stream.  </p>\n\n<ol>\n<li><p>The sleep statement where you have it is not where most of your CPU usage is.  Your just in the calibration section of the app that is only executed once.  I would remove it. </p></li>\n<li><p>Where your computer really spins is the main while(1) loop at the bottom where it is continually reading from the stream.  </p></li>\n<li><p>That said, you don't actually need to use a sleep statement in the main while loop at the bottom as you call the waitKey() function.  Simply change the call to waitKey(100).</p></li>\n</ol>\n\n<p>#\nReference your scanf_s statements:  Either convert those to #defines so we all know what your inputs are or show us the command line you entered to run this. Important piece of info. </p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 154, "user_id": 5121683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KK9JY.png?s=128&g=1", "display_name": "tommy61157", "link": "https://stackoverflow.com/users/5121683/tommy61157"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 7480, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1614830901, "creation_date": 1529500089, "last_edit_date": 1529671871, "question_id": 50949024, "link": "https://stackoverflow.com/questions/50949024/opencv3-4-1-error-assertion-failed-dims-2-step0-0-in-cvmatloc", "title": "OpenCV(3.4.1) Error: Assertion failed (dims &lt;= 2 &amp;&amp; step[0] &gt; 0) in cv::Mat::locateROI", "body": "<p>I will post my code and the exception after explaining my issue. So basically, I'm making a program where the end goal is to be able to calibrate a fisheye camera which is then on a rtsp stream from the camera that will be recorded via zoneminder using OpenCV and a lot of the code so far I have gotten from here: </p>\n\n<p><a href=\"http://aishack.in/tutorials/calibrating-undistorting-opencv-oh-yeah/\" rel=\"nofollow noreferrer\">http://aishack.in/tutorials/calibrating-undistorting-opencv-oh-yeah/</a> </p>\n\n<p>But I've just started to notice an exception that has been popping up on line 53 of my code</p>\n\n<pre><code> bool found = findChessboardCorners(image, board_sz,corners, CV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS); \n</code></pre>\n\n<p>and I have no idea what exactly is causing it, I'm still new to a lot of what I'm trying to do along with stack overflow in general, so feel free to leave any input you feel might be helpful or ask any questions that may need to be asked.</p>\n\n<p>Also a quick note if you run the code yourself is that stack overflow seems to like to split certain lines up, so keep that in mind along with the fact that you'll need OpenCV.</p>\n\n<p>Code:</p>\n\n<pre><code>// ConsoleApplication2.cpp : Defines the entry point for the console \napplication.\n\n#include &lt;opencv2\\videoio.hpp&gt;\n#include &lt;opencv2\\highgui.hpp&gt;\n#include &lt;opencv\\cv.hpp&gt;\n#include &lt;opencv\\cv.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n\n\nusing namespace cv;\nusing namespace std;\n\nint main (){\nint numBoards = 0;\nint numCornersHor;\nint numCornersVer;\n\nprintf(\"Enter number of corners along width: \");\nscanf_s(\"%d\", &amp;numCornersHor);\n\nprintf(\"Enter number of corners along height: \");\nscanf_s(\"%d\", &amp;numCornersVer);\n\nprintf(\"Enter number of boards: \");\nscanf_s(\"%d\", &amp;numBoards);\n\nint numSquares = numCornersHor * numCornersVer;\nSize board_sz = Size(numCornersHor, numCornersVer);\n\nVideoCapture capture = VideoCapture(\"rtsp://172.16.127.27:554/mpeg4\");\n\nvector&lt;vector&lt;Point3f&gt;&gt; object_points;\nvector&lt;vector&lt;Point2f&gt;&gt; image_points;\n\nvector&lt;Point2f&gt; corners;\nint successes = 0;\n\nMat image;\nMat gray_image;\ncapture &gt;&gt; image;\n\nvector&lt;Point3f&gt; obj;\nfor (int j = 0; j &lt; numSquares; j++)\n    obj.push_back(Point3f(j / numCornersHor, j%numCornersHor, 0.0f));\n\nwhile (successes &lt; numBoards) {\n    this_thread::sleep_for(chrono::milliseconds(100));\n    cvtColor(image, gray_image, CV_BGR2GRAY);\n\n    bool found = findChessboardCorners(image, board_sz, corners, \nCV_CALIB_CB_ADAPTIVE_THRESH | CV_CALIB_CB_FILTER_QUADS);\n\n    if (found) {\n        cornerSubPix(gray_image, corners, Size(11,11), Size(-1, -1), \nTermCriteria(CV_TERMCRIT_EPS | CV_TERMCRIT_ITER, 30, 0.1));\n        drawChessboardCorners(gray_image, board_sz, corners, found);\n    }\n\n    imshow(\"win1\", image);\n    imshow(\"win2\", gray_image);\n\n    capture &gt;&gt; image;\n    int key = waitKey(1);\n\n    if (key == 27)\n\n        return 0;\n\n    if (key == ' ' &amp;&amp; found != 0){\n        image_points.push_back(corners);\n        object_points.push_back(obj);\n\n        printf(\"Snap stored!\");\n\n        successes++;\n\n        if (successes &gt;= numBoards)\n            break;\n    }\n}\n\nMat intrinsic = Mat(3, 3, CV_32FC1);\nMat distCoeffs;\nvector&lt;Mat&gt; rvecs;\nvector&lt;Mat&gt; tvecs;\n\nintrinsic.ptr&lt;float&gt;(0)[0] = 1;\nintrinsic.ptr&lt;float&gt;(1)[1] = 1;\n\ncalibrateCamera(object_points, image_points, image.size(), intrinsic, \ndistCoeffs, rvecs, tvecs);\n\nMat imageUndistorted;\nwhile (1) {\n    capture &gt;&gt; image;\n    undistort(image, imageUndistorted, intrinsic, distCoeffs);\n\n    imshow(\"win1\", image);\n    imshow(\"win2\", imageUndistorted);\n    waitKey(1);\n}\n\ncapture.release();\n\nreturn 0;\n}\n</code></pre>\n\n<p>Error in Console:</p>\n\n<pre><code>OpenCV(3.4.1) Error: Assertion failed (dims &lt;= 2 &amp;&amp; step[0] &gt; 0) in \ncv::Mat::locateROI, file C:\\build\\master_winpack-build-win64- \nvc15\\opencv\\modules\\core\\src\\matrix.cpp, line 760\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>Exception thrown at 0x00007FFEFC21A388 in ConsoleApplication2.exe: Microsoft \nC++ exception: cv::Exception at memory location 0x000000637891D640.\nException thrown at 0x00007FFEFC21A388 in ConsoleApplication2.exe: Microsoft \nC++ exception: [rethrow] at memory location 0x0000000000000000.\nException thrown at 0x00007FFEFC21A388 in ConsoleApplication2.exe: Microsoft \nC++ exception: cv::Exception at memory location 0x000000637891D640.\nUnhandled exception at 0x00007FFEFC21A388 in ConsoleApplication2.exe: \nMicrosoft C++ exception: cv::Exception at memory location 0x000000637891D640.\n</code></pre>\n\n<p>Edit: So, oddly, I'm no longer having this issue, but I'll still leave this question up in case anyone else happens to have this issue or has some insight that may still be relevant, I'm still having an issue where the camera seems to freeze on the first frame it can capture over rtsp despite not having the issue when using the webcam, but I'll leave that for a separate question since this is not the issue here.</p>\n"}, {"tags": ["c++", "memory", "memory-management", "stdvector"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 9, "creation_date": 1529500178, "post_id": 50949006, "comment_id": 88895591, "body": "It&#39;s legal to have a pointer to a non-existing object right after the end of an array as long as you don&#39;t dereference it."}, {"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 1, "creation_date": 1529500309, "post_id": 50949006, "comment_id": 88895682, "body": "Returning begin()+size() is perfectly valid."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1529503695, "post_id": 50949006, "comment_id": 88898002, "body": "<code>begin()+size()</code> is equivalent to <code>end()</code> even if <code>iterator</code> is not a pointer"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1529506295, "post_id": 50949006, "comment_id": 88899845, "body": "@HolyBlackCat, if you have an answer, please don&#39;t write it in a comment. Comments are for clarification and improvement of the question; answers should be in an answer."}], "answers": [{"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1529500952, "post_id": 50949140, "comment_id": 88896088, "body": "My reading of the standard suggests to me that the <code>std::cout &lt;&lt; i</code> statement is UB."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1529500983, "post_id": 50949140, "comment_id": 88896117, "body": "@Bathsheba elaborate."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1529501517, "post_id": 50949140, "comment_id": 88896469, "body": "Per <a href=\"https://stackoverflow.com/a/44182938/4342498\">this</a> it is implementation defined behavior in C++14 and beyond and UB in C++11 on back."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1529501626, "post_id": 50949140, "comment_id": 88896544, "body": "Huh,  we all learned something new today. let me remove that part."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1529501689, "post_id": 50949140, "comment_id": 88896595, "body": "It is still legal to assign to it, you just can&#39;t read from it."}, {"owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "edited": false, "score": 0, "creation_date": 1529501838, "post_id": 50949140, "comment_id": 88896696, "body": "OK, now I&#39;m confused (and I&#39;ll probably delete my answer soon), reading a pointer of invalid memory/object is UB? or just deallocated memory? cuz if it&#39;s the first, how come <code>end</code> works?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1529502123, "post_id": 50949140, "comment_id": 88896934, "body": "@DavidHaim Using a pointer after <code>delete</code> and comparing to a past then end pointer are different things.  Both of them are not dereferencable but the past then end pointer can be compared to while the deleted pointer can&#39;t be."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1529502925, "post_id": 50949140, "comment_id": 88897517, "body": "One-past-the-end pointer is isn&#39;t an invalid pointer. <code>delete</code> renders a pointer invalid."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1529505342, "post_id": 50949140, "comment_id": 88899191, "body": "i have to admit that I wasnt sure about <code>std::cout &lt;&lt; i;</code>. Anyhow I think we all agree that <code>deleted</code> pointers are no good and mostly relevant for language lawyers only"}], "tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 5, "last_activity_date": 1529502247, "last_edit_date": 1529502247, "creation_date": 1529500421, "answer_id": 50949140, "question_id": 50949006, "link": "https://stackoverflow.com/questions/50949006/do-i-have-to-own-the-end-pointer-for-end-when-implementing-stdvector/50949140#50949140", "title": "Do I have to own the &quot;end&quot; pointer for end() when implementing std::vector?", "body": "<p>The standard prohibits <em>dereferencing</em> an invalid pointer (and the standard goes a great length describing what may invalidate a pointer, for example the life-time of the pointee, life-time of the memory chunk itself and the alignment of the pointer).</p>\n\n<p>One can hold an invalid pointer as long as the user of that pointer doesn't dereference it, and in some cases as long as the user of that pointer doesn't read it (see comment section).</p>\n\n<p>as you suggested yourself, <code>end</code> is simply <code>return begin() + size()</code></p>\n"}, {"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 2, "last_activity_date": 1529504166, "creation_date": 1529504166, "answer_id": 50950370, "question_id": 50949006, "link": "https://stackoverflow.com/questions/50949006/do-i-have-to-own-the-end-pointer-for-end-when-implementing-stdvector/50950370#50950370", "title": "Do I have to own the &quot;end&quot; pointer for end() when implementing std::vector?", "body": "<p>A <code>T*</code> value is <em>valid</em> if it points to a <code>T</code> (which may be a sub-object of an array) <em>or</em> if it points one-beyond-the-end of a <code>T[]</code>. All other values are <em>invalid</em>, and <em>using</em> such a value is undefined behaviour. </p>\n\n<p>This means you can <em>compare</em> (<code>&lt;</code>, <code>==</code>, etc) <em>valid</em> pointers, but not <em>invalid</em> pointers.</p>\n\n<p>A <code>T*</code> value is <em>dereferenceable</em> if it points to a T. Dereferencing an <em>invalid</em> pointer, or a one-beyond-the-end pointer is undefined behaviour. This is a different set of values to <em>valid</em> pointers.</p>\n\n<p><code>begin()+size()</code> will give you a <em>valid</em> pointer, which is <em>not dereferenceable</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1529566989, "post_id": 50952601, "comment_id": 88922707, "body": "Sounds familiar. C++98 forgot to state that <code>std::vector</code> is contiguous, even though everyone knew it was."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1529510696, "creation_date": 1529510696, "answer_id": 50952601, "question_id": 50949006, "link": "https://stackoverflow.com/questions/50949006/do-i-have-to-own-the-end-pointer-for-end-when-implementing-stdvector/50952601#50952601", "title": "Do I have to own the &quot;end&quot; pointer for end() when implementing std::vector?", "body": "<p>Your first problem is that it isn't possible at this time to hand roll a standard compliant std vector.  There is no way to create a buffer with room for K Ts of which the first N are in an array of Ts, then resize this to N+1 Ts without reallocating the first N.</p>\n\n<p>This is due to the fact that a buffer containing N (or N+1) adjacent Ts is not an array of Ts, and pointer arithmetic on <code>T*</code>s won't work quite right (under the standard) within a mere buffer of adjacent Ts, the way it works with a real array of <code>T</code>s.</p>\n\n<p>This is because the standard limits how far you can do pointer arithmetic on a <code>T*</code> to be within the <code>T</code> or one after; even if the <code>T</code> lives in a packed struct or buffer.  Such limitations restrict how \"reachable\" objects are; if you have a struct with 3 <code>int</code>s, no arithmetic on an <code>int*</code> could modify more than one, so certain caching can be assumed to work and the compiler doesn't have to go back to RAM each access.</p>\n\n<p>The unitended side effect is that there is no way to legally implement std vector.  This is a flaw imnthe standard, the comittee is aware of it, and I asume someone is fixing it (for all I know it is fixed in <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a>, I don't think I missed the fix in <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>).</p>\n\n<p>That being said, you can ignore all this, because most compilers get sufficiently confused by manual object construction in a contiguous buffer that their code to exploit the assimptions doesn't break your hand rolled vector.</p>\n\n<p>Regardless, defined pointers values are those into an array, those one-past-the-end of an array, and individual objects can be treated as arrays of size 1 for this purpose.  Pointers one-past-the-end exhibit UB if dereferenced even if an object exists there.  Pointers in that range can be compared with <code>&lt;</code> <code>&gt;=</code> etc with each other (but not with pointers within/one-past other arrays).  None will compare <code>==</code> to null, and all will compare <code>!=</code> to null.  <code>!=</code> and <code>==</code> I believe work as you'd expect with them.</p>\n"}], "owner": {"reputation": 629, "user_id": 8124507, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0f4c546e2ba73af5048a059d424cbd4c?s=128&d=identicon&r=PG&f=1", "display_name": "bluedragon", "link": "https://stackoverflow.com/users/8124507/bluedragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 50949140, "answer_count": 3, "score": 2, "last_activity_date": 1529510696, "creation_date": 1529500023, "last_edit_date": 1529505999, "question_id": 50949006, "link": "https://stackoverflow.com/questions/50949006/do-i-have-to-own-the-end-pointer-for-end-when-implementing-stdvector", "title": "Do I have to own the &quot;end&quot; pointer for end() when implementing std::vector?", "body": "<p>Let's say I have my own implementation of <code>std::vector</code>, which provides <code>begin()</code> and <code>end()</code> functions for iterations. It may happen that <code>size()</code>==<code>capacity()</code> and pointer returned by <code>end()</code> is not owned by me.  Will it be safe or do I need to ensure that <code>size()</code> &lt; <code>capacity()</code>?</p>\n\n<p>I know this dilemma can be overcome by using custom iterator classes, but here I am talking about the simpler case when <code>begin()</code> simply returns a pointer to the start of buffer, and <code>end()</code> to the <code>begin()+size()</code>.</p>\n"}, {"tags": ["c++", "qt", "qobject"], "comments": [{"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1529499796, "post_id": 50948831, "comment_id": 88895332, "body": "try to remove getters. MEMBER keyword automatically creates getter and setter for property"}, {"owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "reply_to_user": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "edited": false, "score": 0, "creation_date": 1529500291, "post_id": 50948831, "comment_id": 88895670, "body": "commented out getters (wich are not included in the macros) still not working, but thanks"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529500773, "post_id": 50949091, "comment_id": 88895985, "body": "Removing getters won&#39;t do any difference as they are not referenced in the macros with READ or WRITE, also this is NOT what i want, emitting manually change signal works well (I tried before posting) BUT as I understand (if I&#39;m not wrong) using MEMBER will automatically emit the signal in FACT it WON&#39;T and the problem is here"}, {"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "reply_to_user": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529505328, "post_id": 50949091, "comment_id": 88899184, "body": "If you change property from qml it will automaticaly emits signal. But if you change property&#39;s value form c++ side it won&#39;t emit any signal."}, {"owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529505709, "post_id": 50949091, "comment_id": 88899436, "body": "Ok I fugured out I have to use setProperty() to emit signal auto in C++, but if I change it form qml it does not emit the signal, why?"}, {"owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529506300, "post_id": 50949091, "comment_id": 88899850, "body": "No, sorry IT DOES emit the signal, but it does NOT update the member variable, it is not clear at all the behavior of this property system to me even if I read the documentation extensively..."}, {"owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "reply_to_user": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529507047, "post_id": 50949091, "comment_id": 88900410, "body": "Ok. If i get it right  1) you use ``` setProperty(&quot;current_view&quot;, 1) ``` instead of ```  this-&gt;m_current_view=1;         emit sCurrentViewChanged(); ``` in c++ 2) you move instance of your object ot qml and use it in qml as possible solution: try to inherit your class from QQuickItem, register it and import  in qml. After that create instance in qml and try to use this property"}], "tags": [], "owner": {"reputation": 781, "user_id": 3013108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/811dd61039ad617bae9e3469815cc7fc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Semenov", "link": "https://stackoverflow.com/users/3013108/andrey-semenov"}, "is_accepted": false, "score": -1, "last_activity_date": 1529500280, "creation_date": 1529500280, "answer_id": 50949091, "question_id": 50948831, "link": "https://stackoverflow.com/questions/50948831/q-property-system-not-working-as-expected/50949091#50949091", "title": "Q_PROPERTY System not working as expected", "body": "<p>As you can see in <a href=\"https://wiki.qt.io/New_Features_in_Qt_5.1\" rel=\"nofollow noreferrer\">this</a> article:</p>\n\n<blockquote>\n  <p>New keyword in Q_PROPERTY: MEMBER let you bind a property to a class member without requiring to have a getter or a setter.</p>\n</blockquote>\n\n<p>So you should remove your getters, and your result code will look like this</p>\n\n<pre><code>class InterfaceBackend : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(quint8 current_view MEMBER m_current_view NOTIFY sCurrentViewChanged)\n    Q_PROPERTY(quint8 future_view MEMBER m_future_view NOTIFY sFutureViewChanged)\n\npublic:\n    explicit InterfaceBackend(QObject *parent = 0)\n        : QObject(parent)\n    {\n        this-&gt;setObjectName(\"backend\");\n        QObject::connect(this, &amp;InterfaceBackend::sFutureViewChanged, []() { qDebug() &lt;&lt; \"sFutureViewChanged\";});\n        this-&gt;m_current_view=1;\n        emit sCurrentViewChanged();\n        this-&gt;m_future_view=1;\n        emit sFutureViewChanged();\n    }\n    ~InterfaceBackend() = default;\n\nprivate:\n    quint8 m_current_view;\n    quint8 m_future_view;\n    QByteArray m_selected_language;\n\npublic slots:\n    void onLanguageSelected(QByteArray language) {\n        this-&gt;m_selected_language=language;\n        this-&gt;m_future_view=2;\n        emit sFutureViewChanged();\n    }\n\nsignals:\n    void sCurrentViewChanged();\n    void sFutureViewChanged();\n\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 1311099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76856448283aaacd1ee0a06793ea7038?s=128&d=identicon&r=PG", "display_name": "Hamed Masafi", "link": "https://stackoverflow.com/users/1311099/hamed-masafi"}, "is_accepted": false, "score": -1, "last_activity_date": 1529501483, "creation_date": 1529501483, "answer_id": 50949481, "question_id": 50948831, "link": "https://stackoverflow.com/questions/50948831/q-property-system-not-working-as-expected/50949481#50949481", "title": "Q_PROPERTY System not working as expected", "body": "<p>Every Q_PROPERTY must have READ public method and WRITE public slot, also the signal will never automatically emited, you should emit it whenever MEMBER change.</p>\n\n<pre><code>class InterfaceBackend : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(quint8 current_view MEMBER m_current_view READ currentView WRITE setCurrentView NOTIFY sCurrentViewChanged)\n    Q_PROPERTY(quint8 future_view MEMBER m_future_view READ futureView WRITE setFutureView NOTIFY sFutureViewChanged)\n\npublic:\n    explicit InterfaceBackend(QObject *parent = 0);\n    ~InterfaceBackend();\n\n    quint8 currentView() const\n    {\n        return m_current_view;\n    }\n    quint8 futureView() const\n    {\n        return m_future_view;\n    }\n\nprivate:\n    quint8 m_current_view;\n    quint8 m_future_view;\n    QByteArray m_selected_language;\n\npublic slots:\n    void onLanguageSelected(QByteArray language);\n\n    void setCurrentView(quint8 current_view)\n    {\n        if (m_current_view == current_view)\n            return;\n\n        m_current_view = current_view;\n        emit sCurrentViewChanged(m_current_view);\n    }\n\n    void setFutureView(quint8 future_view)\n    {\n        if (m_future_view == future_view)\n            return;\n\n        m_future_view = future_view;\n        emit sFutureViewChanged(m_future_view);\n    }\n\nprivate slots:\n\n\nsignals:\n    void sCurrentViewChanged(quint8 current_view);\n    void sFutureViewChanged(quint8 future_view);\n\n};\n\n\nInterfaceBackend::InterfaceBackend(QObject *parent) : QObject(parent)\n{\n    this-&gt;setObjectName(\"backend\");\n    QObject::connect(this, &amp;InterfaceBackend::sFutureViewChanged, []() {qDebug() &lt;&lt; \"sFutureViewChanged\";});\n    this-&gt;m_current_view=1;\n    this-&gt;m_future_view=1;\n}\n\nInterfaceBackend::~InterfaceBackend()\n{\n\n}\n\nvoid InterfaceBackend::onLanguageSelected(QByteArray language)\n{\n    this-&gt;m_selected_language=language;\n    this-&gt;m_future_view=2;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529511464, "post_id": 50951855, "comment_id": 88903228, "body": "this is clarifying indeed, say C++ side is ok, but in QML if I bind the propery current_view like: &quot;property int current_view: backend.current_view&quot; and QML edits this property, back in C++ I receive only the signal onCurrentViewChanged but the variable does not get updated!!"}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "reply_to_user": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "edited": false, "score": 0, "creation_date": 1529515489, "post_id": 50951855, "comment_id": 88905433, "body": "QML-Bindings are unidirectional. Changes to <code>backend.current_view</code> will update the QML property, but not the other way around."}], "tags": [], "owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "is_accepted": false, "score": 1, "last_activity_date": 1529508433, "creation_date": 1529508433, "answer_id": 50951855, "question_id": 50948831, "link": "https://stackoverflow.com/questions/50948831/q-property-system-not-working-as-expected/50951855#50951855", "title": "Q_PROPERTY System not working as expected", "body": "<p>To give an answer that is technically more accurate:</p>\n\n<p>The <code>MEMBER</code> in <code>Q_PROPERTY</code> will tell the moc (Meta object compiler) that when accessing the property <em>via the meta object</em> it should use the member directly instead of a getter or setter method. So the moc will the generate a setter method internally that sets the member <strong>and</strong> emits the signal - it basically just does the work of writing getters/setters for you. Since changing a member needs to emit the change signal, this is automatically done when the property is written from the <em>meta object system</em>. So, calling:</p>\n\n<pre><code>backend-&gt;setProperty(\"future_view\", future_view);\n</code></pre>\n\n<p>will correctly emit the changed signal. This is the only guarantee that is given when using MEMBER. Changes, that are done via the meta property will trigger the change signal. This means if you would set <code>future_view</code> from QML directly, without the <code>onLanguageSelected</code> method, it would actually work.</p>\n\n<p>In your example however you directly write a value to the member inside a special method - This will not trigger the signal automatically! (I mean, how should Qt even know you did that). So what you need to do is whenever you change the value of your member you need to emit the change signal yourself:</p>\n\n<pre><code>void onLanguageSelected(QByteArray language)\n{\n    this-&gt;m_selected_language=language;\n    this-&gt;m_future_view=2;\n    emit sFutureViewChanged();\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Edit:</strong> If you were trying prevent the properties from beeing written directly from QML, using <code>MEMBER</code> will not work! Use a getter instead and only register the getter with the property. Use the same code as above to write and change the properties:</p>\n\n<pre><code>    Q_PROPERTY(quint8 future_view READ futureView NOTIFY sFutureViewChanged)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "is_accepted": false, "score": -1, "last_activity_date": 1529564230, "creation_date": 1529564230, "answer_id": 50962228, "question_id": 50948831, "link": "https://stackoverflow.com/questions/50948831/q-property-system-not-working-as-expected/50962228#50962228", "title": "Q_PROPERTY System not working as expected", "body": "<p>Spending some time, I got it working as I need, althought this is EXTREMELY UGLY and BY NO MEANS DECLARATIVE I think it is the only way to achive double binding, and maybe it will be helpful for other people approaching the problem. Note this is not an accepted answer, I still hope someone somewhere, perhaps in the future if and when Qt will be updated, could come up with a far more elegant solution.</p>\n\n<p>Main disadvantages: longer and verbose code, one has to use setters everywhere and (try not forget)</p>\n\n<p>The property system doesn't do anything automatically in the end, just states wich properties are exposed and wich are their getters/setters and change signals</p>\n\n<p>c++</p>\n\n<pre><code>class InterfaceController : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(quint8 current_view READ getCurrentView WRITE setCurrentView NOTIFY sCurrentViewChanged)\n    Q_PROPERTY(quint8 future_view READ getFutureView WRITE setFutureView NOTIFY sFutureViewChanged)\n\npublic:\n    explicit InterfaceController(QObject *parent = 0);\n\n    //getters\n    quint8 getCurrentView() { return this-&gt;m_current_view; }\n    quint8 getFutureView() { return this-&gt;m_future_view; }\n\n    //setters\n    Q_INVOKABLE void setCurrentView(quint8 current_view) { if(this-&gt;m_current_view!=current_view) {this-&gt;m_current_view=current_view; emit sCurrentViewChanged(this-&gt;m_current_view);} }\n    Q_INVOKABLE void setFutureView(quint8 future_view) { if(this-&gt;m_future_view!=future_view) {this-&gt;m_future_view=future_view; emit sFutureViewChanged(this-&gt;m_future_view);} }\n\nprivate:\n    quint8 m_current_view;\n    quint8 m_future_view;\n\n    QByteArray m_selected_language;\n\npublic slots:\n    void onLanguageSelected(QByteArray language);\n\nprivate slots:\n\n\nsignals:\n    void sCurrentViewChanged(quint8 current_view);\n    void sFutureViewChanged(quint8 future_view);\n\n};\n\nInterfaceController::InterfaceController(QObject *parent) : QObject(parent)\n{\n    this-&gt;m_current_view=1;\n    this-&gt;m_future_view=1;\n}\n\nvoid InterfaceController::onLanguageSelected(QByteArray language)\n{\n    this-&gt;m_selected_language=language;\n    this-&gt;setFutureView(2);\n}\n</code></pre>\n\n<p>QML</p>\n\n<pre><code>id: root\nproperty int current_view: 1\nproperty int future_view: 1\n\nConnections {\n    target: root\n    onCurrent_viewChanged: { backend.setCurrentView(current_view); }\n    onFuture_viewChanged: { backend.setFutureView(future_view); }\n}\n\nConnections {\n    target: backend\n    onSCurrentViewChanged: { if(root.current_view!=current_view) {root.current_view=current_view;} }\n    onSFutureViewChanged: { if(root.future_view!=future_view) {root.future_view=future_view;} }\n}\n</code></pre>\n"}], "owner": {"reputation": 139, "user_id": 8907877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91f0fbb13a3c8027432a2073d27e8cf0?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino Miori", "link": "https://stackoverflow.com/users/8907877/valentino-miori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1529564230, "creation_date": 1529499445, "question_id": 50948831, "link": "https://stackoverflow.com/questions/50948831/q-property-system-not-working-as-expected", "title": "Q_PROPERTY System not working as expected", "body": "<p>I have this class I intended to use in the context of a qml engine so in order to use property binding I setted up these Q_PROPERY macros. I want to use the MEMBER keyword and have the notify signal emitted automatically.</p>\n\n<pre><code>class InterfaceBackend : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(quint8 current_view MEMBER m_current_view NOTIFY sCurrentViewChanged)\n    Q_PROPERTY(quint8 future_view MEMBER m_future_view NOTIFY sFutureViewChanged)\n\npublic:\n    explicit InterfaceBackend(QObject *parent = 0);\n    ~InterfaceBackend();\n\n    quint8 getCurrentView() { return this-&gt;m_current_view; }\n    quint8 getFutureView() { return this-&gt;m_future_view; }\n\nprivate:\n    quint8 m_current_view;\n    quint8 m_future_view;\n    QByteArray m_selected_language;\n\npublic slots:\n    void onLanguageSelected(QByteArray language);\n\nprivate slots:\n\n\nsignals:\n    void sCurrentViewChanged(quint8 current_view);\n    void sFutureViewChanged(quint8 future_view);\n\n};\n\n\nInterfaceBackend::InterfaceBackend(QObject *parent) : QObject(parent)\n{\n    this-&gt;setObjectName(\"backend\");\n    QObject::connect(this, &amp;InterfaceBackend::sFutureViewChanged, []() {qDebug() &lt;&lt; \"sFutureViewChanged\";});\n    this-&gt;m_current_view=1;\n    this-&gt;m_future_view=1;\n}\n\nInterfaceBackend::~InterfaceBackend()\n{\n\n}\n\nvoid InterfaceBackend::onLanguageSelected(QByteArray language)\n{\n    this-&gt;m_selected_language=language;\n    this-&gt;m_future_view=2;\n}\n</code></pre>\n\n<p>qt docs say:</p>\n\n<p><em>A NOTIFY signal is optional. If defined, it should specify one existing signal in that class that is emitted whenever the value of the property changes. NOTIFY signals for MEMBER variables must take zero or one parameter, which must be of the same type as the property. The parameter will take the new value of the property. The NOTIFY signal should only be emitted when the property has really been changed, to avoid bindings being unnecessarily re-evaluated in QML, for example. Qt emits automatically that signal when needed for MEMBER properties that do not have an explicit setter</em></p>\n\n<p>But whenever I call the slot the signals never gets called nor the property is updated in the qml model, what's wrong!?</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-chrono"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529496916, "post_id": 50947897, "comment_id": 88893421, "body": "Both <code>std::system_clock</code> and <code>boost::system_clock</code> have <code>to_time_t</code> and <code>from_time_t</code> static functions. However, this does not seem to be the case of <code>steady_clock</code>. Maybe, those <code>time_point</code>s can be converted somehow."}, {"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 1, "creation_date": 1529497011, "post_id": 50947897, "comment_id": 88893491, "body": "I don&#39;t get why it is being downvoted?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529497109, "post_id": 50947897, "comment_id": 88893570, "body": "Agree, hate downvoting without commenting / flagging."}, {"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529497186, "post_id": 50947897, "comment_id": 88893630, "body": "I am also asking clear question, if people think this is obviously a &quot;no can&#39;t do because types are from different libraries&quot;. If it is so obvious or stupid quesiton please explain why."}, {"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529497254, "post_id": 50947897, "comment_id": 88893689, "body": "@DanielLangr the problem is that time_t is less accurate than the time_point heh, looks like I will need to introduce the api dependancy of boost chrono than."}, {"owner": {"reputation": 11984, "user_id": 113662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c42518958b62e51887d9fa3a2bcbdb99?s=128&d=identicon&r=PG", "display_name": "Tadeusz Kopec", "link": "https://stackoverflow.com/users/113662/tadeusz-kopec"}, "edited": false, "score": 0, "creation_date": 1529498071, "post_id": 50947897, "comment_id": 88894247, "body": "Both <code>time_point</code>s are class templates. What are the template arguments in the case you are asking?"}, {"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "reply_to_user": {"reputation": 11984, "user_id": 113662, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c42518958b62e51887d9fa3a2bcbdb99?s=128&d=identicon&r=PG", "display_name": "Tadeusz Kopec", "link": "https://stackoverflow.com/users/113662/tadeusz-kopec"}, "edited": false, "score": 0, "creation_date": 1529499119, "post_id": 50947897, "comment_id": 88894910, "body": "@TadeuszKopec the boost::chrono::time_point is, but boost::chrono::steady_clock::time_point isn&#39;t; it is time point specialization with boost::chrono::steady_clock as a clock typedef  for std it is the same"}], "answers": [{"comments": [{"owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "edited": false, "score": 0, "creation_date": 1529524175, "post_id": 50951841, "comment_id": 88909498, "body": "You could also normalise them against time.now() on both clocks to see if there is the difference between the epochs, thanks."}], "tags": [], "owner": {"reputation": 2928, "user_id": 1603365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/K4qJN.png?s=128&g=1", "display_name": "md5i", "link": "https://stackoverflow.com/users/1603365/md5i"}, "is_accepted": true, "score": 1, "last_activity_date": 1529508382, "creation_date": 1529508382, "answer_id": 50951841, "question_id": 50947897, "link": "https://stackoverflow.com/questions/50947897/converting-boostchronosteady-clocktime-point-to-stdchronosteady-clock/50951841#50951841", "title": "Converting boost::chrono::steady_clock::time_point to std::chrono::steady_clock::time_point", "body": "<p>You can't guarantee a conversion, I am afraid, unless you accept a priori that <code>boost::chrono::steady_clock</code> and <code>std::chrono::steady_clock</code> have the same epoch.  If you can accept this, then something like the following could work:</p>\n\n<pre><code>#include &lt;boost/chrono.hpp&gt;\n#include &lt;chrono&gt;\n\n/* Convert from boost::ratio to std::ratio */\ntemplate &lt;typename T&gt; struct conv_ratio;\ntemplate &lt;std::intmax_t N, std::intmax_t D&gt;\nstruct conv_ratio&lt;boost::ratio&lt;N, D&gt;&gt; {\n    using type = std::ratio&lt;N, D&gt;;\n};\ntemplate &lt;typename T&gt;\nusing conv_ratio_t = typename conv_ratio&lt;T&gt;::type;\n\n/* Convert from boost::duration to std::duration */\ntemplate &lt;typename T&gt; struct conv_duration;\ntemplate &lt;typename Rep, typename Period&gt;\nstruct conv_duration&lt;boost::chrono::duration&lt;Rep, Period&gt;&gt; {\n    using type = std::chrono::duration&lt;Rep, conv_ratio_t&lt;Period&gt;&gt;;\n};\ntemplate &lt;typename T&gt;\nusing conv_duration_t = typename conv_duration&lt;T&gt;::type;\n\n/* Convert from A::time_point to B::time_point.  This assumes that A\n * and B are clocks with the same epoch. */\ntemplate &lt;typename A, typename B&gt;\ntypename B::time_point convert_timepoint_same_clock(\n    typename A::time_point const &amp; tp)\n{\n    return typename B::time_point(\n        conv_duration_t&lt;typename A::time_point::duration&gt;(\n            tp.time_since_epoch().count()));\n}\n\n\nint main()\n{\n    auto now_boost = boost::chrono::steady_clock::now();\n    auto now_std = convert_timepoint_same_clock&lt;\n        boost::chrono::steady_clock, std::chrono::steady_clock&gt;(now_boost);\n}\n</code></pre>\n"}], "owner": {"reputation": 2493, "user_id": 2194336, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f243ae014c6513e994cea484e694e6db?s=128&d=identicon&r=PG", "display_name": "cerkiewny", "link": "https://stackoverflow.com/users/2194336/cerkiewny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 50951841, "answer_count": 1, "score": 1, "last_activity_date": 1529508382, "creation_date": 1529496505, "question_id": 50947897, "link": "https://stackoverflow.com/questions/50947897/converting-boostchronosteady-clocktime-point-to-stdchronosteady-clock", "title": "Converting boost::chrono::steady_clock::time_point to std::chrono::steady_clock::time_point", "body": "<p>Is there any elegant way of converting the boost chrono time_point to the standard library equivalent?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1529496092, "post_id": 50947733, "comment_id": 88892859, "body": "You best bet at this point are <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these C++ books</a>."}, {"owner": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1529496583, "post_id": 50947733, "comment_id": 88893165, "body": "Hope not. This has to be a logic error because the method works with predefined arrays (that is, if I create two arrays, pick them apart, and multiply their components as if I were doing dot-product). The program is almost certainly misinterpreting arrnStoreInput01A[0], arrnStoreInput01A[1], arrnStoreInput01A[2]."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1529499402, "post_id": 50947733, "comment_id": 88895080, "body": "The program is not misinterpreting anything. You&#39;re trying to read a comma into an <code>int</code>, which puts the input stream into the failure state and then it doesn&#39;t read any more, leaving some array elements uninitialised. (You should definitely check out those C++ books.)"}], "answers": [{"comments": [{"owner": {"reputation": 834, "user_id": 7116608, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7b4348cb1cc2d16ddd557311af382e4?s=128&d=identicon&r=PG&f=1", "display_name": "Capie", "link": "https://stackoverflow.com/users/7116608/capie"}, "reply_to_user": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "edited": false, "score": 1, "creation_date": 1529497247, "post_id": 50948042, "comment_id": 88893680, "body": "BTW, i tried your code and it works fine. I introduced 0(press enter) 4(press enter) and 0 (press enter) and i got this output: <code>you have 200 cups!                                                                                                                                                                  you have 10.04 left in cash!0 4 0 </code>  I think your issue is how you introduce the inputs. You should press enter after each number you input. Just typing &quot;0,4,0&quot; and pressing enter wont work."}, {"owner": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "edited": false, "score": 0, "creation_date": 1529499274, "post_id": 50948042, "comment_id": 88894991, "body": "I didn&#39;t realize right away that I needed to enter the amounts separately (which should have been obvious...this is a for loop). The math works for me now, too. Only problem is that the context is wrong and could be confusing because now the user is entering the amount for items indexed by numbers. How do you think we could increment alphabetical characters for each of the prompts?  Still best answer. Thank you."}, {"owner": {"reputation": 834, "user_id": 7116608, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7b4348cb1cc2d16ddd557311af382e4?s=128&d=identicon&r=PG&f=1", "display_name": "Capie", "link": "https://stackoverflow.com/users/7116608/capie"}, "reply_to_user": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "edited": false, "score": 0, "creation_date": 1529500267, "post_id": 50948042, "comment_id": 88895657, "body": "It&#39;s not because of the loop. <code>std::cin</code> will only read one value at a time, even if you put <code>std::cin&lt;&lt;var1&lt;&lt;var2&lt;&lt;var3;</code>,you will always need to press enter after each value. I didnt understand your question about how to increment alphabetic characthers. If what you want is that on each itraction will  be shown A, B ,C,....Then there are few possible options."}, {"owner": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "edited": false, "score": 0, "creation_date": 1529501595, "post_id": 50948042, "comment_id": 88896514, "body": "I see, that kind of highlights why the commas were so problematic, too.  I found a good option for incrementing characters, but I will put that concern aside for now (I had each of the three items listed as A, B, and C so the user can say they want &quot;3 of A, 2 of B and 1 of C&quot;, etc)."}], "tags": [], "owner": {"reputation": 834, "user_id": 7116608, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e7b4348cb1cc2d16ddd557311af382e4?s=128&d=identicon&r=PG&f=1", "display_name": "Capie", "link": "https://stackoverflow.com/users/7116608/capie"}, "is_accepted": true, "score": 2, "last_activity_date": 1529496988, "creation_date": 1529496988, "answer_id": 50948042, "question_id": 50947733, "link": "https://stackoverflow.com/questions/50947733/program-is-misinterpreting-input-intended-to-populate-entries-in-an-array/50948042#50948042", "title": "program is misinterpreting input intended to populate entries in an array", "body": "<p>use a for loop to store the user input on the array. When the user finishes, then you do the operation. Something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n\n    std::vector&lt;int&gt; userInput ;\n    std::vector&lt;int&gt; predefinedArray{1,2,3};\n    for(int i=0;i&lt;3;i++)\n    {\n        int tmp;\n        std::cout&lt;&lt; \"Introduce input numer \" &lt;&lt;i&lt;&lt;\": \" ;\n        std::cin &gt;&gt; tmp; \n        userInput.push_back(tmp);\n    }\n\n    std::cout&lt;&lt;userInput[0]*predefinedArray[0]+\n               userInput[1]*predefinedArray[1]+\n               userInput[2]*predefinedArray[2]&lt;&lt;std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I would recomend you to use <code>std::vector</code> as I did on the above code.</p>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "edited": false, "score": 0, "creation_date": 1529500128, "post_id": 50948770, "comment_id": 88895546, "body": "This worked perfectly but I just picked the other one before you posted yours! Both good solutions, this one easiest to implement"}], "tags": [], "owner": {"reputation": 1246, "user_id": 1158059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/821737dc14b24823ec14ee13abe9482c?s=128&d=identicon&r=PG", "display_name": "Loebl", "link": "https://stackoverflow.com/users/1158059/loebl"}, "is_accepted": false, "score": 2, "last_activity_date": 1529499290, "creation_date": 1529499290, "answer_id": 50948770, "question_id": 50947733, "link": "https://stackoverflow.com/questions/50947733/program-is-misinterpreting-input-intended-to-populate-entries-in-an-array/50948770#50948770", "title": "program is misinterpreting input intended to populate entries in an array", "body": "<p>Have a look at how <code>operator&gt;&gt;</code> works. It reads integers up to the comma (or anything not an integer). You will have to remove the comma from the input stream to get the next number.</p>\n\n<p>You could use <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/ignore\" rel=\"nofollow noreferrer\">ignore</a>:</p>\n\n<pre><code>std::cin &gt;&gt; arrnStoreInput01A[0];\nstd::cin.ignore(1,',');\nstd::cin &gt;&gt; arrnStoreInput01A[1];\nstd::cin.ignore(1,',');\nstd::cin &gt;&gt; arrnStoreInput01A[2];\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 9953960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aeb939806bb936b555bc9335ed8707cd?s=128&d=identicon&r=PG&f=1", "display_name": "user391838", "link": "https://stackoverflow.com/users/9953960/user391838"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 50948042, "answer_count": 2, "score": -1, "last_activity_date": 1529499290, "creation_date": 1529495991, "last_edit_date": 1529496251, "question_id": 50947733, "link": "https://stackoverflow.com/questions/50947733/program-is-misinterpreting-input-intended-to-populate-entries-in-an-array", "title": "program is misinterpreting input intended to populate entries in an array", "body": "<p><a href=\"https://i.stack.imgur.com/CS710.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CS710.jpg\" alt=\"This is my code in it&#39;s entirety when I enter &quot;A&quot;, then &quot;3,2,1&quot;.\"></a></p>\n\n<p>How can I get 3 numbers at once from a user in the command prompt so that I can perform a dot-product operation on it with an existing array? For example:</p>\n\n<p>suppose in advance, I define</p>\n\n<pre><code>int myArray[3] = {1,2,3};\n</code></pre>\n\n<p>Now a user enters natural numbers in the format \"i,j,k\".\nThe program spits out</p>\n\n<pre><code>myArray[0]*userArray[0] + myArray[1]*userArray[1] + myArray[2]*userArray[2]\n</code></pre>\n\n<p>that is,</p>\n\n<pre><code>1*a + 2*b + 3*c\n</code></pre>\n\n<p>I was able to do exactly this with predefined arrays, easily. However, something is going terribly wrong when I try to identify the user input as <em>pieces</em> of an array. The program thinks the numbers are different or in a different place, or of a different structure, resulting in negative or humongous answers.</p>\n\n<p>[Part of] My program is below. The goal is the same as the example:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n#include &lt;limits&gt;\n#include &lt;tuple&gt;\n\nint main()\n{\n    int nNumCup = 0, nNumLem = 0, nNumSug = 0, nNumIce = 0;\n    float fCoH = 20.00, fCostCup25 = 1.99, fCostCup50 = 2.49, fCostCup100 = 2.99;\n\n        int arrnStoreInput01A[3];\n        std::cout &lt;&lt; \"Go to Cups \\n \\n\";\n        std::cout &lt;&lt; \"Cups are availible in packs of 25, 50 and 100. \\n\"\n            \"Please enter three numbers in \\\"i,j,k\\\" format for the \\n\"\n            \"respective amounts of each of the following three products \\n\"\n            \"you want to buy: \\n \\n\"\n            \"A) 25-pack of cups for \" &lt;&lt; fCostCup25 &lt;&lt; \"\\n\"\n            \"B) 50-pack of cups for \" &lt;&lt; fCostCup50 &lt;&lt; \"\\n\"\n            \"C) 100-pack of cups for \" &lt;&lt; fCostCup100 &lt;&lt; \"\\n \\n\"\n            \"For example, type \\\"0,4,0\\\" to purchase 4 packages of 50 cups or \\n\"\n            \"type \\\"3,2,1\\\" to buy 3 packages of 25 cups, 2 packages of 50 cups \\n\"\n            \"and 1 package of 100 cups. \\n \\n\";\n\n        //This is where the user inputs \"i,j,k\". I entered \"3,2,1\" in the command prompt.\n\n        std::cin &gt;&gt; arrnStoreInput01A[0] &gt;&gt; arrnStoreInput01A[1] &gt;&gt; arrnStoreInput01A[2];\n\n        float arrnCostCup[3] = { fCostCup25,fCostCup50,fCostCup100 };\n        float fStoreInput01AdotfCoH = arrnStoreInput01A[0] * arrnCostCup[0]\n            + arrnStoreInput01A[1] * arrnCostCup[1]\n            + arrnStoreInput01A[2] * arrnCostCup[2];\n        int arrnQuantCup[3] = { 25,50,100 };\n\n        if (fStoreInput01AdotfCoH &lt;= fCoH){\n            fCoH = fCoH - fStoreInput01AdotfCoH;\n            nNumCup = nNumCup + arrnStoreInput01A[0] * arrnQuantCup[0]\n                + arrnStoreInput01A[1] * arrnQuantCup[1]\n                + arrnStoreInput01A[2] * arrnQuantCup[2];\n        }\n        else\n            std::cout &lt;&lt; \"Not enough cash on hand.\";\n\n        std::cout &lt;&lt; \"you have \" &lt;&lt; nNumCup &lt;&lt; \" cups! \\n\";\n        std::cout &lt;&lt; \"you have \" &lt;&lt; fCoH &lt;&lt; \" left in cash!\";\n\n        //Inspecting what the program thinks the user-inputed array is\n        //(next lines) reveals that it is interpreting \"3,2,1\"\n        //erroneously as 3 -858993460 -858993460\n\n        for (auto const value : arrnStoreInput01A)\n        {\n            std::cout &lt;&lt; value &lt;&lt; ' ';\n        }\n\n    return 0;\n}\n</code></pre>\n\n<p>I am also attaching a picture of the command prompt output because that is very illustrative and arguably easier to interpret (see top of post).</p>\n"}, {"tags": ["c++", "network-programming", "boost-asio", "boost-serialization"], "comments": [{"owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1529496870, "post_id": 50947594, "comment_id": 88893388, "body": "@user463035818 I have added the image source."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1529498089, "post_id": 50947594, "comment_id": 88894266, "body": "Considering that you want a stream, and probably reliable delivery, UDP is perhaps not the ideal choice."}, {"owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1529498446, "post_id": 50947594, "comment_id": 88894513, "body": "@molbdnilo UDP is a formal requirement, so I <i>must</i> use it with all its consequences. Streams are required by the Boost.Serialization archive, not because I want to."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1529496284, "creation_date": 1529496284, "answer_id": 50947821, "question_id": 50947594, "link": "https://stackoverflow.com/questions/50947594/which-stream-is-suitable-for-serialization-over-udp/50947821#50947821", "title": "Which stream is suitable for serialization over UDP?", "body": "<p>Take time to read descriptions of the streams you mentioned on <a href=\"http://en.cppreference.com/w/cpp/io\" rel=\"nofollow noreferrer\">cppreference.com Input/output library</a>, it is quite instructive.</p>\n\n<p>If you want to serialize into memory only one stream works for you: <code>ostringstream</code>. Then you extract the string from it and send it however you please. For deserialization use <code>istringstream</code>. Alternatively, <code>stringstream</code> for both cases.</p>\n"}, {"comments": [{"owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "edited": false, "score": 0, "creation_date": 1529586438, "post_id": 50949578, "comment_id": 88934903, "body": "The benchmark of the serializers was really helpful. Thank you."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 2, "last_activity_date": 1529501742, "creation_date": 1529501742, "answer_id": 50949578, "question_id": 50947594, "link": "https://stackoverflow.com/questions/50947594/which-stream-is-suitable-for-serialization-over-udp/50949578#50949578", "title": "Which stream is suitable for serialization over UDP?", "body": "<p>To add to Maxim's answer, if you really want to use UDP, you need to take care of splitting your stream into datagrams and ensure consistency of the data stream yourself. UDP is datagram-oriented and comes with no guarantees of data consistency.</p>\n\n<p>What needs to be taken into account when using UDP:</p>\n\n<ul>\n<li>Datagrams may get lost in transit.</li>\n<li>Datagrams may arrive more than once.</li>\n<li>Datagrams may become corrupted in transit (there is a checksum but it's optional and weak).</li>\n<li>Datagrams may arrive out-of-order.</li>\n<li>The bandwidth of the network or the recipient may be insufficient for the rate at which the sender is sending.</li>\n</ul>\n\n<p>If any of these are an issue, you need to implement appropriate countermeasures as part of your protocol, e.g. a packet sequence number and a way to request packet retransmission.</p>\n\n<p>Large datagrams may get fragmented and severely reduce performance. Some people recommend a max datagram size of 512 bytes.</p>\n\n<p>So, given these restrictions, I would suggest to use a <strong><em>compact</em></strong>, binary serialization format. For example, protobuf or msgpack. Boost isn't very compact, though can be good enough (source: <a href=\"https://github.com/thekvs/cpp-serializers\" rel=\"nofollow noreferrer\">cpp-serializers</a>).</p>\n"}], "owner": {"reputation": 2355, "user_id": 3599179, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0yv37.png?s=128&g=1", "display_name": "codeaviator", "link": "https://stackoverflow.com/users/3599179/codeaviator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 507, "favorite_count": 1, "accepted_answer_id": 50947821, "answer_count": 2, "score": 0, "last_activity_date": 1529501742, "creation_date": 1529495539, "last_edit_date": 1529496806, "question_id": 50947594, "link": "https://stackoverflow.com/questions/50947594/which-stream-is-suitable-for-serialization-over-udp", "title": "Which stream is suitable for serialization over UDP?", "body": "<p>I am trying to serialize and recover objects over UDP using the <em><a href=\"https://www.boost.org/doc/libs/1_67_0/libs/serialization/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Serialization</a></em> and <em><a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio.html\" rel=\"nofollow noreferrer\">Boost.Asio</a></em> libraries. The following points sum up what I know so far:</p>\n\n<ul>\n<li>The main concept of <em>Boost.Serialization</em> is the <strong>archive</strong>. An archive is a sequence of bytes that represent serialized C++ objects.</li>\n<li>The class <code>boost::archive::text_oarchive</code> <strong>serializes</strong> data as a <strong>text stream</strong>, and the class <code>boost::archive::text_iarchive</code> <strong>restores</strong> data from such a <strong>text stream</strong>.</li>\n<li>Constructors of archives expect an <strong>input or output stream</strong> as a parameter. The stream is used to serialize or restore data.</li>\n</ul>\n\n<p><sup>source: <a href=\"https://theboostcpplibraries.com/boost.serialization-archive\" rel=\"nofollow noreferrer\">https://theboostcpplibraries.com/boost.serialization-archive</a></sup></p>\n\n<p>I understand that I must pass a stream as a parameter to the archive. However, there are a few different types of streams which are suitable candidates. See the following digram:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9wUHa.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9wUHa.gif\" alt=\"stream types\"></a></p>\n\n<p><sup>source: <a href=\"https://stackoverflow.com/a/8116698/3599179\">https://stackoverflow.com/a/8116698/3599179</a></sup></p>\n\n<p>I have seen online serialization examples that used <code>ostream</code> and <code>istream</code>, other examples used <code>ostringstream</code> and <code>istringstream</code> and some others used <code>streambuf</code>, which acts as both an input and output buffer if I am not mistaken.</p>\n\n<p>(File streams are out of the equation because I need to write/read from a socket not from a file.)</p>\n\n<ul>\n<li>What advantages/disadvantages offer each of the aforementioned streams?</li>\n<li>Considering that I must send the serialized objects over UDP, which\nstream is the best candidate?</li>\n</ul>\n"}, {"tags": ["c++", "winapi", "mfc", "event-log", "event-viewer"], "answers": [{"comments": [{"owner": {"reputation": 825, "user_id": 4653156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/95Ppj.jpg?s=128&g=1", "display_name": "Kiran Choudhary", "link": "https://stackoverflow.com/users/4653156/kiran-choudhary"}, "edited": false, "score": 0, "creation_date": 1529561898, "post_id": 50958480, "comment_id": 88919936, "body": "Hi @ffhighwind , I tried mentioned all 4 combinations . but no luck , Still below method returning nothing                                                                             EVT_HANDLE Results = EvtQuery(NULL, Path, Query, EvtQueryFilePath | EvtQueryForwardDirection);"}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "reply_to_user": {"reputation": 825, "user_id": 4653156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/95Ppj.jpg?s=128&g=1", "display_name": "Kiran Choudhary", "link": "https://stackoverflow.com/users/4653156/kiran-choudhary"}, "edited": false, "score": 1, "creation_date": 1529619758, "post_id": 50958480, "comment_id": 88952333, "body": "It&#39;s possible it&#39;s related to system32 redirection and you may need to call wow64DisableWow64FsRedirection. It could also be a UAC issue. Try opening Path to see if it exists. Also you should try calling <a href=\"https://stackoverflow.com/questions/1387064/how-to-get-the-error-message-from-the-error-code-returned-by-getlasterror\">GetLastError</a> if EvtQuery returned NULL."}, {"owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "reply_to_user": {"reputation": 825, "user_id": 4653156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/95Ppj.jpg?s=128&g=1", "display_name": "Kiran Choudhary", "link": "https://stackoverflow.com/users/4653156/kiran-choudhary"}, "edited": false, "score": 1, "creation_date": 1529622551, "post_id": 50958480, "comment_id": 88953024, "body": "By &quot;opening&quot; Path I mean calling fopen or fstream::open(Path).good() on it. Either way I would appreciate an upvote."}], "tags": [], "owner": {"reputation": 135, "user_id": 2254018, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/01d7b1f18afc6ef00c1132b7711612b5?s=128&d=identicon&r=PG", "display_name": "ffhighwind", "link": "https://stackoverflow.com/users/2254018/ffhighwind"}, "is_accepted": false, "score": 1, "last_activity_date": 1529538218, "last_edit_date": 1529538218, "creation_date": 1529537831, "answer_id": 50958480, "question_id": 50947526, "link": "https://stackoverflow.com/questions/50947526/retrive-event-logs-contains-specific-string-in-data-tag/50958480#50958480", "title": "Retrive event logs contains specific string in DATA tag", "body": "<p>You should be able to do this with XPath 2 by using contains()</p>\n\n<p>Full Events:</p>\n\n<pre><code>/Event[EventData/Data[contains(text(),'m_id')]]\n/Event[EventData/Data[contains(string(),'m_id')]]\n</code></pre>\n\n<p>Data Only:</p>\n\n<pre><code>/Event/EventData/Data[contains(string(),'m_id')]\n/Event/EventData/Data[contains(text(),'m_id')]\n</code></pre>\n\n<p><a href=\"https://www.freeformatter.com/xpath-tester.html\" rel=\"nofollow noreferrer\">Test Xpaths here</a></p>\n\n<p><a href=\"https://blogs.technet.microsoft.com/askds/2011/09/26/advanced-xml-filtering-in-the-windows-event-viewer/\" rel=\"nofollow noreferrer\">Advanced Xpath Filtering</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9493732/difference-between-text-and-string\">string vs text</a></p>\n"}], "owner": {"reputation": 825, "user_id": 4653156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/95Ppj.jpg?s=128&g=1", "display_name": "Kiran Choudhary", "link": "https://stackoverflow.com/users/4653156/kiran-choudhary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1529538218, "creation_date": 1529495275, "last_edit_date": 1529535371, "question_id": 50947526, "link": "https://stackoverflow.com/questions/50947526/retrive-event-logs-contains-specific-string-in-data-tag", "title": "Retrive event logs contains specific string in DATA tag", "body": "<p>I have developed a <code>MFC</code> application which reads <code>windows event logs</code> from <code>event log file</code> (<code>EVTX</code>) file and parse it to render in application</p>\n\n<p>For reading log file, I am using <code>XPATH</code> query to retrieve specific event logs from <code>event log file</code> file consist of 40000 records</p>\n\n<p>Sample log records look like below code</p>\n\n<pre><code>&lt;Event xmlns=\"http://schemas.microsoft.com/win/2004/08/events/event\"&gt;\n  &lt;System&gt;\n    &lt;Provider Name=\"Error_Log\"/&gt;\n    &lt;EventID Qualifiers=\"20225\"&gt;6002&lt;/EventID&gt;\n    &lt;Level&gt;4&lt;/Level&gt;\n    &lt;Task&gt;0&lt;/Task&gt;\n    &lt;Keywords&gt;0x80000000000000&lt;/Keywords&gt;\n    &lt;TimeCreated SystemTime=\"2018-05-31T10:37:16.000000000Z\"/&gt;\n    &lt;EventRecordID&gt;11679958&lt;/EventRecordID&gt;\n    &lt;Channel&gt;Application&lt;/Channel&gt;\n    &lt;Security/&gt;\n  &lt;/System&gt;\n  &lt;EventData&gt;\n    &lt;Data&gt;16:07:16.339:(A)[app.exe] [scan] m_id = [1254]&lt;/Data&gt;\n    &lt;Binary&gt;31363A30373A31362E3333393A2841295B7275706170702E6578655D205B5363616E5D206D5F6964203D205B313235345D&lt;/Binary&gt;\n  &lt;/EventData&gt;\n&lt;/Event&gt;\n</code></pre>\n\n<p>Here I want to retrieve only those log records where <code>&lt;DATA&gt;</code> tag contains sub-string value <code>m_id</code>. To achieve this I tried below <code>query</code>   </p>\n\n<pre><code>LPWSTR Query = _T(\"Event/EventData[Data(Data='m_id')]\");\n\nEVT_HANDLE Results = EvtQuery(NULL, Path, Query, EvtQueryFilePath | EvtQueryForwardDirection);  \n</code></pre>\n\n<p>But I am not able to retrieve any logs even if string <code>m_id</code> is present in input log file as shown in above code</p>\n"}, {"tags": ["c++", "c", "unit-testing"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1529496036, "post_id": 50947358, "comment_id": 88892816, "body": "Sorry, didn&#39;t notice it was you in the other question as well, just that it seemed to ask the same thing. Reopening here."}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 1, "creation_date": 1529497616, "post_id": 50947358, "comment_id": 88893948, "body": "You should never include <code>*.c</code> or <code>*.cpp</code> files, no matter what. If you use some variables/functions/classes in multiple translation units, you should declare them first in a header."}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 0, "creation_date": 1529498315, "post_id": 50947358, "comment_id": 88894431, "body": "@YoungDevelopers, please edit your question to include some sample code that you wish to test and I will explain how to test it. I don&#39;t want to write an answer which will probably be unclear to you."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 0, "creation_date": 1529499617, "post_id": 50947358, "comment_id": 88895213, "body": "You ask how you can test functions un multiple .cpp files? Why not simply compile your .c file, and include the .h in your .cpp files? Note that if you&#39;re testing c code in c++, there are other issues to consider, but I agree with @Ptaq666 that you should never include a .c or .cpp file."}], "answers": [{"comments": [{"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 0, "creation_date": 1529502731, "post_id": 50949088, "comment_id": 88897381, "body": "Just compile the C files, exactly as you&#39;re doing your CPP files."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 0, "creation_date": 1529503137, "post_id": 50949088, "comment_id": 88897659, "body": "Okay, I haven&#39;t realized this yet, but are you trying to test static functions?"}, {"owner": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 0, "creation_date": 1529503620, "post_id": 50949088, "comment_id": 88897951, "body": "Yes, I change your code make behave almost like my code without static function and variables. Try fix that first without changes .h and .c files"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "reply_to_user": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 0, "creation_date": 1529506031, "post_id": 50949088, "comment_id": 88899665, "body": "You can&#39;t include a file containing at least one non-static function in multiple units and compile them together. That just won&#39;t work. I&#39;m editing my post to explain that more in details."}, {"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "reply_to_user": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 1, "creation_date": 1529582214, "post_id": 50949088, "comment_id": 88932190, "body": "@YoungDevelopers, now your question is more clear. The purpose of testing is to test the public functions only (in C language - non static) (you want to test the functionality, not the way it is implemented). All solutions allowing you to test private (static) function are just some ugly hacks."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1529589675, "post_id": 50949088, "comment_id": 88937201, "body": "The purpose of a static function or variable is literally to hide the function or variable away from a programmer. You hide it inside a translation unit so that others (units/programmers) can&#39;t mess with them and break the functionality of the unit. So, architecturally, testing internal and hidden functions is the responsability of the translation unit which hides these functions. Anything else is an ugly hack, and a ugly hack is by definition not easy to maintain."}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 1, "creation_date": 1529672411, "post_id": 50949088, "comment_id": 88971553, "body": "So, I guess my third solution didn&#39;t help you?"}, {"owner": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "edited": false, "score": 0, "creation_date": 1530081548, "post_id": 50949088, "comment_id": 89102637, "body": "It solves the problem even if it get some extra code."}], "tags": [], "owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "is_accepted": true, "score": 1, "last_activity_date": 1529507441, "last_edit_date": 1529507441, "creation_date": 1529500271, "answer_id": 50949088, "question_id": 50947358, "link": "https://stackoverflow.com/questions/50947358/include-c-files-in-unit-test-project-and-get-access-to-it-from-multiple-cpp-fil/50949088#50949088", "title": "Include .c files in Unit test project and get access to it from multiple cpp files without linking problems", "body": "<p>You should never include a .C or .CPP file.</p>\n\n<p>However, you can compile C code in C++. Here's an example based on the information you gave in your initial post.</p>\n\n<p><strong>YourCCode.h</strong></p>\n\n<pre><code>#ifndef YourCCode_H\n#define YourCCode_H\n\nint FunctionToTest(int SomeParams);\n\nint TestStaticFunctions(int SomeParam1, int SomeParam2);\n\n#endif // YourCCode_H\n</code></pre>\n\n<p><strong>YourCCode.c</strong></p>\n\n<pre><code>#include \"YourCCode.h\"\n\nstatic int SomeStaticFunction(int Param1, int Param2)\n{\n  return Param1 + Param2; // that needs extensive testing, obviously.\n}\n\nint FunctionToTest(int SomeParams)\n{\n  return SomeStaticFunction(SomeParams, 1); \n}\n\nint TestStaticFunctions(int SomeParam1, int SomeParam2)\n{\n  return SomeStaticFunction(SomeParam1, SomeParam2);\n}\n</code></pre>\n\n<p><strong>UnitTest1.cpp</strong></p>\n\n<pre><code>extern \"C\" {\n#include \"YourCCode.h\"\n}\n\nbool TestFunction(int Value)\n{\n  return (FunctionToTest(Value) == Value+1);\n}\n</code></pre>\n\n<p><strong>UnitTest2.cpp</strong></p>\n\n<pre><code>extern \"C\" {\n#include \"YourCCode.h\"\n}\n\nvoid AnotherTestFunction(int Val, int Val2)\n{\n  int newValue = TestStaticFunctions(Val, Val2);\n  ASSERT(newValue == Val+Val2);\n}\n</code></pre>\n\n<p>Then compile your CPP and C file.</p>\n\n<hr>\n\n<p>After you clarified your intent, I realized you're trying to test static functions from another unit. Static function, by definition, are only available to other functions in the same translation unit. This is mostly use as a protection to prevent programmers to call some functions without knowing how to validate their inputs, know the call order, etc...</p>\n\n<p>My best bet here is either you choose that your functions are not static and you can test them from outside your translation unit, or you implement the test functions inside the translation unit containing those static functions. I would recommend the latter as a translation unit should know (architecturally speaking) how to test their own features.</p>\n\n<hr>\n\n<p>As a third solution, if you don't have any control over the content of the C file (but since you have that C file, I doubt it), you could have a proxy CPP file that includes the C file, and create a proxy call for each static call.</p>\n\n<p>That is a ugly hack, though, and could break very easily if the C file ever gets updated, so I'm advising against it.</p>\n\n<p>Here's a quick example :</p>\n\n<p><strong>YourCCode.h</strong></p>\n\n<pre><code>#ifndef YourCCode_H\n#define YourCCode_H\n\nvoid SomeFunction(void);\n\n#endif // YourCCode_H\n</code></pre>\n\n<p><strong>YourCCode.c</strong></p>\n\n<pre><code>#include \"YourCCode.h\"\n\nstatic int AddSomething(int Param1, int Param2)\n{\n  return Param1 + Param2;\n}\n\nstatic int SubtractSomething(int Param1, int Param2)\n{\n  return Param1 - Param2;\n}\n\nvoid SomeFunction(void)\n{\n  // code meant to be called externally.\n}\n</code></pre>\n\n<p><strong>ProxyTestCode.hpp</strong></p>\n\n<pre><code>bool TestAddSomething(void);\nbool TestSubtractSomething(void);\n</code></pre>\n\n<p><strong>ProxyTestCode.cpp</strong></p>\n\n<pre><code>extern \"C\" {\n#include \"YourCCode.h\"\n#include \"YourCCode.c\"\n}\n\nbool TestAddSomething(void)\n{\n  return (AddSomething(2,2) == 4);\n}\n\nbool TestSubtractSomething(void)\n{\n  return (AddSomething(2,2) == 0);\n}\n</code></pre>\n\n<p><strong>UnitTest1.cpp</strong></p>\n\n<pre><code>#include \"ProxyTestCode.hpp\"\n\nvoid TestAdd(void)\n{\n  ASSERT(TestAddSomething());\n}\n</code></pre>\n\n<p><strong>UnitTest2.cpp</strong></p>\n\n<pre><code>#include \"ProxyTestCode.hpp\"\n\nvoid TestSubtract(void)\n{\n  ASSERT(TestSubtractSomething());\n}\n</code></pre>\n\n<p>If you do that, <strong>don't</strong> compile your C file in your project.</p>\n"}], "owner": {"reputation": 31, "user_id": 9915550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PjRjp0-OJUY/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq2HOtSf3NdwVVvL6xXv09qLrNI3Jg/mo/photo.jpg?sz=128", "display_name": "Young Developers", "link": "https://stackoverflow.com/users/9915550/young-developers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1015, "favorite_count": 0, "accepted_answer_id": 50949088, "answer_count": 1, "score": -2, "last_activity_date": 1529507441, "creation_date": 1529494740, "last_edit_date": 1529502401, "question_id": 50947358, "link": "https://stackoverflow.com/questions/50947358/include-c-files-in-unit-test-project-and-get-access-to-it-from-multiple-cpp-fil", "title": "Include .c files in Unit test project and get access to it from multiple cpp files without linking problems", "body": "<p>I'm doing functional testing on c code. Have include .c file in test .cpp file so far, everything works well. But I need to include the same .c file in another .cpp file where I do other unit tests. Then I get problems that is already defined. Because I already include it in the first file cpp.</p>\n\n<p>If merge all the test methods into one cpp file then it works well. If keep all unit test in one file get to big handle so I need to split up diffrent files in same project it also create help functions for secure that functions get in capsules.</p>\n\n<p>This not a normal LNK2005 because I can not declare the variable and functions in .h: as extern BOOL MyBool; and then assign to it in a .c or .cpp file. Because need include c file as I do unit test this function. Also I can't or should avoid do any changes .c.</p>\n\n<p>I looking way to keep include of .c local not effect other files in same project.</p>\n\n<p>source.h</p>\n\n<pre><code>#ifndef SOURCE_H_\n#define SOURCE_H_\n\n#include \"../car.h\"\n\nenum INITIALMODE {\n   INITIALMODE_NOT_POSITIONING,             // 0\n   INITIALMODE_NO_DRIVER_INPUT,             // 1\n   INITIALMODE_POSITION_LOW_POSITION,       // 2\n   INITIALMODE_POSITION_STANDARD_POSITION,  // 3\n   INITIALMODE_POSITION_HIGH_POSITION       // 4\n};\nvoid initMotor(void);\n#endif\n</code></pre>\n\n<p>source.c</p>\n\n<pre><code>/* Compiler include files */\n#pragma once\n\n#include \"positioning.h\"\n#include \"api.h\"\n#include \"drive.h\"\n#include \"types.h\"\n\nstatic void updateTarget(void);\nstatic SWord getMax(UWord Limit, UWord Aux);\nstatic DWord getHeight(void);\nstatic Bool isMode(void);\nstatic Bool isExiting(void);\n\n#define cMaxHeight      100 * Profile.s.Max /* m -&gt; mm */\n\nvoid initMotor(void)\n{\n   // do something\n}\n\nstatic void updatePositioning(void)\n{\n   // do something\n}\n</code></pre>\n\n<p>Test files look like this, however, this is very scaled for making exemple small.</p>\n\n<p><strong>UnitTest.cpp</strong> and <strong>UnitTest2.cpp</strong></p>\n\n<pre><code>#include \"CppUnitTest.h\"\n\n#ifndef UNIT_TEST\n#define UNIT_TEST\n\nusing namespace Microsoft::VisualStudio::CppUnitTestFramework;\n\nnamespace Test\n{\n\n    extern \"C\" {\n     #include \"../../Test/source.h\"\n     #include \"../../Test/source.c\"\n    }\n\nTEST_CLASS(UnitTest_1)\n{\npublic:\n\n    TEST_METHOD(Test_1)\n    {\n        // Verify that the initial state is as expected.\n        initTest();\n\n        //Expected value\n        UWord Expected = 500\n        //Trigger to execute.\n        UWord Test = updatePositioning();\n\n        // Verify that the results are as expected.\n        Assert::AreEqual(Expected, Test);\n\n      }\n   };\n}\n#endif\n</code></pre>\n"}, {"tags": ["c++", "c++11", "new-operator", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 10, "creation_date": 1529494351, "post_id": 50947204, "comment_id": 88891692, "body": "800 rep and you still don&#39;t know you&#39;re not supposed to post <i>images</i> of code?"}, {"owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1529494459, "post_id": 50947204, "comment_id": 88891757, "body": "I wasn&#39;t able to format it. This is the first time I have faced such formatting issue in stackoverflow. Therefore I also included a link to ideone."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1529494465, "post_id": 50947204, "comment_id": 88891764, "body": "<code>if(sp){}</code> checks if the allocation was successful and <code>if(sp==nullptr){}</code> checks if it <i>wasn&#39;t</i> successful."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1529494497, "post_id": 50947204, "comment_id": 88891782, "body": "@SahilSingh Copy&amp;paste it into the question, select it, then press <code>{}</code> button to format it."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1529494773, "post_id": 50947204, "comment_id": 88891953, "body": "@SahilSingh Judging from your question, you don&#39;t seem to know that. If you want those two methods to do the same thing, the first one should be <code>if (!sp)</code> instead."}, {"owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1529495048, "post_id": 50947204, "comment_id": 88892100, "body": "@HolyBlackCat corrected that logical error. Thanks for pointing it out."}, {"owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1529495111, "post_id": 50947204, "comment_id": 88892154, "body": "@dandan78 The issue was browser specific, tried formatting the code on my <code>Firefox 60.0.2</code> browser, and formatting worked as usual (the same way I have been doing it for several years)"}, {"owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "edited": false, "score": 0, "creation_date": 1529495188, "post_id": 50947204, "comment_id": 88892207, "body": "The question is not about my code not working. It is about recommended way of doing something, to prevent writing sub-optimal code which may fail in future."}, {"owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1529495579, "post_id": 50947204, "comment_id": 88892495, "body": "@dandan78 Before posting image of code here are the things I tried.  1. Checked if any hidden unicode character is putting off SO&#39;s formatting logic. 2. Manually added 4 spaces before each line instead of using <code>{}</code> button. 3. Tried using HTML &lt;code&gt;&lt;/code&gt; tag. 4. Tried indenting my code with just tabs, then just spaces, worrying that a mix of tabs and spaces might be messing up the formatting. none of the methods worked."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 2, "creation_date": 1529495844, "post_id": 50947204, "comment_id": 88892680, "body": "At this point this question is certainly not as bad as the downvotes it had gotten earlier, and yet I doubt anyone will undo their downvotes :-("}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1529499187, "post_id": 50947204, "comment_id": 88894942, "body": "@einpoklum 1001 reasons to get the question right the first time... If a question wastes peoples time, even if it gets fixed later, it still wasted their time.  If it&#39;s a good question it&#39;ll get up voted later by others and might end up net positive"}], "answers": [{"comments": [{"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1529494921, "post_id": 50947312, "comment_id": 88892028, "body": "ha! as an authoritative source. i&#39;m hoping you&#39;ll have this on-hold post turn-around with your answer. :) +1"}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 5, "last_activity_date": 1529494613, "creation_date": 1529494613, "answer_id": 50947312, "question_id": 50947204, "link": "https://stackoverflow.com/questions/50947204/how-to-check-if-c-smart-pointer-memory-allocation-was-successful/50947312#50947312", "title": "How to check if C++ smart pointer memory allocation was successful?", "body": "<p>I, as an authoritative source, can confirm that both ways are indeed correct.</p>\n\n<p>Just kidding: <code>std::unique_ptr</code>'s <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/operator_cmp\" rel=\"noreferrer\"><code>operator ==(std::nullptr_t)</code></a> and <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr/operator_bool\" rel=\"noreferrer\"><code>operator bool</code></a> are overloaded to perform what you'd expect from a pointer, so yes, both are correct, although method 1 is more idiomatic.</p>\n"}], "owner": {"reputation": 2286, "user_id": 981766, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/NPHId.jpg?s=128&g=1", "display_name": "Sahil Singh", "link": "https://stackoverflow.com/users/981766/sahil-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "accepted_answer_id": 50947312, "answer_count": 1, "score": -4, "last_activity_date": 1529544663, "creation_date": 1529494253, "last_edit_date": 1592644375, "question_id": 50947204, "link": "https://stackoverflow.com/questions/50947204/how-to-check-if-c-smart-pointer-memory-allocation-was-successful", "title": "How to check if C++ smart pointer memory allocation was successful?", "body": "<p>Consider the following usage of smart pointer <code>std::unique_ptr</code>:</p>\n<pre><code>std::unique_ptr&lt;char&gt; sp(new(std::nothrow) char[sz]);\n</code></pre>\n<p>How can I check if the <code>new</code> was successful?</p>\n<p>I have two options:</p>\n<ol>\n<li>Method 1 - Check for bool value: <code>if(!sp){}</code></li>\n<li>Method 2 - Compare against null pointer: <code>if(sp==nullptr){}</code></li>\n</ol>\n<hr />\n<h2>Example (<a href=\"https://ideone.com/EuScCq\" rel=\"nofollow noreferrer\">source</a>)</h2>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\nusing namespace std;\n\nint main() {\n    constexpr long long sz = 1000000e10;\n    \n    //raw pointer\n    auto ptr = new(std::nothrow) char[sz];\n    if(ptr==nullptr)\n    {\n        cout&lt;&lt;&quot;ptr nullptr&quot;&lt;&lt;endl;\n    }\n    \n    //smart pointer\n    std::unique_ptr&lt;char&gt; sp(new(std::nothrow) char[sz]);\n    \n    if(!sp)\n    {\n        cout&lt;&lt;&quot;sp nullptr bool&quot;&lt;&lt;endl;\n    }\n    \n    if(sp==nullptr)\n    {\n        cout&lt;&lt;&quot;sp nullptr ==&quot;&lt;&lt;endl;\n    }\n    return 0;\n    \n}\n</code></pre>\n<h2>Output:</h2>\n<pre class=\"lang-none prettyprint-override\"><code>Success #stdin #stdout 0s 4396KB\nptr nullptr\nsp nullptr bool\nsp nullptr ==\n</code></pre>\n<p>Clearly both Method 1 and Method 2 seem to work.</p>\n<p>I would however like to read from an authoritative source (C++ standard, msdn, gcc documentation) that this indeed is the correct way.</p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1529494235, "post_id": 50946992, "comment_id": 88891618, "body": "<a href=\"https://stackoverflow.com/questions/1712642/how-to-determine-storage-type-ssd-drive-or-hhd-mechanical-drive-using-c-lang\" title=\"how to determine storage type ssd drive or hhd mechanical drive using c lang\">stackoverflow.com/questions/1712642/&hellip;</a>"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1529499652, "post_id": 50946992, "comment_id": 88895241, "body": "@David Heffernan: the suggested answer points in the right direction, but is very rudimentary. It doesn&#39;t show how to query the required class, let alone - how to do it for a specific drive, let alone - how to associate a file system path with a WMI drive info. At least reopen the question so I could answer it myself if or when I figure it out."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1529505687, "post_id": 50946992, "comment_id": 88899419, "body": "If you want to post an answer, post one at the dupe"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 1, "creation_date": 1529512628, "post_id": 50946992, "comment_id": 88903904, "body": "The &quot;dupe&quot; is tagged &#39;C&#39;, not &#39;C++&#39;. This question is also Windows API-specific."}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1529558892, "post_id": 50946992, "comment_id": 88918687, "body": "@VioletGiraffe <i>Why</i> do you feel the need to know this?  If you can share that with us you might find you get some helpful insights on how to achieve whatever it is that underlies this question."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "edited": false, "score": 0, "creation_date": 1529566224, "post_id": 50946992, "comment_id": 88922221, "body": "@PaulSanders: I have an image processing software that reads a bunch of image files and merges them. We&#39;ve recently made changes to read and unpack several source images in parallel, it gives a serious performance boost. But only if the drive can handle multiple read queries efficiently. Turns out, while the new feature is 2x boost for SSDs and a slower boost for USB flash drives, it&#39;s 10x slow down for HDDs. So I need to detect the drive type to enable or disable parallel access. I thought or doing it by running a micro benchmark, but don&#39;t have any good ideas of how it can be done reliably."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1529578032, "post_id": 50946992, "comment_id": 88929478, "body": "David provided you with an excellent duplicate.  Nobody is going to show you how to write a WMI query in C++ code, that is already covered extensively in the MSDN documentation.  And Google, search for &quot;c++ wmi query&quot;.  First hit is good."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1529578804, "post_id": 50946992, "comment_id": 88930004, "body": "@HansPassant: I didn&#39;t say I can&#39;t do it, nor did I imply that I require someone else to do it for me. But calling the answers in the alleged dupe &quot;excellent&quot; suggests a pretty low quality of content on SO - lower than what we&#39;re accustomed to giving and receiving. Surprised to hear it from you of all people, I only remember you providing top-notch answers and comments."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1529579241, "post_id": 50946992, "comment_id": 88930248, "body": "Hmya, users that can&#39;t be bothered to research their question is a significant problem lately.  Nothing I can do about that of course.  The dup tells you <i>exactly</i> what to do, google tells you how to do it.  Take that ball and run with it."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1547465605, "post_id": 50946992, "comment_id": 95189644, "body": "Why did you remove the context from your question? There was a reason we&#39;d asked for it!"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1547467583, "post_id": 50946992, "comment_id": 95190608, "body": "@LightnessRacesinOrbit: because it&#39;s not relevant to the question itself, and it turns the question into an unreadable wall of text. Better keep it simple and to the point."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1547467618, "post_id": 50946992, "comment_id": 95190625, "body": "I disagree. It&#39;s relevant (which is why it was requested) and not too long."}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 839, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1547464946, "creation_date": 1529493538, "last_edit_date": 1547464946, "question_id": 50946992, "link": "https://stackoverflow.com/questions/50946992/how-to-determine-whether-a-file-or-folder-is-on-ssd-or-a-hard-drive", "title": "How to determine whether a file or folder is on SSD or a hard drive?", "body": "<p>How to programmatically determine in C or C++ whether a specified path is on a flash (SSD) drive or a magnetic hard drive? I'm only interested in fixed drives, not removable ones, although it will be nice to determine the type of a removable drive as well.</p>\n\n<p>I can see ways to get the root volume path for a specified end path, and a way to get the GUID of this volume, but I'm not finding a way to query this volume's hardware traits.</p>\n"}, {"tags": ["c++", "arrays", "templates", "c++17", "template-argument-deduction"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1529493303, "post_id": 50946721, "comment_id": 88891041, "body": "Then what errors are you getting? Are you sure it&#39;s a problem with the <i>type</i> deduction and not the <i>size</i> deduction? Or perhaps it&#39;s a problem with the compiler? What compilers are you testing with? What versions of those compilers?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1529493318, "post_id": 50946721, "comment_id": 88891044, "body": "@Someprogrammerdude It&#39;s not a problem, it&#39;s a matter of choice. And I wonder whether there is some rationale behind the choice that has been made."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 6, "creation_date": 1529493442, "post_id": 50946721, "comment_id": 88891124, "body": "I think it makes perfect sense for values used for array initialization to have the same type because array holds elements of the same type. While implicit conversion of integer to double in your example looks like a potential shot in the leg."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1529493706, "post_id": 50946721, "comment_id": 88891302, "body": "Consider you have classes <code>A</code>, and <code>B</code>, which can be implicitly converted from one to another, due to relevant conversion constructors being present. Which type (<code>A</code>, or <code>B</code>), would you expect <code>std::array</code> to choose, when constructing the array, of instances, of both, then?"}, {"owner": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1529493795, "post_id": 50946721, "comment_id": 88891363, "body": "Also indexing of such an error would seem a major pain in the butt to me. Every element could be of different size. How would you perform random access? By first calculating the offset by iterating every element up until the target element?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1529493907, "post_id": 50946721, "comment_id": 88891422, "body": "@AlgirdasPreid\u017eius The same type that <code>std::common_type</code> derives, if any."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 915, "user_id": 3254536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4d61200a78c3d51c929553f2a3c5de8?s=128&d=identicon&r=PG&f=1", "display_name": "Neijwiert", "link": "https://stackoverflow.com/users/3254536/neijwiert"}, "edited": false, "score": 0, "creation_date": 1529493982, "post_id": 50946721, "comment_id": 88891470, "body": "@Neijwiert You did&#39;t understand the question. Of course, the array would have all the elements of the same type. Just initialization with elements of different type would be allowed together with deduction of template arguments."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1529494107, "post_id": 50946721, "comment_id": 88891539, "body": "@AlgirdasPreid\u017eius - A compiler error would be expected (and produced thanks to <code>common_type</code>). Frankly, so long as it&#39;s not a narrowing conversion. I don&#39;t see an issue."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1529495069, "post_id": 50946721, "comment_id": 88892116, "body": "@StoryTeller I suspected, that there might be a compiler error involved, but I just wanted to raise a question, about the expectations, when conversions are present. In addition, what about another case, where you have classes <code>A</code>, <code>B</code>, and <code>C</code>. <code>A</code> can be converted to <code>B</code>, and <code>B</code> can be converted to <code>C</code>. <code>C</code> is seemingly the common type, since everything can be, directly, or indirectly, converted to it, hence such deduction still fails due to the fact, that no more than one implicit conversion is done, for classes."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1529495171, "post_id": 50946721, "comment_id": 88892199, "body": "@AlgirdasPreid\u017eius, is implicit conversion transitive?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1529495271, "post_id": 50946721, "comment_id": 88892264, "body": "@AlgirdasPreid\u017eius - Yeah, but I don&#39;t really see a failing conversion as a problem. If it fails due to conversions, then the programmer will need to be more explicit, as they already need to be. It&#39;s just a bit annoying to require the same explicitness when the compiler is able to figure it out. Just merely having the deduction guide is a step in that direction. This question is focused on why a second step wasn&#39;t taken as well."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1529495438, "post_id": 50946721, "comment_id": 88892392, "body": "@StoryTeller Hmm.. So, it is not about solving all of the corner cases, but rather, deducing as much as possible, whenever it is.. Yeah, I can see your point."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 3, "creation_date": 1529496659, "post_id": 50946721, "comment_id": 88893228, "body": "The increase in complexity is huge, with the payoff being you type slightly less. I&#39;d think that&#39;s enough reason. As a reference, read <a href=\"http://en.cppreference.com/w/cpp/types/common_type\" rel=\"nofollow noreferrer\">std::common_type</a>, and see how long it takes."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1529512899, "post_id": 50946721, "comment_id": 88904038, "body": "<code>std::array</code> is not special. Other containers do not accept list initializer of different types too."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1529693097, "post_id": 50946721, "comment_id": 88982474, "body": "You already know why! Some maeutics: which type to you think should hold the array? And if the float was the first parameter?"}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529498398, "post_id": 50947976, "comment_id": 88894486, "body": "I can even provide a deduction guide for <code>std::array</code>: <a href=\"https://wandbox.org/permlink/av80vxqPSIpdW4DO\" rel=\"nofollow noreferrer\">wandbox.org/permlink/av80vxqPSIpdW4DO</a>. Though, it&#39;s technically undefined behavior ;-)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529498785, "post_id": 50947976, "comment_id": 88894713, "body": "@DanielLangr You could also overload <code>foo</code> (carefully excluding <code>T == U</code>) to forward to <code>foo&lt;common_type_t&gt;</code>, and have equally UB introducing similar overloads into <code>namespace std</code>"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 6, "last_activity_date": 1529499205, "last_edit_date": 1529499205, "creation_date": 1529496827, "answer_id": 50947976, "question_id": 50946721, "link": "https://stackoverflow.com/questions/50946721/why-deduction-guide-for-stdarray-does-not-allow-different-types/50947976#50947976", "title": "Why deduction guide for std::array does not allow different types?", "body": "<p>It matches how function template arguments are deduced. </p>\n\n<blockquote>\n  <p>If they yield more than one possible deduced <code>A</code>, the type deduction fails.</p>\n</blockquote>\n\n<p><a href=\"http://eel.is/c++draft/temp.deduct.call#5\" rel=\"nofollow noreferrer\">[temp.deduct.call]/5</a></p>\n\n<p>e.g.</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(T, T){}\n\ntemplate&lt;typename T&gt;\nstruct bar{ bar(T, T) {} };\n\nint main()\n{\n    foo(1, 1.5); // error, note:   deduced conflicting types for parameter 'T' ('int' and 'double')\n    bar(1, 1.5); // error, note:   deduced conflicting types for parameter 'T' ('int' and 'double')\n}\n</code></pre>\n\n<p>But you can provide a deduction guide for common types.</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct baz{ baz(T, T) {} };\n\ntemplate&lt;typename T, typename U&gt;\nbaz(T, U) -&gt; baz&lt;std::common_type_t&lt;T, U&gt;&gt;    \n</code></pre>\n\n<p>or overloads that forward to common types</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid quux(T, T){}\n\ntemplate&lt;typename T, typename U&gt;\nstd::enable_if_t&lt;!std::is_same&lt;std::decay_t&lt;T&gt;, std::decay_t&lt;U&gt;&gt;&gt; quux(T t, U u) \n{ \n    using C = std::common_type_t&lt;T, U&gt;; \n    quux&lt;C&gt;(std::forward&lt;C&gt;(t), std::forward&lt;C&gt;(u)); // I think this is right\n}\n\nint main()\n{\n    baz(1, 1.5);\n    quux(1, 1.5);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 10, "last_activity_date": 1529566618, "last_edit_date": 1529566618, "creation_date": 1529525036, "answer_id": 50956214, "question_id": 50946721, "link": "https://stackoverflow.com/questions/50946721/why-deduction-guide-for-stdarray-does-not-allow-different-types/50956214#50956214", "title": "Why deduction guide for std::array does not allow different types?", "body": "<p>There are <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/p0511r1.html\" rel=\"noreferrer\">substantial design issues</a> with using <code>common_type</code>. For example, <code>std::common_type_t&lt;A, B, C&gt;</code>, <code>std::common_type_t&lt;C, A, B&gt;</code> and <code>std::common_type_t&lt;C, B, A&gt;</code> need not all exist - and if they do, need not be the same type:</p>\n\n<pre><code>struct A;\nstruct B;\nstruct C;\nstruct A { operator B(); };\nstruct B { operator C(); };\nstruct C { operator A(); };\n\nstatic_assert(std::is_same_v&lt;std::common_type_t&lt;A, B, C&gt;, C&gt;);\nstatic_assert(std::is_same_v&lt;std::common_type_t&lt;C, A, B&gt;, B&gt;);\nstatic_assert(std::is_same_v&lt;std::common_type_t&lt;C, B, A&gt;, A&gt;);\n</code></pre>\n\n<p>That makes for an \"interesting\" user experience when reordering the elements of the initializer causes a different type to be deduced (or an error to be emitted).</p>\n"}, {"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1529560839, "post_id": 50958185, "comment_id": 88919442, "body": "You likely misinterpreted my question. I didn&#39;t ask about a possibility to create an array that would contain elements of different types. I asked about possibility to create an array of elements of the same type such that 1) this type would be deduced and 2) aggregate initialization list could have elements of different types."}, {"owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1529594202, "post_id": 50958185, "comment_id": 88940502, "body": "I certainly did, sorry about that!  Can I suggest you edit your question to add that clarification?  It might help others avoid my mistake."}], "tags": [], "owner": {"reputation": 3960, "user_id": 654614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fc0d43eb99234ed9702badb191b7d96?s=128&d=identicon&r=PG&f=1", "display_name": "Frank Boyne", "link": "https://stackoverflow.com/users/654614/frank-boyne"}, "is_accepted": false, "score": 1, "last_activity_date": 1529626670, "last_edit_date": 1529626670, "creation_date": 1529535532, "answer_id": 50958185, "question_id": 50946721, "link": "https://stackoverflow.com/questions/50946721/why-deduction-guide-for-stdarray-does-not-allow-different-types/50958185#50958185", "title": "Why deduction guide for std::array does not allow different types?", "body": "<p><strong>Edit:</strong> In a comment below, <a href=\"https://stackoverflow.com/users/580083/daniel-langr\">Daniel</a> points out he was really asking about why a <code>std::array</code> of one single type could not be initialized by a list containing entries of different types (for example two <code>int</code> and a <code>double</code>).  Not why a <code>std::array</code> has to be one single type.</p>\n\n<p>It doesn't address Daniel's request for a rationale but some C++ environments support the experimental\\array header and the <a href=\"http://en.cppreference.com/w/cpp/experimental/make_array\" rel=\"nofollow noreferrer\"><code>std::experimental::make_array</code></a> class which does allow initialisation of a std::array from different types.  The array type can be deduced or specified...</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;experimental/array&gt;\n\n// creates array of doubles \nauto arr = std::experimental::make_array(1, 2, 3.4);\n\n// creates array of ints\nauto ra = std::experimental::make_array&lt;int&gt; (1, 2, 3.4);\n</code></pre>\n\n<p><a href=\"https://www.ideone.com/YaGCaH\" rel=\"nofollow noreferrer\">ideone runnable sample</a></p>\n\n<hr>\n\n<blockquote>\n  <p>What is the rationale behind such a requirement?</p>\n</blockquote>\n\n<p>The restriction is required to meet the semantics of the array container.</p>\n\n<p>For example, <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">cppreference</a> puts it like this \u2026 </p>\n\n<blockquote>\n  <p>This container is an aggregate type with the same semantics as a struct holding a C-style array <code>T[N]</code> as its only non-static data member.</p>\n</blockquote>\n\n<p>Obviously there's no way to have a C-style array of more than one type <strong>T</strong>.</p>\n\n<p>For another perspective: <a href=\"http://www.cplusplus.com/reference/array/array/\" rel=\"nofollow noreferrer\">cplusplus</a> says this \u2026 </p>\n\n<blockquote>\n  <p><strong>Container properties</strong>  </p>\n  \n  <p><strong><em>Sequence</em></strong><br>\n  Elements in sequence containers are ordered in a strict linear sequence. Individual elements are accessed by their position in this sequence.  </p>\n  \n  <p><strong><em>Contiguous storage</em></strong><br>\n  The elements are stored in contiguous memory locations, allowing constant time random access to elements. Pointers to an element can be offset to access other elements.  </p>\n  \n  <p><strong><em>Fixed-size aggregate</em></strong><br>\n  The container uses implicit constructors and destructors to allocate the required space statically. Its size is compile-time constant. No memory or time overhead.</p>\n</blockquote>\n\n<p>For pointer arithmetic to make sense every element has to be the same width.  For dereferencing the pointer (after pointer arithmetic) to make sense each element has to use the same bit representation - otherwise you might find yourself treating an IEEE floating point representation as if it were a two's-complement integer (or vice versa).</p>\n\n<hr>\n\n<p>It doesn't really address your request for a rationale to say \"because the standard says so\" but it does (<em>I think</em>).  I can't find a citeable copy of the actual standard but <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4687.pdf\" rel=\"nofollow noreferrer\">a working draft of the C++ standard</a> said this...</p>\n\n<blockquote>\n  <p><strong>26.3.7.2 array constructors, copy, and assignment [array.cons]</strong><br>\n  The conditions for an aggregate (11.6.1) shall be met. Class array relies on the implicitly-declared special member functions (15.1, 15.4, and 15.8) to conform to the container requirements table in 26.2. In addition to the requirements speci\ufb01ed in the container requirements table, the implicit move constructor and move assignment operator for array require that T be MoveConstructible or MoveAssignable, respectively.  </p>\n\n<pre><code>template&lt;class T, class... U&gt;  \n  array(T, U...) -&gt; array&lt;T, 1 + sizeof...(U)&gt;;`   \n</code></pre>\n  \n  <p><em>Requires:</em> <code>(is_same_v&lt;T, U&gt; &amp;&amp; ...)</code> is true. Otherwise the program is ill-formed.</p>\n</blockquote>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1530311874, "creation_date": 1529492683, "last_edit_date": 1530311874, "question_id": 50946721, "link": "https://stackoverflow.com/questions/50946721/why-deduction-guide-for-stdarray-does-not-allow-different-types", "title": "Why deduction guide for std::array does not allow different types?", "body": "<p>The deduction guide for <code>std::array</code> requires all types be the same:</p>\n\n<pre><code>std::array arr = { 1, 2, 3.4 }; // error\n</code></pre>\n\n<p>What is the rationale behind such a requirement? Would there be any significant drawback if different types were allowed instead? For example:</p>\n\n<pre><code>namespace std {\n   template &lt;typename... T&gt;\n   array(T...) -&gt; array&lt;std::common_type_t&lt;T...&gt;, sizeof...(T)&gt;;\n}\n\nstd::array arr = { 1, 2, 3.4 }; // decltype(arr)::value_type deduced as double\n</code></pre>\n"}, {"tags": ["c++", "cmake", "conan"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1529494518, "post_id": 50946654, "comment_id": 88891795, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5998186/adding-command-line-options-to-cmake\">Adding command line options to CMake</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "is_accepted": true, "score": 2, "last_activity_date": 1529525551, "creation_date": 1529525551, "answer_id": 50956330, "question_id": 50946654, "link": "https://stackoverflow.com/questions/50946654/file-selection-with-conan-and-cmake/50956330#50956330", "title": "File selection with conan and cmake", "body": "<p>You can pass variables to cmake command line invocation driven by the cmake helper. Something like:</p>\n\n<pre><code>options = {\"fileSelection\": [\"var1\", \"var2\"]}\n...\n\ndef build(self): \n   cmake = CMake(self)\n   cmake.definitions[\"fileSelection\"] = self.options.fileSelection\n   cmake.configure(source_folder=\"pkg\")\n   cmake.build()\n</code></pre>\n\n<p>That assumes that you have the CMakeLists.txt logic you describe.</p>\n"}], "owner": {"reputation": 111, "user_id": 9966394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oPbsL.jpg?s=128&g=1", "display_name": "nicole", "link": "https://stackoverflow.com/users/9966394/nicole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "accepted_answer_id": 50956330, "answer_count": 1, "score": 1, "last_activity_date": 1529525551, "creation_date": 1529492464, "question_id": 50946654, "link": "https://stackoverflow.com/questions/50946654/file-selection-with-conan-and-cmake", "title": "File selection with conan and cmake", "body": "<p>I have a package with 2 variants with the following directory structure<br></p>\n\n<pre><code>pkg\n   pkg_main.h\n   CMakeLists.txt\n   var1\n      pkg_main.cpp\n   var2\n      pkg_main.cpp\nconanfile.py\n</code></pre>\n\n<p>With <a href=\"https://conan.io/\" rel=\"nofollow noreferrer\">conan</a>, I'm trying to define an option <code>fileSelection</code> with possible values <code>var1</code> and <code>var2</code>.\nWith cmake, I'm trying to do the selection as following: if <code>fileSelection</code> is set to <code>var1</code>, then <code>var1/pkg_main.cpp</code> shall be called, otherwise <code>var2/pkg_main.cpp</code>.<br><br>\nSo far, I've defined the option <code>fileSelection</code> in <code>conanfile.py</code><br></p>\n\n<pre><code>class PkgConan(ConanFile):\n   name = \"pkg\"\n   ...\n   options = {\"fileSelection : ['var1', 'var2']\"}\n   default_options = \"fileSelection=var1\"\n   generators = \"cmake\"\n\n   def build(self): \n      cmake = CMake(self)\n      cmake.configure(source_folder=\"pkg\")\n      cmake.build()\n\n   def package(self):\n       self.copy(\"*.h\", dst=\"include\", src=\"pkg\")\n       self.copy(\"*pkg.lib\", dst=\"lib\", keep_path=False)\n       self.copy(\"*.dll\", dst=\"bin\", keep_path=False)\n       self.copy(\"*.so\", dst=\"lib\", keep_path=False)\n       self.copy(\"*.dylib\", dst=\"lib\", keep_path=False)\n       self.copy(\"*.a\", dst=\"lib\", keep_path=False)\n\n   def package_info(self):\n       self.cpp_info.libs = [\"pkg\"]\n</code></pre>\n\n<p>Now I'm struggling to update the <code>CMakeLists.txt</code> file to do the selection according to the value of <code>fileSelection</code>. Something like this:<br>\n[<b>here's the logic, not the runnable code</b>] </p>\n\n<pre><code>if(\"${fileSelection}\" STREQUAL \"var1\") \n   add_library(pkg var1/pkg_main.cpp)\nelse\n   add_library(pkg var2/pkg_main.cpp)\nendif\n</code></pre>\n\n<p><b>??</b> How do I pass the <code>fileSelection</code> option to cmake; where and how do I implement the switch between <code>var1</code> and <code>var2</code> (am I going in the right direction by trying to define the switch in CMakeLists.txt)?</p>\n"}, {"tags": ["java", "android", "c++", "android-ndk", "native"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9433323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b5b5dd0d31ff110c5f5aad02e12013?s=128&d=identicon&r=PG&f=1", "display_name": "StackOverflow User", "link": "https://stackoverflow.com/users/9433323/stackoverflow-user"}, "edited": false, "score": 0, "creation_date": 1529504463, "post_id": 50949007, "comment_id": 88898592, "body": "OK I will change the \\ to /. You said that the LOCAL_C_INCLUDES are probably irrelevant because there are no C files in my jni directory. But I do have C files in the jni directory, look at my first post, right at the beginning at lines 3 &amp; 4 I wrote the full path of &#39;ip.c&#39; and &#39;native.c&#39;, both of them locate inside the jni folder."}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 9, "user_id": 9433323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b5b5dd0d31ff110c5f5aad02e12013?s=128&d=identicon&r=PG&f=1", "display_name": "StackOverflow User", "link": "https://stackoverflow.com/users/9433323/stackoverflow-user"}, "edited": false, "score": 0, "creation_date": 1529510644, "post_id": 50949007, "comment_id": 88902772, "body": "<b>ip.c</b> is covered by <code>$(LOCAL_PATH)&#47;ip&#47;Android.mk</code>, isn&#39;t it? And <b>native.c</b> has another <b>Android.mk</b> next to it, which I also <code>include</code>."}, {"owner": {"reputation": 9, "user_id": 9433323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b5b5dd0d31ff110c5f5aad02e12013?s=128&d=identicon&r=PG&f=1", "display_name": "StackOverflow User", "link": "https://stackoverflow.com/users/9433323/stackoverflow-user"}, "edited": false, "score": 0, "creation_date": 1529560854, "post_id": 50949007, "comment_id": 88919448, "body": "I don&#39;t know, I&#39;m still a little confused about the format of this file and what need and what doesn&#39;t need to be there. What is the different between LOCAL_SRC_FILES and LOCAL_C_INCLUDES ? why the first one is not enough?"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 9, "user_id": 9433323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b5b5dd0d31ff110c5f5aad02e12013?s=128&d=identicon&r=PG&f=1", "display_name": "StackOverflow User", "link": "https://stackoverflow.com/users/9433323/stackoverflow-user"}, "edited": false, "score": 0, "creation_date": 1529602945, "post_id": 50949007, "comment_id": 88945433, "body": "You can learn about <a href=\"http://android.mk/\" rel=\"nofollow noreferrer\">android.mk</a>, but in a nutshell, LOCAL_SRC_FILES lists the c and cpp files that must be compiled (relative to LOCAL_PATH), while LOCAL_C_INCLUDES lists <i>directories</i> that contain the headers necessary to compile them. Unlike LOCAL_SRC_FILES, LOCAL_C_INCLUDES don&#39;t depend on LOCAL_PATH."}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1529500031, "creation_date": 1529500031, "answer_id": 50949007, "question_id": 50946457, "link": "https://stackoverflow.com/questions/50946457/how-to-update-order-android-mk-file/50949007#50949007", "title": "How to update/Order &#39;Android.mk&#39; file?", "body": "<p>The convention is to use <code>/</code> in <strong>.mk</strong> files as path separators. This will be of real help if you once want to use this project on Linux.</p>\n\n<p>In your case, <code>LOCAL_C_INCLUDES</code> are probably irrelevant, because there are no C files in your <strong>jni</strong> directory.</p>\n\n<p>You should clean up the <em>'main'</em> <strong>jni/Android.mk</strong> file. You could use (<code>include</code>) the smaller <strong>.mk</strong> files in the subdirectories, on assumption that they are correct. For example, I hope that <strong>libusb/Android.mk</strong> is not too far from the <a href=\"https://github.com/libusb/libusb/blob/master/android/jni/Android.mk\" rel=\"nofollow noreferrer\">public version on GitHub</a> and does not compile the Windows-specific sources, e.g. <strong>wince_usb.c</strong>.</p>\n\n<p>This would be a reasonable first iteration:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := app\nLOCAL_WHOLE_STATIC_LIBRARIES := native\n\ninclude $(BUILD_SHARED_LIBRARY)\n\ninclude $(LOCAL_PATH)/ip/Android.mk\ninclude $(LOCAL_PATH)/nativeinterface/Android.mk\ninclude $(LOCAL_PATH)/libusb_saki4510t/Android.mk\n</code></pre>\n\n<p>I cannot tell if you need the prebuilt libraries like <strong>libDropboxSync.so</strong> and others, but they are listed in <strong>jni/prebuilt/Android.mk</strong>. </p>\n"}], "owner": {"reputation": 9, "user_id": 9433323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22b5b5dd0d31ff110c5f5aad02e12013?s=128&d=identicon&r=PG&f=1", "display_name": "StackOverflow User", "link": "https://stackoverflow.com/users/9433323/stackoverflow-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 210, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529500031, "creation_date": 1529491804, "last_edit_date": 1529492165, "question_id": 50946457, "link": "https://stackoverflow.com/questions/50946457/how-to-update-order-android-mk-file", "title": "How to update/Order &#39;Android.mk&#39; file?", "body": "<p>I started working on an 'Android Studio' project which was imported from Eclipse. In this project I have two .c files that makes me lot of problems:</p>\n\n<p>D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\ip\\ip.c\nD:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\nativeinterface\\native.c</p>\n\n<p>I'm updeting the code of this files, and every few compilations (Build ---> Build Project) I'm getting the following error:</p>\n\n<p>\"This file is not part of the project. Please include it in the appropriate build file (build.gradle, CMakeLists.txt or Android.mk etc.) and sync the project\"</p>\n\n<p>I try to perform Build ---> \"Refresh Linked C++ Projects\", sometimes it works, sometimes it doesn't, and if it works, a few compilations later the error returns.</p>\n\n<p>I think that the problem related to the file:</p>\n\n<p>D:\\AndroidProjects\\AndroidApp\\SDK\\Android.mk</p>\n\n<p>which you can see below. I have 5 main questions about it:</p>\n\n<ol>\n<li><p>I see in this file some *.mk, *.mk.swp, and *.so files, is that OK? should this files be there?</p></li>\n<li><p>In my files pathes I have this slash '\\', but in some example in the internet I see this slash '/', which one is the right one? does it matter at all?</p></li>\n<li><p>I can see two main sections in this file:</p></li>\n</ol>\n\n<p><code>LOCAL_SRC_FILES</code></p>\n\n<p><code>LOCAL_C_INCLUDES</code></p>\n\n<p>Should I add the pathes to the \"ip.c\" and \"native.c\" files in both sections? or only to one of them?</p>\n\n<ol start=\"4\">\n<li>In the project I see more 'Android.mk' files (which are shorter) should they be there also aditional to the main 'Android.mk' file?</li>\n</ol>\n\n<p>For example this is the 'Android.mk' in the folder of 'ip.c' file:</p>\n\n<hr>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\n\ninclude $(CLEAR_VARS)\n\nLOCAL_SRC_FILES:= \\\n     ip.c\n\nLOCAL_LDLIBS := -llog\n\nLOCAL_MODULE := ipAndroidApp\n\nLOCAL_CFLAGS += -O3\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<hr>\n\n<p>and this is the 'Android.mk' in the folder of 'native.c' file:</p>\n\n<hr>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_SRC_FILES := native.c\nLOCAL_MODULE    := native\n\ninclude $(BUILD_STATIC_LIBRARY)  \n</code></pre>\n\n<hr>\n\n<ol start=\"5\">\n<li>The <code>LOCAL_C_INCLUDES</code> section start with <code>+=</code> , is that OK? or must the first line start with <code>:=</code> ?</li>\n</ol>\n\n<p>Thanks.</p>\n\n<p>Here is my main 'Android.mk' file:</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE := app\nLOCAL_LDFLAGS := -Wl,--build-id\nLOCAL_SRC_FILES :=\n\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\.Application.mk.swp \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\Application.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\ip\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\ip\\ip.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\ipd\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\ipn\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\core.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\descriptor.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\io.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\os\\linux_usbfs.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\os\\threads_posix.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\sync.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_orig\\__Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\core.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\core_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\descriptor.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\descriptor_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\hotplug.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\hotplug_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\io.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\io_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\libusb-1.0.def \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\libusb-1.0.rc \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\Makefile.am \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\android_netlink.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\android_usbfs.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\darwin_usb.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\linux_netlink.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\linux_udev.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\linux_usbfs.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\netbsd_usb.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\openbsd_usb.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\poll_posix.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\poll_posix_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\poll_windows.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\threads_posix.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\threads_windows.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\wince_usb.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\os\\windows_usb.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\strerror.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\sync.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\libusb_saki4510t\\libusb\\sync_original.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\nativeinterface\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\nativeinterface\\native.c \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\Android.mk \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\libDropboxSync.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\libipandroidapp.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\libopentok.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\librs.androidappsdk_ipd.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\librs.androidappsdk_ipn.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\librs.androidappsdk_rgb2yuv.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi\\libusbandroidapp.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\libDropboxSync.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\libipandroidapp.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\libopentok.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\librs.androidappsdk_ipd.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\librs.androidappsdk_ipn.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\librs.androidappsdk_rgb2yuv.so \\\n    D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\\prebuilt\\armeabi-v7a\\libusbandroidapp.so \\\n\nLOCAL_C_INCLUDES += D:\\AndroidProjects\\AndroidApp\\SDK\\src\\main\\jni\n\nLOCAL_C_INCLUDES += D:\\AndroidProjects\\AndroidApp\\SDK\\src\\release\\jni\n\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "boost"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1529493133, "creation_date": 1529493133, "answer_id": 50946860, "question_id": 50946354, "link": "https://stackoverflow.com/questions/50946354/organization-of-unit-tests-with-c-boost-test/50946860#50946860", "title": "Organization of unit tests with C++ Boost.Test?", "body": "<p>It's all your choice.</p>\n\n<ol>\n<li><p>if you want black box testing, sure. I've also done whitebox testing where the unit test CPP includes static definitions also included in the implementation cpp (<code>.ipp</code>)</p></li>\n<li><p>Just link the object files containing tests, like you normally do. Static libraries with tests are fine too.</p></li>\n<li><p>They usually do. You can of course have all the files (including tests) in a single project/library that your program as well as test runner depend on. </p>\n\n<p>But it's usually a good idea to not link/include the tests in your main program. Not only does this</p>\n\n<ul>\n<li>reduce size</li>\n<li>reduce risk of leaking information (e.g. test fixture data/details)</li>\n</ul>\n\n<p>It also gives you freedom to add dependencies for test only that you don't want to include in the deployed software (mock frameworks, SQLite e.g.)</p></li>\n<li><p>The purpose is exactly to organize your tests. Say if you have tests that relate to \"text file importing\" in several translation units. </p>\n\n<p>In particular, test suites</p>\n\n<ul>\n<li>can be nested,</li>\n<li>act like namespaces (opening the same \"suite\" namespace in several translation units combines all the tests in that single suite)</li>\n<li>can have \"global\" setup/teardown, and labels</li>\n</ul></li>\n</ol>\n"}], "owner": {"reputation": 1027, "user_id": 2942145, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8f62f0fbb005fdfe8bb60a18d0ad5e69?s=128&d=identicon&r=PG&f=1", "display_name": "Moody", "link": "https://stackoverflow.com/users/2942145/moody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1616070981, "creation_date": 1529491466, "last_edit_date": 1616070981, "question_id": 50946354, "link": "https://stackoverflow.com/questions/50946354/organization-of-unit-tests-with-c-boost-test", "title": "Organization of unit tests with C++ Boost.Test?", "body": "<p>I've been reading about unit testing and I'm a little confused as to how the tests of different program components are organized. I'm assuming that each class usually has its own set of unit tests. If so:</p>\n<ol>\n<li>Should every class to be tested get its own unit test .cpp file?</li>\n<li>How to combine all the unit test .cpp files together?</li>\n<li>Do the unit test files go into their own separate VS project? If so, is it run manually when desired, or can it somehow be connected to your actual project?</li>\n<li>What is the purpose of test suits?</li>\n</ol>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1529491408, "post_id": 50946271, "comment_id": 88889872, "body": "Welcome to stackoverflow.com. Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1529491466, "post_id": 50946271, "comment_id": 88889901, "body": "I also recommend <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this Stack Overflow question checklist</a>, as well as reading all of <a href=\"http://idownvotedbecau.se/\" rel=\"nofollow noreferrer\">idownvotedbecau.se</a> to learn some reasons you might get negative votes on your question. Lastly please <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">learn how to debug your programs</a>."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1529516383, "post_id": 50948344, "comment_id": 88905915, "body": "Note, you should be using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762102.aspx\" rel=\"nofollow noreferrer\"><code>SetWindowSubclass()</code></a> instead of <code>SetWindowLongPtr(GWLP_WNDPROC)</code>, see <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20031111-00/?p=41883\" rel=\"nofollow noreferrer\">Safer subclassing</a>."}], "tags": [], "owner": {"reputation": 31, "user_id": 9966919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hgh3NFeMIh4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3WYOCxL-YWgeU-Zj7nDacw8H9umg/mo/photo.jpg?sz=128", "display_name": "Callum MacGregor", "link": "https://stackoverflow.com/users/9966919/callum-macgregor"}, "is_accepted": false, "score": 1, "last_activity_date": 1529497865, "creation_date": 1529497865, "answer_id": 50948344, "question_id": 50946271, "link": "https://stackoverflow.com/questions/50946271/setwindowlongptr-with-gwlp-wndproc-does-not-work-with-fullscreen-applications-si/50948344#50948344", "title": "SetWindowLongPtr with GWLP_WNDPROC does not work with fullscreen applications since 1803 (C++)", "body": "<p>Found the solution, previously I was only hooking the first window belonging to the process id with this code:</p>\n\n<pre><code>    static HWND hwndTarget = NULL;\n    auto CaptureWindow = [](HWND hwnd, LPARAM lParam) -&gt; BOOL\n    {\n        DWORD lpdwProcessId;\n        GetWindowThreadProcessId(hwnd, &amp;lpdwProcessId);\n        if (lpdwProcessId == lParam)\n        {\n            hwndTarget = hwnd;\n            return FALSE;\n        }\n        return TRUE;\n    };\n    EnumWindows(CaptureWindow, static_cast&lt;LPARAM&gt;(pid));\n\n    if (hwndTarget == NULL)\n    {\n        LOG(\"Unable to find target window handle\");\n        return false;\n    }\n\n    gWndProc = reinterpret_cast&lt;WNDPROC&gt;(SetWindowLongPtr(hwndTarget, GWLP_WNDPROC, (LONG_PTR)WindowProc));\n</code></pre>\n\n<p>However the following code fixed it:</p>\n\n<pre><code>std::vector&lt;HWND&gt; hwnds;\n\n    GetAllWindowsFromProcessID(GetCurrentProcessId(), hwnds);\n\n    if (hwnds.size() == 0)\n        return false;\n\n    for (auto&amp; h : hwnds)\n    {\n        WNDPROC oldProc = reinterpret_cast&lt;WNDPROC&gt;(GetWindowLongPtr(h, GWLP_WNDPROC));\n\n        if (oldProc == 0)\n            continue;\n\n        gWndProcs[h] = oldProc;\n\n        gWndProc = reinterpret_cast&lt;WNDPROC&gt;(SetWindowLongPtr(h, GWLP_WNDPROC, (LONG_PTR)WindowProc));\n    }\n\n    return true;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9966919, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Hgh3NFeMIh4/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3WYOCxL-YWgeU-Zj7nDacw8H9umg/mo/photo.jpg?sz=128", "display_name": "Callum MacGregor", "link": "https://stackoverflow.com/users/9966919/callum-macgregor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1529497865, "creation_date": 1529491238, "question_id": 50946271, "link": "https://stackoverflow.com/questions/50946271/setwindowlongptr-with-gwlp-wndproc-does-not-work-with-fullscreen-applications-si", "title": "SetWindowLongPtr with GWLP_WNDPROC does not work with fullscreen applications since 1803 (C++)", "body": "<p>Since the 1803 update, SetWindowLongPtr seems to have changed in some way. The function returns no error codes, and a valid value. Applies to both x64 and x86 applications. Only happens in fullscreen applications (games). In windowed applications, the same (valid) return values are returned and the hook works as expected.</p>\n\n<p>My code has remained the same for quite a long time, and only presented this problem after upgrading to 1803.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "dll", "openh264"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 0, "creation_date": 1529491504, "post_id": 50946263, "comment_id": 88889934, "body": "Just taken a quick look but no prioir knowledge: Download the DLL and the source. In the source there seems to be a def file (openh264.def) and a header (codec_api.h). Its probable that is all you need."}, {"owner": {"reputation": 1573, "user_id": 752318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31de368b1bbb9988477511b2c59d61c0?s=128&d=identicon&r=PG", "display_name": "pure cuteness", "link": "https://stackoverflow.com/users/752318/pure-cuteness"}, "edited": false, "score": 0, "creation_date": 1529491575, "post_id": 50946263, "comment_id": 88889976, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9946322/how-to-generate-an-import-library-lib-file-from-a-dll\">How to generate an import library (LIB-file) from a DLL?</a>"}], "owner": {"reputation": 161, "user_id": 6278149, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/092596c1b1bc647a15058aafd34567b2?s=128&d=identicon&r=PG&f=1", "display_name": "dYTe", "link": "https://stackoverflow.com/users/6278149/dyte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1529491189, "creation_date": 1529491189, "question_id": 50946263, "link": "https://stackoverflow.com/questions/50946263/how-to-use-a-dll-file-in-visual-studio-c-when-it-didnt-come-with-a-lib-file-a", "title": "How to use a dll-file in Visual Studio C++ when it didn&#39;t come with a lib-file and header files?", "body": "<p>I want to use the <a href=\"https://github.com/cisco/openh264\" rel=\"nofollow noreferrer\">OpenH264 library</a> in my Visual Studio C++ project.\nNow, I was given the advice to use the precompiled version, since they already offer that.</p>\n\n<p>But when I look at the <a href=\"https://github.com/cisco/openh264/releases\" rel=\"nofollow noreferrer\">releases</a> there only is a precompiled dll-file, nothing else. Or I'm just incapable of finding the rest.</p>\n\n<p>Anyways, now I have to use the dll-file without any lib- and header files which <a href=\"https://stackoverflow.com/questions/495795/how-do-i-use-a-third-party-dll-file-in-visual-studio-c\">apparently</a> shouldn't be necessary. So what gives?</p>\n\n<p>What would be the recommended way of advancing from this point on? Can I create the missing files myself or is there a better way of progressing?</p>\n"}, {"tags": ["c++", "qt", "pointers"], "comments": [{"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1529490972, "post_id": 50946144, "comment_id": 88889585, "body": "C and C++ are different languages. Please pick one."}, {"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1529491117, "post_id": 50946144, "comment_id": 88889668, "body": "@JonathonReinhart thanks for comment. I removed the C++ flag."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1529491164, "post_id": 50946144, "comment_id": 88889700, "body": "@Risheng Are you sure C is the right choice? Qt is a C++ library, and C does not have <code>&lt;iostream&gt;</code> or <code>new</code>."}, {"owner": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1529491219, "post_id": 50946144, "comment_id": 88889732, "body": "Now your code is tagged as C but has C++ code in it: <code>pFoo = new FooType;</code> Perhaps the first stepisode is to figure out what programming language you&#39;re using."}, {"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "reply_to_user": {"reputation": 115745, "user_id": 119527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/lTjBL.png?s=128&g=1", "display_name": "Jonathon Reinhart", "link": "https://stackoverflow.com/users/119527/jonathon-reinhart"}, "edited": false, "score": 0, "creation_date": 1529493416, "post_id": 50946144, "comment_id": 88891110, "body": "@JonathonReinhart Sorry for miss-understanding.  I replaced the new method with the original malloc. This is a very old project, with a core written in pure C, and some extra dll in C++. Now my team need to migrate to Qt platform, with Windows MSVC compiler."}, {"owner": {"reputation": 190, "user_id": 3671925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f24bdbbff136b1f68e1a8feca5847f78?s=128&d=identicon&r=PG&f=1", "display_name": "whoasked", "link": "https://stackoverflow.com/users/3671925/whoasked"}, "edited": false, "score": 0, "creation_date": 1529493877, "post_id": 50946144, "comment_id": 88891405, "body": "I&#39;ve really only glanced over this, but given hcID is already a pointer to pointer are you sure you want to further pass it by address to pfFoo()?"}, {"owner": {"reputation": 8296, "user_id": 2932052, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/63b8d6f5ce8e33b6953812ce8f5b2d40?s=128&d=identicon&r=PG", "display_name": "Wolf", "link": "https://stackoverflow.com/users/2932052/wolf"}, "edited": false, "score": 0, "creation_date": 1529493884, "post_id": 50946144, "comment_id": 88891407, "body": "This question deserves a good de-foo-bar-ication! Now it looks like you are trying to implement a C-implementation of C-like cast operation ;)"}, {"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1529494133, "post_id": 50946144, "comment_id": 88891552, "body": "@aschepler. The project is actually a mix of C core and C++ Dlls,  The code posted is actually from different files, and to make it run I changed it unconsciously with C++ syntax. Now I replaced it with malloc, as the original work."}, {"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "reply_to_user": {"reputation": 190, "user_id": 3671925, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f24bdbbff136b1f68e1a8feca5847f78?s=128&d=identicon&r=PG&f=1", "display_name": "whoasked", "link": "https://stackoverflow.com/users/3671925/whoasked"}, "edited": false, "score": 0, "creation_date": 1529494427, "post_id": 50946144, "comment_id": 88891742, "body": "@whoasked No I don&#39;t, but these code exist in my project already for almost 20 years. :("}, {"owner": {"reputation": 528, "user_id": 2184331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c59f93339e2cf87731ed5d709f275d5?s=128&d=identicon&r=PG", "display_name": "William J Bagshaw", "link": "https://stackoverflow.com/users/2184331/william-j-bagshaw"}, "edited": false, "score": 0, "creation_date": 1529508329, "post_id": 50946144, "comment_id": 88901240, "body": "Can we see the actual error?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "edited": false, "score": 0, "creation_date": 1529564815, "post_id": 50947679, "comment_id": 88921415, "body": "Thanks for comment, your are right! that&#39;s exactly the problem :)"}, {"owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "edited": false, "score": 0, "creation_date": 1529572114, "post_id": 50947679, "comment_id": 88925706, "body": "Sorry but it&#39;s not me dowvoted. someone downvoted your answer, as well as my question :("}, {"owner": {"reputation": 473, "user_id": 4851239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993fd5a9d2c3839ab78269293876adf7?s=128&d=identicon&r=PG&f=1", "display_name": "Johan van Breda", "link": "https://stackoverflow.com/users/4851239/johan-van-breda"}, "reply_to_user": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "edited": false, "score": 0, "creation_date": 1529575209, "post_id": 50947679, "comment_id": 88927684, "body": "That is the way it is, no problem."}], "tags": [], "owner": {"reputation": 473, "user_id": 4851239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993fd5a9d2c3839ab78269293876adf7?s=128&d=identicon&r=PG&f=1", "display_name": "Johan van Breda", "link": "https://stackoverflow.com/users/4851239/johan-van-breda"}, "is_accepted": true, "score": -1, "last_activity_date": 1529508070, "last_edit_date": 1529508070, "creation_date": 1529495798, "answer_id": 50947679, "question_id": 50946144, "link": "https://stackoverflow.com/questions/50946144/c-pointer-convertion-cause-memory-access-violation/50947679#50947679", "title": "C pointer convertion cause memory access violation", "body": "<p>The problem is in the </p>\n\n<pre><code>(unsigned long) \n</code></pre>\n\n<p>cast which works for 32 bit.\nUse</p>\n\n<pre><code>(unsigned long long)\n</code></pre>\n\n<p>instead. You need to do the replacement all over the place.</p>\n\n<p>Otherwise, get rid of the int to pointer conversion or use a 32 bit compiler instead</p>\n"}], "owner": {"reputation": 23, "user_id": 3821749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c258c542bfaf033111710325e886c8?s=128&d=identicon&r=PG&f=1", "display_name": "Risheng", "link": "https://stackoverflow.com/users/3821749/risheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 50947679, "answer_count": 1, "score": -1, "last_activity_date": 1529508070, "creation_date": 1529490842, "last_edit_date": 1529494745, "question_id": 50946144, "link": "https://stackoverflow.com/questions/50946144/c-pointer-convertion-cause-memory-access-violation", "title": "C pointer convertion cause memory access violation", "body": "<p>I'm trying to migrate an old project from Borland BCC 5 to Qt 5.6.3 with Microsoft MSVC 2015 64bit compiler.</p>\n\n<p>The following code is a model of original work. It works as expected in Visual Studio 2015 and Borland BCC 5, However, when I try to run it in Qt 5.6.3 with Qt Creator 3.6.1. It throws an error as \"*hcID\" is not accessible.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n\ntypedef void (*ProcFoo)  (void *pvData, unsigned long ulBarTag);\n\nstatic char* gpcID = NULL;\n\ntypedef struct FooType\n{\n    ProcFoo       pfFoo;      ///&lt; pointer to Foo callback function\n    unsigned long ulBarTag;   ///&lt; base id\n} FooType;\n\nFooType* pFoo = NULL;\n\nvoid RegisterAsFoo(unsigned long ulBarTag, ProcFoo pfFoo)\n{\n    pFoo = (FooType*)malloc(sizeof(FooType));\n\n    pFoo-&gt;ulBarTag = ulBarTag;\n    pFoo-&gt;pfFoo = pfFoo;\n}\n\n\nvoid GetBarTag(unsigned long *pulBarTag, unsigned long ulBarTag)\n{\n    *pulBarTag = ulBarTag;\n}\n\n\nint main()\n{\n    char s[] = \"Some Value\";\n    gpcID = s;\n    char ** hcID = NULL;\n\n    RegisterAsFoo((unsigned long)&amp;gpcID, (ProcFoo)GetBarTag);\n\n    pFoo-&gt;pfFoo(&amp;hcID, pFoo-&gt;ulBarTag);\n\n\n    // after the execution, the hcID is still NULL in Qt 5.6.3, however, \n    // it is valid in Visual Studio 2015 and Borland BCC 5.\n    char* result = (*hcID);\n\n    return 1;\n}\n</code></pre>\n\n<p>Thanks if you have any comments or ideas!</p>\n"}, {"tags": ["c++", "image", "visual-studio", "buffer"], "comments": [{"owner": {"reputation": 671, "user_id": 8022336, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VsZUw.png?s=128&g=1", "display_name": "pointerless", "link": "https://stackoverflow.com/users/8022336/pointerless"}, "edited": false, "score": 0, "creation_date": 1529490253, "post_id": 50945847, "comment_id": 88889116, "body": "A little more info about context and what code you have already got would be helpful. Color image or Grayscale or other? What libraries do you have available if not OpenCV? What code are you putting this in?"}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1529493058, "post_id": 50945847, "comment_id": 88890884, "body": "If you cannot use OpenCV it should not be tagged as an OpenCV question. If you want to use Image Watch... the <a href=\"https://imagewatch.azurewebsites.net/ImageWatchHelp/ImageWatchHelp.htm#_Extensibility\" rel=\"nofollow noreferrer\">documentation tells you</a> how to view &quot;User-defined image types&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "edited": false, "score": 0, "creation_date": 1529495780, "post_id": 50947019, "comment_id": 88892632, "body": "He meant with &quot;Image Watch&quot;, that is a plugin for VIsual Studio... The question is phrased in a confusing way... it is possible to display it without a proper library... but it requires several steps to make it work with image watch"}], "tags": [], "owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "is_accepted": false, "score": 0, "last_activity_date": 1529493615, "creation_date": 1529493615, "answer_id": 50947019, "question_id": 50945847, "link": "https://stackoverflow.com/questions/50945847/how-to-display-a-vectoruint16-t-image-on-msvc/50947019#50947019", "title": "How to display a vector&lt;uint16_t&gt; image on MSVC", "body": "<p>MSVC is an IDE. To do what you want you need to either write a library from scratch (aouchh!!!) or use an existing good one. Which one are you allowed to use?</p>\n"}], "owner": {"reputation": 33, "user_id": 7593033, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155163344394446/picture?type=large", "display_name": "Pedro Roios", "link": "https://stackoverflow.com/users/7593033/pedro-roios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1529493615, "creation_date": 1529489932, "last_edit_date": 1529492841, "question_id": 50945847, "link": "https://stackoverflow.com/questions/50945847/how-to-display-a-vectoruint16-t-image-on-msvc", "title": "How to display a vector&lt;uint16_t&gt; image on MSVC", "body": "<p>I have a </p>\n\n<pre><code>std::vector&lt;uint16_t&gt; data_buffer\n</code></pre>\n\n<p>The data buffer is a depth image: uint16_t, 320x240.</p>\n\n<p>I would like to watch it using the Image Watch plugin in MSVC.</p>\n\n<p>I can't use OpenCV (not allowed in the project).</p>\n\n<p>Any ideas?\nThank you!</p>\n"}]