[{"tags": ["c++", "templates", "constants", "implicit-conversion"], "answers": [{"comments": [{"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 0, "creation_date": 1441240486, "post_id": 32365134, "comment_id": 52602868, "body": "I would still miss the <code>const</code> keyword: it provides a promise for the caller. But hey, let&#39;s introduce a new type on the first line of <code>foo</code>: <code>using C = std::add_const&lt;T&gt;::type</code>. With this addition this answer seems to be the best workaround so I&#39;m accepting it."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 0, "creation_date": 1441240779, "post_id": 32365134, "comment_id": 52602921, "body": "@tamas.kenez: A <code>static_assert()</code> wouldn&#39;t make much sense: you probably want to accept an <code>array_view&lt;T&gt;</code> with a non-<code>const</code> qualified <code>T</code>. The implementation just wouldn&#39;t modify any the <code>T</code>s (unless, of course, any of the presumed to be <code>const</code> functions happens not to be <code>const</code> for the specific <code>T</code>). If you feel you need to make a promise you&#39;d forward the implementation to a function which is <code>const</code> qualified and explicitly specify the argument while forwarding the call."}, {"owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "edited": false, "score": 0, "creation_date": 1441241007, "post_id": 32365134, "comment_id": 52602966, "body": "I mentioned <code>static_assert</code> in my first comment. I also found that it&#39;s of no use so I edited the comment before your comment."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 1, "last_activity_date": 1441239260, "creation_date": 1441239260, "answer_id": 32365134, "question_id": 32364932, "link": "https://stackoverflow.com/questions/32364932/raw-pointer-implicitly-converts-to-const-pointer-need-the-same-with-user-type/32365134#32365134", "title": "Raw pointer implicitly converts to const pointer, need the same with user type", "body": "<p>The obvious solution is to use</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid foo(std::array_view&lt;T&gt; x);\n</code></pre>\n\n<p>Interestingly, that works for both forms of array views:</p>\n\n<pre><code>int array[] = { 1, 2, 3 };\nfoo(array_view&lt;int&gt;(std::begin(array), std::end(array)));\nfoo(array_view&lt;int const&gt;(std::begin(array), std::end(array)));\n</code></pre>\n\n<p>The <code>const</code>-ness of the argument is implicitly enforced by the <code>const</code>-ness of the argument. The same is, BTW, true for pointer arguments if the pointee type is deduced:</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid bar(T*);\n</code></pre>\n\n<p>When <code>bar()</code> is called with an <code>int const*</code> the type <code>T</code> is deduced as <code>T const</code>. The primary need for the <code>const</code> version is when the type is already deduced but the argument should fit. However, in that case the <code>std::array_view&lt;...&gt;</code> conversion would similarly work.</p>\n"}], "owner": {"reputation": 5881, "user_id": 3590849, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oUHc5.png?s=128&g=1", "display_name": "tamas.kenez", "link": "https://stackoverflow.com/users/3590849/tamas-kenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 32365134, "answer_count": 1, "score": 1, "last_activity_date": 1441240521, "creation_date": 1441237832, "question_id": 32364932, "link": "https://stackoverflow.com/questions/32364932/raw-pointer-implicitly-converts-to-const-pointer-need-the-same-with-user-type", "title": "Raw pointer implicitly converts to const pointer, need the same with user type", "body": "<p>If I have a template function accepting a pointer to the template type:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(const T* x);\n</code></pre>\n\n<p>it naturally accepts a pointer to a non-const object:</p>\n\n<pre><code>int* x = ...;\nfoo(x); //int* implicitly converted to const int *\n</code></pre>\n\n<p>I'd like to do the same with a template class which has pointer semantics.</p>\n\n<p>For example, the recently proposed <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3851.pdf\" rel=\"nofollow\">array_view</a> class, which is a view on a contiguous block of memory, has (non-owning) pointer semantics and can be used to refer an array of mutable or const items:</p>\n\n<pre><code>array_view&lt;int&gt; av = ...;\nav[0] = 1;\narray_view&lt;const int&gt; cav = ...;\ncav[0] = 1; // &lt;- error: read-only variable is not assignable\n</code></pre>\n\n<p>The problem is that the pattern above with the raw pointer does not work:</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid foo(array_view&lt;const T&gt; x);\n...\narray_view&lt;int&gt; x;\nfoo(x); // &lt;- error: no matching function for call to 'foo'\n</code></pre>\n\n<p>Even if I add copy constructor or conversion operators which convert between the <code>T</code> and <code>const T</code> variants the compiler is unable to resolve the <code>T</code> for the template.</p>\n\n<p>I'm aware of 2 workarounds:</p>\n\n<ul>\n<li>explicitly specify the template parameter at call: <code>foo&lt;int&gt;(x)</code></li>\n<li>write a more general template: <code>template&lt;typename U&gt; void foo(U x)</code> and maybe constrain <code>U</code> with metaprogramming.</li>\n</ul>\n\n<p>Is there a better solution?</p>\n"}, {"tags": ["c++", "debugging", "c++11"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1441237233, "post_id": 32364828, "comment_id": 52602060, "body": "I think the problem must be related to the fact that you wrote <code>string</code> instead of <code>std::string</code>. Is there not an error message about that, too?"}, {"owner": {"reputation": 173, "user_id": 4187546, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/514c37d0258f3f24852a494924450aff?s=128&d=identicon&r=PG&f=1", "display_name": "Code123", "link": "https://stackoverflow.com/users/4187546/code123"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441237304, "post_id": 32364828, "comment_id": 52602078, "body": "No. Inclusively, I&#39;ve used string before, and I&#39;ve never encountered this error. It&#39;s just recently that I started working with different classes in different files."}, {"owner": {"reputation": 173, "user_id": 4187546, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/514c37d0258f3f24852a494924450aff?s=128&d=identicon&r=PG&f=1", "display_name": "Code123", "link": "https://stackoverflow.com/users/4187546/code123"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441237440, "post_id": 32364828, "comment_id": 52602114, "body": "I did what you said, but now I&#39;m getting a new error saying &quot;factor&quot; was not declared in the scope."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 6, "creation_date": 1441237591, "post_id": 32364828, "comment_id": 52602153, "body": "Your declaration of <code>factor</code> is invalid. You must move it inside the class in order to make it a class member. Also, you gave <code>factor</code> no type. Also, <code>private</code> can&#39;t be used as a specifier on a member declaration; it has to be followed by a colon, marking the following members as private. You should probably pick up a good C++ book."}, {"owner": {"reputation": 173, "user_id": 4187546, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/514c37d0258f3f24852a494924450aff?s=128&d=identicon&r=PG&f=1", "display_name": "Code123", "link": "https://stackoverflow.com/users/4187546/code123"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441237834, "post_id": 32364828, "comment_id": 52602208, "body": "After a lot of errors I finally got the program to work. Thanks for your help."}, {"owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441244414, "post_id": 32364828, "comment_id": 52603626, "body": "@Brian The missing semicolons were also an issue when I went deeper in the code."}], "answers": [{"comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1441241495, "post_id": 32365316, "comment_id": 52603059, "body": "secondary s; is perfectly fine - it creates an instance of setting on the stack"}, {"owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1441242500, "post_id": 32365316, "comment_id": 52603261, "body": "@pm100 got busy in group/team chat that will end soon, going to update my answer again soon."}, {"owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1441244199, "post_id": 32365316, "comment_id": 52603572, "body": "@pm100 Digging into it further, I did spot numerous issues that should be fixed in the above code."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 2, "creation_date": 1441244644, "post_id": 32365316, "comment_id": 52603685, "body": "Never put <code>using namespace std;</code> (or for any other namespace) into a header."}, {"owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1441244736, "post_id": 32365316, "comment_id": 52603713, "body": "@Potatoswatter Are you suggesting that using <code>std::string</code> is also invalid? A clarification why you think that is an issue  would be appreciated, I will update that in code in the meantime. Thanks."}, {"owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 1, "creation_date": 1441245842, "post_id": 32365316, "comment_id": 52603974, "body": "Write <code>std::string</code> when you want a string. Do not put <code>using std::string;</code> into a header. Use Google to see why it&#39;s a bad idea; the ink already spilt on this topic is plentiful."}, {"owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "reply_to_user": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "edited": false, "score": 0, "creation_date": 1441297235, "post_id": 32365316, "comment_id": 52632039, "body": "@Potatoswatter That issue is resolved, no other code issue has been pointed out to me since, therefore, it is unclear how this is worth a negative rating? Are you/others seeing something else as an issue not mentioned yet?"}], "tags": [], "owner": {"reputation": 392, "user_id": 3808886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c3814f49d2e0550f1e26b74e315252e?s=128&d=identicon&r=PG&f=1", "display_name": "localhost", "link": "https://stackoverflow.com/users/3808886/localhost"}, "is_accepted": false, "score": 0, "last_activity_date": 1441244806, "last_edit_date": 1441244806, "creation_date": 1441241026, "answer_id": 32365316, "question_id": 32364828, "link": "https://stackoverflow.com/questions/32364828/c-error-no-member-in-class/32365316#32365316", "title": "C++ Error: No Member in Class?", "body": "<p>Actually, looking at this again, and deeper, this code has many issues (semicolons missing at key points and the <code>private int</code> definition should have been in the header file, not the cpp file 9t(private is its own section, see below):The problem, from what I can see, <code>s</code> has not yet been instantiated yet, do so and the operation should work correctly.</p>\n\n<p>Please also note that when factor was defined in the cpp file, it was defined at bottom, it should actually be defined before any use of the variable to be defined (in the header file is better meet with common/conventional coding standards).</p>\n\n<p>Please check this tested code:</p>\n\n<p><em>main.cpp</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"secondary.h\"\nusing namespace std;\n\nint main(){\n    secondary s;\n    int scale;\n    cout &lt;&lt; \"On a scale of 1-10, how awesome are you?\" &lt;&lt; endl;\n    cin &gt;&gt; scale;\n    cout &lt;&lt; endl;\n\n    s.setting(scale);\n    cout &lt;&lt; s.getting();\n    return 0;\n}\n</code></pre>\n\n<p><em>secondary.h</em></p>\n\n<pre><code>#ifndef SECONDARY_H\n#define SECONDARY_H\n#include &lt;string&gt;\n\nclass secondary\n{\npublic:\n    void setting(int x);\n    std::string getting();\n\nprivate: // Note: this is how you do private\n    int factor; // This is the definition with type int, missing in original\n};\n\n#endif // SECONDARY_H\n</code></pre>\n\n<p><em>secondary.cpp</em></p>\n\n<pre><code>#include \"secondary.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid secondary::setting(int x){\n    factor = x;\n}\n\nstring secondary::getting(){\n    string result;\n    if (factor &lt; 3){\n        result = \"You have a very low self esteem.\";\n    }else if(factor &gt; 3){\n        if (factor &gt; 7){\n            result = \"You have a very high self esteem.\";\n        }\n        else{\n            result = \"You have a medium self esteem.\";\n        }\n    }\n    return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4187546, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/514c37d0258f3f24852a494924450aff?s=128&d=identicon&r=PG&f=1", "display_name": "Code123", "link": "https://stackoverflow.com/users/4187546/code123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1455, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441244806, "creation_date": 1441237101, "last_edit_date": 1441237329, "question_id": 32364828, "link": "https://stackoverflow.com/questions/32364828/c-error-no-member-in-class", "title": "C++ Error: No Member in Class?", "body": "<p>I'm working on C++, and this is just a very basic program, but I'm still getting an error.</p>\n\n<p><strong>The error message is:</strong> </p>\n\n<blockquote>\n  <p>'class secondary' has no member named 'getting'. </p>\n</blockquote>\n\n<p>Why is this? It works for my void setting, but not for getting? What am I doing wrong here?</p>\n\n<p><em>main.cpp</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"secondary.h\"\nusing namespace std;\n\nint main(){\n    secondary s;\n    int scale;\n    cout &lt;&lt; \"On a scale of 1-10, how awesome are you?\" &lt;&lt; endl;\n    cin &gt;&gt; scale;\n    cout &lt;&lt; endl;\n\n    s.setting(scale);\n    cout &lt;&lt; s.getting();\n    return 0;\n}\n</code></pre>\n\n<p><em>secondary.h</em></p>\n\n<pre><code>#ifndef SECONDARY_H\n#define SECONDARY_H\n#include &lt;string&gt;\n\n\nclass secondary\n{\n    public:\n        void setting(int x);\n        string getting();\n};\n\n#endif // SECONDARY_H\n</code></pre>\n\n<p><em>secondary.cpp</em></p>\n\n<pre><code>#include \"secondary.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nvoid secondary::setting(int x){\n    factor = x;\n}\n\nstring secondary::getting(){\n    string result;\n    if(factor &lt; 3){\n        result = \"You have a very low self esteem.\";\n    }elseif(factor &gt; 3){\n        if(factor &gt; 7){\n            result = \"You have a very high self esteem.\"\n        }else{\n            result = \"You have a medium self esteem.\"\n        }\n    }\n    return result;\n}\n\nprivate factor;\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1441236689, "post_id": 32364717, "comment_id": 52601925, "body": "Welcome to SO. Perhaps you should post the actual code, and what the actual error is."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1441236848, "post_id": 32364717, "comment_id": 52601967, "body": "<code>int Uberfunction(42);</code> initializes an <code>int</code> called <code>UberFunction</code> with the value 42, doesn&#39;t it.  The rest then doesn&#39;t make sense.  You are probably being asked to create multiple functions with different overloaded arguments.  But you will need to show your code..."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1441236863, "post_id": 32364717, "comment_id": 52601972, "body": "Please <i>edit</i> your original post to add the code and make sure the code is properly formatted. Pasting code into the comments section is frowned upon."}, {"owner": {"reputation": 1540, "user_id": 3427419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de87c9d24eea8e8baa4458e4c2ece6c6?s=128&d=identicon&r=PG&f=1", "display_name": "user3427419", "link": "https://stackoverflow.com/users/3427419/user3427419"}, "edited": false, "score": 0, "creation_date": 1441236875, "post_id": 32364717, "comment_id": 52601978, "body": "What you are looking for is called &quot;type castint&quot;. <code>int*42</code> is ill-formed statement, so obviously it does not work. <a href=\"http://www.cplusplus.com/doc/tutorial/typecasting/\" rel=\"nofollow noreferrer\">cplusplus.com/doc/tutorial/typecasting</a> . Also, use &#39;edit&#39; link to edit things instead of writing comments"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1441236886, "post_id": 32364717, "comment_id": 52601982, "body": "@BaconBacon: Please!!! Update the question and format the code in the question.  Do not put it in the comments.  Transfer it from the comments to the question.  Thank you."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 1540, "user_id": 3427419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de87c9d24eea8e8baa4458e4c2ece6c6?s=128&d=identicon&r=PG&f=1", "display_name": "user3427419", "link": "https://stackoverflow.com/users/3427419/user3427419"}, "edited": false, "score": 0, "creation_date": 1441236934, "post_id": 32364717, "comment_id": 52601995, "body": "@user3427419, Why typecasting? I don&#39;t see the need over just giving it the right type in the first place."}, {"owner": {"reputation": 3, "user_id": 5294621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb945c92aaed39c912991ff91ae184?s=128&d=identicon&r=PG&f=1", "display_name": "BaconBacon", "link": "https://stackoverflow.com/users/5294621/baconbacon"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1441237139, "post_id": 32364717, "comment_id": 52602040, "body": "@chris, for this portion to be complete I need to call the function 4 times, each time as a different type"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1441237261, "post_id": 32364717, "comment_id": 52602066, "body": "<code>UberFunction((int*)42)</code> should work if it can take <code>int*</code>, and <code>UberFunction((int**)42)</code> should work if it can take <code>int**</code>."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1441237364, "post_id": 32364717, "comment_id": 52602093, "body": "@BaconBacon, Does the assignment say anything about how you get those types? It seems pretty pointless not to because there are a whole bunch of ways to get a value of any of those types."}, {"owner": {"reputation": 3, "user_id": 5294621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb945c92aaed39c912991ff91ae184?s=128&d=identicon&r=PG&f=1", "display_name": "BaconBacon", "link": "https://stackoverflow.com/users/5294621/baconbacon"}, "reply_to_user": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1441237567, "post_id": 32364717, "comment_id": 52602143, "body": "@SHR, that worked! I can see where my problem was but I&#39;m not sure why. I&#39;d like to understand why that syntax worked over my   UberFunction(int*42);  why does separating (int*) from 42 make the difference? was the function argument I put in actually saying integer multiplied by 42?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1441238017, "post_id": 32364717, "comment_id": 52602258, "body": "@BaconBacon, Because the language says that the expression <code>(type)expression</code> is a cast and doesn&#39;t say anything about <code>type expression</code> or <code>type operator expression</code> being an expression."}, {"owner": {"reputation": 3, "user_id": 5294621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb945c92aaed39c912991ff91ae184?s=128&d=identicon&r=PG&f=1", "display_name": "BaconBacon", "link": "https://stackoverflow.com/users/5294621/baconbacon"}, "reply_to_user": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1441238765, "post_id": 32364717, "comment_id": 52602467, "body": "@SHR, thank you. The only thing I can&#39;t get to work is the char[] type. I updated my code above to reflect what I have now."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441239662, "post_id": 32364717, "comment_id": 52602692, "body": "Always dangerous to do a wholesale replace on the question. Updates and amendments are cool, but when you change damn near everything, you often render the commentary and answers obsolete and confusing. That&#39;s not fair to anyone."}, {"owner": {"reputation": 3, "user_id": 5294621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb945c92aaed39c912991ff91ae184?s=128&d=identicon&r=PG&f=1", "display_name": "BaconBacon", "link": "https://stackoverflow.com/users/5294621/baconbacon"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441242571, "post_id": 32364717, "comment_id": 52603270, "body": "@user4581301 Thank you for the advice. I&#39;m new to this site so these kinds of critiques are helpful for future questions."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1441238621, "creation_date": 1441238621, "answer_id": 32365047, "question_id": 32364717, "link": "https://stackoverflow.com/questions/32364717/calling-a-function-with-different-types/32365047#32365047", "title": "Calling a function with different types", "body": "<p>Try this fragment:</p>\n\n<pre><code>const int value = 42;\nUberFunction(value); // int\nUberFunction(&amp;value); // int *\nint * p_value = &amp;value;\nUberFunction(&amp;p_value); // int * *\nstatic const char text[] = \"Hello World!\\n\";\nUberFunction(text); // char []\n</code></pre>\n\n<p>Note that in the above example, the parameters are changing and not the return value.</p>\n"}], "owner": {"reputation": 3, "user_id": 5294621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcdb945c92aaed39c912991ff91ae184?s=128&d=identicon&r=PG&f=1", "display_name": "BaconBacon", "link": "https://stackoverflow.com/users/5294621/baconbacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 235, "favorite_count": 0, "accepted_answer_id": 32365047, "answer_count": 1, "score": 0, "last_activity_date": 1441238652, "creation_date": 1441236263, "last_edit_date": 1441238652, "question_id": 32364717, "link": "https://stackoverflow.com/questions/32364717/calling-a-function-with-different-types", "title": "Calling a function with different types", "body": "<p>I am working on an assignment in C++ and am having difficulties with a question.\nWe are given a function that can take anything in as an argument.We need to call this function, UberFunction, as an int, int*,int**, and char[].</p>\n\n<p><strong><em>My Code:</em></strong></p>\n\n<pre><code>void CallUberFunctions() {\n  // There is a magic function, called \"UberFunction\" that is capable of taking\n  // anything for an argument. You need to call \"UberFunction\" with the\n  // following types: int, int* int** and char[]\n  // You also need to call \"OtherUberFunction\" in the namespace\n  // \"uber_namespace\" once, with no arguments.\n  UberFunction(42);\n  UberFunction((int*)42);\n  UberFunction((int**)42);\n  UberFunction((char[])'*');\n}\n</code></pre>\n\n<p><strong><em>Here is the error:</em></strong> </p>\n\n<blockquote>\n  <p>home/user/Desktop/cpp_refresher/cpp_refresher.cc:22:20: error: expected '(' for function-style\n        cast or type construction</p>\n</blockquote>\n\n<p>I cannot get the char[] type to work properly, is my syntax above incorrect?</p>\n"}, {"tags": ["c++", "vector", "struct"], "comments": [{"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 1, "creation_date": 1441236455, "post_id": 32364706, "comment_id": 52601869, "body": "What kind of information you need from all other elements ? Could you show your &quot;struct&quot; and be little more specific ?"}, {"owner": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "reply_to_user": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1441236635, "post_id": 32364706, "comment_id": 52601913, "body": "@P0W I added some more information and what i&#39;m getting from the struct."}, {"owner": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 1, "creation_date": 1441236918, "post_id": 32364706, "comment_id": 52601990, "body": "@Sounds like a Graph problem, the answers posted will do the job, but you might consider better alternative. Sorry, I&#39;m not an algorithm Ninja"}, {"owner": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "reply_to_user": {"reputation": 41806, "user_id": 1870232, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/rbI29.jpg?s=128&g=1", "display_name": "P0W", "link": "https://stackoverflow.com/users/1870232/p0w"}, "edited": false, "score": 0, "creation_date": 1441237088, "post_id": 32364706, "comment_id": 52602024, "body": "@P0W thanks for you input regardless!"}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "edited": false, "score": 0, "creation_date": 1441237122, "post_id": 32364740, "comment_id": 52602033, "body": "Ah, I had my head down so far that I wasn&#39;t even thinking about switching out to two for loops like that.  Thanks!"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "edited": false, "score": 0, "creation_date": 1441269292, "post_id": 32364740, "comment_id": 52612976, "body": "@hownowbrowncow: Yes, there&#39;s nothing in the two loops that depends on the vector contents (such code would belong in the <code>&#47;&#47; do your stuff</code> part)."}], "tags": [], "owner": {"reputation": 28846, "user_id": 327083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/i8ttM.png?s=128&g=1", "display_name": "J...", "link": "https://stackoverflow.com/users/327083/j"}, "is_accepted": true, "score": 3, "last_activity_date": 1441238654, "last_edit_date": 1441238654, "creation_date": 1441236434, "answer_id": 32364740, "question_id": 32364706, "link": "https://stackoverflow.com/questions/32364706/while-iterating-over-vector-get-all-other-elements-but-ith/32364740#32364740", "title": "while iterating over vector&lt;&gt; get all other elements but ith", "body": "<p>This simple?</p>\n\n<pre><code>vector&lt;int&gt; data = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\nint ii = 0;    \n\nfor (int i : data)\n{\n    int jj = 0;\n    for (int j : data)\n    {\n        if (ii == jj) continue;\n        // do your stuff\n        jj++            \n    }\n    ii++\n}\n</code></pre>\n\n<p>If you need to operate on the initial vector before modifying it, if you need to modify it, then just make a copy first.</p>\n"}, {"tags": [], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "is_accepted": false, "score": 2, "last_activity_date": 1441236540, "creation_date": 1441236540, "answer_id": 32364748, "question_id": 32364706, "link": "https://stackoverflow.com/questions/32364706/while-iterating-over-vector-get-all-other-elements-but-ith/32364748#32364748", "title": "while iterating over vector&lt;&gt; get all other elements but ith", "body": "<p>You can do something like this:</p>\n\n<pre><code>vector&lt;int&gt; data = {1,2,3,4,5,6,7,8,9,10};\n\nauto current = data.cbegin();   \nwhile (current != data.cend()) {\n  for (auto it = data.cbegin(); it != data.cend(); ++it) {\n    if (it != current)\n      cout &lt;&lt; *it;\n  }\n\n  cout &lt;&lt; endl;\n  ++current;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "edited": false, "score": 0, "creation_date": 1441239203, "post_id": 32364895, "comment_id": 52602570, "body": "<i>urge to buy beer intensifies</i>"}], "tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1441238466, "last_edit_date": 1441238466, "creation_date": 1441237604, "answer_id": 32364895, "question_id": 32364706, "link": "https://stackoverflow.com/questions/32364706/while-iterating-over-vector-get-all-other-elements-but-ith/32364895#32364895", "title": "while iterating over vector&lt;&gt; get all other elements but ith", "body": "<p>You can test the <strong><em>addresses</em></strong> of the elements:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct Node {\n    std::string name;\n    int degree;\n    int counter;\n\n    Node(std::string name, int degree, int counter)\n    : name(name), degree(degree), counter(counter) // better to use init list\n    {\n    }\n};\n\nint main()\n{\n    std::vector&lt;Node&gt; v {{\"X\", 1, 5}, {\"O\", 3, 2}, {\"B\", 8, 3}};\n\n    for(auto&amp; node1: v) // take references\n    {\n        for(auto&amp; node2: v)\n        {\n            // compare addresses\n            if(&amp;node1 == &amp;node2) // &amp; = address of operator\n                continue;\n\n            // use node1 &amp; node2 here\n            std::cout &lt;&lt; node1.name &lt;&lt; ' ' &lt;&lt; node2.name &lt;&lt; '\\n';\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>X O\nX B\nO X\nO B\nB X\nB O\n</code></pre>\n"}], "owner": {"reputation": 455, "user_id": 5006939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d11a534ad7418d8f7c4b3bbe66eb6877?s=128&d=identicon&r=PG", "display_name": "hownowbrowncow", "link": "https://stackoverflow.com/users/5006939/hownowbrowncow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 32364740, "answer_count": 3, "score": 1, "last_activity_date": 1441238654, "creation_date": 1441236179, "last_edit_date": 1441236594, "question_id": 32364706, "link": "https://stackoverflow.com/questions/32364706/while-iterating-over-vector-get-all-other-elements-but-ith", "title": "while iterating over vector&lt;&gt; get all other elements but ith", "body": "<p>Let's say we have a vector of size n.</p>\n\n<p>The first element, we must get information from the other elements.</p>\n\n<p>The second element, we must get information from the first and other elements.</p>\n\n<p>The third element, we must get information from element one, two, and other elements.</p>\n\n<p>etc.</p>\n\n<p>How should I go about doing this?  Code so far..</p>\n\n<pre><code>vector&lt;struct&gt; myVector;\n//vector filled..\nfor(Struct structure : myVector){\n    //??\n}\n</code></pre>\n\n<p><code>vector[0]</code> needs <code>{vector[1] -&gt; vector[n]}</code></p>\n\n<p><code>vector[1]</code> needs <code>{vector[0] , vector[2] -&gt; vector[n]}</code></p>\n\n<p><code>vector[2]</code> needs <code>{vector[0] -&gt; vector[1] , vector[3] -&gt; vector[n]}</code></p>\n\n<p>etc.</p>\n\n<p>My struct looks something like below and I need to get the degree information from each one in order to compare it to the current one (to see how far apart they are from one another).</p>\n\n<pre><code>struct Node {\n    int degree;\n    std::string name;\n    int counter;\n    Node(std::string aName, int aDegree, int nodeCounter) {\n        degree = aDegree;\n        name = aName;\n        counter = nodeCounter;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "class", "struct"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1441235856, "post_id": 32364640, "comment_id": 52601716, "body": "Why does <i>LinkedList.cpp</i> have include guards?  Is it included by another file?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1441235929, "post_id": 32364640, "comment_id": 52601734, "body": "Yep, remove the include guards from your CPP files.  Include guards are usually the lines that say <code>#ifndef filename_h</code>."}, {"owner": {"reputation": 11594, "user_id": 749517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/030d268778dc83b146f320540e9ea220?s=128&d=identicon&r=PG", "display_name": "Gyan aka Gary Buyn", "link": "https://stackoverflow.com/users/749517/gyan-aka-gary-buyn"}, "edited": false, "score": 0, "creation_date": 1441236029, "post_id": 32364640, "comment_id": 52601756, "body": "Is this homework and you were given the header files? If so it is worrying that they have <code>using namespace std;</code> in the headers... <code>using namespace</code> in headers is a bad idea."}, {"owner": {"reputation": 3, "user_id": 5294519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df47a5a8c13f40148bab365b78461632?s=128&d=identicon&r=PG&f=1", "display_name": "jake415", "link": "https://stackoverflow.com/users/5294519/jake415"}, "edited": false, "score": 0, "creation_date": 1441236960, "post_id": 32364640, "comment_id": 52602001, "body": "Thanks, I removed the include guards from the CPP files and it got rid of the error. So those are only supposed to go on .h files?"}, {"owner": {"reputation": 7131, "user_id": 1452289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aad0517bea8711e4a975b031b1541f6d?s=128&d=identicon&r=PG", "display_name": "Hugo Dozois", "link": "https://stackoverflow.com/users/1452289/hugo-dozois"}, "edited": false, "score": 0, "creation_date": 1441242466, "post_id": 32364640, "comment_id": 52603252, "body": "@jake415 yes, since only headers ever get included by other files. The guards just make sure a file doesn&#39;t get include twice. Normally since nothing is requiring the cpp, you don&#39;t need guard."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1441238220, "creation_date": 1441238220, "answer_id": 32364984, "question_id": 32364640, "link": "https://stackoverflow.com/questions/32364640/compiler-error-error-listnode-does-not-name-a-type/32364984#32364984", "title": "Compiler Error: error: \u2018ListNode\u2019 does not name a type", "body": "<p>Include guard are placed so that if a file winds up being included multiple times, it only is used once.</p>\n\n<p>When you include a file, it is, for all intents and purposes, copy-pasted into the including file, so to the compiler's pre-processor, ListNode.cpp looks like this:</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\n#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\nusing namespace std;\n\nstruct ListNode\n   {\n     ListNode( int nodeData, ListNode* nextPtr);\n     int dataItem;\n     ListNode* next;\n   };\n#endif  // STRUCT_LISTNODE_H\n#include &lt;iostream&gt; //contents of iostream go on for pages. Let's skip those, shall we?\n\nListNode:: ListNode(int nodeData, ListNode* nextPtr)\n   { \n     dataItem = nodeData;\n     next = nextPtr;\n   }\n\n#endif // STRUCT_LISTNODE_H\n</code></pre>\n\n<p>Breaking that down the compiler sees: </p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n</code></pre>\n\n<p>If STRUCT_LISTNODE_H has not been defined, do everything up until the corresponding <code>#endif</code>. </p>\n\n<pre><code>#define STRUCT_LISTNODE_H \n</code></pre>\n\n<p>Cool. STRUCT_LISTNODE_H  has just been defined.</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n</code></pre>\n\n<p>This time STRUCT_LISTNODE_H has been defined, so we skip down to the corresponding endif: </p>\n\n<pre><code>#endif  // STRUCT_LISTNODE_H\n</code></pre>\n\n<p>That's right, the header file was almost completely discarded. So what's going to be compiled is:</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\n#ifndef STRUCT_LISTNODE_H\n#endif  // STRUCT_LISTNODE_H\n#include &lt;iostream&gt; //contents of iostream go on for pages. Let's skip those, shall we?\n\nListNode:: ListNode(int nodeData, ListNode* nextPtr)\n   { \n     dataItem = nodeData;\n     next = nextPtr;\n   }\n\n#endif // STRUCT_LISTNODE_H\n</code></pre>\n\n<p>There is no no sign of <code>ListNode</code>'s definition.</p>\n\n<p>So this isn't so much that OP used include guards in a cpp file (and a cpp file should never be included, so include guards are unnecessary), but that OP used the same include guard twice.</p>\n\n<p>As a public service announcement, the usual warning about <code>using namespace std;</code>\nThat evil little shortcut pulls the entire standard library into the global namespace. That means if you had a function named <code>reverse</code>, it now has to fight it out with <code>std::reverse</code> and you may not like who wins and what that does to your program's execution. </p>\n\n<p>So OK. Your code is just fine with that, but what if you include someone else's? Now they are conflicting with names they didn't intend and you have weird error messages they've never even seen and probably can't help you with.</p>\n\n<p>Use it sparingly. Either prefix with std::</p>\n\n<pre><code>std::cout &lt;&lt; \"HI!\" &lt;&lt; std::endl;\n</code></pre>\n\n<p>or only pull the pieces you need into the global namespace</p>\n\n<pre><code>using std::cout;\nusing std::endl;\n</code></pre>\n\n<p>and later</p>\n\n<pre><code>cout &lt;&lt; \"HI!\" &lt;&lt; endl;\n</code></pre>\n\n<p>Most importantly do this last after including everyone else's header files because you don't know how they will respond. But that is your problem for being lazy. Sucks to be you.</p>\n\n<p>And that brings us to why you don't put <code>using namespace std;</code> in a header. Some poor sucker includes your header to use your library. WHAM! They inherit your bad coding style. They suffer for your mistakes. That is not cool.</p>\n"}], "owner": {"reputation": 3, "user_id": 5294519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df47a5a8c13f40148bab365b78461632?s=128&d=identicon&r=PG&f=1", "display_name": "jake415", "link": "https://stackoverflow.com/users/5294519/jake415"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 32364984, "answer_count": 1, "score": 0, "last_activity_date": 1441238220, "creation_date": 1441235608, "question_id": 32364640, "link": "https://stackoverflow.com/questions/32364640/compiler-error-error-listnode-does-not-name-a-type", "title": "Compiler Error: error: \u2018ListNode\u2019 does not name a type", "body": "<p>I am trying to write my class and struct implementation files. The class has variables from the struct. I keep getting the errors: </p>\n\n<p>LinkedList.h:70:8: error: \u2018ListNode\u2019 does not name a type\n        ListNode* head;</p>\n\n<p>LinkedList.h:71:8: error: \u2018ListNode\u2019 does not name a type\n        ListNode* cursor;</p>\n\n<p>LinkedList.h looks like this:</p>\n\n<pre><code>#ifndef CLASS_LINKEDLIST_H\n#define CLASS_LINKEDLIST_H\n\n// Header files \n\n#include &lt;iostream&gt;\n#include \"ListNode.h\"\n\nusing namespace std;\n\nclass LinkedList \n   {\n    public:\n    LinkedList( int maxSize = 10 );\n    LinkedList( const LinkedList&amp; other );\n    ~LinkedList();\n\n    private:\n\n       ListNode* head;\n       ListNode* cursor;\n\n       int capacity;\n       int size;\n   };\n\n#endif // ifndef CLASS_LINKEDLIST\n</code></pre>\n\n<p>ListNode.h is a struct like this:</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\nusing namespace std;\n\nstruct ListNode\n   {\n     ListNode( int nodeData, ListNode* nextPtr);\n     int dataItem;\n     ListNode* next;\n   };\n#endif  // STRUCT_LISTNODE_H\n</code></pre>\n\n<p>ListNode.cpp looks like this:</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\n#include \"ListNode.h\"\n#include &lt;iostream&gt;\n\nListNode:: ListNode(int nodeData, ListNode* nextPtr)\n   { \n     dataItem = nodeData;\n     next = nextPtr;\n   }\n\n#endif // STRUCT_LISTNODE_H\n</code></pre>\n\n<p>And here is the top of LinkedList.cpp</p>\n\n<pre><code>#ifndef STRUCT_LISTNODE_H\n#define STRUCT_LISTNODE_H\n\n// header files\n#include \"LinkedList.h\"\n</code></pre>\n\n<p>I am not allowed to change the .h files, just the .cpp ones. I know there is something simple that I am forgetting to include, but I can't seem to figure it out.</p>\n\n<p>Thanks for any help in advance.</p>\n"}, {"tags": ["c++", "arrays", "memory", "3d"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441235332, "post_id": 32364550, "comment_id": 52601561, "body": "What does &quot;seems to work, but it can&#39;t be done&quot; mean?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1441235400, "post_id": 32364550, "comment_id": 52601587, "body": "What?! <i>You</i> are the one asking for <code>[20][20][20]</code>. If you only want <code>[3][3][3]</code>, you could change your struct."}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 1, "creation_date": 1441235514, "post_id": 32364550, "comment_id": 52601621, "body": "&quot;-x&quot; cant be stored in a char. You actually want <code>char* array [3][3][3];</code> or just <code>&#39;x&#39;</code> with <code>char</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441236211, "post_id": 32364550, "comment_id": 52601805, "body": "The usual rigmarole about arrays of characters. Consider using std::string so that you&#39;re down to only 2 dimensions."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2069339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca38a0d430117b25bf99201c87e69c6a?s=128&d=identicon&r=PG", "display_name": "user2069339", "link": "https://stackoverflow.com/users/2069339/user2069339"}, "edited": false, "score": 0, "creation_date": 1441243179, "post_id": 32364701, "comment_id": 52603380, "body": "Does the second pair in simply correspond to the array structure itself, without respect to dimension? I think that&#39;s what threw me. With your transformation, it shows the brace count is 4 for 3 dimensions, and I always thought of the number of braces equaling the number of dimensions."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 13, "user_id": 2069339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca38a0d430117b25bf99201c87e69c6a?s=128&d=identicon&r=PG", "display_name": "user2069339", "link": "https://stackoverflow.com/users/2069339/user2069339"}, "edited": false, "score": 0, "creation_date": 1441261885, "post_id": 32364701, "comment_id": 52608715, "body": "For array initialization you have indeed 1 brace level per dimension, which contains the element of that dimension. Here you come to 4 because on the top of the 3 dimensions you have the struct. The tricky thing with char arrays is that they can be represented by a string litteral without need for an extra brace."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1441237942, "last_edit_date": 1441237942, "creation_date": 1441236135, "answer_id": 32364701, "question_id": 32364550, "link": "https://stackoverflow.com/questions/32364550/why-is-extra-bracket-required-in-c-3d-array-list-assignment/32364701#32364701", "title": "Why is extra bracket required in C++ 3d array list assignment?", "body": "<p>To answer your question directly in your code:  </p>\n\n<pre><code>Options K = {  // struct\n              { // array \n                 {  // array[0]\n                     \"-x\", // array[0][0] with 3 chars, as string literal \n                     {     // array[0][1] with 3 chars, transformed in braced form by me\n                        '-',  // array[0][1][0]\n                        'o',  // array[0][1][1]\n                        '\\0'  // array[0][1][2]\n                      } \n                 },\n                 {  // array[1]\n                    \"-y\", \"-p\", \"-q\" \n                 },\n                 {  // array[2]\n                    \"-r\", \"-s\"\n                 }\n               }\n            };\n</code></pre>\n\n<p>If you output this array, you'll naturally get something like (replaceing non printable '\\0' with dots: </p>\n\n<pre><code>- x . . . . . . . . . . . . . . . . . .   // A first 2D array contained in array[0]\n- o . . . . . . . . . . . . . . . . . .   // note that each line is exactly 20 chars long\n. . . . . . . . . . . . . . . . . . . . \n(followed by 17 similar empty lines)\n- y . . . . . . . . . . . . . . . . . .   // A second 2D array contained in array[1] \n- p . . . . . . . . . . . . . . . . . . \n- q . . . . . . . . . . . . . . . . . . \n(etc)\n</code></pre>\n\n<p><a href=\"http://ideone.com/f6CvCJ\" rel=\"nofollow\">Live demo</a></p>\n"}], "owner": {"reputation": 13, "user_id": 2069339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca38a0d430117b25bf99201c87e69c6a?s=128&d=identicon&r=PG", "display_name": "user2069339", "link": "https://stackoverflow.com/users/2069339/user2069339"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32364701, "answer_count": 1, "score": 1, "last_activity_date": 1441237942, "creation_date": 1441235014, "last_edit_date": 1495539843, "question_id": 32364550, "link": "https://stackoverflow.com/questions/32364550/why-is-extra-bracket-required-in-c-3d-array-list-assignment", "title": "Why is extra bracket required in C++ 3d array list assignment?", "body": "<p>I am assigning a 3D array via an initializer list to a struct, to take advantage of member-wise copy. I was interested in doing something like what was described <a href=\"https://stackoverflow.com/questions/3437110/why-does-c-support-memberwise-assignment-of-arrays-within-structs-but-not-gen\">in this post about array copying</a></p>\n\n<p>This seems to work, but it can't be done without adding an extra set of brackets: </p>\n\n<pre><code>struct Options\n   {\n   char array [20][20][20];\n   };\n\nint main(void)\n   {\n   Options K = {{ { \"-x\", \"-o\" }, { \"-y\", \"-p\", \"-q\" }, {\"-r\", \"-s\"} }};\n   };\n</code></pre>\n\n<p>The outermost brackets are to encapsulate the value being assigned. The next pair in is the extra pair I can't explain. The 3 dimensions to be assigned are: </p>\n\n<ul>\n<li>x = number of bracketed groups of strings</li>\n<li>y = number of strings in each group</li>\n<li>z = number of characters in each string</li>\n</ul>\n\n<p>This would normally not worry me because everything is copied. However, after assignment, innermost values that should be contiguous in memory are spaced apart by multiples of an extra dimension. Instead of \"-x\" and \"-o\" being separated by 20 bytes, for example, they are actually separated by 20 * 20 bytes. I'm confused. How do I get this to work without adding an extra dimension?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 1, "creation_date": 1441233833, "post_id": 32364272, "comment_id": 52601106, "body": "Did you look at the documentation for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa380518%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>UNICODE_STRING</code></a>?  And in case it isn&#39;t clear a <code>PUNICODE_STRING</code> is the same thing as a <code>UNICODE_STRING*</code>"}, {"owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "reply_to_user": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 1, "creation_date": 1441233928, "post_id": 32364272, "comment_id": 52601128, "body": "I was able to do a regex_match with a wstring, but not with an UNICODE_STRING. Do you know if there is any difference?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1441234312, "post_id": 32364272, "comment_id": 52601264, "body": "You&#39;ll have to pass a pointer to the buffer, i.e. <code>UNICODE_STRING::Buffer</code>. Since you are using a pointer, <code>p-&gt;Buffer</code> returns a pointer to the stored sequence."}], "answers": [{"comments": [{"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1441240917, "post_id": 32365286, "comment_id": 52602946, "body": "Somehow in my haze I missed the warning about missing null terminators.  Thanks for catching my mistake."}], "tags": [], "owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "is_accepted": true, "score": 3, "last_activity_date": 1441240780, "creation_date": 1441240780, "answer_id": 32365286, "question_id": 32364272, "link": "https://stackoverflow.com/questions/32364272/using-punicode-string-with-regex-match-in-c/32365286#32365286", "title": "Using PUNICODE_STRING with regex_match in C++", "body": "<p>Strings stored as a <code>LSA_UNICODE_STRING</code> (or its typedefs) might not be null-terminated so passing the <code>Buffer</code> pointer to a function that is expecting a null-terminated string (or a <code>std::wstring</code>) is not guaranteed to be safe.</p>\n\n<p>Instead, convert it to a <code>std::wstring</code> using the <code>Length</code> field to specify the length of the string:</p>\n\n<pre><code>PUNICODE_STRING pStringIn; // this comes from somewhere\nstd::wstring strOut(pStringIn-&gt;Buffer, pStringIn-&gt;Length / sizeof(wchar_t));\n</code></pre>\n\n<p>You can then use <code>strOut.c_str()</code> or pass it directly to functions that accept a <code>std::wstring</code>.</p>\n"}], "owner": {"reputation": 743, "user_id": 2355322, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/2wRIw.jpg?s=128&g=1", "display_name": "Sergio Calderon", "link": "https://stackoverflow.com/users/2355322/sergio-calderon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 32365286, "answer_count": 1, "score": 1, "last_activity_date": 1441240780, "creation_date": 1441233447, "last_edit_date": 1441233647, "question_id": 32364272, "link": "https://stackoverflow.com/questions/32364272/using-punicode-string-with-regex-match-in-c", "title": "Using PUNICODE_STRING with regex_match in C++", "body": "<p>I am trying to use the PasswordFilter function, and need to get Password variable value, which is a PUNICODE_STRING, then use regex_match to match a password policy. </p>\n\n<p>The problem is that regex_match cannot recognize the PUNICODE_STRING. </p>\n\n<p>What can I do?</p>\n"}, {"tags": ["c++", "winapi", "c++11"], "comments": [{"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1441260594, "post_id": 32364256, "comment_id": 52608090, "body": "In the Windows environment, you should return error code (HRESULTs) instead of throwing C++ exceptions (unless you keep these exception in your own code)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1464654243, "post_id": 32364256, "comment_id": 62560483, "body": "@SimonMourier: When following the RAII idiom to wrap system resources and API calls, use of C++ exceptions is mandatory. Those exceptions are also allowed to travel outside your code. In case noone catches one of your exceptions, the <i>unexpected</i> handler is invoked (which, by default, terminates the program)."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1464671507, "post_id": 32364256, "comment_id": 62564489, "body": "@IInspectable - Sure, but, that&#39;s kinda my point as I was specifically talking about Windows programming which generally doesn&#39;t follow this idiom"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1464672425, "post_id": 32364256, "comment_id": 62564798, "body": "@SimonMourier: The core API is exposed as a flat C interface. RAII is not an option here. Pretty much any C++ class library, on the other hand, does follow the RAII idiom. And since the OP does implement a C++ class over the Windows API, using C++ exceptions is an option."}], "answers": [{"comments": [{"owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "edited": false, "score": 0, "creation_date": 1441262370, "post_id": 32368021, "comment_id": 52608928, "body": "Hi, thank you for your answer. What about handling win33 errors (my second question)?"}], "tags": [], "owner": {"reputation": 9, "user_id": 5256002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ec5681d11735c5d5ca94eb8913834?s=128&d=identicon&r=PG&f=1", "display_name": "Joe YC Lin", "link": "https://stackoverflow.com/users/5256002/joe-yc-lin"}, "is_accepted": false, "score": -1, "last_activity_date": 1441260102, "creation_date": 1441260102, "answer_id": 32368021, "question_id": 32364256, "link": "https://stackoverflow.com/questions/32364256/designing-a-win32api-app/32368021#32368021", "title": "Designing a Win32api app", "body": "<p>If you want to use C++ STL, you problem could easier than you thought.\nFirst, you need to design a class to hold the necessary information, \nthat is \"DeviceInterface\". You can define the members and functions for this class.</p>\n\n<p>You can use STL containers, such as deque or list as you container. The code would be like:</p>\n\n<pre><code>deque&lt;DeviceInterface&gt; DIList;\n</code></pre>\n\n<p>As for iterator, C++ STL provides you standard way to use it:</p>\n\n<pre><code>for(auto it = DIList.begin(); it != DIList.end; ++it){\n    *it-&gt;getData();\n}\n</code></pre>\n\n<p>I hope this can help you.</p>\n"}], "owner": {"reputation": 281, "user_id": 3116596, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/AXIRo.jpg?s=128&g=1", "display_name": "CodeNinja", "link": "https://stackoverflow.com/users/3116596/codeninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1441260102, "creation_date": 1441233380, "question_id": 32364256, "link": "https://stackoverflow.com/questions/32364256/designing-a-win32api-app", "title": "Designing a Win32api app", "body": "<p>I'm pretty new to C++ and the more I read the more questions I have.</p>\n\n<p>I want to convert an old C code of mine, which lists the devices on a machine, to a well designed C++ code that does the same.</p>\n\n<p>As I have read, one of the most basic concept of C++ is isolation of Containers, Iterators and Algorithms.\nThat said, I came into conclusion that I should create 3 classes:</p>\n\n<ol>\n<li><p><strong>DeviceInterface</strong> - Holds a single interface info such as SP_DEVICE_INTERFACE_DATA, PSP_DEVICE_INTERFACE_DETAIL_DATA and SP_DEVINFO_DATA</p></li>\n<li><p><strong>DevicesInterfaceContainer</strong> - Container that somehow holds all the devices information in form of DeviceInterface classes.</p></li>\n<li><p><strong>DeviceInterfaceIterator</strong> - Used by the algorithm to iterate over the items in the DevicesInterfaceContainer.</p></li>\n</ol>\n\n<p>I didn't manage to implement it because I wasn't sure how.</p>\n\n<ol>\n<li><p>Should the iterator be an output iterator that initializes the DevicesInterfaceContainer? Or whether the DevicesInterfaceContainer should initialize and acquire all the devices by its own?</p></li>\n<li><p>What happens when an Win32 api fails in the constructor? Should I throw an exception? if so, what kind of exception? std::exception? std::runtime_error? or should I define a Win32Exception of my own that holds information about the LastError? (All I need is the last error in order to format the message.)</p></li>\n</ol>\n\n<p>Something like:</p>\n\n<pre><code>class DeviceInterfacesList\n{\npublic:\n    DeviceInterfacesList(GUID&amp; rtInterfaceGuid)\n    {\n        m_hDevInfo = SetupDiGetClassDevs(\n            &amp;rtInterfaceGuid,\n            NULL,\n            NULL,\n            DIGCF_DEVICEINTERFACE\n        );\n        if (INVALID_HANDLE_VALUE == m_hDevInfo)\n        {\n            throw Win32Exception();\n        }\n    }\n\n    ...\n    ...\n    ...\n\n    HDEVINFO m_hDevInfo;\n};\n</code></pre>\n\n<p>I will be glad to get some guidance / good updated examples for using STL + win32api or anything that will clarify my questions.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "class", "encapsulation", "friend"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1441233831, "post_id": 32364242, "comment_id": 52601103, "body": "If you have 20+ friends, how is that different from making the data members public?  Otherwise, as a rule of thumb, when you have code like <code>cell-&gt;setVariableA(cell-&gt;getVariableA() ...</code> you haven&#39;t found the proper abstraction yet. You should aim at having something like <code>cell-&gt;do_something()</code> or <code>cell-&gt;connect_to(neighbor)</code>."}, {"owner": {"reputation": 7027, "user_id": 1735922, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a82aaa47327bba0f9657c32ce20c8914?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1735922/john"}, "edited": false, "score": 1, "creation_date": 1441234065, "post_id": 32364242, "comment_id": 52601185, "body": "What sort of invariants is your <code>cell</code> class maintaining as part of its definition of being a <code>cell</code>?  If none, then just make it a struct and let your <code>process</code>es go to town.  Are these processes independent of the concept of a <code>cell</code> or part of it?  Do they belong as separate entities from <code>cell</code>?"}, {"owner": {"reputation": 1201, "user_id": 1762492, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da8c8d66ff8f2f9c6506621e97610640?s=128&d=identicon&r=PG", "display_name": "traggatmot", "link": "https://stackoverflow.com/users/1762492/traggatmot"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1441234306, "post_id": 32364242, "comment_id": 52601261, "body": "@BoPersson, cell-&gt;do_something would imply that I move the methods that operate on a cell inside of the cell class?  Am I interpreting that correctly?  At that point the only thing outside of the class would be external forcings (inputs) to the functions that change the state variables.  The class would grow significantly."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1441234948, "post_id": 32364242, "comment_id": 52601445, "body": "I don&#39;t know your use case, but changing the state of the cell ought to be managed by the cell itself, as a reaction to some input from the environment. If I think about a <i>real</i> cell, its &quot;state&quot; isn&#39;t determined by another cell doing <code>cell-&gt;setSodiumLevel(42)</code>, but by the other cell triggering some event. A program could simulate this by doing <code>cell-&gt;TriggerEventX()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1201, "user_id": 1762492, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da8c8d66ff8f2f9c6506621e97610640?s=128&d=identicon&r=PG", "display_name": "traggatmot", "link": "https://stackoverflow.com/users/1762492/traggatmot"}, "edited": false, "score": 0, "creation_date": 1441234106, "post_id": 32364322, "comment_id": 52601199, "body": "How do you use those macros in C++?"}, {"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "reply_to_user": {"reputation": 1201, "user_id": 1762492, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da8c8d66ff8f2f9c6506621e97610640?s=128&d=identicon&r=PG", "display_name": "traggatmot", "link": "https://stackoverflow.com/users/1762492/traggatmot"}, "edited": false, "score": 0, "creation_date": 1441234224, "post_id": 32364322, "comment_id": 52601235, "body": "I added an example for a getter function. Keep in mind that you should consider using references or pointers when dealing with bigger datastructures like vectors. Decide on your own. Keep in mind that these macros will make you loose the ability of debugging your code properly as breakpoints don&#39;t work in them."}], "tags": [], "owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "is_accepted": false, "score": 0, "last_activity_date": 1441234399, "last_edit_date": 1441234399, "creation_date": 1441233721, "answer_id": 32364322, "question_id": 32364242, "link": "https://stackoverflow.com/questions/32364242/use-of-friend-in-self-contained-program/32364322#32364322", "title": "Use of `friend` in self contained program?", "body": "<p>I am not sure if your class concept is the way you should follow. You should make your data much more readable and compact. Anyway, to answer your question: Use private members and getter/setter functions when you want to change the implementation in the future. They also help you debugging with breakpoints and/or validating values. Prefer <a href=\"https://en.wikipedia.org/wiki/Encapsulation_(computer_programming)\" rel=\"nofollow\">encapsulation</a> and <a href=\"https://en.wikipedia.org/wiki/Abstraction_(computer_science)\" rel=\"nofollow\">abstraction</a> when you want to hide an implementation and combine functionality. You should definitely make your classes more abstract. E.g. <code>my_vector.copyAbcDataFrom(other_vector)</code> is much nicer than <code>my_vector.member = other_vector.member</code>.</p>\n\n<p>If you don't care about these arguments you can use public members.</p>\n\n<p>Btw, you could also use macros to auto-create getter/setter functions for your class.</p>\n\n<pre><code>#define MEMBER(datatype, name) \\\n    private: \\\n        datatype name; \\\n    public: \\\n        datatype get ## name() const { return name; }\n\nclass Foo\n{\n  MEMBER(int, abc)\n  MEMBER(char, blub)\n};\n\nint main()\n{\n  Foo f;\n  int val = f.getabc();\n  return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2898, "user_id": 1385931, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/70e182175b70bc54af9183fdc8d9a27b?s=128&d=identicon&r=PG", "display_name": "HelloWorld", "link": "https://stackoverflow.com/users/1385931/helloworld"}, "edited": false, "score": 0, "creation_date": 1441236135, "post_id": 32364459, "comment_id": 52601785, "body": "@negative voter: can you please give a comment what is wrong with this answer, or how it can be improved? For me the answer is pretty valid and a good hint to the OP how to restructure his class. Upped by me now."}], "tags": [], "owner": {"reputation": 1540, "user_id": 3427419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de87c9d24eea8e8baa4458e4c2ece6c6?s=128&d=identicon&r=PG&f=1", "display_name": "user3427419", "link": "https://stackoverflow.com/users/3427419/user3427419"}, "is_accepted": false, "score": 0, "last_activity_date": 1441234456, "creation_date": 1441234456, "answer_id": 32364459, "question_id": 32364242, "link": "https://stackoverflow.com/questions/32364242/use-of-friend-in-self-contained-program/32364459#32364459", "title": "Use of `friend` in self contained program?", "body": "<p>You are doing it wrong. The purpose of classes is to isolate logic so you can grok all of it. It's a step up from just having functions which is a step up from globals.</p>\n\n<p>If you have 200 different parameters, you should not be sticking them in 200 different variables. Associative containers exist for a reason. Enums exist for a reason.</p>\n\n<pre><code>class Cell {\n    public: \n        enum class ParameterType { Param1, Param2, };\n\n        double getParameter(ParameterType type) { return variables.at(type); }\n        void setParameter(ParameterType type, double value) { variables[type] = value; }\n\n    private:\n        std::map&lt;ParameterType, double&gt; variables;\n};\n</code></pre>\n\n<p>and where are the 100s of get/set? Make a compact design, and things are readable.</p>\n\n<p>The reason you do not want to make friends is for maintainability reasons. It is the same reasons why you don't use globals. If you change how things work internally, you don't want to break things outside your class.</p>\n\n<p>Hint: If your class declaration is longer than a about a few pages, you need to split it up.</p>\n"}], "owner": {"reputation": 1201, "user_id": 1762492, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/da8c8d66ff8f2f9c6506621e97610640?s=128&d=identicon&r=PG", "display_name": "traggatmot", "link": "https://stackoverflow.com/users/1762492/traggatmot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441234456, "creation_date": 1441233335, "question_id": 32364242, "link": "https://stackoverflow.com/questions/32364242/use-of-friend-in-self-contained-program", "title": "Use of `friend` in self contained program?", "body": "<p>I have a large, self-contained environmental model.  In the model I have a large class called <code>cell</code>, that contains many (~100) <code>vectors</code> and <code>doubles</code> that all together dictate the current state of the <code>cell</code> across many attributes.  These attributes are changed by different environmental and biological processes (other <code>classes</code>), which contain process specific functions/methods.  I am tempted to make these all of these process classes (20+) friend classes of the <code>cell</code> class, so that I don't have to write nearly 200 get/set functions.</p>\n\n<p>It would also allow my code to be more simplistic and easier to read:</p>\n\n<p><code>cell-&gt;variableA = (cell-&gt;variableA * someInput)/(somOtherInput)</code></p>\n\n<p>vs.</p>\n\n<p><code>cell-&gt;setVariableA(cell-&gt;getVariableA * someInput)/(someOtherInput)</code></p>\n\n<p>Are there solid reasons against doing this?  Should I also just consider making the data members all public?  </p>\n\n<p>The model is a self contained application - I don't share the code with others to use/couple anything to.</p>\n"}, {"tags": ["php", "c++", "datetime"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441235770, "post_id": 32364216, "comment_id": 52601700, "body": "If the database contains 1441222475, you didn&#39;t get the miliseconds. That looks about right for a conventional POSIX timestamp, so miliseconds should require an extra three digits."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441237277, "post_id": 32364216, "comment_id": 52602071, "body": "Correct. Now I noticed that this was saved by the PHP side. I will drop it from the post, but the problem remains the same..."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1441242155, "post_id": 32364216, "comment_id": 52603198, "body": "If I understand this correctly, your value of $t is in milliseconds, then converting it to seconds involves dividing by a million, not multiplying. And if $t is in seconds, nothing needs to be done. PHP, I&#39;m sure, is expecting to get the number of seconds since epoch, not the number of milliseconds."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1441246004, "post_id": 32364216, "comment_id": 52604001, "body": "Sam, but if I divide it will truncate the milliseconds, or not ? I&#180;m trying to convert from millisenconds to nanoseconds, something that PHP seens to support..."}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441237367, "creation_date": 1441233168, "last_edit_date": 1441237367, "question_id": 32364216, "link": "https://stackoverflow.com/questions/32364216/convert-c-stdchronoduration-caststdchronomilliseconds-to-php-datetim", "title": "Convert C++ std::chrono::duration_cast&lt;std::chrono::milliseconds&gt; to PHP DateTime", "body": "<p>I\u00b4m writing an application composed of a C++ process that acquires data and stores it in a Sqlite3 database, and a PHP Web application to analyze that data.</p>\n\n<p>Some collected data generates <code>DateTime</code> formats, that are stored on a <code>INTEGER</code> type field on Sqlite3.</p>\n\n<p>At the C++ side, the following piece of code is used to generate the timestamps (in milliseconds precision, as I\u00b4m dealing with a real time system):</p>\n\n<pre><code>int64_t convertTimePointToInt64(const std::chrono::time_point&lt;std::chrono::system_clock&gt; &amp;time)\n{\n    auto count = time.time_since_epoch();\n    auto value = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(count);\n\n    return value.count();\n}\n\nstd::chrono::time_point&lt;std::chrono::system_clock&gt; dt = std::chrono::system_clock::now();\nauto valueToStore = convertTimePointToInt64(dt);\n</code></pre>\n\n<p>The <code>valueToStore</code> is then INSERT\u00b4ed on Sqlite using SQL (<code>INTEGER</code> type). </p>\n\n<p>My problem is when I try to read it on the Web application. I\u00b4m using the following PHP code, where <code>$t</code> is the database INTEGER value:</p>\n\n<pre><code>$micro = sprintf(\"%06d\",($t - floor($t)) * 1000000);\n$d = new \\DateTime( date('Y-m-d H:i:s.'.$micro, $t) );\n$a = $d-&gt;format(\"Y-m-d H:i:s.u\");\n</code></pre>\n\n<p>I\u00b4m getting stange values (1031 in year, for example) that indicates the PHP logic is messy.</p>\n\n<p>The C++ code is running very fine (I can store and retrive timestamps and convert it to/back to <code>std::string</code>). I need to fix my PHP code to show the data correctly.</p>\n\n<p>Help appreciated.</p>\n"}, {"tags": ["c++", "gnuplot"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1441233470, "post_id": 32364081, "comment_id": 52600996, "body": "Don&#39;t put a space between the <code>-</code> and the <code>persist</code>. It needs to be one word <code>-persist</code> ."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1441233669, "post_id": 32364081, "comment_id": 52601053, "body": "Also don&#39;t send <code>exit</code> immediately after <code>sin(x)</code>, it comes out as <code>sin(x)exit</code> which is not a function. Maybe add a <code>\\n</code> after <code>sin(x)</code>?"}, {"owner": {"reputation": 44000, "user_id": 2604213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O7ThK.png?s=128&g=1", "display_name": "Christoph", "link": "https://stackoverflow.com/users/2604213/christoph"}, "edited": false, "score": 0, "creation_date": 1441254980, "post_id": 32364081, "comment_id": 52606040, "body": "Please read a bit through <a href=\"http://stackoverflow.com/questions/tagged/gnuplot%20c%2b%2b\">stackoverflow.com/questions/tagged/gnuplot%20c%2b%2b</a>"}, {"owner": {"reputation": 1, "user_id": 5286094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RyALPKK38fw/AAAAAAAAAAI/AAAAAAAAAw0/TdGgDz56em8/photo.jpg?sz=128", "display_name": "Shubhankar Nath", "link": "https://stackoverflow.com/users/5286094/shubhankar-nath"}, "edited": false, "score": 0, "creation_date": 1441264648, "post_id": 32364081, "comment_id": 52610157, "body": "Thanks a lot guys! i solved the problem by typing &#39;gnuplot&#39; instead of &#39;wgnuplot&#39;!!!"}], "owner": {"reputation": 1, "user_id": 5286094, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RyALPKK38fw/AAAAAAAAAAI/AAAAAAAAAw0/TdGgDz56em8/photo.jpg?sz=128", "display_name": "Shubhankar Nath", "link": "https://stackoverflow.com/users/5286094/shubhankar-nath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 551, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441232423, "creation_date": 1441232423, "question_id": 32364081, "link": "https://stackoverflow.com/questions/32364081/how-to-input-commands-from-c-to-gnuplot", "title": "How to input commands from c++ to gnuplot?", "body": "<p>So this is what i wrote, expecting to get a sin(x) curve in return...</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;stdio.h&gt;\n\nusing namespace std;\n\nint main()\n{\nFILE *gnuplotPipe = popen(\"\\\"C:\\\\Program Files\\\\gnuplot\\\\bin\\\\wgnuplot\\\" -   persist\",\"w\");\n\nif (gnuplotPipe) {   // If gnuplot is found\n\nfprintf(gnuplotPipe, \"reset\\n\"); //gnuplot commands\nfprintf(gnuplotPipe, \"plot sin(x)\");\nfflush(gnuplotPipe); //flush pipe\nfprintf(gnuplotPipe,\"exit \\n\");   // exit gnuplot\npclose(gnuplotPipe);    //close pipe\n\n}\n}\n</code></pre>\n\n<p>but the gnuplot terminal only opened up, requiring me to type in 'plot sin(x)' again. Can this be not done automatically?\nAny help appreciated. Thanks in advance!</p>\n"}, {"tags": ["c++", "rvo"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 1, "creation_date": 1441232362, "post_id": 32364011, "comment_id": 52600634, "body": "Why do you have a non-<code>const</code> version if its behavior is identical anyway? I realize that this doesn&#39;t answer your question. However, in contexts where it actually matters the implementations or results of the <code>const</code> and non-<code>const</code> versions tend to differ in some form, e.g., in return references or pointers with different <code>const</code> qualification. ... and returning an object by value and <code>const</code> qualifying it is somewhat besides the point: clearly the type is copyable/movable, i.e., the user can get hold of a non-<code>const</code> qualified object anyway."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1441232377, "post_id": 32364011, "comment_id": 52600643, "body": "Is the copy from the <code>const A</code> to <code>A</code> additional or not?"}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441232643, "post_id": 32364011, "comment_id": 52600737, "body": "@DietmarK&#252;hl const-version is here because I want to allow having a constant light copy when the parent object is constant. And if only non-const version is available -- when the parent object is constant there is no way to get a light copy."}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1441232820, "post_id": 32364011, "comment_id": 52600801, "body": "@nwp Yes, copying from <code>const A</code> to <code>A</code> is additional because if I would copy-paste code to non-const version there would be no such copying."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441232845, "post_id": 32364011, "comment_id": 52600808, "body": "Yes, sure. It should just return an <code>A</code> value and you should remove the non-<code>const</code> version. There is, as far as I can tell, no benefit to be gained from returning <code>const</code> qualified objects but it is certainly harmful if objects are movable otherwise."}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441233249, "post_id": 32364011, "comment_id": 52600922, "body": "@DietmarK&#252;hl I understand your point, but there is a problem: it is a light copy. So, I need to show that when original object is constant -- only constant light copy could be obtained. Otherwise, constant parent object could be modified via non-const light copy."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 2, "creation_date": 1441233411, "post_id": 32364011, "comment_id": 52600978, "body": "It seems you <i>don&#39;t</i> understand my point! ... because you can obtain a non-<code>const</code> qualifed object from a <code>const</code> qualified object by simply copying it: <code>A const a; A non_const = a.light_copy();</code> You can&#39;t enforce propagation of <code>const</code>ness upon copying."}, {"owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441234837, "post_id": 32364011, "comment_id": 52601414, "body": "@DietmarK&#252;hl Interesting. Could you explain me this moment, please? In your example const-version of <code>lightCopy</code> is called and it returns constant object, but on the left side the object is not constant. Why copy-constructor is not called here?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441237799, "post_id": 32364011, "comment_id": 52602199, "body": "@AlexanderSergeev: With my original answer you are right: the copy constructor would be invoked. I now understand that this was your actual objective: doing a &quot;light copy&quot; would merely return a reference as long as copy elision is used which would be turned into an actual copy by way of the copy constructor when put into a non-<code>const</code> object. The use of a non-<code>const</code> qualified object would have needed to create a copy. So, it would be a sort of CoW (copy-on-write) approach which assumes that a non-<code>const</code> object is being written to. With the modified answer I don&#39;t think that works."}], "answers": [{"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 2, "last_activity_date": 1441238246, "last_edit_date": 1441238246, "creation_date": 1441233193, "answer_id": 32364220, "question_id": 32364011, "link": "https://stackoverflow.com/questions/32364011/avoiding-code-duplication-for-const-overload-and-rvo/32364220#32364220", "title": "avoiding code duplication for const-overload and RVO", "body": "<p>Copy elision of temporary objects is permitted if the source and the destination have the same \"cv-<strong>un</strong>qualified type\" according to 12.8 [class.copy] paragraph 31 third item in the list:</p>\n\n<blockquote>\n  <p>when a temporary class object that has not been bound to a reference (12.2) would be copied/moved to a class object with the same cv-unqualified type, the copy/move operation can be omitted by constructing the temporary object directly into the target of the omitted copy/move</p>\n</blockquote>\n\n<p>That is, the quoted code copy elision <em>is</em> allowed.</p>\n\n<p>Instrumenting the destructor in the original example shows that <a href=\"http://clang.llvm.org/\" rel=\"nofollow\">clang</a>, <a href=\"https://software.intel.com/en-us/c-compilers\" rel=\"nofollow\">Intel's compiler</a>, and <a href=\"https://www.edg.com/index.php?location=c_frontend\" rel=\"nofollow\">EDG's frontend</a> elide the copies while <a href=\"http://gcc.gnu.org/\" rel=\"nofollow\">gcc</a> does not. That is, there are only two destructor calls implying that all possibly elidable copies are elided. The copies are elided independent of how <code>b</code> is declared. I have declared <code>b</code> using <code>auto</code>, <code>A</code>, and <code>A const</code>.</p>\n"}], "owner": {"reputation": 794, "user_id": 2784509, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/862d736567a6ae2b115aa76b261add34?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Sergeyev", "link": "https://stackoverflow.com/users/2784509/alexander-sergeyev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 32364220, "answer_count": 1, "score": 0, "last_activity_date": 1441238246, "creation_date": 1441231988, "question_id": 32364011, "link": "https://stackoverflow.com/questions/32364011/avoiding-code-duplication-for-const-overload-and-rvo", "title": "avoiding code duplication for const-overload and RVO", "body": "<p>For the sake of avoiding code duplication when dealing with const-overload I wrote something like this:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass A\n{\n    std::shared_ptr&lt;int&gt; _data;\npublic:\n    const A lightCopy() const\n    {\n        A a;\n        a._data = _data;\n        return a;\n    }\n\n    A lightCopy()\n    {\n        using const_a_t = const A;\n        const_a_t &amp;const_me = *this;\n        return const_me.lightCopy(); // const object here\n    }\n};\n\nint main()\n{\n    A a;\n    auto b = a.lightCopy();\n}\n</code></pre>\n\n<p><code>const_cast</code> is used in non-const version because otherwise it would be a non-const function call in const-method that will probably modify the object and will get away with it unnoticed (because of <code>const_cast</code>). And const-casting from non-const to const shouldn't cause any problems.</p>\n\n<p>And question here is: since I can't const_cast an object \u2014 <strong>is it possible that because invoked <code>lightCopy()</code> returns const object and actual return type is not const \u2014 RVO won't be possible and an additional copy will be made?</strong></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441230976, "post_id": 32363720, "comment_id": 52600170, "body": "Possibilities: 1. <code>cin</code> is in an error state. You can&#39;t read from <code>cin</code> when errored. <code>cin &gt;&gt; answer;</code> instantly returns and <code>cout &gt;&gt; answer;</code>prints an empty string. 2. <code>cin &gt;&gt; reg_numb;</code> (and other reads of numbers). In order to make this do anything, you have to hit enter. Converting reg_num does not consume the enter, so <code>cin &gt;&gt; answer;</code> is instantly satisfied and puts an empty string in answer."}], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 3361180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-csBDMESWmh0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPnjY0PFk6p5YiF_dO6ECHc8KGzMQ/mo/photo.jpg?sz=128", "display_name": "idrisadetunmbi", "link": "https://stackoverflow.com/users/3361180/idrisadetunmbi"}, "edited": false, "score": 0, "creation_date": 1441232699, "post_id": 32363838, "comment_id": 52600759, "body": "Okay, I understand now. The combination of both cin.clear() and cin.ignore() (I&#39;m just learning both now) solved it. The average_each_student() terminates with a non character as intended. A non character key which does the termination and the return key to complete the function &#39;waits in the buffer&#39; before <code>cin&gt;&gt;answer</code> can work."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 3, "last_activity_date": 1441231141, "creation_date": 1441231141, "answer_id": 32363838, "question_id": 32363720, "link": "https://stackoverflow.com/questions/32363720/why-is-this-code-exiting-at-this-point/32363838#32363838", "title": "Why is this code exiting at this point?", "body": "<p>The loop inside <code>average_each_student()</code> runs until further input for data fails and <code>std::cin</code> gets into failure state (i.e., it gets <code>std::ios_base::failbit</code> set).</p>\n\n<p>As a result, input in <code>main()</code> immediately fails and the output of what was input just prints the unchanged string. That is, your perception of the program existing prior to the input is actually wrong: it just doesn't wait for input on a stream in fail state. Since your output doesn't add anything recognizable the output appears to do nothing although it actually prints an empty string. You can easily verify this claim by adding something, e.g.</p>\n\n<pre><code>std::cout &lt;&lt; \"read '\" &lt;&lt; answer &lt;&lt; \"'\\n\";\n</code></pre>\n\n<p>Whether it is possible to recover from the fail state on the input stream depends on how it failed. If you enter number until you indicate stream termination (using Ctrl-D or Ctrl-Z on the terminal depending on what kind of system you are using), there isn't any way to recover. If you terminate the input entering a non-number, you can use</p>\n\n<pre><code>std::cin.clear();\n</code></pre>\n\n<p>To clear the stream's failure stated. You might want to ignore entered characters using</p>\n\n<pre><code>std::cin.ignore(); // ignore the next character\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n    // ignore everything up to the end of the line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 552, "user_id": 3361180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-csBDMESWmh0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPnjY0PFk6p5YiF_dO6ECHc8KGzMQ/mo/photo.jpg?sz=128", "display_name": "idrisadetunmbi", "link": "https://stackoverflow.com/users/3361180/idrisadetunmbi"}, "edited": false, "score": 0, "creation_date": 1441232021, "post_id": 32363929, "comment_id": 52600534, "body": "Yeah.. Thanks.. I should have researched well before asking.. I saw another similar question and I think the solution (which apparently is the same as yours) applies to this too. This is some sorta duplication I think."}], "tags": [], "owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1441231564, "creation_date": 1441231564, "answer_id": 32363929, "question_id": 32363720, "link": "https://stackoverflow.com/questions/32363720/why-is-this-code-exiting-at-this-point/32363929#32363929", "title": "Why is this code exiting at this point?", "body": "<p>use cin.clear(); before cin >> answer;  That will fix the problem. But you are not controlling the input. it just runs out to cin..</p>\n"}], "owner": {"reputation": 552, "user_id": 3361180, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-csBDMESWmh0/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPnjY0PFk6p5YiF_dO6ECHc8KGzMQ/mo/photo.jpg?sz=128", "display_name": "idrisadetunmbi", "link": "https://stackoverflow.com/users/3361180/idrisadetunmbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1441231564, "creation_date": 1441230610, "question_id": 32363720, "link": "https://stackoverflow.com/questions/32363720/why-is-this-code-exiting-at-this-point", "title": "Why is this code exiting at this point?", "body": "<p>I'm new to C++. I stumbled upon one tutorial problem, and I thought I'd use the few things I have learnt to solve it. I have written the code to an extent but the code exits at a point, and I really can't figure out why. I do not want to go into details about the tutorial question because I actually wish to continue with it based on how I understood it from the start, and I know prospective answerers might want to change that. The code is explanatory, I have just written few lines. </p>\n\n<p>Here comes the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\ndouble average_each_student() {\n\n    cout &lt;&lt; \"\\n&gt;Enter your scores seperated by spaces and terminated with a period\\n\"\n         &lt;&lt; \"&gt;Note: scores after total number of six will be truncated.\\n\"\n         &lt;&lt; endl;\n\n    double sum = 0, average = 0;\n    int user_input, counter = 0;\n    const double no_of_exams = 6;\n\n    while(cin &gt;&gt; user_input) {\n        ++counter;\n        if(counter &lt; 5) sum += 0.15 * user_input;\n        else if(counter &gt; 4 &amp;&amp; counter &lt; 7) sum += 0.20 * user_input;\n\n    }\n\n    return sum / no_of_exams;\n}\n\nint reg_number() {\n\n    cout &lt;&lt; \"Enter your registration number: \" &lt;&lt; endl;\n    int reg_numb;\n    cin &gt;&gt; reg_numb;\n    return reg_numb;\n\n}\n\nint main() {\n\n    vector&lt;int&gt; reg_num_list;\n    vector&lt;double&gt; student_average;\n\n    reg_num_list.push_back(reg_number());\n    student_average.push_back(average_each_student());\n\n    string answer;\n    cout &lt;&lt; \"\\n\\nIs that all??\" &lt;&lt; endl;\n    //everything ends at this point.\n    //process returns 0\n\n    cin &gt;&gt; answer;\n\n    cout &lt;&lt; answer;\n\n\n}\n</code></pre>\n\n<p>The code exits at <code>cout &lt;&lt; \"\\n\\nIs that all??\" &lt;&lt; endl;</code>. The rest part after that is not what I intend doing, but I'm just using that part to understand what's happening around there. </p>\n\n<p>PS: I know there are other ways to improve the whole thing, but I'm writing the code based on my present knowledge and I wish to maintain the idea I'm currently implementing. I would appreciate if that doesn't change for now. I only need to know what I'm not doing right that is making the code end at that point. </p>\n"}, {"tags": ["c++", "integer", "character"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441230024, "post_id": 32363496, "comment_id": 52599803, "body": "When <code>x</code> is 0, what does <code>sum *= x</code> do?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1441230156, "post_id": 32363496, "comment_id": 52599861, "body": "You&#39;re multiplying all the digits. When you multiply by 0, you get 0."}, {"owner": {"reputation": 21, "user_id": 3993296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03ba4fcb93be1247eedf88294136094?s=128&d=identicon&r=PG&f=1", "display_name": "reasad sadi", "link": "https://stackoverflow.com/users/3993296/reasad-sadi"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441230367, "post_id": 32363496, "comment_id": 52599949, "body": "what to do instead to convert character to integer in this case"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441230426, "post_id": 32363496, "comment_id": 52599981, "body": "You&#39;re converting it to an integer correctly. The problem is with what you&#39;re doing with the integer after you convert it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1441230465, "post_id": 32363496, "comment_id": 52599993, "body": "What are you expecting the result to be for <code>10 5 3</code>? You&#39;re multiplying the digits, so <code>1*0*5*3 = 0</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1441230836, "creation_date": 1441230836, "answer_id": 32363768, "question_id": 32363496, "link": "https://stackoverflow.com/questions/32363496/cannot-convert-character-to-integer-in-c-in-loop/32363768#32363768", "title": "Cannot convert character to integer in c++ in loop", "body": "<p>It's not clear from your post why you have two variable <code>num</code> and <code>sum</code>. It seems redundant.</p>\n\n<p>Assuming you just need <code>num</code>, replace the lines</p>\n\n<pre><code>sum *= x;\nnum = sum;\n</code></pre>\n\n<p>by</p>\n\n<pre><code>num = (10*num + x);\n</code></pre>\n\n<p>to get the numbers right.</p>\n\n<p>Also, when you encounter a space, you'll need to reset <code>num</code> to <code>0</code>. Otherwise, the input <code>10 8</code> will be treated as <code>108</code>.</p>\n\n<pre><code>for(int j = 0; j &lt; str.length(); j++) {\n    if(str[j] != ' ') {\n        num = (10*num + x);\n    } else {\n       // Use num and then reset it 0\n       // ...\n       num = 0;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3993296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d03ba4fcb93be1247eedf88294136094?s=128&d=identicon&r=PG&f=1", "display_name": "reasad sadi", "link": "https://stackoverflow.com/users/3993296/reasad-sadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1441233065, "creation_date": 1441229631, "last_edit_date": 1441233065, "question_id": 32363496, "link": "https://stackoverflow.com/questions/32363496/cannot-convert-character-to-integer-in-c-in-loop", "title": "Cannot convert character to integer in c++ in loop", "body": "<p>Why my code shows nothing for the input of 10 5 3. It is work for everything till 1 to 9 but whenever it goes for 10 or greater then 10 then doesn't show any output. I also try to use atoi() for it but error in this line int x = str[j] - '0' . Please help me.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\nint main()\n{\n    int n, sum = 1, num = 0;\n    string str;\n    cin &gt;&gt; n;\n    for(int i = 0; i &lt;= n; i++) {\n        getline(cin, str);\n        for(int j = 0; j &lt; str.length(); j++) {\n            if(str[j] != ' ') {\n                int x = str[j] - '0'; // Here is the problem even I use atoi() but error\n                sum *= x;\n                num = sum;\n            }\n        }\n        if(num != 0) {\n            cout &lt;&lt; num &lt;&lt; endl;\n            num = 0;\n            sum = 1;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "xml", "unit-testing", "cmocka"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 3338599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1B5s.jpg?s=128&g=1", "display_name": "Divya Y", "link": "https://stackoverflow.com/users/3338599/divya-y"}, "edited": false, "score": 0, "creation_date": 1441306055, "post_id": 32372205, "comment_id": 52637018, "body": "Hello Andreas, thanks for the reply. I am using CMocka 1.0.1 and have added cmocka_set_message_output(CM_OUTPUT_XML); to the main() in the unit test. But the result that i see on the stdout is in the below format... 0x3 == 0x3 cmockatest.c:8: error: Failure! [  PASSED  ] 0 test(s). [  FAILED  ] 1 test(s), listed below: [  FAILED  ] test"}, {"owner": {"reputation": 742, "user_id": 577774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2f1e3c638391229f288e9449c387f3?s=128&d=identicon&r=PG", "display_name": "asn", "link": "https://stackoverflow.com/users/577774/asn"}, "reply_to_user": {"reputation": 173, "user_id": 3338599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1B5s.jpg?s=128&g=1", "display_name": "Divya Y", "link": "https://stackoverflow.com/users/3338599/divya-y"}, "edited": false, "score": 0, "creation_date": 1441404137, "post_id": 32372205, "comment_id": 52682478, "body": "<code>asn@magrathea:~&#47;workspace&#47;projects&#47;cmocka&#47;obj&gt; CMOCKA_MESSAGE_OUTPUT=XML .&#47;example&#47;simple_test  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;testsuites&gt;   &lt;testsuite name=&quot;tests&quot; time=&quot;0.009&quot; tests=&quot;1&quot; failures=&quot;0&quot; errors=&quot;0&quot; skipped=&quot;0&quot; &gt;     &lt;testcase name=&quot;null_test_success&quot; time=&quot;0.009&quot; &gt;     &lt;&#47;testcase&gt;   &lt;&#47;testsuite&gt; &lt;&#47;testsuites&gt;</code> Works just fine for me .."}, {"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445608043, "post_id": 32372205, "comment_id": 54406579, "body": "Hmm, if @asn <i>is</i> the author, then I am surprised that he did not mention what I found by code reading. You can set the name of a XML output file in the environment variable CMOCKA_XML_FILE - see cmocka.c, line 1913"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1445713834, "post_id": 32372205, "comment_id": 54442228, "body": "@Mawg You are using deprecated test runner <code>run_tests()</code>, see my answer post."}, {"owner": {"reputation": 742, "user_id": 577774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2f1e3c638391229f288e9449c387f3?s=128&d=identicon&r=PG", "display_name": "asn", "link": "https://stackoverflow.com/users/577774/asn"}, "edited": false, "score": 0, "creation_date": 1486631689, "post_id": 32372205, "comment_id": 71431678, "body": "cmocka-1.1.0 has improved XML output. You can now create a XML file for each group. See <a href=\"https://api.cmocka.org/\" rel=\"nofollow noreferrer\">api.cmocka.org</a> -&gt; Output formats"}], "tags": [], "owner": {"reputation": 742, "user_id": 577774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff2f1e3c638391229f288e9449c387f3?s=128&d=identicon&r=PG", "display_name": "asn", "link": "https://stackoverflow.com/users/577774/asn"}, "is_accepted": false, "score": 1, "last_activity_date": 1441273478, "creation_date": 1441273478, "answer_id": 32372205, "question_id": 32363479, "link": "https://stackoverflow.com/questions/32363479/how-to-get-cmocka-report-in-junit-format/32372205#32372205", "title": "How to get CMocka report in JUnit format?", "body": "<p>The XML is printed to stdout, you need to redirect it to a file ...</p>\n"}, {"comments": [{"owner": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1445848121, "post_id": 33322021, "comment_id": 54478390, "body": "Thanks, Orest. That answer is certainly worth the bonus. In fact, it is the best single piece of documentation and only example of cmcoka on the internet, as far as I can find. @asn am I worng?"}, {"owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "reply_to_user": {"reputation": 34717, "user_id": 192910, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/de26f9c446ae47545220ff9eff3e3ef7?s=128&d=identicon&r=PG", "display_name": "Mawg says reinstate Monica", "link": "https://stackoverflow.com/users/192910/mawg-says-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1445859790, "post_id": 33322021, "comment_id": 54485271, "body": "For completeness I updated the post by usage of <code>cmocka_run_group_tests_name</code>"}], "tags": [], "owner": {"reputation": 6336, "user_id": 4023446, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Orest Hera", "link": "https://stackoverflow.com/users/4023446/orest-hera"}, "is_accepted": false, "score": 6, "last_activity_date": 1445860101, "last_edit_date": 1445860101, "creation_date": 1445712602, "answer_id": 33322021, "question_id": 32363479, "link": "https://stackoverflow.com/questions/32363479/how-to-get-cmocka-report-in-junit-format/33322021#33322021", "title": "How to get CMocka report in JUnit format?", "body": "<p>The most credible source is actually the <code>cmocka.c</code> source file that contains entire implementation of the framework. This file is not too large, so I will cite something from the source file version 1.0.1.</p>\n\n<p>There are two conditions to generate XML output by cmocka and the third condition is needed to store output in file.</p>\n\n<p><strong>1. XML output can be generated only if tests are called by <code>cmocka_run_group_tests()</code></strong></p>\n\n<p>The customizable output format can be obtained only from the test runner <code>cmocka_run_group_tests()</code> or from its full variation <code>cmocka_run_group_tests_name()</code>.</p>\n\n<p>There is no other route that can lead to XML output. If a singe test is started by <code>run_test()</code> the output cannot be XML.</p>\n\n<p>The summary format</p>\n\n<pre><code>[  PASSED  ] 0 test(s).\n[  FAILED  ] 1 test(s), listed below:\n</code></pre>\n\n<p>can be generated in one of the following possible cases:</p>\n\n<ul>\n<li>the test is started by one of the deprecated test runners: <code>run_tests()</code>, <code>_run_tests()</code> or <code>run_group_tests()</code>, <code>_run_group_tests()</code>; in that case it is even possible to see compilation warning about usage of a deprecated function;</li>\n<li>the test is started by <code>cmocka_run_group_tests()</code> and the output format is <code>CM_OUTPUT_STDOUT</code>.</li>\n</ul>\n\n<p><strong>2. cmocka message output should be set to <code>CM_OUTPUT_XML</code></strong></p>\n\n<p>The default output format can be set by calling <code>cmocka_set_message_output(CM_OUTPUT_XML)</code> before running tests. However, even if such default is set in the test source it can be overwritten by the environment variable <code>CMOCKA_MESSAGE_OUTPUT</code>. That variable has higher priority than the default set by <code>cmocka_set_message_output()</code>.</p>\n\n<p>The value of <code>CMOCKA_MESSAGE_OUTPUT</code> is <em>case insensitive</em>. The variable is taken into account if it is equal to one of the following values: <code>stdout</code>, <code>subunit</code>, <code>tab</code> or <code>xml</code>.</p>\n\n<p>So, if the environment variable has value <code>stdout</code> the function <code>mocka_set_message_output()</code> has no effect.</p>\n\n<p>That variable can be used to force different output formats of already compiled binary:</p>\n\n<pre><code>CMOCKA_MESSAGE_OUTPUT=stdout ./nulltest\nCMOCKA_MESSAGE_OUTPUT=subunit ./nulltest\nCMOCKA_MESSAGE_OUTPUT=tap ./nulltest\nCMOCKA_MESSAGE_OUTPUT=xml ./nulltest\n</code></pre>\n\n<p>Thus, if the test is started by <code>cmocka_run_group_tests()</code> but the output is not affected by <code>mocka_set_message_output()</code> it means that there is set variable <code>CMOCKA_MESSAGE_OUTPUT=stdout</code> in the shell.</p>\n\n<p><strong>3. It should be possible to create a new file by cmocka to write its XML output directly to that file</strong></p>\n\n<p>If both previous conditions are satisfied, it is possible to ask cmocka to write its XML output directly to a file. If the environment variable <code>CMOCKA_XML_FILE</code> is set, then cmocka will try to write XML to file with name of that variable value.</p>\n\n<p>Usage example:</p>\n\n<pre><code>CMOCKA_XML_FILE='./out.xml' CMOCKA_MESSAGE_OUTPUT=xml ./nulltest\n</code></pre>\n\n<p>The file is written if:</p>\n\n<ul>\n<li>file with such name does not exist;</li>\n<li>such file can be created.</li>\n</ul>\n\n<p>Thus if there are more than one test runners in one compiled binary test application, only the first runner can write its output to that file.</p>\n\n<p>The output is written to the shell even if <code>CMOCKA_XML_FILE</code> is set, but the file already exists or it cannot be created.</p>\n\n<p>Of course, it is possible just to redirect shell output to a file overwriting existent file or appending to existent file if such file exists.</p>\n\n<p>The example bellow can be used to check different options for output. It can be built by the command</p>\n\n<pre><code>gcc -g nulltest.c -o nulltest -Ipath_to_cmocka_headers -Lpath_to_cmocka_library_binary -lcmocka\n</code></pre>\n\n<p><em>nulltest.c</em></p>\n\n<pre><code>#include &lt;stdarg.h&gt;\n#include &lt;stddef.h&gt;\n#include &lt;setjmp.h&gt;\n#include &lt;cmocka.h&gt;\n\n/* A test case that fails. */\nstatic void null_test_failed(void **state) {\n    (void) state; /* unused */\n    assert_int_equal(0, 1);\n}\n\nint main(void) {\n    const struct CMUnitTest tests[] = {\n        cmocka_unit_test(null_test_failed),\n    };\n    const struct UnitTest tests_deprecated[] = {\n        unit_test(null_test_failed),\n    };\n\n    cmocka_set_message_output(CM_OUTPUT_XML);\n\n    /* group test functions that use customizable output format */\n    cmocka_run_group_tests(tests, NULL, NULL);\n    cmocka_run_group_tests_name(\"custom group name\", tests, NULL, NULL);\n\n    /* run single test with standard output */\n    run_test(null_test_failed);\n\n    /* DEPRECATED TEST RUNNER functions that can give only standard output */\n    run_tests(tests_deprecated);\n    _run_tests(tests_deprecated, 1);\n    run_group_tests(tests_deprecated);\n    _run_group_tests(tests_deprecated, 1);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 3338599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/G1B5s.jpg?s=128&g=1", "display_name": "Divya Y", "link": "https://stackoverflow.com/users/3338599/divya-y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2630, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1445860101, "creation_date": 1441229529, "last_edit_date": 1445714425, "question_id": 32363479, "link": "https://stackoverflow.com/questions/32363479/how-to-get-cmocka-report-in-junit-format", "title": "How to get CMocka report in JUnit format?", "body": "<p>I am able to use cmocka and getting default results on the screen. I want to get the results for the unit test in JUnit format.</p>\n\n<p>CMocka supports JUnit format by using the env variable <code>CMOCKA_MESSAGE_OUTPUT</code> or using API <code>cmocka_set_message_output(CM_OUTPUT_XML);</code></p>\n\n<p>But still no xml file gets generated. Can anyone help out in obtaining results in JUnit format?</p>\n"}, {"tags": ["c++", "linux", "sdl", "x11", "xlib"], "answers": [{"tags": [], "owner": {"reputation": 2887, "user_id": 5845470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606531753afd42de16d82a1199fc4d45?s=128&d=identicon&r=PG&f=1", "display_name": "jdarthenay", "link": "https://stackoverflow.com/users/5845470/jdarthenay"}, "is_accepted": false, "score": 0, "last_activity_date": 1462109362, "creation_date": 1462109362, "answer_id": 36967221, "question_id": 32363160, "link": "https://stackoverflow.com/questions/32363160/x11-xmovewindow-with-sdl-1-2-does-not-move-window/36967221#36967221", "title": "X11 XMoveWindow with SDL 1.2 does NOT move window", "body": "<p>I am also trying to achieve this, there seem to be only a dirty way.</p>\n\n<p>You have to use <code>SDL_SetVideoMode()</code> which permit do do that as mentioned in <a href=\"http://sdl.beuc.net/sdl.wiki/SDL_SetVideoMode\" rel=\"nofollow\">SDL documentation</a>.</p>\n\n<p>Try this:</p>\n\n<pre><code>SDL_putenv(const_cast&lt;char*&gt;(\"SDL_VIDEO_CENTERED=\"));\nSDL_putenv(const_cast&lt;char*&gt;(\"SDL_VIDEO_WINDOW_POS=100,50\"));\nSDL_SetVideoMode(width, height, bpp, flags);\n</code></pre>\n\n<p>But this has no effect if Video Mode was already same with same witdh and same height!</p>\n"}], "owner": {"reputation": 637, "user_id": 862296, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cbed8db613e17a455b8532955f66da53?s=128&d=identicon&r=PG", "display_name": "extracrispy", "link": "https://stackoverflow.com/users/862296/extracrispy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462109362, "creation_date": 1441228196, "question_id": 32363160, "link": "https://stackoverflow.com/questions/32363160/x11-xmovewindow-with-sdl-1-2-does-not-move-window", "title": "X11 XMoveWindow with SDL 1.2 does NOT move window", "body": "<p>I'm working on a dual screen setup. The screens are positioned one on top of the other. I create a window in SDL that is the size of both screens combined. The window appears at the top left of the BOTTOM screen. I want it to be at the top left of the TOP screen. When I try to move it with XMoveWindow, it shifts the image inside of it instead of moving the window. I'm rendering an OpenGL scene.\nI'm using linux and SDL 1.2, I know, there's the problem, but I can't move to SDL2.</p>\n\n<p>Any ideas what's going on?</p>\n\n<p>I have an SDL window I've created with </p>\n\n<pre><code>SDL_Init(SDL_INIT_VIDEO | SDL_INIT_TIMER | SDL_INIT_NOPARACHUTE);\n\nSDL_GL_SetAttribute( SDL_GL_DOUBLEBUFFER, 1 );\nscreen = SDL_SetVideoMode(w, h, 32, SDL_HWACCEL | SDL_OPENGL | SDL_GL_DOUBLEBUFFER);\n</code></pre>\n\n<p>But when I run run my program, the window stays in place and the image inside it has been shifted by 200,-200.</p>\n\n<pre><code>#include &lt;SDL/SDL.h&gt;\n#include &lt;SDL/SDL_syswm.h&gt;\n#include &lt;GL/gl.h&gt;\n#include &lt;X11/Xlib.h&gt;\n\nvoid move()\n{\n    SDL_SysWMinfo info;\n    SDL_VERSION(&amp;info.version);\n\n\n    if (SDL_GetWMInfo(&amp;info))\n    {\n        // Put the window at origin!!!!!\n        cout &lt;&lt; \"xmovewindow: \" &lt;&lt; XMoveWindow(info.info.x11.display, info.info.x11.window, 200, -200) &lt;&lt; endl;\n        // prints \"xmovewindow: 1\"\n    }\n}\n</code></pre>\n\n<p>Halp!</p>\n"}, {"tags": ["c++", "debugging", "netbeans"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441229450, "post_id": 32362919, "comment_id": 52599523, "body": "1) Verify that there is code for the statement.  Compilers may optimize statements out (away) or combine source code statement lines.  2) Looking at the assembly language verify that the code is not elsewhere.  Example:  in a function with multiple <code>return</code>s, the compiler may only use one of them and the debugger won&#39;t stop at the others."}, {"owner": {"reputation": 6543, "user_id": 5171540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pAeRy.png?s=128&g=1", "display_name": "WillShackleford", "link": "https://stackoverflow.com/users/5171540/willshackleford"}, "edited": false, "score": 0, "creation_date": 1441229557, "post_id": 32362919, "comment_id": 52599581, "body": "Check if you can execute the same commands shown in  Window -&gt; Debugging -&gt; Debugger Console ?"}, {"owner": {"reputation": 189, "user_id": 3267653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb8a3712938e21a5a5a1db78aa03c73?s=128&d=identicon&r=PG&f=1", "display_name": "wicccked", "link": "https://stackoverflow.com/users/3267653/wicccked"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441243629, "post_id": 32362919, "comment_id": 52603458, "body": "Hi @Thomas, thanks for the answer. How do I verify it though? And I didn&#39;t quite understand what you meant by &quot;looking at the assembly language&quot;, could you explain it in a bit more detail? The function is a void one, so it only modifies an object without returnig anything. I actually also created a breakpoint of type function (which should stop the debugging process once the function is entered as far as I understand), but it didn&#39;t help."}, {"owner": {"reputation": 189, "user_id": 3267653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb8a3712938e21a5a5a1db78aa03c73?s=128&d=identicon&r=PG&f=1", "display_name": "wicccked", "link": "https://stackoverflow.com/users/3267653/wicccked"}, "reply_to_user": {"reputation": 6543, "user_id": 5171540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pAeRy.png?s=128&g=1", "display_name": "WillShackleford", "link": "https://stackoverflow.com/users/5171540/willshackleford"}, "edited": false, "score": 0, "creation_date": 1441243802, "post_id": 32362919, "comment_id": 52603495, "body": "Hi @WillShackleford, what commands are you talking about?"}, {"owner": {"reputation": 6543, "user_id": 5171540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pAeRy.png?s=128&g=1", "display_name": "WillShackleford", "link": "https://stackoverflow.com/users/5171540/willshackleford"}, "edited": false, "score": 0, "creation_date": 1441248283, "post_id": 32362919, "comment_id": 52604487, "body": "Sorry  I had incorrectly thought it would print the commands as it executed them, but apparently only prints the output. You can try step,cont,next,  to see if they work better than the netbeans buttons. info breakpoints should show you the line and address of the breakpoints. dissassmble &lt;address&gt; shows disassemble arround an address."}, {"owner": {"reputation": 189, "user_id": 3267653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb8a3712938e21a5a5a1db78aa03c73?s=128&d=identicon&r=PG&f=1", "display_name": "wicccked", "link": "https://stackoverflow.com/users/3267653/wicccked"}, "edited": false, "score": 0, "creation_date": 1441257499, "post_id": 32362919, "comment_id": 52606823, "body": "&quot;You can try step,cont,next, to see if they work better than the netbeans buttons&quot; They are only available after clicking the button &quot;Debug project&quot; Or are you talking about some buttons outside of netbeans?   &quot;info breakpoints&quot; not sure what you mean by this.."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11016893, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/6984f5b73fd7994f77c3b4eb84d1914d?s=128&d=identicon&r=PG", "display_name": "user11016893", "link": "https://stackoverflow.com/users/11016893/user11016893"}, "is_accepted": false, "score": 0, "last_activity_date": 1549361027, "creation_date": 1549361027, "answer_id": 54531844, "question_id": 32362919, "link": "https://stackoverflow.com/questions/32362919/netbeans-debugger-doesnt-stop-at-breakpoint/54531844#54531844", "title": "Netbeans: debugger doesn&#39;t stop at breakpoint", "body": "<p>I had the same problem. It seems the debugger goes crasy with overloaded functions, e.g. void print(int a), void print(double a). I simply changed the name of the functions and it worked smoothly.</p>\n"}], "owner": {"reputation": 189, "user_id": 3267653, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcb8a3712938e21a5a5a1db78aa03c73?s=128&d=identicon&r=PG&f=1", "display_name": "wicccked", "link": "https://stackoverflow.com/users/3267653/wicccked"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1549361027, "creation_date": 1441227242, "question_id": 32362919, "link": "https://stackoverflow.com/questions/32362919/netbeans-debugger-doesnt-stop-at-breakpoint", "title": "Netbeans: debugger doesn&#39;t stop at breakpoint", "body": "<p>I'm trying to debug a C++ project by setting a couple breakpoints. The build completes successfully, the run is going as expected, but the debugger seems to be just ignoring the breakpoints (I am using the Debug button, not Run). The source code, the compiler and the debugger are located on a remote host.  </p>\n\n<p>Could anyone give me a hint on how I can solve it please?</p>\n\n<p>Netbeans version: 8.0.2, Remote host OS: Centos 6.7, Remote debugger: GDB 7.2-83.el6</p>\n\n<p>I'm also getting the following warning at start of debugging (not sure if it's relevant though):</p>\n\n<blockquote>\n  <p>&amp;\"warning: GDB: Failed to set controlling terminal: Operation not\n  permitted\\n\"</p>\n</blockquote>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "static-members", "scoping"], "comments": [{"owner": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 0, "creation_date": 1441228015, "post_id": 32362904, "comment_id": 52598923, "body": "One of the reasons I hate C++.  In an &quot;ideal world&quot;, if you say &quot;i&quot;, you get &quot;i&quot;.  Instead of the stupid language second-guessing and giving you &quot;C::i&quot; instead.  I believe the workaround - if you want &quot;10&quot; - is to qualify <code>int C::j = ::i + 1;</code>."}, {"owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "reply_to_user": {"reputation": 98775, "user_id": 421195, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9a9793fdeb3b94e185c8c99c0238372f?s=128&d=identicon&r=PG", "display_name": "paulsm4", "link": "https://stackoverflow.com/users/421195/paulsm4"}, "edited": false, "score": 1, "creation_date": 1441228121, "post_id": 32362904, "comment_id": 52598965, "body": "Yea, I knew I could use ::i to be explicit but I did not think I needed to."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 6, "creation_date": 1441228593, "post_id": 32362904, "comment_id": 52599167, "body": "The language isn&#39;t second-guessing anything. This behaviour is the same as the behaviour of defining functions out-of-line. Inside the body of a function of <code>C</code> you would not want to type <code>C::i</code> every time you meant the member, would you?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1441229402, "post_id": 32362904, "comment_id": 52599504, "body": "@Brian Although, that would simplify things a lot if you always had to write <code>this-&gt;member</code>."}, {"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441304202, "post_id": 32362904, "comment_id": 52635919, "body": "@Brian Coming from a Python background: yes. Yes I would. Except <code>C</code> is the name of a class, and what I really want is the name of the instance. So <code>this-&gt;</code> is...almost what I want, except <code>-&gt;</code> is a lot more awkward than <code>.</code>."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1441229755, "post_id": 32362968, "comment_id": 52599689, "body": "Should probably add why <code>C::j</code> necessarily gets initialized after <code>C::i</code>, so it&#39;s definitely 21 and not 1."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 24, "last_activity_date": 1441229222, "last_edit_date": 1441229222, "creation_date": 1441227393, "answer_id": 32362968, "question_id": 32362904, "link": "https://stackoverflow.com/questions/32362904/static-variables-initialization-quiz/32362968#32362968", "title": "Static Variables Initialization Quiz", "body": "<p>[basic.lookup.qual]/3</p>\n\n<blockquote>\n  <p>In a declaration in which the <em>declarator-id</em> is a <em>qualified-id,</em> names used before the <em>qualified-id</em> being declared\n  are looked up in the defining namespace scope; names following the <em>qualified-id</em> are looked up in the scope\n  of the member\u2019s class or namespace.</p>\n</blockquote>\n\n<p>In</p>\n\n<pre><code>int C::j = i + 1;\n</code></pre>\n\n<p>the <em>declarator-id,</em> <em>i.e.,</em> the name of the entity being declared, is <code>C::j</code>, which is a <em>qualified-id</em>. Therefore, the <code>i</code> following it is looked up in the scope of <code>C</code>, and refers to <code>C::i</code>.</p>\n\n<p>Less technically, when you define a static data member, the initializer can be thought of as being in the scope of the class, and will find class members before globals.</p>\n\n<p>This is the same rule that ensures that when a member function is defined out-of-line, names after the name of the function will be looked up in class scope and won't require explicit qualification if they refer to class members. It is more unusual seeing this being applied to definitions of static data members, but it is perfectly consistent.</p>\n"}], "owner": {"reputation": 2181, "user_id": 4027338, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gzGPW.png?s=128&g=1", "display_name": "marsh", "link": "https://stackoverflow.com/users/4027338/marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 4, "accepted_answer_id": 32362968, "answer_count": 1, "score": 16, "last_activity_date": 1452732654, "creation_date": 1441227196, "last_edit_date": 1442491417, "question_id": 32362904, "link": "https://stackoverflow.com/questions/32362904/static-variables-initialization-quiz", "title": "Static Variables Initialization Quiz", "body": "<pre><code>#include &lt;stdio.h&gt;\n\nclass C\n{\n   public:\n          static int i;\n          static int j;\n};\n\nint i = 10;\nint C::i = 20;\nint C::j = i + 1;\n\nint main ()\n{\n    printf(\"%d\", C::j);\n\n    return 0;\n}\n</code></pre>\n\n<blockquote>\n  <p>What is the value of: C::j</p>\n</blockquote>\n\n<p>I was reading a c++ quiz and came across the following question. I thought that the answer is <code>11</code>.</p>\n\n<p><code>int C::j = i + 1;</code> </p>\n\n<p>Since it is accessing the non static <code>i</code> which is 10? So, I thought <code>11</code> should be the answer? </p>\n\n<p>I compiled and ran this code through visual studio and it prints <code>21</code>. Which is confusing to me. Can someone please explain why this is happening? What am I missing?</p>\n"}, {"tags": ["python", "c++", "programming-languages", "shared-ptr"], "answers": [{"comments": [{"owner": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 0, "creation_date": 1441227833, "post_id": 32362993, "comment_id": 52598851, "body": "I understand it is probably the most common bug, but if I am not mistaken cyclic references is not the only common bug caused by shared_ptr. So e.g. if we <i>hypothetically</i> added a periodic shared_ptr cycle detection would that resolve the dangers of shared_ptr that do not happen with Python objects? Or is there more to why they work well in Python. My impression from the question about dangers of shared_ptr and Google&#39;s C++ style guide was that it is not the only one."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "reply_to_user": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 0, "creation_date": 1441228076, "post_id": 32362993, "comment_id": 52598943, "body": "@Kaveh: it would certainly help, there are garbage-collecting smart pointer libraries out there and of course the standard now allows for the C++ implementation to do garbage collection too. But until someone specifies what kind of potential bugs they&#39;re talking about, it&#39;s not really possible to assess how the same issues are addressed in Python. Note that Google&#39;s C++ style guide is <i>astonishingly</i> cautious about using C++ features, and doesn&#39;t reflect typical use of C++."}, {"owner": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 0, "creation_date": 1441229126, "post_id": 32362993, "comment_id": 52599397, "body": "E.g. the issues mentioned in <a href=\"http://stackoverflow.com/q/701456/\">stackoverflow.com/q/701456</a> (Yes, I know the style guide is kind of tailored towards Google&#39;s existing code base. :)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1441232584, "post_id": 32362993, "comment_id": 52600714, "body": "Excellent answer. Essentially, what my experience is that over time, you&#39;d do nearly all of the mistakes above and correct your design to avoid that. For example: making constructors private, and enforcing a friend <code>make</code> method that only gives out <code>shared_ptr</code>. No chance to get a non-refcounted object, and unless you explicitely create a shared pointer for an object you got via <code>get()</code> (which would be an obvious mistake), you can&#39;t have to <code>shared_ptr</code> to the same object. Obviously, you&#39;d only do that for large object that need to be handled around."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1441233628, "post_id": 32362993, "comment_id": 52601044, "body": "@Marcus: personally, there are very few types that I&#39;d force to be heap-allocated, and even so I&#39;d have the factory return <code>unique_ptr</code> and let the user &quot;promote&quot; that to <code>shared_ptr</code> only if the object actually is shared. But that&#39;s details to support more use-cases, I agree that with experience you code defensively against the errors that you know about. If the type has a public constructor and some numpty abuses <code>new</code> instead of using <code>make_shared</code> or <code>make_unique</code> or some other &quot;safe&quot; construction idiom then arguably that&#39;s their fault anyway and should be a reviewer-magnet :-)"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1441236392, "post_id": 32362993, "comment_id": 52601852, "body": "yes, but with a community as diverse like that of GNU Radio, you don&#39;t get a review process, @SteveJessop, you just get a whole ecosystem of out-of-tree modules, that (hopefully) adhere to the coding guidelines the core devs set (primarily by example). Hence, making it hard to make mistakes in non-performance critical parts was crucial to the expansion of the community, IMHO, whereas sticking to raw memory buffers where performance matters made the Software the right choice when shuffling data around that saturates 10 gigabit ethernet lines in hard real time."}], "tags": [], "owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "is_accepted": true, "score": 9, "last_activity_date": 1441232851, "last_edit_date": 1495540420, "creation_date": 1441227515, "answer_id": 32362993, "question_id": 32362884, "link": "https://stackoverflow.com/questions/32362884/c-shared-ptr-vs-python-object/32362993#32362993", "title": "C++ shared_ptr vs. Python object", "body": "<p>\"I know e.g. Python automatically detects cycles\" -- that's what makes them work nicely, at least so far as the \"potential bugs\" relate to memory leaks.</p>\n\n<p>Besides which, C++ programs are more commonly written under tight performance constraints than Python programs (which IMO is a combination of different genuine requirements with some fairly bogus differences in rules-of-thumb, but that's another story). A fairly high proportion of the Python objects I use don't strictly need reference counting, they have exactly one owner and a <code>unique_ptr</code> would be fine (or for that matter a data member of class type). In C++ it's considered (by the people writing the advice you're reading) worth taking the performance advantage and the explicitly simplified design. In Python it's usually not considered a problem, you pay the performance and you keep the flexibility to decide later that it's shared after all without any code change required (other than to take additional references that outlive the original, I mean).</p>\n\n<p>Btw in any language, shared mutable objects have \"potential bugs\" associated with them, if you lose track of what objects will or won't change when you're not looking at them. I don't just mean race conditions: even in a single-threaded program you need to be aware that C++ Predicates shouldn't change anything and that you (often) can't mutate a container while iterating over it. I don't see this as a difference between C++ and Python, though. Rather, to some extent you <em>should</em> be slightly wary of shared objects in Python too, and when you proliferate references to an object at least understand why you're doing it.</p>\n\n<p>So, on to the list of issues in the question you link to:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/701711/13005\">cyclic references</a> -- as mentioned, Python rolls its sleeves up, finds them and frees them. For reasons to do with the design and specific uses of the languages, cycle-breaking garbage collection is rather difficult to implement in C++, although not impossible.</li>\n<li><a href=\"https://stackoverflow.com/a/701585/13005\">creating multiple unrelated <code>shared_ptr</code>s to the same object</a> -- no analog is possible in Python, since the reference-counter isn't open to the user to mess up.</li>\n<li><a href=\"https://stackoverflow.com/a/716182/13005\">Constructing an anonymous temporary shared pointer</a> -- doesn't arise in Python, there's no risk of a memory leak that way in Python since there's no \"gap\" in which the object exists but is not yet subject to collection if it becomes unreferenced.</li>\n<li><a href=\"https://stackoverflow.com/a/701471/13005\">Calling the <code>get()</code> function to get the raw pointer and use it after the pointed-to object goes out of scope</a> -- well, you can mess this up if you're writing Python/C, but not in pure Python.</li>\n<li><a href=\"https://stackoverflow.com/a/701471/13005\">Passing a reference of or a raw pointer to a shared_ptr should be dangerous too, since it won't increment the internal count</a> -- there's no means in Python to add a reference without the language taking care of the refcount.</li>\n<li><a href=\"https://stackoverflow.com/a/701552/13005\">we passed 'this' to some thread workers instead of 'shared_from_this'</a> -- in other words, forgot to create a <code>shared_ptr</code> when needed. Can't do this in Python.</li>\n<li><a href=\"https://stackoverflow.com/a/1243689/13005\">most of the predicates you know and love from <code>&lt;functional&gt;</code> don't play nicely with <code>shared_ptr</code></a> -- Python refcounting is so built in to the runtime (or I suppose to be precise I should say: garbage collection is so built in to the language design) that there are no libraries that fail to cope with it.</li>\n<li><a href=\"https://stackoverflow.com/a/2496569/13005\">Using shared_ptr for really small objects (like char short) could be an overhead</a> -- issue exists in Python, and Python programmers generally don't sweat it. If you need an array of \"primitive type\" then you can use <code>numpy</code> to reduce overhead. Sometimes Python programs run out of memory and you need to do something about it, that's life ;-)</li>\n<li><a href=\"https://stackoverflow.com/a/714430/13005\">Giving out a <code>shared_ptr&lt; T &gt;</code> to this inside a class definition is also dangerous. Use <code>enabled_shared_from_this</code> instead</a> -- it may not be obvious, but this is \"don't create multiple unrelated <code>shared_ptr</code> to the same object\" again.</li>\n<li><a href=\"https://stackoverflow.com/a/716859/13005\">You need to be careful when you use <code>shared_ptr</code> in multithread code</a> -- it's possible to create race conditions in Python too, this is part of \"shared mutable objects are tricksy\".</li>\n</ul>\n\n<p>Most of this is to do with the fact that in C++ you have to explicitly do something to get refcounting, and you don't get it if you don't ask for it. This provides several opportunities for error that Python doesn't make available to the programmer because it just does it for you. If you use <code>shared_ptr</code> correctly then apart from the existence of libraries that don't co-operate with it, none of these problems comes up in C++ either. Those who are cautious of using it for these reasons are basically saying they're afraid they'll use it incorrectly, or at any rate more afraid than that they'll misuse some alternative. Much of C++ programming is trading different potential bugs off against each other until you come up with a design that you consider yourself competent to execute. Furthermore it has \"don't pay for what you don't need\" as a design philosophy. Between these two factors, you don't do <em>anything</em> without a really good explanation, a significant benefit, and a carefully checked design. <code>shared_ptr</code> is no different ;-)</p>\n"}, {"comments": [{"owner": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 0, "creation_date": 1441228506, "post_id": 32363077, "comment_id": 52599131, "body": "Sorry, but I am not interested in arguing whether shared_ptr are discouraged or not, it is a presumption for my question. You can disagree with it but your answer doesn&#39;t really tell me what I want to know. You are rather argueing that the question is wrong and you have a different experience with them. That is not very helpful."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441228533, "post_id": 32363077, "comment_id": 52599142, "body": "<code>shared_ptr</code> is pretty much the last thing you would use though. So it is kind of discouraged. Unless you need shared ownership, of course. But C++ doesn&#39;t force that upon you."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441228744, "post_id": 32363077, "comment_id": 52599238, "body": "@juanchopanza I don&#39;t understand: why that? My experience looks like this: <code>cd gnuradio; git grep shared_ptr|wc</code> yields 630 occurrences."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441228828, "post_id": 32363077, "comment_id": 52599268, "body": "@juanchopanza: I know that anecdotal evidence isn&#39;t an argument; but neither is &quot;this is the last thing you&#39;d use&quot;."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1441228979, "post_id": 32363077, "comment_id": 52599331, "body": "@MarcusM&#252;ller But maybe they really are needed in gnuradio. My badly made point is that you have to think of ownership in C++, and shared ownership is usually not the best solution. For people used to python, Java or other languages, that might be hard to grasp, so they might have a bias towards over-using shared_ptr."}, {"owner": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441229513, "post_id": 32363077, "comment_id": 52599553, "body": "@juanchopanza, would you expand your point to an answer? That might be what I am looking for, i.e. we don&#39;t need to think about ownership in Python but we need to do so in C++."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1441229610, "post_id": 32363077, "comment_id": 52599611, "body": "@juanchopanza ah! ok, yes, I agree. The problem with ownership in GNU Radio is that it&#39;s a very directed-graph oriented application, with lots of buffers that have blocks as in- and outputs; creation of the block however happens from the outside, and it&#39;s often not clear whether a user application wants to hold on to a block, or whether the instance can be deconstructed after execution; shared_ptrs solve this by ref counting and scoping."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 0, "creation_date": 1441229655, "post_id": 32363077, "comment_id": 52599635, "body": "@Kaveh We don&#39;t need to think about ownership in Python <i>only because</i> it is already taken care of by reference counting."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "edited": false, "score": 1, "creation_date": 1441229674, "post_id": 32363077, "comment_id": 52599649, "body": "@Kaveh As Steve Jessop alluded to in his answer, in python most things are shared. So you don&#39;t have to think of it in the sense that you don&#39;t have a choice. But you <i>do</i> have to think of it in the sense that you have to be aware that things you do to an object can affect code a million miles away."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 1, "creation_date": 1441231253, "post_id": 32363077, "comment_id": 52600279, "body": "@Marcus: out of interest, does gnuradio have some general trick to prevent uncollected reference loops? Is it <code>weak_ptr</code> all over, or is there some useful property of the design that ensures your graphs are trees/forests?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 1, "creation_date": 1441232262, "post_id": 32363077, "comment_id": 52600601, "body": "Ah well, our graphs must be cycle free, but not for refcounting purposes, but for processing/causality aspects. The block objects themselves usually don&#39;t hold references to each other, so there&#39;s seldom any chance to build a cycle. In fact, these object communicate only via circular buffers (or what we mmap to fake circ buffers) or via message passing using thread-safe queues (usually, each of the block &quot;runs&quot; in its own thread). It&#39;s job of the scheduler to broker the data in and out. @SteveJessop"}], "tags": [], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 1, "last_activity_date": 1441227870, "creation_date": 1441227870, "answer_id": 32363077, "question_id": 32362884, "link": "https://stackoverflow.com/questions/32362884/c-shared-ptr-vs-python-object/32363077#32363077", "title": "C++ shared_ptr vs. Python object", "body": "<blockquote>\n  <p>AFAIK, the use of shared_ptr is often discouraged because of potential bugs caused by careless usage of them (unless you have a really good explanation for significant benefit and carefully checked design).</p>\n</blockquote>\n\n<p>I wouldn't agree. The tendency goes towards generally using these smart pointers unless you have a very good reasons not to do so.</p>\n\n<blockquote>\n  <p>shared_ptr that makes their usage discouraged in C++ but not causing similar problems in Python?</p>\n</blockquote>\n\n<p>Well, I don't know about your favourite largish signal processing framework ecosystem, but <a href=\"http://gnuradio.org\" rel=\"nofollow\">GNU Radio</a> uses shared_ptrs for all their <em>blocks</em>, which are the core elements of the GNU Radio architecture. In fact, blocks are classes, with <code>private</code> constructors, which are only accessible by a <code>friend</code> <code>make</code> function, which returns a <code>shared_ptr</code>. We haven't had problems with this -- and GNU Radio had good reason to adopt such a model. Now, we don't have a single place where users try to use deallocated block objects, not a single block is leaked. Nice!</p>\n\n<p>Also, we use SWIG and a gateway class for a few C++ types that can't just be represented well as Python types. All this works very well on both sides, C++ and Python. In fact, it works so very well, that we can use Python classes as blocks in the C++ runtime, wrapped in shared_ptr.</p>\n\n<p>Also, we never had performance problems. GNU Radio is a high rate, highly optimized, heavily multithreaded framework.</p>\n"}], "owner": {"reputation": 426, "user_id": 506624, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/eef361d616082b83f1f1a1e74dc572d8?s=128&d=identicon&r=PG", "display_name": "Kaveh", "link": "https://stackoverflow.com/users/506624/kaveh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 0, "accepted_answer_id": 32362993, "answer_count": 2, "score": 3, "last_activity_date": 1441241778, "creation_date": 1441227110, "last_edit_date": 1441241778, "question_id": 32362884, "link": "https://stackoverflow.com/questions/32362884/c-shared-ptr-vs-python-object", "title": "C++ shared_ptr vs. Python object", "body": "<p>AFAIK, the use of shared_ptr is often discouraged because of potential bugs caused by careless usage of them (unless you have a really good explanation for significant benefit and carefully checked design).</p>\n\n<p>On the other hand, Python objects seem to be essentially shared_ptrs (ref_count and garbage collection).</p>\n\n<p>I am wondering what makes them work nicely in Python but potentially dangerous in C++. In other words, what are the differences between Python and C++ in dealing with shared_ptr that makes their usage discouraged in C++ but not causing similar problems in Python?</p>\n\n<p>I know e.g. Python automatically detects cycles between objects which prevents memory leaks that dangling cyclic shared_ptrs can cause in C++.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 14, "creation_date": 1441227081, "post_id": 32362846, "comment_id": 52598492, "body": "have a look at the definition of this site&#39;s name...."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1441227093, "post_id": 32362846, "comment_id": 52598506, "body": "You have used more stack for the recursive calls than you have available to you."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1441227179, "post_id": 32362846, "comment_id": 52598551, "body": "Try running it with the debugger and follow the program step-by-step"}, {"owner": {"reputation": 2102, "user_id": 4261176, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qbFxl4sLRVc/AAAAAAAAAAI/AAAAAAAAEl4/KJa6x8OokiY/photo.jpg?sz=128", "display_name": "Paulo Avelar", "link": "https://stackoverflow.com/users/4261176/paulo-avelar"}, "edited": false, "score": 1, "creation_date": 1441228198, "post_id": 32362846, "comment_id": 52598990, "body": "You <b>missed a semi-colon</b> in your rec(n-1) line."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441227849, "post_id": 32363006, "comment_id": 52598857, "body": "Ths missing semicolon is obviously a copying error, otherwise the code won&#39;t even compile."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441227947, "post_id": 32363006, "comment_id": 52598893, "body": "Each call creates a stack <b>frame</b>, not an entire stack."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441228016, "post_id": 32363006, "comment_id": 52598924, "body": "@DietmarK&#252;hl While there may not be a need to create new stack frames for tail-calls, many implementations will do so anyway. It may depend on compiler options, such as optimization setting."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441228459, "post_id": 32363006, "comment_id": 52599112, "body": "<i>&quot; have the problem that each call creates a new stack.&quot;</i> Huh?? If so, there wouldn&#39;t be a problem."}], "tags": [], "owner": {"reputation": 1, "user_id": 5087004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQ325.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/5087004/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1441227568, "creation_date": 1441227568, "answer_id": 32363006, "question_id": 32362846, "link": "https://stackoverflow.com/questions/32362846/recursive-function-core-dumped/32363006#32363006", "title": "recursive function core dumped", "body": "<p>You missed a semicolon and i guess that you want to print the number n and not\nn times the letter n. Here is your fixed code.</p>\n\n<pre><code>void rec(int n){\n    if(n&gt;0){\n        rec(n-1);\n        printf(\"%d\\n\",n);\n    }\n}\n</code></pre>\n\n<p>To get back to your problem. Recursive function have the problem that each call creates a new stack. You can imagine that with each call you go deeper and deeper and are only climbing back up at the very end.\nThe number of stacks is limited, so the program will eventually crash if you increase the number of recursive calls.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 5294255, "user_type": "registered", "profile_image": "https://graph.facebook.com/686889531446201/picture?type=large", "display_name": "sunil", "link": "https://stackoverflow.com/users/5294255/sunil"}, "edited": false, "score": 0, "creation_date": 1441229185, "post_id": 32363291, "comment_id": 52599420, "body": "thanks for info.. can we increase the stack size for GCC compiler ?"}, {"owner": {"reputation": 456, "user_id": 5195032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bdbf3441f787e76b72f80b6609e475?s=128&d=identicon&r=PG", "display_name": "Denis Babarykin", "link": "https://stackoverflow.com/users/5195032/denis-babarykin"}, "reply_to_user": {"reputation": 61, "user_id": 5294255, "user_type": "registered", "profile_image": "https://graph.facebook.com/686889531446201/picture?type=large", "display_name": "sunil", "link": "https://stackoverflow.com/users/5294255/sunil"}, "edited": false, "score": 0, "creation_date": 1441229415, "post_id": 32363291, "comment_id": 52599509, "body": "Yes of course. But you must use special compiler&#39;s option, for example: <code>gcc -Wl,--stack,16777216 -o file.exe file.c</code> This option increases stack size for current program to 16 MiB."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1441230761, "post_id": 32363291, "comment_id": 52600097, "body": "pthread utilities (of posix) can report and modify the stack size on linux."}], "tags": [], "owner": {"reputation": 456, "user_id": 5195032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8bdbf3441f787e76b72f80b6609e475?s=128&d=identicon&r=PG", "display_name": "Denis Babarykin", "link": "https://stackoverflow.com/users/5195032/denis-babarykin"}, "is_accepted": true, "score": 2, "last_activity_date": 1441228786, "creation_date": 1441228786, "answer_id": 32363291, "question_id": 32362846, "link": "https://stackoverflow.com/questions/32362846/recursive-function-core-dumped/32363291#32363291", "title": "recursive function core dumped", "body": "<p>For programs compiled with GCC with default settings stack size is about 2 megabytes. So you are limited in recursive calls by your stack size, because every not-tail recursion function call reduces free stack memory. Thats why you will get stack overflow when <code>n</code> is big number.</p>\n"}], "owner": {"reputation": 61, "user_id": 5294255, "user_type": "registered", "profile_image": "https://graph.facebook.com/686889531446201/picture?type=large", "display_name": "sunil", "link": "https://stackoverflow.com/users/5294255/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "closed_date": 1441249133, "accepted_answer_id": 32363291, "answer_count": 2, "score": 0, "last_activity_date": 1441228786, "creation_date": 1441226936, "last_edit_date": 1441227915, "question_id": 32362846, "link": "https://stackoverflow.com/questions/32362846/recursive-function-core-dumped", "closed_reason": "Not suitable for this site", "title": "recursive function core dumped", "body": "<p>I tried to compile the following program </p>\n\n<pre><code>void rec(int n)\n{\n    if(n&gt;0)\n   {\n        rec(n-1)\n        print (\"n\");\n\n   }\n}\n</code></pre>\n\n<p>Here <code>n</code> value is a big no. like <code>1000000</code>.</p>\n\n<p>o/p is : <code>segmentation fault (core dumped)</code></p>\n\n<p>Can anyone explain what exactly happens here ?\nThanks.</p>\n"}, {"tags": ["c++", "inheritance", "abstract", "copy-and-swap"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441226837, "post_id": 32362764, "comment_id": 52598357, "body": "Note: If you define a swap function for your class, you should declare it as an overload in the namespace in which your class is declared, not a specialization of <code>std::swap</code>."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1441227230, "post_id": 32362764, "comment_id": 52598572, "body": "See <a href=\"http://stackoverflow.com/questions/11562/how-to-overload-stdswap\">stackoverflow.com/questions/11562/how-to-overload-stdswap</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1441228307, "post_id": 32362764, "comment_id": 52599035, "body": "You are right in that private datamembers of a class should only be accessed by a swap that is allowed to access those data members..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5294035"}, "edited": false, "score": 0, "creation_date": 1441230968, "post_id": 32363389, "comment_id": 52600165, "body": "Obviously you are right about the non-member friend, thanks. However, think about another derived class, holding a int instead of a bool, and the ID somehow mapped to a database table holding generic values, it would certainly <i>not</i> be reasonable to be able to modify the Base information without information about the derived class."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441231343, "post_id": 32363389, "comment_id": 52600314, "body": "@Vallant I don&#39;t understand what you&#39;re objecting to."}, {"owner": {"reputation": 1071, "user_id": 987623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6400df19f24ef1a0b0f769b071a023f5?s=128&d=identicon&r=PG", "display_name": "Fred Schoen", "link": "https://stackoverflow.com/users/987623/fred-schoen"}, "edited": false, "score": 0, "creation_date": 1460449274, "post_id": 32363389, "comment_id": 60734283, "body": "Useful to note that <code>static_cast</code> only works in the free standing swap function and not in <code>Derived::swap(Derived&amp; rhs)</code>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1441229190, "last_edit_date": 1495540238, "creation_date": 1441229190, "answer_id": 32363389, "question_id": 32362764, "link": "https://stackoverflow.com/questions/32362764/swap-idiom-of-abstract-class-with-private-data-members/32363389#32363389", "title": "Swap-Idiom of abstract class with private data members", "body": "<blockquote>\n  <p>The copy constructor and assignment operator of the base class are deleted, as it makes no sense.</p>\n</blockquote>\n\n<p>Actually, this is terrible. Now you made <code>Derived</code> uncopyable! Why? There is no reason to add this restriction. The default copy constructor and assignment operator of <code>Base</code> are perfectly reasonable in the context of copying the most-base class of the hierarchy.</p>\n\n<p>Once you undo that, there's no need to do anything else as <code>std::swap(derived1, derived2)</code> would already do the right thing. The default move construction/operation is correct. It's always good to let the compiler do things for you.</p>\n\n<p>But if you want to override <code>swap</code> anyway, the correct way to do that would be as a <a href=\"https://stackoverflow.com/a/2684544/2069064\">non-member friend</a>:</p>\n\n<pre><code>class Base { \n   ...\n   friend void swap(Base&amp; lhs, Base&amp; rhs) {\n       using std::swap;\n       swap(lhs.ID_, rhs.ID_);\n   }\n};\n\nclass Derived : public Base {\n   ...\n   friend void swap(Derived&amp; lhs, Derived&amp; rhs) {\n       using std::swap;\n       swap(static_cast&lt;Base&amp;&gt;(lhs), static_cast&lt;Base&amp;&gt;(rhs));\n       swap(lhs.Value_, rhs.Value_);\n   }\n};\n</code></pre>\n\n<p>Also, your <code>Derived</code> copy constructor makes no sense. Remove it as per the first paragraph of my answer. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5294035"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441229190, "creation_date": 1441226655, "last_edit_date": 1441228776, "question_id": 32362764, "link": "https://stackoverflow.com/questions/32362764/swap-idiom-of-abstract-class-with-private-data-members", "title": "Swap-Idiom of abstract class with private data members", "body": "<p>Assume we have this two classes, with implemented swap-idioms. The copy constructor and assignment operator of the base class are deleted, as it makes no sense. However the swap-method is implemented, as it holds a member.</p>\n\n<pre><code>namespace std\n{\n    template&lt;&gt;\n    void swap&lt;Base&gt;(Base&amp; a, Base&amp; b)\n    {\n        a.swap(b);\n    }\n\n    template&lt;&gt;\n    void swap&lt;Derived&gt;(Derived&amp; a, Derived&amp; b)\n    {\n        a.swap(b);\n    }\n}\n\nclass Base\n{\npublic:\n    Base(int ID) : ID_(ID) {}\n    virtual std::string getString()=0;\n\n    Base(const Base&amp;)=delete;\n    operator=(const Base&amp;)=delete;\n\n    void swap(Base&amp; rhs)\n    {\n        std:swap(ID_, rhs.ID_);\n    }\nprivate:\n    int ID_;\n}\n\nclass Derived : public Base\n{\npublic:\n    Derived(int ID, bool Value) : Base(ID), Value_(Value) {}\n    virtual ~Derived() {}\n    Derived(Derived&amp; rhs)\n    {\n        std::swap(*this, rhs);\n    }\n\n    virtual std::string getString() {return Value_ ? \"True\" : \"False\"}\n    void swap(Derived&amp; lhs, Derived&amp; rhs)\n    {\n        std::swap(static_cast&lt;Base&amp;&gt;(lhs), static_cast&lt;Base&amp;&gt;(rhs);\n        std::swap(lhs.Value_, rhs.Value_);\n    }\nprivate:\n    bool Value_;\n}\n</code></pre>\n\n<p>As seen in many examples, this would be the standard way to do it I suppose.\nHowever, I see a problem with the public Base::swap, as it should not be possible to swap only the abstract base-class!</p>\n\n<p>Wouldn't it be better to remove the template for the Base class and make the Base::swap Method protected:</p>\n\n<pre><code>class Base\n{\n    ...\nprotected:\n    void swap(Base&amp; rhs, Base &amp;lhs);\n}\n\nclass Derived : public Base\n{\n    ...\npublic:\n    void swap(Derived&amp; lhs, Derived&amp; rhs)\n    {\n        Base::swap(static_cast&lt;Base&amp;&gt;(lhs), static_cast&lt;Base&amp;&gt;(rhs);\n        std::swap(lhs.Value_, rhs.Value_);\n    }\n}\n</code></pre>\n\n<p>Assuming, there is another class derived from base, with the first implementation it would be possible to swap the ID, however the data members of the derived objects would stay the same. </p>\n\n<p>So, am I right thinking that swapping of a abstract class should not be possible from outside?</p>\n"}, {"tags": ["c++", "windows", "winapi", "direct3d"], "comments": [{"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1441226502, "post_id": 32362672, "comment_id": 52598175, "body": "So you already know &quot;how the experts do it&quot;. What are you trying to ask?"}, {"owner": {"reputation": 6353, "user_id": 1938435, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/01f0dc6369a8377cb59c6fbfec03176c?s=128&d=identicon&r=PG&f=1", "display_name": "PurkkaKoodari", "link": "https://stackoverflow.com/users/1938435/purkkakoodari"}, "edited": false, "score": 0, "creation_date": 1441226555, "post_id": 32362672, "comment_id": 52598209, "body": "Basically, the idea is to draw your own titlebar on a borderless window, then listen for mouse events and move/minimize/close when an appropriate event happens. This means you&#39;d just use the bare window type (no title bar/borders)."}, {"owner": {"reputation": 13, "user_id": 3933530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7e905954b100454c808146e03eafe?s=128&d=identicon&r=PG&f=1", "display_name": "Medran", "link": "https://stackoverflow.com/users/3933530/medran"}, "edited": false, "score": 0, "creation_date": 1441227497, "post_id": 32362672, "comment_id": 52598689, "body": "The question is asking if there is a way to do it using the built in windows titlebar..  ie to have a titlebar but with no border outside the client area."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1441228839, "post_id": 32362672, "comment_id": 52599275, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632600.aspx\" rel=\"nofollow noreferrer\">Window Styles</a>: <i>&quot;<b>WS_CAPTION</b>: The window has a title bar (includes the <b>WS_BORDER</b> style).&quot;</i> In other words, you cannot have a title bar without having a border as well. You&#39;ll have to implement your own title bar."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1441234707, "post_id": 32362672, "comment_id": 52601375, "body": "Is omitting <code>WS_THICKFRAME</code> insufficient? Note that doing so makes your window nonresizeable."}, {"owner": {"reputation": 13, "user_id": 3933530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7e905954b100454c808146e03eafe?s=128&d=identicon&r=PG&f=1", "display_name": "Medran", "link": "https://stackoverflow.com/users/3933530/medran"}, "edited": false, "score": 0, "creation_date": 1441306417, "post_id": 32362672, "comment_id": 52637243, "body": "andlabs - omitting ws_thickframe is the look I want, but with a caption still."}, {"owner": {"reputation": 13, "user_id": 3933530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7e905954b100454c808146e03eafe?s=128&d=identicon&r=PG&f=1", "display_name": "Medran", "link": "https://stackoverflow.com/users/3933530/medran"}, "edited": false, "score": 0, "creation_date": 1441306673, "post_id": 32362672, "comment_id": 52637391, "body": "llnspectable - even though the docs say that ws_caption forces ws_border, the weird thing is if you specificy only ws_border the window looks the way I would expect with a thin black line border. if you say only ws_thickframe looks exactly like the ws_caption border, it almost feels like an error in the docs."}, {"owner": {"reputation": 13, "user_id": 3933530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7e905954b100454c808146e03eafe?s=128&d=identicon&r=PG&f=1", "display_name": "Medran", "link": "https://stackoverflow.com/users/3933530/medran"}, "edited": false, "score": 0, "creation_date": 1441307459, "post_id": 32362672, "comment_id": 52637847, "body": "SetWindowRgn seems to do what I want, as in it clips the window to whatever area I want preventing the borders from drawing, however it corrupts the window style so the title bar looks like im back in windows 98."}], "answers": [{"tags": [], "owner": {"reputation": 11759, "user_id": 1451110, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8db1beb1451956240960e2254d4a3f64?s=128&d=identicon&r=PG", "display_name": "CodeAngry", "link": "https://stackoverflow.com/users/1451110/codeangry"}, "is_accepted": true, "score": 2, "last_activity_date": 1441272943, "creation_date": 1441272943, "answer_id": 32372000, "question_id": 32362672, "link": "https://stackoverflow.com/questions/32362672/how-to-create-a-borderless-window-with-titlebar-in-windows-c/32372000#32372000", "title": "How to create a borderless window with titlebar in windows c++", "body": "<p><strong>You can't remove the border and keep the titlebar AFAIK.</strong></p>\n\n<p>You can reimplement the titlebar by using <code>WM_NCHITTEST</code> but you still need to draw it yourself which would not be a bad idea if you want your D3D app to look its best.</p>\n\n<p>Visual Studio, last time I checked, achieves its border with transparent layered windows standing behind the primary one. They are the shadows you see.</p>\n"}], "owner": {"reputation": 13, "user_id": 3933530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5e7e905954b100454c808146e03eafe?s=128&d=identicon&r=PG&f=1", "display_name": "Medran", "link": "https://stackoverflow.com/users/3933530/medran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1150, "favorite_count": 0, "accepted_answer_id": 32372000, "answer_count": 1, "score": 1, "last_activity_date": 1441272943, "creation_date": 1441226387, "last_edit_date": 1441227354, "question_id": 32362672, "link": "https://stackoverflow.com/questions/32362672/how-to-create-a-borderless-window-with-titlebar-in-windows-c", "title": "How to create a borderless window with titlebar in windows c++", "body": "<p>I am trying to create a Direct3D app that is operating in windowed mode with a title bar and minimize/quit button. However, I'd really like to be able to axe the border around the window.</p>\n\n<p>I am looking to do this because it looks pretty cheesy on dual monitors when the app is filling the primary monitor horizontally (with room to move the app vertically), but its window border overflows onto the secondary screen.  I've tried a bunch of combinations of <code>setwindowlong</code> with <code>GWL_STYLE</code> and <code>GWL_EXSTYLE</code>, but can't seem to make headway unless I disable the title bar.</p>\n\n<p>I've seen a bunch of apps that are borderless however they seem to emulate the title bar rather than using the built in one provided by Microsoft.</p>\n\n<p>Thanks for any suggestions.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 3, "creation_date": 1441226011, "post_id": 32362542, "comment_id": 52597897, "body": "<code>sizeof(str)</code> is the size of its pointer. Use <code>strlen(str)+1</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441226168, "post_id": 32362542, "comment_id": 52597991, "body": "in Windows land you have a whole stack of wide char copy routines. <a href=\"https://msdn.microsoft.com/en-us/library/td1esda9.aspx\" rel=\"nofollow noreferrer\">Take a look</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441226271, "post_id": 32362542, "comment_id": 52598053, "body": "Following @DietmarK&#252;hl you have also discarded the pointer returned by <code>new</code> and so you have  a memory leak, because you can&#39;t now <code>delete</code> it."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441226324, "post_id": 32362542, "comment_id": 52598078, "body": "More important, Why <code>new</code> it in the first place?"}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "reply_to_user": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441226337, "post_id": 32362542, "comment_id": 52598088, "body": "@WeatherVane I am deleting the pointer at the end of the program, this is just a snippet"}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1441226374, "post_id": 32362542, "comment_id": 52598109, "body": "@DietmarK&#252;hl will work if I change sizeof() to (_tcslen(str)+1)*sizeof(TCHAR)"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 2, "creation_date": 1441226381, "post_id": 32362542, "comment_id": 52598114, "body": "You cant, you replaced it with <code>str2 = _T(&quot;ok&quot;);</code> so it&#39;s gone."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441226393, "post_id": 32362542, "comment_id": 52598119, "body": "Then you&#39;re deleting the wrong one and trying to delete a const. That&#39;s not going to go over well at runtime."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1441226446, "post_id": 32362542, "comment_id": 52598146, "body": "So do I get this isn&#39;t the code you are using?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441226463, "post_id": 32362542, "comment_id": 52598153, "body": "Just go with <code>TCHAR str2[23]</code> save you a lot of trouble."}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1441226556, "post_id": 32362542, "comment_id": 52598210, "body": "@PaulMcKenzie well-taken point"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1441226590, "post_id": 32362542, "comment_id": 52598223, "body": "@Ditmar: I suspect the OP wants to &#39;set&#39; the new-ed string to &quot;ok&quot;..."}, {"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1441226685, "post_id": 32362542, "comment_id": 52598282, "body": "@Tive you are right!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441226783, "post_id": 32362542, "comment_id": 52598327, "body": "@Samer No, the code is not OK. Several flaws and errors as mentioned."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1441227279, "post_id": 32362542, "comment_id": 52598592, "body": "@Samer - The <code>new</code> returns a pointer <i>value</i>.  Note the emphasis on <i>value</i>.  So when you call <code>delete []</code>, you must use the same <i>value</i> that was returned, not necessarily the same pointer.  So if <code>new</code> returned (for arguments sake) <code>0x234B3210</code>, then by hook or by crook, <code>delete</code> better be getting <code>0x234B3210</code>.  So saying you&#39;re deleting the same pointer at the end really means nothing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1441227356, "post_id": 32362542, "comment_id": 52598619, "body": "@samer: I think you really need to realize what you&#39;re doing: both str and str2 are already pointers, so you don&#39;t have to do an address-of against them in the memcpy call.  Second, to set individual elements of str2, for example tto o, k, and char-null, you&#39;d do: str2[0] = _T(&#39;O&#39;); str2[1]=_T(&#39;k&#39;); str2[2] = _T(&#39;\\0&#39;); ...  Also when using memcpy you need to be sure that the source and destination addresses don&#39;t overlap..."}, {"owner": {"reputation": 3299, "user_id": 3059438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eD9iZ.png?s=128&g=1", "display_name": "pasztorpisti", "link": "https://stackoverflow.com/users/3059438/pasztorpisti"}, "edited": false, "score": 0, "creation_date": 1441227916, "post_id": 32362542, "comment_id": 52598882, "body": "In some cases you might want to use strdup/wcsdup/tcsdup: <a href=\"https://msdn.microsoft.com/en-us/library/y471khhc.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/y471khhc.aspx</a>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1441228323, "post_id": 32362542, "comment_id": 52599048, "body": "Use <code>std::string</code>, std::wstring<code>, or </code>std::basic_string&lt;&gt;` for strings and <code>std::vector</code> if it&#39;s just a raw buffer. No need to use raw pointers, naked arrays, <code>new</code> or `delete."}], "answers": [{"comments": [{"owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 0, "creation_date": 1441227727, "post_id": 32362881, "comment_id": 52598800, "body": "Thanks @Michael, is it safe to delete str2 afterwards?"}, {"owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "reply_to_user": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "edited": false, "score": 2, "creation_date": 1441228336, "post_id": 32362881, "comment_id": 52599056, "body": "@Samer: <code>_tcscpy()</code> is just <code>strcpy()</code> or <code>wcscpy()</code> depending on what a <code>TCHAR</code> is. So it has the same effect on object lifetime management as those functions would (that is: no effect).."}], "tags": [], "owner": {"reputation": 310760, "user_id": 12711, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c330bdee507c95c603a93ca91d9145a9?s=128&d=identicon&r=PG", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/12711/michael-burr"}, "is_accepted": false, "score": 4, "last_activity_date": 1441227434, "last_edit_date": 1441227434, "creation_date": 1441227103, "answer_id": 32362881, "question_id": 32362542, "link": "https://stackoverflow.com/questions/32362542/best-way-to-copy-tchar-pointer-to-tchar-pointer/32362881#32362881", "title": "best way to copy TCHAR pointer to TCHAR pointer", "body": "<p>If you want to use <code>TCHAR</code> (which I'm not sure I'd recommend), look in <code>tchar.h</code> for the macros that give you <code>TCHAR</code> equivalents for all the <code>strxxx()</code> functions.  For example, to copy <code>TCHAR</code>-based strings you can use <code>_tcscpy()</code>.</p>\n\n<p>Actually, there are macros for <code>TCHAR</code> variants for many of the basic runtime library functions that take a string or char argument, not just the <code>strxxx()</code> set of functions.</p>\n\n<p>So your example could boil down to:</p>\n\n<pre><code>TCHAR *str = _T(\"Hello\");\nTCHAR* str2 = new TCHAR[23];   // let us say this is big enough \n_tcscpy( str2, str);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 2, "last_activity_date": 1441230464, "last_edit_date": 1441230464, "creation_date": 1441228290, "answer_id": 32363185, "question_id": 32362542, "link": "https://stackoverflow.com/questions/32362542/best-way-to-copy-tchar-pointer-to-tchar-pointer/32363185#32363185", "title": "best way to copy TCHAR pointer to TCHAR pointer", "body": "<pre><code>TCHAR *str = _T(\"Hello\");\n</code></pre>\n\n<p>OK.</p>\n\n<pre><code>TCHAR* str2;\n</code></pre>\n\n<p>OK.</p>\n\n<pre><code>str2 = new TCHAR[23];   // let us say this is big enough \n</code></pre>\n\n<p>Ok, but must be paired with <code>delete[]</code>.</p>\n\n<pre><code>str2 = _T(\"ok\");\n</code></pre>\n\n<p>Not Ok. Overwrite of pointer to <code>new TCHAR[23];</code> That memory is for all intents and purposes gone and unrecoverable.</p>\n\n<pre><code>memcpy( &amp;str2, &amp;str, (_tcslen(str)+1)*sizeof(TCHAR));\n</code></pre>\n\n<p>Not OK. str and str2 are already pointers, so taking their addresses with <code>&amp;</code> points you at the wrong spot in memory. </p>\n\n<p>My cut of the above:</p>\n\n<pre><code>#include \"windows.h\"\n#include \"TCHAR.H\" // for _tcscpy_s\n\nint main()\n{\n    TCHAR * str = _T(\"Hello\");\n    TCHAR * str2 = new TCHAR[23];\n    _tcscpy_s(str2, 23, _T(\"OK\")); // store OK\n\n    _tcscpy_s(str2, 23, str); // Copy str   \n    delete[] str2;\n}\n</code></pre>\n\n<p>Which is pretty much the same as what Michael Burr suggested. The only significant differences are preserving the OK and <code>_tcscpy_s</code> which limits the copy to 23 characters by terminating the program on overrun if I remember correctly. <a href=\"https://msdn.microsoft.com/en-us/library/5dae5d43.aspx\" rel=\"nofollow\">wcsncpy_s</a> will allow truncation if termination is not your answer. Don't know if there is an _t version of it.</p>\n\n<p>The C++ way would be </p>\n\n<pre><code>std::wstring str(L\"Hello\");\nstd::wstring str2(L\"OK\");\nstr2 = str; // for the copy.\nstr2.c_str() // to get a c style string \n</code></pre>\n\n<p>Edit: Need to make an extra note here. The C++ way isn't quite the same as TCHAR functions. TCHAR transparently switches between character types depending on the options set during compilation so that the same source could be built for systems with or without wide character support. wstring is strictly wide. The L-prefixed strings are strictly wide. You can do the same thing with macros wrapping all of the strings and streams, but it won't be trivial and eeewwwwww.... Macros... </p>\n"}], "owner": {"reputation": 1735, "user_id": 1707083, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/08d10a00a81504b18d3d3723a4b7c252?s=128&d=identicon&r=PG", "display_name": "Samer", "link": "https://stackoverflow.com/users/1707083/samer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2574, "favorite_count": 0, "accepted_answer_id": 32363185, "answer_count": 2, "score": -1, "last_activity_date": 1441230464, "creation_date": 1441225864, "last_edit_date": 1441228224, "question_id": 32362542, "link": "https://stackoverflow.com/questions/32362542/best-way-to-copy-tchar-pointer-to-tchar-pointer", "title": "best way to copy TCHAR pointer to TCHAR pointer", "body": "<p>I dont know why this seems to be more complicated than what it is! I simply want to replace the contents of <code>str2</code> with the contents of <code>str</code>, they are both are strings. This seems to work but I am not sure this is the right way of doing it...I am using Visual Studio 2008.</p>\n\n<p>EDIT: I have to use <code>new</code> for <code>str2</code></p>\n\n<pre><code>TCHAR *str = _T(\"Hello\");\nTCHAR* str2;\nstr2 = new TCHAR[23];   // let us say this is big enough \nstr2 = _T(\"ok\");\nmemcpy( &amp;str2, &amp;str, (_tcslen(str)+1)*sizeof(TCHAR));\n</code></pre>\n\n<p>EDIT2: I tried this as Michael suggested but I got <code>access violation error</code> :(</p>\n\n<pre><code>TCHAR *str = _T(\"Hello\");\n    TCHAR* str2;\n    str2 = new TCHAR[23];   // let us say this is big enough \n    str2 = _T(\"ok\");\n    _tcscpy( str2, str);\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 4, "creation_date": 1441226288, "post_id": 32362540, "comment_id": 52598057, "body": "Using a macro than typing the code doesn&#39;t slow down your program. Because your preprocessor will replace your macro with it&#39;s contents. The resulting code should be the same."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441229809, "post_id": 32362540, "comment_id": 52599720, "body": "The macro may waste more time during debugging and maintenance.  It is a <i>false function</i>; it looks like a function but is a macro.  I strongly recommend banning this kind of practice.  Are you really saving a great amount of type (hint: copy and paste is a better technique), or take a keyboarding class."}, {"owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "edited": false, "score": 0, "creation_date": 1441234527, "post_id": 32362540, "comment_id": 52601324, "body": "What you are doing is one of those things that look like a great idea, but are not. In six months, %d in a format string will look absolutely fine to you."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441229603, "post_id": 32362703, "comment_id": 52599607, "body": "The macro only saves typing time; which could be wasted by a trip to the coffee machine or restroom.  Take a keyboarding class."}], "tags": [], "owner": {"reputation": 51, "user_id": 5294284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be9008f8d4dc9b75b240701ca0ef633d?s=128&d=identicon&r=PG&f=1", "display_name": "walwart", "link": "https://stackoverflow.com/users/5294284/walwart"}, "is_accepted": false, "score": 5, "last_activity_date": 1441229607, "last_edit_date": 1441229607, "creation_date": 1441226466, "answer_id": 32362703, "question_id": 32362540, "link": "https://stackoverflow.com/questions/32362540/using-define-for-printf-does-it-effect-on-speed/32362703#32362703", "title": "Using #define for printf, does it effect on speed", "body": "<p>No this will not effect the speed. The macro is expanded during pre-processing so that in every instance that you use <code>printInt(myInt)</code> what is actually passed to the compiler will be <code>printf(\"%d\", myInt)</code>. So I think the binary output would be identical either way.</p>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 5223868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8667384f7b81ea5c4933bb1af91000b7?s=128&d=identicon&r=PG&f=1", "display_name": "splotz90", "link": "https://stackoverflow.com/users/5223868/splotz90"}, "is_accepted": false, "score": 3, "last_activity_date": 1441230418, "last_edit_date": 1441230418, "creation_date": 1441227284, "answer_id": 32362931, "question_id": 32362540, "link": "https://stackoverflow.com/questions/32362540/using-define-for-printf-does-it-effect-on-speed/32362931#32362931", "title": "Using #define for printf, does it effect on speed", "body": "<p>No, it doesn't affect the speed of your program.</p>\n\n<p>The <code>#define</code> instructions are processed by the preprocessor before your program is compiled.</p>\n\n<p>For example the call </p>\n\n<pre><code>printInt(var);\n</code></pre>\n\n<p>is replaced with</p>\n\n<pre><code>printf (\"%d\",var);\n</code></pre>\n\n<p>by the preprocessor.</p>\n\n<p>Therefore the compiler can't determine if a <code>#define</code> was used or not. In both cases it leads to the <strong>same</strong> code (and the same program). Thats the reason why it isn't possible that both programs differ in their speed.</p>\n\n<hr>\n\n<p><strong>EDIT:</strong> If you use a lot of <code>#defines</code> in your program, it is possible that the speed of the proprocessing step decreases. But in most cases this should be no problem.</p>\n"}], "owner": {"reputation": 3, "user_id": 5128714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61581ccab2dff641b883d2510b97ae5d?s=128&d=identicon&r=PG", "display_name": "Kartik Sethi", "link": "https://stackoverflow.com/users/5128714/kartik-sethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1441230418, "creation_date": 1441225856, "last_edit_date": 1441229582, "question_id": 32362540, "link": "https://stackoverflow.com/questions/32362540/using-define-for-printf-does-it-effect-on-speed", "title": "Using #define for printf, does it effect on speed", "body": "<p>I am using </p>\n\n<pre><code>#define printInt(x)  printf (\"%d\",x)\n</code></pre>\n\n<p>In <code>main()</code></p>\n\n<p>I can use it like this:</p>\n\n<pre><code>int var=10;\nprintInt (var);\n</code></pre>\n\n<p>Which is easier to use than typing </p>\n\n<pre><code>printf (\"%d\",var);\n</code></pre>\n\n<p>Will using my own <code>#define</code> for printing an <code>int</code>, <code>float</code> etc make my program slower?</p>\n"}, {"tags": ["c++", "boost", "udp", "buffer", "boost-asio"], "comments": [{"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1441226624, "post_id": 32362454, "comment_id": 52598248, "body": "You have to store and order your packets before you process them. For example you could add them to a list and then process this list from the back."}, {"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "reply_to_user": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1441226686, "post_id": 32362454, "comment_id": 52598283, "body": "Thanks user743414. I currently do it via the buffer. What I don&#39;t want is to process &quot;old&quot; packets, I just want to process as many packets I can, discarding the ones in the middle."}, {"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1441226933, "post_id": 32362454, "comment_id": 52598412, "body": "Define &quot;old&quot; packet? Are you using a timestamp or a simple up counting id? When you just want to process the last packet, then you just have to store the last received packet."}, {"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "reply_to_user": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1441232105, "post_id": 32362454, "comment_id": 52600562, "body": "Nope, nothing of it, they are just commands that overwrite themselves. I need to process only the last one, because otherwise I&#39;d create a delay. I don&#39;t need to process the packets in the middle. And I can&#39;t specify a buffer&#39;s minimum size as packets have different sizes"}, {"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1441239559, "post_id": 32362454, "comment_id": 52602666, "body": "Is the processing of packet 1 on the sender or receiver?"}, {"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441272484, "post_id": 32362454, "comment_id": 52615015, "body": "The processing is on the receiver."}], "answers": [{"comments": [{"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441272460, "post_id": 32365635, "comment_id": 52615005, "body": "Thanks David. Unfortunately the datagram size varies from command to command, so I can&#39;t make a size-tailored buffer. What I may do though is to asynchronously listen for UDP datagrams, parse the received bytes (buffer is big enought to get the heavier datagram) and eventually receive synchronously, non-blocking till I have no bytes to read anymore... would this work?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441297713, "post_id": 32365635, "comment_id": 52632295, "body": "@Jack Don&#39;t make a size-tailored buffer for something that&#39;s only going to be around for a short amount of time. Just use a fixed sized buffer. If it happens later that you need to keep the object for a longer period of time, copy it into a right-sized buffer."}, {"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441300285, "post_id": 32365635, "comment_id": 52633790, "body": "Hello David. I think I misunderstand your first point then: &quot;Use a buffer that holds only a single datagram&quot; - what did you mean?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441301317, "post_id": 32365635, "comment_id": 52634350, "body": "@Jack I mean one buffer that holds one datagram."}, {"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441891454, "post_id": 32365635, "comment_id": 52865466, "body": "I&#39;ve resolved making a mix of async / sync: at the first async message received, process it and read any data received in the mean while setting the socket as non-blocking, synchronously reading the data until the buffer contains data, then set the socket back to blocking and call the async listen method again."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1441243723, "creation_date": 1441243723, "answer_id": 32365635, "question_id": 32362454, "link": "https://stackoverflow.com/questions/32362454/boost-asio-udp-socket-sink-all-the-packets/32365635#32365635", "title": "Boost.ASIO UDP socket: sink all the packets", "body": "<ol>\n<li><p>Use a buffer that holds only a single datagram.</p></li>\n<li><p>Keep reading into the buffer until there are no more datagrams to read.</p></li>\n<li><p>If you read at least one packet, process the datagram in the buffer.</p></li>\n<li><p>Go to step 2.</p></li>\n</ol>\n\n<p>Note that UDP is a datagram protocol, not a packet protocol. A single UDP datagram can be split over multiple packets.</p>\n"}, {"comments": [{"owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441544897, "post_id": 32406269, "comment_id": 52713127, "body": "Hello PSIAlt, thanks for the answer. I saw the available method and I was thinking about discarding the buffer, but I wasn&#39;t able to do it. How&#39;d you discard the buffer?"}, {"owner": {"reputation": 7042, "user_id": 1671032, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FfJD4.jpg?s=128&g=1", "display_name": "PSIAlt", "link": "https://stackoverflow.com/users/1671032/psialt"}, "reply_to_user": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "edited": false, "score": 0, "creation_date": 1441556951, "post_id": 32406269, "comment_id": 52716740, "body": "@Jack its not possible, sockets API does not have this function. You only can read the data and do nothing."}], "tags": [], "owner": {"reputation": 7042, "user_id": 1671032, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FfJD4.jpg?s=128&g=1", "display_name": "PSIAlt", "link": "https://stackoverflow.com/users/1671032/psialt"}, "is_accepted": false, "score": 0, "last_activity_date": 1441399273, "creation_date": 1441399273, "answer_id": 32406269, "question_id": 32362454, "link": "https://stackoverflow.com/questions/32362454/boost-asio-udp-socket-sink-all-the-packets/32406269#32406269", "title": "Boost.ASIO UDP socket: sink all the packets", "body": "<p>I think it can be done quite simple:</p>\n\n<ol>\n<li><code>async_receive_from</code> until got a packet.</li>\n<li>Check <code>available</code> method to determine is more data in the socket.</li>\n<li>If we have more data, discard buffer and goto 1; else process packet</li>\n</ol>\n"}], "owner": {"reputation": 1469, "user_id": 2579017, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/851f84bb6966fc08e782689266feeb9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2579017/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 32365635, "answer_count": 2, "score": 0, "last_activity_date": 1441399273, "creation_date": 1441225460, "last_edit_date": 1441323509, "question_id": 32362454, "link": "https://stackoverflow.com/questions/32362454/boost-asio-udp-socket-sink-all-the-packets", "title": "Boost.ASIO UDP socket: sink all the packets", "body": "<p>I'm using the boost::asio::ip::udp::socket to receive UDP packets via socket's async_receive_from method.</p>\n\n<p>The code works fine, the only problem is that in the time I process a packet, lots more come creating a queue (the buffer) to process. My program though must sink all the packets received since the start of the processing, so that it listens only to the most recent ones.</p>\n\n<p>Example:</p>\n\n<ul>\n<li>packet 1 is sent</li>\n<li>packet 1 is being processed</li>\n<li>packets 2, 3, 4 are sent</li>\n<li>packet 1 ends the computation</li>\n<li><strong>flush the buffer</strong></li>\n<li>packet 5 is sent</li>\n<li>packet 5 is being processed</li>\n<li>etc</li>\n</ul>\n\n<p>Is there any way to discard the packets in the middle?\nThanks!</p>\n"}, {"tags": ["c++", "optimization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1441223949, "post_id": 32361994, "comment_id": 52596853, "body": "What are you trying to solve?  It could be you are not using the correct algorithm.  Just looking at this is not enough information."}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441223984, "post_id": 32361994, "comment_id": 52596873, "body": "@NathanOliver: I will make another post for the algorithm, but right now this is slowing down my app."}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "edited": false, "score": 0, "creation_date": 1441224040, "post_id": 32361994, "comment_id": 52596899, "body": "I expected an answer explaining how to take advantage of the CPU cache or something like using different kind of variables."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441224115, "post_id": 32361994, "comment_id": 52596934, "body": "@We&#39;reAllMadHere so avoid calling the statement by all means, depending of what it&#39;s supposed to do, try to find a condition when it&#39;s not necessary to get there."}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441224168, "post_id": 32361994, "comment_id": 52596965, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6: Thanks for the idea, but the lines above are the heart of my algorithm and needs to be called all the time. <code>num</code> is usually huge."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441224438, "post_id": 32361994, "comment_id": 52597090, "body": "Have you thought about parallelizing it?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1441224550, "post_id": 32361994, "comment_id": 52597144, "body": "What types are <code>unique</code>, <code>total</code>, <code>ids</code> and <code>main_list</code>of?"}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 0, "creation_date": 1441224647, "post_id": 32361994, "comment_id": 52597194, "body": "@Simon Kraemer: every variable is unsigned int"}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441224696, "post_id": 32361994, "comment_id": 52597223, "body": "@NathanOliver: not bad idea but I am adding numbers to the same variable, is that even possible?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441224833, "post_id": 32361994, "comment_id": 52597291, "body": "Saying it takes 31% of the total time doesn&#39;t necessarily mean it&#39;s slower than it should be. It could mean that everything else is fast. If this is the only loop over a large array, that&#39;s expected."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441224890, "post_id": 32361994, "comment_id": 52597326, "body": "How large are the arrays? It may be causing lots of cache misses if the arrays don&#39;t fit into cache."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 2, "creation_date": 1441224910, "post_id": 32361994, "comment_id": 52597339, "body": "<code>unique[ids[i]]</code> and <code>total[ids[i]]</code> are probably killing a lot of your performance because indirect array references limit the ability of the compiler to do software prefetching. Also, if you could iterate directly through <code>total</code> and <code>unique</code> you could easily use an openmp for loop with SSE intrinsics to do your increment and add/save operations 4 at a time per thread."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1441225754, "post_id": 32361994, "comment_id": 52597745, "body": "<code>restrict</code>/<code>__restrict</code> the pointers gives you suprises"}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1441226215, "post_id": 32361994, "comment_id": 52598021, "body": "What is the range of your ids and how does it compare to <code>num</code>? Are they dense or sparse?"}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1441226412, "post_id": 32361994, "comment_id": 52598131, "body": "@mattnewport: the range of ids is around 4 billion. num is around 100 million but this depends on the input. The ids are sorted but there are many gaps."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1441226536, "post_id": 32361994, "comment_id": 52598199, "body": "@We&#39;reAllMadHere so your <code>unique</code> and <code>total</code> arrays have around 4 billion elements? They&#39;re indexed by ids."}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1441226711, "post_id": 32361994, "comment_id": 52598295, "body": "@mattnewport: long story short, yes."}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 1, "creation_date": 1441226993, "post_id": 32361994, "comment_id": 52598448, "body": "@We&#39;reAllMadHere it sounds like the ids must be sparsely distributed then. You may well be better off using a hash table rather than an array here - even if your ~100 million <code>num</code> elements all have unique ids you still only use ~2.5% of your <code>unique</code> and <code>total</code> array slots. If the ids are spread out randomly across the range, you&#39;ll be accessing a handful of bytes per memory page."}, {"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "reply_to_user": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 0, "creation_date": 1441227125, "post_id": 32361994, "comment_id": 52598522, "body": "@mattnewport Thanks a lot very interesting idea"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1441227366, "post_id": 32361994, "comment_id": 52598626, "body": "&quot;... This confirms the theory that probably CPU branch prediction fails ...&quot; Uh, wat? Nobody had that theory, and there are no branches in this code that could fail prediction."}], "answers": [{"comments": [{"owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "edited": false, "score": 0, "creation_date": 1441224745, "post_id": 32362120, "comment_id": 52597251, "body": "Thanks for the help, but this doesn&#39;t make any noticeable change. It&#39;s around 31.5-32%"}], "tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 2, "last_activity_date": 1441224942, "last_edit_date": 1441224942, "creation_date": 1441224234, "answer_id": 32362120, "question_id": 32361994, "link": "https://stackoverflow.com/questions/32361994/c-optimize-simple-loop/32362120#32362120", "title": "C++ optimize simple loop", "body": "<p>You may be getting hit by aliasing preventing the compiler from optimizing your loop here due to it having to allow for the possibility that <code>unique</code>, <code>total</code> and <code>main_list</code> overlap in memory. This may perform better:</p>\n\n<pre><code>const auto mainListId = main_list[id];\nfor (unsigned int i = 0; i &lt; num; ++i) {\n    const auto currId = ids[i];\n    ++unique[currId];\n    total[currId] += mainListId;\n}\n</code></pre>\n\n<p>Assuming of course that there is not in fact any aliasing going on.</p>\n\n<p>There's not a whole lot more you can do with such a simple loop. You can make sure your compiler optimization settings are set to maximum and you could try unrolling the loop some if the compiler is not doing it for you. Beyond that you would likely need to make algorithmic improvements beyond the scope of the code you show here.</p>\n\n<p>You are likely memory bound due to the non sequential memory accesses resulting from the ordering of <code>ids</code>. This could perhaps be addressed by sorting your <code>ids</code> array before this loop but without more context for what you're trying to do it's hard to say if that makes sense.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1441226108, "post_id": 32362509, "comment_id": 52597959, "body": "Basically what you should be trying to do is keep objects that are used &#39;together&#39; close together in memory as well."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441227296, "post_id": 32362509, "comment_id": 52598600, "body": "@Tive Yes that is literally what I said."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 1, "creation_date": 1441227673, "post_id": 32362509, "comment_id": 52598761, "body": "@Barry: I&#39;m wording your point differently, to maybe make it clearer what you mean.  OTOH, I too, forgot to mention &quot;locality of reference&quot;, which has better &#39;google-ability&#39;...."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441230072, "post_id": 32362509, "comment_id": 52599825, "body": "Loop unrolling is another available technique.  For example, double the statements inside the loop and increment the loop counter by 2.  (Remember to use <code>i+1</code> in the second set)."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1441271293, "post_id": 32362509, "comment_id": 52614256, "body": "I don&#39;t think that sorting <code>ids[]</code> will help the prefetcher. A prefetcher sees <code>p,p+4,p+8</code> and predicts <code>p+12</code> or <code>p+2,p+4,p+6</code> to predict <code>p+8</code>. As <code>ids</code> is non-contiguous, you&#39;re unlikely to have 4 id values in perfect order."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1441227274, "last_edit_date": 1441227274, "creation_date": 1441225687, "answer_id": 32362509, "question_id": 32361994, "link": "https://stackoverflow.com/questions/32361994/c-optimize-simple-loop/32362509#32362509", "title": "C++ optimize simple loop", "body": "<p>You're not getting any locality friendliness with your code. I'd throw out two possible ideas. </p>\n\n<ol>\n<li><p>Group <code>unique</code> and <code>total</code> together.</p>\n\n<pre><code>struct Stuff {\n    unsigned int unique, total;\n};\n\nfor(unsigned int i = 0; i &lt; num; i++)\n{\n    Stuff&amp; s = stuffs[ids[i]];\n    s.unique++;\n    s.total += main_list[id]; // &lt;== is this supposed to be ids[i]?\n}\n</code></pre></li>\n</ol>\n\n<p>That will make sure the things you're accessing in memory consecutively are actually next to each other in memory. As-is, assuming <code>num</code> is sufficiently large, you're cache missing on every line. That is about as bad as you can get. </p>\n\n<ol start=\"2\">\n<li><p>Sort <code>ids</code>. Right now, you're still bouncing around in memory. Let's make sure we can actually go sequentially:</p>\n\n<pre><code>std::sort(ids, ids + num);\n// rest of loop as before\n</code></pre></li>\n</ol>\n\n<p>This way, it's likely that <code>stuffs[ids[i+1]]</code> will be prefetched while you're processing <code>stuffs[ids[i]]</code>. That'll save you a lot of lookup time as well.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1441271184, "creation_date": 1441271184, "answer_id": 32371388, "question_id": 32361994, "link": "https://stackoverflow.com/questions/32361994/c-optimize-simple-loop/32371388#32371388", "title": "C++ optimize simple loop", "body": "<p>I'm surprised at the <code>i = ids[j]; //16.8%</code> - that should be faster. It looks like the timing is off. <code>++unique[i]; //2.0%</code> is a non-linear (non-prefetchable) access and should be slower, not 8 times faster. In fact, <code>ids[]</code> should be in cache so you'd have only 1 in 8 accesses hit main memory. The statement should be 8 times <em>faster</em>. Are you sure you got the right times for the right operations?</p>\n\n<p>That said, you should parallelize the loop. It won't help a lot; main memory won't become faster. But you should keep main memory busy. The idea of the CPU prefetcher is to throw in a few predicted accesses if there are no explicit accesses. If the prediction is right, it saves time, and otherwise it just wastes a bit of energy.</p>\n\n<p>Parallelizing the loop is possible because <code>ids[]</code> is sorted. Even if there are duplicate values, they're adjacent, so you can find split points by finding the first occurrence of a repeated value.</p>\n"}], "owner": {"reputation": 1544, "user_id": 3065448, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/81CPN.png?s=128&g=1", "display_name": "We&#39;re All Mad Here", "link": "https://stackoverflow.com/users/3065448/were-all-mad-here"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 32362509, "answer_count": 3, "score": 0, "last_activity_date": 1441271184, "creation_date": 1441223766, "last_edit_date": 1441226627, "question_id": 32361994, "link": "https://stackoverflow.com/questions/32361994/c-optimize-simple-loop", "title": "C++ optimize simple loop", "body": "<p>I am using Visual Studio 2012 and building on x64 release mode. The following code takes 33.5% of the time my program needs to run. I used the visual studio profiler to measure it.</p>\n\n<pre><code>    //every variable is unsigned int or unsigned int*\n\n    for(unsigned int i = 0; i &lt; num; i++)\n    {\n        unique[ids[i]]++;//2.1%\n        total[ids[i]] += main_list[id];//31.4%\n    }\n</code></pre>\n\n<p>Can someone please recommended a way to decrease the time this function takes to run?</p>\n\n<p><strong>edit</strong>: Based on your input I tried the following code:</p>\n\n<pre><code>    const unsigned int now = main_list[id];\n\n    for(unsigned int i = ids[0], j = 0; j &lt; num; j++)\n    {\n        ++unique[i];//2.0%\n        total[i] += now;//16.7%\n        i = ids[j];//16.8%\n    }\n</code></pre>\n\n<p>This confirms the theory that probably CPU branch prediction fails because the positions are random (btw they are not completely random, but sorted). Any idea if it's possible to speed up my code, please?</p>\n\n<p><strong>2nd edit:</strong> I tried the following:</p>\n\n<pre><code>    const unsigned int now = main_list[id];\n\n    for(unsigned int i = ids[0], j = 0; j &lt; num; j++)\n    {\n        total[i] += now;//2.0%\n        ++unique[i];//16.7%\n        i = ids[j];//16.8%\n    }\n</code></pre>\n\n<p>The above test should make it clear what is going on.</p>\n"}, {"tags": ["c++", "visual-studio", "memory-management"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441226169, "post_id": 32362207, "comment_id": 52597992, "body": "First, copying <code>CustomPoolAllocator</code> doesn&#39;t increase the reference count. The implicitly declared copy constructor is used. And why are you writing all the C++03 boilerplate?"}, {"owner": {"reputation": 278, "user_id": 3742955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117f162e6f378c51e70c854cbf493f8a?s=128&d=identicon&r=PG&f=1", "display_name": "CplusPuzzle", "link": "https://stackoverflow.com/users/3742955/cpluspuzzle"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441307227, "post_id": 32362207, "comment_id": 52637707, "body": "Thanks for the comment. Fixed the default copy constructor issue in the original and added a C++11 version."}], "answers": [{"comments": [{"owner": {"reputation": 278, "user_id": 3742955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117f162e6f378c51e70c854cbf493f8a?s=128&d=identicon&r=PG&f=1", "display_name": "CplusPuzzle", "link": "https://stackoverflow.com/users/3742955/cpluspuzzle"}, "edited": false, "score": 0, "creation_date": 1441230663, "post_id": 32362458, "comment_id": 52600056, "body": "I just tested this and it seems that it works as intended, I don&#39;t think what you wrote is correct."}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": false, "score": 0, "last_activity_date": 1441225484, "creation_date": 1441225484, "answer_id": 32362458, "question_id": 32362207, "link": "https://stackoverflow.com/questions/32362207/custom-allocator-microsoft-stdmap-implementation-deallocates-the-same-elemen/32362458#32362458", "title": "custom allocator - microsoft std::map implementation deallocates the same element twice, gcc works fine", "body": "<p>Single size allocator does not look like it copes with</p>\n\n<pre><code>A = allocate();\nB = allocate();\nFree( A );\nA = allocate();\nC = allocate();\n</code></pre>\n\n<p>I think the head moves, and doesn't cope with being freed and reused.</p>\n\n<p>The difference is likely to be due to optimizations of mingw to reduce copies.</p>\n"}, {"tags": [], "owner": {"reputation": 278, "user_id": 3742955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117f162e6f378c51e70c854cbf493f8a?s=128&d=identicon&r=PG&f=1", "display_name": "CplusPuzzle", "link": "https://stackoverflow.com/users/3742955/cpluspuzzle"}, "is_accepted": true, "score": 0, "last_activity_date": 1441306965, "last_edit_date": 1441306965, "creation_date": 1441229942, "answer_id": 32363570, "question_id": 32362207, "link": "https://stackoverflow.com/questions/32362207/custom-allocator-microsoft-stdmap-implementation-deallocates-the-same-elemen/32363570#32363570", "title": "custom allocator - microsoft std::map implementation deallocates the same element twice, gcc works fine", "body": "<p>The problem has been the max_size() member function.</p>\n\n<p>That's where the number 24 came from (24 == sizeof(T)).\nIt has been pointed out to me by someone here, but I can't trace the source to give credit.</p>\n\n<p>This should have returned the number of elements that the pool can contain (i.e. pool_size in our case).</p>\n\n<p>Also, the comment about the default copy c'tor is very true and warrants editing the original code.</p>\n\n<p>I still find it weird that the container deallocated the same address twice (microsoft bug?)</p>\n\n<p>Either way, thanks everybody!</p>\n\n<p>In addition, here's a fixed version which makes use of C++11 features.\nit eliminates the need to implement any destructors and the default copy constructor.</p>\n\n<pre><code>#ifndef _CustomPoolAllocator_H_\n#define _CustomPoolAllocator_H_\n\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include &lt;algorithm&gt;\n#include &lt;memory&gt;\n\n// This is a very simple fixed-size block allocator based on a free-list.\nclass SingleSizeAlloc\n{\n    size_t size;\n    const size_t num;\n    const size_t num_illegal;\n    std::unique_ptr&lt;char[]&gt; buf;\n    std::unique_ptr&lt;size_t[]&gt; list;\n    size_t listHead;\n    size_t * const listEnd;\npublic:\n    SingleSizeAlloc(size_t size, size_t n) :\n        size(size), num(n), num_illegal(n + 1), buf(new char[size * num]), list(\n        new size_t[num]), listEnd(list.get() + num)\n    {\n        listHead = 0;\n        unsigned i = 0;\n        std::for_each(list.get(), listEnd, [&amp;i](size_t &amp;elem)\n        {   elem = ++i; });\n    }\n\n    ~SingleSizeAlloc()\n    {\n        listHead = 0;\n        list = 0;\n    }\n\n    size_t getSize() const\n    {\n        return size;\n    }\n\n    void *allocate()\n    {\n        void *allocated = NULL;\n        if (listHead == num)\n        {\n            fprintf(stderr, \"SingleSizeAlloc: ERROR - no memory left!\\n\");\n            abort();\n        }\n        else\n        {\n            size_t idx = listHead;\n            if (num_illegal == list[idx])\n            {\n                fprintf(stderr,\n                    \"SingleSizeAlloc: ERROR - allocated same element twice! idx: %u, size: %u, num elements in pool: %u\\n\",\n                    (unsigned)idx, (unsigned)size, (unsigned)num);\n                abort();\n            }\n            listHead = list[idx];\n            allocated = buf.get() + idx * size;\n            list[idx] = num_illegal;\n        }\n        return allocated;\n    }\n\n    void deallocate(void *p)\n    {\n        size_t index = ((char *)p - buf.get()) / size;\n        if (num_illegal == list[index])\n        {\n            list[index] = listHead;\n            listHead = index;\n        }\n        else\n        {\n            fprintf(stderr,\n                \"SingleSizeAlloc: out of range Element or deallocated twice! index: %u, elements in pool: %u, element size: %u\\n\",\n                (unsigned)index, (unsigned)num, (unsigned)size);\n            abort();\n        }\n    }\n\n};\n\n// Contains up-to 16 simple free-list allocators where each supports a different block size.\n// Each related STL-Compatible allcator object will have a pointer to this reference-counted object.\n// When the last STL-Compatible allcator object is destroyed, this object will be destroyed too.\nclass FixedSizeAllocator\n{\n    enum\n    {\n        MAX_DIFFERENT_SIZES = 16\n    };\n\n    struct IsSize\n    {\n        size_t size;\n        IsSize(size_t size) :\n            size(size)\n        {\n        }\n        bool operator()(const std::unique_ptr&lt;SingleSizeAlloc&gt;&amp; p) const\n        {\n            return (size == p-&gt;getSize());\n        }\n    };\n\n    std::unique_ptr&lt;SingleSizeAlloc&gt; pools[MAX_DIFFERENT_SIZES];\n    const size_t eachPoolSize;\n    int numPools;\n\npublic:\n    FixedSizeAllocator(size_t n) :\n        eachPoolSize(n), numPools(0)\n    {\n        memset(pools, 0, sizeof(pools));\n    }\n\n    void *allocate(size_t size, size_t n)\n    {\n        if (n &gt; 1)\n        {\n            fprintf(stderr,\n                \"FixedSizeAllocator doesn't support allocation of multiple elements (i.e. can't be used for containters such as vector...)\");\n            abort();\n        }\n        auto pp = std::find_if(pools, pools + numPools, IsSize(size));\n        int idx = pp - pools;\n        if (idx &gt;= numPools)\n        {\n            if (idx &lt; MAX_DIFFERENT_SIZES)\n            {\n                (*pp).reset(new SingleSizeAlloc(size, eachPoolSize));\n                numPools++;\n            }\n            else\n            {\n                fprintf(stderr,\n                    \"FixedSizeAllocator: ERROR - allocate error !! size: %u, different sizes in the allocator: %d\\n\",\n                    (unsigned)size, idx);\n                abort();\n            }\n        }\n        return (*pp)-&gt;allocate();\n    }\n\n    void deallocate(void *pObj, size_t size)\n    {\n        auto pp = std::find_if(pools, pools + numPools, IsSize(size));\n        int idx = pp - pools;\n        if (idx &gt;= numPools)\n        {\n            if (idx &gt;= MAX_DIFFERENT_SIZES)\n            {\n                fprintf(stderr,\n                    \"FixedSizeAllocator: ERROR - deallocate error ()!! size: %u\\n\",\n                    (unsigned)size);\n                abort();\n            }\n        }\n        (*pp)-&gt;deallocate(pObj);\n    }\n};\n\n// This is the STL compatible interface. it holds a pointer to the actual implementation of the allocator.\n// Whenever this object is created from a related object (see the rebind), the reference counter for the\n// allocator is incremented (decremented in d'tor).\n// When the last of these is destroyed, the implementation object is also destroyed.\ntemplate&lt;class T, size_t pool_size&gt; class CustomPoolAllocator\n{\nprivate:\n    CustomPoolAllocator &amp;operator=(const CustomPoolAllocator &amp;other);\n\npublic:\n    typedef size_t size_type;\n    typedef ptrdiff_t difference_type;\n    typedef T* pointer;\n    typedef const T* const_pointer;\n    typedef T&amp; reference;\n    typedef const T&amp; const_reference;\n    typedef T value_type;\n    template&lt;class U&gt; struct rebind\n    {\n        typedef CustomPoolAllocator&lt;U, pool_size&gt; other;\n    };\n\n    std::shared_ptr&lt;FixedSizeAllocator&gt; allocImp;\n    CustomPoolAllocator() :\n        allocImp(new FixedSizeAllocator(pool_size))\n    {\n    }\n\n    template&lt;class Q&gt;\n    CustomPoolAllocator(const CustomPoolAllocator&lt;Q, pool_size&gt;&amp; other) :\n        allocImp(other.allocImp)\n    {\n    }\n\n    pointer address(reference x) const\n    {\n        return &amp;x;\n    }\n    const_pointer address(const_reference x) const\n    {\n        return &amp;x;\n    }\n\n    pointer allocate(size_type n)\n    {\n        return (pointer)allocImp-&gt;allocate(sizeof(T), n);\n    }\n\n    void deallocate(pointer p, size_type n)\n    {\n        allocImp-&gt;deallocate(p, n * sizeof(T));\n    }\n\n    size_type max_size() const\n    {\n        return pool_size;\n    }\n\n    void construct(pointer p, const T&amp; val)\n    {\n        new (p)T(val);\n    }\n    void destroy(pointer p)\n    {\n        p-&gt;~T();\n    }\n};\n\n#endif // _CustomPoolAllocator_H_\n</code></pre>\n"}], "migrated_from": {"other_site": {"markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1436881020, "open_beta_date": 1296068400, "closed_beta_date": 1295463600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon@2.png", "twitter_account": "StackCodeReview", "favicon_url": "https://cdn.sstatic.net/Sites/codereview/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/codereview/Img/apple-touch-icon.png", "audience": "peer programmer code reviews", "site_url": "https://codereview.stackexchange.com", "api_site_parameter": "codereview", "logo_url": "https://cdn.sstatic.net/Sites/codereview/Img/logo.png", "name": "Code Review", "site_type": "main_site"}, "on_date": 1441224534, "question_id": 102621}, "owner": {"reputation": 278, "user_id": 3742955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117f162e6f378c51e70c854cbf493f8a?s=128&d=identicon&r=PG&f=1", "display_name": "CplusPuzzle", "link": "https://stackoverflow.com/users/3742955/cpluspuzzle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 32363570, "answer_count": 2, "score": 0, "last_activity_date": 1441306965, "creation_date": 1441223583, "last_edit_date": 1441230344, "question_id": 32362207, "link": "https://stackoverflow.com/questions/32362207/custom-allocator-microsoft-stdmap-implementation-deallocates-the-same-elemen", "title": "custom allocator - microsoft std::map implementation deallocates the same element twice, gcc works fine", "body": "<p>The idea was to have a reusable stl-compatible allocator that is simple to use and won't use the free-store in performance-critical areas of the software.</p>\n\n<p>Here's some test code (very basic testing):</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;iostream&gt;\n\n#include \"CustomPoolAllocator.h\"\n\ntypedef std::map&lt;int, int&gt;::value_type mymap_vtype;\ntypedef CustomPoolAllocator&lt;mymap_vtype, 200&gt; my_alloc_type;\n\nint main()\n{\n    std::map&lt;int, int, std::less&lt;int&gt;, my_alloc_type&gt; mymap;\n\n    int sign = 1;\n    for (int i = 0; i &lt; 90; ++i)\n    {\n        mymap[i * sign] = i;\n        sign *= -1;\n    }\n\n    for (auto &amp; elem : mymap)\n        std::cout &lt;&lt; elem.first &lt;&lt; \" \" &lt;&lt; elem.second &lt;&lt; std::endl;\n\n    mymap.clear();\n\n    for (int i = 0; i &lt; 90; ++i)\n    {\n        mymap[i * sign] = i;\n        sign *= -1;\n    }\n\n    for (auto &amp; elem : mymap)\n        std::cout &lt;&lt; elem.first &lt;&lt; \" \" &lt;&lt; elem.second &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Looks like this testing is enough to find some problems though.\nI tested using both MinGW and Visual-Studio 2013.</p>\n\n<p>Not sure it's very important, but here's what <code>g++ --version</code> prints:</p>\n\n<blockquote>\n  <p>g++ (x86_64-posix-seh-rev1, Built by MinGW-W64 project) 4.9.2\n  Copyright (C) 2014 Free Software Foundation, Inc. This is free\n  software; see the source for copying conditions.  There is NO\n  warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR\n  PURPOSE.</p>\n</blockquote>\n\n<p><strong>In Visual-Studio</strong>, consistently adding the first 23 elements to the map it works well.</p>\n\n<p>After adding the 24th element to the map, there's a deallocation of an element (not clear to me why) and then the same address is immediately deallocated again (verified with breakpoints, step-by-step debugging).</p>\n\n<p>And of course, the program reaches the <code>abort()</code> and prints:</p>\n\n<blockquote>\n  <p>SingleSizeAlloc: out of range Element or deallocated twice! index: 24, elements in pool: 200, element size: 24</p>\n</blockquote>\n\n<p>If I remove the abort(), There's some exception that I don't understand:\n<code>std::length_error</code></p>\n\n<p><br><br><br></p>\n\n<p><strong>When built with MinGW, it worked as expected without issues.</strong></p>\n\n<p>Can someone please help me understand what's going on?\nMany thanks!</p>\n\n<p>The code for the reusable allocator template is here:</p>\n\n<pre><code>#ifndef _CustomPoolAllocator_H_\n#define _CustomPoolAllocator_H_\n\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include &lt;algorithm&gt;\n\n// This is a very simple fixed-size block allocator based on a free-list.\nclass SingleSizeAlloc\n{\n    size_t size;\n    const size_t num;\n    const size_t num_illegal;\n    char *buf;\n    size_t listHead;\n    size_t *list;\npublic:\n    SingleSizeAlloc(size_t s, size_t n) :\n            size(s), num(n), num_illegal(n + 1)\n    {\n        buf = new char[size * num];\n        list = new size_t[num];\n        listHead = 0;\n        for (unsigned i = 0, j = 1; i &lt; n; ++i, ++j)\n        {\n            list[i] = j;\n        }\n    }\n\n    ~SingleSizeAlloc()\n    {\n        delete[] buf;\n        delete[] list;\n        listHead = 0;\n        list = 0;\n    }\n\n    size_t getSize() const\n    {\n        return size;\n    }\n\n    void *allocate()\n    {\n        void *allocated = NULL;\n        if (listHead == num)\n        {\n            fprintf(stderr, \"SingleSizeAlloc: ERROR - no memory left!\\n\");\n            abort();\n        }\n        else\n        {\n            size_t idx = listHead;\n            if (num_illegal == list[idx])\n            {\n                fprintf(stderr,\n                        \"SingleSizeAlloc: ERROR - allocated same element twice! idx: %u, size: %u, num elements in pool: %u\\n\",\n                        (unsigned) idx, (unsigned) size, (unsigned) num);\n                abort();\n            }\n            listHead = list[idx];\n            allocated = buf + idx * size;\n            list[idx] = num_illegal;\n        }\n        return allocated;\n    }\n\n    void deallocate(void *p)\n    {\n        size_t index = ((char *) p - buf) / size;\n        if (num_illegal == list[index])\n        {\n            list[index] = listHead;\n            listHead = index;\n        }\n        else\n        {\n            fprintf(stderr,\n                    \"SingleSizeAlloc: out of range Element or deallocated twice! index: %u, elements in pool: %u, element size: %u\\n\",\n                    (unsigned) index, (unsigned) num, (unsigned) size);\n            abort();\n        }\n    }\n\n};\n\n\n// Contains up-to 16 simple free-list allocators where each supports a different block size.\n// Each related STL-Compatible allcator object will have a pointer to this reference-counted object.\n// When the last STL-Compatible allcator object is destroyed, this object will be destroyed too.\nclass FixedSizeAllocator\n{\n    enum\n    {\n        MAX_DIFFERENT_SIZES = 16\n    };\n\n    struct IsSize\n    {\n        size_t s;\n        IsSize(size_t s) :\n                s(s)\n        {\n        }\n        bool operator()(const SingleSizeAlloc* p) const\n        {\n            return (s == p-&gt;getSize());\n        }\n    };\n\n    SingleSizeAlloc *pools[MAX_DIFFERENT_SIZES];\n    const size_t eachPoolSize;\n    int refcounter;\n    int numPools;\n\npublic:\n    FixedSizeAllocator(size_t n) :\n            eachPoolSize(n), refcounter(0), numPools(0)\n    {\n        memset(pools, 0, sizeof(pools));\n    }\n\n    ~FixedSizeAllocator()\n    {\n        SingleSizeAlloc **pp = pools;\n        for (int i = 0; i &lt; numPools &amp;&amp; *pp; ++i, ++pp)\n        {\n            delete *pp;\n            *pp = 0;\n        }\n    }\n\n    void incRefCounter()\n    {\n        refcounter++;\n    }\n    void decRefCounter()\n    {\n        refcounter--;\n    }\n    int getRefCounter() const\n    {\n        return refcounter;\n    }\n\n    void *allocate(size_t s, size_t n)\n    {\n        if (n &gt; 1)\n        {\n            fprintf(stderr,\n                    \"FixedSizeAllocator doesn't support allocation of multiple elements (i.e. can't be used for containters such as vector...)\");\n            abort();\n        }\n        SingleSizeAlloc **pp = std::find_if(pools, pools + numPools, IsSize(s));\n        int idx = pp - pools;\n        if (idx &gt;= numPools)\n        {\n            if (idx &lt; MAX_DIFFERENT_SIZES)\n            {\n                *pp = new SingleSizeAlloc(s, eachPoolSize);\n                numPools++;\n            }\n            else\n            {\n                fprintf(stderr,\n                        \"FixedSizeAllocator: ERROR - allocate error !! size: %u, different sizes in the allocator: %d\\n\",\n                        (unsigned) s, idx);\n                abort();\n            }\n        }\n        return (*pp)-&gt;allocate();\n    }\n\n    void deallocate(void *pObj, size_t size)\n    {\n        SingleSizeAlloc **pp = std::find_if(pools, pools + numPools,\n                IsSize(size));\n        int idx = pp - pools;\n        if (idx &gt;= numPools)\n        {\n            if (idx &gt;= MAX_DIFFERENT_SIZES)\n            {\n                fprintf(stderr,\n                        \"FixedSizeAllocator: ERROR - deallocate error!! size: %u\\n\",\n                        (unsigned) size);\n                abort();\n            }\n        }\n        (*pp)-&gt;deallocate(pObj);\n    }\n};\n\n// This is the STL compatible interface. it holds a pointer to the actual implementation of the allocator.\n// Whenever this object is created from a related object (see the rebind), the reference counter for the\n// allocator is incremented (decremented in d'tor).\n// When the last of these is destroyed, the implementation object is also destroyed.\ntemplate&lt;class T, size_t pool_size&gt; class CustomPoolAllocator\n{\nprivate:\n    CustomPoolAllocator &amp;operator=(const CustomPoolAllocator &amp;other);\n\npublic:\n    typedef size_t size_type;\n    typedef ptrdiff_t difference_type;\n    typedef T* pointer;\n    typedef const T* const_pointer;\n    typedef T&amp; reference;\n    typedef const T&amp; const_reference;\n    typedef T value_type;\n    template&lt;class U&gt; struct rebind\n    {\n        typedef CustomPoolAllocator&lt;U, pool_size&gt; other;\n    };\n\n    FixedSizeAllocator *allocImp;\n    CustomPoolAllocator()\n    {\n        // create a new FixedSizeAllocator\n        allocImp = new FixedSizeAllocator(pool_size);\n        allocImp-&gt;incRefCounter();\n    }\n\n    template&lt;class Q&gt;\n    CustomPoolAllocator(const CustomPoolAllocator&lt;Q, pool_size&gt;&amp; other)\n    {\n        allocImp = other.allocImp;\n        allocImp-&gt;incRefCounter();\n    }\n\n    // This copy-c'tor was missing in the original code,\n    // it's necessary, otherwise the ref-counter isn't incremented.\n    CustomPoolAllocator(const CustomPoolAllocator&amp; other)\n    {\n        allocImp = other.allocImp;\n        allocImp-&gt;incRefCounter();\n    }\n\n    ~CustomPoolAllocator()\n    {\n        allocImp-&gt;decRefCounter();\n        if (0 == allocImp-&gt;getRefCounter())\n        {\n            delete allocImp;\n            allocImp = 0;\n        }\n    }\n\n    pointer address(reference x) const\n    {\n        return &amp;x;\n    }\n    const_pointer address(const_reference x) const\n    {\n        return &amp;x;\n    }\n\n    pointer allocate(size_type n)\n    {\n        return (pointer) allocImp-&gt;allocate(sizeof(T), n);\n    }\n\n    void deallocate(pointer p, size_type n)\n    {\n        allocImp-&gt;deallocate(p, n * sizeof(T));\n    }\n\n    size_type max_size() const\n    {\n        return sizeof(T); // #### this is the problem!!! should return pool_size.\n    }\n\n    void construct(pointer p, const T&amp; val)\n    {\n        new (p) T(val);\n    }\n    void destroy(pointer p)\n    {\n        p-&gt;~T();\n    }\n};\n\n#endif // _CustomPoolAllocator_H_\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1441223721, "post_id": 32361742, "comment_id": 52596724, "body": "The variable, as seen in the posted code, is not initialized. Is it initialized somewhere else? If not, its value can be anything."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1441227616, "post_id": 32361742, "comment_id": 52598730, "body": "Perhaps TMR_HV is NaN or +Inf"}, {"owner": {"reputation": 1, "user_id": 5290187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aba3a2057e92d45d448b1e76624cc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "Luis silva", "link": "https://stackoverflow.com/users/5290187/luis-silva"}, "edited": false, "score": 0, "creation_date": 1441273115, "post_id": 32361742, "comment_id": 52615450, "body": "the variable is global and it&#180;s initialized at 0.0, and when we place a break point on the timer, the initial value is 0.0 and it runs has expected. when the variable get a value bigger then 0.0 it starts to decrease and never stop. it goes to negative values."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5290187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aba3a2057e92d45d448b1e76624cc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "Luis silva", "link": "https://stackoverflow.com/users/5290187/luis-silva"}, "edited": false, "score": 0, "creation_date": 1441272784, "post_id": 32362982, "comment_id": 52615229, "body": "Yes, it&#180;s a global variable and it&#180;s declared like this: double TMR_HV = 0.0;"}], "tags": [], "owner": {"reputation": 1, "user_id": 5294270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RDGuU.png?s=128&g=1", "display_name": "helper", "link": "https://stackoverflow.com/users/5294270/helper"}, "is_accepted": false, "score": 0, "last_activity_date": 1441227458, "creation_date": 1441227458, "answer_id": 32362982, "question_id": 32361742, "link": "https://stackoverflow.com/questions/32361742/variables-of-type-double-comparison-always-returns-false/32362982#32362982", "title": "variables of type double comparison always returns false", "body": "<p>It is important that you declare your TMR_HV variable not inside other function. It should be global.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5290187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aba3a2057e92d45d448b1e76624cc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "Luis silva", "link": "https://stackoverflow.com/users/5290187/luis-silva"}, "is_accepted": false, "score": 0, "last_activity_date": 1532862813, "last_edit_date": 1532862813, "creation_date": 1441280401, "answer_id": 32374609, "question_id": 32361742, "link": "https://stackoverflow.com/questions/32361742/variables-of-type-double-comparison-always-returns-false/32374609#32374609", "title": "variables of type double comparison always returns false", "body": "<p>I solved my problem this way. \nI create this function</p>\n\n<pre><code>int DblComp(double A, double B)\n{\n    LONG32 aL;\n    LONG32 bL;\n    aL = (LONG32) ( A * 1000.0);\n    bL = (LONG32) ( B * 1000.0);\n    if (aL &lt; bL) return (-1);\n    else if (aL == bL) return (0);\n    else return (1);\n}\n</code></pre>\n\n<p>then when I need compare 2 double variables I call this function </p>\n\n<pre><code>if (DblComp(ReadWriteDisk_C, 0.00) == MAIOR)\n        ReadWriteDisk_C -= 0.01;\nelse ReadWriteDisk_C = 0.00;\n</code></pre>\n\n<p>the Maior is defined as 1</p>\n"}], "owner": {"reputation": 1, "user_id": 5290187, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aba3a2057e92d45d448b1e76624cc4b4?s=128&d=identicon&r=PG&f=1", "display_name": "Luis silva", "link": "https://stackoverflow.com/users/5290187/luis-silva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1532862813, "creation_date": 1441222829, "last_edit_date": 1441223072, "question_id": 32361742, "link": "https://stackoverflow.com/questions/32361742/variables-of-type-double-comparison-always-returns-false", "title": "variables of type double comparison always returns false", "body": "<p>my code has something like this:</p>\n\n<pre><code>double TMR_HV ;\n....\nTMR_HV =2.0; // in another part of my code\n\n\nvoid RTKAPI Tempos10(void * p) // task for timers\n{\n    while(1) {\n        if (TMR_HV &gt; 0.00)  TMR_HV -= 0.01; \n        else TMR_HV = 0.00;\n        RTKDelay(1);\n    }\n}\n</code></pre>\n\n<p>The condition <code>if</code> is always false. can anyone help me with this?</p>\n"}, {"tags": ["c++", "object", "vector", "stl"], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "edited": false, "score": 0, "creation_date": 1441223876, "post_id": 32361857, "comment_id": 52596818, "body": "perfect. Thank you. after I setup the initial vector capacity, the problem went away. vd.reserve(2);"}], "tags": [], "owner": {"reputation": 1510, "user_id": 2577784, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0UtjR.png?s=128&g=1", "display_name": "djs", "link": "https://stackoverflow.com/users/2577784/djs"}, "is_accepted": false, "score": 2, "last_activity_date": 1441223285, "creation_date": 1441223285, "answer_id": 32361857, "question_id": 32361698, "link": "https://stackoverflow.com/questions/32361698/c-object-copy-inside-vector-element-repeats-more-than-expected/32361857#32361857", "title": "c++ object copy inside vector element repeats more than expected", "body": "<p>Open a debugger and keep an eye on the capacity of your vector as you step over each line in your <code>generate()</code> loop. When first created, it has a capacity of 0. It will automatically increase the capacity as needed, but it actually destroys the existing elements and recreates them under the covers. This is what causes the extra create/destroy that you are seeing.</p>\n\n<p>Add <code>vd.reserve(2);</code> after declaring your vector, and this extra create/delete will go away.</p>\n"}, {"comments": [{"owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "edited": false, "score": 0, "creation_date": 1441223907, "post_id": 32361866, "comment_id": 52596833, "body": "perfect. Thank you. after I setup the initial vector capacity to 2, the problem went away.      vd.reserve(2);"}], "tags": [], "owner": {"reputation": 6681, "user_id": 619295, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a928b0d96628fa4b5529a85b33c50477?s=128&d=identicon&r=PG", "display_name": "trenki", "link": "https://stackoverflow.com/users/619295/trenki"}, "is_accepted": false, "score": 2, "last_activity_date": 1441223323, "creation_date": 1441223323, "answer_id": 32361866, "question_id": 32361698, "link": "https://stackoverflow.com/questions/32361698/c-object-copy-inside-vector-element-repeats-more-than-expected/32361866#32361866", "title": "c++ object copy inside vector element repeats more than expected", "body": "<p>When the second <code>dummy</code> object is pushed into the vector the vector is too small to hold all the dummy objects and gets resized which results in the additional copy constructor calls.</p>\n\n<p>You can prevent this by increasing the initial vector capacity using <code>vd.reserve(10)</code> for example.</p>\n"}], "owner": {"reputation": 517, "user_id": 5293991, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rm6r_TBDf0M/AAAAAAAAAAI/AAAAAAAAN3c/_0hdeN0P3K8/photo.jpg?sz=128", "display_name": "Jay Kumar R", "link": "https://stackoverflow.com/users/5293991/jay-kumar-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1441237885, "creation_date": 1441222619, "last_edit_date": 1441237885, "question_id": 32361698, "link": "https://stackoverflow.com/questions/32361698/c-object-copy-inside-vector-element-repeats-more-than-expected", "title": "c++ object copy inside vector element repeats more than expected", "body": "<p>I created TWO objects of a dummy class and pushed them into vector. But I see somehow the constructor works FIVE times. I am confused. can someone help?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint obj_id=1;\n\nclass dummy {\nint d;\npublic:\n\ndummy()// default constructor :\n{ \n    d=obj_id++; \n    cout&lt;&lt; \"dummy created :\" &lt;&lt; d &lt;&lt;\" \\n\"; \n}\n\ndummy(const dummy &amp; du) // copy constructor :\n{\n    d=obj_id++; \n    cout&lt;&lt; \"dummy copy created :\" &lt;&lt; d &lt;&lt;\" \\n\"; \n}\n~dummy() { cout&lt;&lt; \"dummy destroyed :\" &lt;&lt; d &lt;&lt; \" \\n\"; }\n};\n\nvoid generate(vector&lt;dummy&gt; &amp;v) {\n   for(int i=0;i&lt;2;i++)\n   {\n       dummy x;\n       v.push_back(x);\n       cout&lt;&lt; \"pushed into vector \\n\";\n   }\n   return ;\n}   \n\nint main ()\n{\nvector &lt;dummy&gt; vd;\ngenerate(vd);\ncout&lt;&lt;\" Created dummies \\n\";\n\nreturn 0;\n}\n=========================\nOutput:\ndummy created :1 \ndummy copy created :2 \npushed into vector \ndummy destroyed :1 \ndummy created :3 \ndummy copy created :4 \ndummy copy created :5 ** how this comes **??\ndummy destroyed :2 ** oops.. how the copy inside vector destroyed?\npushed into vector \n destroyed :3 \n Created dummies \ndummy destroyed :4 \ndummy destroyed :5 \n</code></pre>\n\n<p>the even numbered dummies are supposed to be vector element copies. But how 5th dummy appears? how does the 2nd dummy (first element of vector) gets destroyed before returning from function?</p>\n"}, {"tags": ["c++", "memory", "freertos"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1441222332, "post_id": 32361574, "comment_id": 52595940, "body": "Unrelated: Name it <code>Thread</code> for linguistic consistency please."}, {"owner": {"reputation": 6023, "user_id": 2417459, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QcuXb.png?s=128&g=1", "display_name": "i486", "link": "https://stackoverflow.com/users/2417459/i486"}, "edited": false, "score": 0, "creation_date": 1441224163, "post_id": 32361574, "comment_id": 52596961, "body": "Why your cast is not simply: <code>Thread * self = (Thread *)p</code>?"}, {"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1441225900, "post_id": 32361574, "comment_id": 52597837, "body": "Do you ever call <code>vTaskStartScheduler</code>? And, related to that, what does <code>schedulerStart(()</code> do? Does <code>schedulerStart()</code> try to recover the main stack? If so, that&#39;s your problem."}, {"owner": {"reputation": 1094, "user_id": 2241256, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d79dd16db97df263a9a6f4e933e4bfee?s=128&d=identicon&r=PG", "display_name": "Jolle", "link": "https://stackoverflow.com/users/2241256/jolle"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1441258924, "post_id": 32361574, "comment_id": 52607358, "body": "@Rob\u1d69 - it is simple a wrapper function, it calls vTaskStartScheduler() directly."}], "answers": [{"comments": [{"owner": {"reputation": 1094, "user_id": 2241256, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d79dd16db97df263a9a6f4e933e4bfee?s=128&d=identicon&r=PG", "display_name": "Jolle", "link": "https://stackoverflow.com/users/2241256/jolle"}, "edited": false, "score": 0, "creation_date": 1441281188, "post_id": 32374391, "comment_id": 52620537, "body": "You are completely right! Both static and global does the job. Thanks! But in my mind the memory should first be reclaimed when main exits (which it never does, because I&#39;ve added a while(1))?.. (and I have no optimizations enabled).  :-)"}, {"owner": {"reputation": 26, "user_id": 5296461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bCg4t3Q6lfA/AAAAAAAAAAI/AAAAAAAAAAA/4yLApKS4PAA/photo.jpg?sz=128", "display_name": "nif", "link": "https://stackoverflow.com/users/5296461/nif"}, "reply_to_user": {"reputation": 1094, "user_id": 2241256, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d79dd16db97df263a9a6f4e933e4bfee?s=128&d=identicon&r=PG", "display_name": "Jolle", "link": "https://stackoverflow.com/users/2241256/jolle"}, "edited": false, "score": 0, "creation_date": 1441321548, "post_id": 32374391, "comment_id": 52643978, "body": "Change your mind then ;-). The rule is that a stack variable is reclaimed when there is no later reference to it."}], "tags": [], "owner": {"reputation": 26, "user_id": 5296461, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bCg4t3Q6lfA/AAAAAAAAAAI/AAAAAAAAAAA/4yLApKS4PAA/photo.jpg?sz=128", "display_name": "nif", "link": "https://stackoverflow.com/users/5296461/nif"}, "is_accepted": true, "score": 1, "last_activity_date": 1441281214, "last_edit_date": 1441281214, "creation_date": 1441279707, "answer_id": 32374391, "question_id": 32361574, "link": "https://stackoverflow.com/questions/32361574/freertos-in-c-changes-task-memory/32374391#32374391", "title": "FreeRTOS in C++ changes task memory?", "body": "<pre><code>   Threat task1(...);\n</code></pre>\n\n<p>is an automatic variable allocated on the stack, and since it is not explicitly referenced later in the scope, this means that it's memory is reclaimed.</p>\n\n<p>You could declare task1 in global scope, add 'static' to it's declaration, or cheat by referencing task1 in the bottom of main(), e.g. </p>\n\n<pre><code>   printf(\"%s\\n\",task1.m_name);\n</code></pre>\n\n<p>(That would require that you do not declare m_name as private)</p>\n"}], "owner": {"reputation": 1094, "user_id": 2241256, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d79dd16db97df263a9a6f4e933e4bfee?s=128&d=identicon&r=PG", "display_name": "Jolle", "link": "https://stackoverflow.com/users/2241256/jolle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 796, "favorite_count": 0, "accepted_answer_id": 32374391, "answer_count": 1, "score": 0, "last_activity_date": 1441281214, "creation_date": 1441222182, "last_edit_date": 1441222915, "question_id": 32361574, "link": "https://stackoverflow.com/questions/32361574/freertos-in-c-changes-task-memory", "title": "FreeRTOS in C++ changes task memory?", "body": "<p>I have the following C++ wrapper for the FreeRTOS task: </p>\n\n<pre><code>class Threat {\n    public:\n    Threat(const char* name, uint32_t stackSize, uint8_t priority):\n        m_Name(name), m_StackSize(stackSize), m_Priority(priority){\n        xTaskCreate(&amp;task_function, \"MYTASK\", m_StackSize, this, m_Priority, &amp;m_TaskHandle);\n    }\n\n    static void task_function(void *p){\n        int i = 0;\n\n        Threat* self = static_cast&lt;Threat*&gt;(p);\n\n        while(1){\n            i++;\n            vTaskDelay(1000);\n        }\n    }\n\nprivate:\n    const char* m_Name;\n    const uint32_t m_StackSize;\n    const uint8_t m_Priority;\n    TaskHandle_t m_TaskHandle;\n};\n</code></pre>\n\n<p>And in my main: </p>\n\n<pre><code>int main(void){\n    Threat task1(\"task1\", 128, tskIDLE_PRIORITY);\n    schedulerStart();\n}\n</code></pre>\n\n<p>When I run this, FreeRTOS correctly calls the task_function, BUT if I look into the self variable inside the function, the data has been changed. The pointer is correct, but the data for the task1 has been changed (and it is not the cast that goes wrong - I've checked the memory). </p>\n\n<p>Anybody have a seen this before?.. I use CoIDE and GCC embedded. </p>\n\n<p>EDIT:\nThis is how the data looks in main:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fPBRm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fPBRm.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3FFUh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3FFUh.png\" alt=\"enter image description here\"></a></p>\n\n<p>And in the task function: </p>\n\n<p><a href=\"https://i.stack.imgur.com/h6NCc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h6NCc.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/wdp6s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wdp6s.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "templates", "c++11", "sfinae"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441222069, "post_id": 32361534, "comment_id": 52595803, "body": "Introduce an abstract base class."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1441222257, "post_id": 32361534, "comment_id": 52595902, "body": "You&#39;re missing the <code>typename</code> here: <code>typename enable_if&lt;is_constructible&lt;T&gt;::value&gt;::type</code>"}, {"owner": {"reputation": 4680, "user_id": 1687321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eca95633fe8133df17abebc47dd4b3cb?s=128&d=identicon&r=PG", "display_name": "Janito Vaqueiro Ferreira Filho", "link": "https://stackoverflow.com/users/1687321/janito-vaqueiro-ferreira-filho"}, "edited": false, "score": 0, "creation_date": 1441222444, "post_id": 32361534, "comment_id": 52595994, "body": "Thanks! Now that you pointed it out, it makes sense that the enable_if construct became a dependent type. (Don&#39;t think that this is a duplicate question though, as being a dependent type is the answer, not the question)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1441222623, "post_id": 32361534, "comment_id": 52596080, "body": "@JanitoVaqueiroFerreiraFilho You have a problem that&#39;s very well explained by the answers to that question. Therefore, it&#39;s a duplicate."}, {"owner": {"reputation": 4680, "user_id": 1687321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eca95633fe8133df17abebc47dd4b3cb?s=128&d=identicon&r=PG", "display_name": "Janito Vaqueiro Ferreira Filho", "link": "https://stackoverflow.com/users/1687321/janito-vaqueiro-ferreira-filho"}, "edited": false, "score": 0, "creation_date": 1441222942, "post_id": 32361534, "comment_id": 52596273, "body": "Ok, I guess that makes sense. I would vote instead for a simple answer linking to that question, but I trust your judgement =)"}], "owner": {"reputation": 4680, "user_id": 1687321, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/eca95633fe8133df17abebc47dd4b3cb?s=128&d=identicon&r=PG", "display_name": "Janito Vaqueiro Ferreira Filho", "link": "https://stackoverflow.com/users/1687321/janito-vaqueiro-ferreira-filho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1441222243, "answer_count": 0, "score": 0, "last_activity_date": 1441222012, "creation_date": 1441222012, "question_id": 32361534, "link": "https://stackoverflow.com/questions/32361534/conditional-template-specialization", "closed_reason": "Duplicate", "title": "Conditional template specialization", "body": "<p>How can I provide a default virtual method implementation for a class template if the template parameter is constructible? If it isn't constructible (at least with the default constructor), the method should be kept abstract.</p>\n\n<p>My attempt was to create a class specialization enabled only if the template parameter is constructible, as shown below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nusing namespace std;\n\nstruct ShouldNotBeAbstract {};\n\nstruct ShouldBeAbstract {\n    ShouldBeAbstract(int) {\n    }\n};\n\ntemplate &lt;typename T, typename = void&gt;\nstruct Test {\n    virtual void method() = 0;\n};\n\ntemplate &lt;typename T&gt;\nstruct Test&lt;T, enable_if&lt;is_constructible&lt;T&gt;::value&gt;::type&gt; {\n    virtual void method() {}\n};\n\nint main(int argc, char* argv[]) {\n    cout &lt;&lt; \"Should not be abstract: \" &lt;&lt; is_constructible&lt;Test&lt;ShouldNotBeAbstract&gt; &gt;::value &lt;&lt; endl;\n    cout &lt;&lt; \"Should be abstract: \" &lt;&lt; is_constructible&lt;Test&lt;ShouldBeAbstract&gt; &gt;::value &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>However, I get the following error when compiling with <code>g++ -std=c++11 test.cpp</code>:</p>\n\n<pre><code>test_conditional_template_specialization.cpp:19:62: error: type/value mismatch at argument 3 in template parameter list for \u2018template&lt;class T, class P, class&gt; struct Test\u2019\n struct Test&lt;T, P, enable_if&lt;is_constructible&lt;T&gt;::value&gt;::type&gt; {\n                                                              ^\n\ntest_conditional_template_specialization.cpp:19:62: error:   expected a type, got \u2018std::enable_if&lt;std::is_constructible&lt;T&gt;::value&gt;::type\u2019\n</code></pre>\n\n<p>Why does this error appear? And what would be a better way to achieve my goal?</p>\n"}, {"tags": ["c++", "linux", "terminal", "ncurses"], "comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 1, "creation_date": 1441221130, "post_id": 32361246, "comment_id": 52595326, "body": "call <code>noraw();</code> to restore cooked mode afaik."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1441221152, "post_id": 32361246, "comment_id": 52595338, "body": "As a workaround you could try saving the original <code>termios()</code> state, and restore it before exiting."}, {"owner": {"reputation": 6476, "user_id": 756200, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/828969868943e201978e78585f3d1f30?s=128&d=identicon&r=PG", "display_name": "dario_ramos", "link": "https://stackoverflow.com/users/756200/dario-ramos"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1441221218, "post_id": 32361246, "comment_id": 52595372, "body": "@Nidhoegger, that did it: post that comment as an answer"}, {"owner": {"reputation": 6476, "user_id": 756200, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/828969868943e201978e78585f3d1f30?s=128&d=identicon&r=PG", "display_name": "dario_ramos", "link": "https://stackoverflow.com/users/756200/dario-ramos"}, "reply_to_user": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1441221345, "post_id": 32361246, "comment_id": 52595437, "body": "@RyanHaining: That also worked, but I think calling <code>noraw()</code> is cleaner"}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 4, "last_activity_date": 1441224235, "last_edit_date": 1441224235, "creation_date": 1441222206, "answer_id": 32361580, "question_id": 32361246, "link": "https://stackoverflow.com/questions/32361246/terminal-messed-up-after-running-ncurses-program/32361580#32361580", "title": "Terminal messed up after running ncurses program", "body": "<p>You should call <code>endwin()</code> just before exiting, instead of before the <code>getch()</code>.</p>\n\n<p>When you call <code>getch()</code>, <code>ncurses</code> mode is reentered and another call to <code>endwin()</code> is necessary. (See <code>man initscr</code>: \"Calling <code>refresh</code> or <code>doupdate</code> after a temporary escape causes the program to resume visual mode.\" <code>getch()</code> automatically calls <code>wrefresh</code> unless no change has been made to the window; since you haven't turned echoing off, the window is modified by the echo.)</p>\n\n<p>I usually do the <code>endwin</code> call in an <code>atexit()</code> handler, which makes it more likely that the <code>endwin()</code> will execute. To be safer,  you should also make sure that the process is not killed by an uncaught signal such as <code>SIGINT</code> or <code>SIGSEGV</code>, although obviously you can't do anything about <code>SIGKILL</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1441223775, "post_id": 32361630, "comment_id": 52596763, "body": "Upon endwin(), my screen restores to its condition prior to the initscr().  Perhaps you want to simply swap these two lines to pause for the user.  Then, pressing a key will cause endwin() and the restore."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 3, "last_activity_date": 1441222357, "creation_date": 1441222357, "answer_id": 32361630, "question_id": 32361246, "link": "https://stackoverflow.com/questions/32361246/terminal-messed-up-after-running-ncurses-program/32361630#32361630", "title": "Terminal messed up after running ncurses program", "body": "<blockquote>\n<pre><code>endwin(); //Free Ncurses resources\ngetch();\n</code></pre>\n</blockquote>\n\n<p>Try removing any / all \"curses calls\" after endwin().  </p>\n\n<p>In this case, comment out the getch(); and try it.<br>\nYou might review your code to find any additional curses function that occur after endwin().  </p>\n\n<p>After my endwin() call, I have some non-curses log outputs, and a couple of cout's, but no curses ... it is about 20 lines from end of main.</p>\n"}], "owner": {"reputation": 6476, "user_id": 756200, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/828969868943e201978e78585f3d1f30?s=128&d=identicon&r=PG", "display_name": "dario_ramos", "link": "https://stackoverflow.com/users/756200/dario-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2172, "favorite_count": 0, "accepted_answer_id": 32361580, "answer_count": 2, "score": 0, "last_activity_date": 1441267141, "creation_date": 1441220930, "question_id": 32361246, "link": "https://stackoverflow.com/questions/32361246/terminal-messed-up-after-running-ncurses-program", "title": "Terminal messed up after running ncurses program", "body": "<p>This is my program (well, <code>main</code> calls this method for an instance of NCursesViewController):</p>\n\n<pre><code>void NCursesViewController::Run(){\n    initscr(); //Init ncurses standard screen\n    raw();\n    printw(\"WELCOME\");\n    endwin(); //Free Ncurses resources\n    getch();\n}\n</code></pre>\n\n<p>After I run this on an Ubuntu terminal, the terminal remains in some strange state; whatever I type, the cursor does not move. If I press Enter , it does run whatever I typed. So I cannot see what I type... is there any workaround? It's bothersome having to open a terminal every time. I saw in a similar question that they saved and restored the terminal settings, but they used ssh and tty.</p>\n"}, {"tags": ["c++", "eclipse", "debugging", "ccache"], "owner": {"reputation": 21, "user_id": 5293858, "user_type": "registered", "profile_image": "https://graph.facebook.com/927700193954227/picture?type=large", "display_name": "David Ng", "link": "https://stackoverflow.com/users/5293858/david-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1441219539, "creation_date": 1441219539, "question_id": 32360866, "link": "https://stackoverflow.com/questions/32360866/how-to-set-c-breakpoint-in-eclipse-when-source-is-compiled-with-ccache", "title": "How to set C++ breakpoint in eclipse when source is compiled with ccache?", "body": "<p>Recently, our development team is starting to use ccache to do faster compile (the compile is done from sandbox /usr/x).</p>\n\n<p>Now, when I compile from my sandbox (/usr/y), and try to set a breakpoint in the code in Eclipse (GDB (DSF) process launcher), it fails to find the file.\nFurther investigation shows that Eclipse gdb uses the complete path of the file to set a breakpoint (e.g. b /usr/y/untouchedFile.cpp:1234), but the actual path (in the gdb debugger) is actually /usr/x/untouchedFile.cpp.</p>\n\n<p>The only thing that works is to set a breakpoint on the console by typing it, and do a source file mapping when the breakpoint is hit.</p>\n\n<p>I would like to set the breakpoint by clicking on the code line (which used to work before ccache). </p>\n\n<p>I was wondering if there is a way to get around this.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "templates", "vector", "generic-programming"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441219358, "post_id": 32360782, "comment_id": 52594339, "body": "So what is the question?  Is it not working or are you asking if this is the correct way to do this?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441219432, "post_id": 32360782, "comment_id": 52594391, "body": "You don&#39;t need to initialize <code>data</code> to <code>0</code> in a loop. All you need is <code>GenericVector(): data() {}</code>. And you don&#39;t need the template parameters in the <code>operator+</code> parameter. This will do: <code>GenericVector operator+(const GenericVector&amp; vec) const</code>. Other than that, it looks OK. But I have no idea what you are asking."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441219941, "post_id": 32360782, "comment_id": 52594699, "body": "Also, you should probably implement <code>GenericVector&amp; operator+=(const GenericVector&amp;)</code> and use that in <code>operator+</code>."}, {"owner": {"reputation": 1014, "user_id": 3964522, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/001758ad616f18a439765585a40c2e5b?s=128&d=identicon&r=PG&f=1", "display_name": "JaeJun LEE", "link": "https://stackoverflow.com/users/3964522/jaejun-lee"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1441221990, "post_id": 32360782, "comment_id": 52595746, "body": "Thanks, @juanchopanza. I did implement &#39;+=&#39; but omit here for the sake of simplicity:D."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1441220822, "post_id": 32361093, "comment_id": 52595153, "body": "I think, you are missing the specialization for vector of size 1."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1441220868, "post_id": 32361093, "comment_id": 52595176, "body": "Not sure this is an actual gain of, well, anything."}, {"owner": {"reputation": 1014, "user_id": 3964522, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/001758ad616f18a439765585a40c2e5b?s=128&d=identicon&r=PG&f=1", "display_name": "JaeJun LEE", "link": "https://stackoverflow.com/users/3964522/jaejun-lee"}, "edited": false, "score": 0, "creation_date": 1441220869, "post_id": 32361093, "comment_id": 52595177, "body": "Thank you, I&#39;m trying to understand your answer. BTW, what is <code>...</code> in <code>GVector</code> constructor? I&#39;ve never seen those."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1014, "user_id": 3964522, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/001758ad616f18a439765585a40c2e5b?s=128&d=identicon&r=PG&f=1", "display_name": "JaeJun LEE", "link": "https://stackoverflow.com/users/3964522/jaejun-lee"}, "edited": false, "score": 0, "creation_date": 1441220917, "post_id": 32361093, "comment_id": 52595202, "body": "@JaeJunLEE, I suppose, you do not really need to follow this example at this stage. Dietmar is kinda trolling."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1441221363, "post_id": 32361093, "comment_id": 52595449, "body": "@DietmarK&#252;hl, oh yes. I somehow overlooked the whole code. As for trolling, taking into account alleged level of proficiency of OP, and the level of proficiency required to understand the answer, there is a huge gap."}, {"owner": {"reputation": 1014, "user_id": 3964522, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/001758ad616f18a439765585a40c2e5b?s=128&d=identicon&r=PG&f=1", "display_name": "JaeJun LEE", "link": "https://stackoverflow.com/users/3964522/jaejun-lee"}, "edited": false, "score": 0, "creation_date": 1441221442, "post_id": 32361093, "comment_id": 52595483, "body": "Dear @DietmarK&#252;hl, can you suggest one usage for your code?"}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 3, "last_activity_date": 1441222486, "last_edit_date": 1441222486, "creation_date": 1441220386, "answer_id": 32361093, "question_id": 32360782, "link": "https://stackoverflow.com/questions/32360782/generic-vector-class-implementation/32361093#32361093", "title": "Generic Vector Class Implementation", "body": "<p>One approach to avoid the loops in the various operations is to <em>not</em> store an array but use inheritance and specialization to deal with the different number of arguments. Something along the lines of this:</p>\n\n<pre><code>template &lt;typename T, int Size&gt; class GVector;\ntemplate &lt;typename T&gt;\nclass GVector&lt;T, 0&gt; {\npublic:\n    GVector() {}\n    GVector&amp; operator+= (GVector const&amp;) { return *this; }\n    GVector  operator+ (GVector const&amp; other) const {\n        return GVector() += other;\n    }\n    // ...\n};\ntemplate &lt;typename T, int Size&gt;\nclass GVector: public GVector&lt;T, Size - 1&gt; {\n    T value;\npublic:\n    GVector(): GVector&lt;T, Size - 1&gt;(), value() {}\n    template &lt;typename Head, typename... Tail&gt;\n    GVector(T const&amp; head, Tail const&amp;... tail)\n        : GVector&lt;T, Size - 1&gt;(tail...)\n        , value(head) {\n    }\n    GVector&amp; operator+= (GVector const&amp; other) {\n        this-&gt;value += other.value;\n        this-&gt;GVector&lt;T, Size - 1&gt;::operator+= (other);\n        return *this;\n    }\n    GVector operator+ (GVector const&amp; other) const {\n        return GVector(*this) += other;\n    }\n    // ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": false, "score": 1, "last_activity_date": 1441223047, "last_edit_date": 1441223047, "creation_date": 1441222560, "answer_id": 32361679, "question_id": 32360782, "link": "https://stackoverflow.com/questions/32360782/generic-vector-class-implementation/32361679#32361679", "title": "Generic Vector Class Implementation", "body": "<p>There's generally a tradeoff when making code more generic: you reduce code duplication when you can reuse your generic code with different parameters but it usually means somewhat more complex code than the non-generic version and also limits opportunities for optimization. Better compilers and newer C++ features help reduce the tradeoffs but they still exist.</p>\n\n<p>To answer your question, yes it is possible to create a generic vector class that doesn't use <code>for</code> loops to iterate over the elements of the vector. Using <code>for</code> loops is an acceptable implementation, however in my experiments with a <a href=\"https://github.com/mattnewport/mathlib/blob/master/MathLib/include/vector.h\" rel=\"nofollow\">generic vector class</a> I opted not to use them because I found with my compiler that they were not fully unrolled even in optimized builds. </p>\n\n<p>Note - this code is mostly an experiment to investigate the tradeoffs in building a generic vector class. I wouldn't necessarily advocate using a design like this in production.</p>\n\n<p>C++11 <a href=\"https://en.wikipedia.org/wiki/Variadic_template\" rel=\"nofollow\">variadic templates</a> offer a solution to your constructor problem although there are certain issues that come along with them:</p>\n\n<pre><code>template &lt;typename T, size_t N&gt;\nclass Vector {\npublic:\n    static const size_t dimension = N;\n\n    Vector() = default;\n    Vector(const Vector&amp;) = default;\n\n    template &lt;typename... Ts&gt;\n    Vector(T t, Ts&amp;&amp;... ts)\n        : aw({t, std::forward&lt;Ts&gt;(ts)...}) {\n        static_assert(sizeof...(Ts) == N - 1, \"Constructor must be passed N initializers.\");\n    }\n\nprivate:\n    struct ArrayWrapper {\n        T e_[N];\n    } aw;  // ArrayWrapper lets us initialize in constructor initializer\n};\n</code></pre>\n\n<p>They can also be used to avoid looping in operators:</p>\n\n<pre><code>template &lt;size_t I, typename F, typename... Args&gt;\nauto apply(F f, Args&amp;&amp;... args) {\n    return f(args.e(I)...);\n}\n\ntemplate &lt;typename F, size_t... Is, typename... Args&gt;\nauto apply(F f, std::index_sequence&lt;Is...&gt;, Args&amp;&amp;... args) {\n    using vec = std::common_type_t&lt;Args...&gt;;\n    using resvec = Vector&lt;decltype(apply&lt;0&gt;(f, args...)), vec::dimension&gt;;\n    return resvec{apply&lt;Is&gt;(f, args...)...};\n}\n\ntemplate &lt;typename F, typename... Args&gt;\ninline auto memberwise(F f, const Args&amp;... args) {\n    using vec = std::common_type_t&lt;Args...&gt;;\n    return apply(f, std::make_index_sequence&lt;vec::dimension&gt;{}, args...);\n}\n\ntemplate &lt;typename T, size_t N&gt;\ninline Vector&lt;T, N&gt; operator+(const Vector&lt;T, N&gt;&amp; a, const Vector&lt;T, N&gt;&amp; b) {\n    return memberwise(std::plus&lt;&gt;{}, a, b);\n}\n</code></pre>\n\n<p>In my experiments with this approach I found this produces good code in optimized builds with my compiler but it adds quite a lot of overhead in non-optimized builds, more than using a <code>for</code> loop.</p>\n"}], "owner": {"reputation": 1014, "user_id": 3964522, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/001758ad616f18a439765585a40c2e5b?s=128&d=identicon&r=PG&f=1", "display_name": "JaeJun LEE", "link": "https://stackoverflow.com/users/3964522/jaejun-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 972, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1441223047, "creation_date": 1441219186, "last_edit_date": 1441220525, "question_id": 32360782, "link": "https://stackoverflow.com/questions/32360782/generic-vector-class-implementation", "title": "Generic Vector Class Implementation", "body": "<p>I want to implement numerical <code>Vector</code> which has several numerical operations.</p>\n\n<p>I used template to define generic version of vector.</p>\n\n<p>But implementation should be different with concrete implementation like <code>Vector3</code>.</p>\n\n<p>For example, <code>+</code> operation would look like these.</p>\n\n<p><strong>Vector3 implementation</strong></p>\n\n<pre><code>Vector3 operator+(const Vector3&amp; vec3) const{\n    return Vector3(data[0]+vec3.data[0], data[1]+vec3.data[1], data[2]+vec3.data[2]);\n}\n</code></pre>\n\n<p><strong>template implementation</strong></p>\n\n<pre><code>GenericVector operator+(const GenericVector&lt;T,N&gt;&amp; vec) const{\n    GenericVector temp = *this;\n    for(int i=0;i&lt;N;i++)\n    { \n        temp.data[i] += vec.data[i];\n    }\n    return temp;\n}\n</code></pre>\n\n<p>Now that we cannot know how many <code>data</code> it would have, we cannot define constructor like <code>Vector3(x,y,z)</code>. That's why I introduced for loop in <code>+ operator</code> overloading.</p>\n\n<p>Actually when it comes to appearance of codes, <code>Vector3</code> implementation looks better. But it cannot be scaled to different size vectors.</p>\n\n<p>Template's implementation looks less nicer than that of <code>Vector3</code>. But  template version can easily scaled to many size vectors by doing like this.</p>\n\n<pre><code>typedef GenericVector&lt;double, 3&gt; Vector3d;\ntypedef GenericVector&lt;double, 6&gt; Vector6d;\n</code></pre>\n\n<p><strong>I'm not used to template of C++. Is there any one who can point problem of my implementation or understandings?</strong></p>\n\n<p>My question is that in implementation of <code>+ operator</code> in template version, is the choice of introducing for loop for accommodating unknown integer <code>N</code> <strong>right</strong> or <strong>the only choice</strong>? </p>\n\n<p>To simple one question, </p>\n\n<p><strong>Can I avoid for loop in <code>+ operator</code>?</strong></p>\n\n<p>This is parts of my codes. </p>\n\n<pre><code>template &lt;typename T, int N&gt;\nclass GenericVector{\nprotected:\n    T data[N];\npublic:\n    GenericVector()\n    {\n        for(int i=0;i&lt;N;i++)\n        {\n            data[i] = static_cast&lt;T&gt;(0);\n        }\n    }\n\n    GenericVector operator+(const GenericVector&lt;T,N&gt;&amp; vec) const{\n        GenericVector temp = *this;\n        for(int i=0;i&lt;N;i++)\n        {\n            temp.data[i] += vec.data[i];\n        }\n        return temp;\n    }\n\n    //...\n};\n</code></pre>\n"}, {"tags": ["c++", "vb.net", "windows", "winapi"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1441219360, "post_id": 32360767, "comment_id": 52594343, "body": "you can call windows APIs from vb.net. Its called pinvoke <a href=\"https://msdn.microsoft.com/en-us/library/Aa719104(v=VS.71).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/Aa719104(v=VS.71).aspx</a>"}, {"owner": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 1, "creation_date": 1441219481, "post_id": 32360767, "comment_id": 52594423, "body": "also visit  www.PInvoke.Net"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 37205, "user_id": 1070452, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/osssV.jpg?s=128&g=1", "display_name": "\u0147\u024fssa P&#248;ngj\u01e3rdenlarp", "link": "https://stackoverflow.com/users/1070452/%c5%87%c9%8fssa-p%c3%b8ngj%c7%a3rdenlarp"}, "edited": false, "score": 0, "creation_date": 1441226961, "post_id": 32360767, "comment_id": 52598432, "body": "Despite @Plutonix&#39;s recommendation, do not ever visit <a href=\"http://pinvoke.net/\" rel=\"nofollow noreferrer\">pinvoke.net</a>. Most signatures you&#39;ll find there are wrong, and generally fail for 64-bit OS&#39;s. Instead, see <a href=\"https://msdn.microsoft.com/en-us/library/ms235282.aspx\" rel=\"nofollow noreferrer\">Calling Native Functions from Managed Code</a> and <a href=\"https://msdn.microsoft.com/en-us/library/aa288468.aspx\" rel=\"nofollow noreferrer\">Platform Invoke Tutorial</a>. Since WMI is implemented through COM, using <a href=\"https://msdn.microsoft.com/en-us/library/aa645712.aspx\" rel=\"nofollow noreferrer\">COM Interop</a> is likely more appropriate."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4277131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-w9mDieMHtGY/AAAAAAAAAAI/AAAAAAAAAeA/yvxRW8D6QBI/photo.jpg?sz=128", "display_name": "Jordan Paris", "link": "https://stackoverflow.com/users/4277131/jordan-paris"}, "edited": false, "score": 0, "creation_date": 1441224067, "post_id": 32361114, "comment_id": 52596912, "body": "Awesome, looks like using Win32_PowerPlan should do is for me i am just having a hard time getting it to return the current active scheme. Thanks mate"}, {"owner": {"reputation": 1811, "user_id": 4347950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33c2cda3907b3f3014aee555819a8d68?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Dannemann", "link": "https://stackoverflow.com/users/4347950/joshua-dannemann"}, "reply_to_user": {"reputation": 53, "user_id": 4277131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-w9mDieMHtGY/AAAAAAAAAAI/AAAAAAAAAeA/yvxRW8D6QBI/photo.jpg?sz=128", "display_name": "Jordan Paris", "link": "https://stackoverflow.com/users/4277131/jordan-paris"}, "edited": false, "score": 0, "creation_date": 1441229612, "post_id": 32361114, "comment_id": 52599612, "body": "No problem. Glad to be of help."}], "tags": [], "owner": {"reputation": 1811, "user_id": 4347950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/33c2cda3907b3f3014aee555819a8d68?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Dannemann", "link": "https://stackoverflow.com/users/4347950/joshua-dannemann"}, "is_accepted": true, "score": 1, "last_activity_date": 1441220464, "last_edit_date": 1495540329, "creation_date": 1441220464, "answer_id": 32361114, "question_id": 32360767, "link": "https://stackoverflow.com/questions/32360767/how-to-use-the-windows-power-management-api-in-vb-net/32361114#32361114", "title": "How to use the Windows Power Management API in VB.net", "body": "<p>There are a few options at your disposal. I think using WMI in your VB.NET project is probably best. You will need to add references to the System.Management and System.Management.Instrumentation namespaces. Please refer to this page on MSDN for details on working with the code:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms257340(v=vs.80).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ms257340(v=vs.80).aspx</a></p>\n\n<p>Although the following is a C# example, it should provide you with a good idea about how to write queries against WMI in .NET, and it is also somewhat specific to the goals that you have in mind.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15901682/is-there-any-api-function-to-get-the-battery-level-in-windows-desktop-apps\">Is there any API function to get the battery level in Windows Desktop Apps?</a></p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 4277131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-w9mDieMHtGY/AAAAAAAAAAI/AAAAAAAAAeA/yvxRW8D6QBI/photo.jpg?sz=128", "display_name": "Jordan Paris", "link": "https://stackoverflow.com/users/4277131/jordan-paris"}, "is_accepted": false, "score": 1, "last_activity_date": 1441228025, "creation_date": 1441228025, "answer_id": 32363117, "question_id": 32360767, "link": "https://stackoverflow.com/questions/32360767/how-to-use-the-windows-power-management-api-in-vb-net/32363117#32363117", "title": "How to use the Windows Power Management API in VB.net", "body": "<p>I got it all figured out thanks to Joshua. To get the current active scheme...</p>\n\n<pre><code> Try\n        Dim searcher As New ManagementObjectSearcher(\n                \"root\\CIMV2\\power\",\n                \"SELECT * FROM Win32_PowerPlan WHERE IsActive = 'True'\")\n        For Each queryObj As ManagementObject In searcher.Get()\n            TextBox1.Text = queryObj(\"ElementName\")\n        Next\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4277131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-w9mDieMHtGY/AAAAAAAAAAI/AAAAAAAAAeA/yvxRW8D6QBI/photo.jpg?sz=128", "display_name": "Jordan Paris", "link": "https://stackoverflow.com/users/4277131/jordan-paris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1026, "favorite_count": 0, "accepted_answer_id": 32361114, "answer_count": 2, "score": 0, "last_activity_date": 1441228025, "creation_date": 1441219121, "last_edit_date": 1441219551, "question_id": 32360767, "link": "https://stackoverflow.com/questions/32360767/how-to-use-the-windows-power-management-api-in-vb-net", "title": "How to use the Windows Power Management API in VB.net", "body": "<p>I have a program i am creating which integrates a feature that will tell you your current power scheme and has the option to set a pre-configured .pow file. This is very easy to do if i am using the powercfg command from command prompt and i already have that integrated into the program using </p>\n\n<pre><code>Process.start\"cmd\", \"/k powercfg... etc. etc.\" \n</code></pre>\n\n<p>I would much rather be able to use the windows API to call this setting so that i do not have to run a command window every time i want to update this setting and so that i might be able to keep the output of the current scheme dynamic.</p>\n\n<p>From my understanding VB.net does not have the direct ability to use Windows APIs in this way. Doing some research i found that C++ can. I am wondering if there is a way to create a DLL file i can call to with my VB.net script using C++. Or if there is an easier solution to this i would love to know. </p>\n"}, {"tags": ["c++", "point-cloud-library", "point-clouds"], "comments": [{"owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "edited": false, "score": 0, "creation_date": 1441270676, "post_id": 32360744, "comment_id": 52613900, "body": "How about starting with just two point clouds, preferably ones which are clearly align-able? When trying to get those two to align well it should be easier to grasp what&#39;s going wrong. And then go from there."}, {"owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "reply_to_user": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "edited": false, "score": 0, "creation_date": 1441387866, "post_id": 32360744, "comment_id": 52675456, "body": "I did add just two point clouds. The first picture shows that. I had just two clouds of the same corner with a slightly different angle."}, {"owner": {"reputation": 908, "user_id": 2743112, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/100001028070195/picture?type=large", "display_name": "Martijn van Wezel", "link": "https://stackoverflow.com/users/2743112/martijn-van-wezel"}, "edited": false, "score": 0, "creation_date": 1443540219, "post_id": 32360744, "comment_id": 53529612, "body": "What is the output of || std::cout &lt;&lt; icp.getFinalTransformation() &lt;&lt; std::endl; || if you get an identity matrix it didn&#39;t calculate the icp"}], "answers": [{"tags": [], "owner": {"reputation": 496, "user_id": 2724110, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64c562982ccc258e466d84ad98726ee5?s=128&d=identicon&r=PG&f=1", "display_name": "Dawei Yang", "link": "https://stackoverflow.com/users/2724110/dawei-yang"}, "is_accepted": false, "score": 1, "last_activity_date": 1486433256, "creation_date": 1486433256, "answer_id": 42080502, "question_id": 32360744, "link": "https://stackoverflow.com/questions/32360744/icp-produces-alignments-with-high-fitness-values/42080502#42080502", "title": "ICP produces alignments with high Fitness values", "body": "<p>I am also learning how to use ICP with PCL. I found there are several parameters you can set, like </p>\n\n<pre><code>icp.setTransformationEpsilon(1e-6);\nicp.setMaximumIterations(1e6);\n</code></pre>\n\n<p>After this, I found my fitness score better (0.005 to 2e-5).</p>\n"}], "owner": {"reputation": 253, "user_id": 4515407, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Roycj.jpg?s=128&g=1", "display_name": "Noobs DeSroobs", "link": "https://stackoverflow.com/users/4515407/noobs-desroobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1586, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1486433256, "creation_date": 1441219043, "last_edit_date": 1486566343, "question_id": 32360744, "link": "https://stackoverflow.com/questions/32360744/icp-produces-alignments-with-high-fitness-values", "title": "ICP produces alignments with high Fitness values", "body": "<p>I am learning how to use ICP with PCL. As such I wrote a function that reads a series of .pcd files from a given folder.</p>\n\n<pre><code>//Reads all PCD files in a folder. Specify the path without the last '/' and the number on the last and first file: xxx.pcb.\n//Returns null if something goes wrong. Otherwise returns a single global pointcloud with each subcloud colour coded.\npcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr LoadPCDFiles(std::string FolderPath, int FinalFile, int FirstFile)\n{\n    //Initialize some variables we need.\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr cloud(new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;());\n    pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr Global(new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;());\n    srand(time(NULL));\n    int FileIter = FirstFile;\n    std::string BasePathString = FolderPath + \"/%.3d.pcd\";\n    Eigen::Matrix4f AccumulatedTransformationMatrix = Eigen::Matrix4f::Identity();\n\n    while (FileIter &lt;= FinalFile) {\n        char buffer[260];\n        std::sprintf(buffer, BasePathString.c_str(), FileIter);\n        std::string path(buffer);\n        cloud = ReadPCDFile(path, std::rand() % 256, std::rand() % 256, std::rand() % 256);\n        if (cloud == NULL) return NULL;//Error\n        //pcl::transformPointCloud&lt;pcl::PointXYZRGB&gt;(*cloud, *cloud, Eigen::Vector3f(cloud-&gt;sensor_origin_.x(), cloud-&gt;sensor_origin_.y(), cloud-&gt;sensor_origin_.z()), cloud-&gt;sensor_orientation_);\n        //pcl::transformPointCloud&lt;pcl::PointXYZRGB&gt;(*cloud, *cloud, AccumulatedTransformationMatrix);\n\n        int AlignmentIter = 0; //The number of alignment attemps we have made.\n        int MaxAlignment = 25; //Maax number of attempts allowed.\n        float LastFitness = VTK_FLOAT_MAX;\n        bool hasConverged = false;\n        std::cout &lt;&lt; \"Loaded PCD: \" &lt;&lt; path &lt;&lt; std::endl;\n        if (FileIter != FirstFile) {\n\n            while (AlignmentIter &lt; MaxAlignment &amp;&amp; LastFitness &gt; 0.001) {\n                pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr Temp(new pcl::PointCloud&lt;pcl::PointXYZRGB&gt;());\n                pcl::IterativeClosestPoint&lt;pcl::PointXYZRGB, pcl::PointXYZRGB&gt; icp;\n                icp.setInputSource(cloud);\n                icp.setInputTarget(Global);\n\n                icp.align(*Temp);\n\n                float CurrentFitness = icp.getFitnessScore();\n                hasConverged = icp.hasConverged();\n                std::cout &lt;&lt; \"Alignment value: \" &lt;&lt; CurrentFitness &lt;&lt; std::endl;\n\n                if (abs(LastFitness - CurrentFitness) &lt; 0.0001) { break; }\n\n                cloud = Temp;\n                LastFitness = CurrentFitness;\n                AlignmentIter++;\n            }\n\n\n            //AccumulatedTransformationMatrix = AccumulatedTransformationMatrix * icp.getFinalTransformation();\n            if (hasConverged) {\n                *Global = *Global + *cloud;\n\n                std::cout &lt;&lt; \"Updated global cloud: \" &lt;&lt; (*Global).size() &lt;&lt; std::endl;\n            } else {\n                std::cout &lt;&lt; \"Unable to align the clouds.\" &lt;&lt; std::endl;\n            }\n        } else {\n            *Global = *cloud;\n            std::cout &lt;&lt; \"First subcloud added.\" &lt;&lt; std::endl;\n        }\n\n\n\n        FileIter++;\n    }\n\n    std::cout &lt;&lt; \"Merged clouds.\" &lt;&lt; std::endl;\n    return Global;\n}\n</code></pre>\n\n<p>However, this produces some very messy clouds. </p>\n\n<p><img src=\"https://puu.sh/jXBTL/b90d3f1c24.png\" alt=\"Two simple PCs of a corner\"></p>\n\n<p>This had a fitness value of just over 0.052.\n<img src=\"https://puu.sh/jXw78/7b623c98c5.png\" alt=\"An entire room of PCs\"></p>\n\n<p>This had fitness values in the range 0.0030 - 0.0856. <a href=\"http://puu.sh/jXEGm/34b27f0c0d.png\" rel=\"nofollow noreferrer\">All values.</a></p>\n\n<p>Each cloud I have given a random colour to highlight what cloud ended up where. </p>\n\n<p>The <code>ReadPCDFile()</code> function simply reads the file specified and adds the random colour. The commented out lines of code is simply my desperate messing with some ideas, but ultimately they all failed. </p>\n\n<p>This is an example of one of the PCD files.</p>\n\n<pre><code># .PCD v.7 - Point Cloud Data file format\nVERSION .7\nFIELDS x y z\nSIZE 4 4 4\nTYPE F F F\nCOUNT 1 1 1\nWIDTH 13509\nHEIGHT 1\nVIEWPOINT 7.9950223 0.60561943 0.4050533 - 0.3022367 0.019049812 0.95157933 0.052790195\nPOINTS 13509\nDATA ascii\n- 1.0610341 - 0.55464476 1.933659\n- 1.0921015 - 0.5514014 1.9721884\n- 1.0254035 - 0.55889213 1.922963\n- 1.0736096 - 0.54884547 1.9840248\n- 1.1002594 - 0.5510374 1.9640691\n- 1.05391 - 0.556308 1.9436798\n- 1.0801263 - 0.5577761 1.9309663\n- 1.1306747 - 0.54748887 1.9968926\n- 0.98958766 - 0.55052584 1.926852\n.\n.\n.\n</code></pre>\n\n<p>I hope you can help. Do not hesitate to ask for any info that I can provide.</p>\n\n<p>Thank you very much for your help.</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5106417"}, "edited": false, "score": 0, "creation_date": 1441218926, "post_id": 32360686, "comment_id": 52594101, "body": "text.substring(0,positionof(what)) perhaps?"}], "answers": [{"comments": [{"owner": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "edited": false, "score": 0, "creation_date": 1441219549, "post_id": 32360723, "comment_id": 52594463, "body": "You should accept the answer if it solved your problem"}], "tags": [], "owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "is_accepted": true, "score": 9, "last_activity_date": 1441218980, "creation_date": 1441218980, "answer_id": 32360723, "question_id": 32360686, "link": "https://stackoverflow.com/questions/32360686/c-find-string-before-text/32360723#32360723", "title": "C++ Find string before text", "body": "<p>You need to supply two arguments to <code>substr()</code>:</p>\n\n<pre><code>foundtext = text.substr(0, text.find(\"what \"));\n</code></pre>\n\n<p>The first (<code>0</code>) is the starting position and the second is the length.</p>\n"}], "owner": {"reputation": 39, "user_id": 5196288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ffa763b3397060b9f3c9713f200537e1?s=128&d=identicon&r=PG&f=1", "display_name": "Hennry", "link": "https://stackoverflow.com/users/5196288/hennry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4997, "favorite_count": 0, "accepted_answer_id": 32360723, "answer_count": 1, "score": 0, "last_activity_date": 1441218980, "creation_date": 1441218854, "question_id": 32360686, "link": "https://stackoverflow.com/questions/32360686/c-find-string-before-text", "title": "C++ Find string before text", "body": "<p>The given code gets all the text <strong>after</strong> a specific point in a string and works very well. </p>\n\n<pre><code>if(text.find(\"what \") != std::string::npos)\n        {\n            foundtext = text.substr(text.find(\"what \") + 5);\n            cout &lt;&lt; foundtext &lt;&lt; endl;\n        }\n</code></pre>\n\n<p>The next problem that I can't figure out even after searching, is to find the material <strong>before</strong> a specific point. Unfortunetely it wasn't as simple as turning the +5 into a -5. How could I fint the string that comes before \"what \"?</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "optimization"], "comments": [{"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441219060, "post_id": 32360605, "comment_id": 52594170, "body": "What type of <code>ConnectionGroups</code>, <code>Connection</code>. What is <code>ConnectionQuickAccess</code>?"}, {"owner": {"reputation": 65, "user_id": 5293810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cba20c068dd3a925c32c74340d421e?s=128&d=identicon&r=PG&f=1", "display_name": "NIZGTR", "link": "https://stackoverflow.com/users/5293810/nizgtr"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441219722, "post_id": 32360605, "comment_id": 52594577, "body": "<code>ConnectionGroups</code> is a <code>vector&lt;vector&lt;int&gt;&gt;</code> the <code>int</code>&#39;s refer to indecis in <code>ConnectionQuickAccess</code>, <code>Connection</code> simply holds 2 pointers to the points it connects and other data such as it&#39;s group index and <code>ConnectionQuickAccess</code> is a <code>vector&lt;Connection*&gt;</code> acts as a fast way to access all created Connections. The actual Connection objects are managed elsewhere."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441220803, "post_id": 32360605, "comment_id": 52595146, "body": "I think that if you had instead of <code>vector&lt;Connection*&gt;</code> a container(s) which hold the data sorted like <code>set</code> or <code>map</code> according to <code>Point1</code> and/or <code>Point2</code>, the search would take 4*log(n) instead of 4*n and the whole algorithm would be n*log(n) instead of n^2."}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441221225, "post_id": 32360605, "comment_id": 52595378, "body": "... or even <code>unordered_map</code> or <code>undordered_set</code> of C++11 which has O(1) complexity of searching in it..."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5293810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cba20c068dd3a925c32c74340d421e?s=128&d=identicon&r=PG&f=1", "display_name": "NIZGTR", "link": "https://stackoverflow.com/users/5293810/nizgtr"}, "edited": false, "score": 0, "creation_date": 1441229551, "post_id": 32361430, "comment_id": 52599577, "body": "Could you elaborate on the &quot;hash containing all existing end-points&quot; bit? How would you recommend it be implemented?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 65, "user_id": 5293810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cba20c068dd3a925c32c74340d421e?s=128&d=identicon&r=PG&f=1", "display_name": "NIZGTR", "link": "https://stackoverflow.com/users/5293810/nizgtr"}, "edited": false, "score": 0, "creation_date": 1441229731, "post_id": 32361430, "comment_id": 52599677, "body": "@NIZGTR: since mere existence of the key is relevant, a <code>std::unordered_set&lt;EndPoint&gt;</code> would do the trick. If the uniqueness of an endpoint is used to some benefit it is likely that you actually might want to associate information with the end point, i.e., you&#39;d use <code>std::unordered_map&lt;EndPoint, Information&gt;</code> with whatever information is convenient."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 2, "last_activity_date": 1441221644, "creation_date": 1441221644, "answer_id": 32361430, "question_id": 32360605, "link": "https://stackoverflow.com/questions/32360605/fastest-way-to-group-a-large-number-of-elements-in-c/32361430#32361430", "title": "Fastest way to Group a large number of Elements in C++", "body": "<p>It seems the code posted processes one connection, i.e., it is called <code>n</code> times where <code>n</code> is the number of connections. The algorithm is clearly <code>O(n * n)</code>: the time it takes to add new connections grows quadratic - something you generally don't want.</p>\n\n<p>Unless memory is the primary constraints, I'd simple store for each group a hash containing all existing end-points and check against that, i.e., something along the lines of</p>\n\n<pre><code>for (std:size_t i(0); i != ConnectionGroups.size(); ++i) {\n    if (ConnectionGroups[i].size () &lt; MaxConnectionGroupSize)\n        &amp;&amp; !ConnectionGroups[i].usesEndPoint(Connection.Point1)\n        &amp;&amp; !ConnectionGroups[i].usesEndPoint(Connection.Point2)) {\n        ConnectionGroups[i].addEndPoint(Connection.Point1);\n        ConnectionGroups[i].addEndPoint(Connection.Point2);\n        ConnectionGroups[i].addConnection(Connection);\n    }\n}\n</code></pre>\n\n<p>Obviously, <code>ConnectionGroups[i]</code> would be a combination of connections and a hash of end-points accessed with the corresponding functions.</p>\n"}], "owner": {"reputation": 65, "user_id": 5293810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1cba20c068dd3a925c32c74340d421e?s=128&d=identicon&r=PG&f=1", "display_name": "NIZGTR", "link": "https://stackoverflow.com/users/5293810/nizgtr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "accepted_answer_id": 32361430, "answer_count": 1, "score": 2, "last_activity_date": 1441221644, "creation_date": 1441218577, "question_id": 32360605, "link": "https://stackoverflow.com/questions/32360605/fastest-way-to-group-a-large-number-of-elements-in-c", "title": "Fastest way to Group a large number of Elements in C++", "body": "<p>I need a way to quickly group a large number of connections, currently 300k, into groups where each group has a max number of elements allowed, currently 14k, and all of the connections in the same group cannot be connected to the same point. Basically, each connection is between two points and I need them grouped into buckets where the connections in a bucket don't share a point. Hopefully that makes sense.</p>\n\n<p>Here's what I have so far, which works but is rather slow:</p>\n\n<pre><code>for (size_t i = 0; i &lt; ConnectionGroups.size(); i++)\n{\n    auto&amp; group = ConnectionGroups[i];\n    if (group.size() &lt; MaxConnectionGroupSize) // Has room for us...\n    {\n        int validGroupIdx = i;\n        for (size_t gIdx = 0; gIdx &lt; group.size(); gIdx++)\n        {\n            const auto groupConnection = ConnectionsQuickAccess[group[gIdx]];\n\n            // Are we directly connected to one of the Connections in this group by one degree...\n            if (Connection.Point1 == groupConnection-&gt;Point1 || Connection.Point1 == groupConnection-&gt;Point2 ||\n                Connection.Point2 == groupConnection-&gt;Point1 || Connection.Point2 == groupConnection-&gt;Point2)\n            {\n                validGroupIdx = -1;\n                break; // We are, check the next group\n            }\n        }\n\n        if (validGroupIdx != -1)\n        {\n            ConnectionGroups[i].push_back(Connection.Slot);\n            Connection.Group = i;\n            return;\n        }\n        else\n            continue;\n    }\n}\n\n// All groups are full, create a new group\nvector&lt;int&gt; newGroup;\nnewGroup.push_back(Connection.Slot);\nConnectionGroups.push_back(newGroup);\n</code></pre>\n\n<p>This code takes 29.68s to go through 300k connections, is there a faster way of doing this? Or maybe a different approach to this?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "ifstream"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441218236, "post_id": 32360475, "comment_id": 52593701, "body": "I assume you&#39;re using VC++ as your compiler, from the &lt;Windows.h&gt; include. Are you compiling as 64 bit or 32 bit?"}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441218371, "post_id": 32360475, "comment_id": 52593792, "body": "32 bit, I didn&#39;t think it would matter with such low numbers?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441218438, "post_id": 32360475, "comment_id": 52593832, "body": "Probably not, but it fell under the category of &quot;nice to know&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441218669, "post_id": 32360475, "comment_id": 52593960, "body": "@MyUsername112358 What exactly did you actually observe when debugging? You did I&#39;d suppose."}, {"owner": {"reputation": 3277, "user_id": 4886927, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc490fc8a95b40b0b752e661f37ab946?s=128&d=identicon&r=PG&f=1", "display_name": "pasaba por aqui", "link": "https://stackoverflow.com/users/4886927/pasaba-por-aqui"}, "edited": false, "score": 1, "creation_date": 1441219826, "post_id": 32360475, "comment_id": 52594639, "body": "hints: add &quot;ios::binary&quot; in myFile constructor; dump bytes 16895-16897 of file; close and open file between each test."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1441219980, "post_id": 32360475, "comment_id": 52594716, "body": "It worked, but I don&#39;t understand why? Isn&#39;t 1 byte in binary the same as 1 byte in text mode?"}, {"owner": {"reputation": 3277, "user_id": 4886927, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc490fc8a95b40b0b752e661f37ab946?s=128&d=identicon&r=PG&f=1", "display_name": "pasaba por aqui", "link": "https://stackoverflow.com/users/4886927/pasaba-por-aqui"}, "edited": false, "score": 0, "creation_date": 1441220172, "post_id": 32360475, "comment_id": 52594831, "body": "Let me bet: character 16896 has value &quot;26=0x1a&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1441219530, "post_id": 32360738, "comment_id": 52594452, "body": "The file is 120 MB... It&#39;s way bigger than 16896 bytes."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1441219678, "post_id": 32360738, "comment_id": 52594551, "body": "@MyUsername112358 How did you determine that? Be as precise as you can."}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1441219816, "post_id": 32360738, "comment_id": 52594630, "body": "myFile.seekg(0, std::ios_base::end); \tcout &lt;&lt; &quot;File size: &quot; &lt;&lt; myFile.tellg() &lt;&lt; std::endl; // returns 123153562"}, {"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 0, "creation_date": 1441219926, "post_id": 32360738, "comment_id": 52594693, "body": "Reading in binary makes it works, but why? Wouldn&#39;t 1 byte in text mode be the same as 1 byte in binary?"}, {"owner": {"reputation": 3277, "user_id": 4886927, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc490fc8a95b40b0b752e661f37ab946?s=128&d=identicon&r=PG&f=1", "display_name": "pasaba por aqui", "link": "https://stackoverflow.com/users/4886927/pasaba-por-aqui"}, "edited": false, "score": 0, "creation_date": 1441221380, "post_id": 32360738, "comment_id": 52595459, "body": "Read a file in ascii mode means read the data and return whatever the operating system decides."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1441219021, "creation_date": 1441219021, "answer_id": 32360738, "question_id": 32360475, "link": "https://stackoverflow.com/questions/32360475/ifstream-read-fails-at-a-specific-size-unrelated-to-file-size/32360738#32360738", "title": "Ifstream read fails at a specific size (unrelated to file size)", "body": "<p>You have a 16,896 byte file. The first read works fine. The second read encounters an end of file and can only read 16,896 bytes. Your third read fails because you didn't clear the end of file flag on your stream.</p>\n\n<p>You may also have a 120MB file, but that's not relevant. Check the size of the file in code. (Or it may be 120MB of binary data but you're reading it in text mode.)</p>\n"}, {"comments": [{"owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "edited": false, "score": 1, "creation_date": 1441219675, "post_id": 32360745, "comment_id": 52594549, "body": "I&#39;m aware that WIndows doesn&#39;t show the filesize accurately, but I made this file myself and it&#39;s way bigger than 16,896 bytes. (It&#39;s avout 120 MB)"}], "tags": [], "owner": {"reputation": 380, "user_id": 4776786, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/mUPI0.jpg?s=128&g=1", "display_name": "nanomader", "link": "https://stackoverflow.com/users/4776786/nanomader"}, "is_accepted": false, "score": 0, "last_activity_date": 1441219045, "last_edit_date": 1490005096, "creation_date": 1441219045, "answer_id": 32360745, "question_id": 32360475, "link": "https://stackoverflow.com/questions/32360475/ifstream-read-fails-at-a-specific-size-unrelated-to-file-size/32360745#32360745", "title": "Ifstream read fails at a specific size (unrelated to file size)", "body": "<p>You wrote </p>\n\n<blockquote>\n  <p>(although I have not checked if the data is correct) </p>\n</blockquote>\n\n<p>Do this, because i think the data is correct.</p>\n\n<p>I assume that you're using windows, so:\n<a href=\"http://blogs.msdn.com/b/oldnewthing/archive/2011/03/15/10140985.aspx\" rel=\"nofollow noreferrer\">Why can't Explorer decide what size a file is?</a></p>\n\n<p>also <a href=\"https://superuser.com/questions/567175/why-is-the-folder-size-in-properties-different-from-the-total-file-folder-size\">https://superuser.com/questions/567175/why-is-the-folder-size-in-properties-different-from-the-total-file-folder-size</a></p>\n"}, {"tags": [], "owner": {"reputation": 3277, "user_id": 4886927, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/fc490fc8a95b40b0b752e661f37ab946?s=128&d=identicon&r=PG&f=1", "display_name": "pasaba por aqui", "link": "https://stackoverflow.com/users/4886927/pasaba-por-aqui"}, "is_accepted": true, "score": 6, "last_activity_date": 1441220622, "creation_date": 1441220622, "answer_id": 32361161, "question_id": 32360475, "link": "https://stackoverflow.com/questions/32360475/ifstream-read-fails-at-a-specific-size-unrelated-to-file-size/32361161#32361161", "title": "Ifstream read fails at a specific size (unrelated to file size)", "body": "<p>In Windows environment and text files, a character with value 26=0x1A=^Z is taken as \"end fo file\".</p>\n\n<p>For this reason, if file is not open as binary, an unexpected eof can be received even when file is bigger.</p>\n\n<p>See wikipedia \"End of file\" (<a href=\"https://en.wikipedia.org/wiki/End-of-file\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/End-of-file</a>):</p>\n\n<p><em>In Microsoft's DOS and Windows (and in CP/M and many DEC operating systems), reading from the terminal will never produce an EOF. Instead, programs recognize that the source is a terminal (or other \"character device\") and interpret a given reserved character or sequence as an end-of-file indicator; most commonly this is an ASCII Control-Z, code 26.</em> </p>\n"}], "owner": {"reputation": 1147, "user_id": 3137789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b65ef8041f0b9d2a25d50ba550cb9fe9?s=128&d=identicon&r=PG&f=1", "display_name": "MyUsername112358", "link": "https://stackoverflow.com/users/3137789/myusername112358"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1467, "favorite_count": 0, "accepted_answer_id": 32361161, "answer_count": 3, "score": 3, "last_activity_date": 1441221296, "creation_date": 1441218021, "last_edit_date": 1441221296, "question_id": 32360475, "link": "https://stackoverflow.com/questions/32360475/ifstream-read-fails-at-a-specific-size-unrelated-to-file-size", "title": "Ifstream read fails at a specific size (unrelated to file size)", "body": "<p>I'm trying to read a file and I realized that it would fail because I would be trying to read too much data, even though the file is much bigger than what I'm trying to read.</p>\n\n<p>The file is 120 MB, and my ifstream fails at 12967 bytes (even though it starts acting weird at 12801.</p>\n\n<p>Here is code illustrating my problem:</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nusing std::ifstream;\nusing std::cout;\n\n#define CORRECT_SIZE 12800\n#define CORRECT_BUT_WIERD 12966\n#define INCORRECT_SIZE 12967\n\nbool check_error_bits(ifstream* f);\n\nint main()\n{\n    ifstream myFile(\"myfile.txt\");\n    char c[CORRECT_SIZE];\n    char c2[CORRECT_BUT_WIERD];\n    char c3[INCORRECT_SIZE];\n\n    /*\n     * TEST A (works fine)\n    */\n    myFile.seekg(0, std::ios_base::beg);\n    myFile.read(c, CORRECT_SIZE);\n    check_error_bits(&amp;myFile);\n    cout &lt;&lt; myFile.tellg() &lt;&lt; std::endl; // Here, tellg() returns 12800\n\n    /*\n     * TEST B (works too, but acts wierd)\n     */\n    myFile.seekg(0, std::ios_base::beg);\n    myFile.read(c2, CORRECT_BUT_WIERD);\n    check_error_bits(&amp;myFile);\n    cout &lt;&lt; myFile.tellg() &lt;&lt; std::endl; // Here, tellg() returns 16896\n\n    /*\n     * TEST C (FAIL)\n    */\n    myFile.seekg(0, std::ios_base::beg);\n    myFile.read(c3, INCORRECT_SIZE);\n    check_error_bits(&amp;myFile);\n    cout &lt;&lt; myFile.tellg() &lt;&lt; std::endl; // Here, tellg() returns -1\n\n    system(\"pause\");\n}\n\nbool check_error_bits(ifstream* f)\n{\n    bool stop = false;\n\n    if (f-&gt;eof())\n    {\n        char msg[500];\n        strerror_s(msg, errno);\n        cout &lt;&lt; \"1: \" &lt;&lt; msg &lt;&lt; std::endl;\n    }\n\n    if (f-&gt;fail())\n    {\n        char msg[500];\n        strerror_s(msg, errno);\n        cout &lt;&lt; \"2: \" &lt;&lt; msg &lt;&lt; std::endl;\n        stop = true;\n    }\n\n    if (f-&gt;bad())\n    {\n        char msg[500];\n        strerror_s(msg, errno);\n        cout &lt;&lt; \"3: \" &lt;&lt; msg &lt;&lt; std::endl;\n        stop = true;\n    }\n\n    return stop;\n}\n</code></pre>\n\n<p>Trying to read less than 12800 bytes works perfectly well. From 128001 to 12966, it works (although I have not checked if the data is correct), but tellg() returns non-sense. After 12966, read simply fails.</p>\n\n<p>The console output of that program is:</p>\n\n<pre><code>12800\n16896\n1: No error\n2: No error\n-1\nPress any key to continue . . .\n</code></pre>\n\n<p>Any help would be appreciated!</p>\n"}, {"tags": ["c++", "stable-sort"], "comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 3, "creation_date": 1441217525, "post_id": 32360266, "comment_id": 52593341, "body": "Your <code>getVal</code> returns <code>void</code>. Should perhaps be <code>int</code>?"}, {"owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "edited": false, "score": 2, "creation_date": 1441217622, "post_id": 32360266, "comment_id": 52593385, "body": "... and actually return the value and not just print it."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1441217609, "creation_date": 1441217609, "answer_id": 32360331, "question_id": 32360266, "link": "https://stackoverflow.com/questions/32360266/stable-sort-in-c/32360331#32360331", "title": "stable_sort in C++", "body": "<p>The problem is with</p>\n\n<pre><code>void getVal() {cout &lt;&lt; x &lt;&lt; endl; };\n</code></pre>\n\n<p>It returns <code>void</code> instead of some value.  </p>\n\n<p>When you use it in <code>return b1-&gt;getVal() &lt; b2-&gt;getVal();</code> it boils down to <code>return void &lt; void;</code> which will not compile.</p>\n\n<p>You should be able to change it to</p>\n\n<pre><code>int getVal() { return x; };\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 5293764, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210947209689721/picture?type=large", "display_name": "ironman89", "link": "https://stackoverflow.com/users/5293764/ironman89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 1, "accepted_answer_id": 32360331, "answer_count": 1, "score": 0, "last_activity_date": 1441217609, "creation_date": 1441217379, "question_id": 32360266, "link": "https://stackoverflow.com/questions/32360266/stable-sort-in-c", "title": "stable_sort in C++", "body": "<p>Im trying to use stable_sort in order to sort a vector of pointers</p>\n\n<p>to a certain class. I've a code like this : </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\nclass B\n{\n    public :\n        B(int y, int j) {x = y, r = j;};\n\n        void getVal() {cout &lt;&lt; x &lt;&lt; endl; };\n\n        int x;\n        int r;\n};\n\n\nbool compareB(B* b1, B* b2)\n{\n    return b1-&gt;getVal() &lt; b2-&gt;getVal();\n}\n\nint main()\n{\n    B b1(3, 4), b2(-5, 7), b3(12, 111);\n\n    vector&lt;B*&gt; myVec;\n    myVec.push_back(&amp;b1);\n    myVec.push_back(&amp;b2);\n    myVec.push_back(&amp;b3);\n\n    std::stable_sort(myVec.begin(), myVec.end(), compareB);\n    for (size_t size = 0; size &lt; myVec.size(); ++size)\n    {\n        myVec[size]-&gt;getVal();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>However, I get the foolowing error while compiling it : </p>\n\n<p>\"error: invalid operands of types 'void' and 'void' to binary 'operator&lt;'\n  return b1->getVal() &lt; b2->getVal();\"</p>\n\n<p>Can someone help me ?</p>\n"}, {"tags": ["c++", "windows", "winapi", "accessibility", "win-universal-app"], "comments": [{"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1441236346, "post_id": 32360149, "comment_id": 52601843, "body": "Have you tried <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684919%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>QueryFullProcessImageName</code></a>?"}, {"owner": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "reply_to_user": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "edited": false, "score": 0, "creation_date": 1441300855, "post_id": 32360149, "comment_id": 52634094, "body": "Yes and it still returns a path to ApplicationFrameHost.exe, since the process_handle returned is the helper process that created the window."}], "answers": [{"tags": [], "owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "is_accepted": false, "score": 11, "last_activity_date": 1441924146, "creation_date": 1441924146, "answer_id": 32512624, "question_id": 32360149, "link": "https://stackoverflow.com/questions/32360149/name-of-process-for-active-window-in-windows-8-10/32512624#32512624", "title": "Name of process for active window in Windows 8/10", "body": "<p>Here is a small console app application that continuously (so you can test it easily selecting different windows on your desktop) display information about the current foreground window process and store process, if any.</p>\n\n<p>Apps can have a window hierarchy that can span multiple processes. What I do here is search the first sub window that has the 'Windows.UI.Core.CoreWindow' class name.</p>\n\n<p>This app uses the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee684009.aspx\">UIAutomation API</a> (and also smart pointers, smart BSTRs and smart VARIANTs provided by the #import directive). I suppose you can do the same with standard Windows SDK, but I find the UIAutomation used this way quite elegant.</p>\n\n<pre><code>#include \"stdafx.h\"\n#import \"UIAutomationCore.dll\"\nusing namespace UIAutomationClient;\n\nint main()\n{\n    // initialize COM, needed for UIA\n    CoInitialize(NULL);\n\n    // initialize main UIA class\n    IUIAutomationPtr pUIA(__uuidof(CUIAutomation));\n\n    do\n    {\n        // get the Automation element for the foreground window\n        IUIAutomationElementPtr foregroundWindow = pUIA-&gt;ElementFromHandle(GetForegroundWindow());\n        wprintf(L\"pid:%i\\n\", foregroundWindow-&gt;CurrentProcessId);\n\n        // prepare a [class name = 'Windows.UI.Core.CoreWindow'] condition\n        _variant_t prop = L\"Windows.UI.Core.CoreWindow\";\n        IUIAutomationConditionPtr condition = pUIA-&gt;CreatePropertyCondition(UIA_ClassNamePropertyId, prop);\n\n        // get the first element (window hopefully) that satisfies this condition\n        IUIAutomationElementPtr coreWindow = foregroundWindow-&gt;FindFirst(TreeScope::TreeScope_Children, condition);\n        if (coreWindow)\n        {\n            // get the process id property for that window\n            wprintf(L\"store pid:%i\\n\", coreWindow-&gt;CurrentProcessId);\n        }\n\n        Sleep(1000);\n    } while (TRUE);\n\ncleanup:\n    CoUninitialize();\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1441931408, "post_id": 32513271, "comment_id": 52886102, "body": "Comparing process ID to what?  Modern (Windows Store-style) applications don&#39;t own top-level USER32 windows, so getting the right HWND to pass to <code>GetWindowThreadProcessId()</code> is non-trivial."}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1441933569, "post_id": 32513271, "comment_id": 52886610, "body": "The snapshot doesn&#39;t require an hwnd.  It can be used to get a list of all the processes in the system.  Then you can filter out an entry out of that list based on what you do know about the process.  Presumably you know <i>something</i> about it (like its parent process id)."}, {"owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1443574995, "post_id": 32513271, "comment_id": 53545831, "body": "@Ben Voigt, I&#39;ll remove the bit about GetWindowThreadProcessId() since, as you mentioned, there is no hwnd."}], "tags": [], "owner": {"reputation": 2237, "user_id": 1219722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f308a0947ea106f91b5ba413cd9c04c?s=128&d=identicon&r=PG", "display_name": "Dmitry Rubanovich", "link": "https://stackoverflow.com/users/1219722/dmitry-rubanovich"}, "is_accepted": false, "score": 2, "last_activity_date": 1443575053, "last_edit_date": 1443575053, "creation_date": 1441928463, "answer_id": 32513271, "question_id": 32360149, "link": "https://stackoverflow.com/questions/32360149/name-of-process-for-active-window-in-windows-8-10/32513271#32513271", "title": "Name of process for active window in Windows 8/10", "body": "<p>Does taking snapshot of running processes and pulling the name out of it by comparing process id not work?\nFull reference here:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686837(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms686837(v=vs.85).aspx</a></p>\n\n<p>But you fix the snapshot with CreateToolhelp32Snapshot().</p>\n\n<p>Or from WTSEnumerateProcesses() and surrounding API?</p>\n\n<p>Pretty sure it worked in Win 8.  Is it broken in 10? </p>\n"}, {"comments": [{"owner": {"reputation": 3067, "user_id": 2216021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ed9600f24dd9e3e96a2191dd87f9832?s=128&d=identicon&r=PG", "display_name": "Prabindh", "link": "https://stackoverflow.com/users/2216021/prabindh"}, "edited": false, "score": 0, "creation_date": 1472037240, "post_id": 32513438, "comment_id": 65589003, "body": "A late observation - This works on Windowed mode, does not work with fullscreen UWP apps on Win10 (returns the ApplicationFrameHost.exe pid for both parent and child in the enumeration path)."}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1522907682, "post_id": 32513438, "comment_id": 86339833, "body": "This only works if UW application is already active and running. If you are doing real-time monitoring of apps using <code>SetWinEventHook</code> and try the above code then it would still return ApplicationFrameHost.exe but however it will work after we switch to another application and then switch back again."}], "tags": [], "owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": true, "score": 18, "last_activity_date": 1441929662, "creation_date": 1441929662, "answer_id": 32513438, "question_id": 32360149, "link": "https://stackoverflow.com/questions/32360149/name-of-process-for-active-window-in-windows-8-10/32513438#32513438", "title": "Name of process for active window in Windows 8/10", "body": "<p>Be sure to use the Spy++ utility when you want to reverse-engineer something like this.  Included with Visual Studio, you need the 64-bit version in Common7\\Tools\\spyxx_amd64.exe.  Use Search > Find Window and drag the bullseye to a UWP app, like Weather.</p>\n\n<p>You'll see the window you'll find with GetForegroundWindow(), it has at least 3 child windows:</p>\n\n<ul>\n<li>ApplicationFrameTitleBarWindow</li>\n<li>ApplicationFrameInputSinkWindow</li>\n<li>Windows.Core.UI.CoreWindow, that's the host window for the UWP app and the one you are interested in.  Right-click it and select Properties, Process tab, click the Process ID.  That takes you to the real owner process you want to know.</li>\n</ul>\n\n<p>So you just need to make an extra step from the code you already have, you just have to enumerate the child windows and look for one with a different owner process.  Some C code, trying to make it as universal as possible without making too many assumptions and not enough error checking:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Windows.h&gt;\n\ntypedef struct {\n    DWORD ownerpid;\n    DWORD childpid;\n} windowinfo;\n\nBOOL CALLBACK EnumChildWindowsCallback(HWND hWnd, LPARAM lp) {\n    windowinfo* info = (windowinfo*)lp;\n    DWORD pid = 0;\n    GetWindowThreadProcessId(hWnd, &amp;pid);\n    if (pid != info-&gt;ownerpid) info-&gt;childpid = pid;\n    return TRUE;\n}\n\nint main()\n{\n    Sleep(2000);\n    HWND active_window = GetForegroundWindow();\n    windowinfo info = { 0 };\n    GetWindowThreadProcessId(active_window, &amp;info.ownerpid);\n    info.childpid = info.ownerpid;\n    EnumChildWindows(active_window, EnumChildWindowsCallback, (LPARAM)&amp;info);\n    HANDLE active_process = OpenProcess(PROCESS_QUERY_INFORMATION, FALSE, info.childpid);\n    WCHAR image_name[MAX_PATH] = { 0 };\n    DWORD bufsize = MAX_PATH;\n    QueryFullProcessImageName(active_process, 0, image_name, &amp;bufsize);\n    wprintf(L\"%s\\n\", image_name);\n    CloseHandle(active_process);\n    return 0;\n}\n</code></pre>\n\n<p>Output on the Weather program:</p>\n\n<blockquote>\n  <p>C:\\Program Files\\WindowsApps\\Microsoft.BingWeather_4.5.168.0_x86__8wekyb3d8bbwe\\\n  Microsoft.Msn.Weather.exe</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7992912, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e3b33ff4245419cfac803eafa873fd52?s=128&d=identicon&r=PG", "display_name": "RollNoir", "link": "https://stackoverflow.com/users/7992912/rollnoir"}, "is_accepted": false, "score": -2, "last_activity_date": 1494432744, "creation_date": 1494432744, "answer_id": 43897803, "question_id": 32360149, "link": "https://stackoverflow.com/questions/32360149/name-of-process-for-active-window-in-windows-8-10/43897803#43897803", "title": "Name of process for active window in Windows 8/10", "body": "<p>Starting from Win10 Anniversary Update ApplicationFrameHost child window return anything but UWP application. It worked only in Tablet mode after relogon.</p>\n"}], "owner": {"reputation": 775, "user_id": 1990747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e768662f51a5df9eb2f247a5ddfc90e?s=128&d=identicon&r=PG", "display_name": "Tim Beaudet", "link": "https://stackoverflow.com/users/1990747/tim-beaudet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6795, "favorite_count": 14, "accepted_answer_id": 32513438, "answer_count": 4, "score": 22, "last_activity_date": 1494432744, "creation_date": 1441216970, "last_edit_date": 1441303731, "question_id": 32360149, "link": "https://stackoverflow.com/questions/32360149/name-of-process-for-active-window-in-windows-8-10", "title": "Name of process for active window in Windows 8/10", "body": "<p>The following sample has reliably returned the name of the process that is associated with the active window, but does not work with the newer modern/universal apps because it returns the name of a helper process <strong>WWAHost.exe</strong> on Windows 8 and <strong>ApplicationFrameHost.exe</strong> on Windows 10 rather than the name of the app.</p>\n\n<pre><code>HWND active_window = GetForegroundWindow();\nGetWindowThreadProcessId(active_window, &amp;active_process_id);\nHANDLE active_process = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, active_process_id);\nGetProcessImageFileName(active_process, image_name, 512);\n</code></pre>\n\n<p>With Windows 10 the ApplicationFrameHost.exe is the process that creates the window handles and is what gets returned by GetWindowThreadProcessId(), is there another Win32 API that can be used to get the active process of universal app that is active?</p>\n\n<p>Also tried using GetApplicationUserModelId() and GetPackageFullName() with no success as they return APPMODEL_ERROR_NO_APPLICATION and APPMODEL_ERROR_NO_PACKAGE respectively because the active_process handle is just the helper process and not the process of the active application.</p>\n\n<p>Any other APIs to use to get the process name of a Modern/Universal application given the hwnd of the window, or otherwise figure out the process name of the universal app is active.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441217200, "post_id": 32359927, "comment_id": 52593186, "body": "Something like this is considerably more manageable if you centralize everything into a single class template."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 1489524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b73c16f5cf41ff65d4cb0a4174aa0fae?s=128&d=identicon&r=PG", "display_name": "bizaff", "link": "https://stackoverflow.com/users/1489524/bizaff"}, "edited": false, "score": 0, "creation_date": 1441216916, "post_id": 32360085, "comment_id": 52593024, "body": "If it&#39;s not a Short or a Long it should fail compile.  Either Short or Long may happen with uninitialized data."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 159, "user_id": 1489524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b73c16f5cf41ff65d4cb0a4174aa0fae?s=128&d=identicon&r=PG", "display_name": "bizaff", "link": "https://stackoverflow.com/users/1489524/bizaff"}, "edited": false, "score": 0, "creation_date": 1441216963, "post_id": 32360085, "comment_id": 52593050, "body": "@bizaff Then you could simply delete the <code>(3)</code> overload. There&#39;d be no fallback, and so it wouldn&#39;t compile."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 2, "last_activity_date": 1441216722, "creation_date": 1441216722, "answer_id": 32360085, "question_id": 32359927, "link": "https://stackoverflow.com/questions/32359927/select-template-return-type-from-parameter/32360085#32360085", "title": "Select template return type from parameter", "body": "<p>You should just forward to a dispatcher that is SFINAE-enabled. Start with an inheritance tree:</p>\n\n<pre><code>template &lt;int I&gt; struct chooser : chooser&lt;I-1&gt; { };\ntemplate &lt;&gt; struct chooser&lt;0&gt; { };\n</code></pre>\n\n<p>Forward to it:</p>\n\n<pre><code>template &lt;typename T&gt;\nstd::string parse() { return parse_impl&lt;T&gt;(chooser&lt;2&gt;{}); }\n</code></pre>\n\n<p>And write your cases:</p>\n\n<pre><code>template &lt;typename T,\n          typename = std::enable_if_t&lt;std::is_base_of&lt;Short, T&gt;::value&gt;\n          &gt;\nstd::string parse_impl(chooser&lt;2&gt; ) { // (1)\n    // we're a Short!\n    if (shortDataSet) {\n        return T{shortData};\n    }\n    else {\n        return \"with uninitialized data\";\n    }\n}\n\ntemplate &lt;typename T,\n          typename = std::enable_if_t&lt;std::is_base_of&lt;Long, T&gt;::value&gt;\n          &gt;\nstd::string parse_impl(chooser&lt;1&gt; ) { // (2)\n    // we're a Long!\n    if (longDataSet) {\n        return T{longData};\n    }\n    else {\n        return \"with uninitialized data\";\n    }\n}    \n\ntemplate &lt;typename &gt;\nstd::string parse_impl(chooser&lt;0&gt; ) { // (3)\n    // base case\n    return \"with uninitialized data\";\n}\n</code></pre>\n\n<p>If <code>T</code> inherits from <code>Short</code>, <code>(1)</code> is called. Else, if it inherits from <code>Long</code>, <code>(2)</code> is called. Else, <code>(3)</code> is called. This is a handy way to do SFINAE on multiple potentially-overlapping criteria (since you can, after all, inherit from both <code>Short</code> and <code>Long</code> right?)</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1441217696, "creation_date": 1441217696, "answer_id": 32360362, "question_id": 32359927, "link": "https://stackoverflow.com/questions/32359927/select-template-return-type-from-parameter/32360362#32360362", "title": "Select template return type from parameter", "body": "<p>A little bit of refactoring goes a long way:</p>\n\n<pre><code>template&lt;class T, bool IsShort = std::is_base_of&lt;Short, T&gt;::value,\n                  bool IsLong = std::is_base_of&lt;Long, T&gt;::value&gt;\nstruct data_traits { };\n\ntemplate&lt;class T&gt;\nstruct data_traits&lt;T, true, false&gt; {\n    static bool getFlag() { return shortDataSet; }\n    static DataArrayShort &amp; getData() { return shortData; }\n};\n\ntemplate&lt;class T&gt;\nstruct data_traits&lt;T, false, true&gt; {\n    static bool getFlag() { return longDataSet; }\n    static DataArrayLong &amp; getData() { return longData; }\n};\n\ntemplate&lt;typename T&gt;\ninline std::string parse()\n{\n    using traits = data_traits&lt;T&gt;;\n    // First test if I can create the type with initialized data\n    if (traits::getFlag())\n    {\n        // If it's initialized, Then create it with the correct array\n        T t(traits::getData());\n        return t;\n    }\n    else\n    {\n        return \"with uninitialized data\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 1489524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b73c16f5cf41ff65d4cb0a4174aa0fae?s=128&d=identicon&r=PG", "display_name": "bizaff", "link": "https://stackoverflow.com/users/1489524/bizaff"}, "edited": false, "score": 0, "creation_date": 1441831044, "post_id": 32360827, "comment_id": 52837999, "body": "What I ended up implementing is closest to yours, but slightly different - <code>template &lt;typename T&gt; struct BaseParseTypeTraits {     static bool dataSet;     typedef T dataType;     static T data; };  template &lt;typename T&gt; bool BaseParseTypeTraits&lt;T&gt;::dataSet = false; template &lt;typename T&gt; typename BaseParseTypeTraits&lt;T&gt;::dataType BaseParseTypeTraits&lt;T&gt;::data;</code>  then specializing where ParseTypeTraits derives from it on either DataArrayLong or DataArrayShort.  I tried posting an edit with those changes but it got rejected."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 159, "user_id": 1489524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b73c16f5cf41ff65d4cb0a4174aa0fae?s=128&d=identicon&r=PG", "display_name": "bizaff", "link": "https://stackoverflow.com/users/1489524/bizaff"}, "edited": false, "score": 0, "creation_date": 1441897587, "post_id": 32360827, "comment_id": 52870232, "body": "@bizaff I used some of your improvements to make an edit to my answer. And I also added some new ideas... HTH"}], "tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 0, "last_activity_date": 1441897853, "last_edit_date": 1441897853, "creation_date": 1441219382, "answer_id": 32360827, "question_id": 32359927, "link": "https://stackoverflow.com/questions/32359927/select-template-return-type-from-parameter/32360827#32360827", "title": "Select template return type from parameter", "body": "<p>I can suggest to use traits technique, like other answer. But my solution is better in the way that it allows scability of this solution, I mean no more <code>true, false, ...</code> flags in your code;)</p>\n\n<p>So starting from this comment:</p>\n\n<pre><code>// Variables that will be modified by parsing other things before calling parse&lt;&gt;()\n</code></pre>\n\n<p>Change your code to more scalable version.</p>\n\n<p>First connect base types with data types:</p>\n\n<pre><code>template &lt;typename BaseType&gt;\nclass BaseDataTypeTraits;\ntemplate &lt;&gt; struct BaseDataTypeTraits&lt;Short&gt;\n{\n    typedef DataArrayShort DataType;\n};\ntemplate &lt;&gt; struct BaseDataTypeTraits&lt;Long&gt;\n{\n    typedef DataArrayLong DataType;\n};\n</code></pre>\n\n<p>Then define your base type traits:</p>\n\n<pre><code>template &lt;typename BaseType&gt;\nstruct BaseParseTypeTraits\n{\n    static bool dataSet;\n    typedef typename BaseDataTypeTraits&lt;BaseType&gt;::DataType DataType;\n    static DataType data;\n};\n\ntemplate &lt;typename BaseType&gt;\nbool BaseParseTypeTraits&lt;BaseType&gt;::dataSet = false;\ntemplate &lt;typename BaseType&gt;\ntypename BaseParseTypeTraits&lt;BaseType&gt;::DataType BaseParseTypeTraits&lt;BaseType&gt;::data;\n</code></pre>\n\n<p>And parse traits for each specific base type:</p>\n\n<pre><code>template &lt;typename T, typename EnableIf = void&gt;\nclass ParseTypeTraits;\n\ntemplate &lt;typename T&gt;\nclass ParseTypeTraits&lt;T, typename std::enable_if&lt;std::is_base_of&lt;Short, T&gt;::value&gt;::type&gt;\n  : public BaseParseTypeTraits&lt;Short&gt;\n{};\ntemplate &lt;typename T&gt;\nclass ParseTypeTraits&lt;T, typename std::enable_if&lt;std::is_base_of&lt;Long, T&gt;::value&gt;::type&gt;\n  : public BaseParseTypeTraits&lt;Long&gt;\n{};\n</code></pre>\n\n<p>And your parse is then almost identical to other \"traits\" answer:</p>\n\n<pre><code>template&lt;typename T&gt;\ninline std::string parse()\n{\n    typedef ParseTypeTraits&lt;T&gt; TTraits;\n    // First test if I can create the type with initialized data\n    if (TTraits::dataSet)\n    {\n        // If it's initialized, Then create it with the correct array\n        T t(TTraits::data);\n        return t;\n    }\n    else\n    {\n        return \"with uninitialized data\";\n    }\n}\n\n\nint main(int argc, const char * argv[])\n{\n    // Something things that may or may not set shortDataSet and longDataSet and give shortData and longData values\n\n    std::cout &lt;&lt; parse&lt;S1&gt;() &lt;&lt; std::endl;\n\n    BaseParseTypeTraits&lt;Short&gt;::dataSet = true;\n\n    std::cout &lt;&lt; parse&lt;S1&gt;() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; parse&lt;L2&gt;() &lt;&lt; std::endl;\n\n    BaseParseTypeTraits&lt;Long&gt;::dataSet = true;\n\n    std::cout &lt;&lt; parse&lt;L2&gt;() &lt;&lt; std::endl;\n} \n</code></pre>\n\n<p>Working example: <a href=\"http://ideone.com/r4bCrl\" rel=\"nofollow\">ideone</a></p>\n\n<p>[UPDATE]</p>\n\n<p>In this example code I also added what is required to add new base and data type.</p>\n\n<p>I mean you have this:</p>\n\n<pre><code>using DataArrayNew  = std::array&lt;unsigned char, 200&gt;;\nclass New\n{\npublic:\n    New(const DataArrayNew &amp; data) { /* do some init */}\n};\nclass N1 : public New\n{\npublic:\n    using New::New;\n    operator std::string() { return \"N1!\";}\n};\n</code></pre>\n\n<p>And to make these types be supported by your parse - you need only these two specialization:</p>\n\n<pre><code>template &lt;&gt; struct BaseDataTypeTraits&lt;New&gt;\n{\n    typedef DataArrayNew DataType;\n};\ntemplate &lt;typename T&gt;\nclass ParseTypeTraits&lt;T, typename std::enable_if&lt;std::is_base_of&lt;New, T&gt;::value&gt;::type&gt;\n  : public BaseParseTypeTraits&lt;New&gt;\n{};\n</code></pre>\n\n<p>This can be enclosed in a macro:</p>\n\n<pre><code>#define DEFINE_PARSE_TRAITS_TYPE(BaseTypeParam, DataTypeParam) \\\ntemplate &lt;&gt; struct BaseDataTypeTraits&lt;BaseTypeParam&gt;           \\\n{                                                              \\\n    typedef DataTypeParam DataType;                            \\\n};                                                             \\\ntemplate &lt;typename T&gt;                                          \\\nclass ParseTypeTraits&lt;T,                                       \\\n  typename std::enable_if&lt;                                     \\\n           std::is_base_of&lt;BaseTypeParam, T&gt;::value&gt;::type&gt;    \\\n  : public BaseParseTypeTraits&lt;BaseTypeParam&gt;                  \\\n{}\n</code></pre>\n\n<p>So support for new types is as simple as this:</p>\n\n<pre><code>DEFINE_PARSE_TRAITS_TYPE(New, DataArrayNew);\n</code></pre>\n\n<p>The more simplification can be achieved when we can require that base type has its datatype defined within its class definition - like here:</p>\n\n<pre><code>class New\n{\npublic:\n    typedef DataArrayNew DataType;\n    New(const DataArrayNew &amp; data) { /* do some init */}\n};\n</code></pre>\n\n<p>Then we can have generic BaseDataTypeTraits definition:</p>\n\n<pre><code>template &lt;typename BaseType&gt;\nstruct BaseDataTypeTraits\n{\n    typedef typename BaseType::DataType DataType;\n};\n</code></pre>\n\n<p>So for new type - you only require to add specialization for DataTypeTraits:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass ParseTypeTraits&lt;T, typename std::enable_if&lt;std::is_base_of&lt;New, T&gt;::value&gt;::type&gt;\n  : public BaseParseTypeTraits&lt;New&gt;\n{};\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 1489524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b73c16f5cf41ff65d4cb0a4174aa0fae?s=128&d=identicon&r=PG", "display_name": "bizaff", "link": "https://stackoverflow.com/users/1489524/bizaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 32360827, "answer_count": 3, "score": 1, "last_activity_date": 1441897853, "creation_date": 1441216161, "question_id": 32359927, "link": "https://stackoverflow.com/questions/32359927/select-template-return-type-from-parameter", "title": "Select template return type from parameter", "body": "<p>I have something working but it seems awfully verbose.</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nusing DataArrayShort = std::array&lt;unsigned char,  4&gt;;\nusing DataArrayLong  = std::array&lt;unsigned char, 11&gt;;\n\n// Two base classes the later template stuff should choose between\nclass Short\n{\npublic:\n    Short(const DataArrayShort &amp; data) { /* do some init */}\n};\n\nclass Long\n{\npublic:\n    Long(const DataArrayLong &amp; data) { /* do some init */}\n};\n\n// Concrete derived of the two bases\nclass S1 : public Short\n{\npublic:\n    using Short::Short;\n    operator std::string() { return \"S1!\";}\n};\n\nclass S2 : public Short\n{\npublic:\n    using Short::Short;\n    operator std::string() { return \"S2!\";}\n};\n\nclass L1 : public Long\n{\npublic:\n    using Long::Long;\n    operator std::string() { return \"L1!\";}\n};\n\nclass L2 : public Long\n{\npublic:\n    using Long::Long;\n    operator std::string() { return \"L2!\";}\n};\n\n// Variables that will be modified by parsing other things before calling parse&lt;&gt;()\nbool shortDataSet = false;\nbool longDataSet  = false;\nDataArrayShort shortData;\nDataArrayLong  longData;\n\n// Begin overly verbose template stuff\ntemplate&lt;bool IsShort, bool IsLong&gt;\nbool getFlag();\n\ntemplate&lt;&gt;\nbool getFlag&lt;true, false&gt;()\n{\n    return shortDataSet;\n}\n\ntemplate&lt;&gt;\nbool getFlag&lt;false, true&gt;()\n{\n    return longDataSet;\n}\n\n\ntemplate&lt;bool IsShort, bool IsLong&gt;\nstruct RetType\n{};\n\ntemplate&lt;&gt;\nstruct RetType&lt;true, false&gt;\n{\n    typedef DataArrayShort &amp; type;\n};\n\ntemplate&lt;&gt;\nstruct RetType&lt;false, true&gt;\n{\n    typedef DataArrayLong &amp; type;\n};\n\ntemplate&lt;bool IsShort, bool IsLong&gt;\ntypename RetType&lt;IsShort, IsLong&gt;::type getData();\n\ntemplate&lt;&gt;\nDataArrayShort &amp; getData&lt;true, false&gt;()\n{\n    return shortData;\n}\n\ntemplate&lt;&gt;\nDataArrayLong &amp; getData&lt;false, true&gt;()\n{\n    return longData;\n}\n\ntemplate&lt;typename T&gt;\ninline std::string parse()\n{\n    // First test if I can create the type with initialized data\n    if     (getFlag&lt;std::is_base_of&lt;Short, T&gt;::value, std::is_base_of&lt;Long, T&gt;::value&gt;())\n    {\n        // If it's initialized, Then create it with the correct array\n        T t(getData&lt;std::is_base_of&lt;Short, T&gt;::value, std::is_base_of&lt;Long, T&gt;::value&gt;());\n        return t;\n    }\n    else\n    {\n        return \"with uninitialized data\";\n    }\n}\n// End overly verbose template stuff\n\nint main(int argc, const char * argv[])\n{\n    // Something things that may or may not set shortDataSet and longDataSet and give shortData and longData values\n\n    std::cout &lt;&lt; parse&lt;S1&gt;() &lt;&lt; std::endl;\n\n    shortDataSet = true;\n\n    std::cout &lt;&lt; parse&lt;S1&gt;() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; parse&lt;L2&gt;() &lt;&lt; std::endl;\n\n    longDataSet = true;\n\n    std::cout &lt;&lt; parse&lt;L2&gt;() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>The syntax that's important to me is parse().  Within parse, I want to make sure I route to the correct flag and data to instantiate ConcreteType with.</p>\n\n<p>I'm starting to think I can't use a function template to do what I want - I'm better off using a class template with static function members.</p>\n\n<p>Using std::is_base_of seems clumsy - can I use built-in inheritance with overloads rather than is_base_of with overloads based on Short and Long?</p>\n\n<p>RetType seems unnecessary but there seemed to be no other way to declare getData().</p>\n\n<p>Part of the difficulty is that I need to determine the data to initialize t with before instantiating it.</p>\n\n<p>I don't like the separate template bools for IsShort and IsLong - it won't scale.</p>\n\n<p>What can I do to tighten this up?</p>\n"}, {"tags": ["c++", "constructor", "primitive-types"], "comments": [{"owner": {"reputation": 10110, "user_id": 1715829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c0yet.jpg?s=128&g=1", "display_name": "Buddy", "link": "https://stackoverflow.com/users/1715829/buddy"}, "edited": false, "score": 1, "creation_date": 1441216241, "post_id": 32359896, "comment_id": 52592635, "body": "The default constructor will be called on objects, but simple built-in types (ints/floats/etc) are not initialized."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1441216496, "post_id": 32359896, "comment_id": 52592795, "body": "this is a duplicate about &quot;value initialization&quot;"}, {"owner": {"reputation": 7824, "user_id": 3899431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UeEzu.jpg?s=128&g=1", "display_name": "Luis Colorado", "link": "https://stackoverflow.com/users/3899431/luis-colorado"}, "edited": false, "score": 0, "creation_date": 1441349826, "post_id": 32359896, "comment_id": 52652479, "body": "oops, <code>T a;</code> is a declaration of a variable <code>a</code> of type <code>T</code>.  <code>T a();</code>  is a definition of a prototype of a function called <code>a</code>, having an empty list of parameters and returning a value of type <code>T</code>.  By the way, if you use just <code>T a;</code> and <code>T</code> class has a default constructor, it will be called, but a pointer is not a class, it doesn&#39;t have a default constructor, so you had better to initialize it."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441216705, "post_id": 32360017, "comment_id": 52592927, "body": "<code>If it is a global or a static variable however, the data members will be set to 0</code> where is that called out?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441217179, "post_id": 32360017, "comment_id": 52593176, "body": "@NathanOliver - It&#39;s in the section [basic.start.init] (section 3.6.2 in my draft). <i>&quot;Variables with static storage duration (3.7.1) or thread storage duration (3.7.2) shall be zero-initialized (8.5) before any other initialization takes place.&quot;</i> Often this is done automatically by the OS to hide data from earlier programs running in the same memory area."}, {"owner": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1441217535, "post_id": 32360017, "comment_id": 52593347, "body": "@BoPersson Thank you!  I had no idea where it said so in the standard."}], "tags": [], "owner": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "is_accepted": false, "score": 1, "last_activity_date": 1441216492, "creation_date": 1441216492, "answer_id": 32360017, "question_id": 32359896, "link": "https://stackoverflow.com/questions/32359896/are-members-of-a-built-in-type-ever-default-initialised/32360017#32360017", "title": "Are members of a built-in type ever default-initialised?", "body": "<p>The term you are looking for is default initialized.  Any instance data member will be default initialized if it is not explicitly initialized in the body of the constructor.  What this means depends on whether the data member is a primitive data type or not and where the object instantiation takes place.  In case of data members of non-primitive data types, the default constructor will be used (or the compiler will complain if there is no default constructor).  In case of data members of primitive data types this means that they will not be initialized if the instantiation takes place on the stack or on the heap.  If it is a global or a static variable however, the data members will be set to 0.</p>\n\n<p>By the way, when you write</p>\n\n<pre><code>T a;\n</code></pre>\n\n<p>then you define a variable a of type T.  When you write</p>\n\n<pre><code>T a();\n</code></pre>\n\n<p>then you declare a function a() which returns T by value.</p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "edited": false, "score": 0, "creation_date": 1441221847, "post_id": 32360270, "comment_id": 52595669, "body": "Thanks, you&#39;ve made a complex topic really clear! So, if I&#39;ve understood you correctly, with class types, the members are automagically value-initialised if the object is value-initialised and the class doesn&#39;t define a custom default constructor as in the case of C2. It&#39;s helped a lot to be thinking of default initialisation, doing nothing for built-ins, as separate from value initialisation, which defaults to 0/NULL for builtins. I think now what I was remembering was the location of the static members being cleared out before initialisation takes place. Thanks a lot!"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 12, "last_activity_date": 1441217400, "creation_date": 1441217400, "answer_id": 32360270, "question_id": 32359896, "link": "https://stackoverflow.com/questions/32359896/are-members-of-a-built-in-type-ever-default-initialised/32360270#32360270", "title": "Are members of a built-in type ever default-initialised?", "body": "<p>First let's go over some examples and the correct <em>terminology.</em></p>\n\n<pre><code>T a1;            // default initialization\nT a2{};          // value initialization\nT();             // also value initialization\nnew T;           // default initialization\nnew T();         // value initialization\nnew T{};         // also value initialization\nclass C1 {\n    C1() {}\n    T x;\n};               // no initializer for C1::x; default-initialized\nclass C2 {\n    T x;\n};               // implicit default constructor default-initializes C2::x\nclass C3 {\n    C3() : x() {}\n    T x;\n};               // C3::x will be value-initialized.\nclass C4 {\n    C4() : x{} {}\n    T x;\n};               // C4::x will also be value-initialized.\n// DANGER\nT a();           // declares a function; not value initialization (quirk of C++)\n</code></pre>\n\n<p>Generally, the rule is that when there is no initializer, it is default initialization, and when the initializer is <code>()</code> or <code>{}</code>, it is value initialization. Note that there is an exception for statics and thread-locals, which I'll discuss later.</p>\n\n<p>For an integer or floating-point type, value initialization sets it to 0. For a pointer type, value initialization sets it to null. Default initialization does nothing for scalar types. Therefore, if an object of scalar type only receives default initialization, then it has indeterminate value.</p>\n\n<blockquote>\n  <p>a) Does initialisation of members of a built-in type have anything to do with wheher a user-defined constructor is defined or not, </p>\n</blockquote>\n\n<p>The default constructor for a class default-initializes members. A member is also default-initialized when no <em>mem-initializer</em> is explicitly provided for it. The examples <code>C1</code> and <code>C2</code> illustrate this. However, note that when a <em>class type</em> is value-initialized, and the class's default constructor is either implicitly defined or explicitly defaulted, the class's members will be zeroed out. This zeroing out occurs only in this case, and doesn't occur for a user-provided default constructor. So the answer to your question is \"yes\" in this sense.</p>\n\n<pre><code>C1 y1;   // y1 is default-initialized; y1.x is indeterminate\nC1 y2{}; // y2 is value-initialized;   y2.x is indeterminate\nC2 y3;   // y3 is default-initialized; y3.x is indeterminate\nC2 y4{}; // y4 is value-initialized;   y4.x is set to 0\nC3 y5;   // y5 is default-initialized; y5.x is set to 0\nC3 y6{}; // y6 is value-initialized;   y6.x is set to 0\n</code></pre>\n\n<blockquote>\n  <p>b) do members of a built-in type always need to be initialised manually, and c) are there any circumstances under which an object's storage is zeroed-out before the constructor is called?</p>\n</blockquote>\n\n<p>I assume you mean \"class members with built-in type\". I covered a case above in which they are automatically initialized to 0: where the class object is value-initialized and its constructor is not user-provided (or deleted). Another case is when the class object has static or thread-local storage duration. In this case, the members will also be zeroed out at the very beginning, so there is no chance of them ending up with indeterminate value.</p>\n"}, {"comments": [{"owner": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "edited": false, "score": 0, "creation_date": 1441218114, "post_id": 32360323, "comment_id": 52593638, "body": "Manos, default constructor will still be called in Foo foo = {};"}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "reply_to_user": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "edited": false, "score": 0, "creation_date": 1441219115, "post_id": 32360323, "comment_id": 52594200, "body": "I am under the impression that in &quot;aggregate initialization&quot; the default constructor is not used. For e.g. this <a href=\"http://stackoverflow.com/a/2418195/1413133\">answer</a>. If I am wrong, by all means enlighten me!"}, {"owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "edited": false, "score": 0, "creation_date": 1441222049, "post_id": 32360323, "comment_id": 52595793, "body": "Thanks, I&#39;d forgotten about PODS. So, this corresponds to Brian&#39;s class C2 above, and in this case there are no non-POD-compatible types in the class? I certainly won&#39;t be aiming to use calloc and casting! :p"}, {"owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "edited": false, "score": 0, "creation_date": 1441226175, "post_id": 32360323, "comment_id": 52597997, "body": "Yes that corresponds to C2 in Brian&#39;s excellent answer. A POD must only contain primitives or other PODs to be a POD. I have only used the calloc and casting thing for low level hardware drivers where I couldn&#39;t avoid it. Shot myself in the foot, more than once :-("}], "tags": [], "owner": {"reputation": 18827, "user_id": 1413133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hqUmk.jpg?s=128&g=1", "display_name": "Manos Nikolaidis", "link": "https://stackoverflow.com/users/1413133/manos-nikolaidis"}, "is_accepted": false, "score": 1, "last_activity_date": 1441218229, "last_edit_date": 1495540682, "creation_date": 1441217579, "answer_id": 32360323, "question_id": 32359896, "link": "https://stackoverflow.com/questions/32359896/are-members-of-a-built-in-type-ever-default-initialised/32360323#32360323", "title": "Are members of a built-in type ever default-initialised?", "body": "<p>One way to default initialize all member variables without calling a constructor would be if you have a <a href=\"https://stackoverflow.com/questions/146452/what-are-pod-types-in-c\">POD</a> type. For e.g. this is a POD</p>\n\n<pre><code>class Foo {\n    int num1;\n    double num2;\n    bool b;\n    int *pnum;\n};\n</code></pre>\n\n<p>and if you do</p>\n\n<pre><code>Foo foo = {};\n</code></pre>\n\n<p>everything will be zero-initialized (b will be false, pnum NULL etc) without calling the (default) constructor.</p>\n\n<p>So</p>\n\n<p>a) a POD type must not have a user defined constructor so in that case yes</p>\n\n<p>b) if you have a POD you don't have to initialize them manually</p>\n\n<p>c) if you have a POD type you can zero-initialize without calling a constructor.</p>\n\n<p>Another way to create a class instance and zero-initialize without calling a constructor would be to allocate the required memory with calloc and cast the pointer to the required type. You should avoid that unless absolutely necessary!</p>\n"}], "owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 32360270, "answer_count": 3, "score": 4, "last_activity_date": 1441218229, "creation_date": 1441216069, "last_edit_date": 1441217086, "question_id": 32359896, "link": "https://stackoverflow.com/questions/32359896/are-members-of-a-built-in-type-ever-default-initialised", "title": "Are members of a built-in type ever default-initialised?", "body": "<p>I recently ran into a problem with one of my classes because I hadn't set a pointer to NULL in my constructor initialiser list and so it contained rubbish when I ran the program. </p>\n\n<p>However, whilst I know that instances of a built-in type declared on the stack but not initialised will contain random values, I was pretty sure I'd read somewhere that as class members not placed explicitly in the constructor initialiser list would have their default constructors called, for built-in types this would occur too, inserting code like a pseudo-constructor that will on most platforms, set them to zero I also thought I'd read in 'Thinking in C++' somewhere that under certain circumstances before an object is constructed its memory will be zeroed-out, however I appear to be wrong on both occasions.</p>\n\n<p>Please could anyone confirm for me,\n<br>  a) Does initialisation of members of a built-in type have anything to do with whether a user-defined constructor is defined or not,\n<br>  b) do members of a built-in type always need to be initialised manually, and\n<br>  c) are there any circumstances under which an object's storage is zeroed-out before the constructor is called?</p>\n\n<p>Also, in researching this, I have seen the terms 'default-initialised' and 'zero-initialised' used - is there a difference between saying:</p>\n\n<pre><code>T a;\n</code></pre>\n\n<p>and </p>\n\n<pre><code>T a();\n</code></pre>\n\n<p>? I thought that the first form was just used to prevent ambiguity when the second may be taken by the compiler as a function declaration.</p>\n\n<p>Thank you very much for your time,</p>\n\n<p>stellarpower</p>\n"}, {"tags": ["python", "c++", "opencv", "numpy", "pickle"], "comments": [{"owner": {"reputation": 799, "user_id": 4080476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8wTd.png?s=128&g=1", "display_name": "Brian Pendleton", "link": "https://stackoverflow.com/users/4080476/brian-pendleton"}, "edited": false, "score": 3, "creation_date": 1441216094, "post_id": 32359734, "comment_id": 52592549, "body": "At work, we avoided pickling and went for the raw byte arrays in numpy. We get the byte array, compress it using lz4, and then it is pretty easy reconstructing the array in other languages.  We use mongodb to store the lz4 compressed byte array."}, {"owner": {"reputation": 1134, "user_id": 123991, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/IPXTS.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/123991/sid"}, "reply_to_user": {"reputation": 799, "user_id": 4080476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8wTd.png?s=128&g=1", "display_name": "Brian Pendleton", "link": "https://stackoverflow.com/users/4080476/brian-pendleton"}, "edited": false, "score": 0, "creation_date": 1441390622, "post_id": 32359734, "comment_id": 52676798, "body": "thanks for the suggestion but in the end I just decided to output the <code>ndarray</code> as CSV and then load it into C++. I know it&#39;s not the most efficient solution but for now it works."}], "answers": [{"tags": [], "owner": {"reputation": 15065, "user_id": 723090, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ML1tj.png?s=128&g=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/723090/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1478633293, "last_edit_date": 1495541231, "creation_date": 1478442401, "answer_id": 40450424, "question_id": 32359734, "link": "https://stackoverflow.com/questions/32359734/convert-ndarray-stored-to-a-binary-file-created-with-cpickle-to-cvmat-in-c/40450424#40450424", "title": "Convert ndarray stored to a binary file created with cPickle to cv::Mat in C++", "body": "<p>Pickle is probably not the convenient way to transport data to languages other than Python.</p>\n\n<p>In fact I'd say Pickle is not really suitable for data storage at all, since:</p>\n\n<ul>\n<li>It needs Python</li>\n<li>It might not work if it was saved using a later version of Python than what you're using</li>\n<li>It's unsafe if you don't trust the data source</li>\n</ul>\n\n<p>Which is not to say it doesn't have it's uses: it's convenient for things like cache, personal scripts or communicating data between processes.</p>\n\n<p>Others might disagree with that opinion though.</p>\n\n<p>So what might you use? Here are some ideas:</p>\n\n<ul>\n<li>Binary format, using <code>tofile</code>. This is probably the way to go for speed and size, and not terribly hard to <a href=\"https://stackoverflow.com/questions/1422817/how-to-read-a-float-from-binary-file-in-c\">load</a>.</li>\n<li>CSV file, possibly compressed (for 1D/2D arrays). You can use <code>savetxt</code>.</li>\n<li>JSON, possibly compressed, with <code>tolist()</code> and <code>dumps</code>. This will be slow and yield large files, but it'll be portable and it'll work for any dimension and even for unequal row/column lengths.</li>\n<li>If you can use Pandas, it supports <a href=\"http://pandas.pydata.org/pandas-docs/stable/io.html\" rel=\"nofollow noreferrer\">many formats</a>.</li>\n</ul>\n\n<p>Some more just for fun:</p>\n\n<ul>\n<li>Save a 2D array of small integers as a lossless grayscale image. Or with more effort, use 3 colors and alpha channel to store a single-precision float array.</li>\n<li>Use (Fortan) unformatted data (<a href=\"https://pypi.python.org/pypi/fortranfile\" rel=\"nofollow noreferrer\">python</a>, <a href=\"https://stackoverflow.com/questions/30065508/reading-a-direct-access-fortran-unformatted-file-in-c\">C</a>) which is actually fairly efficient use of space, but plagued by many portability issues.</li>\n<li>As a b64 (b85 for extra points) encoded string. Quite portable (b64 anyway) if you know the matrix layout, and probably smaller than plain text (like csv).</li>\n</ul>\n\n<p><strong>EDIT</strong>: <a href=\"https://github.com/mverleg/array_storage_benchmark\" rel=\"nofollow noreferrer\">here is a benchmark for various methods</a>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/seTZm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/seTZm.png\" alt=\"array storage benchmark\"></a></p>\n"}], "owner": {"reputation": 1134, "user_id": 123991, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/IPXTS.jpg?s=128&g=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/123991/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478633293, "creation_date": 1441215504, "last_edit_date": 1441286005, "question_id": 32359734, "link": "https://stackoverflow.com/questions/32359734/convert-ndarray-stored-to-a-binary-file-created-with-cpickle-to-cvmat-in-c", "title": "Convert ndarray stored to a binary file created with cPickle to cv::Mat in C++", "body": "<p>I have a <a href=\"http://www.numpy.org/\" rel=\"nofollow\">numpy</a> <code>ndarray</code> holding <code>numpy.float64</code> data stored to a file in binary format using <a href=\"https://docs.python.org/2/library/pickle.html\" rel=\"nofollow\">cPickle's</a> <code>dump()</code> method.</p>\n\n<pre><code>from cPickle import dump, HIGHEST_PROTOCOL\nwith open(filePath, 'wb') as f:\n    dump(numpyArray, f, protocol=HIGHEST_PROTOCOL)\n</code></pre>\n\n<p>At the time of this writing, <code>HIGHEST_PROTOCOL</code> uses cPickle's <a href=\"https://docs.python.org/2/library/pickle.html#data-stream-format\" rel=\"nofollow\">protocol version 2</a> but there doesn't seem to be much documentation on how exactly this protocol works.</p>\n\n<p>What I'm trying to do is read this file and create a <code>cv::Mat</code> object (<a href=\"http://docs.opencv.org/modules/core/doc/basic_structures.html#mat\" rel=\"nofollow\">see here</a>) with the data, which is proving quite difficult to do.</p>\n\n<p>At this point, I'm looking to get things working as quickly as possible and I am not too worried about performance, storage space and efficiency. However, these factors might become important later.</p>\n\n<p>Thus, my question would be, what is the easiest way I can go about converting the data in this file into a <code>cv::Mat</code> object? If you think that the easiest way isn't necessarily the most efficient way then I would love to hear your thoughts on that as well. Note that I'm open to using a different storage format, possibly just a text file, if it will make interoperability between Python and C++ easier.</p>\n\n<p>I have to store the <code>numpy</code> array to disk because I need to be able to open and read this file on a mobile device (iOS and Android) and using a network call to get the data is not really on the table at the moment.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1441216338, "post_id": 32359713, "comment_id": 52592693, "body": "Overriding <code>operator delete</code> only changes how object memory is deallocated. And destructor is always called when you use keyword <code>delete</code> (if your type has a destructor), no matter what code <code>operator delete</code> contains."}, {"owner": {"reputation": 132, "user_id": 3826786, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aeda59cff22e7f5e968133ea32ebcc73?s=128&d=identicon&r=PG&f=1", "display_name": "vaati", "link": "https://stackoverflow.com/users/3826786/vaati"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1441218692, "post_id": 32359713, "comment_id": 52593974, "body": "Now i got it. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 3826786, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aeda59cff22e7f5e968133ea32ebcc73?s=128&d=identicon&r=PG&f=1", "display_name": "vaati", "link": "https://stackoverflow.com/users/3826786/vaati"}, "edited": false, "score": 0, "creation_date": 1441218976, "post_id": 32359857, "comment_id": 52594126, "body": "Thanks, i was thinking that override delete is same thing that override an class method."}], "tags": [], "owner": {"reputation": 11532, "user_id": 5129715, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/320498457784a3110f3e256745a9a927?s=128&d=identicon&r=PG&f=1", "display_name": "mksteve", "link": "https://stackoverflow.com/users/5129715/mksteve"}, "is_accepted": true, "score": 3, "last_activity_date": 1441215917, "creation_date": 1441215917, "answer_id": 32359857, "question_id": 32359713, "link": "https://stackoverflow.com/questions/32359713/overrode-delete-behavior/32359857#32359857", "title": "Overrode delete behavior", "body": "<p>The global delete operator will be called for all classes in your code - probably needs a corresponding global new operator.</p>\n\n<p>The destructor X (any class which has a destructor) is called whenever a class of that type is destroyed.  So <code>delete a;</code> causes it to be called (before the memory is released)</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4642421"}, "is_accepted": false, "score": 1, "last_activity_date": 1441216297, "creation_date": 1441216297, "answer_id": 32359961, "question_id": 32359713, "link": "https://stackoverflow.com/questions/32359713/overrode-delete-behavior/32359961#32359961", "title": "Overrode delete behavior", "body": "<p>Here the operator delete which you are overriding in not exclusively used to print \n\"overrode delete\" but also used in the standard way it is implemented i.e. it deletes the object to which the pointer points to and hence the destructor is being called. Hence the delete operator is being used in both ways. </p>\n"}, {"tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": false, "score": 1, "last_activity_date": 1441216424, "creation_date": 1441216424, "answer_id": 32359997, "question_id": 32359713, "link": "https://stackoverflow.com/questions/32359713/overrode-delete-behavior/32359997#32359997", "title": "Overrode delete behavior", "body": "<p>Because <code>delete a</code> is required to destroy <code>a</code> before freeing the memory it occupied by calling <code>operator delete</code>. In the same way that a new expression both allocates memory and then constructs an object in it.</p>\n"}], "owner": {"reputation": 132, "user_id": 3826786, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aeda59cff22e7f5e968133ea32ebcc73?s=128&d=identicon&r=PG&f=1", "display_name": "vaati", "link": "https://stackoverflow.com/users/3826786/vaati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 32359857, "answer_count": 3, "score": 2, "last_activity_date": 1441216424, "creation_date": 1441215448, "last_edit_date": 1441215743, "question_id": 32359713, "link": "https://stackoverflow.com/questions/32359713/overrode-delete-behavior", "title": "Overrode delete behavior", "body": "<p>I'm creating an memory manager and for that, I'm overriding the <code>new</code> and <code>delete</code> operators.  When I use my custom <code>delete</code> which just prints to the screen the object is still destroyed.</p>\n\n<pre><code>void operator delete(void* pointer)\n{\n    //does nothing\n    printf(\"overrode delete\\n\");\n    //MemoryManager::get().deallocHeap(pointer);\n}\n\nstruct X\n{\n    int xx;\n    X(int x) : xx(x)\n    {\n        printf(\"x constructor\\n\");\n    }\n\n    ~X()\n    {\n        printf(\"x destructor\\n\");\n    }\n};\n\nint main(int argc, char* argv[])\n{   \n    X* a = new X(20);\n    delete a;\n    getchar();      \n    return 0;\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>x constructor\nx destructor\noverrode delete\n</code></pre>\n\n<p>If have no code except to print in <code>delete</code>, why is <code>X</code> destructor called?</p>\n"}, {"tags": ["c++", "pointers", "singleton"], "comments": [{"owner": {"reputation": 38891, "user_id": 338803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b99fb33f647bc77b3d4a55a31402882?s=128&d=identicon&r=PG", "display_name": "sje397", "link": "https://stackoverflow.com/users/338803/sje397"}, "edited": false, "score": 3, "creation_date": 1441215439, "post_id": 32359640, "comment_id": 52592191, "body": "<code>Player(Scoreboard sb2) {s=&amp;sb2;}</code> - here you&#39;re taking the address of a copy of the scoreboard. Try passing a pointer to <code>Scoreboard</code>."}, {"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "reply_to_user": {"reputation": 38891, "user_id": 338803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b99fb33f647bc77b3d4a55a31402882?s=128&d=identicon&r=PG", "display_name": "sje397", "link": "https://stackoverflow.com/users/338803/sje397"}, "edited": false, "score": 0, "creation_date": 1441215579, "post_id": 32359640, "comment_id": 52592262, "body": "So in main() I have to write ply1=Player::ins(si); ?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441215759, "post_id": 32359640, "comment_id": 52592376, "body": "<code>static Player *ins(Scoreboard sb)</code> --&gt; <code>static Player *ins(Scoreboard *sb)</code> <b>and</b> <code>Player(Scoreboard sb2)</code> --&gt; <code>Player(Scoreboard *sb2)</code> <b>and</b> <code>s=&amp;sb2;</code> --&gt; <code>s=sb2;</code> <b>and</b> <code>ply1=Player::ins(*si);</code> --&gt; <code>ply1=Player::ins(si);</code> Google for &quot;pass by reference&quot;, &quot;pass by value&quot;, &quot;pass by pointer&quot; for C++."}, {"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "edited": false, "score": 0, "creation_date": 1441215866, "post_id": 32359640, "comment_id": 52592425, "body": "Yeah that&#39;s what I did and still the programm stopped working"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1441216213, "post_id": 32359640, "comment_id": 52592619, "body": "What exactly means stopped working? Please provide a complete, minimal but verifiable example, e.g. the error could come from the code you&#39;re not showing."}, {"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "reply_to_user": {"reputation": 38891, "user_id": 338803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b99fb33f647bc77b3d4a55a31402882?s=128&d=identicon&r=PG", "display_name": "sje397", "link": "https://stackoverflow.com/users/338803/sje397"}, "edited": false, "score": 0, "creation_date": 1441216318, "post_id": 32359640, "comment_id": 52592683, "body": "@sje397 see my edited code"}, {"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "reply_to_user": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "edited": false, "score": 0, "creation_date": 1441216332, "post_id": 32359640, "comment_id": 52592691, "body": "@alexlop see my edited code"}, {"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1441216551, "post_id": 32359640, "comment_id": 52592830, "body": "@danieljour Because I succeeded access the member in the scoreboard after I called Scoreboard::startGame()  . But after I passed the pointer to construct the player I can not access the member in the scoreboard through player. For example,if there&#39;s a line of code like play1-&gt;s-&gt;num, the program will collapse."}, {"owner": {"reputation": 38891, "user_id": 338803, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2b99fb33f647bc77b3d4a55a31402882?s=128&d=identicon&r=PG", "display_name": "sje397", "link": "https://stackoverflow.com/users/338803/sje397"}, "edited": false, "score": 0, "creation_date": 1441250650, "post_id": 32359640, "comment_id": 52604963, "body": "I think we need to see more code. How are you managing the scoreboard instance outside of the pointers in Player?"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "edited": false, "score": 0, "creation_date": 1441217075, "post_id": 32360055, "comment_id": 52593115, "body": "Really? Error shows up    error LNK2001: unresolved external symbol"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441223219, "post_id": 32360055, "comment_id": 52596436, "body": "Answer needs an explanation of why this would solve the OP&#39;s problem. Without helping the OP to understand, a block of code just promotes cargo cult programming."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4642421"}, "is_accepted": false, "score": 0, "last_activity_date": 1441216614, "creation_date": 1441216614, "answer_id": 32360055, "question_id": 32359640, "link": "https://stackoverflow.com/questions/32359640/c-passing-pointer-in-singleton-program-has-stopped-working/32360055#32360055", "title": "C++ Passing pointer in singleton-Program has stopped working?", "body": "<p>Modify</p>\n\n<pre><code>Player* Player::instance=NULL;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>Player Player::*instance=NULL;\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5280383, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4fe22721c063f30c419be60f0d781ee6?s=128&d=identicon&r=PG&f=1", "display_name": "GzAndy", "link": "https://stackoverflow.com/users/5280383/gzandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441216614, "creation_date": 1441215205, "last_edit_date": 1441216114, "question_id": 32359640, "link": "https://stackoverflow.com/questions/32359640/c-passing-pointer-in-singleton-program-has-stopped-working", "title": "C++ Passing pointer in singleton-Program has stopped working?", "body": "<p>So I tried to develop a class Scoreboard and a class Player and a class Player2(All singleton) and each play should possess a pointer to this Scoreboard.\nWhen I run my program it stopped working and I believe it is because of the pointer because it occurs when I tried to access the Scoreboard that the Player point at.\nSo the basic idea is :</p>\n\n<pre><code>class Player\n{\nprivate :\n    static Player *instance;\n    Player(Scoreboard* sb2)\n    {\n        s=sb2;\n    }\npublic:\n\n    Scoreboard *s;\n\n    static Player *ins(Scoreboard* sb)\n    {\n        if (NULL==instance)\n        {\n            instance=new Player(sb);\n        }\n        return instance;\n    }\n\n};\nPlayer* Player::instance=NULL;\n</code></pre>\n\n<p>And in main function, the call would be :</p>\n\n<pre><code>Scoreboard* si= Scoreboard::startGame();\nply1=Player::ins(si);\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "function-templates", "default-arguments"], "comments": [{"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "edited": false, "score": 2, "creation_date": 1441214432, "post_id": 32359338, "comment_id": 52591624, "body": "Missing <code>template &lt;typename T&gt;</code>?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441214437, "post_id": 32359338, "comment_id": 52591630, "body": "Isn&#39;t that less <i>addition</i> and more <i>redefinition</i> of default arguments?"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1441214591, "post_id": 32359338, "comment_id": 52591710, "body": "<a href=\"http://coliru.stacked-crooked.com/a/39117b9aa49c90a4\" rel=\"nofollow noreferrer\">Here&#39;s</a> an almost-compiling example"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 2, "creation_date": 1441214660, "post_id": 32359338, "comment_id": 52591746, "body": "@PravasiMeet I was referring to the second declaration, which in addition to the middle argument&#39;s new default argument, you&#39;ve redefined the last argument&#39;s default value. Since in the <i>first</i> example, you don&#39;t redefine the <code>c</code> argument, it is rather odd you&#39;d do it in the second. Especially sine <i>redefinition</i> of a default argument is its own compilation error."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 3, "creation_date": 1441214719, "post_id": 32359338, "comment_id": 52591784, "body": "Better question might be why is it allowed for non-template functions..."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1441214905, "post_id": 32359338, "comment_id": 52591889, "body": "@PravasiMeet Becuase you&#39;re either declaring or declaring and defining a templated function. Leave off the <code>template &lt;typename T&gt;</code>, you&#39;re declaring (or declaring and defining) a function which doesn&#39;t have a template parameter."}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 8, "creation_date": 1441215302, "post_id": 32359603, "comment_id": 52592112, "body": "The compiler <i>already</i> has to do declaration matching; you are totally allowed to declare the same function template multiple times."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441216009, "post_id": 32359603, "comment_id": 52592496, "body": "@T.C.: That doesn&#39;t actually require matching the declaration."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441218493, "post_id": 32359603, "comment_id": 52593860, "body": "<i>&quot;There are more problematic interactions with default template arguments and similar things&quot;</i> AFAIK, you can add default template arguments to a later re-declaration of a function template. Is this what you&#39;re alluding to? If so, why is this case different?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1441218558, "post_id": 32359603, "comment_id": 52593898, "body": "If you declare a function template several times, wouldn&#39;t the declaration have to be matched in order for overload resolution not to produce ambiguities?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441218927, "post_id": 32359603, "comment_id": 52594102, "body": "Doesn&#39;t this function need to be implemented because of (and according to) [temp.over.link]? Esp., the non-normative p7"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441255672, "post_id": 32359603, "comment_id": 52606248, "body": "@dyp: No, only specific concrete instantiations have to match, not the entire function template."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1466336205, "post_id": 32359603, "comment_id": 63265765, "body": "Your example does more than just add a default argument to the templated function."}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": -7, "last_activity_date": 1441215079, "creation_date": 1441215079, "answer_id": 32359603, "question_id": 32359338, "link": "https://stackoverflow.com/questions/32359338/why-default-argument-cant-be-added-later-in-template-functions/32359603#32359603", "title": "Why default argument can&#39;t be added later in template functions?", "body": "<p>Because it's fundamentally impossible.</p>\n\n<p>In order to achieve your goal, the compiler has to implement a function that, given two template functions, returns whether or not they are the same function. The problem is that this function is unimplementable.</p>\n\n<p>For regular non-template functions, this is a terrible idea but still doable because you just have to match the argument types and job done.</p>\n\n<p>Unfortunately, for template functions, this becomes... more tricky. Consider:</p>\n\n<pre><code>template&lt;typename T&gt; void f(T t);\ntemplate&lt;typename U&gt; std::enable_if_t&lt;std::is_same&lt;U, int&gt;::value&gt; f(U u = U());\n</code></pre>\n\n<p>You can see that they probably declare the same function, <em>if</em> <code>T</code> is <code>int</code>. Otherwise, they do not. There are more problematic interactions with default template arguments and similar things, but long story short, this would be undecidable for templates.</p>\n"}, {"comments": [{"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 0, "creation_date": 1441387243, "post_id": 32402399, "comment_id": 52675138, "body": "V: what is the meaning of (2) just token buffered?"}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 5, "creation_date": 1441387388, "post_id": 32402399, "comment_id": 52675208, "body": "Can&#39;t believe this question has been answered by template expert &amp; author of C++ templates the complete guide: David Vandevoorde"}, {"owner": {"reputation": 916, "user_id": 2308239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b11184ac8601498fcfc4ccb2c9598?s=128&d=identicon&r=PG", "display_name": "Daveed V.", "link": "https://stackoverflow.com/users/2308239/daveed-v"}, "reply_to_user": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 2, "creation_date": 1441387987, "post_id": 32402399, "comment_id": 52675518, "body": "Re. &quot;token buffered&quot;...  Some compilers (MSVC, EDG-based compilers, pre-3.4 GCC, and most older compilers like Cfront) handle templates by &quot;buffering&quot; the tokens they&#39;re composed of.  Then at instantiation time, those tokens are &quot;replayed&quot; through the parser, except that template parameter tokens are replaced by the corresponding template argument.  So a template could be in a &quot;just token buffered; not parsed&quot; state."}, {"owner": {"reputation": 1484, "user_id": 11102572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c83b6b17eb13d31ab7c5d1ac554ad2?s=128&d=identicon&r=PG&f=1", "display_name": "Igor G", "link": "https://stackoverflow.com/users/11102572/igor-g"}, "edited": false, "score": 0, "creation_date": 1584042070, "post_id": 32402399, "comment_id": 107322864, "body": "There&#39;s something I don&#39;t quite understand, even assuming those older compilers... So, when parsing the call at (3), how does the compiler figure out which one of the hundreds of not-yet-parsed method definitions like (2) it must parse/instantiate now in order to get <code>S&lt;int&gt;::f(int)</code>? Once the definition of class <code>S&lt;int&gt;</code> is parsed, shouldn&#39;t it have some kind of table that maps member declarations like (1) to definitions like (2)? I think it should, if only to put together a list of viable candidates for the call. If so, then collecting default arguments from those candidates seems easy, no?"}], "tags": [], "owner": {"reputation": 916, "user_id": 2308239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/129b11184ac8601498fcfc4ccb2c9598?s=128&d=identicon&r=PG", "display_name": "Daveed V.", "link": "https://stackoverflow.com/users/2308239/daveed-v"}, "is_accepted": true, "score": 12, "last_activity_date": 1441384670, "last_edit_date": 1441384670, "creation_date": 1441383165, "answer_id": 32402399, "question_id": 32359338, "link": "https://stackoverflow.com/questions/32359338/why-default-argument-cant-be-added-later-in-template-functions/32402399#32402399", "title": "Why default argument can&#39;t be added later in template functions?", "body": "<p>This is a historical limitation that was added fairly early in the standardization process (it was there in C++98, but not in the ARM).</p>\n\n<p>I don't recall the exact reason (and neither does my colleague, who was almost certainly there when the decision was made).  However, I have a guess...</p>\n\n<p>Back then, all-but-one compilers instantiated templates by replaying tokens through the parse.  Some barely parsed templates at all.  Consider:</p>\n\n<pre><code>template&lt;class T&gt; struct S {\n  T f(T);  // (1)\n};\ntemplate&lt;class T&gt; T S&lt;T&gt;::f(T p = 42) { return p; }  // (2)\nS&lt;int&gt; s;  // Causes the \"real\" parsing of (1), but not (2).\nint r = s.f();  // (3)\n</code></pre>\n\n<p>When resolving call (3), older compilers therefore often only had access to the instantiated declaration (1), while (2) was still not really parsed (just token-buffered).  As a result, such compilers were unaware of the added default argument in (3).</p>\n\n<p>Is suspect caution made the committee therefore decide to more generally disallow added default arguments in templates.</p>\n\n<p>That limitation is probably less (technically) justified today, since other standard requirements have since resulted in the need to parse templates in their generic form (though, e.g., MSVC still doesn't do so AFAICT).  That said, it might still be a bit of a pain to implement, because default arguments would now potentially have to be instantiated in various different contexts.</p>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 3, "accepted_answer_id": 32402399, "answer_count": 2, "score": 15, "last_activity_date": 1466335838, "creation_date": 1441214227, "last_edit_date": 1466335838, "question_id": 32359338, "link": "https://stackoverflow.com/questions/32359338/why-default-argument-cant-be-added-later-in-template-functions", "title": "Why default argument can&#39;t be added later in template functions?", "body": "<p>C++ standard section 8.3.6.4 says that</p>\n\n<blockquote>\n  <p>For non-template functions, default arguments can be added in later\n  declarations of a function in the same scope. [...]</p>\n</blockquote>\n\n<p>But my question is that why it isn't allowed for template functions? What is the rationale for not allowing addition of default arguments in later declarations in same scope for template functions?</p>\n\n<p>Consider this program which compiles fine. (non template function) (see live demo <a href=\"http://ideone.com/6q5Cnh\" rel=\"nofollow\">here.</a>)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint f(int a,int b,int c=3);\nint f(int a,int b=9,int c); // default argument in middle, ok allowed\n\nint main()\n{\n    f(3);\n    f(3,6);\n    f(3,6,9);\n    return 0;\n}\n\nint f(int a,int b,int c)\n{\n    std::cout&lt;&lt;a&lt;&lt;' '&lt;&lt;b&lt;&lt;' '&lt;&lt;c&lt;&lt;'\\n';\n    return 0;\n}\n</code></pre>\n\n<p>But following fails in compilation. (template function) (see live demo <a href=\"http://ideone.com/q6dVmA\" rel=\"nofollow\">here.</a>)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt; \nvoid f(T a,int b,int c=3);\ntemplate &lt;typename T&gt; \nvoid f(T a,int b=9,int c); // compiler error why???\n\nint main()\n{\n    f(3);\n    f(3,6);\n    f(3,6,9);\n    return 0;\n}\n\ntemplate &lt;typename T&gt; \nvoid f(T a,int b,int c)\n{\n    std::cout&lt;&lt;a&lt;&lt;' '&lt;&lt;b&lt;&lt;' '&lt;&lt;c&lt;&lt;'\\n';\n} \n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441217817, "post_id": 32359330, "comment_id": 52593477, "body": "Why are <code>try</code> and <code>catch</code> not allowed?  Otherwise error handling gets ugly.  Search the internet for &quot;C error handling setjmp&quot;."}, {"owner": {"reputation": 17, "user_id": 4816203, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xlT6ic3fGsQ/AAAAAAAAAAI/AAAAAAAAAEo/RS8kI3E-Ryg/photo.jpg?sz=128", "display_name": "Bence Musa", "link": "https://stackoverflow.com/users/4816203/bence-musa"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441228221, "post_id": 32359330, "comment_id": 52598999, "body": "Thank you for your answers, try catch is disabled in arduino&#39;s make file, <a href=\"https://www.arduino.cc/en/Reference/HomePage\" rel=\"nofollow noreferrer\">official docs</a>, i&#39;ll check out setjmp, however I&#39;ll make some test about this and see if the macro solution could work or not, if I follow some self-made conventions it should work"}, {"owner": {"reputation": 2636, "user_id": 3368201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c46939557e63148d8c8cfa3b14d9e2f?s=128&d=identicon&r=PG&f=1", "display_name": "frarugi87", "link": "https://stackoverflow.com/users/3368201/frarugi87"}, "edited": false, "score": 0, "creation_date": 1441269216, "post_id": 32359330, "comment_id": 52612935, "body": "IMHO this is a completely phylosophical question.The reason is that you are speculating about something without having in mind what this is really is.You are not using a PC or some high complexity computing system,you are dealing with a small microcontroller.There are no controls over the memory.segfaults,stack overflows,  everything is handled by the OS,which isn&#39;t present in small platforms. So... You can do whatever you want.And if you make a bad recursive function, it won&#39;t work, but you will not be able to detect it. It will simply crash in unexpected ways. And, IMHO, you can&#39;t prevent it"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 4816203, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xlT6ic3fGsQ/AAAAAAAAAAI/AAAAAAAAAEo/RS8kI3E-Ryg/photo.jpg?sz=128", "display_name": "Bence Musa", "link": "https://stackoverflow.com/users/4816203/bence-musa"}, "edited": false, "score": 0, "creation_date": 1441304010, "post_id": 32364347, "comment_id": 52635809, "body": "I always care a lot about memory management, I am currently working on the software of an RC car, and if anything goes wrong, I wish to stop the car, I&#39;ll have many leds, sensors, a DC engine, and a servo on a car, with a fake multithreading, there will be a lot of loops going around, 1 mistake and my hardware could kill itself, Now the part about leaving, you are right, however,if I keep caling a function from an infinite loop, which just returns, it wont be able to escape from the livelock and light up a LED for example, i&#39;m going to make an inf loop with new and check the pointer for NULL"}, {"owner": {"reputation": 17, "user_id": 4816203, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xlT6ic3fGsQ/AAAAAAAAAAI/AAAAAAAAAEo/RS8kI3E-Ryg/photo.jpg?sz=128", "display_name": "Bence Musa", "link": "https://stackoverflow.com/users/4816203/bence-musa"}, "edited": false, "score": 0, "creation_date": 1441304774, "post_id": 32364347, "comment_id": 52636250, "body": "Yup. it just stops sending data to the Serial, just dies I suppose, nevermind I still can check for other things, thanks for your answers and time"}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 0, "last_activity_date": 1441233837, "creation_date": 1441233837, "answer_id": 32364347, "question_id": 32359330, "link": "https://stackoverflow.com/questions/32359330/arduino-memory-types-academic/32364347#32364347", "title": "Arduino memory types, academic", "body": "<p>So, if you want to exit a function and get back to where you came from, you should leave the function, not call the original function! Either by returning from the function, or use <code>setjmp</code> and <code>longjmp</code>.</p>\n\n<p>And in all cases, you also need to worry about \"how does data get cleaned up\". In other words, if you allocate memory, then you need to free it before leaving the function, of you have opened a file, you need to close it, etc. </p>\n\n<p>These sort of things is where the RAII principle comes in very handy, but it assumes you leave the function under the knowledge of the compiler, and not that you just jump back to your main loop without cleaning up. It will sooner or later cause problems. </p>\n\n<p>Note also that the behaviour with stack overflow is UNDEFINED BEHAVIOUR - it MAY crash the program immediately, or it may cause the heap to be overwitten, format your harddrive/SD Card, or it may cause daemons to fly out of your nose. Or anything else you can possibly imagine and then some. It is undefined, you can't rely on it doing anything in particular - just that \"you're not supposed to do that\".</p>\n"}], "owner": {"reputation": 17, "user_id": 4816203, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xlT6ic3fGsQ/AAAAAAAAAAI/AAAAAAAAAEo/RS8kI3E-Ryg/photo.jpg?sz=128", "display_name": "Bence Musa", "link": "https://stackoverflow.com/users/4816203/bence-musa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 32364347, "answer_count": 1, "score": 0, "last_activity_date": 1441233837, "creation_date": 1441214212, "question_id": 32359330, "link": "https://stackoverflow.com/questions/32359330/arduino-memory-types-academic", "title": "Arduino memory types, academic", "body": "<p>Dear Stackoverflow Users,</p>\n\n<p>I have an interesting question and I wish to hear your opinions out, also please correct me at any part.</p>\n\n<p>In a normal PC the memory adresses splits into 3 parts, stack, heap, globals, (lets forget peripherials now), so if I go ahead and make a bad recursive function which fills the stack with calls, the OS will send a message of stackoverflow, also if I make an infinite loop with a new keyword in it, it'll fill the heap with junk data, and get something like segfault, but what if I make such mistakes in an arduino project?</p>\n\n<p>try / catch blocks are out of the game, so I tried to make my own realization of error handling in loop(), abusing the stupidity of the preprocessor:</p>\n\n<pre><code>#define THROW(errval)       \\\nERROR = errval;             \\\nloop()\n\n#define TRY                 \\\nif(ERROR == 0)\n\n#define CATCH(err)              \\\nelse if(err == ERROR)\n\n#define FINALLY                 \\\nif(ERROR != 0)\n\n#define OUT_OF_MEMORY 1    \n\nint ERROR = 0;\n\nvoid random_routine() {\n    if(/*something goes wrong*/) {\n        THROW(OUT_OF_MEMORY);\n    }\n}\n\nvoid start() { Serial.begin(9600); }\nvoid loop() {\n    TRY {\n        random_routine();\n    } CATCH(OUT_OF_MEMORY) {\n        Serial.println(\"out of memory\");\n    } FINALLY {\n        while(true);\n    }\n}\n</code></pre>\n\n<p>Now you might not see the trick here instantly so this is what you get after the preprocessing:</p>\n\n<pre><code>void random_routine() {\n     if(/*something goes wrong*/) {\n          ERROR = 1;\n          //this call is the body of my exception handling solution\n          //and the question is about this as well\n          loop();\n     }\n}\nvoid start() { Serial.begin(9600); }\nvoid loop() {\n     ///TRY-s macro result\n     if(ERROR == 0) {\n         random_routine();\n     ///chainable CATCH blocks\n     } else if(ERROR == 1) {\n         Serial.println(\"Out of memory\");\n     }\n     ///FINALLY block\n     if(ERROR != 0) {\n         while(true);\n     }\n}\n</code></pre>\n\n<p>So my question is, what if the memory gets full for some reason, will a function call be able to get executed? Because the THROW macro will always call loop() that way my idea to 'escape' from the current context and get into an infinite loop</p>\n\n<p>Sorry for my bad english</p>\n"}, {"tags": ["c++", "c"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2947402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c1b0abb5d01e81862be91d0469e33b?s=128&d=identicon&r=PG&f=1", "display_name": "Razib Hossain Shuvo", "link": "https://stackoverflow.com/users/2947402/razib-hossain-shuvo"}, "edited": false, "score": 1, "creation_date": 1441214367, "post_id": 32359351, "comment_id": 52591596, "body": "ah... that semicolon ... enemy of programmers. thanks btw"}, {"owner": {"reputation": 62282, "user_id": 1652962, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2cf5a0741f183379686fe0995ffc27ae?s=128&d=identicon&r=PG", "display_name": "cimmanon", "link": "https://stackoverflow.com/users/1652962/cimmanon"}, "edited": false, "score": 1, "creation_date": 1441214802, "post_id": 32359351, "comment_id": 52591829, "body": "For future reference, problems caused by a simple typographical error should be closed, not answered."}], "tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": true, "score": 4, "last_activity_date": 1441214419, "last_edit_date": 1441214419, "creation_date": 1441214284, "answer_id": 32359351, "question_id": 32359321, "link": "https://stackoverflow.com/questions/32359321/declaring-integer-in-for-loop-of-a-function-giving-error/32359351#32359351", "title": "declaring integer in for loop of a function giving error", "body": "<p>Remove the semicolon from the end of the <code>for</code> statement, that is, replace</p>\n\n<pre><code> for(int i = 0; i &lt;= 10000; i++);\n</code></pre>\n\n<p>with</p>\n\n<pre><code> for(int i = 0; i &lt;= 10000; i++)\n</code></pre>\n\n<p>Nevertheless, bear in mind that loops without a body (i.e. not followed by curly braces) are also possible C language constructs. These <strong>are</strong> followed by a semicolon.</p>\n"}], "owner": {"reputation": 11, "user_id": 2947402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75c1b0abb5d01e81862be91d0469e33b?s=128&d=identicon&r=PG&f=1", "display_name": "Razib Hossain Shuvo", "link": "https://stackoverflow.com/users/2947402/razib-hossain-shuvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "closed_date": 1441217930, "accepted_answer_id": 32359351, "answer_count": 1, "score": 0, "last_activity_date": 1595497790, "creation_date": 1441214191, "last_edit_date": 1595497790, "question_id": 32359321, "link": "https://stackoverflow.com/questions/32359321/declaring-integer-in-for-loop-of-a-function-giving-error", "closed_reason": "Not suitable for this site", "title": "declaring integer in for loop of a function giving error", "body": "<p>I cannot find out what's wrong in this code:</p>\n<pre><code>    using namespace std;\n\n    const int sz = 10000+100;\n    int sqr[sz];\n    int digit;\n\n    void findSqr()\n    {\n\n        for(int i = 0; i &lt;= 10000; i++);\n        {\n            cout&lt;&lt;sqr[i]&lt;&lt;endl;\n        }\n    }\n\n    int main()\n    {\n        findSqr();\n        return 0;\n    }\n\n</code></pre>\n<p>When I'm initializing int I in for loop in findsqr function and trying to build the code then an error appears</p>\n<p>name lookup of 'i' changed for ISO 'for' scoping [-fpermissive]|\nHow should I fix it?</p>\n"}, {"tags": ["c++", "ubuntu", "filesystems"], "owner": {"reputation": 5840, "user_id": 4918012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/411c039b7185298d34b3d5ae8018f5eb?s=128&d=identicon&r=PG&f=1", "display_name": "nbroeking", "link": "https://stackoverflow.com/users/4918012/nbroeking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1441213971, "creation_date": 1441213971, "question_id": 32359248, "link": "https://stackoverflow.com/questions/32359248/how-to-get-vendor-bus-type-information-about-wifi-card-in-sys-class-net-on-ubun", "title": "How to get vendor/bus type information about wifi card in /sys/class/net on Ubuntu?", "body": "<p>I have a c++ application, that runs on Ubuntu,  that when it starts up needs to parse /sys/class/net for all the wireless interfaces. I am currently able to find the names of the interfaces but I am trying to pull out either the vendor name or the type of bus that they are using in order to identify which interface belongs to which card.</p>\n\n<p>I can get the vendor code from /sys/class/interface/phy80211/device/vendor. but that file is only there when the device is plugged in over the pci. If it is an external card then this file never appears. Is there a way to find this information that doesn't depend on if they are plugged in with usb or pci. </p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 6, "creation_date": 1441213599, "post_id": 32359038, "comment_id": 52591071, "body": "They probably forgot."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441213949, "post_id": 32359038, "comment_id": 52591319, "body": "The <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3465.pdf\" rel=\"nofollow noreferrer\">proposal</a> only mentions the functions you list and doesn&#39;t list any reason to exclude the others (not sure there would be one). You could just email Joaquin and tell him to fix it."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1441213952, "post_id": 32359038, "comment_id": 52591323, "body": "<code>[]</code> is tricky because it can insert, and there&#39;s no guarantee that the thing being looked up can be used to construct a <code>key_type</code>."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1441214620, "post_id": 32359038, "comment_id": 52591722, "body": "@T.C.: currently to use <code>[]</code> you need to be able to create a <code>key_type</code> from what you pass... so what is the problem of creating it <b>only</b> if insert is required and not creating it if a compatible comparison is available and element is already present?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 1, "creation_date": 1441215169, "post_id": 32359038, "comment_id": 52592047, "body": "@6502 So in other words your &quot;heterogeneous&quot; [] only accepts types convertible to <code>key_type</code>? That&#39;s not very heterogenous. And you also need to impose a new requirement that the thing converted to <code>key_type</code> compares the same way as before."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1441216048, "post_id": 32359038, "comment_id": 52592519, "body": "@T.C.: the point is dead simple... if you can avoid doing the pointless creation of a <code>key_type</code> temporary then just don&#39;t create it. The problem that the comparison could be semantically different is also present with other cases... or you think it&#39;s a feature that <code>container.find(x)</code> could use a different semantic than <code>container[x]</code> for the comparisons? For the question the only possibilities i can think to are 1) they forgot, 2) template machinery is too weak to handle it. I think 1 is the case (template machinery is indeed horribly weak, but this should still be in reach)."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 0, "creation_date": 1441216275, "post_id": 32359038, "comment_id": 52592660, "body": "@6502 you can&#39;t &quot;avoid&quot; creation of a <code>key_type</code> instance if the key (an argument to <code>operator[]</code>) is not in a map. And while <code>key_type</code> and <code>T</code> might be comparable, there is no requirement that <code>key_type</code> is constructible from <code>T</code>"}, {"owner": {"reputation": 394, "user_id": 2557561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f72117e40defaadde06e8162d184eee?s=128&d=identicon&r=PG", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/2557561/nicolas"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441216756, "post_id": 32359038, "comment_id": 52592949, "body": "@Piotr Skotnicki So in all cases (x in the map or not), if you use operator[x] with key_type not constructible from T it should fail at compile time like it does today if you put some trash inside []."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1441217346, "post_id": 32359038, "comment_id": 52593251, "body": "@Nicolas <code>key_type{} &lt; T{}</code> is not guaranteed to be the same as <code>key_type{} &lt; key_type{T{}}</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441217656, "post_id": 32359038, "comment_id": 52593400, "body": "I presume because few people actually use <code>at</code> so it slipped their mind.  <code>[]</code> is tricky, as noted above, so deferring it until after a first implementation seems reasonable.  Neither are high-performance operations on a <code>map</code>."}, {"owner": {"reputation": 394, "user_id": 2557561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f72117e40defaadde06e8162d184eee?s=128&d=identicon&r=PG", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/2557561/nicolas"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441218701, "post_id": 32359038, "comment_id": 52593982, "body": "@PiotrSkotnicki The real problem begins with the definition of the container type when the user choose to use the &quot;diamond comparator&quot; <code>std::map&lt;std::string, int, std::less&lt;&gt;&gt;</code> . All kind of funky semantic problem could happen then. For example <code>m.find(x)-&gt;first != key_type{x}</code>. So the user should pay attention to this anyway. The problem just gets worse with <code>operator[]</code> since it would potentially mutate the container in a funky way. I thought (beside the tricky implementation) it could explain why they &quot;forgot&quot; about <code>[]</code> (and <code>at</code> ...) but I couldn&#39;t find any information about this issue."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441220141, "post_id": 32359038, "comment_id": 52594813, "body": "@Nicolas still, I prefer a scenario where <code>operator[](x) != find(x)</code> and internal ordering <i>is not</i> broken, to a scenario where <code>operator[](x) != find(x)</code> and internal ordering <i>is silently</i> broken"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441220479, "post_id": 32359038, "comment_id": 52594978, "body": "@PiotrSkotnicki: This is what OP is asking for <code>operator[]</code>: if <code>T</code> can be compared with <code>key_type</code> then do the search using that. If not found (and we&#39;re not in the <code>const</code> case) create the element by converting <code>T</code> to <code>key_type</code>. When <code>T</code>\u2192<code>key_type</code> is not possible then <code>operator[]</code> should just not compile if non-const (like happens now, btw). If you can convert <code>T</code> to <code>key_type</code> but not compare with it then just convert it immediately (like now). You can of course create funky cases like <code>key_type</code> being present after converting <code>T</code> (but not before). Or compute <code>&lt;</code> using <code>rand()</code>. So?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "edited": false, "score": 0, "creation_date": 1441220884, "post_id": 32359038, "comment_id": 52595187, "body": "@6502 and if <code>key_type</code> is constructible from <code>T</code> and <code>T{}</code> doesn&#39;t exist, then <code>key_type{T{}}</code> should be inserted to a binary search tree in place where <code>T{}</code> should be? then, you perform <code>find(T{})</code>, does it find <code>key_type{T{}}</code> that you have just inserted (not to mention that internal ordering is already broken anyway)?"}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441221572, "post_id": 32359038, "comment_id": 52595543, "body": "@PiotrSkotnicki: of course for <code>T x</code> and <code>key_type y</code> it should be required to have <code>x &lt; y</code> if and only if <code>key_type(x) &lt; y</code> and <code>y &lt; x</code> iff <code>y &lt; key_type(x)</code>. If that is not valid then of course mixing the comparison is nonsense (but it&#39;s nonsense to use the comparison for <code>find</code> too as the algorithms already require ordering properties for <code>operator&lt;</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1441222404, "post_id": 32361332, "comment_id": 52595982, "body": "<code>map::operator[](key_type)</code> is never <code>const</code>"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441222554, "post_id": 32361332, "comment_id": 52596054, "body": "I don&#39;t think your third bullet point is consistent with the other lookup functions. The user can easily create a temporary themselves, if that&#39;s necessary. But it might be required for backwards-compatibility."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441222778, "post_id": 32361332, "comment_id": 52596168, "body": "@dyp: that&#39;s a tradeoff of usability. In the past even <code>operator==</code> between an <code>std::string</code> and a <code>const char *</code> created a temporary, and that (despite inefficient) was convenient because string literals are not std::string objects and users wanted to write <code>x == &quot;foo&quot;</code>. The standard solution of providing comparisons with <code>const char *</code> too is of course better..."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441223061, "post_id": 32361332, "comment_id": 52596350, "body": "Well if I&#39;m using a transparent comparator, then I&#39;d like to know when the implementation creates a temporary internally. This can catch performance bugs, where I&#39;ve intended to provide comparison for the type, but e.g. failed to add a <code>const</code> in the comparison operator/function. If the comparison doesn&#39;t work but an implicit conversion to the key type does, I think something must be wrong. Typically, the comparison itself allows implicit conversion by taking either by value, or by const-ref."}, {"owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1441223964, "post_id": 32361332, "comment_id": 52596858, "body": "@dyp: C++ is a complex language and it&#39;s difficult to write a standard for such a beast correctly, let alone efficiently. One of the early writings for example was <b>mandating three temporary copies</b> of the key for every <code>std::map::operator[]</code> access (even if the element was already present) simply because provided a bad implementation as description of the semantic (luckily enough no implementation AFAIK ever followed the standard on that). Note however that a C++ implementation that makes 100 copies for all pairs of keys tested would be still compliant."}, {"owner": {"reputation": 394, "user_id": 2557561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f72117e40defaadde06e8162d184eee?s=128&d=identicon&r=PG", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/2557561/nicolas"}, "edited": false, "score": 0, "creation_date": 1441707723, "post_id": 32361332, "comment_id": 52772493, "body": "I have implemented a proof of concept of this <a href=\"https://ideone.com/jJV52M\" rel=\"nofollow noreferrer\">here</a> . The semantic of the <code>operator[]</code> is implemented by the <code>map_get</code> free function. Feel free to comment or fork"}], "tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": true, "score": 5, "last_activity_date": 1441289972, "last_edit_date": 1441289972, "creation_date": 1441221226, "answer_id": 32361332, "question_id": 32359038, "link": "https://stackoverflow.com/questions/32359038/why-heterogeneous-comparison-lookup-is-not-implemented-for-at-and-operator/32361332#32361332", "title": "Why heterogeneous comparison lookup is not implemented for `at` and `operator []`?", "body": "<p>There are no logical reasons in principle for it. For example for <code>operator[]</code> a reasonable semantic could be</p>\n\n<ul>\n<li>If the passed value is comparable with <code>key_type</code> do the search using it and convert to <code>key_type</code> only if needed (i.e. if the element is not found and the container is neither const nor accessed using a const reference).</li>\n<li>If in the case before the passed type is not convertible to <code>key_type</code> the use of <code>operator[]</code> should just not compile (like it happens now)</li>\n<li>If the passed type cannot be compared with <code>key_type</code> but can be converted to <code>key_type</code> then a temporary should be created immediately to do the search and possibly the insertion (like it's now).</li>\n</ul>\n\n<p>Of course there should be a requirement to have <code>x &lt; y</code> for a <code>T</code> element <code>x</code> and a <code>key_type</code> element <code>y</code> <strong>if and only if</strong> <code>key_type(x) &lt; y</code> because otherwise semantic would be nonsense (like it would be nonsense for example to have <code>operator&lt;</code> to return a value based on a random source).</p>\n\n<p>Unfortunately C++ template machinery is at the same time extremely complex and extremely weak and implementing the conversion to <code>key_type</code> for <code>operator[]</code> only when really necessary is probably more complex than it seems.</p>\n\n<p>This machinery is however what the C++ community decided to condemn itself to use for metaprogramming and until someone manages out to get a decent implementation using only that, this reasonable requirement is probably not going to be in the standard (in the past it happened that the standard mandated things that were fuzzily defined and/or basically impossible to implement like template export, and it wasn't funny).</p>\n"}], "owner": {"reputation": 394, "user_id": 2557561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f72117e40defaadde06e8162d184eee?s=128&d=identicon&r=PG", "display_name": "Nicolas", "link": "https://stackoverflow.com/users/2557561/nicolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 1, "accepted_answer_id": 32361332, "answer_count": 1, "score": 11, "last_activity_date": 1441289972, "creation_date": 1441213267, "question_id": 32359038, "link": "https://stackoverflow.com/questions/32359038/why-heterogeneous-comparison-lookup-is-not-implemented-for-at-and-operator", "title": "Why heterogeneous comparison lookup is not implemented for `at` and `operator []`?", "body": "<p>Since C++14 (N3657) member function templates <code>find</code>, <code>count</code>, <code>lower_bound</code>, <code>upper_bound</code>, and <code>equal_range</code> of associative containers support heterogeneous comparison lookup but <code>at</code> and <code>operator[]</code> don't have those equivalent member function templates. Why is that so ?</p>\n\n<p>Example :\n\u00a0\u00a0\u00a0 </p>\n\n<pre><code>std::map&lt;std::string, int, std::less&lt;&gt;&gt; m;\n// ...\nauto it = m.find(\"foo\"); // does not construct an std::string\nauto&amp; v = m.at(\"foo\"); // construct an std::string\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers", "vector"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 6, "creation_date": 1441213204, "post_id": 32358986, "comment_id": 52590800, "body": "<code>This makes a pointer to int array</code> no it does not do that. That is an array of 4 int pointers and accessing any of them like you are doing now is undefined behavior as they are uninitialized."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441213439, "post_id": 32358986, "comment_id": 52590967, "body": "Read about: <a href=\"http://stackoverflow.com/questions/1461432/what-is-array-decaying\" title=\"what is array decaying\">stackoverflow.com/questions/1461432/what-is-array-decaying</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1441215574, "post_id": 32358986, "comment_id": 52592258, "body": "Note to zLeon: You left a grammatical trap in your question. &quot;pointer to int array&quot; is ambiguous. It could be interpreted as &quot;(pointer to int) array&quot; or &quot;pointer to (int array)&quot;. Your statement &quot;array of pointers&quot; which a context matching your code., but this did not seem to help a number of readers."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1441215086, "post_id": 32359111, "comment_id": 52592007, "body": "To those reading this answer and thinking, &quot;Duh... An address will be printed. Behaviour quite well defined.&quot; Please note the standard does not specify what address will be printed since it hasn&#39;t been assigned, and that is most definitely undefined behaviour. You may have systems that automatically NULL the pointer, you may have it displaying whatever garbage was on the stack, and it may point to the Unabridged Works of William Shakespeare. All would be acceptable interpretations."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 5, "last_activity_date": 1441213483, "creation_date": 1441213483, "answer_id": 32359111, "question_id": 32358986, "link": "https://stackoverflow.com/questions/32358986/how-to-create-an-array-of-pointers-without-using-vector/32359111#32359111", "title": "How to create an array of pointers without using vector", "body": "<p>While <code>&amp;arr</code> and just plain <code>arr</code> may both give you the same address, they are both very different.</p>\n\n<p>With <code>&amp;arr</code> you get a pointer to the array, and the type of it is (in your case) <code>int* (*)[4]</code>.</p>\n\n<p>When you use <code>arr</code> it decays to a pointer to the first element and the type is (again, in your case) <code>int**</code>.</p>\n\n<p>Same address, but different types.</p>\n\n<hr>\n\n<p>As for the array itself, it's defined fine, you have an array of four pointers to <code>int</code>. However, you do not initialize the contents of the array, which means that the contents is <em>indeterminate</em>, and using those pointers in any way (even just printing them) leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"noreferrer\"><em>undefined behavior</em></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 95, "user_id": 5280359, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d6032652db52229c5c6b7e4ebba61c78?s=128&d=identicon&r=PG&f=1", "display_name": "DAVE", "link": "https://stackoverflow.com/users/5280359/dave"}, "is_accepted": false, "score": 0, "last_activity_date": 1441214290, "creation_date": 1441214290, "answer_id": 32359352, "question_id": 32358986, "link": "https://stackoverflow.com/questions/32358986/how-to-create-an-array-of-pointers-without-using-vector/32359352#32359352", "title": "How to create an array of pointers without using vector", "body": "<p>&amp;arr gives you the address of array which starts with base address ie address of first element.</p>\n\n<p>arr gives the address of first element.</p>\n\n<p>hence u get same result for both </p>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 2106802, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3a1fb53e53aac056b65ffdebe3d0c962?s=128&d=identicon&r=PG", "display_name": "Amith Chinthaka", "link": "https://stackoverflow.com/users/2106802/amith-chinthaka"}, "is_accepted": false, "score": 1, "last_activity_date": 1441214361, "creation_date": 1441214361, "answer_id": 32359376, "question_id": 32358986, "link": "https://stackoverflow.com/questions/32358986/how-to-create-an-array-of-pointers-without-using-vector/32359376#32359376", "title": "How to create an array of pointers without using vector", "body": "<p>Your proposed way doesn't make pointer to int array. Instead of that it makes a pointer to pointer to an int array. Usually the name of any array represent a pointer to it self. Or <code>&amp;arr[0]</code> also represent it.</p>\n\n<p>So I hope that you got the answer for why <code>&amp;arr</code> equal <code>arr</code>.</p>\n\n<p><strong>Creating a pointer to int array</strong></p>\n\n<pre><code>int arr[4];\nint* p = arr; //pointer to int array\n</code></pre>\n\n<p><strong>Initializing each element in array</strong></p>\n\n<p><em>(1) Using pointer arithmetic</em></p>\n\n<pre><code>int size = 4;\nint* p = arr;\nfor (int i = 0; i &lt; size; i++)\n{\n    *p = i; // assigning each element i\n    p++; //pointing to next element \n}\n</code></pre>\n\n<p><em>(2) Using operator []</em></p>\n\n<pre><code>int size = 4;\nfor (int i = 0; i &lt; size; i++)\n{\n    arr[i] = i; // assigning each element i\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 5151876, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mrEA7.jpg?s=128&g=1", "display_name": "zLeon", "link": "https://stackoverflow.com/users/5151876/zleon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1441215507, "creation_date": 1441213140, "last_edit_date": 1441213496, "question_id": 32358986, "link": "https://stackoverflow.com/questions/32358986/how-to-create-an-array-of-pointers-without-using-vector", "title": "How to create an array of pointers without using vector", "body": "<p>I saw that an array of pointers can be created using vector, however, I don't want that. Is the example below a way to create a pointer to int array?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int* arr[4];\n    for (int i=0; i&lt;4; ++i) {\n        cout&lt;&lt;endl&lt;&lt;arr[i];\n    }\n}\n</code></pre>\n\n<p>This makes a pointer to int array and it displays the memory address of each index in the array. Now I have few questions. Is it a proper way to create a pointer to int array without a vector? Also, if I want to initialize a value inside each memory address in the given example, how is it done? And lastly why is <code>&amp;arr</code> equal to <code>arr</code>?</p>\n"}, {"tags": ["c++", "asp-classic", "ado", "windows-server-2008-r2"], "comments": [{"owner": {"reputation": 3849, "user_id": 121333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f86f8f8ff9e1217108e14251ba80ba60?s=128&d=identicon&r=PG", "display_name": "Martha", "link": "https://stackoverflow.com/users/121333/martha"}, "edited": false, "score": 0, "creation_date": 1441299077, "post_id": 32358799, "comment_id": 52633090, "body": "Congrats for finding a situation where <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> and <a href=\"https://stackoverflow.com/questions/tagged/asp-classic\">asp-classic</a> are <i>not</i> mutually exclusive. :D"}], "owner": {"reputation": 3838, "user_id": 1033684, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/sKoNw.jpg?s=128&g=1", "display_name": "Rob Sedgwick", "link": "https://stackoverflow.com/users/1033684/rob-sedgwick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441212563, "creation_date": 1441212563, "question_id": 32358799, "link": "https://stackoverflow.com/questions/32358799/ado-called-from-c-much-slower-in-windows-server-2008", "title": "ADO called from C++ much slower in Windows Server 2008", "body": "<p>We have some old C++ code which is being called from Classic ASP. It runs on Windows 2000 and is invoked using CreateObject via COM from the ASP. The code uses an ADO recordset (server side) which is passed to it from ASP and loops through the records, producing an XML file.</p>\n\n<p>We have moved the C++ DLL onto a Windows 2008 server and it is a lot slower. Using Wireshark we can see this is because every time it moves to a a new record it restablishes the connection.</p>\n\n<p>The old server used ADO 2.7 the new server uses ADO 6, but these are functionally equivalent and its just a new label for the version as I understand it.</p>\n\n<p>Here is the main body of the code. It doesn't compile because I have removed bits to try and simplify the structure.</p>\n\n<pre><code>{\nSTDMETHODIMP Crender::generatexmldoc(LPDISPATCH adorecordset)\n\n    _Recordset rs;\n    rs.AttachDispatch(adorecordset);\n    CStringArray* fieldnames = new CStringArray();\n    int recno = 0;\n    LPDISPATCH fs = rs.GetFields();\n    while ( rs.GetState() == 1 &amp;&amp; ! rs.GetEof() &amp;&amp; recno++ != maxrecords) {\n      _generatexmlelement(fs , arecordname, TRUE, fieldnames);\n      rs.MoveNext();\n    }\n    fs-&gt;Release();\n    rs.DetachDispatch();\n    fieldnames-&gt;RemoveAll();\n    delete fieldnames;\n}\n\nvoid Crender::_generatexmlelement(LPDISPATCH adofields, LPCSTR elementname, BOOL closeelement, CStringArray* fieldnames)\n{\n  USES_CONVERSION;\n\n  if (fieldnames-&gt;GetSize() == 0) {\n    for (index.uiVal = 0; index.uiVal &lt; total; index.uiVal++) {\n      LPDISPATCH dItem = fs.GetItem(index);\n      fd.AttachDispatch(dItem);\n      CString name = fd.GetName();\n      fieldnames-&gt;Add(name);\n      fd.DetachDispatch();\n      dItem-&gt;Release();\n    }\n  }\n\n  writeoutfile(CString(\"&lt;\") + elementname);\n  for (index.uiVal = 0; index.uiVal &lt; total; index.uiVal++) {\n    LPDISPATCH dItem = fs.GetItem(index);\n    fd.AttachDispatch(dItem);\n    value.Attach(fd.GetValue());\n    // code removed - data comes from value\n    writeoutfile(data, data.GetLength());\n    }\n\n    value.Clear();\n    value.Detach();\n    fd.DetachDispatch();\n    dItem-&gt;Release();\n  }\n}\n</code></pre>\n\n<p>What in here could be causing the round trips to re-establish the connection?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441214509, "post_id": 32358781, "comment_id": 52591668, "body": "Globbing in CMake uses different syntax, than regular expressions. You need something like <code>FILE(GLOB CLASSES_FILES RELATIVE ${CLASSES} ${CLASSES}&#47;*.cc)</code> as first command."}, {"owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441225897, "post_id": 32358781, "comment_id": 52597834, "body": "@Tsyvarev that did not solve the problem. If i understood correctly ${CLASSES} already defines the working directory."}, {"owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1441226363, "post_id": 32358781, "comment_id": 52598104, "body": "Solved it by changing the root folder from ${CLASSES} to ${CMAKE_SOURCE_DIR}"}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1441286804, "post_id": 32358781, "comment_id": 52624715, "body": "Obligatory hint that it is dicouraged to use globbing for source files: <i>We do not recommend using GLOB to collect a list of source files from your source tree.  If no CMakeLists.txt file changes when a source is added or removed then the generated build system cannot know when to ask CMake to regenerate.</i> From the <a href=\"http://www.cmake.org/cmake/help/v3.3/command/file.html\" rel=\"nofollow noreferrer\">CMake docs</a>."}, {"owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1441290419, "post_id": 32358781, "comment_id": 52627406, "body": "@ComicSansMS I was trying to provide with a generic solution for a project that might expect the addition of new files. In a scenario where some of the contributors do not have experience with CMAKE files i found that would fill the need. Is there any good practice for generic solutions like what i am attempting?"}, {"owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1441290505, "post_id": 32358781, "comment_id": 52627474, "body": "@ComicSansMS Another thing. If i understood correctly. You mean to say that even if i re-run the command (CMAKE) it will not detect new source files?"}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1441293019, "post_id": 32358781, "comment_id": 52629306, "body": "If you re-run CMake it will detect the files. The re-run has to be triggered manually though. The recommended way is for users to maintain a list of files in the CMakeLists. That way, when you add a file, you have to edit the CMakeLists, so when you try to recompile it will automatically re-run CMake because the CMakeLists changed. The argument here is that the globbing approach is at best slightly more convenient, but is less flexible and more error-prone. This argument is a bit controversial in the community, but that&#39;s the official guideline and I personally tend to agree with it."}], "owner": {"reputation": 838, "user_id": 3527062, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/100000481572925/picture?type=large", "display_name": "Rafael Saraiva", "link": "https://stackoverflow.com/users/3527062/rafael-saraiva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441260473, "creation_date": 1441212510, "last_edit_date": 1441260473, "question_id": 32358781, "link": "https://stackoverflow.com/questions/32358781/differentiate-two-cmake-pieces-i-cant-fathom-why-one-does-not-work", "title": "Differentiate two CMAKE pieces. I can&#39;t fathom why one does not work", "body": "<p>What is the difference between:</p>\n\n<pre><code>FILE(GLOB CLASSES_FILES RELATIVE ${CLASSES} [^.]*.cc)\n\nFILE(GLOB HANDLERS_FILES RELATIVE ${HANDLERS} [^.]*.c)\n\nADD_LIBRARY(deti_boot_lib SHARED ${CLASSES_FILES}\n                                 ${HANDLERS_FILES})\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ADD_LIBRARY(deti_boot_lib SHARED ${CLASSES}/BroadcastSecurityManager.cc\n                                 ${CLASSES}/Decoder.cc\n                                 ${CLASSES}/Logger.cc\n                                 ${CLASSES}/Encoder.cc\n                                 ${CLASSES}/Codeword.cc\n                                 ${CLASSES}/RandPerm.cc\n                                 ${CLASSES}/Symbol.cc\n                                 ${CLASSES}/ReceiverSecurityManager.cc\n                                 ${HANDLERS}/file_handler.c\n                                 ${HANDLERS}/lt_handler.c\n                                 ${HANDLERS}/network_handler.c\n                                 ${HANDLERS}/time_handler.c)\n</code></pre>\n\n<p>The second works while the first does not. I think i got how file globbing works. This should work!</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1441213386, "post_id": 32358713, "comment_id": 52590934, "body": "What have you thought up? Off the top of my head, couldn&#39;t you combine your <code>n</code> sorted lists into a single sorted list (with every element sorted by the valid range float), then iterate over the list and combine elements based on their range value? You could also skip merging them all up front, but conceptually, merging them all together should make more sense."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441213663, "post_id": 32358713, "comment_id": 52591110, "body": "Are you using <i>lists</i> or <i>arrays</i>?  Your title says &quot;arrays/lists&quot; yet your question discusses lists.  They are different data structures and the algorithms may be different (for example, a list doesn&#39;t have random access via an index)."}, {"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "reply_to_user": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1441213881, "post_id": 32358713, "comment_id": 52591270, "body": "@birryree For just two lists I find the first intersection and then iterate down the lists inserting a new element in the destination whenever one of the constants change. This Is a very naive method but works fine for 2 lists. I get lost keeping track of all of the coefficients when I have to hold a list for them too. I suppose what would make sense and allow me to combine them all into one list is also to store the end of each range in the element. Currently the end of the range is the start of the next range, which falls apart if I combine all the lists."}, {"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441213971, "post_id": 32358713, "comment_id": 52591336, "body": "@ThomasMatthews These are arrays/vectors. I&#39;m just in the habit of calling these particular ones lists since I replaced a really messy linked list system with these vectors."}, {"owner": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1441214293, "post_id": 32358713, "comment_id": 52591556, "body": "@Goobley maybe use a sliding window approach: iterate over your <code>n</code> vectors and get all unique ranges out, and create a new list (<code>newvec</code>) and initialize new elements of the range values and a constant of 0. Iterate over this new list from <code>0 to length-1</code>, and iterate over every vector separately (keep a list of current indexes for the vectors you&#39;re iterating over). If any particular element from any vector is within the range of <code>newvec[i] &lt; range &lt; newvec[i+1]</code>, then add it to the constant value at <code>newvec[i]</code>, and increment index for that vector. Do this until all vectors have are done."}, {"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "reply_to_user": {"reputation": 67949, "user_id": 297696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/782a7a5f79b342bb12dc0aaae3a0c34d?s=128&d=identicon&r=PG", "display_name": "wkl", "link": "https://stackoverflow.com/users/297696/wkl"}, "edited": false, "score": 0, "creation_date": 1441215037, "post_id": 32358713, "comment_id": 52591978, "body": "@birryree Thanks, that sounds like a fairly good way of going about it. I&#39;ll throw together a simple test case for this later/tomorrow."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1441217201, "post_id": 32358713, "comment_id": 52593187, "body": "It may help your algorithm if you explicitly add the value for zero from <code>-inf</code> to the start, and from the end to <code>+inf</code>.  Or then again, it might not.  But worth considering."}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1441231241, "post_id": 32358713, "comment_id": 52600271, "body": "@Goobley it seems your algo is incorrect. It returns (4, 12) and (340, 0), but correct answers are (4, 16) and (340, 7) if I got it"}, {"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "reply_to_user": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1441231618, "post_id": 32358713, "comment_id": 52600401, "body": "@Stas It should be (4,12) and (340, 0), the last entry in each vector just bounds the top of the interval (they are closed on both ends), its data value is ignored. I put the comment above it to say that, but it&#39;s not overly clear"}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1441264409, "post_id": 32358713, "comment_id": 52610020, "body": "@Goobley yep, got it, it looks a bit tricky"}, {"owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "edited": false, "score": 0, "creation_date": 1441634835, "post_id": 32358713, "comment_id": 52745161, "body": "@Goobley nice to see you handle last entries separately)  Concerning your <code>merge_invervals</code> implementation, maybe it makes sense to make it less general, because it is coupled to <code>DataType</code> anyway.  Say, <code>vector&lt;DataType&gt; merge_intervals(const vector&lt;DataType&gt;&amp; a, const vector&lt;DataType&gt;&amp; b)</code>. It will make code more readable...  Or, move into opposite direction and generalize <code>merge_intervals</code> by moving <code>Compare</code> and <code>Combine</code> to parameters. But I&#39;m not sure it makes sense, as it looks hardly reusable to me. I vote for less general implementation)"}], "answers": [{"tags": [], "owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "is_accepted": false, "score": 0, "last_activity_date": 1441217776, "creation_date": 1441217776, "answer_id": 32360391, "question_id": 32358713, "link": "https://stackoverflow.com/questions/32358713/combining-arrays-lists-in-an-specific-fashion/32360391#32360391", "title": "Combining arrays/lists in an specific fashion", "body": "<p>Do you really need a data structure as result?  I don't think so.  Actually you're defining several functions that can be added.  The examples you give are encoded using a 'start, value(, implicit end)' tuple.  The basic building block is a function that looks up it's value at a certain point:</p>\n\n<pre><code>double valueAt(const vector&lt;edge&gt; &amp;starts, float point) {\n    auto it = std::adjacent_find(begin(starts), end(starts),\n        [&amp;](edge e1, edge e2) {\n            return e1.x &lt;= point &amp;&amp; point &lt; e2.x;\n    });\n    return it-&gt;second;\n};\n</code></pre>\n\n<p>The function value for a point is the sum of the function values for all code-series.</p>\n\n<p>If you really need a list in the end, you can join and sort all <code>edge.x</code> values for all series, and create the list from that.</p>\n\n<p>Unless performance is an issue :)</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "edited": false, "score": 0, "creation_date": 1441229073, "post_id": 32362835, "comment_id": 52599371, "body": "Ooh, that could be a tidy way of dealing with  lots of these and keeping the logic out of the way. I&#39;ve added a simple implementation that can generically handle n vectors, but it may be simpler just left as two and adding them as they arrive rather than storing all of them and then combining them all at the same time (even if this does require more traversals)."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1441226893, "creation_date": 1441226893, "answer_id": 32362835, "question_id": 32358713, "link": "https://stackoverflow.com/questions/32358713/combining-arrays-lists-in-an-specific-fashion/32362835#32362835", "title": "Combining arrays/lists in an specific fashion", "body": "<p>If you can combine two of these structures, you can combine many.</p>\n\n<p>First, encapsulate your <code>std::vector</code> into a class.  Implement what you know as <code>operator+=</code> (and define <code>operator+</code> in terms of this if you want).  With that in place, you can combine as many as you like, just by repeated addition.  You could even use <code>std::accumulate</code> to combine a collection of them.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "edited": false, "score": 0, "creation_date": 1441272667, "post_id": 32370747, "comment_id": 52615153, "body": "Wow, this looks like a really good approach. I knew that my algorithm was inherently bad, I was just glad to have something produce the results I wanted. I&#39;ll give this one a quick test and check it&#39;s working for me. Thanks!"}], "tags": [], "owner": {"reputation": 10555, "user_id": 194635, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/895e165418bff196cc08e94af29b650f?s=128&d=identicon&r=PG", "display_name": "Stas", "link": "https://stackoverflow.com/users/194635/stas"}, "is_accepted": true, "score": 2, "last_activity_date": 1441269256, "creation_date": 1441269256, "answer_id": 32370747, "question_id": 32358713, "link": "https://stackoverflow.com/questions/32358713/combining-arrays-lists-in-an-specific-fashion/32370747#32370747", "title": "Combining arrays/lists in an specific fashion", "body": "<p>Unfortunately, your algorithm is inherently slow. It doesn't make sense to profile or apply some C++ specific tweaks, it won't help. It will never stop calculation on pretty small sets like merging 1000 lists of 10000 elements each.</p>\n\n<p>Let's try to evaluate time complexity of your algo. For the sake of simplicity, let's merge only lists of the same length.</p>\n\n<p><code>L</code> - length of a list<br>\n<code>N</code> - number of lists to be merged<br>\n<code>T = L * N</code> - length of a whole concatenated list</p>\n\n<p>Complexity of your algorithm steps:</p>\n\n<ul>\n<li>create output vector - <code>O(T)</code></li>\n<li>sort output vector - <code>O(T*log(T))</code></li>\n<li>filter output vector - <code>O(T)</code></li>\n<li>fix data in output vector - <code>O(T*T)</code></li>\n</ul>\n\n<p>See, the last step defines the whole algorithm complexity: <code>O(T*T) = O(L^2*N^2)</code>. It is not acceptable for practical application. See, to merge 1000 lists of 10000 elements each, the algorithm should run <code>10^14</code> cycles.</p>\n\n<p>Actually, the task is pretty complex, so do not try to solve it in one step. Divide and conquer!</p>\n\n<ol>\n<li>Write an algorithm that merges two lists into one</li>\n<li>Use it to merge a list of lists</li>\n</ol>\n\n<p><strong>Merging two lists into one</strong></p>\n\n<p>This is relatively easy to implement (but be careful with corner cases). The algorithm should have linear time complexity: <code>O(2*L)</code>. Take a look at how <a href=\"http://en.cppreference.com/w/cpp/algorithm/merge\" rel=\"nofollow\"><code>std::merge</code></a> is implemented. You just need to write your custom variant of <code>std::merge</code>, let's call it <code>merge_intervals</code>.</p>\n\n<p><strong>Applying a merge algorithm to a list of lists</strong></p>\n\n<p>This is a little bit tricky, but again, divide and conquer! The idea is to do recursive merge: split a list of lists on two halves and merge them.</p>\n\n<pre><code>template&lt;class It, class Combine&gt;\nauto merge_n(It first, It last, Combine comb)\n   -&gt; typename std::remove_reference&lt;decltype(*first)&gt;::type\n{\n    if (first == last)\n        throw std::invalid_argument(\"Empty range\");\n\n    auto count = std::distance(first, last);\n\n    if (count == 1)\n       return *first;\n\n    auto it = first;\n    std::advance(it, count / 2);\n    auto left = merge_n(first, it, comb);\n    auto right = merge_n(it, last, comb);\n    return comb(left, right);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>auto combine = [](const std::vector&lt;DataType&gt;&amp; a, const std::vector&lt;DataType&gt;&amp; b)\n{\n   std::vector&lt;DataType&gt; result;\n   merge_intervals(a.begin(), a.end(), b.begin(), b.end(),\n         std::back_inserter(result));\n   return result;\n};\n\nauto output = merge_n(input.begin(), input.end(), combine);\n</code></pre>\n\n<p>The nice property of such recursive approach is a time complexity: it is <code>O(L*N*log(N))</code> for the whole algorithm. So, to merge 1000 lists of 10000 elements each, the algorithm should run 10000 * 1000 * 9.966 = 99,660,000 cycles. It is 1,000,000 times faster than original algorithm.</p>\n\n<p>Moreover, such algorithm is inherently parallelizable. It is not a big deal to write parallel version of <code>merge_n</code> and run it on thread pool.</p>\n"}, {"comments": [{"owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "edited": false, "score": 0, "creation_date": 1441367373, "post_id": 32392259, "comment_id": 52662856, "body": "Thanks, this looks like a very elegant solution. I haven&#39;t implemented the other solution into my program yet, so I will give both of them a more thorough appraisal before I do."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": false, "score": 2, "last_activity_date": 1441351049, "creation_date": 1441351049, "answer_id": 32392259, "question_id": 32358713, "link": "https://stackoverflow.com/questions/32358713/combining-arrays-lists-in-an-specific-fashion/32392259#32392259", "title": "Combining arrays/lists in an specific fashion", "body": "<p>I know I'm a bit late to the party, but when I started writing this you hadn't a suitable answer yet, and my solution should have a relatively good time complexity, so here you go:</p>\n\n<hr>\n\n<p>I think the most straightforward way to approach this is to see each of your sorted lists as a stream of events: At a given time, the value (of that stream) changes to a new value:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Point {\n  using value_type = T;\n  float time;\n  T value;\n};\n</code></pre>\n\n<p>You want to superimpose those streams into a single stream (i.e. having their values summed up at any given point). For that you take the earliest event from all streams, and apply its effect on the result stream. Therefore, you need to first \"undo\" the effect that the previous value from that stream made on the result stream, and then add the new value to the current value of the result stream.</p>\n\n<p>To be able to do that, you need to remember for each stream the last value, the next value (and when the stream is empty):</p>\n\n<pre><code>std::vector&lt;std::tuple&lt;Value, StreamIterator, StreamIterator&gt;&gt; streams;\n</code></pre>\n\n<p>The first element of the tuple is the last effect of that stream onto the result stream, the second is an iterator pointing to the streams next event, and the last is the end iterator of that stream:</p>\n\n<pre><code>transform(from, to, inserter(streams, begin(streams)),\n    [] (auto &amp; stream) {\n      return make_tuple(static_cast&lt;Value&gt;(0), begin(stream), end(stream));\n    });\n</code></pre>\n\n<p>To be able to always get the earliest event of all the streams, it helps to keep the (information about the) streams in a (min) heap, where the top element is the stream with the next (earliest) event. That's the purpose of the following comparator:</p>\n\n<pre><code>auto heap_compare = [] (auto const &amp; lhs, auto const &amp; rhs) {\n       bool less = (*get&lt;1&gt;(lhs)).time &lt; (*get&lt;1&gt;(rhs)).time;\n       return (not less);\n     };\n</code></pre>\n\n<p>Then, as long as there are still some events (i.e. some stream that is not empty), first (re)build the heap, take the top element and apply its next event to the result stream, and then remove that element from the stream. Finally, if the stream is now empty, remove it.</p>\n\n<pre><code>// The current value of the result stream.\nValue current = 0;\nwhile (streams.size() &gt; 0) {\n  // Reorder the stream information to get the one with the earliest next\n  // value into top ...\n  make_heap(begin(streams), end(streams), heap_compare);\n  // .. and select it.\n  auto &amp; earliest = streams[0];\n  // New value is the current one, minus the previous effect of the selected\n  // stream plus the new value from the selected stream\n  current = current - get&lt;0&gt;(earliest) + (*get&lt;1&gt;(earliest)).value;\n  // Store the new time point with the new value and the time of the used\n  // time point from the selected stream\n  *out++ = Point&lt;Value&gt;{(*get&lt;1&gt;(earliest)).time, current};\n  // Update the effect of the selected stream\n  get&lt;0&gt;(earliest) = (*get&lt;1&gt;(earliest)).value;\n  // Advance selected stream to its next time point\n  ++(get&lt;1&gt;(earliest));\n  // Remove stream if empty\n  if (get&lt;1&gt;(earliest) == get&lt;2&gt;(earliest)) {\n    swap(streams[0], streams[streams.size() - 1u]);\n    streams.pop_back();\n  }\n}\n</code></pre>\n\n<p>This will return a stream where there might be multiple points with the same time, but a different value. This occurs when there are multiple \"events\" at the same time. If you only want the last value, i.e. the value after all these events happened, then one needs to combine them:</p>\n\n<pre><code>merge_point_lists(begin(input), end(input), inserter(merged, begin(merged)));\n// returns points with the same time, but with different values. remove these\n// duplicates, by first making them REALLY equal, i.e. setting their values\n// to the last value ...\nfor (auto write = begin(merged), read = begin(merged), stop = end(merged);\n    write != stop;) {\n  for (++read; (read != stop) and (read-&gt;time == write-&gt;time); ++read) {\n    write-&gt;value = read-&gt;value;\n  }\n  for (auto const cached = (write++)-&gt;value; write != read; ++write) {\n    write-&gt;value = cached;\n  }\n}\n// ... and then removing them.\nmerged.erase(\n    unique(begin(merged), end(merged),\n        [](auto const &amp; lhs, auto const &amp; rhs) {\n          return (lhs.time == rhs.time);}),\n    end(merged));\n</code></pre>\n\n<p>(<a href=\"http://ideone.com/Dt1OU8\" rel=\"nofollow\">Live example here</a>)</p>\n\n<hr>\n\n<p>Concerning the time complexity: This is iterating over all \"events\", so it depends on the number of events <code>e</code>. The very first <code>make_heap</code> call has to built a complete new heap, this has worst case complexity of <code>3 * s</code> where <code>s</code> is the number of streams the function has to merge. On subsequent calls, <code>make_heap</code> only has to correct the very first element, this has worst case complexity of <code>log(s')</code>. I write <code>s'</code> because the number of streams (that need to be considered) will decrease to zero. This\ngives</p>\n\n<pre><code>3s + (e-1) * log(s')\n</code></pre>\n\n<p>as complexity. Assuming the worst case, where <code>s'</code> decreases slowly (this happens when the events are evenly distributed across the streams, i.e. all streams have the same number of events:</p>\n\n<pre><code>3s + (e - 1 - s) * log(s) + (sum (log(i)) i = i to s)\n</code></pre>\n"}], "owner": {"reputation": 181, "user_id": 3847013, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8c6a6992857f8a3e068681be53027f3e?s=128&d=identicon&r=PG&f=1", "display_name": "Goobley", "link": "https://stackoverflow.com/users/3847013/goobley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 1, "accepted_answer_id": 32370747, "answer_count": 4, "score": 1, "last_activity_date": 1441351049, "creation_date": 1441212342, "last_edit_date": 1441283282, "question_id": 32358713, "link": "https://stackoverflow.com/questions/32358713/combining-arrays-lists-in-an-specific-fashion", "title": "Combining arrays/lists in an specific fashion", "body": "<p>I'm trying to find a sensible algorithm to combine multiple lists/vectors/arrays as defined below.</p>\n\n<p>Each element contains a float declaring the start of its range of validity and a constant that is used over this range. Where ranges from different lists overlap their constants need to be added to produce one global list.</p>\n\n<p>I've done an attempt at an illustration below to try and give a good idea of what I mean:</p>\n\n<pre><code>First List:\n\n     0.5---------------2------------3.2--------4\n             a1             a2            a3\n\n\nSecond List:\n            1----------2----------3---------------4.5\n                 b1         b2            b3\n\n\nDesired Output:\n\n     0.5----1----------2----------3-3.2--------4--4.5\n         a1     a1+b1     a2+b2    ^    a3+b3    b3\n                                 b3+a2\n</code></pre>\n\n<p>I can't think of a sensible way of going about this in the case of n lists; Just 2 is quite easy to brute force.</p>\n\n<p>Any hints or ideas would be welcome. Each list is represented as a C++ <code>std::vector</code> (so feel free to use standard algorithms) and are sorted by start of range value.\nCheers!</p>\n\n<p><strong>Edit:</strong> Thanks for the advice, I've come up with a naive implementation, not sure why I couldn't get here on my own first. To my mind the obvious improvement would be to store an iterator for each vector since they're already sorted and not have to re-traverse each vector for each point. Given that most vectors will contain less than 100 elements, but there may be many vectors this may or may not be worthwhile. I'd have to profile to see.</p>\n\n<p>Any thoughts on this?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstruct DataType\n{\n    double intervalStart;\n    int data;\n    // More data here, the data is not just a single int, but that\n    // works for our demonstration\n};\n\nint main(void)\n{\n    // The final \"data\" of each vector is meaningless as it refers to\n    // the coming range which won't be used as this is only for\n    // bounded ranges\n    std::vector&lt;std::vector&lt;DataType&gt; &gt; input = {{{0.5, 1}, {2.0, 3}, {3.2, 3}, {4.0, 4}},\n                                                 {{1.0, 5}, {2.0, 6}, {3.0, 7}, {4.5, 8}},\n                                                 {{-34.7895, 15}, {-6.0, -2}, {1.867, 5}, {340, 7}}};\n    // Setup output vector\n    std::vector&lt;DataType&gt; output;\n    std::size_t inputSize = 0;\n    for (const auto&amp; internalVec : input)\n        inputSize += internalVec.size();\n\n    output.reserve(inputSize);\n\n    // Fill output vector\n    for (const auto&amp; internalVec : input)\n        std::copy(internalVec.begin(), internalVec.end(), std::back_inserter(output));\n\n    // Sort output vector by intervalStartPoints\n    std::sort(output.begin(), output.end(),\n              [](const DataType&amp; data1, const DataType&amp; data2)\n              {\n                  return data1.intervalStart &lt; data2.intervalStart;\n              });\n    // Remove DataTypes with same intervalStart - each interval can only start once\n    output.erase(std::unique(output.begin(), output.end(),\n                             [](const DataType&amp; dt1, const DataType&amp; dt2)\n                             {\n                                 return dt1.intervalStart == dt2.intervalStart;\n                             }), output.end());\n    // Output now contains all the right intersections, just not with the right data\n\n    // Lambda to find the associated data value associated with an\n    // intervsalStart value in a vector\n    auto FindDataValue = [&amp;](const std::vector&lt;DataType&gt; v, double startValue)\n    {\n        auto iter = std::find_if(v.begin(), v.end(), [startValue](const DataType&amp; data)\n        {\n            return data.intervalStart &gt; startValue;\n        });\n\n        if (iter == v.begin() || iter == v.end())\n        {\n            return 0;\n        }\n\n        return (iter-1)-&gt;data;\n    };\n\n    // For each interval in the output traverse the input and sum the\n    // data constants\n    for (auto&amp; val : output)\n    {\n        int sectionData = 0;\n        for (const auto&amp; iv : input)\n            sectionData += FindDataValue(iv, val.intervalStart);\n\n        val.data = sectionData;\n    }\n\n    for (const auto&amp; i : output)\n        std::cout &lt;&lt; \"loc: \" &lt;&lt; i.intervalStart &lt;&lt; \" data: \" &lt;&lt; i.data &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Edit2:</strong> @Stas's code is a very good way to approach this problem. I've just tested it on all the edge cases I could think of.\nHere's my <code>merge_intervals</code> implementation in case anyone is interested. The only slight change I've had to make to the snippets Stas provided is:</p>\n\n<pre><code>for (auto&amp; v : input)\n    v.back().data = 0;\n</code></pre>\n\n<p>Before combining the vectors as suggested. Thanks!</p>\n\n<pre><code>template&lt;class It1, class It2, class OutputIt&gt;\nOutputIt merge_intervals(It1 first1, It1 last1,\n                        It2 first2, It2 last2,\n                        OutputIt destBegin)\n{\n    const auto begin1 = first1;\n    const auto begin2 = first2;\n\n    auto CombineData = [](const DataType&amp; d1, const DataType&amp; d2)\n    {\n        return DataType{d1.intervalStart, (d1.data+d2.data)};\n    };\n\n    for (; first1 != last1; ++destBegin)\n    {\n        if (first2 == last2)\n        {\n            return std::copy(first1, last1, destBegin);\n        }\n\n        if (first1-&gt;intervalStart == first2-&gt;intervalStart)\n        {\n            *destBegin = CombineData(*first1, *first2);\n            ++first1; ++first2;\n        }\n        else if (first1-&gt;intervalStart &lt; first2-&gt;intervalStart)\n        {\n            if (first2 &gt; begin2)\n                *destBegin = CombineData(*first1, *(first2-1));\n            else\n                *destBegin = *first1;\n            ++first1;\n        }\n        else\n        {\n            if (first1 &gt; begin1)\n                *destBegin = CombineData(*first2, *(first1-1));\n            else\n                *destBegin = *first2;\n            ++first2;\n        }\n    }\n    return std::copy(first2, last2, destBegin);\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "dynamic-memory-allocation", "rule-of-three"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1441212887, "post_id": 32358648, "comment_id": 52590592, "body": "We already have a good Q&amp;A about <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">how the rule of 3</a> is implemented and applied correctly."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441213719, "post_id": 32359124, "comment_id": 52591152, "body": "which book you advise? It&#39;s absolute c++ walter savitch"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441214194, "post_id": 32359124, "comment_id": 52591490, "body": "I&#39;m afraid book recommendations are OT, and anyway I wouldn&#39;t know what level to pitch. Just start with the rule of 3 link in the comment, and do your own research."}, {"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441215274, "post_id": 32359124, "comment_id": 52592097, "body": "for first specification I have fixed copy constructor is it right ? also one thing I don&#39;t understand what you mean a couple of <code>delete[]</code> loops and having two copy loops. Would you mind explaining? I have destructor already."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441215396, "post_id": 32359124, "comment_id": 52592160, "body": "You tear down the arrays in your dtor and in the assignment operator, duplicating code. Move it to a function and call from both places. Same for allocating the arrays, same for copying values."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "reply_to_user": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441215503, "post_id": 32359124, "comment_id": 52592226, "body": "Oh, and <i>is it right?</i> Test it! Print the result, step through in a debugger, see if it does the right thing."}, {"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441215509, "post_id": 32359124, "comment_id": 52592231, "body": "and I really don&#39;t find a way to print out matrices likewise calling in constructor"}, {"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441215770, "post_id": 32359124, "comment_id": 52592382, "body": "I can&#39;t get destructor into main(). Because arr is private how can I test ? and I can&#39;t test the copy constructor because the filling the array is problem. I filled but shows result as 0"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 2, "last_activity_date": 1441216381, "last_edit_date": 1441216381, "creation_date": 1441213526, "answer_id": 32359124, "question_id": 32358648, "link": "https://stackoverflow.com/questions/32358648/rule-of-three-exercise-unexpected-result/32359124#32359124", "title": "rule of three exercise unexpected result", "body": "<ol>\n<li><p>your copy constructor creates the arrays, but never copies the contents.\nThe copy assignment operator does this correctly. For that matter, you have loads of duplicated <code>new[]</code> loops, a couple of <code>delete[]</code> loops, and you <em>should</em> have two copy loops. Factor these out into functions, and you only need to get them right once.</p></li>\n<li><p><code>sum</code> creates a <em>default-sized</em> object and then, probably, overruns both row and column dimensions. The usual (easy and correct) implementation is to create a local copy of the left-hand argument (using the copy ctor you fixed above) and forward to <code>operator+=</code>. That operator is much easier to get right.</p></li>\n<li><p>you have a way of printing these matrices out. Do it! Do it everywhere! This makes it easy to see which stage things went wrong at.</p></li>\n<li><p>this book doesn't sound very good. It's teaching poor practice for no obvious reason (the operator+ trick is standard, you should use <code>unique_ptr</code> if you can't use <code>vector</code>, etc. etc.)</p></li>\n</ol>\n\n<hr>\n\n<p>Edits: I'll reply to some comments here because they're in danger of turning into a chat session, and I don't want to spend more time on this.</p>\n\n<ul>\n<li><blockquote>\n  <p>I have fixed copy constructor is it right?</p>\n</blockquote>\n\n<p>This is a good time to figure out how to test and debug code. Add print statements, use a debugger, split things out into functions you can test and then write tests for them.</p></li>\n<li><blockquote>\n  <p>what you mean a couple of <code>delete[]</code> loops and having two copy loops</p>\n</blockquote>\n\n<p>Look for loops in your code. I can see 3 loops calling <code>new[]</code>, all doing essentially the same thing. I can see 2 loops calling <code>delete[]</code>, one in the destructor and one in the copy assignment operator. Just search your own code for the <code>for</code> keyword!</p></li>\n<li><blockquote>\n  <p>I really don't find a way to print out matrices</p>\n</blockquote>\n\n<p>so where did <code>TwoD::putArr</code> come from? Admittedly <code>ostream&amp; operator&lt;&lt;(ostream&amp;, TwoD const &amp;)</code> would be a <em>better</em> name for it, but you wrote it so you might as well use it.</p></li>\n<li><blockquote>\n  <p>I can't get destructor into main()</p>\n</blockquote>\n\n<p>you can't <em>stop</em> the destructor being called when main finishes - your objects go out of scope then. Just stick a breakpoint in the destructor and it will be called.</p></li>\n<li><blockquote>\n  <p>Because arr is private how can I test?</p>\n</blockquote>\n\n<p>you can still see it in the debugger, you can still print the contents (as above), you can still call <code>getVal</code> from a unit test, you can just make it <code>public</code> until you've figured out your problem(s)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441220927, "post_id": 32360389, "comment_id": 52595207, "body": "thank you after applying your advised way, I have also tried to copy constructor I get memory error. <code>TwoD arr4(arr3);</code>. Would you mind helping ? I updated the code."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441222036, "post_id": 32360389, "comment_id": 52595786, "body": "@newbie, The line <code>for ( int i = 0; i &lt; MaxRows + 1; i++ )</code> is wrong. You end up using the array out of bounds. It needs to be <code>for ( int i = 0; i &lt; MaxRows; i++ )</code>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441224108, "post_id": 32360389, "comment_id": 52596930, "body": "@newbie, Trying to debug your code with comments and responses is not very productive. Put <code>cout</code> statements liberally in your code to track down the problem(s);"}, {"owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "edited": false, "score": 0, "creation_date": 1441224658, "post_id": 32360389, "comment_id": 52597200, "body": "I have used and get error in <code>const TwoD operator +(const TwoD&amp; first, const TwoD&amp; second)</code>. I can&#39;t find. If there is paradise on the world, it is H\u0131ndistane."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1441217770, "creation_date": 1441217770, "answer_id": 32360389, "question_id": 32358648, "link": "https://stackoverflow.com/questions/32358648/rule-of-three-exercise-unexpected-result/32360389#32360389", "title": "rule of three exercise unexpected result", "body": "<p>Problem with your code:</p>\n\n<pre><code>void TwoD::setRowCol()\n{\n    int r_user;\n    int c_user;\n    cout &lt;&lt; \"Enter num of rows =&gt; \";\n    cin  &gt;&gt; r_user;\n    cout &lt;&lt; \"Enter num of columns =&gt; \";\n    cin  &gt;&gt; c_user;\n\n    MaxRows = r_user;\n    MaxCols = c_user;\n\n    ///\n    /// This constructs a new TwoD object but does not change\n    /// object on which the function was invoked.\n    ///\n    TwoD(MaxRows,MaxCols);    \n}\n</code></pre>\n\n<p>Ways to solve the problem:</p>\n\n<p><strong>Update the member data</strong></p>\n\n<pre><code>void TwoD::setRowCol()\n{\n    int r_user;\n    int c_user;\n    cout &lt;&lt; \"Enter num of rows =&gt; \";\n    cin  &gt;&gt; r_user;\n    cout &lt;&lt; \"Enter num of columns =&gt; \";\n    cin  &gt;&gt; c_user;\n\n    // Delete the current memory\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n       delete [] arr[i];\n    }\n\n    delete [] arr;\n\n    MaxRows = r_user;\n    MaxCols = c_user;\n\n    // Allocate new memory.\n    arr = new double*[MaxRows];\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n       arr[i] = new double[MaxCols];\n    }\n\n    // Now read the data.\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n        for (int j = 0; j &lt; MaxCols; j++)\n        {\n            cout &lt;&lt; \"Enter for \" &lt;&lt; i &lt;&lt; j &lt;&lt; \"=&gt; \";\n            cin  &gt;&gt; arr[i][j];\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Create a function that returns a brand new object</strong></p>\n\n<p>I recommend this method.</p>\n\n<p>First, update the constructor that takes the row and the column so that it does not have any code to read data from user input.</p>\n\n<pre><code>TwoD::TwoD(int row, int column)\n: MaxRows(row), MaxCols(column)\n{\n    arr = new double*[row];\n    for (int i = 0; i &lt; row; i++)\n    {\n        arr[i] = new double[column];\n    }\n}\n</code></pre>\n\n<p>Second, add a <code>static</code> member function to construct an object from user input.</p>\n\n<pre><code>static TwoD constructFromUserInput();\n</code></pre>\n\n<p>and implement it as:</p>\n\n<pre><code>TwoD TwoD::constructFromUserInput()\n{\n    int r_user;\n    int c_user;\n    cout &lt;&lt; \"Enter num of rows =&gt; \";\n    cin  &gt;&gt; r_user;\n    cout &lt;&lt; \"Enter num of columns =&gt; \";\n    cin  &gt;&gt; c_user;\n\n    // Construct an object.\n    TwoD obj(r_user, c_user);\n\n    // Now read the data.\n    for (int i = 0; i &lt; r_user; i++)\n    {\n        for (int j = 0; j &lt; c_user; j++)\n        {\n            cout &lt;&lt; \"Enter for \" &lt;&lt; i &lt;&lt; j &lt;&lt; \"=&gt; \";\n            cin  &gt;&gt; obj.arr[i][j];\n        }\n    }\n\n    // Return the object\n    return obj;\n}\n</code></pre>\n\n<p>Third, use the new function from <code>main</code>.</p>\n\n<pre><code>int main(int argc, char const *argv[])\n{\n   cout &lt;&lt; \"All size of TwoD object must be same\\n\\n\";\n\n   TwoD arr1 = TwoD::constructFromUserInput();\n   TwoD arr2 = TwoD::constructFromUserInput();\n\n   TwoD arr3;\n\n   arr3 = arr1 + arr2;\n   arr1.putArr();\n   arr2.putArr();\n   arr3.putArr();\n\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 5284689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d668e867d5a5e863f8304df6b35114b?s=128&d=identicon&r=PG&f=1", "display_name": "newbie", "link": "https://stackoverflow.com/users/5284689/newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "closed_date": 1441321735, "answer_count": 2, "score": -4, "last_activity_date": 1441224401, "creation_date": 1441212145, "last_edit_date": 1441224401, "question_id": 32358648, "link": "https://stackoverflow.com/questions/32358648/rule-of-three-exercise-unexpected-result", "closed_reason": "Duplicate", "title": "rule of three exercise unexpected result", "body": "<p>I try to learn C++ basis in my free time and follow exercises of a book. Firstly, when I enter 9 as row and 8 as column I get malloc freeing error. Secondly, I get 0 as output I can't see what I enter. I want to write the program because I can reinforce rule of three. It's certainly not homework. Besides, I think it is hard question and efficient question. If the question can be answered, it will be helpful. Because I've searched on google I can't find out halfway decent thing about solution. Also, can you check my copy constructor, assignment operator and destructor and tell me where my errors at?</p>\n\n<blockquote>\n  <p>Write a class TwoD that implements the two-dimensional dynamic array\n  of  doubles using ideas from this display in its constructors. You\n  should  have a private member of type pointer to double to point to\n  the dynamic array, and two int (or unsigned int) values that are\n  MaxRows and MaxCols. You should supply a default constructor for which\n  you are to choose  a default maximum row and column sizes and a\n  parameterized constructor that allows the programmer to set maximum\n  row and column sizes. Further, you should provide a void member\n  function that allows setting a particu- lar row and column entry and a\n  member function that returns a particular row and column entry as a\n  value of type double. Remark: It is difficult or impossible (depending\n  on the details)  to overload [ ] so it works as you would like for\n  two-dimensional arrays. So simply use accessor and mutator functions\n  using ordinary function notation. Overload the + operator as a friend\n  function to add two two-dimensional arrays. This function should\n  return the TwoD object whose ith row, jth column element is the sum of\n  the ith row, jth column element of the left-hand operand TwoD object\n  and the ith row, jth column element of the right-hand operand TwoD\n  object. Provide a copy constructor, an overloaded operator =, and a\n  destructor. Declare class member functions that do not change the data\n  as const members.</p>\n</blockquote>\n\n<p>My effort</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cin;\nusing std::cout;\nusing std::endl;\n\nclass TwoD\n{\npublic:\n    TwoD();\n    TwoD(int row, int column);\n    void setRowCol();\n    double getVal(int row, int column);\n    friend const TwoD operator +(const TwoD&amp; first, const TwoD&amp; second);\n    int getterRow() const;\n    int getterCol() const;\n    void setterRow(int row);\n    void setterCol(int column);\n    TwoD(const TwoD&amp; object);\n    TwoD&amp; operator =(const TwoD&amp; rightSide);\n    void putArr() const;\n    ~TwoD();\n    static TwoD constructFromUserInput();\nprivate:\n    int MaxRows;\n    int MaxCols;\n    double **arr;\n};\n\nint main(int argc, char const *argv[])\n{\n    cout &lt;&lt; \"All size of TwoD object must be same\\n\\n\";\n\n    TwoD arr1 = TwoD::constructFromUserInput();\n    TwoD arr2 = TwoD::constructFromUserInput();\n\n    TwoD arr3;\n\n    arr3 = arr1 + arr2;\n\n    TwoD arr4(arr3);\n    arr1.putArr();\n    arr2.putArr();\n    arr3.putArr();\n    arr4.putArr();\n\n    return 0;\n}\nvoid TwoD::setRowCol()\n{\n    int r_user;\n    int c_user;\n    cout &lt;&lt; \"Enter num of rows =&gt; \";\n    cin  &gt;&gt; r_user;\n    cout &lt;&lt; \"Enter num of columns =&gt; \";\n    cin  &gt;&gt; c_user;\n\n    MaxRows = r_user;\n    MaxCols = c_user;\n\n    TwoD(MaxRows,MaxCols);\n\n}\nTwoD::TwoD(int row, int column)\n: MaxRows(row), MaxCols(column)\n{\n    arr = new double*[row];\n    for (int i = 0; i &lt; row; i++)\n    {\n        arr[i] = new double[column];\n    }\n\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n        for (int j = 0; j &lt; MaxCols; j++)\n        {\n            cout &lt;&lt; \"Enter for \" &lt;&lt; i &lt;&lt; j &lt;&lt; \"=&gt; \";\n            cin  &gt;&gt; arr[i][j];\n        }\n    }\n}\nTwoD::TwoD()\n: MaxRows(2), MaxCols(2)\n{\n    arr = new double*[2];\n    for (int i = 0; i &lt; 2; i++)\n    {\n        arr[i] = new double[2];\n    }\n}\ndouble TwoD::getVal(int row, int column)\n{\n    return arr[row][column];\n}\nconst TwoD operator +(const TwoD&amp; first, const TwoD&amp; second)\n{\n    TwoD sum;\n    for (int i = 0; i &lt; first.MaxRows; i++)\n    {\n        for (int j = 0; j &lt; first.MaxCols; j++)\n        {\n            sum.arr[i][j] = first.arr[i][j] + second.arr[i][j];\n        }\n    }\n    return sum;\n}\nTwoD::TwoD(const TwoD&amp; object)\n{\n    MaxRows = object.MaxRows;\n    MaxCols = object.MaxCols;\n\n    arr = new double*[MaxRows];\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n        arr[i] = new double[MaxCols];\n    }\n\n    for ( int i = 0; i &lt; MaxRows; i++ )\n    {\n        for ( int j = 0; j &lt; MaxCols; j++ )\n        {\n            arr[i][j] = object.arr[i][j];\n        }\n    }\n}\nTwoD::~TwoD()\n{\n    for (int i = 0; i &lt; MaxRows; i++)\n        delete [] arr[i];\n    delete [] arr;\n}\nTwoD&amp; TwoD::operator =(const TwoD&amp; rightSide)\n{\n    if (this == &amp;rightSide)\n    {\n        return *this;\n    }\n\n    for (int i = 0; i &lt; MaxRows; i++)\n        delete [] arr[i];\n    delete [] arr;\n\n    arr = new double*[rightSide.MaxRows];\n    for (int i = 0; i &lt; rightSide.MaxRows; i++)\n    {\n        arr[i] = new double[rightSide.MaxCols];\n    }\n\n    MaxRows = rightSide.MaxRows;\n    MaxCols = rightSide.MaxCols;\n\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n        for (int j = 0; j &lt; MaxCols; j++)\n        {\n            arr[i][j] = rightSide.arr[i][j];\n        }\n    }\n    return *this;\n}\nvoid TwoD::putArr() const\n{\n    for (int i = 0; i &lt; MaxRows; i++)\n    {\n        for (int j = 0; j &lt; MaxCols; j++)\n        {\n            cout &lt;&lt; arr[i][j] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; endl;\n    }\n}\nint TwoD::getterRow() const\n{\n    return MaxRows;\n}\nint TwoD::getterCol() const\n{\n    return MaxCols;\n}\nvoid TwoD::setterRow(int row)\n{\n    MaxRows = row;\n}\nvoid TwoD::setterCol(int column)\n{\n    MaxCols = column;\n}\nTwoD TwoD::constructFromUserInput()\n{\n    int r_user;\n    int c_user;\n    cout &lt;&lt; \"Enter num of rows =&gt; \";\n    cin  &gt;&gt; r_user;\n    cout &lt;&lt; \"Enter num of columns =&gt; \";\n    cin  &gt;&gt; c_user;\n\n    // Construct an object.\n    TwoD obj(r_user, c_user);\n\n    // Return the object\n    return obj;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "stack", "heap"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441212106, "post_id": 32358555, "comment_id": 52590146, "body": "Pointer variable <code>a</code> is on the stack, the memory they are pointing to is on the heap, as you allocated with <code>new</code>"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441212124, "post_id": 32358555, "comment_id": 52590157, "body": "I would think that just the very first pointer is on the stack. The second and third are allocated with <code>new</code> and will be on the heap."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1441212149, "post_id": 32358555, "comment_id": 52590168, "body": "Not true. All pointers but the first one are in the heap."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441212154, "post_id": 32358555, "comment_id": 52590170, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 What stack? You&#39;re running under emscripten, don&#39;t forget that (yeah, you aren&#39;t, but given that emscripten works, the use of the word stack is misleading and useless)."}, {"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1441212183, "post_id": 32358555, "comment_id": 52590187, "body": "I suggest thinking about &quot;statically allocated&quot; vs. &quot;dynamically allocated&quot; rather than &quot;stack&quot; vs. &quot;heap&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441212238, "post_id": 32358555, "comment_id": 52590216, "body": "<a href=\"http://c2.com/cgi/wiki?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">Please don&#39;t be a 3 star programmer</a>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 1, "creation_date": 1441212262, "post_id": 32358555, "comment_id": 52590222, "body": "@JBL, statically allocated is not correct either. If you want to use C++-correct terms, say &#39;automatic storage&#39;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "edited": false, "score": 0, "creation_date": 1441212278, "post_id": 32358555, "comment_id": 52590228, "body": "@JBL Yes that&#39;s better terminology."}, {"owner": {"reputation": 11800, "user_id": 1594913, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tLf29.jpg?s=128&g=1", "display_name": "JBL", "link": "https://stackoverflow.com/users/1594913/jbl"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1441212789, "post_id": 32358555, "comment_id": 52590531, "body": "@SergeyA You&#39;re right, I just missed the edit window :("}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441214095, "post_id": 32358555, "comment_id": 52591424, "body": "-1 because this question cannot be answered without you clarifying what you&#39;re after. Stack is a platform-specific concept. The semantics of the C++ language itself don&#39;t necessitate that <code>a</code> is stored on a stack of any kind whatsoever. Please clarify whether: A. You want to understand the platform-independent semantics (meaning) of your code, or B. You have a question regarding the output the compiler produces for a particular platform - then you must include such output."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441215531, "post_id": 32358555, "comment_id": 52592240, "body": "@KubaOber In the absence of the <a href=\"https://stackoverflow.com/questions/tagged/language-lawyer\">language-lawyer</a> tag, it&#39;s usually more helpful to assume a prototypical platform spec rather than consider all possible platforms, especially for learning-level questions like this one.  Even the <a href=\"http://www.learncpp.com/cpp-tutorial/79-the-stack-and-the-heap/\" rel=\"nofollow noreferrer\">learncpp.com</a> tutorial assumes this platform detail for educational purposes."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1441228588, "post_id": 32358555, "comment_id": 52599162, "body": "@MooseBoys Talking of storage durations explicitly makes things easier to understand, not harder to understand - what we care about is how long will the storage last, and who is in control of that. The concept of a stack is not necessary or particularly helpful to explain it. All that the asker cares for really is what&#39;s the storage duration of each pointer, and of the int value as stored."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1441212181, "creation_date": 1441212181, "answer_id": 32358663, "question_id": 32358555, "link": "https://stackoverflow.com/questions/32358555/multilevel-pointers-stack-or-heap/32358663#32358663", "title": "Multilevel pointers, stack or heap?", "body": "<p>The very first pointer is on stack. The rest of them is on heap, since they were allocated using new.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441212361, "post_id": 32358667, "comment_id": 52590277, "body": "Nah. It&#39;s a javascript variable. Nope. It&#39;s a register. Nope. Stack. It&#39;s an implementation detail that doesn&#39;t even have to exist."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441212487, "post_id": 32358667, "comment_id": 52590346, "body": "Who&#39;s talking about java-script in this question?? Bringing this up, doesn&#39;t clarify anything."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441213704, "post_id": 32358667, "comment_id": 52591144, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Since the question asks about C++ semantics in general, as long as you have a conformant platform, you&#39;re good. Emscripten is a conformant platform. The data lives in a nice, cozy javascript object. So, as you see, the whole talk of stack is completely unrelated to what the code <i>means</i> - and that was the question!"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441213875, "post_id": 32358667, "comment_id": 52591264, "body": "@KubaOber Well, <i>automatic storage</i> would be a better term. Why answers used the term <i>stack</i> is probably because the OP was using it."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441214246, "post_id": 32358667, "comment_id": 52591519, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It&#39;s on us, who know better, to tell the OP why the use of such term is unhelpful/misguided. Because, well, it is. The times where any expectation of automatics being on a stack of some sort was a sure bet is way past us, and none of it was mandated by standard C or C++ ever anyway IIRC."}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": false, "score": 0, "last_activity_date": 1441212201, "creation_date": 1441212201, "answer_id": 32358667, "question_id": 32358555, "link": "https://stackoverflow.com/questions/32358555/multilevel-pointers-stack-or-heap/32358667#32358667", "title": "Multilevel pointers, stack or heap?", "body": "<p><code>a</code>  is on the stack. The rest, created by <code>new</code> is on the heap</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441212438, "post_id": 32358677, "comment_id": 52590315, "body": "&quot;a is on the stack&quot; It is not. Show me where in the standard does it say it&#39;s on a stack. And for any implementation that you show that would store it on the stack, I&#39;d show you one that doesn&#39;t. So please, let&#39;s get rid of this silly notion that there is some stack. The existence of such is completely tangential to the issue discussed in the question."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441212867, "post_id": 32358677, "comment_id": 52590575, "body": "This is a pretty good answer. @KubaOber, while technically correct, is being pedantic.  Any platform you&#39;re likely to be learning C++ on or likely to target in the near future will use a stack/heap paradigm for implementing the language."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441212916, "post_id": 32358677, "comment_id": 52590608, "body": "@KubaOber - in the context of his question: a is on the stack. If you object to this answer you must also object to the question - he asks &#39;is a on the stack?&#39;. I agree that it may well be in a register, on a punched card under his desk, anywhere the implementor of the compiler may choose. You need to distinguish between &#39;stack&#39; as a conceptual type of variable vs &#39;stack&#39; as a CPU construct. Also you know exactly what he is asking and what I am saying in reply"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1441213864, "post_id": 32358677, "comment_id": 52591259, "body": "@pm100 There is no conceptual &#39;stack&#39; type of a variable in the C++ standard. <code>a</code> is of autoamtic storage duration. That&#39;s all you can say about it. Such storage duration has certain semantics. That&#39;s it. I&#39;m merely pointing out that unless the question had posted the assembly output, there&#39;s no way to tell whether <code>a</code> is on the stack. So you can&#39;t say it is. How do you know? You don&#39;t. Neither do I. Had we seen the assembly, we could tell."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1441214563, "post_id": 32358677, "comment_id": 52591696, "body": "please answer the question then indicating that there is not such thing as a stack variable. Ah - I see you already did, enjoy the feedback"}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 4, "last_activity_date": 1441212243, "creation_date": 1441212243, "answer_id": 32358677, "question_id": 32358555, "link": "https://stackoverflow.com/questions/32358555/multilevel-pointers-stack-or-heap/32358677#32358677", "title": "Multilevel pointers, stack or heap?", "body": "<p>assuming your code is inline in a function</p>\n\n<pre><code>int ***a = new int**;\n</code></pre>\n\n<p>a is on the stack. It points to something (thing1) on the heap</p>\n\n<pre><code>*a = new int*;\n</code></pre>\n\n<p>a is on the stack. It points to thing1.\nthing1 now points to something else on the heap (thing2)</p>\n\n<pre><code>**a = new int;\n</code></pre>\n\n<p>a is on the stack. It points thing1.\nthing1 on the heap points to thing2 on the heap.\nthing2 points to an int on the heap</p>\n\n<pre><code>***a = 18\n</code></pre>\n\n<p>a is on the stack. It points thing1.\nthing1 on the heap points to thing2 on the heap.\nthing2 points to an int on the heap.\nthat int now = 18.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1441212358, "post_id": 32358693, "comment_id": 52590274, "body": "Wrong. What tells you that a is a local variable?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1441212395, "post_id": 32358693, "comment_id": 52590293, "body": "@SergeyA We have to assume something :)"}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 2, "creation_date": 1441212468, "post_id": 32358693, "comment_id": 52590334, "body": "@KubaOber Let&#39;s also assume he&#39;s running on a typical C++ platform then and that the stack/heap paradigm applies."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1441212582, "post_id": 32358693, "comment_id": 52590398, "body": "@MooseBoys Given that LLVM/emscripten is very popular, you can have <code>a</code> on the stack, in a javascript variable, in a register, ... The issue is: the notion of stack completely muddies the water. It&#39;s unnecessary to call it out. Completely so. I bring up emscripten to show that you have normal C++ semantics on a platform without anything you&#39;d normally have on a bare-metal CPU. Since we speak of semantics, the details such as that are unnecessary."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441212601, "post_id": 32358693, "comment_id": 52590410, "body": "emscripten is irrelevant."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1441212678, "post_id": 32358693, "comment_id": 52590461, "body": "If you&#39;re going to be pedantic, then C/C++ has no concept of &quot;heap&quot; either, but you still used that term. In any case, any C implementation would need some form of storage for automatic variables which is naturally arranged as a stack data structure. That storage is what we call the &quot;stack&quot;."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1441212704, "post_id": 32358693, "comment_id": 52590484, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 It is very relevant, I&#39;ve used it for a specific purpose. The question has to do with C++ semantics, and those stand on their own without any particular implementation. The question was not about what the implementation does, but about what the code means. The word &quot;stack&quot; is useless when discussing the semantics."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1441212810, "post_id": 32358693, "comment_id": 52590543, "body": "@interjay For the last decade I&#39;ve been using a C implementation where the compiler uses statically allocated frames, so no, there is nothing &quot;natural&quot; about there being a stack. I mean I literally have tens of thousands of lines of code where stack is for return addresses and nothing else, and it&#39;s all just boring standard C. Stack is a term unnecessary when talking about what the code does. Feel free to edit my use of the word &quot;heap&quot; with whatever the correct standardese would demand instead."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1441212900, "post_id": 32358693, "comment_id": 52590597, "body": "If you look at the exceptions part of the standard it recognizes a &quot;stack&quot;.  see 15.2.1"}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441212917, "post_id": 32358693, "comment_id": 52590609, "body": "I have no idea what you mean by &quot;statically allocated frames&quot;. You must have some form of stack, or recursion would be impossible."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441213176, "post_id": 32358693, "comment_id": 52590781, "body": "@interjay If I don&#39;t write recursive code, such stack is not materialized in the machine code. Again - stack is an implementation detail."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441213237, "post_id": 32358693, "comment_id": 52590818, "body": "@NathanOliver The term <i>stack unwinding</i> as used in the standard is <b>an abstract term</b>, not married to there actually existing a physical stack structure in some memory. It has nothing to do with how the automatic storage might be implemented. In fact, apart from the talk about <code>std::stack</code>, the standard only uses the complete phrase <i>stack unwinding</i> - a whopping six (6) times at that. The word <i>stack</i> in isolation simply doesn&#39;t appear! Just look in the index."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441213577, "post_id": 32358693, "comment_id": 52591053, "body": "@interjay In the particular case of the code in question, on the platform I&#39;m using, <code>a</code> is not stored on the stack. Ever. In spite of the code still acting exactly as it should. So why use a term that has no relevance to the semantics of the code? <i>One</i> counterexample is enough to show how pointless the use of the term is in this case."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441214299, "post_id": 32358693, "comment_id": 52591560, "body": "An optimization can change the behavior of the program in any way as long as the result is the same. I can say that <code>x++</code> increments the value of <code>x</code>, even if a certain implementation will optimize that out when it sees that it isn&#39;t needed. &quot;Stack&quot; is simply a term that people commonly use for automatic storage, and it&#39;s helpful because typically the storage is actually a stack (even if some optimizations may change this)."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1441214658, "post_id": 32358693, "comment_id": 52591744, "body": "@interjay You&#39;re right, but the example you introduce is of a different sort. To understand C++ semantics in this respect you only care about storage durations, not where actually things end up. This makes it easier to understand, since the particular memory area where something is stored doesn&#39;t have any effect on the semantics of the code. E.g. if the code in question was in a block of its own, the dynamic storage duration data would outlive the automatic storage duration <code>a</code> and you&#39;d get a (perhaps intentional) memory leak. That <code>a</code> is on a stack, in a register, etc. helps none IMHO."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": -3, "last_activity_date": 1441291424, "last_edit_date": 1441291424, "creation_date": 1441212304, "answer_id": 32358693, "question_id": 32358555, "link": "https://stackoverflow.com/questions/32358555/multilevel-pointers-stack-or-heap/32358693#32358693", "title": "Multilevel pointers, stack or heap?", "body": "<p>To understand what the code does, the concept of the stack is unnecessary. Some implementation that you use might put <code>a</code> on the stack, but that doesn't change the meaning of the code, and this detail is not necessary to understand what the code does.</p>\n\n<p>If you don't believe me: in the C++ standard, the word stack only refers to <code>std::stack</code> and to the abstract <em>stack unwinding</em> concept.</p>\n\n<p>To be specific, we must assume how your code is used. Let's assume that it is in a block of its own:</p>\n\n<pre><code>{\n  int ***a = new int**; \n  *a = new int*;        \n  **a = new int;\n  ***a = 18;\n}\n</code></pre>\n\n<p>What we are concerned with then is what is the storage duration of various pieces of storage.</p>\n\n<ol>\n<li><p>The <code>a</code> has automatic storage duration. The storage exists until the closing brace.</p></li>\n<li><p><code>a</code> points to storage of type <code>int**</code> of dynamic storage duration. The storage lasts until you explicitly deallocate it - in this case, it outlives <code>a</code>.</p></li>\n<li><p><code>*a</code> points to storage of type <code>int*</code> of dynamic storage duration. Here too, the storage lasts until you explicitly deallocate it - in this case, it outlives <code>a</code>.</p></li>\n<li><p><code>**a</code> points to storage of type <code>int</code> of dynamic storage duration. Here too, the storage lasts until you explicitly deallocate it - in this case, it outlives <code>a</code>.</p></li>\n<li><p><code>***a</code> is the value <code>int(18)</code> stored in a piece of dynamic storage that <code>**a</code> points to.</p></li>\n</ol>\n\n<p>What the program does, and how it behaves, has to do with these storage durations. It has nothing to do with whether <code>a</code> is on some stack. For all you know, you've compiled this code using  <a href=\"https://github.com/kripken/emscripten\" rel=\"nofollow\">emscripten</a>, and the value lives in a javascript variable.</p>\n\n<p>What is important that the storage duration of <code>a</code> is automatic, and its extent is to the end of the block in this case. The storage duration of everything you allocated with <code>new</code> is dynamic, and fully under your control.</p>\n\n<p>With the code shown, there's no long-term way to access the three pieces of storage with dynamic storage duration: they will outlive <code>a</code>'s storage duration <em>and</em> turn into memory leaks as soon as the block ends. If you pass <code>a</code> out of the block, you'll be able to prevent this and retain the way of accessing all three dynamic storage duration pieces of storage.</p>\n"}], "owner": {"reputation": 73, "user_id": 4356530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a9c390179b928ab6e3d0cfb982e7f4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Mishap", "link": "https://stackoverflow.com/users/4356530/mishap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 32358677, "answer_count": 4, "score": 0, "last_activity_date": 1441291424, "creation_date": 1441211895, "last_edit_date": 1441211946, "question_id": 32358555, "link": "https://stackoverflow.com/questions/32358555/multilevel-pointers-stack-or-heap", "title": "Multilevel pointers, stack or heap?", "body": "<p>Lets say I have this.</p>\n\n<pre><code>int ***a = new int**;\n*a = new int*;\n**a = new int;\n***a = 18\n</code></pre>\n\n<p>So we have something like this. <code>[*] -&gt; [*] -&gt; [*]-&gt;[18]</code></p>\n\n<p>Are all of these pointers in the stack and everything they are pointing to in the heap?</p>\n"}, {"tags": ["c++", "matlab", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 1, "creation_date": 1441212685, "post_id": 32358451, "comment_id": 52590467, "body": "Don&#39;t use matrix multiplication.  Simply decompose each equation of <code>Y</code>, <code>I</code> and <code>Q</code> as a sum of weights between <code>R</code>, <code>G</code> and <code>B</code>, then stack each result into a 3 channel matrix.  Look at the answer below for insight."}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "is_accepted": true, "score": 0, "last_activity_date": 1441223709, "last_edit_date": 1441223709, "creation_date": 1441212213, "answer_id": 32358670, "question_id": 32358451, "link": "https://stackoverflow.com/questions/32358451/implementation-of-matlab-function-rgb2ntsc-in-opencv-using-c/32358670#32358670", "title": "Implementation of Matlab function &#39;rgb2ntsc&#39; in OpenCV using C++", "body": "<p>Not sure if I am right, but YIQ has 3 values the same as RGB, so pictures remain 3 channel.</p>\n\n<p>If you multiplicate float with float or integer, you get float, so I don't see the problem with multiplication. Maybe I cannot understand your problem correctly. Multiplication of above should be:</p>\n\n<pre><code>Y = 0.299*R+0.587*G+0.114*B,\nI = 0.596*R-0.274*G-0.322*B,\n</code></pre>\n\n<p>and so on in my opinion.</p>\n\n<p>If RGB is in integer representation you may think of something like:</p>\n\n<pre><code>template&lt;typename intType&gt;\nfloat convertIntToFloat(intType number){\n    return (1.0/std::numeric_limits&lt;intType&gt;::max())*number;\n}\n</code></pre>\n\n<p>to convert it to float.</p>\n"}, {"comments": [{"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1441222931, "post_id": 32360873, "comment_id": 52596264, "body": "How would you do this for the entire image in a neat way?  This code performs the conversion only for a single RGB pixel (not the OP btw)."}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "reply_to_user": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1441228380, "post_id": 32360873, "comment_id": 52599078, "body": "@rayryeng: I added some code which should do that (not tested)"}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1441228461, "post_id": 32360873, "comment_id": 52599113, "body": "OH, that&#39;s very nice. :)"}], "tags": [], "owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "is_accepted": false, "score": 4, "last_activity_date": 1441228697, "last_edit_date": 1441228697, "creation_date": 1441219594, "answer_id": 32360873, "question_id": 32358451, "link": "https://stackoverflow.com/questions/32358451/implementation-of-matlab-function-rgb2ntsc-in-opencv-using-c/32360873#32360873", "title": "Implementation of Matlab function &#39;rgb2ntsc&#39; in OpenCV using C++", "body": "<p>You should use the <code>Vec3f</code> type from OpenCV (which is actually a 3x1 matrix):</p>\n\n<pre><code>// I assume you have RGB values as unsigned char in [0-255] interval\n// here using a dummy color\nunsigned char R = 255;\nunsigned char G = 127;\nunsigned char B = 64;\n\n// construct a Vec3f from those, divide by 255 to get them in [0-1] interval\nVec3f colorRGB(R/255.0f, G/255.0f, B/255.0f);\n\n// matrix for RGB -&gt; YIQ conversion\nMatx33f matYIQ( 0.299f,  0.587f,  0.114f,\n                0.596f, -0.274f, -0.322f,\n                0.211f, -0.523f,  0.312f);\n\n// do the conversion\n// a warning ... I &amp; Q can be negative\n// Y =&gt; [0,1]\n// I =&gt; [-1,1]\n// Q =&gt; [-1,1]\nVec3f colorYIQ = matYIQ * colorRGB;\n</code></pre>\n\n<p><strong>--- EDIT ---</strong></p>\n\n<p>Here is a better version, converting a whole image using only OpenCV features</p>\n\n<pre><code>// let's define the matrix for RGB -&gt; YIQ conversion\nMatx33f matYIQ( 0.299f,  0.587f,  0.114f,\n                0.596f, -0.274f, -0.322f,\n                0.211f, -0.523f,  0.312f);\n\n// I assume you have a source image of type CV_8UC3 \n// CV_8UC3: 3 channels, each on unsigned char, so [0,255]\n// here is a dummy one, black by default, 256x256\nMat ImgRGB_8UC3(256, 256, CV_8UC3);\n\n// We need to convert this to a new image of type CV_32FC3\n// CV_32FC3: 3 channels each on 32bit float [-inf, +inf]\n// we need to do this because YIQ result will be in [-1.0, 1.0] (I &amp; Q)\n// so this obviously cannot be stored in CV_8UC3\n// At the same time, we will also divide by 255.0 to put values in [0.0, 1.0]\nMat ImgYIQ_32FC3;\nImgRGB_8UC3.convertTo(ImgYIQ_32FC3, CV_32FC3, 1.0/255.0);\n\n// at this point ImgYIQ_32FC3 contains pixels made of 3 RGB float components in [0-1]\n// so let's convert to YIQ\n// (cv::transform will apply the matrix to each 3 component pixel of ImgYIQ_32FC3)\ncv::transform(ImgYIQ_32FC3, ImgYIQ_32FC3, matYIQ);\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3440725, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/721d2e465d953fe4cbc5532252362a67?s=128&d=identicon&r=PG&f=1", "display_name": "user3440725", "link": "https://stackoverflow.com/users/3440725/user3440725"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 0, "accepted_answer_id": 32358670, "answer_count": 2, "score": 1, "last_activity_date": 1441298070, "creation_date": 1441211557, "last_edit_date": 1441213135, "question_id": 32358451, "link": "https://stackoverflow.com/questions/32358451/implementation-of-matlab-function-rgb2ntsc-in-opencv-using-c", "title": "Implementation of Matlab function &#39;rgb2ntsc&#39; in OpenCV using C++", "body": "<p>I am trying to implement Matlab function 'rgb2ntsc' in OpenCV using C++.</p>\n\n<p>According to Matlab:\nYIQ = rgb2ntsc(RGB), RGB is a input colour image.</p>\n\n<p><a href=\"https://i.stack.imgur.com/pbiPl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pbiPl.png\" alt=\"enter image description here\"></a></p>\n\n<p>Matrix multiplication in OpenCV using C++ has some criteria:</p>\n\n<p>1) same number of channels for each matrix (2 channel or 1 channel)\n2) matrix should be in float values</p>\n\n<p>So how can I multiply my input color image(input has 3channels) with NTSC components?</p>\n"}, {"tags": ["c++", "lambda", "c++14", "variadic-templates"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1441211476, "post_id": 32358357, "comment_id": 52589790, "body": "GCC has problems with packs in lambdas."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1485782060, "post_id": 32358357, "comment_id": 71053895, "body": "@T.C. bugzilla link?"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441217829, "post_id": 32358725, "comment_id": 52593488, "body": "That is a horrible <code>print_all</code>?  It prints <i>out of order</i>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441218173, "post_id": 32358725, "comment_id": 52593673, "body": "@Yakk Hm. I&#39;m clearly blanking on how to do this with the lambda then. Is there not a way to do this?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441218324, "post_id": 32358725, "comment_id": 52593767, "body": "<code>template&lt;class...F&gt;void do_each(F&amp;&amp;...f){ (void)int[]{ 0,(std::forward&lt;F&gt;(f)(),void(),0)...}; }</code>, then <code>do_each( [&amp;]{std::cout &lt;&lt; t &lt;&lt; &#39;\\n&#39;;}... );</code> in <code>print_all</code>.  Lambda is used to package up tasks, initializer list is used to execute them in order.  Barring writing <code>do_each</code> as a lambda (easy, but why?), don&#39;t see how to do the expansion &quot;as a lambda&quot;."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1441218503, "post_id": 32358725, "comment_id": 52593866, "body": "@Yakk Naw there&#39;s definitely a way to do what I&#39;m trying to do. Regardless, the important part of the answer was &quot;it&#39;s a bug, this one&quot; so I&#39;ll just delete the rest."}, {"owner": {"reputation": 1122, "user_id": 1157045, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7K8WL.png?s=128&g=1", "display_name": "tly", "link": "https://stackoverflow.com/users/1157045/tly"}, "edited": false, "score": 0, "creation_date": 1441222029, "post_id": 32358725, "comment_id": 52595781, "body": "@Barry maybe wrap it in a initializer, like a struct ;)"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1441218479, "last_edit_date": 1441218479, "creation_date": 1441212367, "answer_id": 32358725, "question_id": 32358357, "link": "https://stackoverflow.com/questions/32358357/c-parameter-pack-expansion-inside-lambda-fails/32358725#32358725", "title": "C++: parameter pack expansion inside lambda fails", "body": "<p>This is <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=47226\" rel=\"nofollow\">gcc bug 47226</a>. It's still open, and the code example still fails on gcc 5.2.0, while it compiles just fine on clang 3.6. Your code looks correct to me. </p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1493367031, "last_edit_date": 1493367031, "creation_date": 1493366623, "answer_id": 43675123, "question_id": 32358357, "link": "https://stackoverflow.com/questions/32358357/c-parameter-pack-expansion-inside-lambda-fails/43675123#43675123", "title": "C++: parameter pack expansion inside lambda fails", "body": "<p>I just encountered the same problem. Didnt find a better dupe and didnt want to open a new question, but still want to share my findings. In a comment to a similar question I found a workaround that puts the parameters in a tuple and then unpacks it inside the lambda (sorry dont find the link anymore). However, that solution requires C++17 (<code>std::apply</code> and more). </p>\n\n<p>My case was something like this:</p>\n\n<pre><code>struct Foo{\n  template &lt;typename T,typename ...ARGS&gt;\n  void foo(T t,ARGS...args){\n    auto x = [&amp;](){ t(args...);}\n  }\n};\n</code></pre>\n\n<p>which is not working with gcc 4.8.5. To my surprise, simply explicitly writing out the lambda as functor works like a charm:</p>\n\n<pre><code>template &lt;typename T,typename ...ARGS&gt;\nstruct FooFunct{\n  void operator()(T t,ARGS...args){\n    t(args...);\n  }    \n};\n\nstruct Foo{\n  template &lt;typename T,typename ...ARGS&gt;\n  void foo(T t,ARGS...args){\n    auto x = FooFunct&lt;T,ARGS...&gt;();\n  }\n};\n</code></pre>\n\n<p>I find it a bit strange, that gcc swallows this, while not the first one. Afaik lambdas are just syntactic sugar for anonymous functors on function scope. Probably my knowledge on compilers is just too little to understand what is the problem in fixing this bug.</p>\n"}], "owner": {"reputation": 1122, "user_id": 1157045, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/7K8WL.png?s=128&g=1", "display_name": "tly", "link": "https://stackoverflow.com/users/1157045/tly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 32358725, "answer_count": 2, "score": 5, "last_activity_date": 1493367031, "creation_date": 1441211263, "last_edit_date": 1485781857, "question_id": 32358357, "link": "https://stackoverflow.com/questions/32358357/c-parameter-pack-expansion-inside-lambda-fails", "title": "C++: parameter pack expansion inside lambda fails", "body": "<p>I'm trying to create a way to directly expand multiple parameter packs. I have created a function <code>template&lt;size_t X,typename F&gt; auto sequenceFunc(F&amp;&amp; f)</code>, that calls a given function <code>f</code> with a expanded <code>integer_sequence</code>.</p>\n\n<p>This works well for small functions like this:</p>\n\n<pre><code>template&lt;typename T,\n         size_t A,size_t B&gt;\nvec&lt;B,T&gt; col(const mat&lt;A,B,T&gt;&amp; a,const size_t&amp; i){\n    return sequenceFunc&lt;A&gt;([&amp;](auto... J) -&gt; vec&lt;B,T&gt;{\n        return { a[J][i]... }; //expands to a[0][i], a[1][i], ... a[A-1][i]\n    });\n}\n</code></pre>\n\n<p>Unfortunately I can't expand multiple parameter packs, even if I follow the rule, that only one parameter pack can be inside a <code>...</code>-expression. \nThis is my attempt at using this function for matrix multiplication:</p>\n\n<pre><code>template&lt;typename S,typename T,\n         size_t A,size_t B,size_t C&gt;\nmat&lt;C,B,S&gt; mul(const mat&lt;A,B,S&gt;&amp; a,const mat&lt;C,A,T&gt;&amp; b){\n    return sequenceFunc&lt;B&gt;([&amp;](auto... I)-&gt;mat&lt;C,B,S&gt;{ //for all B rows in a...\n        return {\n            sequenceFunc&lt;C&gt;([&amp;](auto... J)-&gt;vec&lt;C,S&gt;{ // ... look at all C columns in b and calculate dot product.\n                auto i = I; //putting \"I\" outside the expansion of \"J\"\n                return {\n                    dot(row(a,i),col(b,J))... //expands J\n                };\n            })... //expands I\n        };\n    });\n}\n</code></pre>\n\n<p>This is the error:</p>\n\n<pre><code>error: parameter packs not expanded with '...':\n      auto i = I;\n               ^\n</code></pre>\n\n<p>I don't really understand why an expansion is necessary, because there is another <code>...</code> outside the expression. I use GCC 5.1.0.</p>\n\n<p><strong>Information</strong> <code>vec</code> and <code>mat</code> are only <code>using</code>-declarations for <code>std::array</code> and a nested <code>std::array&lt;std::array&lt;A,T&gt;,B&gt;</code></p>\n"}, {"tags": ["c++", "std"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5293351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5lPGG.jpg?s=128&g=1", "display_name": "Maxim.K.", "link": "https://stackoverflow.com/users/5293351/maxim-k"}, "edited": false, "score": 0, "creation_date": 1441211667, "post_id": 32358317, "comment_id": 52589886, "body": "Thanks for your answer, Barry, but as I know returning the vector is the copy-process, and if it contains more than 10^6 elements it might be expensive. The idea of returning an integer was to avoid copy-procedure."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 65, "user_id": 5293351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5lPGG.jpg?s=128&g=1", "display_name": "Maxim.K.", "link": "https://stackoverflow.com/users/5293351/maxim-k"}, "edited": false, "score": 0, "creation_date": 1441211760, "post_id": 32358317, "comment_id": 52589948, "body": "@Maxim.K. True if you were copying. But we&#39;re not. If you just need the values (e.g. <code>vector&lt;int&gt; v = fromfile(&quot;something&quot;);</code>, that will not invoke a copy - see <i>return value optimization</i>. Also, even if you vector was already constructed (e.g. <code>v = fromfile(&quot;something_else&quot;);</code>), that would still only invoke a move."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441211837, "post_id": 32358317, "comment_id": 52589997, "body": "@Barry The move will only happen in C++11 or above.  in C++98/03 it would be a copy."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441211962, "post_id": 32358317, "comment_id": 52590063, "body": "@NathanOliver It&#39;s 2015. I&#39;m assuming C++11 by default unless explicitly stated otherwise. RVO still existed in C++03 as well."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441212054, "post_id": 32358317, "comment_id": 52590112, "body": "@Barry Yes RVO existed but if <code>v</code> already exist then <code>v = fromfile(&quot;something_else&quot;);</code> would need to copy."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1441211825, "last_edit_date": 1441211825, "creation_date": 1441211143, "answer_id": 32358317, "question_id": 32358220, "link": "https://stackoverflow.com/questions/32358220/c-reading-from-file-using-std/32358317#32358317", "title": "C++ reading from file using std", "body": "<p>Your functional way doesn't work because you're trying to use a constructor on an already constructed object - so it looks like you're trying to invoke <code>operator()</code> on your <code>vector</code>, which does not exist. However, <code>vector</code> does have an <a href=\"http://en.cppreference.com/w/cpp/container/vector/assign\" rel=\"nofollow\"><code>assign</code></a> member function that does the same thing, without the need for extra parens:</p>\n\n<pre><code>int fromfile(std::string filename, std::vector&lt;int&gt; &amp;values)\n{\n    std::ifstream from(filename);\n    values.assign(std::istream_iterator&lt;int&gt;(from), std::istream_iterator&lt;int&gt;());\n    return 0;\n}\n</code></pre>\n\n<p>Although the real functional way probably looks like this (C++11) - use the function to <em>return</em> the <code>vector</code>:</p>\n\n<pre><code>std::vector&lt;int&gt; fromfile(std::string filename)\n{\n    std::ifstream from(filename)\n    return {std::istream_iterator&lt;int&gt;(from), std::istream_iterator&lt;int&gt;{}};\n}\n</code></pre>\n\n<p>As is having an <code>int</code> return is somewhat useless if you just have <code>return 0</code>... </p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1441211403, "creation_date": 1441211403, "answer_id": 32358403, "question_id": 32358220, "link": "https://stackoverflow.com/questions/32358220/c-reading-from-file-using-std/32358403#32358403", "title": "C++ reading from file using std", "body": "<p>Notwithstanding the answer Barry has given to you, the other way to do this with algorithm is to call std::copy:</p>\n\n<pre><code>std::copy(std::istream_iterator&lt;int&gt;(from), std::istream_iterator&lt;int&gt;(),\n          std::back_inserter(values));\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5293351, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5lPGG.jpg?s=128&g=1", "display_name": "Maxim.K.", "link": "https://stackoverflow.com/users/5293351/maxim-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32358317, "answer_count": 2, "score": 2, "last_activity_date": 1480536241, "creation_date": 1441210832, "last_edit_date": 1480536241, "question_id": 32358220, "link": "https://stackoverflow.com/questions/32358220/c-reading-from-file-using-std", "title": "C++ reading from file using std", "body": "<p>I'm trying to read from file, and I know how to do that:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nint main()\n{\n    std::string filename = \"data.txt\";\n    std::ifstream from(filename);\n    std::vector&lt;int&gt; values((std::istream_iterator&lt;int&gt;(from)), std::istream_iterator&lt;int&gt;());\n    return 0;\n}\n</code></pre>\n\n<p>My question is how to do the same thing in functional way:</p>\n\n<pre><code>int fromfile(std::string filename, std::vector&lt;int&gt; &amp;values)\n{\n... \n    return 0;\n}\n</code></pre>\n\n<p>The native way doesn't work:</p>\n\n<pre><code>int fromfile(std::string filename, std::vector&lt;int&gt; &amp;values)\n{\n    std::ifstream from(filename);\n    values((std::istream_iterator&lt;int&gt;(from)), std::istream_iterator&lt;int&gt;());\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 1, "creation_date": 1441210886, "post_id": 32358153, "comment_id": 52589440, "body": "And what have you tried so far?"}, {"owner": {"reputation": 97, "user_id": 4973756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153246407236999/picture?type=large", "display_name": "Emsal", "link": "https://stackoverflow.com/users/4973756/emsal"}, "reply_to_user": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 0, "creation_date": 1441211028, "post_id": 32358153, "comment_id": 52589531, "body": "I haven&#39;t found anything related to my question. Maybe it sounds like a pretty simple question. to delete a student I did students.erase(students.begin() + choice); but I can&#39;t do that here"}, {"owner": {"reputation": 97, "user_id": 4973756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153246407236999/picture?type=large", "display_name": "Emsal", "link": "https://stackoverflow.com/users/4973756/emsal"}, "reply_to_user": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 0, "creation_date": 1441211839, "post_id": 32358153, "comment_id": 52589999, "body": "<a href=\"http://stackoverflow.com/questions/3385229/c-erase-vector-element-by-value-rather-than-by-position\" title=\"c erase vector element by value rather than by position\">stackoverflow.com/questions/3385229/&hellip;</a> didn&#39;t help me at all. Everything is with an int, not an object."}, {"owner": {"reputation": 4003, "user_id": 4331480, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oWiMU.jpg?s=128&g=1", "display_name": "therainmaker", "link": "https://stackoverflow.com/users/4331480/therainmaker"}, "edited": false, "score": 0, "creation_date": 1441212209, "post_id": 32358153, "comment_id": 52590200, "body": "you may want to give us more information about the structures of testResults and Students"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1441222395, "post_id": 32358153, "comment_id": 52595975, "body": "The top answer on the linked question addresses exactly what you are trying to do."}, {"owner": {"reputation": 97, "user_id": 4973756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153246407236999/picture?type=large", "display_name": "Emsal", "link": "https://stackoverflow.com/users/4973756/emsal"}, "edited": false, "score": 0, "creation_date": 1441229285, "post_id": 32358153, "comment_id": 52599455, "body": "Maybe, I don&#39;t understand any of it. The answer below was directed more to my case I feel."}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 4973756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153246407236999/picture?type=large", "display_name": "Emsal", "link": "https://stackoverflow.com/users/4973756/emsal"}, "edited": false, "score": 0, "creation_date": 1441212645, "post_id": 32358631, "comment_id": 52590433, "body": "Thanks, works great :)"}], "tags": [], "owner": {"reputation": 10473, "user_id": 33411, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/8dac9e44b2fcb2f81283f1b2b4896955?s=128&d=identicon&r=PG", "display_name": "anand", "link": "https://stackoverflow.com/users/33411/anand"}, "is_accepted": true, "score": 0, "last_activity_date": 1441212089, "creation_date": 1441212089, "answer_id": 32358631, "question_id": 32358153, "link": "https://stackoverflow.com/questions/32358153/compare-two-vectorscustomobject-with-common-variables-to-delete-c/32358631#32358631", "title": "Compare two vectors&lt;customObject&gt; with common variables to delete C++", "body": "<pre><code>vector&lt;TestResults&gt;::iterator it = testResults.begin();\nfor (; it != testResults.end();) {\n    if (it-&gt;studendId == 0) {\n        it = testResults.erase(it);\n    }\n    else {\n        ++it;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 4973756, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10153246407236999/picture?type=large", "display_name": "Emsal", "link": "https://stackoverflow.com/users/4973756/emsal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1441222350, "accepted_answer_id": 32358631, "answer_count": 1, "score": -2, "last_activity_date": 1441212089, "creation_date": 1441210610, "last_edit_date": 1441211101, "question_id": 32358153, "link": "https://stackoverflow.com/questions/32358153/compare-two-vectorscustomobject-with-common-variables-to-delete-c", "closed_reason": "Duplicate", "title": "Compare two vectors&lt;customObject&gt; with common variables to delete C++", "body": "<p>I have two vectors</p>\n\n<pre><code>vector&lt;TestResults&gt; testResults;\nvector&lt;Students&gt; students;\n</code></pre>\n\n<p>both have <code>studentId</code>. After I've deleted a student from the student vector I want to delete his testresults from <code>testResults</code>.</p>\n\n<p>I want to delete every record on <code>testResults</code> with <code>studentId == 0</code>.</p>\n"}, {"tags": ["c++", "tostring"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1441210387, "post_id": 32358070, "comment_id": 52589154, "body": "Dose the class definition have a <code>toString()</code> function defined?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 5, "creation_date": 1441213552, "post_id": 32358070, "comment_id": 52591035, "body": "Your class doesn&#39;t have a <code>toString()</code> method listed as a member, and neither does the parent class. C++ is not Java. Almost nothing you know about Java transfers to C++. C++ classes aren&#39;t all derived from a stupid universal object base class."}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1441229618, "post_id": 32358070, "comment_id": 52599619, "body": "Also note that in C++ it&#39;s idiomatic to define <code>ostream&amp; operator&lt;&lt;(ostream&amp;, const YourClass&amp;)</code>.  Then, if you need a <code>toString</code> method, you can implement one in terms of <code>std::stringstream</code>."}], "answers": [{"tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": true, "score": 2, "last_activity_date": 1441210443, "creation_date": 1441210443, "answer_id": 32358105, "question_id": 32358070, "link": "https://stackoverflow.com/questions/32358070/tostring-method-in-c/32358105#32358105", "title": "toString() method in C++?", "body": "<p>You should probably modify the class called <code>MediaDescription</code> like that:</p>\n\n<pre><code>class MediaDescription {\n/*code*/\npublic: /*or anything you need*/\n    /*code*/\n    std::wstring toString();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1441216559, "post_id": 32358215, "comment_id": 52592835, "body": "That&#39;s not a specialization; that&#39;s an override.  The difference is significant, because user code is not permitted to add new functions to the <code>std</code> namespace, but is permitted to add specializations of templates in the <code>std</code> namespace.  On the other hand, providing a <code>to_string</code> (or <code>to_wstring</code> as appears to be intended) in <i>the same namespace as the class</i> is a very good idea.  See <a href=\"/q/7821315/4850040\">When should I prefer non-member non-friend functions to member functions?</a>"}], "tags": [], "owner": {"reputation": 1829, "user_id": 3601420, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CuFHu.png?s=128&g=1", "display_name": "Functino", "link": "https://stackoverflow.com/users/3601420/functino"}, "is_accepted": false, "score": -1, "last_activity_date": 1441228842, "last_edit_date": 1495540329, "creation_date": 1441210795, "answer_id": 32358215, "question_id": 32358070, "link": "https://stackoverflow.com/questions/32358070/tostring-method-in-c/32358215#32358215", "title": "toString() method in C++?", "body": "<p>Another option is to add an override of <code>std::to_string</code>:</p>\n\n<pre><code>#include &lt;string&gt;\nstd::string std::to_string(MediaDescription &amp;value) {\n    // convert to string ...\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/5171808/3601420\">This</a> would also be an option.</p>\n"}, {"tags": [], "owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "is_accepted": false, "score": 0, "last_activity_date": 1441216637, "last_edit_date": 1441216637, "creation_date": 1441212486, "answer_id": 32358770, "question_id": 32358070, "link": "https://stackoverflow.com/questions/32358070/tostring-method-in-c/32358770#32358770", "title": "toString() method in C++?", "body": "<p>If you specify <code>override</code> C++11 keyword on virtual function in a child class, its parent class MUST have same virtual function signature.</p>\n\n<p><a href=\"https://ideone.com/Ma8sGZ\" rel=\"nofollow\">Live example</a></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct Parent\n{\n    virtual void DoWork1() {}\n    void DoWork2() {}\n};\n\nstruct Child : Parent\n{\n    void DoWork1() override {} // OK !\n    void DoWork1(int) override {} // error !\n\n    void DoWork2() override {} // error !\n};\n\nint main()\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 1943674, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/JntkQ.png?s=128&g=1", "display_name": "Chris Moretti", "link": "https://stackoverflow.com/users/1943674/chris-moretti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2101, "favorite_count": 0, "accepted_answer_id": 32358105, "answer_count": 3, "score": -3, "last_activity_date": 1441228842, "creation_date": 1441210328, "last_edit_date": 1441212093, "question_id": 32358070, "link": "https://stackoverflow.com/questions/32358070/tostring-method-in-c", "title": "toString() method in C++?", "body": "<p>Not sure what I am doing wrong but my code is this:</p>\n\n<pre><code>std::wstring MediaDescription::toString()\n{\n    std::wstring theFile = std::wstring(L\"\\\"fileName\\\":\\\"\") + mFilename + std::wstring(L\"\\\"\");\n    std::wstring theAuthor = std::wstring(L\"\\\"author\\\":\\\"\") + mAuthor + std::wstring(L\"\\\"\");\n    std::wstring theAlbum = std::wstring(L\"\\\"album\\\":\\\"\") + mAlbum + std::wstring(L\"\\\"\");\n    std::wstring theGenre = std::wstring(L\"\\\"genre\\\":\\\"\") + mGenre + std::wstring(L\"\\\"\");\n    std::wstring theType = std::wstring(L\"\\\"mediaType\\\":\") + mMediaType;\n    std::wstring theTitle = std::wstring(L\"\\\"title\\\":\\\"\") + mTitle + std::wstring(L\"\\\"\");\n    return std::wstring(L\"{\") + theFile + std::wstring(L\",\") + theAuthor + std::wstring(L\",\") + theAlbum + std::wstring(L\",\") + theGenre + std::wstring(L\",\") + theType + std::wstring(L\",\") + theTitle +     std::wstring(L\"}\");\n} \n</code></pre>\n\n<p>The error I am getting is:</p>\n\n<pre><code> class:\"MediaDescription\" has no member of \"toString\"\n</code></pre>\n\n<p>But I do not understand how to modify the syntax properly or what I am missing.  This is trying to transition a toString from Java to C++ syntax.</p>\n\n<p>My header file is as follows:</p>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nclass MediaDescription : public std::enable_shared_from_this&lt;MediaDescription&gt;\n{\n\n/// &lt;summary&gt;\n/// A media type of either Music or Video.\n/// &lt;/summary&gt;\nprivate:\nconst std::wstring mMediaType;\n/// &lt;summary&gt;\n/// A title of a song or a video/movie.\n/// &lt;/summary&gt;\nconst std::wstring mTitle;\n/// &lt;summary&gt;\n/// A name for the author/actor/actress of the media.\n/// &lt;/summary&gt;\nconst std::wstring mAuthor;\n/// &lt;summary&gt;\n/// A name for the album of the song.\n/// &lt;/summary&gt;\nconst std::wstring mAlbum;\n/// &lt;summary&gt;\n/// A genre of the video.\n/// &lt;/summary&gt;\nconst std::wstring mGenre;\n/// &lt;summary&gt;\n/// A filename of the media\n/// &lt;/summary&gt;\nconst std::wstring mFilename;\n\npublic:\nMediaDescription();\n\n/// &lt;summary&gt;\n/// MediaDescription constructor. &lt;/summary&gt;\n/// &lt;param name=\"mediaType\"&gt; a media type of music or video &lt;/param&gt;\n/// &lt;param name=\"title\"&gt; the title of the media &lt;/param&gt;\n/// &lt;param name=\"author\"&gt; the author of the media &lt;/param&gt;\n/// &lt;param name=\"album\"&gt; the album only applying to music &lt;/param&gt;\n/// &lt;param name=\"genre\"&gt; the genre of the media &lt;/param&gt;\n/// &lt;param name=\"filename\"&gt; the filename of the media &lt;/param&gt;\nMediaDescription(const std::wstring &amp;mediaType, const std::wstring &amp;title, const std::wstring &amp;author, const std::wstring &amp;album, const std::wstring &amp;genre, const std::wstring &amp;filename);\n\n/// &lt;summary&gt;\n/// Returns a media type of either music or video. &lt;/summary&gt;\n/// &lt;returns&gt; a media type. &lt;/returns&gt;\nvirtual std::wstring getMediaType();\n\n/// &lt;summary&gt;\n/// Returns a title of a song or video/movie.\n/// &lt;/summary&gt;\n/// &lt;returns&gt; a title of the media. &lt;/returns&gt;\nvirtual std::wstring getTitle();\n\n/// &lt;summary&gt;\n/// Returns a name for the author of the media or leading actor/actress of video.\n/// &lt;/summary&gt;\n/// &lt;returns&gt; a name of the author/actor/actress &lt;/returns&gt;\nvirtual std::wstring getAuthor();\n\n/// &lt;summary&gt;\n/// Returns a name for the album of the song.\n/// &lt;/summary&gt;\n/// &lt;returns&gt; a name of the album. &lt;/returns&gt;\nvirtual std::wstring getAlbum();   \n\n/// &lt;summary&gt;\n/// Returns a genre of the video/movie.\n/// &lt;/summary&gt;\n/// &lt;returns&gt; a genre of the video. &lt;/returns&gt;\nvirtual std::wstring getGenre();\n\n/// &lt;summary&gt;\n/// Returns a filename of the media file.\n/// &lt;/summary&gt;\n/// &lt;returns&gt; a filename of the media. &lt;/returns&gt;\nvirtual std::wstring getFilename();\n}; \n</code></pre>\n\n<p>if i do: </p>\n\n<pre><code>virtual std::wstring toString() override;\n</code></pre>\n\n<p>then i get the following error:</p>\n\n<pre><code>'MediaDescription::toString': method with override specifier 'override' did not override any base class methods\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1441210138, "post_id": 32357999, "comment_id": 52589023, "body": "Put the code in the question. Thanks"}, {"owner": {"reputation": 18347, "user_id": 488657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bYnzt.png?s=128&g=1", "display_name": "Bart", "link": "https://stackoverflow.com/users/488657/bart"}, "edited": false, "score": 0, "creation_date": 1441210243, "post_id": 32357999, "comment_id": 52589079, "body": "Just read it out loud. Whatever is between the brackets has to be done when exactly? While ..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441210288, "post_id": 32357999, "comment_id": 52589097, "body": "Looks like you need to brush up on the syntax for <a href=\"http://en.cppreference.com/w/cpp/language/do\" rel=\"nofollow noreferrer\"><code>do {...} while()</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 56995, "user_id": 174614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca9a84fecd3f2fea333e8a1ef16edf98?s=128&d=identicon&r=PG", "display_name": "Tony The Lion", "link": "https://stackoverflow.com/users/174614/tony-the-lion"}, "is_accepted": false, "score": 4, "last_activity_date": 1441210266, "creation_date": 1441210266, "answer_id": 32358052, "question_id": 32357999, "link": "https://stackoverflow.com/questions/32357999/c-novice-attempt-at-loops/32358052#32358052", "title": "C++ Novice attempt at Loops", "body": "<p>I think you should put <code>while (x != numberToGuess)</code> in order for it to continue after the first wrong attempt.</p>\n"}, {"tags": [], "owner": {"reputation": 2153, "user_id": 4764736, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/1423363884633192/picture?type=large", "display_name": "DawidPi", "link": "https://stackoverflow.com/users/4764736/dawidpi"}, "is_accepted": false, "score": 2, "last_activity_date": 1441211115, "last_edit_date": 1441211115, "creation_date": 1441210289, "answer_id": 32358058, "question_id": 32357999, "link": "https://stackoverflow.com/questions/32357999/c-novice-attempt-at-loops/32358058#32358058", "title": "C++ Novice attempt at Loops", "body": "<p>Shouldn't there be <code>x != numberToGuess</code>? You want to repeadately ask user for a number as long as x is different from guessed number. Also I think there is no reason to put cout in brackets {}.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 5293376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aed6bd33b7ae199209f2639e1ce4da?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Throat", "link": "https://stackoverflow.com/users/5293376/deep-throat"}, "edited": false, "score": 0, "creation_date": 1441211071, "post_id": 32358132, "comment_id": 52589551, "body": "Okay, thanks. I was able to get it to loop. However, I am curious was could I have done this without a do -while loop?"}, {"owner": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "reply_to_user": {"reputation": 3, "user_id": 5293376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aed6bd33b7ae199209f2639e1ce4da?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Throat", "link": "https://stackoverflow.com/users/5293376/deep-throat"}, "edited": false, "score": 0, "creation_date": 1441228228, "post_id": 32358132, "comment_id": 52599001, "body": "@DeepThroat You need a loop. Either Do..while or a simple while loop would work. For a while loop just move your condition. while (x != numberToGuess){......}"}], "tags": [], "owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "is_accepted": true, "score": 1, "last_activity_date": 1441211133, "last_edit_date": 1441211133, "creation_date": 1441210524, "answer_id": 32358132, "question_id": 32357999, "link": "https://stackoverflow.com/questions/32357999/c-novice-attempt-at-loops/32358132#32358132", "title": "C++ Novice attempt at Loops", "body": "<p>Your exit condition seems wrong. You iterate, or keep asking the user for the value, while the given value does not guess correctly the number.</p>\n\n<p>Change</p>\n\n<pre><code>} while (x == numberToGuess);\n</code></pre>\n\n<p>into</p>\n\n<pre><code>} while (x != numberToGuess);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5293376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7aed6bd33b7ae199209f2639e1ce4da?s=128&d=identicon&r=PG&f=1", "display_name": "Deep Throat", "link": "https://stackoverflow.com/users/5293376/deep-throat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 32358132, "answer_count": 3, "score": 0, "last_activity_date": 1441211133, "creation_date": 1441210039, "last_edit_date": 1441210201, "question_id": 32357999, "link": "https://stackoverflow.com/questions/32357999/c-novice-attempt-at-loops", "title": "C++ Novice attempt at Loops", "body": "<p>I am working on my first assignment for C++. I have some history in coding in Java but issues I am having with C++ is hard for me to correct.\nThe code I have  \"works\" but debugging I think it isn't doing what I really want it to do. I tried to do a do while loop:</p>\n\n<pre><code>// GuessNumber.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n\n    int x;\n    int numberToGuess = 53;\n    cout &lt;&lt; \"Enter number between 0 and 100: \";\n    cin &gt;&gt; x;\n\n    do\n    {\n        if (x &lt; numberToGuess)\n        {\n            cout &lt;&lt; \"Guess is too low, try again: \";\n            cin &gt;&gt; x;\n        }\n        else if (x &gt; numberToGuess)\n        {\n            cout &lt;&lt; \"Guess is too high, try again: \";\n            cin &gt;&gt; x;\n        }\n    } while (x == numberToGuess);\n    {\n        cout &lt;&lt; \"You win \" &lt;&lt; endl;\n    }\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I am trying to reprompt the user to input data again but whenever I try to test it out the program just closes on me.\nAny advice would be greatly appericated</p>\n"}, {"tags": ["c++", "gcc", "g++", "precompiled-headers"], "comments": [{"owner": {"reputation": 7792, "user_id": 249237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QjPtI.png?s=128&g=1", "display_name": "Kninnug", "link": "https://stackoverflow.com/users/249237/kninnug"}, "edited": false, "score": 5, "creation_date": 1441210251, "post_id": 32357976, "comment_id": 52589085, "body": "Why do you have a <code>main</code> function in a header at all?"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1441210295, "post_id": 32357976, "comment_id": 52589100, "body": "I&#39;m not an authority, but your  &quot;workaround&quot; seems like the normal procedure for compiling a program."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1441210435, "post_id": 32357976, "comment_id": 52589176, "body": "Putting the <code>main</code> into a regular <code>.cpp</code> which <code>#include</code>s the header (which  would be the correct and sane way) did not work - why?"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1441211208, "creation_date": 1441211208, "answer_id": 32358336, "question_id": 32357976, "link": "https://stackoverflow.com/questions/32357976/compile-and-link-a-header-file-with-main-function-using-g/32358336#32358336", "title": "Compile and link a header file with main() function using g++", "body": "<p>G++ is extension-specific, and does different things based on file extension. When you try to compile hpp file in g++, it creates so-called precompiled headers file. This precompiled headers file is used to speed up compilation. So g++ is doing exactly correct thing. </p>\n\n<p>Having said that, you should not be putting main() into .hpp to begin with.</p>\n"}, {"comments": [{"owner": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "edited": false, "score": 0, "creation_date": 1441234665, "post_id": 32358338, "comment_id": 52601366, "body": "The stackoverflow reference is not the same situation since they are doing this by accident.  I put the situation in the title for a reason and am doing this quite deliberately as the question states."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "reply_to_user": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "edited": false, "score": 0, "creation_date": 1441258377, "post_id": 32358338, "comment_id": 52607156, "body": "@user62177541 - True - the question is different. I gave the stackoverflow link because the answer there also explains that it will give precompiled header files instead of executables. As others have mentioned already, the best way to go is to move the code to a cpp-file. At minimum a cpp-file which does nothing except including your header file."}], "tags": [], "owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 0, "last_activity_date": 1441211213, "last_edit_date": 1495535199, "creation_date": 1441211213, "answer_id": 32358338, "question_id": 32357976, "link": "https://stackoverflow.com/questions/32357976/compile-and-link-a-header-file-with-main-function-using-g/32358338#32358338", "title": "Compile and link a header file with main() function using g++", "body": "<p>Compiling a header file will not generate an executable but a precompiled header file.</p>\n\n<p>See <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/onlinedocs/gcc/Precompiled-Headers.html</a></p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/17126384/g-output-file-not-recognized-file-format-not-recognized\">g++ output: file not recognized: File format not recognized</a></p>\n"}, {"comments": [{"owner": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "edited": false, "score": 0, "creation_date": 1441234580, "post_id": 32358556, "comment_id": 52601351, "body": "Yes, it&#39;s a paradigm that if anything is already widely used in other languages, but I expected flack from C++ types.  Interesting that this appears to be hard-coded in gcc with no workaround among all the command line switches.  One would think you could simply say &quot;even though this is a .xyz file consider it a .whatever file.  It&#39;s more than an interesting idea, it&#39;s something that is useful and that I&#39;m using and will continue to use, and in the context of a header file that has no implementation file, <b>a very frequent case in modern C++</b>, it is directly beneficial."}], "tags": [], "owner": {"reputation": 2689, "user_id": 5257515, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e1VeT.png?s=128&g=1", "display_name": "jbm", "link": "https://stackoverflow.com/users/5257515/jbm"}, "is_accepted": true, "score": 0, "last_activity_date": 1441213498, "last_edit_date": 1441213498, "creation_date": 1441211898, "answer_id": 32358556, "question_id": 32357976, "link": "https://stackoverflow.com/questions/32357976/compile-and-link-a-header-file-with-main-function-using-g/32358556#32358556", "title": "Compile and link a header file with main() function using g++", "body": "<p>Unfortunately this cannot work: the output of g++ depend on the file suffix. It's hard coded, period. From the man page:</p>\n\n<blockquote>\n  <p>Options Controlling the Kind of Output</p>\n  \n  <p>[...]</p>\n  \n  <p>For any given input file, the file name suffix determines what kind of\n  compilation is done:</p>\n  \n  <p>[...]</p>\n  \n  <p>file.h</p>\n  \n  <p>C, C++, Objective-C or Objective-C++ header file to be turned into\n  a precompiled header (default), or C, C++ header file to be turned\n  into an Ada spec (via the -fdump-ada-spec switch).</p>\n  \n  <p>[...]</p>\n  \n  <p>file.hpp</p>\n  \n  <p>[...]</p>\n  \n  <p>C++ header file to be turned into a precompiled header or Ada spec.</p>\n</blockquote>\n\n<p>It was an interesting idea though, \"a la Python\" <code>if __name__ == '__main__'</code> idiom, to embed some test code directly in a header that would've been switched activated via your ENABLE_TESTING macro at build time.</p>\n"}], "owner": {"reputation": 188, "user_id": 3938923, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7869e47ef194829636a91d5832b3d36b?s=128&d=identicon&r=PG&f=1", "display_name": "user62177541", "link": "https://stackoverflow.com/users/3938923/user62177541"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 32358556, "answer_count": 3, "score": 0, "last_activity_date": 1441213498, "creation_date": 1441209948, "last_edit_date": 1441210271, "question_id": 32357976, "link": "https://stackoverflow.com/questions/32357976/compile-and-link-a-header-file-with-main-function-using-g", "title": "Compile and link a header file with main() function using g++", "body": "<p>I have a .hpp file that contains a main() function when a #define is present.  This is for testing if you must know.  As such, I need to produce an executable when I'm compiling with this testing enabled, but g++ seems to refuse and will only produce a \"gch\" precompiled header file.  Having examined the binary contents of this file, it has a format with the first four bytes \"gpch\" and then a version number and is definitely not executable on any platform.</p>\n\n<p>My two attempts to get an executable were the following:</p>\n\n<p><code>g++ -DENABLE_TESTING -std=c++11 myheaderfile.hpp</code></p>\n\n<p><code>g++ -DENABLE_TESTING -std=c++11 -o a.out myheaderfile.hpp</code></p>\n\n<p>The first produces myheaderfile.hpp.gch and the second produces the exact same output into a.out. As described above, these files are not executable.</p>\n\n<p>So the workaround I am using right now is to include the header file from a special purpose and specially named .cpp file and then to compile that file instead of the header, and that works. I use this workaround in a Makefile, so it's fairly painless, and as such I'm not interested in further workarounds, but an answer to my actual question or perhaps an authoritative statement that a workaround is unavoidable.</p>\n"}, {"tags": ["android", "c++", "opencv", "java-native-interface", "native"], "comments": [{"owner": {"reputation": 10749, "user_id": 2108972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a04d0ccf9b761c9373ec9905ca7e92?s=128&d=identicon&r=PG", "display_name": "greenapps", "link": "https://stackoverflow.com/users/2108972/greenapps"}, "edited": false, "score": 0, "creation_date": 1441210851, "post_id": 32357893, "comment_id": 52589424, "body": "Encoding to base64 increases the payload with 30%. So not a good idea. It serves nothing."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 4073067, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3dc06287f8a3a6bb2e79f35f2a70dca7?s=128&d=identicon&r=PG&f=1", "display_name": "VijayRagavan", "link": "https://stackoverflow.com/users/4073067/vijayragavan"}, "edited": false, "score": 0, "creation_date": 1441274053, "post_id": 32357951, "comment_id": 52616091, "body": "Thank you for your response , Any idea about what exact image size for byte array to pass efficiently.."}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 0, "last_activity_date": 1441209865, "creation_date": 1441209865, "answer_id": 32357951, "question_id": 32357893, "link": "https://stackoverflow.com/questions/32357893/in-client-server-communication-base64-conversion-or-byte-array-which-one-is-e/32357951#32357951", "title": "In Client server Communication, Base64 conversion or Byte array , which one is efficient way to pass image", "body": "<p>If you base64-encode your image, you'll have to decode it later (on the client). That takes time and wastes resources (what if you had to encode/decode billions of images?)</p>\n\n<p>An image is binary <em>already</em>, so the fastest way would probably be to simply read (or generate) an image and send it <em>as it is</em>. </p>\n\n<p>All in all, you'd better do not do thousands CPU cycles when you can do only a few. </p>\n"}], "owner": {"reputation": 360, "user_id": 4073067, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/3dc06287f8a3a6bb2e79f35f2a70dca7?s=128&d=identicon&r=PG&f=1", "display_name": "VijayRagavan", "link": "https://stackoverflow.com/users/4073067/vijayragavan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441209865, "creation_date": 1441209649, "question_id": 32357893, "link": "https://stackoverflow.com/questions/32357893/in-client-server-communication-base64-conversion-or-byte-array-which-one-is-e", "title": "In Client server Communication, Base64 conversion or Byte array , which one is efficient way to pass image", "body": "<p>I was Passing Mat image from Android to Native jni (cpp). I was using opencv to pass Mat image from android to jni but FPS count is 3.2 it become very slow. To convert Base64 string and passing to jni is efficient way to pass? or directly Pass bitmap byte array is efficient way to pass? please justify which one is most preferable for client server communication.  </p>\n"}, {"tags": ["c++", "multithreading", "ffmpeg", "decode"], "comments": [{"owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "edited": false, "score": 0, "creation_date": 1441218252, "post_id": 32357867, "comment_id": 52593712, "body": "Please ask a question."}, {"owner": {"reputation": 49960, "user_id": 32453, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/bec38d63650c8912b6ba9b557fb953b9?s=128&d=identicon&r=PG", "display_name": "rogerdpack", "link": "https://stackoverflow.com/users/32453/rogerdpack"}, "edited": false, "score": 0, "creation_date": 1441223936, "post_id": 32357867, "comment_id": 52596845, "body": "does ffmpeg command line show the problem?"}], "answers": [{"tags": [], "owner": {"reputation": 717, "user_id": 3219112, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/jvzCn.jpg?s=128&g=1", "display_name": "mattobob", "link": "https://stackoverflow.com/users/3219112/mattobob"}, "is_accepted": true, "score": 0, "last_activity_date": 1443615957, "creation_date": 1443615957, "answer_id": 32866057, "question_id": 32357867, "link": "https://stackoverflow.com/questions/32357867/ffmpeg-decode-jpeg-2000-in-multithread/32866057#32866057", "title": "ffmpeg decode JPEG 2000 in multithread", "body": "<p>I find out that if I setup exact so many thread as the image slice number it actually work fine.</p>\n"}], "owner": {"reputation": 717, "user_id": 3219112, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/jvzCn.jpg?s=128&g=1", "display_name": "mattobob", "link": "https://stackoverflow.com/users/3219112/mattobob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 32866057, "answer_count": 1, "score": 0, "last_activity_date": 1443615957, "creation_date": 1441209576, "last_edit_date": 1441268601, "question_id": 32357867, "link": "https://stackoverflow.com/questions/32357867/ffmpeg-decode-jpeg-2000-in-multithread", "title": "ffmpeg decode JPEG 2000 in multithread", "body": "<p>So, I have a Video-decoder written in c++ whit help of ffmpeg library, non problem till when it comes to decode JPEG 2000 frame in multi threads, in this case the image is discontinuous, I set the context to have even number of threads and to process image slices:</p>\n\n<pre><code>    m-&gt;context-&gt;thread_count = m_cfgHhiThreads-&gt;value();\n    m-&gt;context-&gt;thread_type = FF_THREAD_SLICE;\n</code></pre>\n\n<p>here is a sample image captured after decoding process (dimension is fine), this only happen if multithred is set <a href=\"https://i.stack.imgur.com/gGrQz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gGrQz.png\" alt=\"enter image description here\"></a></p>\n\n<p>Question is, why is this happening?</p>\n\n<p>FFMPEG does not report any error, it actually think that the image has been correctly decoded. It is also correctly decoded the problem is in slicing.</p>\n"}, {"tags": ["c++", "opengl", "depth-buffer"], "comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 2, "creation_date": 1441211226, "post_id": 32357826, "comment_id": 52589649, "body": "In the future, do not set OpenGL state before you have an OpenGL context. That doesn&#39;t work. Move <code>glEnable (GL_DEPTH_TEST)</code> about 4 lines down and everyting should work."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 2011055, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0e25caf5d0d1c5b249ebe2abb93bc9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Marijn", "link": "https://stackoverflow.com/users/2011055/marijn"}, "edited": false, "score": 0, "creation_date": 1441212194, "post_id": 32358345, "comment_id": 52590194, "body": "Well that was an easy fix! Thanks!"}], "tags": [], "owner": {"reputation": 724, "user_id": 2540607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f40627c8c656db70d39b2fb244f865?s=128&d=identicon&r=PG", "display_name": "wendelbsilva", "link": "https://stackoverflow.com/users/2540607/wendelbsilva"}, "is_accepted": true, "score": 8, "last_activity_date": 1441211224, "creation_date": 1441211224, "answer_id": 32358345, "question_id": 32357826, "link": "https://stackoverflow.com/questions/32357826/opengl-c-depth-buffer-not-working/32358345#32358345", "title": "OpenGL C++ Depth buffer not working", "body": "<p>You just need to change where you call <code>glEnable(GL_DEPTH_TEST);</code></p>\n\n<p>Put it after <code>glutCreateWindow</code> and it will work fine.</p>\n\n<p>Something like this:</p>\n\n<pre><code>int main(int iArgc, char** cppArgv) {\n    glutInit(&amp;iArgc, cppArgv);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n    glutInitWindowSize(screenW, screenH);\n    glutCreateWindow(\"Example\");\n    glEnable(GL_DEPTH_TEST);\n    glutDisplayFunc(Display);\n    glutIdleFunc(Display);\n    glutReshapeFunc(Reshape);\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n\n<p>Just tested here and it worked.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 3366861, "user_type": "registered", "profile_image": "https://graph.facebook.com/781232744/picture?type=large", "display_name": "Jose Monsalve Diaz", "link": "https://stackoverflow.com/users/3366861/jose-monsalve-diaz"}, "is_accepted": false, "score": 1, "last_activity_date": 1441211836, "creation_date": 1441211836, "answer_id": 32358536, "question_id": 32357826, "link": "https://stackoverflow.com/questions/32357826/opengl-c-depth-buffer-not-working/32358536#32358536", "title": "OpenGL C++ Depth buffer not working", "body": "<p>I am a little bit rusty in OpenGL, but, putting the glEnable line in the Display function will make the trick.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;GL/glut.h&gt;\n\ntypedef std::vector&lt;float&gt; floatvec;\n\n//Figure 1 (above blue)\n//float posX = 8.00f;\n//float posY = 7.54f;\n//float posZ = -0.89f;\n//float angleX = 300.50f;\n//float angleY = 45.33f;\n\n// Figure 2 (below red)\nfloat posX = 4.12f;\nfloat posY = -4.87f;\nfloat posZ = -3.84f;\nfloat angleX = 343.25f;\nfloat angleY = -45.00f;\n\nint screenW = 720;\nint screenH = 540;\nfloat fMin = 0.5;\nfloat fMax = 100.0;\nfloat alpha = 60.0;\n\n// Draws a rectangle in 3D\nvoid DrawQuad(floatvec c) {\n        glBegin(GL_QUADS);\n        glVertex3f(-c[0], -c[1], -c[2]);\n        glVertex3f(-c[3], -c[4], -c[5]);\n        glVertex3f(-c[6], -c[7], -c[8]);\n        glVertex3f(-c[9], -c[10], -c[11]);\n        glEnd();\n}\n\nvoid Display() {\n        glEnable(GL_DEPTH_TEST);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glLoadIdentity();\n        glPushMatrix();\n        glRotatef(angleY, 1.0f, 0.0f, 0.0f);\n        glRotatef(angleX, 0.0f, 1.0f, 0.0f);\n        glRotatef(180.0, 0.0f, 0.0f, 1.0f);\n        glTranslatef(posX, posY, posZ);\n\n        // Draws the tiles\n        glColor3f(1.0, 0.0, 0.0); // Red\n        DrawQuad({ 0, 0, 0,\n                        5, 0, 0,\n                        5, 0, 5,\n                        0, 0, 5 });\n        glColor3f(0.0, 0.0, 1.0); // Blue\n        DrawQuad({ 0, 3, 0,\n                        5, 3, 0,\n                        5, 3, 5,\n                        0, 3, 5 });\n\n        glPopMatrix();\n        glutSwapBuffers();\n}\n\nvoid Reshape(int width, int height) {\n        glViewport(0, 0, (GLsizei)width, (GLsizei)height);\n        glMatrixMode(GL_PROJECTION);\n        glLoadIdentity();\n        gluPerspective(alpha, (GLfloat)width / (GLfloat)height, fMin, fMax);\n        glMatrixMode(GL_MODELVIEW);\n}\n\nint main(int iArgc, char** cppArgv) {\n        glutInit(&amp;iArgc, cppArgv);\n        glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n        glutInitWindowSize(screenW, screenH);\n        glutCreateWindow(\"Example\");\n        glutDisplayFunc(Display);\n        glutIdleFunc(Display);\n        glutReshapeFunc(Reshape);\n        glutMainLoop();\n        return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 2011055, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/0e25caf5d0d1c5b249ebe2abb93bc9a1?s=128&d=identicon&r=PG&f=1", "display_name": "Marijn", "link": "https://stackoverflow.com/users/2011055/marijn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1325, "favorite_count": 0, "accepted_answer_id": 32358345, "answer_count": 2, "score": 2, "last_activity_date": 1441211836, "creation_date": 1441209477, "question_id": 32357826, "link": "https://stackoverflow.com/questions/32357826/opengl-c-depth-buffer-not-working", "title": "OpenGL C++ Depth buffer not working", "body": "<p>I've been testing with OpenGL for a while and have not been able to get the depth buffer to work, despite using <code>GLUT_DEPTH</code> as a parameter in <code>glutInitDisplayMode</code> and doing <code>glClear(GL_DEPTH_BUFFER_BIT)</code> at the start of the display function. I don't know what else I'm missing.</p>\n\n<p>Below is a minimum working example and Figure 1 and 2. Comment out the parameters under Figure 1 and 2 when you want to view the other one.</p>\n\n<p>Figure 1 (above blue):</p>\n\n<p><a href=\"https://i.stack.imgur.com/CmMo3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CmMo3.png\" alt=\"Picture 1\"></a></p>\n\n<p>Figure 2 (below red):</p>\n\n<p><a href=\"https://i.stack.imgur.com/pfU8M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pfU8M.png\" alt=\"Picture 2\"></a></p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;gl\\glut.h&gt;\n\ntypedef std::vector&lt;float&gt; floatvec;\n\n// Figure 1 (above blue)\nfloat posX = 8.00f;\nfloat posY = 7.54f;\nfloat posZ = -0.89f;\nfloat angleX = 300.50f;\nfloat angleY = 45.33f;\n\n// Figure 2 (below red)\nfloat posX = 4.12f;\nfloat posY = -4.87f;\nfloat posZ = -3.84f;\nfloat angleX = 343.25f;\nfloat angleY = -45.00f;\n\nint screenW = 720;\nint screenH = 540;\nfloat fMin = 0.5;\nfloat fMax = 100.0;\nfloat alpha = 60.0;\n\n// Draws a rectangle in 3D\nvoid DrawQuad(floatvec c) {\n    glBegin(GL_QUADS);\n    glVertex3f(-c[0], -c[1], -c[2]);\n    glVertex3f(-c[3], -c[4], -c[5]);\n    glVertex3f(-c[6], -c[7], -c[8]);\n    glVertex3f(-c[9], -c[10], -c[11]);\n    glEnd();\n}\n\nvoid Display() {\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    glLoadIdentity();\n    glPushMatrix();\n    glRotatef(angleY, 1.0f, 0.0f, 0.0f);\n    glRotatef(angleX, 0.0f, 1.0f, 0.0f);\n    glRotatef(180.0, 0.0f, 0.0f, 1.0f);\n    glTranslatef(posX, posY, posZ);\n\n    // Draws the tiles\n    glColor3f(1.0, 0.0, 0.0); // Red\n    DrawQuad({ 0, 0, 0,\n        5, 0, 0,\n        5, 0, 5,\n        0, 0, 5 });\n    glColor3f(0.0, 0.0, 1.0); // Blue\n    DrawQuad({ 0, 3, 0,\n        5, 3, 0,\n        5, 3, 5,\n        0, 3, 5 });\n\n    glPopMatrix();\n    glutSwapBuffers();\n}\n\nvoid Reshape(int width, int height) {\n    glViewport(0, 0, (GLsizei)width, (GLsizei)height);\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n    gluPerspective(alpha, (GLfloat)width / (GLfloat)height, fMin, fMax);\n    glMatrixMode(GL_MODELVIEW);\n}\n\nint main(int iArgc, char** cppArgv) {\n    glutInit(&amp;iArgc, cppArgv);\n    glEnable(GL_DEPTH_TEST);\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);\n    glutInitWindowSize(screenW, screenH);\n    glutCreateWindow(\"Example\");\n    glutDisplayFunc(Display);\n    glutIdleFunc(Display);\n    glutReshapeFunc(Reshape);\n    glutMainLoop();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "debugging", "breakpoints"], "comments": [{"owner": {"reputation": 42767, "user_id": 480982, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/U21Ey.jpg?s=128&g=1", "display_name": "Thomas Weller", "link": "https://stackoverflow.com/users/480982/thomas-weller"}, "edited": false, "score": 1, "creation_date": 1441210436, "post_id": 32357809, "comment_id": 52589177, "body": "Works fine in VS 2015 Community Edition."}], "answers": [{"tags": [], "owner": {"reputation": 830, "user_id": 1794179, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/BnY2x.jpg?s=128&g=1", "display_name": "Sceptical Jule", "link": "https://stackoverflow.com/users/1794179/sceptical-jule"}, "is_accepted": true, "score": 0, "last_activity_date": 1441212538, "creation_date": 1441212538, "answer_id": 32358794, "question_id": 32357809, "link": "https://stackoverflow.com/questions/32357809/conditional-break-point-on-attributes-in-visual-studio-2010/32358794#32358794", "title": "Conditional break point on attributes in Visual Studio 2010", "body": "<p>Works just fine with VS 2010 if you just create/initialize the object correctly:</p>\n\n<pre><code>int main()\n{\n    SpecificKey myKey;\n    myKey.myFirstField = 41; // ...=42;\n    myKey.mySecondField = 11;\n    int value = Get(myKey);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 32358794, "answer_count": 1, "score": 0, "last_activity_date": 1441212538, "creation_date": 1441209424, "question_id": 32357809, "link": "https://stackoverflow.com/questions/32357809/conditional-break-point-on-attributes-in-visual-studio-2010", "title": "Conditional break point on attributes in Visual Studio 2010", "body": "<p>I'm trying to figure out how to setup a more complex break point in my code.<br>\nI would like to make a break on specific values (e.g. break when first field of my struct is equal to 42)</p>\n\n<pre><code>struct SpecificKey\n{\n    int myFirstField;\n    int mySecondField;\n};\n\nint Get(const SpecificKey&amp; key)\n{\n    // &lt;--- set conditional break point if key.myFirstField==42\n    //\n    // Look for value somewhere...\n    //\n\n    return 0;\n}\n\nint main()\n{\n    int value = Get({42, 56});\n    return 0;\n}\n</code></pre>\n\n<p>I tried in Visual Studio 2010 but it doesn't break correctly with <code>key.myFirstField==42</code></p>\n\n<p>Can it be achieved ? If so, how ?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "profiling"], "answers": [{"tags": [], "owner": {"reputation": 5594, "user_id": 1645784, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xZW4T.jpg?s=128&g=1", "display_name": "Aleksei Petrenko", "link": "https://stackoverflow.com/users/1645784/aleksei-petrenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1441675937, "creation_date": 1441675937, "answer_id": 32447989, "question_id": 32357601, "link": "https://stackoverflow.com/questions/32357601/profile-shared-library-android-ndk-application/32447989#32447989", "title": "Profile shared library Android NDK application", "body": "<p>I found two methods that can be used with native Android C++ libraries.</p>\n\n<p>1) \"Intrusive\" profiling. Compile your code with <code>-pg</code> and use android-ndk-profiler project to link everything up.</p>\n\n<p>2) \"Non-intrusive\" way. Use <a href=\"https://google.github.io/fplutil/android_ndk_perf.html\" rel=\"nofollow\" title=\"fplutil\">fplutil</a> <code>android_ndk_perf</code> to run <code>perf</code> on device. Follow their documentation for guidance.</p>\n\n<p>1st way should work just about everywhere, while 2nd requires some support from Linux kernel and may not work properly on some devices.</p>\n"}], "owner": {"reputation": 5594, "user_id": 1645784, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/xZW4T.jpg?s=128&g=1", "display_name": "Aleksei Petrenko", "link": "https://stackoverflow.com/users/1645784/aleksei-petrenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 1, "accepted_answer_id": 32447989, "answer_count": 1, "score": 1, "last_activity_date": 1441675937, "creation_date": 1441208867, "last_edit_date": 1441372012, "question_id": 32357601, "link": "https://stackoverflow.com/questions/32357601/profile-shared-library-android-ndk-application", "title": "Profile shared library Android NDK application", "body": "<p>I am developing an Android app which heavily uses NDK and also uses external shared libraries compiled from C++.</p>\n\n<p>Those libraries contain various algorithms and I'd like to use profiling tools to boost performance of the code inside this library. Worth mentioning that I am building my C++ libraries with CMake.</p>\n\n<p>Are there any tools for profiling that can be suitable for my case?</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>Particularly, can I use <a href=\"https://github.com/richq/android-ndk-profiler\" rel=\"nofollow\">android-ndk-profiler</a> with my shared library?</p>\n"}, {"tags": ["c++", "compilation", "future"], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 5293272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce5ef624caebba68372ae750a9dc8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Farhana  Liza", "link": "https://stackoverflow.com/users/5293272/farhana-liza"}, "edited": false, "score": 0, "creation_date": 1441275976, "post_id": 32357574, "comment_id": 52617259, "body": "Thanks Jonathan, linking command did work.  I did not add the pthread library for linking, because my understanding was I am not explicitly using/including pthread library. But it turns out async() use pthread and we have to link it explicitly."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": false, "score": 2, "last_activity_date": 1441277289, "last_edit_date": 1441277289, "creation_date": 1441208790, "answer_id": 32357574, "question_id": 32357522, "link": "https://stackoverflow.com/questions/32357522/c11-future-compilation-error/32357574#32357574", "title": "c++11 future compilation error", "body": "<p>GCC's C++11 thread library is built on top of the native thread support, which usually means Pthreads. To use the Pthreads functions you need to link to libpthread, so add <code>-pthread</code> to your compiler and linker commands.</p>\n\n<p>N.B. that's not technically a compilation error, it's a linking error. The file was compiled OK, but could not be linked because nothing in the program provides the <code>pthread_create</code> function. That function is provided by libpthread, so you need to link to it.</p>\n"}], "owner": {"reputation": 109, "user_id": 5293272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce5ef624caebba68372ae750a9dc8c4?s=128&d=identicon&r=PG&f=1", "display_name": "Farhana  Liza", "link": "https://stackoverflow.com/users/5293272/farhana-liza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 849, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1441277289, "creation_date": 1441208601, "last_edit_date": 1441208890, "question_id": 32357522, "link": "https://stackoverflow.com/questions/32357522/c11-future-compilation-error", "title": "c++11 future compilation error", "body": "<p>For the following code written in c++11 and c++14 </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;future&gt;\n\n\nusing namespace std;\n\n\nint main()\n{\n    vector &lt; future&lt;int&gt; &gt; futures;\n    for(int i =0; i&lt;10; i++)\n    {\n        futures.push_back( async([](auto j){return j*2;} ,i));\n    }\n\nfor(auto &amp;e : futures)\n{\n    cout &lt;&lt; e.get() &lt;&lt; endl;\n}\nreturn 1;\n}\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<blockquote>\n  <p>/tmp/ccO0BfSt.o: In function `_ZNSt6threadC2IZNSt13__future_base17_Async_state_implISt12_Bind_simpleIFZ4mainEUliE_iEEiEC4EOS6_EUlvE_IEEEOT_DpOT0_': c14_features.cpp:(.text+0x1d92): undefined reference to `pthread_create' collect2: error: ld returned 1 exit status</p>\n</blockquote>\n\n<p>Any idea why I am getting this??</p>\n"}, {"tags": ["c++", "c", "linux", "x86", "intel"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 5, "creation_date": 1441208839, "post_id": 32357513, "comment_id": 52588179, "body": "A thought for you: will your code always be run on the same machine, or could it be run on different machines, some of which may have the RDTSCP instruction and others which may not have the RDTSCP instruction?"}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1441209123, "post_id": 32357513, "comment_id": 52588355, "body": "I&#39;m skeptical there is a compiler macro, but <code>cpuid</code> would always return the correct value."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1441209367, "post_id": 32357513, "comment_id": 52588496, "body": "As Jonathan has pointed out, you need to compile both versions, and pick one when your program starts, because presence of RDTSCP is a feature of the runtime environment, not the compile environment."}, {"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1441209419, "post_id": 32357513, "comment_id": 52588534, "body": "@JonathanLeffler: Yes, my code is expected to run on various machines (some with <code>RDTSCP</code> and others with <code>RDTSC</code> only). For machines with without <code>RDTSCP</code>, I am only depending on <code>RDTSC</code>. I feel this very time-consuming to check cpuinfo and edit it manually every-time."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1441209541, "post_id": 32357513, "comment_id": 52588622, "body": "Well, do it just once, use a function pointer."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1441209636, "post_id": 32357513, "comment_id": 52588690, "body": "If done at program startup, once, it won&#39;t be all that time consuming (you won&#39;t notice it compared to the cost of the dynamic loader loading the shared libraries, for example).  If it is done every time you need to do some timing (within a single run of the program), then it&#39;s a more serious problem \u2014 but it is a problem largely fixable by code design.  At worst, if you run the RDTSCP version and find that the CPU doesn&#39;t have the instruction, you re-execute the RDTSC version of the program instead (nasty, but doable).  More likely, you self-configure \u2014 a function pointer to the code or \u2026"}, {"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441209895, "post_id": 32357513, "comment_id": 52588863, "body": "@Jason Can (and how) <code>cpuid</code> provide if the architecture has <code>RDTSCP</code> instruction? Does it set some specific bit in some register for <code>RDTSCP</code>?"}, {"owner": {"reputation": 1285, "user_id": 5003848, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/12b681a7a5cab103fa1ea1165685555b?s=128&d=identicon&r=PG&f=1", "display_name": "tonysdg", "link": "https://stackoverflow.com/users/5003848/tonysdg"}, "edited": false, "score": 1, "creation_date": 1441210213, "post_id": 32357513, "comment_id": 52589059, "body": "@Junaid - according to <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/ia-32-ia-64-benchmark-code-execution-paper.pdf\" rel=\"nofollow noreferrer\">this document</a> from Intel, it should be a flag listed in the <code>&#47;proc&#47;cpuinfo</code> (see Chap 2.1 - Introduction).  Doesn&#39;t answer your question exactly about how to use <code>cpuid</code> (I don&#39;t know that, unfortunately)."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1441210725, "post_id": 32357513, "comment_id": 52589347, "body": "Yes, there&#39;s a <code>cpuid</code> leaf (80000001H) for processor features you can use.  Normally, it&#39;s called using assembly, but I think there&#39;s a compiler intrinsic for it."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441211371, "post_id": 32357513, "comment_id": 52589735, "body": "I&#39;m not sure what you&#39;re using both for though.  You can get the majority of the functionality of <code>rdtscp</code> using <code>rdtsc</code> and an <code>lfence</code>."}, {"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441270213, "post_id": 32357513, "comment_id": 52613549, "body": "@Jason Thanks for your pointers. Yes, <a href=\"http://www.intel.com/content/dam/www/public/us/en/documents/white-papers/ia-32-ia-64-benchmark-code-execution-paper.pdf\" rel=\"nofollow noreferrer\">this document</a> (as pointed out by @tonysdg too) provides the exact reasoning behind me using the <code>RDTSCP</code>+ <code>RDSTC</code> instructions."}, {"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441292525, "post_id": 32357513, "comment_id": 52628958, "body": "Just a heads up, <code>cpuid</code> is an expensive instruction so you may want to cache the value in a global at startup."}, {"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "reply_to_user": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 0, "creation_date": 1441292927, "post_id": 32357513, "comment_id": 52629242, "body": "@Jason: Yes, you are right. I am putting this in a global after only calling at the start of the program."}, {"owner": {"reputation": 14722, "user_id": 823738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a13a6ed05bdce33d6bf0f01496b9a044?s=128&d=identicon&r=PG", "display_name": "Zaffy", "link": "https://stackoverflow.com/users/823738/zaffy"}, "edited": false, "score": 0, "creation_date": 1551125109, "post_id": 32357513, "comment_id": 96517700, "body": "@Junaid Hello, what build system do you use? Can&#39;t you just figure that out during configuration of the build and set the appropriate macro to the compiler flags?"}], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "edited": false, "score": 0, "creation_date": 1441268811, "post_id": 32358416, "comment_id": 52612686, "body": "I know a dirty way to achieve what I want. I could write a function which could do <code>fopen(&quot;&#47;proc&#47;cpuinfo&quot;,&quot;r&quot;)</code> and then read and parse the data to find <code>RDTSCP</code>. But I was looking for something more generic and independent of underlying operating system ..."}, {"owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "reply_to_user": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "edited": false, "score": 0, "creation_date": 1441275662, "post_id": 32358416, "comment_id": 52617072, "body": "Well, I&#39;m getting somewhere with the SFINAE route, but I don&#39;t know if it will work in the end. g++ is allowing me to put non-existing instructions into an asm declaration in a lambda, as long as I don&#39;t call that lambda. However when I call it in the SFINAE class&#39; argument list as a default parameter, it compiles fine. If I can modify it somehow so that it fails properly, then you will be able to use a static const bool to control whether you include the extra processor instructions, and you can switch on it at compile-time or runtime (as long as you don&#39;t have anything that won&#39;t compile.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550694532, "post_id": 32358416, "comment_id": 96367481, "body": "This can&#39;t possibly work on G++.  It doesn&#39;t have a built-in assembler; it compiles to asm and <i>then</i> feeds that to the assembler.  Also, the assembler doesn&#39;t respect the <code>-march=</code> ISA extension filter.  Using the <code>__rdtscp()</code> intrinsic / builtin could have some chance of working, but GCC doesn&#39;t restrict <code>__rdtscp()</code> by <code>-march=</code> setting either."}], "tags": [], "owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "is_accepted": false, "score": -1, "last_activity_date": 1441211466, "creation_date": 1441211466, "answer_id": 32358416, "question_id": 32357513, "link": "https://stackoverflow.com/questions/32357513/detect-if-processor-has-rdtscp-at-compile-time/32358416#32358416", "title": "Detect if processor has RDTSCP at compile time", "body": "<p>I've been trying to get something to work and have so far been unsuccessful but you might want to try looking down the SFINAE route: <a href=\"https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error</a></p>\n\n<p>I thought there might be a slim chance I could inject the assembly into a lambda and cause this to fail if the instruction doesn't exist on the platform, or succeed if it does, however lambdas can't be used with decltype. If you can somehow feed the assembly code into a template parameter then it can be done, but I don't know whether that would be possible. SFINAE is really cool but can get your head in a spin very quickly.</p>\n\n<p>If you're on *nix, another (possibly na\u00efve and reasonably inelegant) way to do it would be to write a program that runs that assembly instruction and then catches a SIGILL and executes the version of the program without the special instructions. </p>\n\n<p>But there must be a nicer way than this to do it, and I should think that looking at compiler-specific macros would be the way to do it. </p>\n\n<p>Good Luck!</p>\n"}, {"comments": [{"owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "edited": false, "score": 1, "creation_date": 1441293303, "post_id": 32374966, "comment_id": 52629492, "body": "You can actually simplify the code a bit.  With embedded assembly you can tie variables to specific registers.  In the input section, you can add <code>&quot;a&quot;(eax)</code>, and for output <code>&quot;=d&quot;(edx)</code>.  Then you can eliminate the <code>mov</code>s and the <code>ecx</code> variable if you want.  If you do get rid of the <code>ecx</code>, just make sure it&#39;s in the list of clobbered registers."}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1541106586, "post_id": 32374966, "comment_id": 93114032, "body": "This gives error <code>error: \u2018asm\u2019 operand has impossible constraints</code>. The pre-edit version doesn&#39;t give the error."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1550683911, "post_id": 32374966, "comment_id": 96362432, "body": "@haelix: that&#39;s because it uses <code>&quot;a&quot;</code> as an input and <code>&quot;rax&quot;</code> as a clobber.  You don&#39;t need inline asm, use <code>__get_cpuid()</code> instead.  <a href=\"//stackoverflow.com/q/14266772\">How do I call &quot;cpuid&quot; in Linux?</a>"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550760925, "post_id": 32374966, "comment_id": 96396535, "body": "@PeterCordes thanks, but I&#39;m not seasoned with assembly and it would take a bit of effort to grasp the change I need to do. Would it be possible for someone to amend the present Answer into a ready-to-use solution?"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1550765810, "post_id": 32374966, "comment_id": 96399995, "body": "I run into a very odd issue with this code. I put it inside the c-tor of a (C++) static variable and the program hangs at startup (keeps using more and more memory). I am unable to debug it. Never seem something quite like it. Any ideas of what could cause it?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1550768338, "post_id": 32374966, "comment_id": 96401552, "body": "@haelix: what&#39;s &quot;this&quot;?  The code in this answer doesn&#39;t compile.  Did you remove the &quot;rax&quot; clobber, making it unsafe by clobbering RAX without telling the compiler?  That could certainly lead to an infinite loop over init functions, maybe repeatedly calling a <code>std::vector</code> or something.  That&#39;s why you should call <code>__get_cpuid</code> instead of using inline asm at all."}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550770201, "post_id": 32374966, "comment_id": 96402612, "body": "@PeterCordes by &quot;this&quot; I mean I am using the pre-edit version (v1), because like you say, the latest version of the aswer (v2) doesn&#39;t compile. Please can you advise?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1550770279, "post_id": 32374966, "comment_id": 96402651, "body": "@haelix: never use that, it&#39;s broken and should be expected to cause exactly the kind of breakage you&#39;re seeing.  Oh, I just looked.  That and this are both missing an RBX clobber, not RAX.  That makes even more sense; RBX is call-preserved so it&#39;s normally used for loop variables in loops that call functions.  You should downvote this answer because it&#39;s broken.  It has the right CPUID feature bit, but the inline asm is dangerous."}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550770436, "post_id": 32374966, "comment_id": 96402730, "body": "@PeterCordes OK understood, but please can you instruct where/how exactly to &quot;call <code>__get_cpuid</code>&quot;? I&#39;m good with C++ but unfortunately I have no understanding of assembly or built-ins/intrinsics and such. I remember looking for <code>cpuid</code> once without success. Would you perhaps be able to post a corrected answer?"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550770836, "post_id": 32374966, "comment_id": 96402949, "body": "@PeterCordes - I have actually started a bounty for this. Will happily award 50 rep if you fix the current answer."}, {"owner": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "edited": false, "score": 0, "creation_date": 1550851702, "post_id": 32374966, "comment_id": 96436789, "body": "While the above answer is not correct as is, it is a good start. 1. checking at <i>compile</i> time is not possible (no pre-processor macro, no gcc target() notation, etc). Of course, nothing hinders to have a cmake/configure logic checking the availability ahead of compilation. 2. As said as well, this only holds if it&#39;s ensured, that the program is run on the same cpu as compiled. 3. The edited answer works for gcc &amp; icc, and should work in ctors as well. 4. If there is a system-gcc, this will include the mentioned cpuid.h Header which does the ASM magic for you. Otherwise please see above."}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "edited": false, "score": 1, "creation_date": 1550871714, "post_id": 32374966, "comment_id": 96445916, "body": "@RainerKeller <i>The edited answer works</i> - No, we have established that the edited answer doesn&#39;t compile."}, {"owner": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "reply_to_user": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 0, "creation_date": 1550902717, "post_id": 32374966, "comment_id": 96451686, "body": "@haelix -- sorry, i have re-edited the above code on Feb 22nd. The main issue is the missing clobber of rbx in 64-bit code (or ebx for 32-bit compilation). My edit will only appear after it has been peer-reviewed. Shall I include a completely new answer?"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "edited": false, "score": 0, "creation_date": 1551005524, "post_id": 32374966, "comment_id": 96474272, "body": "@rainer if you do that (while mentioning that you&#39;re building upon the existing answer), I&#39;ll award the bounty to you. It seems the original answerer is not around. Also the question itself is misleading, it says &quot;compile-time&quot; which should not ever be mentioned in this context - please say you&#39;re not proposing a solution to the compile-time problem, as one such solution cannot exist. Thanks"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "edited": false, "score": 0, "creation_date": 1551041383, "post_id": 32374966, "comment_id": 96484306, "body": "@RainerKeller: your edit doesn&#39;t show up as pending.  And that&#39;s not the only problem, it&#39;s that eax needs to be a <code>&quot;+a&quot;</code> input/output, because you can&#39;t declare a clobber on a reg used as an operand."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "edited": false, "score": 1, "creation_date": 1551153306, "post_id": 32374966, "comment_id": 96525998, "body": "@haelix: Hadi&#39;s answer now includes working code.  It was correct before my edit, but I polished it up some.  You should probably award it the bounty."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 39, "user_id": 5116723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b091c44c20d78cca945651da04cf724?s=128&d=identicon&r=PG&f=1", "display_name": "Rainer Keller", "link": "https://stackoverflow.com/users/5116723/rainer-keller"}, "edited": false, "score": 1, "creation_date": 1551154225, "post_id": 32374966, "comment_id": 96526170, "body": "@RainerKeller: I fixed the asm in this answer.  Tested on <a href=\"https://godbolt.org/z/jNhxZS\" rel=\"nofollow noreferrer\">godbolt.org/z/jNhxZS</a>.  (That doesn&#39;t prove the clobbers are safe, because I didn&#39;t include any surrounding code that would try to use RAX afterwards, for example.  But a <code>&quot;+a&quot;</code> read-write operand and then leaving the variable unused afterwards is IMO the best way to tell the compiler what&#39;s going on.)"}, {"owner": {"reputation": 3372, "user_id": 1088790, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/bN5qc.jpg?s=128&g=1", "display_name": "haelix", "link": "https://stackoverflow.com/users/1088790/haelix"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1551185322, "post_id": 32374966, "comment_id": 96540726, "body": "@PeterCordes Hadi&#39;s answer is working for me (might have worked before your edit too, I did not try; also I didn&#39;t try your edit on <i>this</i> anser). Awarding the bounty to Hadi&#39;s answer."}], "tags": [], "owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "is_accepted": false, "score": 2, "last_activity_date": 1551154427, "last_edit_date": 1551154427, "creation_date": 1441281431, "answer_id": 32374966, "question_id": 32357513, "link": "https://stackoverflow.com/questions/32357513/detect-if-processor-has-rdtscp-at-compile-time/32374966#32374966", "title": "Detect if processor has RDTSCP at compile time", "body": "<p>Editor's note: <strong><a href=\"https://gcc.gnu.org/wiki/DontUseInlineAsm\" rel=\"nofollow noreferrer\">https://gcc.gnu.org/wiki/DontUseInlineAsm</a></strong>.  This answer for a long time was unsafe, and later edited to not even compile while still being unsafe (clobbering RAX making the <code>\"a\"</code> constraint unsatisfiable, while still missing clobbers on registers that CPUID writes).  Use the intrinsics in another answer.  (But I've fixed the inline asm in this to be safe and correct, in case anyone does copy/paste it, or wants to learn how to use constraints and clobbers properly.)</p>\n\n<hr>\n\n<p>After investigating a little more based on the suggestions made by @Jason, I have now a run-time solution (still not a compile-time one) to determine if <code>RDTSCP</code> exists by checking the 28th bit (see <a href=\"https://en.wikipedia.org/wiki/CPUID#EAX.3D80000001h:_Extended_Processor_Info_and_Feature_Bits\" rel=\"nofollow noreferrer\">output bitmap</a>) of the <code>cpuid</code> instruction with <code>0x80000001</code> as input in <code>EAX</code>.</p>\n\n<pre><code>int if_rdtscp() {\n    unsigned int edx;\n    unsigned int eax = 0x80000001;\n#ifdef __GNUC__              // GNU extended asm supported\n    __asm__ (     // doesn't need to be volatile: same EAX input -&gt; same outputs\n     \"CPUID\\n\\t\"\n    : \"+a\" (eax),         // CPUID writes EAX, but we can't declare a clobber on an input-only operand.\n      \"=d\" (edx)\n    : // no read-only inputs\n    : \"ecx\", \"ebx\");      // CPUID writes E[ABCD]X, declare clobbers\n\n    // a clobber on ECX covers the whole RCX, so this code is safe in 64-bit mode but is portable to either.\n\n#else // Non-gcc/g++ compilers.\n    // To-do when needed\n#endif\n    return (edx &gt;&gt; 27) &amp; 0x1;\n}\n</code></pre>\n\n<p>If this doesn't work in 32-bit PIC code because of the EBX clobber, then 1. stop using 32-bit PIC because it's inefficient vs. 64-bit PIC or vs. <code>-fno-pie -no-pie</code> executables.  2. get a newer GCC that allows EBX clobbers even in 32-bit PIC code, emitting extra instructions to save/restore EBX or whatever is needed.  3. use the intrinsics version (which should work around this for you).</p>\n\n<hr>\n\n<p>For now I am fine with GNU compilers, but if somebody need do this under MSVC, then is an intrinsic way to check this as explained <a href=\"https://msdn.microsoft.com/en-us/library/hskdteyh.aspx\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1550684170, "post_id": 54791799, "comment_id": 96362549, "body": "It would be nice if this worked, but none of gcc, clang, ICC, or MSVC define that macro.  <a href=\"https://godbolt.org/z/at5ALR\" rel=\"nofollow noreferrer\">godbolt.org/z/at5ALR</a> shows that all 4 compilers use the <code>#else</code> branch, with <code>-march=skylake</code>, <code>-march=znver1</code>, or <code>-march=knl</code>.  (Or for MSVC, x86-64 + AVX2 because it doesn&#39;t target specific CPUs.)"}, {"owner": {"reputation": 1, "user_id": 10990249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd0a4707743885c1855f508db27db97?s=128&d=identicon&r=PG&f=1", "display_name": "Mindkid ", "link": "https://stackoverflow.com/users/10990249/mindkid"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550772776, "post_id": 54791799, "comment_id": 96403834, "body": "Hello Peter I&#39;ved answered like that because it worked for me. I&#39;m doing a project that&#39;s must know if the processor has clflushopt function, if tit does use it, if it doesn&#39;t use clflush has the flush function..."}, {"owner": {"reputation": 1, "user_id": 10990249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd0a4707743885c1855f508db27db97?s=128&d=identicon&r=PG&f=1", "display_name": "Mindkid ", "link": "https://stackoverflow.com/users/10990249/mindkid"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550773085, "post_id": 54791799, "comment_id": 96403993, "body": "I don&#39;t have access to the make file right now and the code. When i got them I can post here so you can test it out on your machine. I&#39;ved tested it in 2 separated machines one having other doesn&#39;t having and it worked the CPUID checked out. If it has continues uses clflushopt has flush function, if it doesn&#39;t uses clflush. I&#39;ved answered this question because I had the same problem and because I found a solution that worked for me I&#39;ved shared so it can be helpful for you... I don&#39;t know the compiler site that emulates the compiler I&#39;ved checked the gcc man page and use like I&#39;ved mentioned."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550773409, "post_id": 54791799, "comment_id": 96404142, "body": "Godbolt doesn&#39;t &quot;emulate&quot; gcc, it literally runs an actual install of gcc.  Compilers do define <code>__CLFLUSHOPT__</code>, but not <code>__RDTSCP__</code>.  So yes, this solution works for CLFLUSHOPT, but not for RDTSCP.  Not all ISA extensions have their own CPP macro, in gcc/clang/ICC, unfortunately.  You can&#39;t just make up macro names without checking that the compiler actually does define it or not depending on <code>-march</code> options.  (Also, ICC19 <code>-march=skylake</code> or <code>-xHOST</code> doesn&#39;t define <code>__CLFLUSHOPT__</code>, so unfortunately even that&#39;s not fully portable :("}, {"owner": {"reputation": 1, "user_id": 10990249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd0a4707743885c1855f508db27db97?s=128&d=identicon&r=PG&f=1", "display_name": "Mindkid ", "link": "https://stackoverflow.com/users/10990249/mindkid"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550777400, "post_id": 54791799, "comment_id": 96406072, "body": "Hello Peter you got a point, and i&#39;m sorry, i&#39;ved assume that it worked because if you search on the intel intrisics you see that RDTSCPT it&#39;s the flag as such CLFLUSHOPT it&#39;s for the given function, and for the clflushopt i searched in the immintrin.h / clflushoptintrin.h for the flag of it, and it was <b>CLFLUSHOP</b> so i&#39;ved assumed that for the given function it was <b>RDTSCPT</b>. That was my assumption sorry.."}], "tags": [], "owner": {"reputation": 1, "user_id": 10990249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fd0a4707743885c1855f508db27db97?s=128&d=identicon&r=PG&f=1", "display_name": "Mindkid ", "link": "https://stackoverflow.com/users/10990249/mindkid"}, "is_accepted": false, "score": -2, "last_activity_date": 1550682375, "creation_date": 1550682375, "answer_id": 54791799, "question_id": 32357513, "link": "https://stackoverflow.com/questions/32357513/detect-if-processor-has-rdtscp-at-compile-time/54791799#54791799", "title": "Detect if processor has RDTSCP at compile time", "body": "<p>Hello you can use the CPUID flag to check if it exist at compile time, for that you have to use 2 things, first guards like:</p>\n\n<pre><code>#ifdef __RDTSCP__\n    // do things because it has the \n       function \n#else\n    // do things if it doesn't have \n#endif \n</code></pre>\n\n<p>For last you have to compile the code using a flag in the gcc  for example:</p>\n\n<pre><code>gcc x.c -o x.o -march=native\n</code></pre>\n\n<p>This gcc instruction will compile your code using the native functions of you cpu so it will define your CPUIDs. </p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1550803210, "post_id": 54817856, "comment_id": 96414025, "body": "If you&#39;re building with <code>-march=native</code>, you can detect whether the host supports RDTSCP by looking at <code>&#47;proc&#47;cpuinfo</code> if the host is Linux.  e.g. <code>grep -l &#39;^flags[[:space:]]*:.*rdtscp&#39; &#47;proc&#47;cpuinfo</code>  <a href=\"//stackoverflow.com/a/54817625\">CMake test for processor feature</a>"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1551153863, "post_id": 54817856, "comment_id": 96526100, "body": "@PeterCordes Note that the value of <code>EDX</code> is undefined if <code>__get_cpuid</code> returned zero (which indicates no support for the specified CPUID leaf). I think we should either initialize d to zero or include <code>__get_cpuid</code> in the if expression as it was before the edit."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1551154532, "post_id": 54817856, "comment_id": 96526224, "body": "I had already noticed that and changed the code back to how you had it in the Godbolt link, but forgot to copy the final version back into the answer!  Sorry about that."}], "tags": [], "owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "is_accepted": true, "score": 5, "last_activity_date": 1579353992, "last_edit_date": 1579353992, "creation_date": 1550791877, "answer_id": 54817856, "question_id": 32357513, "link": "https://stackoverflow.com/questions/32357513/detect-if-processor-has-rdtscp-at-compile-time/54817856#54817856", "title": "Detect if processor has RDTSCP at compile time", "body": "<p>GCC defines many macros to determine at compile-time whether a particular feature is supported by the microarchitecture specified using <code>-march</code>. You can find the full list in the source code <a href=\"https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/gcc/config/i386/i386-c.c#L391\" rel=\"nofollow noreferrer\">here</a>. It's clear that GCC does not define such a macro for <code>RDTSCP</code> (or even <code>RDTSC</code> for that matter). The processors that support <code>RDTSCP</code> are listed in: <a href=\"https://stackoverflow.com/questions/37682939/what-is-the-gcc-cpu-type-that-includes-support-for-rdtscp\">What is the gcc cpu-type that includes support for RDTSCP?</a>.</p>\n\n<p>So you can make your own (potentially incomplete) list microarchitectures that support <code>RDTSCP</code>. Then write a build script that checks the argument passed to <code>-march</code> and see if it is in the list. If it is, then define a macro such as <code>__RDTSCP__</code> and use it in your code. I presume that even if your list is incomplete, this should not compromise the correctness of your code.</p>\n\n<p>Unfortunately, the Intel datasheets do not seem to specify whether a particular processor supports <code>RDTSCP</code> even though they discuss other features such as AVX2.</p>\n\n<p>One potential problem here is that there is no guarantee that <em>every</em> single processor that implements a particular microarchitecture, such as Skylake, supports <code>RDTSCP</code>. I'm not aware of such exceptions though.</p>\n\n<p>Related: <a href=\"https://stackoverflow.com/questions/37682939/what-is-the-gcc-cpu-type-that-includes-support-for-rdtscp\">What is the gcc cpu-type that includes support for RDTSCP?</a>.</p>\n\n<hr>\n\n<p><strong>To determine RDTSCP support at run-time</strong>, the following code can be used on compilers supporting GNU extensions (GCC, clang, ICC), on any x86 OS.  <code>cpuid.h</code> comes with the compiler, not the OS.</p>\n\n<pre><code>#include &lt;cpuid.h&gt;\n\nint rdtscp_supported(void) {\n    unsigned a, b, c, d;\n    if (__get_cpuid(0x80000001, &amp;a, &amp;b, &amp;c, &amp;d) &amp;&amp; (d &amp; (1&lt;&lt;27)))\n    {\n        // RDTSCP is supported.\n        return 1;\n    }\n    else\n    {\n        // RDTSCP is not supported.\n        return 0;\n    }\n}\n</code></pre>\n\n<p><code>__get_cpuid()</code> runs CPUID twice: once to check max level, once with the specified leaf value.  It returns false if the requested level isn't even available, that's why it's part of a <code>&amp;&amp;</code> expression.  You probably don't want to use this every time before rdtscp, just as an initializer for a variable unless it's just a simple one-off program.  See it <a href=\"https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:&#39;%23include+%3Ccpuid.h%3E%0A%0Aint+rdtscp_supported(void)+%7B%0A++++unsigned+a,+b,+c,+d%3B%0A++++if+(__get_cpuid(0x80000001,+%26a,+%26b,+%26c,+%26d)+%26%26+(d+%26+(1%3C%3C27)))%0A++++%7B%0A++++++++//+RDTSCP+is+supported.%0A++++++++return+1%3B%0A++++%7D%0A++++else%0A++++%7B%0A++++++++//+RDTSCP+is+not+supported.%0A++++++++return+0%3B%0A++++%7D%0A%7D%0A%0A%0A//+unfortunately+no+equivalent+for+RDTSCP%0Aint+sse42_supported()+%7B%0A++++return+__builtin_cpu_supports(%22sse4.2%22)%3B%0A%7D%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:34.57745932470406,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((g:!((h:compiler,i:(compiler:g83,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:&#39;-xc+-O3++-Wall+-std%3Dc99+-march%3Dskylake&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+8.3+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:26.111951963314816,l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:clang700,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:&#39;-xc+-O3++-Wall+-std%3Dc99+-march%3Dskylake&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+7.0.0+(Editor+%231,+Compiler+%232)+C%2B%2B&#39;,t:&#39;0&#39;)),header:(),l:&#39;4&#39;,m:50,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),k:34.37733492555975,l:&#39;3&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:icc191,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:&#39;-xc+-O3++-Wall+-std%3Dc99+-march%3Dskylake&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+icc+19.0.1+(Editor+%231,+Compiler+%233)+C%2B%2B&#39;,t:&#39;0&#39;)),k:31.04520574973618,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4\" rel=\"nofollow noreferrer\">on the Godbolt compiler explorer</a>.</p>\n\n<p>For MSVC, see <a href=\"https://stackoverflow.com/questions/25149358/how-to-detect-rdtscp-support-in-visual-c\">How to detect rdtscp support in Visual C++?</a> for code using its intrinsic.</p>\n\n<hr>\n\n<p>For some CPU features that GCC does know about, you can use <code>__builtin_cpu_supports</code> to check a feature bitmap that's initialized early in startup.</p>\n\n<pre><code>// unfortunately no equivalent for RDTSCP\nint sse42_supported() {\n    return __builtin_cpu_supports(\"sse4.2\");\n}\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 1082170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c8f364ad4c94b4b5eb5747b0d123f31e?s=128&d=identicon&r=PG", "display_name": "user1082170", "link": "https://stackoverflow.com/users/1082170/user1082170"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2413, "favorite_count": 2, "accepted_answer_id": 54817856, "answer_count": 4, "score": 6, "last_activity_date": 1579353992, "creation_date": 1441208556, "last_edit_date": 1551154889, "question_id": 32357513, "link": "https://stackoverflow.com/questions/32357513/detect-if-processor-has-rdtscp-at-compile-time", "title": "Detect if processor has RDTSCP at compile time", "body": "<p>Some new Intel processors have both <code>RDTSC</code>and <code>RDTSCP</code> instructions while most older processors have only <code>RDTSC</code> instruction.</p>\n\n<p>While coding in C/C++, how I can detect at compile time if the architecture being used have <code>RDTSCP</code> instruction or not? </p>\n\n<p>I know we can check this out manually by browsing CPU info (e.g., cat /proc/cpuinfo) and then adjusting our code. But getting this information at compile time (as a macro or flag value) would really omit the need to manually checking and editing the code.</p>\n"}, {"tags": ["c++", "templates", "inheritance"], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 2, "last_activity_date": 1441208517, "creation_date": 1441208517, "answer_id": 32357503, "question_id": 32357392, "link": "https://stackoverflow.com/questions/32357392/calling-overridden-template-member-function-of-template-base-class-from-template/32357503#32357503", "title": "Calling overridden template member function of template base class from template subclass", "body": "<p>Here <code>f&lt;U&gt;</code> is a dependent name (it depends on <code>T</code>), so you need to disambiguate the fact that it is a template :</p>\n\n<pre><code>Foo&lt;T&gt;::template f&lt;U&gt;();\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 2601195, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/13a350e9121c1d618bd40a40ac9b680a?s=128&d=identicon&r=PG", "display_name": "user2601195", "link": "https://stackoverflow.com/users/2601195/user2601195"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "closed_date": 1441208491, "accepted_answer_id": 32357503, "answer_count": 1, "score": 0, "last_activity_date": 1441208517, "creation_date": 1441208202, "question_id": 32357392, "link": "https://stackoverflow.com/questions/32357392/calling-overridden-template-member-function-of-template-base-class-from-template", "closed_reason": "Duplicate", "title": "Calling overridden template member function of template base class from template subclass", "body": "<p>Consider this example</p>\n\n<pre><code>template &lt;class T&gt;\nstruct Foo\n{\n    template &lt;class U&gt; void f (void) {}\n    void g (void) {}\n};\n\nstruct Foo2\n{\n    template &lt;class U&gt; void f (void) {}\n    void g (void) {}\n};\n\ntemplate &lt;class T&gt;\nstruct Bar : public Foo&lt;T&gt;, public Foo2\n{\n    template &lt;class U&gt; \n    void f (void) {\n        Foo&lt;T&gt;::f&lt;U&gt; ();  // doesn't compile\n        Foo2::f&lt;U&gt; (); // compiles\n    }\n    void g (void) {\n        Foo&lt;T&gt;::g (); // compiles\n        Foo2::g (); // compiles\n    }\n};\n\nstruct Bar2 : public Foo&lt;char&gt;, public Foo2\n{\n    template &lt;class U&gt; \n    void f (void) {\n        Foo&lt;char&gt;::f&lt;U&gt; ();  // compiles\n        Foo2::f&lt;U&gt; (); // compiles\n    }\n    void g (void) {\n        Foo&lt;char&gt;::g (); // compiles\n        Foo2::g (); // compiles\n    }\n};\n\nint main()\n{\n    Bar&lt;char&gt; b;\n    b.f&lt;int&gt; ();\n    b.g ();\n    Bar2 b2;\n    b2.f&lt;int&gt; ();\n    b2.g ();        \n    return 0;\n}\n</code></pre>\n\n<p>In both inheritance cases, the template member function <code>f</code> is overridden in the subclasses <code>Bar</code> and <code>Bar2</code>. When the base class is not a template, the overridden method can be called just fine from the subclass. When the base class is a template but the subclass is not, the same. But, when both the base class and subclass are templates, the overridden template member function of the base class cannot be called from the subclass. Specifically, g++-4.8 spits out:</p>\n\n<pre><code>In member function \u2018void Bar&lt;T&gt;::f()\u2019:\nerror: expected primary-expression before \u2018&gt;\u2019 token\n         Foo&lt;T&gt;::f&lt;U&gt; ();  // doesn't compile\n                    ^\nerror: expected primary-expression before \u2018)\u2019 token\n         Foo&lt;T&gt;::f&lt;U&gt; ();  // doesn't compile\n                       ^\n</code></pre>\n\n<p>My question is: is this expected behavior?</p>\n"}, {"tags": ["c#", "c++", "winforms", "mfc", "windows-10"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1441210342, "post_id": 32357277, "comment_id": 52589131, "body": "It&#39;s normal.  They&#39;ll get used to it."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1441212366, "post_id": 32357277, "comment_id": 52590278, "body": "@HansPassant I know I will get used to it too, but it&#39;s not very clear, and I personally hate the new style... :)"}, {"owner": {"reputation": 99, "user_id": 7711756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db9b8fc2f14220790e650557a71fa174?s=128&d=identicon&r=PG&f=1", "display_name": "Arnoud Mulder", "link": "https://stackoverflow.com/users/7711756/arnoud-mulder"}, "edited": false, "score": 1, "creation_date": 1539544159, "post_id": 32357277, "comment_id": 92530638, "body": "There is no getting used to chaos. Somehow MS has gotten toddlers from kindergarten and put them in charge of the Windows development team, or at least people who don&#39;t understand systematic thinking. I have no clue what persons are in charge of these chaos at MS, but they must have lots of fun seeing the world having no alternative then to accept it. Just my 4 cents."}], "answers": [{"comments": [{"owner": {"reputation": 475, "user_id": 6179327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U3c5T.jpg?s=128&g=1", "display_name": "TheHitchenator", "link": "https://stackoverflow.com/users/6179327/thehitchenator"}, "edited": false, "score": 0, "creation_date": 1605536911, "post_id": 32367574, "comment_id": 114672646, "body": "Sorry to necro, but where you say you can set the styles in your project, how would one do this? I don&#39;t particularly want to ownerdraw every combobox I ever use in DropDownList mode. It really is a shame microsoft don&#39;t offer a way to change the colour of this control the same as all other controls can be changed."}], "tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": true, "score": 1, "last_activity_date": 1441257971, "creation_date": 1441257971, "answer_id": 32367574, "question_id": 32357277, "link": "https://stackoverflow.com/questions/32357277/enabled-combobox-controls-looking-disabled-in-windows-10/32367574#32367574", "title": "Enabled combobox controls looking disabled in windows 10?", "body": "<p>These colors are normal now. I have myself running Windows 8.1 and I don't see any difference to Windows 10.</p>\n\n<p>If you prefer other styles, you can set them in your project, or do an owner-draw.</p>\n"}], "owner": {"reputation": 3358, "user_id": 580041, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/tXAwG.png?s=128&g=1", "display_name": "Goldorak84", "link": "https://stackoverflow.com/users/580041/goldorak84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 1, "accepted_answer_id": 32367574, "answer_count": 1, "score": 2, "last_activity_date": 1441257971, "creation_date": 1441207838, "question_id": 32357277, "link": "https://stackoverflow.com/questions/32357277/enabled-combobox-controls-looking-disabled-in-windows-10", "title": "Enabled combobox controls looking disabled in windows 10?", "body": "<p>I just upgraded to windows 10, and the majority of my software's combo boxes are greyed out, but still clickable. Is this normal? It's confusing for our users since they will think all the combo box controls are disabled.</p>\n\n<p>I did a test with comboboxes and editbox, and it seems there is no longer a standard control color for \"disabled\" controls. That can be quite confusing for the user <a href=\"https://i.stack.imgur.com/jPypF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jPypF.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "xml", "expat-parser"], "owner": {"reputation": 6065, "user_id": 864027, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/3f26a415e9299390c5090b6150a39b30?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/864027/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441207585, "creation_date": 1441207585, "question_id": 32357195, "link": "https://stackoverflow.com/questions/32357195/does-expat-include-quotes-that-delimit-attribute-values", "title": "Does expat include quotes that delimit attribute values?", "body": "<p>I'm learning to use Expat to parse XML. Suppose I have some XML that looks like this:</p>\n\n<pre><code>&lt;data id=\"the-id\" type=\"my_type\" size=\"93\"&gt;\n</code></pre>\n\n<p>When the handler that I specified for <code>XML_SetElementHandler</code> is called with an attribute list, do the attributes include the quote characters used to delimit them?</p>\n"}, {"tags": ["c++", "qt", "qt3d"], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 8924492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/629b2c4565db45be1e66d76dd6477727?s=128&d=identicon&r=PG&f=1", "display_name": "LKieliger", "link": "https://stackoverflow.com/users/8924492/lkieliger"}, "is_accepted": false, "score": 0, "last_activity_date": 1510733189, "creation_date": 1510733189, "answer_id": 47302244, "question_id": 32357154, "link": "https://stackoverflow.com/questions/32357154/qt3d-2-0-billboard-transformation/47302244#47302244", "title": "Qt3D 2.0 billboard transformation", "body": "<p>See my answer at <a href=\"https://gamedev.stackexchange.com/a/150705/109297\">Gamedev</a>, the procedure is quite simple once you have the view matrix. The view matrix can be acquired through the appropriate getter of your <code>Camera</code> object. If you want to know more, there is also a <a href=\"https://swiftcoder.wordpress.com/2008/11/25/constructing-a-billboard-matrix/\" rel=\"nofollow noreferrer\">link</a> which gives you the detailed derivation.</p>\n"}], "owner": {"reputation": 351, "user_id": 1618841, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d2f5313c045882753fdc7ad9ecc9cabf?s=128&d=identicon&r=PG", "display_name": "ElDorado", "link": "https://stackoverflow.com/users/1618841/eldorado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 389, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1510733189, "creation_date": 1441207484, "last_edit_date": 1441208177, "question_id": 32357154, "link": "https://stackoverflow.com/questions/32357154/qt3d-2-0-billboard-transformation", "title": "Qt3D 2.0 billboard transformation", "body": "<p>Billboard transformation was depricated since Qt3D 1.0. Now it is replaced with lookAt transformation.\nI have created plane inside Qt3D context. (took it from Qt3D example found  <a href=\"http://doc.qt.io/qt-5/qt3drenderer-materials-cpp-example.html\" rel=\"nofollow\">here</a>) and added QLookAtTransform to it.\nBut both:</p>\n\n<pre><code>planeEntity-&gt;lookAtTransform()-&gt;setViewCenter(cameraEntity-&gt;position());\n</code></pre>\n\n<p>and</p>\n\n<pre><code>planeEntity-&gt;lookAtTransform()-&gt;setViewVector(cameraEntity-&gt;position());\n</code></pre>\n\n<p>give no result. Plane disappear from scene.</p>\n\n<p>Class reference found <a href=\"http://doc.qt.io/qt-5/qt3d-qlookattransform.html\" rel=\"nofollow\">here</a> give no explanation of how to use it.</p>\n\n<p>How must QLookAtTransform be used to act like billboard transformation?</p>\n"}, {"tags": ["c++", "qt", "command-line", "command-line-arguments"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1441207626, "post_id": 32357120, "comment_id": 52587338, "body": "Command line arguments are only passed when the application starts, you need some other way of signaling the application to re-read the file. Alternatively, you could have the application monitor the file and look for changes (e.g. new modification timestamp, or different file-size, or using your platforms native file-monitoring interface)."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1441207692, "post_id": 32357120, "comment_id": 52587383, "body": "So a PHP program &quot;feeds&quot; your program continously. a) Just adding lines to the file while the other program is reading it is a problem, forget this. b) Why your program needs a GUI?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1441207794, "post_id": 32357120, "comment_id": 52587456, "body": "But actually, first you really should check if it&#39;s worth running your program as a <i>daemon</i>, because you need continuous requests all day long for it to be worth turning your application into a daemon. Are you expecting the program to be called several time a minute for days on ends, or only a couple of time per day?"}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441207840, "post_id": 32357120, "comment_id": 52587499, "body": "@deviantfan    Hi, thanks for replying! The program needs GUI capabilities because it renders a webpage and captures a screenshot of it. If I understood correctly, i can not do this while building a console app in Qt."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1441207910, "post_id": 32357120, "comment_id": 52587557, "body": "@JoachimPileborg good point! I do know for sure I will need to have it run continuously. So having it run as a Daemon would be awesome."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441207990, "post_id": 32357120, "comment_id": 52587607, "body": "@deviantfan    also, if i get the console side working, i can drop the feeding through a file and simply feed the application through command lines. I already had a feeling that writing to a file with PHP while reading from the file with the thumbnail program would cause trouble"}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1441208333, "post_id": 32357120, "comment_id": 52587859, "body": "@JoachimPileborg I expect the program to be called for several times every minute.. That is what I am going for."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1441208557, "post_id": 32357120, "comment_id": 52588016, "body": "@CantThinkOfAnything As JoachimPileborg said already, the command line ist just relevant when the program starts. If you want something running all the time, you can&#180;t use it while it runs. But ... with several times per <i>minute</i>, just start it separately for each URL, from PHP (and pass the URL as command line argument, instead of creating a file for it)."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1441208628, "post_id": 32357120, "comment_id": 52588057, "body": "And keep in mind that you&#180;ll need some plan how and where the results are saved so that one program instance won&#180;t overwrite the result of others."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1441208751, "post_id": 32357120, "comment_id": 52588139, "body": "@deviantfan     hmm I see,,, Thanks for the input, i apreciate it a lot. It makes more sense indeed to do it like you suggest. I will make it so that the saved results are always unique so that they dont overwrite each other. And then just simply call the program each time for a given URL."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 1, "creation_date": 1441212291, "post_id": 32357120, "comment_id": 52590232, "body": "While it might not be the best solution, one way would be for your application to detect if another instance of it is already running. If not, launch normally, but if so, send a message to the already running application with the new information, and then just let the newly launched instance terminate after it sends the message."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441213291, "post_id": 32357120, "comment_id": 52590860, "body": "@Steve          Hmm i see,, that way only one instance will always be handling the operations.. is that the point?"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441214179, "post_id": 32357120, "comment_id": 52591482, "body": "@CantThinkOfAnything Yep, exactly."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441216385, "post_id": 32357120, "comment_id": 52592720, "body": "@Steve         good point then hehe! But for now, it does not really matter for me. If the number of operations performed increases, then I just might do what you suggested."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441221624, "post_id": 32357120, "comment_id": 52595558, "body": "@CantThinkOfAnything Actually, I would think that this solution would really only be good when the number of operations is low. Creating a brand new process just to pass information to another process requires a pretty hefty overhead compared to other solutions."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441221990, "post_id": 32357120, "comment_id": 52595747, "body": "@Steve         hmm yeah lol,, makes sense, It would cost less to simply stack the instances and let them die as they finish lol... apparently I did not use my head like i am supposed to in my previous comment hehe"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441226504, "post_id": 32357120, "comment_id": 52598177, "body": "@CantThinkOfAnything No, do not let the instances stack, that might even be worse, especially under heavy load."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441315462, "post_id": 32357120, "comment_id": 52641978, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/88740/discussion-between-cantthinkofanything-and-steve\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "edited": false, "score": 0, "creation_date": 1441213082, "post_id": 32358703, "comment_id": 52590703, "body": "Thanks for the reply! Right now I have made it so that the program is executed with a commandline argument. It processes the link and then it closes itself on finish. And then I just call it everytime i need it.. The answer you have given is a little more complex and I will defenitely refer to it if my program will need to handle more operations because as I have understood: with only a few calls per minute this simple way will suffice. Anyways, your answer is the correct one, Thanks!"}, {"owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "reply_to_user": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "edited": false, "score": 0, "creation_date": 1441214627, "post_id": 32358703, "comment_id": 52591726, "body": "No problem, you&#39;re right there, it can be difficult to remember to weigh-up developer time for the extra complication with running time for doing it the easy, less efficient way! QTextStreams are designed to be very much like the standard library&#39;s iostreams, so they shouldn&#39;t be too difficult if you end up giving them a spin. AFAIK their main attraction is better integration with Qt classes like QString, and that they  attempt to handle all the encoding issues internally, i.e. they will encode data from the platform&#39;s native format for text files into UTF-16 unicode like the whole of Qt uses."}, {"owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "edited": false, "score": 0, "creation_date": 1441216285, "post_id": 32358703, "comment_id": 52592666, "body": "I see. For Qt, the QTextStream definitely seems to be the way to go then.. going against it might be asking for trouble.. anyways you are right indeed, people sometimes forget to weigh up things.. and in this case it is most definitely better for me to keep it simple and focus on more important coding hehe :)"}], "tags": [], "owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "is_accepted": true, "score": 3, "last_activity_date": 1441212325, "last_edit_date": 1495541178, "creation_date": 1441212325, "answer_id": 32358703, "question_id": 32357120, "link": "https://stackoverflow.com/questions/32357120/is-it-possible-to-listen-for-commandline-arguments-at-runtime-for-a-gui-app-in-q/32358703#32358703", "title": "is it possible to listen for commandline arguments at runtime for a GUI app in Qt?", "body": "<p>Joachim is right, you've confused command-line arguments, which are passed to your program before it enters main(), and console/command-line/teminal input and output, which is done using cin/cout, printf/scanf, etc. You can use cin and cout, this would be perfectly valid, but the Qt way to do it would be to use a QTextStream. See here for a discussion: <a href=\"https://stackoverflow.com/questions/2321880/is-it-possible-to-use-cin-with-qt\">Is it possible to use cin with Qt?</a></p>\n\n<p>I think it is perfectly doable in one thread but you might want to split your program into different QThreads, with one thread waiting on terminal input and then emitting a signal when it's read a link, and the other thread processing the links in the background. But, you could just do it linearly, i.e. read a link, process the link.</p>\n"}], "owner": {"reputation": 992, "user_id": 3114383, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100002206807209/picture?type=large", "display_name": "CantThinkOfAnything", "link": "https://stackoverflow.com/users/3114383/cantthinkofanything"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 32358703, "answer_count": 1, "score": 2, "last_activity_date": 1441212325, "creation_date": 1441207409, "question_id": 32357120, "link": "https://stackoverflow.com/questions/32357120/is-it-possible-to-listen-for-commandline-arguments-at-runtime-for-a-gui-app-in-q", "title": "is it possible to listen for commandline arguments at runtime for a GUI app in Qt?", "body": "<p>I am building an application that reads a text file for URL links to create website thumbnails.</p>\n\n<p>What I would like is to be able to insert URL's into the textfile with PHP and then call the program to read the links and make thumbnails.</p>\n\n<p>I could close the application when its finished processing and then simply call it again when needed but I think the application would be starting/closing a lot needlessly if there are lots of requests.</p>\n\n<p>It would be better if I could controll the application through commandline arguments. I am not sure if this is possible?</p>\n\n<p>I am trying to create a while loop to listen for commandline input</p>\n\n<pre><code>while(std::cin &gt;&gt; urlLink){\n\n    qDebug() &lt;&lt; \"test\";\n\n}\n</code></pre>\n\n<p>Next I have tried adding: \"CONFIG += console\" to the .pro file but it doesnt show any commandline console.</p>\n\n<p>I have no idea how to accomplish what I am trying to do. If you guys could help me out, I would be very glad.</p>\n\n<p><strong>So my question is: Is it possible to have a GUI app that is controlled through the commandline? And how would I go about this? (In Qt)</strong></p>\n"}, {"tags": ["c++", "enums", "enumeration"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1441207009, "post_id": 32356837, "comment_id": 52586923, "body": "why do you want it as an enum? you could get what you want with a <code>GraphicsAct</code> base class and then using polymorphism"}], "answers": [{"comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1441206884, "post_id": 32356921, "comment_id": 52586821, "body": "That doesn&#39;t answer the question or provide a solution. This should be a comment instead of an answer."}, {"owner": {"reputation": 101, "user_id": 4477279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kf-_CB8vg0I/AAAAAAAAAAI/AAAAAAAAAFM/b-qVzn-rwGM/photo.jpg?sz=128", "display_name": "Stefan Riesen", "link": "https://stackoverflow.com/users/4477279/stefan-riesen"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1441207781, "post_id": 32356921, "comment_id": 52587448, "body": "Correct. I added the example"}], "tags": [], "owner": {"reputation": 101, "user_id": 4477279, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Kf-_CB8vg0I/AAAAAAAAAAI/AAAAAAAAAFM/b-qVzn-rwGM/photo.jpg?sz=128", "display_name": "Stefan Riesen", "link": "https://stackoverflow.com/users/4477279/stefan-riesen"}, "is_accepted": false, "score": -1, "last_activity_date": 1441207727, "last_edit_date": 1441207727, "creation_date": 1441206814, "answer_id": 32356921, "question_id": 32356837, "link": "https://stackoverflow.com/questions/32356837/flexible-enums-in-c/32356921#32356921", "title": "Flexible enums in C++", "body": "<p>For this purpose c++ offers structs and classes. A c++ enum is a specific value out of a set of predefined values.</p>\n\n<p>Edit: Here's an example of a possible solution</p>\n\n<pre><code>class Action {\n public:\n  doAction();\n}\n\nclass ClearScreen : public class Action {\n public:\n  doAction() {\n   // do something\n  }\n}\n\nclass MoveTo : public class Action {\n public:\n  int x, y;\n\n  doAction() {\n   // do something\n  }\n}\n\n// Etc for other things you want to do;\n\nint main() {\n  std::vector&lt;Action&gt; Actions;\n  ClearScreen clr;\n  Actions.push_back(clr);\n  MoveTo move;\n  move.x = 100;\n  move.y = 100;\n  Actions.push_back(move);\n\n for (Action a:Actions) {\n   a.doAction();\n }\n}\n</code></pre>\n\n<p>Sorry, I'm just on the road and can't check if the code really works, but i think you should get the idea.</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 5, "last_activity_date": 1441217590, "last_edit_date": 1441217590, "creation_date": 1441207416, "answer_id": 32357122, "question_id": 32356837, "link": "https://stackoverflow.com/questions/32356837/flexible-enums-in-c/32357122#32357122", "title": "Flexible enums in C++", "body": "<p>You may use <code>union</code> and <code>enum</code>, something like:</p>\n\n<pre><code>enum class EGraphicActType\n{\n    ClearScreen, MoveTo, LineTo, FillColorData, EnfFillData\n};\n\nstruct ClearScreenData {};\nstruct MoveToData { float x; float y;};\nstruct LineToData { float x; float y;};\nstruct FillColorData { Int color;};\nstruct EnfFillData {};\n\nstruct GraphicAct {\n    EGraphicActType type;\n    union\n    {\n        ClearScreenData clearScreenData;\n        MoveToData moveToData;\n        LineToData lineToData;\n        FillColorData fillColorData;\n        EnfFillData endFillData;\n    } data;\n};\n</code></pre>\n\n<p>If you have access to boost, you may use <code>boost::variant</code>.</p>\n"}], "owner": {"reputation": 2081, "user_id": 3426308, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/100003288751299/picture?type=large", "display_name": "shal", "link": "https://stackoverflow.com/users/3426308/shal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 32357122, "answer_count": 2, "score": 2, "last_activity_date": 1441217590, "creation_date": 1441206547, "last_edit_date": 1441206847, "question_id": 32356837, "link": "https://stackoverflow.com/questions/32356837/flexible-enums-in-c", "title": "Flexible enums in C++", "body": "<p>How can I organize enums so that each enum entry could have parameters, like I can do in Haxe, for instance:</p>\n\n<pre><code>enum GraphicAct {\n  ClearScreen; \n  MoveTo(x:Float, y:Float);\n  LineTo(x:Float, y:Float);\n  FillColor(color:Int);\n  EndFill;\n}\n\nfunction main(){\n  var actions:Array&lt;GraphicAct&gt;;\n  actions.push(ClearScreen);\n  actions.push(FillColor(0xaaffff));\n  actions.push(MoveTo(100, 100));\n  actions.push(LineTo(200, 100));\n  actions.push(LineTo(100, 200));\n  actions.push(EndFill);\n\n\n  for(act in actions){\n    switch(act){\n       case ClearScreen: // do clear screen here...\n       case MoveTo(x, y): // move position\n       case LineTo(x, y): // move position\n    }\n  }\n}\n</code></pre>\n\n<p>As far as I know, C++ supports only enum entries without parameters, like \"ClearScreen\" and \"EndFill\", but in this case how do I organize commands sequences in C++, like I did in example with graphic commands?</p>\n"}, {"tags": ["java", "python", "c++", "jar"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3548808, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3991f8402011fcb9c77877df4dae4005?s=128&d=identicon&r=PG&f=1", "display_name": "user3548808", "link": "https://stackoverflow.com/users/3548808/user3548808"}, "edited": false, "score": 0, "creation_date": 1441207632, "post_id": 32356909, "comment_id": 52587346, "body": "Thanks for your answer, but I think you understand me wrong, I want to write extensin for python or somehow to access java libs from python."}, {"owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "reply_to_user": {"reputation": 63, "user_id": 3548808, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3991f8402011fcb9c77877df4dae4005?s=128&d=identicon&r=PG&f=1", "display_name": "user3548808", "link": "https://stackoverflow.com/users/3548808/user3548808"}, "edited": false, "score": 0, "creation_date": 1441273395, "post_id": 32356909, "comment_id": 52615626, "body": "There is no direct way to call Java from python. You will need intermediate layer in C/C++"}], "tags": [], "owner": {"reputation": 15567, "user_id": 3656904, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c8dbd58d3b477ad0e5889bc60625e7e8?s=128&d=identicon&r=PG&f=1", "display_name": "talex", "link": "https://stackoverflow.com/users/3656904/talex"}, "is_accepted": false, "score": 0, "last_activity_date": 1441206785, "creation_date": 1441206785, "answer_id": 32356909, "question_id": 32356809, "link": "https://stackoverflow.com/questions/32356809/call-java-lib-class-function-from-python/32356909#32356909", "title": "Call Java lib (class function) from python", "body": "<p>You have basically two option.\nWrap java library into c++ library using JNI or wrap it into server and access to it using tcp (HTTP REST for example) or some kind of named pipes available on your OS.</p>\n"}], "owner": {"reputation": 63, "user_id": 3548808, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3991f8402011fcb9c77877df4dae4005?s=128&d=identicon&r=PG&f=1", "display_name": "user3548808", "link": "https://stackoverflow.com/users/3548808/user3548808"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441206785, "creation_date": 1441206480, "question_id": 32356809, "link": "https://stackoverflow.com/questions/32356809/call-java-lib-class-function-from-python", "title": "Call Java lib (class function) from python", "body": "<p>Recently I wrote C++ extention for python I used <a href=\"http://www.tutorialspoint.com/python/python_further_extensions.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python/python_further_extensions.htm</a> to use c++ class, library as python module.</p>\n\n<p>Now I have to do the same with java instead of c++. I have big libraries written in java. I want to make a bridge for python programmers to use that libraries.</p>\n\n<p>which is the best way to make python access to java libraries.</p>\n"}, {"tags": ["c++", "tray"], "comments": [{"owner": {"reputation": 4283, "user_id": 259543, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4467b34cac116943a05e10841994dbad?s=128&d=identicon&r=PG", "display_name": "alecov", "link": "https://stackoverflow.com/users/259543/alecov"}, "edited": false, "score": 4, "creation_date": 1441206139, "post_id": 32356627, "comment_id": 52586233, "body": "You shouldn&#39;t do it. Why do you think an user would like to have his notification preferences hijacked by an application which thinks itself to be so very special?"}, {"owner": {"reputation": 107, "user_id": 3787025, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nkj4G.jpg?s=128&g=1", "display_name": "LittleDriver", "link": "https://stackoverflow.com/users/3787025/littledriver"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1441206338, "post_id": 32356627, "comment_id": 52586392, "body": "@NathanOliver because i need this demo do it. can you help me solve this problem? i think if i can read control panel settings ,i can get the setting record, so that i can modify it"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1441206735, "post_id": 32356627, "comment_id": 52586705, "body": "It&#39;s not possible quote: <i>When an icon is added to the notification area on Windows 7, it is added to the overflow section of the notification area by default. This area contains notification area icons that are active, but not visible in the notification area. <b>Only the user can promote an icon from the overflow to the notification area</b>, although in certain circumstances the system can temporarily promote an icon into the notification area as a short preview (under one minute).</i> Source: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee330740(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "owner": {"reputation": 107, "user_id": 3787025, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nkj4G.jpg?s=128&g=1", "display_name": "LittleDriver", "link": "https://stackoverflow.com/users/3787025/littledriver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441206151, "creation_date": 1441205948, "last_edit_date": 1441206151, "question_id": 32356627, "link": "https://stackoverflow.com/questions/32356627/set-tray-icon-to-always-display", "title": "Set tray icon to always display?", "body": "<p>I wrote a demo with C++. It's function: to create a tray icon in the Windows 7 toolbar. But the Windows 7 toolbar has two places, hide or show.  In the control panel we can change the notification setting to show or hide.  How can I control the place of tray icon display with C++ ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/kmli8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kmli8.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "msbuild"], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 4010644, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003035352177/picture?type=large", "display_name": "Viacheslav  Dronov", "link": "https://stackoverflow.com/users/4010644/viacheslav-dronov"}, "edited": false, "score": 0, "creation_date": 1441264531, "post_id": 32356822, "comment_id": 52610094, "body": "I know about universal platform. But I think, that maybe there are some tricks and workarounds to use new version of C++ compiler."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 1, "last_activity_date": 1441207061, "last_edit_date": 1441207061, "creation_date": 1441206504, "answer_id": 32356822, "question_id": 32356609, "link": "https://stackoverflow.com/questions/32356609/using-visual-c-2015-toolset-for-building-windows-windows-phone-8-1/32356822#32356822", "title": "Using Visual C++ 2015 toolset for building Windows/Windows Phone 8.1", "body": "<p>You cant use new compilers under Visual Studio 2015 for Windows Phone 8.1 development. Visual Studio is as you stated using v120 platform toolset for 8.1. To use new compilers you need to move to universal apps for Windows 10 project.</p>\n\n<p>For reference, here is a link with answer from MS employee (near bottom in comments):</p>\n\n<p><a href=\"http://blogs.msdn.com/b/vcblog/archive/2015/03/26/visual-c-tools-for-windows-10-technical-preview.aspx\" rel=\"nofollow\">http://blogs.msdn.com/b/vcblog/archive/2015/03/26/visual-c-tools-for-windows-10-technical-preview.aspx</a></p>\n\n<blockquote>\n  <p>Windows 8.1 and Windows Phone 8.1 apps/components are built only using VC++ 2013 toolset (even while using VS2015)</p>\n</blockquote>\n"}], "owner": {"reputation": 879, "user_id": 4010644, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003035352177/picture?type=large", "display_name": "Viacheslav  Dronov", "link": "https://stackoverflow.com/users/4010644/viacheslav-dronov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1441207061, "creation_date": 1441205887, "question_id": 32356609, "link": "https://stackoverflow.com/questions/32356609/using-visual-c-2015-toolset-for-building-windows-windows-phone-8-1", "title": "Using Visual C++ 2015 toolset for building Windows/Windows Phone 8.1", "body": "<p>How can I use visual studio 2015 compiler for compiling code, that targets to Windows/Windows Phone 8.1?<br>\nBy default Windows/Windows Phone 8.1 projects use v120 or v120_wp platform toolsets. But I want to use new version of Microsoft Visual C++ 2015 compiler (that supports noexcept, default move assignment and move constructor, C++ 14x features, etc).</p>\n"}, {"tags": ["c++", "templates", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1441206379, "post_id": 32356706, "comment_id": 52586420, "body": "@\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f Why not? I&#39;m not sure I quite grasp the thrust of the objection. I tried to follow the original design as closely as possible."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1441206460, "post_id": 32356706, "comment_id": 52586475, "body": "Because you can just use <code>T const&amp;</code> instead, and have <code>log_entry(logger, name, ret);</code> instead."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1441206539, "post_id": 32356706, "comment_id": 52586531, "body": "@\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f I could. As I said, I tried to stay true to the original design."}, {"owner": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1441206748, "post_id": 32356706, "comment_id": 52586718, "body": "So if the original design does something inconvenient and possibly harmful (passing an object by non-cost pointers so that it can be modified, while no modification is required), you try to stay true to it?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 69802, "user_id": 493122, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/1f90ae01c2e24801c2df9189179b0ccd?s=128&d=identicon&r=PG", "display_name": "Shoe", "link": "https://stackoverflow.com/users/493122/shoe"}, "edited": false, "score": 0, "creation_date": 1441206967, "post_id": 32356706, "comment_id": 52586885, "body": "@\u028e\u01dd\u0279\u025f\u025f\u025f\u01dd\u017f While not perfect, I don&#39;t see major, show-stopping flaws with the current design. I didn&#39;t want to unnecessarily confuse matters by a side discussion. If you feel sufficiently strongly about the issue, please feel free to add a different answer."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1441207774, "post_id": 32356706, "comment_id": 52587445, "body": "Well, you are missing a <code>decay_t</code>.  <code>ret</code> could be <code>int&amp;</code>, which won&#39;t compile above."}, {"owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "edited": false, "score": 0, "creation_date": 1441220400, "post_id": 32356706, "comment_id": 52594942, "body": "Thank you all for a decent solution and for the side discussion.  As a C++11 newbie the additional ideas will be handy.  The *rc was due to my previous incarnation writing things in C."}], "tags": [], "owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "is_accepted": true, "score": 3, "last_activity_date": 1441206172, "creation_date": 1441206172, "answer_id": 32356706, "question_id": 32356592, "link": "https://stackoverflow.com/questions/32356592/c-template-auto-parameter/32356706#32356706", "title": "c++ template auto parameter", "body": "<p>Something along these lines, perhaps:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass LogEntry {\npublic:\n  LogEntry(Log *logger, const char* func, T* rc);\n};\n\n#define LOG_ENTRY(name, ret) \\\nLogEntry&lt;decltype(ret)&gt; log_entry(logger, name, &amp;ret);\n</code></pre>\n\n<p>Filling in the details of <code>LogEntry</code>s implementation is left as an exercise for the reader.</p>\n"}, {"tags": [], "owner": {"reputation": 148, "user_id": 4235856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsZg8.jpg?s=128&g=1", "display_name": "stellarpower", "link": "https://stackoverflow.com/users/4235856/stellarpower"}, "is_accepted": false, "score": 0, "last_activity_date": 1441214001, "creation_date": 1441214001, "answer_id": 32359259, "question_id": 32356592, "link": "https://stackoverflow.com/questions/32356592/c-template-auto-parameter/32359259#32359259", "title": "c++ template auto parameter", "body": "<p>I was going to paste you a personal logging system I used in a project but it's quite badly tied into the system and Qt. Igor's answer looks good, I would add that you can use the (I think possibly g++-specific) __FUNC__ (or __PRETTY_FUNCTION__) macros to avoid having to type the function name each time. Another possibility is to define a RETURN macro that uses SFINAE to detect if the return type can be streamed to cout/cerr, and if so, does this and then returns the value form the function proper. That can be done like so:</p>\n\n<pre><code>#ifdef SUPPORTS_CPP_11\n\ntemplate&lt;class T&gt; struct ValuetoString{ //SFINAE class to check if a value type can be converted implicitly to\n    // a printable string, and if so, print() returns a string for a value of type T\n    typedef char Yes; \n    typedef struct{ char a[2]; } OStream;\n\n    template&lt;typename J&gt; static OStream Test( //For types that output to std::ostream\n        typename UnReference&lt;decltype(std::declval&lt;std::ostream&amp;&gt;() &lt;&lt; std::declval&lt;J&gt;())&gt;::Type *param);\n\n    template&lt;typename J&gt; static UnPrintable Test(...); //Always prever above if it be well-formed.\n\n    template&lt;bool ostream, class Dummy&gt; struct print;\n    template&lt;class Dummy&gt; struct print&lt;true, Dummy&gt;{\n        static inline std::string ret(T Value){\n            std::ostringstream a;  a &lt;&lt; Value; return a.str(); }\n    };\n    template&lt;class Dummy&gt; struct print&lt;false, Dummy&gt;{\n        static inline std::string ret(const T &amp;Value) {\n            return std::string(BasicTypeName(T) + \" is an unprintable type\"); }\n    };\n    static inline std::string Print(const T &amp;Value){\n        return print&lt;(sizeof(Test&lt;T&gt;(NULL, NULL)) == sizeof(OStream)), int&gt;::ret(Value); }\n};\n\ntemplate&lt;typename T&gt; inline std::string FriendlyInspect(T val, const char *name){\n    return std::string(FriendlyTypeName(val, name) + \" with value \" + ValuetoString&lt;T&gt;::print(val) );\n}\ntemplate&lt;typename T&gt; inline std::string FriendlyInspect(T* val, const char *name){\n    return std::string(FriendlyTypeName(val, name) + \" with value \" + ValuetoString&lt;T&gt;::print(val) );\n}\n\n#else\ntemplate&lt;typename T&gt; struct ValuetoString{\n    static std::string Print(T Value) {return std::string() += FriendlyTypeName&lt;T&gt;(Value,\"\") += \" is an unprintable type\";}\n};\n#endif //SUPPORTS_CPP11\n</code></pre>\n\n<p>If you call FriendlyInspect(9) for example, it will output the typename, 'int', and the value '9', but if you call FriendlyInspect(MyObjectThatCantBeStreamed), it won't generate a compile-time error but will instead just print the typename.\nI modified it from an original, I don't know if Dummy is still needed but it's doing no harm. In this case FriendlyTypeName uses a g++ function whose exact name I can't remember to demangle the type_info::name() on g++ or on other platforms just leaves it alone, and UnReference just removes the reference from a type.</p>\n"}], "owner": {"reputation": 1009, "user_id": 1442731, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/32ff845da1e897b7c1f8b38f84824d2c?s=128&d=identicon&r=PG", "display_name": "wdtj", "link": "https://stackoverflow.com/users/1442731/wdtj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 32356706, "answer_count": 2, "score": 0, "last_activity_date": 1441214001, "creation_date": 1441205858, "question_id": 32356592, "link": "https://stackoverflow.com/questions/32356592/c-template-auto-parameter", "title": "c++ template auto parameter", "body": "<p>I am trying to write a logging routine that (almost) automatically traces the entry and exit to a method.  Something like:</p>\n\n<pre><code>int rc=0;\nLOG_ENTRY(\"MyFunction()\", rc);\n</code></pre>\n\n<p>LOG_ENTRY is a macro that defines a local object.  When the object is created it will call the logger with \"Entry MyFunction()\" and when the object is destroyed at the end of the traced method, the destructor will issue \"Exit MyFunction() returned 0\" where 0 is the value of rc on exit.</p>\n\n<p>Now I have most of this working using c++ except that the constructor for the class for the logging object has to be defined for every type of return value:</p>\n\n<pre><code>class IM_EX_CTIBASE LogEntry\n{\n    Log *logger;\n    const char* func;\n    void *rc;\npublic:\n    LogEntry(Log *logger, const char* func, int *rc)\n    {\n        this-&gt;logger=logger;\n        this-&gt;func=func;\n        this-&gt;rc=rc;\n        logger-&gt;log(\"Entry \" &lt;&lt; func);\n    }\n    ~LogEntry()\n    {\n        logger-&gt;log(\"Exit \" &lt;&lt; func &lt;&lt; *rc);\n    }\n}\n</code></pre>\n\n<p>(please forgive any typos, this is a simplified version of the actual code.)</p>\n\n<p>Now I was hoping to rewrite this as a template, where the type rc could be externally defined.  I was thinking that auto would be an excellent possibility for defining rc on the constructor, but auto does not work there.</p>\n\n<p>Since the compiler already knows what the type is, why do I need to define it here.  the log() (which accepts a stream) should already know how to use rc.</p>\n\n<p>I've looked at many alternatives, but nothing seems to be what I want.  Someone suggested \"do it like make_pair does\", but after digging into that it appears to create a function template which I don't think you can use in a constructor.</p>\n\n<p>Anyone have any ideas?</p>\n"}, {"tags": ["c++", "c", "linux", "embedded", "esp8266"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1441205857, "post_id": 32356326, "comment_id": 52586016, "body": "You could replace repeatedly grepping with a one-line shell script."}], "answers": [{"comments": [{"owner": {"reputation": 1536, "user_id": 688916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/182b56917b81c25cafc910718e0500a0?s=128&d=identicon&r=PG", "display_name": "supergiox", "link": "https://stackoverflow.com/users/688916/supergiox"}, "edited": false, "score": 1, "creation_date": 1441275564, "post_id": 32356402, "comment_id": 52617008, "body": "Very handy! Just to know, what is the use of <code>&#47;dev&#47;null</code> ?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 1536, "user_id": 688916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/182b56917b81c25cafc910718e0500a0?s=128&d=identicon&r=PG", "display_name": "supergiox", "link": "https://stackoverflow.com/users/688916/supergiox"}, "edited": false, "score": 1, "creation_date": 1441276320, "post_id": 32356402, "comment_id": 52617474, "body": "If you don&#39;t add the <code>&#47;dev&#47;null</code> then <code>grep</code> thinks it&#39;s just grepping a single file and doesn&#39;t list the file name for any matches. I think you can also achieve the same effect by passing the <code>-l</code> switch to <code>grep</code>, but old habits die hard."}, {"owner": {"reputation": 10306, "user_id": 1142045, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7d781e8275bc700f0d69b790c9352d68?s=128&d=identicon&r=PG", "display_name": "TerryE", "link": "https://stackoverflow.com/users/1142045/terrye"}, "edited": false, "score": 1, "creation_date": 1441368137, "post_id": 32356402, "comment_id": 52663281, "body": "Or even just <code>grep foo $(find &#47;path&#47;to&#47;SDK -name \\*.h)</code>"}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1441205391, "creation_date": 1441205391, "answer_id": 32356402, "question_id": 32356326, "link": "https://stackoverflow.com/questions/32356326/find-needed-header-file/32356402#32356402", "title": "Find needed header file", "body": "<p>I would normally just use <code>find</code> + <code>grep</code> for this, e.g. to find the definition of <code>foo</code>:</p>\n\n<pre><code>$ find /path/to/SDK -name \\*.h -exec grep foo {} /dev/null \\;\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 688916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/182b56917b81c25cafc910718e0500a0?s=128&d=identicon&r=PG", "display_name": "supergiox", "link": "https://stackoverflow.com/users/688916/supergiox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 32356402, "answer_count": 1, "score": 0, "last_activity_date": 1473704885, "creation_date": 1441205180, "last_edit_date": 1473704885, "question_id": 32356326, "link": "https://stackoverflow.com/questions/32356326/find-needed-header-file", "title": "Find needed header file", "body": "<p>I'm programming in <code>C</code> a device (<code>ESP8266</code>) whose documentation explains each function or data structure of the SDK, but doesn't tell where to locate the corresponding header file, so every time I need to search them using <code>grep</code> and annoying regex.</p>\n\n<p>Which is in these cases the best/common practice to \"browse\" the SDK and find headers?\nI usually use <code>nano</code> and <code>Sublime Text</code> as editor (on GNU/Linux and Mac OS X) but any other solution are appreciated.</p>\n"}, {"tags": ["c++", "compilation"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1441205617, "post_id": 32356298, "comment_id": 52585836, "body": "You may want to look at CMake which generates projects for many different os / compiler / ides from a CMakeLists.txt file that you create."}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 1, "creation_date": 1441205723, "post_id": 32356298, "comment_id": 52585931, "body": "Cmake, Makefiles, etc. are irrelevant. I think you&#39;d be more concerned with using libraries that are cross platform and not specific to Windows, Mac, etc. Cmake can make that easier, but it&#39;s not CMake that makes it cross platform."}, {"owner": {"reputation": 187, "user_id": 1766555, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ae6520559bde5402280b7e6ddba918f?s=128&d=identicon&r=PG", "display_name": "user1766555", "link": "https://stackoverflow.com/users/1766555/user1766555"}, "edited": false, "score": 0, "creation_date": 1441205736, "post_id": 32356298, "comment_id": 52585937, "body": "But I notice other projects do not use CMake. Why is that?"}, {"owner": {"reputation": 3270, "user_id": 3059385, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/dc876278926d67b3da29594601fdc82a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schneider", "link": "https://stackoverflow.com/users/3059385/christopher-schneider"}, "edited": false, "score": 0, "creation_date": 1441205781, "post_id": 32356298, "comment_id": 52585963, "body": "You may want to look into Cygwin: <a href=\"https://www.cygwin.com/\" rel=\"nofollow noreferrer\">cygwin.com</a>"}, {"owner": {"reputation": 187, "user_id": 1766555, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ae6520559bde5402280b7e6ddba918f?s=128&d=identicon&r=PG", "display_name": "user1766555", "link": "https://stackoverflow.com/users/1766555/user1766555"}, "edited": false, "score": 0, "creation_date": 1441205904, "post_id": 32356298, "comment_id": 52586051, "body": "That doesn&#39;t make it cross-platform for things such as Android or Mac though."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1441206303, "post_id": 32356298, "comment_id": 52586361, "body": "Most compilers have a command line version.  The command line version is used when building cross-platform.  You will need to open a terminal or console window and run CMake or other building utility."}, {"owner": {"reputation": 187, "user_id": 1766555, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ae6520559bde5402280b7e6ddba918f?s=128&d=identicon&r=PG", "display_name": "user1766555", "link": "https://stackoverflow.com/users/1766555/user1766555"}, "edited": false, "score": 0, "creation_date": 1441206604, "post_id": 32356298, "comment_id": 52586575, "body": "Why do popular projects like VLC or ffmpeg not use CMake?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 2, "creation_date": 1441207528, "post_id": 32356298, "comment_id": 52587275, "body": "because cmake is new and vlc, ffmpeg are old"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1441209349, "post_id": 32356298, "comment_id": 52588489, "body": "At the same I just read an announcement that CMake hit its 15th birthday recently. Although I agree it was not popular until recently."}], "owner": {"reputation": 187, "user_id": 1766555, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/4ae6520559bde5402280b7e6ddba918f?s=128&d=identicon&r=PG", "display_name": "user1766555", "link": "https://stackoverflow.com/users/1766555/user1766555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441206410, "creation_date": 1441205107, "last_edit_date": 1441206410, "question_id": 32356298, "link": "https://stackoverflow.com/questions/32356298/c-c-cross-platform-compilation", "title": "C/C++ cross-platform compilation", "body": "<p>How do I make my program cross-platform? I understand that each operating system has their own API calls and you would use #ifdef, but I don't understand how you can make it compilable on each platform. For instance Linux uses Makefile but I don't think Windows or Mac does. I was recommended qmake and cmake, but it doesn't seem to be widely used in github projects. I usually see them having ./configure and a Makefile instead. Two projects that pique my curiosity on how they're cross-platform are VLC and ffmpeg.</p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1441205886, "post_id": 32356267, "comment_id": 52586035, "body": "you can initialize in other file, but you have to use exactly the same type."}], "answers": [{"tags": [], "owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "is_accepted": true, "score": 4, "last_activity_date": 1441209710, "last_edit_date": 1441209710, "creation_date": 1441205309, "answer_id": 32356370, "question_id": 32356267, "link": "https://stackoverflow.com/questions/32356267/extern-reference-initialization/32356370#32356370", "title": "Extern reference initialization", "body": "<p>in cpp file:</p>\n\n<pre><code>static Derived instance_object;\nPureVirtualBase &amp;instance = instance_object;\n</code></pre>\n\n<p>This ensures that the type of <code>instance</code> matches exactly - i.e. <code>PureVirtual&amp;</code></p>\n"}, {"tags": [], "owner": {"reputation": 1956, "user_id": 878915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0870e5d6b30b12a448c8b0a2fe1f20?s=128&d=identicon&r=PG", "display_name": "shargors", "link": "https://stackoverflow.com/users/878915/shargors"}, "is_accepted": false, "score": 3, "last_activity_date": 1441205313, "creation_date": 1441205313, "answer_id": 32356376, "question_id": 32356267, "link": "https://stackoverflow.com/questions/32356267/extern-reference-initialization/32356376#32356376", "title": "Extern reference initialization", "body": "<p>The types for the definition and declaration of instance should match exactly.  It seems like you need getInstance() kind of function for what you are trying to do:</p>\n\n<pre><code>Base&amp; getInstance() \n{\n    return instance;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2917247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dadfee356bc9f5d6fcf0e1b8bc6a6f8f?s=128&d=identicon&r=PG&f=1", "display_name": "Artem", "link": "https://stackoverflow.com/users/2917247/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 32356370, "answer_count": 2, "score": 1, "last_activity_date": 1441209710, "creation_date": 1441205021, "last_edit_date": 1441205280, "question_id": 32356267, "link": "https://stackoverflow.com/questions/32356267/extern-reference-initialization", "title": "Extern reference initialization", "body": "<p><em>one.cpp</em></p>\n\n<pre><code>extern PureVirtualBase &amp;instance;\nvoid foo()\n{\n    instance.click();\n}\n</code></pre>\n\n<p><em>two.cpp</em></p>\n\n<pre><code>Derived instance;\n</code></pre>\n\n<p>Can I initialize reference in other file? I get <code>conflicting declaration</code> with that code.</p>\n"}, {"tags": ["c++", "pointers", "reference"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 4928207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/122e2222eb8cace8c9d2e67ea65d8c47?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Jansen", "link": "https://stackoverflow.com/users/4928207/mark-jansen"}, "is_accepted": false, "score": 1, "last_activity_date": 1441204618, "creation_date": 1441204618, "answer_id": 32356120, "question_id": 32356014, "link": "https://stackoverflow.com/questions/32356014/expression-must-have-pointer-to-function-type/32356120#32356120", "title": "expression must have (pointer-to-) function type", "body": "<p>You have also used <code>min</code> as a variable name, and since you have put all symbols from the <code>std</code> namespace in the global namespace with <code>using namespace std</code>, you think that you can use <code>min</code> without prefixing it with <code>std::</code>.\nBut because there is also a local variable called min, that takes precedence.</p>\n\n<p>tldr: Don't use <code>using namespace std</code>, and don't name local variables like global functions.</p>\n"}, {"tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 3, "last_activity_date": 1441204768, "creation_date": 1441204768, "answer_id": 32356177, "question_id": 32356014, "link": "https://stackoverflow.com/questions/32356014/expression-must-have-pointer-to-function-type/32356177#32356177", "title": "expression must have (pointer-to-) function type", "body": "<p>You have two issues:</p>\n\n<p>The variable called <code>min</code> shadows the function in the <code>std</code> namespace. You should generally not write <code>using namespace std;</code> for exactly this reason.</p>\n\n<p><code>std::min</code> doesn't take three arguments to return the smallest, just two. You can chain calls to it, or in C++11 you can use the initializer-list overload:</p>\n\n<pre><code>std::min(std::min(4,5),6);\n//or\nstd::min({4,5,6});\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4311587, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6e4b9ce08d54fb58b987c0d055acd34b?s=128&d=identicon&r=PG", "display_name": "Moath Wafeeq", "link": "https://stackoverflow.com/users/4311587/moath-wafeeq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2191, "favorite_count": 0, "accepted_answer_id": 32356177, "answer_count": 2, "score": -2, "last_activity_date": 1441204768, "creation_date": 1441204338, "question_id": 32356014, "link": "https://stackoverflow.com/questions/32356014/expression-must-have-pointer-to-function-type", "title": "expression must have (pointer-to-) function type", "body": "<p>Objective : this code calculate the distances between numbers(every number is a location of any city) i was written the code but when i use the \"min\" function included in \"algorithm\" library the \" expression must have  (pointer-to-) function type  \" error will occur.</p>\n\n<p>this is a code : </p>\n\n<pre><code>    #include&lt;iostream&gt;\n#include&lt;algorithm&gt;\nusing namespace std;\nint main(){\n    int noc, ele, min, max,arr[100];\n\n    cin &gt;&gt; noc;\n\n    for(int i = 0;i &lt; noc;i++)\n        cin &gt;&gt; arr[i];\n\n\n\n    for(int i = 0;i &lt; noc;i++){\n        if(i == 0)\n            cout &lt;&lt; abs(arr[0] - arr[1]) &lt;&lt; \"  \" &lt;&lt; abs(arr[0] - arr[noc - 1]) &lt;&lt; endl;\n        else if(i == noc - 1)\n            cout &lt;&lt; abs(arr[noc - 1] - arr[noc - 2]) &lt;&lt; \"  \" &lt;&lt; abs(arr[noc - 1] - arr[0]);\n        else{\n            min(4 ,5 ,6);\n        }\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sdl", "typedef", "shared-ptr"], "comments": [{"owner": {"reputation": 1117, "user_id": 2451677, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a2d620cdfad7a1ba7d00c732db0d058?s=128&d=identicon&r=PG", "display_name": "grisha", "link": "https://stackoverflow.com/users/2451677/grisha"}, "edited": false, "score": 0, "creation_date": 1441203956, "post_id": 32355788, "comment_id": 52584527, "body": "Deleter type is not the part of <code>std::shared_ptr</code>. You should specify deleter  every time you create an instance of <code>std::shared_ptr</code>"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "reply_to_user": {"reputation": 1117, "user_id": 2451677, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a2d620cdfad7a1ba7d00c732db0d058?s=128&d=identicon&r=PG", "display_name": "grisha", "link": "https://stackoverflow.com/users/2451677/grisha"}, "edited": false, "score": 0, "creation_date": 1441204105, "post_id": 32355788, "comment_id": 52584643, "body": "Thank you. The Idea of using a Factory is a very nice idea in the first answer."}], "answers": [{"comments": [{"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1441204032, "post_id": 32355867, "comment_id": 52584580, "body": "Okay, so it wont be possible using typedef? The Factory is a very good idea! Thanks!"}, {"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "reply_to_user": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1441204089, "post_id": 32355867, "comment_id": 52584630, "body": "nope, typedef redefines <i>types</i>, you want to redefine <i>functionality</i> - use function"}, {"owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "edited": false, "score": 0, "creation_date": 1441204139, "post_id": 32355867, "comment_id": 52584656, "body": "So I&#39;ll use the factory. Didnt come to my mind for some reason :). Thanks SO!"}, {"owner": {"reputation": 14998, "user_id": 212378, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/185aae2d842026d2eefa7528b00b394b?s=128&d=identicon&r=PG", "display_name": "Alexis Wilke", "link": "https://stackoverflow.com/users/212378/alexis-wilke"}, "edited": false, "score": 0, "creation_date": 1596491994, "post_id": 32355867, "comment_id": 111823187, "body": "The big problem with a factory in this case is that someone who doesn&#39;t know they have to  use it end up creating pointers without the correct deleter. That&#39;s a big issue, I think."}], "tags": [], "owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "is_accepted": true, "score": 6, "last_activity_date": 1441204161, "last_edit_date": 1441204161, "creation_date": 1441203991, "answer_id": 32355867, "question_id": 32355788, "link": "https://stackoverflow.com/questions/32355788/stdshared-ptr-typedef-with-custom-deleter/32355867#32355867", "title": "std::shared_ptr: typedef with custom deleter", "body": "<p>Custom deleter is passed to <code>shared_ptr</code> in constructor, so it can't be done using <code>typedef</code> (deleter is not part of type of instantiated <code>shared_ptr</code>).</p>\n\n<p>It could be done for <code>unique_ptr</code> (where deleter is part of type).</p>\n\n<p>My suggestion: create factory method that will produce <code>SDLWindowPtr</code> (assigning them proper deleter). Something like <code>std::make_shared</code> but dedicated for your system (ex. <code>createSDLWindow</code> ?).</p>\n"}, {"tags": [], "owner": {"reputation": 2903, "user_id": 2999490, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b7f26ca67a6c76bc65e02045892c6a0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/2999490/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1441207647, "creation_date": 1441207647, "answer_id": 32357218, "question_id": 32355788, "link": "https://stackoverflow.com/questions/32355788/stdshared-ptr-typedef-with-custom-deleter/32357218#32357218", "title": "std::shared_ptr: typedef with custom deleter", "body": "<p>In fact you have to pass the deleter on cronstructor of <code>shared_ptr</code>, follows an example:</p>\n\n<pre><code>std::shared_ptr&lt;MyObj&gt; ptr(CreateMyObj(), std::ptr_fun(FreeMyObj));\n</code></pre>\n\n<p>You could create a factory function to allocate memory for SDLWindowPtr, and other function to free it, if you are working with class, you can call the destructor of the class.</p>\n"}], "owner": {"reputation": 3975, "user_id": 3560981, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/8fa10e8d564dd93ece697b0aebe689dd?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhoegger", "link": "https://stackoverflow.com/users/3560981/nidhoegger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 898, "favorite_count": 0, "closed_date": 1441321827, "accepted_answer_id": 32355867, "answer_count": 2, "score": 4, "last_activity_date": 1441207647, "creation_date": 1441203815, "question_id": 32355788, "link": "https://stackoverflow.com/questions/32355788/stdshared-ptr-typedef-with-custom-deleter", "closed_reason": "Duplicate", "title": "std::shared_ptr: typedef with custom deleter", "body": "<p>I am using SDL2 to develop a C++ application and want to use <code>shared_ptr</code> to hold the pointer stuff. So i do e.g. this:</p>\n\n<pre><code>typedef std::shared_ptr&lt;SDL_Window&gt; SDLWindowPtr;\n</code></pre>\n\n<p>and i need to use a custom deleter on this whole thing. Is it possible to include this within the typedef? If yes, how? The deleting function is called <code>SDL_DestroyWindow</code>. If not, how can i make the <code>shared_ptr</code> use <code>SDL_DestroyWindow</code> as custom deletion function?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "return"], "comments": [{"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1441203423, "post_id": 32355603, "comment_id": 52584166, "body": "It makes no difference whether you put <code>return;</code> at the end of a function returning <code>void</code>. This has nothing to do with recursion, it is always true."}, {"owner": {"reputation": 5784, "user_id": 4719550, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dfe70288972eb3c6af2f1d27de9b1773?s=128&d=identicon&r=PG", "display_name": "Tarod", "link": "https://stackoverflow.com/users/4719550/tarod"}, "edited": false, "score": 0, "creation_date": 1441203492, "post_id": 32355603, "comment_id": 52584213, "body": "Mmm. In that code, the last <code>return;</code> is never reached, isn&#39;t it? But in any case, that sentence is no necessary in <code>void</code> functions."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1441203572, "post_id": 32355603, "comment_id": 52584274, "body": "See <a href=\"http://stackoverflow.com/q/18638286/1708801\">what is the purpose of return in the void function</a>"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1441204463, "post_id": 32355603, "comment_id": 52584908, "body": "Re updated question, falling off the end of a value returning function is undefined behavior see <a href=\"http://stackoverflow.com/q/20614282/1708801\">this question</a> ... because it is undefined behavior no diagnostic is required."}, {"owner": {"reputation": 65, "user_id": 2546419, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/5e9c6e0240479d398d91935b2fb7f5db?s=128&d=identicon&r=PG", "display_name": "user2546419", "link": "https://stackoverflow.com/users/2546419/user2546419"}, "reply_to_user": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1441204915, "post_id": 32355603, "comment_id": 52585281, "body": "@ShafikYaghmour I didn&#39;t get it.What does undefined behaviour mean.And how does it affect the program? I mean its not a compiler error right?"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1441205339, "post_id": 32355603, "comment_id": 52585631, "body": "Undefined behavior is bad, it basically means unpredictable behavior, see the <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">wikipedia entry</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1441206092, "post_id": 32355603, "comment_id": 52586193, "body": "If there was no compiler error when you left out the value return your compiler is misbehaving, or you were ignoring its warnings."}, {"owner": {"reputation": 65, "user_id": 2546419, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/5e9c6e0240479d398d91935b2fb7f5db?s=128&d=identicon&r=PG", "display_name": "user2546419", "link": "https://stackoverflow.com/users/2546419/user2546419"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1441206985, "post_id": 32355603, "comment_id": 52586903, "body": "@molbdnilo Can you check this out please :<a href=\"http://geeksquiz.com/binary-search/\" rel=\"nofollow noreferrer\">link</a>.The binary search program in it,first one. If I remove the <code>return</code> statements from the recursive function calls to binarySearch again the program gives a wrong answer but there is no compiler error. I am using Codeblocks IDE."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1441204382, "post_id": 32355651, "comment_id": 52584851, "body": "There is no code path that would reach beyond the call to <code>CountDown(N-1)</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1441204461, "post_id": 32355651, "comment_id": 52584906, "body": "well, your answer is of course still correct, I just thought one might misunderstand it"}, {"owner": {"reputation": 65, "user_id": 2546419, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/5e9c6e0240479d398d91935b2fb7f5db?s=128&d=identicon&r=PG", "display_name": "user2546419", "link": "https://stackoverflow.com/users/2546419/user2546419"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1441204637, "post_id": 32355651, "comment_id": 52585064, "body": "@tobi303 why not? I mean when (n==0) case would be done and that function will return to the function  CountDown(1) then the return; statement would be executed right?After the calling CountDown(0) part."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1441204771, "post_id": 32355651, "comment_id": 52585174, "body": "hm yes you are right. I faster in writing than thinking, my mistake"}], "tags": [], "owner": {"reputation": 18466, "user_id": 477563, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/07a89fb7b2fd8ece1e9e39e95e004a36?s=128&d=identicon&r=PG", "display_name": "Mr. Llama", "link": "https://stackoverflow.com/users/477563/mr-llama"}, "is_accepted": false, "score": 4, "last_activity_date": 1441203441, "creation_date": 1441203441, "answer_id": 32355651, "question_id": 32355603, "link": "https://stackoverflow.com/questions/32355603/using-return-in-recursion-functions/32355651#32355651", "title": "Using return; in recursion functions", "body": "<p>For <code>void</code> return functions, no it doesn't make a difference.  However, if the function is expected to return anything <em>but</em> <code>void</code>, then you'll need to include a valid <code>return</code> for all code paths.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1441203501, "creation_date": 1441203501, "answer_id": 32355675, "question_id": 32355603, "link": "https://stackoverflow.com/questions/32355603/using-return-in-recursion-functions/32355675#32355675", "title": "Using return; in recursion functions", "body": "<p>At the end of a <code>void</code> function control is automatically returned to the calling function so you do not need a <code>return;</code> at the end.  <code>return</code> in a void function is used to exit the function before it normally would like in your if statement.</p>\n\n<p>If you have a function that is supposed to return a value and does not then that is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\"><strong>undefined behavior</strong></a>.</p>\n"}], "owner": {"reputation": 65, "user_id": 2546419, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/5e9c6e0240479d398d91935b2fb7f5db?s=128&d=identicon&r=PG", "display_name": "user2546419", "link": "https://stackoverflow.com/users/2546419/user2546419"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1441204293, "creation_date": 1441203323, "last_edit_date": 1441204293, "question_id": 32355603, "link": "https://stackoverflow.com/questions/32355603/using-return-in-recursion-functions", "title": "Using return; in recursion functions", "body": "<pre><code>#include &lt;stdio&gt;\nusing std::cout;\nvoid CountDown(int N) {\n  if(N == 0) {\n    return;\n  }\n  cout &lt;&lt; N;\n  CountDown(N-1);  \n  //return;\n}\n</code></pre>\n\n<p>In the code the output I get when return is commented is same as when not commented.</p>\n\n<p>What I want to ask is whether it makes a difference if I use a <code>return;</code> statement at the end of the function (since it would implicitly return to the function, which called it, at the end of the braces)?</p>\n\n<p>Another question:\nWhat if had a function with a return type instead of void here.\nI tried it with a function. The value was wrong.But there was no compiler error.\nSo using simply a <code>return;</code> makes no difference right? Except when I want to prematurely end the function right?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1441202529, "post_id": 32355284, "comment_id": 52583511, "body": "Instead of using e.g. <code>array[i][j]</code> use <code>array[j][i]</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1441202545, "post_id": 32355284, "comment_id": 52583522, "body": "Do it with loops, just loop over y in the outer loop instead of x."}, {"owner": {"reputation": 1668, "user_id": 5085551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAUCW.jpg?s=128&g=1", "display_name": "VB_overflow", "link": "https://stackoverflow.com/users/5085551/vb-overflow"}, "edited": false, "score": 0, "creation_date": 1441205072, "post_id": 32355284, "comment_id": 52585410, "body": "Please post the current code you have for row-major and the code you have already tried for column-major if you want people to help you (and use the tags to format it for proper display). Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 2, "last_activity_date": 1441207610, "creation_date": 1441207610, "answer_id": 32357204, "question_id": 32355284, "link": "https://stackoverflow.com/questions/32355284/how-to-store-values-in-a-2-d-array-in-column-major-order-in-c/32357204#32357204", "title": "How to store values in a 2-D array in column major order in c++?", "body": "<h2>Background</h2>\n\n<p>Row major and column major ordering usually applies when using a 1 dimensional array to represent a two-dimensional array.  Fundamentally, all of memory is a one dimensional array.  </p>\n\n<h2>Row Major</h2>\n\n<p>The location of an element in a one dimensional array can be found using the equation:  </p>\n\n<pre><code>location_index = (row_index * columns_per_row) + column_index;  \n</code></pre>\n\n<h2>Column Major</h2>\n\n<p>Similarly, the location index equation for column major is:  </p>\n\n<pre><code>location_index = (column_index * rows_per_column) + row_index;\n</code></pre>\n\n<h2>Array View</h2>\n\n<p>This means that the 1 dimensional array would be organized like the picture below:  </p>\n\n<pre><code>Row Major:      R0 C0   R0 C1   R1 C0   R1 C1   ...\n              +-------+-------+-------+-------+-------+  \n              |       |       |       |       |       |  \n              +-------+-------+-------+-------+-------+  \nColumn Major:   C0 R1   C0 R1   C1 R0   C1 C1\n</code></pre>\n\n<p>Where R# is the row index and C# is the column index.</p>\n\n<h2>Syntax</h2>\n\n<p>For row major the array is declared as:  </p>\n\n<pre><code>Data_Type array[MAXIMUM_ROWS][MAXIMUM_COLUMNS];\n</code></pre>\n\n<p>and column major:  </p>\n\n<pre><code>Data_Type array[MAXIMUM_COLUMNS][MAXIMUM_ROWS];\n</code></pre>\n\n<h2>Storing Data:</h2>\n\n<p>For row-major:</p>\n\n<pre><code>array[row][column] = value;\n</code></pre>\n\n<p>For column-major:</p>\n\n<pre><code>array[column][row] = value;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5292758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051b6f8d73782925f11f9fd965b42b68?s=128&d=identicon&r=PG&f=1", "display_name": "Danie Melchizedek", "link": "https://stackoverflow.com/users/5292758/danie-melchizedek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1441207610, "creation_date": 1441202456, "question_id": 32355284, "link": "https://stackoverflow.com/questions/32355284/how-to-store-values-in-a-2-d-array-in-column-major-order-in-c", "title": "How to store values in a 2-D array in column major order in c++?", "body": "<p>I know to store values in an array in row-major order. I'll do it using loops.\nBut I don't know to store values in column-major order in c++. Please show me the code sample?. I searched the internet, but i didn't find the proper code sample. </p>\n"}, {"tags": ["c++", "coordinates"], "comments": [{"owner": {"reputation": 46235, "user_id": 2541573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z1qtP.png?s=128&g=1", "display_name": "jub0bs", "link": "https://stackoverflow.com/users/2541573/jub0bs"}, "edited": false, "score": 5, "creation_date": 1441202436, "post_id": 32355216, "comment_id": 52583446, "body": "Careful with floating-point numbers and equality tests..."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "reply_to_user": {"reputation": 46235, "user_id": 2541573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Z1qtP.png?s=128&g=1", "display_name": "jub0bs", "link": "https://stackoverflow.com/users/2541573/jub0bs"}, "edited": false, "score": 0, "creation_date": 1441202678, "post_id": 32355216, "comment_id": 52583621, "body": "In addition to @Jubobs comment, I suggest removing points that are a within a given distance from the point, in the L^2 norm."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1441202807, "post_id": 32355216, "comment_id": 52583709, "body": "Are you allowed to manipulate the order of the coordinates, for example by sorting them? Are they guaranteed to always be three numbers below 10, with three digits following the decimal?"}, {"owner": {"reputation": 255, "user_id": 3457685, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74572be34f856bb0c0e8d5ada54e10a3?s=128&d=identicon&r=PG&f=1", "display_name": "leJon", "link": "https://stackoverflow.com/users/3457685/lejon"}, "edited": false, "score": 0, "creation_date": 1441202840, "post_id": 32355216, "comment_id": 52583738, "body": "I give a +1 to Erik and Jubobs. As output you intend to have only the five first lines? You just want to remove the duplicated coordinates ?"}], "answers": [{"tags": [], "owner": {"reputation": 1688, "user_id": 2711645, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4ead722b48b0a9b070c81b3a53a8c386?s=128&d=identicon&r=PG&f=1", "display_name": "Cantfindname", "link": "https://stackoverflow.com/users/2711645/cantfindname"}, "is_accepted": false, "score": 1, "last_activity_date": 1441203931, "last_edit_date": 1441203931, "creation_date": 1441203405, "answer_id": 32355631, "question_id": 32355216, "link": "https://stackoverflow.com/questions/32355216/c-remove-repeated-numbers-in-a-matrix/32355631#32355631", "title": "C++: Remove repeated numbers in a matrix", "body": "<p>A very simple solution would be to treat each line as a string and use a set of strings. As you traverse the file line-wise, you check if the current line exists in the set and if not, you insert and print it.\nComplexity: O(nlogn), extra memory needed: almost the same as your input file in the worst case</p>\n\n<p>With the same complexity and exactly the worst case memory consumption as the previous solution, you can load the file in memory, sort it line-wise, and then easily skip duplicates while printing. The same can be done inside the file if you are allowed to re-order it, and this way you need very little extra memory, but be much slower.</p>\n\n<p>If memory and storage is an issue (I'm assuming since you can't duplicate the file), you can use the simple method of comparing the current line with all previous lines before printing, with O(n^2) complexity but no extra memory. This however is a rather bad solution, since you have to read multiple times from the file, which can be really slow compared to the main memory.</p>\n"}, {"tags": [], "owner": {"reputation": 546, "user_id": 3841908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19338e6e4ad8a9f1772c2bd9122ca04c?s=128&d=identicon&r=PG&f=1", "display_name": "Markus Dheus", "link": "https://stackoverflow.com/users/3841908/markus-dheus"}, "is_accepted": false, "score": 1, "last_activity_date": 1441204334, "creation_date": 1441204334, "answer_id": 32356012, "question_id": 32355216, "link": "https://stackoverflow.com/questions/32355216/c-remove-repeated-numbers-in-a-matrix/32356012#32356012", "title": "C++: Remove repeated numbers in a matrix", "body": "<p>How to do this if you want to preserve the order.</p>\n\n<ol>\n<li><p>Read the coordinates into an array of structures like this</p>\n\n<pre><code>struct Coord\n{ \n  double x,y,z; \n  int pos;\n  bool deleted;\n};\n</code></pre>\n\n<p>pos is the line number, deleted is set to false.</p></li>\n<li><p>Sort the structs by whatever axis tends to show the greatest variation.</p></li>\n<li><p>Run through the array comparing the value of the axis you were using in the sort from the previous item to the value in the current item. If the difference is less than a certain preset delta (.i.e. if you care about three digits after the decimal point you would look for a difference of 0.000999999 or so) you compare the remaining values and set deleted for any line where x,y,z are close enough.</p>\n\n<pre><code>for(int i=1;i&lt;count;i++)\n{\n  if(fabs(arr[i].x-arr[i-1].x)&lt;0.001)\n    if(fabs(arr[i].y-arr[i-1].y)&lt;0.001)\n      if(fabs(arr[i].z-arr[i-1].z)&lt;0.001)\n        arr[i].deleted=true;\n}\n</code></pre></li>\n<li><p>sort the array again, this time ascending by pos to restore the order.</p></li>\n<li><p>Go through the array and output all items where deleted is false.   </p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 212, "user_id": 3174381, "user_type": "registered", "accept_rate": 8, "profile_image": "https://graph.facebook.com/100001348086095/picture?type=large", "display_name": "shivam mitra", "link": "https://stackoverflow.com/users/3174381/shivam-mitra"}, "is_accepted": false, "score": 0, "last_activity_date": 1441207955, "creation_date": 1441207955, "answer_id": 32357316, "question_id": 32355216, "link": "https://stackoverflow.com/questions/32355216/c-remove-repeated-numbers-in-a-matrix/32357316#32357316", "title": "C++: Remove repeated numbers in a matrix", "body": "<p>In c++, you can use the the power of STL to solve this problem. Use the <a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow\">map</a> and store the three coordinates x, y and z as a key in the map. The mapped value to the key will store the count of that key.</p>\n\n<pre><code>Key_type = pair&lt;pair&lt;float,float&gt;,float&gt;\nmapped_type = int\n</code></pre>\n\n<p>Create a map m with the above given key_type and mapped_type and insert all the rows into the map updating the count for each row. Let's assume n is the total number of rows.</p>\n\n<pre><code>for(i = 0; i &lt; n; i++) {\n        m[make_pair(make_pair(x,y),z)]++;\n}\n</code></pre>\n\n<p>Each insertion takes O(logn) and you have to insert n times. So,overall time complexity will be O(nlogn). Now, loop over all the rows of the matrix again and if the mapped_value of that row is 1, then it is unique.</p>\n"}], "owner": {"reputation": 1, "user_id": 5292767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0d4135f091accd17988b7d869bc1618?s=128&d=identicon&r=PG&f=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/5292767/pablo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1441210048, "creation_date": 1441202263, "last_edit_date": 1441210048, "question_id": 32355216, "link": "https://stackoverflow.com/questions/32355216/c-remove-repeated-numbers-in-a-matrix", "title": "C++: Remove repeated numbers in a matrix", "body": "<p>I want to remove numbers from a matrix that represents coordinates with the format 'x y z'. One example:</p>\n\n<pre><code>1.211 1.647 1.041\n\n2.144 2.684 1.548\n\n1.657 2.245 1.021\n\n1.657 0.984 2.347\n\n2.154 0.347 2.472\n\n1.211 1.647 1.041\n</code></pre>\n\n<p>In this example the coordinates 1 and 6 are the same (x, y and z are the same) and I want to remove them but I do not want to remove cases with only one value equal as coordinates 3 and 4 for x-coordinate). </p>\n\n<p>These values are in a text file and I want to print the coordinates without duplication in another file or even in the same one.</p>\n"}, {"tags": ["c++", "clang", "c++builder", "firemonkey", "c++builder-10-seattle"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1441399423, "post_id": 32355075, "comment_id": 52680835, "body": "The <a href=\"http://stackoverflow.com/questions/28263339/\">other question</a> has nothing to do with the C++Builder compiler or properties."}, {"owner": {"reputation": 2790, "user_id": 3298987, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xxzcp.png?s=128&g=1", "display_name": "James Hogle", "link": "https://stackoverflow.com/users/3298987/james-hogle"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1441400148, "post_id": 32355075, "comment_id": 52681105, "body": "@RemyLebeau Right. Since the error was the same, I thought it might at least steer me in the right direction."}], "answers": [{"comments": [{"owner": {"reputation": 2790, "user_id": 3298987, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xxzcp.png?s=128&g=1", "display_name": "James Hogle", "link": "https://stackoverflow.com/users/3298987/james-hogle"}, "edited": false, "score": 0, "creation_date": 1441372582, "post_id": 32389535, "comment_id": 52666044, "body": "Using <code>__property Options = {default = TGridOptions() &lt;&lt; TGridOption::AlternatingRowBackground &lt;&lt; TGridOption::RowSelect};</code> gives me the error <code>&#39;expression is not an integral constant expression&#39;</code>  Am I missing something?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2790, "user_id": 3298987, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xxzcp.png?s=128&g=1", "display_name": "James Hogle", "link": "https://stackoverflow.com/users/3298987/james-hogle"}, "edited": false, "score": 1, "creation_date": 1441399280, "post_id": 32389535, "comment_id": 52680773, "body": "Then you will have to use a numeric constant. If you look at various VCL/FMX header files that have <code>Set</code>-based properties with default values, they all use numeric constants (translated by the Delphi compiler when the headers are generated).  I have updated my answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1441399028, "last_edit_date": 1441399028, "creation_date": 1441336746, "answer_id": 32389535, "question_id": 32355075, "link": "https://stackoverflow.com/questions/32355075/invalid-operands-to-binary-expression-on-tgridoptions/32389535#32389535", "title": "Invalid operands to binary expression on TGridOptions", "body": "<p>That is not valid syntax, in either the classic compiler or the new CLang compiler.  <code>Options</code> is a <code>TGridOptions</code>, which is a <code>Set&lt;&gt;</code> of <code>TGridOption</code> values (ie: <code>typedef System::Set&lt;TGridOption, TGridOption::AlternatingRowBackground, TGridOption::HeaderClick&gt; TGridOptions;</code>).  You need to construct an actual <code>TGridOptions</code> object before you can assign any values to it, eg:</p>\n\n<pre><code>TGridOptions MyOptions = TGridOptions() &lt;&lt; TGridOption::AlternatingRowBackground &lt;&lt; TGridOption::RowSelect;\n</code></pre>\n\n<p>However, you cannot create a <code>Set&lt;&gt;</code> object inside of a property declaration.\nWhat you can do, though, is specify a numeric constant that represents the binary content of a <code>Set&lt;&gt;</code> object.  In this case, for a <code>TGridOptions</code> set, <code>TGridOption::AlternatingRowBackground</code> is located at bit 0 and <code>TGridOption::RowSelect</code> is located at bit 7, thus the numeric value of the set that contains both <code>TGridOption::AlternatingRowBackground</code> and <code>TGridOption::RowSelect</code> enabled is binary <code>10000001</code>, hex <code>0x81</code>, decimal <code>129</code>, thus you can declare the property like this:</p>\n\n<pre><code>__property Options = {default = 0x81};\n</code></pre>\n\n<p></p>\n\n<pre><code>__property Options = {default = 129};\n</code></pre>\n\n<p>This is easier to handle in Delphi than in C++, as Delphi lets you specify the actual set (which the Delphi compiler translates to a numeric constant when generating a C++ .HPP file):</p>\n\n<pre><code>property Options default [TGridOption.AlternatingRowBackground, TGridOption.RowSelect];\n</code></pre>\n\n<p>In either case, as with any other property, make sure that you are actually assigning the same <code>TGridOptions</code> default value in your grid's constructor to match the property declaration, or else the property will not stream to/from a DFM/FMX resource correctly.  In this case, you can use a real <code>TGridOptions</code> object to assign the property value:</p>\n\n<pre><code>__fastcall TMyGrid::TMyGrid(TComponent *AOwner)\n    : public TCustomGrid(AOwner)\n{\n    Options = TGridOptions() &lt;&lt; TGridOption::AlternatingRowBackground &lt;&lt; TGridOption::RowSelect;\n}\n</code></pre>\n"}], "owner": {"reputation": 2790, "user_id": 3298987, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Xxzcp.png?s=128&g=1", "display_name": "James Hogle", "link": "https://stackoverflow.com/users/3298987/james-hogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 719, "favorite_count": 0, "accepted_answer_id": 32389535, "answer_count": 1, "score": 1, "last_activity_date": 1441399028, "creation_date": 1441201888, "last_edit_date": 1495540774, "question_id": 32355075, "link": "https://stackoverflow.com/questions/32355075/invalid-operands-to-binary-expression-on-tgridoptions", "title": "Invalid operands to binary expression on TGridOptions", "body": "<p>I have recently upgraded from C++ Builder XE8 to Rad Studio 10 Seattle.  I am trying to use the new Clang compiler but I am running into an issue.</p>\n\n<p>On a custom grid class I have the following line of code:</p>\n\n<pre><code>__property Options = {default=TGridOption::AlternatingRowBackground &lt;&lt; TGridOption::RowSelect};\n</code></pre>\n\n<p>Which causes the following error from the compiler:</p>\n\n<p><code>[CLANG Error] FmGridU.h(57): invalid operands to binary expression ('Fmx::Grid::TGridOption' and 'Fmx::Grid::TGridOption')</code></p>\n\n<p>From what I have read in other questions, I need to do something like implement my own <code>&lt;&lt;</code> operator.  However, I am not exactly sure how I would go about doing this.  From my understanding, the current code is the standard way to work with control options.  </p>\n\n<p>What is the difference with the new Clang compiler that causes it to thrown an error where the Classic Boreland compiler does not?  How can I implement the <code>&lt;&lt;</code> operator to allow me to set the options property?</p>\n\n<p>Edit:</p>\n\n<p>I have corrected my syntax as per Remy's suggestion.  </p>\n\n<pre><code>__property Options = {default = TGridOptions() &lt;&lt; TGridOption::AlternatingRowBackground &lt;&lt; TGridOption::RowSelect};\n</code></pre>\n\n<p>However, now I get the following error:\n<code>'expression is not an integral constant expression'</code></p>\n\n<p>According to <a href=\"https://stackoverflow.com/questions/28263339/c-map-expression-must-be-an-integral-constant-expression\">this question</a> the answer was to put the code inside of a function.  However, since I am declaring this property in a header file, I am not sure how to do that.  Is there something else I am missing?</p>\n"}, {"tags": ["c++", "qt", "user-interface", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1441204684, "post_id": 32354952, "comment_id": 52585106, "body": "OpenCV is for computer vision, not for image rendering. Therefore, OpenCV will load each image completely to memory and it will typically work with 24bit BGR images. However, 2000x3000 isn&#39;t such a big size, I guess it will work. OpenCV provides simple methods to access sub-images and simple methods to resize images (with different interpolation methods). Both features you will probably need to display images that don&#39;t fit on your screen. Not sure about TIFF, but OpenCV doesn&#39;t give you access to any meta information of the loaded images."}, {"owner": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1441205164, "post_id": 32354952, "comment_id": 52585482, "body": "Therefore, I guess OpenCV could be a good solution to open Tiff images. But Qt ? Can it do the same job ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1441205301, "post_id": 32354952, "comment_id": 52585597, "body": "I would use a tiff library (or opencv if sufficent) for loading, openCV for resizing/subimaging and Qt for displaying + user input"}, {"owner": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1441205556, "post_id": 32354952, "comment_id": 52585791, "body": "Ok, thank you very much."}, {"owner": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "reply_to_user": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1441205709, "post_id": 32354952, "comment_id": 52585918, "body": "Last thing, the qt documentation (<a href=\"http://doc.qt.io/qt-5/qtimageformats-index.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtimageformats-index.html</a>) tells us Qt uses a plugin in order to manipulate Tiff images. Does it work ? What does &quot;bundled third-party code&quot; mean ? Do I need to install an additional library for Qt ?"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 1, "creation_date": 1441205944, "post_id": 32354952, "comment_id": 52586087, "body": "tiff images will be loaded by a tiff library or openCV and Qt will just access memory blocks with RGB values. So for Qt it doesn&#39;t matter what kind of a file has been that image in before, before all the file reading and image decoding has already been done by tiff library or OpenCV. BUT: probably that&#39;s a plugin to use TIFF images directly in Qt. If that works, you don&#39;t need OpenCV at all (if Qt allows you to zoom/subimage etc and if Qt can handle the big sized images). But if you only use Qt for displaying, you don&#39;t have to care about TIFF within Qt at all."}, {"owner": {"reputation": 57498, "user_id": 874024, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/ZZtwe.jpg?s=128&g=1", "display_name": "CapelliC", "link": "https://stackoverflow.com/users/874024/capellic"}, "edited": false, "score": 0, "creation_date": 1496570011, "post_id": 32354952, "comment_id": 75707630, "body": "by today standards, 2000x3000 pixels are <b>not</b> high resolution images... your phone can probably take higher resolution still photos"}], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "edited": false, "score": 0, "creation_date": 1441282306, "post_id": 32363165, "comment_id": 52621295, "body": "But can you combine this tool with Qt ?"}, {"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "reply_to_user": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "edited": false, "score": 0, "creation_date": 1441292915, "post_id": 32363165, "comment_id": 52629234, "body": "As the O/P defined your wish to use Qt, yes, Qt might be considered as a GUI presentation layer ( a window-manager (facility) ) while the hard work is based on xfig&#39;s composer / render services, that deliveres functionality. Anyway, Qt is based on X11 dependencies &quot;under the hood&quot; &gt;&gt;&gt; <a href=\"http://doc.qt.io/qt-4.8/requirements-x11.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/requirements-x11.html</a> However, the Project Architecture and Solution is up to you."}], "tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": true, "score": 0, "last_activity_date": 1496569359, "last_edit_date": 1496569359, "creation_date": 1441228214, "answer_id": 32363165, "question_id": 32354952, "link": "https://stackoverflow.com/questions/32354952/developing-a-gui-using-opencv-and-qt-c-high-resolution-images/32363165#32363165", "title": "Developing a GUI using OpenCV and Qt C++- High-Resolution images", "body": "<p>Create and edit annotations? That sounds like going much farther than process TIFF.</p>\n\n<p>Supposing the original post was understood correctly in both the motivation - to create GUI capable of working with large TIFF image files which also allows users to create and ( later ) edit <code>annotations</code> and other graphical elements ( <code>rectangles</code> et al )</p>\n\n<p>The solution goes in a much different way than just to how to handle TIFF images in <code>OpenCV</code> and similar tools.</p>\n\n<p>If the goal is not to just reinvent wheel again, there is a lovely and powerful tool <code>xfig</code> used in CERN since ages, which provides a powerful framework for your idea.</p>\n\n<p>Using <code>xfig</code>'s syntax-engine and rendering options allows you to keep objects compose-able and editable throughout the whole lifecycle of the work and leaves you more time for developing your own concept of GUI, not spending man*years of efforts on the internals of how to handle standard format pixmaps and layered vector objects on the lowest-level side.</p>\n\n<p>Meta-file looks like:</p>\n\n<pre><code>#FIG 3.2\nLandscape\nCenter\nInches\nLetter  \n200.00\nSingle\n-3\n1200 2\n6 8625 825 11775 7275\n6 8625 1125 9075 3975\n6 8625 1125 9075 2175\n6 8625 1125 9075 1575\n2 1 0 3 0 7 0 0 -1 0.000 1 0 -1 0 0 2\n     8700 1200 9000 1200\n2 1 0 3 0 7 0 0 -1 0.000 1 0 -1 0 0 2\n     8700 1500 9000 1500\n-6\n6 8625 1725 9075 2175\n2 1 0 3 0 7 0 0 -1 0.000 1 0 -1 0 0 2\n     8700 1800 9000 1800\n2 1 0 3 0 7 0 0 -1 0.000 1 0 -1 0 0 2\n     8700 2100 9000 2100\n...\n4 0 0 0 0 0 20 0.0000 4 195 1080 35100 19800 Z-80 PIO\\001\n4 0 0 0 0 0 15 0.0000 4 180 930 34575 21075 CTL/DAT\\001\n4 0 0 0 0 0 15 0.0000 4 180 795 34575 21375 B/A SEL\\001\n4 0 0 0 0 0 15 0.0000 4 150 270 34575 21975 A6\\001\n4 0 0 0 0 0 15 0.0000 4 150 270 34575 22275 A5\\001\n4 0 0 0 0 0 15 0.0000 4 150 480 34575 22875 GND\\001\n4 0 0 0 0 0 15 0.0000 4 150 270 34575 24075 A0\\001\n4 0 0 0 0 0 15 0.0000 4 150 600 34575 24375 A STB\\001\n4 0 0 0 0 0 15 0.0000 4 150 570 34575 24675 B STB\\001\n4 0 0 0 0 0 15 0.0000 4 150 240 36525 21975 B6\\001\n</code></pre>\n\n<p>and result may look like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Uu6RR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uu6RR.png\" alt=\"xfig/slxfig imagery\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/LLIjx.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LLIjx.gif\" alt=\"xfig Artwork, courtesy ** Carlo Kopp** \"></a></p>\n"}], "owner": {"reputation": 193, "user_id": 4948037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/87e0597dd4a1254000164540cde4027f?s=128&d=identicon&r=PG&f=1", "display_name": "Dave_Dev", "link": "https://stackoverflow.com/users/4948037/dave-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 32363165, "answer_count": 1, "score": 0, "last_activity_date": 1496569359, "creation_date": 1441201546, "last_edit_date": 1441202098, "question_id": 32354952, "link": "https://stackoverflow.com/questions/32354952/developing-a-gui-using-opencv-and-qt-c-high-resolution-images", "title": "Developing a GUI using OpenCV and Qt C++- High-Resolution images", "body": "<p>I have been chosen by my Computer Science laboratory in order to develop a Graphical User Interface (GUI) which main goal is to allow the user to open High Resolution images (TIFF format) and manipulate them (zoom in, zoom out, draw rectangles,create and edit annotations...).</p>\n\n<p>I would like to build this GUI using Qt coupled with OpenCV. Nevertheless, I have some doubts about working with OpenCV for this project.</p>\n\n<p>Therefore, my questions are:</p>\n\n<ul>\n<li>Does Qt allow you to handle High-Resolution TIFF images (2000x3000 pixels?</li>\n<li>Does OpenCV allow you to handle High-Resolution TIFF images?</li>\n<li>Is it easy to convert a OpenCV TIFF image into a Qt TIFF  image?</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 758, "user_id": 1149513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/667d5e8f0b4e95b15718ef4574df2f46?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/1149513/sumeet"}, "edited": false, "score": 1, "creation_date": 1441201263, "post_id": 32354796, "comment_id": 52582597, "body": "It should be Demo *ptrd = new Demo();"}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "edited": false, "score": 0, "creation_date": 1441201326, "post_id": 32354796, "comment_id": 52582649, "body": "<code>new</code> allocates memory dynamically, while the first example does it statically. The rest: <a href=\"http://stackoverflow.com/questions/8385322/difference-between-static-memory-allocation-and-dynamic-memory-allocation\" title=\"difference between static memory allocation and dynamic memory allocation\">stackoverflow.com/questions/8385322/&hellip;</a>"}, {"owner": {"reputation": 2015, "user_id": 767368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb726c5a7c381595a93330d216db86bf?s=128&d=identicon&r=PG", "display_name": "Nallath", "link": "https://stackoverflow.com/users/767368/nallath"}, "reply_to_user": {"reputation": 758, "user_id": 1149513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/667d5e8f0b4e95b15718ef4574df2f46?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/1149513/sumeet"}, "edited": false, "score": 1, "creation_date": 1441201676, "post_id": 32354796, "comment_id": 52582901, "body": "@Sumeet No, it shouldn&#39;t. There is no -need- to do this. Some people find this a good practice, but i personally disagree with that."}, {"owner": {"reputation": 758, "user_id": 1149513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/667d5e8f0b4e95b15718ef4574df2f46?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/1149513/sumeet"}, "reply_to_user": {"reputation": 2015, "user_id": 767368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/eb726c5a7c381595a93330d216db86bf?s=128&d=identicon&r=PG", "display_name": "Nallath", "link": "https://stackoverflow.com/users/767368/nallath"}, "edited": false, "score": 1, "creation_date": 1441201745, "post_id": 32354796, "comment_id": 52582961, "body": "@Nallath: The guy has written Demo d = new Demo();, during initial post. I posted so that he can correct it."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1441201892, "post_id": 32354796, "comment_id": 52583080, "body": "The <code>()</code> in <code>new Demo()</code>  is an <i>initializer</i>, which in general case also creates extra differences between these two variants. If you want to restrict the question to matters of storage and lifetime, it would be a good idea to eliminate that difference first. Either <code>Demo d;</code> vs. <code>new Demo</code> or <code>Demo d{}</code> vs <code>new Demo{}</code>."}], "answers": [{"tags": [], "owner": {"reputation": 82, "user_id": 5281392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYPNz.jpg?s=128&g=1", "display_name": "Patryk W.", "link": "https://stackoverflow.com/users/5281392/patryk-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1441201336, "creation_date": 1441201336, "answer_id": 32354853, "question_id": 32354796, "link": "https://stackoverflow.com/questions/32354796/difference-in-object-definition-with-and-without-new/32354853#32354853", "title": "Difference in object definition with and without &quot;new&quot;", "body": "<p>The difference is that writing <code>Demo d;</code> causes the object instance to be created and destroyed automatically (also known as <a href=\"https://pl.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization\" rel=\"nofollow\">RAII</a>), whereas in the second case you have to worry about it.</p>\n"}, {"tags": [], "owner": {"reputation": 758, "user_id": 1149513, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/667d5e8f0b4e95b15718ef4574df2f46?s=128&d=identicon&r=PG&f=1", "display_name": "Sumeet", "link": "https://stackoverflow.com/users/1149513/sumeet"}, "is_accepted": false, "score": 0, "last_activity_date": 1441201676, "last_edit_date": 1441201676, "creation_date": 1441201407, "answer_id": 32354890, "question_id": 32354796, "link": "https://stackoverflow.com/questions/32354796/difference-in-object-definition-with-and-without-new/32354890#32354890", "title": "Difference in object definition with and without &quot;new&quot;", "body": "<p>In first case:</p>\n\n<pre><code>Demo d;\n</code></pre>\n\n<p>The object will get allocated on the stack and is automatically deleted once the scope of the declaration is left.</p>\n\n<p>In second case:</p>\n\n<pre><code>Demo *d = new Demo();\n</code></pre>\n\n<p>The object will get allocated over free store/heap. You need to explicitly delete object by calling <code>delete</code> operator.</p>\n"}, {"tags": [], "owner": {"reputation": 23009, "user_id": 3613500, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lIfov.png?s=128&g=1", "display_name": "David Haim", "link": "https://stackoverflow.com/users/3613500/david-haim"}, "is_accepted": true, "score": 1, "last_activity_date": 1441201656, "creation_date": 1441201656, "answer_id": 32354995, "question_id": 32354796, "link": "https://stackoverflow.com/questions/32354796/difference-in-object-definition-with-and-without-new/32354995#32354995", "title": "Difference in object definition with and without &quot;new&quot;", "body": "<p>of course.\nthe first one is an object created and allocated from the stack. it will be deleted automatically when its scope is over.\nthat has being said:</p>\n\n<ol>\n<li>you can't return it as pointer or reference - because then you'll return a memory address which does not point to a valid object</li>\n<li>if you return it, it will return as copy or move</li>\n<li>you don't have to be afraid of memory leaks, becuase it's de-allocated automatically</li>\n<li>allocating it is much faster then the alternative heap allocation</li>\n</ol>\n\n<p>the second one is allocated from the heap. a heap is a huge memory block given to you by the OS. that has being said:</p>\n\n<ul>\n<li>an object allocated with new will live on untill you call <code>delete</code> on it</li>\n<li>it's scope is universal to the program</li>\n<li>you must pass it as a pointer or reference (well, you should, anyway)</li>\n<li>you must <code>delete</code> it on some point</li>\n<li>heap allocation is slower</li>\n<li>the dangers of memory leak is greater</li>\n</ul>\n\n<p>there are many many other neuanses to these, including polimorphism, multi-threaded enviroments and much more.\nlearn about memory managment, know it as the palm of you hand , but opt <code>unique_ptr</code> and <code>shared_ptr</code> when time comes by. </p>\n"}, {"tags": [], "owner": {"reputation": 436, "user_id": 2543838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65e8b5832ea1ad8dff0c4dd7f66523a7?s=128&d=identicon&r=PG", "display_name": "Hrant", "link": "https://stackoverflow.com/users/2543838/hrant"}, "is_accepted": false, "score": 1, "last_activity_date": 1441201741, "creation_date": 1441201741, "answer_id": 32355028, "question_id": 32354796, "link": "https://stackoverflow.com/questions/32354796/difference-in-object-definition-with-and-without-new/32355028#32355028", "title": "Difference in object definition with and without &quot;new&quot;", "body": "<p>For <code>Demo d;</code> <code>d</code> will be allocated on stack and automatically freed when the program leaves the current block.</p>\n\n<p>For <code>Demo *d = new Demo();</code> <code>d</code> is a pointer to an object allocated on heap. Such objects remain in existence until explicitly freed with <code>delete</code> operator: <code>delete d</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 4331985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/187c556dc991f7b77fd142d6ef90bcea?s=128&d=identicon&r=PG&f=1", "display_name": "swj", "link": "https://stackoverflow.com/users/4331985/swj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1441201800, "accepted_answer_id": 32354995, "answer_count": 4, "score": 1, "last_activity_date": 1441204669, "creation_date": 1441201186, "last_edit_date": 1441204669, "question_id": 32354796, "link": "https://stackoverflow.com/questions/32354796/difference-in-object-definition-with-and-without-new", "closed_reason": "Duplicate", "title": "Difference in object definition with and without &quot;new&quot;", "body": "<p>I am a beginner in C++. I found two ways of object definition.</p>\n\n<blockquote>\n  <p>Demo d;</p>\n  \n  <p>Demo *ptrD = new Demo();</p>\n</blockquote>\n\n<p>Is there any difference between above two object definition in cpp</p>\n\n<p>where Demo is a class </p>\n\n<pre><code> class Demo \n    {\n         // --------------\n         //---------------\n    };\n</code></pre>\n\n<p>Is there any difference in memory allocated to object created by these two statements?</p>\n"}, {"tags": ["python", "c++", "c", "gcc", "cython"], "comments": [{"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441202566, "post_id": 32354762, "comment_id": 52583532, "body": "The easiest thing is probably to use one of the Python distributions that come with a compiler already set up e.g. <a href=\"https://winpython.github.io/\" rel=\"nofollow noreferrer\">WinPython</a> or <a href=\"https://store.continuum.io/cshop/anaconda/\" rel=\"nofollow noreferrer\">Anaconda</a>. You&#39;ll probably find the 32 bit versions much easier to get working than the 64 bit versions."}, {"owner": {"reputation": 773, "user_id": 3763498, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b61239d14a111f13f5ed5a51ce4407bb?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish Kanhar", "link": "https://stackoverflow.com/users/3763498/debasish-kanhar"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441225366, "post_id": 32354762, "comment_id": 52597565, "body": "Hi. Thanks for the quick reply. I followed <a href=\"https://github.com/cython/cython/wiki/InstallingOnWindows\" rel=\"nofollow noreferrer\">github.com/cython/cython/wiki/InstallingOnWindows</a> to install Cython on Anaconda, Configured by PyCharm to use Anaconda Interpreter. And <a href=\"http://docs.cython.org/src/tutorial/cython_tutorial.html#cython-hello-world\" rel=\"nofollow noreferrer\">docs.cython.org/src/tutorial/&hellip;</a> to build a simple program. I&#39;m able to create .c file. When I compile it using MS VC++ Command Prompt using &quot;cl /EHsc test.c&quot; it says &quot;Fatal Error : No Python.h&quot;. Also followed <a href=\"https://github.com/cython/cython/wiki/CythonExtensionsOnWindows\" rel=\"nofollow noreferrer\">github.com/cython/cython/wiki/CythonExtensionsOnWindows</a> this to setup variables."}, {"owner": {"reputation": 773, "user_id": 3763498, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b61239d14a111f13f5ed5a51ce4407bb?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish Kanhar", "link": "https://stackoverflow.com/users/3763498/debasish-kanhar"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441225529, "post_id": 32354762, "comment_id": 52597625, "body": "Also, if I try doing import test from iPython notebook (Of Anaconda) I dont get any output of test.pyx file. When I try to do import, does it import .c file or .pyx? So how do I make my python script faster? Sorry for deviating from topic. Is &quot;Import filename&quot; enough to make faster version of script or compiling and running the executable from .c file is faster method?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441265568, "post_id": 32354762, "comment_id": 52610679, "body": "I don&#39;t know why it isn&#39;t working - I think you have to compile from the Anaconda command line with a correctly set up environment? (but I don&#39;t actually use Anaconda myself...) These type of problems are often very difficult to solve, so I&#39;m reluctant to get involved too much further. [For your second question: when you type import filename it loads filename.dll, which it builds from the .c file. Any functions in that should run faster]"}, {"owner": {"reputation": 773, "user_id": 3763498, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b61239d14a111f13f5ed5a51ce4407bb?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish Kanhar", "link": "https://stackoverflow.com/users/3763498/debasish-kanhar"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441266558, "post_id": 32354762, "comment_id": 52611259, "body": "Hi, I did proceed in the error I was facing, and somehow resolved the issue of include but now facing with new error. Kindly see my edit to question."}, {"owner": {"reputation": 773, "user_id": 3763498, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b61239d14a111f13f5ed5a51ce4407bb?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish Kanhar", "link": "https://stackoverflow.com/users/3763498/debasish-kanhar"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1441267015, "post_id": 32354762, "comment_id": 52611550, "body": "Have edited the question. Kindly have a look."}], "owner": {"reputation": 773, "user_id": 3763498, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/b61239d14a111f13f5ed5a51ce4407bb?s=128&d=identicon&r=PG&f=1", "display_name": "Debasish Kanhar", "link": "https://stackoverflow.com/users/3763498/debasish-kanhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 901, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1441266957, "creation_date": 1441201078, "last_edit_date": 1495541704, "question_id": 32354762, "link": "https://stackoverflow.com/questions/32354762/unable-to-compile-cython-generated-c-file", "title": "Unable to compile cython generated .c file", "body": "<p>I'm pretty new to python and newer to cython. Since I realized cython is better for me as it is pretty fast, I decided to switch to cython by creating .c files of each .pyx files and I try to compile them manually using the following various techniques:</p>\n\n<p>I create .c file from .pyx using following :\nI create setup.py file </p>\n\n<pre><code>from distutils.core import setup\nfrom Cython.Build import cythonize\n\n    setup(\n        name = \"My hello app\",\n        ext_modules = cythonize(\"test.pyx\"),\n    )\n</code></pre>\n\n<p>It creates a test.c file in same directory. When I try to compile the file using Dev C++, I get following error :</p>\n\n<p><strong>18        C:\\crossdev\\src\\mingw-w64-v3-git\\mingw-w64-crt\\crt\\crt0_c.c undefined reference to `WinMain'</strong></p>\n\n<p>I also tried building .pyx into .c from command prompt using following command :</p>\n\n<pre><code>cython test.pyx\n</code></pre>\n\n<p>and then doing the following from command prompt to compile using gcc:</p>\n\n<pre><code>python setup.py build_ext --inplace\n</code></pre>\n\n<p>to create .c file which again fail to compile.</p>\n\n<p>If I try <a href=\"https://stackoverflow.com/questions/6985109/how-to-compile-c-code-from-cython-with-gcc\">following this link</a> to compile .c file generated by manually including path for Python Includes, <a href=\"https://i.stack.imgur.com/75jKf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/75jKf.png\" alt=\"I get following error\"></a>. </p>\n\n<p>I get following error.</p>\n\n<p>PS : I used the <strong>gcc -c -IC:\\Python27\\include -o test.o test.c</strong> comand from command line to compile the .c file</p>\n\n<p>PS2 : If I tried manually compiling from cygwin's gcc, it said <strong>Fatal Error : No file named Python.h</strong></p>\n\n<p>PS3 : I've manually entered paths for include dirs and libraries in Dev C++ compiler options but the issue persists. The exact error message is as follows :</p>\n\n<p><a href=\"https://i.stack.imgur.com/8I1Bs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8I1Bs.png\" alt=\"enter image description here\"></a></p>\n\n<p>I tried everything I can find on internet but unable to get any proper solution and I've been facing this issue this since almost a month for which I'm kinda missing deadlines. So It would be very helpful if anyone can guide me in correct path on how to compile .c files generated from Cython.</p>\n\n<p>Thanks in advance</p>\n\n<p><strong>EDIT 1 :</strong> I tried the following command to compile my .c file : (In VC++ 2008)\nE:\\My Proj Dir>cl /EHsc test.c /I C:\\Python27\\include /link C:\\Python27\\libs\\libpython27.a /MACHINE:AMD64 </p>\n\n<p>Also tried E:\\My Proj Dir>cl /EHsc test.c /I C:\\Python27\\include /LIBPATH C:\\Python27\\libs\\libpython27.a /MACHINE:AMD64 </p>\n\n<p>I get following error : \nlibpython27.a(dmmeh.o) : fatal error LNK1112: module machine type 'x64' conflicts with target machine type 'X86'</p>\n\n<p>When I tried using /MACHINE:x64, I face the following<br>\ntest.obj : fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'x64'</p>\n\n<p>PS : I got AMD64 by importing <strong>platform</strong> module in my itnterpreter and running platform.machine()</p>\n"}, {"tags": ["c++", "rtti", "typeid"], "comments": [{"owner": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 0, "creation_date": 1441201123, "post_id": 32354575, "comment_id": 52582507, "body": "related: <a href=\"http://stackoverflow.com/questions/4465872/why-does-typeid-name-return-weird-characters-using-gcc-and-how-to-make-it-prin\" title=\"why does typeid name return weird characters using gcc and how to make it prin\">stackoverflow.com/questions/4465872/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1480681804, "post_id": 32354644, "comment_id": 69075366, "body": "This seems to be add odds with the accepted answer: <i>unspecified</i>  and <i>implementation-defined</i> are two distinct kinds of behavior. Can you indicate which part of which standard this quote comes from?"}], "tags": [], "owner": {"reputation": 151870, "user_id": 1501794, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/VyUv5.jpg?s=128&g=1", "display_name": "Rahul Tripathi", "link": "https://stackoverflow.com/users/1501794/rahul-tripathi"}, "is_accepted": false, "score": 1, "last_activity_date": 1441200766, "last_edit_date": 1495541321, "creation_date": 1441200766, "answer_id": 32354644, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined/32354644#32354644", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>The C++ standard says:</p>\n\n<blockquote>\n  <p>The class type_info describes type information generated by the\n  implementation. Objects of this class effectively store a pointer to a\n  name for the type, and an encoded value suitable for comparing two\n  types for equality or collating order. The names, encoding rule, and\n  collating sequence for types are all unspecified and may differ\n  between programs.</p>\n</blockquote>\n\n<p>g++ is returning you the <a href=\"https://en.wikipedia.org/wiki/Name_mangling\" rel=\"nofollow noreferrer\">decorated name</a> which you can demangle easily.</p>\n\n<p>Also refer: <a href=\"https://stackoverflow.com/questions/81870/print-variable-type-in-c\">Print variable type in C++</a></p>\n"}, {"tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 6, "last_activity_date": 1441200790, "creation_date": 1441200790, "answer_id": 32354652, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined/32354652#32354652", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>Because compilers represent types differently and don't use the same internals.</p>\n\n<p>The G++ string is the <a href=\"https://en.wikipedia.org/wiki/Name_mangling\">mangled</a> type name, returning that (rather than demangling it) is less work and more efficient. Requiring compilers to demangle those strings would add more work. The standard leaves it up to implementors to decide if they want to do that.</p>\n\n<p>If the standard dictated it then it would also have to specify all sorts of things, like whether to say <code>signed long</code> or just <code>long</code> and how to represent complex template instantiations that depend on other types and constants. The benefits of standardising those strings would be very small, but a large amount of work.</p>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 2, "last_activity_date": 1441201687, "last_edit_date": 1441201687, "creation_date": 1441200995, "answer_id": 32354724, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined/32354724#32354724", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>Yes, C++ standard says it explicitly:</p>\n\n<p>18.7.1$9,10 Class type_info [type.info]</p>\n\n<pre><code>const char* name() const noexcept; \n</code></pre>\n\n<blockquote>\n  <p>9 Returns: An\n  implementation-defined ntbs.<br>\n  10 Remarks: The message may be a\n  null-terminated multibyte string (17.5.2.1.4.2), suitable for\n  conversion and display as a wstring (21.3, 22.4.1.4)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": 0, "last_activity_date": 1441202126, "last_edit_date": 1441202126, "creation_date": 1441201698, "answer_id": 32355012, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined/32355012#32355012", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>To expand on Jonathan Wakely's answer, the typical use of <code>typeid</code> is</p>\n\n<pre><code>if ( typeid(variable1) == typeid(variable2) )\n     // same type\n</code></pre>\n\n<p>but also</p>\n\n<pre><code>if ( typeid(variable1).name() == typeid(variable2).name() )\n    // same type\n</code></pre>\n\n<p>as you can see there is no need to know the exact implementation-defined name. Since you don't really need that, the standard gives the implementation freedom to implement it in a more efficient way, which is reasonably good.</p>\n\n<p>For example, compare\n<code>_ZStplIcSt11char_traitsIcESaIcEESbIT_T0_T1_ERKS6_S8_</code>\nand <code>std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; std::operator+&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)\n</code>: definitely less verbose and efficient, to compare and to store.</p>\n"}, {"tags": [], "owner": {"reputation": 436, "user_id": 2543838, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/65e8b5832ea1ad8dff0c4dd7f66523a7?s=128&d=identicon&r=PG", "display_name": "Hrant", "link": "https://stackoverflow.com/users/2543838/hrant"}, "is_accepted": false, "score": 0, "last_activity_date": 1441203076, "creation_date": 1441203076, "answer_id": 32355514, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined/32355514#32355514", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>In addition typeid is mainly used with polymorphic types to detect polymorphic object types at runtime:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\n\nclass B\n{\npublic:\n    virtual ~B() {}\n};\n\nclass D1 : public B\n{\n\n};\n\nclass D2 : public D1\n{\n\n};\n\nint main()\n{\n    B* b1 = new D2;\n    if (typeid(*b1) == typeid(B))\n    {\n        std::cout &lt;&lt; \"*b1 is B\\n\";\n    }\n    if (typeid(*b1) == typeid(D1))\n    {\n        std::cout &lt;&lt; \"*b1 is D1\\n\";\n    }\n    if (typeid(*b1) == typeid(D2))\n    {\n        std::cout &lt;&lt; \"*b1 is D2\\n\";\n    }\n}\n</code></pre>\n\n<p>This will print </p>\n\n<blockquote>\n  <p>*b1 is D2</p>\n</blockquote>\n\n<p>So it is not intended for printing names of object types.</p>\n"}], "owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 1, "accepted_answer_id": 32354652, "answer_count": 5, "score": 3, "last_activity_date": 1441203076, "creation_date": 1441200558, "last_edit_date": 1441200845, "question_id": 32354575, "link": "https://stackoverflow.com/questions/32354575/why-strings-returned-by-name-function-is-implementation-defined", "title": "Why strings returned by name() function is implementation defined?", "body": "<p>Consider following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;typeinfo&gt;\nint main()\n{\n    int a=9;\n    std::cout &lt;&lt; typeid(a).name() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Output on g++ 4.8.1 : i</p>\n\n<p>Output on MSVS 2010: int</p>\n\n<p>Why output is compiler depedent? What is the reason behind this? Why it is left as implementation defined? Why not same output on all compilers? Does C++ standard says it explicitly?</p>\n"}, {"tags": ["c++", "encoding", "data-protection"], "comments": [{"owner": {"reputation": 1054, "user_id": 785744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81eb5ba8189a0f24400a827e13ff56b3?s=128&d=identicon&r=PG&f=1", "display_name": "Valdas", "link": "https://stackoverflow.com/users/785744/valdas"}, "edited": false, "score": 1, "creation_date": 1441201107, "post_id": 32354566, "comment_id": 52582495, "body": "Base64 is as safe as plaintext. That means, none of them are safe."}, {"owner": {"reputation": 256589, "user_id": 13005, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4690b9a0df8a4c1e35c088b077942e6?s=128&d=identicon&r=PG", "display_name": "Steve Jessop", "link": "https://stackoverflow.com/users/13005/steve-jessop"}, "edited": false, "score": 0, "creation_date": 1441201354, "post_id": 32354566, "comment_id": 52582667, "body": "No, it&#39;s not possible. Consider, someone might write an x86 emulator (heck, a Windows emulator) which they can run your code on, but with the property that they can interrupt the emulator at any point and examine every detail of its state. The real game is, can you make it sufficiently awkward and annoying to interpret the memory dump, that the person gives up before they manage it. For example, perhaps only a small part of the text is decoded at any one time, and even that&#39;s split between multiple objects. But it&#39;s just a game of who has more patience, you or your opponent."}, {"owner": {"reputation": 41, "user_id": 3741982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a818a9eec2a9d722d78eda39a91fe8c5?s=128&d=identicon&r=PG&f=1", "display_name": "Adams", "link": "https://stackoverflow.com/users/3741982/adams"}, "edited": false, "score": 0, "creation_date": 1441201390, "post_id": 32354566, "comment_id": 52582685, "body": "<code>Base64</code> is only method to hide ugly encoded text in <code>Rijndael 256</code>. Read sequences of work."}, {"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 1, "creation_date": 1441201940, "post_id": 32354566, "comment_id": 52583108, "body": "What are you trying to avoid here (XY-problem)?"}], "answers": [{"comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441203297, "post_id": 32354865, "comment_id": 52584079, "body": "Might be useful to somehow allocate the memory to hold the plain text so that it will not get swapped out to disk."}, {"owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1441204800, "post_id": 32354865, "comment_id": 52585197, "body": "Seems unlikely that it would swap out in a very small window of use, but I agree that it is possible.  You could enable swap-file encryption in your OS if that loading scenario was a concern."}], "tags": [], "owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1441201361, "creation_date": 1441201361, "answer_id": 32354865, "question_id": 32354566, "link": "https://stackoverflow.com/questions/32354566/how-to-hide-plain-text-in-program-memory/32354865#32354865", "title": "How to hide plain text in program memory?", "body": "<p>Presumably the plain text is needed in memory, at least briefly, for proper execution.  If, at that point, a memory dump happens, yes, they have access to it, and no, there isn't much you can do about it.  Keeping it in plain text as short as time as possible will help, as well \"secure zeroing\" the memory after you're done with it.</p>\n"}, {"tags": [], "owner": {"reputation": 82, "user_id": 5281392, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jYPNz.jpg?s=128&g=1", "display_name": "Patryk W.", "link": "https://stackoverflow.com/users/5281392/patryk-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1441201571, "creation_date": 1441201571, "answer_id": 32354968, "question_id": 32354566, "link": "https://stackoverflow.com/questions/32354566/how-to-hide-plain-text-in-program-memory/32354968#32354968", "title": "How to hide plain text in program memory?", "body": "<p>No, there isn't any way to protect it - presumably even OllyDbg is enough to get the decoded value (just the matter of placing a breakpoint, after which it doesn't matter that the memory is zeroed or moved or anything).  </p>\n\n<p>You should rethink your security model.</p>\n"}], "owner": {"reputation": 41, "user_id": 3741982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a818a9eec2a9d722d78eda39a91fe8c5?s=128&d=identicon&r=PG&f=1", "display_name": "Adams", "link": "https://stackoverflow.com/users/3741982/adams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 566, "favorite_count": 0, "closed_date": 1441203853, "answer_count": 2, "score": 3, "last_activity_date": 1441202890, "creation_date": 1441200538, "last_edit_date": 1441202890, "question_id": 32354566, "link": "https://stackoverflow.com/questions/32354566/how-to-hide-plain-text-in-program-memory", "closed_reason": "Duplicate", "title": "How to hide plain text in program memory?", "body": "<p>I'm writing program that load encoded string into memory and decode it with special algorithm.</p>\n\n<p><strong>Sequences of program work:</strong></p>\n\n<ol>\n<li>Load data from encoded file (<code>base64</code> string)</li>\n<li>Decode <code>base64</code> string to encoded data string (<code>Rijndael 256</code>)</li>\n<li>Decode encoded data string (<code>Rijndael256</code>) to plain text code</li>\n<li>Run code and store state in data structure</li>\n<li>Delete plain text from memory</li>\n<li>...</li>\n</ol>\n\n<p>The problem is in <code>sequence #3</code> if user create dump of program memory, he can get code as plain text which must be secure.\nMy question is - there is any way to protect my plain text string in memory?</p>\n\n<p>Program is written in <code>C++</code>. </p>\n"}, {"tags": ["c++", "excel", "vba", "types"], "comments": [{"owner": {"reputation": 1367, "user_id": 3343071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4a7e01c427c8d9daa8d944e9cd1d1410?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelH", "link": "https://stackoverflow.com/users/3343071/miguelh"}, "edited": false, "score": 0, "creation_date": 1441201788, "post_id": 32354547, "comment_id": 52582992, "body": "Have you tried changing the Declare to ...Declare PtrSafe Sub. The Prtsafe is required for VBA7"}], "answers": [{"comments": [{"owner": {"reputation": 1367, "user_id": 3343071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4a7e01c427c8d9daa8d944e9cd1d1410?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelH", "link": "https://stackoverflow.com/users/3343071/miguelh"}, "edited": false, "score": 0, "creation_date": 1441203768, "post_id": 32355393, "comment_id": 52584391, "body": "Its a foible of VBA. Only the first Dim is set as the datatype if you separate other items with commas. The other items become variants."}, {"owner": {"reputation": 59, "user_id": 5126860, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0d0731e0b8ceb889ee7b59f4d8356b5?s=128&d=identicon&r=PG&f=1", "display_name": "PublicUserName", "link": "https://stackoverflow.com/users/5126860/publicusername"}, "reply_to_user": {"reputation": 1367, "user_id": 3343071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4a7e01c427c8d9daa8d944e9cd1d1410?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelH", "link": "https://stackoverflow.com/users/3343071/miguelh"}, "edited": false, "score": 0, "creation_date": 1441262835, "post_id": 32355393, "comment_id": 52609139, "body": "I was explicitly looking for that before. See here: <a href=\"https://msdn.microsoft.com/en-us/library/7ee5a7s1.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/7ee5a7s1.aspx</a> <b>Declaring Multiple Variables You can declare several variables in one declaration statement, specifying the variable name for each one, and following each array name with parentheses. Multiple variables are separated by commas.</b> That seems odd to me."}, {"owner": {"reputation": 1367, "user_id": 3343071, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4a7e01c427c8d9daa8d944e9cd1d1410?s=128&d=identicon&r=PG&f=1", "display_name": "MiguelH", "link": "https://stackoverflow.com/users/3343071/miguelh"}, "edited": false, "score": 0, "creation_date": 1441266367, "post_id": 32355393, "comment_id": 52611143, "body": "That refers to Visual Basic. Excel VBA is more of a Visual Basic Lite!"}], "tags": [], "owner": {"reputation": 59, "user_id": 5126860, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0d0731e0b8ceb889ee7b59f4d8356b5?s=128&d=identicon&r=PG&f=1", "display_name": "PublicUserName", "link": "https://stackoverflow.com/users/5126860/publicusername"}, "is_accepted": true, "score": 0, "last_activity_date": 1441202723, "creation_date": 1441202723, "answer_id": 32355393, "question_id": 32354547, "link": "https://stackoverflow.com/questions/32354547/mismatch-of-data-type-when-passing-argument/32355393#32355393", "title": "Mismatch of data type when passing argument", "body": "<p>I think I solved my problem.</p>\n\n<p>Looking at the VBA code</p>\n\n<pre><code>Dim typeOfPump, RV, monthIN, yearIN as Integer\n</code></pre>\n\n<p>for any reason declared only typeOfPump as integer, the rest were (when monitoring with implemented watching function of Excel) still variant. Writing</p>\n\n<pre><code>Dim typeOfPump as Integer\nDim RV as Integer\n...\n</code></pre>\n\n<p>seems to solve the problem. Unfortunately, I cannot explain what is wrong with the first line.</p>\n"}], "owner": {"reputation": 59, "user_id": 5126860, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c0d0731e0b8ceb889ee7b59f4d8356b5?s=128&d=identicon&r=PG&f=1", "display_name": "PublicUserName", "link": "https://stackoverflow.com/users/5126860/publicusername"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 490, "favorite_count": 0, "accepted_answer_id": 32355393, "answer_count": 1, "score": 0, "last_activity_date": 1441202723, "creation_date": 1441200491, "last_edit_date": 1441201558, "question_id": 32354547, "link": "https://stackoverflow.com/questions/32354547/mismatch-of-data-type-when-passing-argument", "title": "Mismatch of data type when passing argument", "body": "<p>I am currently facing following problem. I have searched for any solution but could not find anything useful related to my problem.</p>\n\n<p>I want to use VBA to provide some parameters to a self-written DLL which is going to calculate a result for me.</p>\n\n<p>My problem: As soon as I try to process the values passed to the function <strong>setCEPCI</strong> I get an \"Microsoft Excel has stopped working\"- error(no further details). If I put those three lines (see my copied code) in comments, however, everything is working fine. I tried a lot of workarounds but it all came down to those lines.\nSurprisingly, I can use the passed arguments in the first function <strong>getPEC</strong>, where e.g. <strong>x</strong> is my <strong>outflow</strong>.</p>\n\n<p>For the record I am using a def file for exporting the function, though, IMHO the error seems to be some mismatch of data types.</p>\n\n<p><strong>EDIT: For clarification: If my DLL is not found e.g. I get the same Microsoft-Excel-error due to the RV assignment. If I try to assign any value to RV in the first function, I also get that error. On the other hand I can assign any value to PEC without problems.</strong></p>\n\n<p>My DLL looks like:</p>\n\n<pre><code>extern \"C\" {\n\n\n\ntypedef void(CALLBACK * FncPtrClssGetCEPCI)(CEPCIvalues &amp;, int, int, int &amp;);\n\ndouble PEC_backUp;\nconst int numbMaxCEPCIlistMembers = 3;\nCEPCIvalues cepcilist_backUp[numbMaxCEPCIlistMembers];\n\nvoid __stdcall getPEC(int typeOfPump, double outflow, double &amp;PEC, int &amp;RV)\n{\n    //y = a x^6 + b x^5 + c x^4 + d x^3 + e x^2 + f x^1 + g x^0\n    if ((typeOfPump &lt; 1) || (10 &lt; typeOfPump)) {\n        RV = -1;\n        return;\n    }\n    double a, b, c, d, e, f, g;\n//...\n    PEC_backUp = a * pow(outflow, 6.0) +\n        b * pow(outflow, 5.0) +\n        c * pow(outflow, 4.0) +\n        d * pow(outflow, 3.0) +\n        e * pow(outflow, 2.0) +\n        f * pow(outflow, 1.0) +\n        g * pow(outflow, 0.0);\n\n\n    double EUR_USD_07_2000 = 0.939082609;\n    PEC_backUp = PEC_backUp / EUR_USD_07_2000;\n    PEC = PEC_backUp;\n}\n\nvoid __stdcall setCEPCI(int monthIN, int yearIN, int &amp;RV)\n{\n    //HINSTANCE hinstCEPCI = LoadLibraryEx(\"CEPCI.dll\", NULL, LOAD_LIBRARY_SEARCH_APPLICATION_DIR);\n    HINSTANCE hinstCEPCI = LoadLibrary(\"C:\\\\Users\\\\...somePath...\\\\CEPCI.dll\");\n    if (!hinstCEPCI)\n    {\n        RV = -11;\n        return;\n    }\n    FncPtrClssGetCEPCI ptrGetCEPCI = (FncPtrClssGetCEPCI)GetProcAddress(hinstCEPCI, \"getCEPCI\");\n    if (!ptrGetCEPCI)\n    {\n        RV = -22;\n        return;\n    }\n    //CEPCI values of 13/1970 and 07/2000 are automatically extracted\n    //due to less interaction and, thus, risk of errors in user input\n\n    int monthIN_auto = 13;\n    int yearIN_auto = 1970;\n    ptrGetCEPCI(cepcilist_backUp[0], monthIN_auto, yearIN_auto, RV);\n    monthIN_auto = 7;\n    yearIN_auto = 2000;\n    ptrGetCEPCI(cepcilist_backUp[1], monthIN_auto, yearIN_auto, RV);\n    //now extract CEPCI value of user specific input\n\n\n\n\n  //  monthIN_auto = monthIN;\n\n  //  yearIN_auto = yearIN;\n\n\n    ptrGetCEPCI(cepcilist_backUp[2], monthIN_auto, yearIN_auto, RV);\n        CEPCIvalues cepcilist;\n        cepcilist = cepcilist_backUp[2];\n\n\n\n\n\n// RV = monthIN + yearIN;\n\n    ptrGetCEPCI = 0;\n    FreeLibrary(hinstCEPCI);\n    hinstCEPCI = 0;\n    return;\n}\n</code></pre>\n\n<p>My VBA code looks like:</p>\n\n<pre><code>Public Declare Sub getPEC _\nLib \"C:\\Users\\...somePath...\\OPunit0011PUMP.dll\" _\n(ByVal typeOfPump As Integer, ByVal outflow As Double, ByRef PEC As Double, ByRef RV As Integer)\n\nPublic Declare Sub setCEPCI _\nLib \"C:\\Users\\...somePath...\\OPunit0011PUMP.dll\" _\n(ByVal monthIN As Integer, ByVal yearIN As Integer, ByRef RV As Integer)\n\n\nFunction CallPump()\n\nDim typeOfPump, RV, monthIN, yearIN As Integer\ntypeOfPump = 9\nDim outlfow, PEC As Double\noutflow = 100\nmonthIN = 5\nyearIN = 2008\n\nCall getPEC(typeOfPump, outflow, PEC, RV)\n\nCall setCEPCI(monthIN, yearIN, RV)\n\n\n\n\nEnd Function\n</code></pre>\n\n<p>Any help is appreciated. Thank you in advance.</p>\n"}, {"tags": ["c++", "c++11", "crtp"], "comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1441200934, "post_id": 32354501, "comment_id": 52582343, "body": "can you not use some SFINAE magic to establish whether <code>Imp::Param</code> is different from <code>Base::Param</code> and that <code>Imp::myFunc()</code> takes <code>Imp::Param</code> as argument?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1441201828, "post_id": 32354501, "comment_id": 52583038, "body": "@Walter for the second, if there is inheritance, it will have false positives.  For the first, you might not want to require that."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1441201935, "post_id": 32354501, "comment_id": 52583105, "body": "Aside: why are you static casting to <code>T const*</code> from a non-<code>const</code> method?  Either <code>myFunc</code> should be <code>const</code> in <code>Base</code> and <code>CRTP</code>, or you should call <code>static_cast&lt;T*&gt;</code> in the <code>CRTP</code> implementaiton."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441202119, "post_id": 32354501, "comment_id": 52583231, "body": "@Yakk The false positives don&#39;t matter, as long as there is a method <code>Imp::myfunc(Imp::Params&amp;)</code>, we are sorted, aren&#39;t we?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1441202205, "post_id": 32354501, "comment_id": 52583284, "body": "@Walter That method could be the virtual one in <code>Base</code>.  Unless you are arguing we examine a method pointer, which seems like a bad idea to me: false negatives and/or over restriction on what can happen."}, {"owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1441203586, "post_id": 32354501, "comment_id": 52584284, "body": "@Yakk - fixed casting"}, {"owner": {"reputation": 1261, "user_id": 2303378, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ff8bb3b43552420897498876c08527d?s=128&d=identicon&r=PG", "display_name": "Denis Blank", "link": "https://stackoverflow.com/users/2303378/denis-blank"}, "edited": false, "score": 0, "creation_date": 1442173761, "post_id": 32354501, "comment_id": 52963638, "body": "I tried to use a detection idiome to check if the implementation can be overwritten by another implementation, if both implementations are marked as final the check would fail. But it threw compile errors rather then a substitution failure. Maybe someone can reuse it: <a href=\"http://pastebin.com/GR1r1K9g\" rel=\"nofollow noreferrer\">pastebin.com/GR1r1K9g</a>"}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "edited": false, "score": 0, "creation_date": 1442466620, "post_id": 32354501, "comment_id": 53095969, "body": "Can you explain the problem with some code. I feel that what you have given in your question is a your hand made solution. I feel your question somewhat related to my question: <a href=\"http://stackoverflow.com/questions/9477581/force-all-classes-to-implement-override-a-pure-virtual-method-in-multi-level\">Force all classes to implement / override a &#39;pure virtual&#39; method in multi-level inheritance hierarchy</a>"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1441201859, "post_id": 32354886, "comment_id": 52583058, "body": "Add <code>final</code> to <code>myFunc</code> in <code>CRTP</code> as well to avoid confusion."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1441202270, "post_id": 32354886, "comment_id": 52583329, "body": "@Walter I may have misunderstood, but if <code>myFunc</code> calls the a specialized <code>myFuncImp</code> how does that differ? A call to <code>Base::myFunc</code> will still boil down to the correct <code>CRTP&lt;&gt;::myFuncImp</code>?"}, {"owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "edited": false, "score": 0, "creation_date": 1441881156, "post_id": 32354886, "comment_id": 52858360, "body": "How can I hide the myFuncImp to direct calling through Imp*? I don&#39;t want clients of the interface wondering if they should use myFunc or myFuncImp?"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "edited": false, "score": 0, "creation_date": 1441897606, "post_id": 32354886, "comment_id": 52870246, "body": "provide them with <code>Base*</code> and <code>myFuncImpl</code> will be hidden."}], "tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": false, "score": 6, "last_activity_date": 1441202382, "last_edit_date": 1441202382, "creation_date": 1441201401, "answer_id": 32354886, "question_id": 32354501, "link": "https://stackoverflow.com/questions/32354501/ensure-that-class-derived-from-parent-crtp-class-implements-function/32354886#32354886", "title": "Ensure that class derived from parent CRTP class implements function", "body": "<p>Why not just use a different name for the function? Then you will have a compilation error for each derivation of <code>CRTP</code> class without and implementation. Consider this:</p>\n\n<pre><code>class Base\n{\npublic:\n    class Params\n    {\n    public:\n        virtual ~Params() {}\n    };\n\n    virtual void myFunc( Params&amp; p ) = 0;\n};\n\ntemplate&lt; typename T &gt;\nclass CRTP : public Base\n{\npublic:\n    virtual void myFunc( Base::Params&amp; p ) final override\n    {\n        typename T::Params&amp; typedParams = dynamic_cast&lt;typename T::Params&amp;&gt;( p );\n        static_cast&lt;const T*&gt;( this )-&gt;myFuncImp( typedParams );\n    }\n\n};\n\nclass Imp : public CRTP&lt;Imp&gt;\n{\npublic:\n    class Params : public CRTP&lt;Imp&gt;::Params\n    {\n    public:\n        virtual ~Params() {}\n\n        int x, y, z;\n    };\n};\n\nint main(int argc, char** argv)\n{\n    Imp imp;\n}\n</code></pre>\n\n<p>Compilation fails since there is no <code>myFuncImp</code> provided by <code>Imp</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "edited": false, "score": 0, "creation_date": 1442333738, "post_id": 32581526, "comment_id": 53035537, "body": "&quot;the unwieldy dynamic_cast&lt;&gt;&quot; is rather needed as there is no way to know if the passed p is of the correct type. The point of CRTP is to avoid duplicating the dynamic casting in the (multiple) Imp classes."}, {"owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "edited": false, "score": 0, "creation_date": 1442334074, "post_id": 32581526, "comment_id": 53035765, "body": "Oh, and making the function protected (on its own) doesn&#39;t work as CRTP&lt;Imp&gt; has no access to private/protected members in Imp. However, I added CRTP&lt;Imp&gt; as a friend to Imp to work around this."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 0, "last_activity_date": 1442335165, "last_edit_date": 1442335165, "creation_date": 1442306550, "answer_id": 32581526, "question_id": 32354501, "link": "https://stackoverflow.com/questions/32354501/ensure-that-class-derived-from-parent-crtp-class-implements-function/32581526#32581526", "title": "Ensure that class derived from parent CRTP class implements function", "body": "<p>The idea of using a different name for the member of derived classes (as in Rudolfs Bundulis answer) is good. However, I would make this a <code>protected</code> method so that users are not tempted to try using it. </p>\n\n<p>Also, using <code>Derived::Params</code> in the CRTP base raises additional complications (since <code>Derived=Imp</code> is not fully declared at point of its use in <code>CRTP&lt;Imp&gt;</code>), so best keep <code>Base::Params</code> as the function parameter throughout.</p>\n\n<pre><code>struct Base                                          // public user interface\n{\n  struct Params { virtual ~Params() {} };\n  virtual void myFunc( Params&amp; ) = 0;\n};\n\nnamespace details {                                  // deter clients from direct access\n  template&lt; typename Derived &gt;\n  struct CRTP : Base\n  {\n    virtual void myFunc( Params&amp; p ) final           // cannot be overridden\n    {\n      static_cast&lt;Derived*&gt;( this )-&gt;myFuncImp(p);\n    }\n  };\n\n  class Imp : public CRTP&lt;Imp&gt;\n  {\n    struct Params : CRTP&lt;Imp&gt;::Params { int x, y, z; };\n    void myFuncImpDetails( Params* );\n  protected:                                         // protected from clients\n    void myFuncImp( Base::Params&amp; p )\n    {\n      auto pars=dynamic_cast&lt;Params*&gt;(&amp;p);\n      if(pars)\n        myFuncImpDetails(pars);\n      else\n        throw std::runtime_error(\"invalid parameter type provided to Imp::myFunc()\");\n    }\n  };\n} // namespace details\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "edited": false, "score": 0, "creation_date": 1442414781, "post_id": 32592574, "comment_id": 53074529, "body": "Could you elaborate on the &quot;failure&quot; of the base class design? How could it be improved?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "edited": false, "score": 0, "creation_date": 1442427157, "post_id": 32592574, "comment_id": 53082361, "body": "@user2746401 I do not imagine any use case for this. The closest is  event handling, but that should not switch to static polymorphism."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1442341612, "last_edit_date": 1442341612, "creation_date": 1442339536, "answer_id": 32592574, "question_id": 32354501, "link": "https://stackoverflow.com/questions/32354501/ensure-that-class-derived-from-parent-crtp-class-implements-function/32592574#32592574", "title": "Ensure that class derived from parent CRTP class implements function", "body": "<p>You may break dynamic polymorphism and switch to static polymorphism:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nclass Base\n{\n    public:\n    class Params\n    {\n        public:\n        virtual ~Params() {}\n    };\n\n    virtual ~Base() {}\n    virtual void myFunc(Params&amp; p) = 0;\n};\n\n\nnamespace Detail {\n    // Helper for the static assertion\n    // Omit this if \"\u2018void CRTP&lt;T&gt;::myFunc(Base::Params&amp;) [with T = Imp]\u2019 is private\" is good enough\n    struct is_MyFunc_callable_implementation\n    {\n        template&lt;typename Object, typename Params&gt;\n        static decltype(std::declval&lt;Object&gt;().myFunc(std::declval&lt;Params&amp;&gt;()), std::true_type())\n        test(int);\n\n        template&lt;typename Object, typename Params&gt;\n        static std::false_type\n        test(...);\n    };\n\n    template&lt;typename Object, typename... A&gt;\n    using is_MyFunc_callable = decltype(is_MyFunc_callable_implementation::test&lt;Object, A...&gt;(0));\n\n    // Helper function to break recursion\n    template&lt;typename Object, typename Params&gt;\n    inline void invokeMyFunc(Object&amp; object, Params&amp; params) {\n        static_assert(is_MyFunc_callable&lt;Object, Params&gt;::value, \"The derived class is missing 'MyFunc'\");\n        object.myFunc(params);\n    }\n} // namespace Detail\n\ntemplate&lt;typename T&gt;\nclass CRTP: public Base\n{\n    private:\n    // Make this final!\n    virtual void myFunc(Base::Params&amp; p) override final\n    {\n        static_assert(std::is_base_of&lt;Base, T&gt;::value, \"T must derive from CRTP\");\n        typename T::Params&amp; typeParams = dynamic_cast&lt;typename T::Params&amp;&gt;(p);\n        Detail::invokeMyFunc(static_cast&lt;T&amp;&gt;(*this), typeParams);\n    }\n};\n\nclass Imp: public CRTP&lt;Imp&gt;\n{\n    public:\n    class Params: public CRTP&lt;Imp&gt;::Params\n    {\n        public:\n        int x = 1;\n        int y = 2;\n        int z = 3;\n    };\n\n    // Without this function:\n    // error: static assertion failed: The derived class is missing 'MyFunc'\n    // error: \u2018void CRTP&lt;T&gt;::myFunc(Base::Params&amp;) [with T = Imp]\u2019 is private\n    #if 0\n    void myFunc(Params&amp; p) {\n        std::cout &lt;&lt; p.x &lt;&lt; p.y &lt;&lt; p.z &lt;&lt; '\\n';\n    }\n    #endif\n};\n\nint main()\n{\n    Imp imp;\n    Base* base = &amp;imp;\n    Imp::Params params;\n    base-&gt;myFunc(params);\n}\n</code></pre>\n\n<p>However, my opinion is: The base class design is a failure and the code above is just a work around.</p>\n"}], "owner": {"reputation": 2477, "user_id": 2746401, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c7c0dde3be85610cfe6ea20419409914?s=128&d=identicon&r=PG&f=1", "display_name": "user2746401", "link": "https://stackoverflow.com/users/2746401/user2746401"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "answer_count": 3, "score": 10, "last_activity_date": 1442341612, "creation_date": 1441200367, "last_edit_date": 1495541201, "question_id": 32354501, "link": "https://stackoverflow.com/questions/32354501/ensure-that-class-derived-from-parent-crtp-class-implements-function", "title": "Ensure that class derived from parent CRTP class implements function", "body": "<p>Brief:</p>\n\n<p>I want to make sure a derived class implements a member function required by a function within the parent CRTP class.</p>\n\n<p>Detail:</p>\n\n<p>I have some code like this</p>\n\n<pre><code>class Base\n{\npublic:\n    class Params\n    {\n    public:\n        virtual ~Params() {}\n    };\n\n    virtual void myFunc( Params&amp; p ) = 0;\n};\n\ntemplate&lt; typename T &gt;\nclass CRTP : public Base\n{\npublic:\n    virtual void myFunc( Base::Params&amp; p ) override\n    {\n        typename T::Params&amp; typedParams = dynamic_cast&lt;typename T::Params&amp;&gt;( p );\n        static_cast&lt;T*&gt;( this )-&gt;myFunc( typeParams );\n    }\n\n};\n\nclass Imp : public CRTP&lt;Imp&gt;\n{\npublic:\n    class Params : public CRTP&lt;Imp&gt;::Params\n    {\n    public:\n        virtual ~Params() {}\n\n        int x, y, z;\n    };\n\n    virtual void myFunc( Imp::Params&amp; p );\n};\n</code></pre>\n\n<p>The intention is that I can have multiple <code>Imp</code> child classes all doing different things in <code>myFunc</code> and accepting their own required parameters. The interface provided by <code>Base</code> is then utilized by higher level functions that only need to have a pointer/reference of type <code>Base::Params</code> and <code>Base</code>. My problem is making sure that any <code>Imp</code> provides a specialized <code>myFunc</code>. To avoid infinite recursion <code>Imp</code> must implement <code>myFunc</code>.</p>\n\n<p>My first try was adding a pure virtual function to <code>CRTP</code></p>\n\n<pre><code>virtual void myFunc( typename T::Params&amp; p ) = 0;\n</code></pre>\n\n<p>but that doesn't work as <code>Imp</code> hasn't been fully defined when <code>CRTP</code> is being defined. <a href=\"https://stackoverflow.com/questions/23367221/ensure-derived-class-implements-static-method\">This question</a> uses a <code>static_assert</code> which made me think of doing the same with the <code>static_assert</code> within <code>CRTP::myFunc</code>. Except I'm not sure what should be the expression in the static assertion for a non-static function.</p>\n\n<ol>\n<li>Can I use a <code>static_assert</code> for what I need?</li>\n<li>Is that the best/cleanest way to ensure the derived class has the needed function?</li>\n<li>Have I got carried away with my class design and there is a better way of doing things?</li>\n</ol>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "log4cxx"], "comments": [{"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 2, "creation_date": 1441200374, "post_id": 32354413, "comment_id": 52581915, "body": "Blind guess: If a <i>release</i> compile makes a <i>debug</i> assertion fail, I&#39;d suspect broken project settings, because the debug assertion <i>should</i> be deactivated. Perhaps <code>DEBUG</code> defined somewhere still?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 0, "creation_date": 1441200604, "post_id": 32354413, "comment_id": 52582090, "body": "Looking at my (10.0) includes, this check is only enabled <code>#if _ITERATOR_DEBUG_LEVEL == 2</code>, which shouldn&#39;t happen in release. But the message <i>does</i> raise some questions about the code triggering it. You <i>should</i> double-check the iterator in question... (and no, I don&#39;t think the problem is in log4cxx, but without the <i>triggering</i> code it&#39;s hard to say). Perhaps you&#39;re looking at an unitialized value somewhere that <i>happens</i> to work in Debug because it&#39;s zero-initialized or somesuch. (MSVC is not my home turf, I&#39;m still just guessing.)"}], "owner": {"reputation": 1, "user_id": 5292704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/484c6707c5c54729bacf2fb538a54863?s=128&d=identicon&r=PG", "display_name": "Gerard", "link": "https://stackoverflow.com/users/5292704/gerard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441200157, "creation_date": 1441200157, "question_id": 32354413, "link": "https://stackoverflow.com/questions/32354413/log4cxx-visual-studio-2010-configuration-release-x64", "title": "log4cxx visual studio 2010 configuration release x64", "body": "<p>I have a console application with visual studio 2010 that uses log4cxx, the application with configuration debug x64 works well, the problem is that in Release x64 log4xcc throws this error:</p>\n\n<p>Debug Assertion Failed!</p>\n\n<p>Program: C\\Windows\\SYSTEM32\\MSVCP120D.dll File: C\\Program Files (x86)\\Micrososft Visual Studio\\12.0\\VC\\include\\xstring Linia:79</p>\n\n<p>Expression: string iterator not dereferencacle</p>\n\n<p>Looking through internet I have not found any project with the log4cxx that it works with configuration release x64, any solution for my problem ?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "oop", "namespaces", "friend"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1441200519, "post_id": 32354376, "comment_id": 52582019, "body": "If you want only one other class to use it, then why not make it a private nested class of the one that uses it?"}, {"owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1441200812, "post_id": 32354376, "comment_id": 52582243, "body": "@user2079303 I might use it in more than one class in the same namespace. I edited the diagram."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1441200975, "post_id": 32354376, "comment_id": 52582384, "body": "<code>friend is considered as an evil keyword that destroy every OOP concept and should never be used</code> --- this is simply not true. Besides, OOP is not the be all and end all for everyone. Namespaces are open, everyone can add a class of their own to any namespace (except std), which is why namespace-level access would be meaningless."}], "answers": [{"tags": [], "owner": {"reputation": 5013, "user_id": 4181011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0C2A9.jpg?s=128&g=1", "display_name": "Simon Kraemer", "link": "https://stackoverflow.com/users/4181011/simon-kraemer"}, "is_accepted": false, "score": 0, "last_activity_date": 1441201032, "creation_date": 1441201032, "answer_id": 32354749, "question_id": 32354376, "link": "https://stackoverflow.com/questions/32354376/use-of-friend-as-namespace-private-fields-or-methods/32354749#32354749", "title": "Use of friend as &quot;namespace-private&quot; fields or methods", "body": "<p>When you use <code>friend</code> you won't be able to restrict access to anything private (e.g. member variables).</p>\n\n<p>I may have a better solution. \nYou define a struct with a private constructor that defines all classes in your \"package\" as friend.\nThen you change the constructor(s) of the classes you want to restrict in access from outside the package to take a reference to that object.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\n\nstruct code_unlocker\n{\n    friend struct A;\n    friend struct B;\n    friend struct C;\nprivate:\n    code_unlocker() {};\n};\n\nstruct A\n{\n    A(const code_unlocker&amp;)  //Restricted: Only callabble by friends of code_unlocker\n    {\n    };\n};\n\n\nstruct B\n{\n    B(const code_unlocker&amp;)  //Restricted: Only callabble by friends of code_unlocker\n    {\n        A a = A(code_unlocker());  //Works\n    };\n};\n\n\nstruct C\n{\n    C()//Accessible from outside\n    {\n        B b = B(code_unlocker()); //Works\n    };\n};\n\nusing namespace std;\nint main(int, char *[])\n{\n    A a = A(code_unlocker()); //Doesn't work\n    B b = B(code_unlocker()); //Doesn't work\n    C c = C(); //Works\n\n}\n</code></pre>\n"}], "owner": {"reputation": 5277, "user_id": 4745527, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/mVYxV.png?s=128&g=1", "display_name": "Aracthor", "link": "https://stackoverflow.com/users/4745527/aracthor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441201032, "creation_date": 1441200082, "last_edit_date": 1495542121, "question_id": 32354376, "link": "https://stackoverflow.com/questions/32354376/use-of-friend-as-namespace-private-fields-or-methods", "title": "Use of friend as &quot;namespace-private&quot; fields or methods", "body": "<p>I have a question which is basically the quite opposite of <a href=\"https://stackoverflow.com/questions/182278/is-there-a-way-to-simulate-the-c-friend-concept-in-java/18634125#18634125\">this one</a>.</p>\n\n<p>As we can see in <a href=\"https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private/215505#215505\">this post</a>, Java does have one more access mode than C++ : package one.<br>\nIn my code, I would like to make a class that only some other class could instantiate and use, from its own namespace, and not outside. So it looks like a Java \"package-privacy access\" case, but this option is not available in C++.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qtIfE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qtIfE.png\" alt=\"UML Diagram\"></a></p>\n\n<p>My idea to implement it is to make constructor/destructor and most of methods of this class as <code>private</code> or <code>protected</code>, and to give access to other classes from the same namespace with <code>friend</code> keyword.<br>\nBut, almost everywhere on forums as on my personal talks with other C++ programmers, <code>friend</code> is considered as an evil keyword that destroy every OOP concept and should never be used.</p>\n\n<p>Would it be adequate to use it in this precise case ? Or is there any other solution without <code>friend</code> use ?</p>\n"}, {"tags": ["java", "c++", "ifstream", "core"], "comments": [{"owner": {"reputation": 12945, "user_id": 2246488, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/7f300ea1293fd5e1b95783b6511d5a13?s=128&d=identicon&r=PG&f=1", "display_name": "James Wierzba", "link": "https://stackoverflow.com/users/2246488/james-wierzba"}, "edited": false, "score": 0, "creation_date": 1441200518, "post_id": 32354333, "comment_id": 52582017, "body": "Try to find out what line it is crashing on. Best thing to do here is good ol print statements. Or if you are using an IDE for your C++ development, you can use breakpoints by attaching the C++ IDE to the java process."}, {"owner": {"reputation": 5344, "user_id": 3899583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8150bb6257232b6c9b0c89c5bd4c9ad6?s=128&d=identicon&r=PG&f=1", "display_name": "vojta", "link": "https://stackoverflow.com/users/3899583/vojta"}, "edited": false, "score": 0, "creation_date": 1441200658, "post_id": 32354333, "comment_id": 52582130, "body": "What did it write into the log file? <code>C:\\workspace\\netbeansCAEE\\JNAHelloWorldMWrobel\\hs_err_pid561&zwnj;&#8203;2.log</code>"}, {"owner": {"reputation": 51, "user_id": 4791050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c430bebca8003242bd693583d467d0?s=128&d=identicon&r=PG&f=1", "display_name": "ntokarsk", "link": "https://stackoverflow.com/users/4791050/ntokarsk"}, "edited": false, "score": 0, "creation_date": 1441202412, "post_id": 32354333, "comment_id": 52583434, "body": "James; it is crashing on std::ifstream input_file;  (fstream included)"}, {"owner": {"reputation": 51, "user_id": 4791050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c430bebca8003242bd693583d467d0?s=128&d=identicon&r=PG&f=1", "display_name": "ntokarsk", "link": "https://stackoverflow.com/users/4791050/ntokarsk"}, "edited": false, "score": 0, "creation_date": 1441202518, "post_id": 32354333, "comment_id": 52583503, "body": "vojta: here is hs_err_pid612.log content: <a href=\"http://pastebin.com/g7q2LUV3\" rel=\"nofollow noreferrer\">pastebin.com/g7q2LUV3</a>"}], "owner": {"reputation": 51, "user_id": 4791050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3c430bebca8003242bd693583d467d0?s=128&d=identicon&r=PG&f=1", "display_name": "ntokarsk", "link": "https://stackoverflow.com/users/4791050/ntokarsk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441199985, "creation_date": 1441199985, "question_id": 32354333, "link": "https://stackoverflow.com/questions/32354333/calling-dll-in-java-failed-to-write-core-dump", "title": "Calling DLL in java: Failed to write core dump", "body": "<p>Im trying to build DLL with C++ and then call it from Java.\nDLL has one simple functions which should read line from file, make some operations and then save file in binary mode. The code below:</p>\n\n<pre><code>    const char* filepath = \"C:\\\\tmp\\\\test.txt\";\n\nstd::ifstream input_file;\ninput_file.open(filepath, std::ios::in));\n\nchar line_array[100];\n\nwhile( !input_file.eof() ) {\n    input_file.getline(line_array, sizeof(input_file));\n}\ninput_file.close();\n\n//some operations\n//that gives me     \nlong int arrayToSave[100];\n\nstd::ofstream file;\nconst char* path = \"C:\\\\tmp\\\\result.txt\";\nfile.open(path, std::ios::out | std::ios::binary);\nif (file.good()) {\n    file.write((char*) &amp;arrayToSave, sizeof (arrayToSave));\n    file.close();\n    res = 1;\n}\n</code></pre>\n\n<p>Everything is fine till I try to call it from Java, error below:</p>\n\n<pre><code> {\n A fatal error has been detected by the Java Runtime Environment:\n\n  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x0000000180103fd9, pid=5612, tid=5728\n\n JRE version: Java(TM) SE Runtime Environment (7.0_51-b13) (build 1.7.0_51-b13)\n Java VM: Java HotSpot(TM) 64-Bit Server VM (24.51-b03 mixed mode windows-amd64 compressed oops)\n Problematic frame:\n C  [cygwin1.dll+0xc3fd9]\n\n Failed to write core dump. Minidumps are not enabled by default on client versions of Windows\n\n An error report file with more information is saved as:\n C:\\workspace\\netbeansCAEE\\JNAHelloWorldMWrobel\\hs_err_pid5612.log\n</code></pre>\n\n<p>}</p>\n\n<p>I have already enabled small memory dumps in Windows 7 options.</p>\n"}]