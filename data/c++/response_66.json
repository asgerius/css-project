[{"tags": ["c++", "size", "binaryfiles", "unsigned-integer"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1460591793, "post_id": 36611492, "comment_id": 60819937, "body": "Defining <code>void main()</code> in global namespae is illegal in standard C++. You should use standard <code>int main()</code>."}, {"owner": {"reputation": 163, "user_id": 5269030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a863b98bbe075670b0d8ab36b564b0cf?s=128&d=identicon&r=PG&f=1", "display_name": "S.H.", "link": "https://stackoverflow.com/users/5269030/s-h"}, "reply_to_user": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1460591863, "post_id": 36611492, "comment_id": 60819959, "body": "right. I&#39;ll correct it;"}], "answers": [{"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": true, "score": 1, "last_activity_date": 1460591692, "creation_date": 1460591692, "answer_id": 36611527, "question_id": 36611492, "link": "https://stackoverflow.com/questions/36611492/cant-write-correctly-large-unsigned-ints-to-binary-file-c/36611527#36611527", "title": "can&#39;t write correctly large unsigned ints to binary file - c++", "body": "<p>The number <code>10</code> is a newline character LF, and it is converted to CRLF because the file is opened in text mode.</p>\n\n<p>Open files in binary mode to deal with binary files.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing std::string;\nusing std::cin;\nusing std::fstream;\nusing std::ios;\n\nint main()\n{\n    string filename;\n    cin &gt;&gt; filename;\n    fstream mystream;\n    mystream.open(filename, ios::out | ios::binary); // add OR with ios::binary\n    if (mystream)\n        for (unsigned int i = 0; i &lt; 3200; i++)\n            mystream.write((char*)&amp;i, sizeof(unsigned int));\n    mystream.close();\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 5269030, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a863b98bbe075670b0d8ab36b564b0cf?s=128&d=identicon&r=PG&f=1", "display_name": "S.H.", "link": "https://stackoverflow.com/users/5269030/s-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 36611527, "answer_count": 1, "score": 0, "last_activity_date": 1460591905, "creation_date": 1460591470, "last_edit_date": 1460591905, "question_id": 36611492, "link": "https://stackoverflow.com/questions/36611492/cant-write-correctly-large-unsigned-ints-to-binary-file-c", "title": "can&#39;t write correctly large unsigned ints to binary file - c++", "body": "<p>In my project i need to write to a binary file sequential unsigned ints, and it's important that each number takes exact 4 bytes. \nBut when i open the binary file with a hex editor, i see this strange happening:\nthe numbers are written correctly just up to number 9; before number 10 he will add another extra byte and write '13' (and already messed up with my file).\nAnd strange things continue to happen- from number 30 and on will be written different characters, one aside each number.\nwhy is that? how to fix, at least the size issue?\nHere is my simple sample code:</p>\n\n<pre><code>int main()\n{\n    string filename;\n    cin &gt;&gt; filename;\n    fstream mystream;\n    mystream.open(filename, ios::out);\n    if (mystream)\n        for (unsigned int i = 0; i &lt; 3200; i++)\n            mystream.write((char*)&amp;i, sizeof(unsigned int));\n    mystream.close();\n\n    return 0;\n}\n</code></pre>\n\n<p>and is attached an image of what i see in the file:\n<a href=\"http://i.stack.imgur.com/704uE.png\" rel=\"nofollow\">file capture on hex editor</a></p>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "compiler-optimization", "undefined-behavior", "compiler-options", "observable-behavior"], "comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1460591178, "post_id": 36611401, "comment_id": 60819729, "body": "The two alternatives in your final paragraph are not mutually exclusive."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1460591196, "post_id": 36611401, "comment_id": 60819738, "body": "If UB is involved, then you cannot expect C++ standard to describe the resulting program and its result. (&quot;...imposes no requirements&quot;)"}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1460591212, "post_id": 36611401, "comment_id": 60819747, "body": "@BenjaminLindley Well, I said &quot;or&quot;, not &quot;xor&quot;. :)"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1460593240, "post_id": 36611401, "comment_id": 60820295, "body": "I&#39;m suprised that you got the crash with <code>-O2</code> -- I would expect the function to be inlined and then the uses of <code>value</code> to be copy-propagated away (as happens when you write it all in main).  The fact that it was not indicates you hit an odd corner case where a possible optimization is not done for some reason."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1462098883, "post_id": 36611401, "comment_id": 61486999, "body": "-O2 is a set of optimization options. If you want to investigate this further try manually activating/deactivating the set piece by piece."}], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460638002, "post_id": 36611455, "comment_id": 60842945, "body": "Ah, is this where the phrase &quot;nasal demons&quot;, routinely used by commenters on SO actually comes from? I used to think people employed it sarcastically, meaning &quot;you haven&#39;t given enough code for us to answer your question&quot;. But now I see that it may be actually referring to UB."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460638333, "post_id": 36611455, "comment_id": 60843239, "body": "It&#39;s a decades-old term, and it means the effects of UB"}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460639143, "post_id": 36611455, "comment_id": 60843919, "body": "Could you please take a look at <a href=\"http://stackoverflow.com/questions/36611401/is-this-compiler-optimization-inconsistency-entirely-explained-by-undefined-beha#comment60841836_36614702\">my comment</a> under @supercat&#39;s answer? I understand that the standard places no requirements on programs, which invoke UB. However, I&#39;m curious whether <i>in practice</i> there is a link between optimization and the nature of UB, exhibited by such programs."}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1460591239, "creation_date": 1460591239, "answer_id": 36611455, "question_id": 36611401, "link": "https://stackoverflow.com/questions/36611401/is-this-compiler-optimization-inconsistency-entirely-explained-by-undefined-beha/36611455#36611455", "title": "Is this compiler optimization inconsistency entirely explained by undefined behaviour?", "body": "<p>Your program has undefined behaviour. This means that <em>anything may happen</em>. The program is not covered at all by the C++ Standard. You should not go in with any expectations.</p>\n\n<p>It's often said that undefined behaviour may \"launch missiles\" or \"cause demons to fly out of your nose\", to reinforce that point. The latter is more far-fetched but the former is feasible, imagine your code is on a nuclear launch site and the wild pointer happens to write a piece of memory that starts global thermouclear war..</p>\n"}, {"comments": [{"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460636687, "post_id": 36614702, "comment_id": 60841836, "body": "That&#39;s interesting. So, does it mean that <b>in practice</b>, the most egregious instances of undefined behaviour actually occur due to aggressive compiler optimizations? (By &quot;egregious&quot; I mean not simply a crash, but the program executing and doing things the programmer never intended.)"}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460637389, "post_id": 36614702, "comment_id": 60842435, "body": "(I understand that <i>theoretically</i>, even if optimization is disabled entirely, no assumptions can be made as to the behaviour of the program, which contains UB. But the code I posted actually behaved in a predictable way (caused segmentation fault) when optimizations were disabled, that&#39;s why I&#39;m curious.)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460647477, "post_id": 36614702, "comment_id": 60850922, "body": "@TerraPass: A straightforward interpretation of your program&#39;s meaning would be &quot;write a value somewhere in memory--I don&#39;t care where&quot;.  As I said in my first sentence, because there&#39;s almost no limit to what actions could be triggered by writing to areas of memory, writing to an unknown area of memory is a universally-recognized recipe for disaster.  On many machines, writing to certain areas of memory will trigger a segmentation fault; since you didn&#39;t say where you wanted the value written, you should not be surprised if the compiler arbitrarily chose an area that triggered such a fault."}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460648946, "post_id": 36614702, "comment_id": 60852074, "body": "Yes. Like I said, I&#39;m <i>not</i> surprised by my code causing a segmentation fault: that&#39;s exactly what I intended when writing it. On the contrary, what surprises me is that, <i>when optimization is enabled</i>, no segmentation fault occurs. As far as I understand, this is due to the nature of UB, since <i>&quot;anything may happen&quot;</i>, as M.M puts it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460650258, "post_id": 36614702, "comment_id": 60852886, "body": "@TerraPass: I don&#39;t know that I&#39;d consider that any more surprising than having something like <code>int main(void) { int x=0; int y=1234&#47;x; return y;}</code> not trigger a divide-by-zero fault (or SIGFPE or whatever).  The compiler knows when the <code>int y=1234&#47;x;</code> is reached that <code>x</code> cannot hold a value that would make the computation meaningful, so there&#39;s no reason for it to generate code that would attempt the operation.  It was common for compilers to add code to force a divide exception, to make behavior when using constants match the behavior when using non-constants, but it wasn&#39;t universal."}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460650625, "post_id": 36614702, "comment_id": 60853091, "body": "Yes, I suppose this makes sense. One last question: what if we expressly forbid the compiler to optimize (by setting <code>-O0</code>, for example). Would it be reasonable for us in this case to assume that a divide-by-zero fault will always be triggered?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460652680, "post_id": 36614702, "comment_id": 60854349, "body": "@TerraPass: I would regard an assumption that reading a variable will yield the last value written [and that someone won&#39;t e.g. pause the code in a debugger and edit the value of the variable] as an &quot;optimization&quot; that it should be possible to disable, so the behavior of the code with an <code>x</code> that&#39;s always zero should be the same as with an <code>x</code> that happens to be zero [though I wouldn&#39;t fault a compiler writer that thought testing the divisor and skipping the division in the zero case was more useful than letting divide-by-zero trap].  For <code>int y=1234&#47;0;</code>, omission of the trap would not be..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1460652786, "post_id": 36614702, "comment_id": 60854412, "body": "...an &quot;optimization&quot; as such, since <code>int y=const1&#47;const2;</code> would naturally generate code equivalent to <code>int y=someConstant;</code> for all cases where the divide wouldn&#39;t trap, and a compiler would have to go out of its way to cause a trap in those cases where the constants would cause it to do so.  Likewise, even if <code>x&#47;y</code> would trap when <code>x</code> happens to be INT_MIN and <code>y</code> happens to be -1, I would not be surprised if <code>x&#47;-1</code> fails to trap when <code>x</code> is INT_MIN, since I wouldn&#39;t consider replacement with <code>x=-x;</code> to be an &quot;optimization&quot; as such."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": true, "score": 1, "last_activity_date": 1460612673, "creation_date": 1460612673, "answer_id": 36614702, "question_id": 36611401, "link": "https://stackoverflow.com/questions/36611401/is-this-compiler-optimization-inconsistency-entirely-explained-by-undefined-beha/36614702#36614702", "title": "Is this compiler optimization inconsistency entirely explained by undefined behaviour?", "body": "<p>Writing unknown pointers has always been something which could have unknown consequences.  What's nastier is a currently-fashionable philosophy which suggests that compilers should assume that programs will never receive inputs that cause UB, and should thus optimize out any code which would test for such inputs if such tests would not prevent UB from occurring.</p>\n\n<p>Thus, for example, given:</p>\n\n<pre><code>uint32_t hey(uint16_t x, uint16_t y)\n{\n  if (x &lt; 60000)\n    launch_missiles();\n  else\n    return x*y;\n}\nvoid wow(uint16_t x)\n{\n  return hey(x,40000);\n}\n</code></pre>\n\n<p>a 32-bit compiler could legitimately replace <code>wow</code> with an unconditional call to\n<code>launch_missiles</code> without regard for the value of <code>x</code>, since <code>x</code> \"can't possibly\" be greater than 53687 (any value beyond that would cause the calculation of x*y to overflow.  Even though the authors of C89 noted that the majority of compilers of that era would calculate the correct result in a situation like the above, since the Standard doesn't impose any requirements on compilers, hyper-modern philosophy regards it as \"more efficient\" for compilers to assume programs will never receive inputs that would necessitate reliance upon such things.</p>\n"}], "owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 36614702, "answer_count": 2, "score": -1, "last_activity_date": 1462097051, "creation_date": 1460590929, "last_edit_date": 1495540780, "question_id": 36611401, "link": "https://stackoverflow.com/questions/36611401/is-this-compiler-optimization-inconsistency-entirely-explained-by-undefined-beha", "title": "Is this compiler optimization inconsistency entirely explained by undefined behaviour?", "body": "<p>During a discussion I had with a couple of colleagues the other day I threw together a piece of code in C++ to illustrate a memory access violation.</p>\n\n<p>I am currently in the process of slowly returning to C++ after a long spell of almost exclusively using languages with garbage collection and, I guess, my loss of touch shows, since I've been quite puzzled by the behaviour my short program exhibited.</p>\n\n<p>The code in question is as such:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing std::cout;\nusing std::endl;\n\nstruct A\n{\n    int value;\n};\n\nvoid f()\n{\n    A* pa;    // Uninitialized pointer\n    cout&lt;&lt; pa &lt;&lt; endl;\n    pa-&gt;value = 42;    // Writing via an uninitialized pointer\n}\n\nint main(int argc, char** argv)\n{   \n    f();\n\n    cout&lt;&lt; \"Returned to main()\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I compiled it with GCC 4.9.2 on Ubuntu 15.04 with <code>-O2</code> compiler flag set. My expectations when running it were that it would crash when the line, denoted by my comment as \"writing via an uninitialized pointer\", got executed. </p>\n\n<p>Contrary to my expectations, however, the program ran successfully to the end, producing the following output:</p>\n\n<pre><code>0\nReturned to main()\n</code></pre>\n\n<p>I recompiled the code with a <code>-O0</code> flag (to disable all optimizations) and ran the program again. This time, the behaviour was as I expected:</p>\n\n<pre><code>0\nSegmentation fault\n</code></pre>\n\n<p>(Well, <em>almost</em>: I didn't expect a pointer to be initialized to 0.) Based on this observation, I presume that when compiling with <code>-O2</code> set, the fatal instruction got optimized away. This makes sense, since no further code accesses the <code>pa-&gt;value</code> after it's set by the offending line, so, presumably, the compiler determined that its removal would not modify the observable behaviour of the program.</p>\n\n<p>I reproduced this several times and every time the program would crash when compiled without optimization and miraculously work, when compiled with <code>-O2</code>.</p>\n\n<p>My hypothesis was further confirmed when I added a line, which outputs the <code>pa-&gt;value</code>, to the end of <code>f()</code>'s body:</p>\n\n<pre><code>cout&lt;&lt; pa-&gt;value &lt;&lt; endl;\n</code></pre>\n\n<p>Just as expected, with this line in place, the program consistently crashes, regardless of the optimization level, with which it was compiled.</p>\n\n<p>This all makes sense, if my assumptions so far are correct. \nHowever, where my understanding breaks somewhat is in case where I move the code from the body of <code>f()</code> directly to <code>main()</code>, like so:</p>\n\n<pre><code>int main(int argc, char** argv)\n{   \n    A* pa;\n    cout&lt;&lt; pa &lt;&lt; endl;\n    pa-&gt;value = 42;\n    cout&lt;&lt; pa-&gt;value &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>With optimizations disabled, this program crashes, just as expected. With <code>-O2</code>, however, the program successfully runs to the end and produces the following output:</p>\n\n<pre><code>0\n42\n</code></pre>\n\n<p>And this makes no sense to me.</p>\n\n<p><a href=\"https://stackoverflow.com/a/367662/1051764\">This answer</a> mentions \"dereferencing a pointer that has not yet been definitely initialized\", which is exactly what I'm doing, as one of the sources of undefined behaviour in C++.</p>\n\n<p>So, is this difference in the way optimization affects the code in <code>main()</code>, compared to the code in <code>f()</code>, entirely explained by the fact that my program contains UB, and thus compiler is technically free to \"go nuts\", or is there some fundamental difference, which I don't know of, between the way code in <code>main()</code> is optimized, compared to code in other routines?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1460590858, "post_id": 36611377, "comment_id": 60819621, "body": "The constructor initializes data of the local variables, then throw them away without using them. Is it what you want to do?"}, {"owner": {"reputation": 3124, "user_id": 2861681, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/E130t.png?s=128&g=1", "display_name": "vmg", "link": "https://stackoverflow.com/users/2861681/vmg"}, "edited": false, "score": 0, "creation_date": 1460591100, "post_id": 36611377, "comment_id": 60819699, "body": "Take a look at <a href=\"http://www.cplusplus.com/doc/tutorial/classes/\" rel=\"nofollow noreferrer\">this</a> tutorial. The &#39;constructor&#39; bit should help you. Also indenting and capitalizing your code properly should help you a lot, so it&#39;s worth the effort."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460592580, "post_id": 36611377, "comment_id": 60820148, "body": "I <i>honestly</i> don&#39;t know where to begin, and for a guy that has diarrhea of the mouth worse than a teenage-girl on snap-chat, facebook, twitter, and instagram <i>combined</i>, that&#39;s saying something."}, {"owner": {"reputation": 67, "user_id": 4215399, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006434233538/picture?type=large", "display_name": "Fiery-Skyline", "link": "https://stackoverflow.com/users/4215399/fiery-skyline"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460657606, "post_id": 36611377, "comment_id": 60857130, "body": "@WhozCraig I completely agree with you but this is what I have to work with right now."}], "owner": {"reputation": 67, "user_id": 4215399, "user_type": "registered", "profile_image": "https://graph.facebook.com/100006434233538/picture?type=large", "display_name": "Fiery-Skyline", "link": "https://stackoverflow.com/users/4215399/fiery-skyline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460591098, "creation_date": 1460590807, "last_edit_date": 1460591098, "question_id": 36611377, "link": "https://stackoverflow.com/questions/36611377/writing-a-user-entry-from-a-class-to-a-txt-file", "title": "Writing a User Entry from a Class to a .txt file", "body": "<p>Ok, I have spent the last 8 hours at this, read to books and countless threads but can't find/understand a resolution to this.\nI need to create a college library with 2 classes. Member and Book. All dandy, I've managed to do that. I have it setup so that you enter a First Name, Last Name and Class group (soon an age, when I get this working). Once it's all entered the system reads it back to you and then you enter another member or return/exit the application. its almost 1am right now and I'd appreciate any help on how to write the user entry to a .txt file\nI have it going to .txt file but it's junk ( ie:  P\u00ffP\u00ffcmd.d{/\u2021 P|\u00ffP\u00ffcmd.exe \n PP.exe )</p>\n\n<p>Any help with explanations would be a huge help!</p>\n\n<pre><code> // include files - library\n#include \"stdio.h\"\n#include \"malloc.h\"\n#include \"stdlib.h\"\n#include \"string.h\"\n#include \"conio.h\"\n#include &lt;string.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;math.h&gt; \nusing namespace std;\n// Declare variables\nint iCounter = 0; // Starting at 0 \nchar sBlank[2]= \" \"; // Puts a blank space\nchar iOpt; // Options for the main menu\nchar start(); // function to load the menu\nchar write(); // Append the database\nchar read(); // Display the content from the database.txt file\nchar create(); // Creates a new database  (overwrites database.txt)\nint close(); // For exiting the program\n\nstruct NODE {\n    char sFirstName[8]; // Allows a first name upto 8 characters\n    char sLastName[12]; // Allows a last name upto 12 characters\n    char iBirth[3]; // Age value\n    char sClass[6];\n}; // End of structure\n\nstruct NODE *pRecord; // Pointer notation\n\nchar sLine[49+1]; // 1-D table\nchar sTable[49+1][49+1]; // 2-D table\n\nclass STUDENT \n{\nprivate: // Private Data Member\nstring sFirst;\nstring sLast;\nstring sGroup;\nint iBirth;\npublic: // Public Member Functions\n\nSTUDENT();  // constructor and destructor fns.\n~STUDENT() { } // could and often would include code in the destructor\nchar iSrnClr(void);\nchar iStudentStart(void);\nchar sStudentGet(void);\nchar iMarkReport(void);\n\n}; // basic class outline - member function definitions follow\n\nSTUDENT::STUDENT()\n{\n// To Do list\nstring sFirst = \"Default\";\nstring sLast = \"Name\";\nstring sGroup = \"ITN6\";\nint iBirth = 18;\n} // Constructor - Initilises data\n\n// Clear Screen member function\nchar STUDENT::iSrnClr()\n{\n// To Do list - these functions are non-standard [TurboC], replace them with shell commands...\nsystem(\"COLOR 79\");\nsystem(\"CLS\");\nputs(\"\\n \\t \\t College Library System\\n\");\n\nreturn(0);\n} // end of iScrClr() STUDENT class member function\n\n\n// Initilize Student Title Page \nchar STUDENT::iStudentStart() \n{\n// To Do List\ncout &lt;&lt; \"\\n \\t\\t STUDENT PAGE \\n\\n\"&lt;&lt; endl;\nreturn(0);\n} // end of iStudentStart STUDENT class member function\n\n\nchar STUDENT::sStudentGet() //iMarkGet() member function of STUDENT CLASS\n{\n// To Do List\nchar sFirstName[12]; //Initlize input buffer\nchar sLastName[12]; //Initlize input buffer\nchar sClass[6];\n\n    // Initialise memory space\n    pRecord = (struct NODE *) malloc(sizeof(struct NODE));\n    FILE * fDatabase; // Write to file\n\n    // Setting up the screen\n    system(\"color 79\");\n    system(\"cls\");\n    fDatabase = fopen (\"students.txt\",\"w\"); // Writes to the file 'Database.txt'\n\n    for (iCounter = 0; iCounter &lt; 1; iCounter++)\n    {\n        cout &lt;&lt; \"\\n\\tPlease enter the first name\" &lt;&lt; endl;\n        cin &gt;&gt; sFirstName;\n        sFirst = sFirstName;\n        cout &lt;&lt; \"\\n\\tPlease enter the Last Name\" &lt;&lt; endl;\n        cin &gt;&gt; sLastName;\n        sLast = sLastName;\n        cout &lt;&lt; \"\\n\\tPlease enter the group\" &lt;&lt; endl;\n        cin &gt;&gt; sClass;\n        sGroup = sClass;\n\n        strcat(sLine,pRecord-&gt;sFirstName); // Prints clients First name\n        strcat(sLine,pRecord-&gt;sLastName); // Prints clients Last name\n        strcat(sLine,pRecord-&gt;sClass); // Prints clients Age\n        fprintf(fDatabase, \"\\n \\t %s \\n\", sLine); // Prints each string and creates in 'database.txt' file also\n        strcpy(sTable[iCounter],sLine);\n        strcpy(sLine,sBlank);\n        } // end loop\n\nfclose(fDatabase); // Close the 'database.txt' file to stop writing\n} // end of iMarkGet() member function of STUDENT class\n\n\nchar STUDENT::iMarkReport()\n{\ncout &lt;&lt; \"Students First Name is: \" &lt;&lt; sFirst &lt;&lt; endl; \ncout &lt;&lt; \"Their Last Name is: \" &lt;&lt; sLast &lt;&lt; endl;\ncout &lt;&lt; \"They are in class group: \"&lt;&lt; sGroup &lt;&lt;endl;\nreturn(0);\n}\n\nint main(void)\n{\n    // Setting up the screen \n    system(\"color 79\"); // Grey background, blue font\n\n    const char password[15] = \"login\"; // const will not allow the password to change. The password is \"login\"\n    char pass[15]; //the users enters a password, upto 15 characters\n    char h; // h is a placeholder\n    int position = 0; // position is the position of the password (i.e. how many characters where entered) \n\n    printf(\"\\t Patrick Lowe - Mobile Phone Network Client List - ITN5 - January \\n \\n\");\n    printf(\"%s\", \" \\t \\t Password: \");\n    do { // function to gather user input while also hidding printed characters with an *\n        h = getch();\n\n        if( isprint(h) ) // isprint makes sure the character can be printed\n        {\n            pass[ position++ ] = h;\n            printf(\"%c\", '*'); // everytime a character is entered it is replaced or 'hidden' behind and asterisk\n        }\n\n        else if( h == 8 &amp;&amp; position ) // everytime a character is deleted, it removes the entry and also the asterisk\n        {\n            pass[ position-- ] = '\\0'; \n            printf(\"%s\", \"\\b \\b\");\n        }\n    } while( h != 13 );\n\n    if(strcmp(pass, password) != 0) // this will compare the correct password and the one entered, if incorrect do the following\n    {\n        printf(\"\\n \\n Invalid password!\\n \\n Abort! \\n \\n\");\n    }\n\n    else // otherwise, if correct do this\n    {\n        printf(\"\\n \\n Access Granted! \\n \\n\");\n        getch(); // press enter to continue\n        system(\"cls\"); // clear the screen\n        start(); // load the start function (begin the database management)\n    }\n\n    getchar(); // if the password is invalid, press a key to continue\n    return 0; // For safe exit\n}\n\n\nchar start(void)\n{\n    do\n{   \n    // Prompt for and capture the data\n    printf(\"\\t Patrick Lowe - College Library Manager - ITN6 - January\");\n    printf(\"\\n \\n Please Select an option: \\n\");\n    printf(\"\\t 1. Create a new Member \\n\");\n    printf(\"\\t 2. Add a new client \\n\");\n    printf(\"\\t 3. View current clients \\n\");\n    printf(\"\\t 4. Exit \\n\");\n    printf(\"\\n Database Function: \\t \");\n    scanf(\"\\n %c\", &amp;iOpt); // Captures users option\n\n    switch(iOpt)\n{\n    // Process the data\n\n        case '1':       // Creating a new client list\n            create();   // Load function to create a new client list\n            break;\n\n        case '2':       // Adding a new client\n            write();    // load function to append current client list\n            break;\n\n        case '3':       // Read or view current client list\n            read();     // Load function to view the client list\n            break;\n\n        case '4':       // Exit the program\n            close();    // Load function to exit program\n            break;\n\n        default:\n            printf(\"\\n \\t Invalid Entry!\");\n} // End of Option Switch\n    getch();\n\n    // Generate options menu \n    printf(\"\\n \\n Do you wish to continue(Y/N):\\t \");\n    scanf(\"\\n %c\", &amp;iOpt);  \n\n    system(\"cls\");\n    printf(\"Thank you for using my database \\n \\n \\t Patrick Lowe \\n \\n Press any key to Continue\");\n    getch();\n    system(\"cls\");\n}   // End of Do\n    while(iOpt == 'y');\n\n} // End of Main\n\n\nchar write() // Append a database file\n{   } // ENd of Write\n\nchar create() // Creates a new database (Overwrites the database.txt file)\n{   \n// declare variables\nSTUDENT PAT; // object instance of STUDENT class\nchar cReply = 'y' ;\n\nwhile ( cReply == 'y' || cReply == 'Y' ) // into the loop if true\n{\nPAT.iSrnClr(); // Clear Screen\nPAT.iStudentStart(); // Initialize Page\nPAT.sStudentGet(); // Capture Data\nPAT.iSrnClr(); // Clear Screen\nPAT.iMarkReport(); // Output Multiplication Table\n// exit routine - Prompt User for another input\ncout &lt;&lt; \"Do you want another Input? (y or n)\" ;\ncin &gt;&gt; cReply ;\n} // end while\n\nexit(0);\n} // End of Create\n\nchar read()  // Reads a database file\n{\n        FILE *fDatabase; // Write to file\n        char buf[260]; // Prints upto 260 characters\n\n        fDatabase = fopen (\"database.txt\", \"r\"); // Opens the database.txt file to be read\n        if(!fDatabase)\n            return 0;\n        while (fgets(buf,260, fDatabase)!=NULL)\n                printf(\"\\n \\t %s\",buf); // Prints the database file with a limit of 260 characters\n                printf(\"\\n Press Any Key To Continue \\n\");\n\n        fclose(fDatabase); // Closes the database.txt file\n        return 0;\n} // End of Read\n\nint close() // for exiting the program\n{\n    printf(\"\\n \\t Thank you! \\n\");\n    exit(0); //closes the program\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "visualization"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4799070, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qp6QfLEKfzw/AAAAAAAAAAI/AAAAAAAAADI/AtfX0ImjOwg/photo.jpg?sz=128", "display_name": "Sayali Sheode", "link": "https://stackoverflow.com/users/4799070/sayali-sheode"}, "edited": false, "score": 0, "creation_date": 1460591834, "post_id": 36611518, "comment_id": 60819948, "body": "I want to remove it because I want the code to run on the original colored video instead of a black and white video. Any idea how I can do it if using cvtColor is mandatory?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 31, "user_id": 4799070, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qp6QfLEKfzw/AAAAAAAAAAI/AAAAAAAAADI/AtfX0ImjOwg/photo.jpg?sz=128", "display_name": "Sayali Sheode", "link": "https://stackoverflow.com/users/4799070/sayali-sheode"}, "edited": false, "score": 0, "creation_date": 1460592397, "post_id": 36611518, "comment_id": 60820095, "body": "You <b>are</b> working on a color video. The difference mask however is, and should be, a single channel image, since a mask is by definition a binary image. It&#39;s hard to understand what you want to do, and it&#39;s probably <i>too broad</i> to be discussed here. This answer addresses the problem stated to the question."}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 0, "last_activity_date": 1460591629, "creation_date": 1460591629, "answer_id": 36611518, "question_id": 36611356, "link": "https://stackoverflow.com/questions/36611356/opencv-error-bad-flag-parameter-or-structure-field-unrecognized-or-unsupport/36611518#36611518", "title": "OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat", "body": "<p>The error is because, if you comment out that line:</p>\n\n<ol>\n<li><p>you never assign a value to <code>gray_diff</code>, so the following <code>threshold</code> function will work on an invalid matrix, and</p></li>\n<li><p>when you compute the <code>absdiff</code>, <code>frame</code> and <code>prev_frame</code> are of type <code>CV_8UC3</code>, and so will be also the result <code>frame_diff</code>. But <code>threshold</code> expects an input of type <code>CV_8UC1</code>. So you need to convert <code>frame_diff</code> to single channel <code>gray_diff</code> in order to work on it with <code>threshold</code>.</p></li>\n</ol>\n\n<p>So, here you <em>need</em> to use <code>cvtColor</code>, and I don't see any reason why you want to remove it.</p>\n"}], "owner": {"reputation": 31, "user_id": 4799070, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qp6QfLEKfzw/AAAAAAAAAAI/AAAAAAAAADI/AtfX0ImjOwg/photo.jpg?sz=128", "display_name": "Sayali Sheode", "link": "https://stackoverflow.com/users/4799070/sayali-sheode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3627, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1460591629, "creation_date": 1460590585, "question_id": 36611356, "link": "https://stackoverflow.com/questions/36611356/opencv-error-bad-flag-parameter-or-structure-field-unrecognized-or-unsupport", "title": "OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat", "body": "<p>When I am trying to comment out the cvtColor function from my code I am getting the following error:\n\"OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat\"</p>\n\n<p>If I am using the cvtColor function then the program runs just fine. </p>\n\n<p>I am trying to comment it out because I want the original color frame and not grayed out. \nHere is my code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/imgproc/imgproc.hpp\"\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"opencv2/video/tracking.hpp\"\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\nusing namespace cv;\nusing namespace std;\n\nfloat MHI_DURATION = 0.05;                \nint DEFAULT_THRESHOLD = 10;\n\nvoid draw_motion_comp(Mat&amp; img, int x_coordinate, int y_coordinate, int width, int height);\n\nMat frame;\n\nint main(int argc, char** argv)\n{\n    namedWindow(\"Motion_tracking\",CV_WINDOW_AUTOSIZE);\n\n    char fileName[100] = \"C:\\\\Users\\\\survya\\\\Downloads/VASTChallenge2009-M3-VIDEOPART1 (1).mov\";  \n    VideoCapture cap(fileName);\n\n    if ( !cap.read(frame) )  // if not success, exit program\n    {\n        cout &lt;&lt; \"Cannot open the video file\" &lt;&lt; endl;\n        return -1;\n    }\n\n    Mat frame,ret,frame_diff,gray_diff,motion_mask;\n\n    for(int i = 0; i&lt;10; i++)\n    {\n        cap.read(frame);\n        Size frame_size = frame.size();\n        int h = frame_size.height;\n        int w = frame_size.width;\n        if(i==5)\n            break;\n\n    }\n\n    ret = frame.clone();\n    Size frame_size = frame.size();\n    int h = frame_size.height;\n    int w = frame_size.width;\n    Mat prev_frame = frame.clone();\n    Mat motion_history(h,w, CV_32FC1,Scalar(0,0,0));\n    Mat seg_mask(h,w, CV_32FC1,Scalar(0,0,0));\n    vector&lt;Rect&gt; seg_bounds;\n    Mat vis(h,w,CV_32FC3);\n    Mat vis1(h,w,CV_8UC1);\n    while(1)\n    {\n        cap.retrieve(frame);\n        cap.read(frame);\n        ret = frame.clone();\n        if (!ret.data) //if not success, break loop\n        {\n            cout &lt;&lt; \"video ended\" &lt;&lt; endl;\n            break;\n        } \n        absdiff(frame, prev_frame, frame_diff);\n\n        //cvtColor(frame_diff,gray_diff, CV_BGR2GRAY); //want to comment this line out but getting the error stated in my question\n\n        threshold(gray_diff,ret,DEFAULT_THRESHOLD,255,0);\n        motion_mask = ret.clone();\n        double timestamp = 1000.0*clock()/CLOCKS_PER_SEC;\n        updateMotionHistory(motion_mask, motion_history, timestamp, MHI_DURATION);          \n        segmentMotion(motion_history, seg_mask, seg_bounds, timestamp, 32);\n\n            vis = frame.clone();\n            vis = frame_diff.clone();   \n\n            for(int i=0; i&lt; motion_history.cols; i++)\n                {\n                    for(int j=0; j&lt; motion_history.rows ; j++)\n                    { \n                    float a = motion_history.at&lt;float&gt;(j,i);                \n                    if((a-timestamp-MHI_DURATION)/MHI_DURATION &lt;= -5)\n                        vis1.at&lt;uchar&gt;(j,i) = 0;\n                    else\n                        vis1.at&lt;uchar&gt;(j,i) = (a-timestamp-MHI_DURATION)/MHI_DURATION;\n                    }\n                }\n\n            cvtColor(vis1,vis,COLOR_GRAY2BGR);\n\n        for(unsigned int h = 0; h &lt; seg_bounds.size(); h++)\n                {\n                    Rect rec = seg_bounds[h];\n                    if(rec.area() &gt; 5000 &amp;&amp; rec.area() &lt; 70000)\n                    {\n                        rectangle(vis, rec,Scalar(0,0,255),2);      \n                    }               \n                }   \n        imshow(\"Motion_tracking\",vis);      \n        prev_frame = frame.clone();\n            if(waitKey(30) &gt;= 0) //wait for 'esc' key press for 30ms. If 'esc' key is pressed, break loop\n        {\n            cout &lt;&lt; \"esc key is pressed by user\" &lt;&lt; endl;\n            break; \n        }\n    }   \n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "user-input", "cin"], "comments": [{"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "edited": false, "score": 0, "creation_date": 1460590435, "post_id": 36611317, "comment_id": 60819508, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/4745858/stdcin-getline-vs-stdcin\">std::cin.getline( ) vs. std::cin</a>"}, {"owner": {"reputation": 7166, "user_id": 479905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4f1b1eb37c5c280e2db98abbaace9f86?s=128&d=identicon&r=PG", "display_name": "Arne", "link": "https://stackoverflow.com/users/479905/arne"}, "edited": false, "score": 0, "creation_date": 1460590651, "post_id": 36611317, "comment_id": 60819569, "body": "your code that you posted does not contain any error handling, please add the parts that you wrote to print out the error messages. And no std::cin does not accept multiple inputs at the same time, it consumes one word after the other, on each call it reads one word from the input stream. When there are more words on the input stream than one, the next cin will not ask the user for input it will just take the next word"}], "answers": [{"tags": [], "owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "is_accepted": true, "score": 2, "last_activity_date": 1460591209, "creation_date": 1460591209, "answer_id": 36611450, "question_id": 36611317, "link": "https://stackoverflow.com/questions/36611317/why-does-stdcin-accept-multiple-inputs-at-the-same-time/36611450#36611450", "title": "Why does std::cin accept multiple inputs at the same time?", "body": "<p>You are using the 'formatted' input operator <code>&gt;&gt;</code>. And basically a formatted input operation will stop and return when it sees a white space character. So with your input 'up look down look right right', your while loop actually executes six times for each command in the input.</p>\n\n<p>If you don't what multiple commands in one line, use <code>std::getline</code> instead:</p>\n\n<pre><code>while(getline(cin, input)) {\n    if (input == \"quit\") break;\n    if (input == \"up\") ...\n}\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 6190865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zjYeQ.png?s=128&g=1", "display_name": "LLSv2.0", "link": "https://stackoverflow.com/users/6190865/llsv2-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 36611450, "answer_count": 1, "score": 0, "last_activity_date": 1460591294, "creation_date": 1460590263, "last_edit_date": 1460591294, "question_id": 36611317, "link": "https://stackoverflow.com/questions/36611317/why-does-stdcin-accept-multiple-inputs-at-the-same-time", "title": "Why does std::cin accept multiple inputs at the same time?", "body": "<p>I wrote a code for a text-based game that takes user input at the start of every turn and is supposed to do different things based on the input. For instance, \"up\" should move the player up 1 space on the grid, and \"look\" should display the specified scenery for that space. Anything that isn't specified as a valid input causes the system to output an error message, \"I didn't understand that.\" The problem is: If I type something like \"up look down look right right\" it will execute every command in order instead of showing the error message.</p>\n\n<pre><code> string input = \"\";\nwhile(input!=\"quit\")\n{ \n    cin &gt;&gt; input;\n    if (input == \"left\") {\n        if (map[player1.y][player1.x - 1].isWall==true)\n            cout &lt;&lt; map[player1.y][player1.x - 1].scene;\n        else if (player1.x &gt; 0)\n            player1.x -= 1;\n        else\n            cout &lt;&lt; \"You walked off the face of the Earth, but grabbed the ledge just before it was too late. \\n Somehow, you managed to gather enough strength to pull yourself back up. \\n ...Maybe don't try that again.\" &lt;&lt; endl;\n    }\n    else if (input == \"right\") {\n        if (map[player1.y][player1.x + 1].isWall==true)\n            cout &lt;&lt; map[player1.y][player1.x + 1].scene &lt;&lt; endl;\n        else if (player1.x &lt; cols-1)\n            player1.x += 1;\n        else\n            cout &lt;&lt; \"You walked off the face of the Earth, but grabbed the ledge just before it was too late. \\n Somehow, you managed to gather enough strength to pull yourself back up. \\n ...Maybe don't try that again.\" &lt;&lt; endl;\n    }\n    else if (input == \"up\") {\n        if (map[player1.y - 1][player1.x].isWall==true)\n            cout &lt;&lt; map[player1.y - 1][player1.x].scene;\n        else if (player1.y &gt; 0)\n            player1.y -= 1;\n        else\n            cout &lt;&lt; \"You walked off the face of the Earth, but grabbed the ledge just before it was too late. \\n Somehow, you managed to gather enough strength to pull yourself back up. \\n ...Maybe don't try that again.\" &lt;&lt; endl;\n    }\n    else if (input == \"down\") {\n        if (map[player1.y + 1][player1.x].isWall==true)\n            cout &lt;&lt; map[player1.y + 1][player1.x].scene;\n        else if (player1.y &lt; rows-1)\n            player1.y += 1;\n        else\n            cout &lt;&lt; \"You walked off the face of the Earth, but grabbed the ledge just before it was too late. \\n Somehow, you managed to gather enough strength to pull yourself back up. \\n ...Maybe don't try that again.\" &lt;&lt; endl;\n    }\n    else if (input == \"look\")\n        map[player1.y][player1.x].look();\n    else if (input == \"take\")\n        player1.pickupCons(map[player1.y][player1.x].potions[0]);\n    else\n    {\n        cout &lt;&lt; \"I don't understand... type something else!\" &lt;&lt; endl;\n        continue;\n    }\n</code></pre>\n"}, {"tags": ["c++", "xml", "grammar"], "comments": [{"owner": {"reputation": 9113, "user_id": 2097780, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/db5b03704c129196a4e9415e55413ce6?s=128&d=identicon&r=PG", "display_name": "kirbyfan64sos", "link": "https://stackoverflow.com/users/2097780/kirbyfan64sos"}, "edited": false, "score": 2, "creation_date": 1460590643, "post_id": 36611306, "comment_id": 60819564, "body": "Welcome to Stack Overflow! Generally, this site is best for factual questions and not help on how to start projects. Regardless, I would advise you to consider using a real XML parser versus writing a hand-made one. Try checking out Expat. Good luck!"}, {"owner": {"reputation": 507, "user_id": 3239130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c3e55497cc12f275dbc38f897766fd?s=128&d=identicon&r=PG&f=1", "display_name": "cehnehdeh", "link": "https://stackoverflow.com/users/3239130/cehnehdeh"}, "edited": false, "score": 0, "creation_date": 1460594943, "post_id": 36611306, "comment_id": 60820722, "body": "This obviously sounds like an assignment of sorts, so an external library probably isn&#39;t of much use to OP.  I would start with figuring out what constitutes a &quot;properly formatted&quot; file. Once you&#39;ve defined that, moving forward is usually fairly straightforward."}], "owner": {"reputation": 5, "user_id": 5896057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/929eaf9d4bd42348b92726852e9aec9f?s=128&d=identicon&r=PG&f=1", "display_name": "G. Petter", "link": "https://stackoverflow.com/users/5896057/g-petter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460590164, "creation_date": 1460590164, "question_id": 36611306, "link": "https://stackoverflow.com/questions/36611306/need-help-creating-an-xml-grammar-verifier-c", "title": "Need help creating an XML grammar verifier (C++)", "body": "<p>I must create a program which takes in a file and prints the interpretation if the file is formatted correctly, and handle the errors otherwise. I think I can write the program once I have some idea where to start conceptually, but as of now I am in way over my head. </p>\n\n<p>It must accept three tags, </p>\n\n<ul>\n<li>A tab, \"&lt; tab >(no spaces)\" indents the content by a single tab</li>\n<li>Paragraph, \"&lt; p >\" prints content followed by new line</li>\n<li>List item, \"&lt; listItem >\" prints text preceded by a bullet \"*\"</li>\n</ul>\n\n<p>and &lt; /tab > closes the content that will be tabbed, etc.</p>\n\n<p>Content can also be inside multiple tags. </p>\n\n<p>I am also encouraged to implement this recursively, and I don't quite understand how recursion would help in this case. \nIf anyone could point me in a direction on how to get started, it would be greatly appreciated. I have so far tried using an input stream to read in a word, check if it is one of the tags, and then putting the following content into a queue, but I'm not sure where to go from there. </p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "templates", "c++11", "variadic-templates", "sfinae"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1460589455, "post_id": 36611105, "comment_id": 60819176, "body": "Can you provide something that actually compiles? I can&#39;t figure out what your code is supposed to be doing."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1460589742, "post_id": 36611105, "comment_id": 60819281, "body": "@ Brian  The code compiles on GCC 5.3.  If you look in main(), I&#39;m simply creating objects with a factory class.  There is a ranking of what is to be created based on the <code>argument_type&lt;N&gt;</code> member types of the classes.  I&#39;m just asking how to shorten the repetitive part of the code (the commented-out section is what I want to use, but don&#39;t understand why it won&#39;t work)."}, {"owner": {"reputation": 91690, "user_id": 4833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0d3bf653c44af90ef09711d538bee6a?s=128&d=identicon&r=PG", "display_name": "VolkerK", "link": "https://stackoverflow.com/users/4833/volkerk"}, "edited": false, "score": 0, "creation_date": 1460594687, "post_id": 36611105, "comment_id": 60820649, "body": "Does your <code>check (rank&lt;10, T&gt;,</code> function really return nothing or did you just replace the actual code by <code>cout&lt;&lt;...</code> for debugging purposes?"}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "edited": false, "score": 0, "creation_date": 1460595231, "post_id": 36611105, "comment_id": 60820805, "body": "@ VolkerK   It&#39;s really there just to terminate the instantiations.  That overload will probably never be reached.  But even if it does return nothing, it shouldn&#39;t affect the test in main(), since I&#39;m not storing the created objects anywhere in this test.  In the production code, I will probably return a <code>nonesuch{}</code> object."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1460596842, "post_id": 36611105, "comment_id": 60821195, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  At least one unrelated typo was found in your code.  Delete <i>everything</i> that doesn&#39;t cause your error to go away.  I mean everything.  If you take it out of the <code>class</code> does the problem still occur and you cannot explain it?  Ok, take it out of the class.  If you remove the <code>Args...</code> and change the <code>enable_if_t</code> to something simpler, does it still happen?  Then get rid of them.  Does it require 10, or is 1 enough?  Then make it 1.  Do you require the page of seemingly unrelated template code?  Delete it, and cause the error without it."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1460598291, "post_id": 36611105, "comment_id": 60821666, "body": "@Yakk  The bottom of my question shows a more minimal example.  It compiles, but when I use the commented-out part instead, I get infinite instantiations.  I will try to minimize the code more."}, {"owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1460599356, "post_id": 36611105, "comment_id": 60821977, "body": "@Yakk   I&#39;ve reduced the code even more.  I think only the skeleton of the problem remains now."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1460600567, "post_id": 36611105, "comment_id": 60822316, "body": "Clang detests this code, which seems correct to me. Class-scope lookup doesn&#39;t extend to trailing return types."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1460599843, "creation_date": 1460599843, "answer_id": 36612640, "question_id": 36611105, "link": "https://stackoverflow.com/questions/36611105/why-template-instantiations-go-on-forever-here/36612640#36612640", "title": "Why template instantiations go on forever here?", "body": "<p>Partial ordering does not kick in until very late in the overload resolution process.</p>\n\n<p>Ignoring all the ping-ponging amongst your various <code>check</code> overloads, eventually you end up with</p>\n\n<pre><code>template &lt;std::size_t N, typename T, typename... Args&gt;\nauto check (rank&lt;N,T&gt;, Args... args) const\n      -&gt; std::enable_if_t&lt;!has_argument_type_n&lt;T, N, Args...&gt;(), \n                          decltype(check(rank&lt;N+1, Ts...&gt;{}, args...))&gt;;\n\ntemplate &lt;typename T, typename... Args&gt;\nauto check (rank&lt;10, T&gt;, Args... args) const;\n</code></pre>\n\n<p>with a <code>rank&lt;10, something I frankly don't care about&gt;</code>. Deduction and substitution will be performed for <em>both</em> overloads; and as part of substitution into the return type of the first signature, you'll instantiate <code>rank&lt;11, Ts...&gt;</code>, which in turn bypasses the terminating specialization of <code>rank</code>, resulting in an infinite chain of template instantiations. You don't even get to the point where the partial ordering tiebreaker chooses the second overload.</p>\n\n<p>Just constrain the first overload to <code>N &lt; 10</code>. It will need to lexically precede the return type (so that when <code>N &gt;= 10</code> the compiler doesn't attempt to substitute into it), so put it in a default template argument.</p>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 3, "accepted_answer_id": 36612640, "answer_count": 1, "score": 0, "last_activity_date": 1460599843, "creation_date": 1460588883, "last_edit_date": 1460599268, "question_id": 36611105, "link": "https://stackoverflow.com/questions/36611105/why-template-instantiations-go-on-forever-here", "title": "Why template instantiations go on forever here?", "body": "<p>In the following code, I want to replace</p>\n\n<pre><code>template &lt;typename T, typename... Args&gt;\nauto check (rank&lt;1,T&gt;, Args... args) const\n        -&gt; std::enable_if_t&lt;!has_argument_type&lt;T, Args...&gt;(), decltype(check(rank&lt;2, Ts...&gt;{}, args...))&gt; {\n    return check(rank&lt;2, Ts...&gt;{}, args...);  // Since rank&lt;1,T&gt; derives immediately from rank&lt;2, Ts...&gt;.\n}\n\ntemplate &lt;typename T, typename... Args&gt;\nauto check (rank&lt;2,T&gt;, Args... args) const\n        -&gt; std::enable_if_t&lt;!has_argument_type&lt;T, Args...&gt;(), decltype(check(rank&lt;3, Ts...&gt;{}, args...))&gt; {\n    return check(rank&lt;3, Ts...&gt;{}, args...);  // Since rank&lt;2,T&gt; derives immediately from rank&lt;3, Ts...&gt;.\n}\n// etc... until rank&lt;9&gt;.\n</code></pre>\n\n<p>with the simple</p>\n\n<pre><code>template &lt;std::size_t N, typename T, typename... Args&gt;\nauto check (rank&lt;N,T&gt;, Args... args) const\n        -&gt; std::enable_if_t&lt;!has_argument_type&lt;T, Args...&gt;(), decltype(check(rank&lt;N+1, Ts...&gt;{}, args...))&gt; {\n    return check(rank&lt;N+1, Ts...&gt;{}, args...);  // Since rank&lt;N,T&gt; derives immediately from rank&lt;N+1, Ts...&gt;.\n}\n\ntemplate &lt;typename T, typename... Args&gt;\nauto check (rank&lt;10, T&gt;, Args... args) const { std::cout &lt;&lt; \"Nothing found.\\n\"; }\n</code></pre>\n\n<p>But when I do, the template instantiations go on forever despite the terminating <code>check(rank&lt;10, T&gt;, Args... args)</code> function.  Here is the full code using the long version above.  Sorry for not minimizing the problem because I don't think I can minimize it and show what the problem is.  Jumping to main() will show you the simple task I'm after, but I want to solve it using sequence ranking and overload resolution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename T, typename... Args&gt;\nconstexpr auto has_argument_type_impl(int)\n    -&gt; decltype(std::is_same&lt;typename T::argument_type, std::tuple&lt;Args...&gt;&gt;{});  // Checking both that T::argument_type exists and that it is the same as std::tuple&lt;Args...&gt;.\n\ntemplate &lt;typename T, typename... Args&gt;\nconstexpr auto has_argument_type_impl(long) -&gt; std::false_type;\n\ntemplate &lt;typename T, typename... Args&gt;\nconstexpr bool has_argument_type() { return decltype(has_argument_type_impl&lt;T, Args...&gt;(0))::value; }\n\ntemplate &lt;typename T, std::size_t N, typename... Args&gt;\nconstexpr auto has_argument_type_n_impl(int)\n    -&gt; decltype(std::is_same&lt;typename T::template argument_type&lt;N&gt;, std::tuple&lt;Args...&gt;&gt;{});  // Checking both that T::argument_type&lt;N&gt; exists and that it is the same as std::tuple&lt;Args...&gt;.\n\ntemplate &lt;typename T, std::size_t N, typename... Args&gt;\nconstexpr auto has_argument_type_n_impl(long) -&gt; std::false_type;\n\ntemplate &lt;typename T, std::size_t N, typename... Args&gt;\nconstexpr bool has_argument_type_n() { return decltype(has_argument_type_n_impl&lt;T, N, Args...&gt;(0))::value; }\n\ntemplate &lt;typename... Ts&gt;\nclass Factory {\n    template &lt;std::size_t, typename...&gt; struct rank;\n\n    template &lt;std::size_t N, typename First, typename... Rest&gt;\n    struct rank&lt;N, First, Rest...&gt; : rank&lt;N, Rest...&gt; {};\n\n    template &lt;std::size_t N, typename T&gt; struct rank&lt;N,T&gt; : rank&lt;N+1, Ts...&gt; {};\n\n    template &lt;typename T&gt; struct rank&lt;10, T&gt; {};  // Need to end the instantiations somewhere.\npublic:\n    template &lt;typename... Args&gt;\n    decltype(auto) create (Args... args) const {\n        return check(rank&lt;0, Ts...&gt;{}, args...);\n    }\nprivate:\n    template &lt;typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;0, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;has_argument_type&lt;T, Args...&gt;(), decltype(T(args...))&gt; {\n        return T(args...);\n    }\n\n    template &lt;typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;0, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T, Args...&gt;(), decltype(check(rank&lt;0, Rest...&gt;{}, args...))&gt; {\n        return check(rank&lt;0, Rest...&gt;{}, args...);\n    }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;0,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T, Args...&gt;(), decltype(check(rank&lt;1, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;1, Ts...&gt;{}, args...);  // Since rank&lt;0,T&gt; derives immediately from rank&lt;1, Ts...&gt;.\n    }\n\n    template &lt;std::size_t N, typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;N, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;has_argument_type_n&lt;T, N-1, Args...&gt;(), decltype(T(args...))&gt; {\n        return T(args...);\n    }\n\n    template &lt;std::size_t N, typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;N, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type_n&lt;T, N-1, Args...&gt;(), decltype(check(rank&lt;N, Rest...&gt;{}, args...))&gt; {\n        return check(rank&lt;N, Rest...&gt;{}, args...);\n    }\n\n//  I want to use the following instead of what's below it.\n//  template &lt;std::size_t N, typename T, typename... Args&gt;\n//  auto check (rank&lt;N,T&gt;, Args... args) const\n//          -&gt; std::enable_if_t&lt;!has_argument_type_n&lt;T, N-1, Args...&gt;(), decltype(check(rank&lt;N+1, Ts...&gt;{}, args...))&gt; {\n//      return check(rank&lt;N+1, Ts...&gt;{}, args...);  // Since rank&lt;N,T&gt; derives immediately from rank&lt;N+1, Ts...&gt;.\n//  }\n//\n//  template &lt;typename T, typename... Args&gt;\n//  auto check (rank&lt;10, T&gt;, Args... args) const { std::cout &lt;&lt; \"Nothing found.\\n\"; }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;1,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type_n&lt;T, 0, Args...&gt;(), decltype(check(rank&lt;2, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;2, Ts...&gt;{}, args...);  // Since rank&lt;1,T&gt; derives immediately from rank&lt;2, Ts...&gt;.\n    }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;2,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type_n&lt;T, 1, Args...&gt;(), decltype(check(rank&lt;3, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;3, Ts...&gt;{}, args...);  // Since rank&lt;2,T&gt; derives immediately from rank&lt;3, Ts...&gt;.\n    }\n    // etc... until rank&lt;9&gt;.\n};\n\n// Testing\nstruct Object {\n    template &lt;std::size_t, typename = void&gt; struct ArgumentType;\n    template &lt;typename T&gt; struct ArgumentType&lt;0,T&gt; { using type = std::tuple&lt;int, bool, char, double&gt;; };\n    template &lt;typename T&gt; struct ArgumentType&lt;1,T&gt; { using type = std::tuple&lt;bool, char, double&gt;; };\n    template &lt;std::size_t N&gt; using argument_type = typename ArgumentType&lt;N&gt;::type;\n\n    Object (int, bool, char, double) { print(); }\n    Object (bool, char, double) { print(); }\n    void print() const { std::cout &lt;&lt; \"Object\\n\"; }\n};\n\nstruct Thing {\n    template &lt;std::size_t, typename = void&gt; struct ArgumentType;\n    template &lt;typename T&gt; struct ArgumentType&lt;0,T&gt; { using type = std::tuple&lt;int, int, char&gt;; };\n    template &lt;typename T&gt; struct ArgumentType&lt;1,T&gt; { using type = std::tuple&lt;int, char&gt;; };\n    template &lt;typename T&gt; struct ArgumentType&lt;2,T&gt; { using type = std::tuple&lt;char&gt;; };\n    template &lt;std::size_t N&gt; using argument_type = typename ArgumentType&lt;N&gt;::type;\n\n    Thing (int, int, char) { print(); }\n    Thing (int, char) { print(); }\n    Thing (char) { print(); }\n    void print() const { std::cout &lt;&lt; \"Thing\\n\"; }\n};\n\nstruct Blob {\n    using argument_type = std::tuple&lt;int, double&gt;;\n\n    Blob (int, double) { print(); }\n    void print() const { std::cout &lt;&lt; \"Blob\\n\"; }\n};\n\nstruct Widget {\n    using argument_type = std::tuple&lt;int&gt;;\n    Widget (double, double, int, double) { print(); }\n    Widget (int) { print(); }\n    void print() const { std::cout &lt;&lt; \"Widget\\n\"; }\n};\n\nint main() {\n    Factory&lt;Blob, Object, Thing, Widget&gt;().create(4,3.5);  // Blob\n    Factory&lt;Object, Blob, Widget, Thing&gt;().create(2);  // Widget\n    Factory&lt;Object, Thing, Blob, Widget&gt;().create(5);  // Widget\n    Factory&lt;Blob, Object, Thing, Widget&gt;().create(4,true,'a',7.5);  // Object\n    Factory&lt;Blob, Thing, Object, Widget&gt;().create(true,'a',7.5);  // Object\n    Factory&lt;Blob, Object, Thing, Widget&gt;().create('a');  // Thing\n}\n</code></pre>\n\n<p>I know that there are other ways of accomplishing this, but I'm trying to understand sequence ranking better, and would like to know why I cannot use the commented-out section.  How to avoid the repetitive code that I need to put (to <code>rank&lt;9&gt;</code>, or even higher rank) that is currently making this code work?  Thanks for your patience.</p>\n\n<p><strong>Note:</strong>  I actually must NOT enter the repetitive part of the code manually as I currently have.  Because the highest N value for <code>rank&lt;N, Ts...&gt;</code> used in the <code>check</code> overloads will be determined during compile-time as the highest N value such that a <code>argument_type&lt;N&gt;</code> member type exists among all the <code>Ts...</code>.  Thus I HAVE to use the generic part that I commented out, and the <code>rank&lt;10,T&gt;</code> I'm using will have to have the 10 replaced by that specific N value.  Thus, this is not just a matter of convenience.  I have to solve this problem to continue developing the program.</p>\n\n<p><strong>Edit:</strong>  Here is a more minimal example, showing the same problem:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n#include &lt;tuple&gt;\n\ntemplate &lt;typename T&gt;\nconstexpr auto has_argument_type_impl(int)\n    -&gt; decltype(typename T::argument_type{}, std::true_type{});\n\ntemplate &lt;typename T&gt;\nconstexpr auto has_argument_type_impl(long) -&gt; std::false_type;\n\ntemplate &lt;typename T&gt;\nconstexpr bool has_argument_type() { return decltype(has_argument_type_impl&lt;T&gt;(0))::value; }\n\ntemplate &lt;typename... Ts&gt;\nclass Factory {\n    template &lt;std::size_t, typename...&gt; struct rank;\n\n    template &lt;std::size_t N, typename First, typename... Rest&gt;\n    struct rank&lt;N, First, Rest...&gt; : rank&lt;N, Rest...&gt; {};\n\n    template &lt;std::size_t N, typename T&gt; struct rank&lt;N,T&gt; : rank&lt;N+1, Ts...&gt; {};\n\n    template &lt;typename T&gt; struct rank&lt;10, T&gt; {};  // Need to end the instantiations somewhere.\npublic:\n    template &lt;typename... Args&gt;\n    decltype(auto) create (Args... args) const {\n        return check(rank&lt;0, Ts...&gt;{}, args...);\n    }\nprivate:\n    template &lt;std::size_t N, typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;N, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;has_argument_type&lt;T&gt;(), decltype(T(args...))&gt; {\n        return T(args...);\n    }\n\n    template &lt;std::size_t N, typename T, typename... Rest, typename... Args&gt;\n    auto check (rank&lt;N, T, Rest...&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T&gt;(), decltype(check(rank&lt;N, Rest...&gt;{}, args...))&gt; {\n        return check(rank&lt;N, Rest...&gt;{}, args...);\n    }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;0,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T&gt;(), decltype(check(rank&lt;1, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;1, Ts...&gt;{}, args...);  // Since rank&lt;0,T&gt; derives immediately from rank&lt;1, Ts...&gt;.\n    }\n\n//  I want to use the following instead of what's below it.\n//  template &lt;std::size_t N, typename T, typename... Args&gt;\n//  auto check (rank&lt;N,T&gt;, Args... args) const\n//          -&gt; std::enable_if_t&lt;!has_argument_type&lt;T&gt;(), decltype(check(rank&lt;N+1, Ts...&gt;{}, args...))&gt; {\n//      return check(rank&lt;N+1, Ts...&gt;{}, args...);  // Since rank&lt;N,T&gt; derives immediately from rank&lt;N+1, Ts...&gt;.\n//  }\n//\n//  template &lt;typename T, typename... Args&gt;\n//  auto check (rank&lt;10, T&gt;, Args... args) const { std::cout &lt;&lt; \"Nothing found.\\n\"; }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;1,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T&gt;(), decltype(check(rank&lt;2, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;2, Ts...&gt;{}, args...);  // Since rank&lt;1,T&gt; derives immediately from rank&lt;2, Ts...&gt;.\n    }\n\n    template &lt;typename T, typename... Args&gt;\n    auto check (rank&lt;2,T&gt;, Args... args) const\n            -&gt; std::enable_if_t&lt;!has_argument_type&lt;T&gt;(), decltype(check(rank&lt;3, Ts...&gt;{}, args...))&gt; {\n        return check(rank&lt;3, Ts...&gt;{}, args...);  // Since rank&lt;2,T&gt; derives immediately from rank&lt;3, Ts...&gt;.\n    }\n    // etc... until rank&lt;9&gt;.\n};\n\n// Testing\nstruct Object {};\nstruct Thing {};\n\nstruct Blob {\n    using argument_type = std::tuple&lt;int, double&gt;;\n    Blob (int, double) { std::cout &lt;&lt; \"Blob\\n\"; }\n};\n\nint main() {\n    Factory&lt;Object, Thing, Blob&gt;().create(4,3.5);  // Blob\n}\n</code></pre>\n"}, {"tags": ["c++", "centos", "gdal"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1460589121, "post_id": 36611088, "comment_id": 60819048, "body": "Does including <code>gdal_priv.h</code> fix the problem? Here&#39;s the <a href=\"http://www.gdal.org/gdal_tutorial.html\" rel=\"nofollow noreferrer\">OGR tutorial</a> which does the same."}, {"owner": {"reputation": 82430, "user_id": 17833, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExIEf.png?s=128&g=1", "display_name": "Petesh", "link": "https://stackoverflow.com/users/17833/petesh"}, "edited": false, "score": 0, "creation_date": 1460589603, "post_id": 36611088, "comment_id": 60819239, "body": "the include syntax is expected to be: <code>#include &lt;gdal&#47;gdal.h&gt;</code> in order to have the <code>GDALAllRegister()</code> declared."}, {"owner": {"reputation": 209, "user_id": 5165554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0w2D4Qi9gGo/AAAAAAAAAAI/AAAAAAAAAIA/mspRVo4wMjw/photo.jpg?sz=128", "display_name": "pateto777", "link": "https://stackoverflow.com/users/5165554/pateto777"}, "edited": false, "score": 0, "creation_date": 1460641936, "post_id": 36611088, "comment_id": 60846392, "body": "I tried with both headers: gdal_priv.h and gdal.h, in both cases I have the message: undefined reference to `GDALAllRegister&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 5165554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0w2D4Qi9gGo/AAAAAAAAAAI/AAAAAAAAAIA/mspRVo4wMjw/photo.jpg?sz=128", "display_name": "pateto777", "link": "https://stackoverflow.com/users/5165554/pateto777"}, "edited": false, "score": 0, "creation_date": 1460643099, "post_id": 36625583, "comment_id": 60847370, "body": "Works too using: #include &lt;gdal/gdal_priv.h&gt;"}], "tags": [], "owner": {"reputation": 209, "user_id": 5165554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0w2D4Qi9gGo/AAAAAAAAAAI/AAAAAAAAAIA/mspRVo4wMjw/photo.jpg?sz=128", "display_name": "pateto777", "link": "https://stackoverflow.com/users/5165554/pateto777"}, "is_accepted": true, "score": 1, "last_activity_date": 1460642699, "creation_date": 1460642699, "answer_id": 36625583, "question_id": 36611088, "link": "https://stackoverflow.com/questions/36611088/reading-from-ogr-error-in-c/36625583#36625583", "title": "Reading From OGR error in c++", "body": "<p>I fixed the code with your suggestions:</p>\n\n<pre><code>#include &lt;gdal/gdal.h&gt;\n\nint main(){\n    // Register all format drivers\n    GDALAllRegister();  \n}\n</code></pre>\n\n<p>In addition, I have to add the line -lgdal for the compilation and it works.</p>\n\n<p>g++ rungdal.cpp -o rungdal -lgdal</p>\n\n<p>Thanks for your help!</p>\n\n<p>Alvaro</p>\n"}], "owner": {"reputation": 209, "user_id": 5165554, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0w2D4Qi9gGo/AAAAAAAAAAI/AAAAAAAAAIA/mspRVo4wMjw/photo.jpg?sz=128", "display_name": "pateto777", "link": "https://stackoverflow.com/users/5165554/pateto777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 36625583, "answer_count": 1, "score": 0, "last_activity_date": 1460642699, "creation_date": 1460588768, "question_id": 36611088, "link": "https://stackoverflow.com/questions/36611088/reading-from-ogr-error-in-c", "title": "Reading From OGR error in c++", "body": "<p>I'm trying to compile the following code using the gdal libraries in Centos 7:</p>\n\n<p>The name of the file is rungdal.cpp</p>\n\n<pre><code>#include \"/usr/include/gdal/ogrsf_frmts.h\"\nint main(){\n    // Register all format drivers\n    GDALAllRegister();\n}\n</code></pre>\n\n<p>I run the program using: g++ rungdal.cpp -o rungdal, and I have the following message:</p>\n\n<p>error: \u2018GDALAllRegister\u2019 was not declared in this scope</p>\n\n<p>I also include the whole path from the header file, if I don't use it the program doesn't work, maybe it's something related.</p>\n\n<p>What can I do for executing the program?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["c++", "arrays", "void-pointers"], "answers": [{"tags": [], "owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "is_accepted": false, "score": 2, "last_activity_date": 1460588383, "creation_date": 1460588383, "answer_id": 36611019, "question_id": 36610996, "link": "https://stackoverflow.com/questions/36610996/c-syntax-for-const-void-pointer/36611019#36611019", "title": "C++ syntax for const void pointer", "body": "<p>Don't cast constness away:</p>\n\n<pre><code>i2cBuffer[i+2] = *static_cast&lt;const unsigned char*&gt;(data)\n//                            ^^^^^\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 2805202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NZgEK.png?s=128&g=1", "display_name": "paulsoulsby", "link": "https://stackoverflow.com/users/2805202/paulsoulsby"}, "edited": false, "score": 0, "creation_date": 1460631494, "post_id": 36611033, "comment_id": 60837841, "body": "I thought I couldn&#39;t use memcpy because of the offset in the destination, but a bit of googling shows that I can :)"}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 0, "last_activity_date": 1460588461, "creation_date": 1460588461, "answer_id": 36611033, "question_id": 36610996, "link": "https://stackoverflow.com/questions/36610996/c-syntax-for-const-void-pointer/36611033#36611033", "title": "C++ syntax for const void pointer", "body": "<p>This is what <code>const_cast</code> is for.  But you shouldn't use it.  There's nothing wrong with casting to a <code>const unsigned char *</code>, because you're going to copy the value out.</p>\n\n<p>Of course, you could also use <code>memcpy</code>.</p>\n"}], "owner": {"reputation": 43, "user_id": 2805202, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NZgEK.png?s=128&g=1", "display_name": "paulsoulsby", "link": "https://stackoverflow.com/users/2805202/paulsoulsby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 36611033, "answer_count": 2, "score": 1, "last_activity_date": 1460588461, "creation_date": 1460588271, "question_id": 36610996, "link": "https://stackoverflow.com/questions/36610996/c-syntax-for-const-void-pointer", "title": "C++ syntax for const void pointer", "body": "<p>I need a bit of help with C++ syntax when using const void pointers.</p>\n\n<p>I am passing a function a const void array (ie I don't know what data type it is). I then need to copy the block of memory byte by byte into a local unsigned char array (with and offset of 2).<br>\nThe local array is declared outside the function &amp; I know it will always be big enough.\nHere's the code:</p>\n\n<pre><code>void writeFram(const void* data, unsigned int startAddr, size_t size)\n{\n    i2cBuffer[0] = startAddr &gt;&gt; 8;\n    i2cBuffer[1] = startAddr &amp; 0xFF;\n    for(unsigned char i=0;i&lt;size;++i)\n    {\n        i2cBuffer[i+2] = *static_cast&lt;unsigned char*&gt;(data);\n    }\n}\n</code></pre>\n\n<p>The error I get is: error: static_cast from type 'const void*' to type 'unsigned char*' casts away qualifiers</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1460588354, "post_id": 36610943, "comment_id": 60818776, "body": "Should just be <code>std::cout &lt;&lt; *it;</code>"}, {"owner": {"reputation": 69, "user_id": 6174009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/735509bdb37970097f212d47c2262bba?s=128&d=identicon&r=PG&f=1", "display_name": "Hidden", "link": "https://stackoverflow.com/users/6174009/hidden"}, "reply_to_user": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "edited": false, "score": 0, "creation_date": 1460588414, "post_id": 36610943, "comment_id": 60818806, "body": "So confused I thought I wrote that, thank you mate, write an answer and I&#39;ll accept @ArchbishopOfBanterbury"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 0, "creation_date": 1460589135, "post_id": 36610943, "comment_id": 60819053, "body": "As an aside, you most likely don&#39;t need to create objects with <code>new</code>, either use objects directly (like in the example code), or use <code>std::make_unique</code>/<code>std::make_shared</code>."}], "answers": [{"tags": [], "owner": {"reputation": 2954, "user_id": 5508296, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/l6uTa.jpg?s=128&g=1", "display_name": "sjrowlinson", "link": "https://stackoverflow.com/users/5508296/sjrowlinson"}, "is_accepted": false, "score": 0, "last_activity_date": 1460588462, "creation_date": 1460588462, "answer_id": 36611035, "question_id": 36610943, "link": "https://stackoverflow.com/questions/36610943/operator-overloading-and-references-to-objects/36611035#36611035", "title": "Operator overloading and references to objects", "body": "<p>Derefence a pointer using the <code>*</code> operator as follows:</p>\n\n<pre><code>std::cout &lt;&lt; *it;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2849, "user_id": 4279704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yygmz.png?s=128&g=1", "display_name": "Riad Baghbanli", "link": "https://stackoverflow.com/users/4279704/riad-baghbanli"}, "is_accepted": true, "score": 0, "last_activity_date": 1460588784, "creation_date": 1460588784, "answer_id": 36611091, "question_id": 36610943, "link": "https://stackoverflow.com/questions/36610943/operator-overloading-and-references-to-objects/36611091#36611091", "title": "Operator overloading and references to objects", "body": "<p>See code below:</p>\n\n<pre><code>Item *it;\nit = new Screwdriver(\"big\", 11);\ncout &lt;&lt; *it;\n</code></pre>\n\n<p>C++ has dereference operator <code>*</code> to go from pointer to the value it points to.</p>\n"}], "owner": {"reputation": 69, "user_id": 6174009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/735509bdb37970097f212d47c2262bba?s=128&d=identicon&r=PG&f=1", "display_name": "Hidden", "link": "https://stackoverflow.com/users/6174009/hidden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 36611091, "answer_count": 2, "score": 1, "last_activity_date": 1460588784, "creation_date": 1460587949, "question_id": 36610943, "link": "https://stackoverflow.com/questions/36610943/operator-overloading-and-references-to-objects", "title": "Operator overloading and references to objects", "body": "<p>I have some code which overloads the &lt;&lt; operator to print out some data I used this website and pretty much copied the code </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/1z2f6c2k.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/1z2f6c2k.aspx</a></p>\n\n<p>I can get the code to work properly but not for my given example.</p>\n\n<p>As you can see by the link:</p>\n\n<pre><code>// overload_date.cpp\n// compile with: /EHsc\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass Date\n{\n    int mo, da, yr;\npublic:\n    Date(int m, int d, int y)\n    {\n        mo = m; da = d; yr = y;\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; os, const Date&amp; dt);\n};\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, const Date&amp; dt)\n{\n    os &lt;&lt; dt.mo &lt;&lt; '/' &lt;&lt; dt.da &lt;&lt; '/' &lt;&lt; dt.yr;\n    return os;\n}\n\nint main()\n{\n    Date dt(5, 6, 92);\n    cout &lt;&lt; dt;\n}\n</code></pre>\n\n<p>But for my example I create pointers to the objects rather than the values directly, so I'd have something like:</p>\n\n<pre><code>Item *it;\nit = new Screwdriver(\"big\", 11);\ncout &lt;&lt; it;\n</code></pre>\n\n<p>But this then only prints out the pointer! how do I dereference this? or is this even the best way to do it ?</p>\n"}, {"tags": ["c++", "lambda", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 2, "creation_date": 1460669648, "post_id": 36610999, "comment_id": 60863930, "body": "This way he has not <i>a single mutex shared across all instantiations of the critical section</i>. Am I wrong?"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1460724610, "post_id": 36610999, "comment_id": 60888614, "body": "@skypjack, oops, I originally wrote <code>make_shared</code> but I&#39;m not sure why I changed it to <code>make_unique</code> (which makes the lambda non-copyable, when I meant to make it copyable with a shared mutex). A silly brainfart. Fixed now."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 1, "creation_date": 1460728378, "post_id": 36610999, "comment_id": 60891405, "body": "Nice. I guess also the OP would like to see <code>(auto &amp;v)</code> instead of <code>(int &amp;v)</code>, for it was his goal to have a generalized lambda."}], "tags": [], "owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "is_accepted": true, "score": 5, "last_activity_date": 1460729302, "last_edit_date": 1460729302, "creation_date": 1460588274, "answer_id": 36610999, "question_id": 36610837, "link": "https://stackoverflow.com/questions/36610837/local-static-variable-shared-between-all-instantiations-of-a-generic-lambda-expr/36610999#36610999", "title": "Local static variable shared between all instantiations of a generic lambda expression", "body": "<p>You can init-capture a shared_ptr, which will be similar to having it defined as a member variable of the closure type, and so all copies of the closure object will share the same mutex:</p>\n\n<pre><code>  auto lambda = [&amp;i, m = std::make_shared&lt;std::mutex&gt;()](auto &amp;v)\n  {\n      std::lock_guard&lt;std::mutex&gt; lock(*m);\n      /* critical section with v and i */\n  };\n</code></pre>\n"}], "owner": {"reputation": 1552, "user_id": 2362671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0585760afe78ec9aafe1836b826ed495?s=128&d=identicon&r=PG", "display_name": "Come Raczy", "link": "https://stackoverflow.com/users/2362671/come-raczy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 1, "accepted_answer_id": 36610999, "answer_count": 1, "score": 5, "last_activity_date": 1460729302, "creation_date": 1460587299, "last_edit_date": 1460687648, "question_id": 36610837, "link": "https://stackoverflow.com/questions/36610837/local-static-variable-shared-between-all-instantiations-of-a-generic-lambda-expr", "title": "Local static variable shared between all instantiations of a generic lambda expression", "body": "<p>I have some code where a non-generic lamba expression has a local static variable: a mutex for a critical section. Something that can be simplified to:</p>\n\n<pre><code>int i = 0;\nauto lambda = [&amp;i](int &amp;v)\n{\n    static std::mutex mutex;\n    std::lock_guard&lt;std::mutex&gt; lock(mutex);\n    /* critical section with v and i */};\n}\n</code></pre>\n\n<p>Now, the critical section implemented in this lambda expression could be reused verbatim for other types than <code>int &amp;</code> and I would have liked a change as simple as replacing <code>int</code> with <code>auto</code> in the declarator, like this:</p>\n\n<pre><code>auto lambda = [&amp;i](auto &amp;v)\n</code></pre>\n\n<p>Unfortunately, if I do this, <code>lambda(int&amp;)</code> and <code>lambda(float&amp;)</code> won't share the same local static variable anymore, which will defeat the lock in the critical section.</p>\n\n<p>What would be the simplest change in the code that would meet all these requirements:</p>\n\n<ul>\n<li>provide the genericity that I need; and</li>\n<li>ensure that I have a single mutex shared across all instantiations of the critical section; and</li>\n<li>does not expose the mutex to public view</li>\n</ul>\n\n<p>A solution that would work would be to replace the lambda expression with a class with a template method, something like this:</p>\n\n<pre><code>class Lambda\n{\npublic:\n    Lambda(int &amp;i) : i_(i) {}\n    template&lt;class V&gt;\n    void operator()(V &amp;v)\n    {\n        std::lock_guard&lt;std::mutex&gt; lock(mutex_);\n        /* critical section with v and i_ */\n    };\nprivate:\n    static std::mutex mutex_;\n    int &amp;i_;\n};\nstd::mutex Lambda::mutex_;\n\nint i = 0;\nLambda lambda(i);\n</code></pre>\n\n<p>This would work (with caveats like the private reference <code>i_</code>), but it looks very cumbersome compared to the initial lambda expression. Would there be anything more straightforward?</p>\n"}, {"tags": ["c++", "visual-c++", "dll", "dynamic-linking", "cl"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460589479, "post_id": 36610775, "comment_id": 60819187, "body": "<code>cl say_hello.cpp &#47;LD</code> should produce the DLL and an import library in .lib file. The subsequent <code>lib</code> command then overwrites the aforementioned import library with static library. Just don&#39;t do that. Another problem is that names need to be explicitly exported from a DLL, via a DEF file or <code>__declspec(dllexport)</code>. As written, you aren&#39;t exporting any, so there&#39;s nothing to actually link to."}, {"owner": {"reputation": 3013, "user_id": 667595, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4a76a2783d70e969884e80828116c0a8?s=128&d=identicon&r=PG", "display_name": "depthfirstdesigner", "link": "https://stackoverflow.com/users/667595/depthfirstdesigner"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460590188, "post_id": 36610775, "comment_id": 60819430, "body": "Ahhh yes... the console output of that first step <code>cl say_hello.cpp &#47;LD</code> does seem to indicate that a &quot;/implib:say_hello.lib&quot; did get created, but I only see the <code>say_hello.obj</code> and <code>say_hello.dll</code> generated in the directory.  Is there some other flag to pass to tell it not to cleanup the import library?"}, {"owner": {"reputation": 3013, "user_id": 667595, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4a76a2783d70e969884e80828116c0a8?s=128&d=identicon&r=PG", "display_name": "depthfirstdesigner", "link": "https://stackoverflow.com/users/667595/depthfirstdesigner"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460591121, "post_id": 36610775, "comment_id": 60819708, "body": "Ahh I see, the <code>__declspec(dllexport)</code> macro prefixing the function to be exported is critical, because without it cl.exe winds up deleting the import library file <code>say_hello.lib</code> immediately upon completion."}, {"owner": {"reputation": 91690, "user_id": 4833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0d3bf653c44af90ef09711d538bee6a?s=128&d=identicon&r=PG", "display_name": "VolkerK", "link": "https://stackoverflow.com/users/4833/volkerk"}, "edited": false, "score": 0, "creation_date": 1460591518, "post_id": 36610775, "comment_id": 60819846, "body": "Yes, because there would be nothing to import ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 91690, "user_id": 4833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0d3bf653c44af90ef09711d538bee6a?s=128&d=identicon&r=PG", "display_name": "VolkerK", "link": "https://stackoverflow.com/users/4833/volkerk"}, "edited": false, "score": 0, "creation_date": 1460590596, "post_id": 36611254, "comment_id": 60819554, "body": "Doh, jumbled up the compiler/linker parameters of the second cl.exe command. Note to self: first test, then post."}], "tags": [], "owner": {"reputation": 91690, "user_id": 4833, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c0d3bf653c44af90ef09711d538bee6a?s=128&d=identicon&r=PG", "display_name": "VolkerK", "link": "https://stackoverflow.com/users/4833/volkerk"}, "is_accepted": true, "score": 2, "last_activity_date": 1460590554, "last_edit_date": 1460590554, "creation_date": 1460589889, "answer_id": 36611254, "question_id": 36610775, "link": "https://stackoverflow.com/questions/36610775/how-does-one-setup-vc-dynamic-linking-via-command-line/36611254#36611254", "title": "How does one setup VC++ dynamic linking via command-line?", "body": "<p>Here's an example. Not every thing is entirely necessary (DLLMain e.g.) but I think those are things you should look up ;-)</p>\n\n<p>SayHello.cpp</p>\n\n<pre><code>#define WIN32_LEAN_AND_MEAN\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n\n// see https://msdn.microsoft.com/en-us/library/56h2zst2.aspx : Decorated Names\nextern \"C\" {  // somehow making it superfluous to put the code in SayHello.cPP ...but anyway ;-)\n    // see https://msdn.microsoft.com/en-us/library/3y1sfaz2.aspx : dllexport, dllimport\n    __declspec(dllexport) void say_hello()\n    {\n        printf(\"Hello DLL World!\");\n    }\n\n  // see https://msdn.microsoft.com/en-us/library/windows/desktop/ms682583%28v=vs.85%29.aspx : (optional) DllMain entry point\n    BOOL WINAPI DllMain(HMODULE hModule,\n        DWORD  ul_reason_for_call,\n        LPVOID lpReserved\n        )\n    {\n        switch (ul_reason_for_call)\n        {\n        case DLL_PROCESS_ATTACH:\n        case DLL_THREAD_ATTACH:\n        case DLL_THREAD_DETACH:\n        case DLL_PROCESS_DETACH:\n            break;\n        }\n        return TRUE;\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>extern \"C\" { __declspec(dllimport) void say_hello(); }  // we did this in SayHello.cpp, so we have to do it here too.\n// otherwise the name wouldn't match\n\nint main() {\n    say_hello();\n    return 0;\n}\n</code></pre>\n\n<p>and then compiling/linking</p>\n\n<pre><code>cl /D_USRDLL /D_WINDLL SayHello.cpp /LD /link /OUT:SayHello.dll\n</code></pre>\n\n<p>/LD tells the linker to build a DLL <em>and</em> to use /MT, see <a href=\"https://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx\" rel=\"nofollow\">/MD, /MT, /LD (Use Run-Time Library)</a>. (via the OUT: parameter you <em>could</em> change the name of the .dll; here it's the default, just for demonstration purpose. If you leave it out, you can also skip the /link parameter since there would be no linker parameters anymore.)</p>\n\n<pre><code>cl.exe /MT main.cpp /link /SUBSYSTEM:CONSOLE \"SayHello.lib\" \n</code></pre>\n\n<p>matching the run-time lib settings for the dll, creating a <a href=\"https://msdn.microsoft.com/en-us/library/fcc1zstk.aspx\" rel=\"nofollow\">console application</a> (main.cpp has a <code>int main()</code>) and linking the stub lib of SayHello (instead of using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx\" rel=\"nofollow\">LoadLibrary(\"SayHello.dll\")</a>/<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx\" rel=\"nofollow\">GetProcAddress(...)</a>)</p>\n"}, {"tags": [], "owner": {"reputation": 3013, "user_id": 667595, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4a76a2783d70e969884e80828116c0a8?s=128&d=identicon&r=PG", "display_name": "depthfirstdesigner", "link": "https://stackoverflow.com/users/667595/depthfirstdesigner"}, "is_accepted": false, "score": 0, "last_activity_date": 1460592250, "creation_date": 1460592250, "answer_id": 36611595, "question_id": 36610775, "link": "https://stackoverflow.com/questions/36610775/how-does-one-setup-vc-dynamic-linking-via-command-line/36611595#36611595", "title": "How does one setup VC++ dynamic linking via command-line?", "body": "<p>I marked the answer by VolkerK as correct since it includes some other important Windows DLL API details that are definitely worth a read, but I wanted to summarize the <em>bare minimum</em> changes one could make it get the dynamic linking working in the most simple example based on Igor Tandetnik and VolkerK's comments.</p>\n\n<ul>\n<li><p>Adding the macro <code>__declspec(dllexport)</code> before at least one function to be exported in the DLL is essential, otherwise the library compiling command won't creating an import library to indicate which functions are available for dynamic linking.  </p></li>\n<li><p>The second \"lib say_hello.obj\" was totally wrong, as the DLL compiling command will correctly make the say_hello.lib (whereas that lib command would only generate a static library and wind up overwriting the first command).</p></li>\n</ul>\n\n<p>Here's the full most basic working example:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>void say_hello();\n\nint main()\n{\n    say_hello();\n    return 0;\n}\n</code></pre>\n\n<p><strong>say_hello.cpp</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n__declspec(dllexport) void say_hello()\n{\n    printf(\"Hello DLL World!\");\n}\n</code></pre>\n\n<p><strong>Compilation commands:</strong></p>\n\n<pre><code>cl say_hello.cpp /LD\ncl main.cpp say_hello.lib\n</code></pre>\n"}], "owner": {"reputation": 3013, "user_id": 667595, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4a76a2783d70e969884e80828116c0a8?s=128&d=identicon&r=PG", "display_name": "depthfirstdesigner", "link": "https://stackoverflow.com/users/667595/depthfirstdesigner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1617, "favorite_count": 0, "accepted_answer_id": 36611254, "answer_count": 2, "score": 1, "last_activity_date": 1460596783, "creation_date": 1460587033, "last_edit_date": 1460596783, "question_id": 36610775, "link": "https://stackoverflow.com/questions/36610775/how-does-one-setup-vc-dynamic-linking-via-command-line", "title": "How does one setup VC++ dynamic linking via command-line?", "body": "<p>Though I have no problem setting up run-time DLL loading via Visual Studio, I'm having some trouble when doing it manually through the Visual Studio CLI tools.</p>\n\n<p>Say we have the following 2 simple C++ source files we'd like to compile, one for the binary executable and one for the DLL:</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>void say_hello();\n\nint main()\n{\n    say_hello();\n    return 0;\n}\n</code></pre>\n\n<p><strong>say_hello.cpp</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nvoid say_hello()\n{\n    printf(\"Hello DLL World!\");\n}\n</code></pre>\n\n<p>What are the steps to compile <code>say_hello.cpp</code> file as a DLL then dynamically link it with the call from <code>main.cpp</code>?</p>\n\n<p>Based on my read through of the MSDN docs, I was able to successfully compile the <code>say_hello.dll</code> and application then run it and  using the following commands:</p>\n\n<pre><code>cl say_hello.cpp /LD\nlib say_hello.obj\ncl say_hello.lib main.cpp\n</code></pre>\n\n<p>Unfortunately, this seems to only allow for statically linking the application via the <code>say_hello.lib</code> file (which can be confirmed by deleting both the .lib and .dll file, which still lets the binary run successfully).</p>\n\n<p>What commands/parameters do I have to pass to the compiling/linking phase to have <code>main.exe</code> use the DLL instead of a static library?</p>\n"}, {"tags": ["c++", "algorithm", "sigabrt"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1460587669, "post_id": 36610759, "comment_id": 60818538, "body": "With an excerpt of this length, can you include line numbers or visually indicate line 97? People will be reluctant to count them or extract the code into an external editor."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1460587806, "post_id": 36610759, "comment_id": 60818587, "body": "Anyway, my suspicion is that somewhere in here, an iterator is being invalidated, due to all the iterators and loops going on. I&#39;ll try to look closer..."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1460588388, "post_id": 36610759, "comment_id": 60818795, "body": "I&#39;m not going to begin to dissect the root cause, but in the else-case of your <code>if(d == &#39;N&#39;)</code> conditional, the accessor for <code>graf[b][i]</code>  (used twice) is exceeding your boundaries. The specific repeatable case i&#39;m seeing is where <code>b == 3</code> and <code>i == 1</code>. At that time, the <code>graf[b]</code> sub-vector has only one item in it, thus it is indexible only by <code>0</code>."}, {"owner": {"reputation": 11, "user_id": 4332304, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cfb7ac9d00375ad68266f045faed2c68?s=128&d=identicon&r=PG&f=1", "display_name": "fifco", "link": "https://stackoverflow.com/users/4332304/fifco"}, "edited": false, "score": 0, "creation_date": 1460588472, "post_id": 36610759, "comment_id": 60818826, "body": "Well, I just found out, that my comparator can be a problem during set operations, because it is not letting some structs go into set propertly, but it still doesn&#39;t explain this input error"}, {"owner": {"reputation": 11, "user_id": 4332304, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cfb7ac9d00375ad68266f045faed2c68?s=128&d=identicon&r=PG&f=1", "display_name": "fifco", "link": "https://stackoverflow.com/users/4332304/fifco"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460588681, "post_id": 36610759, "comment_id": 60818907, "body": "@WhozCraig well, yes, that looks like it. I am checking only the first vector and they are separate and so can be different lengths. That should be it. Thanks a lot"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460588711, "post_id": 36610759, "comment_id": 60818919, "body": "@fifco Glad it... helped =P. Btw, can&#39;t your comparator just be something like <code>return std::make_tuple(left.n, left.b) &lt; std::make_tuple(right.n, right.b);</code> ?"}, {"owner": {"reputation": 11, "user_id": 4332304, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cfb7ac9d00375ad68266f045faed2c68?s=128&d=identicon&r=PG&f=1", "display_name": "fifco", "link": "https://stackoverflow.com/users/4332304/fifco"}, "edited": false, "score": 0, "creation_date": 1460588997, "post_id": 36610759, "comment_id": 60819006, "body": "there is a problem with it that it doesn&#39;t return a&lt;b || a&gt;b all the time. For instance (1,2,5) == (1,2,8) for w=5 and w=8 and so it doesn&#39;t allow insertion of second one into set"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1460591595, "post_id": 36610759, "comment_id": 60819874, "body": "@fifco I would suggest you change from using <code>[ ]</code> to access vector elements and instead use <code>vector::at()</code>.  Using this will throw an <code>out_of_range</code> exception with much more information if you are going beyond the boundaries of the vector.  That is much better than a crash with no further information.   Second, you should give your variables more descriptive names.  Naming variables <code>a</code>, <code>b</code>, <code>n</code>, etc. not only makes it hard to figure the code out, you could at some point conceivably hide those 1 letter variable names with local variables, and not know you made the mistake."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1460591741, "post_id": 36610759, "comment_id": 60819922, "body": "@fifco Also, what is the test data you&#39;re using?  If you gave us the input you&#39;re using to duplicate the error, that would be helpful."}], "answers": [{"tags": [], "owner": {"reputation": 5646, "user_id": 4992422, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/e408ee3d89df9b7865442e5387ef856c?s=128&d=identicon&r=PG&f=1", "display_name": "PYA", "link": "https://stackoverflow.com/users/4992422/pya"}, "is_accepted": false, "score": 0, "last_activity_date": 1460594205, "creation_date": 1460594205, "answer_id": 36611862, "question_id": 36610759, "link": "https://stackoverflow.com/questions/36610759/c-sigabrt-when-pushing-to-vector-of-vectors/36611862#36611862", "title": "c++ sigabrt when pushing to vector of vectors", "body": "<pre><code>int main() {\nint n,m,q;\ncin &gt;&gt; n &gt;&gt; m &gt;&gt; q;\nvector&lt;vector&lt;myStruct&gt; &gt; graf(n); \nmyStruct temp;\nint a,b,c;\nchar d;\nbool flag;\nfor(int f = 0; f &lt; m;f++){\n    int i;\n    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d;\n    flag = 0;\n    /*Graph is list of neighbours*/\n    for(i = 0; i &lt; graf[a].size();i++){\n        if(graf[a][i].vertex == b){\n            flag = 1;\n            break;\n        }\n    }\n</code></pre>\n\n<p>you do not resize the inner vectors in graf <code>if(graf[a][i].vertex == b)</code>\nyou are out of bounds. You need to resize the inner vector to the correct length like</p>\n\n<pre><code>for(int i =0;i&lt;n;i++)\n{\n  graf[i].resize(size_var);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4332304, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/cfb7ac9d00375ad68266f045faed2c68?s=128&d=identicon&r=PG&f=1", "display_name": "fifco", "link": "https://stackoverflow.com/users/4332304/fifco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460594205, "creation_date": 1460586942, "last_edit_date": 1460591276, "question_id": 36610759, "link": "https://stackoverflow.com/questions/36610759/c-sigabrt-when-pushing-to-vector-of-vectors", "title": "c++ sigabrt when pushing to vector of vectors", "body": "<p>I am working on small program that is uses the Djikstra algorithm to search special paths in graphs. Algorithmically it is correct - I am 100% sure about that. Basically, the only modification to normal Djikstra is that when values of edges are pairs, they are compared in special way. Also, Djikstra returns 2 path lengths. </p>\n\n<p>The task and details are not important here, because my program is failing due to something completely unrelated to it and I can`t seem to find why. It fails when reading input and putting it into structures. </p>\n\n<p>The format of input goes as follows: n = number of vertices, m = number of edges and q = number of questions. Than m lines with description of edge: vertex1, vertex2, value, charValue that is either N or B. After that there are q questions asking about shortest path between start and end. I am getting </p>\n\n<pre><code>SIGABRT free(): invalid pointer: 0x000000000060b0d0 \n</code></pre>\n\n<p>(the number of pointer is different all the time of course)\non push_back() on line 97 during working on last line of input when my input goes like this:</p>\n\n<pre><code>6 11 5\n0 1 6 B\n0 3 5 N\n0 3 10 B\n0 4 0 N\n0 5 2 B\n5 2 7 N\n5 4 1 B\n4 1 3 N\n</code></pre>\n\n<p>(the input is not finished - there are still some edges to go and also questions, but it fails at the same place all the time)</p>\n\n<p>I tried Valgrind with no success. Code goes like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;limits&gt;\n#include &lt;set&gt;\nusing namespace std;\n\nstruct myStruct{\n    long long n,b;\n    int vertex; \n};\n\nstruct comparator {\n    bool operator() (const myStruct&amp; left, const myStruct&amp; right) const{ \n        if (left.n == right.n ){\n            return left.b &lt; right.b;\n        } else {\n            return left.n &lt; right.n;\n        }\n    }\n};\n\npair&lt;long long, long long&gt; customDjikstra(int start, int end, int n,vector&lt; vector&lt; myStruct &gt; &gt; &amp;graf){ //djikstra\n    vector&lt;pair&lt;long long,long long&gt; &gt; djikstraLengthPaths; \n    set&lt; myStruct , comparator &gt; orderedSet;\n    djikstraLengthPaths.reserve(n);\n    for(int i = 0; i &lt; n; i++){\n        djikstraLengthPaths.push_back(make_pair(numeric_limits&lt;long long&gt;::max(),numeric_limits&lt;long long&gt;::max())); \n    }\n    djikstraLengthPaths[start].first = 0;\n    djikstraLengthPaths[start].second = 0;\n    vector&lt;bool&gt; visited; \n    visited.resize(n);\n    myStruct tmp,currentVertex;\n    tmp.b = 0;\n    tmp.n = 0;\n    tmp.vertex = start;\n    orderedSet.insert(tmp);\n\n    while(!orderedSet.empty()){\n        currentVertex = (*orderedSet.begin());\n        orderedSet.erase(orderedSet.begin());\n        if (visited[currentVertex.vertex]){\n            continue;\n        }\n        visited[currentVertex.vertex] = true;\n\n        for(int j = 0; j &lt; graf[currentVertex.vertex].size();j++){\n            myStruct edge = graf[currentVertex.vertex][j];\n\n            if(djikstraLengthPaths[edge.vertex].first &gt; currentVertex.n + edge.n || (djikstraLengthPaths[edge.vertex].first == currentVertex.n + edge.n &amp;&amp; djikstraLengthPaths[edge.vertex].second &gt; currentVertex.b + edge.b)){ //ak to zlepsi hodnotu nasej cesty, updatneme to\n                djikstraLengthPaths[edge.vertex].first = currentVertex.n + edge.n;\n                djikstraLengthPaths[edge.vertex].second = currentVertex.b + edge.n + edge.b;\n\n                tmp.n = djikstraLengthPaths[edge.vertex].first;\n                tmp.b = djikstraLengthPaths[edge.vertex].second;\n                tmp.vertex = edge.vertex;\n                orderedSet.insert(tmp);\n            }\n        }\n\n    }\n\n    return djikstraLengthPaths[end];\n\n}\n\nint main() {\n    int n,m,q;\n    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;\n    vector&lt;vector&lt;myStruct&gt; &gt; graf(n); \n    myStruct temp;\n    int a,b,c;\n    char d;\n    bool flag;\n    for(int f = 0; f &lt; m;f++){\n        int i;\n        cin &gt;&gt; a &gt;&gt; b &gt;&gt; c &gt;&gt; d;\n        flag = 0;\n        /*Graph is list of neighbours*/\n        for(i = 0; i &lt; graf[a].size();i++){\n            if(graf[a][i].vertex == b){\n                flag = 1;\n                break;\n            }\n        }\n\n        if(d == 'N'){\n\n            if(!flag){\n                temp.n = c;\n                temp.b = 0;\n                temp.vertex = b;\n                graf[a].push_back(temp);\n                temp.n = c;\n                temp.b = 0;\n                temp.vertex = a;\n                graf[b].push_back(temp);\n            } else if(graf[a][i].n &gt; c) {\n                graf[a][i].n = c;\n                graf[a][i].b = 0;\n                graf[b][i].n = c;\n                graf[b][i].b = 0;\n            }\n\n        }else {\n            if(!flag){\n                temp.n = 0;\n                temp.b = c;\n                temp.vertex = b;\n                graf[a].push_back(temp);\n                temp.n = 0;\n                temp.b = c;\n                temp.vertex = a;\n                graf[b].push_back(temp);\n            } else if(graf[a][i].n &gt; 0 || graf[a][i].b &gt; c) {\n                graf[a][i].n = 0;\n                graf[a][i].b = c;\n\n                graf[b][i].n = 0;\n                graf[b][i].b = c;\n\n            }\n        }\n    }\n\n    int start,end;\n    pair&lt;long long, long long&gt; answer;\n\n    for(int j = 0; j &lt; q;j++){\n        cin &gt;&gt; start &gt;&gt; end;\n        answer = customDjikstra(start,end,n,graf);\n        if(answer.first == numeric_limits&lt;long long&gt;::max()){ \n            cout &lt;&lt; \"-1 -1\" &lt;&lt; endl;\n        } else {\n            cout &lt;&lt; answer.first &lt;&lt; ' ' &lt;&lt; answer.second &lt;&lt; endl;\n        }\n    }\n}\n</code></pre>\n\n<p>If you could help me and tell me what am I doing wrong, forgetting to initialise or anything like that, it would be great.</p>\n"}, {"tags": ["c++", "c", "linux", "audio"], "comments": [{"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1460587206, "post_id": 36610716, "comment_id": 60818373, "body": "You find and download one that does, <i>or</i> you read-up more about that particular sound generation chip and how it works, before implementing code that will perform the same way, producing the same output as the chip would have, as a wav. In either case, you&#39;ll need a library to play the sound and perhaps another one to decode it. Your first aim of converting the GameBoy rom into C to run natively on the host simply wont happen. It&#39;s far, far easier to pretend to be a cpu than it is to convert from one cpu/os to another - why do you think all emulators work the way they do already?"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1460588381, "post_id": 36610716, "comment_id": 60818789, "body": "I don&#39;t care what&#39;s easy, I&#39;m not trying to recreate something that&#39;s already been done, I want to do something new. I don&#39;t want to store the music separately, and any libraries that play sounds have been written once, so they can be written again."}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1460588786, "post_id": 36610716, "comment_id": 60818947, "body": "Sure, just dont bank on doing anything else productive with your life then. The GameBoy SuperAdvance 10,000 will be released before code implementing your gba-&gt;pc native code is... The most obvious thing to do would be to generate the same audio that the chips do. You can read up about their registers, the functions of these regs and the chip&#39;s response to said input. This has already been done several times - there&#39;s no way around that, you re-do it or get code that already exists. Just like eveyone did with the OPL chips of the SoundBlaster or the Yamaha stuff inside SegaMS and Nintendos. :)"}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "reply_to_user": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1460589005, "post_id": 36610716, "comment_id": 60819011, "body": "I&#39;m not trying to do anything with a gba, I&#39;m just using a generic GameBoy from 1989, 8-bit Z-80 processor and all that. I can figure out what waveforms are being represented in the ROM pretty easily, what I want to know is how to output them once I do. Even using a library to do it is fine."}, {"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 2, "creation_date": 1460589899, "post_id": 36610716, "comment_id": 60819324, "body": "The best choice is <code>libsdl</code>, which is basically Linux&#39;s DirectX. If you have a raw waveform, you can easily output it by looking up <a href=\"https://wiki.libsdl.org/SDL_OpenAudioDevice\" rel=\"nofollow noreferrer\">how to output audio</a>. If you have multiple basis waveforms you want to mix together, you can <a href=\"https://wiki.libsdl.org/SDL_MixAudioFormat\" rel=\"nofollow noreferrer\">look that up</a> as well. If you don&#39;t have the basis waveforms, you have to figure out how the sound chip works and emulate it to produce them."}], "owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1460586652, "creation_date": 1460586652, "question_id": 36610716, "link": "https://stackoverflow.com/questions/36610716/linux-play-raw-sound-from-waveform", "title": "Linux Play Raw Sound from Waveform", "body": "<p>I'm in the process of building my own GameBoy emulator, the idea behind which is to convert a GameBoy flash ROM entirely into C code that can be run natively on the host computer. It's in the very early stages of development, and one of my roadblocks is that the GameBoy stores sound as a series of commands that edit one of four continuous wave forms. Basically, these sounds are always playing a flat tone unless you turn them off or modulate them by editing some register values. What this means is that I can't just <code>execvp(\"SomeMusicPlayer /path/to/sound.ext\", NULL);</code>, because the sound isn't stored in a portable format. Furthermore, the idea is to rebuild the game as a single executable, so I'd like to be able to play sounds without forking to an external program.</p>\n\n<p>In short, my question is: \"How do I play sounds as raw waveforms with envelope and sweep functions on Linux?\"</p>\n"}, {"tags": ["c++", "qt", "sorting", "c++11", "mixed"], "comments": [{"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 0, "creation_date": 1460586586, "post_id": 36610653, "comment_id": 60818094, "body": "it is safe and accurate. You can use lambda expression to avoid writing the <code>myfunction</code> as a separate function."}, {"owner": {"reputation": 8289, "user_id": 2013738, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e411bdd253abc6ef58624ff72fd2b369?s=128&d=identicon&r=PG", "display_name": "Simon Warta", "link": "https://stackoverflow.com/users/2013738/simon-warta"}, "edited": false, "score": 0, "creation_date": 1460586589, "post_id": 36610653, "comment_id": 60818097, "body": "What you do makes sense and looks good."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 1, "creation_date": 1460586613, "post_id": 36610653, "comment_id": 60818109, "body": "If you don&#39;t want to preserve order of equal elements, it is fine. Aside from that, do you need a copy there, in myfunction?"}, {"owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "reply_to_user": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1460586993, "post_id": 36610653, "comment_id": 60818279, "body": "@OlzhasZhumabek Why would I need a copy in that function? I don&#39;t think I understand the question."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 1, "creation_date": 1460587136, "post_id": 36610653, "comment_id": 60818345, "body": "@the_naive, sorry for not being clear. You have mixed i, j as your function arguments. It  can possibly slow down your sorting, because at every comparison it copies elements that are to be compared. You probably would like const mixed&amp; i, const mixed&amp; j. You don&#39;t modify anything, thus they const refs, and it avoids copying"}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 2, "last_activity_date": 1460586669, "creation_date": 1460586669, "answer_id": 36610720, "question_id": 36610653, "link": "https://stackoverflow.com/questions/36610653/how-safe-it-is-to-sort-a-mixed-datatype-vector-based-on-the-integer-value-includ/36610720#36610720", "title": "How safe it is to sort a mixed datatype vector based on the integer value included in datatype using std::sort?", "body": "<p><code>std::sort</code> can sort elements of any type so long as they're either copyable or movable. The comparison function provided must induce a <em>strict weak ordering.</em> Your comparison function is a valid strict weak ordering, which lumps all objects with equal <code>number</code> into a single equivalence class. If the unsorted vector contains records with equal <code>number</code> values, they will be adjacent in the sorted vector, but the order is unspecified.</p>\n"}], "owner": {"reputation": 2676, "user_id": 1193350, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/585e008945adc54ef63ac2c4116eeaa6?s=128&d=identicon&r=PG", "display_name": "the_naive", "link": "https://stackoverflow.com/users/1193350/the-naive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 36610720, "answer_count": 1, "score": 0, "last_activity_date": 1460586669, "creation_date": 1460586319, "question_id": 36610653, "link": "https://stackoverflow.com/questions/36610653/how-safe-it-is-to-sort-a-mixed-datatype-vector-based-on-the-integer-value-includ", "title": "How safe it is to sort a mixed datatype vector based on the integer value included in datatype using std::sort?", "body": "<p>I wrote the following code in Qt creator. I was trying to sort a vector that contains mixed type with 2 QStrings and an integer. I used std::sort and its function mechanism to sort. At least in the output pre-sorting and post-sorting, it seems the sorting worked, but my question is, accurate and safe could it be?</p>\n\n<p>Thanks.  </p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;QDebug&gt;\n\nclass mixed\n{\npublic:\n    int number;\n    QString name;\n    QString address;\n    mixed(int n, QString s, QString a)\n    {\n        number = n;\n        name = s;\n        address = a;\n    }\n\n};\n\nbool myfunction (mixed i,mixed j) { return (i.number&lt;j.number); }\n\nint main()\n{\n    std::vector&lt;mixed&gt;myV;\n    myV.push_back(mixed(100, \"akkas\", \"100\"));\n    myV.push_back(mixed(2, \"akkas1\", \"2\"));\n    myV.push_back(mixed(1111, \"akkas2\", \"1111\"));\n    myV.push_back(mixed(-1, \"akkas3\", \"-1\"));\n    myV.push_back(mixed(7, \"akkas4\", \"7\"));\n    myV.push_back(mixed(0, \"akkas0\", \"0\"));\n\n    for(int i=0; i&lt;myV.size(); i++)\n    {\n        qDebug()&lt;&lt;myV.at(i).number&lt;&lt;\" \"&lt;&lt;myV.at(i).name&lt;&lt;\" \"&lt;&lt;myV.at(i).address&lt;&lt;endl;\n    }\n    std::sort (myV.begin(), myV.end(), myfunction);\n\n    for(int i=0; i&lt;myV.size(); i++)\n    {\n        qDebug()&lt;&lt;myV.at(i).number&lt;&lt;\" \"&lt;&lt;myV.at(i).name&lt;&lt;\" \"&lt;&lt;myV.at(i).address&lt;&lt;endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "identifier"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1460586306, "post_id": 36610586, "comment_id": 60817988, "body": "You need to add a prototype for <code>int DealingHandler(int)</code> and <code>void EndProgram()</code> above <code>int main()</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1460586887, "post_id": 36610586, "comment_id": 60818232, "body": "If you use <code>std::toupper</code> or <code>std::tolower</code> before the <code>switch</code> statement, you could reduce the number of cases by half."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1460587639, "post_id": 36610777, "comment_id": 60818531, "body": "Don&#39;t post link-only answers. Copy or summarize the relevant information, and use the link to provide additional support. SO answers should stand on their own, even if the remote site goes down."}, {"owner": {"reputation": 19, "user_id": 2926042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RX21F.jpg?s=128&g=1", "display_name": "BMK600", "link": "https://stackoverflow.com/users/2926042/bmk600"}, "edited": false, "score": 0, "creation_date": 1460734652, "post_id": 36610777, "comment_id": 60895915, "body": "Thanks, I tried this and I feel so stupid right now, all it took was moving the function to before the main...  TYVM for your help."}, {"owner": {"reputation": 105, "user_id": 6200254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORk7w.png?s=128&g=1", "display_name": "Rezniaq", "link": "https://stackoverflow.com/users/6200254/rezniaq"}, "edited": false, "score": 0, "creation_date": 1460745437, "post_id": 36610777, "comment_id": 60902220, "body": "Anyway, moving a function before another isn&#39;t the real right way to do the things, you should use function prototypes. You would appreciate it later, when code organization becomes a must."}], "tags": [], "owner": {"reputation": 105, "user_id": 6200254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORk7w.png?s=128&g=1", "display_name": "Rezniaq", "link": "https://stackoverflow.com/users/6200254/rezniaq"}, "is_accepted": true, "score": 2, "last_activity_date": 1460589948, "last_edit_date": 1460589948, "creation_date": 1460587041, "answer_id": 36610777, "question_id": 36610586, "link": "https://stackoverflow.com/questions/36610586/identifier-not-found-error/36610777#36610777", "title": "Identifier not found error?", "body": "<p><a href=\"http://www.cplusplus.com/articles/yAqpX9L8/\" rel=\"nofollow\">This</a> is a great example of declarations, prototypes and definitions, that are something that you need to know.</p>\n\n<p>Functions prototypes are a way to declare the function structure without his body, for example:</p>\n\n<pre><code>int my_function(int arg1, int arg2);\n</code></pre>\n\n<p>In fact, in function prototypes you don't even need to put the arguments name, just their type:</p>\n\n<pre><code>int my_function(int, int);\n</code></pre>\n\n<p>As the compilation process goes from top to down, when you have this code</p>\n\n<pre><code>// function a definition\nint function_a()\n{\n    int some_variable = function_b();\n}\n\n// function b definition\nint function_b()\n{\n    return 20;\n}\n</code></pre>\n\n<p>the compiler will know nothing about function_b() when you call her in function_a(), so, you must either reorder your code like this</p>\n\n<pre><code>// function b definition\nint function_b()\n{\n    return 20;\n}\n\n// function a definition\nint function_a()\n{\n    // now the compiler knows how function_b() works, or, at least, what arguments she need\n    int some_variable = function_b();\n}\n</code></pre>\n\n<p>or use prototypes to preserve your code organization, like this</p>\n\n<pre><code>// function b prototype\nint function_b();\n\n// function a definition\nint function_a()\n{\n    int some_variable = function_b();\n}\n\n// function b definition\nint function_b()\n{\n    return 20;\n}\n</code></pre>\n\n<p>so, now, the compiler knows that there's a \"function_b\" that exists, and know what her parameters and return value type are (in this case, there's no parameters and the return type is int)</p>\n\n<p>For order, you'll usually put the function prototype in the header file (.h) and the definition in the code file (.c/cpp)</p>\n\n<p>In your example, inside of the main function you are calling the DealingHandler and EndProgram functions, but they're defined later and that's why you get an error. So, using functions prototypes you can fix it easily, putting</p>\n\n<pre><code>/* this can be\nint DealingHandler(int);\nbecause function prototypes doesn't need argument's name, just their types */\nint DealingHandler(int HowManyDealed);\nvoid EndProgram();\n</code></pre>\n\n<p>upon the main() function, or, better, below this line</p>\n\n<pre><code>using namespace std;\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 2926042, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RX21F.jpg?s=128&g=1", "display_name": "BMK600", "link": "https://stackoverflow.com/users/2926042/bmk600"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4283, "favorite_count": 0, "closed_date": 1460592698, "accepted_answer_id": 36610777, "answer_count": 1, "score": -1, "last_activity_date": 1460589948, "creation_date": 1460585971, "question_id": 36610586, "link": "https://stackoverflow.com/questions/36610586/identifier-not-found-error", "closed_reason": "Not suitable for this site", "title": "Identifier not found error?", "body": "<p>I'm writing a code to make a basic text-based Blackjack game in C++.  I'm just starting out, but I immediately ran into an issue.  Here's the code I have so far, note that it is NOT meant to be complete or even run yet.\nYes, I know it is extremely messy and inefficient, I'm in my first C++ class ever.</p>\n\n<p>My issue is that I'm getting \"identifier not found\" whenever my code calls any recursive functions (DealingHandler and EndProgram).\nYes, I know having a function specifically to end the program is completely useless in this program, but I don't know how to suddenly end the program without something like this.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\nusing namespace std; const int maxScore = 21; //immutable upper limit\n                                              //string nameInput; - Idea for later.\nint HandVal, DealerHandVal, Aceone, val, aceVal;\nchar HitStay;\nstring DealerHand, currenthand; //Strings to output the cards ( 4 5 for example)\nint numAces, numTwo, numThree, numFour, numFive, numSix, numSeven, numEight, numNine, numTen, numJack, numQueen, numKing; //Inefficient way of making sure it doesn't give five twos out, however unlikely that may be.\nint main() {\n    cout &lt;&lt; \"Welcome to our C++ BlackJack Program.\" &lt;&lt; endl;\n    cout &lt;&lt; \"Please press enter to begin the game.\" &lt;&lt; endl;\n    system(\"PAUSE\");//Bad.  Still easiest for a beginning C++ class.\n    currenthand = \"\";\n    numAces = 4;\n    numTwo = 4;\n    numThree = 4;\n    numFour = 4;\n    numFive = 4;\n    numSix = 4;\n    numSeven = 4;\n    numEight = 4;\n    numNine = 4;\n    numTen = 4;\n    numJack = 4;\n    numQueen = 4;\n    numKing = 4;\n    int i = 2;\n    {\n        DealingHandler(i);\n        cout &lt;&lt; DealerHand;\n        cout &lt;&lt; \"Press H to hit or S to stay.\" &lt;&lt; endl;\n        cin &gt;&gt; HitStay;\n        switch (HitStay){\n                    case 'H':\n                        DealingHandler(1);\n                        break;\n                    case 'h':\n                        DealingHandler(1);\n                        break;\n                    case 's':\n                        EndProgram();\n                        break;\n                    case 'S':\n                        EndProgram();\n                        break;\n                    default:\n                        cout &lt;&lt; \"Invalid entry.\";\n                        break;\n        }\n    }\n    system(\"PAUSE\");\n}\nint DealingHandler(int HowManyDealed) {\n    for (int x = 0; x &lt;= HowManyDealed; x++) {\n        val = rand() % 13;\n        switch (val) {\n        case '1':\n            cout &lt;&lt; \"A\";\n            cout &lt;&lt; \"Press One to set this Ace equal to one.  Press Two to set it equal to eleven.  This cannot be changed, so choose wisely!\" &lt;&lt; endl;\n            cin &gt;&gt; aceVal;\n            if (aceVal = 1) {\n                Aceone = 1;\n                currenthand += \" 1\";\n                cout &lt;&lt; currenthand &lt;&lt; endl;\n                HandVal += 1;\n            }\n            if (aceVal = 2) {\n                Aceone = 11;\n                currenthand += \" 11\";\n                cout &lt;&lt; currenthand &lt;&lt; endl;\n                HandVal += 11;\n            }\n            numAces = numAces - 1;\n        case '2':\n            currenthand += \" 2\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 3;\n            numTwo -= 1;\n            break;\n        case '3':\n            currenthand += \" 3\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 3;\n            numThree -= 1;\n            break;\n        case '4':\n            currenthand += \" 4\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 4;\n            numFour -= 1;\n            break;\n        case '5':\n            currenthand += \" 5\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 5;\n            numFive -= 1;\n            break;\n        case '6':\n            currenthand += \" 6\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 6;\n            numSix -= 1;\n            break;\n        case '7':\n            currenthand += \" 7\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 7;\n            numSeven -= 1;\n            break;\n        case '8':\n            currenthand += \" 8\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 8;\n            numEight -= 1;\n            break;\n        case '9':\n            currenthand += \" 9\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 9;\n            numNine -= 1;\n            break;\n        case '10':\n            currenthand += \" 10\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 10;\n            numTen -= 1;\n            break;\n        case '11':\n            currenthand += \" J\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 10;\n            numJack -= 1;\n            break;\n        case '12':\n            currenthand += \" Q\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 10;\n            numQueen -= 1;\n            break;\n        case '13':\n            currenthand += \" K\";\n            cout &lt;&lt; currenthand &lt;&lt; endl;\n            HandVal += 10;\n            numKing -= 1;\n            break;\n        }\n        if (HandVal &lt; 21) {\n            cout &lt;&lt; \"Busted!\" &lt;&lt; endl;\n            EndProgram();\n        }\n\n    }\n    return HandVal;\n}\nvoid EndProgram()\n        {\n            cout &lt;&lt; \"I hope you had fun with my game!\";\n            system(\"PAUSE\");\n        }\n</code></pre>\n\n<p>Thanks in advance for helping me.</p>\n"}, {"tags": ["c++", "macos", "c++11", "lightroom"], "owner": {"reputation": 4955, "user_id": 5699329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/86758f7ce8c15546da5968c504360e55?s=128&d=identicon&r=PG", "display_name": "rsjaffe", "link": "https://stackoverflow.com/users/5699329/rsjaffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460585776, "creation_date": 1460585776, "question_id": 36610543, "link": "https://stackoverflow.com/questions/36610543/sending-keystrokes-to-lightroom-in-osx-using-c-everything-works-except-comman", "title": "Sending keystrokes to Lightroom in OSX using C++. Everything works except Command Key", "body": "<p>I have an application that is designed to send keystrokes to Lightroom. It assumes Lightroom is the foreground application. It works correctly in Windows for any keystroke/modifier key combination (code not included below) but, in OSX, it doesn't work if a Command modifier key is included. The Command key is ignored. Shift works, Option works, but not Command.</p>\n\n<p>For example, shift+command+c (copy) does not work in OS X. Shift+l (lights out) does.</p>\n\n<p>The full code (including Windows and OS X) is at <a href=\"https://github.com/rsjaffe/MIDI2LR/blob/master/Source/SendKeys.cpp\" rel=\"nofollow\">https://github.com/rsjaffe/MIDI2LR/blob/master/Source/SendKeys.cpp</a>. Below is a version that focuses on the issue at hand. Even though this is an abbreviated version of the code, I included all the \"includes\", just in case that helps you understand the issue. Also, I hardcoded a letter in this example and assumed an English keyboard to simplify things.</p>\n\n<p>Note that I am doing this in C++, not Objective C. I've been trying to avoid using another language, as my app already uses two languages by necessity (C++ and Lua), and my brain is nearly full.</p>\n\n<p>Question: Am I missing something here regarding handling of modifier keys, is this an issue with using C++ for these OS X functions, or is this a Lightroom bug in its key handling?</p>\n\n<pre><code>#include &lt;mutex&gt;\n#include &lt;unordered_map&gt;\n#include &lt;cctype&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#import &lt;CoreFoundation/CoreFoundation.h&gt;\n#import &lt;CoreGraphics/CoreGraphics.h&gt;\n\nvoid SendKeys::SendKeyDownUp(bool Option, bool Command, bool Shift) const\n{   \n    auto vk = 0x08; //for this example, just use 'c' key, assuming ANSI keyboard\n    const CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);\n    CGEventRef d;\n    CGEventRef u;\n    uint64_t flags = 0;\n\n    d = CGEventCreateKeyboardEvent(source, vk, true);\n    u = CGEventCreateKeyboardEvent(source, vk, false);\n    if (Command) flags |= kCGEventFlagMaskCommand;\n    if (Option) flags |= kCGEventFlagMaskAlternate;\n    if (Shift) flags |= kCGEventFlagMaskShift;\n    if (flags != UINT64_C(0))\n    {\n        CGEventSetFlags(d, static_cast&lt;CGEventFlags&gt;(flags));\n        CGEventSetFlags(u, static_cast&lt;CGEventFlags&gt;(flags));\n    }\n    CGEventPost(kCGHIDEventTap, d);\n    CGEventPost(kCGHIDEventTap, u);\n\n    CFRelease(d);\n    CFRelease(u);\n    CFRelease(source);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1460585492, "post_id": 36610457, "comment_id": 60817652, "body": "your second if has to stay first"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1460585537, "post_id": 36610457, "comment_id": 60817670, "body": "<code>root == NULL &amp;&amp; root-&gt;word != item </code> - if that first expression is true, do you <i>really</i> want to perform the second ??"}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460585988, "post_id": 36610457, "comment_id": 60817872, "body": "@WhozCraig shouldn&#39;t short circuit kick in?"}, {"owner": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "reply_to_user": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1460586079, "post_id": 36610457, "comment_id": 60817898, "body": "@OlzhasZhumabek No, when the first condition is true there is a need to valuate the second one as well"}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "reply_to_user": {"reputation": 17175, "user_id": 1756636, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92f14a1f21e57ba761c7163b2d00a78a?s=128&d=identicon&r=PG&f=1", "display_name": "SomeWittyUsername", "link": "https://stackoverflow.com/users/1756636/somewittyusername"}, "edited": false, "score": 0, "creation_date": 1460586150, "post_id": 36610457, "comment_id": 60817922, "body": "@SomeWittyUsername, thanks. I saw that root != NULL, overwatched."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460586183, "post_id": 36610457, "comment_id": 60817937, "body": "Pretty sure the OP wanted an <code>||</code> there rather than <code>&amp;&amp;</code>, but either are wrong (as is much of that function)."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460586483, "post_id": 36610457, "comment_id": 60818053, "body": "Pretty sure <a href=\"http://pastebin.com/gFLKBayZ\" rel=\"nofollow noreferrer\"><b>this</b></a> is what you were trying to do."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6201116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115c77b7acfd0984c36221739e9e7040?s=128&d=identicon&r=PG&f=1", "display_name": "partin_Mathew", "link": "https://stackoverflow.com/users/6201116/partin-mathew"}, "edited": false, "score": 0, "creation_date": 1460586222, "post_id": 36610578, "comment_id": 60817953, "body": "Wow. Yep, that fixed it. I don&#39;t know how I missed that. Thanks."}], "tags": [], "owner": {"reputation": 51, "user_id": 6201102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc69fa2d14b3eb415497ccfe399b581?s=128&d=identicon&r=PG&f=1", "display_name": "overflowingstack", "link": "https://stackoverflow.com/users/6201102/overflowingstack"}, "is_accepted": true, "score": 0, "last_activity_date": 1460585928, "creation_date": 1460585928, "answer_id": 36610578, "question_id": 36610457, "link": "https://stackoverflow.com/questions/36610457/access-violation-when-dynamically-allocating-memory/36610578#36610578", "title": "Access violation when dynamically allocating memory", "body": "<p>if(root == NULL) should be the first check you perform before trying to access any data members using the -> operator.\ncondition: if(root->word == item)\ncondition: if (root == NULL &amp;&amp; root->word != item)</p>\n\n<p>Your root is NULL and then you are trying to access root->word which is causing the crash. You are trying to access data member using an invalid pointer.</p>\n"}], "owner": {"reputation": 11, "user_id": 6201116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115c77b7acfd0984c36221739e9e7040?s=128&d=identicon&r=PG&f=1", "display_name": "partin_Mathew", "link": "https://stackoverflow.com/users/6201116/partin-mathew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 36610578, "answer_count": 1, "score": 0, "last_activity_date": 1460587507, "creation_date": 1460585369, "last_edit_date": 1460587507, "question_id": 36610457, "link": "https://stackoverflow.com/questions/36610457/access-violation-when-dynamically-allocating-memory", "title": "Access violation when dynamically allocating memory", "body": "<p>I am writing a program for a project at school that requires us to create a <code>Binary Search Tree</code> based on data read from a file (in this case strings). The tree should allow for duplicates by incrementing an integer value when a duplicate string is entered.</p>\n\n<p>The TreeNode is a struct as follows:</p>\n\n<pre><code>struct TreeNode {\n    string word;\n    int count;\n    TreeNode * left;\n    TreeNode * right;\n};\n</code></pre>\n\n<p>The problem I am having is when I try to call the insert function the program crashes. I run the debugger and I get the following error:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x00E2A87C in Proj12.2.exe: 0xC0000005: Access\n  violation reading location 0x00000014.</p>\n</blockquote>\n\n<p>What is causing this error?\nHere is the rest of the relevant code:</p>\n\n<pre><code>TreeNode * Root = new TreeNode;\nRoot-&gt;right = NULL;\n\nvoid insert(TreeNode *&amp; root, string item) { //insert function, called by Root-&gt;right,temp\n    if (root-&gt;word == item) {\n        root-&gt;count++;\n        return;\n    }\n    if (root == NULL &amp;&amp; root-&gt;word != item) {\n        root = new TreeNode;\n        root-&gt;left = NULL;\n        root-&gt;right = NULL;\n        root-&gt;word = item;\n        root-&gt;count = 1;\n        return;\n    }\n    if (item &lt; root-&gt;word) {\n        insert(root-&gt;left, item);\n    }\n    if (item &gt; root-&gt;word) {\n        insert(root-&gt;right, item);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "ifstream"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1460585183, "post_id": 36610406, "comment_id": 60817525, "body": "Maybe you need a <code>getline()</code> instead of the <code>while()</code>"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1460585209, "post_id": 36610406, "comment_id": 60817538, "body": "<code>std::string line; std::getline(file, line)</code>, though I admit I make no sense of &quot;stop when done reading the file&quot;, since by your own description, you&#39;re done when you read the first line."}, {"owner": {"reputation": 3, "user_id": 6101107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8e66a3ef35baebdc1cab56d3cc90a9?s=128&d=identicon&r=PG&f=1", "display_name": "littmuslozenge", "link": "https://stackoverflow.com/users/6101107/littmuslozenge"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460585702, "post_id": 36610406, "comment_id": 60817744, "body": "@WhozCraig Yes. I copied that part from another program that I used to read the entire file to the console. I will delete that now that you mentioned it."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 4576878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GwsIu.png?s=128&g=1", "display_name": "Steadybox", "link": "https://stackoverflow.com/users/4576878/steadybox"}, "is_accepted": true, "score": 1, "last_activity_date": 1460588853, "creation_date": 1460588853, "answer_id": 36611103, "question_id": 36610406, "link": "https://stackoverflow.com/questions/36610406/how-to-read-in-only-the-first-line-of-a-text-file/36611103#36611103", "title": "How to read in only the first line of a text file?", "body": "<p>Like WhozCraig said in their comment, use <code>std::string</code> and <code>std::getline()</code>.</p>\n\n<pre><code>ifstream file;\n\nfile.open(\"map.txt\");\nstring line;\n\nif (!file) //checks to see if file opens properly\n{\n    cerr &lt;&lt; \"Error: Could not find the requested file.\";\n}\nelse\n{\n    if (getline(file, line)) cout &lt;&lt; line; // Get and print the line.\n    file.close(); // Remember to close the file.\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6101107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8e66a3ef35baebdc1cab56d3cc90a9?s=128&d=identicon&r=PG&f=1", "display_name": "littmuslozenge", "link": "https://stackoverflow.com/users/6101107/littmuslozenge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6628, "favorite_count": 0, "accepted_answer_id": 36611103, "answer_count": 1, "score": -4, "last_activity_date": 1460588853, "creation_date": 1460585044, "last_edit_date": 1460585771, "question_id": 36610406, "link": "https://stackoverflow.com/questions/36610406/how-to-read-in-only-the-first-line-of-a-text-file", "title": "How to read in only the first line of a text file?", "body": "<p>The name of the text file that I want to open is \"map.txt\". I ONLY want to read in the first line of the file to the console. The first line of the text file is: </p>\n\n<blockquote>\n  <p>E1    346    473   1085   3725   30   30</p>\n</blockquote>\n\n<p>Here is the code I have so far.</p>\n\n<pre><code>ifstream file;\n\nfile.open(\"map.txt\");\n\nif (!file) //checks to see if file opens properly\n{\n    cerr &lt;&lt; \"Error: Could not find the requested file.\";\n}\n    /******* loop or statement needed to read only first line here?**********/\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "iterator"], "comments": [{"owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "edited": false, "score": 0, "creation_date": 1460585541, "post_id": 36610383, "comment_id": 60817672, "body": "Are you <i>absolutely sure</i> that the only change you are making is the copy, and that the reversal of order is not due to something else. Are you also sure that the copy is really of the same data type as the original? Otherwise, this seems awfully strange, not to say unlikely."}, {"owner": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 1, "creation_date": 1460585548, "post_id": 36610383, "comment_id": 60817677, "body": "How about returning a reference &quot;Data&amp; getData();&quot;?"}, {"owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "reply_to_user": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "edited": false, "score": 0, "creation_date": 1460585635, "post_id": 36610383, "comment_id": 60817716, "body": "@AaronI yes I am sure, I am going to try out first answer posted by <b>paddy</b>, just give me a minute to work this out."}, {"owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "reply_to_user": {"reputation": 1136, "user_id": 2999921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0564f700a2fe14bc0aa8152a5b97925?s=128&d=identicon&r=PG", "display_name": "cwschmidt", "link": "https://stackoverflow.com/users/2999921/cwschmidt"}, "edited": false, "score": 0, "creation_date": 1460585681, "post_id": 36610383, "comment_id": 60817733, "body": "@cwschmidt I think same proposed user <b>paddy</b>, I am going to try it out."}], "answers": [{"comments": [{"owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "edited": false, "score": 0, "creation_date": 1460585872, "post_id": 36610492, "comment_id": 60817824, "body": "Do I need iterator type at all while using <b>auto</b>s?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "edited": false, "score": 1, "creation_date": 1460585972, "post_id": 36610492, "comment_id": 60817863, "body": "<code>auto</code> will deduce the type from the call (but is only available in C++0x onwards).  Since calling <code>rbegin</code> on a const object returns a <code>const_reverse_iterator</code>, then that&#39;s the deduced type.  Nothing is stopping you from using your current approach -- just typedef your iterator to a <code>const_reverse_iterator</code>."}, {"owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "edited": false, "score": 0, "creation_date": 1460586258, "post_id": 36610492, "comment_id": 60817971, "body": "Works perfect, when using non-const version, I will have to work out const version myself. Thank you! I did not think about (your first paragraph of the answer) <i>...undefined behaviour by iterating over a temporary that doesn&#39;t exist...</i>"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "edited": false, "score": 0, "creation_date": 1460586751, "post_id": 36610492, "comment_id": 60818174, "body": "But you do understand the implications of that paragraph and how it applies to the code in your question, right? =)  Glad to help."}, {"owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "edited": false, "score": 0, "creation_date": 1460586866, "post_id": 36610492, "comment_id": 60818226, "body": "Oh, definitely I do understand. Thank you."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1460728901, "last_edit_date": 1460728901, "creation_date": 1460585533, "answer_id": 36610492, "question_id": 36610383, "link": "https://stackoverflow.com/questions/36610383/reverse-iterating-of-map-which-is-accessed-by-getter-without-copy/36610492#36610492", "title": "Reverse iterating of map, which is accessed by getter / without copy", "body": "<p>You're actually getting undefined behaviour by iterating over a temporary that doesn't exist by the time you use the iterator.</p>\n\n<p>Either make a copy (as you correctly identified to be a solution), or change your 'getter' to return a reference.</p>\n\n<pre><code>inline const Data &amp; getData() const { return _data; }\n</code></pre>\n\n<p>This is actually standard practice.  You don't ordinarily return complex structures by value from a getter unless it's derived data (not stored in the class) or might change after the call (one example being multi-threaded environments where you need to acquire a lock to obtain the current state):</p>\n\n<p>You will then have to use const-iterators.  I tend to use the <code>auto</code> keyword to save clutter in loops:</p>\n\n<pre><code>for( auto it = _parser-&gt;getData().rbegin(); it != _parser-&gt;getData().rend(); ++it )\n</code></pre>\n\n<p>To use non-const iterators you'd need to make a copy, or also provide a non-const 'getter'.  This isn't generally recommended, but maybe suits your purposes:</p>\n\n<pre><code>inline Data &amp; getData() { return _data; }\n</code></pre>\n"}], "owner": {"reputation": 7445, "user_id": 1564365, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2ff53772b33c8b0c305481ecb7e67141?s=128&d=identicon&r=PG", "display_name": "Kyslik", "link": "https://stackoverflow.com/users/1564365/kyslik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36610492, "answer_count": 1, "score": 1, "last_activity_date": 1461575893, "creation_date": 1460584924, "last_edit_date": 1461575893, "question_id": 36610383, "link": "https://stackoverflow.com/questions/36610383/reverse-iterating-of-map-which-is-accessed-by-getter-without-copy", "title": "Reverse iterating of map, which is accessed by getter / without copy", "body": "<p>I have a class which reads / parses file and stores key-value pairs in map.</p>\n\n<pre><code>typedef std::map&lt;std::string, const int&gt; Data;\ntypedef std::map&lt;std::string, const int&gt;::reverse_iterator DataItReverse;\n</code></pre>\n\n<p>now I have a getter to get the data from \"parser\" class <code>inline Data getData() const {return _data;}\n</code></p>\n\n<p>All is great until I want to reverse iterate through map in question.</p>\n\n<pre><code>for(DataItReverse it_reverse = _parser-&gt;getData().rbegin();\n    it_reverse != _parser-&gt;getData().rend();\n    ++it_reverse)\n{\n    std::cout &lt;&lt; it_reverse-&gt;first &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Code above iterates in <em>normal</em> order (not reverse), when I copy data to temporary variable all works well:</p>\n\n<pre><code>Data tmpData = _parser-&gt;getData();\nfor(...)\n</code></pre>\n\n<p>I would like to avoid making a copy of data, since its going to be a large map.</p>\n\n<hr>\n\n<p>please note that <code>_parser</code> is a pointer so data inside it are not copied multiple times</p>\n"}, {"tags": ["c++", "windows", "mfc", "cbutton"], "comments": [{"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1460602733, "post_id": 36610329, "comment_id": 60822892, "body": "Is it not possible to use the CMFCButton class as it supports showing text and images already?"}, {"owner": {"reputation": 51, "user_id": 6201102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc69fa2d14b3eb415497ccfe399b581?s=128&d=identicon&r=PG&f=1", "display_name": "overflowingstack", "link": "https://stackoverflow.com/users/6201102/overflowingstack"}, "reply_to_user": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1460673676, "post_id": 36610329, "comment_id": 60865555, "body": "I tried it out but I wasn&#39;t able to get the buttons match the native UI theme on different Windows OSes. Not sure how the CRect really fits in but I figured that whatever width was being set for the CRect in the code (rect.right - rect.left), on screen, the space between the image and text was half of that. So I got it working for now but I would still like to understand where CRect would really fit in the button."}], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 5090928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781a4f5f735807c2238fee3e991f8b32?s=128&d=identicon&r=PG&f=1", "display_name": "serg06", "link": "https://stackoverflow.com/users/5090928/serg06"}, "is_accepted": false, "score": 0, "last_activity_date": 1607372850, "creation_date": 1607372850, "answer_id": 65188875, "question_id": 36610329, "link": "https://stackoverflow.com/questions/36610329/need-help-understanding-settextmargin-for-mfc-cbutton/65188875#65188875", "title": "Need help understanding SetTextMargin for MFC CButton?", "body": "<p>Just answering this part of the question:</p>\n<blockquote>\n<p>Now the CButton::SetTextMargin takes in a CRect parameter and I need help understanding what my rect.right and rect.left should be.</p>\n</blockquote>\n<p>The CRect represents how large you want the margins to be. Setting <code>rect.right = 0</code> will give you no margin on the right.</p>\n"}], "owner": {"reputation": 51, "user_id": 6201102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dc69fa2d14b3eb415497ccfe399b581?s=128&d=identicon&r=PG&f=1", "display_name": "overflowingstack", "link": "https://stackoverflow.com/users/6201102/overflowingstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1607372850, "creation_date": 1460584635, "last_edit_date": 1460585472, "question_id": 36610329, "link": "https://stackoverflow.com/questions/36610329/need-help-understanding-settextmargin-for-mfc-cbutton", "title": "Need help understanding SetTextMargin for MFC CButton?", "body": "<p>I need some guidance on understanding how SetTextMargin works for CButton. \nWhat I am trying to do is have a CButton which has BS_LEFT style and using SetIcon setting an icon on the button which will appear on the left. Now the text needs to be set with some margin so that it doesn't stick too close to the icon. I have some calculations on what the margin should be. \nNow the CButton::SetTextMargin takes in a CRect parameter and I need help understanding what my rect.right and rect.left should be. I have tried all sorts of tests but I am not able to get how the margin rectangle gets incorporated. My calculations of the margin and the actual margin is way off. Any help would be appreciated. Thanks! </p>\n"}, {"tags": ["c++", "qt", "mpi"], "comments": [{"owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "edited": false, "score": 1, "creation_date": 1460584826, "post_id": 36610291, "comment_id": 60817370, "body": "Can you explain what error you&#39;re getting?"}, {"owner": {"reputation": 123, "user_id": 5751929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e56986ee4d1a907a9689931aedb7ce65?s=128&d=identicon&r=PG&f=1", "display_name": "saul gold", "link": "https://stackoverflow.com/users/5751929/saul-gold"}, "reply_to_user": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "edited": false, "score": 0, "creation_date": 1460585747, "post_id": 36610291, "comment_id": 60817768, "body": "&quot;cannot open include file &#39;mpi.h&#39;: no such file or directory but the mpi.h file is in the include directory"}, {"owner": {"reputation": 4316, "user_id": 1742659, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/BpSsV.jpg?s=128&g=1", "display_name": "dfranca", "link": "https://stackoverflow.com/users/1742659/dfranca"}, "edited": false, "score": 0, "creation_date": 1460586061, "post_id": 36610291, "comment_id": 60817889, "body": "You&#39;ve added the path to the INCLUDEPATH in the .pro file?"}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1460618848, "post_id": 36610291, "comment_id": 60829211, "body": "You should probably escape backslashes and spaces in the path to Open MPI&#39;s <code>include</code> directory with backslashes."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 5751929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e56986ee4d1a907a9689931aedb7ce65?s=128&d=identicon&r=PG&f=1", "display_name": "saul gold", "link": "https://stackoverflow.com/users/5751929/saul-gold"}, "is_accepted": false, "score": 1, "last_activity_date": 1460670659, "creation_date": 1460670659, "answer_id": 36634642, "question_id": 36610291, "link": "https://stackoverflow.com/questions/36610291/how-to-setup-mpi-on-qt-on-windows/36634642#36634642", "title": "How to setup MPI on Qt on Windows", "body": "<p>Turns out I wasn't running qmake (under build->run qmake)\nso all the .pro edits weren't being recognised!\nthanks for your help anyway!</p>\n"}], "owner": {"reputation": 123, "user_id": 5751929, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e56986ee4d1a907a9689931aedb7ce65?s=128&d=identicon&r=PG&f=1", "display_name": "saul gold", "link": "https://stackoverflow.com/users/5751929/saul-gold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 611, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1460670659, "creation_date": 1460584492, "last_edit_date": 1460587602, "question_id": 36610291, "link": "https://stackoverflow.com/questions/36610291/how-to-setup-mpi-on-qt-on-windows", "title": "How to setup MPI on Qt on Windows", "body": "<p>I'm having real trouble setting up MPI with and existing Qt project.\nI've added the openMPI include and lib directories to the .pro file, but I'm not sure what else to do to get it running.</p>\n\n<p>Any ideas would be helpful, thanks.</p>\n\n<p>(edit)</p>\n\n<p>my includepath in the .pro file:</p>\n\n<pre><code>    INCLUDEPATH+=C:\\\\opencv\\\\build\\\\install\\\\include \\\n       C:\\Program Files (x86)\\OpenMPI_v1.6.2-win32\\include\\\n</code></pre>\n"}, {"tags": ["c++", "opencv", "threshold"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460585628, "post_id": 36610172, "comment_id": 60817714, "body": "There&#39;s no OpenCV function to do this. However, you can find examples for <a href=\"http://stackoverflow.com/q/34856019/5008845\">3</a> and <a href=\"http://stackoverflow.com/q/35056760/5008845\">4</a> levels"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460585804, "post_id": 36610172, "comment_id": 60817794, "body": "Or you can go through Matlab <a href=\"http://uk.mathworks.com/help/images/ref/multithresh.html\" rel=\"nofollow noreferrer\">multithresh</a> code and port to OpenCV"}, {"owner": {"reputation": 579, "user_id": 4086747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000172437774/picture?type=large", "display_name": "Maxim Gotovchits", "link": "https://stackoverflow.com/users/4086747/maxim-gotovchits"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460591349, "post_id": 36610172, "comment_id": 60819784, "body": "@Miki Actually I implemented my own multi-threshold Otsu and I&#39;d like to compare it with opencv realization. Thank You"}, {"owner": {"reputation": 579, "user_id": 4086747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000172437774/picture?type=large", "display_name": "Maxim Gotovchits", "link": "https://stackoverflow.com/users/4086747/maxim-gotovchits"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460591693, "post_id": 36610172, "comment_id": 60819903, "body": "@Miki Could you write it as an answer for my question so I will mark it as a solution :)"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460591724, "post_id": 36610172, "comment_id": 60819916, "body": "Glad it helped. Just mark as duplicate ;D"}], "owner": {"reputation": 579, "user_id": 4086747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100000172437774/picture?type=large", "display_name": "Maxim Gotovchits", "link": "https://stackoverflow.com/users/4086747/maxim-gotovchits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "closed_date": 1460591929, "answer_count": 0, "score": 0, "last_activity_date": 1460584128, "creation_date": 1460584052, "last_edit_date": 1460584128, "question_id": 36610172, "link": "https://stackoverflow.com/questions/36610172/opencv-2-multi-threshold-otsu-method", "closed_reason": "Duplicate", "title": "Opencv 2 multi-threshold Otsu method", "body": "<p>I know how to call binary Otsu method for a greyscale image: </p>\n\n<p><code>threshold(image, opencv_otsu_result, 0, 255, CV_THRESH_BINARY | CV_THRESH_OTSU);</code></p>\n\n<p>But I don't understand how to use this function if I want divide my image into 3, 4,... colors. I am trying to find some function like: </p>\n\n<p><code>threshold(image, result, SOME_FLAGS, number_of_colors);</code></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1460583516, "post_id": 36610031, "comment_id": 60816781, "body": "MCVE is the king. How are you printing your <code>argv[1]</code>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 2, "creation_date": 1460583582, "post_id": 36610031, "comment_id": 60816810, "body": "No, <code>argv[1]</code> is not just the first letter..."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1460583785, "post_id": 36610031, "comment_id": 60816902, "body": "Try <code>cout &lt;&lt; argv[1] &lt;&lt; &#39;\\n&#39;;</code> instead. <code>*argv[1]</code> is indeed a single character."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 5, "last_activity_date": 1460584382, "creation_date": 1460584382, "answer_id": 36610264, "question_id": 36610031, "link": "https://stackoverflow.com/questions/36610031/what-is-this-code-actually-doing/36610264#36610264", "title": "What is this code actually doing", "body": "<p>Looks like the code is populating the vector with tokens from the command line.</p>\n\n<p>The code is using <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"noreferrer\">the std::vector constructor for sequences</a> and passing in an <em>iterator</em> to the first argument (after the program name) and one past the last argument on the command line.  </p>\n\n<p>To verify, try this:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; argc; ++i)\n{\n  std::cout &lt;&lt; \"Argument [\" &lt;&lt; i &lt;&lt; \"]: \" &lt;&lt; argv[i] &lt;&lt; std::endl;\n}\nstd::cout &lt;&lt; \"\\nFrom vector:\\n\"\nfor (unsigned int j = 0; j &lt; params.size(); ++j)\n{\n  std::cout &lt;&lt; \"params[\" &lt;&lt; j &lt;&lt; \"]: \" &lt;&lt; params[j] &lt;&lt; \"\\n\";\n}\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4203728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h1zcK.png?s=128&g=1", "display_name": "Searay330", "link": "https://stackoverflow.com/users/4203728/searay330"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 36610264, "answer_count": 1, "score": -1, "last_activity_date": 1460584382, "creation_date": 1460583435, "last_edit_date": 1460584032, "question_id": 36610031, "link": "https://stackoverflow.com/questions/36610031/what-is-this-code-actually-doing", "title": "What is this code actually doing", "body": "<p>every one seems to be in agreement that this is the proper way to convert command line char array to a string.</p>\n\n<pre><code>    vector&lt;std::string&gt; params(argv+1, argv+argc);\n</code></pre>\n\n<p>but i'm not really understanding what is going on here because when i try to print argv[1] it is just the first letter of the string. what is actually going on here. is it some kind of pointer math that leads you to the rest of the data i'm just sure how adding 2(the value of argc) to argv is able to get all of the chars in that array for just that one argument.</p>\n\n<p>for example printing argv[1] like so </p>\n\n<pre><code>cout &lt;&lt; *argv[1];\n</code></pre>\n\n<p>gives back t which is the first letter of the second parameter which is test.txt.</p>\n\n<p>thanks to Fred for point this out </p>\n\n<pre><code>cout &lt;&lt; argv[1];\n</code></pre>\n\n<p>does return the whole string but no way of me testing can i do this </p>\n\n<pre><code>cout &lt;&lt; argv + argc;\n</code></pre>\n\n<p>and make that move between arguments. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "edited": false, "score": 1, "creation_date": 1460582802, "post_id": 36609828, "comment_id": 60816405, "body": "Please add a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1460583230, "post_id": 36609828, "comment_id": 60816623, "body": "How are you ascertaining that the pointer isn&#39;t incrementing? My hunch is you&#39;re doing the increment inside a function and testing it outside, and you&#39;re passing the pointer to the function by value, that&#39;s usually what brings people here claiming a pointer doesn&#39;t increment."}, {"owner": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1460583470, "post_id": 36609828, "comment_id": 60816756, "body": "@kfsone I am checking it the line below the increment with: printf(&quot;memPointer address now = %p\\n&quot;, &amp;memPointer);"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1460583603, "post_id": 36609828, "comment_id": 60816821, "body": "You&#39;re printing the address of memPointer rather than it&#39;s value?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1460583786, "post_id": 36609828, "comment_id": 60816903, "body": "A pointer is a variable that holds an address. When you say <code>int i = 10</code>, then <code>i</code> has a value of <code>10</code>. When you say <code>char* mem_pointer = &amp;mem_arr[0]</code> then <code>mem_pointer</code> has the value of the address of the first element of mem_arr. <code>&amp;mem_pointer</code> is the address of the pointer, not the contents of the pointer. <code>mem_pointer</code> is the address itself. So <code>memPointer += actualSize</code> is the correct way to increment it.  You would no more say &quot;memPointer += actualSize; printf(... &amp;memPointer);` than you would <code>i += 10; printf(..., &amp;i);</code>"}, {"owner": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1460583849, "post_id": 36609828, "comment_id": 60816945, "body": "@kfsone I don&#39;t believe so. That print statement prints the address that I mentioned in the post. I use this for the value: printf(&quot;memPointer value = %s\\n&quot;, memPointer); which prints out some test values I have from a strcpy. Or am I missing something? EDIT: Saw your second reply. I guess that makes sense. Still not sure what is going on with my prints then. It seems that if I try to print out the address, I get the value and vise versa. But I&#39;ll play around with it some more."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1460584013, "post_id": 36609828, "comment_id": 60817019, "body": "<code>printf(memPointer address now = %p\\n&quot;, &amp;memPointer);</code> prints the location in memory of memPointer, not the address value it contains. <code>&amp;memPointer</code> evaluates to a pointer-to-memPointer, not memPointer itself. Remove the &#39;&amp;&#39; from your printf and use <code>memPointer += actual_size</code>. See <a href=\"http://ideone.com/1gS2q4\" rel=\"nofollow noreferrer\">ideone.com/1gS2q4</a>"}, {"owner": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1460584342, "post_id": 36609828, "comment_id": 60817157, "body": "@kfsone Got it, thank you! Last small question: what does the (void*) cast do?"}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 1, "creation_date": 1460584516, "post_id": 36609828, "comment_id": 60817234, "body": "<code>cout</code> has a special case for char* pointers, whereby it prints the string they point to rather than the address. The <code>void*</code> says <code>this is just a pointer, don&#39;t treat it specially</code>. Without it, it would print &quot;before hello world&quot; and &quot;after world&quot;;"}], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "edited": false, "score": 0, "creation_date": 1460583362, "post_id": 36609863, "comment_id": 60816688, "body": "I&#39;m implementing my own malloc. So what you&#39;re saying is that the value it holds would change, but not it&#39;s actual address? Is there any way to get the address that the pointer is pointing to?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "edited": false, "score": 0, "creation_date": 1460585407, "post_id": 36609863, "comment_id": 60817623, "body": "If you&#39;re implementing your own <code>malloc</code>, which I hope is an academic exercise, read up on the full suite of allocation methods and write yours to work the same way: <code>malloc()</code>, <code>free()</code>, and <code>realloc()</code> are the most important. Follow convention unless you have a very compelling reason to diverge. Don&#39;t forget that C++ has a framework for defining <a href=\"https://en.wikipedia.org/wiki/Allocator_(C%2B%2B)#Custom_allocators\" rel=\"nofollow noreferrer\">custom allocators</a> which might be what you are trying to do here. <code>new</code> and <code>delete</code> are the C++ way, <code>malloc</code> and <code>free</code> are C."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "edited": false, "score": 0, "creation_date": 1460585466, "post_id": 36609863, "comment_id": 60817640, "body": "Remember that adding something to the pointer simply changes what memory address the pointer points to, it doesn&#39;t change how much memory was allocated to that pointer, and it doesn&#39;t move the pointer itself."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1460582808, "creation_date": 1460582808, "answer_id": 36609863, "question_id": 36609828, "link": "https://stackoverflow.com/questions/36609828/unable-to-increment-char-pointer/36609863#36609863", "title": "Unable to increment char* pointer", "body": "<p>The address <em>of</em> the pointer will not change, but the pointer may point to something else if you start to increment it:</p>\n\n<pre><code>char* x = \"test\";\n// *x is now 't'\n\nx++;\n// *x is now 'e'\n</code></pre>\n\n<p>There's no meaningful way to manipulate the address of the pointer itself unless you're using a pointer to a pointer, like <code>char** x</code>.</p>\n\n<p>Your remark about \"when the user requests some memory\" and implying you must manipulate the pointer seems to be based on flawed assumptions. If you're doing this C-style you'd use <code>realloc()</code> where you get a pointer to the new allocation back. If you're doing C++ properly you'd <code>new</code> some new memory, copy the contents over, and <code>delete</code> the old allocation.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 3, "last_activity_date": 1460584317, "creation_date": 1460584317, "answer_id": 36610242, "question_id": 36609828, "link": "https://stackoverflow.com/questions/36609828/unable-to-increment-char-pointer/36610242#36610242", "title": "Unable to increment char* pointer", "body": "<p>In your comments you indicate that your code is along the liens of:</p>\n\n<pre><code>char mem_arr[] = \"hello world\";\nchar* memPointer = &amp;mem_arr[0];\nmemPointer += actualSize;\nprintf(\"memPointer = %p\\n\", &amp;memPointer);\n</code></pre>\n\n<p>This line </p>\n\n<pre><code>char* memPointer = &amp;mem_arr[0];\n</code></pre>\n\n<p>says: Let there be a variable of type <code>char*</code> called <code>memPointer</code> and let it contain <em>the address of the 1st element of mem_arr</em>. After this line, the variable <code>memPointer</code> <em>contains</em> the address of <code>mem_arr[0]</code>.</p>\n\n<p><code>&amp;memPointer</code> expands to the <em>address-<strong>of</em></strong> memPointer rather than the address that memPointer contains. memPointer is a named variable, and saying <code>&amp;memPointer</code> evaluates to the address - location in memory - of that variable, not its value.</p>\n\n<pre><code>memPointer += actualSize;\nprintf(\"&amp;mem_arr[0] = %p, memPointer = %p\\n\", &amp;mem_arr[0], memPointer);\n</code></pre>\n\n<p>will set memPointer to point to the <em>actualSize</em>th element of mem_arr, as your code appears to be trying to do.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 6200254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORk7w.png?s=128&g=1", "display_name": "Rezniaq", "link": "https://stackoverflow.com/users/6200254/rezniaq"}, "is_accepted": false, "score": 1, "last_activity_date": 1460584695, "last_edit_date": 1460584695, "creation_date": 1460584356, "answer_id": 36610256, "question_id": 36609828, "link": "https://stackoverflow.com/questions/36609828/unable-to-increment-char-pointer/36610256#36610256", "title": "Unable to increment char* pointer", "body": "<p>Maybe you're confused getting the address of <em>mempointer</em> instead of the address that <em>mempointer is pointing to</em></p>\n\n<p>This code shows how the address that my_pointer is pointing to changes whenever i increase the pointer or i give him a new memory address, take a look:</p>\n\n<pre><code>int mem_arr[256];\nint * my_pointer = &amp;mem_arr[0];\n\n// let's give some values to the array just\n// for fun\nfor(int i = 0; i &lt; 256; i++)\n{\n    mem_arr[i] = 10 + (i * 10);\n}\n\n// print original value &amp; address\nstd::cout &lt;&lt; \"Value 1: \" &lt;&lt; *my_pointer &lt;&lt; \" Address 1: \" &lt;&lt; my_pointer &lt;&lt; std::endl;\n\n// increase pointer (+4 bytes)\nmy_pointer++;\n\n// print current value &amp; address\nstd::cout &lt;&lt; \"Value 2: \" &lt;&lt; *my_pointer &lt;&lt; \" Address 2: \" &lt;&lt; my_pointer &lt;&lt; std::endl;\n\n// let's seek into the 8th element\n// of the array\nmy_pointer = &amp;mem_arr[8];\n\n// and print current value &amp; address once again\nstd::cout &lt;&lt; \"Value 3: \" &lt;&lt; *my_pointer &lt;&lt; \" Address 3: \" &lt;&lt; my_pointer &lt;&lt; std::endl;\n\ngetchar();\n</code></pre>\n\n<p><code>my_pointer</code> </p>\n\n<p>by itself returns the address that my_pointer is pointing to, while </p>\n\n<p><code>&amp;my_pointer</code> </p>\n\n<p>returns the address where the pointer <code>my_pointer</code> is stored</p>\n"}], "owner": {"reputation": 478, "user_id": 4590124, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3dbb9db88765f96892076f59768ba862?s=128&d=identicon&r=PG&f=1", "display_name": "aurora91", "link": "https://stackoverflow.com/users/4590124/aurora91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "accepted_answer_id": 36610242, "answer_count": 3, "score": -2, "last_activity_date": 1460584695, "creation_date": 1460582634, "question_id": 36609828, "link": "https://stackoverflow.com/questions/36609828/unable-to-increment-char-pointer", "title": "Unable to increment char* pointer", "body": "<p>I'm a little rusty on pointers so bear with me. I have declared an array of chars and a char* pointer which is set in the following manner:</p>\n\n<pre><code>char* memPointer = &amp;mem_arr[0]; \n</code></pre>\n\n<p>When I run the program, it looks like my starting address is 6E2D200C (this address is always the same for some reason. I'm not sure if this is right or not. Please let me know if I'm doing something wrong)\nThen, at some point when the user requests some memory, I try to increment the pointer and print out the new address. But the address remains the same as mentioned above. Here is what i have tried with no success:</p>\n\n<pre><code>//*(memPointer += actualSize); //no change\n//memPointer += actualSize; //no change\n//*memPointer += actualSize;// no change\n&amp;memPointer += actualSize; //no change\n</code></pre>\n\n<p>actualSize is an int by the way. If there is any other information that I need to provide, please let me know. Thank you in advance!</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1460583222, "post_id": 36609803, "comment_id": 60816616, "body": "It is technically possible, you have to use the /DELAYLOAD linker option.  It won&#39;t crash until you actually call the function.  Using LoadLibrary + GetProcAddress is the boring alternative, but that works as well."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1460583310, "post_id": 36609803, "comment_id": 60816658, "body": "If by design it is possible for <code>Bar.DLL</code> to be missing (maybe it is a optional component), <code>LoadLibrary</code> and <code>GetProcAddress</code> can be used to first test if the DLL is there, and if it is, get a pointer to the exported function <code>Foo</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": true, "score": 1, "last_activity_date": 1460582948, "creation_date": 1460582948, "answer_id": 36609903, "question_id": 36609803, "link": "https://stackoverflow.com/questions/36609803/if-you-link-against-a-dll-is-it-possible-to-launch-your-executable-if-that-dll/36609903#36609903", "title": "If you link against a DLL, is it possible to launch your executable if that DLL is missing", "body": "<p>The only way to run a app when a dll is missing, is when that dll is DYNAMICALLY LOADED, the app runs and (maybe) shows a error msg, but dont crash</p>\n\n<p>if that dll is statically loaded, the app never runs and OS shows you a standard error msg</p>\n"}], "owner": {"reputation": 145, "user_id": 3685204, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/68337490c39d54f8af8f256c27f3612f?s=128&d=identicon&r=PG&f=1", "display_name": "TheChemist", "link": "https://stackoverflow.com/users/3685204/thechemist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 36609903, "answer_count": 1, "score": 0, "last_activity_date": 1460582948, "creation_date": 1460582545, "question_id": 36609803, "link": "https://stackoverflow.com/questions/36609803/if-you-link-against-a-dll-is-it-possible-to-launch-your-executable-if-that-dll", "title": "If you link against a DLL, is it possible to launch your executable if that DLL is missing", "body": "<p>A coworker and I were having a discussion and neither of us is actually sure of how this would work. Let's say that you create a program that uses function Foo() from Bar.DLL.</p>\n\n<p>If Bar.DLL is missing, will it still be possible to launch the program and it will just crash when attempting to call Foo() or will the program simply fail to launch?</p>\n"}, {"tags": ["c++", "if-statement", "for-loop", "switch-statement"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1460582778, "post_id": 36609763, "comment_id": 60816393, "body": "<code>if (B = B + 5)</code> -- are you sure that&#39;s what you mean?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1460583199, "post_id": 36609763, "comment_id": 60816604, "body": "Combining a <code>for</code> loop and a <code>switch</code> in this manner seems contradictory. You might have simpler code if you just spell out each case sequentially, the <code>for</code> loop seems to just iterate over each one in turn anyway. There&#39;s a lot going on here so simplicity is essential."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460583245, "post_id": 36609763, "comment_id": 60816632, "body": "How do you even keep track of all those alphabet-style single-letter variables?"}, {"owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "edited": false, "score": 0, "creation_date": 1460583286, "post_id": 36609763, "comment_id": 60816646, "body": "Since B = 5 already. If it was b plus b then It would equal to 10 an output the next set of numbers after the first?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1460583360, "post_id": 36609763, "comment_id": 60816686, "body": "@FredLarson, there is no way to make this <code>if</code> right. It&#39;s plain nonsense."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460583544, "post_id": 36609763, "comment_id": 60816793, "body": "@SergeyA: Yes, I agree."}, {"owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "edited": false, "score": 0, "creation_date": 1460583641, "post_id": 36609763, "comment_id": 60816835, "body": "I kind of figure it was a cooky myself."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460583333, "post_id": 36609842, "comment_id": 60816671, "body": "What would be the point of such an <code>if</code>?"}, {"owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "edited": false, "score": 0, "creation_date": 1460583525, "post_id": 36609842, "comment_id": 60816786, "body": "to increase the value of 10 ."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1460583641, "post_id": 36609842, "comment_id": 60816836, "body": "How would <code>B</code> be equal to <code>B + 5</code>? <code>B</code> is equal to <code>B</code>, <code>B + 5</code> is equal to <code>B + 5</code>. If you have some money in your wallet, you can&#39;t have the same amount of money after you put in additional 5 bucks."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460583840, "post_id": 36609842, "comment_id": 60816940, "body": "@SergeyA, answer modified. #SMH ...."}, {"owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "edited": false, "score": 0, "creation_date": 1460584079, "post_id": 36609842, "comment_id": 60817051, "body": "B is initially declared as 5 that&#39;s why I did B = B+5. I was just guessing a condition for it to work."}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 1, "last_activity_date": 1460583755, "last_edit_date": 1460583755, "creation_date": 1460582704, "answer_id": 36609842, "question_id": 36609763, "link": "https://stackoverflow.com/questions/36609763/c-going-from-running-a-switch-to-a-if-statement-afterwards/36609842#36609842", "title": "C++ going from running a switch to a if statement afterwards", "body": "<p>Your <code>for</code> statement ends at <code>t == 10</code>..</p>\n\n<pre><code>for (int t = 0; t &lt;= 10; t = t + 1)\n</code></pre>\n\n<p>And your <code>if</code> is somewhere in the <code>case</code> of <code>t</code> being 11.</p>\n\n<pre><code>......\ncase 10:\nP = A + B + C + D - E + O;\ncout &lt;&lt; P &lt;&lt; endl;\nbreak;\ncase 11:\nif (B == B + 5)\n{\n.....\n</code></pre>\n\n<p>So, raise the <code>for-loop</code> termination condition from <code>10</code> to <code>11</code>... </p>\n\n<p>And and there is something wrong with your if. even if you meant below:</p>\n\n<pre><code>.....\nif(B == B + 5) {     //doing if(B = B + 5) is adding 5 to B and checking whether its not 0\n.....\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "edited": false, "score": 0, "creation_date": 1460584667, "post_id": 36610206, "comment_id": 60817293, "body": "It ran however I didn&#39;t get any values to print out. is there something wrong with cout statments.@Salma"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1460584846, "post_id": 36610206, "comment_id": 60817378, "body": "When would <code>(B == B + 5)</code> be true?"}], "tags": [], "owner": {"reputation": 159, "user_id": 3838142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a8cfb0825126b6e3436aec54133c7d03?s=128&d=identicon&r=PG&f=1", "display_name": "Salma", "link": "https://stackoverflow.com/users/3838142/salma"}, "is_accepted": false, "score": 0, "last_activity_date": 1460584170, "creation_date": 1460584170, "answer_id": 36610206, "question_id": 36609763, "link": "https://stackoverflow.com/questions/36609763/c-going-from-running-a-switch-to-a-if-statement-afterwards/36610206#36610206", "title": "C++ going from running a switch to a if statement afterwards", "body": "<p>it is not working because you're assigning a value to B instead of check, </p>\n\n<p>change this line:</p>\n\n<pre><code>if (B = B + 5)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>if (B == B + 5)\n</code></pre>\n\n<p>it should work :) </p>\n"}], "owner": {"reputation": 47, "user_id": 4542234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/47c57fbece87405fc9aa63b3ee3cc13e?s=128&d=identicon&r=PG&f=1", "display_name": "Cb173", "link": "https://stackoverflow.com/users/4542234/cb173"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "closed_date": 1460606880, "answer_count": 2, "score": 0, "last_activity_date": 1460584170, "creation_date": 1460582389, "last_edit_date": 1460583185, "question_id": 36609763, "link": "https://stackoverflow.com/questions/36609763/c-going-from-running-a-switch-to-a-if-statement-afterwards", "closed_reason": "Not suitable for this site", "title": "C++ going from running a switch to a if statement afterwards", "body": "<p>In c++ Im trying to use a if statement after a switch statement. How do I run the if because it's not running it. The switch just runs.</p>\n\n<p>The Output is:</p>\n\n<pre><code>492.5\n490\n487.5\n485\n482.5\n480\n477.5\n475\n472.5\n470\n467.5\n</code></pre>\n\n<p>the next output is decreased by -2.5.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\n\n\nusing namespace std;\nint main()\n{\n    double A(5), B(5), C(0), D(7.5), E(20), V(495), F, G, H, I, J, K, L, M, N, O, P;\n\n    for (int t = 0; t &lt;= 10; t = t + 1)\n    {\n        switch (t)\n        {\n            case 0:\n            F = A + B + C + D - E + V;\n            cout &lt;&lt; F &lt;&lt; endl;\n            break;\n\n            case 1:\n            G = A + B + C + D - E + F;\n            cout &lt;&lt; G &lt;&lt; endl;\n            break;\n\n            case 2:\n            H = A + B + C + D - E + G;\n            cout &lt;&lt; H &lt;&lt; endl;\n            break;\n\n            case 3:\n            I = A + B + C + D - E + H;\n            cout &lt;&lt; I &lt;&lt; endl;\n            break;\n\n            case 4:\n            J = A + B + C + D - E + I;\n            cout &lt;&lt; J &lt;&lt; endl;\n            break;\n\n            case 5:\n            K = A + B + C + D - E + J;\n            cout &lt;&lt; K &lt;&lt; endl;\n            break;\n\n            case 6:\n            L = A + B + C + D - E + K;\n            cout &lt;&lt; L &lt;&lt; endl;\n            break;\n\n            case 7:\n            M = A + B + C + D - E + L;\n            cout &lt;&lt; M &lt;&lt; endl;\n            break;\n\n            case 8:\n            N = A + B + C + D - E + M;\n            cout &lt;&lt; N &lt;&lt; endl;\n            break;\n\n            case 9: \n            O = A + B + C + D - E + N;\n            cout &lt;&lt; O &lt;&lt; endl;\n            break;\n\n            case 10:\n            P = A + B + C + D - E + O;\n            cout &lt;&lt; P &lt;&lt; endl;\n            break;\n\n            case 11:\n            if (B = B + 5)\n            {\n                F = A + B + C + D - E + V;\n                G = A + B + C + D - E + F;\n                H = A + B + C + D - E + G;\n                I = A + B + C + D - E + H;\n                J = A + B + C + D - E + I;\n                K = A + B + C + D - E + J;\n                L = A + B + C + D - E + K;\n                M = A + B + C + D - E + L;\n                N = A + B + C + D - E + M;\n\n                cout &lt;&lt; F &lt;&lt; endl;\n                cout &lt;&lt; G &lt;&lt; endl;\n                cout &lt;&lt; H &lt;&lt; endl;\n                cout &lt;&lt; I &lt;&lt; endl;\n                cout &lt;&lt; J &lt;&lt; endl;\n                cout &lt;&lt; K &lt;&lt; endl;\n                cout &lt;&lt; L &lt;&lt; endl;\n                cout &lt;&lt; M &lt;&lt; endl;\n                cout &lt;&lt; N &lt;&lt; endl;\n\n            }\n        }\n\n    }\n    system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linux", "installation"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6199234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4c5a32169179382acf0ff7ab5f0a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Gray", "link": "https://stackoverflow.com/users/6199234/bill-gray"}, "edited": false, "score": 0, "creation_date": 1460652400, "post_id": 36609872, "comment_id": 60854192, "body": "Thank you.  Hadn&#39;t heard of &#39;install&#39;,  but &#39;man install&#39; brings me up to speed.  Renaming to &#39;libexample.a&#39; didn&#39;t help;  I&#39;ll continue to investigate.  Your suggestion for a per-user setup seems reasonable, though I do find it odd that there isn&#39;t a more &quot;standard&quot; way of doing this... surely I&#39;m not the first to run into this situation?"}, {"owner": {"reputation": 11, "user_id": 6199234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4c5a32169179382acf0ff7ab5f0a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Gray", "link": "https://stackoverflow.com/users/6199234/bill-gray"}, "edited": false, "score": 1, "creation_date": 1460660988, "post_id": 36609872, "comment_id": 60859127, "body": "Ah,  I see where I goofed (and &#39;man ld&#39; and looking at the -l option confirms this):  the file must be named &#39;libfoo.a&#39;.  One can then use either &#39;-lfoo&#39;,  and ld will tack the lib in front and .a after it.  <i>Or</i> you can use &#39;-l:libfoo.a&#39;,  and it&#39;ll treat it literally.  Thanks again;  this was quite baffling..."}, {"owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "reply_to_user": {"reputation": 11, "user_id": 6199234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4c5a32169179382acf0ff7ab5f0a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Gray", "link": "https://stackoverflow.com/users/6199234/bill-gray"}, "edited": false, "score": 0, "creation_date": 1460662722, "post_id": 36609872, "comment_id": 60860156, "body": "Nice. I didn&#39;t know about <code>:</code>. Too bad I can&#39;t seem to be able to get it to work for shared libraries where I could really use it (only for static ones)."}], "tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": true, "score": 1, "last_activity_date": 1460654681, "last_edit_date": 1460654681, "creation_date": 1460582843, "answer_id": 36609872, "question_id": 36609720, "link": "https://stackoverflow.com/questions/36609720/simple-installation-from-source-on-linux/36609872#36609872", "title": "Simple installation from source on Linux", "body": "<p>You should probably use <code>install</code> to copy with explicit permissions. <code>example.a</code> probably isn't being found because it doesn't start with lib (a stupid requirement, I know).</p>\n\n<p>Putting your <code>lib</code>, <code>include</code>, and <code>bin</code> under <code>$HOME/</code>.local is probably the closest thing to a per-user standard setup.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I just tested it and it <code>/usr/local/lib</code> works fine for me:</p>\n\n<p><strong>foo.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\nvoid foo() { puts(\"foo\"); }\n</code></pre>\n\n<p>Compile and install:</p>\n\n<pre><code>gcc -c foo.c\nar crs libfoo.a foo.o\ninstall -m 0755 /usr/local/lib #0644 should do too\n</code></pre>\n\n<p>In a different directory:</p>\n\n<p><strong>main.c</strong></p>\n\n<pre><code>void foo(void);\nint main() { foo(); return 0; }\n</code></pre>\n\n<p>Compile, link, and run:</p>\n\n<pre><code>gcc main.c -lfoo \n./a.out\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6199234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b4c5a32169179382acf0ff7ab5f0a2d?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Gray", "link": "https://stackoverflow.com/users/6199234/bill-gray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 36609872, "answer_count": 1, "score": 0, "last_activity_date": 1460654681, "creation_date": 1460582197, "question_id": 36609720, "link": "https://stackoverflow.com/questions/36609720/simple-installation-from-source-on-linux", "title": "Simple installation from source on Linux", "body": "<p>I'm trying to figure out a simplified way for installing C and C++ code\nand libraries built from them,  primarily for Linux.  I <em>think</em> GNU Autotools,  CMake,  etc. would be overkill for what I'm trying to do.</p>\n\n<p>An example:  I've written some code which,  when 'make' is run,  builds to\ncreate a library 'example.a'.  (I'm going with static linking thus far.\nShared libraries will introduce still more issues;  I'll crawl before I walk.)  Use of the functions requires including 'example1.h', 'example2.h',  etc.</p>\n\n<p>With Autotools,  one would run 'make install' or 'sudo make install' to\ncopy example.a to /usr/local/lib and the include files to /usr/local/include.\nIf executables had been built,  those would get copied to /usr/local/bin.</p>\n\n<p>I've tried adding the following lines to my makefile:</p>\n\n<p>install:<br>\n    cp example.a /usr/local/lib<br>\n    cp example1.h /usr/local/include<br>\n    cp example2.h /usr/local/include<br>\n    cp example /usr/local/bin</p>\n\n<p>This seems to work,  mostly.  Other projects are then able to \"see\"\nthe .h files and build correctly.  But the .a file is not found;  the only\nway to get it to be linked is to explicitly give the path as\n/usr/local/lib/example.a.   (Though gcc insists it's looking for libraries\nin that path.)  So:</p>\n\n<p>Question 1:  Should my user-built libraries be put in /usr/local/lib?  Or am\nI using the wrong directory?</p>\n\n<p>Now,  my next problem:  this has to be done with 'sudo make install'.\nI'm thinking that for some projects of this ilk,  where only one user will\nbe making use of the code in question,  the libraries should go someplace\nsuch as $HOME/lib,  include files to $HOME/include,  executables to\n$HOME/bin.</p>\n\n<p>Question 2:  Is there a \"standard\" way to install includes/libraries for\njust the current user,  rather than doing so for all users?  (Thus avoiding\nthe need for root use,  and I'd think it would be a \"cleaner\" system if only\nthe user using the program had to deal with these files.)</p>\n"}, {"tags": ["c++", "2d-vector"], "comments": [{"owner": {"reputation": 87, "user_id": 6196101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bdfdecfbaa79d0c66fdfd564f81e48?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6196101/ivan"}, "edited": false, "score": 0, "creation_date": 1460582424, "post_id": 36609711, "comment_id": 60816216, "body": "You are trying to assign vector to double. Usually people iterate vectors."}, {"owner": {"reputation": 23, "user_id": 4526322, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34f9b9c9ca4e42c46a651de5984cd105?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeeha Deedar", "link": "https://stackoverflow.com/users/4526322/nabeeha-deedar"}, "reply_to_user": {"reputation": 87, "user_id": 6196101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bdfdecfbaa79d0c66fdfd564f81e48?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6196101/ivan"}, "edited": false, "score": 0, "creation_date": 1460582582, "post_id": 36609711, "comment_id": 60816297, "body": "Oh yes, if i iterate then i get a Segmentation fault."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460585497, "post_id": 36609711, "comment_id": 60817655, "body": "...and that would be the landing place for your debugger."}, {"owner": {"reputation": 23, "user_id": 4526322, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34f9b9c9ca4e42c46a651de5984cd105?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeeha Deedar", "link": "https://stackoverflow.com/users/4526322/nabeeha-deedar"}, "edited": false, "score": 0, "creation_date": 1460588489, "post_id": 36609711, "comment_id": 60818836, "body": "Can anyone provide  a short code snippet for assignment / copying of 1D vector into 2D vector?"}, {"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1460589865, "post_id": 36609711, "comment_id": 60819315, "body": "Why not just place it into a 2D temp vector instead of a 1D temp vector?"}], "owner": {"reputation": 23, "user_id": 4526322, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34f9b9c9ca4e42c46a651de5984cd105?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeeha Deedar", "link": "https://stackoverflow.com/users/4526322/nabeeha-deedar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 498, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460582169, "creation_date": 1460582169, "question_id": 36609711, "link": "https://stackoverflow.com/questions/36609711/assigning-copying-1d-vector-to-a-2d-vector", "title": "Assigning / copying 1D vector to a 2D vector", "body": "<p>I have loaded data from a text file in a 2D vector. I am extracting data column wise, finding min, max in every column and then normalizing it. Normalized data is stored in a separate temp vector, keeping in mind that i extracted data from column therefore it should go back to columns.\nI need to reconstruct the original 2D vector back from the normalized individual temp vector.</p>\n\n<pre><code> vector &lt;vector&lt;double&gt; &gt;loadedData;\n vector &lt;double&gt; normal;\n vector &lt;double&gt; temp;\n vector &lt;vector &lt;double&gt; &gt;normalDataFrom1D;\n normalDataFrom1D.resize(rows, vector&lt;double&gt;(cols,0.0));\n\n loadedData = net.loadData(file);\n int cols = net.no_of_cols(\"../sampleData.txt\");\n int rows = net.no_of_rows(\"../sampleData.txt\");\n\n    for(int i=0;i&lt;cols;i++){\n      min = net.min_1d(i);\n      max = net.max_1d(i);\n      cout&lt;&lt;\"Min val in Col [\"&lt;&lt;i&lt;&lt;\"] data :\"&lt;&lt;min&lt;&lt;endl;\n      cout&lt;&lt;\"Max val in Col [\"&lt;&lt;i&lt;&lt;\"] data :\"&lt;&lt;max&lt;&lt;endl;\n      normal = net.extract_1d(i);\n      temp = net.normalizeData_1d(normal, min, max);  \n\n      for(int r=0;r&lt;normalDataFrom1D.size();r++){\n        for(int c=0;c&lt;normalDataFrom1D[r].size();c++){\n          normalDataFrom1D[c][r] = temp;\n        }\n      }\n    }\n//Printing Data...\n    for(int r=0;r&lt;normalDataFrom1D.size();r++){\n      for(int c=0;c&lt;normalDataFrom1D[r].size();c++){\n        cout&lt;&lt;\"Data in normalDataFrom1D[\"&lt;&lt;r&lt;&lt;\"][\"&lt;&lt;c&lt;&lt;\"] = \"&lt;&lt;normalDataFrom1D[r][c]&lt;&lt;endl;\n      }\n    }\n\nerror: cannot convert \u2018std::vector&lt;double&gt;\u2019 to \u2018double\u2019 in assignment\n           normalDataFrom1D[c][r] = temp;\n</code></pre>\n\n<p>If i try:</p>\n\n<pre><code>temp[i].push_back(net.normalizeData_1d(normal, min, max));\n</code></pre>\n\n<p>It says:</p>\n\n<pre><code>error: request for member \u2018push_back\u2019 in \u2018temp.std::vector&lt;_Tp, _Alloc&gt;::operator[]&lt;double, std::allocator&lt;double&gt; &gt;(((std::vector&lt;double&gt;::size_type)i))\u2019, which is of non-class type \u2018double\u2019\n       temp[i].push_back(net.normalizeData_1d(normal, min, max));\n</code></pre>\n"}, {"tags": ["c++", "oop", "design-patterns", "private", "derived-class"], "comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1460583259, "post_id": 36609682, "comment_id": 60816635, "body": "That&#39;s what a proxy can be used for, to reduce visibility of an interface. Have you ever tried it?"}, {"owner": {"reputation": 1622, "user_id": 1032277, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/oSZHR.jpg?s=128&g=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/1032277/liviu"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1460583654, "post_id": 36609682, "comment_id": 60816842, "body": "Do you mean PIMPL ? This one: <a href=\"http://en.wikipedia.org/wiki/Proxy_pattern\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Proxy_pattern</a> ?  Do you mean some virtual ? My first thought is this would be too heavy for my case. I have to sleep for now, bye!"}, {"owner": {"reputation": 1622, "user_id": 1032277, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/oSZHR.jpg?s=128&g=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/1032277/liviu"}, "reply_to_user": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1460584177, "post_id": 36609682, "comment_id": 60817100, "body": "Could you please articulate your thoughts in an answer? With some class schema?"}], "answers": [{"comments": [{"owner": {"reputation": 1622, "user_id": 1032277, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/oSZHR.jpg?s=128&g=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/1032277/liviu"}, "edited": false, "score": 0, "creation_date": 1460609338, "post_id": 36610571, "comment_id": 60824791, "body": "I like your solution, but I think that P can return a const reference to S (and the others) to avoid writing the &quot;proxy&quot; functions (value) for all members."}, {"owner": {"reputation": 1622, "user_id": 1032277, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/oSZHR.jpg?s=128&g=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/1032277/liviu"}, "edited": false, "score": 0, "creation_date": 1460937982, "post_id": 36610571, "comment_id": 60956709, "body": "The second solution was preferred by my company, although yours is better since it separates the classes."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 1, "last_activity_date": 1460585870, "creation_date": 1460585870, "answer_id": 36610571, "question_id": 36609682, "link": "https://stackoverflow.com/questions/36609682/class-with-different-access-read-only-to-the-many-writable-to-the-privileged/36610571#36610571", "title": "Class with different access: read-only to the many, writable to the privileged", "body": "<p>A possible approach could be to use a proxy that reduces the interface of your class.<br>\nThe class <code>M</code> will instantiate/receive an instance of <code>S</code> (so as to be able to modify it using its interface), but it will return a proxy <code>P</code> to the readers (that won't manage to modify it).<br>\nIt follows a minimal example:</p>\n\n<pre><code>struct S {\n    void value(int v) noexcept { t = v; }\n    int value() const noexcept { return t; }\nprivate:\n    int t{0};\n};\n\nstruct P {\n    P(S&amp; s): b{s} { }\n    int value() const noexcept { return b.value(); }\nprivate:\n    S&amp; b;\n};\n\nint main() {\n    // the class: full interface\n    S s;\n    // the proxy: reduced interface\n    P p{s};\n}\n</code></pre>\n"}], "owner": {"reputation": 1622, "user_id": 1032277, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/oSZHR.jpg?s=128&g=1", "display_name": "Liviu", "link": "https://stackoverflow.com/users/1032277/liviu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1461130471, "creation_date": 1460582027, "last_edit_date": 1461130471, "question_id": 36609682, "link": "https://stackoverflow.com/questions/36609682/class-with-different-access-read-only-to-the-many-writable-to-the-privileged", "title": "Class with different access: read-only to the many, writable to the privileged", "body": "<p>I have some large amounts of strings grouped in some classes, all grouped in one final giant class. This class must be filled up by another class and its immutable content exposed to some clients. (Of course, these classes are more complex, this is a simplified schematic representation.)</p>\n\n<p>Solution 1:</p>\n\n<pre><code>class A\n{\nfriend class M;\n\nprivate:\n    B m_b;\n    C m_c;\n    D m_d;\n\npublic:\n    const B&amp; GetB() const { return m_b;}\n    const C&amp; GetC() const { return m_C;}\n    const D&amp; GetD() const { return m_D;}\n\nprivate:\n    B&amp; GetB() { return m_b;}\n    C&amp; GetC() { return m_C;}\n    D&amp; GetD() { return m_D;}\n}\n</code></pre>\n\n<p>where B is something like:</p>\n\n<pre><code>class B\n{\nfriend class M;\n\nprivate:\n    std::string m_camel;\n    std::string m_pink;\n    std::string m_vandergraaf;\n\npublic:\n    const std::string&amp; Camel() const { return m_camel;}\n    const std::string&amp; PinkFloyd() const { return m_pink;}\n    const std::string&amp; VanDerGraafGenerator() const { return m_vandergraaf;}\n\nprivate:\n    void SetCamel(const char* prog) { m_camel = prog;}\n    void SetPinkFloyd(const char* prog) { m_pink = prog;}\n    void SetVanDerGraafGenerator(const char* prog) { m_vandergraaf = prog;}\n}\n</code></pre>\n\n<p>A better solution, that avoids <code>friend</code> for <code>protected</code> is to expose the write access class to M and the base one, read-only to the world.</p>\n\n<p>Solution 2:</p>\n\n<pre><code>class A\n{\nprotected:\n    B m_b;\n    C m_c;\n    D m_d;\n\npublic:\n    const B&amp; GetB() const { return m_b;}\n    const C&amp; GetC() const { return m_C;}\n    const D&amp; GetD() const { return m_D;}\n}\n\n//  only visible to M\nclass A_Write: public A\n{\npublic:\n    B&amp; GetB() { return m_b;}\n    C&amp; GetC() { return m_C;}\n    D&amp; GetD() { return m_D;}\n}\n</code></pre>\n\n<p>Same thing for B, maybe. Not a very good solution since the clients can also derive their own classes.</p>\n\n<p>A better but more constraint variant is solution 3:</p>\n\n<pre><code>class A\n{\nprivate:\n    const B m_b;\n    const C m_c;\n    const D m_d;\n\npublic:\n    const B&amp; GetB() const { return m_b;}\n    const C&amp; GetC() const { return m_C;}\n    const D&amp; GetD() const { return m_D;}\n\nprotected:\n    A(const B&amp; b, const C&amp; c, const D&amp; d): m_b(), m_c(c), m_d(d) {}\n}\n\n//  only visible to M\nclass A_Write: public A\n{\npublic:\n    A_Write(const B&amp; b, const C&amp; c, const D&amp; d): A(b, c, d) {}\n}\n</code></pre>\n\n<p>My preferred solution is 4, which is ... 3 but with B,C,D as simple <code>struct</code>s instead of <code>class</code>es. So M can do anything it wants directly in B, C, D, then construct a A_Write.</p>\n\n<p>Any better ideas ?</p>\n"}, {"tags": ["c++", "circular-dependency"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1460582153, "post_id": 36609665, "comment_id": 60816069, "body": "What is the point of including <code>factory.h</code> in <code>A.h</code>?"}, {"owner": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460584990, "post_id": 36609665, "comment_id": 60817424, "body": "I&#39;m calling Factory::fact(); from A::a()"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460584738, "post_id": 36609796, "comment_id": 60817324, "body": "<code>Factory.cpp: In static member function \u2018static A* Factory::fact()\u2019: Factory.cpp:3:13: error: expected type-specifier before \u2018A_CHILD_ONE\u2019   return new A_CHILD_ONE;              ^ Factory.cpp:3:13: error: expected \u2018;\u2019 before \u2018A_CHILD_ONE\u2019 Factory.cpp:3:13: error: \u2018A_CHILD_ONE\u2019 was not declared in this scope</code>"}, {"owner": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460584838, "post_id": 36609796, "comment_id": 60817376, "body": "btw, what is the meaning when you put Factory.h in A.cpp and not in A.h?"}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "reply_to_user": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460585346, "post_id": 36609796, "comment_id": 60817591, "body": "@Zindan As I understand, you got this error after you removed <code>#include AChildOne.h</code> from <code>Factory.h</code>. I make make answer more precise: <code>#include AChildOne.h</code> should be in <code>Factory.cpp</code>."}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "reply_to_user": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460586030, "post_id": 36609796, "comment_id": 60817883, "body": "Point is avoiding unnecessary dependencies between headers that lead to such errors. Preprocessor literally includes <code>.h</code> files, replacing <code>#include</code> statements with <code>.h</code> file content. <code>#ifdef</code> guards prevent from including each <code>.h</code> file more than once. Try to &quot;unfold&quot; includes manually in <code>Factory.cpp</code> and you will see that <code>A_CHILD_ONE</code> is declared before <code>A</code> and, therefore, compiler doesn&#39;t know about <code>A</code> at that moment. It&#39;s exactly what compiler tells you."}, {"owner": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460597883, "post_id": 36609796, "comment_id": 60821532, "body": "Thanks, I still didn&#39;t understand why when I put it on the cpp it is working, I did understand the part that the preprocessor literally including the h files, but why it works on the cpp? Can you explain that?"}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "reply_to_user": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460620565, "post_id": 36609796, "comment_id": 60830372, "body": "I made mistake in previous comment. This error appears when <code>A.cpp</code> is compiled."}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "reply_to_user": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "edited": false, "score": 0, "creation_date": 1460620653, "post_id": 36609796, "comment_id": 60830430, "body": "Try to include all headers manually in <code>.cpp</code> file and follow compiler using notepad. Read thoroughly what compiler tells: <code>A.cpp</code> includes <code>A.h</code>, <code>A.h</code> includes <code>Factory.h</code>, <code>Factory.h</code> includes <code>A.h</code> but because <code>#define A_H</code> (<code>#ifndef</code> guard) was &quot;executed&quot; when <code>A.h</code> was included first time, compiler skips <code>A.h</code> this time and <code>Factory.h</code> includes <code>AChildOne.h</code>, <code>AChildOne.h</code> include <code>A.h</code> but it&#39;s content skipped again for same reason. Compiler finally reached <code>A_CHILD_ONE</code> declaration but it doesn&#39;t know <code>A</code> at that moment because <code>A</code> declaration has not been reached yet."}], "tags": [], "owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "is_accepted": true, "score": 0, "last_activity_date": 1460585199, "last_edit_date": 1460585199, "creation_date": 1460582527, "answer_id": 36609796, "question_id": 36609665, "link": "https://stackoverflow.com/questions/36609665/having-trouble-to-understand-circular-declaration/36609796#36609796", "title": "Having trouble to understand circular declaration", "body": "<p>In <code>Factory.h</code> you try to include <code>A.h</code>; in <code>A.h</code> you try to include <code>Factory.h</code>.</p>\n\n<p>Including <code>Factory.h</code> into <code>A.cpp</code> and removing from <code>A.h</code> should help.</p>\n\n<p><code>Factory</code> declaration depends on <code>A</code> interface. <code>A</code> declaration doesn't depend on <code>Factory</code> declaration but <code>A</code> definition does. </p>\n\n<p>Also, <code>Factory.h</code> doesn't need to know about <code>AChildOne.h</code> but <code>Factory.cpp</code> does. So move <code>#include AChildOne.h</code> to <code>Factory.cpp</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 6200980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae8574d3d51e9c936d68b4cb2876769?s=128&d=identicon&r=PG&f=1", "display_name": "Zindan", "link": "https://stackoverflow.com/users/6200980/zindan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 36609796, "answer_count": 1, "score": 0, "last_activity_date": 1460585199, "creation_date": 1460581957, "question_id": 36609665, "link": "https://stackoverflow.com/questions/36609665/having-trouble-to-understand-circular-declaration", "title": "Having trouble to understand circular declaration", "body": "<p>Hi i'm trying to create a factory method, that returns a derived class of class A, I'm having trouble understanding circular declaration, I hope you can help me solve this.</p>\n\n<p>Thanks.</p>\n\n<p>AChildOne.cpp</p>\n\n<hr>\n\n<pre><code>#include \"AChildOne.h\"\n</code></pre>\n\n<p>AChildOne.h</p>\n\n<hr>\n\n<pre><code>#ifndef ACHILDONE_H\n#define ACHILDONE_H\n#include \"A.h\"\n\nclass A_CHILD_ONE : public A {\n};\n\n#endif\n</code></pre>\n\n<p>A.cpp</p>\n\n<hr>\n\n<pre><code>#include \"A.h\"\n\nvoid A::a(){\n    Factory::fact();\n};\n</code></pre>\n\n<p>A.h</p>\n\n<hr>\n\n<pre><code>#ifndef A_H\n#define A_H\n\n#include \"Factory.h\"\n\nclass A {\n    public:\n      static void a();\n};\n\n#endif\n</code></pre>\n\n<p>Factory.cpp</p>\n\n<hr>\n\n<pre><code>#include \"Factory.h\"\nA *Factory::fact(){\n    return new A_CHILD_ONE;\n}\n</code></pre>\n\n<p>Factory.h</p>\n\n<hr>\n\n<pre><code>#ifndef FACTORY_H\n#define FACTORY_H\n\n#include \"A.h\"\n#include \"AChildOne.h\"\n\nclass Factory {\n    public:\n     static A *fact();\n};\n\n#endif\n</code></pre>\n\n<p>Compilation error</p>\n\n<pre><code>g++ A.cpp Factory.cpp AChildOne.cpp -o test\nIn file included from Factory.h:5:0,\n                 from A.h:4,\n                 from A.cpp:1:\nAChildOne.h:5:30: error: expected class-name before \u2018{\u2019 token\n class A_CHILD_ONE : public A {\n                              ^\nIn file included from A.h:4:0,\n                 from A.cpp:1:\nFactory.h:9:10: error: \u2018A\u2019 does not name a type\n   static A *fact();\n          ^\nA.cpp: In static member function \u2018static void A::a()\u2019:\nA.cpp:4:2: error: \u2018fact\u2019 is not a member of \u2018Factory\u2019\n  Factory::fact();\n  ^\nIn file included from A.h:4:0,\n                 from AChildOne.h:3,\n                 from AChildOne.cpp:1:\nFactory.h:9:10: error: \u2018A\u2019 does not name a type\n   static A *fact();\n          ^\n</code></pre>\n"}, {"tags": ["c++", "pointers", "initialization", "static-memory-allocation"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1460582014, "post_id": 36609661, "comment_id": 60815995, "body": "Is there really a surge or random questions in C++ today, or is it just me?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1460582199, "post_id": 36609661, "comment_id": 60816091, "body": "Is this question about C or C++ ? There&#39;s a duplicate for C <a href=\"http://stackoverflow.com/questions/24805673/declare-and-initialize-pointer-concisely-i-e-pointer-to-int\">here</a>."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1460582249, "post_id": 36609661, "comment_id": 60816124, "body": "Can you explain why you need it to be on one line and without using two variables? That might help us come up with an acceptable solution..."}, {"owner": {"reputation": 689, "user_id": 5792507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-QVSJS0a07tQ/AAAAAAAAAAI/AAAAAAAAAVs/fkPegmIZ_9k/photo.jpg?sz=128", "display_name": "ostrichofevil", "link": "https://stackoverflow.com/users/5792507/ostrichofevil"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1460582331, "post_id": 36609661, "comment_id": 60816164, "body": "@Quentin It&#39;s about C++, but I thought that the answers might be the same for both languages."}, {"owner": {"reputation": 689, "user_id": 5792507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-QVSJS0a07tQ/AAAAAAAAAAI/AAAAAAAAAVs/fkPegmIZ_9k/photo.jpg?sz=128", "display_name": "ostrichofevil", "link": "https://stackoverflow.com/users/5792507/ostrichofevil"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1460582384, "post_id": 36609661, "comment_id": 60816193, "body": "@Brian Of course, if it&#39;s not possible to do what I want to do, I can use two variables.  I wanted to do it with one variable because of the potential overhead of two variables when there could be one."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1460582726, "post_id": 36609661, "comment_id": 60816368, "body": "You should really add more context, because I doubt there is anything to be gained from having only one variable. In fact, since that one variable would be the pointer, there <b>has</b> to be an actual variable somewhere for it to point to, even if it is not named in the code."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1460582957, "post_id": 36609661, "comment_id": 60816469, "body": "I removed the C flag, it is really too different from C++ in these points to be relevant, here. Also, you are asking about &quot;static&quot; memory, this seems to point to a confusion what static means."}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460594422, "post_id": 36609661, "comment_id": 60820575, "body": "OP: One thing to think about is that a pointer is like a street address to a house. No matter how you (legally) declare it, if you have an &quot;address&quot;, you will (should) have a &quot;house&quot; in memory [otherwise you get UB]. In other words, for all intents and purposes, you will have two &quot;variables&quot; in memory.   Also, @SergeyA, it&#39;s not just you. The main reason for the surge is that we&#39;re a few weeks into a new college quarter."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460645070, "post_id": 36609661, "comment_id": 60849078, "body": "@JasonMc92, thanks for info and confirming I am not seeing things :)"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460582380, "post_id": 36609685, "comment_id": 60816189, "body": "C++14 actually has the wording revised. But you still can&#39;t take a pointer to value, of course."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460582529, "post_id": 36609685, "comment_id": 60816273, "body": "@SergeyA The last part you mentioned is what I tried to highlight. :)"}], "tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 2, "last_activity_date": 1460582723, "last_edit_date": 1460582723, "creation_date": 1460582049, "answer_id": 36609685, "question_id": 36609661, "link": "https://stackoverflow.com/questions/36609661/create-pointer-to-value-in-one-line/36609685#36609685", "title": "Create pointer to value in one line", "body": "<p>No, you cannot have a <em>pointer to a value</em>, you can only have a <em>pointer to a variable</em> or <em>pointer to an object (lvalue)</em>.</p>\n\n<p>To elaborate, from C prespective, quoting <code>C11</code> chapter \u00a76.5.3.2 for the usage of <code>&amp;</code> operator</p>\n\n<blockquote>\n  <p>The operand of the unary <code>&amp;</code> operator shall be either a function designator, the result of a\n  <code>[]</code> or unary <code>*</code> operator, or an lvalue that designates an object that is not a bit-field and is\n  not declared with the register storage-class specifier.</p>\n</blockquote>\n\n<p>So, something along the line of</p>\n\n<pre><code>int * p = &amp;10;\n</code></pre>\n\n<p>is purely invalid.</p>\n"}, {"comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1460582396, "post_id": 36609750, "comment_id": 60816204, "body": "Just saying, though it&#39;s one line, not one variable, anyway.. :)"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1460582566, "post_id": 36609750, "comment_id": 60816286, "body": "@SouravGhosh yes I&#39;ve just re-read the question... And lost interest in answering it. :/"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1460582328, "creation_date": 1460582328, "answer_id": 36609750, "question_id": 36609661, "link": "https://stackoverflow.com/questions/36609661/create-pointer-to-value-in-one-line/36609750#36609750", "title": "Create pointer to value in one line", "body": "<p>If you must...</p>\n\n<pre><code>int i = 5, *p = &amp;i;\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 5792507, "user_type": "registered", "accept_rate": 62, "profile_image": "https://lh4.googleusercontent.com/-QVSJS0a07tQ/AAAAAAAAAAI/AAAAAAAAAVs/fkPegmIZ_9k/photo.jpg?sz=128", "display_name": "ostrichofevil", "link": "https://stackoverflow.com/users/5792507/ostrichofevil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1944, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1460582821, "creation_date": 1460581949, "last_edit_date": 1460582821, "question_id": 36609661, "link": "https://stackoverflow.com/questions/36609661/create-pointer-to-value-in-one-line", "title": "Create pointer to value in one line", "body": "<p>I would like to create a pointer to a value in one line; I want the same functionality as this:</p>\n\n<pre><code>int i = MY_VALUE\nint * j = &amp;i;\n</code></pre>\n\n<p>However, I want to do this in one line, and do not want to use two variables.  I know that I can do this:</p>\n\n<pre><code>int * i = new int (MY_VALUE);\n</code></pre>\n\n<p>But I don't want to use dynamic memory; I want to use static memory.</p>\n\n<p>Is there a way that I can allocate a pointer to a value, statically, with one variable, in one line?</p>\n"}, {"tags": ["c++", "opengl", "glfw", "glew"], "comments": [{"owner": {"reputation": 507, "user_id": 3239130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c3e55497cc12f275dbc38f897766fd?s=128&d=identicon&r=PG&f=1", "display_name": "cehnehdeh", "link": "https://stackoverflow.com/users/3239130/cehnehdeh"}, "edited": false, "score": 0, "creation_date": 1460595915, "post_id": 36609510, "comment_id": 60820962, "body": "I don&#39;t think you want to use a stride of <code>6 * sizeof(GLfloat)</code>, you can use <code>0</code> as the default or specify as <code>3 * sizeof(GLfloat)</code>, since your position and color are both 3 float-elements each."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "reply_to_user": {"reputation": 507, "user_id": 3239130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61c3e55497cc12f275dbc38f897766fd?s=128&d=identicon&r=PG&f=1", "display_name": "cehnehdeh", "link": "https://stackoverflow.com/users/3239130/cehnehdeh"}, "edited": false, "score": 3, "creation_date": 1460599656, "post_id": 36609510, "comment_id": 60822058, "body": "@cehnehdeh Stride is the space between each vertex attribute block&#39;s start, which is 6 floats here. 0 is invalid since he is interleaving the color and position. 0 is only allowed as a substitute for a number if the attribute is contained in blocks of only that attribute. In interleaving, the stride should be the size of each vertex."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1460751857, "post_id": 36609510, "comment_id": 60905525, "body": "Sounds an awful lot like flat shading model. Is it solved by setting shade model to smooth calling &#39;glShadeModel(GL_SMOOTH)&#39; during init?"}, {"owner": {"reputation": 215, "user_id": 5739220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d33b125d82c6ff13513c7e0151fbd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Mastrem", "link": "https://stackoverflow.com/users/5739220/mastrem"}, "edited": false, "score": 0, "creation_date": 1460758245, "post_id": 36609510, "comment_id": 60908151, "body": "maybe. I can&#39;t test it now, because I already rewrote everything and now it&#39;s working again."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "reply_to_user": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1460762422, "post_id": 36609510, "comment_id": 60909523, "body": "@Andreas I would think applying a fragment shader would override that, but then I haven&#39;t programmed any OpenGL with/using fixed function. OP, what version is this binding? That might be relevant information."}, {"owner": {"reputation": 2796, "user_id": 6121044, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d36000b5ea58961acf50354041457af9?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/6121044/andreas"}, "edited": false, "score": 0, "creation_date": 1460790118, "post_id": 36609510, "comment_id": 60914910, "body": "@WilliamKappler Yeah you are right. There is no way for OpenGL to know which attribute is color unless using the built-in attributes and varyings."}], "owner": {"reputation": 215, "user_id": 5739220, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d33b125d82c6ff13513c7e0151fbd5a6?s=128&d=identicon&r=PG&f=1", "display_name": "Mastrem", "link": "https://stackoverflow.com/users/5739220/mastrem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1460793691, "creation_date": 1460581282, "last_edit_date": 1460793691, "question_id": 36609510, "link": "https://stackoverflow.com/questions/36609510/opengl-triangle-gets-color-of-the-first-vertex", "title": "Opengl triangle gets color of the first vertex", "body": "<p>So I was trying out some opengl code the other day. Here's my code.\nMain:</p>\n\n<pre><code>#include &lt;glew.h&gt;\n#include &lt;glfw3.h&gt;\n\n#include \"Mesh.h\"\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;stdlib.h&gt;\n\nint main(int argc, char** argv){\nglfwInit();\n\nGLFWwindow* window = glfwCreateWindow(1024, 768, \"HGLW\", NULL, NULL);\nglfwMakeContextCurrent(window);\n\nglewExperimental = GL_TRUE;\nint succes = glewInit();\nif (succes != GLEW_OK){\n    exit(EXIT_FAILURE);\n    glfwTerminate();\n}\nglEnable(GL_DEPTH);\nglDepthFunc(GL_LESS);\n\nMesh mesh();\n\nmesh.setShader(GL_VERTEX_SHADER, \"Shaders/Shader.vert\");\nmesh.setShader(GL_FRAGMENT_SHADER, \"Shaders/Shader.frag\");\nmesh.linkShaders();\n\nmesh.upload();\n\nwhile (!glfwWindowShouldClose(window)){\n    glfwPollEvents();\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    mesh.render();\n\n    glfwSwapBuffers(window);\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>relevant Mesh functions:</p>\n\n<pre><code>Mesh::Mesh(){\n//generate the vertex and index buffers\nglGenBuffers(1, &amp;_vbo);\nglGenBuffers(1, &amp;_ibo);\n\n//generating the vertex array\nglGenVertexArrays(1, &amp;_vao);\n\n//link the right buffers to the vao\nglBindVertexArray(_vao);\n\nglBindBuffer(GL_ARRAY_BUFFER, _vbo);\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _ibo);\n\nglBindVertexArray(0);\n}\n\nvoid Mesh::upload()\n{\n\nstd::vector&lt;GLfloat&gt; verts = { 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f,\n                               1.0f, 1.0f, 0.0f, 0.0f, 1.0f, 0.0f,\n                               -1.0f, 1.0f, 0.0f, 0.0f, 0.0f, 1.0f };\n_indices = { 0, 1, 2};\n\nglBindVertexArray(_vao);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\n\nglVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), 0);\nglVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 6 * sizeof(GLfloat), (void*)(sizeof(GLfloat)*3));\n\nglBufferData(GL_ARRAY_BUFFER, sizeof(GLfloat)*verts.size(), &amp;verts[0], GL_STATIC_DRAW);\nglBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(GLushort)*_indices.size(),     &amp;_indices[0], GL_STATIC_DRAW);\n\nglBindVertexArray(0);\n}\n\nvoid Mesh::render(){\n//if the program exists, use it\nif (_program != NULL){\n    glUseProgram(_program);\n}\n\nglBindVertexArray(_vao);\nglDrawElements(GL_TRIANGLES, _indices.size(), GL_UNSIGNED_SHORT, 0);\nglBindVertexArray(NULL);\n}\n</code></pre>\n\n<p>vertex shader:</p>\n\n<pre><code>#version 430\n\nlayout(location=0) in vec3 position;\nlayout(location=1) in vec3 inColor;\n\nout vec3 outColor;\n\nvoid main(){\n\ngl_Position = vec4(position, 0.0f);\n\noutColor = inColor;\n\n}\n</code></pre>\n\n<p>fragment shader:</p>\n\n<pre><code>#version 430\n\nin vec3 outColor;\n\nout vec4 color;\n\nvoid main(){\n\ncolor = vec4(outColor, 1.0f);\n</code></pre>\n\n<p>}</p>\n\n<p>What I get is not a red, green and blue triangle, but a entirely red one. and when I change the first color (the fourth, fifth and sixth element of verts) to green, my entire triangle becomes green. So it looks like my entire triangle has the first specified color instead of all 3.</p>\n\n<p>Is there anyone who knows whats going on here? I've made these types of programs before and they all worked fine; I just can't find any real differences between my working programs and this one.</p>\n\n<p>I'm using opengl 4.5</p>\n"}, {"tags": ["c++", "c++14", "slice", "valarray"], "comments": [{"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1460801687, "post_id": 36609488, "comment_id": 60917834, "body": "I should mention that I use <code>std::slice</code> in a user-defined class."}], "answers": [{"comments": [{"owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1460802564, "post_id": 36657420, "comment_id": 60918110, "body": "I&#39;m using <code>std::slice</code> in a user-defined class. BTW the bad thing about <code>operator[](std::slice) const</code> in <code>std::valarray</code> is that it yields the sliced object by <i>copying</i> the corresponding elements. If the <code>std::valarray</code> is huge, that operation will lead to a serious performance penalty hidden behind an elegant notation. In my class I&#39;m returning a proxy object which contains a reference to the actual one. That&#39;s what the non-const version of <code>operator[](std::slice)</code> in <code>std::valarray</code> does. But there, the returned <code>std::slice_array</code> has no subscript operator."}, {"owner": {"reputation": 70, "user_id": 5956938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FxAuJpNbq8g/AAAAAAAAAAI/AAAAAAABB2o/7w-n_O_cjyc/photo.jpg?sz=128", "display_name": "Tiago Vieira", "link": "https://stackoverflow.com/users/5956938/tiago-vieira"}, "reply_to_user": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "edited": false, "score": 0, "creation_date": 1460843395, "post_id": 36657420, "comment_id": 60931807, "body": "Yes, you are right. For performance it is better to use your solution. The example that I give would be better if just want some syntactic sugar to your code."}], "tags": [], "owner": {"reputation": 70, "user_id": 5956938, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FxAuJpNbq8g/AAAAAAAAAAI/AAAAAAABB2o/7w-n_O_cjyc/photo.jpg?sz=128", "display_name": "Tiago Vieira", "link": "https://stackoverflow.com/users/5956938/tiago-vieira"}, "is_accepted": false, "score": 0, "last_activity_date": 1460757082, "creation_date": 1460757082, "answer_id": 36657420, "question_id": 36609488, "link": "https://stackoverflow.com/questions/36609488/slicing-a-slice-using-the-standard-library/36657420#36657420", "title": "Slicing a slice using the Standard Library", "body": "<p>There is no such thing in standard library, as far as I can tell.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/numeric/valarray/slice\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/valarray/slice</a></p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/numeric/valarray/slice_array\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/valarray/slice_array</a></p>\n\n<p>But if you are using a const std::valarray you can use the operator</p>\n\n<pre><code>valarray&lt;T&gt; operator[] (slice slc) const;\n</code></pre>\n\n<p>that will return another std::valarray, and in that you can apply std::slice again.</p>\n\n<pre><code>// slice example\n#include &lt;iostream&gt;  // std::cout\n#include &lt;cstddef&gt;   // std::size_t\n#include &lt;valarray&gt;  // std::valarray, std::slice\n\nint main() {\n    std::valarray&lt;int&gt; foo(100);\n    for (int i = 0; i &lt; 100; ++i) foo[i] = i;\n\n    std::valarray&lt;int&gt; bar = foo[std::slice(2, 20, 4)];\n\n    std::cout &lt;&lt; \"slice(2,20,4):\";\n    for (auto b : bar) std::cout &lt;&lt; ' ' &lt;&lt; b;\n    std::cout &lt;&lt; '\\n';\n\n    auto const cfoo = foo;\n    std::valarray&lt;int&gt; baz = cfoo[std::slice(2, 20, 4)][std::slice(3, 3, 3)];\n\n    std::cout &lt;&lt; \"slice(3,3,3):\";\n    for (auto b : baz) std::cout &lt;&lt; ' ' &lt;&lt; b;\n    std::cout &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 14402, "user_id": 547231, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4dbfd610336a9667e0b11eac69b9cc34?s=128&d=identicon&r=PG", "display_name": "0xbadf00d", "link": "https://stackoverflow.com/users/547231/0xbadf00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 814, "favorite_count": 2, "answer_count": 1, "score": 8, "last_activity_date": 1460757082, "creation_date": 1460581203, "question_id": 36609488, "link": "https://stackoverflow.com/questions/36609488/slicing-a-slice-using-the-standard-library", "title": "Slicing a slice using the Standard Library", "body": "<p>Is there a functionality in the Standard Library which allows me to slice a <code>std::slice</code> or do I need to write something like</p>\n\n<pre><code>std::slice refine(std::slice const&amp; first, std::slice const&amp; second)\n{\n    return {\n        first.start() + second.start() * first.stride(),\n        second.size(),\n        first.stride() * second.stride()\n    };\n}\n</code></pre>\n\n<p>by myself?</p>\n"}, {"tags": ["c++", "alias", "using"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460581349, "post_id": 36609479, "comment_id": 60815626, "body": "There is no such way. Question can be closed now."}, {"owner": {"reputation": 230, "user_id": 6185537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfab2419a626a99fc1995ba5c14777f9?s=128&d=identicon&r=PG&f=1", "display_name": "antiHUMAN", "link": "https://stackoverflow.com/users/6185537/antihuman"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460581474, "post_id": 36609479, "comment_id": 60815718, "body": "@SergeyA OK, then I know. Put it as an answer and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1460581559, "creation_date": 1460581559, "answer_id": 36609562, "question_id": 36609479, "link": "https://stackoverflow.com/questions/36609479/create-multiple-aliases-with-using/36609562#36609562", "title": "Create multiple aliases with &quot;using&quot;", "body": "<p>There is no such way. A single type-aliasing using directive can only introduce a single new type.</p>\n"}], "owner": {"reputation": 230, "user_id": 6185537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfab2419a626a99fc1995ba5c14777f9?s=128&d=identicon&r=PG&f=1", "display_name": "antiHUMAN", "link": "https://stackoverflow.com/users/6185537/antihuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 36609562, "answer_count": 1, "score": 0, "last_activity_date": 1460581559, "creation_date": 1460581174, "question_id": 36609479, "link": "https://stackoverflow.com/questions/36609479/create-multiple-aliases-with-using", "title": "Create multiple aliases with &quot;using&quot;", "body": "<p>I have written a templated 2D-vector struct, <code>XY&lt;T&gt;</code>, and I want to make a number of aliases for it, so I write:</p>\n\n<pre><code>using XYf = XY&lt;float&gt;;\nusing XYd = XY&lt;double&gt;;\nusing XYld = XY&lt;long double&gt;;\nusing XYi = XY&lt;signed int&gt;;\nusing XYli = XY&lt;long signed int&gt;;\nusing XYs = XY&lt;short signed int&gt;;\nusing XYsb = XY&lt;signed char&gt;;\n</code></pre>\n\n<p>But I am wondering if it is possible to declare this in a similar way to how you can declare a number of variables of the same type:</p>\n\n<pre><code>float a, b, c, d;\n</code></pre>\n\n<p>Is it possible to do it in some other way, such as:</p>\n\n<pre><code>using \n    XYf = XY&lt;float&gt;,\n    XYd = XY&lt;double&gt;,\n    XYi = XY&lt;int&gt;;\n</code></pre>\n\n<p>Well, I've obvious tested <em>that</em> version, and it doesn't work, but I'm wondering if there any other alternatives to how one could declare a number of aliases to the same type with <code>using</code>.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1460580629, "post_id": 36609264, "comment_id": 60815258, "body": "Parameters within the function body have values passed as arguments in the function call. So when you call <code>time(plot_area, home_area, d_mow_rate)</code>, function <code>time</code> is executed with <code>p_area</code> having the value of <code>plot_area</code>, <code>h_area</code> having the value of <code>home_area</code> and so on."}, {"owner": {"reputation": 183, "user_id": 5090402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a064256beb076eb67949302492fd8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Aztec warrior", "link": "https://stackoverflow.com/users/5090402/aztec-warrior"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460580762, "post_id": 36609264, "comment_id": 60815327, "body": "Thank you, this makes much sense !"}], "answers": [{"tags": [], "owner": {"reputation": 2318, "user_id": 1840861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vpYSr.jpg?s=128&g=1", "display_name": "Praveen Vinny", "link": "https://stackoverflow.com/users/1840861/praveen-vinny"}, "is_accepted": true, "score": 1, "last_activity_date": 1460596071, "creation_date": 1460596071, "answer_id": 36612126, "question_id": 36609264, "link": "https://stackoverflow.com/questions/36609264/trouble-understanding-how-elements-of-a-certain-function-work/36612126#36612126", "title": "Trouble understanding how elements of a certain function work", "body": "<p>In your program, you had computed the following values:</p>\n\n<pre>\nplot_area = area(d_plot_length, d_plot_width);\nhome_area = area(d_home_side, d_home_side);\n</pre>\n\n<p>When the method <code>area(double,double)</code> is invoked, the resultant <code>double</code> value gets stored in these variables.</p>\n\n<p>Then you have the function call:\n<code>time_taken = time(plot_area, home_area, d_mow_rate);</code></p>\n\n<p>This is the <b>call by value </b> type of function invocation. A copy of the values in the variables, <code>plot_area</code>, <code>home_area</code> and <code>d_mow_rate</code> are passed to the function. In the <code>time(double, double, double)</code> the computing is done upon the basis of the logic you had defined in this method and the resultant value is returned to the function call in the <code>main()</code> method.</p>\n\n<p>Please note that the function call is of <code>call by value</code> and hence only a copy of the values are passed to the arguments mentioned in the function <code>time(double, double, double)</code> even though the variable names are the same in the <code>main()</code> and in the function call.</p>\n\n<p>For further reading, I will suggest you to have a look at the following links:</p>\n\n<ol>\n<li><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_function_call_by_value.htm\" rel=\"nofollow\">Call By\nValue</a></li>\n<li><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_function_call_by_reference.htm\" rel=\"nofollow\">Call By\nReference</a></li>\n<li><a href=\"http://www.tutorialspoint.com/cplusplus/cpp_function_call_by_pointer.htm\" rel=\"nofollow\">Call By\nPointer</a></li>\n</ol>\n"}], "owner": {"reputation": 183, "user_id": 5090402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a064256beb076eb67949302492fd8e1?s=128&d=identicon&r=PG&f=1", "display_name": "Aztec warrior", "link": "https://stackoverflow.com/users/5090402/aztec-warrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 36612126, "answer_count": 1, "score": 1, "last_activity_date": 1460599280, "creation_date": 1460580387, "last_edit_date": 1460599280, "question_id": 36609264, "link": "https://stackoverflow.com/questions/36609264/trouble-understanding-how-elements-of-a-certain-function-work", "title": "Trouble understanding how elements of a certain function work", "body": "<p>I am required to fully understand the following code :</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\ndouble area(double length, double width);\ndouble time(double p_area, double h_area, double mow_rate);\n\nint main() {\n    double d_plot_length, d_plot_width, d_home_side, d_mow_rate;\n    double plot_area, home_area, time_taken;\n    // I've used double for all of these to get the most precise values possible, something I'd only really consider doing on small programmes such as this\n    cout &lt;&lt; \"What is the length of the plot? In meters please.\" &lt;&lt; endl;\n    cin &gt;&gt; d_plot_length;\n    cout &lt;&lt; \"What is the width of the plot? In meters please.\" &lt;&lt; endl;\n    cin &gt;&gt; d_plot_width;\n    cout&lt;&lt; \"What is the size of the side of the house? In meters please.\" &lt;&lt; endl;\n    cin &gt;&gt; d_home_side;\n    cout &lt;&lt; \"What is the rate at which you are going to be mowing? In meters per minute please\" &lt;&lt; endl;\n    cin &gt;&gt; d_mow_rate;\n    // Just getting all the data I need from the user\n    plot_area = area(d_plot_length, d_plot_width);\n    home_area = area(d_home_side, d_home_side);\n    time_taken = time(plot_area, home_area, d_mow_rate);\n    cout &lt;&lt; \"It will take \" &lt;&lt; time_taken &lt;&lt; \" minutes to mow this lawn. Better get cracking\" &lt;&lt; endl;\n    return 0;\n}\n\ndouble area(double length, double width) {\n    double value;\n    value = length * width;\n    return value;\n}\n\ndouble time(double p_area, double h_area, double mow_rate) {\n    double value;\n    value = (p_area - h_area) / mow_rate;\n    return value;\n}\n</code></pre>\n\n<p>I am struggling to understand how the <code>time()</code> function works.</p>\n\n<p>So far I understand that :</p>\n\n<p><code>time_taken</code> , gets its value from the <code>time()</code> function: <code>time(plot_area, home_area, d_mow_rate)</code>.</p>\n\n<p>The <code>time()</code> function gets its values from the function declaration at the bottom. </p>\n\n<pre><code>double time(double p_area, double h_area, double mow_rate) {\n    double value;\n    value = (p_area - h_area) / mow_rate;\n    return value;\n}\n</code></pre>\n\n<p>However, this is where I'm stuck. The user is asked to enter values for <code>d_plot_length</code>, <code>d_plot_width</code>, etc. So I cannot understand how the compiler knows what these values <code>p_area</code>, and <code>h_area</code> actually are. </p>\n\n<p>I realise that somehow the <code>area()</code> function is being used to aid the <code>time()</code> function, but as far as I'm aware the variables <code>P_area</code> etc within the <code>time()</code> function do not have values assigned to them.</p>\n\n<p>Please can someone fill in the gaps in my understanding.</p>\n\n<p>To be more precise, I want to know exactly how <code>time_taken</code> is displayed on the screen, from the start of the process, to the <code>cout</code>.  Like I say I am familiar with most areas but not all.</p>\n"}, {"tags": ["c++", "linux", "qt", "gstreamer"], "comments": [{"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460617001, "post_id": 36609256, "comment_id": 60828027, "body": "other files are working? say wav,ogg or something?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460618831, "post_id": 36609256, "comment_id": 60829196, "body": "wav throws the same error..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460618891, "post_id": 36609256, "comment_id": 60829234, "body": "ogg says: QObject::startTimer: Timers can only be used with threads started with QThread"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460633457, "post_id": 36609256, "comment_id": 60839330, "body": "this is weird.. what version of Qt and gstreamer do you use? and what platform(OS)? also try to add as many related infos as possible.. we are not magicians (I know you are new at SO) :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460635302, "post_id": 36609256, "comment_id": 60840737, "body": "i am using a linux machine (ubuntu). I am using Qt 4.8.6 and gstreamer 1.0 &lt;br /&gt; I installed additionally qtmultimedia5... if you need any more information you could write me (actually i don&#39;t know which information could be important for you) and thank you for your efforts :)"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460713282, "post_id": 36609256, "comment_id": 60880761, "body": "ok lets try it the other way.. open up terminal an execute: <code>gst-launch-1.0 uridecodebin uri=file:&#47;&#47;&#47;home&#47;user&#47;some.mp3 ! queue ! autoaudiosink</code> - is it playing correctly? check if you have installed all the libgstreamer-plugins-* (base, good, bad, ugly.. especially ugly because of the mp3` .."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460720306, "post_id": 36609256, "comment_id": 60885448, "body": "okay: the command you suggested works correctly. My installed plugins are: base, good and bad. Ugly is currently not installed"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1460720355, "post_id": 36609256, "comment_id": 60885478, "body": "i just installed ugly but the code is still not working :/"}, {"owner": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1461162744, "post_id": 36609256, "comment_id": 61075072, "body": "ok so go to QtCreator &gt; Project &gt; Run settings &gt; unfold Env Variables section (or Build? PATH should be there or something..) and add GST_DEBUG with value 3 and then rerun, or if you do not have QtCreator you can run as <code>GST_DEBUG=3 .&#47;yourapp</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "reply_to_user": {"reputation": 3067, "user_id": 3876138, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef65cd9182b4e7e297c6eef30b1dae1b?s=128&d=identicon&r=PG", "display_name": "nayana", "link": "https://stackoverflow.com/users/3876138/nayana"}, "edited": false, "score": 0, "creation_date": 1461162859, "post_id": 36609256, "comment_id": 61075181, "body": "i fixed the problem by working with gstreamer directly (no more QT) - but thank you for your efforts! :)"}], "owner": {"user_type": "does_not_exist", "display_name": "user3809710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 402, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460618118, "creation_date": 1460580349, "last_edit_date": 1460618118, "question_id": 36609256, "link": "https://stackoverflow.com/questions/36609256/playing-mp3-file-on-linux-with-qt5-multimedia-fails", "title": "Playing mp3-file on linux with Qt5-Multimedia fails", "body": "<p>I am using a <code>QMediaPlayer</code> Object to play a mp3-file.</p>\n\n<pre><code>void play_mp3(std::string path)\n{\n    QMediaPlayer *player = QMediaPlayer();\n    player-&gt;setMedia(QUrl::fromLocalFile(path.c_str()));\n    player-&gt;setVolume(100);\n    player-&gt;play();\n}\n</code></pre>\n\n<p>The following problem occurs: </p>\n\n<blockquote>\n  <p>GStreamer; Unable to pause - \"file://[path]\"</p>\n</blockquote>\n\n<p>What is wrong?</p>\n"}, {"tags": ["c++", "c", "unix", "posix", "atomic"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 3, "creation_date": 1460580446, "post_id": 36609252, "comment_id": 60815164, "body": "Can&#39;t you just do the rename part on the top level destination directory?"}, {"owner": {"reputation": 6166, "user_id": 2990144, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c65c7991822f827780a2cae38c5c31a2?s=128&d=identicon&r=PG", "display_name": "Seth Holladay", "link": "https://stackoverflow.com/users/2990144/seth-holladay"}, "edited": false, "score": 0, "creation_date": 1460582164, "post_id": 36609252, "comment_id": 60816077, "body": "Well I can&#39;t scan the filesystem to see which directories exist, as that breaks the atomicity. I also can&#39;t overwrite siblings which may exist from previous builds. I have updated the question to clarify the constraints of the problem."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1460583762, "post_id": 36609252, "comment_id": 60816890, "body": "You will need to do a mutex of some kind around the multiple filesystem operations."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1460594640, "post_id": 36609252, "comment_id": 60820636, "body": "If <code>&#47;myproject&#47;build&#47;dev</code> doesn&#39;t exist, you should be able to <code>mkdir &#47;myproject&#47;build_tmp&#47;$random</code>, then put everything under there (not worrying about atomicity for this part since your other processes don&#39;t read anything from there), then, after <code>&#47;myproject&#47;build_tmp&#47;$random&#47;0.2.2&#47;...</code> is ready, <code>mv &#47;myproject&#47;build_tmp&#47;$random &#47;myproject&#47;build&#47;dev</code> and the whole thing appears atomically - any process looking in <code>build</code> will not see <code>dev</code> until the whole thing is moved into place. (Assuming <code>build</code> and <code>build_tmp</code> are on the same filesystem. If <code>build</code> is a mount point it&#39;ll be harder.)"}, {"owner": {"reputation": 6166, "user_id": 2990144, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c65c7991822f827780a2cae38c5c31a2?s=128&d=identicon&r=PG", "display_name": "Seth Holladay", "link": "https://stackoverflow.com/users/2990144/seth-holladay"}, "edited": false, "score": 0, "creation_date": 1460597906, "post_id": 36609252, "comment_id": 60821543, "body": "I was thinking along similar lines. But I can&#39;t know <code>dev</code> doesn&#39;t exist until I try to put something in there. In between the time I&#39;ve realized that (either by trying or checking with <code>stat</code>, etc) and then corrected for it, anything can happen. Creating the missing structure in the temporary space (or deciding which level of it to use) is only really possible as a second action after having read the state of the disk, thus opening the usual <a href=\"http://www.linuxsecurity.com/content/view/115462/151/\" rel=\"nofollow noreferrer\">can of worms</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1460636145, "post_id": 36609252, "comment_id": 60841402, "body": "OK, so first you pessimistically assume that it doesn&#39;t exist. Don&#39;t check. Just go ahead and build the tmp tree. Then do the rename. If <code>dev</code> does exist (either it always did or it was created while you were populating the tmp tree), the attempt to rename over an existing directory will fail with <code>EEXISTS</code>. If you get that error, you move down one level and try renaming <i>that</i> into place, leaving behind an empty <code>dev</code> in the tmp space. Repeat until you succeed or run out of directories, in which case you&#39;re trying to atomically replace a populated directory with another populated directory..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "edited": false, "score": 0, "creation_date": 1460636175, "post_id": 36609252, "comment_id": 60841430, "body": "...which isn&#39;t possible."}], "owner": {"reputation": 6166, "user_id": 2990144, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c65c7991822f827780a2cae38c5c31a2?s=128&d=identicon&r=PG", "display_name": "Seth Holladay", "link": "https://stackoverflow.com/users/2990144/seth-holladay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 235, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460596875, "creation_date": 1460580343, "last_edit_date": 1460596875, "question_id": 36609252, "link": "https://stackoverflow.com/questions/36609252/can-we-mkdir-rename-and-remain-atomic", "title": "Can we mkdir + rename and remain atomic?", "body": "<p>I am designing a build system that needs to be careful about manipulating the filesystem in an atomic manner.</p>\n\n<p>I have run into a situation where I have a temporary directory that contains files and now I want to move it to a more permanent home. I know how to <a href=\"https://rcrowley.org/2010/01/06/things-unix-can-do-atomically.html\" rel=\"nofollow\">rename atomically</a>, but this does not work if the full destination path does not exist. If I didn't care about being atomic, the answer would be a simple <code>mkdir -p ... &amp;&amp; mv ...</code>. Is it possible to rename the temporary directory atomically in a way that will create the parent directories? I cannot do so ahead of time, because the parent directory names are computed.</p>\n\n<p>This will be run inside of a <a href=\"https://nodejs.org/en/\" rel=\"nofollow\">Node.js</a> program, so something from the <a href=\"https://www.npmjs.com/\" rel=\"nofollow\">npm</a> ecosystem would be desirable, but it is trivial to call a command line program or C / C++ library to do the work.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>/tmp/mytempbuild - a directory containing files\n/myproject/build/dev/0.2.2 - the desired destination, whose parent may not exist\n/myproject/build/master - an older, existing directory that must not be changed\n</code></pre>\n"}, {"tags": ["c++", "opengl", "types"], "comments": [{"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1460580693, "post_id": 36609229, "comment_id": 60815284, "body": "Can you elaborate on the safety you&#39;re looking for? You mean how can you safely go out of your way by storing e.g. a <code>GLuint</code> in a non-GL type, and do so safely? (... as you&#39;ve got some sort of step, maybe serialisation or something like that, which can accept only the built-in types?)"}, {"owner": {"reputation": 59, "user_id": 6133844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c2f7c5d405a55f09801a8c07436f16?s=128&d=identicon&r=PG&f=1", "display_name": "push \u0440\u043e\u0440", "link": "https://stackoverflow.com/users/6133844/push-%d1%80%d0%be%d1%80"}, "reply_to_user": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 0, "creation_date": 1460581120, "post_id": 36609229, "comment_id": 60815496, "body": "For example variable int8_t i = 99; has bits image 0001001. Then we introduce GLbyte u = i; and send it to the shader. Why opengl must interpret this number correctly in the shader as 99?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1460581129, "post_id": 36609229, "comment_id": 60815503, "body": "<code>And how can we be sure that say OpenGL type &quot;unsigned integer&quot; will match with uint32_t at binary representation level?</code> OpenGL requires GLuint to be 32 bits large. And it would make almost zero sense for a system to have 2 different ints of same size, but different byte order."}, {"owner": {"reputation": 59, "user_id": 6133844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c2f7c5d405a55f09801a8c07436f16?s=128&d=identicon&r=PG&f=1", "display_name": "push \u0440\u043e\u0440", "link": "https://stackoverflow.com/users/6133844/push-%d1%80%d0%be%d1%80"}, "edited": false, "score": 0, "creation_date": 1471126391, "post_id": 36609229, "comment_id": 65230815, "body": "At the same system yes. But defferent CPU may differently encode integers. I mean not only the various orders of bytes but absolutely other method to encode integers."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 1, "last_activity_date": 1460584493, "creation_date": 1460584493, "answer_id": 36610292, "question_id": 36609229, "link": "https://stackoverflow.com/questions/36609229/opengl-types-glint-glbyte-to-c-int32-t-int8-t-mapping/36610292#36610292", "title": "OpenGL types GLint, Glbyte... to C++ int32_t, int8_t... mapping", "body": "<blockquote>\n  <p>There is only thing that we know: c++ types like int32_t, int16_t,... contains need number of bytes, but not bits.</p>\n</blockquote>\n\n<p>That's not true at all. The C standard, which the C++ standard imports, states:</p>\n\n<blockquote>\n  <p>The typedef name int<i>N</i>_t designates a signed integer type with width <em>N</em>, no padding bits, ...</p>\n</blockquote>\n\n<p>N being the number of <em>bits</em>, not the number of bytes.</p>\n\n<p>The OpenGL standard similarly defines its types with an exact number of bits, not bytes. Neither one allows padding.</p>\n\n<p>Therefore, <code>GLuint</code> must be identically sized and formatted relative to <code>uint32_t</code>. They need not be the exact same type, but since they store the same range of values and have the same size, conversion between them ought to be lossless.</p>\n\n<p>So it's not clear what you're concerned about.</p>\n"}], "owner": {"reputation": 59, "user_id": 6133844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1c2f7c5d405a55f09801a8c07436f16?s=128&d=identicon&r=PG&f=1", "display_name": "push \u0440\u043e\u0440", "link": "https://stackoverflow.com/users/6133844/push-%d1%80%d0%be%d1%80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 771, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460584493, "creation_date": 1460580257, "last_edit_date": 1460580496, "question_id": 36609229, "link": "https://stackoverflow.com/questions/36609229/opengl-types-glint-glbyte-to-c-int32-t-int8-t-mapping", "title": "OpenGL types GLint, Glbyte... to C++ int32_t, int8_t... mapping", "body": "<p>OpenGL specification says that all types has fixed bitdepths. Also as I know c++ specification doesn't regulate bitdepth. There is only thing that we know: c++ types like int32_t, int16_t,... contains need number of bytes, but not bits. How we can safely use these types? And how can we be sure that say OpenGL type \"unsigned integer\" will match with uint32_t at binary representation level?</p>\n"}, {"tags": ["c++", "scope", "global", "extern", "mingw-w64"], "answers": [{"comments": [{"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 1, "creation_date": 1460586532, "post_id": 36610621, "comment_id": 60818069, "body": "&quot;It does not make the symbol extern...&quot; is not accurate. Non-const objects declared in namespace scope have external linkage by default. There&#39;s no need to &quot;make them extern&quot; anyway. What <code>extern &quot;C&quot;</code> does not do in this case is it does not turn a <i>definition</i> into a <i>non-defining declaration</i> (as plain <code>extern</code> does)."}], "tags": [], "owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "is_accepted": true, "score": 1, "last_activity_date": 1460595645, "last_edit_date": 1460595645, "creation_date": 1460586159, "answer_id": 36610621, "question_id": 36609147, "link": "https://stackoverflow.com/questions/36609147/accessing-an-extern-c-variable-in-c-from-another-file/36610621#36610621", "title": "Accessing an extern &quot;C&quot; variable in c++ from another file", "body": "<p>They are not the same.</p>\n\n<pre><code>extern \"C\" int foo;\n</code></pre>\n\n<p>Does TWO things: it declares that foo is extern (i.e. this is a declaration only, and the symbol will be defined by another module), and it declares the linking of foo as \"C\", which influences the symbol name.</p>\n\n<p>On the other hand,</p>\n\n<pre><code>extern \"C\" {\n  int foo;\n}\n</code></pre>\n\n<p>only declares that foo has C linking. It does not declare the symbol as extern, which means that this is a definition, not just a declaration.</p>\n\n<p>In other words</p>\n\n<pre><code>extern \"C\" int foo;\n</code></pre>\n\n<p>is the same as (note the repetition of the extern keyword)</p>\n\n<pre><code>extern \"C\" {\n  extern int foo;\n}\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4298075, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/CkumP.jpg?s=128&g=1", "display_name": "mdavidjohnson", "link": "https://stackoverflow.com/users/4298075/mdavidjohnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 1, "accepted_answer_id": 36610621, "answer_count": 1, "score": 1, "last_activity_date": 1460595645, "creation_date": 1460579964, "last_edit_date": 1460580600, "question_id": 36609147, "link": "https://stackoverflow.com/questions/36609147/accessing-an-extern-c-variable-in-c-from-another-file", "title": "Accessing an extern &quot;C&quot; variable in c++ from another file", "body": "<p>I'm using mingw-w64 on Windows 7 Pro 64-bit. In trying to access external variables, after much hair tearing, I finally arrived at this:</p>\n\n<pre><code>// MultiTest2.h\n// Version 1.0.0\n// MDJ 2016/04/13\n\n#ifndef MULTITEST2_H\n#define MULTITEST2_H\n\nextern \"C\" {\n    int iXfer;\n    int setInt();\n}\n\n#endif // MULTITEST2_H\n</code></pre>\n\n<p>does NOT work (I'm using 'extern \"C\"' instead of just 'extern' because I'm working towards linking to assembly code eventually), but:</p>\n\n<pre><code>// MultiTest2.h\n// Version 1.0.1\n// MDJ 2016/04/13\n\n#ifndef MULTITEST2_H\n#define MULTITEST2_H\n\nextern \"C\" int iXfer;\nextern \"C\" int setInt();\n\n#endif // MULTITEST2_H\n</code></pre>\n\n<p>DOES work!</p>\n\n<p>FYI, the other two files in the system are:</p>\n\n<pre><code>// MultiTest2.cpp\n// Version 1.0.0\n// MDJ 2016/04/13\n\n#include \"MultiTest2.h\"\n\nint iXfer = 0;\n\nint setInt() {\n    iXfer = 6253;\n    return 0;\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>// MultiTest1.cpp\n// Version 1.0.0\n// MDJ 2016/04/13\n\n#include &lt;iostream&gt;\n#include \"MultiTest2.h\"\n\nusing namespace std;\n\nint main() {\n    setInt();\n    cout &lt;&lt; iXfer &lt;&lt; endl;\n}\n</code></pre>\n\n<p>With Version 1.0.0 of MultiTest2.h (the declarations in an 'extern \"C\"' block), immediately upon entering:</p>\n\n<pre><code>g++ -S MultiTest2.cpp\n</code></pre>\n\n<p>the result is:</p>\n\n<pre><code>MultiTest2.cpp:7:5: error: redefinition of 'int iXfer'\n int iXfer = 0;\n     ^\nIn file included from MultiTest2.cpp:5:0:\nMultiTest2.h:12:6: note: 'int iXfer' previously declared here\n  int iXfer;\n      ^\n</code></pre>\n\n<p>But, with Version 1.0.1 of MultiTest2.h (individual 'extern \"C\"' declarations), the following sequence works perfectly:</p>\n\n<pre><code>c:\\work\\gccWork\\MultiTest&gt;g++ -S MultiTest2.cpp\nc:\\work\\gccWork\\MultiTest&gt;g++ -S MultiTest1.cpp\nc:\\work\\gccWork\\MultiTest&gt;g++ -c MultiTest2.s\nc:\\work\\gccWork\\MultiTest&gt;g++ -c MultiTest1.s\nc:\\work\\gccWork\\MultiTest&gt;g++ -o MultiTest.exe MultiTest2.o MultiTest1.o\nc:\\work\\gccWork\\MultiTest&gt;MultiTest\n6253\n</code></pre>\n\n<p>Is this some sort of mingw-w64 idiosyncracy, or is there something I'm missing here?</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-proto"], "owner": {"reputation": 6383, "user_id": 712302, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/2b1ef5eb8af2d0392763508bfb7971d8?s=128&d=identicon&r=PG", "display_name": "ritter", "link": "https://stackoverflow.com/users/712302/ritter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1460579695, "creation_date": 1460579695, "question_id": 36609077, "link": "https://stackoverflow.com/questions/36609077/using-a-derived-class-as-terminals-in-boost-proto", "title": "Using a derived class as terminals in Boost.proto", "body": "<p>Suppose you'd want to implement a simple EDSL (Embedded Domain Specific Language) with Boost.proto with the following requirements:</p>\n\n<ul>\n<li>Custom class 'Vector' as terminal</li>\n<li>Classes derived from 'Vector' are working terminals too, e.g. Vector10</li>\n</ul>\n\n<p>Reading the manual of Boost.proto it seems the closest related example to this would be the 'Vector: Adapting a Non-Proto Terminal Type' example.</p>\n\n<p>Modifications I did to that example:</p>\n\n<ul>\n<li>Added 'Vector' class</li>\n<li>Protofied Vector instead of std::vector </li>\n</ul>\n\n<p>Here the code (compiles):</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;stdexcept&gt;\n#include &lt;boost/mpl/bool.hpp&gt;\n#include &lt;boost/proto/core.hpp&gt;\n#include &lt;boost/proto/debug.hpp&gt;\n#include &lt;boost/proto/context.hpp&gt;\n#include &lt;boost/utility/enable_if.hpp&gt;\nnamespace mpl = boost::mpl;\nnamespace proto = boost::proto;\nusing proto::_;\n\nclass Vector;\n\ntemplate&lt;typename Expr&gt;\nstruct VectorExpr;\n\nstruct VectorSubscriptCtx\n{\n    VectorSubscriptCtx(std::size_t i)\n      : i_(i)\n    {}\n\n    template&lt;typename Expr, typename EnableIf = void&gt;\n    struct eval\n      : proto::default_eval&lt;Expr, VectorSubscriptCtx const&gt;\n    {};\n\n    template&lt;typename Expr&gt;\n    struct eval&lt;\n        Expr\n      , typename boost::enable_if&lt;\n            proto::matches&lt;Expr, proto::terminal&lt; Vector &gt; &gt;\n        &gt;::type\n    &gt;\n    {\n        typedef typename proto::result_of::value&lt;Expr&gt;::type::value_type result_type;\n\n        result_type operator ()(Expr &amp;expr, VectorSubscriptCtx const &amp;ctx) const\n        {\n            return proto::value(expr)[ctx.i_];\n        }\n    };\n\n    std::size_t i_;\n};\n\n\n\n\nstruct VectorGrammar : proto::or_&lt;\n    proto::terminal&lt; proto::_ &gt;,\n    proto::plus&lt; VectorGrammar, VectorGrammar&gt;,\n    proto::minus&lt; VectorGrammar, VectorGrammar&gt;\n&gt; {};\n\nstruct VectorDomain\n  : proto::domain&lt;proto::generator&lt;VectorExpr&gt;, VectorGrammar&gt;\n{};\n\n\n\ntemplate&lt;typename Expr&gt;\nstruct VectorExpr\n  : proto::extends&lt;Expr, VectorExpr&lt;Expr&gt;, VectorDomain&gt;\n{\n    explicit VectorExpr(Expr const &amp;expr)\n      : proto::extends&lt;Expr, VectorExpr&lt;Expr&gt;, VectorDomain&gt;(expr)\n    {}\n\n    typename proto::result_of::eval&lt;Expr const, VectorSubscriptCtx const&gt;::type\n    operator []( std::size_t i ) const\n    {\n        VectorSubscriptCtx const ctx(i);\n        return proto::eval(*this, ctx);\n    }\n};\n\n\n\n\nclass Vector {\nprivate:\n  int sz;\n  double* data;\n\npublic:\n  typedef double value_type;\n\n  explicit Vector(int sz_ = 1, double iniVal = 0.0) :\n    sz( sz_), data( new double[sz] ) {\n    for (int i = 0; i &lt; sz; i++) data[i] = iniVal;        \n  }\n  Vector(const Vector&amp; vec) :\n    sz( vec.sz), data( new double[sz] ) {\n    for (int i = 0; i &lt; sz; i++) data[i] = vec.data[i];\n  }\n\n  size_t size() const {return sz; }\n\n  ~Vector() {\n    delete [] data;\n  }\n\n  double&amp; operator[](int i) { return data[i]; }\n  const double&amp; operator[](int i) const { return data[i]; }\n};\n\n\n\nclass Vector10: public Vector \n{\npublic:\n  Vector10() : Vector(10,0.0) {}\n};\n\n\n\n\ntemplate&lt;typename T&gt;\nstruct IsVector\n  : mpl::false_\n{};\n\n\ntemplate&lt;&gt;\nstruct IsVector&lt; Vector &gt;\n  : mpl::true_\n{};\n\n\n\nnamespace VectorOps\n{\n    BOOST_PROTO_DEFINE_OPERATORS(IsVector, VectorDomain)\n\n    typedef VectorSubscriptCtx const CVectorSubscriptCtx;\n\n    template&lt;typename Expr&gt;\n    Vector &amp;assign(Vector &amp;arr, Expr const &amp;expr)\n    {\n        for(std::size_t i = 0; i &lt; arr.size(); ++i)\n        {\n            arr[i] = proto::as_expr&lt;VectorDomain&gt;(expr)[i];\n        }\n        return arr;\n    }\n}\n\n\n\nint main()\n{\n    using namespace VectorOps;\n\n    Vector a,b,c,d;\n\n    VectorOps::assign(d, a + b );\n}\n</code></pre>\n\n<p>There's already the derived class <code>Vector10</code> defined. Now - using that one instead of Vector</p>\n\n<pre><code>int main()\n{\n    using namespace VectorOps;\n\n    Vector10 a,b,c,d;\n\n    VectorOps::assign(d, a + b );\n}\n</code></pre>\n\n<p>results in a compilation error</p>\n\n<pre><code>vector_proto_baseclass.cc:168:28: error: no match for \u2018operator+\u2019 (operand types are \u2018Vector10\u2019 and \u2018Vector10\u2019)\n</code></pre>\n\n<p>I believe that the operators for Vector are correctly defined in the namespace VectorOps but the ADL doesn't kick in for the derived class. </p>\n"}, {"tags": ["c++", "codeblocks", "eigen"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460579578, "post_id": 36608986, "comment_id": 60814683, "body": "Have you searched StackOverflow?  For example, use the query &quot;c++ install eigen library code blocks&quot;"}, {"owner": {"reputation": 684, "user_id": 4750379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/815236821858015/picture?type=large", "display_name": "Mike James Johnson", "link": "https://stackoverflow.com/users/4750379/mike-james-johnson"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460579812, "post_id": 36608986, "comment_id": 60814813, "body": "@ThomasMatthews yes, the problem is, when i go to project &gt;&gt; build options &gt;&gt; linker settings tab &gt;&gt; add library, I don&#39;t know what file to choose! In the directory where I extracted the files to, there is no .lib files"}], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 4750379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/815236821858015/picture?type=large", "display_name": "Mike James Johnson", "link": "https://stackoverflow.com/users/4750379/mike-james-johnson"}, "edited": false, "score": 0, "creation_date": 1460580425, "post_id": 36609096, "comment_id": 60815151, "body": "Thank you, got it."}, {"owner": {"reputation": 515, "user_id": 6183448, "user_type": "registered", "profile_image": "https://graph.facebook.com/1806456301/picture?type=large", "display_name": "Adrian Roman", "link": "https://stackoverflow.com/users/6183448/adrian-roman"}, "reply_to_user": {"reputation": 684, "user_id": 4750379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/815236821858015/picture?type=large", "display_name": "Mike James Johnson", "link": "https://stackoverflow.com/users/4750379/mike-james-johnson"}, "edited": false, "score": 1, "creation_date": 1460580426, "post_id": 36609096, "comment_id": 60815152, "body": "If you use bash, you can edit .bash_profile in your home directory and add it there, something like <code>PATH=$PATH:$HOME&#47;my_library_path_to_include</code>"}], "tags": [], "owner": {"reputation": 515, "user_id": 6183448, "user_type": "registered", "profile_image": "https://graph.facebook.com/1806456301/picture?type=large", "display_name": "Adrian Roman", "link": "https://stackoverflow.com/users/6183448/adrian-roman"}, "is_accepted": true, "score": 0, "last_activity_date": 1460579776, "creation_date": 1460579776, "answer_id": 36609096, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project/36609096#36609096", "title": "How to add Eigen library to c++ project", "body": "<p>It's a template library. You can put it anywhere as long as it's in the path (accessible).\nJust include the proper headers and it should work. No need to link anything, everything is in the headers.</p>\n"}, {"tags": [], "owner": {"reputation": 792, "user_id": 3183610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98f2b0aff981925dc8c789fa9cfe1134?s=128&d=identicon&r=PG&f=1", "display_name": "m. c.", "link": "https://stackoverflow.com/users/3183610/m-c"}, "is_accepted": false, "score": 4, "last_activity_date": 1460580523, "creation_date": 1460580523, "answer_id": 36609300, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project/36609300#36609300", "title": "How to add Eigen library to c++ project", "body": "<p>Add one line of code to your source file where you want to use Eigen.</p>\n\n<pre><code>#include \"Eigen/Dense\"\n</code></pre>\n\n<p>Put Eigen (extracted zip file) in a directory where you put your existing working header file.</p>\n"}, {"comments": [{"owner": {"reputation": 443, "user_id": 3798217, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000005594798/picture?type=large", "display_name": "Md. Abu Nafee Ibna Zahid", "link": "https://stackoverflow.com/users/3798217/md-abu-nafee-ibna-zahid"}, "edited": false, "score": 0, "creation_date": 1525678097, "post_id": 41574577, "comment_id": 87434992, "body": "I am using code blocks 16.01. Your steps worked for me. I just needed to figure out one thing. That there are 3 types of Search Directories - <code>Compiler</code>, <code>Linker</code>, <code>Resource compiler</code>. We have select <code>Compiler</code> tab under <code>Search Directories</code> beforing selecting <code>Add</code>."}], "tags": [], "owner": {"reputation": 304, "user_id": 7400625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4b8256835c9c75d8a8c97803741dde?s=128&d=identicon&r=PG&f=1", "display_name": "amann", "link": "https://stackoverflow.com/users/7400625/amann"}, "is_accepted": false, "score": 4, "last_activity_date": 1525685398, "last_edit_date": 1525685398, "creation_date": 1484068741, "answer_id": 41574577, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project/41574577#41574577", "title": "How to add Eigen library to c++ project", "body": "<p>Personally I had no idea how to install eigen on code blocks, but those are the steps I made and it worked:</p>\n\n<ol>\n<li>unpack the ZIP into some arbitary folder </li>\n<li>go to codeblocks Settings-> complier-> Search Directories-> Add-> enter the address of the folder you chose in (1)-> o.k </li>\n<li>declare <code>#include \"Eigen/Dense\"</code> before the main function. </li>\n</ol>\n\n<p>I learned the steps from <a href=\"http://www.learncpp.com/cpp-tutorial/a3-using-libraries-with-codeblocks/\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10063719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NJoLC.jpg?s=128&g=1", "display_name": "Shre_Chatterjee", "link": "https://stackoverflow.com/users/10063719/shre-chatterjee"}, "is_accepted": false, "score": 1, "last_activity_date": 1533642136, "creation_date": 1533642136, "answer_id": 51725969, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project/51725969#51725969", "title": "How to add Eigen library to c++ project", "body": "<p>This one was a tricky one for me. I am using Code::Blocks Ver 17.12. </p>\n\n<p>a) I downloaded Eigen 3.3.5 (<a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">http://eigen.tuxfamily.org/index.php?title=Main_Page</a>). The zip file downloaded is named as \"eigen-eigen-b3f3d4950030\"</p>\n\n<p>b) Extracted the file to my project folder. </p>\n\n<p>c) Changed the name of the extracted file from \"eigen-eigen-b3f3d4950030\" to \"Eigen3\" (you can choose any name).</p>\n\n<p>d) Inside this folder, you will find other folders such as bench, blas, cmake, debug....</p>\n\n<p>Now you have to add the library files for your project (so that the compiler knows where to look for the required library files).</p>\n\n<p>e) In codeblocks, click on Settings --> Compiler --> Search Directories --> Compiler</p>\n\n<p>Click Add and add the Eigen3 folder (the downloaded and extracted folder which was renamed in previous step 'c').\nOnce added, click on Linker tab (just beside 'Compiler' tab) and add the same path to Eigen3 folder.</p>\n\n<p>f) Now click on Build Options tab, which is found besides 'Search Directories' tab.</p>\n\n<p>g) Tick the \"Explicitly add currently compiling file's directory to compiler search dirs\"\nh) Tick the \"Explicitly add project's top-level directory to compile search dirs\"</p>\n\n<p>i) Click OK.</p>\n\n<p>Now your build should work and the compiler knows how to search for Eigen libraries. </p>\n\n<p>Any issues, just post it here.</p>\n\n<p>Best wishes</p>\n\n<p>Shre</p>\n"}, {"tags": [], "owner": {"reputation": 92, "user_id": 8184481, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rBEk9pGvpls/AAAAAAAAAAI/AAAAAAAAAoQ/HoE0uH6iiKs/photo.jpg?sz=128", "display_name": "Ehsan Panahi", "link": "https://stackoverflow.com/users/8184481/ehsan-panahi"}, "is_accepted": false, "score": 0, "last_activity_date": 1533645083, "last_edit_date": 1533645083, "creation_date": 1533644740, "answer_id": 51726771, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project/51726771#51726771", "title": "How to add Eigen library to c++ project", "body": "<p>in my radio astronomy project i install Eigen by the following command:</p>\n\n<p><code>sudo apt-get install libeigen3-dev</code></p>\n\n<p>my cmake automatically find the eigen header which i used. it is a sample of my header</p>\n\n<pre><code>#include &lt;eigen3/Eigen/Core&gt;\n</code></pre>\n"}], "owner": {"reputation": 684, "user_id": 4750379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/815236821858015/picture?type=large", "display_name": "Mike James Johnson", "link": "https://stackoverflow.com/users/4750379/mike-james-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10225, "favorite_count": 0, "accepted_answer_id": 36609096, "answer_count": 5, "score": 3, "last_activity_date": 1586438236, "creation_date": 1460579412, "question_id": 36608986, "link": "https://stackoverflow.com/questions/36608986/how-to-add-eigen-library-to-c-project", "title": "How to add Eigen library to c++ project", "body": "<p>Probably a dumb / simple question, but I have not been able to find an answer. I have no clue how adding libraries works with CodeBlocks c++. I downloaded the .zip file from <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow\">http://eigen.tuxfamily.org/index.php?title=Main_Page</a> and extracted the files into my directory. How can I use this library now in my project?</p>\n"}, {"tags": ["c++", "boost-graph", "max-flow"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1460579838, "post_id": 36608985, "comment_id": 60814828, "body": "<code>g_</code> is not a local variable, but a <i>member</i> variable. There is a difference."}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 0, "creation_date": 1460580158, "post_id": 36608985, "comment_id": 60815003, "body": "you can make your <code>g_</code> variable static so all instances of your class &quot;share&quot; it. this may help: <a href=\"https://msdn.microsoft.com/en-us/library/79b3xss3.aspx#Anchor_0\" rel=\"nofollow noreferrer\">Static Members</a>"}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "edited": false, "score": 0, "creation_date": 1460580364, "post_id": 36608985, "comment_id": 60815112, "body": "Understand what is local variable, class member and static class member. Making <code>g_</code> simply <code>static</code> will not instantly make your code correct. Why will <code>maxFlowAlgo</code> &quot;return incorrect value after several runs&quot;? I suppose it should be <code>const</code>. You don&#39;t use <code>edge</code> variable inside your loop. Maybe, this edge is intended to be deleted in the beginning of iteration and added in the end?"}, {"owner": {"reputation": 388, "user_id": 4285543, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-1hjlOj5JWxM/AAAAAAAAAAI/AAAAAAAAADc/mOs5vOi4q28/photo.jpg?sz=128", "display_name": "Emerson Xu", "link": "https://stackoverflow.com/users/4285543/emerson-xu"}, "reply_to_user": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "edited": false, "score": 0, "creation_date": 1460591720, "post_id": 36608985, "comment_id": 60819913, "body": "@GeorgeSovetov Thanks. I was thinking delete the edge but it may make boost graph unstable. So I use a workaround by setting the edge capacity to 0. I find the problem happens right after I call the boost max flow algorithm. I use  boykov_kolmogorov_max_flow and  bundle properties for capacity_property_map. It will modify some edge capacities. I don&#39;t see any reason for that. The algorithm shouldn&#39;t modify any graph elements, right?"}, {"owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "edited": false, "score": 0, "creation_date": 1460621455, "post_id": 36608985, "comment_id": 60830921, "body": "@EmersonXu I&#39;ll leave answer."}], "answers": [{"tags": [], "owner": {"reputation": 2989, "user_id": 2890575, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/cf081a960a38e14ed256c34b9495ca8e?s=128&d=identicon&r=PG&f=1", "display_name": "gzh", "link": "https://stackoverflow.com/users/2890575/gzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1460595761, "last_edit_date": 1490005770, "creation_date": 1460595761, "answer_id": 36612074, "question_id": 36608985, "link": "https://stackoverflow.com/questions/36608985/how-to-call-a-function-from-another-class-where-the-function-uses-local-variabl/36612074#36612074", "title": "How to call a function from another class, where the function uses local variable", "body": "<p>It seems you asked a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY Problem</a>.</p>\n\n<p>IF you want to <code>maintains a local variable g_ since we only need one instance</code>, you should use <a href=\"https://sourcemaking.com/design_patterns/singleton/cpp/1\" rel=\"nofollow noreferrer\">Singleton Design Pattern</a>, other than creating instance when you need it.</p>\n"}, {"comments": [{"owner": {"reputation": 388, "user_id": 4285543, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-1hjlOj5JWxM/AAAAAAAAAAI/AAAAAAAAADc/mOs5vOi4q28/photo.jpg?sz=128", "display_name": "Emerson Xu", "link": "https://stackoverflow.com/users/4285543/emerson-xu"}, "edited": false, "score": 0, "creation_date": 1460665361, "post_id": 36617909, "comment_id": 60861728, "body": "Yes. I have solved the problem by constructing a default base graph. Modify it, run maxflow algorithm, restore it, and repeat these three steps for each edge groups. It runs perfect now. Thanks again for your insights."}], "tags": [], "owner": {"reputation": 3853, "user_id": 1833960, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/92d42253747f8ee3a83465dc04126f93?s=128&d=identicon&r=PG", "display_name": "George Sovetov", "link": "https://stackoverflow.com/users/1833960/george-sovetov"}, "is_accepted": false, "score": 1, "last_activity_date": 1460623378, "creation_date": 1460623378, "answer_id": 36617909, "question_id": 36608985, "link": "https://stackoverflow.com/questions/36608985/how-to-call-a-function-from-another-class-where-the-function-uses-local-variabl/36617909#36617909", "title": "How to call a function from another class, where the function uses local variable", "body": "<p>In this case it's OK that edge capacities are changed. </p>\n\n<p>Sometimes algorithms don't modify input data. On other hand, it's better to alter existing data to save resources (memory) and because altered data can make sense. After max flow algorithm is executed, edge capacities are residual capacities; in other words, how much capacity is left in each edge when graph is saturated by flow. At least one of edge will have zero residual capacity; when after second algorithm execution, it will return zero because graph is saturated.</p>\n\n<p>If you want to run max flow algorithm several times, you have to preserve initial graph and copy it each time you run algorithm. Each time in the beginning of loop iteration you have to reconstruct your graph or copy it from preserved.</p>\n\n<p>Since you run algorithm several times, you probably want to run it on different graphs. You probably want to copy graph and set edge capacity to zero.</p>\n"}], "owner": {"reputation": 388, "user_id": 4285543, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh5.googleusercontent.com/-1hjlOj5JWxM/AAAAAAAAAAI/AAAAAAAAADc/mOs5vOi4q28/photo.jpg?sz=128", "display_name": "Emerson Xu", "link": "https://stackoverflow.com/users/4285543/emerson-xu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 2, "answer_count": 2, "score": 1, "last_activity_date": 1460625523, "creation_date": 1460579411, "last_edit_date": 1460625523, "question_id": 36608985, "link": "https://stackoverflow.com/questions/36608985/how-to-call-a-function-from-another-class-where-the-function-uses-local-variabl", "title": "How to call a function from another class, where the function uses local variable", "body": "<p>I have two classes <code>MaxFlow</code> and <code>MinMaxFlow</code>. </p>\n\n<p><code>MaxFlow</code> uses boost graph to create a graph from a network topology:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class MaxFlow {\n public:\n  MaxFlow : g_() { createGraph(); } //constructor\n  void createGraph();\n  void modifyGraph(); // modify the graph to use boost maxflow algorithm\n  int maxFlowAlgo(); // use g_ and some other util local variables\n private:\n  Graph g_;\n  ...   // some other helper containers created during createGraph()\n}\n</code></pre>\n\n<p><code>MaxFlow</code> maintains a local variable <code>g_</code> since we only need one instance to do all the work here.\n<code>MinMaxFlow</code> iterates every edge in the graph to find a minimum max flow if we fail that <code>edge</code> (set capacity to 0):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class MinMaxFlow {\n public:\n  int getMinMaxFlow() {\n    int minMaxFlow = INT_MAX;\n    MaxFlow maxFlowObj; // create a new obj\n    maxFlowObj.modifyGraph(); // I suppose this modify current obj\n    for (auto edge : graph_edges) {\n      // maxFlowAlgo will return incorrect value after several runs\n      int maxFlowVal = maxFlowObj.maxFlowAlgo();\n      int minMaxFlow = std::min(minMaxFlow, maxFlowVal);\n    }\n    return minMaxFlow;\n  }\n}\n</code></pre>\n\n<p>Now the problem is, <code>maxFlowAlgo</code> is based on local variable <code>g_</code> in class <code>MaxFlow</code>, when I create new object <code>maxFlowObj</code> in <code>MinMaxFlow</code>, calling <code>maxFlowObj.maxFlowAlgo()</code> will use its own data, which makes the result unpredictable. \nSo my question is: how can I use the method(like <code>maxFlowAlgo</code>) belongs to <code>MaxFlow</code> in the second class <code>MinMaxFlow</code> if the method uses local variables in <code>MaxFlow</code>?</p>\n\n<p>Update: I have figured out the problem is from <code>boost::boykov_kolmogorov_max_flow</code>, I use bundle properties and pass capacity property map into it, but this algorithm will not only modify the capacity property map, but also my original edge capacity variable! Now the workaround is that I have to store the capacity values before running the algorithm and restore them after it. It's not supposed to modify the original members, right?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1460658238, "post_id": 36608952, "comment_id": 60857496, "body": "How much memory does the GPU have? 475,956,122 columns times 640 rows times (a guess) 4 bytes per element is 1.21845e12 bytes ~= 1135 GB ~= 1.1 TB. I know of no GPU that provides more than 24 GB of on-board memory."}, {"owner": {"reputation": 901, "user_id": 4673476, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Omlfj.jpg?s=128&g=1", "display_name": "black", "link": "https://stackoverflow.com/users/4673476/black"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1460663215, "post_id": 36608952, "comment_id": 60860469, "body": "In fact, the Image has 480 cols; I don&#39;t know why the value at debugging is that high. In my other test program, where this works, the number of cols is also that high."}, {"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 1, "creation_date": 1460663480, "post_id": 36608952, "comment_id": 60860632, "body": "In diagnosing the issue, we can go only by the information that is presented by the asker, which in this case indicates that the allocation requested exceeds the storage capacity for any known GPU and therefore fails. Maybe there is a problem elsewhere in the code that causes this, but without a minimal, buildable and runnable repro code, I don&#39;t see how more assistance can be rendered here. Voting to close."}], "owner": {"reputation": 901, "user_id": 4673476, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/Omlfj.jpg?s=128&g=1", "display_name": "black", "link": "https://stackoverflow.com/users/4673476/black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1483262198, "creation_date": 1460579314, "last_edit_date": 1483262198, "question_id": 36608952, "link": "https://stackoverflow.com/questions/36608952/opencv-cuda-gpumat-not-uploading", "title": "OpenCV CUDA: GpuMat not uploading", "body": "<p>I'm trying to upload to the GPU using CUDA in OpenCV 3.1:</p>\n\n<pre><code>Mat testImg = Mat::zeros(Size(640,480), CV_8UC3);\nGpuMat gpuImg = GpuMat(testImg);\n</code></pre>\n\n<p>In a simple program, that works. But I have a huge project, where there two lines can't be excuted, even at the beginning of the main function. I debugged it and got in <code>gpu_mat.cu</code> until line 222 <code>create(mat.size(), mat.type());</code>:\n[Starting at line 213 in gpu_mat.cu] (Full code of this file: <a href=\"https://github.com/Itseez/opencv/blob/master/modules/core/src/cuda/gpu_mat.cu\" rel=\"nofollow\">https://github.com/Itseez/opencv/blob/master/modules/core/src/cuda/gpu_mat.cu</a>)</p>\n\n<pre><code>/////////////////////////////////////////////////////upload\n\nvoid cv::cuda::GpuMat::upload(InputArray arr) {\n    Mat mat = arr.getMat();\n\n    CV_DbgAssert( !mat.empty() );\n\n    create(mat.size(), mat.type()); //programm goes until here; this function does not return; the program just hangs here\n\n    CV_CUDEV_SAFE_CALL( cudaMemcpy2D(data, step, mat.data, mat.step, cols * elemSize(), rows, cudaMemcpyHostToDevice) ); \n}\n</code></pre>\n\n<p>The value of <code>rows</code> of <code>mat</code> is 640, the value of <code>cols</code> is 480 as it should be. Has someone any solution? I'm nearly falling into despair.</p>\n"}, {"tags": ["c++", "sdl", "pong"], "answers": [{"comments": [{"owner": {"reputation": 386, "user_id": 4158399, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100008351295651/picture?type=large", "display_name": "H&#229;vard Nyg&#229;rd", "link": "https://stackoverflow.com/users/4158399/h%c3%a5vard-nyg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1460623584, "post_id": 36616531, "comment_id": 60832368, "body": "Thanks! Will look into it when i get home :)"}, {"owner": {"reputation": 386, "user_id": 4158399, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100008351295651/picture?type=large", "display_name": "H&#229;vard Nyg&#229;rd", "link": "https://stackoverflow.com/users/4158399/h%c3%a5vard-nyg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1460642556, "post_id": 36616531, "comment_id": 60846938, "body": "Somehow this worked.. Im not sure how tho, Joseph do you care to explain how? :)"}, {"owner": {"reputation": 386, "user_id": 4158399, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100008351295651/picture?type=large", "display_name": "H&#229;vard Nyg&#229;rd", "link": "https://stackoverflow.com/users/4158399/h%c3%a5vard-nyg%c3%a5rd"}, "edited": false, "score": 0, "creation_date": 1460643964, "post_id": 36616531, "comment_id": 60848128, "body": "And, gPongBGSurf is acctually a bmp file... how could i reload the picture instead?"}], "tags": [], "owner": {"reputation": 326, "user_id": 6192933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e97606b02ea1d36442a43b46fccea9a5?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Paul", "link": "https://stackoverflow.com/users/6192933/joseph-paul"}, "is_accepted": true, "score": 1, "last_activity_date": 1460619208, "creation_date": 1460619208, "answer_id": 36616531, "question_id": 36608909, "link": "https://stackoverflow.com/questions/36608909/drawing-multiple-instances-of-the-same-rect-instead-of-moving-it/36616531#36616531", "title": "Drawing multiple instances of the same rect instead of moving it", "body": "<p>My guess is that you forgot to erase the Pong Surface:</p>\n\n<pre><code>Uint32 black= SDL_MapRGBA(gPongBGSurf-&gt;format,0,0,0,255);\nSDL_FillRect(gPongBGSurf, NULL, black);\nSDL_BlitSurface(gPongPlayer, NULL, gPongBGSurf, &amp;gPongPlayerRect);\nSDL_BlitSurface(gPongBGSurf, NULL, gScreenSurface, &amp;gPongRect);\n</code></pre>\n\n<p>For a full example of a SDL2 game with multiple surfaces blitting on top of each other and then onto a screen surface, you can read the small source code of <a href=\"https://bitbucket.org/josephpaul0/rockdodger-ce/src/46a0438e100343dd7b077e8864571e01ddfc18f4/src/rockdodger-ce.c?at=master&amp;fileviewer=file-view-default\" rel=\"nofollow\">Rock Dodger CE</a> which is only a single file.</p>\n"}], "owner": {"reputation": 386, "user_id": 4158399, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/100008351295651/picture?type=large", "display_name": "H&#229;vard Nyg&#229;rd", "link": "https://stackoverflow.com/users/4158399/h%c3%a5vard-nyg%c3%a5rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 36616531, "answer_count": 1, "score": 0, "last_activity_date": 1460619208, "creation_date": 1460579157, "question_id": 36608909, "link": "https://stackoverflow.com/questions/36608909/drawing-multiple-instances-of-the-same-rect-instead-of-moving-it", "title": "Drawing multiple instances of the same rect instead of moving it", "body": "<pre><code>class Pong {\npublic:\n    Pong(int speed) {\n        gSpeed = speed;\n\n        gPongBG = SDL_LoadBMP(\"pongBG.bmp\");\n\n        gPongBGSurf = gPongBG;\n\n        gPongRect.w = 800;\n        gPongRect.h = 460;\n        gPongRect.x = 700;\n        gPongRect.y = 220;\n\n        gPongPlayer = SDL_LoadBMP(\"pongPlayer.bmp\");\n\n        gPongPlayerRect.h = 50;\n        gPongPlayerRect.w = 10;\n\n        gPongPlayerRect.x = 50;\n        gPongPlayerRect.y = 0;\n\n\n    }\n\n    ~Pong() {\n\n\n    }\n\n    void drawPong() {\n        gPongBGSurf = gPongBG;\n        SDL_BlitSurface(gPongBGSurf, NULL, gScreenSurface, &amp;gPongRect);\n        SDL_BlitSurface(gPongPlayer, NULL, gPongBGSurf, &amp;gPongPlayerRect);\n    }\n\n    void movePlayer() {\n        gPongPlayerRect.y++;\n    }\n</code></pre>\n\n<p>The following code makes it so the gPongPlayerRect makes multiple copies of itself, rather than moving it as i planned. Later in the code, i update the main window named gWindow, and the surface of the main window is the wScreenSurface. If i blit the player directly onto the Window surface, it moves, so i guess the problem is that the old gPongBGSurf surface stays even tho its updated. How could i eventually fix this? Thanks!</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1460579426, "post_id": 36608839, "comment_id": 60814609, "body": "I think this is because templates are evaluated at compile time and do not have any constraint checking."}], "answers": [{"comments": [{"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "edited": false, "score": 0, "creation_date": 1460625750, "post_id": 36608988, "comment_id": 60833837, "body": "....sometimes you wish they&#39;d write these specifications in plain English. Apparently the behaviour of OP is intended in these specifications but you&#39;d have to read very carefully, or know from the beginning what it&#39;s all about (i.e. you <i>wrote</i> the specs). It&#39;s amazing they are able to create a working compiler from this at all."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 11, "last_activity_date": 1460579419, "creation_date": 1460579419, "answer_id": 36608988, "question_id": 36608839, "link": "https://stackoverflow.com/questions/36608839/template-class-method-does-not-cause-error-is-this-part-of-the-standard/36608988#36608988", "title": "Template class method does not cause error -- is this part of the standard?", "body": "<p>This is the correct behaviour according to the standard. The definition of <code>foo</code> is not instantiated until used in a context that requires it to exist. Emphasis mine in the below:</p>\n\n<p>C++03, [temp.inst]/1:</p>\n\n<blockquote>\n  <p>The implicit instantiation of a class template specialization causes the implicit\n  instantiation of the declarations, but <strong>not of the definitions</strong> or default arguments, of the class member functions, member classes, static data members and member templates; and it causes the implicit instantiation\n  of the definitions of member anonymous unions. Unless a member of a class template or a member template has been explicitly instantiated or explicitly specialized, the specialization of the member is implicitly\n  instantiated when the specialization is referenced in a context that requires the member definition to exist; ...</p>\n</blockquote>\n\n<p>C++11, [temp.inst]/1 and [temp.inst]/2:</p>\n\n<blockquote>\n  <p>Unless a class template specialization has been explicitly instantiated (14.7.2) or explicitly specialized (14.7.3),\n  the class template specialization is implicitly instantiated when the specialization is referenced in a context\n  that requires a completely-defined object type or when the completeness of the class type affects the semantics of the program. The implicit instantiation of a class template specialization causes the implicit\n  instantiation of the declarations, but <strong>not of the definitions</strong> or default arguments, of the class member functions, member classes, scoped member enumerations, static data members and member templates; ... Unless a member of a class template or a member template has been explicitly instantiated or explicitly\n  specialized, the specialization of the member is implicitly instantiated when the specialization is referenced\n  in a context that requires the member definition to exist; ...</p>\n</blockquote>\n"}], "owner": {"reputation": 7535, "user_id": 956134, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/95f88f7c5f4fac6d14156c0100bdbc4d?s=128&d=identicon&r=PG", "display_name": "math4tots", "link": "https://stackoverflow.com/users/956134/math4tots"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 2, "accepted_answer_id": 36608988, "answer_count": 1, "score": 6, "last_activity_date": 1460579419, "creation_date": 1460578907, "question_id": 36608839, "link": "https://stackoverflow.com/questions/36608839/template-class-method-does-not-cause-error-is-this-part-of-the-standard", "title": "Template class method does not cause error -- is this part of the standard?", "body": "<p>When I compile the following with <code>g++ --std=c++98 -Wall -Werror -Wpedantic Test.cc</code>, there's no error.</p>\n\n<pre><code>template &lt;class T&gt;\nstruct TemplateClass {\n  T *ptr;\n\n  TemplateClass(T *p): ptr(p) {}\n\n  int foo() {\n    return ptr-&gt;bar();\n  }\n};\n\nstruct ExampleClass {\n};\n\nint main() {\n  TemplateClass&lt;ExampleClass&gt; x(new ExampleClass());\n}\n</code></pre>\n\n<p>I expected that the compiler would complain that <code>ExampleClass</code> doesn't implement method <code>bar</code>.</p>\n\n<p>But it looks like it only complains if I actually use the method <code>foo</code>.</p>\n\n<p>Can I rely on this behavior on any C++98 and C++11 compliant compilers?</p>\n\n<p>My understanding of templates before was that whenever a template is instantiated, the entirety of the body is copied with <code>T</code> replaced with the template argument. Is this not how templates work?</p>\n"}, {"tags": ["c++", "pointers", "scope"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1460578843, "post_id": 36608774, "comment_id": 60814279, "body": "This is called a <a href=\"https://en.wikipedia.org/wiki/Dangling_pointer\" rel=\"nofollow noreferrer\">dangling pointer</a>. See questions like <a href=\"http://stackoverflow.com/questions/35877487/dangling-pointer-is-still-accessing-the-memory-value\">this</a> which are already answered on SO."}, {"owner": {"reputation": 2198, "user_id": 1477876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4D58M.jpg?s=128&g=1", "display_name": "Amnon", "link": "https://stackoverflow.com/users/1477876/amnon"}, "edited": false, "score": 1, "creation_date": 1460579381, "post_id": 36608774, "comment_id": 60814584, "body": "The compiler doesn&#39;t produce code that intentionally destroys the content of the memory pointed to by pInt, it&#39;s just that when a goes out of scope, all bets are off as to what will happen to the memory that pInt points to. Perhaps it will turn to garbage due to other operations that will overwrite it, perhaps it won&#39;t - however you should always assume that accessing this memory will not give you what you expect."}], "answers": [{"tags": [], "owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "is_accepted": false, "score": 0, "last_activity_date": 1460578787, "creation_date": 1460578787, "answer_id": 36608805, "question_id": 36608774, "link": "https://stackoverflow.com/questions/36608774/accessing-function-variables-outside-the-function-scope/36608805#36608805", "title": "Accessing function variables outside the function scope", "body": "<p>No, what you're seeing is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>.</p>\n\n<p>Once the <code>fun()</code> function finishes execution, <code>a</code> cease to exist. So, in the <code>main()</code>, any attempt to dereference the pointer, (earlier) pointing to the memory location for <code>a</code>, will invoke UB.</p>\n"}], "owner": {"reputation": 1986, "user_id": 2843583, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5ed69a2177b073c7600828646620a9b1?s=128&d=identicon&r=PG", "display_name": "bergercookie", "link": "https://stackoverflow.com/users/2843583/bergercookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 766, "favorite_count": 0, "closed_date": 1460578817, "answer_count": 1, "score": 0, "last_activity_date": 1460578997, "creation_date": 1460578691, "last_edit_date": 1460578997, "question_id": 36608774, "link": "https://stackoverflow.com/questions/36608774/accessing-function-variables-outside-the-function-scope", "closed_reason": "Duplicate", "title": "Accessing function variables outside the function scope", "body": "<p>I am learning cpp for a month now and I always thought that variables inside functions, initialized on the stack, cannot be accessed from outside the function scope. However this doesn't seem to be the case when I use a global pointer to a member of the function like in the following case:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid fun(void); int *pInt;\n\nint main(int argc, char **argv) {\n\n  pInt = 0;   \n  fun();   \n  std::cout &lt;&lt; \"*pInt = \" &lt;&lt; *pInt &lt;&lt; std::endl;\n  return 0; \n}\n\nvoid fun(void) {   \n  int a = 3;   \n  pInt = &amp;a; \n}\n</code></pre>\n\n<p>Compiling and running this doesn't produce any error and indeed prints out the expected result.\nWhy is this happening? Isn't \"a\" suppose to get out of scope (and thus its value) after the function fun is out of scope? </p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1460578985, "post_id": 36608722, "comment_id": 60814374, "body": "Just partially specialize for reference like <a href=\"http://coliru.stacked-crooked.com/a/9186f74f51a87f12\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1460581098, "post_id": 36608722, "comment_id": 60815486, "body": "@PiotrSkotnicki Thank you, that works. But why doesn&#39;t <code>enable_if</code> work in this case?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1460581334, "post_id": 36608722, "comment_id": 60815614, "body": "There ain&#39;t no such thing as overloaded classes, only overloaded functions. You can&#39;t define two class templates with the same name, <code>enable_if</code> or no <code>enable_if</code>"}], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1460578578, "creation_date": 1460578578, "question_id": 36608722, "link": "https://stackoverflow.com/questions/36608722/instantiate-overloaded-class-templates-depending-on-parameter-type", "title": "Instantiate overloaded class templates depending on parameter type", "body": "<p>I have a <code>Container&lt;T&gt;</code> class that holds elements of type <code>T</code>. <code>T</code> may or may not be a reference type, and I want to treat them differently (i.e., a <code>Container&lt;int&gt;</code> and a <code>Container&lt;const int &amp;&gt;</code> have different implementations). I've tried something like</p>\n\n<pre><code>template&lt;typename T, typename = typename std::enable_if&lt;std::is_reference&lt;T&gt;::value&gt;::type&gt;\nstruct Container {\n    ...\n};\n\ntemplate&lt;typename T, typename = typename std::enable_if&lt;!std::is_reference&lt;T&gt;::value&gt;::type&gt;\nstruct Container {\n    ...\n};\n</code></pre>\n\n<p>But the compiler complains about redefinition of <code>Container</code>. Why is <code>enable_if</code> not working here? Can I work around it?</p>\n"}, {"tags": ["c++", "arrays", "class", "destructor", "operator-keyword"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460578556, "post_id": 36608670, "comment_id": 60814144, "body": "Think about what <code>name = rhs.name;</code> does.  Does this copy the data or just a pointer to the data?"}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1460578848, "post_id": 36608670, "comment_id": 60814280, "body": "You&#39;re doing a shallow copy instead of a deep copy. Why are you using <code>char[]</code> instead of <code>std::string</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1460578768, "post_id": 36608738, "comment_id": 60814233, "body": "Deleting twice is bad, but so is using a pointer that&#39;s already been deleted."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1460578825, "post_id": 36608738, "comment_id": 60814269, "body": "@MarkRansom, sure thing - I was just trying to custom-tailor to the issue OP seems to be having - but you are correct, it&#39;s better to highlight this as well."}, {"owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1460579002, "post_id": 36608738, "comment_id": 60814385, "body": "@SergeyA so what I understood is that when I use the =, the names point to the same name, and when I delete one, both point to nothing? I have to make a name with the exact size it is entered, so i want to do it dynamically, unfortunately we haven&#39;t learned std::string yet, can u suggest something different? :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1460579024, "post_id": 36608738, "comment_id": 60814400, "body": "@user5692938, yes."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460579272, "post_id": 36608738, "comment_id": 60814532, "body": "Why can&#39;t you use std::string ?"}, {"owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460579359, "post_id": 36608738, "comment_id": 60814572, "body": "@Ceros because we are not allowed to use what we haven&#39;t studied yet"}, {"owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1460579557, "post_id": 36608738, "comment_id": 60814670, "body": "Right, I will not say name = rhs.name but strcopy their value instead. Thank you all :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1460579605, "post_id": 36608738, "comment_id": 60814705, "body": "@user5692938, have you learned <code>strcpy</code>? If you haven&#39;t, than you should just quit that course."}, {"owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "edited": false, "score": 0, "creation_date": 1460579691, "post_id": 36608738, "comment_id": 60814756, "body": "Yes, we are using &lt;cstring&gt;, learning clases atm, think soon we will start using std::string"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1460578784, "last_edit_date": 1460578784, "creation_date": 1460578621, "answer_id": 36608738, "question_id": 36608670, "link": "https://stackoverflow.com/questions/36608670/destructor-of-my-class-doing-wrong-c/36608738#36608738", "title": "Destructor of my class doing wrong? C++", "body": "<p>You have a problem right here:</p>\n\n<pre><code>Egg&amp; Egg::operator=(const Egg&amp; rhs)\n{\n    name = rhs.name;\n    ...\n}\n\nEgg::~Egg()\n{\n    ...\n    delete[] name;\n}\n</code></pre>\n\n<p>After </p>\n\n<pre><code>Egg egg1, egg2;\negg1 = egg2;\n</code></pre>\n\n<p>you have <code>name</code> as the same value in both <code>egg1</code> and <code>egg2</code>. When destructors of them are going to be called, it is going to be deleted twice - and this is a straight road to hell.</p>\n\n<p>Here is another example, slightly more complex:</p>\n\n<pre><code>Egg egg1;\n{\n    Egg egg2;\n    egg2 = egg1;\n}         \nstd::cout &lt;&lt; egg1.getName() &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>In this second example, once <code>egg2</code> leaves it's scope, <code>name</code> get's deleted - and it's the same <code>name</code> it shares with <code>egg1</code>. As a result, <code>egg1.getName()</code> will attempt to use a pointer which was already deleted, and this again is something good programms do not engage with. </p>\n\n<p>You are likely to have the same issue with your copy constructor, and all over your code, and the solution is to stop doing whatever you are doing with your <code>name</code> and make it of a proper type - judging by the name, <code>std::string</code> seems appropriate.</p>\n"}], "owner": {"reputation": 229, "user_id": 5692938, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-ry5d5RmeCPg/AAAAAAAAAAI/AAAAAAAAAB4/IPsjmtI6K9Q/photo.jpg?sz=128", "display_name": "Petar D.", "link": "https://stackoverflow.com/users/5692938/petar-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460578784, "creation_date": 1460578425, "last_edit_date": 1460578560, "question_id": 36608670, "link": "https://stackoverflow.com/questions/36608670/destructor-of-my-class-doing-wrong-c", "title": "Destructor of my class doing wrong? C++", "body": "<p>I have the class <code>Egg</code>, where i have predefined constructors. Here is how my operator = and destructor look like:</p>\n\n<pre><code>Egg&amp; Egg::operator=(const Egg&amp; rhs)\n{\n    if (this == &amp;rhs)\n        return *this;\n\n    size = rhs.size;\n    name = rhs.name;\n\n    return *this;\n}\n\nEgg::~Egg()\n{\n\n    size = 0;\n    delete[] name;\n}\n</code></pre>\n\n<p>And what I want to do is a dynamic array of Eggs, which every time I create a new Egg, it extends. Here's how I do it:</p>\n\n<pre><code>Egg* eggArr = NULL;\nvoid createEgg()\n{\n    Egg * temp = eggArr;\n    eggArr = new (std::nothrow) Egg[eggsCnt + 1];\n\n    if (!eggArr)\n    {\n        std::cerr &lt;&lt; \"No memory!\\n\";\n        return;\n    }\n\n    for (size_t i = 0; i &lt; eggsCnt; ++i)\n    {\n        eggArr[i] = temp[i];\n        std::cout &lt;&lt; eggArr[i].getName();\n    }\n\n\n\n    eggArr[basketCnt].setName(eggsCnt, eggArr);\n\n\n   eggsCnt++;\n   delete[] temp; //problematic line\n} \n</code></pre>\n\n<p>If i remove delete[] temp, code works perfectly, but there is a memory leak.\nWhen it stays on the program, for some reason my eggArr is being also destructed, and then when i try to reach some of it's members they are undefined. Is the problem in my destructor, operator=, or somewhere else?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 1591, "user_id": 420446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/406a84b65837087fd511c333fa2a389e?s=128&d=identicon&r=PG", "display_name": "willll", "link": "https://stackoverflow.com/users/420446/willll"}, "edited": false, "score": 2, "creation_date": 1460578198, "post_id": 36608560, "comment_id": 60813917, "body": "Student&#39;s constructor does not copy testScores into Student&#39;s testScores."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1460578345, "post_id": 36608560, "comment_id": 60814013, "body": "Unrelated, but you shouldn&#39;t routinely use <code>new</code>. <code>Student s(firstName, lastName, id, scores);</code> is fine."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460578368, "post_id": 36608560, "comment_id": 60814026, "body": "On a side note, forget about HackerRank. I recently looked into those challenges out of curiosity, they are simply terrible."}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1460578695, "post_id": 36608560, "comment_id": 60814207, "body": "I didn&#39;t write the <code>main()</code> function that includes <code>new</code> so you&#39;ll have to let them know ;) Any suggestions besides HR? I&#39;m trying to learn a bit of algorithms, data structures, c++, python, java, and some probability programming over the summer. Their domains list includes all these so I thought it would be a good resource."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460579177, "post_id": 36608560, "comment_id": 60814479, "body": "If you choose different parameter names, you won&#39;t have to use the <code>this-&gt;</code> syntax."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460579342, "post_id": 36608560, "comment_id": 60814563, "body": "And you don&#39;t have to do <i>either</i> if you fully use a member-initializer list."}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1460579574, "post_id": 36608560, "comment_id": 60814679, "body": "Not sure what a member-initializer list is. It gave me the <code>Person{}</code> and <code>main()</code> definitions and they&#39;re not editable, but I wouldn&#39;t mind knowing what that is for the future."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1460579657, "post_id": 36608560, "comment_id": 60814732, "body": "Why are you trying to write C++ before learning C++? That makes no sense. Pick up a good C++ book and <i>learn</i>!"}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1460579862, "post_id": 36608560, "comment_id": 60814841, "body": "I&#39;m in an MSEE program struggling in some courses due to my lack of programming knowledge and I have a very short amount of time to catch up. I don&#39;t have time to read C++ books before even starting to attempt problems. I&#39;m trying to do HackerRank as a sort of crash course. I usually learn better by example than by theory anyway."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 4, "last_activity_date": 1460579595, "last_edit_date": 1460579595, "creation_date": 1460579181, "answer_id": 36608915, "question_id": 36608560, "link": "https://stackoverflow.com/questions/36608560/beginner-c-inheritance/36608915#36608915", "title": "Beginner C++ Inheritance", "body": "<p>The problem is that you give to your constructor the scores that you've read from the console:  </p>\n\n<pre><code> Student* s = new Student(firstName, lastName, id, scores);\n</code></pre>\n\n<p>Unfortunately, in your class, you don't use it to initialize the scores of the Student object:  </p>\n\n<pre><code>Student(string firstName, string lastName, int id, vector&lt;int&gt; testScores)\n       : Person(firstName,lastName, id) \n{};   // ouch testScores is lost\n</code></pre>\n\n<p>Just ccopy construct your sutdent's vector like this:</p>\n\n<pre><code>Student(string firstName, string lastName, int id, vector&lt;int&gt; testScores)\n       : Person(firstName,lastName, id), testScores(testScores) \n{};   \n</code></pre>\n\n<h2>Other remarks not related to your issue</h2>\n\n<p>If you create an object with <code>new</code>, you should think of <code>delete</code>-ing it somewhere (later you'll certainly learn about smart poitners like unique_ptr or shared_ptr, which will take care for you.) </p>\n\n<p>You could avoid the <code>this-&gt;</code>  in <code>Person</code>'s constructor, using the mem-initializer as you did in <code>Student</code>: </p>\n\n<pre><code>   Person(string firstName, string lastName, int identification)\n       : firstName(firstName), lastName(lastName), id(identification)\n   {  // this code starts once all the members are constructed\n   }\n</code></pre>\n"}], "owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 36608915, "answer_count": 1, "score": 1, "last_activity_date": 1460579595, "creation_date": 1460578053, "last_edit_date": 1460578204, "question_id": 36608560, "link": "https://stackoverflow.com/questions/36608560/beginner-c-inheritance", "title": "Beginner C++ Inheritance", "body": "<p>I have a small amount of experience with C, but zero experience with OOP and am trying to solve a HackerRank problem in C++ on inheritance. I think I messed up somewhere in how the derived class is supposed to be defined because my <code>average</code> variable is not calculating properly. Also I'm not even sure how to print a test case to debug because when I add a <code>cout</code> statement to <code>calculate()</code> it doesn't do anything. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n// given this definition  \nclass Person{\n    protected:\n        string firstName;\n        string lastName;\n        int id;\n    public:\n        Person(string firstName, string lastName, int identification){\n            this-&gt;firstName = firstName;\n            this-&gt;lastName = lastName;\n            this-&gt;id = identification;\n        }\n        void printPerson(){\n            cout&lt;&lt; \"Name: \"&lt;&lt; lastName &lt;&lt; \", \"&lt;&lt; firstName &lt;&lt;\"\\nID: \"&lt;&lt; id &lt;&lt; \"\\n\"; \n        }\n\n};\n\n// this is what I'm supposed to be creating\nclass Student :  public Person{\n    private:\n        vector&lt;int&gt; testScores;  \n    public:\n    Student(string firstName, string lastName, int id, vector&lt;int&gt; testScores) : Person(firstName,lastName, id) \n    {};\n\n    char calculate(){\n        double average = 0;\n        for (int i = 0; i &lt; testScores.size(); i++){\n            average += testScores[i];\n            cout &lt;&lt; average;\n        }\n        average = average / testScores.size();\n            if ((average &gt;= 90) &amp;&amp; (average &lt;= 100))\n                return 'O';\n            else if ((average &gt;= 80) &amp;&amp; (average &lt; 90))\n                return 'E';\n            else if ((average &gt;= 70) &amp;&amp; (average &lt; 80))\n                return 'A';\n            else if ((average &gt;= 55) &amp;&amp; (average &lt; 70))\n                return 'P';\n            else if ((average &gt;= 40) &amp;&amp; (average &lt; 55))\n                return 'D';\n            else if (average &lt; 40)\n                return 'T';\n            else \n                return 'X'; // always returns this??\n    }\n\n};\n\n// also given this main\nint main() {\n    string firstName;\n    string lastName;\n    int id;\n    int numScores;\n    cin &gt;&gt; firstName &gt;&gt; lastName &gt;&gt; id &gt;&gt; numScores;\n    vector&lt;int&gt; scores;\n    for(int i = 0; i &lt; numScores; i++){\n        int tmpScore;\n        cin &gt;&gt; tmpScore;\n        scores.push_back(tmpScore);\n    }\n    Student* s = new Student(firstName, lastName, id, scores);\n    s-&gt;printPerson();\n    cout &lt;&lt; \"Grade: \" &lt;&lt; s-&gt;calculate() &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "for-loop", "constants", "compiler-optimization"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1460578132, "post_id": 36608509, "comment_id": 60813871, "body": "One would hope that the compiler optimizes this in both cases.  There is really one one way to find out though.  Compile it and check the assembly."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1460578138, "post_id": 36608509, "comment_id": 60813876, "body": "Depends. Do you pass the address of <code>v</code> to a function in the loop? If so, is the function in a different translation unit? If so, are link-time optimizations enabled?"}, {"owner": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "edited": false, "score": 0, "creation_date": 1460578230, "post_id": 36608509, "comment_id": 60813932, "body": "In my real program, v is one of several variables set by reference by one function. It is never used inside of the loop. I don&#39;t know how to check compiled code."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1460578340, "post_id": 36608509, "comment_id": 60814009, "body": "Assuming the comment &quot;don&#39;t use v&quot; isn&#39;t lying, any remotely-half-baked optimizer will examine <code>v</code> usage in the first example, see the expression <code>v-5</code> never changes because <code>v</code> never changes, nor is put in a position where it <i>may</i> change, and perform the computation <i>once</i>. If it didn&#39;t your optimizer sucks. Compile to asm and check the instructions if you&#39;re really worried about it."}, {"owner": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1460578462, "post_id": 36608509, "comment_id": 60814085, "body": "@WhozCraig I&#39;ll see if I can figure out how to compile to asm. (And understand the result.) I&#39;m mostly curious, more than worried. I was asked to write highly-efficient code and I&#39;m not sure which is the most efficient. Setting the value outside of the loop or doing it like this. In any case, I want to be able to back up my decision. For now, I&#39;m using GCC, but in the end, it will be run on VC++. I don&#39;t know if VC++ is half-baked."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460578735, "post_id": 36608509, "comment_id": 60814217, "body": "@eje211I hate that kind of mandate.  Code should be written to be clear and maintainable.  After that if you profile it and find the performance is not acceptable then you look at where the bottle necks our and see if you can fix them.  I am not a big fan of pre-optimizations."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1460579036, "post_id": 36608509, "comment_id": 60814404, "body": "What is this &quot;C/C++&quot; of which you speak?"}, {"owner": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1460580869, "post_id": 36608509, "comment_id": 60815382, "body": "@LightnessRacesinOrbit It&#39;s a low-level operation that could work in either. In C++, I actually define setV as <code>void setV(int &amp; v)</code>, which is not possible in pure C, but the loop syntax is common to both."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1460626356, "post_id": 36608509, "comment_id": 60834258, "body": "@eje211: The answer may be completely different between the two (and passing a reference rather than a pointer in particular could make a huge difference to optimisation opportunities!). Please ask about one language at a time."}], "answers": [{"comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1460579456, "post_id": 36608790, "comment_id": 60814622, "body": "Keep in mind if the compiler isn&#39;t using whole program optimization, it <i>can&#39;t</i> optimize away the evaluation in the first case because it doesn&#39;t know that <code>v</code> isn&#39;t aliased away in <code>setV</code> and mutated in <code>do_something</code>."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1460579656, "post_id": 36608790, "comment_id": 60814728, "body": "@MarkB v is local to the function. There is no legitimate access to v from do_something (which takes its argument by value) so the compiler is free to assume no aliasing, as it does in test2()."}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1460579759, "post_id": 36608790, "comment_id": 60814786, "body": "<code>setV</code> gets the address of the local <code>v</code> and sticks it in <code>global_v_ptr</code>. Then <code>do_something</code> accesses <code>v</code> through <code>*global_v_ptr</code> and updates the local variable legally."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1460579962, "post_id": 36608790, "comment_id": 60814902, "body": "@MarkB ah right, so in test2 were proving to the compiler that there is no causal relationship between the call and the end of loop condition. That in itself is probably a winning argument for using the extra variable in the second form."}, {"owner": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1460580595, "post_id": 36608790, "comment_id": 60815242, "body": "If you are going to go to the trouble of adding <code>const int cv = v;</code> and iterating while <code>i &lt; cv-5</code>, why not set cv=v-5 and interate while <code>i &lt; cv</code> ? As a code maintainer, if I see math inside the for-construct it would imply to me that there is a possibility that one (or more) of the variable(s) in that expression MIGHT change somewhere in the loop, either directly of as a side effect of a function call."}, {"owner": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "reply_to_user": {"reputation": 4046, "user_id": 4971422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4abf51a937ddda51cc6813445605c50?s=128&d=identicon&r=PG&f=1", "display_name": "FredK", "link": "https://stackoverflow.com/users/4971422/fredk"}, "edited": false, "score": 0, "creation_date": 1460580731, "post_id": 36608790, "comment_id": 60815305, "body": "@FredK Well, the question is less about what&#39;s the best solution and more about how it works. In my real code, I did <code>v -= 5</code>, because <code>v</code> was never used after the  <code>while</code> loop. But I don&#39;t want to adopt the attitude of &quot;it works; I don&#39;t care how.&quot; If I just do <code>v -= 5</code>, then I don&#39;t understand the language any better."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "edited": false, "score": 0, "creation_date": 1460581992, "post_id": 36608790, "comment_id": 60815984, "body": "@eje211 this was an interesting question for an unexpected reason. It&#39;s more a question of the compiler avoiding the obtuse case of an unintended aliasing of v. If the compiler can prove that this won&#39;t happen (version 2) then we get better code. The lesson here is to be more concerned with eliminating aliasing than doing the compilers job for it. Making the copy cv actually presented the biggest optimisation (elision of redundant memory fetches). Interesting eh?"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 4, "last_activity_date": 1460645439, "last_edit_date": 1592644375, "creation_date": 1460578741, "answer_id": 36608790, "question_id": 36608509, "link": "https://stackoverflow.com/questions/36608509/in-c-c-arithmetic-operation-inside-of-for-statement-arguments/36608790#36608790", "title": "In C/C++ arithmetic operation inside of for statement arguments", "body": "<h2>Edit:</h2>\n<p>This was an interesting question for an unexpected reason. It's more a question of the compiler avoiding the obtuse case of an unintended aliasing of <code>v</code>. If the compiler can prove that this won't happen (version 2) then we get better code.</p>\n<p>The lesson here is to be more concerned with eliminating aliasing than trying to do the optimiser's job for it.</p>\n<p>Making the copy cv actually presented the biggest optimisation (elision of redundant memory fetches), even though at a first glance it would appear to be (slightly) less efficient.</p>\n<h2>original answer and demo:</h2>\n<p>Let's see:</p>\n<p>given:</p>\n<pre><code>extern void setV(int*);\nextern void do_something(int i);\n\nvoid test1()\n{\n    int v;\n    setV(&amp;v);\n    for (int i = 0; i &lt; v - 5; i++) {\n    // Do stuff here, but don't use v.\n      do_something(i);\n    }\n}\n\n\nvoid test2()\n{\n    int v;\n    setV(&amp;v);\n    const int cv = v;\n    for (int i = 0; i &lt; cv - 5; i++) {\n      // Do stuff here. Changing cv is actually impossible.\n      do_something(i);\n    }  \n}\n</code></pre>\n<p>compile on gcc5.3 with <code>-x c++ -std=c++14 -O2 -Wall</code></p>\n<p>gives:</p>\n<pre><code>test1():\n        pushq   %rbx\n        subq    $16, %rsp\n        leaq    12(%rsp), %rdi\n        call    setV(int*)\n        cmpl    $5, 12(%rsp)\n        jle     .L1\n        xorl    %ebx, %ebx\n.L5:\n        movl    %ebx, %edi\n        addl    $1, %ebx\n        call    do_something(int)\n        movl    12(%rsp), %eax\n        subl    $5, %eax\n        cmpl    %ebx, %eax\n        jg      .L5\n.L1:\n        addq    $16, %rsp\n        popq    %rbx\n        ret\ntest2():\n        pushq   %rbp\n        pushq   %rbx\n        subq    $24, %rsp\n        leaq    12(%rsp), %rdi\n        call    setV(int*)\n        movl    12(%rsp), %eax\n        cmpl    $5, %eax\n        jle     .L8\n        leal    -5(%rax), %ebp\n        xorl    %ebx, %ebx\n.L12:\n        movl    %ebx, %edi\n        addl    $1, %ebx\n        call    do_something(int)\n        cmpl    %ebp, %ebx\n        jne     .L12\n.L8:\n        addq    $24, %rsp\n        popq    %rbx\n        popq    %rbp\n        ret\n</code></pre>\n<p>The second form is better on this compiler.</p>\n"}], "owner": {"reputation": 2383, "user_id": 313273, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/62baf28829b3c606ce4682924b8f427b?s=128&d=identicon&r=PG", "display_name": "eje211", "link": "https://stackoverflow.com/users/313273/eje211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 36608790, "answer_count": 1, "score": 2, "last_activity_date": 1460645439, "creation_date": 1460577936, "last_edit_date": 1460578179, "question_id": 36608509, "link": "https://stackoverflow.com/questions/36608509/in-c-c-arithmetic-operation-inside-of-for-statement-arguments", "title": "In C/C++ arithmetic operation inside of for statement arguments", "body": "<p>Let's say I have this code:</p>\n\n<pre><code>int v;\nsetV(&amp;v);\nfor (int i = 0; i &lt; v - 5; i++) {\n  // Do stuff here, but don't use v.\n}\n</code></pre>\n\n<p>Will the operation <code>v - 5</code> be run every time or will a modern compiler be smart enough to store it once and never run it again?</p>\n\n<p>What if I did this:</p>\n\n<pre><code>int v;\nsetV(&amp;v);\nconst int cv = v;\nfor (int i = 0; i &lt; cv - 5; i++) {\n  // Do stuff here. Changing cv is actually impossible.\n}\n</code></pre>\n\n<p>Would the second style make a difference?</p>\n"}, {"tags": ["c++", "decltype"], "answers": [{"comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1461835657, "post_id": 36608577, "comment_id": 61383551, "body": "The second is also SFINAE-friendly"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1461836200, "post_id": 36608577, "comment_id": 61383956, "body": "@PiotrSkotnicki Would you mind to give some explanations? Why the first one is not SFINAE-friendly?"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "reply_to_user": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1461842328, "post_id": 36608577, "comment_id": 61388201, "body": "@songyuanyao the expression in a trailing return type serves as an expression SFINAE; if it&#39;s ill-formed, the overload is excluded from the set of candidates. this does not hold for <code>auto</code> return type deduction (the expression in a return statement is not inspected during overload resolution)"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1461842427, "post_id": 36608577, "comment_id": 61388279, "body": "@PiotrSkotnicki Thanks!"}], "tags": [], "owner": {"reputation": 38108, "user_id": 6610, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/635c3ea0c7b8c37ef45744b6e66dd263?s=128&d=identicon&r=PG", "display_name": "xtofl", "link": "https://stackoverflow.com/users/6610/xtofl"}, "is_accepted": false, "score": 2, "last_activity_date": 1460578118, "creation_date": 1460578118, "answer_id": 36608577, "question_id": 36608460, "link": "https://stackoverflow.com/questions/36608460/decltype-confusing-is-there-any-need/36608577#36608577", "title": "decltype confusing is there any need", "body": "<p>The first way didnt work before c++14, introducing return type deduction.  That is when you need the second form.</p>\n"}], "owner": {"reputation": 457, "user_id": 3798283, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/395e4f1b43ea999f5f6d41ee21bdf52d?s=128&d=identicon&r=PG&f=1", "display_name": "user3798283", "link": "https://stackoverflow.com/users/3798283/user3798283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1461835323, "creation_date": 1460577779, "last_edit_date": 1461835323, "question_id": 36608460, "link": "https://stackoverflow.com/questions/36608460/decltype-confusing-is-there-any-need", "title": "decltype confusing is there any need", "body": "<p>// In which case the first pice of code will fail and \n// I need to switch to second piece of  code </p>\n\n<pre><code> template&lt;typename A, typename B&gt;     // 1\n auto add(A const&amp; a, B const&amp; b) { return a + b; }\n\n template&lt;typename A, typename B&gt;     // 2\n auto add(A const&amp; a, B const&amp; b) -&gt; decltype(a + b) { return a + b; }\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460577386, "post_id": 36608321, "comment_id": 60813451, "body": "What&#39;s the error message?"}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1460577395, "post_id": 36608321, "comment_id": 60813460, "body": "You need to describe the error you are getting and/or how it&#39;s not working."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460577601, "post_id": 36608321, "comment_id": 60813571, "body": "Why people who are in <b>college</b> already don&#39;t understand that when they ask &#39;why do I have a problem&#39; they need to describe the problem as well? Is school education system totally failing?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460577698, "post_id": 36608321, "comment_id": 60813618, "body": "@SergeyA, the art/skill of communication fails many a people. It must be a hard skill to teach."}, {"owner": {"reputation": 123, "user_id": 5931089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/958u1.jpg?s=128&g=1", "display_name": "Karlyr", "link": "https://stackoverflow.com/users/5931089/karlyr"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460577829, "post_id": 36608321, "comment_id": 60813690, "body": "@SergeyA it&#39;s not only communication skills lacking, it&#39;s just that learning programming is about repetition. It&#39;s just like any language (french, english, etc), you read a sentence, you might understand it. But phrasing a proper sentence doesn&#39;t always come as easily."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1460577844, "post_id": 36608321, "comment_id": 60813696, "body": "It works fine when everything is one file. <a href=\"http://ideone.com/A9cwvp\" rel=\"nofollow noreferrer\">ideone.com/A9cwvp</a>. I don&#39;t see why it wouldn&#39;t work with multiple files. Of course, you haven&#39;t described what makes you think that your code isn&#39;t working."}, {"owner": {"reputation": 121, "user_id": 6100911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oeu4rr6LcqI/AAAAAAAAAAI/AAAAAAAAACA/5mzpHwjhHfE/photo.jpg?sz=128", "display_name": "Carafini", "link": "https://stackoverflow.com/users/6100911/carafini"}, "edited": false, "score": 0, "creation_date": 1460577888, "post_id": 36608321, "comment_id": 60813728, "body": "yep I also ran in one unique file, as is, and there is no problem at all."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1460578157, "post_id": 36608321, "comment_id": 60813890, "body": "Your program contains at least four files, and you haven&#39;t shown, &quot;Etapes.hpp&quot;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460578250, "post_id": 36608321, "comment_id": 60813944, "body": "Remove <code>using namespace std;</code> from your <code>Group.hpp</code> header file since nothing in the header file uses symbols in the <code>std</code> namespace.  Similarly, you can eliminate the <code>#includes</code> too.  Maybe move this stuff to the source file."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460578313, "post_id": 36608321, "comment_id": 60813987, "body": "A better coding practice is to list the identifiers you are using from <code>std</code>, such as <code>using std::cout;</code> rather than the all inclusive <code>using namespace std;</code>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460578403, "post_id": 36608321, "comment_id": 60814052, "body": "Save yourself some typing, stop with the <code>this-&gt;</code> syntax.  Access the member variables and methods directly.  The more you type, the high possibility of injecting defects into your code (especially typos)."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1467323064, "post_id": 36608321, "comment_id": 63698600, "body": "@ThomasMatthews Even worse, the unused <code>using</code> can become <i>very</i> used, for it leaks into any other translation unit that <code>#include</code>s the header, thus potentially conflicting with names elsewhere and causing extreme headaches. Hence why using <code>using</code> in headers at global scope is routinely discouraged. (I say &quot;global scope&quot; because I&#39;m sure <code>using</code> can be useful in template functions.) [all wordplay intended]"}], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 4, "creation_date": 1460577658, "post_id": 36608383, "comment_id": 60813599, "body": "It&#39;s a bit more severe than &quot;don&#39;t need to&quot;. its an instant memory leak"}, {"owner": {"reputation": 1020, "user_id": 4304120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc7c00d9ea3a92baac5b6927343dba?s=128&d=identicon&r=PG&f=1", "display_name": "Marian Spanik", "link": "https://stackoverflow.com/users/4304120/marian-spanik"}, "edited": false, "score": 3, "creation_date": 1460577666, "post_id": 36608383, "comment_id": 60813601, "body": "<code>listGroup.push_back(Group(2.2,5));</code> should work as well."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460578242, "post_id": 36608383, "comment_id": 60813939, "body": "While this is, indeed, correct, it doesn&#39;t answer the question at hand, and as such, doesn&#39;t deserve to be an answer on it&#39;s own (it could be added to an answer or put as comment)."}, {"owner": {"reputation": 2469, "user_id": 778117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cw2EQ.jpg?s=128&g=1", "display_name": "Fatih BAKIR", "link": "https://stackoverflow.com/users/778117/fatih-bakir"}, "edited": false, "score": 0, "creation_date": 1460578495, "post_id": 36608383, "comment_id": 60814104, "body": "Even better, use <code>listGroup.emplace_back(2.2, 5);</code>  However, this answer doesn&#39;t explain why the OP&#39;s initial code is wrong, since although the memory leak, both lines are effectively equivalent."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460578982, "post_id": 36608383, "comment_id": 60814371, "body": "@SergeyA: What is the answer then?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460579084, "post_id": 36608383, "comment_id": 60814434, "body": "@FrankPuffer, I do not know, because OP didn&#39;t tell us what the problem is."}, {"owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "edited": false, "score": 0, "creation_date": 1460579228, "post_id": 36608383, "comment_id": 60814509, "body": "He wrote &quot;i don&#39;t understand why I can&#39;t get my value from a vector&quot; and I think my answer explains the main reason."}], "tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": true, "score": 0, "last_activity_date": 1460577901, "last_edit_date": 1460577901, "creation_date": 1460577551, "answer_id": 36608383, "question_id": 36608321, "link": "https://stackoverflow.com/questions/36608321/cant-read-object-in-vector-in-c/36608383#36608383", "title": "Can&#39;t read object in vector in C++", "body": "<p>Instead of</p>\n\n<pre><code>listGroup.push_back(*new Group(2.2,5));\n</code></pre>\n\n<p>just use </p>\n\n<pre><code>listGroup.push_back(Group(2.2,5));\n</code></pre>\n\n<p>One of the big advantages of STL containers it that they encapsulate dynamic memory allocation.</p>\n"}], "owner": {"reputation": 65, "user_id": 4909144, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/45054e98d6ddc4b0795c64d698c8e35f?s=128&d=identicon&r=PG&f=1", "display_name": "zaafrani", "link": "https://stackoverflow.com/users/4909144/zaafrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1460587738, "accepted_answer_id": 36608383, "answer_count": 1, "score": -1, "last_activity_date": 1460577901, "creation_date": 1460577341, "question_id": 36608321, "link": "https://stackoverflow.com/questions/36608321/cant-read-object-in-vector-in-c", "closed_reason": "Not suitable for this site", "title": "Can&#39;t read object in vector in C++", "body": "<p>I have a problem i don't understand why I can't get my value from a vector : </p>\n\n<p>And  I think the error is i about how i use my vector.</p>\n\n<p>i have 3 files : </p>\n\n<p>the Header of my class Group</p>\n\n<p>Group.hpp </p>\n\n<pre><code>#ifndef Group_hpp\n#define Group_hpp\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include \"Etapes.hpp\"\nusing namespace std;\n\n\nclass Group{\n\n    float coefficiant;\n    int note;\n\n\npublic:\n    Group(float coefficiant,int note);\n    float getCoefficiant();\n    int getNote();\n\n\n};\n\n\n#endif /* Group_hpp */\n</code></pre>\n\n<p>Group.cpp (where I defined the content of my class)</p>\n\n<pre><code>#include \"Group.hpp\"\n\nGroup::Group(float coefficiant,int note){\n    this-&gt;coefficiant = coefficiant;\n    this-&gt;note = note;\n}\n\nfloat Group::getCoefficiant(){\n    return this-&gt;coefficiant;\n}\n\nint Group::getNote(){\n    return this-&gt;note;\n}\n</code></pre>\n\n<p>and the main :  Where I execute my class.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Etapes.hpp\"\n#include \"Group.hpp\"\nusing namespace std;\nint main(int argc, const char * argv[]) {\n\n    vector&lt;Group&gt; listGroup;\n    listGroup.push_back(*new Group(2.2,5));\n\n    for(int i = 0;i&lt;listGroup.size();i++){\n        cout&lt;&lt;listGroup[i].getCoefficiant()&lt;&lt;endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I am really lock on this class.</p>\n\n<p>Thank you </p>\n"}, {"tags": ["c++", "build", "linker", "visual-studio-2015"], "comments": [{"owner": {"reputation": 3046, "user_id": 3013887, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/c1396249d91442e1dde6e93197c0b94a?s=128&d=identicon&r=PG&f=1", "display_name": "pingul", "link": "https://stackoverflow.com/users/3013887/pingul"}, "edited": false, "score": 0, "creation_date": 1460577485, "post_id": 36608263, "comment_id": 60813515, "body": "Have you added the second project as a dependency?"}], "answers": [{"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 1, "last_activity_date": 1460577957, "creation_date": 1460577957, "answer_id": 36608515, "question_id": 36608263, "link": "https://stackoverflow.com/questions/36608263/how-to-import-code-from-exe-project-for-unit-test/36608515#36608515", "title": "How to import code from .exe project for unit test", "body": "<p>You cannot import code from exe (i.e. link against exe), at least not easily. You can create a third project with the common code, either static or dynamic library, and let the exe and the units test  both depend and link against the library.</p>\n\n<p>Another option would be to have everything in a single project, but that is more suitable for makefile or CMake project (and then have build targets \"all\" and \"tests\", for example).</p>\n"}], "owner": {"reputation": 2687, "user_id": 1802974, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0066445dcc2757c44db6d1e61ae10a7d?s=128&d=identicon&r=PG", "display_name": "Victor Mezrin", "link": "https://stackoverflow.com/users/1802974/victor-mezrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 36608515, "answer_count": 1, "score": 0, "last_activity_date": 1460577957, "creation_date": 1460577131, "question_id": 36608263, "link": "https://stackoverflow.com/questions/36608263/how-to-import-code-from-exe-project-for-unit-test", "title": "How to import code from .exe project for unit test", "body": "<p>I use Visual Studio 2015 to develop C++ app.</p>\n\n<p>I have solution with two projects: one is the <code>.exe</code> project and another - project to test code via Boost Unit Tests.</p>\n\n<p>Everything compiled, but linker fails to build second project. It says <code>error LNK2019: unresolved external symbol</code>.</p>\n\n<p>How to link second project to the code of the first project? </p>\n"}, {"tags": ["c++", "c++-concepts"], "answers": [{"comments": [{"owner": {"reputation": 23269, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1460663747, "post_id": 36608563, "comment_id": 60860798, "body": "I understand all 5 examples, but what does template &lt;class T&gt; concept bool C = true; mean?"}, {"owner": {"reputation": 23269, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 0, "creation_date": 1460663964, "post_id": 36608563, "comment_id": 60860948, "body": "Is it variable template? Aka the simplest concept ever: for every type it is true?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 23269, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "edited": false, "score": 1, "creation_date": 1460663978, "post_id": 36608563, "comment_id": 60860960, "body": "That is the definition of a variable concept <code>C</code> with one type parameter that is always satisfied."}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 5, "last_activity_date": 1460664064, "last_edit_date": 1460664064, "creation_date": 1460578066, "answer_id": 36608563, "question_id": 36608235, "link": "https://stackoverflow.com/questions/36608235/what-are-5-new-syntaxes-for-declaring-a-function-template/36608563#36608563", "title": "What are 5 new syntaxes for declaring a function template?", "body": "<p>Given the trivial concept definition:</p>\n\n<pre><code>template &lt;class T&gt; concept bool C = true;\n</code></pre>\n\n<p>We can declare the same function template <code>f</code> as:</p>\n\n<pre><code>template &lt;class T&gt; requires C&lt;T&gt; void f(T);\ntemplate &lt;class T&gt; void f(T) requires C&lt;T&gt;;\ntemplate &lt;C T&gt; void f(T); // colloquially known as \"terse\" syntax\nC{T} void f(T); // template introduction syntax\nvoid f(C); // abbreviated function template syntax\n</code></pre>\n"}], "owner": {"reputation": 23269, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 1, "accepted_answer_id": 36608563, "answer_count": 1, "score": 1, "last_activity_date": 1460664064, "creation_date": 1460577031, "question_id": 36608235, "link": "https://stackoverflow.com/questions/36608235/what-are-5-new-syntaxes-for-declaring-a-function-template", "title": "What are 5 new syntaxes for declaring a function template?", "body": "<p><a href=\"https://www.youtube.com/watch?v=zQ9tT8fbtSo#t=48m30s\" rel=\"nofollow\">This</a> video specifies some problems with current TS version of concepts, and one of them is:</p>\n\n<blockquote>\n  <p>5 new syntaxes for declaring a function template  </p>\n</blockquote>\n\n<p>without examples given. \nSo my question is what are they? </p>\n"}, {"tags": ["c++", "linked-list", "mergesort", "display"], "comments": [{"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1460577554, "post_id": 36608214, "comment_id": 60813551, "body": "calling a recursive function 4505 time is not a good idea"}], "answers": [{"comments": [{"owner": {"reputation": 1611, "user_id": 1331805, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7985acb19e3ef9ba868d32397ef1e5f2?s=128&d=identicon&r=PG", "display_name": "GeoffreyB", "link": "https://stackoverflow.com/users/1331805/geoffreyb"}, "edited": false, "score": 0, "creation_date": 1460577670, "post_id": 36608407, "comment_id": 60813603, "body": "your terminal will like you better with a <code>endl</code> after the loop"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 1611, "user_id": 1331805, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7985acb19e3ef9ba868d32397ef1e5f2?s=128&d=identicon&r=PG", "display_name": "GeoffreyB", "link": "https://stackoverflow.com/users/1331805/geoffreyb"}, "edited": false, "score": 0, "creation_date": 1460577708, "post_id": 36608407, "comment_id": 60813620, "body": "@GeoffreyB this is how OP implemented in his code and I preserved that but totally agree with you"}], "tags": [], "owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "is_accepted": false, "score": 0, "last_activity_date": 1460577629, "creation_date": 1460577629, "answer_id": 36608407, "question_id": 36608214, "link": "https://stackoverflow.com/questions/36608214/display-function-causes-runtime-error/36608407#36608407", "title": "display() function causes runtime error", "body": "<p>Instead of calling a recursive function for 4505 times, implement your code with while loop:</p>\n\n<pre><code>void display(node * p)\n{\n    while(p != NULL)\n    {\n       cout&lt;&lt;p-&gt;data&lt;&lt;\" \";\n       p = p-&gt;next;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6141051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3128b1476568b84c65b6939882ada03?s=128&d=identicon&r=PG&f=1", "display_name": "amateur", "link": "https://stackoverflow.com/users/6141051/amateur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460577629, "creation_date": 1460576938, "last_edit_date": 1460577345, "question_id": 36608214, "link": "https://stackoverflow.com/questions/36608214/display-function-causes-runtime-error", "title": "display() function causes runtime error", "body": "<p>I have implemented a <code>static linkedList mergeSort (linkedList one)</code> method  that sorts a linkedList recursively and works.</p>\n\n<p>Here is the method that is defined in my <code>linkedList.h</code>:</p>\n\n<pre><code>linkedList linkedList::mergeSort(linkedList&amp; one)\n{\n    if (one.head-&gt;next == NULL)\n    {\n        return one;\n    }\n    else\n    {\n        linkedList right;\n        linkedList::split(one, right);\n        right = mergeSort(right);\n        one = mergeSort(one);\n        linkedList sort;\n        linkedList::merge(one, right, sort);\n        one = sort;\n        return one;\n    }\n}\n</code></pre>\n\n<p>When I display it, it prints out correctly to the screen so I know it works but if the <code>linkedList</code> is bigger than 4505 nodes, it won't print. I debugged to check where the problem was. Apparently it is in my display function but I don't see anything wrong with it.</p>\n\n<p>Here it is:</p>\n\n<pre><code>void display(node * p)\n{\n    if (p == NULL)\n    {\n\n    }\n    else\n    {\n        cout &lt;&lt; p-&gt;data &lt;&lt; \" \";\n        display(p-&gt;next);\n    }\n}\n</code></pre>\n\n<p>The problem is pointed to <code>cout &lt;&lt; p-&gt;data &lt;&lt; \" \";</code></p>\n\n<p>Can someone please point me in the right direction on how to fix this? (If it can be fixed at all.) Any help would be much appreciated.</p>\n"}, {"tags": ["java", "android", "c++"], "comments": [{"owner": {"reputation": 1165, "user_id": 6058076, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7b02add0337d2e698b575dfd7e11d2a3?s=128&d=identicon&r=PG&f=1", "display_name": "LearningPhase", "link": "https://stackoverflow.com/users/6058076/learningphase"}, "edited": false, "score": 0, "creation_date": 1460576682, "post_id": 36608099, "comment_id": 60813023, "body": "do you need to show all the records at once? if not then you can use pagination kind of stuff. Depending upon the page number we display the results"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 6179053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1IQIu.png?s=128&g=1", "display_name": "Martin Kanayet", "link": "https://stackoverflow.com/users/6179053/martin-kanayet"}, "is_accepted": true, "score": 0, "last_activity_date": 1460576866, "creation_date": 1460576866, "answer_id": 36608194, "question_id": 36608099, "link": "https://stackoverflow.com/questions/36608099/sometimes-webservice-returns-1000-records-how-to-handle-in-code/36608194#36608194", "title": "sometimes webservice returns 1000 records. how to handle in code?", "body": "<p>you can prevent this memory problems using </p>\n\n<pre><code>$top\n</code></pre>\n\n<p>in the parameter, for example:    </p>\n\n<p><a href=\"http://services.odata.org/OData/OData.svc/Category(1)/Products\" rel=\"nofollow\">http://services.odata.org/OData/OData.svc/Category(1)/Products</a>?$top=2&amp;$orderby=name</p>\n\n<p>It just response with 2 records, use the number you consider.</p>\n\n<p>Hope it helps to you</p>\n"}], "owner": {"reputation": 11, "user_id": 6166748, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/630f4117524e63f463571ea6df10f229?s=128&d=identicon&r=PG&f=1", "display_name": "jack asmack", "link": "https://stackoverflow.com/users/6166748/jack-asmack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 36608194, "answer_count": 1, "score": 0, "last_activity_date": 1460576866, "creation_date": 1460576585, "question_id": 36608099, "link": "https://stackoverflow.com/questions/36608099/sometimes-webservice-returns-1000-records-how-to-handle-in-code", "title": "sometimes webservice returns 1000 records. how to handle in code?", "body": "<p>when my Android app makes a web service call, normally 10-300 records are returned, but sometimes, 1000+ records needs to be returned in json file, this can potentially cause memory problems and the app to freeze up... how can i write code to handle such a situation?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "caching", "mutex"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 3, "creation_date": 1460577220, "post_id": 36607940, "comment_id": 60813358, "body": "Uh, what if thread 2 acquires the mutex before thread 1?"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1460578493, "post_id": 36607940, "comment_id": 60814102, "body": "Any data that is written to memory causes that cache-line to be invalidated, but I don&#39;t know what would make you say &quot;forces full cache-invalidation&quot;"}, {"owner": {"reputation": 2034, "user_id": 832887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0f517aff68fe9683c9f8ac6d6a552bd?s=128&d=identicon&r=PG", "display_name": "neverlastn", "link": "https://stackoverflow.com/users/832887/neverlastn"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1460578657, "post_id": 36607940, "comment_id": 60814189, "body": "@Brian - Yes, correct - assume that the sequence is as shown above."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1460579111, "post_id": 36607940, "comment_id": 60814446, "body": "This answer to an older questions suggests that yes, mutex functions issue memory barrier instructions if required by the hardware: <a href=\"http://stackoverflow.com/a/24143387/1401351\">stackoverflow.com/a/24143387/1401351</a>"}, {"owner": {"reputation": 2034, "user_id": 832887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0f517aff68fe9683c9f8ac6d6a552bd?s=128&d=identicon&r=PG", "display_name": "neverlastn", "link": "https://stackoverflow.com/users/832887/neverlastn"}, "reply_to_user": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1460579362, "post_id": 36607940, "comment_id": 60814575, "body": "@Peter - that&#39;s great. As a clarification, does that mean that any writes, by any thread or process on that core&#39;s L1 and L2 will be marked as invalid across all other cores&#39; caches, right?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1460581925, "post_id": 36607940, "comment_id": 60815948, "body": "<code>ct-&gt;foo = 3</code> happens-before <code>std::cout &lt;&lt; ct-&gt;foo</code>, and so therefore the latter is guaranteed to observe the side effect of the former. The assignment is sequenced-before  <code>q.push(ct)</code>, which happens-before <code>q.pop()</code>, which is sequenced-before read access to <code>ct-&gt;foo</code>. &quot;happens-before&quot; relationship is transitively closed over &quot;happens-before&quot; and &quot;sequenced-before&quot; edges. Cashes and cores are irrelevant implementation details."}, {"owner": {"reputation": 2034, "user_id": 832887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0f517aff68fe9683c9f8ac6d6a552bd?s=128&d=identicon&r=PG", "display_name": "neverlastn", "link": "https://stackoverflow.com/users/832887/neverlastn"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460582267, "post_id": 36607940, "comment_id": 60816135, "body": "@IgorTandetnik I certainly agree and I agree that &quot;cashes and cores are irrelevant implementation details&quot; in regards to semantics but I make it related to my question because it affects performance in multicore implementations i.e. every recent CPU."}], "answers": [{"comments": [{"owner": {"reputation": 2034, "user_id": 832887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0f517aff68fe9683c9f8ac6d6a552bd?s=128&d=identicon&r=PG", "display_name": "neverlastn", "link": "https://stackoverflow.com/users/832887/neverlastn"}, "edited": false, "score": 0, "creation_date": 1460582406, "post_id": 36609587, "comment_id": 60816208, "body": "&quot;Of course if &quot;ct-&gt;foo = 3&quot; hasn&#39;t any special tricky meaning&quot; Sure! :)"}], "tags": [], "owner": {"reputation": 1204, "user_id": 6175422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f3b916a1e5d6c8c14fd7fba892f87ad?s=128&d=identicon&r=PG", "display_name": "Vadim Key", "link": "https://stackoverflow.com/users/6175422/vadim-key"}, "is_accepted": true, "score": 2, "last_activity_date": 1460583059, "last_edit_date": 1460583059, "creation_date": 1460581664, "answer_id": 36609587, "question_id": 36607940, "link": "https://stackoverflow.com/questions/36607940/ordering-of-read-write-operations-in-a-c-queue/36609587#36609587", "title": "Ordering of read/write operations in a C++ queue", "body": "<p>std::mutex() is conformant to Mutex requirements (<a href=\"http://en.cppreference.com/w/cpp/concept/Mutex\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/concept/Mutex</a>)</p>\n\n<blockquote>\n  <p>Prior m.unlock() operations on the same mutex synchronize-with this\n  lock operation (equivalent to release-acquire std::memory_order)</p>\n</blockquote>\n\n<p>release-acquire is explained here (<a href=\"http://en.cppreference.com/w/cpp/atomic/memory_order\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/atomic/memory_order</a>)</p>\n\n<blockquote>\n  <p><strong>Release-Acquire ordering</strong> </p>\n  \n  <p>If an atomic store in thread A is tagged\n  memory_order_release and an atomic load in thread B from the same\n  variable is tagged memory_order_acquire, <strong>all memory writes (non-atomic\n  and relaxed atomic) that happened-before the atomic store from the\n  point of view of thread A, become visible side-effects in thread B</strong>,\n  that is, once the atomic load is completed, thread B is guaranteed to\n  see everything thread A wrote to memory. </p>\n  \n  <p>The synchronization is\n  established only between the threads releasing and acquiring the same\n  atomic variable. Other threads can see different order of memory\n  accesses than either or both of the synchronized threads.</p>\n</blockquote>\n\n<p>Code example in this section is very similar on yours. So it should be guaranteed that all writes in thread 1 will happen before mutex unlock in push().</p>\n\n<p>Of course if \"ct->foo = 3\" hasn't any special tricky meaning where actual assignment happens in another thread :)</p>\n\n<p>wrt cache-invalidation, from cppreference:</p>\n\n<blockquote>\n  <p>On strongly-ordered systems (x86, SPARC TSO, IBM mainframe),\n  release-acquire ordering is automatic for the majority of operations.\n  No additional CPU instructions are issued for this synchronization\n  mode, only certain compiler optimizations are affected (e.g. the\n  compiler is prohibited from moving non-atomic stores past the atomic\n  store-release or perform non-atomic loads earlier than the atomic\n  load-acquire). On weakly-ordered systems (ARM, Itanium, PowerPC),\n  special CPU load or memory fence instructions have to be used.</p>\n</blockquote>\n\n<p>So it really depends from the architecture.</p>\n"}], "owner": {"reputation": 2034, "user_id": 832887, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e0f517aff68fe9683c9f8ac6d6a552bd?s=128&d=identicon&r=PG", "display_name": "neverlastn", "link": "https://stackoverflow.com/users/832887/neverlastn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 419, "favorite_count": 0, "accepted_answer_id": 36609587, "answer_count": 1, "score": 3, "last_activity_date": 1460629349, "creation_date": 1460576087, "last_edit_date": 1460629349, "question_id": 36607940, "link": "https://stackoverflow.com/questions/36607940/ordering-of-read-write-operations-in-a-c-queue", "title": "Ordering of read/write operations in a C++ queue", "body": "<p>Let's assume we have a <code>SyncQueue</code> class with the following implementation:</p>\n\n<pre><code>class SyncQueue {\n    std::mutex mtx;\n    std::queue&lt;std::shared_ptr&lt;ComplexType&gt; &gt; m_q;\npublic:\n    void push(const std::shared_ptr&lt;ComplexType&gt; &amp; ptr) {\n        std::lock_guard&lt;std::mutex&gt; lck(mtx);\n        m_q.push(ptr);\n    }\n    std::shared_ptr&lt;ComplexType&gt; pop() {\n        std::lock_guard&lt;std::mutex&gt; lck(mtx);\n        std::shared_ptr&lt;ComplexType&gt; rv(m_q.front());\n        m_q.pop();\n        return rv;\n    }\n};\n</code></pre>\n\n<p>then we have this code that uses it:</p>\n\n<pre><code>SyncQueue q;\n\n// Thread 1, Producer:\nstd::shared_ptr&lt;ComplexType&gt; ct(new ComplexType);\nct-&gt;foo = 3;\nq.push(ct);\n\n// Thread 2, Consumer:\nstd::shared_ptr&lt;ComplexType&gt; ct(q.pop());\nstd::cout &lt;&lt; ct-&gt;foo &lt;&lt; std::endl;\n</code></pre>\n\n<p>Am I guaranteed to get <code>3</code> when <code>ct-&gt;foo</code> is printed? <code>mtx</code> provides happens-before semantics for the pointer itself, but I'm not sure that says anything for the memory of <code>ComplexType</code>. If it is guaranteed, does it mean that every mutex lock (<code>std::lock_guard&lt;std::mutex&gt; lck(mtx);</code>) forces full cache-invalidation for any modified memory locations up-till the place where memory hierarchies of independent cores merge?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "singleton"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1460576903, "post_id": 36607901, "comment_id": 60813166, "body": "And why exactly you can&#39;t use thread-local storafe for your singleton?"}, {"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460577415, "post_id": 36607901, "comment_id": 60813475, "body": "Like I said: It&#39;s supporting legacy code. All of this code used singletons, which previously were not thread-aware and now shall be. Changing everything to local thread safe data would be undoubtly better, but would take too much time currently."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1460577500, "post_id": 36607901, "comment_id": 60813524, "body": "All you need to change is the definition of your <code>Instance</code> function..."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1460583558, "post_id": 36607901, "comment_id": 60816803, "body": "If there are two threads whose IDs hash to the same slot in <code>m_instancesArray</code>, then you have a race between reading that slot in <code>getInstancePerThread</code>, and writing to it in <code>createThreadedInstance</code>."}, {"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1460585133, "post_id": 36607901, "comment_id": 60817500, "body": "Yes, I&#39;m aware of this. The question is: Is this race harmful? As far as I can see, it isn&#39;t. - because reading from the thread will always give a valid pointer or INVALID - which then furtheron will run into the locked fallback."}], "owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460578181, "creation_date": 1460575915, "last_edit_date": 1460578181, "question_id": 36607901, "link": "https://stackoverflow.com/questions/36607901/fast-instance-per-thread-class-is-it-thread-safe", "title": "Fast instance per thread class - is it thread safe?", "body": "<p>here is a snippet from a class I am currently working at. It is intended to provide an instance (\"singleton-like\") per thread. A common topic here.\nThe typical implementation uses a locked map indexed by the thread ID and holding the data.</p>\n\n<p>I tried this out, but since we make heavy use of this in our current project, it ate up an enormous amount of 3% of our whole processing power. Restructuring is currently not an option - it's legacy code pimped up for threading.</p>\n\n<p>So I introduced a completely non-locked static array, which is indexed by the lower 16 bit part of the thread ID. Only if collisions occur between these (very rare), the slower and locked map access is used.</p>\n\n<pre><code>#pragma once\n#include &lt;array&gt;\n#include &lt;map&gt;\n#include &lt;cstdint&gt;\n#include &lt;mutex&gt;\n\n\nnamespace Base\n{\n\n    template&lt;typename T&gt; class InstancePerThread\n    {\n    public:\n#if defined( _WIN32 )\n        typedef uint32_t ThreadId;\n#else\n#error \"Not implemented\"\n#endif\n    private:\n        T* const                                    INVALID = (T*)-1;\n    protected:\n        std::array&lt;T*,UINT16_MAX+1&gt;                 m_instancesArray;\n        std::map&lt;ThreadId,T*&gt;                       m_instancesMap;\n        std::recursive_mutex                        m_lock;\n    public:\n        InstancePerThread() { m_instancesArray.fill(nullptr); }\n        virtual ~InstancePerThread() = default;\n\n        T&amp; getInstancePerThread()\n        {\n            const ThreadId currentThreadId = getCurrentThreadId();\n            T* result = m_instancesArray[(uint16_t)currentThreadId];\n            assert( result &amp;&amp; \"Instance not created!\" );\n            if( result != INVALID )\n                return *result;\n\n            {\n                std::lock_guard&lt;std::recursive_mutex&gt; l(m_lock);\n\n                assert( m_instancesMap.find(currentThreadId) != m_instancesMap.end() &amp;&amp; \"Instance not created!\" );\n                return *m_instancesMap[currentThreadId];\n            }\n        }\n\n        void createThreadedInstance( const ThreadId _threadId, const std::function&lt;T*()&gt;&amp; _new = []() { return new T() }, const std::function&lt;void(T*)&gt;&amp; _init = nullptr )\n        {\n            {\n                std::lock_guard&lt;std::recursive_mutex&gt; l(m_lock);\n\n\n                assert( m_instancesMap.find(_threadId) == m_instancesMap.end() &amp;&amp; \"Instance already created!\" );\n                if( m_instancesMap.find(_threadId) == m_instancesMap.end() )\n                {\n\n                    T* t = _new();\n\n                    // check for collision\n                    T* alreadyExisting = m_instancesArray[(uint16_t)_threadId];\n                    m_instancesArray[(uint16_t)_threadId] = alreadyExisting ? INVALID : t;\n\n                    m_instancesMap[_threadId] = t;\n                    if( _init )\n                        _init(t);\n                }\n\n            }\n\n        }\n\n        void destroyThreadedInstance( const ThreadId _threadId, const std::function&lt;void(T*)&gt;&amp; _destroy = nullptr, const std::function&lt;void(T*)&gt;&amp; _delete = [](T* t) { delete t; }  )\n        {\n            {\n                std::lock_guard&lt;std::recursive_mutex&gt; l(m_lock);\n                assert( m_instancesMap.find(_threadId) != m_instancesMap.end() &amp;&amp; \"Instance not created!\" );\n                if( m_instancesMap.find(_threadId) != m_instancesMap.end() )\n                {\n                    T* t = m_instancesMap[_threadId];\n                    if( _destroy )\n                        _destroy( t );\n                    _delete(t);\n\n                    T* alreadyExisting = m_instancesArray[(uint16_t)_threadId];\n                    if( alreadyExisting != INVALID )\n                        m_instancesArray[(uint16_t)_threadId] = nullptr;\n\n                    m_instancesLockMap.erase( _threadId );\n                    m_instancesMap.erase( _threadId );\n                }\n            }\n\n        }\n\n        static inline ThreadId getCurrentThreadId()\n        {\n#if defined( _WIN32 )\n            return GetCurrentThreadId();\n#else\n#error \"Not implemented\"\n#endif\n        }\n\n\n    };\n\n}\n</code></pre>\n\n<p>Now my question is: Is this really thread safe?</p>\n\n<p>As far as I can see, though m_instancesArray is read accessed from multiple threads and potentially written from another thread, there can be never a harmful race condition.</p>\n\n<ul>\n<li>Reading threads never access the same index</li>\n<li>Writing thread never changes the container size/structure (it's a static array)</li>\n<li>There's only a single read access: T* result = m_instancesArray[(uint16_t)currentThreadId]; </li>\n<li>This should always return a valid pointer, which is by no means invalidated by the writing thread or INVALID, which is also ok - even if hidden race conditions occur.</li>\n</ul>\n\n<p>Or am I missing something important here?</p>\n\n<p>(Of course destroyThreadedInstance() is not thread safe when the thread to destroy its data is still running - i am aware of that. Also I am aware of the high memory cost.)</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460574608, "post_id": 36607457, "comment_id": 60811748, "body": "Well you need to validate your pointer by using <code>if (tempPointer)</code>. That would be a good thing to do.  tempPointer is pointing to an array of 5 element but you are looping on the size of input. Are you sure that <code>input.length()</code> is not bigger than 5?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460574701, "post_id": 36607457, "comment_id": 60811813, "body": "@Ceros <code>tempPointer</code> will never be a valid pointer."}, {"owner": {"reputation": 129, "user_id": 5586900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1ec5a9b34489b61c9e01e6c04acc54?s=128&d=identicon&r=PG&f=1", "display_name": "haris", "link": "https://stackoverflow.com/users/5586900/haris"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460574833, "post_id": 36607457, "comment_id": 60811897, "body": "@Nathan, what should I do?"}, {"owner": {"reputation": 129, "user_id": 5586900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1ec5a9b34489b61c9e01e6c04acc54?s=128&d=identicon&r=PG&f=1", "display_name": "haris", "link": "https://stackoverflow.com/users/5586900/haris"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460574951, "post_id": 36607457, "comment_id": 60811947, "body": "@Ceros, I only put in string of 5 character long. It works in asciiToBinary function but the pointer does not pass too dataToCode function."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460575122, "post_id": 36607457, "comment_id": 60812054, "body": "Well since you know wha the size of the array should be just use a <code>std::array&lt;std::string, 5&gt;</code> and you can return that from the function."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460575147, "post_id": 36607457, "comment_id": 60812072, "body": "@Peter, you are creating your array in asciiToBinary as a local variable. As soon as you exit this function, this array does not exist anymore."}, {"owner": {"reputation": 129, "user_id": 5586900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1ec5a9b34489b61c9e01e6c04acc54?s=128&d=identicon&r=PG&f=1", "display_name": "haris", "link": "https://stackoverflow.com/users/5586900/haris"}, "edited": false, "score": 0, "creation_date": 1460575235, "post_id": 36607457, "comment_id": 60812119, "body": "The above link by Nathan helped me solve it. string* asciiToBinary(string input) { \t \tstring* tempPointer = new string[5];  \tfor (int i = 0; i &lt; input.length(); i++) {  \t\t tempPointer[i] = bitset&lt;8&gt;(input[i]).to_string(); \t\t //cout &lt;&lt; binaryArray[i] &lt;&lt; endl; \t} \t  \t \treturn tempPointer; }"}], "owner": {"reputation": 129, "user_id": 5586900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fe1ec5a9b34489b61c9e01e6c04acc54?s=128&d=identicon&r=PG&f=1", "display_name": "haris", "link": "https://stackoverflow.com/users/5586900/haris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1460574609, "answer_count": 0, "score": 0, "last_activity_date": 1460574523, "creation_date": 1460574523, "question_id": 36607457, "link": "https://stackoverflow.com/questions/36607457/c-pointer-crashing-the-application", "closed_reason": "Duplicate", "title": "c++ pointer crashing the application", "body": "<p>This code is to convert from input string to binary. But the pointer <code>tempPointer</code> in <code>dataToCode()</code> function is crashing the application. Please guide. Thank you.</p>\n\n<pre><code>int main(void)\n{\nstring text;\n    cout &lt;&lt; \" Enter the text/code you want to convert: \";\n    cin &gt;&gt; text;\ndataToCode(text); \n}\n\nstring* asciiToBinary(string input) {\n\n    string binaryArray[5];\n\n    for (int i = 0; i &lt; input.length(); i++) {\n\n         binaryArray[i] = bitset&lt;8&gt;(input[i]).to_string();\n         //cout &lt;&lt; binaryArray[i] &lt;&lt; endl;\n    }\n    string* tempPointer = binaryArray;\n    for (int i = 0; i &lt; input.length(); i++) {\n\n        //cout &lt;&lt; *(tempPointer + i);\n    }\n    return tempPointer;\n\n}\n\nvoid dataToCode(string input) {\n\n    string binaryCode[5];\n\n    string* tempPointer = asciiToBinary(input);\n\n    for (int i = 0; i &lt; input.length(); i++) {\n        //binaryCode[i] = *(tempPointer + i);\n        //cout &lt;&lt; binaryCode[i] &lt;&lt; endl;\n        cout &lt;&lt; *(tempPointer + i);\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1460574004, "post_id": 36607237, "comment_id": 60811364, "body": "what is the error and on which line? And possible duplicate of this <a href=\"http://stackoverflow.com/questions/1380463/sorting-a-vector-of-custom-objects\" title=\"sorting a vector of custom objects\">stackoverflow.com/questions/1380463/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 6200504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703f389bd969c4e640fc33e8e1756c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Saad Alarifi", "link": "https://stackoverflow.com/users/6200504/saad-alarifi"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1460574368, "post_id": 36607237, "comment_id": 60811595, "body": "main.cpp:193:45: error: invalid operands to binary expression (&#39;string&#39; (aka &#39;basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt;&#39;) and &#39;int&#39;) sort(array[x].name, array[x].name + narray); ~~~~~~~~~~~~~ ^ ~~~~~~                                                                                    and i got this error 8 times with differen numbers:"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460575266, "post_id": 36607237, "comment_id": 60812138, "body": "@SaadAlarifi <i><code>array[x].name + narray</code></i> What do you actually expect being the result of that statement? It makes completely no sense for me."}, {"owner": {"reputation": 11, "user_id": 6200504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703f389bd969c4e640fc33e8e1756c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Saad Alarifi", "link": "https://stackoverflow.com/users/6200504/saad-alarifi"}, "edited": false, "score": 0, "creation_date": 1460575618, "post_id": 36607237, "comment_id": 60812347, "body": "i am sorry if it wasn&#39;t clear. so i am reading a file that contains many states and the function sorting is sorting the states alphabetically and printing it out. the code is about 200 lines if would like to see it all."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460577003, "post_id": 36607237, "comment_id": 60813227, "body": "What is the format of the data file?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460577098, "post_id": 36607237, "comment_id": 60813285, "body": "I highly recommend looking at examples from searching the internet for &quot;StackOverflow c++ read file struct&quot;."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460577393, "post_id": 36607237, "comment_id": 60813458, "body": "By the way, <code>sizeof(array[0].name) </code> is equivalent to <code>sizeof(std::string)</code> which will always be constant since you are asking for the size of the data structure, not the number of characters in the string.  I suggest you use <code>array[0].name.length()</code> instead."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1460577486, "post_id": 36607237, "comment_id": 60813516, "body": "To sort a string, use the following:  <code>std::sort(array[x].name.begin(), array[x].name.end());</code>. <i>Note:  This will change the ordering of the letters in the string</i>, which may not be what you want."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6200504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703f389bd969c4e640fc33e8e1756c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Saad Alarifi", "link": "https://stackoverflow.com/users/6200504/saad-alarifi"}, "edited": false, "score": 0, "creation_date": 1460579953, "post_id": 36607984, "comment_id": 60814895, "body": "does this mean that the c++ i use doesn&#39;t support this? i am really very new when it comes to programming i just got started a few months. i got this error##:::::                         :::t2.cpp:22:45: error: \u2018std::string\u2019 has no member named \u2018cbegin\u2019          return lexicographical_compare(name.cbegin(), name.cend(), rhs.name.cbegin(), rhs.name.cend());"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 11, "user_id": 6200504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703f389bd969c4e640fc33e8e1756c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Saad Alarifi", "link": "https://stackoverflow.com/users/6200504/saad-alarifi"}, "edited": false, "score": 0, "creation_date": 1460631912, "post_id": 36607984, "comment_id": 60838130, "body": "@SaadAlarifi Sounds like you didn&#39;t <code>#include &lt;string&gt;</code>. If you look at my live example link, you&#39;ll need to also <code>#include &lt;algorithm&gt;</code> and you&#39;ll need to either specify the <code>std</code> namespace before <code>string</code> and <code>lexographical_compare</code> or you&#39;ll need to do: <code>using namespace std;</code>, again look at the example, hopefully you&#39;ll find that a helpful guide."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": false, "score": 1, "last_activity_date": 1460576696, "last_edit_date": 1460576696, "creation_date": 1460576205, "answer_id": 36607984, "question_id": 36607237, "link": "https://stackoverflow.com/questions/36607237/sorting-alphabetically-from-a-file-c/36607984#36607984", "title": "sorting alphabetically from a file C++", "body": "<p>Create comparison operators for <code>struct state</code> using <a href=\"http://en.cppreference.com/w/cpp/algorithm/lexicographical_compare\" rel=\"nofollow\"><code>lexicographical_compare</code></a></p>\n\n<pre><code>bool operator&lt; (const state&amp; rhs) {\n    return lexicographical_compare(name.cbegin(), name.cend(), rhs.name.cbegin(), rhs.name.cend());\n}\n\nbool operator== (const state&amp; rhs) {\n    return name == rhs.name;\n}\n</code></pre>\n\n<p>You can then use <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow\"><code>sort</code></a> directly on <code>array</code>:</p>\n\n<pre><code>sort(begin(array), end(array));\n</code></pre>\n\n<p>I've trimmed your class a bit, but this is how it would work: <a href=\"http://ideone.com/SwaivI\" rel=\"nofollow\">http://ideone.com/SwaivI</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6200504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703f389bd969c4e640fc33e8e1756c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Saad Alarifi", "link": "https://stackoverflow.com/users/6200504/saad-alarifi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460577029, "creation_date": 1460573911, "last_edit_date": 1460577029, "question_id": 36607237, "link": "https://stackoverflow.com/questions/36607237/sorting-alphabetically-from-a-file-c", "title": "sorting alphabetically from a file C++", "body": "<p>i am trying to read a file and sorting it alphabetically, i do not know how to tackle this issue.</p>\n\n<p>so i am reading a file that contains , States, counties, and cities. and i need to sort the State alphabetically. can you please guide on how to solve this?</p>\n\n<p>i have tried this:</p>\n\n<pre><code>void sorting(struct state* array, int x){\n    int narray = sizeof(array[x].name)/sizeof(array[0].name);\n    sort(array[x].name, array[x].name + narray);\n    for(int i = 0; i &lt; narray; ++i) {\n        cout &lt;&lt; array[i].name&lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>here is my struct: </p>\n\n<pre><code>struct state {\n    string name; //name of state\n    struct county *c; //name of counties\n    int counties; //number of counties in state\n    int population; //total population of state\n};\n</code></pre>\n\n<p>and here is how i read the file:  </p>\n\n<pre><code> File &gt;&gt; array[i].name;\n File &gt;&gt; array[i].population;\n File &gt;&gt; array[i].counties;\n</code></pre>\n\n<p>it gave me an errors, am i on the right track? </p>\n\n<p>the error i got are: </p>\n\n<pre><code>main.cpp:193:45: error: invalid operands to binary expression ('string' (aka 'basic_string&lt;char, char_traits&lt;char&gt;, allocator&lt;char&gt; &gt;') and 'int')\nsort(array[x].name, array[x].name + narray);\n~~~~~~~~~~~~~ ^ ~~~~~~  \n</code></pre>\n\n<p>and i got this error 8 times with different numbers: </p>\n\n<pre><code>   /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/string:3987:1: note: candidate template ignored: deduced conflicting types for parameter '_CharT' ('char' vs. 'int')\noperator+(const basic_string&lt;_CharT, _Traits, _Allocator&gt;&amp; __lhs, _CharT __rhs)\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "one-definition-rule"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "edited": false, "score": 0, "creation_date": 1460609634, "post_id": 36608602, "comment_id": 60824892, "body": "Thanks..very good explanation.. But I still have a doubt..when it says that &quot; shall all refer to entity defined in D&quot; could mean that they can refer to the different entity defined in D??? If not so this rule can itself covered by the following rule i.e they shall refer to the same entity.. Isn&#39;t it?? How the first rule make difference... And it will be more helpful if you could give a example for the last rule mentioned in the question about the default argument..Thanks a lot"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "edited": false, "score": 1, "creation_date": 1460658016, "post_id": 36608602, "comment_id": 60857377, "body": "You have to link this statement to the previous bullet.  D shall always be defined with the same sequence of tokens.  So if you refer to items of D, you&#39;d normally always refer to the same item with same meaning.  The only way to break this identity would be that the items used in D but defined could be defeined differently.  And therefore the second part of the clause."}, {"owner": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "edited": false, "score": 1, "creation_date": 1460736368, "post_id": 36608602, "comment_id": 60897029, "body": "Thanks...perfect resolution"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 3, "last_activity_date": 1460659142, "last_edit_date": 1592644375, "creation_date": 1460578198, "answer_id": 36608602, "question_id": 36607185, "link": "https://stackoverflow.com/questions/36607185/multiple-definition-of-class-in-different-translation-unit/36608602#36608602", "title": "Multiple Definition of Class in Different Translation unit", "body": "<h2>Explanation and first example</h2>\n<p>Take the following example</p>\n<pre><code>class Z { char c; };\n\nclass X {\npublic: \n    using Y = Z;  // Z refers to an entity outside definition of D\n    Y f();        // Y refers to an entity within definition of D\n};\n</code></pre>\n<p>The wording</p>\n<blockquote>\n<p>shall refer to an entity defined within the definition of D, <strong>or</strong>\nshall refer to the same entity</p>\n</blockquote>\n<p>means that:</p>\n<ul>\n<li>either you refer to a an entity defined in X (example of <code>Y</code> in the declaration of <code>f()</code>),</li>\n<li>or you refer to an entity not in X (example of <code>Z</code> used to define <code>Y</code>) but it should refer to the <strong>same</strong> entity <strong>in all the compilation unit</strong> in which you define X.</li>\n</ul>\n<p>In fact, this complex wording just means that if you define the same class (with the same sequence of tokens, as required in the dash above the one that you quote) in different compilation units, it should have the same meaning.  The purpose is to allow to define a class in a header and include the same header in several cpp files.</p>\n<h2>How could you break this rule ?</h2>\n<p>Just use the same include with the same class X, but use different versions of class Z.  This would not be odr coompliant:</p>\n<p><em><strong>File X.h:</strong></em></p>\n<pre><code>class X {\npublic: \n    using Y = Z;  // Z refers to an entity outside definition of D\n    Y f();        // Y refers to an entity within definition of D\nprivate: \n    Y yes; \n};\n</code></pre>\n<p><em><strong>File Z1.h:</strong></em></p>\n<pre><code>class Z { char c; };\n</code></pre>\n<p><em><strong>File Z2.h:</strong></em></p>\n<pre><code>class Z { int c; char d; };  ///  OOPS !! same class, not same token \n</code></pre>\n<p><em><strong>File a.cpp</strong></em></p>\n<pre><code>#include &quot;Z1.h&quot;\n#include &quot;X.h&quot;   // X is defined with one meaning for Z \n\nvoid myfunc (X a) { ... } \n</code></pre>\n<p><em><strong>File b.cpp</strong></em></p>\n<pre><code>#include &quot;Z2.h&quot;\n#include &quot;X.h&quot;   // ouch X is defined but using another layout for Z !!\nextern void myfunc (X a); \nint main() { X oops;  myfunc(oops); }   // ==&gt; what will happen here ?  \n</code></pre>\n<p>Depending on your C++ implementation, this could fail in multiple ways: linker errors (because the name mangling algorithm could be defeated), memory/stack corruption (because myfunc expects and object of a certain size on the stack, but main is pushing an object of a different size on stack), etc...</p>\n<h2>Edit: default values</h2>\n<p>In a class function you can define default values for the parameters.  Your additional quote just says that the rule that applies to items of D also applies to expressions used as default parameter. Example:</p>\n<pre><code>const int I_HATE_GLOBALS=sizeof(int)*3; \n\nstruct T {\n   void show (size_t a=I_HATE_GLOBALS); \n};     \n</code></pre>\n<p>In this example, if <code>I_HATE_GLOBALS</code> is always defined in the same manner, you could have the same definition of T appearing in several translation units.  However, if you'd use the same definition of T in several cpp files, but if you'd manage with the magic of includes and conditional compilation to get a  <code>I_HATE_GLOBAL</code> defined differently, then you'd break the ODR rule.</p>\n"}], "owner": {"reputation": 77, "user_id": 4279701, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/78d7e9a63d1b259e201aa55bceee473b?s=128&d=identicon&r=PG&f=1", "display_name": "logic seeker", "link": "https://stackoverflow.com/users/4279701/logic-seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1460659142, "creation_date": 1460573768, "question_id": 36607185, "link": "https://stackoverflow.com/questions/36607185/multiple-definition-of-class-in-different-translation-unit", "title": "Multiple Definition of Class in Different Translation unit", "body": "<p>I have few doubts in C++ standard section 3.2 [basic-def-odr] bullet point 6   ( i.e -3.2.6).</p>\n\n<p>There couple of conditions are specified that tells if a class can be defined multiple times having each definition in separate Translation unit.</p>\n\n<p>I an not able to find an example of the emphasized part below in this bullet:</p>\n\n<blockquote>\n  <p>in each definition of D, corresponding names, looked up according to\n  [basic.lookup], <strong>shall refer to an entity defined within the\n  definition of D, or shall refer to the same entity</strong>, after overload\n  resolution ([over.match]) and after matching of partial template\n  specialization ([temp.over]), except that a name can refer to a\n  non-volatile const object with internal or no linkage if the object\n  has the same literal type in all definitions of D, and the object is\n  initialized with a constant expression ([expr.const]), and the object\n  is not odr-used, and the object has the same value in all definitions\n  of D .</p>\n</blockquote>\n\n<p>Can anyone please give an example where <strong>\"shall refer to an entity defined within the definition of D\"</strong> comes out to be false and makes multiple defintion as an error...</p>\n\n<p>It would be more helpful if example can be provided to explain the below bullet in the same section as well..</p>\n\n<blockquote>\n  <p><em>in each definition of D, a default argument used by an (implicit or explicit) function call is treated as if its token sequence were\n  present in the definition of D; that is, the default argument is\n  subject to the three requirements described above (and, if the default\n  argument has sub-expressions with default arguments, this requirement\n  applies recursively</em></p>\n</blockquote>\n\n<p>Thanks in Advance </p>\n"}, {"tags": ["c++", "string", "runtime-error", "outofrangeexception"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1460573809, "post_id": 36607137, "comment_id": 60811244, "body": "Are you sure 1,17 and 33 are valid indexes for <code>str_val</code>?"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460574026, "post_id": 36607137, "comment_id": 60811376, "body": "Using a debugger, you could step into and see the values stored into str_val and verify what @NathanOliver just said above"}, {"owner": {"reputation": 17, "user_id": 6163492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6JgxUD6Tffs/AAAAAAAAAAI/AAAAAAAAAw4/o-wjWBvGu7w/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/6163492/peter"}, "edited": false, "score": 0, "creation_date": 1460574049, "post_id": 36607137, "comment_id": 60811394, "body": "The reason I wrote it is because it reads from a file. matrix.txt and the file has values which start from 1, 17 and 33 numbered columns. I believe that is format right? substr(where it begins,how much space to leave before the next)."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460574113, "post_id": 36607137, "comment_id": 60811439, "body": "@Peter look at this <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/substr\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/substr</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460574179, "post_id": 36607137, "comment_id": 60811483, "body": "Here is a suggestion.  In your while loop put <code>if (str_val.size() &lt; 37) std::cout &lt;&lt; &quot;string to small!!!\\n&quot;;</code> as the first line.  Recompile and let me know if that outputs or not."}, {"owner": {"reputation": 17, "user_id": 6163492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6JgxUD6Tffs/AAAAAAAAAAI/AAAAAAAAAw4/o-wjWBvGu7w/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/6163492/peter"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460575892, "post_id": 36607137, "comment_id": 60812518, "body": "@NathanOliver it does says string too small. Can you please help me address the problem?"}, {"owner": {"reputation": 17, "user_id": 6163492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6JgxUD6Tffs/AAAAAAAAAAI/AAAAAAAAAw4/o-wjWBvGu7w/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/6163492/peter"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460575945, "post_id": 36607137, "comment_id": 60812549, "body": "@NathanOliver I am reading the contents of a file that I print already and its named as matrix.txt. The file shows content, I am not sure what this error means"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460576042, "post_id": 36607137, "comment_id": 60812599, "body": "It means you have a line in your file that is not as bid as you expect.  Next step is to print out that line and see what it is.  Then you have to figure out how to parse it and all the other data with the same process."}], "owner": {"reputation": 17, "user_id": 6163492, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6JgxUD6Tffs/AAAAAAAAAAI/AAAAAAAAAw4/o-wjWBvGu7w/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/6163492/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460573840, "creation_date": 1460573638, "last_edit_date": 1460573840, "question_id": 36607137, "link": "https://stackoverflow.com/questions/36607137/stdout-of-range-for-c-code", "title": "std::out_of_range for C++ code", "body": "<p>I am having errors running this code. While executing it gives out an error like-</p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of 'std::out_of_range'\n  what():  basic_string::substr</p>\n</blockquote>\n\n<p>Any ideas on what I am doing wrong here?</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;cstring&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include \"fix_nvt.h\"\n#include \"group.h\"\n#include \"modify.h\"\n#include \"error.h\"\n\nusing namespace LAMMPS_NS;\nusing namespace FixConst;\nusing namespace std;\n\n std::ifstream inFile;\n\ndouble x,y,z;\nstring str_val;\n\n/* ---------------------------------------------------------------------- */\n\nFixNVT::FixNVT(LAMMPS *lmp, int narg, char **arg) :\n  FixNH(lmp, narg, arg)\n{\n  if (!tstat_flag)\n    error-&gt;all(FLERR,\"Temperature control must be used with fix nvt\");\n  if (pstat_flag)\n    error-&gt;all(FLERR,\"Pressure control can not be used with fix nvt\");\n\n  // create a new compute temp style\n  // id = fix-ID + temp\n\n  int n = strlen(id) + 6;\n  id_temp = new char[n];\n  strcpy(id_temp,id);\n  strcat(id_temp,\"_temp\");\n\n  char **newarg = new char*[3];\n  newarg[0] = id_temp;\n  newarg[1] = group-&gt;names[igroup];\n  newarg[2] = (char *) \"temp\";\n\n  modify-&gt;add_compute(3,newarg);\n  delete [] newarg;\n  tflag = 1;\n  printf(\"syracuse rocks\\n\\n\\n\");\n  inFile.open(\"matrix.txt\", ios::in);\n  while(getline(inFile,str_val));\n    {\n  x = atof(str_val.substr(1,4).c_str());\n  y = atof(str_val.substr(17,4).c_str());\n  z = atof(str_val.substr(33,4).c_str());\n  printf (\"x = %f, y =%f, z=%f\\n\",x,y,z);\n }\n  inFile.close();\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1460573826, "post_id": 36607128, "comment_id": 60811254, "body": "Do you initialize the <code>_folder</code> member to something, before appending to it?"}, {"owner": {"reputation": 140, "user_id": 6105616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/568f747affff7416491dd7d5efa39e59?s=128&d=identicon&r=PG&f=1", "display_name": "Booster", "link": "https://stackoverflow.com/users/6105616/booster"}, "reply_to_user": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1460573941, "post_id": 36607128, "comment_id": 60811331, "body": "Yes I&#39;ve tried initializing _folder to an empty string when the CModel gets constructed it resulted in the same error."}, {"owner": {"reputation": 87, "user_id": 6196101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bdfdecfbaa79d0c66fdfd564f81e48?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6196101/ivan"}, "edited": false, "score": 0, "creation_date": 1460574233, "post_id": 36607128, "comment_id": 60811516, "body": "Please, add code, using Update method"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460574294, "post_id": 36607128, "comment_id": 60811549, "body": "and the instanciation of FolderCommand, what are you passing to the constructor exactly"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1460575057, "post_id": 36607128, "comment_id": 60812002, "body": "Provide a complete (but minimal!) example."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460575572, "post_id": 36607755, "comment_id": 60812320, "body": "I believe this should be a comment and not an answer."}, {"owner": {"reputation": 121, "user_id": 6100911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oeu4rr6LcqI/AAAAAAAAAAI/AAAAAAAAACA/5mzpHwjhHfE/photo.jpg?sz=128", "display_name": "Carafini", "link": "https://stackoverflow.com/users/6100911/carafini"}, "reply_to_user": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "edited": false, "score": 0, "creation_date": 1460575725, "post_id": 36607755, "comment_id": 60812417, "body": "Yep, I pointed that out. I just didn&#39;t have the privilege by then."}, {"owner": {"reputation": 140, "user_id": 6105616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/568f747affff7416491dd7d5efa39e59?s=128&d=identicon&r=PG&f=1", "display_name": "Booster", "link": "https://stackoverflow.com/users/6105616/booster"}, "edited": false, "score": 0, "creation_date": 1460575750, "post_id": 36607755, "comment_id": 60812430, "body": "In my current code I used a shared_ptr to my model. When I looked at this example I simply made an instance of my CModel and called Update using that. As to why using a shared_ptr to my model resulted in an error I&#39;m unsure but thanks Adriano Carafini!!"}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "reply_to_user": {"reputation": 140, "user_id": 6105616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/568f747affff7416491dd7d5efa39e59?s=128&d=identicon&r=PG&f=1", "display_name": "Booster", "link": "https://stackoverflow.com/users/6105616/booster"}, "edited": false, "score": 2, "creation_date": 1460576149, "post_id": 36607755, "comment_id": 60812665, "body": "@Booster you did not instanciate CModel in your example."}, {"owner": {"reputation": 140, "user_id": 6105616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/568f747affff7416491dd7d5efa39e59?s=128&d=identicon&r=PG&f=1", "display_name": "Booster", "link": "https://stackoverflow.com/users/6105616/booster"}, "edited": false, "score": 0, "creation_date": 1460576410, "post_id": 36607755, "comment_id": 60812852, "body": ".. That would definitely do it."}], "tags": [], "owner": {"reputation": 121, "user_id": 6100911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oeu4rr6LcqI/AAAAAAAAAAI/AAAAAAAAACA/5mzpHwjhHfE/photo.jpg?sz=128", "display_name": "Carafini", "link": "https://stackoverflow.com/users/6100911/carafini"}, "is_accepted": true, "score": 3, "last_activity_date": 1460575427, "creation_date": 1460575427, "answer_id": 36607755, "question_id": 36607128, "link": "https://stackoverflow.com/questions/36607128/c-string-unable-to-read-memory/36607755#36607755", "title": "C++ String Unable to Read Memory", "body": "<p>Using the first snippet you posted, I called the Update method as below, and no  \"Unable to Read Memory\" issue arose.</p>\n\n<pre><code>int main()\n{\n  shared_ptr&lt;ModelCommand&gt; fc(new FolderCommand(\"somestring\\\\\"));\n  CModel mod;\n\n  mod.Update(fc);\n  mod.print_folder();\n\n  return 0;\n}\n</code></pre>\n\n<p>I think that would  be interesting to see how the Update method is being used.</p>\n\n<p>Obs.: I added a public member function, print_folder, to print ou the _folder private member. Also, I'd make just a comment, however I still don't have this privilege.</p>\n"}], "owner": {"reputation": 140, "user_id": 6105616, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/568f747affff7416491dd7d5efa39e59?s=128&d=identicon&r=PG&f=1", "display_name": "Booster", "link": "https://stackoverflow.com/users/6105616/booster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 1, "accepted_answer_id": 36607755, "answer_count": 1, "score": 2, "last_activity_date": 1460575486, "creation_date": 1460573609, "last_edit_date": 1460575486, "question_id": 36607128, "link": "https://stackoverflow.com/questions/36607128/c-string-unable-to-read-memory", "title": "C++ String Unable to Read Memory", "body": "<p>I have a class that looks like the following:</p>\n\n<pre><code>class ModelCommand {\npublic:\n    virtual ~ModelCommand() {};\n};\n\nclass FolderCommand : public ModelCommand {\npublic:\n    std::string text;\n    unsigned width;\n    bool isBackspace;\n\n    FolderCommand(bool isBackspace, unsigned width, std::string text = \"\") : text(text), width(width), isBackspace(isBackspace) {}\n};\n\nclass CModel {\nprivate:\n    string _folder;\npublic:\n    void Update(std::shared_ptr&lt;ModelCommand&gt; &amp;cmd);\n};\n</code></pre>\n\n<p>Then in my controller I have an instance of my model and update it using the new FolderCommand object I create:</p>\n\n<pre><code>shared_ptr&lt;CModel&gt; model;\n\nshared_ptr&lt;ModelCommand&gt; cmd = dynamic_pointer_cast&lt;ModelCommand&gt;(make_shared&lt;FolderCommand&gt;(false, 20, \"a\"));\n\nmodel-&gt;Update(cmd);\n</code></pre>\n\n<p>And then inside my update method of CModel I try to do the following:</p>\n\n<pre><code>void CModel::Update(std::shared_ptr&lt;ModelCommand&gt; &amp;cmd) {\n\n    if (auto folderCmd = dynamic_pointer_cast&lt;FolderCommand&gt;(cmd)) {\n        if(!folderCmd-&gt;isBackspace)\n\n            // This is where _folder is unable to read memory\n            _folder += folderCmd-&gt;text;\n\n        else if(folderCmd-&gt;isBackspace &amp;&amp; _folder.length() &gt; 0)\n            _folder.erase(--_folder.end());\n\n        folderCmd-&gt;text = _folder;\n    }\n}\n</code></pre>\n\n<p>This results in the CModel's _folder variable being \"Unable to Read Memory\".</p>\n\n<p>Can someone explain and provide a solution to this problem?</p>\n\n<p>Thanks.</p>\n\n<p><strong>UPDATE</strong>\nAdded some more code for clarification</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1460573379, "post_id": 36606966, "comment_id": 60810966, "body": "what is the output of the program?"}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1460573381, "post_id": 36606966, "comment_id": 60810967, "body": "What did you expect to see? You&#39;re reading way past the bounds of an array. The program could be showing you anything. Is it one of those professors who try to show you &quot;how powerful C++ is&quot; by using things that are explicitly illegal but look cool?"}, {"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 6, "creation_date": 1460573387, "post_id": 36606966, "comment_id": 60810977, "body": "Your professor likes undefined behavior?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1460573495, "post_id": 36606966, "comment_id": 60811060, "body": "This seems like a useless exercise. What point is your professor trying to make?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1460574023, "post_id": 36606966, "comment_id": 60811372, "body": "If I were your parent, I&#39;d file a complaint with the faculty on the ground of total incompetence of your educator."}, {"owner": {"reputation": 81, "user_id": 6200447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oPlvp.gif?s=128&g=1", "display_name": "PP Laru", "link": "https://stackoverflow.com/users/6200447/pp-laru"}, "edited": false, "score": 0, "creation_date": 1460587014, "post_id": 36606966, "comment_id": 60818290, "body": "I didn&#39;t ask for criticism, I asked why things are the way they are. I understand that the program pulls things from a garbage can of computer memory, but I want to know why it outputs the way it does. Run it for yourselves and avoid wasting your breath by bashing my professor."}, {"owner": {"reputation": 26917, "user_id": 1892179, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/umfON.jpg?s=128&g=1", "display_name": "Theodoros Chatzigiannakis", "link": "https://stackoverflow.com/users/1892179/theodoros-chatzigiannakis"}, "edited": false, "score": 0, "creation_date": 1460618307, "post_id": 36606966, "comment_id": 60828854, "body": "@awallace04 The existing answers have explained perfectly why it outputs what it does. If they haven&#39;t covered you, please phrase your question with more details and we can retry."}, {"owner": {"reputation": 777, "user_id": 1791084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f97e6a50390550004415bfe5a6032?s=128&d=identicon&r=PG", "display_name": "KidneyChris", "link": "https://stackoverflow.com/users/1791084/kidneychris"}, "edited": false, "score": 0, "creation_date": 1460640218, "post_id": 36606966, "comment_id": 60844818, "body": "@awallace04 If the more specific question is &quot;Why does the gibberish output look structured?&quot;, then we can consider that the bit of memory that you&#39;re looking at was probably used by some other program in the past to store some data. Generally, data will have some structure to it. Maybe you get long runs of 0s because whatever was using that area of memory earlier zero-d out a block and never got around to using it? It&#39;d be hard to tell for sure without knowing every memory allocation that has ever happened to the machine, however."}, {"owner": {"reputation": 777, "user_id": 1791084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f97e6a50390550004415bfe5a6032?s=128&d=identicon&r=PG", "display_name": "KidneyChris", "link": "https://stackoverflow.com/users/1791084/kidneychris"}, "edited": false, "score": 0, "creation_date": 1460640330, "post_id": 36606966, "comment_id": 60844922, "body": "@awallace04 Do note; however, that you&#39;ll get different output on different machines, and even the same machine as time goes on (if you run it a lot in quick succession, the Operating System will probably re-allocate the same bit of memory for your program to live in. After all: that was the best block last time, and if nothing has changed then it probably still is)"}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1460574079, "post_id": 36607043, "comment_id": 60811416, "body": "Much better now :)"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 10, "last_activity_date": 1460574024, "last_edit_date": 1460574024, "creation_date": 1460573373, "answer_id": 36607043, "question_id": 36606966, "link": "https://stackoverflow.com/questions/36606966/what-is-going-on-in-computer-memory-here/36607043#36607043", "title": "What is going on in computer memory here?", "body": "<p><code>a</code> has one element.  That means</p>\n\n<pre><code>for (int i = 0; i &lt; 1000; i++ )\n{\n    outfile &lt;&lt; a[i] &lt;&lt; endl;\n    //cout &lt;&lt; INT_MAX/1000000 +a[i]/1000000 &lt;&lt; endl;\n    //histogram[  a[i]/1000000 ]++;\n}\n</code></pre>\n\n<p>is <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\">undefined behavior</a> as soon as <code>i &gt;= 1</code>.  Once you have undefined behavior anything can happen so we can no longer reason out what is going on.</p>\n"}, {"tags": [], "owner": {"reputation": 777, "user_id": 1791084, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f97e6a50390550004415bfe5a6032?s=128&d=identicon&r=PG", "display_name": "KidneyChris", "link": "https://stackoverflow.com/users/1791084/kidneychris"}, "is_accepted": false, "score": 7, "last_activity_date": 1460574860, "last_edit_date": 1460574860, "creation_date": 1460574277, "answer_id": 36607364, "question_id": 36606966, "link": "https://stackoverflow.com/questions/36606966/what-is-going-on-in-computer-memory-here/36607364#36607364", "title": "What is going on in computer memory here?", "body": "<p>Your professor is trying to demonstrate that the area of memory around your program contains \"stuff\" - specifically that the memory around your program isn't zero'd or set to any other default value. </p>\n\n<p>Presumably, this is part of a further point that accessing memory out-of-bounds doesn't guarantee that you'll have any particular value, and as such need to initialise your variables accordingly.</p>\n\n<p><strong>However;</strong> the problem is that we consider \"accessing out-of-bounds of an array\" to be undefined behaviour. Undefined behaviour in the C++ standard means \"the compiler can handle this situation in whatever way it considers appropriate\". Most compilers will serve you values from nearby memory locations (this being simple to do), but they're not required to do so. </p>\n\n<p>Likewise, some compilers can aggressively optimise-out undefined behaviour (like concluding that <code>i</code> can never be greater than 1 when used to index into <code>a</code>, and adjusting the loop appropriately): compilers are free to assume (for optimisation purposes) that undefined behaviour is never invoked by the programmer. See <a href=\"http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html\">this page from the LLVM project</a> for more details on undefined behaviour (noting that under \"Dereferences of Wild Pointers and Out of Bounds Array Accesses\", both the Clang team and g++ have made the same decision with regards to handling out-of-bounds errors: they access nearby memory locations; because it's the simplest thing to do in that case).</p>\n"}], "owner": {"reputation": 81, "user_id": 6200447, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/oPlvp.gif?s=128&g=1", "display_name": "PP Laru", "link": "https://stackoverflow.com/users/6200447/pp-laru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1460574860, "creation_date": 1460573126, "question_id": 36606966, "link": "https://stackoverflow.com/questions/36606966/what-is-going-on-in-computer-memory-here", "title": "What is going on in computer memory here?", "body": "<p>So my professor told my class to run this program, it supposedly shows what's going on in computer memory. When I ran it, my output file had the same numbers as my professor's output file for the first like 4 lines and then totally different numbers from then on. But this certainly doesn't seem like it's pulling random numbers, because a lot of the output is 0s and a lot of it are large numbers of similar lengths. Can anyone explain this? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;  // for files\n#include &lt;cstdlib&gt;   // for exit\n#include &lt;climits&gt; // for INT_MAX etc.\nint main( )\n{\nusing namespace std;\n\nofstream outfile;\noutfile.open(\"Whats_in_computer_memory.txt\");\n\ncout &lt;&lt; \"In this program, we declare a small array and then use array syntax \" &lt;&lt; endl\n     &lt;&lt; \"to see what is in the computer's memory. \" &lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl;\n\nint a[1];\n\nint histogram[214749];\n\nfor (int i = 0; i &lt; 214749; i++ )\n{\n    histogram[i] = 0;\n}\ncout &lt;&lt; \"&amp;a[0] = \" &lt;&lt; &amp;a[0] &lt;&lt; endl\n     &lt;&lt; \"&amp;histogram[0] = \" &lt;&lt; &amp;histogram[0]&lt;&lt; endl\n     &lt;&lt; \" \" &lt;&lt; endl;\n\ncout &lt;&lt; INT_MAX &lt;&lt; endl;\n\nfor (int i = 0; i &lt; 1000; i++ )\n{\n    outfile &lt;&lt; a[i] &lt;&lt; endl;\n    //cout &lt;&lt; INT_MAX/1000000 +a[i]/1000000 &lt;&lt; endl;\n    //histogram[  a[i]/1000000 ]++;\n}\n\nfor (int i = 0; i &lt; 2 ; i++ )\n{\n    cout &lt;&lt; histogram[ i ] &lt;&lt; endl;\n}\n\n\nchar dummy;\n\ncin &gt;&gt; dummy;\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2897, "user_id": 4816518, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh3.googleusercontent.com/-ArDOPEtYeyE/AAAAAAAAAAI/AAAAAAAAAAA/YeWau6kWbA0/photo.jpg?sz=128", "display_name": "Cache Staheli", "link": "https://stackoverflow.com/users/4816518/cache-staheli"}, "edited": false, "score": 0, "creation_date": 1460573110, "post_id": 36606897, "comment_id": 60810795, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1460573206, "post_id": 36606897, "comment_id": 60810849, "body": "try to divide 1 by 3 using only integer numbers on paper and you will see what is the problem. btw did you really write all this code without testing pieces of it ?"}, {"owner": {"reputation": 1, "user_id": 6041634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153317801176227/picture?type=large", "display_name": "Hampton", "link": "https://stackoverflow.com/users/6041634/hampton"}, "edited": false, "score": 0, "creation_date": 1460575116, "post_id": 36606897, "comment_id": 60812048, "body": "No I didn&#39;t, I&#39;m still pretty new to C++. What is the best way to test functions as i&#39;m writing them? Should I just make separate projects consisting of the functions and use dummy values to test them? Any advice would be appreciated."}], "answers": [{"tags": [], "owner": {"reputation": 1954, "user_id": 311156, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/8a9144e644eb558353c58e5460b54563?s=128&d=identicon&r=PG&f=1", "display_name": "Greg Ferreri", "link": "https://stackoverflow.com/users/311156/greg-ferreri"}, "is_accepted": false, "score": 2, "last_activity_date": 1460573181, "creation_date": 1460573181, "answer_id": 36606984, "question_id": 36606897, "link": "https://stackoverflow.com/questions/36606897/c-average-calculation-function-returning-0/36606984#36606984", "title": "C++ Average Calculation Function Returning 0", "body": "<p>You are dividing an <code>int</code> by an <code>int</code>, which is calculated as an <code>int</code>, and storing it in a <code>double</code>. What you have to do is explicitly cast at least one of your <code>int</code> values to a double first, like this:</p>\n\n<pre><code>void calculateAvg(Record players[], int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        players[i].avg = players[i].hit / (double) players[i].AB;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6041634, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153317801176227/picture?type=large", "display_name": "Hampton", "link": "https://stackoverflow.com/users/6041634/hampton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "closed_date": 1461737368, "answer_count": 1, "score": -3, "last_activity_date": 1460573181, "creation_date": 1460572888, "question_id": 36606897, "link": "https://stackoverflow.com/questions/36606897/c-average-calculation-function-returning-0", "closed_reason": "Not suitable for this site", "title": "C++ Average Calculation Function Returning 0", "body": "<p>I'm writing a program that calculates the batting averages of a user defined number of players. The program displays the name of a player, their number of times at bat, number of hits, and their batting average. Finally, it displays the total number of times the players were at bat, the total number of hits, and the overall average. For some reason, the functions that calculate the individual player average and overall average are returning 0. It's probably something small, but I'm stumped as to how to try and fix it.</p>\n\n<pre><code>//Batting Average Calculator\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n//Create Structure\nstruct Record\n{\n    string name;\n    int AB;\n    int hit;\n    double avg;\n};\n\n\nint getSize(int);\nvoid getData(Record[], int );\nint calculateTotalAB(Record[], int, int);\nint calculateTotalHit(Record[], int, int);\ndouble calculateTotalAvg(Record[], int, double);\nvoid calculateAvg(Record[], int);\nvoid display(Record[], int, int , int, double);\n\n\nint main()\n{\n    const int MaxSize = 50;\n    Record players[MaxSize]; \n\n    int size = 0;\n    int totalAB = 0;\n    int totalHit = 0;\n    double totalAvg = 0;\n\n    size = getSize(size);\n    getData(players, size);\n    totalAB = calculateTotalAB(players, size, totalAB);\n    totalHit = calculateTotalHit(players, size, totalHit);\n    calculateAvg(players,size);\n    totalAvg = calculateTotalAvg(players, size, totalAvg);\n    display(players, size, totalHit, totalAB, totalAvg);\n}\n\n//get number of players to be calculated\nint getSize(int size)\n{\n    cout &lt;&lt; \"Please enter the number of players on the team: \";\n    cin &gt;&gt; size;\n    return size;\n}\n\n//get Player name, AB, and hit\nvoid getData(Record players[], int size)\n{\n    string dummy;\n    getline(cin, dummy);\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; \"Please input the name of student \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        getline(cin, players[i].name);\n        cout &lt;&lt; \"Please input the number of times \"&lt;&lt;  players[i].name &lt;&lt; \" was at bat:  \";\n        cin &gt;&gt; players[i].AB;\n        cout &lt;&lt; \"Please input the number of hits for \" &lt;&lt; players[i].name &lt;&lt; \": \";\n        cin &gt;&gt; players[i].hit;\n        cout &lt;&lt; \" \" &lt;&lt; endl;\n        getline(cin, dummy);\n    }\n}\n\nint calculateTotalAB(Record players[], int size, int totalAB)\n{\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        totalAB = totalAB + players[i].AB;\n    }\n    return totalAB;\n}\n\nint calculateTotalHit(Record players[], int size, int totalHit)\n{\n\n    for (int i = 0; i &lt; size; i++)\n    {\n        totalHit = totalHit + players[i].hit;\n    }\n    return totalHit;\n}\n\nvoid calculateAvg(Record players[], int size)\n{\n    for (int i = 0; i &lt; size; i++)\n    {\n        players[i].avg = players[i].hit / players[i].AB;\n    }\n}\n\ndouble calculateTotalAvg(Record players[], int size, double totalAvg)\n{\n    double j = 0;\n    for (int i = 0; i &lt; size; i++)\n    {\n        j = j + players[i].avg;\n    }\n    totalAvg = j / size;\n    return totalAvg;\n}\n\nvoid display(Record players[], int size, int totalHit, int totalAB, double totalAvg)\n{\n    cout &lt;&lt; fixed &lt;&lt; showpoint &lt;&lt; setprecision(3);\n    cout &lt;&lt; \"Player        AB         Hit         Avg\" &lt;&lt; endl;\n    cout &lt;&lt; \"  \" &lt;&lt; endl;\n    for (int i = 0; i &lt; size; i++)\n    {\n        cout &lt;&lt; players[i].name &lt;&lt; setw(8) &lt;&lt; players[i].AB &lt;&lt; setw(5) &lt;&lt; players[i].hit &lt;&lt; setw(5) &lt;&lt; players[i].avg;\n    }\n    cout &lt;&lt; \"  \" &lt;&lt; endl;\n    cout &lt;&lt; \"Totals      \" &lt;&lt; totalAB &lt;&lt; \"      \" &lt;&lt; totalHit &lt;&lt; \"      \" &lt;&lt; totalAvg &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "windows", "ntdll", "nt-native-api"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1460573939, "post_id": 36606892, "comment_id": 60811329, "body": "If I may ask, why are you writing a native application? If the resources are mapped into the memory, and I presume they&#39;d be or you can easily map the rest of the executable in, you can access them just by knowing their address, so no special APIs are needed. What kinds of embedded resources do you use?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1460577353, "post_id": 36606892, "comment_id": 60813436, "body": "@KubaOber: You need a native application, if you want to execute before the Win32 subsystem is loaded. <i>&quot;You can access them just by knowing their address&quot;</i> - <code>FindResource</code> would be the API to get to know the address."}, {"owner": {"reputation": 685, "user_id": 637815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Pudqu.jpg?s=128&g=1", "display_name": "Thiago Cardoso", "link": "https://stackoverflow.com/users/637815/thiago-cardoso"}, "edited": false, "score": 0, "creation_date": 1460577697, "post_id": 36606892, "comment_id": 60813617, "body": "Exactly, it is an application that needs to be executed before Win32 is loaded. If the rest of the executable containing the resources aren&#39;t mapped to memory, how can I do it? And how can I programmatically find the resource address once I don&#39;t define it beforehand (it is the linker job to put the resource inside the executable)."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1460585124, "post_id": 36606892, "comment_id": 60817495, "body": "I imagine you&#39;d use <code>cvtres</code> to get an object file from your <code>.res</code> file, then dump it to know the symbol names of each resource, then declare these as extern data for the compiler, and take their address from C code as needed. The linker will patch it all up, just as it does for all other addresses unknown at compile time. You can also tweak linking so that the .rsrc section is mapped (if it isn&#39;t)."}, {"owner": {"reputation": 685, "user_id": 637815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Pudqu.jpg?s=128&g=1", "display_name": "Thiago Cardoso", "link": "https://stackoverflow.com/users/637815/thiago-cardoso"}, "edited": false, "score": 0, "creation_date": 1460637509, "post_id": 36606892, "comment_id": 60842545, "body": "That&#39;s a good suggestion. Let me see if anyone else has a less hackish way to solve it :)"}], "answers": [{"tags": [], "owner": {"reputation": 685, "user_id": 637815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Pudqu.jpg?s=128&g=1", "display_name": "Thiago Cardoso", "link": "https://stackoverflow.com/users/637815/thiago-cardoso"}, "is_accepted": true, "score": 3, "last_activity_date": 1465407403, "creation_date": 1465407403, "answer_id": 37709260, "question_id": 36606892, "link": "https://stackoverflow.com/questions/36606892/how-to-access-pe-resources-using-windows-native-api/37709260#37709260", "title": "How to access PE resources using Windows Native API?", "body": "<p>Ntdll exports <code>LdrFindResource_U</code> and <code>LdrAccessResource</code> that are almost counterparts of <a href=\"https://msdn.microsoft.com/en-us/library/ms648042(v=vs.85).aspx\" rel=\"nofollow\">FindResource</a> and <a href=\"https://msdn.microsoft.com/en-us/library/ms648046(v=vs.85).aspx\" rel=\"nofollow\">LoadResource</a>, respectively. You'll need in addition a counterpart of <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx\" rel=\"nofollow\">GetModuleHandle</a> to use them. <a href=\"https://www.winehq.org\" rel=\"nofollow\">Wine</a> source (specially <a href=\"http://source.winehq.org/git/wine.git/blob/HEAD:/dlls/kernel32/resource.c\" rel=\"nofollow\">resource.c</a> and <a href=\"http://source.winehq.org/git/wine.git/blob_plain/HEAD:/dlls/kernel32/module.c\" rel=\"nofollow\">module.c</a>) can be used as documentation of these functions.</p>\n"}], "owner": {"reputation": 685, "user_id": 637815, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Pudqu.jpg?s=128&g=1", "display_name": "Thiago Cardoso", "link": "https://stackoverflow.com/users/637815/thiago-cardoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 676, "favorite_count": 2, "accepted_answer_id": 37709260, "answer_count": 1, "score": 4, "last_activity_date": 1465407403, "creation_date": 1460572864, "question_id": 36606892, "link": "https://stackoverflow.com/questions/36606892/how-to-access-pe-resources-using-windows-native-api", "title": "How to access PE resources using Windows Native API?", "body": "<p>I have a <a href=\"https://technet.microsoft.com/en-us/sysinternals/bb897447.aspx\" rel=\"nofollow\">Windows native application</a> that contain <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff468907(v=vs.85).aspx\" rel=\"nofollow\">embedded resources</a> and I'd like to access them using the <a href=\"https://en.wikipedia.org/wiki/Native_API\" rel=\"nofollow\">native API</a>. Are there native functions that handle resources (something similar to <a href=\"https://msdn.microsoft.com/en-us/library/ms648042(v=vs.85).aspx\" rel=\"nofollow\">FindResource</a>/<a href=\"https://msdn.microsoft.com/en-us/library/ms648046(v=vs.85).aspx\" rel=\"nofollow\">LoadResource</a>) or I will have to create my own PE reader to extract them?</p>\n"}, {"tags": ["c++", "lua"], "comments": [{"owner": {"reputation": 5108, "user_id": 5675002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b0aaa2c9904c7543220c849d6a29d3?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5675002/vlad"}, "edited": false, "score": 0, "creation_date": 1460627956, "post_id": 36606891, "comment_id": 60835398, "body": "There&#39;s tons of possible causes, from trivial &quot;using after object deleted&quot; to less obvious cases with careless casts between void* and derived classes when multiple inheritance is involved. You&#39;d better share minimal code that reproduces issue."}, {"owner": {"reputation": 31, "user_id": 1286947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898b535600096b12b17f22caf09ada5?s=128&d=identicon&r=PG&f=1", "display_name": "matthew9090", "link": "https://stackoverflow.com/users/1286947/matthew9090"}, "reply_to_user": {"reputation": 5108, "user_id": 5675002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b0aaa2c9904c7543220c849d6a29d3?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5675002/vlad"}, "edited": false, "score": 0, "creation_date": 1460648277, "post_id": 36606891, "comment_id": 60851599, "body": "Well one of the classes I add inherits from two classes, whilst others don&#39;t, but I thought casting and storing them as void wouldn&#39;t matter as long as they all inherit from Tools::LuaScript it should be fine?"}, {"owner": {"reputation": 5108, "user_id": 5675002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b0aaa2c9904c7543220c849d6a29d3?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5675002/vlad"}, "edited": false, "score": 0, "creation_date": 1460654346, "post_id": 36606891, "comment_id": 60855287, "body": "If they all inherit Tools:LuaScript, then store pointer to that base, do not cast through void*. When you do that, info about subclass position in hierarchy is lost, you will get wrong pointer when you will cast back from void* to derived class. See example: <a href=\"http://ideone.com/4vbWS0\" rel=\"nofollow noreferrer\">ideone.com/4vbWS0</a>"}, {"owner": {"reputation": 31, "user_id": 1286947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898b535600096b12b17f22caf09ada5?s=128&d=identicon&r=PG&f=1", "display_name": "matthew9090", "link": "https://stackoverflow.com/users/1286947/matthew9090"}, "reply_to_user": {"reputation": 5108, "user_id": 5675002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06b0aaa2c9904c7543220c849d6a29d3?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/5675002/vlad"}, "edited": false, "score": 0, "creation_date": 1460656920, "post_id": 36606891, "comment_id": 60856695, "body": "So I changed the pointer to store directly to Tools::LuaScript but exactly the same happens, I still get that unaddressable access, and the program crashes."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 1286947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898b535600096b12b17f22caf09ada5?s=128&d=identicon&r=PG&f=1", "display_name": "matthew9090", "link": "https://stackoverflow.com/users/1286947/matthew9090"}, "is_accepted": true, "score": 1, "last_activity_date": 1460658130, "creation_date": 1460658130, "answer_id": 36631024, "question_id": 36606891, "link": "https://stackoverflow.com/questions/36606891/unaddressable-access-beyond-top-of-stack/36631024#36631024", "title": "Unaddressable access beyond top of stack", "body": "<p>So I always end up answering my own question... Rookie mistake really, I created an instance of the class like this:</p>\n\n<pre><code>A c(mapp, renderer);\n</code></pre>\n\n<p>When I should have created a pointer</p>\n\n<pre><code>A *a = new A(app, renderer);\n</code></pre>\n\n<p>Because I created it at the end of a function where the instance got destroyed, hence the stored pointer becoming invalid.</p>\n"}], "owner": {"reputation": 31, "user_id": 1286947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6898b535600096b12b17f22caf09ada5?s=128&d=identicon&r=PG&f=1", "display_name": "matthew9090", "link": "https://stackoverflow.com/users/1286947/matthew9090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "accepted_answer_id": 36631024, "answer_count": 1, "score": 2, "last_activity_date": 1460658130, "creation_date": 1460572859, "question_id": 36606891, "link": "https://stackoverflow.com/questions/36606891/unaddressable-access-beyond-top-of-stack", "title": "Unaddressable access beyond top of stack", "body": "<p>So I have a class to handle Lua scripts as part of a game. The following is the function to add a script to be run on every iteration along with many others running at the same time.</p>\n\n<pre><code>void create(string script, void *obj, map&lt;string, Tools::lua_function&gt; flist) // void *obj is a (Tools::LuaScript) casted to void*\n</code></pre>\n\n<p>It's stored in a map as followed:</p>\n\n<pre><code>map&lt;string, pair&lt;lua_State*, void*&gt; &gt; lua_states;\n</code></pre>\n\n<p>The create function just loads in the script and registers the function list, then stores the lua state on <code>lua_states[n]->first</code> and the pointer to the class which handles the script (derived from Tools::LuaScript class) on <code>void *obj</code> onto the <code>lua_states[n]->second</code></p>\n\n<p>Now I use this by calling <code>LuaHandler::run()</code> on every iteration which then loops through this map and calls <code>script->run(i->second.first);</code> because the <code>script</code> is the <code>void*</code> objected casted to the lua script class.</p>\n\n<pre><code>class LuaScript {\n    public:\n        virtual void run(lua_State*) = 0;\n        virtual void render() = 0;\n        virtual bool req_update() = 0;\n};\n</code></pre>\n\n<p>To clarify, the <code>script->run()</code> calls the class relating to that script file which updates the script with required variables etc..., this is the whole point of this setup.</p>\n\n<p>So this has worked fine, where I have successfully loaded three different scripts, but now, I created a new class, and added the script like this:</p>\n\n<pre><code>LuaHandler::i().create(\"script_file\", (void*)(this), function_list);\n</code></pre>\n\n<p>Because the LuaHandler is a singleton, I can bind scripts from the constructor of the class to be binded. I did exactly the same thing in a previous class, I just copied it and changed the name of the class to create this new one. </p>\n\n<p>However, when the time comes for this script to be loaded I get an <code>Illegal Instruction</code>, gdb didn't trace it very well so I used DrMemory and got this output:</p>\n\n<p><a href=\"http://pastebin.com/QuSqgxvp\" rel=\"nofollow\">http://pastebin.com/QuSqgxvp</a></p>\n\n<p>So in the run method where I use</p>\n\n<pre><code>Tools::LuaScript* script = (Tools::LuaScript*)i-&gt;second.second;\n\n    if(script-&gt;req_update()) { //LuaHandler:56\n        ...\n    }\n</code></pre>\n\n<p>This brings back some invalid pointer. I am calling <code>create()</code> just like I do in every class, but for some reason it fails in this particular case.</p>\n\n<p>I apologise if this is hard to understand, it's tricky to explain, if needs be I can send the 2 files involved.</p>\n\n<p>Tldr: Class derived from LuaScript (just allows the functions run(), render() and req_update() to be called abstractly) is 'binded' to a lua_State* using LuaHandler::i().create(), however when I loop through the binded scripts, and call any of these methods it fails. When it doesn't for other identical binded classes.</p>\n"}, {"tags": ["c++", "linux", "pipe", "unistd.h"], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 5432173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670346b04f51985692bb1ccff71876cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/5432173/tyler-k"}, "edited": false, "score": 0, "creation_date": 1460585472, "post_id": 36607866, "comment_id": 60817643, "body": "That did correct the problem of printing to the terminal; however, now it is only printing &quot;0&quot;. Did you get the number of all your currently running processes as your output?"}, {"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "reply_to_user": {"reputation": 90, "user_id": 5432173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670346b04f51985692bb1ccff71876cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/5432173/tyler-k"}, "edited": false, "score": 0, "creation_date": 1460590393, "post_id": 36607866, "comment_id": 60819496, "body": "Yes, it printed <code>243</code> just now when I tried it.  Are you checking for the failure of both <code>execlp</code> invocations?  When I changed <code>&quot;&#47;bin&#47;ps&quot;</code> to <code>&quot;&#47;foo&#47;bin&#47;ps&quot;</code> I see <code>0</code> as the main program&#39;s output."}, {"owner": {"reputation": 90, "user_id": 5432173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670346b04f51985692bb1ccff71876cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/5432173/tyler-k"}, "edited": false, "score": 0, "creation_date": 1460603855, "post_id": 36607866, "comment_id": 60823194, "body": "No I am not. How should I do that?"}, {"owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "reply_to_user": {"reputation": 90, "user_id": 5432173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670346b04f51985692bb1ccff71876cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/5432173/tyler-k"}, "edited": false, "score": 0, "creation_date": 1460607043, "post_id": 36607866, "comment_id": 60824119, "body": "Just put something like <code>perror(&quot;Child execlp failed&quot;);</code> after the first one and <code>perror(&quot;Parent execlp failed&quot;);</code> after the second."}], "tags": [], "owner": {"reputation": 27022, "user_id": 182693, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7e4422dd860fce9b9f3c024c8655c7d2?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/182693/sean"}, "is_accepted": true, "score": 0, "last_activity_date": 1460575780, "creation_date": 1460575780, "answer_id": 36607866, "question_id": 36606733, "link": "https://stackoverflow.com/questions/36606733/why-isnt-execlp-printing-output-to-the-terminal/36607866#36607866", "title": "Why isn&#39;t execlp() printing output to the terminal?", "body": "<p>You don't check for the failure of <code>execlp</code>.</p>\n\n<p>Are you sure all of your programs are where you think they are?  Your program works for me if I just change <code>\"/bin/wc\"</code> to <code>\"/usr/bin/wc\"</code>.</p>\n"}], "owner": {"reputation": 90, "user_id": 5432173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/670346b04f51985692bb1ccff71876cf?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler K", "link": "https://stackoverflow.com/users/5432173/tyler-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 651, "favorite_count": 0, "accepted_answer_id": 36607866, "answer_count": 1, "score": -1, "last_activity_date": 1460575780, "creation_date": 1460572346, "last_edit_date": 1495542749, "question_id": 36606733, "link": "https://stackoverflow.com/questions/36606733/why-isnt-execlp-printing-output-to-the-terminal", "title": "Why isn&#39;t execlp() printing output to the terminal?", "body": "<p>I am trying to link the output of a child process into the input of a parent process; the parent process is to execute a system call or command using the child's output.</p>\n\n<p>I have looked to the following threads for answer; however, I didn't quite get the answer I am looking for.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/32594108/c-piping-issue\">Pipe - C++ piping issue</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/1734932/linux-pipes-as-input-and-output\">Linux Pipes as Input and Output</a></p>\n\n<p>The problem I am having is that the command in the parent process is not being printed to the terminal. </p>\n\n<p>Why isn't the output being printed to the terminal? I have closed the ends of my pipe in both the parent and child processes. Furthermore, the parent's std_out isn't being modified.</p>\n\n<p>Here is my code.</p>\n\n<pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;  \n#include &lt;stdio.h&gt;     \n#include &lt;stdlib.h&gt;   \n#include &lt;unistd.h&gt;     \n#include &lt;iostream&gt;     \n\nusing namespace std;\n\nint main(int argc, const char * argv[])\n{\n    enum {RD, WR};\n    int fd[2];\n    pid_t pid;\n\n    if (pipe(fd) &lt; 0)\n        perror(\"pipe error\");\n    else if ((pid = fork()) &lt; 0)\n        perror(\"fork error\");\n    else if (pid == 0) { //In child process\n        close(fd[RD]);\n        dup2(fd[WR], STDOUT_FILENO);\n        close(fd[WR]);\n        execlp(\"/bin/ps\", \"ps\", \"-A\", NULL);\n    }\n    else { //In parent process\n        close(fd[WR]);\n        dup2(fd[RD], STDIN_FILENO);\n        close(fd[RD]);\n        wait(NULL);\n        execlp(\"/bin/wc\", \"wc\", \"-l\", NULL);\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2013", "opencv3.0"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460573473, "post_id": 36606715, "comment_id": 60811045, "body": "Use &quot;glob&quot; to get a vector of strings with the path of all images. Random shuffle the vector, and load the needed number of images"}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460575041, "post_id": 36606715, "comment_id": 60811992, "body": "note that i read all names of my images, and i put it in a file, than i load it, and now i would to load only 80% of them for training, but not only the fist ones ."}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1460575679, "post_id": 36606715, "comment_id": 60812385, "body": "i have a nother question please, how can i spicify 80% of the size of my list, and any library i must include (for the shuffle random, and for the percentage) ?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1460585623, "post_id": 36606715, "comment_id": 60817710, "body": "Please note that this is a question and answer site, not a code writing service. If you <a href=\"https://stackoverflow.com/posts/36606715/edit\">edit</a> your question to describe what you have tried so far and where you are stuck, then we can try to help with specific problems. You should also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1460613255, "post_id": 36606715, "comment_id": 60826171, "body": "yes, i tried but i couldn&#39;t do it"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1460583439, "post_id": 36609645, "comment_id": 60816736, "body": "very good, thank you very much, I&#39;m so happy for your help. now can you tell me please how can i read the rest of images (20%) for the test part, without repete (i mean an image used for train, must be not used for test) ? please"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "reply_to_user": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1460626769, "post_id": 36609645, "comment_id": 60834558, "body": "Just use images from index <code>N</code> to <code>filenames.size()</code>. And try to study a little how C++ works"}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1460635677, "post_id": 36609645, "comment_id": 60841047, "body": "thank you verry much, i did it."}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1460818653, "post_id": 36609645, "comment_id": 60923240, "body": "Miki , can you answer my quesion in the link below        <a href=\"http://stackoverflow.com/questions/36655182/roc-curve-in-opencv3-0-0\" title=\"roc curve in opencv3 0 0\">stackoverflow.com/questions/36655182/roc-curve-in-opencv3-0-&zwnj;&#8203;0</a>"}, {"owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "edited": false, "score": 0, "creation_date": 1461706782, "post_id": 36609645, "comment_id": 61319172, "body": "can you please help me, I want an answer for my question <a href=\"http://stackoverflow.com/questions/36876093/no-lineaire-svm-in-opencv-3-0-0\" title=\"no lineaire svm in opencv 3 0 0\">stackoverflow.com/questions/36876093/&hellip;</a>"}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": true, "score": 0, "last_activity_date": 1460581907, "last_edit_date": 1495541259, "creation_date": 1460581907, "answer_id": 36609645, "question_id": 36606715, "link": "https://stackoverflow.com/questions/36606715/read-some-images-randomly-using-a-percentage-in-opencv-3-0-0/36609645#36609645", "title": "read some images randomly using a percentage in OpenCv 3.0.0", "body": "<p>You can:</p>\n\n<ul>\n<li><p>read all files in the specified folder with OpenCV <a href=\"https://stackoverflow.com/a/26536198/5008845\">glob</a> function. You'll save all filenames into a <code>std::vector&lt;std::string&gt;</code>,</p></li>\n<li><p><code>std::random_shuffle</code> the vector of file names</p></li>\n<li><p>Keep only the first XX% names of the shuffled vector </p></li>\n<li><p>Do something with your images</p></li>\n</ul>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    // Read all .png files from the specified folder\n    std::string folder = \"D:/SO/img/*.png\";\n    std::vector&lt;std::string&gt; filenames;\n    cv::glob(folder, filenames);\n\n    // Random shuffle\n    std::random_shuffle(filenames.begin(), filenames.end());\n\n    // Keep 80%\n    float how_many = 0.80;\n    size_t N = filenames.size() * how_many;\n\n    // Do something with N random images\n    for (size_t i = 0; i &lt; N; ++i)\n    {\n        // Load and show image\n        cv::Mat3b img = cv::imread(filenames[i]);\n        cv::imshow(\"Img\", img);\n        cv::waitKey(1);\n    }\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6050451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49f65f6b9f51ce0d169b2b4a97d1688d?s=128&d=identicon&r=PG&f=1", "display_name": "nadjet", "link": "https://stackoverflow.com/users/6050451/nadjet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "closed_date": 1460619147, "accepted_answer_id": 36609645, "answer_count": 1, "score": -4, "last_activity_date": 1460581907, "creation_date": 1460572297, "question_id": 36606715, "link": "https://stackoverflow.com/questions/36606715/read-some-images-randomly-using-a-percentage-in-opencv-3-0-0", "closed_reason": "Needs details or clarity", "title": "read some images randomly using a percentage in OpenCv 3.0.0", "body": "<p>i would to devllop a SVM classifier,for that i have images, and i would to read 80% for training, and 20% for test randomly, using OpenCv 3.0.0 and C++.\ncan you help me please.\nmy images are in the same folder.</p>\n"}, {"tags": ["c++", "sockets", "tcp", "sfml", "packets"], "comments": [{"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 1, "creation_date": 1460573807, "post_id": 36606696, "comment_id": 60811243, "body": "There&#39;s more than &quot;Error&quot; in the <a href=\"http://www.sfml-dev.org/documentation/2.3/classsf_1_1Socket.php#a51bf0fd51057b98a10fbb866246176dc\" rel=\"nofollow noreferrer\"><code>sf::Socket::Status</code> enum</a>. Make sure to consider success transfer only when it&#39;s <code>Done</code>."}, {"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "reply_to_user": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1460575986, "post_id": 36606696, "comment_id": 60812572, "body": "It sends done I just tried it. The send and recieve members are blocking when using packets and won&#39;t continue until they are finished."}, {"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "reply_to_user": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1460578705, "post_id": 36606696, "comment_id": 60814212, "body": "So I opened it using a hex editor and noticed i was losing a byte towards the end. Any idea what could cause this"}, {"owner": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1460583031, "post_id": 36606696, "comment_id": 60816503, "body": "Just a guess: is your file ending with a <code>\\n</code>? Since <code>getline</code> will not include it in <code>tmp</code>, you might be missing one char here. You can try the same program but without reading the file -- just store the data directly in the code -- and see if it&#39;s a networking issue or a read/write issue."}, {"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "reply_to_user": {"reputation": 3364, "user_id": 520217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/417a6f6d3cffb86f937638e050d89006?s=128&d=identicon&r=PG", "display_name": "Hiura", "link": "https://stackoverflow.com/users/520217/hiura"}, "edited": false, "score": 0, "creation_date": 1460583207, "post_id": 36606696, "comment_id": 60816609, "body": "Alright I&#39;ll try that I&#39;ll get back"}], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461174156, "post_id": 36621806, "comment_id": 61083042, "body": "Close packet dosen&#39;t have a definition for putting data into char you have to make it a char pointer."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461174741, "post_id": 36621806, "comment_id": 61083374, "body": "@Jrank2013 Right, just replace <code>char</code> by <code>Int8</code> everywhere."}, {"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461175299, "post_id": 36621806, "comment_id": 61083730, "body": "Int8 can store char data?"}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461175363, "post_id": 36621806, "comment_id": 61083770, "body": "@Jrank2013 Yes, an Int8 has 8 bits (a byte) just like a char."}, {"owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461183690, "post_id": 36621806, "comment_id": 61089037, "body": "This won&#39;t work becuase int8 is signed and char is unsigned this could lead to data loss."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "edited": false, "score": 0, "creation_date": 1461184398, "post_id": 36621806, "comment_id": 61089494, "body": "What makes you think a char is unsigned by default? Anyway, if your <code>char</code> datatype <i>is</i> unsigned, you could use <code>UInt8</code>."}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 2, "last_activity_date": 1460633553, "creation_date": 1460633553, "answer_id": 36621806, "question_id": 36606696, "link": "https://stackoverflow.com/questions/36606696/file-comes-corrupted-using-sfml-tcp-sockets-and-packtes/36621806#36621806", "title": "File Comes Corrupted Using SFML TCP Sockets and packtes", "body": "<p>Your file is a binary file. It's not a number of strings. Reading it as such is already missing bytes, even without sending it over a network. Treat your file as a sequence of bytes:</p>\n\n<pre><code>#include &lt;SFML/Network.hpp&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    sf::Packet packet;\n    sf::TcpListener tcpl;\n    sf::TcpSocket tcps;\n\n    std::ifstream fis(\"C:\\\\Users\\\\Cyber Security\\\\Documents\\\\Repos.git\\\\Agent\\\\x64\\\\Debug\\\\Project1.exe\", std::ios::binary);\n\n    std::vector&lt;char&gt; fileContents((std::istreambuf_iterator&lt;char&gt;(fis)), std::istreambuf_iterator&lt;char&gt;());\n\n    fis.close();\n\n    tcpl.listen(5050);\n\n    std::cout &lt;&lt; \"Listening\" &lt;&lt; std::endl;\n\n    tcpl.accept(tcps);\n\n    packet &lt;&lt; static_cast&lt;sf::Uint32&gt;(fileContents.size());\n\n    for (std::vector&lt;char&gt;::const_iterator it = fileContents.begin(); it != fileContents.end(); ++it) packet &lt;&lt; *it;\n\n    sf::Socket::Status status = tcps.send(packet);\n\n    if (status == sf::Socket::Error)\n        std::cout &lt;&lt; \"Error\";\n\n    std::cout &lt;&lt; \"Packet Sent\" &lt;&lt; std::endl;\n\n    tcpl.close();\n\n    std::cout &lt;&lt; \"Socket Closed\" &lt;&lt; std::endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>#include  &lt;SFML/Network.hpp&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    sf::Packet packet;\n    sf::TcpSocket tcps;\n    sf::Uint32 size = 0;\n\n    sf::TcpSocket::Status status = tcps.connect(\"10.10.10.10\", 5050);\n\n    if (status == sf::TcpSocket::Status::Done)\n    {\n        std::cout &lt;&lt; \"Starting Download of Packet\" &lt;&lt; std::endl;\n\n        status == tcps.receive(packet);\n\n        if (status == sf::Socket::Error)\n            std::cout &lt;&lt; \"Error\";\n\n        std::cout &lt;&lt; \"Packet Received\" &lt;&lt; std::endl;\n    }\n\n    std::ofstream fos(\"Project1.exe\", std::ofstream::binary);\n\n    packet &gt;&gt; size;\n\n    for (sf::Uint32 i = 0; i &lt; size; ++i)\n    {\n        char item;\n        packet &gt;&gt; item;\n        fos &lt;&lt; item;\n    }\n\n    fos.close();\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>The client is still missing a lot of error handling, but it's POC code anyway.</p>\n"}], "owner": {"reputation": 88, "user_id": 4946091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e47d7c3a5caf85f08fc75b1bf6b013?s=128&d=identicon&r=PG&f=1", "display_name": "Jrank2013", "link": "https://stackoverflow.com/users/4946091/jrank2013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460633553, "creation_date": 1460572239, "question_id": 36606696, "link": "https://stackoverflow.com/questions/36606696/file-comes-corrupted-using-sfml-tcp-sockets-and-packtes", "title": "File Comes Corrupted Using SFML TCP Sockets and packtes", "body": "<p>I'm writing code to for a client to connect to a server and the server to respond and send a .exe file. I am using the SFML networking library to write my code. I can successfully send the file with the correct size but the wrong md5sum which means something is getting changed but i can't figure out where.\nHere is my code can someone spot my mistake.\n Sever:</p>\n\n<pre><code>#include &lt;SFML/Network.hpp&gt;\n#include  &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n\nint main()\n{\n    std::string i{ \"Hello World\" };\n    sf::Packet packet;\n    //packet &lt;&lt; i;\n    sf::TcpListener tcpl;\n    sf::TcpSocket tcps;\n    std::vector&lt;std::string&gt; Buffer;\n    std::string tmp;\n\n    std::ifstream fis(\"C:\\\\Users\\\\Cyber Security\\\\Documents\\\\Repos.git\\\\Agent\\\\x64\\\\Debug\\\\Project1.exe\", std::ios::in |    std::ios::binary);\n\n\n\n    tcpl.listen(5050);\n\n    std::cout &lt;&lt; \"Listening\" &lt;&lt; std::endl;\n\n        tcpl.accept(tcps);\n\n    while (std::getline(fis,tmp))\n    {\n        Buffer.push_back(tmp);\n    };\n\n    packet &lt;&lt; static_cast&lt;sf::Uint32&gt;(Buffer.size());\n    for (std::vector&lt;std::string&gt;::const_iterator it = Buffer.begin(); it != Buffer.end(); ++it)\n        packet &lt;&lt; *it;\n    sf::Socket::Status status = tcps.send(packet);\n    if (status == sf::Socket::Error)\n        std::cout &lt;&lt; \"Error\";\n    fis.close();\n    std::cout &lt;&lt; \"Packet Sent\" &lt;&lt; std::endl;\n\n    tcpl.close();\n\n    std::cout &lt;&lt; \"Socket Closed\" &lt;&lt; std::endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Client:</p>\n\n<pre><code>#include  &lt;SFML/Network.hpp&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\nint main()\n{\n    std::string h{ \"\" };\n    sf::Packet packet;\n    sf::TcpSocket tcps;\n    sf::Uint32 size = 0;\n    std::vector&lt;std::string&gt; Buffer;\n\n    sf::TcpSocket::Status status= tcps.connect(\"10.10.10.10\", 5050);\n    std::ofstream fis;\n    if (status == sf::TcpSocket::Status::Done)\n    {\n        fis.open(\"Project1.exe\", std::ofstream::binary);\n        std::cout &lt;&lt; \"Starting Donwload of Packet\" &lt;&lt; std::endl;\n        status== tcps.receive(packet);\n        if (status == sf::Socket::Error)\n            std::cout &lt;&lt; \"Error\";\n        std::cout &lt;&lt; \"Packet Received\" &lt;&lt; std::endl;\n    }\n\n\n\n\n        packet &gt;&gt; size;\n        for (sf::Uint32 i = 0; i &lt; size; ++i)\n        {\n            std::string item;\n            packet &gt;&gt; item;\n            Buffer.push_back(item);\n        }\n     for (std::vector&lt;std::string&gt;::const_iterator it = Buffer.begin(); it != Buffer.end(); ++it)\n        fis &lt;&lt; *it;\n\n    fis.close();\n\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "c++11", "struct"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1460572029, "post_id": 36606540, "comment_id": 60810126, "body": "If you want to learn programming, you should learn to reduce the problem to the minimum until you identified what is actually causing the problem. Please read about how to create a <a href=\"http://stackoverflow.com/help/mcve\">mcve</a>. This will help you to identify the problem and to improve your question. At the moment there is too much irrelevant code."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2806536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/caacd8715a5f30c2d3b52a80b2ce63ce?s=128&d=identicon&r=PG&f=1", "display_name": "LismUK", "link": "https://stackoverflow.com/users/2806536/lismuk"}, "edited": false, "score": 0, "creation_date": 1460572584, "post_id": 36606612, "comment_id": 60810457, "body": "Ah! So simple. I&#39;ve been convinced that the problem lies in LinkedList and not Vehicle. Thank you this one simple answer was more helpful than you realise."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1460572339, "last_edit_date": 1460572339, "creation_date": 1460572029, "answer_id": 36606612, "question_id": 36606540, "link": "https://stackoverflow.com/questions/36606540/classes-structs-no-default-contructor/36606612#36606612", "title": "Classes &amp; Structs, no default contructor", "body": "<p><code>Node</code> has a member of type <code>Vehicle</code>.  Since you cannot default construct a <code>Vehicle</code> the default constructor for <code>Node</code> is marked as deleted. You will need to provide your own default constructor that constructs the <code>Vehicle</code> member to some state like</p>\n\n<pre><code>struct Node\n{\n    Vehicle data;\n    Node* next;\n    Node() : data(\"\", \"\", \"\", 0), next(nullptr) {}\n};\n</code></pre>\n\n<p>or provide a default constructor for <code>Vehicle</code> like</p>\n\n<pre><code>class Vehicle\n{\n    //...\npublic:\n    Vehicle() = default;\n    //...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 455, "user_id": 6162032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7rn7m.png?s=128&g=1", "display_name": "Nowhere Man", "link": "https://stackoverflow.com/users/6162032/nowhere-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1460572425, "creation_date": 1460572425, "answer_id": 36606752, "question_id": 36606540, "link": "https://stackoverflow.com/questions/36606540/classes-structs-no-default-contructor/36606752#36606752", "title": "Classes &amp; Structs, no default contructor", "body": "<p>The error is self explanatory. You have not explicitly initialized <code>vehicle</code> in your <code>Node</code> class as shown:</p>\n\n<pre><code>struct Node\n{\n    Vehicle data;\n    Node* next;\n    Node() : next(NULL) {} // NO initialization for vehicle\n};\n</code></pre>\n\n<p>The compiler will try and then construct a <code>Vehicle</code> using it's default constructor, but it finds none. In your vehicle class you have defined a constructor taking arguments:</p>\n\n<p><code>Vehicle(string makeIn, string modelIn, string regNoIn, int engineSizeIn);</code></p>\n\n<p>Thus the compiler will <em>not</em> generate one for you. To fix this you can either define a default constructor yourself, or you can declare one with the word <code>default</code> which will force the compiler too generate one:</p>\n"}], "owner": {"reputation": 119, "user_id": 2806536, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/caacd8715a5f30c2d3b52a80b2ce63ce?s=128&d=identicon&r=PG&f=1", "display_name": "LismUK", "link": "https://stackoverflow.com/users/2806536/lismuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 36606612, "answer_count": 2, "score": 0, "last_activity_date": 1460572425, "creation_date": 1460571818, "question_id": 36606540, "link": "https://stackoverflow.com/questions/36606540/classes-structs-no-default-contructor", "title": "Classes &amp; Structs, no default contructor", "body": "<p>I'm trying to build a Linked List who's elements are of my own specified type. Now I'm not going to lie I'm winging a lot of this having not had much experience with OOP in C++ but I'm stuck with a single error.</p>\n\n<p>My LinkedList:</p>\n\n<pre><code>#include \"Vehicle.h\"\n#include \"string\"\nusing namespace std;\n\nclass LinkedList\n{\nprivate:\n    struct Node\n    {\n        Vehicle data;\n        Node* next;\n    };\n\n    Node* root;\n    int noofitems;\n\npublic:\n    LinkedList();\n    int getNoOfItems();\n    Vehicle getItemByIndex(int index);\n    void addItem(Vehicle itemIn);\n    void deleteItem();\n    void insertItem(Vehicle itemIn);\n    ~LinkedList();\n};\n</code></pre>\n\n<p>The Constructor and addItem()</p>\n\n<pre><code>LinkedList::LinkedList() : root(NULL), noofitems(0) {}\n\nvoid LinkedList::addItem(Vehicle itemIn)\n{\n    Node* temp;\n    temp = new Node();\n    temp-&gt;data = itemIn;\n    temp-&gt;next = this-&gt;root;\n    this-&gt;root = temp;\n}\n</code></pre>\n\n<p>My compiler is giving me this error:\n    <code>error C2512: 'LinkedList::Node' : no appropriate default constructor available</code>. Now I've tried giving the struct a constructor like so:</p>\n\n<pre><code>struct Node\n{\n    Vehicle data;\n    Node* next;\n    Node() : next(NULL) {}\n};\n</code></pre>\n\n<p>But then I get a new error on top of the old one: <code>IntelliSense: no default constructor exists for class \"Vehicle\"</code>. The word constructor is starting to look wrong and I'm really frustrated. Thanks In advance.</p>\n\n<p>By the way if details of the vehicle class are needed:</p>\n\n<pre><code>class Vehicle\n{\n\nprotected:\n    string make;\n    string model;\n    string regNo;\n    int engineSize;\n    bool rented;\n\npublic:\n    Vehicle(string makeIn, string modelIn, string regNoIn, int engineSizeIn);\n    string getMakeModel(); // return two values concatinated\n    string getRegNo();\n    int getEngineSize();\n    bool getRented();\n    void setRented(bool rentedIn);\n    ~Vehicle();\n};\n\nVehicle::Vehicle(string makeIn, string modelIn, string regNoIn, int engineSizeIn) :\n                make(makeIn), model(modelIn), regNo(regNoIn), engineSize(engineSizeIn),\n                rented(false)\n{}\n\nstring Vehicle::getMakeModel()\n{\n    return make + \" \" + model;\n}\n\nstring Vehicle::getRegNo()\n{\n    return regNo;\n}\n\nint Vehicle::getEngineSize()\n{\n    return engineSize;\n}\n\nbool Vehicle::getRented()\n{\n    return rented;\n}\n\nvoid Vehicle::setRented(bool rentedIn)\n{\n    rented = rentedIn;\n}\n\nVehicle::~Vehicle(){}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "video", "directshow", "directshow.net"], "comments": [{"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1460572252, "post_id": 36606465, "comment_id": 60810259, "body": "<b>&quot;i&#39;m getting error since in the SaveVideoToFile i didn&#39;t initialized the pEncoder&quot;</b>, which, i guess, means you already know what the problem is. So why not initialize the uninitialized variable then."}, {"owner": {"reputation": 33, "user_id": 6195923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669fd626b6cc9976c9152575b2a7013?s=128&d=identicon&r=PG&f=1", "display_name": "yaron shankari", "link": "https://stackoverflow.com/users/6195923/yaron-shankari"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1460573261, "post_id": 36606465, "comment_id": 60810873, "body": "bkVnet right I forgot to mention that i&#39;m not sure how to initialized it. Tried to google for exmaples but didn&#39;t find."}, {"owner": {"reputation": 2767, "user_id": 4426074, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e08389efd2ef9d2eea52c0d283ee2771?s=128&d=identicon&r=PG&f=1", "display_name": "mmgross", "link": "https://stackoverflow.com/users/4426074/mmgross"}, "edited": false, "score": 0, "creation_date": 1460585525, "post_id": 36606465, "comment_id": 60817663, "body": "Please read <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> and edit your question accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6195923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669fd626b6cc9976c9152575b2a7013?s=128&d=identicon&r=PG&f=1", "display_name": "yaron shankari", "link": "https://stackoverflow.com/users/6195923/yaron-shankari"}, "edited": false, "score": 0, "creation_date": 1460575322, "post_id": 36607453, "comment_id": 60812173, "body": "Roman a question, If i&#39;m not using a the pEncoder at all wasn&#39;t it suppose to create avi file with video uncompressed ? And the place i&#39;m calling the method SaveVideoToFile is right ?"}, {"owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "reply_to_user": {"reputation": 33, "user_id": 6195923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669fd626b6cc9976c9152575b2a7013?s=128&d=identicon&r=PG&f=1", "display_name": "yaron shankari", "link": "https://stackoverflow.com/users/6195923/yaron-shankari"}, "edited": false, "score": 0, "creation_date": 1460576625, "post_id": 36607453, "comment_id": 60812980, "body": "Uncompressed is in most cases not what you want, but you can try. The line with <code>IBaseFilter *pEncoder</code> should be <code>IBaseFilter *pEncoder = NULL;</code> Comment out the following AddFilter line, and then <code>pEncoder-&gt;Release</code> too."}, {"owner": {"reputation": 33, "user_id": 6195923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669fd626b6cc9976c9152575b2a7013?s=128&d=identicon&r=PG&f=1", "display_name": "yaron shankari", "link": "https://stackoverflow.com/users/6195923/yaron-shankari"}, "edited": false, "score": 0, "creation_date": 1460580771, "post_id": 36607453, "comment_id": 60815334, "body": "I did // on the lines AddFilter and the Release so it will not use them. And I set the *pEncoder to NULL; but still the file on the hard disk is empty 0 KB and when I quit the program it&#39;s deleting the file."}], "tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1460574518, "creation_date": 1460574518, "answer_id": 36607453, "question_id": 36606465, "link": "https://stackoverflow.com/questions/36606465/how-can-i-save-to-avi-file-the-captured-streaming-video-in-c/36607453#36607453", "title": "How can I save to avi file the captured streaming video in C++?", "body": "<p>The example code is clear about the <code>pEncoder</code> variable, \"not shown\":</p>\n\n<pre><code>IBaseFilter *pEncoder;\n//Create the encoder filter (not shown). &lt;&lt;-------- \n// Add it to the filter graph.\npFilterGraph-&gt;AddFilter(pEncoder, L\"Encoder\");\n</code></pre>\n\n<p>Not shown means that this initialization is omitted for code brevity. MSDN article for <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd374572\" rel=\"nofollow\">Choosing a Compression Filter</a> is somewhat outdated, along with AVI format, but eventually it is you who are responsible to arrange compression of your video stream and hence choose encoder filter, add it to the filter graph. You might want to try for starters <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd390690\" rel=\"nofollow\">MJPEG Compressor Filter</a>, which is a stock filter.</p>\n"}], "owner": {"reputation": 33, "user_id": 6195923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d669fd626b6cc9976c9152575b2a7013?s=128&d=identicon&r=PG&f=1", "display_name": "yaron shankari", "link": "https://stackoverflow.com/users/6195923/yaron-shankari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 776, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460587678, "creation_date": 1460571597, "last_edit_date": 1460587678, "question_id": 36606465, "link": "https://stackoverflow.com/questions/36606465/how-can-i-save-to-avi-file-the-captured-streaming-video-in-c", "title": "How can I save to avi file the captured streaming video in C++?", "body": "<p>This is the cpp file content:</p>\n\n<pre><code>// VideoCaptureFilterSampleDlg.cpp : implementation file\n//\n\n#include \"stdafx.h\"\n#include \"VideoCaptureFilterSample.h\"\n#include \"VideoCaptureFilterSampleDlg.h\"\n\n#ifdef _DEBUG\n#define new DEBUG_NEW\n#endif\n\n\n// CVideoCaptureFilterSampleDlg dialog\n\n\n\n\nCVideoCaptureFilterSampleDlg::CVideoCaptureFilterSampleDlg(CWnd* pParent /*=NULL*/)\n    : CDialog(CVideoCaptureFilterSampleDlg::IDD, pParent)\n{\n    m_hIcon = AfxGetApp()-&gt;LoadIcon(IDR_MAINFRAME);\n}\n\nvoid CVideoCaptureFilterSampleDlg::DoDataExchange(CDataExchange* pDX)\n{\n    CDialog::DoDataExchange(pDX);\n}\n\nBEGIN_MESSAGE_MAP(CVideoCaptureFilterSampleDlg, CDialog)\n    //{{AFX_MSG_MAP(CVideoCaptureFilterSampleDlg)\n    ON_WM_PAINT()\n    ON_WM_QUERYDRAGICON()\n    //}}AFX_MSG_MAP\n    ON_BN_CLICKED(IDC_PROPERTIES, &amp;CVideoCaptureFilterSampleDlg::OnBnClickedProperties)\nEND_MESSAGE_MAP()\n\n\n// CVideoCaptureFilterSampleDlg message handlers\n\nBOOL CVideoCaptureFilterSampleDlg::OnInitDialog()\n{\n    CDialog::OnInitDialog();\n\n    // Set the icon for this dialog.  The framework does this automatically\n    //  when the application's main window is not a dialog\n    SetIcon(m_hIcon, TRUE);         // Set big icon\n    SetIcon(m_hIcon, FALSE);        // Set small icon\n\n    // TODO: Add extra initialization here\n    InitGraph();\n\n    return TRUE;  // return TRUE  unless you set the focus to a control\n}\n\n// If you add a minimize button to your dialog, you will need the code below\n//  to draw the icon.  For MFC applications using the document/view model,\n//  this is automatically done for you by the framework.\n\nvoid CVideoCaptureFilterSampleDlg::OnPaint()\n{\n    if (IsIconic())\n    {\n        CPaintDC dc(this); // device context for painting\n\n        SendMessage(WM_ICONERASEBKGND, reinterpret_cast&lt;WPARAM&gt;(dc.GetSafeHdc()), 0);\n\n        // Center icon in client rectangle\n        int cxIcon = GetSystemMetrics(SM_CXICON);\n        int cyIcon = GetSystemMetrics(SM_CYICON);\n        CRect rect;\n        GetClientRect(&amp;rect);\n        int x = (rect.Width() - cxIcon + 1) / 2;\n        int y = (rect.Height() - cyIcon + 1) / 2;\n\n        // Draw the icon\n        dc.DrawIcon(x, y, m_hIcon);\n    }\n    else\n    {\n        CDialog::OnPaint();\n    }\n}\n\n// The system calls this function to obtain the cursor to display while the user drags\n//  the minimized window.\nHCURSOR CVideoCaptureFilterSampleDlg::OnQueryDragIcon()\n{\n    return static_cast&lt;HCURSOR&gt;(m_hIcon);\n}\n\nvoid CVideoCaptureFilterSampleDlg::OnBnClickedProperties()\n{\n    ShowProperties();\n}\n\nvoid CVideoCaptureFilterSampleDlg::OnOK()\n{\n    HRESULT hr = DestroyGraph();\n    _ASSERT(SUCCEEDED(hr));\n\n    CDialog::OnOK();\n}\n\nvoid CVideoCaptureFilterSampleDlg::OnCancel()\n{\n    HRESULT hr = DestroyGraph();\n    _ASSERT(SUCCEEDED(hr));\n\n    CDialog::OnCancel();\n}\n\n\n/*=============================================================================\n// BUILD GRAPH\n=============================================================================*/\n\n\n#include &lt;initguid.h&gt;\n#include &lt;streams.h&gt;    // for DirectShow headers\n#include &lt;wmcodecdsp.h&gt; // for MEDIASUBTYPE_MPEG_ADTS_AAC\n#include &lt;mmreg.h&gt;      // for WAVE_FORMAT_MPEG_ADTS_AAC\n#include &lt;dvdmedia.h&gt;   // for VIDEOINFOHEADER2\n#include &lt;bdaiface.h&gt;   // for IMPEG2PIDMap\n\n#pragma comment(lib, \"strmbaseu.lib\")       // for &lt;streams.h&gt;\n#pragma comment(lib, \"wmcodecdspuuid.lib\")  // for UUIDs from &lt;wmcodecdsp.h&gt;\n\n#if 1\n    #include \"../VideoCaptureFilter/IVideoCaptureFilter.h\"\n#else\n    #define ELGATO_VCF_VIDEO_PID    100 //!&lt; video PID in MPEG-TS stream\n    #define ELGATO_VCF_AUDIO_PID    101 //!&lt; audio PID in MPEG-TS stream\n\n    // Filter guid of Elgato Video Capture Filter\n    // {39F50F4C-99E1-464a-B6F9-D605B4FB5918}\n    DEFINE_GUID(CLSID_ElgatoVideoCaptureFilter, \n    0x39f50f4c, 0x99e1, 0x464a, 0xb6, 0xf9, 0xd6, 0x5, 0xb4, 0xfb, 0x59, 0x18);\n#endif\n\n// renderFromMpegTsPin: true  - use compressed data from the MPEG-TS pin (if present)\n//                      false - use raw data from the video and audio pins\nconst bool renderFromMpegTsPin = false;\n\n\n\n#ifndef SAFE_RELEASE\n#define SAFE_RELEASE(_pI_) { if(_pI_) { (_pI_)-&gt;Release(); (_pI_)=NULL;} }\n#endif\n\n\nCComPtr&lt;ICaptureGraphBuilder2&gt;  pCapBuilder;\nCComPtr&lt;IFilterGraph2&gt;          pFilterGraph;\nCComPtr&lt;IMediaControl&gt;          pMediaControl;\nCComPtr&lt;IVideoWindow&gt;           pVideoWindow;\nCComPtr&lt;IBasicAudio&gt;            pBasicAudio;\nCComPtr&lt;IBaseFilter&gt;            pCapFilter;\n\n//! see https://msdn.microsoft.com/en-us/library/windows/desktop/dd757808(v=vs.85).aspx\nAM_MEDIA_TYPE* GetVideoMediaType()\n{\n    static VIDEOINFOHEADER2 vih;\n    ZeroMemory(&amp;vih, sizeof(vih));\n\n    vih.bmiHeader.biSize            = sizeof(vih.bmiHeader);\n    vih.bmiHeader.biWidth           = 1920;\n    vih.bmiHeader.biHeight          = 1080;\n    vih.bmiHeader.biPlanes          = 1;\n    vih.bmiHeader.biBitCount        = 16;\n    vih.bmiHeader.biCompression     = MAKEFOURCC('H', '2', '6', '4');\n\n    vih.dwPictAspectRatioX          = 16;\n    vih.dwPictAspectRatioY          = 9;\n\n    static AM_MEDIA_TYPE  mt;\n    ZeroMemory(&amp;mt, sizeof(mt));\n\n    mt.majortype                    = MEDIATYPE_Video;\n    mt.subtype                      = MEDIASUBTYPE_H264;\n\n    mt.bFixedSizeSamples            = FALSE;\n    mt.bTemporalCompression         = TRUE;\n    mt.lSampleSize                  = 1;\n\n    mt.formattype                   = FORMAT_VideoInfo2;\n    mt.cbFormat                     = sizeof(vih);\n    mt.pbFormat                     = (BYTE*)&amp;vih;\n\n    return &amp;mt;\n}\n\n//! @return audio media type that is accepted by \"Microsoft DTV-DVD Audio Decoder\"\nAM_MEDIA_TYPE* GetAudioMediaType()\n{\n    static WAVEFORMATEX wfx;\n    ZeroMemory(&amp;wfx, sizeof(wfx));\n\n    wfx.wFormatTag                  = WAVE_FORMAT_MPEG_ADTS_AAC;\n    wfx.nChannels                   = 2;\n    wfx.nSamplesPerSec              = 48000;\n    wfx.nAvgBytesPerSec             = 14000;\n    wfx.nBlockAlign                 = 24;\n    wfx.wBitsPerSample              = 16;\n    wfx.cbSize                      = 0;\n\n    static AM_MEDIA_TYPE  mt;\n    ZeroMemory(&amp;mt, sizeof(mt));\n    mt.majortype                    = MEDIATYPE_Audio;\n    mt.subtype                      = MEDIASUBTYPE_MPEG_ADTS_AAC;\n\n    mt.bFixedSizeSamples            = TRUE;\n    mt.bTemporalCompression         = FALSE;\n    mt.lSampleSize                  = 1;\n\n    mt.formattype                   = FORMAT_WaveFormatEx;\n    mt.cbFormat                     = sizeof(wfx);\n    mt.pbFormat                     = (BYTE*)&amp;wfx;\n\n    return &amp;mt;\n}\n\nvoid _DumpGraph(IFilterGraph2* pIFilterGraph)\n{\n    _ASSERTE(NULL != pIFilterGraph);\n    if (NULL != pIFilterGraph)\n    {\n        CComPtr&lt;IEnumFilters&gt; pEnumFilters;\n        HRESULT hrTmp = pFilterGraph-&gt;EnumFilters(&amp;pEnumFilters);\n        if (SUCCEEDED(hrTmp))\n        {\n            IBaseFilter* pFilter = NULL;\n            while (S_OK == pEnumFilters-&gt;Next(1, &amp;pFilter, NULL))\n            {\n                FILTER_INFO filterInfo;\n                memset(&amp;filterInfo, 0, sizeof(filterInfo));\n                pFilter-&gt;QueryFilterInfo(&amp;filterInfo);\n                SAFE_RELEASE(filterInfo.pGraph);\n\n                SAFE_RELEASE(pFilter);\n\n                OutputDebugStringA(\"  Filter: \");\n                OutputDebugStringW(filterInfo.achName);\n                OutputDebugStringA(\"\\n\");\n\n            }\n        }\n    }\n}\n\nHRESULT CVideoCaptureFilterSampleDlg::InitGraph()\n{\n    CoInitialize(NULL);\n\n    HRESULT hr = S_OK;\n\n    /*----------------------------------------------------------------------------\n    // Create the graph builder &amp; filter graph\n    -----------------------------------------------------------------------------*/\n    // FMB NOTE: This is pretty safe, so we can assume it will not fail\n    hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC, IID_ICaptureGraphBuilder2, (void **)&amp;pCapBuilder);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC, IID_IFilterGraph2, (void **)&amp;pFilterGraph);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = pCapBuilder-&gt;SetFiltergraph(pFilterGraph);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = pFilterGraph-&gt;QueryInterface(IID_IMediaControl, (void**)&amp;pMediaControl);\n    _ASSERT(SUCCEEDED(hr));\n\n\n    /*-----------------------------------------------------------------------------\n    // Build graph\n    -----------------------------------------------------------------------------*/\n\n    // Add \"Elgato Game Capture HD\" filter\n    hr = CoCreateInstance(CLSID_ElgatoVideoCaptureFilter, NULL, CLSCTX_INPROC, IID_IBaseFilter, (void **)&amp;pCapFilter);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = pFilterGraph-&gt;AddFilter(pCapFilter, L\"Elgato Game Capture HD\");\n    _ASSERT(SUCCEEDED(hr));\n\n    // Add \"Video Mixing Renderer 9\" filter (VMR-9)\n    CComPtr&lt;IBaseFilter&gt; pVideoRendererFilter;\n    hr = CoCreateInstance(CLSID_VideoMixingRenderer9, NULL, CLSCTX_INPROC, IID_IBaseFilter, (void **)&amp;pVideoRendererFilter);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = pFilterGraph-&gt;AddFilter(pVideoRendererFilter, L\"VMR-9\");\n    _ASSERT(SUCCEEDED(hr));\n\n    // Add Audio Renderer filter (must be in the graph as reference clock even if it is not connected)\n    CComPtr&lt;IBaseFilter&gt; pAudioRendererFilter;\n    hr = CoCreateInstance(CLSID_DSoundRender, NULL, CLSCTX_INPROC, IID_IBaseFilter, (void **)&amp;pAudioRendererFilter);\n    _ASSERT(SUCCEEDED(hr));\n\n    hr = pFilterGraph-&gt;AddFilter(pAudioRendererFilter, L\"DirectSound Renderer\");\n    _ASSERT(SUCCEEDED(hr));\n\n    /*-----------------------------------------------------------------------------\n    // a) Render from MPEG-TS pin (if available)\n    -----------------------------------------------------------------------------*/\n    CComPtr&lt;IPin&gt; pMpegTsOutput;\n    HRESULT hrTmp = pCapBuilder-&gt;FindPin(pCapFilter, PINDIR_OUTPUT, NULL, &amp;MEDIATYPE_Stream, TRUE, 0, &amp;pMpegTsOutput);\n    bool hasMpegTsPin = SUCCEEDED(hrTmp); // Elgato note: older versions of the capture filter don't have an MPEG-TS pin\n\n    if (hasMpegTsPin &amp;&amp; renderFromMpegTsPin)\n    {\n        // Add Microsoft Demultiplexer filter\n        CComPtr&lt;IBaseFilter&gt; pDemultiplexerFilter;\n        hr = CoCreateInstance(CLSID_MPEG2Demultiplexer, NULL, CLSCTX_INPROC, IID_IBaseFilter, (void **)&amp;pDemultiplexerFilter);\n        _ASSERT(SUCCEEDED(hr));\n\n        hr = pFilterGraph-&gt;AddFilter(pDemultiplexerFilter, L\"MS Demux\");\n        _ASSERT(SUCCEEDED(hr));\n\n        // Configure Microsoft Demultiplexer filter\n        CComPtr&lt;IPin&gt; pVideoPin;\n        CComPtr&lt;IPin&gt; pAudioPin;\n        {\n            CComPtr&lt;IMpeg2Demultiplexer&gt; pIDemultiplexer;\n            hr = pDemultiplexerFilter-&gt;QueryInterface(IID_IMpeg2Demultiplexer, (void**)&amp;pIDemultiplexer);\n            _ASSERT(SUCCEEDED(hr));\n\n            // Add video pin\n            {\n                hr = pIDemultiplexer-&gt;CreateOutputPin(GetVideoMediaType(), L\"H.264\", &amp;pVideoPin);\n                _ASSERT(SUCCEEDED(hr));\n\n                CComPtr&lt;IMPEG2PIDMap&gt; pIPidMap;\n                hr = pVideoPin-&gt;QueryInterface(__uuidof(IMPEG2PIDMap), (void**)&amp;pIPidMap);\n                _ASSERT(SUCCEEDED(hr));\n\n                ULONG pid = ELGATO_VCF_VIDEO_PID;\n                hr = pIPidMap-&gt;MapPID(1, &amp;pid, MEDIA_ELEMENTARY_STREAM);\n                _ASSERT(SUCCEEDED(hr));\n            }\n\n            // Add audio pin\n            {\n                hr = pIDemultiplexer-&gt;CreateOutputPin(GetAudioMediaType(), L\"AAC\", &amp;pAudioPin);\n                _ASSERT(SUCCEEDED(hr));\n\n                CComPtr&lt;IMPEG2PIDMap&gt; pIPidMap;\n                hr = pAudioPin-&gt;QueryInterface(__uuidof(IMPEG2PIDMap), (void**)&amp;pIPidMap);\n                _ASSERT(SUCCEEDED(hr));\n\n                ULONG pid = ELGATO_VCF_AUDIO_PID;\n                hr = pIPidMap-&gt;MapPID(1, &amp;pid, MEDIA_ELEMENTARY_STREAM);\n                _ASSERT(SUCCEEDED(hr));\n            }\n        }\n\n        // Connect filters\n        CComPtr&lt;IPin&gt; pDemultiplexerInput;\n        hr = pCapBuilder-&gt;FindPin(pDemultiplexerFilter, PINDIR_INPUT, NULL, NULL, TRUE, 0, &amp;pDemultiplexerInput);\n        _ASSERT(SUCCEEDED(hr));\n\n        hr = pFilterGraph-&gt;Connect(pMpegTsOutput, pDemultiplexerInput);\n        _ASSERT(SUCCEEDED(hr));\n\n        hr = pCapBuilder-&gt;RenderStream(NULL, &amp;MEDIATYPE_Video, pVideoPin, NULL, pVideoRendererFilter);\n        _ASSERT(SUCCEEDED(hr));\n\n        hr = pCapBuilder-&gt;RenderStream(NULL, &amp;MEDIATYPE_Audio, pAudioPin, NULL, pAudioRendererFilter);\n        _ASSERT(SUCCEEDED(hr));\n\n    }\n    /*-----------------------------------------------------------------------------\n    // b) Render from audio and video pins\n    -----------------------------------------------------------------------------*/\n    else\n    {\n        hr = pCapBuilder-&gt;RenderStream(NULL, &amp;MEDIATYPE_Video, pCapFilter, NULL, pVideoRendererFilter);\n        _ASSERT(SUCCEEDED(hr));\n\n        hr = pCapBuilder-&gt;RenderStream(NULL, &amp;MEDIATYPE_Audio, pCapFilter, NULL, pAudioRendererFilter);\n        _ASSERT(SUCCEEDED(hr));\n    }\n\n    /*-----------------------------------------------------------------------------\n    // Set audio renderer as reference clock for the graph\n    -----------------------------------------------------------------------------*/\n    if (SUCCEEDED(hr))\n    {\n        CComPtr&lt;IReferenceClock&gt; pRefClock;\n        hr = pAudioRendererFilter-&gt;QueryInterface(IID_IReferenceClock, (void**)&amp;pRefClock);\n        _ASSERT(SUCCEEDED(hr));\n        CComPtr&lt;IMediaFilter&gt; pMediaFilter;\n        hr = pFilterGraph-&gt;QueryInterface(IID_IMediaFilter, (void**)&amp;pMediaFilter);\n        _ASSERT(SUCCEEDED(hr));\n        hr = pMediaFilter-&gt;SetSyncSource(pRefClock);\n        _ASSERT(SUCCEEDED(hr));\n\n#if 1\n        // TS WORKAROUND 15-Aug-11: Avoid cracking noise after graph is started \n        // by increasing the error tolerance of the Audio Renderer from 20ms to 200ms\n        CComPtr&lt;IAMClockSlave&gt; pIAMClockSlave;\n        HRESULT hrTmp = pAudioRendererFilter-&gt;QueryInterface(IID_IAMClockSlave, (void**)&amp;pIAMClockSlave);\n        if (SUCCEEDED(hrTmp))\n            hrTmp = pIAMClockSlave-&gt;SetErrorTolerance(200);\n        _ASSERT(SUCCEEDED(hrTmp));\n#endif\n    }\n\n    /*-----------------------------------------------------------------------------\n    // Playback\n    -----------------------------------------------------------------------------*/\n    // set video window\n    if (SUCCEEDED(hr))\n    {\n        hr = pFilterGraph-&gt;QueryInterface(IID_IVideoWindow, (void**)&amp;pVideoWindow);\n        _ASSERT(SUCCEEDED(hr));\n\n\n        CWnd* pWnd = GetDlgItem(IDC_VIDEOWINDOW);\n        CRect rcClient;\n        pWnd-&gt;GetClientRect(&amp;rcClient);\n\n        hr = pVideoWindow-&gt;put_Owner((OAHWND)pWnd-&gt;m_hWnd);\n        _ASSERT(SUCCEEDED(hr));\n\n        pVideoWindow-&gt;put_WindowStyleEx(0);\n        pVideoWindow-&gt;put_WindowStyle(WS_CHILD);\n        pVideoWindow-&gt;SetWindowPosition(0, 0, rcClient.Width(), rcClient.Height());\n\n        void SaveVideoToFile(int hr);\n        SaveVideoToFile(hr);\n    }\n\n    // play\n    hr = pMediaControl-&gt;Run();\n    _ASSERT(SUCCEEDED(hr));\n\n    // set volume to maximum\n    hr = pFilterGraph-&gt;QueryInterface(IID_IBasicAudio, (void**)&amp;pBasicAudio);\n    _ASSERT(SUCCEEDED(hr));\n    hr = pBasicAudio-&gt;put_Volume(0);\n    _ASSERT(SUCCEEDED(hr)); \n\n#ifdef _DEBUG   // Dump graph\n    _DumpGraph(pFilterGraph);\n#endif\n\n    return hr;\n}\n\nHRESULT CVideoCaptureFilterSampleDlg::DestroyGraph()\n{\n    HRESULT hr = S_FALSE;\n\n    _ASSERTE(NULL != pMediaControl);\n    hr = pMediaControl-&gt;Stop();\n    _ASSERT(SUCCEEDED(hr));\n\n\n    // Elgato note: This may take a few seconds\n    _ASSERTE(NULL != pFilterGraph);\n    hr = pFilterGraph-&gt;RemoveFilter(pCapFilter);\n    _ASSERT(SUCCEEDED(hr));\n\n    return S_OK;\n}\n\nHRESULT CVideoCaptureFilterSampleDlg::ShowProperties()\n{\n    HRESULT hr = E_FAIL;\n    if(NULL != pCapFilter)\n    {\n        CComPtr&lt;ISpecifyPropertyPages&gt; pSpec;\n        hr = pCapFilter-&gt;QueryInterface(IID_ISpecifyPropertyPages, (void **) &amp;pSpec);\n        if (hr == S_OK) \n        {\n            CAUUID  cauuid;\n            hr = pSpec-&gt;GetPages(&amp;cauuid);\n            if (hr == S_OK &amp;&amp; cauuid.cElems &gt; 0)\n            {\n                IBaseFilter* pFilter = pCapFilter;\n                hr = OleCreatePropertyFrame(NULL,40, 40, NULL, 1,(IUnknown **)&amp;pFilter, \n                    cauuid.cElems,(GUID *)cauuid.pElems, 0, 0, NULL);\n                CoTaskMemFree(cauuid.pElems);\n            }\n        }\n    }\n    return hr;\n}\n\nvoid SaveVideoToFile(int hr)\n{\n\n    IBaseFilter *pMux;\n    hr = pCapBuilder-&gt;SetOutputFileName(\n        &amp;MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.\n        L\"E:\\\\Example.avi\", // File name.\n        &amp;pMux,              // Receives a pointer to the mux.\n        NULL);\n\n    hr = pCapBuilder-&gt;RenderStream(\n        &amp;PIN_CATEGORY_CAPTURE, // Pin category.\n        &amp;MEDIATYPE_Video,      // Media type.\n        pCapFilter,                  // Capture filter.\n        NULL,                  // Intermediate filter (optional).\n        pMux);                 // Mux or file sink filter.\n\n                               // Release the mux filter.\n    pMux-&gt;Release();\n\n    IConfigAviMux *pConfigMux = NULL;\n    hr = pMux-&gt;QueryInterface(IID_IConfigAviMux, (void**)&amp;pConfigMux);\n    if (SUCCEEDED(hr))\n    {\n        pConfigMux-&gt;SetMasterStream(1);\n        pConfigMux-&gt;Release();\n    }\n\n    IConfigInterleaving *pInterleave = NULL;\n    hr = pMux-&gt;QueryInterface(IID_IConfigInterleaving, (void**)&amp;pInterleave);\n    if (SUCCEEDED(hr))\n    {\n        pInterleave-&gt;put_Mode(INTERLEAVE_CAPTURE);\n        pInterleave-&gt;Release();\n    }\n\n    IBaseFilter *pEncoder;\n    //Create the encoder filter (not shown).\n    // Add it to the filter graph.\n    pFilterGraph-&gt;AddFilter(pEncoder, L\"Encoder\");\n\n    //Call SetOutputFileName as shown previously.\n\n    // Render the stream.\n    hr = pCapBuilder-&gt;RenderStream(&amp;PIN_CATEGORY_CAPTURE, &amp;MEDIATYPE_Video,\n    pCapFilter,\n    pEncoder, pMux);\n    pEncoder-&gt;Release();\n}\n</code></pre>\n\n<p>This is the method I'm trying to save the video to a avi file. The example is from the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318627(v=vs.85).aspx\" rel=\"nofollow\">MSDN document site</a>:</p>\n\n<pre><code>void SaveVideoToFile(int hr)\n{\n\n    IBaseFilter *pMux;\n    hr = pCapBuilder-&gt;SetOutputFileName(\n        &amp;MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.\n        L\"E:\\\\Example.avi\", // File name.\n        &amp;pMux,              // Receives a pointer to the mux.\n        NULL);\n\n    hr = pCapBuilder-&gt;RenderStream(\n        &amp;PIN_CATEGORY_CAPTURE, // Pin category.\n        &amp;MEDIATYPE_Video,      // Media type.\n        pCapFilter,                  // Capture filter.\n        NULL,                  // Intermediate filter (optional).\n        pMux);                 // Mux or file sink filter.\n\n                               // Release the mux filter.\n    pMux-&gt;Release();\n\n    IConfigAviMux *pConfigMux = NULL;\n    hr = pMux-&gt;QueryInterface(IID_IConfigAviMux, (void**)&amp;pConfigMux);\n    if (SUCCEEDED(hr))\n    {\n        pConfigMux-&gt;SetMasterStream(1);\n        pConfigMux-&gt;Release();\n    }\n\n    IConfigInterleaving *pInterleave = NULL;\n    hr = pMux-&gt;QueryInterface(IID_IConfigInterleaving, (void**)&amp;pInterleave);\n    if (SUCCEEDED(hr))\n    {\n        pInterleave-&gt;put_Mode(INTERLEAVE_CAPTURE);\n        pInterleave-&gt;Release();\n    }\n\n    IBaseFilter *pEncoder;\n    //Create the encoder filter (not shown).\n    // Add it to the filter graph.\n    pFilterGraph-&gt;AddFilter(pEncoder, L\"Encoder\");\n\n    //Call SetOutputFileName as shown previously.\n\n    // Render the stream.\n    hr = pCapBuilder-&gt;RenderStream(&amp;PIN_CATEGORY_CAPTURE, &amp;MEDIATYPE_Video,\n    pCapFilter,\n    pEncoder, pMux);\n    pEncoder-&gt;Release();\n}\n</code></pre>\n\n<p>And I'm calling it like this in the bottom of the set video window part:</p>\n\n<pre><code>void SaveVideoToFile(int hr);\nSaveVideoToFile(hr);\n</code></pre>\n\n<p>Now I'm getting error since in the <code>SaveVideoToFile</code> I didn't initialized\n the <code>pEncoder</code>.  </p>\n\n<p>The error:</p>\n\n<blockquote>\n  <p>The variable 'pEncoder' is being used without being initialized</p>\n</blockquote>\n\n<p>If not using the pEncoder it does nothing no errors but it's saving anything to avi file.</p>\n\n<p>This is the example I'm using from Microsoft MSDN site: </p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd318627(v=vs.85).aspx\" rel=\"nofollow\">Capturing Video to an AVI File</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 3, "creation_date": 1460571087, "post_id": 36606226, "comment_id": 60809540, "body": "If you are using <b>fwrite()</b> to write to file, it returns the number of items actually written. Why don&#39;t you use those values,handling errors if any, to track the size of the file being written. Or do i get your question wrong?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1460571545, "post_id": 36606226, "comment_id": 60809836, "body": "Actually, the recording itself uses a <code>std::streambuf</code> object to write the data as little endian binary bits. I could track the number of bits there, but would rather keep the recording routine completely independent of the gui (i.e. they shouldn&#39;t share any data whatsoever)."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460572171, "post_id": 36606226, "comment_id": 60810209, "body": "You&#39;re going to have to keep track from within the function that writes the file. Buffering will prevent you from ever getting accurate size information using file functions such as <code>stat</code>, <code>ftell</code>, etc."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460572795, "post_id": 36606226, "comment_id": 60810590, "body": "What do you mean by &quot;go back and look at the file&quot;? Did you snapshot the file back at the time a zero was displayed and then you looked at that snapshot? If you&#39;re saying you found the correct data in the file <i>later</i>, then maybe the size of the file <i>was</i> zero at the time the display said it was zero. Do you have solid evidence that this displayed a zero at a time when the size of the file was not zero? Perhaps it&#39;s all working perfectly and the data just hasn&#39;t been written to the file yet."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460573758, "post_id": 36606226, "comment_id": 60811205, "body": "@Carey Gregory precision is not super important. I just want to have a ballpark figure for how big the file is getting while the user is recording."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460573947, "post_id": 36606226, "comment_id": 60811338, "body": "@David Schwartz I mean when I finish recording the file, I inspect it in my file explorer and see how big it is. The previous implementation of this GUI was in python -- but this used exactly the same C++ code to do the actual recording. In the python version I used <code>os.path.getsize</code> to track the size during the recording and it would show the growth as expected (which is to say &#39;yes&#39; I have reason to believe the 0 figure is not correct)."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460574126, "post_id": 36606226, "comment_id": 60811444, "body": "Also, when I let the recording keep running for minutes at a time, the displayed size output doesn&#39;t change, but the actual size of the file does."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460574178, "post_id": 36606226, "comment_id": 60811482, "body": "@dmedine So you never actually checked the size of the file with the operating system and confirmed that it didn&#39;t match the file size displayed? If that&#39;s true, I don&#39;t agree that you have any reason to believe the 0 figure is not correct. The file write could have occurred later. You have no way to know which of two problems you have -- an error in the file writing code causing the writes to occur too late to be reported or an error in the file size displaying code causing it to display a zero size."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460574467, "post_id": 36606226, "comment_id": 60811660, "body": "@David Schwartz Yes, I did check the size of the file with the operating system, in the python implementation. Again, the recording routine in both implementations is the same exact C++ code. The only difference is the GUI code (and the code to check the filesize as it&#39;s being written in a new thread)"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460574973, "post_id": 36606226, "comment_id": 60811957, "body": "ps I&#39;ve edited the question to show that the problem is most definitely with the GUI thread."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460575221, "post_id": 36606226, "comment_id": 60812109, "body": "You still haven&#39;t done the test I asked for and you&#39;re still jumping to the conclusion that the problem is the reporting. I can think of a number of ways you&#39;ll get these results and the file size actually is zero. The same C++ code might in some cases write to a file immediately and in some cases not do so until later. You could easily be reporting the number of bytes queued to be written to the file later rather than bytes actually written to the file. Please do the definitive test -- see that the file size is reported as non-zero by the OS and that your code later sees it as zero."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460575932, "post_id": 36606226, "comment_id": 60812542, "body": "@dmedine You won&#39;t get even vaguely accurate results, much less precise. Until buffers are flushed to disk there&#39;s just no way for an app other than the writing app to know how big an open file is."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460576739, "post_id": 36606226, "comment_id": 60813066, "body": "@CareyGregory That&#39;s false. Buffers do not need to be flushed to disk for the data to be read back or the size to be reported. The size of the open file will be correctly reported by the operating system regardless of any buffering or caching that takes place."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460578892, "post_id": 36606226, "comment_id": 60814307, "body": "@DavidSchwartz I recommend you write some code and see for yourself. The runtime libraries do buffering, and the OS knows nothing of what&#39;s in those buffers until they&#39;re flushed. It simply cannot report accurate results on an open file with another process doing buffered I/O to it. Impossible."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460581359, "post_id": 36606226, "comment_id": 60815634, "body": "Then why is it that <code>os.path.getsize</code> (which I assume is written in C to begin with) can do it? I think that is exactly the answer I am searching for."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460583273, "post_id": 36606226, "comment_id": 60816639, "body": "@CareyGregory The OS knows nothing of application buffers that <i>have nothing to do with the file</i>. He&#39;s asking for the size <i>of the file</i>. The OS absolutely <i>can</i> and <i>will</i> report 100% accurate sizes of an open file while a process is doing buffered I/O to it. Anything in such an application buffer <i>has not</i> been written to the file yet."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460584497, "post_id": 36606226, "comment_id": 60817227, "body": "@DavidSchwartz Now you seem to be agreeing with exactly what I said."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460585782, "post_id": 36606226, "comment_id": 60817782, "body": "Yes but how can I do this since the above methods are clearly failing?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460586666, "post_id": 36606226, "comment_id": 60818135, "body": "@CareyGregory Say you had some magic function that reported the size of the file including application buffers. Then say the application crashes before it can write those buffers to the file. Are you going to say the file shrunk? Or are you going to say the application &quot;unwrote&quot; them? Until the data has been passed to the OS, it has not yet been written to the file and reporting that as part of the size of the file would be erroneous and lead to absurd results. The question asks how to get the size of the file, and the OS knows the correct size. The buffering is irrelevant."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460586993, "post_id": 36606226, "comment_id": 60818281, "body": "@DavidSchwartz Fine, if you&#39;re going to take a dogmatic perspective like that then we completely agree. However, I seriously doubt that the OP has any use for that number since it will continue to be grossly different than what the application has written until the file is closed. The OP wants a progress indicator, and the physical contents of the file on disk are a terrible measure of that."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460587665, "post_id": 36606226, "comment_id": 60818535, "body": "@CareyGregory I&#39;ve tried to explain that to the OP, but he is insistent that he wants the actual size of the file, not how big the file will be when the application&#39;s buffers are flushed. Look at the comments exchanged between me and him."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460587734, "post_id": 36606226, "comment_id": 60818564, "body": "@dmedine One more time, to 100% clarify, you want the actual size of the file just as the OS would report it. Is that correct? You have confirmed that asking the operating system for the size of the file gives the size you want at the time that your application is reporting zero. Is that again correct?"}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460654931, "post_id": 36606226, "comment_id": 60855577, "body": "Yes. I want the C equivalent of <code>os.path.getsize</code> in python which most definitely reports an incrementally growing file throughout the repeated calls to <code>std::streambuff-&gt;sputn</code> which writes binary data to said file. The methods shown in my question report 0, which I believe to be false."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460659896, "post_id": 36606226, "comment_id": 60858530, "body": "So after some more investigation, it turns out that printing from my file-write function was stalling it and delaying the write operation so that I was writing much less data than I had thought so the progress was very slow. After 4096 bytes (Windows&#39; file buffer size I guess) it shows progress."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460660679, "post_id": 36606226, "comment_id": 60858944, "body": "After the Pepsi challenge, it looks like the <code>fstream</code> method is the fastest and most precise, but I am just judging by eye so don&#39;t quote me on that. The <code>stat</code> method seems to be lagging behind the actual file size and also slightly slowing down the GUI updates. This could be due to an OS/priority issue more than anything. I don&#39;t know. I am going to stick with the <code>fstream</code> technique in my code. Thank you all for an interesting discussion!"}], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 2, "creation_date": 1460571689, "post_id": 36606428, "comment_id": 60809911, "body": "You wouldn&#39;t be able to use this to display the size as it the file is written though."}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1460571954, "post_id": 36606428, "comment_id": 60810078, "body": "Op could how ever write a recursive function to do so using it"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1460572282, "post_id": 36606428, "comment_id": 60810280, "body": "@Afflicted Nope. Disk buffering will prevent <code>tellg</code> from giving you accurate results. The writing app would have to either use unbuffered I/O, which will probably kill performance, or do frequent flushes."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "reply_to_user": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1460572417, "post_id": 36606428, "comment_id": 60810345, "body": "@Stephen you are correct. The problem seems to be in the fact that the file is open elsewhere and being written to. In python I can just use <code>os.path.getsize</code> on the filename to get its size, even as it&#39;s being written to. I want to find out how to do this in C/C++."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460572880, "post_id": 36606428, "comment_id": 60810642, "body": "@CareyGregory What &quot;disk buffering&quot; are you talking about? Surely a sane operating system makes any disk buffering invisible to processes. Surely every sane OS and streams implementation will report the correct size of the file to the application."}, {"owner": {"reputation": 168, "user_id": 6158442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2z8gK.jpg?s=128&g=1", "display_name": "Steve Moore", "link": "https://stackoverflow.com/users/6158442/steve-moore"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460573962, "post_id": 36606428, "comment_id": 60811344, "body": "@David Schwartz one would assume, however I am going to fire up my laptop and test it. I&#39;m intrigued!"}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460575842, "post_id": 36606428, "comment_id": 60812483, "body": "@DavidSchwartz No, not at all. Unless you&#39;re using unbuffered I/O it&#39;s difficult to know for sure how large an open file is until the buffers are flushed. How would an OS know what a C (or C++) library has sitting in its cache?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460576661, "post_id": 36606428, "comment_id": 60813010, "body": "@CareyGregory Something sitting in the library&#39;s cache hasn&#39;t been written to the file yet. He&#39;s asking how to get the size of the file, not how to get the size of some application cache or buffer."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460579149, "post_id": 36606428, "comment_id": 60814463, "body": "@DavidSchwartz I know what he&#39;s asking. If an app does something like <code>fwrite</code> to an open file, the data from that write will most likely sit in a buffer and not be written immediately to disk. If you query the file size at that point from another app, it will be <b>zero.</b>  This is extremely common behavior and has been for a very long time."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460583195, "post_id": 36606428, "comment_id": 60816600, "body": "@CareyGregory You&#39;re confusing two different things. Whether or not the data is written to disk is irrelevant. The operating system will check the cache, not the disk. And he&#39;s asking the size <i>of the file</i>, not the size of some application buffer."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460584793, "post_id": 36606428, "comment_id": 60817360, "body": "@DavidSchwartz I&#39;m not talking about &quot;some application buffer.&quot; When you call <code>fwrite</code> or similar, it&#39;s extremely unlikely your data will end up in an OS cache immediately. It will be buffered, potentially for quite a while depending on the buffer size and app behavior. You could have demonstrated this for yourself in a whole lot less time than we&#39;ve been arguing about it. But if you&#39;re convinced that functions like <code>fwrite</code> go right to disk (or disk cache) immediately, feel free to continue with that fantasy."}, {"owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "edited": false, "score": 0, "creation_date": 1460585938, "post_id": 36606428, "comment_id": 60817849, "body": "BTW, in my application, this answer misbehaves just like the two methods I show in my question. I&#39;m not saying it doesn&#39;t work if the file is already closed, but apparently not when it is open."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460586459, "post_id": 36606428, "comment_id": 60818045, "body": "@CareyGregory Why do you say you&#39;re not talking about &quot;some application buffer&quot; and then go on to talk about some application buffer?! Yes, I know, functions like <code>fwrite</code> go into some application buffer, but that has nothing to do with the size of the file, which is what this question is about."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460586812, "post_id": 36606428, "comment_id": 60818199, "body": "@DavidSchwartz This is becoming almost comical so clearly we&#39;re not communicating very well and it&#39;s pointless to continue. I&#39;ll simply restate that you&#39;re not going to get an accurate size of the file using any of the methods discussed here. It&#39;s simply not possible. The only way to obtain an accurate size in near real time is for the writing application to provide it."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "edited": false, "score": 0, "creation_date": 1460587605, "post_id": 36606428, "comment_id": 60818521, "body": "@CareyGregory Except that will provide an inaccurate size, unless you think it makes sense to say that when the application crashes it &quot;unwrites&quot; to the file. This answer gives the OP what he insists that he needs."}, {"owner": {"reputation": 6675, "user_id": 854742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dc3befe29d589c7c34fd1600affc041?s=128&d=identicon&r=PG", "display_name": "Carey Gregory", "link": "https://stackoverflow.com/users/854742/carey-gregory"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460588833, "post_id": 36606428, "comment_id": 60818956, "body": "@DavidSchwartz Okay, I hadn&#39;t really kept up with the discussion between you and the OP. You and I actually agree. OP needs to face reality."}], "tags": [], "owner": {"reputation": 168, "user_id": 6158442, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2z8gK.jpg?s=128&g=1", "display_name": "Steve Moore", "link": "https://stackoverflow.com/users/6158442/steve-moore"}, "is_accepted": false, "score": 1, "last_activity_date": 1460571473, "creation_date": 1460571473, "answer_id": 36606428, "question_id": 36606226, "link": "https://stackoverflow.com/questions/36606226/c-get-the-size-of-a-file-while-its-being-written-to/36606428#36606428", "title": "C++ get the size of a file while it&#39;s being written to", "body": "<p>You can read all about C++ file manipulations here <a href=\"http://www.cplusplus.com/doc/tutorial/files/\" rel=\"nofollow\">http://www.cplusplus.com/doc/tutorial/files/</a></p>\n\n<p>This is an example of how I would do it.</p>\n\n<pre><code>#include &lt;fstream&gt;\n\nstd::ifstream::pos_type filesize(const char* file)\n{\n    std::ifstream in(file, std::ifstream::ate | std::ifstream::binary);\n    return in.tellg(); \n}\n</code></pre>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 6200254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ORk7w.png?s=128&g=1", "display_name": "Rezniaq", "link": "https://stackoverflow.com/users/6200254/rezniaq"}, "is_accepted": false, "score": 0, "last_activity_date": 1497560679, "last_edit_date": 1497560679, "creation_date": 1460571815, "answer_id": 36606538, "question_id": 36606226, "link": "https://stackoverflow.com/questions/36606226/c-get-the-size-of-a-file-while-its-being-written-to/36606538#36606538", "title": "C++ get the size of a file while it&#39;s being written to", "body": "<p>As a desperate alternative, you can use a ftell in \"the write data thread\" or maybe a variable to track the amount of data that is written, but going to the real problem, you must be making a mistake, maybe fopen never opens the file, or something like that.</p>\n\n<p>I'll copy a test code to show that this works at least in a singlethread app</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[]) \n{\n    FILE * mFile;\n    FILE * mFile2;\n\n    mFile = fopen(\"hi.txt\", \"a+\");\n\n    // fseek(mFile, 0, SEEK_END);\n\n    // @@ this is to make sure that fputs and fwrite works equal\n    // fputs(\"fopen example\", mFile);\n    fwrite(\"fopen ex\", 1, 9, mFile);\n\n    fseek(mFile, 0, SEEK_END);\n    std::cout &lt;&lt; ftell(mFile) &lt;&lt; \":\";\n\n    mFile2 = fopen(\"hi.txt\", \"rb\");\n        fseek(mFile2, 0, SEEK_END);\n        std::cout &lt;&lt; ftell(mFile2) &lt;&lt; std::endl;\n   fclose(mFile2);\n\n   fclose(mFile);\n\n   getchar();\n\n   return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 11649436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8343f382d524378bb8bb01742205d890?s=128&d=identicon&r=PG&f=1", "display_name": "TylerD007", "link": "https://stackoverflow.com/users/11649436/tylerd007"}, "is_accepted": false, "score": 0, "last_activity_date": 1560535818, "creation_date": 1560535818, "answer_id": 56603255, "question_id": 36606226, "link": "https://stackoverflow.com/questions/36606226/c-get-the-size-of-a-file-while-its-being-written-to/56603255#56603255", "title": "C++ get the size of a file while it&#39;s being written to", "body": "<p>Just use freopen function before calling stat. It seems freopen refreshes the file length.</p>\n"}], "owner": {"reputation": 454, "user_id": 4525932, "user_type": "registered", "accept_rate": 15, "profile_image": "https://lh4.googleusercontent.com/-2dHCJYSOCSE/AAAAAAAAAAI/AAAAAAAAABo/pZ1mLVANuzc/photo.jpg?sz=128", "display_name": "dmedine", "link": "https://stackoverflow.com/users/4525932/dmedine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1560535818, "creation_date": 1460570833, "last_edit_date": 1495541260, "question_id": 36606226, "link": "https://stackoverflow.com/questions/36606226/c-get-the-size-of-a-file-while-its-being-written-to", "title": "C++ get the size of a file while it&#39;s being written to", "body": "<p>I have a recording application that is reading data from a network stream and writing it to file. It works very well, but I would like to display the file size as the data is being written. Every second the gui thread updates the status bar to update the displayed time of recording. At this point I would also like to display the current file size.</p>\n\n<p>I originally consulted <a href=\"https://stackoverflow.com/questions/8236/how-do-you-determine-the-size-of-a-file-in-c\">this question</a> and have tried both the <code>stat</code> method:</p>\n\n<pre><code>struct stat stat_buf;\nint rc = stat(recFilename.c_str(), &amp;stat_buf);\nstd::cout &lt;&lt; recFilename &lt;&lt; \" \" &lt;&lt; stat_buf.st_size &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>(no error checking for simplicity) and the <code>fseek</code> method:</p>\n\n<pre><code>FILE *p_file = NULL;\np_file = fopen(recFilename.c_str(),\"rb\");\nfseek(p_file,0,SEEK_END);\nint size = ftell(p_file);\nfclose(p_file);\n</code></pre>\n\n<p>but either way, I get 0 for the file size. When I go back and look at the file I write to, the data is there and the size is correct. The recording is happening on a separate thread.</p>\n\n<p>I know that bytes are being written because I can print the size of the data as it is written in conjunction with the output of the methods shown above.\n<a href=\"https://i.stack.imgur.com/pV3UP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pV3UP.png\" alt=\"enter image description here\"></a></p>\n\n<p>The filename plus the 0 is what I print out from the GUI thread. 'Bytes written x' is out of the recording thread.</p>\n"}, {"tags": ["c++", "arm", "freertos"], "comments": [{"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 0, "creation_date": 1460573450, "post_id": 36606202, "comment_id": 60811019, "body": "What about the code where you presumably create the object and call <code>xTaskCreate()</code> with it somehow?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1460578178, "post_id": 36606202, "comment_id": 60813901, "body": "Could you extract a minimal example? In particular the template stuff and the multiple files are not necessary. Also, don&#39;t add multiple edit paragraphs and leave it to others to pick the relevant info from them. Instead, clean up your question as required by the site rules and make the relevant obvious."}, {"owner": {"reputation": 1787, "user_id": 1822033, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/53b51a609d2156118fcd08e2a7caebd3?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/1822033/pascal"}, "edited": false, "score": 0, "creation_date": 1460578816, "post_id": 36606202, "comment_id": 60814260, "body": "Sry, but I was asked about the missing sections (where the object is created and the xTaskCreate) and I do not think that there are much lines out of scope."}, {"owner": {"reputation": 18029, "user_id": 3156750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73e00c291e7b746a34f28622a64f0492?s=128&d=identicon&r=PG&f=1", "display_name": "Notlikethat", "link": "https://stackoverflow.com/users/3156750/notlikethat"}, "edited": false, "score": 1, "creation_date": 1460585956, "post_id": 36606202, "comment_id": 60817855, "body": "AFAICS, <code>taskfun()</code> is expecting an <code>HttpServer</code> object to be passed as its argument, so why are you passing a NULL argument to <code>sys_thread_new()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1787, "user_id": 1822033, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/53b51a609d2156118fcd08e2a7caebd3?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/1822033/pascal"}, "edited": false, "score": 0, "creation_date": 1460613378, "post_id": 36610710, "comment_id": 60826215, "body": "I will try your solution, but why xCreateTask should expect an HttpServer object? It&#39;s my decistion to specify something? And doing so whould result in an argument of <code>void run(void* httpServerObject)</code> isn&#39;t it?"}, {"owner": {"reputation": 67, "user_id": 4293156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba25cf52f73d949801368ad3e4515d8e?s=128&d=identicon&r=PG&f=1", "display_name": "mausik", "link": "https://stackoverflow.com/users/4293156/mausik"}, "reply_to_user": {"reputation": 1787, "user_id": 1822033, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/53b51a609d2156118fcd08e2a7caebd3?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/1822033/pascal"}, "edited": false, "score": 0, "creation_date": 1460621879, "post_id": 36610710, "comment_id": 60831213, "body": "I can&#39;t get what you&#39;re asking for,  could you please try to explain it again or provide an example?"}], "tags": [], "owner": {"reputation": 67, "user_id": 4293156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba25cf52f73d949801368ad3e4515d8e?s=128&d=identicon&r=PG&f=1", "display_name": "mausik", "link": "https://stackoverflow.com/users/4293156/mausik"}, "is_accepted": false, "score": 1, "last_activity_date": 1460647746, "last_edit_date": 1460647746, "creation_date": 1460586617, "answer_id": 36610710, "question_id": 36606202, "link": "https://stackoverflow.com/questions/36606202/freertos-cpp-function-pointer/36610710#36610710", "title": "FreeRTOS CPP Function Pointer", "body": "<p>I use something like this:</p>\n\n<pre><code>class MyClass{\npublic:\n    static void run( void* pvParams ){\n        ((MyClass*)pcParams)-&gt;runInner();\n    }\n    void runInner(){\n        while ( true ){\n            // TODO code here\n        }\n    }\n};\n</code></pre>\n\n<p>then pass pointer to an object when creating task</p>\n\n<pre><code>MyClass* x = new MyClass;\nxTaskCreate( MyClass::run, taskName, stackDepth, (void*) x, taskPrio, taskHandle );  \n</code></pre>\n\n<p>edit:</p>\n\n<p>Assuming you want to use templates:</p>\n\n<pre><code>template&lt;typename T&gt; \nvoid run ( T* p ){\n     ((T*)p)-&gt;run();\n}\n\nclass MyClass{\npublic:\n     void run(){\n         while ( true ){\n             // task code\n         }\n     }\n}\n</code></pre>\n\n<p>then creating the task</p>\n\n<pre><code>MyClass* x = new MyClass;\nxTaskCreate( run&lt;MyClass&gt;, taskName, stackDepth, x, taskPrio, taskHandle );\n</code></pre>\n\n<p>Edit:</p>\n\n<p>You need to cast <code>run</code> to <code>(void (*)(void*))</code></p>\n\n<pre><code>xTaskCreate( (void (*)(void*))run&lt;MyClass&gt;, taskName, stackDepth, x, taskPrio, taskHandle );\n</code></pre>\n"}], "owner": {"reputation": 1787, "user_id": 1822033, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/53b51a609d2156118fcd08e2a7caebd3?s=128&d=identicon&r=PG", "display_name": "Pascal", "link": "https://stackoverflow.com/users/1822033/pascal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1115, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1460647746, "creation_date": 1460570770, "last_edit_date": 1460578843, "question_id": 36606202, "link": "https://stackoverflow.com/questions/36606202/freertos-cpp-function-pointer", "title": "FreeRTOS CPP Function Pointer", "body": "<p>I want to use a member function of a CPP Class for a FreeRTOS taskFunction.</p>\n\n<p>Here is my initial solution</p>\n\n<pre><code>#ifndef TaskCPP_H\n#define TaskCPP_H\n\n#include \"FreeRTOS.h\"\n#include \"task.h\"\n\ntemplate&lt;typename T&gt;\nclass TaskBase {\n\nprotected:\n        xTaskHandle handle;\n        void run() {};\n\npublic:\n\n        static void taskfun(void* parm) {\n            static_cast&lt;T*&gt;(parm)-&gt;run();\n        #if INCLUDE_vTaskDelete\n            vTaskDelete(static_cast&lt;T*&gt;(parm)-&gt;handle);\n        #else\n            while(1)\n            vTaskDelay(10000);\n        #endif\n        }\n\n        virtual ~TaskBase() {\n#if INCLUDE_vTaskDelete\n                vTaskDelete(handle);\n#endif\n                return;\n        }\n\n};\n\n#endif /* __TaskCPP_H__ */\n\n#ifndef HTTPSERVER_H_\n#define HTTPSERVER_H_\n\n#include \"TaskBase.h\"\n#include &lt;string.h&gt;\n\n#include \"lwip/opt.h\"\n#include \"lwip/debug.h\"\n#include \"lwip/stats.h\"\n#include \"lwip/tcp.h\"\n#include \"lwip/api.h\"\n#include \"lwip/ip_addr.h\"\n\nclass HttpServer;\n\nclass HttpServer : public TaskBase&lt;HttpServer&gt; {\n\npublic:\n        HttpServer();\n        virtual ~HttpServer();\n\n        void run();\n\n        void listen(ip_addr *address, uint8_t port);\n        void print();\n\nprotected:\n        char taskName[50];\n        ip_addr address;\n        uint8_t port;\n\n};\n\n#endif /* HTTPSERVER_H_ */\n\n#include \"HttpServer.h\"\n\nHttpServer::HttpServer()\n{\n\n}\n\nvoid HttpServer::listen(ip_addr *address, uint8_t port) {\n\n        char buf[16];\n        sprintf(taskName, \"%s_%d\\r\\n\", ipaddr_ntoa_r(address, buf, 16), port);\n\n        DEBUGOUT(\"ADDRESS Listen: %x\\r\\n\", &amp;taskName);\n\n        this-&gt;handle = sys_thread_new(this-&gt;taskName, &amp;taskfun, NULL, DEFAULT_THREAD_STACKSIZE + 128, DEFAULT_THREAD_PRIO);\n\n}\n\nvoid HttpServer::run() {\n\n        while(1) {\n\n                print();\n\n                Board_LED_Toggle(LEDS_LED2);\n                vTaskDelay(configTICK_RATE_HZ / 14);\n\n        }\n\n}\n\nvoid HttpServer::print() {\n\n        DEBUGOUT(\"ADDRESS Listen: %x\\r\\n\", &amp;taskName);\n\n}\n\nHttpServer::~HttpServer() {\n        // TODO Auto-generated destructor stub\n}\n</code></pre>\n\n<p>Now my Problem ist that the context is not the same inside the run function. Printing the memory location of <code>taskName</code> is different inside <code>listen(...)</code> and <code>run(...)</code></p>\n\n<p>My nasty suspicion is that doing a static_cast of the run function looses the class context? Am I wrong?</p>\n\n<p>Is there any other idea to provide a static function pointer to freeRTOS of a Class member function?</p>\n\n<p>Here are the missing functions. The <code>main</code> and the <code>sys_thread_new</code> which is a wrapper only.</p>\n\n<pre><code>int main(void) {\n\n        prvSetupHardware();\n\n        HttpServer server;\n        server.listen(IP_ADDR_ANY, 80);\n\n        /* Start the scheduler */\n        vTaskStartScheduler();\n\n        /* Should never arrive here */\n        return 1;\n\n}\n\nsys_thread_t sys_thread_new( const char *pcName, void( *pxThread )( void *pvParameters ), void *pvArg, int iStackSize, int iPriority )\n{\nxTaskHandle xCreatedTask;\nportBASE_TYPE xResult;\nsys_thread_t xReturn;\n\n        xResult = xTaskCreate( pxThread, ( signed char * ) pcName, iStackSize, pvArg, iPriority, &amp;xCreatedTask );\n\n        if( xResult == pdPASS )\n        {\n                xReturn = xCreatedTask;\n        }\n        else\n        {\n                xReturn = NULL;\n        }\n\n        return xReturn;\n}\n</code></pre>\n"}, {"tags": ["c++", "oop", "c++11", "design-patterns", "builder"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 3, "creation_date": 1460570768, "post_id": 36606156, "comment_id": 60809359, "body": "Ugh, please don&#39;t post massive portions of code and massive error messages. You&#39;re supposed to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"tags": [], "owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "is_accepted": true, "score": 1, "last_activity_date": 1460574822, "last_edit_date": 1460574822, "creation_date": 1460571035, "answer_id": 36606285, "question_id": 36606156, "link": "https://stackoverflow.com/questions/36606156/c-builder-pattern-with-forward-declaration/36606285#36606285", "title": "C++ Builder Pattern with Forward Declaration", "body": "<p>Definition of <code>class CameraBuilder</code> should be visible in <code>main.cpp</code>, so you can't just forward-declare it in <code>cameravalue.h</code>. But you can make the definitions of its member functions out-of-line:</p>\n\n<pre><code>// cameravalue.h\nclass CameraValue {\n    class CameraBuilder {\n    public:\n        CameraBuilder(int id);\n        ...\n    };\n};\n\n// cameravalue.cpp\nCameraValue::CameraBuilder::CameraBuilder(int id) {\n    ...\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 2046088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5e3040d11c64496ec026ae367bea48f?s=128&d=identicon&r=PG", "display_name": "napat", "link": "https://stackoverflow.com/users/2046088/napat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "closed_date": 1460573250, "accepted_answer_id": 36606285, "answer_count": 1, "score": -1, "last_activity_date": 1617757444, "creation_date": 1460570655, "last_edit_date": 1617757444, "question_id": 36606156, "link": "https://stackoverflow.com/questions/36606156/c-builder-pattern-with-forward-declaration", "closed_reason": "Not suitable for this site", "title": "C++ Builder Pattern with Forward Declaration", "body": "<p>I recently got stuck in a situation. In the first version, everything is implemented in header file and it works fine. In the second version <em>when i tried to separate implementation from header declarations</em>, I got many errors. In the below lines, i m going to demonstrate problem. Thanks in advance..</p>\n<h2>First Version (it works fine!)</h2>\n<p><strong>cameravalue.h</strong></p>\n<pre><code>#ifndef CAMERAVALUE_H\n#define CAMERAVALUE_H\n#include &lt;string&gt;\n\n\n\nclass CameraValue\n{\nprivate:\n\n  class CameraProperties\n  {\n  private:\n    CameraProperties()\n      : mId(-1),\n        mName(),\n        mAddress(),\n        mExposure(),\n        mFocus()\n    {}\n\n    int mId;\n    std::string mName;\n    std::string mAddress;\n    std::string mExposure;\n    long long  mFocus;\n\n    friend class CameraValue;\n    friend class CameraBuilder;\n  };\n\npublic:\n  class CameraBuilder\n  {\n  public:\n    CameraBuilder(int id)\n    {\n      mProperties.mId = id;\n    }\n\n    CameraBuilder&amp; setName(std::string&amp; name)\n    {\n      mProperties.mName = name;\n      return *this;\n    }\n\n    CameraBuilder&amp; setAddress(std::string&amp; adress)\n    {\n      mProperties.mAddress = adress;\n      return *this;\n    }\n\n    CameraBuilder&amp; setExposure(std::string&amp; exposure)\n    {\n      mProperties.mExposure = exposure;\n      return *this;\n    }\n\n    CameraBuilder&amp; setFocus(int focus)\n    {\n      mProperties.mFocus = focus;\n      return *this;\n    }\n\n    CameraValue build()\n    {\n      return CameraValue(mProperties);\n    }\n\n  private:\n    CameraProperties mProperties;\n  };\n\nprivate:\n  CameraValue(const CameraProperties&amp; properties)\n    :mProperties(properties)\n    {}\n\n  CameraProperties mProperties;\n};\n\n#endif // CAMERAVALUE_H\n</code></pre>\n<p><strong>main.cpp</strong></p>\n<pre><code>#include &quot;cameravalue.h&quot;\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n\n  CameraValue cm = CameraValue::CameraBuilder(1).setName(std::string(&quot;Huseyin&quot;)).build();\n  return 0;\n}\n</code></pre>\n<h2>Second Version (Don't work)</h2>\n<p><strong>cameravalue.h</strong></p>\n<pre><code>#ifndef CAMERAVALUE_H\n#define CAMERAVALUE_H\n#include &lt;string&gt;\n\n\n\nclass CameraValue\n{\nprivate:\n\n  class CameraProperties;\n\npublic:\n\n  class CameraBuilder;\n\nprivate:\n  CameraValue(const CameraProperties&amp; properties);\n\n  CameraProperties mProperties;\n};\n\n#endif // CAMERAVALUE_H\n</code></pre>\n<p><strong>cameravalue.cpp</strong></p>\n<pre><code>#include &quot;cameravalue.h&quot;\n#include &lt;string&gt;\n\n\n\nclass CameraValue::CameraProperties\n{\nprivate:\n  CameraProperties()\n    : mId(-1),\n      mName(),\n      mAddress(),\n      mExposure(),\n      mFocus()\n  {}\n\n  int mId;\n  std::string mName;\n  std::string mAddress;\n  std::string mExposure;\n  long long  mFocus;\n\n  friend class CameraValue;\n  friend class CameraBuilder;\n};\n\n\n\nclass CameraValue::CameraBuilder\n{\npublic:\n  CameraBuilder(int id)\n  {\n    mProperties.mId = id;\n  }\n\n  CameraBuilder&amp; setName(std::string&amp; name)\n  {\n    mProperties.mName = name;\n    return *this;\n  }\n\n  CameraBuilder&amp; setAddress(std::string&amp; adress)\n  {\n    mProperties.mAddress = adress;\n    return *this;\n  }\n\n  CameraBuilder&amp; setExposure(std::string&amp; exposure)\n  {\n    mProperties.mExposure = exposure;\n    return *this;\n  }\n\n  CameraBuilder&amp; setFocus(int focus)\n  {\n    mProperties.mFocus = focus;\n    return *this;\n  }\n\n  CameraValue build()\n  {\n    return CameraValue(mProperties);\n  }\n\nprivate:\n  CameraProperties mProperties;\n};\n\n\n\nCameraValue::CameraValue(const CameraProperties&amp; properties)\n  : mProperties(properties)\n  {}\n</code></pre>\n<p><strong>main.cpp</strong></p>\n<pre><code>#include &quot;cameravalue.h&quot;\n#include &lt;iostream&gt;\n\nint main(int argc, char *argv[])\n{\n\n  CameraValue cm = CameraValue::CameraBuilder(1).setName(std::string(&quot;Huseyin&quot;)).build();\n  return 0;\n}\n</code></pre>\n<p><strong>Compile Errors</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>cameravalue.cpp\nc:\\users\\huseyin\\documents\\builderpattern\\cameravalue.h(20) : error\nC2079: 'CameraValue::mProperties' uses undefined class\n'CameraValue::CameraProperties' ..\\BuilderPattern\\cameravalue.cpp(74)\n: error C2440: 'initializing' : cannot convert from 'const\nCameraValue::CameraProperties' to 'int'\n        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n..\\BuilderPattern\\cameravalue.cpp(74) : error C2439:\n'CameraValue::mProperties' : member could not be initialized\n        c:\\users\\huseyin\\documents\\builderpattern\\cameravalue.h(20) : see declaration of 'CameraValue::mProperties'\nc:\\users\\huseyin\\documents\\builderpattern\\cameravalue.h(20) : error\nC2079: 'CameraValue::mProperties' uses undefined class\n'CameraValue::CameraProperties' ..\\BuilderPattern\\main.cpp(9) : error\nC2440: '&lt;function-style-cast&gt;' : cannot convert from 'int' to\n'CameraValue::CameraBuilder'\n        Source or target has incomplete type ..\\BuilderPattern\\main.cpp(9) : error C2228: left of '.setName' must\nhave class/struct/union ..\\BuilderPattern\\main.cpp(9) : error C2228:\nleft of '.build' must have class/struct/union\n..\\BuilderPattern\\main.cpp(9) : error C2512: 'CameraValue' : no\nappropriate default constructor available\n..\\BuilderPattern\\main.cpp(10) : error C2039: 'getName' : is not a\nmember of 'CameraValue'\n        c:\\users\\huseyin\\documents\\builderpattern\\cameravalue.h(8) : see declaration of 'CameraValue'\n</code></pre>\n"}, {"tags": ["java", "c++", "parallel-processing", "java-native-interface", "openmp"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460583281, "post_id": 36606001, "comment_id": 60816643, "body": "Do you call the same binary for both command-line and JNI?  Or do you compile different binaries, an executable for command-line and a library for JNI?"}, {"owner": {"reputation": 119, "user_id": 4527346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256eb17faae66b45d5dd56a28328df2?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4527346/bob"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460593816, "post_id": 36606001, "comment_id": 60820438, "body": "for JNI, I create a dll using swig and g++, and then load the dll it in Java. I don&#39;t create a binary.       <code>swig -c++ -java model.i&#39;     </code>g++ -c model.cpp model_wrap.cxx -I ...&#39;      <code>g++ -shared model.o model_wrap.o  -o model.dll  -I ... -L ... and some libraries&#39;  But for direct c++ use, I create a binary using g++ compiler and use that.      </code>g++ model.cpp -o model.exe -I ... -L ... and libraries`"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460594806, "post_id": 36606001, "comment_id": 60820676, "body": "Assuming g++ and OpenMP are similar to Linux usage, what happens in your binary if you compile to a <code>.o</code> file using the <code>-fopenmp</code> argument to <code>g++</code>, but leave off <code>-fopenmp</code> during the link step?  I suspect the OpenMP library isn&#39;t getting loaded by the JVM.  But I&#39;ve never used OpenMP on Windows...."}, {"owner": {"reputation": 119, "user_id": 4527346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256eb17faae66b45d5dd56a28328df2?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4527346/bob"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1460595584, "post_id": 36606001, "comment_id": 60820890, "body": "You are right Andrew, openMP wasn&#39;t getting loaded because I didn&#39;t have -fopenmp in one of my commands, that fixed it. Thanks a million!"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4527346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256eb17faae66b45d5dd56a28328df2?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4527346/bob"}, "edited": false, "score": 0, "creation_date": 1460775019, "post_id": 36628679, "comment_id": 60911943, "body": "Thanks, this is very useful indeed!"}], "tags": [], "owner": {"reputation": 4037, "user_id": 4056099, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xF37X.jpg?s=128&g=1", "display_name": "NoseKnowsAll", "link": "https://stackoverflow.com/users/4056099/noseknowsall"}, "is_accepted": false, "score": 2, "last_activity_date": 1460650877, "creation_date": 1460650877, "answer_id": 36628679, "question_id": 36606001, "link": "https://stackoverflow.com/questions/36606001/openmp-doesnt-run-parallel-with-jni/36628679#36628679", "title": "OpenMP doesn&#39;t run parallel with JNI", "body": "<p>Indeed, your current problem was answered by @Andrew Henle in the comments: you need to use <code>-fopenmp</code> during both the compilation and linking steps.</p>\n\n<p>However, I wanted to expand and say that your code as-is presents a textbook case of when to use OpenMP <code>sections</code>. You should change your code to take advantage of these semantics:</p>\n\n<pre><code>void f() {\n    omp_set_num_threads(3);\n    #pragma omp parallel sections\n    {\n        #pragma omp section\n        {\n            // do task 1   \n        }\n        #pragma omp section\n        {\n            //do task 2\n        }\n        #pragma omp section\n        {\n            //do task 3\n        }\n    }\n}\n</code></pre>\n\n<p>This has the advantage of (a) becoming serial code when you do not compile with OpenMP support, one of the original tenets of OpenMP; and (b) Easily allowing for an extension for more <code>section</code>s and/or more threads. OpenMP handles all load balancing for you if you have more <code>section</code>s than threads.</p>\n"}], "owner": {"reputation": 119, "user_id": 4527346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b256eb17faae66b45d5dd56a28328df2?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4527346/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1460650877, "creation_date": 1460570031, "last_edit_date": 1460574052, "question_id": 36606001, "link": "https://stackoverflow.com/questions/36606001/openmp-doesnt-run-parallel-with-jni", "title": "OpenMP doesn&#39;t run parallel with JNI", "body": "<p>I have a c++ code that uses openMP to run in parallel. </p>\n\n<pre><code>void f(){\nomp_set_num_threads(3);\n#pragma omp parallel \n{\nif (omp_get_thread_num() == 0 ){\n\n      // do task 1   \n\n}else if (omp_get_thread_num() == 1){\n\n     //do task 2\n\n}else if (omp_get_thread_num() == 2){\n\n     //do task 3\n}}\n</code></pre>\n\n<p>I use SWIG JNI to create a dll and call this code from Java. </p>\n\n<pre><code>System.loadLibrary(\"model\");\nmodel.f();\n</code></pre>\n\n<p>It runs in serial mode. When I compile the code directly with c++ and run in command line, it runs parallel.</p>\n\n<p>Do you know how to fix this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1460569964, "post_id": 36605945, "comment_id": 60808875, "body": "C -&gt; &quot;1-B&quot; -&gt; &quot;1-A+1&quot; -&gt; &quot;1-0+1&quot; = 2"}, {"owner": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1460570111, "post_id": 36605945, "comment_id": 60808967, "body": "doesn&#39;t go like 1-(0+1)"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 1, "creation_date": 1460570146, "post_id": 36605945, "comment_id": 60808994, "body": "You would have to add the parenthesis into the macros."}, {"owner": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1460570219, "post_id": 36605945, "comment_id": 60809050, "body": "A=0;B=0+1--&gt;B=1 ;C=1-B--&gt;C=1-1"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 5, "creation_date": 1460570362, "post_id": 36605945, "comment_id": 60809122, "body": "The preprocessor doesn&#39;t calculate anything. It&#39;s a simple text replacement."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1460572273, "post_id": 36605945, "comment_id": 60810278, "body": "I like <a href=\"http://stackoverflow.com/a/12278121/4975646\">this answer</a> which illustrates how SIX (<code>#define SIX 1+5</code>) times NINE (<code>#define NINE 8+1</code>) equals 42."}], "answers": [{"comments": [{"owner": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "edited": false, "score": 0, "creation_date": 1460570284, "post_id": 36605984, "comment_id": 60809080, "body": "I thought that it calculates A then B then C."}, {"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "reply_to_user": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "edited": false, "score": 0, "creation_date": 1460573816, "post_id": 36605984, "comment_id": 60811247, "body": "@kyrpav The preprocessor doesn&#39;t <i>calculate</i> anything. Rather it saves the macro name and its associated expansion.  Only at run-time (or probably compile-time in this case) is the arithmetic performed. I&#39;ve updated the answer to hopefully make this clearer."}], "tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": false, "score": 2, "last_activity_date": 1460574012, "last_edit_date": 1460574012, "creation_date": 1460569994, "answer_id": 36605984, "question_id": 36605945, "link": "https://stackoverflow.com/questions/36605945/using-define-macros-in-a-simple-cout-expression/36605984#36605984", "title": "Using #define macros in a simple cout expression", "body": "<p>The preprocessor expands the <code>C</code> macro to <code>1-B</code>, which expands to <code>1-A+1</code> which expands to <code>1-0+1</code> which equals <code>2</code>. Don't think of it in terms of sequential assignment, but you can get the desired behavior by adding parenthesis around the macro definitions. Then the <code>C</code> macro would expand to <code>(1-B)</code>, then <code>(1-(A+1))</code> then <code>(1-((0)+1))</code> which equals <code>0</code>.</p>\n\n<p><em>Edit:</em></p>\n\n<p>As an example, the code snip below prints <code>42</code>, even though <code>BAR</code> is \"assigned\" to <code>FOO</code> when <code>FOO</code> equals <code>17</code>. This is because the expansion is deferred until it's actually used. On the <code>cout</code> line, <code>BAR</code> is still equal to <code>FOO</code>, but at that point, <code>FOO</code> is now <code>42</code>, not <code>17</code>. Note that it's bad practice to redefine a macro without first <code>#undef</code>ining it.</p>\n\n<pre><code>#define FOO 17\n#define BAR FOO\n#define FOO 42\ncout &lt;&lt; BAR &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": false, "score": 0, "last_activity_date": 1460570014, "creation_date": 1460570014, "answer_id": 36605996, "question_id": 36605945, "link": "https://stackoverflow.com/questions/36605945/using-define-macros-in-a-simple-cout-expression/36605996#36605996", "title": "Using #define macros in a simple cout expression", "body": "<p>Because <code>C</code> expands to <code>1-0+1</code></p>\n\n<p>Preprocessor defines simply replace text and don't care about operator precedence or calculation rules.</p>\n"}, {"comments": [{"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 2, "creation_date": 1460570202, "post_id": 36606024, "comment_id": 60809034, "body": "One can also use parenthesis in macros to enforce precedence."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1460570317, "post_id": 36606024, "comment_id": 60809096, "body": "@lisyarus True.  I am not a big have of #defines and in a case like this I would use a const variable instead of them."}, {"owner": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "edited": false, "score": 0, "creation_date": 1460570579, "post_id": 36606024, "comment_id": 60809252, "body": "Thank you in general i am avoiding calculation in macros, but i was playing aroundand i found that i am missing something."}, {"owner": {"reputation": 13520, "user_id": 2315602, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8rKPi.jpg?s=128&g=1", "display_name": "lisyarus", "link": "https://stackoverflow.com/users/2315602/lisyarus"}, "edited": false, "score": 0, "creation_date": 1460570658, "post_id": 36606024, "comment_id": 60809288, "body": "@NathanOliver I agree. Just mentioned that for educational purposes."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1460570094, "creation_date": 1460570094, "answer_id": 36606024, "question_id": 36605945, "link": "https://stackoverflow.com/questions/36605945/using-define-macros-in-a-simple-cout-expression/36606024#36606024", "title": "Using #define macros in a simple cout expression", "body": "<p>Macros are direct text replacements  That means</p>\n\n<pre><code>#define C    1-B\n</code></pre>\n\n<p>becomes</p>\n\n<pre><code>1-A+1\n</code></pre>\n\n<p>and then A gets expanded so we have</p>\n\n<pre><code>1-0+1\n</code></pre>\n\n<p>which is 2.  If you want 0 then stop using macros and instead use constant variables</p>\n\n<pre><code>const int A = 0;\nconst int B = A + 1;\nconst int C = 1 - B;\n</code></pre>\n\n<p>And now C is 0.</p>\n"}], "owner": {"reputation": 644, "user_id": 2022241, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/93883fc4c2eaef04e277eb7087a7da66?s=128&d=identicon&r=PG", "display_name": "kyrpav", "link": "https://stackoverflow.com/users/2022241/kyrpav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 1, "accepted_answer_id": 36606024, "answer_count": 3, "score": 0, "last_activity_date": 1460574012, "creation_date": 1460569833, "last_edit_date": 1460570538, "question_id": 36605945, "link": "https://stackoverflow.com/questions/36605945/using-define-macros-in-a-simple-cout-expression", "title": "Using #define macros in a simple cout expression", "body": "<p>I would like to ask why this code prints out 2 instead of 0. Doesn't <code>#define</code> \"assign\" values to the names of the macros and calculate also the result? How does it give this answer?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\n#define A    0\n#define B    A+1\n#define C    1-B\n\nint main() {\n    cout &lt;&lt; C&lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "raspberry-pi", "raspberry-pi2", "beagleboneblack"], "comments": [{"owner": {"reputation": 11845, "user_id": 3280538, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/pYuGC.jpg?s=128&g=1", "display_name": "flakes", "link": "https://stackoverflow.com/users/3280538/flakes"}, "edited": false, "score": 1, "creation_date": 1460572646, "post_id": 36605919, "comment_id": 60810503, "body": "I&#39;m using a Raspi currently with my java project. I find it runs my code pretty  well. Java is gonna be slower on any system though where it has to run onto of the JVM..."}], "answers": [{"comments": [{"owner": {"reputation": 6693, "user_id": 2327745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5CFi3.png?s=128&g=1", "display_name": "Tanmay Patil", "link": "https://stackoverflow.com/users/2327745/tanmay-patil"}, "edited": false, "score": 1, "creation_date": 1497936724, "post_id": 36606237, "comment_id": 76274238, "body": "&quot;any java code will be slower then C++&quot; is not correct. Good JVMs have JIT compilation, mixed mode execution, profiling and de-optimization implemented which can extract great performance."}], "tags": [], "owner": {"reputation": 2362, "user_id": 1472416, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b29bdd4037fe62aa667a5ed517d9790?s=128&d=identicon&r=PG", "display_name": "jgr208", "link": "https://stackoverflow.com/users/1472416/jgr208"}, "is_accepted": true, "score": 3, "last_activity_date": 1460571234, "last_edit_date": 1460571234, "creation_date": 1460570863, "answer_id": 36606237, "question_id": 36605919, "link": "https://stackoverflow.com/questions/36605919/is-java-running-well-in-beaglebone-black-or-raspberry-pi/36606237#36606237", "title": "Is Java running well in BeagleBone Black( or Raspberry Pi)?", "body": "<p>There is a java made for the ARM release (the architect BBB runs on). That java version is made by Oracle, and contains closed sourced libraries not available for the public. </p>\n\n<p>The main complaints I have read about have been about OpenJDK java on the BBB due to that it's open source and doesn't have the ARM specific code and thus is a general one size fits all java solution which is about 4 or 5 times slower then the Oracle java.</p>\n\n<p>In terms of C++, any java code will be slower then C++. This is due to that C++ code is complied for a specific board <a href=\"https://www.youtube.com/watch?v=LXF-DI4H6gY\" rel=\"nofollow\">(this video helps to explain)</a> and thus runs only on that specific board, while java even though have specific versions available for the JRE, the jar through the JDK is compiled to be non board specific and thus is not as fast as code that is already compiled for a specific board.</p>\n\n<p>Lastly with all that said the preferred language depends on what you want to do and any official support provided by the manufacturer. The BBB seems to suggest none and leaves it up to the user. Therefore the best idea is to run a benchmark test and see which performs best to your needs.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 295, "user_id": 2698366, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/93a820a715db2e28511fcdd04f6c0266?s=128&d=identicon&r=PG&f=1", "display_name": "lorcel", "link": "https://stackoverflow.com/users/2698366/lorcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 36606237, "answer_count": 1, "score": 2, "last_activity_date": 1460571234, "creation_date": 1460569753, "question_id": 36605919, "link": "https://stackoverflow.com/questions/36605919/is-java-running-well-in-beaglebone-black-or-raspberry-pi", "title": "Is Java running well in BeagleBone Black( or Raspberry Pi)?", "body": "<p>My project is to run a web server in little computer such as BeagleBone Black or Raspberry Pi.   </p>\n\n<p>My question is which language is preferred, Java or C++? My plan is to run a tomcat and write a web server by using Java. </p>\n\n<p>I heard lot of people are talking about the poor performance of Java running in such embedded system such as BeagleBone Black.  Does Java really have worse performance than running C++?</p>\n\n<p>Any thought is appreciated. Thanks</p>\n"}, {"tags": ["c++", "c++11", "stl", "c++14"], "comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 3, "creation_date": 1460569850, "post_id": 36605888, "comment_id": 60808792, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5047971/how-do-i-check-for-c11-support\">How do I check for C++11 support?</a> (i.e. use preprocessor and check value of <code>__cplusplus</code> macro)"}], "answers": [{"comments": [{"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1460573777, "post_id": 36606141, "comment_id": 60811223, "body": "&quot;It&#39;s generally not enough to just check the value of __cplusplus&quot; - wonder if you could elaborate on this, i.e. what&#39;s the issue with this approach?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 1, "creation_date": 1460574498, "post_id": 36606141, "comment_id": 60811681, "body": "@davmac: The days when g++ just set <code>__plusplus</code> to zero are over. But compiler support for the various C++ standards, vary. Few compilers implemented C++03 <code>export</code> (as far as I know only Comeau did officially, and Intel via an undocumented option). For a long time g++&#39;s standard library didn&#39;t implement C++11 <code>to_string</code>, with lots of SO questions about it. And so on. The <code>__plusplus</code> macro can definitively tell you that the code is being compiled as C++. But regarding which language and library features are present, it&#39;s only a rough indication."}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 4, "last_activity_date": 1460571776, "last_edit_date": 1460571776, "creation_date": 1460570591, "answer_id": 36606141, "question_id": 36605888, "link": "https://stackoverflow.com/questions/36605888/how-to-choose-function-implementation-based-on-c-version/36606141#36606141", "title": "How to choose function implementation based on C++ version", "body": "<p>Options, with the approach with probably least work and least impact on code, first:</p>\n\n<ul>\n<li><p>Using the compiler's include file path to choose different versions of a header.</p></li>\n<li><p>Compiler version sniffing and conditional compilation (e.g. <code>#ifdef</code>).</p></li>\n<li><p>Wholesale code editing, possibly automated.</p></li>\n</ul>\n\n<p>Compiler sniffing is pretty brittle, but is common.</p>\n\n<p>It's generally not enough to just check the value of <code>__cplusplus</code>.</p>\n\n<hr>\n\n<p>Using the compiler's include path you would for example first define a header <code>&lt;relops.hpp&gt;</code>, which just defines or names everything in terms of C++14 functionality, the default implementation, and place that in your regular header include directory.</p>\n\n<p>And via your compiler's include path (e.g. <code>CPATH</code> for g++, and <code>INCLUDE</code> for Visual C++), if necessary for the particular compiler, you would direct it to first look for <code>&lt;relops.h&gt;</code> in some other directory for system-specific headers.</p>\n\n<p>And this <code>&lt;relops.h&gt;</code> would define things itself, like in your presented code.</p>\n\n<hr>\n\n<p>With conditional compilation you would instead determine the compiler and version based on macros such as <code>__cplusplus</code>, <code>_MSC_VER</code>, <code>__GNUC__</code>, something for Mac, possibly more. You would define some symbol as a result, e.g. <code>IS_CPP14</code>. Then you'd use <code>#if IS_CPP14</code> &hellip; <code>#else</code> &hellip; <code>#endif</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1460575039, "post_id": 36607417, "comment_id": 60811991, "body": "Because it doesn&#39;t work with one of the most popular compilers."}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460576215, "post_id": 36607417, "comment_id": 60812717, "body": "While this code may answer the question, providing additional context regarding why and/or how it answers the question would significantly improve its long-term value. Please <a href=\"https://stackoverflow.com/posts/36607417/edit\">edit</a> your answer to add some explanation."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1460582072, "post_id": 36607417, "comment_id": 60816023, "body": "@Cheersandhth.-Alf Why so mysterious - which compiler would you be referring to?"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460582344, "post_id": 36607417, "comment_id": 60816173, "body": "@JasonMc92 I added a paragraph at the bottom, though I thought the code should be straight-forward to understand. It does exactly what OP asked for, if I understand correctly, nothing more and nothing less. If the added comment doesn&#39;t satisfy you, could you be more specific about how it could be improved?"}, {"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460582450, "post_id": 36607417, "comment_id": 60816237, "body": "@davmac, Thanks for the update. That about covers it. The basic point is that anyone who finds this question probably won&#39;t have an <i>identical</i> problem, but a <i>similar</i> one. Understanding what your solution is doing and why enables them to craft the unique solution they need."}], "tags": [], "owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "is_accepted": false, "score": 0, "last_activity_date": 1460716938, "last_edit_date": 1460716938, "creation_date": 1460574421, "answer_id": 36607417, "question_id": 36605888, "link": "https://stackoverflow.com/questions/36605888/how-to-choose-function-implementation-based-on-c-version/36607417#36607417", "title": "How to choose function implementation based on C++ version", "body": "<p>You can use the <code>__cplusplus</code> preprocessor-based solution without polluting the <code>foo</code> namespace, something along the lines of:</p>\n\n<pre><code>namespace foo {\n#if __cplusplus &lt; 201402L\n template &lt;class T = void&gt;\n struct less {\n   constexpr bool operator()(T const&amp; lhs, T const&amp; rhs) const { \n     return lhs &lt; rhs;\n   }\n };\n#else\n  using std::less;\n#endif\n}\n</code></pre>\n\n<p>This defines a custom version of <code>foo::less</code> for C++ versions older than '14, and creates a an alias (still usable as <code>foo::less</code>) to <code>std::less</code> for newer C++ versions.</p>\n\n<p>(The constant <code>201402L</code> comes from the standard itself. Compilers conforming to C++14 are required to set <code>__cplusplus</code> to at least this value).</p>\n\n<p>The above code might result in using your custom implementation of <code>less</code> in cases where the compiler has only partial support for C++14, even if that partial support includes a <code>constexpr</code>-qualified <code>std::less::operator()</code>. Apparently this is true for the latest version of Visual Studio. I suggest that this isn't even worth worrying about; calls to the function should be inlined anyway, and the moment you compile with a properly conforming C++14 compiler, you'll get the exact (compilation-level) behavior that you wanted. Alternatively, you could extend the pre-processor logic (i.e. check for compiler-specific macros) to recognize specific compiler versions known to be sufficiently conformant.</p>\n"}], "owner": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 36606141, "answer_count": 2, "score": 1, "last_activity_date": 1460716938, "creation_date": 1460569686, "last_edit_date": 1460571712, "question_id": 36605888, "link": "https://stackoverflow.com/questions/36605888/how-to-choose-function-implementation-based-on-c-version", "title": "How to choose function implementation based on C++ version", "body": "<p>I have redefined certain C++ function objects (STL functional) to provide constexpr operator() for them. I needed these functionals to get evaluated at compile time to use for template metaprogramming. C++14 provides constexpr equivalents for the STL functional library. Currently I am compiling code with C++11, but might eventually upgrade to C++14. How do I implement these such that if I upgrade to C++14, it would automatically pick the function objects from STL, rather than my custom implementation.<br>\nHere is how I have it so far:</p>\n\n<pre><code>namespace foo {\n template &lt;class T = void&gt;\n struct less {\n   constexpr bool operator()(T const&amp; lhs, T const&amp; rhs) const { \n     return lhs &lt; rhs;\n   }\n };\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: I know this could be potentially done with <code>__cplusplus</code> if I just alias my namespace with std. However that would be a bad solution since I would pollute the namespace foo for all other instances.</p>\n"}, {"tags": ["c++", "visual-studio", "android-ndk"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 3941709, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/229278d8d79b0feb6c52e745bdeb4d88?s=128&d=identicon&r=PG&f=1", "display_name": "SanityMaker", "link": "https://stackoverflow.com/users/3941709/sanitymaker"}, "edited": false, "score": 0, "creation_date": 1460683211, "post_id": 36606772, "comment_id": 60868293, "body": "yes, i ve seen that suggestion but i am not using ndk-build environment. The question is specific to new Visual Studio 2015 android compiler/debugger."}], "tags": [], "owner": {"reputation": 164, "user_id": 6113329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZEvy9.jpg?s=128&g=1", "display_name": "Ross Meikleham", "link": "https://stackoverflow.com/users/6113329/ross-meikleham"}, "is_accepted": false, "score": 0, "last_activity_date": 1460572510, "creation_date": 1460572510, "answer_id": 36606772, "question_id": 36605877, "link": "https://stackoverflow.com/questions/36605877/stdcout-with-android-ndk-on-visual-studio-2015/36606772#36606772", "title": "std::cout with Android NDK on Visual Studio 2015", "body": "<p>From the <a href=\"http://developer.android.com/tools/debugging/debugging-log.html\" rel=\"nofollow\">Android documentaion</a></p>\n\n<blockquote>\n  <p>By default, the Android system sends stdout and stderr (System.out and System.err) output to /dev/null. In processes that run the Dalvik VM.</p>\n  \n  <p>You can have the system write a copy of the output to the log file. In this case, the system writes the messages to the log using the log tags stdout and stderr, both with priority I.</p>\n  \n  <p>To route the output in this way, you stop a running emulator/device instance and then use the shell command setprop to enable the redirection of output. Here's how you do it:</p>\n</blockquote>\n\n<pre><code>$ adb shell stop\n$ adb shell setprop log.redirect-stdio true\n$ adb shell start\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 3941709, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/229278d8d79b0feb6c52e745bdeb4d88?s=128&d=identicon&r=PG&f=1", "display_name": "SanityMaker", "link": "https://stackoverflow.com/users/3941709/sanitymaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460572510, "creation_date": 1460569633, "question_id": 36605877, "link": "https://stackoverflow.com/questions/36605877/stdcout-with-android-ndk-on-visual-studio-2015", "title": "std::cout with Android NDK on Visual Studio 2015", "body": "<p>I am using std::cout in my c++ code running in VisualStudio 2015 for Android NDK.\nBut nothing gets printed in visual studio debugger. Is there a way to redirect to visualstudio everything for std::cout when debugging android ndk app? I saw some suggestions to redirect std::cout for Windows but nothing for Android when using Visual Studio.</p>\n"}, {"tags": ["c++", "vector", "segmentation-fault"], "comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1460574453, "post_id": 36605834, "comment_id": 60811657, "body": "Probably unrelated typo: grid[part[j].cube[0]] [part[j].cube[1]] <b>[</b> part[j].cube[2]].push_back(part[j]); Have you considered switching to a 1D vector of vector of SPH_Part?"}, {"owner": {"reputation": 369, "user_id": 1888375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fbdf1b7d9f00822815d68fa7e6025de?s=128&d=identicon&r=PG", "display_name": "Red User", "link": "https://stackoverflow.com/users/1888375/red-user"}, "edited": false, "score": 0, "creation_date": 1460574946, "post_id": 36605834, "comment_id": 60811943, "body": "Why do you use 21, 75 and 36 in the code printing sizes when all dimensions are the same: <code>2*param-&gt;Ref</code> ? BTW, you can try to build with <code>_GLIBCXX_DEBUG</code> or replace <code>[x]</code> with <code>.at(x)</code>, it throws an exception when an index is out of a vector size."}, {"owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "edited": false, "score": 0, "creation_date": 1460623996, "post_id": 36605834, "comment_id": 60832644, "body": "Thanks for your response."}, {"owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "edited": false, "score": 0, "creation_date": 1460624128, "post_id": 36605834, "comment_id": 60832742, "body": "@ Bob_ -The missing bracket is indeed just a coping mistake. -Isn\u2019t an 3d vector just a vector of vectors ?"}, {"owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "edited": false, "score": 0, "creation_date": 1460624338, "post_id": 36605834, "comment_id": 60832880, "body": "@ Red User - 21, 75 and 36 was just a special case I tested (I forget while coping), but it runs over the whole vector. -I replaced [x] with .at(x) and it&#39;s still just a segfault."}, {"owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "edited": false, "score": 0, "creation_date": 1460624424, "post_id": 36605834, "comment_id": 60832935, "body": "-I am not quite shure if I used _GLIBCXX_DEBUG the right way, but it gives me:      a.out: malloc.c:2372: sysmalloc: Assertion `(old_top == (((mbinptr) (((char *) &amp;((av)-&gt;bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) &amp;&amp; old_size == 0) || ((unsigned long) (old_size) &gt;= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 *(sizeof(size_t))) - 1)) &amp; ~((2 *(sizeof(size_t))) - 1))) &amp;&amp; ((old_top)-&gt;size &amp; 0x1) &amp;&amp; ((unsigned long) old_end &amp; pagemask) == 0)&#39; failed. Abgebrochen What barely tells me nothing :S"}, {"owner": {"reputation": 369, "user_id": 1888375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fbdf1b7d9f00822815d68fa7e6025de?s=128&d=identicon&r=PG", "display_name": "Red User", "link": "https://stackoverflow.com/users/1888375/red-user"}, "edited": false, "score": 0, "creation_date": 1460634273, "post_id": 36605834, "comment_id": 60839953, "body": "Now we know that segfault is not connected with bad index in operator[]. It seems to me that the only dangerous operation in shown code is accessing to part in Grid::Add2Grid(SPH_Part *part). Try to run under valgrind."}, {"owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "reply_to_user": {"reputation": 369, "user_id": 1888375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fbdf1b7d9f00822815d68fa7e6025de?s=128&d=identicon&r=PG", "display_name": "Red User", "link": "https://stackoverflow.com/users/1888375/red-user"}, "edited": false, "score": 0, "creation_date": 1460642572, "post_id": 36605834, "comment_id": 60846955, "body": "@Red User Thanks for the tipp, valgrind looks like a great tool. I probably screw up a pointer in a function before the one causing the segfault. Now I think I can track down the bug."}], "owner": {"reputation": 11, "user_id": 6199808, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209441158645706/picture?type=large", "display_name": "Paul Rohde", "link": "https://stackoverflow.com/users/6199808/paul-rohde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460569472, "creation_date": 1460569472, "question_id": 36605834, "link": "https://stackoverflow.com/questions/36605834/c-segmentation-fault-at-4d-vector", "title": "c++ // Segmentation fault at 4d &lt;vector&gt;", "body": "<p>so this is my first question at stackoverflow, but you guy already helped me a lot.</p>\n\n<p>I create an 4d vector in my grid.h file </p>\n\n<pre><code>class Grid{\n\n public:\n\n\n  Grid(Params *);\n  ~Grid();\n\nvoid Set_Cube();\nvoid Add2Grid(SPH_Part *);\nint getSize(int, int, int);\n\nvector&lt;vector&lt;vector&lt;vector&lt;SPH_Part&gt; &gt; &gt; &gt; grid;\nParams *param;\n};\n</code></pre>\n\n<p>then I resize it to 100 X 100 X 100 in grid.cpp</p>\n\n<pre><code>void Grid::Set_Cube(){\n\n    #define HEIGHT 2*param-&gt;Ref\n    #define WIDTH 2*param-&gt;Ref\n    #define DEPTH 2*param-&gt;Ref\n\n\n    grid.resize(HEIGHT);\n    for (int i = 0; i &lt; HEIGHT; ++i) {\n       grid[i].resize(WIDTH);\n\n       for (int j = 0; j &lt; WIDTH; ++j)\n          grid[i][j].resize(DEPTH);\n       }\n    }\n}\n</code></pre>\n\n<p>and fill up the 4th  dim with structs</p>\n\n<pre><code>void Grid::Add2Grid(SPH_Part *part){\n    for (int j=0; j&lt; param-&gt;Npart; ++j) {\n\n    //.....code....//\n\n        grid[part[j].cube[0]][part[j].cube[1]]part[j].cube[2]].push_back(part[j]); \n    }\n</code></pre>\n\n<p>...\nhere I still have access to the whole vector\n...</p>\n\n<pre><code>     for (int i=0; i&lt; 21; ++i) {\n        for (int j=0; j&lt; 75; ++j) {\n            for (int k=0; k&lt; 36; ++k) {\n\n                cout&lt;&lt; grid[i][j][k].size() &lt;&lt; \" \" &lt;&lt; i &lt;&lt; \" \" &lt;&lt; j &lt;&lt; \" \" &lt;&lt; k &lt;&lt; endl;\n            }\n        }\n    }    \nreturn;\n}\n</code></pre>\n\n<p>But if I make a call afterwards from somewhere in the code via the getter function ( it neither works with direct access) I get an segmentation fault.</p>\n\n<pre><code>int Grid::getSize(int i, int j, int k){\n    cout &lt;&lt; \"grid \" &lt;&lt; i &lt;&lt; \" \"&lt;&lt; j &lt;&lt; \" \"&lt;&lt; k &lt;&lt; \" \"&lt;&lt; endl;\n    cout &lt;&lt; \"grid \" &lt;&lt; grid[i][j][k].size() &lt;&lt; endl;\n    return grid[i][j][k].size();\n}\n</code></pre>\n\n<p>GDB gives me: </p>\n\n<pre><code>grid 20 74 35 \n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00000000004032c8 in Grid::getSize(int, int, int) ()\n(gdb) \n</code></pre>\n\n<p>The segmentation fault occurs on a (for me) random iteration.\nI would be really happy if someone got an idea what could be the problem.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 2, "creation_date": 1460569557, "post_id": 36605794, "comment_id": 60808621, "body": "<code>if (code.Formatting() == FormattingTypes::VeryBad) std::cout &lt;&lt; &quot;Please format your code!&quot; &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 1, "user_id": 5597290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2dfb717da772f1d8ea4c0b05f48bba90?s=128&d=identicon&r=PG&f=1", "display_name": "pnewbie", "link": "https://stackoverflow.com/users/5597290/pnewbie"}, "reply_to_user": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1460570050, "post_id": 36605794, "comment_id": 60808928, "body": "sorry about that, i was editing it and when i finished editing it said that somebody had already edit it, whom i am thankful for."}], "answers": [{"comments": [{"owner": {"reputation": 2334, "user_id": 2397162, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/665b976c79d0c9c842b131a2df510c3c?s=128&d=identicon&r=PG", "display_name": "niceman", "link": "https://stackoverflow.com/users/2397162/niceman"}, "reply_to_user": {"reputation": 1, "user_id": 5597290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2dfb717da772f1d8ea4c0b05f48bba90?s=128&d=identicon&r=PG&f=1", "display_name": "pnewbie", "link": "https://stackoverflow.com/users/5597290/pnewbie"}, "edited": false, "score": 0, "creation_date": 1460571671, "post_id": 36605982, "comment_id": 60809901, "body": "@pnewbie happens to all of us :)"}], "tags": [], "owner": {"reputation": 21, "user_id": 6199743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d91758380a108a055aeeb638915a3bc?s=128&d=identicon&r=PG&f=1", "display_name": "Kratos", "link": "https://stackoverflow.com/users/6199743/kratos"}, "is_accepted": false, "score": 0, "last_activity_date": 1460570500, "last_edit_date": 1460570500, "creation_date": 1460569989, "answer_id": 36605982, "question_id": 36605794, "link": "https://stackoverflow.com/questions/36605794/error-retrieving-command-line-parameter/36605982#36605982", "title": "Error retrieving command-line parameter", "body": "<p>It should be:</p>\n\n<pre><code>  ifstream File;\n  File.open(argv[4]);\n</code></pre>\n\n<p>Additionally, if the file path contains spaces use double quotes.</p>\n"}], "owner": {"reputation": 1, "user_id": 5597290, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2dfb717da772f1d8ea4c0b05f48bba90?s=128&d=identicon&r=PG&f=1", "display_name": "pnewbie", "link": "https://stackoverflow.com/users/5597290/pnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460574748, "creation_date": 1460569348, "last_edit_date": 1460574748, "question_id": 36605794, "link": "https://stackoverflow.com/questions/36605794/error-retrieving-command-line-parameter", "title": "Error retrieving command-line parameter", "body": "<p>In order to run my program you have to enter:</p>\n\n<pre><code>(program name) -s (a number) -f (the file name) \n</code></pre>\n\n<p>The problem I am stuck on is that the file name is in <code>string</code> and the command parameters are in <code>char</code>.</p>\n\n<p>Here is my code so that I can illustrate my problem more clearly:</p>\n\n<pre><code>if(argc==1){\n   cout &lt;&lt; \"Please Enter it in the Form of (prog -s (number of state) -f (file name)\\n\";\n}   \nif(argc==2){\n   cout &lt;&lt; \"Please Enter it in the Form of (prog -s (number of state) -f (file name)\\n\";\n}   \nif(argc==3){\n   cout &lt;&lt; \"Please Enter it in the Form of (prog -s (number of state) -f (file name)\\n\";\n}   \nif(argc==4){\n   cout &lt;&lt; \"Please Enter it in the Form of (prog -s (number of state) -f (file name)\\n\";\n}   \nif(argc==5){\n\n      if((argv[1][0]=='-'&amp;&amp; argv[1][1]=='s')&amp;&amp;(argv[3][0]=='-'&amp;&amp; argv[3][1]=='f')){\n        int x;\n         x=argv[2][0]-48;\n         state *array;\n         array= create_states(x);\n\n         ifstream File;\n         File.open(argv[4][0]);\n</code></pre>\n\n<p>On this line:</p>\n\n<pre><code>file.open(argc[4][0]);\n</code></pre>\n\n<p>I get an error.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2013", "dll", "build"], "answers": [{"comments": [{"owner": {"reputation": 212, "user_id": 5076969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DcyLs.png?s=128&g=1", "display_name": "sro5h", "link": "https://stackoverflow.com/users/5076969/sro5h"}, "edited": false, "score": 0, "creation_date": 1460576190, "post_id": 36607903, "comment_id": 60812699, "body": "So how exactly does the command work? <code>copy &#47;Y &quot;(TargetPath)&quot; &quot;SourcePath&quot;</code>. And what does <code>&#47;Y</code>mean?"}, {"owner": {"reputation": 424, "user_id": 5293624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bacf8cd0c5c7a2277363ea6f84c82a8?s=128&d=identicon&r=PG&f=1", "display_name": "kjpus", "link": "https://stackoverflow.com/users/5293624/kjpus"}, "reply_to_user": {"reputation": 212, "user_id": 5076969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DcyLs.png?s=128&g=1", "display_name": "sro5h", "link": "https://stackoverflow.com/users/5076969/sro5h"}, "edited": false, "score": 1, "creation_date": 1460599287, "post_id": 36607903, "comment_id": 60821949, "body": "copy is a windows/dos command. /Y to suppress confirmation. $(TargetPath) refers to target of your project, ie. the DLL."}], "tags": [], "owner": {"reputation": 424, "user_id": 5293624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bacf8cd0c5c7a2277363ea6f84c82a8?s=128&d=identicon&r=PG&f=1", "display_name": "kjpus", "link": "https://stackoverflow.com/users/5293624/kjpus"}, "is_accepted": true, "score": 1, "last_activity_date": 1460575927, "creation_date": 1460575927, "answer_id": 36607903, "question_id": 36605784, "link": "https://stackoverflow.com/questions/36605784/how-do-i-copy-files-on-build-of-one-project-to-the-include-library-directories-o/36607903#36607903", "title": "How do I copy files on build of one project to the include/library directories of a second project?", "body": "<p>Use \"Post-Build Event\"; In Command Line, add <code>copy /Y \"$(TargetPath)\" \"$SolutionDir/.libs/DLL/lib\"</code> and others. </p>\n"}], "owner": {"reputation": 212, "user_id": 5076969, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DcyLs.png?s=128&g=1", "display_name": "sro5h", "link": "https://stackoverflow.com/users/5076969/sro5h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 36607903, "answer_count": 1, "score": 1, "last_activity_date": 1460575927, "creation_date": 1460569324, "question_id": 36605784, "link": "https://stackoverflow.com/questions/36605784/how-do-i-copy-files-on-build-of-one-project-to-the-include-library-directories-o", "title": "How do I copy files on build of one project to the include/library directories of a second project?", "body": "<p>I have a MSVC2013 Solution with 2 projects, one for a <code>DLL</code>Library and one for an executable to test the library.\nMy folder structure is:</p>\n\n<pre><code>SolutionDir\n|-- DLL\n|   `-- src\n|-- Executable\n|   `-- src\n|-- .libs\n|   |-- DLL\n|   |   |-- include\n|   |   |-- bin\n|   |   `-- lib\n|   `-- (others)\n`-- .build\n    |-- Executable\n    |   |-- Debug\n    |   `-- Release\n    `-- DLL\n        |-- Debug\n        `-- Release\n</code></pre>\n\n<p>I would like to have it that I just have to hit <code>build solution</code> and the library files from my <code>DLL</code> are automatically copied to <code>SolutionDir/.libs/DLL/*</code> (* = <code>include</code> &amp;&amp; <code>lib</code> &amp;&amp; <code>bin</code>). And the <code>(DLL).dll</code> file should also be copied to the <code>SolutionDir/.build/Executable/(Configuration)</code>.  </p>\n\n<p>I imagine I could create a <code>batch</code>file to copy the files, but how do I run it each time the <code>DLL</code> is built?<br>\nOr is there some built-in functionality of MSVC that can achieve that?</p>\n"}, {"tags": ["c++", "qt", "opengl"], "comments": [{"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1460570735, "post_id": 36605775, "comment_id": 60809340, "body": "You could use the mouse click to &quot;turn on/off&quot; a flag (Boolean) to draw the axis when you need (button pressed). If you don&#39;t put it in the draw routine, it wouldn&#39;t get painted."}, {"owner": {"reputation": 1530, "user_id": 3687572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76667089c266b7fd969d795dbecb2c3?s=128&d=identicon&r=PG&f=1", "display_name": "bazinga", "link": "https://stackoverflow.com/users/3687572/bazinga"}, "reply_to_user": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 1, "creation_date": 1460572315, "post_id": 36605775, "comment_id": 60810295, "body": "@LeonardoAlvesMachado thanks for your help. I understood it now."}], "owner": {"reputation": 1530, "user_id": 3687572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c76667089c266b7fd969d795dbecb2c3?s=128&d=identicon&r=PG&f=1", "display_name": "bazinga", "link": "https://stackoverflow.com/users/3687572/bazinga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460569280, "creation_date": 1460569280, "question_id": 36605775, "link": "https://stackoverflow.com/questions/36605775/update-gl-with-a-button-click-in-qt", "title": "update GL with a button click in qt", "body": "<p>I am trying to update GL in qt with a button click.\nThis is how my function in Widget class looks like:</p>\n\n<pre><code>void MyGLWidget::renderFromButton()\n{\n    model.drawAxis();\n    paintGL();\n}\n\nvoid MyGLWidget::draw()\n{\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    GLfloat position[] = { 2.0, 2.0, 2.0, 1.0 };\n    glMatrixMode( GL_MODELVIEW );\n    glLoadIdentity();\n\n\n    gluLookAt\n        (\n        .05, .1, 2,\n        0., 0., 0,\n        0, 1, 0\n        );\n\n    static float rotation_transform[4][4];\n    trackball.rotationMatrix( rotation_transform );\n    glLightfv (GL_LIGHT0, GL_POSITION, position);\n    glEnable (GL_LIGHTING);\n\n    glPushMatrix();\n    glScalef(scale, scale, scale);\n    glTranslatef(transx, transy, transz);\n    glRotatef(angle, 1, 0, 0);\n    glMultMatrixf( &amp;rotation_transform[0][0] ) ;\n\n    glPopMatrix();\n    glDisable (GL_LIGHTING);\n    swapBuffers();\n}\n</code></pre>\n\n<p>My function in mianwindow:</p>\n\n<pre><code>void MainWindow::on_pushButton_clicked()\n{\n    cout &lt;&lt; \"This Function Called\" &lt;&lt; endl;\n    ui-&gt;myGLWidget-&gt;renderFromButton();\n}\n</code></pre>\n\n<p>drawAxis() function from model class:</p>\n\n<pre><code>void Model::drawAxis(){\n    glBegin(GL_LINES);\n    double axis = 2;\n    //drawing x -axis\n    glColor4f(0, 0, 1, 0);\n    glVertex3f( axis, 0, 0);\n    glVertex3f(-axis, 0, 0);\n\n    //drawing y -axis\n    glColor4f(0, 1, 0, 0);\n    glVertex3f(0, axis, 0);\n    glVertex3f(0, -axis,0);\n\n    //drawing z -axis\n    glColor4f(1, 0, 0, 0);\n    glVertex3f(0, 0, axis);\n    glVertex3f(0, 0, -axis);\n    glEnd();\n}\n</code></pre>\n\n<p>It works fine when I call model.drawAxis() directly in MyGLWidget::draw() but doesn't works in the given form. I have tried updateGL(), paintGL() and update(). Is their any other way to do this?</p>\n"}, {"tags": ["c++", "serialization", "bitset"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1460569314, "post_id": 36605726, "comment_id": 60808484, "body": "So, to be clear, you don&#39;t care if it&#39;s supposed to work or guaranteed to work, you just care if it happens to work? If so, why not just test?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460569351, "post_id": 36605726, "comment_id": 60808501, "body": "You&#39;ll still need to store and read the <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/to_ullong\" rel=\"nofollow noreferrer\">underlying type</a> , such this is the smallest unit you can use."}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460569914, "post_id": 36605726, "comment_id": 60808839, "body": "I am testing it and it looks fine. @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 what do you mean?"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1460570340, "post_id": 36605726, "comment_id": 60809109, "body": "What, your undefined behaviour appeared to work? Well <i>that</i> never lulled anyone into a false sense of security and came back to bite them later!"}], "answers": [{"comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 0, "creation_date": 1460570285, "post_id": 36605854, "comment_id": 60809081, "body": "Well, at least with gcc and clang <code>std::bitset</code> <a href=\"http://coliru.stacked-crooked.com/a/931a854f36867094\" rel=\"nofollow noreferrer\">is standard layout</a> so it&#39;s more correct to say it&#39;s <i>not guaranteed</i> to be standard layout. Also <code>struct S { int* ptr; };</code> is standard-layout, but you don&#39;t want to entity-serialize it as well."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 0, "creation_date": 1460571085, "post_id": 36605854, "comment_id": 60809538, "body": "@AntonSavin, first point is actually the same to me. Once Standard is invoked, not guaranteed and is not is of similar weight. On the second part, it is incorrect semantically, but it least it is going to produce well defined results if you serialize/deserialize it in the same program. Non-standard layout types do not have this trait."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1460569531, "creation_date": 1460569531, "answer_id": 36605854, "question_id": 36605726, "link": "https://stackoverflow.com/questions/36605726/is-it-ok-to-use-stdbitset-in-a-struct-that-is-written-and-read-from-disk/36605854#36605854", "title": "Is it ok to use std::bitset in a struct that is written and read from disk?", "body": "<p>I understand that by writing it to file you mean taking an address of the <code>std::bitset</code> variable and writing the raw bytes? In this case the answer is <strong>NO</strong>. This process is called entity-serialization or entity-encoding, and you can not entity-serialize <code>std::bitset</code> (or any class containing it as a member field), since <code>std::bitset</code> is not <em>standard-layout</em> type.</p>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 1, "last_activity_date": 1460570253, "last_edit_date": 1460570253, "creation_date": 1460569648, "answer_id": 36605881, "question_id": 36605726, "link": "https://stackoverflow.com/questions/36605726/is-it-ok-to-use-stdbitset-in-a-struct-that-is-written-and-read-from-disk/36605881#36605881", "title": "Is it ok to use std::bitset in a struct that is written and read from disk?", "body": "<blockquote>\n  <p>Is this idea somehow flawed ...?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<p>Firstly, the failure modes: as you guessed, <code>std::bitset</code> might alter its internal representation. Aside from that, it's anyway not (guaranteed to be) a standard layout type, so the initial write is ill-defined. Aside from <em>that</em>, how would you read it back in? Presumably just read into a correctly-aligned buffer and type-pun it? That's illegal too.</p>\n\n<p>Secondly, the proposed fix: copying your old <code>&lt;bitset&gt;</code> header along is horrible. It won't be part of the actual standard library, and will still inject itself illegally into namespace <code>std</code>. It's entirely possible some <em>other</em> code will use the native <code>std::bitset</code> and lead to horrible errors.</p>\n\n<p>On top of that, it may simply not work when divorced from its native version of your standard lib.</p>\n\n<p>Thirdly, correct solutions: either</p>\n\n<ol>\n<li><p>(de)serialize it to some well-defined format, using the public interface of <code>std::bitset</code></p>\n\n<p>note that this is pretty trivial anyway: <a href=\"http://en.cppreference.com/w/cpp/utility/bitset/to_string\" rel=\"nofollow\"><code>std::bitset::to_string</code></a> already exists, and you can re-construct an instance from that string</p></li>\n<li><em>or</em> write a replacement class which is controlled by you and guaranteed to be trivially serializable. Just because you don't get <code>std::bitset</code> for free doesn't mean you have to <s>bang rocks together</s> use a raw char array.</li>\n</ol>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 36605881, "answer_count": 2, "score": 0, "last_activity_date": 1460570253, "creation_date": 1460569147, "question_id": 36605726, "link": "https://stackoverflow.com/questions/36605726/is-it-ok-to-use-stdbitset-in-a-struct-that-is-written-and-read-from-disk", "title": "Is it ok to use std::bitset in a struct that is written and read from disk?", "body": "<p>I need to store bits in files and <code>std::bitset</code> would be perfect for this, because I need many of its operations when I read the structure back again. The class seems to consist of just an array of the bits and no other member data.</p>\n\n<p>So instead of this</p>\n\n<pre><code>BYTE minuteOfDay[(60 * 24 / CHAR_BIT) + ((60 * 24 % CHAR_BIT) ? 1 : 0)];\n</code></pre>\n\n<p>I could have this:</p>\n\n<pre><code>std::bitset&lt;60 * 24&gt; minuteOfDay;\n</code></pre>\n\n<p>If the class should change with a future Visual Studio release and I need to read files written with an old version, I guess I could still just copy the old <code>&lt;bitset&gt;</code> header into my project.</p>\n\n<p>But just before making a really stupid decision: Is this idea somehow flawed for a reason I don't foresee right now? </p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 1, "creation_date": 1460576306, "post_id": 36605661, "comment_id": 60812784, "body": "While this code may answer the question, providing additional context regarding why and/or how it answers the question would significantly improve its long-term value. Please <a href=\"https://stackoverflow.com/posts/36605661/edit\">edit</a> your answer to add some explanation."}], "tags": [], "owner": {"reputation": 162, "user_id": 6159844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69bce66a6f20d9a0ce4eefd2e264a95?s=128&d=identicon&r=PG&f=1", "display_name": "eoD .J", "link": "https://stackoverflow.com/users/6159844/eod-j"}, "is_accepted": true, "score": 3, "last_activity_date": 1534813819, "last_edit_date": 1534813819, "creation_date": 1460568939, "answer_id": 36605661, "question_id": 36605561, "link": "https://stackoverflow.com/questions/36605561/need-to-append-multiple-header-request-to-qnetworkrequest/36605661#36605661", "title": "Need to append multiple header request to QNetworkRequest", "body": "<pre><code>QNetworkRequest request(QUrl(\"www.abc.com\"));\nrequest.setRawHeader(\"identifier\", \"13er5t\");\nrequest.setRawHeader(\"toolid\", \"aze\");\n</code></pre>\n\n<p>The headers are not standard HTTP headers, hence it is required to use  <code>setRawHeader()</code>. <code>setHeader()</code> could be used if it was one of these standard headers:</p>\n\n<p><a href=\"http://doc.qt.io/qt-4.8/qnetworkrequest.html#KnownHeaders-enum\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-4.8/qnetworkrequest.html#KnownHeaders-enum</a></p>\n"}], "owner": {"reputation": 391, "user_id": 827502, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/966b72f5d72863d55286ae7e747023fc?s=128&d=identicon&r=PG", "display_name": "Ganesh Rao B", "link": "https://stackoverflow.com/users/827502/ganesh-rao-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 36605661, "answer_count": 1, "score": 1, "last_activity_date": 1534822478, "creation_date": 1460568616, "last_edit_date": 1534822478, "question_id": 36605561, "link": "https://stackoverflow.com/questions/36605561/need-to-append-multiple-header-request-to-qnetworkrequest", "title": "Need to append multiple header request to QNetworkRequest", "body": "<p>I need to append multiple headers request in <code>QNetworkRequest</code>. How can I achieve this?</p>\n\n<p>For example below is my URL and the header required:</p>\n\n<blockquote>\n  <p>www.abc.com?identifier=13er5t&amp;toolid=aze</p>\n</blockquote>\n\n<p>where '<strong>identifier</strong>' and '<strong>toolid</strong>' are the header which I need to set to my request.\n(I dont want to pass it to the URL as specified in example, need to set it in the header)</p>\n\n<p>How do I set this in <strong><code>QNetworkRequest</code></strong>?</p>\n"}, {"tags": ["c++", "random", "srand"], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1460569451, "last_edit_date": 1460569451, "creation_date": 1460568908, "answer_id": 36605654, "question_id": 36605518, "link": "https://stackoverflow.com/questions/36605518/new-set-of-values-for-testcases-using-srand-in-c/36605654#36605654", "title": "New set of values for testcases using srand() in c++", "body": "<p>The problem is you never clear out the vector on each iteration.  Since you don't all of the new random numbers you generate are being added to the end of the vector and you ignore them since <code>n</code> never changes.</p>\n\n<p>What you need to do is add</p>\n\n<pre><code>a.clear();\nb.clear();\n</code></pre>\n\n<p>to the end of the while loop.  This will clear out the vectors and then when you start the next iteration the new random numbers will get added into the part of the vector you use in your functions.</p>\n\n<p>You could also set the vector the proper size and then use <code>[]</code> to access the elements.  This way you would just overwrite the previous values and you would not have to call <code>clear()</code></p>\n\n<pre><code>vector&lt;int&gt; a(n);\nvector&lt;int&gt; b(n);\n//...\nfor (int i = 0; i &lt; n; ++i)\n{\n    a[i] = (rand() % 10) - 5;\n    b[i] = (rand() % 10) - 5;\n}\n</code></pre>\n\n<p>I put both assignments in the same for loop to save space.  You can do this in two separate loops but it is not needed.</p>\n"}], "owner": {"reputation": 393, "user_id": 4947123, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b085f0d6d4ae40974198f9339f7c2f67?s=128&d=identicon&r=PG&f=1", "display_name": "Manav Saxena", "link": "https://stackoverflow.com/users/4947123/manav-saxena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 36605654, "answer_count": 1, "score": 1, "last_activity_date": 1460569451, "creation_date": 1460568485, "last_edit_date": 1460569138, "question_id": 36605518, "link": "https://stackoverflow.com/questions/36605518/new-set-of-values-for-testcases-using-srand-in-c", "title": "New set of values for testcases using srand() in c++", "body": "<p>I am trying to create some test cases for my 'minimum dot product' problem. I want 10 test cases , each generating different set of values for both vector a and b.</p>\n\n<p>The Problem is that even after using <code>srand( time( NULL ) )</code> though a new input is generated every time I compile and run the code but that same input is used for all the 10 test cases. </p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n\nusing std::vector;\n\nvoid sort_asc(vector&lt;int&gt; &amp;manav, int sizes)\n{\n    int temp = 0;\n\n    for (int i = 0; i&lt;sizes; i++)\n    {\n\n        for (int j = i + 1; j&lt;sizes; j++)\n        {\n\n            if (manav[i] &gt; manav[j])\n            {\n\n                temp = manav[i];\n                manav[i] = manav[j];\n                manav[j] = temp;\n\n            }\n        }\n    }\n\n    std::cout &lt;&lt; \"b in asc order : \";\n    for (int i = 0; i&lt;sizes; i++)\n    {\n        std::cout &lt;&lt; manav[i] &lt;&lt; \" \";\n\n    }\n\n    std::cout &lt;&lt; std::endl;\n\n}\n\nvoid sort_desc(vector&lt;int&gt; &amp;manav, int sizes)\n{\n    int temp = 0;\n\n    for (int i = 0; i&lt;sizes; i++)\n    {\n\n        for (int j = i + 1; j&lt;sizes; j++)\n        {\n\n            if (manav[i] &lt; manav[j])\n            {\n\n                temp = manav[i];\n                manav[i] = manav[j];\n                manav[j] = temp;\n\n            }\n        }\n\n    }\n\n    std::cout &lt;&lt; \"a in desc : \";\n    for (int i = 0; i&lt;sizes; i++)\n    {\n        std::cout &lt;&lt; manav[i] &lt;&lt; \" \";\n\n    }\n    std::cout &lt;&lt; std::endl;\n\n}\n\nlong long min_dot_product(vector&lt;int&gt; a, vector&lt;int&gt; b, int sizes) {\n\n    long long result = 0;\n\n    sort_desc(a, sizes);\n\n    sort_asc(b, sizes);\n\n\n    for (size_t i = 0; i &lt; sizes; i++) {\n        result += a[i] * b[i];\n    }\n    return result;\n}\n\nint main() {\n\n    srand(time(NULL));\n    /*\n    std::cin &gt;&gt; n;\n    vector&lt;int&gt; a(n), b(n);\n    for (size_t i = 0; i &lt; n; i++) {\n    std::cin &gt;&gt; a[i];\n    }\n    for (size_t i = 0; i &lt; n; i++) {\n    std::cin &gt;&gt; b[i];\n    }\n    */\n\n    //================================================================ TESTING =========================================================================\n    int z = 0;\n    int n = (rand() % 10) + 1; // generating the size of the vectors [1-10]\n    std::cout &lt;&lt; \"n = \" &lt;&lt; n &lt;&lt; \"\\n\";\n    vector&lt;int&gt; a;\n    vector&lt;int&gt; b;\n\n    while (z != 10) {\n\n        for (int i = 0; i &lt; n; ++i)\n        {\n            int p = (rand() % 10) - 5;\n            a.push_back(p); // input values [-5,4] in 'a'\n\n        }\n\n        std::cout &lt;&lt; \"Unsorted Vector a = \";\n        for (int i = 0; i&lt;n; i++)\n        {\n            std::cout &lt;&lt; a[i] &lt;&lt; \" \";\n        }\n\n        std::cout &lt;&lt; std::endl;\n\n        for (int i = 0; i &lt; n; ++i)\n        {\n            int q = (rand() % 10) - 5;\n            b.push_back(q); // inputing values [-5,4] in 'b'\n\n        }\n\n        std::cout &lt;&lt; \"Unsorted Vector b = \";\n        for (int i = 0; i&lt;n; i++)\n        {\n            std::cout &lt;&lt; b[i] &lt;&lt; \" \";\n        }\n\n        std::cout &lt;&lt; std::endl;\n\n        std::cout &lt;&lt; \"min_dot_product = \" &lt;&lt; min_dot_product(a, b, n) &lt;&lt; std::endl;\n        z++;\n\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I somehow want to generate a different set of values for vector a and b for all of the 10 test cases every time I run the code.</p>\n\n<p>I have tried <code>srand(i)</code> within the respective for loops before pushing the value in vectors but its not working for me, also reusing <code>srand( time( NULL ) )</code> within the for loops is not gonna help either. Is there some other simple way I can achieve this?</p>\n"}, {"tags": ["c++", "csv", "boost", "text-parsing", "boost-tokenizer"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460568372, "post_id": 36605437, "comment_id": 60807932, "body": "Wasn&#39;t that <a href=\"http://stackoverflow.com/a/1122720/1413395\">answered</a> in that question you mention as well?"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1460568441, "post_id": 36605437, "comment_id": 60807975, "body": "... and if not, parsing CSV files does not appear to be rocket science. If the existing libraries don&#39;t handle it fully to your satisfaction, then writing a CSV parser should take half a day, at a most."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460568484, "post_id": 36605437, "comment_id": 60807998, "body": "Agree.  Why not just grab a CSV parsing library?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1460568706, "post_id": 36605437, "comment_id": 60808109, "body": "boost::spirit is appropriate"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1460570867, "post_id": 36605437, "comment_id": 60809407, "body": "@RichardHodges and you can just scan my answers for at least 3 different takes on it, with various degrees of feature completeness (including <i>ridiculously complete</i>)"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1460582037, "post_id": 36606864, "comment_id": 60816005, "body": "Can you see something about its merits? I assume it does conform to RFC 4180, but - is it reasonably speedy? It&#39;s not very standard-library-like from the looks of it. Also, does it not require the &#39;ragel&#39; tool?"}], "tags": [], "owner": {"reputation": 1491, "user_id": 1284568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58c5acd8d45a4c91c6b192e56e4c06f8?s=128&d=identicon&r=PG", "display_name": "David D", "link": "https://stackoverflow.com/users/1284568/david-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1460572790, "creation_date": 1460572790, "answer_id": 36606864, "question_id": 36605437, "link": "https://stackoverflow.com/questions/36605437/how-should-i-read-and-parse-real-proper-full-featured-csvs-in-c/36606864#36606864", "title": "How should I read and parse (real, proper, full-featured) CSVs in C++?", "body": "<p>I'd strongly consider using a preexisting library.  The first one I found on google that looked reasonable was <a href=\"https://github.com/gsauthof/librfc4180csv\" rel=\"nofollow\">librfc4180csv</a>.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1460572790, "creation_date": 1460568239, "last_edit_date": 1495542677, "question_id": 36605437, "link": "https://stackoverflow.com/questions/36605437/how-should-i-read-and-parse-real-proper-full-featured-csvs-in-c", "title": "How should I read and parse (real, proper, full-featured) CSVs in C++?", "body": "<p>I've read:</p>\n\n<p><a href=\"https://stackoverflow.com/q/1120140/1593077\">How can I read and parse CSV files in C++?</a></p>\n\n<p>but the title there is rather misleading. It's not asking about reading CSVs per se, just multi-line comma-delimited no-escaped-data files.</p>\n\n<p>Now, I want to parse <em>actual</em> CSVs - the proper format (<a href=\"https://tools.ietf.org/html/rfc4180\" rel=\"nofollow noreferrer\">RFC 4180</a>-compliant) - with quoted fields and with line breaks, commas and double-quotes within quoted fields; and with at least the option of expecting CRLF as a record delimiter rather than LF.</p>\n\n<p>To be more specific: Can I extend the boost-tokenizer-based suggestions from the simpler version of the question to handle quoting (and the other issues) properly?</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460567257, "post_id": 36605097, "comment_id": 60807238, "body": "When I&#39;ve had this type of problem in MinGW / CMake, I add <code>-static</code> to the <code>CMAKE_CXX_FLAGS</code> and it shuts up."}, {"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "reply_to_user": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460567352, "post_id": 36605097, "comment_id": 60807297, "body": "Oh, I completely forgot to add that I&#39;m using Visual Studio 2015 to compile it, I will add it to the question. I guess your solution wouldn&#39;t work for me, correct me if I&#39;m wrong."}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460567508, "post_id": 36605097, "comment_id": 60807412, "body": "Would <a href=\"http://stackoverflow.com/questions/8581247/vs2010-link-in-a-single-library-statically\">this</a> help?"}, {"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "reply_to_user": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460567777, "post_id": 36605097, "comment_id": 60807585, "body": "I think it did! It seems you may also need a DLL at runtime and it&#39;s completely normal. The part that confuses me though, is that another application doesn&#39;t use the DLL yet it is statically linking zlib."}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460568029, "post_id": 36605097, "comment_id": 60807743, "body": "<a href=\"http://stackoverflow.com/questions/33402337/static-zlib-1-2-8-linking-on-visual-studio-2012\">Here&#39;s</a> a different one that may be a bit more to your point."}, {"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "reply_to_user": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460573736, "post_id": 36605097, "comment_id": 60811190, "body": "I did try that actually, but it&#39;s giving me errors with the CreateFile2 API. For some reason, even if I tell it NOT to target W8, it still will."}], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "edited": false, "score": 0, "creation_date": 1460573687, "post_id": 36605379, "comment_id": 60811162, "body": "Oh, the 32/64 bit might be the issue for me. I&#39;ll check it out, thanks!"}], "tags": [], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "is_accepted": false, "score": 0, "last_activity_date": 1460568070, "creation_date": 1460568070, "answer_id": 36605379, "question_id": 36605097, "link": "https://stackoverflow.com/questions/36605097/statically-linking-zlib-without-the-need-of-a-dll/36605379#36605379", "title": "Statically linking zlib without the need of a DLL", "body": "<p>I've done this with MSVC 10. I created a separate project for <strong>zlib</strong> and built it as a static library (.lib), which I then added to my main application project. The projects are not in the same workspace.  I did have to build a separate copy of <strong>zlib.lib</strong> for 32-bit and 64-bit builds of my app, and the app itself uses MFC in a dynamic DLL. Everything links just fine, and zlib is not in a DLL.</p>\n"}], "owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2043, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460568070, "creation_date": 1460567117, "last_edit_date": 1460567366, "question_id": 36605097, "link": "https://stackoverflow.com/questions/36605097/statically-linking-zlib-without-the-need-of-a-dll", "title": "Statically linking zlib without the need of a DLL", "body": "<p>I've downloaded and compiled zlib, and I am statically linking zlibwapi.lib to my C++ project on Visual Studio 2015.\nHowever, if I don't use the dll and launch my program, it complains about it:</p>\n\n<pre><code>\"The program can't start because zlibwapi.dll is missing from your computer.\"\n</code></pre>\n\n<p>With the DLL though, no error message shows up and the program works fine.<br>\nIs there any way I could use my program without the need of zlibwapi.dll?</p>\n"}, {"tags": ["c++", "floating-point", "double", "floating-accuracy"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 3, "creation_date": 1460567005, "post_id": 36605017, "comment_id": 60807057, "body": "Most C++ implementations conform to the IEEE floating point standard. So, yes."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 2, "creation_date": 1460567101, "post_id": 36605017, "comment_id": 60807128, "body": "@callyalater, no, it does not."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1460567573, "post_id": 36605017, "comment_id": 60807458, "body": "@SergeyA You&#39;re right. I meant to say <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format#C_and_C.2B.2B\" rel=\"nofollow noreferrer\">most implementations are</a>."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1460567810, "post_id": 36605017, "comment_id": 60807604, "body": "Note that the answer for comparing two values initialized from identical literals is <i>very</i> different than the answer for comparing two values initialized from any other sources. <code>.2</code> is almost never equal to <code>.1+.1</code>"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1460568536, "post_id": 36605017, "comment_id": 60808026, "body": "When exact equality matters, I have sometimes tried to avoid that very problem by creating the value only once, and referring to it in various places, even if I have to make it a global. Of course, the decision to do that would depend on various nuances of the program as a whole."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1460568216, "post_id": 36605109, "comment_id": 60807836, "body": "I&#39;m pretty sure <code>d1</code> has to equal <code>d2</code> in the OP&#39;s example.  I don&#39;t think you could have an implementation that converts the same literal into two different values.  It is true though that <code>123.456</code> does not have to equal <code>123 + .456</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1460568791, "post_id": 36605109, "comment_id": 60808161, "body": "@NathanOliver, I didn&#39;t took the question literally and thought those equasions there are just for illustration. However, it is not hard to imagine implementation which would hav those two variables not comparing equally - imagine it uses an FPU chip which rounds up or down depending on random value - to reduce bias/"}, {"owner": {"reputation": 1654, "user_id": 566185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22b28cb0f2f033dca8dc933813ac390e?s=128&d=identicon&r=PG", "display_name": "Steve Hollasch", "link": "https://stackoverflow.com/users/566185/steve-hollasch"}, "edited": false, "score": 0, "creation_date": 1460682285, "post_id": 36605109, "comment_id": 60868074, "body": "Random rounding is not one of the allowed IEEE 754 rounding modes. These are:  1. round to nearest, ties to even, 2. round to nearest, ties away from zero, 3. round toward zero, 4. round toward +\u221e, 5. round toward -\u221e  In all of these modes, rounding is applied when two values are equally distant from the given value. In no case should a compiler choose a representation that is farther from the given decimal constant than another legal value."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 1654, "user_id": 566185, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/22b28cb0f2f033dca8dc933813ac390e?s=128&d=identicon&r=PG", "display_name": "Steve Hollasch", "link": "https://stackoverflow.com/users/566185/steve-hollasch"}, "edited": false, "score": 1, "creation_date": 1460684063, "post_id": 36605109, "comment_id": 60868505, "body": "@SteveHollasch, but C++ implementation is not required to follow IEEE standard."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 2, "last_activity_date": 1460567149, "creation_date": 1460567149, "answer_id": 36605109, "question_id": 36605017, "link": "https://stackoverflow.com/questions/36605017/is-imprecision-of-a-double-value-guaranteed-to-be-consistent-on-the-same-machine/36605109#36605109", "title": "Is imprecision of a double value guaranteed to be consistent on the same machine?", "body": "<p>No, you do not have this guarantee. C++ implementations are not bound by IEEE standard, and can choose any binary represenation they want.</p>\n\n<p>While they are unlikely to just invent their own, they usually have fluctuate (even within the same vendor) in how thew represent the 'nonrepresentable' numbers - they can be represented with a bigger number or a smaller number - and this representation changes (I believe, even different floating math options for <strong>same</strong> gcc can affect this).</p>\n"}, {"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 2, "last_activity_date": 1460567425, "creation_date": 1460567425, "answer_id": 36605190, "question_id": 36605017, "link": "https://stackoverflow.com/questions/36605017/is-imprecision-of-a-double-value-guaranteed-to-be-consistent-on-the-same-machine/36605190#36605190", "title": "Is imprecision of a double value guaranteed to be consistent on the same machine?", "body": "<p>In your case, <code>d1 == d2</code> will return <code>true</code>, and it will <em>almost</em> always return true on any properly operating compiler/architecture. Even if the compiler/architecture aren't IEEE conforming, it's extremely unlikely that providing an identical symbol for <code>123.456</code> would return different values on multiple invocations.</p>\n\n<p>But, if you had the following code:</p>\n\n<pre><code>double d1 = 123.456;\ndouble d2 = get_123_456_from_network_service(service);\n</code></pre>\n\n<p>That guarantee would cease to be. <code>123.456</code> will be exactly the same on your computer all the time, but if a different computer attempts to use the same symbol, and isn't IEEE conforming (or if yours isn't), then there's a good chance the values would be different.</p>\n"}, {"tags": [], "owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "is_accepted": false, "score": 0, "last_activity_date": 1460567590, "creation_date": 1460567590, "answer_id": 36605236, "question_id": 36605017, "link": "https://stackoverflow.com/questions/36605017/is-imprecision-of-a-double-value-guaranteed-to-be-consistent-on-the-same-machine/36605236#36605236", "title": "Is imprecision of a double value guaranteed to be consistent on the same machine?", "body": "<p>If your compiler conforms to the IEEE 754 (IEC 559) standard, they should be the same. You can check if it is IEEE compliant with <a href=\"http://en.cppreference.com/w/cpp/types/numeric_limits/is_iec559\" rel=\"nofollow\"><code>std::numeric_limits&lt;T&gt;::is_iec559</code></a>. Most implementations are IEEE compliant, but this is not a guarantee.</p>\n"}], "owner": {"reputation": 16545, "user_id": 1305516, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "David says Reinstate Monica", "link": "https://stackoverflow.com/users/1305516/david-says-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 1, "accepted_answer_id": 36605109, "answer_count": 3, "score": 1, "last_activity_date": 1460567590, "creation_date": 1460566868, "question_id": 36605017, "link": "https://stackoverflow.com/questions/36605017/is-imprecision-of-a-double-value-guaranteed-to-be-consistent-on-the-same-machine", "title": "Is imprecision of a double value guaranteed to be consistent on the same machine?", "body": "<p>We know that <code>double</code>s loose precision of their value as you increase the number of decimal points. But if I use the same <code>double</code> value twice on the same machine will I be <em>guaranteed</em> to have the same imprecision? For example:</p>\n\n<pre><code>double d1 = 123.456;//actually becomes 123.45600001\ndouble d2 = 123.456;//is guaranteed to become 123.45600001?\n</code></pre>\n\n<p>For simplicity sake lets stick with just C++.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 6, "creation_date": 1460566573, "post_id": 36604852, "comment_id": 60806787, "body": "When <code>j</code> is 3, you access <code>a[j+1]</code> which is <code>a[4]</code> which is past the boundary of the array."}, {"owner": {"reputation": 1964, "user_id": 1320881, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b69670b7cc6bce132f443eee557c9448?s=128&d=identicon&r=PG", "display_name": "Unimportant", "link": "https://stackoverflow.com/users/1320881/unimportant"}, "edited": false, "score": 1, "creation_date": 1460566671, "post_id": 36604852, "comment_id": 60806846, "body": "Buffer overrun with <code>a[j + 1]</code> when <code>j == 3</code>."}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1460567593, "post_id": 36604852, "comment_id": 60807479, "body": "One of you needs to add this an answer, not a comment."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1460567869, "post_id": 36604852, "comment_id": 60807647, "body": "It&#39;s probably a duplicate of either an existing stack smash or buffer overrun question, tbh"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1460569085, "post_id": 36604852, "comment_id": 60808338, "body": "I can&#39;t be bothered with spending time on dup seaches for debugging fails like this one.   I just DCV for Off-Topic/Questions seeking debugging help...  I don&#39;t want rep off stuff like this."}], "answers": [{"tags": [], "owner": {"reputation": 7481, "user_id": 2527795, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8359590ce3a66e5c58407ae5c83c9bbe?s=128&d=identicon&r=PG&f=1", "display_name": "vll", "link": "https://stackoverflow.com/users/2527795/vll"}, "is_accepted": false, "score": 4, "last_activity_date": 1460569248, "creation_date": 1460569248, "answer_id": 36605764, "question_id": 36604852, "link": "https://stackoverflow.com/questions/36604852/code-showing-error-stack-smashing-detected-a-out-terminated-aborted/36605764#36605764", "title": "Code showing error *** stack smashing detected ***: ./a.out terminated Aborted (core dumped)", "body": "<p>Your code accesses <code>a[j+1]</code>. When <code>j</code> is 4, this attempts to access <code>a[4]</code>, which is out of bounds; size of <code>a</code> is 4, so the last element is <code>a[3]</code>.</p>\n\n<p>Accessing array index that is out of bounds is undefined behavior. It may work, or it may not.</p>\n\n<p>You say when you write this, your program does not crash:</p>\n\n<pre><code>int a[]={3,2,4,1};\nint temp;\n</code></pre>\n\n<p>This happens, because your program reserves memory for <code>a</code>, and it places <code>temp</code> in the memory right after that. So when you try to change value of <code>a[4]</code>, you actually change value of <code>temp</code>.</p>\n\n<p>When you remove <code>int temp;</code>, it seems your program places no other variables to the memory location that would correspond <code>a[4]</code>. It crashes because it has no access to that memory location.</p>\n"}], "owner": {"reputation": 79, "user_id": 5696285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-V_QsFTC-sy0/AAAAAAAAAAI/AAAAAAAABuw/O_8CYWd1Oio/photo.jpg?sz=128", "display_name": "Hesham Ahmad", "link": "https://stackoverflow.com/users/5696285/hesham-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24273, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1460572493, "creation_date": 1460566358, "last_edit_date": 1460572493, "question_id": 36604852, "link": "https://stackoverflow.com/questions/36604852/code-showing-error-stack-smashing-detected-a-out-terminated-aborted", "title": "Code showing error *** stack smashing detected ***: ./a.out terminated Aborted (core dumped)", "body": "<p>This code is not running properly and showing the following error at runtime: </p>\n\n<blockquote>\n  <p>stack smashing detected: ./a.out terminated<br>\n  Aborted (core dumped)</p>\n</blockquote>\n\n<p>However, if we declare temp with i, j it works. The error is also shown if we declare temp in the if block.  The error is not shown if we declare the array size explicitly. I am compiling my code with the GNU compiler.</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    int i, j;\n    int a[] = {3, 2, 4, 1};\n    int temp;\n\n    for(i = 0; i &lt; 4; i++)\n    {\n        for(j = 0; j &lt; 4 - i; j++)\n        {\n            if(a[j] &gt; a[j + 1])\n            {\n                int temp;\n                temp = a[j];\n                a[j] = a[j + 1];\n                a[j + 1] = temp;\n            }\n        }\n    }\n\n    for(i = 0; i &lt; 4; i++)\n    {\n        cout &lt;&lt; a[i] &lt;&lt; endl;\n    }\n\n    return 2;\n}\n</code></pre>\n"}, {"tags": ["c++", "raytracing", "rotational-matrices"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460566575, "post_id": 36604847, "comment_id": 60806790, "body": "Thanks for your answer. Concerning the yellow highlighted section do you understand what it means?"}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 1, "creation_date": 1460566879, "post_id": 36604847, "comment_id": 60806983, "body": "It&#39;s saying that each row of the rotation matrix corresponds with a direction vector (relative to whatever the base frame represents). So row 1 of <code>R</code> is the &quot;right&quot;-direction vector, etc. Compare to x-hat, y-hat, and z-hat in general physics contexts. I believe the second &quot;right&quot; is a typo, and was meant to say &quot;forward&quot;."}, {"owner": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460566981, "post_id": 36604847, "comment_id": 60807044, "body": "Yeah I believe so too. Thanks :)"}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460567019, "post_id": 36604847, "comment_id": 60807071, "body": "@Lebowski Added info about those too, user2475059 is correct about the second <i>right</i> being <i>forward</i>."}, {"owner": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460567494, "post_id": 36604847, "comment_id": 60807400, "body": "@SamiKuhmonen I have not implemented the &quot;right&quot;, &quot;down&quot;, &quot;forward&quot; anywhere in my code. The modifications you made work, and I have a rotation. I am just not sure if it a rotation or a translation, since I am worried that the &quot;right&quot;, &quot;down&quot;, &quot;forward&quot; must be used in order to get the right perspective. I am a little confused."}, {"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "reply_to_user": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460567641, "post_id": 36604847, "comment_id": 60807503, "body": "@Lebowski You have some kind of vectors in the code when you loop every pixel of the resulting image and trace a ray through them. Those vectors should be these three. You might have just constants if the camera has always pointed into a single direction. You can easily test it, since if you keep rotating the camera then you either end up looking at the scene from the opposite side when reaching 180 degrees or you&#39;re constantly looking in the same direction and the camera is just rotating around the origo."}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "reply_to_user": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460567869, "post_id": 36604847, "comment_id": 60807648, "body": "@Lebowski You may want to read up on rotation matrices. I have personally found studying rotations to be one of the more generally useful things I&#39;ve done in engineering (aero), as they seem to be used a lot in a wide range of contexts."}, {"owner": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "reply_to_user": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "edited": false, "score": 0, "creation_date": 1460568419, "post_id": 36604847, "comment_id": 60807964, "body": "@user2475059 I have looked at the wikipedia page. Anything else you could recommend. I would like to be good at this stuff."}, {"owner": {"reputation": 133, "user_id": 2475059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82381d25ed4f78e8b1493d3016e4397?s=128&d=identicon&r=PG", "display_name": "user2475059", "link": "https://stackoverflow.com/users/2475059/user2475059"}, "reply_to_user": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "edited": false, "score": 0, "creation_date": 1460574379, "post_id": 36604847, "comment_id": 60811604, "body": "@Lebowski It&#39;ll depend on your level of expertise. A course in linear algebra wouldn&#39;t hurt, if you haven&#39;t had one. I&#39;m not having good luck finding intro pages I&#39;d recommend; they all seem to either not say what matters or go waay off the deep end of math. <a href=\"http://scipp.ucsc.edu/~haber/ph216/rotation_12.pdf\" rel=\"nofollow noreferrer\">This</a> is one of the better hardcore math ones I found looking quickly. Honestly, a lot of it (to me) is being comfortable with the linear algebra that suffuses rotation math; once you get the context, the matrices themselves are pretty straightforward."}], "tags": [], "owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "is_accepted": false, "score": 0, "last_activity_date": 1460566980, "last_edit_date": 1460566980, "creation_date": 1460566346, "answer_id": 36604847, "question_id": 36604734, "link": "https://stackoverflow.com/questions/36604734/rotating-a-pinhole-camera-in-3d/36604847#36604847", "title": "Rotating a pinhole camera in 3D", "body": "<p>You don't seem to be updating your <code>R</code> matrix after changing the <code>yaw</code>. This means that every time you do <code>camerapos = R * camerapos</code> you are rotating the <code>camerapos</code> vector in one direction.</p>\n\n<p>More proper way to do this would be to have the camerapos separate, build the <code>R</code> every time and use another vector for the result of the camera position.</p>\n\n<p>Something like this:</p>\n\n<pre><code>// Camera position\nvec3 cameraPos(0, 0, -19);\nvec3 trueCameraPos;\nfloat yaw;\n\nif (keystate[SDLK_LEFT])\n{\n    //cameraPos.x -= translation;\n    if (yaw &gt; 0)\n    {   \n        yaw = 0.01;\n    }\n    cout &lt;&lt; yaw &lt;&lt; endl;\n    cout &lt;&lt; \"LEFT\" &lt;&lt; endl;\n}\nif (keystate[SDLK_RIGHT])\n{\n    //cameraPos.x += translation;\n    if (yaw &gt; 0)\n    {\n        yaw = -0.01;\n    }\n    cout &lt;&lt; yaw &lt;&lt; endl;\n    cout &lt;&lt; \"RIGHT\" &lt;&lt; endl;\n}\n\n// Rotate camera\nvec3 c1(cos(yaw), 0, sin(yaw));\nvec3 c2(0, 1, 0);\nvec3 c3(-sin(yaw), 0, cos(yaw));\nglm::mat3 R(c1, c2, c3);\n\ntrueCameraPos = R * cameraPos;\n</code></pre>\n\n<p>As for the camera definitions, the camera needs three vectors to define its orientation. If you rotate the camera the orientation also rotates, otherwise you'd just move the camera and it would always be looking in one direction.</p>\n\n<p>The definition in yellow is incorrect, since there should be three perpendicular vectors, usually <em>up</em>, <em>right</em> and <em>forward</em>. Now there are two right vectors (one being <em>down</em> is just opposite of what <em>up</em> would be), so the last one should be <em>forward</em> vector.</p>\n\n<p>These vectors define the directions used in the raytracer. Forward is where the rays are traced to, up and right define displacement directions in the image plane for each image pixel. You are most likely using these already in your tracing code.</p>\n"}], "owner": {"reputation": 115, "user_id": 5600857, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7038ac7103a088ba7069e9a85dbb3e22?s=128&d=identicon&r=PG&f=1", "display_name": "Lebowski", "link": "https://stackoverflow.com/users/5600857/lebowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460566980, "creation_date": 1460565927, "question_id": 36604734, "link": "https://stackoverflow.com/questions/36604734/rotating-a-pinhole-camera-in-3d", "title": "Rotating a pinhole camera in 3D", "body": "<p>I am trying to rotate a pinhole camera in 3D space. I have previously raytraced a room. As good practice I have first done the maths and the tried to program the maths in c++. </p>\n\n<pre><code>// Camera position\nvec3 cameraPos(0, 0, -19);\n\n\n// Rotate camera\nfloat&amp; yaw;\nvec3 c1(cos(yaw), 0, sin(yaw));\nvec3 c2(0, 1, 0);\nvec3 c3(-sin(yaw), 0, cos(yaw));\nglm::mat3 R(c1, c2, c3);\n</code></pre>\n\n<p>What I have done to rotate the camera is this:</p>\n\n<pre><code>if (keystate[SDLK_LEFT])\n{\n    //cameraPos.x -= translation;\n    if (yaw &gt; 0)\n    {   \n        yaw = 0.01;\n    }\n    cout &lt;&lt; yaw &lt;&lt; endl;\n    cameraPos = R * cameraPos;\n    cout &lt;&lt; \"LEFT\" &lt;&lt; endl;\n}\nif (keystate[SDLK_RIGHT])\n{\n    //cameraPos.x += translation;\n    if (yaw &gt; 0)\n    {\n        yaw = -0.01;\n    }\n    cout &lt;&lt; yaw &lt;&lt; endl;\n    cameraPos = R * cameraPos;\n    cout &lt;&lt; \"RIGHT\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I have multiplied the rotation matrix R with the camera position vector. What happens now is that the room moves only to the left no matter what key I press.</p>\n\n<p>The tutorial I am following says:</p>\n\n<blockquote>\n  <p>If the camera is rotated by the matrix R then vectors representing the\n  right (x-axis), down (y-axis) and forward (z-axis) directions van be\n  retrieved as:</p>\n\n<pre><code>vec3 right(R[0][0],R[0][1],R[0][2]);\nvec3 down(R[1][0],R[1][1],R[2][2]);\nvec3 right(R[2][0],R[2][1],R[2][2]);\n</code></pre>\n  \n  <p>To model a rotating camera you need to use these directions both when\n  you move the camera and when you cast rays.</p>\n</blockquote>\n\n<p>I don't understand how I am supposed to use the above information. </p>\n\n<p>Any help or references appreciated.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "settings"], "comments": [{"owner": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "edited": false, "score": 0, "creation_date": 1460566047, "post_id": 36604642, "comment_id": 60806458, "body": "If you are using cmake to build your project, you can use cmake variables such as <code>PROJECT_DIR</code> inside your source code, which gets reconfigured to the actual directory name by cmake."}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6100911, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Oeu4rr6LcqI/AAAAAAAAAAI/AAAAAAAAACA/5mzpHwjhHfE/photo.jpg?sz=128", "display_name": "Carafini", "link": "https://stackoverflow.com/users/6100911/carafini"}, "is_accepted": true, "score": 1, "last_activity_date": 1460567304, "creation_date": 1460567304, "answer_id": 36605155, "question_id": 36604642, "link": "https://stackoverflow.com/questions/36604642/how-to-specify-a-directory-for-newly-created-text-file/36605155#36605155", "title": "How to specify a directory for newly created text file?", "body": "<p>You could you use windows api.</p>\n\n<pre><code> #include &lt;windows.h&gt;\n #include &lt;iostream&gt;\n #include &lt;string&gt;\n\n using namespace std;\n\n int main()\n {\n   char buff[MAX_PATH];\n   string path;\n\n   GetCurrentDirectory(MAX_PATH, buff);\n   path = string(buff) + \"\\\\file_name\";\n\n   cout &lt;&lt; path &lt;&lt; endl;\n\n   return 0;\n}\n</code></pre>\n\n<p>Here is the msdn article on changing current directories: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363806(v=vs.85).aspx\" rel=\"nofollow\"><strong>Changing the Current Directory</strong></a></p>\n"}], "owner": {"reputation": 6009, "user_id": 3313438, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/Ks9C6.jpg?s=128&g=1", "display_name": "Ziezi", "link": "https://stackoverflow.com/users/3313438/ziezi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 36605155, "answer_count": 1, "score": 0, "last_activity_date": 1460567304, "creation_date": 1460565674, "last_edit_date": 1460566067, "question_id": 36604642, "link": "https://stackoverflow.com/questions/36604642/how-to-specify-a-directory-for-newly-created-text-file", "title": "How to specify a directory for newly created text file?", "body": "<p>I'm running an old program that creates a text file and writes some data to it, despite that I haven't changed any of the settings (Solution, Project), the files are created on a directory that has nothing to do with the current project working directory.</p>\n\n<p>How to specify the directory of the newly created files to be the same as the one holding the source code?</p>\n\n<p>Note: Currently: Project -> Properties -> Configuration Properties -> Debugging -> Working Directory, is set to: <code>$(ProjectDir)</code>.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1460565733, "post_id": 36604605, "comment_id": 60806275, "body": "You seem to forget the <i>string terminator</i>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460565747, "post_id": 36604605, "comment_id": 60806285, "body": "You need to consider having a terminating <code>&#39;\\0&#39;</code> character in your internal <code>String</code> buffer."}], "answers": [{"tags": [], "owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "is_accepted": false, "score": 1, "last_activity_date": 1460565889, "creation_date": 1460565889, "answer_id": 36604720, "question_id": 36604605, "link": "https://stackoverflow.com/questions/36604605/trying-to-initialize-string-class-via-constructor-i-am-getting-weird-output/36604720#36604720", "title": "Trying to initialize String class via constructor.I am getting weird output", "body": "<p>You are not resetting the pointers. p and q should point to the beginning of the arrays before each loop.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 0, "last_activity_date": 1460565946, "creation_date": 1460565946, "answer_id": 36604740, "question_id": 36604605, "link": "https://stackoverflow.com/questions/36604605/trying-to-initialize-string-class-via-constructor-i-am-getting-weird-output/36604740#36604740", "title": "Trying to initialize String class via constructor.I am getting weird output", "body": "<p>Lets consider these lines for a while:</p>\n\n<pre><code>q = new char[len];\nfor (int i = 0; i &lt; len; i++) {\n    *q = *p;\n    p++; q++;\n}\nfor (int i = 0; i &lt; len; i++) {\n    cout &lt;&lt; *q;\n    q++;\n}\n</code></pre>\n\n<p>First you allocate memory and assign it to <code>q</code>.</p>\n\n<p>Then in the first loop you <em>modify</em> <code>q</code>. and at the end of the loop it will no longer point to the original place, the pointer give to you by the <code>new[]</code> expression. In fact, <code>q</code> will be pointing to memory that is not allocated.</p>\n\n<p>You then continue to print out the memory, but now you are out of bounds and will print indeterminate data, leading to <em>undefined behavior</em>.</p>\n\n<p>You loops needs to work on <em>temporary</em> variable, initially initialized to the same value as <code>q</code>. And you need to reset this temporary pointer between the loops.</p>\n"}], "owner": {"reputation": 13, "user_id": 6199911, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ab7R7ngZEmA/AAAAAAAAAAI/AAAAAAAAAcI/QnZDsYcgHpw/photo.jpg?sz=128", "display_name": "Navdeep Kumar", "link": "https://stackoverflow.com/users/6199911/navdeep-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 36604740, "answer_count": 2, "score": 0, "last_activity_date": 1460565946, "creation_date": 1460565570, "last_edit_date": 1460565655, "question_id": 36604605, "link": "https://stackoverflow.com/questions/36604605/trying-to-initialize-string-class-via-constructor-i-am-getting-weird-output", "title": "Trying to initialize String class via constructor.I am getting weird output", "body": "<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nclass String {\npublic:\nchar *q;\nint len;\nString() { q = new char[0]; }\nString(char * p) {\n    for (int i = 0;*p!=00; i++) {\n        len++;\n        p++;\n    }\n    q = new char[len];\n    for (int i = 0; i &lt; len; i++) {\n        *q = *p;\n        p++; q++;\n    }\n    for (int i = 0; i &lt; len; i++) {\n        cout &lt;&lt; *q;\n        q++;\n    }\n}\n\n};\nvoid main() {\nString s1;\nString s2(\"My name is navdeep.\");\nsystem(\"PAUSE\");  \n}      \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/oriu9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oriu9.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why this is happening i dont knnow, i have tried including cout in the for loop where len is being incremented. there the result is fine. but something goes wrong while copying.</p>\n"}, {"tags": ["c++", "list", "class", "declare"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1460565623, "post_id": 36604566, "comment_id": 60806204, "body": "Could it be that &quot;Edge.hpp&quot; <code>#include</code>s &quot;Vertex.hpp&quot;?"}, {"owner": {"reputation": 11, "user_id": 6091411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208837341995216/picture?type=large", "display_name": "Colin Legge", "link": "https://stackoverflow.com/users/6091411/colin-legge"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1460565739, "post_id": 36604566, "comment_id": 60806279, "body": "That&#39;s not it. All <code>Edge.hpp</code> includes is <code>&lt;stdio.h&gt;</code>"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 1, "creation_date": 1460565746, "post_id": 36604566, "comment_id": 60806283, "body": "You&#39;re trying to use member variable of <code>Vertex</code> in member function of <code>Graph</code>? What&#39;s the relationship between them?"}, {"owner": {"reputation": 11, "user_id": 6091411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208837341995216/picture?type=large", "display_name": "Colin Legge", "link": "https://stackoverflow.com/users/6091411/colin-legge"}, "edited": false, "score": 0, "creation_date": 1460566281, "post_id": 36604566, "comment_id": 60806610, "body": "<code>Graph.hpp</code> includes <code>Vertex.hpp</code> and <code>Vertex.hpp</code> include <code>Edge.hpp</code>."}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 6196101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bdfdecfbaa79d0c66fdfd564f81e48?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6196101/ivan"}, "reply_to_user": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1460568585, "post_id": 36605296, "comment_id": 60808054, "body": "@TriskalJM, thank you for edit. Now it is much better"}], "tags": [], "owner": {"reputation": 87, "user_id": 6196101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5bdfdecfbaa79d0c66fdfd564f81e48?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/6196101/ivan"}, "is_accepted": false, "score": 0, "last_activity_date": 1460568035, "last_edit_date": 1460568035, "creation_date": 1460567777, "answer_id": 36605296, "question_id": 36604566, "link": "https://stackoverflow.com/questions/36604566/list-not-declared-in-scope/36605296#36605296", "title": "List not declared in scope", "body": "<p>In <code>Graph::displayGraph()</code>, you are iterating on a list of <code>Vertex</code>s. To access the edgeList field from an object, you need to reference it as such. See the following code:</p>\n\n<pre><code>void Graph::displayGraph(){\n    for(int i = 0; i &lt; vertices[vertices.size()-1].label; i++){\n        cout &lt;&lt; vertices[i].label &lt;&lt; \": \";\n        for(int j = 0; j &lt;= vertices[i].edgeList.size(); j++){\n            if(vertices[i].edgeList[j].start==i){\n                cout &lt;&lt; vertices[i].edgeList[j].end;\n            }\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6091411, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208837341995216/picture?type=large", "display_name": "Colin Legge", "link": "https://stackoverflow.com/users/6091411/colin-legge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460568035, "creation_date": 1460565459, "question_id": 36604566, "link": "https://stackoverflow.com/questions/36604566/list-not-declared-in-scope", "title": "List not declared in scope", "body": "<p>So I'm trying to call on my <code>list</code> of <code>Edge*</code>s called <code>edgelist</code>. I have a <code>graph.cpp</code> below that is supposed to display an adjacency list of the graph.</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;list&gt;\n#include \"Graph.hpp\"\n\nGraph::Graph(){}\n\nvoid Graph::displayGraph(){\nfor(int i = 0; i &lt; vertices[vertices.size()-1].label; i++){\n    cout &lt;&lt; vertices[i].label &lt;&lt; \": \";\n    for(int j = 0; j &lt;= edgeList.size(); j++){\n        if(edgeList[j].start==i){\n            cout &lt;&lt; edgeList[j].end;\n        }\n    }\n}\n}\n</code></pre>\n\n<p><code>Graph.hpp</code> includes <code>Vertex.hpp</code> which is below.</p>\n\n<pre><code>#ifndef Vertex_hpp\n#define Vertex_hpp\n\n#include &lt;stdio.h&gt;\n#include &lt;list&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\n#include \"Edge.hpp\"\nusing namespace std;\n\nclass Vertex {\npublic:\n// the label of this vertex\nint label;\n// using a linked-list to manage its edges which offers O(c) insertion\nlist&lt;Edge*&gt; edgeList;\n\n// init your vertex here\nVertex(int label);\n\n// connect this vertex to a specific vertex (adding edge)\nvoid connectTo(int end);\n\n};\n#endif /* Vertex_hpp */\n</code></pre>\n\n<p>Yet, when I run my code I get an error saying that <code>edgeList is not declared in this scope</code>.</p>\n"}, {"tags": ["c++", "qt", "static-libraries"], "answers": [{"comments": [{"owner": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460576196, "post_id": 36605023, "comment_id": 60812706, "body": "While this code may answer the question, providing additional context regarding why and/or how it answers the question would significantly improve its long-term value. Please <a href=\"https://stackoverflow.com/posts/36605023/edit\">edit</a> your answer to add some explanation."}, {"owner": {"reputation": 493, "user_id": 2462827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49204224dc84811e8a37ab78c6d5894?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2462827/daniel"}, "reply_to_user": {"reputation": 6507, "user_id": 472647, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/ytEy0.jpg?s=128&g=1", "display_name": "CodeMouse92", "link": "https://stackoverflow.com/users/472647/codemouse92"}, "edited": false, "score": 0, "creation_date": 1460600929, "post_id": 36605023, "comment_id": 60822430, "body": "@JasonMc92 Sorry. I just felt asleep yesterday. Answer has been edited. Thank you for your reminder."}], "tags": [], "owner": {"reputation": 493, "user_id": 2462827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d49204224dc84811e8a37ab78c6d5894?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2462827/daniel"}, "is_accepted": false, "score": 0, "last_activity_date": 1460599708, "last_edit_date": 1460599708, "creation_date": 1460566890, "answer_id": 36605023, "question_id": 36604564, "link": "https://stackoverflow.com/questions/36604564/qt-static-library-undefined-reference-to-static-variable/36605023#36605023", "title": "QT Static library undefined reference to static variable", "body": "<p>in C++, static member should be defined and initialized outside the class declaration.</p>\n\n<pre><code>============= Library.h =============\n#ifndef LIBRARY_H\n#define LIBRARY_H\n\n#include &lt;QString&gt;\n\nclass Library\n{\npublic:\n    Library(QString name);\n\nprivate:\n    static QString name;// declare\n};\n#endif // LIBRARY_H    \n\n============= Library.cpp =============\n#include \"library.h\"\n\n//add this line if name is static member of Library\nQString Library::name;// define and initialize\n\n//you can also initialize it to other value like:\n//QString Library::name = \"banana!\";\n\nLibrary::Library(QString name){\n    this-&gt;name = name;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 2336793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/98808ea0cb259373ec41f3272e03cbbd?s=128&d=identicon&r=PG", "display_name": "user2336793", "link": "https://stackoverflow.com/users/2336793/user2336793"}, "edited": false, "score": 0, "creation_date": 1460567591, "post_id": 36605070, "comment_id": 60807477, "body": "Thank you for your help, also for the theory around this topic ! Actually I want to create singleton, so the static will not be of QString type. QString was just for illustration. Anyway thank you for your support."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 137, "user_id": 2336793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/98808ea0cb259373ec41f3272e03cbbd?s=128&d=identicon&r=PG", "display_name": "user2336793", "link": "https://stackoverflow.com/users/2336793/user2336793"}, "edited": false, "score": 0, "creation_date": 1460568210, "post_id": 36605070, "comment_id": 60807834, "body": "@user2336793 For singletons, you probably should read <a href=\"http://stackoverflow.com/q/1008019/1717300\">this question and answers</a> (or google for other resources). There are a few valid ways to go about having singletons, and many more ways which have different kinds of problems :)."}], "tags": [], "owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "is_accepted": true, "score": 1, "last_activity_date": 1460567034, "creation_date": 1460567034, "answer_id": 36605070, "question_id": 36604564, "link": "https://stackoverflow.com/questions/36604564/qt-static-library-undefined-reference-to-static-variable/36605070#36605070", "title": "QT Static library undefined reference to static variable", "body": "<p>In C++, <code>static</code> member variables are essentially global exported \"class variables\" (so very different from other <code>static</code> variables, in a sense even opposite, you make file scope variables static to <em>avoid</em> them being exported globals).</p>\n\n<p>And in that .h file, you only have variable <em>declaration</em>: you declare that this kind of variable exists, somewhere.</p>\n\n<p>However, to actually make it exist for real, you have to <em>define</em> it. Therefore you need to add this to one <code>.cpp</code> file:</p>\n\n<pre><code>QString Library::name = QStringLiteral(\"initial value\");\n</code></pre>\n\n<p>Additionally, it is class variable, so you (probably) shouldn't change it every time an instance is created, so your consturctor would be just:</p>\n\n<pre><code>Library::Library() {\n}\n</code></pre>\n\n<p>If you want to initialize it from somewhere else (quite probably <code>main()</code>, to replace the code in your constructor, simply assign to it:</p>\n\n<pre><code>Library::name = whatever;\n</code></pre>\n\n<hr>\n\n<p>However, if you actually want to have it as instance variable (each instance/object of the class has its own copy), then just remove <code>static</code> from the <em>definition</em> in the .h file.</p>\n\n<p>Also, with global variables (including <code>static</code> class variables), you have to be careful about initialization order. They're also global variables, with all the trouble that can bring. So, if you don't really <em>need</em> them, don't use them.</p>\n"}], "owner": {"reputation": 137, "user_id": 2336793, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/98808ea0cb259373ec41f3272e03cbbd?s=128&d=identicon&r=PG", "display_name": "user2336793", "link": "https://stackoverflow.com/users/2336793/user2336793"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 36605070, "answer_count": 2, "score": 0, "last_activity_date": 1460599708, "creation_date": 1460565447, "question_id": 36604564, "link": "https://stackoverflow.com/questions/36604564/qt-static-library-undefined-reference-to-static-variable", "title": "QT Static library undefined reference to static variable", "body": "<p>I have a problem with linking my project. I'm trying to create shared library which could be used between three different projects. This library will be used for parsing XML files and general handling with objects from these XML files.</p>\n\n<p>Here is minimal example which is affected. Library project consist of these files</p>\n\n<pre><code>============= Library.cpp =============\n#include \"library.h\"\n\nLibrary::Library(QString name){\nthis-&gt;name = name;\n}\n\n============= Library.h =============\n#ifndef LIBRARY_H\n#define LIBRARY_H\n\n #include &lt;QString&gt;\n\n class Library\n {\n\n public:\n   Library(QString name);\n\nprivate:\n   static QString name;\n};\n#endif // LIBRARY_H\n\n============= Library.pro =============\nQT       -= gui\nTARGET = Library\nTEMPLATE = lib\nCONFIG += staticlib\nSOURCES += library.cpp\nHEADERS += library.h\nunix {\n   target.path = /usr/lib\n   INSTALLS += target\n}\n</code></pre>\n\n<p>Main application is made by these files.</p>\n\n<pre><code>============= main.c =============\n#include &lt;QCoreApplication&gt;\n#include \"library.h\"\n\nint main(int argc, char *argv[])\n{\n   QCoreApplication a(argc, argv);\n   Library lib(\"MyLib\");\n\n   return a.exec();\n}\n\n============= Application.pro =============\nQT += core\nQT -= gui\n\nTARGET = Application\nCONFIG += console\nCONFIG -= app_bundle\nTEMPLATE = app\nSOURCES += main.cpp\nSRCDIR = $$IN_PWD/../Library\nINCLUDEPATH += $$SRCDIR\nSRCDIR = $$IN_PWD/../Library\nINCLUDEPATH += $$SRCDIR\n\nLIBDIR = $$IN_PWD/../build-Library-Desktop_Qt_5_5_1_GCC_64bit-Lad\u011bn\u00ed/libLibrary.a\nLIBS += $$LIBDIR\n</code></pre>\n\n<p>Here is the output of linker</p>\n\n<pre><code>g++ -c -pipe -g -Wall -W -D_REENTRANT -fPIC -DQT_CORE_LIB -I../Application -I. -I../Library -I../Library -I../../../Qt/5.5/gcc_64/include -I../../../Qt/5.5/gcc_64/include/QtCore -I. -I../../../Qt/5.5/gcc_64/mkspecs/linux-g++ -o main.o ../Application/main.cpp\n\ng++ -Wl,-rpath,/home/mint/Qt/5.5/gcc_64 -Wl,-rpath,/home/mint/Qt/5.5/gcc_64/lib -o Application main.o   /home/mint/Development/test/Application/../build-Library-Desktop_Qt_5_5_1_GCC_64bit-Lad\u011bn\u00ed/libLibrary.a -L/home/mint/Qt/5.5/gcc_64/lib -lQt5Core -lpthread \n\n/home/mint/Development/test/Application/../build-Library-Desktop_Qt_5_5_1_GCC_64bit-Lad\u011bn\u00ed/libLibrary.a(library.o): In function `Library::Library(QString)':\n\nMakefile:214: recipe for target 'Application' failed\n\n/home/mint/Development/test/build-Library-Desktop_Qt_5_5_1_GCC_64bit-Lad\u011bn\u00ed/../Library/library.cpp:6: undefined reference to `Library::name'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>When I change <strong>static</strong> QString name in Library.h to non static variable, then everything is ok. It could be linked then. I think, that project files are setup correctly, but what am I missing ?</p>\n"}, {"tags": ["c++", "csv", "terminal", "sublimetext3", "fstream"], "comments": [{"owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 1, "creation_date": 1460571674, "post_id": 36604540, "comment_id": 60809902, "body": "Have you checked if the data from the CSV file is read in correctly when running from the Terminal?"}, {"owner": {"reputation": 411, "user_id": 4932384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86da337e8984202808e70062c9549f1e?s=128&d=identicon&r=PG", "display_name": "Chris T", "link": "https://stackoverflow.com/users/4932384/chris-t"}, "reply_to_user": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 0, "creation_date": 1460571931, "post_id": 36604540, "comment_id": 60810062, "body": "Andy, thank you for replying...would you mind elaborating a bit? I&#39;m not sure how I would confirm that the data is being read in correctly."}, {"owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 1, "creation_date": 1460572988, "post_id": 36604540, "comment_id": 60810716, "body": "@ChristT You could print out some of the variables from within the while loop. Your program assumes that <code>population.csv</code> is in the current working directory. If that isn&#39;t the case when running your program from the terminal, then it won&#39;t read in the data from the file."}, {"owner": {"reputation": 411, "user_id": 4932384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86da337e8984202808e70062c9549f1e?s=128&d=identicon&r=PG", "display_name": "Chris T", "link": "https://stackoverflow.com/users/4932384/chris-t"}, "reply_to_user": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 0, "creation_date": 1460574180, "post_id": 36604540, "comment_id": 60811484, "body": "@Andy, so I think you&#39;re on to something....I do have the csv file in the same directory as the directory I execute my programs in, but I tried having a message sent to cout every time my program read a line from the .csv file...it outputs the message in sublime text, but not in the terminal. So obviously something is happening where the filestream is not stuffing data into variables like it should."}, {"owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 1, "creation_date": 1460574490, "post_id": 36604540, "comment_id": 60811679, "body": "when you execute the program, is the current directory in terminal in that same directory? Even if the file is in the same directory as the program (such as <code>~&#47;src&#47;my_program</code>) if the current directory in terminal is different (such as just your home directory) then the program&#39;s current directory will be your home directory, not <code>~&#47;src&#47;my_program</code>."}, {"owner": {"reputation": 411, "user_id": 4932384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86da337e8984202808e70062c9549f1e?s=128&d=identicon&r=PG", "display_name": "Chris T", "link": "https://stackoverflow.com/users/4932384/chris-t"}, "reply_to_user": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "edited": false, "score": 0, "creation_date": 1460574744, "post_id": 36604540, "comment_id": 60811847, "body": "Andy, Thank you - now I&#39;m seeing the output! I didn&#39;t realize executing a file in a directory was not the same as actively being in that directory and reading files within it."}], "answers": [{"tags": [], "owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "is_accepted": true, "score": 1, "last_activity_date": 1460574986, "creation_date": 1460574986, "answer_id": 36607611, "question_id": 36604540, "link": "https://stackoverflow.com/questions/36604540/c-code-that-manipulates-csv-file-outputs-correctly-via-sublime-text-command-pa/36607611#36607611", "title": "C++ Code that manipulates CSV file outputs correctly via Sublime Text Command Palette...but not in Terminal", "body": "<p>Your program assumes that <code>population.csv</code> is in the current working directory. If the current directory does not contain that file, then that file won't be able to be read in.</p>\n\n<p>SublimeText most likely sets the current directory when executing your program to the directory where that program is located. </p>\n\n<p>When running commands from a terminal, the executed program inherits the current directory from the terminal. For example, if your program is in <code>~/src/my_program</code>, but the current directory in the terminal is your home directory, then the current directory for your program will be your home directory, not <code>~/src/my_program</code>.</p>\n\n<p>If you change the current directory in the terminal to the directory where your program is located, then the file should be read in correctly.</p>\n"}], "owner": {"reputation": 411, "user_id": 4932384, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/86da337e8984202808e70062c9549f1e?s=128&d=identicon&r=PG", "display_name": "Chris T", "link": "https://stackoverflow.com/users/4932384/chris-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 36607611, "answer_count": 1, "score": 0, "last_activity_date": 1460574986, "creation_date": 1460565379, "question_id": 36604540, "link": "https://stackoverflow.com/questions/36604540/c-code-that-manipulates-csv-file-outputs-correctly-via-sublime-text-command-pa", "title": "C++ Code that manipulates CSV file outputs correctly via Sublime Text Command Palette...but not in Terminal", "body": "<p>For my latest lab I was given a fairly basic assignment - take a CSV file with population data and output various details, like the country with the largest population. For the sake of brevity, I've included a truncated version of my code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\n  struct Country {\n    string name;\n    double pop1950;\n    double pop1970;\n    double pop1990;\n    double pop2010;\n    double pop2015;\n  };\n\n  struct World {\n    int numCountries;\n    Country countries[229]; // plugged this value with the number of countries from the CSV file. \n  } myWorld;\n\n  int main()\n  {\n     ifstream csvStream; \n     csvStream.open (\"population.csv\");\n\n        double vpop1950;\n        double vpop1970;\n        double vpop1990;\n        double vpop2010;\n        double vpop2015;\n        string conName;\n\n        int counter = 0; \n\n\n       while (csvStream &gt;&gt; vpop1950 &gt;&gt; vpop1970 &gt;&gt; vpop1990 &gt;&gt; vpop2010 &gt;&gt; vpop2015) \n       {\n        getline(csvStream, conName);\n        // instantiate a country structure per line. \n\n        myWorld.countries[counter].name = conName; \n        myWorld.countries[counter].pop1950 = vpop1950; \n        myWorld.countries[counter].pop1970 = vpop1970;\n        myWorld.countries[counter].pop1990 = vpop1990; \n        myWorld.countries[counter].pop2010 = vpop2010;\n        myWorld.countries[counter].pop2015 = vpop2015; \n        counter++;\n\n        // cout &lt;&lt; conName &lt;&lt; endl; \n       }\n\n       // For task 2, where are going to get the top 3 countries. Let's start with the top country, and repeat the loop below 2 more times.\n\n       // Figure out the biggest population.\n       double placeVal = myWorld.countries[0].pop2015; // use this to compare and store the top 100 \n       string topCon = \" \";\n\n       for (int i = 0; i &lt; 229; i++)\n       {\n        if (placeVal &lt; myWorld.countries[i].pop2015)\n        {\n            placeVal = myWorld.countries[i].pop2015;\n            topCon = myWorld.countries[i].name;\n        }\n       }\n\n       cout &lt;&lt; \"The largest country is\" &lt;&lt; topCon &lt;&lt; \" which had \" &lt;&lt; placeVal * 1000 &lt;&lt; \" people in 2015.\" &lt;&lt; endl; // Multiplied by 1000 as per lab instructions. \n\n     return 0;\n\n     csvStream.close();\n\n  }\n</code></pre>\n\n<p>When I type Command+Shift+B in sublime text and have the file compile and execute, I get this output:</p>\n\n<pre><code>The largest country is China\n which had 1.37605e+09 people in 2015.\n[Finished in 0.3s]\n</code></pre>\n\n<p>Execute that same executable in terminal, and I get the following (on both mac and ubuntu):</p>\n\n<pre><code>The largest country is  which had 0 people in 2015.\n</code></pre>\n\n<p>My actual code is a fair bit longer, and I perform various other calculations in that original version of my program, but the same bug persists - the output shows in sublime text but not in the actual terminal. Any thoughts?</p>\n"}, {"tags": ["c++", "fortran", "fortran-iso-c-binding"], "comments": [{"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 1, "creation_date": 1460565709, "post_id": 36604514, "comment_id": 60806257, "body": "Please note that tags <a href=\"https://stackoverflow.com/questions/tagged/fortran-iso-c-binding\">fortran-iso-c-binding</a> and <a href=\"https://stackoverflow.com/questions/tagged/fortran90\">fortran90</a> are essentially contradictory.  Are you happy using very modern features of Fortran to do this?"}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1460566390, "post_id": 36604514, "comment_id": 60806686, "body": "You can&#39;t allocate <code>allocatable</code> array in C++, only a <code>pointer</code> array."}, {"owner": {"reputation": 21, "user_id": 6115293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac5dbb6d28958481f2c4d58d04513a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nouri.M", "link": "https://stackoverflow.com/users/6115293/nouri-m"}, "edited": false, "score": 0, "creation_date": 1460566418, "post_id": 36604514, "comment_id": 60806696, "body": "I&#39;m just using gfortran 4.8, with files extension .f90, as I read the Interoperability with C work with this version of fortran compiler."}, {"owner": {"reputation": 21, "user_id": 6115293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac5dbb6d28958481f2c4d58d04513a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nouri.M", "link": "https://stackoverflow.com/users/6115293/nouri-m"}, "edited": false, "score": 0, "creation_date": 1460566492, "post_id": 36604514, "comment_id": 60806740, "body": "Valdimir F do you have please, any clear example."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1460566704, "post_id": 36604514, "comment_id": 60806869, "body": "BTW .f90 does not mean Fortran 90, it is confusing but it is true."}, {"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 1, "creation_date": 1460566796, "post_id": 36604514, "comment_id": 60806925, "body": "Try <a href=\"http://stackoverflow.com/questions/23891769/allocating-memory-in-c-for-a-fortran-allocatable\" title=\"allocating memory in c for a fortran allocatable\">stackoverflow.com/questions/23891769/&hellip;</a> <a href=\"http://stackoverflow.com/questions/16385372/allocating-memory-in-c-for-a-fortran-array\" title=\"allocating memory in c for a fortran array\">stackoverflow.com/questions/16385372/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 6115293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac5dbb6d28958481f2c4d58d04513a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nouri.M", "link": "https://stackoverflow.com/users/6115293/nouri-m"}, "edited": false, "score": 0, "creation_date": 1460567272, "post_id": 36604514, "comment_id": 60807247, "body": "In this two example the size of the array is known before calling C functions, In my code the c++ function only know the size of the array after computation, so I can&#39;t use static array."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1460567645, "post_id": 36604514, "comment_id": 60807505, "body": "<a href=\"http://stackoverflow.com/a/16389336\">One answer</a> to a question linked by Vladimir F gives much detail.  It leaves some to fill in, but there&#39;s also another piece of information missing from this question: is the allocatable nature on the Fortran size going to be used, or do you just care about getting something back where you don&#39;t know the size ahead of the call (but won&#39;t do allocation on the Fortran side later on)?"}, {"owner": {"reputation": 21, "user_id": 6115293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac5dbb6d28958481f2c4d58d04513a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nouri.M", "link": "https://stackoverflow.com/users/6115293/nouri-m"}, "edited": false, "score": 0, "creation_date": 1460568325, "post_id": 36604514, "comment_id": 60807908, "body": "francescalus,I need the size (array bound) and the contents, in fortran side, I will just use this array to Initialize an other one."}, {"owner": {"reputation": 24099, "user_id": 3157076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mB4zi.png?s=128&g=1", "display_name": "francescalus", "link": "https://stackoverflow.com/users/3157076/francescalus"}, "edited": false, "score": 0, "creation_date": 1460568679, "post_id": 36604514, "comment_id": 60808096, "body": "Then you can use a <code>type(c_ptr)</code> (with extents also coming back) on the interfacing parts, with <code>c_f_pointer</code>  to give you the local variable in your Fortran procedure, as in IanH&#39;s answer.  There&#39;s also the possibility with TS 29113, but as you don&#39;t have a compiler that supports that that wouldn&#39;t be a good answer.  If you do try with <code>type(c_ptr)</code> but come to difficulties then please give more detail."}], "owner": {"reputation": 21, "user_id": 6115293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac5dbb6d28958481f2c4d58d04513a8?s=128&d=identicon&r=PG&f=1", "display_name": "Nouri.M", "link": "https://stackoverflow.com/users/6115293/nouri-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1460565777, "creation_date": 1460565314, "last_edit_date": 1460565777, "question_id": 36604514, "link": "https://stackoverflow.com/questions/36604514/allocatable-from-fortran-to-c", "title": "Allocatable from Fortran to C++", "body": "<p>I would like to know how to pass a 3d allocatable from Fortran to a C++ function as an argument, and allocate it inside the  C++ function.  The array will contain the results of computation, then will return to Fortran. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1460565422, "post_id": 36604453, "comment_id": 60806094, "body": "<a href=\"https://en.wikipedia.org/wiki/Comma-separated_values\" rel=\"nofollow noreferrer\">CSV files</a> are actually harder to parse than it appears on the surface, and can have many weird corner-cases that are hard to work by. My recommendation is that you try to find a library to handle the parsing of the files instead."}, {"owner": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1460565434, "post_id": 36604453, "comment_id": 60806104, "body": "It&#39;s unclear what you are trying to ask. What output are you expecting and exactly what problem are you experiencing?"}, {"owner": {"reputation": 69, "user_id": 6174009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/735509bdb37970097f212d47c2262bba?s=128&d=identicon&r=PG&f=1", "display_name": "Hidden", "link": "https://stackoverflow.com/users/6174009/hidden"}, "reply_to_user": {"reputation": 2174, "user_id": 5398184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99afe5626580b435c284cf0605e15f32?s=128&d=identicon&r=PG", "display_name": "Biruk Abebe", "link": "https://stackoverflow.com/users/5398184/biruk-abebe"}, "edited": false, "score": 0, "creation_date": 1460565585, "post_id": 36604453, "comment_id": 60806182, "body": "I&#39;m getting some data saved like this &quot;data &quot; and others like this &quot; data&quot; and others like this &quot; data &quot;, as you can see I just want rid of the spaces @bkVnet"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1460567573, "post_id": 36604453, "comment_id": 60807460, "body": "@Hidden <i>&quot;I just want rid of the spaces&quot;</i> Check <a href=\"http://stackoverflow.com/questions/216823/whats-the-best-way-to-trim-stdstring\">this</a> for this purpose please."}], "answers": [{"tags": [], "owner": {"reputation": 1942, "user_id": 3127336, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6c56a0083546e0dc8182f729b83a8b73?s=128&d=identicon&r=PG&f=1", "display_name": "George Kourtis", "link": "https://stackoverflow.com/users/3127336/george-kourtis"}, "is_accepted": false, "score": 0, "last_activity_date": 1460565900, "creation_date": 1460565900, "answer_id": 36604727, "question_id": 36604453, "link": "https://stackoverflow.com/questions/36604453/reading-from-a-file-multiple-delimeters/36604727#36604727", "title": "Reading from a file, multiple delimeters", "body": "<p>The better approach for those kind of problems is a state machine. Each character that you get should act in a simple way. You don't state if you need spaces between words non delimited by commas, so I suppose you need them. I don't know what you need to do with double spaces, I suppose you need to keep things as are. So start reading one character at a time, there are two variables the start positions and the limit position. When you start you are determining the start position ( state 1 ). If you find any character different than the space character you set that start position to that character and you change your state to ( state 2 ). When in state 2 when you find a non space character you set the limit position to the next position than the character you found. If you find a comma character you get the string that begins form start to limit and you change again into state 1.</p>\n"}], "owner": {"reputation": 69, "user_id": 6174009, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/735509bdb37970097f212d47c2262bba?s=128&d=identicon&r=PG&f=1", "display_name": "Hidden", "link": "https://stackoverflow.com/users/6174009/hidden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1460565900, "creation_date": 1460565127, "question_id": 36604453, "link": "https://stackoverflow.com/questions/36604453/reading-from-a-file-multiple-delimeters", "title": "Reading from a file, multiple delimeters", "body": "<p>So I have some code which reads from a file and separates by the commas in the file. However some things in the file often have spaces after or before the commas so it's causing a bit of a problem when executing the code.</p>\n\n<p>This is the code that I which reads in the data from the file. Using the same kind of format I was wondering if there was a way to prepare for this spaces</p>\n\n<pre><code>while(getline(inFile, line)){\n        stringstream linestream(line);\n        // each field of the inventory file \n        string type;\n        string code;\n        string countRaw;\n        int count;\n        string priceRaw;\n        int price;\n        string other;\n        // \n        if(getline(linestream,type,',') &amp;&amp; getline(linestream,code,',')\n        &amp;&amp; getline(linestream,countRaw,',')&amp;&amp; getline(linestream,priceRaw,',')){\n            // optional other\n            getline(linestream,other,',');\n            count = atoi(countRaw.c_str());\n            price = atoi(priceRaw.c_str());\n            StockItem *t = factoryFunction(code, count, price, other, type);\n            list.tailAppend(t);\n       }\n    }\n</code></pre>\n"}]