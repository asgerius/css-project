[{"tags": ["c++", "c++11", "shared-ptr", "atomic", "lock-free"], "answers": [{"tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 1, "last_activity_date": 1455754318, "creation_date": 1455754318, "answer_id": 35470342, "question_id": 35470061, "link": "https://stackoverflow.com/questions/35470061/linking-pthread-disables-lock-free-shared-ptr-implementation/35470342#35470342", "title": "Linking pthread disables lock-free shared_ptr implementation", "body": "<p>If you use <code>shared_ptr</code> in a threaded environment, you NEED to have locks [of some kind - they could be implemented as atomic increment and decrement, but there may be places where a \"bigger\" lock is required to ensure no races]. The lockless version only works when there is only one thread. If you are not using threads, don't link with <code>-lpthread</code>. </p>\n\n<p>I'm sure there is some tricky way to convince the compiler that you are not REALLY using the threads for your shared pointers, but you are REALLY in fragile territory if you do - what happens if a <code>shared_ptr</code> is passed to a thread? You may be able to guarantee that NOW, but someone will probably accidentally or on purpose introduce one into something that runs in a different thread, and it all breaks.</p>\n"}, {"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 11, "last_activity_date": 1455766161, "last_edit_date": 1495541344, "creation_date": 1455766161, "answer_id": 35472279, "question_id": 35470061, "link": "https://stackoverflow.com/questions/35470061/linking-pthread-disables-lock-free-shared-ptr-implementation/35472279#35472279", "title": "Linking pthread disables lock-free shared_ptr implementation", "body": "<p>There are two separate things:</p>\n\n<ul>\n<li><p>Manipulation of the reference counter in the control block (or equivalent thing) is typically implemented with lock-free atomics <a href=\"https://stackoverflow.com/a/10916540/2756719\">whenever possible</a>. This is <em>not</em> what <code>std::atomic_is_lock_free</code> tells you.</p>\n\n<ul>\n<li><p>libstdc++'s <code>__shared_ptr</code> is <a href=\"https://stackoverflow.com/a/15141844/2756719\">templated on the lock policy</a>, so you can explicitly use</p>\n\n<pre><code>template&lt;typename T&gt;\nusing shared_ptr_unsynchronized = std::__shared_ptr&lt;T, __gnu_cxx::_S_single&gt;;\n</code></pre>\n\n<p>if you know what you are doing.</p></li>\n</ul></li>\n<li><code>std::atomic_is_lock_free</code> tells you whether the atomic access functions (<code>std::atomic_{store, load, exchange, compare_exchange}</code> etc.) on <code>shared_ptr</code> are lock-free. Those functions are used to concurrently access the <em>same</em> <code>shared_ptr</code> object, and typical implementations will use a mutex. </li>\n</ul>\n"}], "owner": {"reputation": 425, "user_id": 2612509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00a1cfb57dd4f05e0c81cff2577e11e7?s=128&d=identicon&r=PG", "display_name": "Gustorn", "link": "https://stackoverflow.com/users/2612509/gustorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 577, "favorite_count": 0, "accepted_answer_id": 35470342, "answer_count": 2, "score": 1, "last_activity_date": 1455771943, "creation_date": 1455752820, "last_edit_date": 1455771943, "question_id": 35470061, "link": "https://stackoverflow.com/questions/35470061/linking-pthread-disables-lock-free-shared-ptr-implementation", "title": "Linking pthread disables lock-free shared_ptr implementation", "body": "<p>The title pretty much conveys all relevant information, but here's a minimal repro:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;cstdio&gt;\n#include &lt;memory&gt;\n\nint main() {\n    auto ptr = std::make_shared&lt;int&gt;(0);\n    bool is_lockless = std::atomic_is_lock_free(&amp;ptr);\n    printf(\"shared_ptr is lockless: %d\\n\", is_lockless);\n}\n</code></pre>\n\n<p>Compiling this with the following compiler options produces a lock-free <code>shared_ptr</code> implementation:</p>\n\n<pre><code>g++ -std=c++11 -march=native main.cpp\n</code></pre>\n\n<p>While this doesn't:</p>\n\n<pre><code>g++ -std=c++11 -march=native -pthread main.cpp\n</code></pre>\n\n<p><code>GCC</code> version: <code>5.3.0</code> (on Linux, using <code>libstdc++</code>), tested on multiple machines that should have the necessary atomic instructions to make this work.</p>\n\n<p>Is there any way to force the lock-free implementation (I'd need the lock-free version, regardless of performance)? </p>\n"}, {"tags": ["c++", "arrays", "file", "char", "blank-line"], "comments": [{"owner": {"reputation": 264, "user_id": 5870312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aac98215c37440e6968411c0c919a70?s=128&d=identicon&r=PG&f=1", "display_name": "schwingms", "link": "https://stackoverflow.com/users/5870312/schwingms"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1455754060, "post_id": 35469995, "comment_id": 58636051, "body": "Okay, I did so now, thanks for the advice"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1455754382, "post_id": 35470338, "comment_id": 58636135, "body": "Please read <a href=\"http://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\">Why using EOF is wrong</a>.  If you are going to recommend a file reading loop, do it correctly."}], "tags": [], "owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "is_accepted": false, "score": 1, "last_activity_date": 1455754973, "last_edit_date": 1455754973, "creation_date": 1455754300, "answer_id": 35470338, "question_id": 35469995, "link": "https://stackoverflow.com/questions/35469995/how-do-i-read-in-blank-lines-from-a-txt-file-to-a-char-array/35470338#35470338", "title": "How do I read in blank lines from a .txt file to a char array", "body": "<p>Try the getline function instead (and fix the loop) like this</p>\n\n<pre><code> for (int i = 0; theFile.getline ( lines[i],14) &amp;&amp; i &lt; 100000; i++)\n    ;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1219, "user_id": 5876626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39591f95af318578678c3a2813d6c620?s=128&d=identicon&r=PG&f=1", "display_name": "pcodex", "link": "https://stackoverflow.com/users/5876626/pcodex"}, "is_accepted": false, "score": 0, "last_activity_date": 1455754591, "last_edit_date": 1455754591, "creation_date": 1455754441, "answer_id": 35470376, "question_id": 35469995, "link": "https://stackoverflow.com/questions/35469995/how-do-i-read-in-blank-lines-from-a-txt-file-to-a-char-array/35470376#35470376", "title": "How do I read in blank lines from a .txt file to a char array", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/getline\" rel=\"nofollow\">getline</a> has a version where you can specify the delimiter. The default version will bump out when it encounters a new line so don't use that.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1455755620, "creation_date": 1455755620, "answer_id": 35470567, "question_id": 35469995, "link": "https://stackoverflow.com/questions/35469995/how-do-i-read-in-blank-lines-from-a-txt-file-to-a-char-array/35470567#35470567", "title": "How do I read in blank lines from a .txt file to a char array", "body": "<p>You don't need to keep all the strings in memory. Just read one line at a time. If the line is a palindrome and it's longer than the longest one you've seen so far, store it's length and the line number. Then bump the line counter. Something like this:</p>\n\n<pre><code>long line_number = 0;\nint longest_length = -1;\nlong longest_number = -1;\nstd::string line;\nwhile (theFile.getline(line)) {\n    if (is_palindrome(line) &amp;&amp; longest_length &lt; line.length()) {\n        longest_length = line.length();\n        longest_line = line_number;\n    }\n    ++line_number;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 264, "user_id": 5870312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aac98215c37440e6968411c0c919a70?s=128&d=identicon&r=PG&f=1", "display_name": "schwingms", "link": "https://stackoverflow.com/users/5870312/schwingms"}, "is_accepted": false, "score": 0, "last_activity_date": 1455755979, "creation_date": 1455755979, "answer_id": 35470631, "question_id": 35469995, "link": "https://stackoverflow.com/questions/35469995/how-do-i-read-in-blank-lines-from-a-txt-file-to-a-char-array/35470631#35470631", "title": "How do I read in blank lines from a .txt file to a char array", "body": "<p>I gave up on trying to put them directly into the array of char arrays. I did this instead, using getline and vector.</p>\n\n<p>std::ifstream theFile;\n    theFile.open(argv[1]);</p>\n\n<pre><code>std::vector&lt;std::string&gt; Lines;\nstd::string workString;\nwhile(std::getline(theFile,workString))\n{\n    Lines.push_back(workString);\n    workString.clear();\n}\ntheFile.close();\n\nchar lines[100000][15];\nfor (int i = 0; i &lt; 100000; i++)\n{\n    for (int j = 0; j &lt; 15; j++)\n    {\n        lines[i][j] = '\\0';\n    }\n}\n\n\nfor (int i = 0; i &lt; 100000; i++)\n{\n    for (int j = 0; j &lt; Lines[i].size(); j++)\n    {\n        lines[i][j] = Lines[i][j];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 264, "user_id": 5870312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aac98215c37440e6968411c0c919a70?s=128&d=identicon&r=PG&f=1", "display_name": "schwingms", "link": "https://stackoverflow.com/users/5870312/schwingms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1455755979, "creation_date": 1455752546, "last_edit_date": 1455754035, "question_id": 35469995, "link": "https://stackoverflow.com/questions/35469995/how-do-i-read-in-blank-lines-from-a-txt-file-to-a-char-array", "title": "How do I read in blank lines from a .txt file to a char array", "body": "<p>In my program I am supposed to read a text file in line by line and search for the longest palindrome and return its line number.</p>\n\n<p>Each text file is 100,000 lines long with a max length of 15.</p>\n\n<p>With my code, I am able to read each line into </p>\n\n<pre><code>char lines[100000][15]\n</code></pre>\n\n<p>Except for the blank lines which throw off my calculation of which line contains the longest palindrome.</p>\n\n<p>For example a file containing: (0: is line 0, 1: is line 1, ect.)</p>\n\n<pre><code>0: hello\n1: bob\n2: joe\n3: \n4: cat\n</code></pre>\n\n<p>Comes up as:</p>\n\n<pre><code>0: hello\n1: bob\n2: joe\n3: cat\n4: (whatever 5: would be)\n</code></pre>\n\n<p>Here's my code for reading the file:</p>\n\n<pre><code>std::ifstream theFile;\ntheFile.open(argv[1]);\n\nchar lines[100000][15];\nfor (int i = 0; i &lt; 100000; i++)\n{\n    for (int j = 0; j &lt; 15; j++)\n    {\n        lines[i][j] = '\\0'; //I do this to initialize each char to null\n    }\n}\n\nwhile (!theFile.eof())\n{\n    for (int i = 0; i &lt; 100000; i++)\n    {\n        theFile &gt;&gt; lines[i];\n    }\n}\n</code></pre>\n\n<p>I'm assuming the issue is with the line:</p>\n\n<pre><code>theFile &gt;&gt; lines[i];\n</code></pre>\n\n<p>not copying over newlines or other formatting characters, but I'm not sure how to get around this so any help would be appreciated.</p>\n\n<p>I have to use an array of char arrays, btw, because I am using MPI to pass the data and I can only send chars and not arrays/strings.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455753367, "post_id": 35469847, "comment_id": 58635848, "body": "Think we need to see the <code>HeapPriorityQueue::begin</code> function, <a href=\"http://stackoverflow.com/help/mcve\">but an MCVE would be preferred.</a>"}, {"owner": {"reputation": 19, "user_id": 5943010, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Lxf8i.png?s=128&g=1", "display_name": "Claudia Hernandez", "link": "https://stackoverflow.com/users/5943010/claudia-hernandez"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455753507, "post_id": 35469847, "comment_id": 58635892, "body": "the begin function for the iterator is there."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1455753584, "post_id": 35469847, "comment_id": 58635910, "body": "An iterator should <i>not</i> have a copy of HPQ! Why would you do that?"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455755543, "post_id": 35470320, "comment_id": 58636505, "body": "I know we&#39;re supposed to avoid comments like thanks, but thanks. That link is golden."}], "tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": false, "score": 0, "last_activity_date": 1455754158, "last_edit_date": 1495540765, "creation_date": 1455754158, "answer_id": 35470320, "question_id": 35469847, "link": "https://stackoverflow.com/questions/35469847/iterator-constructor-not-initializing-properly/35470320#35470320", "title": "Iterator constructor not initializing properly", "body": "<blockquote>\n  <p>I initialized all the variables but when they pass the the Iterator constructer they get lost. </p>\n</blockquote>\n\n<p>Variables are always initialized in the order they're declared, so lets look at those: </p>\n\n<pre><code>    //If can_erase is false, the value has been removed from \"it\" (++ does nothing)\n    HeapPriorityQueue&lt;T,tgt&gt;  it;                 //copy of HPQ (from begin), to use as iterator via dequeue\n    HeapPriorityQueue&lt;T,tgt&gt;* ref_pq= nullptr;\n    int                      expected_mod_count=0;\n    bool                     can_erase = true;\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>HeapPriorityQueue&lt;T,tgt&gt;::Iterator::Iterator(HeapPriorityQueue&lt;T,tgt&gt;* iterate_over, bool tgt_nullptr):\nit(*ref_pq),ref_pq(iterate_over),expected_mod_count(ref_pq-&gt;mod_count){}\n</code></pre>\n\n<p>First, you initialize <code>it</code> as <code>*ref_pq</code>, which is <code>*nullptr</code>, which is illegal and usually instantly crashes.  I didn't really bother to analyze beyond that point, but I do have a question.  Why in the world does your \"pointer\" contain  a copy of the entire data set it's trying to iterate over?  Don't do that.  Also, I don't know what you intend with <code>expected_mod_count</code>, but that's probably also a bad idea.  And so is your <code>tgt</code> template parameter.</p>\n\n<p>For your review: <a href=\"https://stackoverflow.com/questions/7758580/writing-your-own-stl-container/7759622#7759622\">Writing your own STL Container</a>.</p>\n"}], "owner": {"reputation": 19, "user_id": 5943010, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Lxf8i.png?s=128&g=1", "display_name": "Claudia Hernandez", "link": "https://stackoverflow.com/users/5943010/claudia-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1455754158, "creation_date": 1455751782, "last_edit_date": 1455753423, "question_id": 35469847, "link": "https://stackoverflow.com/questions/35469847/iterator-constructor-not-initializing-properly", "title": "Iterator constructor not initializing properly", "body": "<p>Im writing a HeapPriorityQueue class with an interator. The problem is when the .begin() fuction calls the Iterator constructer it goes into the copy assignment constructor for the base class(HeapPriorityQueue Class). I initialized all the variables but when they pass the the Iterator constructer they get lost. I dont understand why. I tried initializing them within the body but the debugger would not execute the body, which I thought was really  weird. </p>\n\n<p>I have just stripepd the code down enough so others can quickly understand. The only note I want to add is in order to determin the priority I am using a gt() fucntion, or tgt in the template.</p>\n\n<p>Any help is appreciated, thanks</p>\n\n<pre><code>template&lt;class T, bool (*tgt)(const T&amp; a, const T&amp; b) = nullptr&gt; class HeapPriorityQueue {\n  public:\n    //Destructor/Constructors\n    ~HeapPriorityQueue();\n\n    HeapPriorityQueue          (bool (*cgt)(const T&amp; a, const T&amp; b) = nullptr);\n    HeapPriorityQueue          (const HeapPriorityQueue&lt;T,tgt&gt;&amp; to_copy, bool (*cgt)(const T&amp; a, const T&amp; b) = nullptr);\n\n    class Iterator {\n      public:\n        //Private constructor called in begin/end, which are friends of HeapPriorityQueue&lt;T,tgt&gt;\n        ~Iterator();\n        T           erase();\n        std::string str  () const;\n        HeapPriorityQueue&lt;T,tgt&gt;::Iterator&amp; operator ++ ();\n        HeapPriorityQueue&lt;T,tgt&gt;::Iterator  operator ++ (int);\n\n\n        friend Iterator HeapPriorityQueue&lt;T,tgt&gt;::begin () const;\n        friend Iterator HeapPriorityQueue&lt;T,tgt&gt;::end   () const;\n\n      private:\n        //If can_erase is false, the value has been removed from \"it\" (++ does nothing)\n        HeapPriorityQueue&lt;T,tgt&gt;  it;                 //copy of HPQ (from begin), to use as iterator via dequeue\n        HeapPriorityQueue&lt;T,tgt&gt;* ref_pq= nullptr;\n        int                      expected_mod_count=0;\n        bool                     can_erase = true;\n\n        //Called in friends begin/end\n        //These constructors have different initializers (see it(...) in first one)\n        Iterator(HeapPriorityQueue&lt;T,tgt&gt;* iterate_over, bool from_begin);    // Called by begin\n        Iterator(HeapPriorityQueue&lt;T,tgt&gt;* iterate_over);                     // Called by end\n    };\n\n\n    Iterator begin () const;\n    Iterator end   () const;\n\n\n  private:\n    bool (*gt) (const T&amp; a, const T&amp; b); // The gt used by enqueue (from template or constructor)\n    T*  pq;                              // Array represents a heap, so it uses heap ordering property\n    int length    = 0;                   //Physical length of pq array: must be &gt;= .size()\n    int used      = 0;                   //Amount of array used:  invariant: 0 &lt;= used &lt;= length\n    int mod_count = 0;                   //For sensing concurrent modification\n  };\n\n\ntemplate&lt;class T, bool (*tgt)(const T&amp; a, const T&amp; b)&gt;\nHeapPriorityQueue&lt;T,tgt&gt;::HeapPriorityQueue(const HeapPriorityQueue&lt;T,tgt&gt;&amp; to_copy, bool (*cgt)(const T&amp; a, const T&amp; b))\n: gt(tgt != nullptr ? tgt : cgt), length(to_copy.length) {\n    if (gt == nullptr)\n        gt = to_copy.gt;//throw TemplateFunctionError(\"HeapPriorityQueue::copy constructor: neither specified\");\n      if (tgt != nullptr &amp;&amp; cgt != nullptr &amp;&amp; tgt != cgt)\n        throw TemplateFunctionError(\"HeapPriorityQueue::copy constructor: both specified and different\");\n\n      pq = new T[length];\n\n      if (gt == to_copy.gt)\n        used = to_copy.used;\n\n      for (int i=0; i&lt;to_copy.used; ++i)\n         enqueue(to_copy.pq[i]);\n}\n\ntemplate&lt;class T, bool (*tgt)(const T&amp; a, const T&amp; b)&gt;\nauto HeapPriorityQueue&lt;T,tgt&gt;::begin () const -&gt; HeapPriorityQueue&lt;T,tgt&gt;::Iterator {\n     return Iterator(const_cast&lt;HeapPriorityQueue&lt;T,tgt&gt;*&gt;(this),true);}\n\ntemplate&lt;class T, bool (*tgt)(const T&amp; a, const T&amp; b)&gt;\nHeapPriorityQueue&lt;T,tgt&gt;::Iterator::Iterator(HeapPriorityQueue&lt;T,tgt&gt;* iterate_over, bool tgt_nullptr):\nit(*ref_pq),ref_pq(iterate_over),expected_mod_count(ref_pq-&gt;mod_count){}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "networking", "winsock"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1455752124, "post_id": 35469837, "comment_id": 58635380, "body": "<code>client_connection.sin_addr.S_un.S_addr = (unsigned long)(&quot;0.0.0.0&quot;);</code> Casting a string to an <code>unsigned long</code> makes no sense."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455752287, "post_id": 35469837, "comment_id": 58635440, "body": "David is right.  You have to use <code>inet_addr(&quot;0.0.0.0&quot;)</code> or equivalent instead."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1455752464, "post_id": 35469837, "comment_id": 58635496, "body": "You should only check <code>WSAGetLastError()</code> if the preceding Winsock call returned -1."}], "answers": [{"comments": [{"owner": {"reputation": 403, "user_id": 4068810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JGj__vB72hM/AAAAAAAAAAI/AAAAAAAAAPg/Um7gY_7VqIQ/photo.jpg?sz=128", "display_name": "Thomas Woods", "link": "https://stackoverflow.com/users/4068810/thomas-woods"}, "edited": false, "score": 0, "creation_date": 1455754541, "post_id": 35469882, "comment_id": 58636184, "body": "Thank you for the answer! I naturally found a ton more things wrong when fixing the error reporting, but it&#39;s better that I know about them."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1455756455, "last_edit_date": 1455756455, "creation_date": 1455751965, "answer_id": 35469882, "question_id": 35469837, "link": "https://stackoverflow.com/questions/35469837/two-sockets-wont-connect-to-one-another-c/35469882#35469882", "title": "Two sockets won&#39;t connect to one another (C++)", "body": "<p><code>0.0.0.0</code> (aka <code>INADDR_ANY</code>) is not a valid IP address for a client to <code>connect()</code> to.  If the server and client are running on the same machine, you can use <code>127.0.0.1</code> (aka <code>INADDR_LOOPBACK</code>) instead since your server is binding to <code>INADDR_ANY</code>, which includes <code>127.0.0.1</code>.</p>\n\n<p>Also, these statements are wrong on the client side:</p>\n\n<pre><code>client_connection.sin_port = (USHORT)(444);\nclient_connection.sin_addr.S_un.S_addr = (unsigned long)(\"0.0.0.0\");\n</code></pre>\n\n<p>You need to use <code>inet_addr()</code> (or equivalent) to convert an IP address from string format to binary format.  And you need to use <code>htons()</code> instead, like you do on the server side:</p>\n\n<pre><code>client_connection.sin_port = htons(444);\nclient_connection.sin_addr.S_un.S_addr = inet_addr(\"127.0.0.1\");\n</code></pre>\n\n<p>Also, your error handling in general is wrong.  Do not call <code>WSAGetLastError()</code> unless an error is actually reported first.  That means checking the return value of <code>socket()</code> and <code>accept()</code> for <code>INVALID_SOCKET</code>, the return value of <code>bind()</code>, <code>listen()</code>, and <code>connect()</code> for <code>SOCKET_ERROR</code> (which is -1, not 0), etc.  <code>connect()</code> is likely failing and you are not detecting the error correctly, so you think it succeeds when it really fails.</p>\n"}], "owner": {"reputation": 403, "user_id": 4068810, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-JGj__vB72hM/AAAAAAAAAAI/AAAAAAAAAPg/Um7gY_7VqIQ/photo.jpg?sz=128", "display_name": "Thomas Woods", "link": "https://stackoverflow.com/users/4068810/thomas-woods"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 35469882, "answer_count": 1, "score": 0, "last_activity_date": 1455756455, "creation_date": 1455751740, "last_edit_date": 1455751967, "question_id": 35469837, "link": "https://stackoverflow.com/questions/35469837/two-sockets-wont-connect-to-one-another-c", "title": "Two sockets won&#39;t connect to one another (C++)", "body": "<p>I am working with C++ networking, and have almost written my first program, consisting of a server and a client that connect to one another. Here is my code-</p>\n\n<p>server.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n\nusing namespace std;\n\nint main()\n{\n\n\n\n    int wsasuccessful;\n    WSAData WinSockData;\n    WORD DLLVERSION;\n    DLLVERSION = MAKEWORD(2, 1);\n    wsasuccessful = WSAStartup(DLLVERSION, &amp;WinSockData);\n    if (wsasuccessful != 0)\n    {\n        printf(\"Error %d while starting WSA\\n\", wsasuccessful);\n        pause();\n        return 1;\n    }\n\n\n\n    SOCKADDR_IN ADDRESS;\n    int AddressSize = sizeof(ADDRESS);\n    SOCKET uc_socket;\n\n\n\n    uc_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    ADDRESS.sin_addr.s_addr = INADDR_ANY;\n    ADDRESS.sin_family = AF_INET;\n    ADDRESS.sin_port = htons(444);\n    if (WSAGetLastError() != 0)\n    {\n        printf(\"Error %d while establishing socket\\n\", WSAGetLastError());\n        pause();\n        return 1;\n    }\n\n\n\n    bind(uc_socket, (SOCKADDR *)&amp;ADDRESS, AddressSize);\n    if (WSAGetLastError() != 0)\n    {\n        printf(\"Error %d while binding socket\\n\", WSAGetLastError());\n        pause();\n        return 1;\n    }\n\n\n\n    listen(uc_socket, 12);\n    if (WSAGetLastError() != 0)\n    {\n        printf(\"Error %d while binding socket\\n\", WSAGetLastError());\n        pause();\n        return 1;\n    }\n\n\n    SOCKET c_socket;\n    SOCKADDR client_sock;\n    int client_sock_size = sizeof(client_sock);\n    printf(\"Socket created; Set to listen for incoming connections\");\n    c_socket = accept(uc_socket, (SOCKADDR *)&amp;client_sock, &amp;client_sock_size);\n    printf(\"Connection found!\");\n\n\n\n    pause();\n    return 0;\n}\n</code></pre>\n\n<p>client.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n\nusing namespace std;\n\n\nint main()\n{\n    int wsasuccessful = -1;\n    WSAData WinSockData;\n    WORD DLLVERSION;\n    DLLVERSION = MAKEWORD(2, 1);\n    wsasuccessful = WSAStartup(DLLVERSION, &amp;WinSockData);\n    if (wsasuccessful != 0)\n    {\n        printf(\"Error %d in client while starting WSA\\n\", WSAGetLastError());\n        pause();\n        return 1;\n    }\n\n\n\n    SOCKET client_socket;\n    client_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n    if (WSAGetLastError() != 0)\n    {\n        printf(\"Error %d in client while instantiating socket\\n\", WSAGetLastError());\n        pause();\n        return 1;\n    }\n\n\n\n    SOCKADDR_IN client_connection;\n    client_connection.sin_family = AF_INET;\n    client_connection.sin_port = (USHORT)(444);\n\n    client_connection.sin_addr.S_un.S_addr = (unsigned long)(\"0.0.0.0\");\n\n\n\n    int connection_success = -1;\n    printf(\"Connection started!\");\n    connection_success = connect(client_socket, (SOCKADDR *)&amp;client_connection, sizeof(client_connection));\n    if (connection_success != 0)\n    {\n        printf(\"Error %d in client while instantiating socket\\n\", WSAGetLastError());\n        pause();\n        return 2;\n    }\n    printf(\"The client has found a server!\");\n    printf(\"The last WSA error was: %d\", WSAGetLastError());\n\n\n    pause();\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li><p>I don't see any errors after going over this multiple times, but I don't get a connection after launching both (server first, of course)</p></li>\n<li><p>I have setup my firewall to allow the connection to the network</p></li>\n<li><p>The two binaries get stuck listening (of course), and connecting. Server and client, respectively.</p></li>\n<li><p>I checked the ports being used and the associated PIDs (netstat -a -o), and sure enough, the server was listening to port 444, as stated in the code.</p></li>\n</ul>\n\n<p>Does anyone have any ideas on what might be causing the issue?</p>\n"}, {"tags": ["c++", "file-io", "io", "ppm"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1455749825, "post_id": 35469377, "comment_id": 58634418, "body": "ASCII encoding does not assign a printable character to all values between 0 and 255."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455749860, "post_id": 35469377, "comment_id": 58634428, "body": "<i>&quot;... bytes were not converted into chars ...&quot;</i> What do you mean?"}, {"owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455750585, "post_id": 35469377, "comment_id": 58634758, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I don&#39;t know... i&#39;m really confused. I want the bytes to be represented as chars between 0 and 255 in the array."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455750672, "post_id": 35469377, "comment_id": 58634804, "body": "@user So you want to see the numbers? The duplicate question well serves you with the answer you need."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1455751581, "post_id": 35469377, "comment_id": 58635160, "body": "Important remark :  you have to open the file in <code>ios::binary</code> mode to safely read binary data.  If you don&#39;t, on windows platforms, the binary sequence 13 10  would be read 10 due to the CR LF to LF conversion, causing color components to be lost."}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "edited": false, "score": 0, "creation_date": 1455750295, "post_id": 35469457, "comment_id": 58634628, "body": "So I did this and now the values printed are either 0, -128, or -1, which is definitely not what they&#39;re supposed to be."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "edited": false, "score": 3, "creation_date": 1455750342, "post_id": 35469457, "comment_id": 58634643, "body": "@user: That should be <code>unsigned(temp[i])</code> instead of <code>(int)(temp[i])</code>."}, {"owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1455750433, "post_id": 35469457, "comment_id": 58634683, "body": "@IInspectable now the values are all either 0 or 4294967168...."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "edited": false, "score": 1, "creation_date": 1455750635, "post_id": 35469457, "comment_id": 58634782, "body": "@user: Your array needs to be of type <code>unsigned char[size]</code> as well."}, {"owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1455750956, "post_id": 35469457, "comment_id": 58634910, "body": "@IInspectable I will change the initialization to &quot;unsigned char temp[size];&quot;. Don&#39;t I have to change this line as well? &quot;infile.read((char*)&amp;temp, size*sizeof(temp[0])); // coercion&quot; since it is no longer an array of char *, but just char?"}], "tags": [], "owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "is_accepted": true, "score": 1, "last_activity_date": 1455749858, "creation_date": 1455749858, "answer_id": 35469457, "question_id": 35469377, "link": "https://stackoverflow.com/questions/35469377/reading-bytes-from-a-p6-ppm-file-into-a-character-array-c/35469457#35469457", "title": "Reading bytes from a P6 PPM file into a character array (C++)", "body": "<p>It looks like you want it to print a BYTE value, not a character. Try this:</p>\n\n<pre><code>cout &lt;&lt; \"i is \" &lt;&lt; i &lt;&lt; \"; value is \" &lt;&lt; (int)(temp[i]) &lt;&lt; endl;\n</code></pre>\n\n<p>By casting the char to an int, <em>cout</em> will print the value, not the ASCII code.</p>\n"}], "owner": {"reputation": 172, "user_id": 5786189, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/49541c0a9e94e83417c68b03eb915151?s=128&d=identicon&r=PG&f=1", "display_name": "user", "link": "https://stackoverflow.com/users/5786189/user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "closed_date": 1455749911, "accepted_answer_id": 35469457, "answer_count": 1, "score": 0, "last_activity_date": 1455749858, "creation_date": 1455749511, "question_id": 35469377, "link": "https://stackoverflow.com/questions/35469377/reading-bytes-from-a-p6-ppm-file-into-a-character-array-c", "closed_reason": "Duplicate", "title": "Reading bytes from a P6 PPM file into a character array (C++)", "body": "<p>Here is the relevant code:</p>\n\n<pre><code>string s;\nint width, height, max;\n\n// read header\nifstream infile( \"file.ppm\" );  // open input file\ninfile &gt;&gt; s; // store \"P6\"\ninfile &gt;&gt; width &gt;&gt; height &gt;&gt; max; // store width and height of image\ninfile.get(); // ignore garbage before bytes start\n\n// read RGBs\nint size = width*height*3;\nchar * temp = new char[size]; // create the array for the byte values to go into\ninfile.read(temp, size); // fill the array\n\n// print for debugging\nint i = 0;\nwhile (i &lt; size) {\n    cout &lt;&lt; \"i is \" &lt;&lt; i &lt;&lt; \"; value is \" &lt;&lt; temp[i] &lt;&lt; endl;\n    i++;\n}\n</code></pre>\n\n<p>Then, the output that I get says that the values in the array are either blank, or \"?\". I guess this means the bytes were not converted into chars properly?</p>\n\n<blockquote>\n  <p>i is 0; value is </p>\n  \n  <p>i is 1; value is </p>\n  \n  <p>i is 2; value is </p>\n  \n  <p>i is 3; value is ?</p>\n  \n  <p>i is 4; value is ?</p>\n</blockquote>\n\n<p>...etc. </p>\n"}, {"tags": ["c++", "cmake", "makefile"], "comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1455754829, "post_id": 35469243, "comment_id": 58636290, "body": "I can&#39;t speak for CMake but Make has a <code>-k</code> flag that will force it to keep going even if one of the targets fails."}], "owner": {"reputation": 1549, "user_id": 2037446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e5ec51f2cab11499c35b78fbbd85aea?s=128&d=identicon&r=PG", "display_name": "Ammar Husain", "link": "https://stackoverflow.com/users/2037446/ammar-husain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455770831, "creation_date": 1455748966, "last_edit_date": 1455770831, "question_id": 35469243, "link": "https://stackoverflow.com/questions/35469243/critical-sections-in-cmake-and-or-make", "title": "Critical sections in CMake and/or Make?", "body": "<p>I am building my project using CMake. This project uses several external libraries, one of which does not specify its dependencies correctly. This causes my build to fail while running a parallel make job. I am wondering if there is a feature in cmake and/or make to run a certain piece of code serially and everything else in parallel.</p>\n\n<p>More specifically I am using the FindCUDA.cmake module and within that using cuda_add_executable &amp; cuda_add_library. I am fairly convinced, that while build the CUDA libraries, the FindCUDA module is not listing out its dependencies, causing race conditions while reading and writing intermediate object files to disk. Is there a way I can simply run the cuda_add_library macro serially while running the rest of my build in parallel?</p>\n"}, {"tags": ["c++", "random"], "comments": [{"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 2, "creation_date": 1455748998, "post_id": 35469188, "comment_id": 58634022, "body": "Unclear. What is your question ? Please edit question and rephrase. And your code is (way) too long, read about an MCVE <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 2, "creation_date": 1455749662, "post_id": 35469188, "comment_id": 58634338, "body": "Before you do anything else, remove <code>srand</code> from the loop.  The whole point of <i>seeding</i> a generator is you do it only once."}, {"owner": {"reputation": 25, "user_id": 5767860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13690cdd3de71357f0fd9f84d55ef5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L", "link": "https://stackoverflow.com/users/5767860/dave-l"}, "edited": false, "score": 0, "creation_date": 1455750656, "post_id": 35469188, "comment_id": 58634795, "body": "Sorry my question was unclear... here is the question and problem. If I start the program at 0 and have it run to 1000000000 I will get different results than if I started it at 1 to run to 1000000000. I&#39;m trying to figure out ?why? the same program started at 0 gives different results than starting at 1 as for the value of seed will be the same between both programs at say 923425024 but only the program that started off at 0 will flag this as a 12 character or greater match between static and randomly dynamic arrays. Also srand is in loop because injected value changes per iteration. Seed=key"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1455750959, "post_id": 35469188, "comment_id": 58634911, "body": "Edited code in an attempt to make it readable. @DaveL , please look it over to see if I broke it."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455763639, "post_id": 35469188, "comment_id": 58638895, "body": "@user4581301: Thanks for the formatting"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5767860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13690cdd3de71357f0fd9f84d55ef5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L", "link": "https://stackoverflow.com/users/5767860/dave-l"}, "edited": false, "score": 0, "creation_date": 1455767027, "post_id": 35471565, "comment_id": 58639868, "body": "Thank You so much! That fixed it. I moved std::string str=&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz123&zwnj;&#8203;4567890!@#$%^&amp;*()_-+&zwnj;&#8203;=?&lt;&gt;:\\\\/~.,;&quot;;   to the start of the while loop to reinitialize back to original character order for each iteration.  =)"}], "tags": [], "owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "is_accepted": false, "score": 2, "last_activity_date": 1455763535, "last_edit_date": 1455763535, "creation_date": 1455761761, "answer_id": 35471565, "question_id": 35469188, "link": "https://stackoverflow.com/questions/35469188/why-does-starting-value-affect-outcome-of-seeded-random/35471565#35471565", "title": "Why does starting value affect outcome of Seeded Random?", "body": "<p>I now understand what you are asking!  The problem is because you shuffle <code>str</code> on each iteration without resetting it to its initial value each time, so it accumulates randomness from the previous iterations' shuffles.</p>\n\n<p>In other words, you have two \"seeds\" -- one in the counter which you set each  iteration using <code>srand</code> and one you do NOT reset, contained in <code>str</code>'s shuffled character order.</p>\n\n<p>To keep each iteration consistent, you need to reset <code>str</code> to the same base value before each shuffle.</p>\n"}], "owner": {"reputation": 25, "user_id": 5767860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13690cdd3de71357f0fd9f84d55ef5e5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave L", "link": "https://stackoverflow.com/users/5767860/dave-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1455763535, "creation_date": 1455748753, "last_edit_date": 1455750900, "question_id": 35469188, "link": "https://stackoverflow.com/questions/35469188/why-does-starting-value-affect-outcome-of-seeded-random", "title": "Why does starting value affect outcome of Seeded Random?", "body": "<p>Trying to figure out why the starting value affects the seeded random in this code. I would expect for it to find the match at the same location for 12 character or more match no matter of the starting value for the seed, but it seems as though I am getting different results depending on the starting value of the seed which to me makes no sense. Anyone who why I am getting these results as shown from 0, 1, 2, and 3 for starting values when all 4 should flag the same values as a match to 12 more more characters.</p>\n\n<pre><code>Poor Key Finder \nSearch for 12 or more matches\nSearching through Key Values of **0** thru 1000000000\n\nWARNING - Program Running Please Wait...\n\n25% Complete\n\n50% Complete\n\n75% Complete\n\n**Greater or Equal to = 12 ===== 923425024**\n\n100% Complete\n\nCompleted = 1000000000\n\n\nPress any key to continue . . .\n\n\nPoor Key Finder  \nSearch for 12 or more matches\nSearching through Key Values of **1** thru 1000000000\n\nWARNING - Program Running Please Wait...\n\n**Greater or Equal to = 12 ===== 204715678**\n\n25% Complete\n\n**Greater or Equal to = 12 ===== 346933630**\n\n50% Complete\n\n75% Complete\n\n100% Complete\n\nCompleted = 1000000000\n\n\nPress any key to continue . . .\n\n\nPoor Key Finder  \nSearch for 12 or more matches\nSearching through Key Values of **2** thru 1000000000\n\nWARNING - Program Running Please Wait...\n\n25% Complete\n\n50% Complete\n\n75% Complete\n\n100% Complete\n\nCompleted = 1000000000\n\n\nPress any key to continue . . .\n\n\nPoor Key Finder  \nSearch for 12 or more matches\nSearching through Key Values of **3** thru 1000000000\n\nWARNING - Program Running Please Wait...\n\n25% Complete\n\n50% Complete\n\n75% Complete\n\n100% Complete\n\nCompleted = 1000000000\n\n\nPress any key to continue . . .\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint delay;\nlong long int counter1 = 0; // Add LL beyond 9 digits\nlong long int endcount = 0; // while loop end counter\nlong long int seed1 = 0;\nint match2 = 0;\nint ST = 0;\nint flag = 0;\nfloat progress = 0;\nint step1 = 0;\nint step2 = 0;\nint step3 = 0;\n\nint main()\n{\n    system(\"color b0\");\n    std::cout &lt;&lt; \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n\";\n    std::cout &lt;&lt; \"  Poor Key Finder Version 1.0\\n\";\n    std::cout &lt;&lt; \"      Build 01/30/2016\\n\";\n    std::cout &lt;&lt; \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\n\\n\";\n    std::cout &lt;&lt; \" Enter Starting Key Value\\n\";\n    std::cin &gt;&gt; counter1;\n    std::cout &lt;&lt; \" Enter Ending Key Value\\n\";\n    std::cin &gt;&gt; endcount;\n    std::cout &lt;&lt; \" Enter Duplicate Character Counter Value\\n\";\n    std::cin &gt;&gt; flag;\n    system(\"cls\");\n\n    std::string str =\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&amp;*()_-+=?&lt;&gt;:\\\\/~.,;\";\n    std::string str2=\n            \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890!@#$%^&amp;*()_-+=?&lt;&gt;:\\\\/~.,;\";\n    system(\"@echo. Started on %date% at %time%&gt;&gt;LogKey.txt\");\n    system(\"color f0\");\n    std::cout &lt;&lt; \"Poor Key Finder - Search for \" &lt;&lt; flag\n            &lt;&lt; \" or more matches \\n\";\n    std::cout &lt;&lt; \"Searching through Key Values of \" &lt;&lt; counter1 &lt;&lt; \" thru \"&lt;&lt;endcount&lt;&lt;\"\\n\\ n\";\n    std::cout &lt;&lt; \"      WARNING - Program Running Please Wait...\\n\\n\";\n    while (counter1 &lt;= endcount)\n    {\n        seed1 = counter1;\n        srand(seed1);\n        random_shuffle(str.begin(), str.end()); // Shuffle the string\n        ST = 0;\n        match2 = 0;\n\n        progress = ((100 * counter1) / endcount);\n\n        if (progress == 25)\n        {\n            step1++;\n            if (step1 == 1)\n            {\n                std::cout &lt;&lt; \"25% Complete\\n\";\n            }\n            else\n            {\n            }\n        }\n        else if (progress == 50)\n        {\n            step2++;\n            if (step2 == 1)\n            {\n                std::cout &lt;&lt; \"50% Complete\\n\";\n            }\n            else\n            {\n            }\n        }\n        else if (progress == 75)\n        {\n            step3++;\n            if (step3 == 1)\n            {\n                std::cout &lt;&lt; \"75% Complete\\n\";\n            }\n            else\n            {\n            }\n        }\n        else if (endcount == counter1)\n        {\n            std::cout &lt;&lt; \"100% Complete\\n\";\n        }\n        else\n        {\n        }\n        while (ST &lt;= 85)\n        {\n            if (str[ST] == str2[ST])\n            {\n                match2++;\n            }\n            else\n            {\n            }\n            ST++;\n        }\n        if (match2 &gt;= flag)\n        {\n\n            std::cout &lt;&lt; \"Greater or Equal to = \" &lt;&lt; flag &lt;&lt; \" ===== \" &lt;&lt; seed1\n                    &lt;&lt; \"\\n\";\n        }\n        else\n        {\n        }\n        counter1++;\n    }\n    std::cout &lt;&lt; \"Completed = \" &lt;&lt; endcount &lt;&lt; \"\\n\\n\\n\";\n    system(\"@echo. Ended on %date% at %time%&gt;&gt;LogKey.txt\");\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "enums", "casting", "int"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1455749967, "post_id": 35469185, "comment_id": 58634480, "body": "I don&#39;t think the post title makes any sense; what&#39;s happening here is actually the opposite -- an integer value casted to an enum type. Which is a cast you must explicitly write in the code, because integers don&#39;t automatically convert to enums."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 1, "creation_date": 1455750361, "post_id": 35469185, "comment_id": 58634649, "body": "I would way it&#39;s a but that <code>baudRate</code> is not a <code>QSerialPort::BaudRate</code>."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 3025557, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d000fb83ccecbeed1e3f1d2dd58bc71f?s=128&d=identicon&r=PG&f=1", "display_name": "nimble_ninja", "link": "https://stackoverflow.com/users/3025557/nimble-ninja"}, "is_accepted": true, "score": 1, "last_activity_date": 1455750663, "last_edit_date": 1495541305, "creation_date": 1455750663, "answer_id": 35469633, "question_id": 35469185, "link": "https://stackoverflow.com/questions/35469185/enum-cast-to-a-qint32-with-qt/35469633#35469633", "title": "Enum cast to a qint32 with Qt", "body": "<p>Static casts do not check the validity of the cast (see <a href=\"https://stackoverflow.com/questions/11551853/can-static-cast-throw-an-exception-in-c\">Can static_cast throw an exception in C++?</a>).  That is why no error is returned when you try to replace the itemData to an int which doesn't correspond to the enum.</p>\n\n<p>There is no purpose in casting the baudrate to an enum when it is stored as an integer.  You could remove the cast and get the same result.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6524511, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/e5aed8789079ee3fba7b7ef4bdeec024?s=128&d=identicon&r=PG", "display_name": "user6524511", "link": "https://stackoverflow.com/users/6524511/user6524511"}, "is_accepted": false, "score": 0, "last_activity_date": 1467131590, "creation_date": 1467131590, "answer_id": 38081669, "question_id": 35469185, "link": "https://stackoverflow.com/questions/35469185/enum-cast-to-a-qint32-with-qt/38081669#38081669", "title": "Enum cast to a qint32 with Qt", "body": "<p>In Qt, .toInt() doesn't automatically resolve in a qint32. In some system int is not 32 bit, qint32 is guaranteed to be 32 bit.</p>\n"}], "owner": {"reputation": 874, "user_id": 2112198, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/RSmqh.jpg?s=128&g=1", "display_name": "Burrich", "link": "https://stackoverflow.com/users/2112198/burrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 644, "favorite_count": 0, "accepted_answer_id": 35469633, "answer_count": 2, "score": 0, "last_activity_date": 1467131590, "creation_date": 1455748743, "last_edit_date": 1455751097, "question_id": 35469185, "link": "https://stackoverflow.com/questions/35469185/enum-cast-to-a-qint32-with-qt", "title": "Enum cast to a qint32 with Qt", "body": "<p>I don't understand a cast (<code>static_cast</code>) from a Qt widget example (<a href=\"http://doc.qt.io/qt-5/qtserialport-terminal-example.html\" rel=\"nofollow\">terminal example</a>), inside the <code>updateSettings()</code> function from <a href=\"http://doc.qt.io/qt-5/qtserialport-terminal-settingsdialog-cpp.html\" rel=\"nofollow\">settingsdialog.cpp</a> : </p>\n\n<pre><code>currentSettings.baudRate = static_cast&lt;QSerialPort::BaudRate&gt;(\n                ui-&gt;baudRateBox-&gt;itemData(ui-&gt;baudRateBox-&gt;currentIndex()).toInt());\n</code></pre>\n\n<p>Where <code>currentSettings</code> and <code>QSerialPort::BaudRate</code> are <code>enum</code>s and <code>currentSettings.baudRate</code> is a <code>qint32</code>.</p>\n\n<p>What is the purpose of this cast, checking that <code>itemData().toInt()</code> belongs to <code>QSerialPort::BaudRate</code>? When i try to replace the <code>itemData</code> to an <code>int</code> which not belongs to the <code>enum</code>, no error is returned.</p>\n"}, {"tags": ["c++", "arrays", "templates", "sizeof"], "comments": [{"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "edited": false, "score": 0, "creation_date": 1455748895, "post_id": 35469158, "comment_id": 58633978, "body": "The <code>n</code> is dynamic. let me clear it up."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1455748944, "post_id": 35469158, "comment_id": 58634002, "body": "No, it&#39;s not. It&#39;s a compile time constant given in the initialization of the <code>arr</code>  in <code>main</code> (although implicitly)."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1455749012, "post_id": 35469158, "comment_id": 58634031, "body": "Are you asking <i>in <code>template&lt;size_t n&gt;void fn(const char (&amp;str)[n]) {};</code> what mechanism does the compiler use to find the correct value for <code>n</code> when I pass it an array?</i>"}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1455749064, "post_id": 35469158, "comment_id": 58634068, "body": "@kfsone Yes, more or less."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1455749146, "post_id": 35469158, "comment_id": 58634095, "body": "@Goodies That&#39;s just good old <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction\" rel=\"nofollow noreferrer\">Template Argument Deduction</a>."}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1455749428, "post_id": 35469158, "comment_id": 58634232, "body": "Also <a href=\"http://stackoverflow.com/questions/3368883/how-does-this-size-of-array-template-function-work\" title=\"how does this size of array template function work\">stackoverflow.com/questions/3368883/&hellip;</a> and <a href=\"http://stackoverflow.com/questions/2384107/magic-arguments-in-function-templates/2384187\" title=\"magic arguments in function templates\">stackoverflow.com/questions/2384107/&hellip;</a>"}, {"owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1455749470, "post_id": 35469158, "comment_id": 58634257, "body": "@BaummitAugen That&#39;s it. Although I am curious about kfsone&#39;s comment in terms of the compiler."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1455749835, "post_id": 35469158, "comment_id": 58634424, "body": "@Goodies So you are asking how TAD is implemented? That is probably not trivial, but feel free to look at the source of clang or gcc to find out. :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1455750714, "post_id": 35469158, "comment_id": 58634821, "body": "The key is that your array does <i>not</i> have type <code>int[]</code>. That&#39;s an illusion. It has type <code>int[11]</code>. Unless you want to find out how template metaprogramming is <i>implemented</i> inside your compiler (which I doubt), that&#39;s probably all you need to know for a eureka moment. There is, in fact, no such thing as a &quot;template array&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1455750788, "post_id": 35469158, "comment_id": 58634846, "body": "@kfsone: Shame, I liked your answer. Well, except for the brazen lie &quot;Arrays and pointers are equivalent&quot; :) Given that you went on to say &quot;not the same&quot; I suspect you meant something else though."}, {"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1455751470, "post_id": 35469158, "comment_id": 58635127, "body": "@PreferenceBean To quote the page I linked: &quot;Saying that arrays and pointers are ``equivalent&#39;&#39; means neither that they are identical nor even interchangeable.&quot;. I undeleted and added clarification (I only deleted because I saw the question had been closed)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 0, "creation_date": 1455759027, "post_id": 35469158, "comment_id": 58637617, "body": "@kfsone: Right, but take those away and what does &quot;equivalent&quot; mean? In reality, that FAQ is fairly dangerously misleading and is talking about antiquated implementation details that may not always even be true any more in the world of optimising compilers, let alone something that one should consider while actually writing in the abstraction that is C++ (or C). I&#39;d avoid quoting that particularly strange usage of that particular word, in this particular context. :)"}], "answers": [{"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": true, "score": 4, "last_activity_date": 1455817836, "last_edit_date": 1455817836, "creation_date": 1455749283, "answer_id": 35469323, "question_id": 35469158, "link": "https://stackoverflow.com/questions/35469158/how-does-sizeof-work-when-passing-a-template-array/35469323#35469323", "title": "How does sizeof work when passing a template array?", "body": "<p>If you are asking \"how does the compiler know to put the array size into n\"... The expression</p>\n\n<pre><code>const T (&amp;arr)[n]\n</code></pre>\n\n<p>is being passed</p>\n\n<pre><code>int arr[11]\n</code></pre>\n\n<p>hence it is able to deduce <code>T</code> is <code>int</code> and <code>n</code> is <code>11</code>.</p>\n\n<p>If you are asking how it knows how large <code>arr</code> is...</p>\n\n<pre><code>int arr[] = { 1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21 };\ncout &lt;&lt; isInHaystack(arr, 7) &lt;&lt; endl;\n</code></pre>\n\n<p><code>arr</code> is an array. The compiler knows how big it is. If you are thinking \"arr is really just a pointer\", that's not true. Arrays and pointers are said to have <em>equivalence</em> (see K&amp;R section 5.3), which doesn't mean they are same, but that they result in the same behavior in a limited number of contexts.</p>\n\n<p>In C and C++ arrays are able to <em>decay</em> into pointers, but they are still not pointers until the decay occurs.</p>\n\n<pre><code>int arr[] = { 1, 3, 5, 7 };\nint* arrp = arr; // decay\ncout &lt;&lt; isInHaystack(arr, 7); // Error.\n</code></pre>\n\n<p>See <a href=\"http://c-faq.com/aryptr/aryptrequiv.html\" rel=\"nofollow\">http://c-faq.com/aryptr/aryptrequiv.html</a></p>\n"}], "owner": {"reputation": 3501, "user_id": 3124409, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/5922e9a9b3b7aef6002860ed4515b57d?s=128&d=identicon&r=PG&f=1", "display_name": "Goodies", "link": "https://stackoverflow.com/users/3124409/goodies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "closed_date": 1455749411, "accepted_answer_id": 35469323, "answer_count": 1, "score": 0, "last_activity_date": 1455817836, "creation_date": 1455748613, "last_edit_date": 1455749243, "question_id": 35469158, "link": "https://stackoverflow.com/questions/35469158/how-does-sizeof-work-when-passing-a-template-array", "closed_reason": "Duplicate", "title": "How does sizeof work when passing a template array?", "body": "<p>Since sizeof and templates are both compile-time. What is it about the second parameter of the <code>template</code> that determines the size without specifying it in the caller function?</p>\n\n<pre><code>template &lt;typename T, size_t n&gt; bool isInHaystack(const T (&amp;arr)[n], const T &amp;needle)\n{ /* I know const references are best with strings and non-primitives and should\n     be mitigated when using ints as in the example.*/\n    size_t i, size = sizeof arr / sizeof T; // how does it know n is the size?\n    for (i = 0; i &lt; size; ++i)\n        if (arr[i] == needle)\n            return true;\n    return false;\n}\n\nint main(int argc, char **argv) {\n    int arr[] = { 1, 3, 5, 7, 9, 11, 13, 15, 17, 19, 21 };\n    cout &lt;&lt; isInHaystack(arr, 7) &lt;&lt; endl;\n    isInHaystack&lt;int, (size_t)(sizeof(arr) / sizeof(int))&gt;(arr, 7); // this works, too\n\n\n    return 0;\n}\n</code></pre>\n\n<p>How does this <code>size_t n</code> get its value when passing an array? How does it know without providing it explicitly?</p>\n\n<p>To make this a little more clear, this will not compile:</p>\n\n<pre><code>template &lt;typename T&gt; bool foo(const T(&amp;arr)[], const T needle) {\n    cout &lt;&lt; sizeof arr &lt;&lt; endl;\n    return true;\n}\nint main(){\n    int arr[] = {1,2,3};\n    foo(arr, 1); // Error: could not deduce template argument for 'const T (&amp;)[]' from 'int [21]'\n}\n</code></pre>\n\n<p>What is the issue?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 2, "creation_date": 1455747927, "post_id": 35468927, "comment_id": 58633594, "body": "You&#39;re basically trying to recreate a <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a>. Use that instead."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1455747930, "post_id": 35468927, "comment_id": 58633598, "body": "I do not think it is a problem you need to worry about. You contract your functions as accepting a valid pointer, of which they take ownership from now on."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1455747999, "post_id": 35468927, "comment_id": 58633630, "body": "@0x499602D2, it will simply move OP&#39;s question to <code>unique_ptr</code> level. Original pointer still comes from somewhere, and there is nothing which guarantees it&#39;s validity - but a contract."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1455748052, "post_id": 35468927, "comment_id": 58633648, "body": "<code>if (currentFoo != nullptr)</code> should be <code>if (currentFoo != foo)</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1455748070, "post_id": 35468927, "comment_id": 58633654, "body": "Btw, there is also a third problematic scenario there - one can pass a pointer to automatic variable."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455748159, "post_id": 35468927, "comment_id": 58633682, "body": "@PeteBecker, better yet, separate setFoo with reset."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1455748248, "post_id": 35468927, "comment_id": 58633731, "body": "@SergeyA And that contract should be followed. The consequences of not doing so should not be the OPs concern. Or he can simply throw an exception when the contract is broken."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1455748362, "post_id": 35468927, "comment_id": 58633772, "body": "@0x499602D2, my point exactly. Ok, I got it - you were not answering to OP&#39;s question directly, you were basically advicing agains handmade unique_ptr. To this I have no objections, of course."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1455749374, "creation_date": 1455749374, "answer_id": 35469346, "question_id": 35468927, "link": "https://stackoverflow.com/questions/35468927/is-it-a-good-idea-to-use-variadic-templates-to-create-a-safer-way-to-pass-new-ob/35469346#35469346", "title": "Is it a good idea to use variadic templates to create a safer way to pass new objects", "body": "<p>For ownership, you should use one smart pointer</p>\n\n<p>Then you may use setter (which allows easily to have polymorphic <code>Foo</code>):</p>\n\n<pre><code>class FooContainer final {\npublic:\n    void setFoo(std::unique_ptr&lt;Foo&gt; foo) { // may be empty\n        currentFoo = std::move(foo);\n    }\n\n    void fireFoo() {\n        // may be empty if not set (constructor doesn't feed it) or set with nullptr\n        if (currentFoo) {\n            currentFoo-&gt;func();\n        }\n    }\nprivate:\n    std::unique_ptr&lt;Foo&gt; currentFoo;\n};\n</code></pre>\n\n<p>or internal factory (which ensures that you always have value)</p>\n\n<pre><code>class FooContainer final {\npublic:\n    template &lt;typename...Ts&gt;\n    explicit FooContainer(Ts&amp;&amp;... args) {\n        currentFoo = std::make_unique&lt;Foo&gt;(std::forward&lt;Ts&gt;(args));\n    }\n\n    template &lt;typename...Ts&gt;\n    void createFoo(Ts&amp;&amp;... args) {\n        currentFoo = std::make_unique&lt;Foo&gt;(std::forward&lt;Ts&gt;(args));\n    }\n\n    void fireFoo() {\n        assert(currentFoo); // Cannot be nullptr (except after moved currently ;) )\n        currentFoo-&gt;func();\n    }\nprivate:\n    // You may even use `Foo currentFoo;` (which some changes above) if relevant\n    // (think about copy/move)\n    std::unique_ptr&lt;Foo&gt; currentFoo;\n};\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 4111179, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/87a5bc8cb593050fce4c303417a31007?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4111179/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455749374, "creation_date": 1455747601, "question_id": 35468927, "link": "https://stackoverflow.com/questions/35468927/is-it-a-good-idea-to-use-variadic-templates-to-create-a-safer-way-to-pass-new-ob", "title": "Is it a good idea to use variadic templates to create a safer way to pass new objects", "body": "<p>Lets say I have a class that has a data member that is a pointer to an abstract class Foo. One of the class's setters, setFoo asks for pointer to one of Foo's subclasses. What the programmer is supposed to pass is a new object of the subclass like <code>setFoo(new FooBar(5, 10));</code> So that FooContainer is the only one holding a reference to the object and is the only one responsible for deleting that object. An example would be like...</p>\n\n<pre><code>class FooContainer final {\npublic:\n    FooContainer() : currentFoo(nullptr) {}\n    ~FooContainer() {\n        delete currentFoo;\n    }\n\n    //Setter\n    void setFoo(Foo *foo) {\n        if (currentFoo != nullptr)\n            delete currentFoo;\n\n        currentFoo = foo;\n    }\n\n    //test that it holds the class\n    void fireFoo() {\n        currentFoo-&gt;func();\n    }\nprivate:\n    Foo* currentFoo;\n};\n</code></pre>\n\n<p>This has some big pitfalls like if I do these.</p>\n\n<pre><code>int main() {\n\n    FooContainer fc1;\n    holder.setFoo(nullptr);    //Error passing a null pointer\n    holder.fireFoo();\n\n    //---\n\n    FooContainer fc2;\n\n    Foo* fooBar = new FooBar(5, 10);\n    holder.setFoo(fooBar);     //Error now two objects hold references to fooBar\n    holder.fireFoo();\n\n    delete fooBar;             //Error\n\n    return 0;\n}\n</code></pre>\n\n<p>The solution I came up with was to use a variadic template function to set foo where it's passed the foo subclass type and varargs to construct whatever the new Foo subclass is, like this. </p>\n\n<pre><code>    template &lt;typename T, typename... Args&gt;  \n    void setFoo(Args... args) {\n    currentFoo = new T(std::forward&lt;Args&gt;(args)...);\n};\n</code></pre>\n\n<p>So now I can do <code>setFoo&lt;FooBar&gt;(5, 5);</code> which insures that currentFoo is not a null pointer and the FooContainer is the only reference holder. Is this be the correct way to go about this? I've never encountered a problem like this before, and If I'm getting something wrong I can always fall back to unique pointers.</p>\n"}, {"tags": ["c++", "polymorphism", "dynamic-cast", "static-cast"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 1, "creation_date": 1455747676, "post_id": 35468915, "comment_id": 58633480, "body": "what is type of <code>component</code>?"}, {"owner": {"reputation": 2473, "user_id": 4546885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dacef57bea7081f99b51bd3cfe448b35?s=128&d=identicon&r=PG", "display_name": "Sebastian Hoffmann", "link": "https://stackoverflow.com/users/4546885/sebastian-hoffmann"}, "edited": false, "score": 0, "creation_date": 1455747711, "post_id": 35468915, "comment_id": 58633497, "body": "Please show us how <code>component</code> is declared."}], "answers": [{"comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 1, "creation_date": 1455749027, "post_id": 35468977, "comment_id": 58634041, "body": "Don&#39;t necessarily need to do a <code>dynamic_cast</code>.  <code>static_cast</code> also does correct downcasting, it just doesn&#39;t check that the object&#39;s type and the target type have any sort of runtime match...so you could cast to something your object is not.  But, for example, it&#39;s rather common to implement <code>polymorphic_downcast</code> in terms of <code>static_cast</code>, with a <code>dynamic_cast</code> happening only during debug runs to validate the cast."}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 5, "last_activity_date": 1455790388, "last_edit_date": 1455790388, "creation_date": 1455747812, "answer_id": 35468977, "question_id": 35468915, "link": "https://stackoverflow.com/questions/35468915/why-the-constructor-is-called-after-a-static-cast/35468977#35468977", "title": "Why the constructor is called after a static cast?", "body": "<ol>\n<li>You will need to convert <code>component</code> to a reference type - <code>AComponent&amp;</code> (or <code>&amp;component</code> to <code>AComponent*</code>). You don't want to copy anything.</li>\n<li>You might need <code>dynamic_cast</code> to downcast from a base class to derived class <strong>safely</strong>. <code>static_cast</code> is for downcasting without a check, upcasting and... well, <a href=\"http://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow\">here's the list</a>.</li>\n</ol>\n\n<p>What you should have had:</p>\n\n<pre><code>dynamic_cast&lt;nts::AComponent&amp;&gt;(component).getComponent(pin_num_target);\n</code></pre>\n\n<p>Read how to use <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow\"><code>dynamic_cast</code></a>. There's a runtime check involved. The conversion might fail and throw <code>std::bad_cast</code> (reference type) or return <code>nullptr</code> (pointer type).</p>\n\n<p><strong>Edit:</strong> If you have an abstract <code>IComponent</code> and only one type derived from <code>IComponent</code>, you can be pretty sure there will be an <code>component</code> will refer to an <code>AComponent</code> object. Therefore, you can do this with <code>static_cast</code>, but the 1st point still holds.</p>\n"}, {"tags": [], "owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "is_accepted": false, "score": 2, "last_activity_date": 1455747941, "creation_date": 1455747941, "answer_id": 35469009, "question_id": 35468915, "link": "https://stackoverflow.com/questions/35468915/why-the-constructor-is-called-after-a-static-cast/35469009#35469009", "title": "Why the constructor is called after a static cast?", "body": "<blockquote>\n  <p>1) If a temporary object of type <code>new_type</code> can be declared and\n  initialized with expression, as by <code>new_type Temp(expression);</code>, <strong>which</strong>\n  <strong>may involve implicit conversions, a call to the constructor of</strong>\n  <code>new_type</code> <strong>or a call to a user-defined conversion operator</strong>, then\n  <code>static_cast&lt;type&gt;(expression)</code> computes and returns the value of that\n  temporary object.</p>\n</blockquote>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/static_cast</a></p>\n"}], "owner": {"reputation": 1247, "user_id": 4284745, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-PPay30ot1_k/AAAAAAAAAAI/AAAAAAAAAFM/j7wqJ8SG30g/photo.jpg?sz=128", "display_name": "Dimitri Danilov", "link": "https://stackoverflow.com/users/4284745/dimitri-danilov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 35468977, "answer_count": 2, "score": -1, "last_activity_date": 1455790388, "creation_date": 1455747571, "last_edit_date": 1455749879, "question_id": 35468915, "link": "https://stackoverflow.com/questions/35468915/why-the-constructor-is-called-after-a-static-cast", "title": "Why the constructor is called after a static cast?", "body": "<p>This is my class:</p>\n\n<pre><code>class AComponent : public nts::IComponent\n{\npublic:\n  AComponent(const size_t &amp;maxInputs, const size_t &amp;maxOutputs, const size_t &amp;value);\n  AComponent(nts::AComponent &amp;);\n  virtual ~AComponent();\n  virtual nts::Tristate Compute(size_t pin_num_this = 1);\n  virtual void SetLink(size_t pin_num_this,\n     nts::IComponent &amp;component,\n     size_t pin_num_target);\n  void setComponent(const size_t &amp;components, nts::Tristate &amp;state);\n  virtual void Dump(void) const;\n  nts::Tristate &amp;getComponent(const size_t &amp;pin);\nprotected:\n  std::vector &lt;nts::Tristate *&gt;   _components;\n  size_t                        _maxInputs;\n  size_t                        _maxOutputs;\n};\n</code></pre>\n\n<p>And when I try to call this line:</p>\n\n<pre><code>this-&gt;_components[pin_num_this] =\n    &amp;static_cast&lt;nts::AComponent&gt;(component).getComponent(pin_num_target);\n</code></pre>\n\n<p>I have this compilation errors that happens: </p>\n\n<pre><code>sources/AComponant.cpp:33:76: error: no matching function for call to \u2018nts::AComponent::AComponent(nts::IComponent&amp;)\u2019\n   this-&gt;_components[pin_num_this] = &amp;static_cast&lt;nts::AComponent&gt;(component).getComponent(pin_num_target);\n</code></pre>\n\n<p>And if I implement the constructor, it goes here. Problem is, I don't want to manipulate <code>IComponent</code>, I want to manipulate <code>AComponent</code>. Have you an idea why this happens? </p>\n\n<p>Edit:</p>\n\n<p><code>this-&gt;_components</code> is a vector. It's declared in the constructor this way : </p>\n\n<pre><code>this-&gt;_components.reserve(maxInputs + maxOutputs + 2);\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost-asio", "bind", "shared-ptr"], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 2466619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b48616162f6ad348a0c242b57ff381f?s=128&d=identicon&r=PG", "display_name": "peter55555", "link": "https://stackoverflow.com/users/2466619/peter55555"}, "edited": false, "score": 0, "creation_date": 1455753934, "post_id": 35469759, "comment_id": 58636008, "body": "Thank you very much. I don&#39;t want to write new question. I&#39;d like to also know what if in code above handler wouldn&#39;t be a method (so there wasn&#39;t <code>shared_from_this</code> or <code>this</code> in bind) - handler would be a function. And in D::start I create normal variable: <code>C c</code>. Is it ok if c is destroyed before async_write finishes? Is callback called always ok in this case?"}, {"owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "reply_to_user": {"reputation": 1263, "user_id": 2466619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b48616162f6ad348a0c242b57ff381f?s=128&d=identicon&r=PG", "display_name": "peter55555", "link": "https://stackoverflow.com/users/2466619/peter55555"}, "edited": false, "score": 0, "creation_date": 1455784988, "post_id": 35469759, "comment_id": 58647307, "body": "It depends. If the handler accesses <code>c</code> in any way (e.g. via some pointer or reference) then you have a problem. If not it&#39;s fine. (Another option would be to pass a copy of <code>c</code> to the handler; whether that works depends on the details of your handler.)"}], "tags": [], "owner": {"reputation": 18300, "user_id": 212870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51619fe88436dc413b2c6e9498835646?s=128&d=identicon&r=PG", "display_name": "Alan Stokes", "link": "https://stackoverflow.com/users/212870/alan-stokes"}, "is_accepted": true, "score": 8, "last_activity_date": 1455751308, "creation_date": 1455751308, "answer_id": 35469759, "question_id": 35468874, "link": "https://stackoverflow.com/questions/35468874/how-does-shared-from-this-in-stdbind-work-where-object-does-not-exist/35469759#35469759", "title": "How does shared_from_this in std::bind work where object does not exist?", "body": "<p>No, you are not right.</p>\n\n<p>The call to <code>shared_from_this()</code> happens before <code>start</code> returns. A copy of the resulting <code>shared_ptr</code> is held by the result of <code>bind</code>.</p>\n\n<p>So when you reach (2) only one of the two references to the object has gone, and it remains alive </p>\n"}], "owner": {"reputation": 1263, "user_id": 2466619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b48616162f6ad348a0c242b57ff381f?s=128&d=identicon&r=PG", "display_name": "peter55555", "link": "https://stackoverflow.com/users/2466619/peter55555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1960, "favorite_count": 2, "accepted_answer_id": 35469759, "answer_count": 1, "score": 3, "last_activity_date": 1455854659, "creation_date": 1455747405, "last_edit_date": 1455854659, "question_id": 35468874, "link": "https://stackoverflow.com/questions/35468874/how-does-shared-from-this-in-stdbind-work-where-object-does-not-exist", "title": "How does shared_from_this in std::bind work where object does not exist?", "body": "<p>Is that code safe?</p>\n\n<pre><code>class C : public std::enable_shared_from_this&lt;C&gt; {\n    void start() {\n             boost::asio::async_write(socket_, boost::asio::buffer(message_), \n             std::bind(&amp;tcp_connection::handle_write, shared_from_this(),\n             _1, _2));\n    };\n    // ...\n};\n\nclass D {\n    void start()\n    {\n         std::shared_ptr&lt;C&gt; cptr = std::make_shared&lt;C&gt;(); // (1)\n         cptr-&gt;start();\n    } // (2)\n};\n</code></pre>\n\n<p>If the message is long, the <code>async_write</code> operation can take a long time. </p>\n\n<p>There is only one <code>shared_ptr</code> pointing to the <code>C</code> object at point (1). <code>start()</code> is called, <code>start()</code> finishes and at (2) the variable <code>cptr</code> goes out of scope and is destroyed.</p>\n\n<p>When <code>async_write</code> has finished the writing operation, the callback is called; this causes a crash because <code>shared_from_this()</code> tries to make a <code>shared_ptr</code> to a non-existent object.</p>\n\n<p>Is this description of what would happen correct?</p>\n"}, {"tags": ["c++", "serial-port", "raspberry-pi2", "transmission"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1455747147, "post_id": 35468757, "comment_id": 58633247, "body": "I know you want to solve it using your own code, but wouldn&#39;t it be simpler to use existing utilities to do it? E.g. use <code>sz</code> to send the file, and <code>rz</code> to receive it, using the ZMODEM protocol."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1455747327, "post_id": 35468757, "comment_id": 58633330, "body": "This is a bad mixture of C style with C++ features. However, it is not C code. Do not add tags for unrelated languages."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455748416, "post_id": 35468757, "comment_id": 58633800, "body": "<code>free(buf);</code> scares the stuffing out of me. Is <code>serialRead</code> allocating <code>buf</code>? If it is, I recommend that it doesn&#39;t. You&#39;re opening an unnecessary can of worms. If it doesn&#39;t, where the hell are all these <code>buf</code>s coming from?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455748784, "post_id": 35468757, "comment_id": 58633938, "body": "On the sender&#39;s side, rather than <code>malloc</code>ing a buffer, have a buffer of fixed size. Read a buffer-sized chunk of the source file and write them into the serial port (are you sure you are not overfilling the serial port?), then loop back around and read another. That way memory doesn&#39;t get lost if you miss a <code>free(buf)</code> and you&#39;ll have fewer problems with memory fragmentation."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455749180, "post_id": 35468757, "comment_id": 58634111, "body": "Now that I&#39;m done reading through all that, this question cannot be answered without information on <code>serialRead</code> and <code>serialWrite</code>."}, {"owner": {"reputation": 13673, "user_id": 1599004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9d2a02744f666e97375e05fdc54255?s=128&d=identicon&r=PG", "display_name": "sawdust", "link": "https://stackoverflow.com/users/1599004/sawdust"}, "edited": false, "score": 0, "creation_date": 1455782689, "post_id": 35468757, "comment_id": 58646092, "body": "<i>&quot;Here is my code to send the jpeg:</i> -- Don&#39;t <b>lseek()</b> to determine the file length.  Use <b>fstat()</b>.  There&#39;s no reason to <b>malloc()</b> and have the entire source file in memory.  In order to use XBee, you&#39;re going to have to <i>packetize</i> the data into small chunks.  Each chunk will need a header consisting of a sequence number and payload length.  The header and small chunk of data wrapped up in the XBee API packet is what you have to write to the XBee radio device.  On the receive size the XBee packet has to be stripped off, and the header is used for reliable transfer like TCP."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 1009270, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/33fcdc9c0604cf69abb15e17840d2a3c?s=128&d=identicon&r=PG", "display_name": "john elemans", "link": "https://stackoverflow.com/users/1009270/john-elemans"}, "is_accepted": false, "score": 0, "last_activity_date": 1455747499, "creation_date": 1455747499, "answer_id": 35468898, "question_id": 35468757, "link": "https://stackoverflow.com/questions/35468757/how-to-receive-a-jpeg-image-over-serial-port/35468898#35468898", "title": "How to receive a JPEG image over serial port", "body": "<p>If you are defining your own protocol, then you need to have a method for sending the length first.</p>\n\n<p>I would recommend testing your code by sending short blocks of ascii text to confirm your i/o. Once that is working you can use the ascii to set up the transfer; ie send the length, and have your receiver ready for an expected block.</p>\n"}], "owner": {"reputation": 41, "user_id": 5942769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd2a77c285b42107cf7728e3dc59ab28?s=128&d=identicon&r=PG&f=1", "display_name": "jakoh77", "link": "https://stackoverflow.com/users/5942769/jakoh77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2031, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1455747499, "creation_date": 1455746895, "last_edit_date": 1455747289, "question_id": 35468757, "link": "https://stackoverflow.com/questions/35468757/how-to-receive-a-jpeg-image-over-serial-port", "title": "How to receive a JPEG image over serial port", "body": "<p>So I am trying to send a jpeg image (4Kb) from a raspberry pi to my Mac wirelessly using Xbee Series 1. I have an image on the raspberry pi and can read it into binary format. I've used this binary format to save it into another image file and it creates a copy of the image correctly. That tells me that I am reading it correctly. So I am trying to send that data over a serial port (to be transferred by the xbee's) to my Mac. Side note, Xbee's can only transmit I think 80 bytes of data per packet or something. I don't know how that affects what I'm doing though. </p>\n\n<p>My problem is, I do not know how to read the data and properly store it into a jpeg file itself. Most of the Read() functions I have found require you to enter a length to read and I don't know how to tell how long it is since its just a serial stream coming in. </p>\n\n<p>Here is my code to send the jpeg. </p>\n\n<pre><code>#include \"xSerial.hpp\"\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nint copy_file( const char* srcfilename, const char* dstfilename );\n\n\nint main(){\n\ncopy_file(\"tylerUseThisImage.jpeg\", \"copyImage.jpeg\");\n\nreturn 0;\n}\n\nint copy_file( const char* srcfilename, const char* dstfilename )\n  {\n  long  len;\n  char* buf = NULL;\n  FILE* fp  = NULL;\n\n  // Open the source file\n  fp = fopen( srcfilename, \"rb\" );\n  if (!fp) return 0;\n\n  // Get its length (in bytes)\n  if (fseek( fp, 0, SEEK_END ) != 0)  // This should typically succeed\n    {                                 // (beware the 2Gb limitation, though)\n    fclose( fp );\n    return 0;\n    }\n\n  len = ftell( fp );\n  std::cout &lt;&lt; len;\n  rewind( fp );\n  // Get a buffer big enough to hold it entirely\n  buf = (char*)malloc( len );\n  if (!buf)\n    {\n    fclose( fp );\n    return 0;\n    }\n\n  // Read the entire file into the buffer\n  if (!fread( buf, len, 1, fp ))\n    {\n    free( buf );\n    fclose( fp );\n    return 0;\n    }\n\n  fclose( fp );\n\n  // Open the destination file\n  fp = fopen( dstfilename, \"wb\" );\n  if (!fp)\n    {\n    free( buf );\n    return 0;\n    }\n  // this is where I send data in but over serial port. \n  //serialWrite() is just the standard write() being used\n  int fd;\n  fd = xserialOpen(\"/dev/ttyUSB0\", 9600);\n  serialWrite(fd, buf, len);\n\n   //This is where the file gets copied to another file as a test\n  // Write the entire buffer to file\n  if (!fwrite( buf, len, 1, fp ))\n    {\n    free( buf );\n    fclose( fp );\n    return 0;\n    }\n\n  // All done -- return success\n  fclose( fp );\n  free( buf );\n  return 1;\n  }\n</code></pre>\n\n<p>On the receive side I know I need to open up the serial port to read and use some sort of read() but I don't know how that is done. Using  a serial library it has some functions to check if serial data is available and return the number of characters available to read. </p>\n\n<p>One question about the number of characters available to read, will that number grow as the serial stream comes over or will it immediately tell the entire length of the data to be read? </p>\n\n<p>But finally, I know after I open the serial port, I need read the data into a buffer and then write that buffer to a file but I have not had any luck. This is what I have tried thus far.</p>\n\n<pre><code>// Loop, getting and printing characters\nchar temp;\nbool readComplete = false;\nint bytesRead = 0;\n\nfp = fopen(\"copyImage11.jpeg\", \"rwb\");\n\n  for (;;)\n  {\n        if(xserialDataAvail(fd) &gt; 0)\n        {\n        bytesRead = serialRead(fd, buf, len);\n        readComplete = true;\n        }\n        if (readComplete)\n        {\n         if (!fwrite(buf, bytesRead, 1, fp))\n         {\n         free(buf);\n         fclose(fp);\n         return 0;\n         }\n\n         fclose(fp);\n         free(buf);\n         return 1;\n        }\n}\n</code></pre>\n\n<p>I don't get errors with my code, it just doesnt create the jpeg file correctly. Maybe I'm not transmitting it right, or maybe I'm not reading/writing to file correctly. Any help would be appreciated. Thanks everyone you rock!</p>\n"}, {"tags": ["c++", "math"], "comments": [{"owner": {"reputation": 12070, "user_id": 5044950, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9yN0x.jpg?s=128&g=1", "display_name": "Sam Estep", "link": "https://stackoverflow.com/users/5044950/sam-estep"}, "edited": false, "score": 1, "creation_date": 1455746557, "post_id": 35468685, "comment_id": 58632969, "body": "Why don&#39;t you want to use an external library?"}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 2, "creation_date": 1455746611, "post_id": 35468685, "comment_id": 58633003, "body": "<code>__int128</code>, built-in type of quite a few compilers"}, {"owner": {"reputation": 4393, "user_id": 3691973, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/iytIc.jpg?s=128&g=1", "display_name": "Necoras", "link": "https://stackoverflow.com/users/3691973/necoras"}, "edited": false, "score": 0, "creation_date": 1455746691, "post_id": 35468685, "comment_id": 58633037, "body": "You probably would need to build your own data type. You&#39;d need a counter for how many sets of int64 MAX (or whatever datatype you&#39;re using) your number has. It&#39;s similar to doing a conversion from base 10 to base 32 (or whatever), only you&#39;re converting to base int64 MAX."}, {"owner": {"reputation": 139, "user_id": 5938726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62e52f976b719d2887661aeae943f00d?s=128&d=identicon&r=PG&f=1", "display_name": "Lawrence Wu", "link": "https://stackoverflow.com/users/5938726/lawrence-wu"}, "edited": false, "score": 0, "creation_date": 1455747794, "post_id": 35468685, "comment_id": 58633535, "body": "Not a perfect answer, but <code>double</code> can represent powers of two up to 1023."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1455748561, "post_id": 35468685, "comment_id": 58633862, "body": "Of course, you could use floating-point... But that is probably not what you wanted."}, {"owner": {"reputation": 87, "user_id": 5364746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-UXKSMmYXO3g/AAAAAAAAAAI/AAAAAAAAAHk/KBREx8peDwk/photo.jpg?sz=128", "display_name": "Hoffs", "link": "https://stackoverflow.com/users/5364746/hoffs"}, "edited": false, "score": 0, "creation_date": 1455784161, "post_id": 35468685, "comment_id": 58646821, "body": "well I lose a lot of precision that way."}], "answers": [{"tags": [], "owner": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "is_accepted": false, "score": 0, "last_activity_date": 1455754673, "creation_date": 1455754673, "answer_id": 35470424, "question_id": 35468685, "link": "https://stackoverflow.com/questions/35468685/getting-answer-of-2-raised-higher-than-63-without-using-additional-libraries/35470424#35470424", "title": "Getting answer of 2 raised higher than 63 without using additional libraries", "body": "<p>I have mapped numbers up to a few billion by letting each bit in an int represent a number. This would be an array of ints so the 5th bit of the 3rd int in the array would be (((2 * 32) - 1) + 5) 68 and the 2nd bit of the 2nd int would be (((1 * 32) - 1) + 2) 33 etc. etc. With this way all you need to do to map higher numbers is increase your array size. The overall space needed will be 32 times less than it would need to be otherwise and you can have all the numbers up to the limit mapped. But, you can only have 1 of each number with this method.  </p>\n"}], "owner": {"reputation": 87, "user_id": 5364746, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh3.googleusercontent.com/-UXKSMmYXO3g/AAAAAAAAAAI/AAAAAAAAAHk/KBREx8peDwk/photo.jpg?sz=128", "display_name": "Hoffs", "link": "https://stackoverflow.com/users/5364746/hoffs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455754673, "creation_date": 1455746484, "question_id": 35468685, "link": "https://stackoverflow.com/questions/35468685/getting-answer-of-2-raised-higher-than-63-without-using-additional-libraries", "title": "Getting answer of 2 raised higher than 63 without using additional libraries", "body": "<p>I was wondering what is the best method to get the answer to something like 2^65 without using additional libraries which would accommodate for more space than standard 64 bit data types. I thought about using chars but that seems like would take a lot of computing time.</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1455746817, "post_id": 35468680, "comment_id": 58633085, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/4421706/operator-overloading\">this</a>. This whole <code>friend</code> business is most likely not the way to go."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1455747370, "post_id": 35468680, "comment_id": 58633355, "body": "By the way,  <code>bool operator=(...)</code> do you mean the assigment (which must be defined as a member function and should return a <code>Block&amp;</code>) or do y mean equality operator <code>bool operator==(const Block&amp;, const Block)</code> which is allowed to be implemented as a friend ?"}, {"owner": {"reputation": 31, "user_id": 5918450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c0c3d124dc82795b763c3680850cf?s=128&d=identicon&r=PG&f=1", "display_name": "Lilothyn", "link": "https://stackoverflow.com/users/5918450/lilothyn"}, "edited": false, "score": 0, "creation_date": 1455838821, "post_id": 35468680, "comment_id": 58681865, "body": "sorry, that was a mistype, it was in fact meant to be an operator==."}], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1455747314, "post_id": 35468718, "comment_id": 58633326, "body": "Is there any reasoning for this restriction that you know of?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 0, "creation_date": 1455747738, "post_id": 35468718, "comment_id": 58633510, "body": "@JordanMelo, I am not that familiar with the standards development process to understand why those decisions were made."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1113, "user_id": 4092381, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-iUd348W6B_A/AAAAAAAAAAI/AAAAAAAAAjs/0d8MLWyOoFo/photo.jpg?sz=128", "display_name": "Jordan Melo", "link": "https://stackoverflow.com/users/4092381/jordan-melo"}, "edited": false, "score": 2, "creation_date": 1455747928, "post_id": 35468718, "comment_id": 58633595, "body": "@JordanMelo <a href=\"https://stackoverflow.com/questions/1132600/why-can-some-operators-only-be-overloaded-as-member-functions-other-as-friend-f\">Answered by member of the committee</a>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 3, "last_activity_date": 1455746732, "creation_date": 1455746732, "answer_id": 35468718, "question_id": 35468680, "link": "https://stackoverflow.com/questions/35468680/declaring-and-operators-for-a-class-on-the-header-file-must-be-a-nonstati/35468718#35468718", "title": "Declaring = and [] operators for a class on the header file, &quot;must be a nonstatic member function&quot; error", "body": "<p>Not all operators can be overloaded using non-member functions. <code>[]</code> and <code>=</code> are two such operators. They can be overloaded only as member functions.</p>\n\n<p>See <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/language/operators</a> for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 3765, "user_id": 459615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73f4c8c6dee5c7decf6434296f0fce47?s=128&d=identicon&r=PG", "display_name": "Kurt Stutsman", "link": "https://stackoverflow.com/users/459615/kurt-stutsman"}, "is_accepted": false, "score": 1, "last_activity_date": 1455746739, "creation_date": 1455746739, "answer_id": 35468722, "question_id": 35468680, "link": "https://stackoverflow.com/questions/35468680/declaring-and-operators-for-a-class-on-the-header-file-must-be-a-nonstati/35468722#35468722", "title": "Declaring = and [] operators for a class on the header file, &quot;must be a nonstatic member function&quot; error", "body": "<p>Those operators cannot be declared as friends. Instead you should declare like this:</p>\n\n<pre><code>coords operator[](const std::size_t&amp;);\nbool operator=(const Block&amp;);\n</code></pre>\n\n<p>Your operators are also not really following conventions. Operators <code>+=</code> and <code>=</code> should be returning a <code>Block&amp;</code> namely <code>*this</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 0, "last_activity_date": 1455746763, "creation_date": 1455746763, "answer_id": 35468728, "question_id": 35468680, "link": "https://stackoverflow.com/questions/35468680/declaring-and-operators-for-a-class-on-the-header-file-must-be-a-nonstati/35468728#35468728", "title": "Declaring = and [] operators for a class on the header file, &quot;must be a nonstatic member function&quot; error", "body": "<p>The reason is exactly what the error message says: those two have to be non-static member functions. Get rid of the <code>friend</code> from in front of them and remove the first argument.</p>\n\n<p>Further, <code>operator+=</code> is usually implemented as a member function, too, although it doesn't have to be. But if it is, it gives you an easy way to implement <code>operator+</code> without making it a friend.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5918450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c0c3d124dc82795b763c3680850cf?s=128&d=identicon&r=PG&f=1", "display_name": "Lilothyn", "link": "https://stackoverflow.com/users/5918450/lilothyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1455809970, "creation_date": 1455809970, "answer_id": 35485842, "question_id": 35468680, "link": "https://stackoverflow.com/questions/35468680/declaring-and-operators-for-a-class-on-the-header-file-must-be-a-nonstati/35485842#35485842", "title": "Declaring = and [] operators for a class on the header file, &quot;must be a nonstatic member function&quot; error", "body": "<p>@<strong>R Sahu</strong>'s link was useful, showing that [] and = can no be declared as non-member, but it didn't really explain why.\n@<strong>Baum mit aguen</strong>'s link cleared some other questions too.\n(Thanks for the information)</p>\n\n<p>So, I adjusted my code to this new information as follows:</p>\n\n<p>Block.h</p>\n\n<pre><code>class Block\n{\npublic:\n//...\n    coords* operator[](size_t);\n\n    Block operator=(Block);\n//...\n};\n</code></pre>\n\n<p>Block.cpp</p>\n\n<pre><code>//...\ncoords* Block::operator[](size_t index)\n{\n    if(index &gt;= 0 &amp;&amp; index &lt; block.size())\n        return &amp;block.at(index);\n    coords *tmp = new coords(-1, -1);\n    return tmp;\n}\n\nBlock Block::operator=(Block b2)\n{\n    block.empty();\n    block.reserve(b2.block.size());\n    append(b2.block);\n    return *this;\n}\n//...\n</code></pre>\n\n<p>This way you can call <code>*(*b1)[0] = c1;</code> being <code>Block* b1</code> and <code>coords c1</code>.</p>\n\n<p>The <strong>friend</strong> modifier is useful for other types of implementations, although I only realized after that the implementation of <strong>inline</strong> had to be done in the header file, <strong>not</strong> on the cpp.\nBlock.h</p>\n\n<pre><code>class Block\n{\npublic:\n//...\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const Block&amp;);\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, Block&amp;);\n//...\n};\n\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Block&amp; b)\n{\n    // do something\n    return out;\n};\n\ninline std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Block&amp; b)\n{\n    // do something\n    return out;\n};\n</code></pre>\n\n<p>In this case, you need to pass the \"<strong>this</strong>\" parameter has to be passed to the function also as these are non-member functions and should be implemented outside the class, in the header file.</p>\n\n<p>I hope this helps, good coding everyone.</p>\n"}], "owner": {"reputation": 31, "user_id": 5918450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c0c3d124dc82795b763c3680850cf?s=128&d=identicon&r=PG&f=1", "display_name": "Lilothyn", "link": "https://stackoverflow.com/users/5918450/lilothyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 35485842, "answer_count": 4, "score": 1, "last_activity_date": 1455809970, "creation_date": 1455746473, "question_id": 35468680, "link": "https://stackoverflow.com/questions/35468680/declaring-and-operators-for-a-class-on-the-header-file-must-be-a-nonstati", "title": "Declaring = and [] operators for a class on the header file, &quot;must be a nonstatic member function&quot; error", "body": "<p>I've made a class Block and a struct coords and while implementing the operators i came up with the errors:</p>\n\n<pre><code>'coords operator[](const Block&amp;, const size_t&amp;)' must be a nonstatic member function\n'bool operator=(Block&amp;, const Block&amp;)' must be a nonstatic member function\n</code></pre>\n\n<p>I've declared these 2 in the header file of the class Block as follows:</p>\n\n<pre><code>class Block\n{\n  friend Block operator+(const Block&amp;, const coords&amp;);\n  friend Block operator+(const Block&amp;, const Block&amp;);\n  friend coords operator[](const Block&amp;, const std::size_t&amp;);\n  friend void operator+=(Block&amp;, const coords&amp;);\n  friend void operator+=(Block&amp;, const Block&amp;);\n  friend bool operator=(Block&amp;, const Block&amp;);\n//...\n};\n</code></pre>\n\n<p>Only the operators [] and = get this error, and I'm not sure why.\nI've tried to change the return value and parameter types but it keeps getting the same problem.\nAre these two operators special? Or is there an error on my declarations?\nI've searched for ways to solve this problem, but couldn't find a suitable answer.</p>\n\n<p>Thank you for the replies.</p>\n"}, {"tags": ["c++", "qt", "debugging", "gdbserver"], "answers": [{"comments": [{"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1456162356, "post_id": 35560010, "comment_id": 58808484, "body": "I&#39;m using QtCreator with my toolchain&#39;s gdb, nothing fancy. The project builds from Creator using qmake. Can you expand a bit on how to enable that extra build step, and how I would manually load those symbols as you mention?"}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1456219109, "post_id": 35560010, "comment_id": 58833586, "body": "I&#39;ve updated the answer in response to your question."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1456232048, "post_id": 35560010, "comment_id": 58842643, "body": "Is that custom process step something local to the developer machine, or is it saved somewhere in a .pro file? I&#39;d love to be able to implement this and have it &quot;just work&quot; for the other developers on my team. I&#39;ll give this a shot before the end of the week."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "reply_to_user": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1456233687, "post_id": 35560010, "comment_id": 58843793, "body": "It&#39;s local to the developer machine, but what you can do is just put the commands in a bash script and point the custom step to the script. That way you can add commands to the script and share it via source control."}, {"owner": {"reputation": 2369, "user_id": 4614680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9b36fb2c1d356a919916f77e74f1c3c?s=128&d=identicon&r=PG&f=1", "display_name": "Philipp Ludwig", "link": "https://stackoverflow.com/users/4614680/philipp-ludwig"}, "edited": false, "score": 0, "creation_date": 1587983744, "post_id": 35560010, "comment_id": 108714480, "body": "Could you explain the arguments <code>-r</code> and <code>-u</code>? I can\u2019t find them in the <code>strip</code> manpage."}, {"owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "edited": false, "score": 0, "creation_date": 1588071546, "post_id": 35560010, "comment_id": 108752768, "body": "Taken directly from the strip man page in 10.15.4  <code>-u     Save  all  undefined  symbols.  This is intended for use with relocatable objects to save symbols referred to by external               relocation entries.  Note that common symbols are also referred to by external relocation entries and this flag does  not               save those symbols.   -r     Save all symbols referenced dynamically.</code>"}], "tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": true, "score": 2, "last_activity_date": 1456219076, "last_edit_date": 1495542640, "creation_date": 1456162032, "answer_id": 35560010, "question_id": 35468531, "link": "https://stackoverflow.com/questions/35468531/qt-5-x-embedded-debugging-deploy-stripped-binary/35560010#35560010", "title": "Qt 5.x embedded debugging - deploy stripped binary?", "body": "<p>To strip symbols, you can have Qt Creator run a final build step after qmake and make, which calls the 'strip' command on the binary in your app bundle. For example: -</p>\n\n<pre><code>strip -u -r ./MyApplication/Contents/MacOS/MyApplication\n</code></pre>\n\n<p>In order to debug, you'd need a <a href=\"https://stackoverflow.com/questions/9371553/qt-mac-dsym-file-for-a-release-build\">separate .dsym file</a> to be generated during the build, which contains the symbols. If this resides on the host, the debugger should automatically pick this up; it does with lldb, though with gdb, you may need to manually load the symbol file.</p>\n\n<blockquote>\n  <p>how to enable that extra build step</p>\n</blockquote>\n\n<p>Select projects from the right-side tool bar</p>\n\n<p><a href=\"https://i.stack.imgur.com/q9VmC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q9VmC.png\" alt=\"Menu bar\"></a></p>\n\n<p>Ensure you're on the Build and Run tab (GraphicsScene is just the name of the project)</p>\n\n<p><a href=\"https://i.stack.imgur.com/txZQO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/txZQO.png\" alt=\"tabs\"></a></p>\n\n<p>Under <em>Build Steps</em>, you'll see two steps, <code>qMake</code> and <code>Make</code>. Select add build step for a custom process step</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vm2UD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vm2UD.png\" alt=\"Build Steps\"></a></p>\n\n<p>Fill in the relevant fields you may need to correct for the paths, rather than just copy these:</p>\n\n<p><a href=\"https://i.stack.imgur.com/SZCXM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SZCXM.png\" alt=\"Enter details\"></a></p>\n\n<p>When the build has finished, the strip command will run. If you've any errors, it's likely a problem with the path to either the strip command or the path to your app bundle's executable. </p>\n\n<p>Note that if you need the full path to strip, it resides in /usr/bin/strip.</p>\n\n<p>As for the symbol file, I believe you can use the <code>addsymbolfile</code>command with the argument to the path to the dsym file. However, gdb has since been deprecated and you should really be using lldb now, which automatically finds the dsym file, once it has been indexed by Spotlight.</p>\n"}, {"tags": [], "owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "is_accepted": false, "score": 0, "last_activity_date": 1456737668, "creation_date": 1456737668, "answer_id": 35695776, "question_id": 35468531, "link": "https://stackoverflow.com/questions/35468531/qt-5-x-embedded-debugging-deploy-stripped-binary/35695776#35695776", "title": "Qt 5.x embedded debugging - deploy stripped binary?", "body": "<p>You can strip the debug symbols like this:</p>\n\n<p>Add a line to your make file, this will remove all debug symbols from it:</p>\n\n<p><em>cd $(MY_BINARY_INSTALL_PATH); strip --strip-debug $(MY_BINARY_INSTALL_PATH)/bin/mybinary -o $(MY_BINARY_INSTALL_PATH)/bin/mybinary</em></p>\n\n<p>If you want to remove all symbols from it you could use something like:</p>\n\n<p><em>cd $(MY_BINARY_INSTALL_PATH); strip --strip-all $(MY_BINARY_INSTALL_PATH)/bin/mybinary -o $(MY_BINARY_INSTALL_PATH)/bin/mybinary</em></p>\n\n<p>Stripping all symbols will help reduce the size of the binary significantly</p>\n"}], "owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1953, "favorite_count": 0, "accepted_answer_id": 35560010, "answer_count": 2, "score": 10, "last_activity_date": 1456737928, "creation_date": 1455745952, "question_id": 35468531, "link": "https://stackoverflow.com/questions/35468531/qt-5-x-embedded-debugging-deploy-stripped-binary", "title": "Qt 5.x embedded debugging - deploy stripped binary?", "body": "<p>I believe (correct me if I'm wrong) that when remote debugging with <code>gdb</code> and <code>gdbserver</code>, the binary running on the target under <code>gdbserver</code> doesn't need the debug information in the binary, but the host, running <code>gdb</code>, does.</p>\n\n<p>Our application binary with debugging symbols is about 112 megs (!). If I run strip, the binary is only 6.7 megs, which would be much faster to deploy to our target.</p>\n\n<p>Is it possible to have Qt Creator strip the binary before deploying it? Will we still be able to debug?</p>\n"}, {"tags": ["c++", "c++11", "parameter-passing", "move-semantics", "rvalue-reference"], "comments": [{"owner": {"reputation": 205376, "user_id": 13, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1XtZi.jpg?s=128&g=1", "display_name": "Chris Jester-Young", "link": "https://stackoverflow.com/users/13/chris-jester-young"}, "edited": false, "score": 0, "creation_date": 1455745455, "post_id": 35468313, "comment_id": 58632345, "body": "That&#39;s because <code>t</code> is an lvalue (of type <code>T&amp;&amp;</code>, which simply means it will match an rvalue argument, not that <code>t</code> is itself an rvalue), not an rvalue. The <code>std::move</code> is to make it an rvalue."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1455745770, "post_id": 35468313, "comment_id": 58632556, "body": "<a href=\"http://thbecker.net/articles/rvalue_references/section_01.html\" rel=\"nofollow noreferrer\">This article</a> does a good job of explaining rvalue references"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455747321, "post_id": 35468313, "comment_id": 58633329, "body": "The code <i>does</i> call <code>insert(V&amp;&amp;v)</code> because the <code>std::pair</code> is a prvalue.  However it does not move out of <code>t</code>."}, {"owner": {"reputation": 1, "user_id": 5942685, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TAJaF25CIeY/AAAAAAAAAAI/AAAAAAAAAD4/grMbFmIX28s/photo.jpg?sz=128", "display_name": "Alexis Oblet", "link": "https://stackoverflow.com/users/5942685/alexis-oblet"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455785802, "post_id": 35468313, "comment_id": 58647762, "body": "@M.M you&#39;re right I wanted to say about pair constructor. I fixed it."}], "owner": {"reputation": 1, "user_id": 5942685, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TAJaF25CIeY/AAAAAAAAAAI/AAAAAAAAAD4/grMbFmIX28s/photo.jpg?sz=128", "display_name": "Alexis Oblet", "link": "https://stackoverflow.com/users/5942685/alexis-oblet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1455745707, "answer_count": 0, "score": 0, "last_activity_date": 1455785671, "creation_date": 1455745200, "last_edit_date": 1455785671, "question_id": 35468313, "link": "https://stackoverflow.com/questions/35468313/c-move-argument-signature-not-propagated", "closed_reason": "Duplicate", "title": "c++ move argument signature not propagated", "body": "<p><code>map</code> is an <code>std::unordered_map</code>. <code>T</code> has a move constructor.</p>\n\n<pre><code>void foo(const std::string&amp; s, T&amp;&amp; t) {\n    map.insert(std::pair&lt;std::string, T&gt;(s, t));\n}\n\nT t;\nfoo(\"\", std::move(t));\n</code></pre>\n\n<hr>\n\n<p>Why isn't this code calling <code>template&lt;class U, class V&gt; std::pair(U&amp;&amp; a, V&amp;&amp; b)</code>?</p>\n\n<hr>\n\n<p>Why do we need to use <code>std::move(t)</code> to get the right behavior?</p>\n\n<pre><code>void foo(const std::string&amp; s, T&amp;&amp; t) {\n    map.insert(std::pair&lt;std::string, T&gt;(s, std::move(t)));\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode7", "openmp"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455747475, "post_id": 35468246, "comment_id": 58633394, "body": "I have absolutely no idea how to modify the environment of the executable from within Xcode, but you could add a call to <code>omp_set_num_threads()</code> before the parallel region or add the <code>num_threads</code> clause, e.g. <code>#pragma omp parallel num_threads(4)</code>. If it still executes single-threaded, then you haven&#39;t linked against the correct OpenMP runtime or something."}, {"owner": {"reputation": 228, "user_id": 1936305, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bOqq.jpg?s=128&g=1", "display_name": "prakharjain", "link": "https://stackoverflow.com/users/1936305/prakharjain"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455748046, "post_id": 35468246, "comment_id": 58633645, "body": "I have tried omp_set_num_threads().  Any idea on how to do it, it works in terminal!!!"}, {"owner": {"reputation": 6899, "user_id": 1212012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gmBY7.png?s=128&g=1", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1212012/mathieu"}, "edited": false, "score": 0, "creation_date": 1455794830, "post_id": 35468246, "comment_id": 58653927, "body": "How do you compile your code? Is the option <code>-fopenmp</code> set?"}, {"owner": {"reputation": 228, "user_id": 1936305, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bOqq.jpg?s=128&g=1", "display_name": "prakharjain", "link": "https://stackoverflow.com/users/1936305/prakharjain"}, "edited": false, "score": 0, "creation_date": 1455803958, "post_id": 35468246, "comment_id": 58660392, "body": "Yes, I have added -fopenmp to Other C Flags under the project&#39;s build settings. Look at <a href=\"http://stackoverflow.com/questions/33668323/clang-omp-in-xcode-under-el-capitan\" title=\"clang omp in xcode under el capitan\">stackoverflow.com/questions/33668323/&hellip;</a> on how I build. Look at <a href=\"http://stackoverflow.com/questions/35134681/installing-openmp-on-mac-os-x-10-11/35467142#35467142\" title=\"installing openmp on mac os x 10 11\">stackoverflow.com/questions/35134681/&hellip;</a> on how I run in Terminal."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455879617, "post_id": 35468246, "comment_id": 58698397, "body": "What does <code>otool -L &#47;path&#47;to&#47;executable</code> show? <code>&#47;path&#47;to&#47;execuable</code> should be the path to the executable produced by Xcode. It is usually located in a folder with some randomly generated name and there is a shortcut icon somewhere on the GUI that opens the folder in Finder."}, {"owner": {"reputation": 228, "user_id": 1936305, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bOqq.jpg?s=128&g=1", "display_name": "prakharjain", "link": "https://stackoverflow.com/users/1936305/prakharjain"}, "edited": false, "score": 0, "creation_date": 1455888871, "post_id": 35468246, "comment_id": 58704059, "body": "/usr/local/opt/libiomp/lib/libiomp5.dylib (compatibility version 5.0.0, current version 5.0.0) \t/usr/lib/libc++.1.dylib (compatibility version 1.0.0, current version 120.1.0) \t/usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1226.10.1)"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 9233349, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155401610213403/picture?type=large", "display_name": "Thayjes", "link": "https://stackoverflow.com/users/9233349/thayjes"}, "is_accepted": true, "score": 1, "last_activity_date": 1516257716, "creation_date": 1516257716, "answer_id": 48315252, "question_id": 35468246, "link": "https://stackoverflow.com/questions/35468246/increasing-number-of-threads-in-openmp-in-xcode/48315252#48315252", "title": "increasing number of threads in openmp in xcode", "body": "<p>I am sure this answer is coming way too late. But hopefully might help someone else. I was struggling with the same issue and solved it by :\nAdding -fopenmp to Other C++ flags as well as C flags. </p>\n\n<p>Hope this helps someone. </p>\n"}], "owner": {"reputation": 228, "user_id": 1936305, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/7bOqq.jpg?s=128&g=1", "display_name": "prakharjain", "link": "https://stackoverflow.com/users/1936305/prakharjain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 0, "accepted_answer_id": 48315252, "answer_count": 1, "score": 1, "last_activity_date": 1516257716, "creation_date": 1455744924, "last_edit_date": 1495541736, "question_id": 35468246, "link": "https://stackoverflow.com/questions/35468246/increasing-number-of-threads-in-openmp-in-xcode", "title": "increasing number of threads in openmp in xcode", "body": "<p>I followed the instructions from this answer in <a href=\"https://stackoverflow.com/questions/33668323/clang-omp-in-xcode-under-el-capitan\">clang-omp in Xcode under El Capitan</a></p>\n\n<p>I was able to run openmp programs on xcode. But there was only 1 thread.</p>\n\n<p>Also, I am able to run from terminal, refer to my answer for this\n<a href=\"https://stackoverflow.com/questions/35134681/installing-openmp-on-mac-os-x-10-11/35467142#35467142\">Installing OpenMP on Mac OS X 10.11</a></p>\n\n<p>how to increase no. of threads in xcode?</p>\n\n<p>I am running sample program:</p>\n\n<pre><code>    #include &lt;omp.h&gt;\n    #include &lt;stdio.h&gt;\n    int main() {\n    #pragma omp parallel\n    printf(\"Hello from thread %d, nthreads %d\\n\", omp_get_thread_num(), omp_get_num_threads());\n    }\n</code></pre>\n\n<p>I get only one thread in output in xcode.</p>\n\n<p>I have tried Xcode->Edit Schemes-> Arguments-> Env variables-> OMP_NUM_THREADS with value 4</p>\n\n<p>I have also tried omp_set_num_threads(4)</p>\n"}, {"tags": ["c++", "visual-studio", "stl"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 1, "creation_date": 1455745306, "post_id": 35468207, "comment_id": 58632263, "body": "It&#39;s undefined behaviour, it may work and it may not. In the debug build it doesn&#39;t work."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1455745978, "post_id": 35468207, "comment_id": 58632670, "body": "Regarding the title, it could apply to such a broad range of questions. You should consider figuring out a title that closely matches the question content. For example, perhaps something like &quot;Is it legal to add elements to a preallocated vector in a range-based for loop over that vector?&quot; I&#39;ll leave it up to you to pick what you find most reasonable."}, {"owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1455746604, "post_id": 35468207, "comment_id": 58632997, "body": "@chris You are right about the title and I edited it. The reason I didn&#39;t go with a similar title in the first place is purely political. I found SO editors to be too trigger happy in flagging questions as duplicate and disregard any future arguments to the contrary. I wanted to circumvent it."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1455749329, "post_id": 35468207, "comment_id": 58634178, "body": "@PaulJurczak, I can see where you&#39;re coming from. It can sometimes be hard to unclose a question even when it shouldn&#39;t have been closed. While these newer changes to allow accounts with a gold tag badge to instadupe something can hurt if one person jumps the gun, they also allow a one-vote reopen for dupe closes. That should be helping with duplicates specifically."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1455745394, "post_id": 35468327, "comment_id": 58632315, "body": "The documentation is correct. One can not range-loop over vector with invalid iterators."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1455745518, "post_id": 35468327, "comment_id": 58632388, "body": "I did not mean that standard may say that it is OK to range-loop over invalid iterators, I mean that past-the-end iterator is invalidated is correct statement."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455745689, "post_id": 35468327, "comment_id": 58632506, "body": "Its not just that.  The ranged based for loop according to the standard gets the end iterator before the loop starts.  Once you add an element into  the vector the end iterator has changed and now you have a iterator mismatch."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 18, "last_activity_date": 1455745238, "creation_date": 1455745238, "answer_id": 35468327, "question_id": 35468207, "link": "https://stackoverflow.com/questions/35468207/is-it-legal-to-add-elements-to-a-preallocated-vector-in-a-range-based-for-loop-o/35468327#35468327", "title": "Is it legal to add elements to a preallocated vector in a range-based for loop over that vector?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\">documentation</a>:</p>\n\n<blockquote>\n  <p>If the new size() is greater than capacity() then all iterators and\n  references (including the past-the-end iterator) are invalidated.\n  Otherwise only the past-the-end iterator is invalidated.</p>\n</blockquote>\n\n<p>It says even if capacity is enough past-the-end iterator is invalidated, so I believe your code has UB (unless this documentation is incorrect and standard says otherwise)</p>\n"}, {"comments": [{"owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "edited": false, "score": 1, "creation_date": 1455752239, "post_id": 35468467, "comment_id": 58635425, "body": "Is there an advantage in making this an undefined behavior? It forces me to rewrite this loop using pointers or indexes instead of using a higher level construct. The end result is the same code compiler would generate from my example, but language lawyers would deem illegal. Is this a defect in STL design?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "edited": false, "score": 0, "creation_date": 1455754194, "post_id": 35468467, "comment_id": 58636090, "body": "@PaulJurczak To do what you want, they would have to add a half-invalidation effect on iterators, and specify exactly what it means and when it happens. That would be an iterator that remains valid, but now refers to a different element. With that concept, you could easily express that the end iterator becomes an iterator to the element after the old last element when elements are appended and capacity is not increased.  This would make the standard more complex, at the very least. You might also end up wanting to do the same when someone inserts into the middle of a vector. Good idea? Dunno."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 2, "creation_date": 1455760324, "post_id": 35468467, "comment_id": 58638068, "body": "Trying to peer into the spec writer&#39;s minds, an implementer might want to have a past-the-end iterator whose value is a sentinel, rather than just a pointer to the next spot in memory.  If they specified that all previous past-the-end iterators pointed to the newly <code>push_back</code>ed value, such an implementation would be impossible.  Why, and is it worth it?  I don&#39;t know.  Perhaps a debugging feature might find it valuable for iterators to be marked as past-the-end.  The spec writers tend to err on the side of Undefined Behavior, and define it later if need be."}, {"owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "reply_to_user": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "edited": false, "score": 0, "creation_date": 1455771695, "post_id": 35468467, "comment_id": 58641263, "body": "@CortAmmon <i>past-the-end iterator whose value is a sentinel, rather than just a pointer to the next spot in memory</i> Maybe, but this would violate the &quot;zero cost abstraction&quot; rule, which is often advertised with C++. Incrementing a pointer is the most efficient way to visit consecutive vector elements. This necessitates past-the-end iterator to point to one element past the last one. It is what any compiler with speed optimization enabled will reduce the iterator to."}, {"owner": {"reputation": 8784, "user_id": 2728148, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GXsMO.png?s=128&g=1", "display_name": "Cort Ammon", "link": "https://stackoverflow.com/users/2728148/cort-ammon"}, "reply_to_user": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "edited": false, "score": 0, "creation_date": 1455773998, "post_id": 35468467, "comment_id": 58642085, "body": "@PaulJurczak Its a rule of thumb, perhaps.  A particular case where I could see such sentinels being used is in a debug build, similar to the Visual Studio runtime iterator checking.  They don&#39;t use sentinels, of course, but it could be useful.  More importantly, if they forbid it in the spec, nobody could ever do it that way."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 17, "last_activity_date": 1455745716, "creation_date": 1455745716, "answer_id": 35468467, "question_id": 35468207, "link": "https://stackoverflow.com/questions/35468207/is-it-legal-to-add-elements-to-a-preallocated-vector-in-a-range-based-for-loop-o/35468467#35468467", "title": "Is it legal to add elements to a preallocated vector in a range-based for loop over that vector?", "body": "<p>Your code exhibits undefined behavior, but it is tricky and tends to only be caught in debug builds.</p>\n\n<p>When you do a <code>v.push_back</code>, all iterators are invalidated if size passes capacity.  You avoid this with a reserve.</p>\n\n<p>However, even if you don't cause the capacity to grow, the past-the-end iterator is still invalidated.  In general, iterator invalidation rules do not distinguish between \"the iterator's 'value' would be garbage/refer to a different object\" and \"the iterator's 'location' is no longer valid\".  When either occurs, the iterator is simply deemed invalid.  As the end iterator is no longer the end iterator (it goes from referring to nothing, to referring to something, in almost every implementation), the standard simply states it is invalidated.</p>\n\n<p>This code:</p>\n\n<pre><code>for (auto e: v)\n  v.push_back(e*e);\n</code></pre>\n\n<p>expands to roughly:</p>\n\n<pre><code>{\n  auto &amp;&amp; __range = v; \n  for (auto __begin = v.begin(),\n    __end = v.end(); \n    __begin != __end;\n    ++__begin\n  )\n  { \n       auto e = *__begin;\n       v.push_back(e*e);\n  }\n}\n</code></pre>\n\n<p>the <code>v.push_back</code> call invalidates the <code>__end</code> iterator, which is then compared against, and the debug build correctly flags the undefined behavior as a problem.  Debug MSVC iterators are pretty careful with invalidation rules.</p>\n\n<p>The release build does undefined behavior, and as the vector iterator is basically a thin wrapper around a pointer, and the pointer to the past-the-end element becomes the pointer to the last element after a push back without a capacity overflow, it \"works\".</p>\n"}], "owner": {"reputation": 5746, "user_id": 219153, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/je9qW.jpg?s=128&g=1", "display_name": "Paul Jurczak", "link": "https://stackoverflow.com/users/219153/paul-jurczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 2, "accepted_answer_id": 35468467, "answer_count": 2, "score": 23, "last_activity_date": 1455746361, "creation_date": 1455744770, "last_edit_date": 1495535326, "question_id": 35468207, "link": "https://stackoverflow.com/questions/35468207/is-it-legal-to-add-elements-to-a-preallocated-vector-in-a-range-based-for-loop-o", "title": "Is it legal to add elements to a preallocated vector in a range-based for loop over that vector?", "body": "<p>I'm using Visual Studio 2015 Update 1 C++ compiler and this code snippet:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n  vector&lt;int&gt; v{3, 1, 4};\n\n  v.reserve(6);\n\n  for (auto e: v)\n    v.push_back(e*e);\n\n  for (auto e: v)\n    cout &lt;&lt; e &lt;&lt; \" \";\n\n  return 0;\n}\n</code></pre>\n\n<p>Release version runs fine, but debug version produces <code>vector iterators incompatible</code> error message. Why is that?</p>\n\n<p>Before you flag it as a duplicate question to <a href=\"https://stackoverflow.com/questions/17076672\">Add elements to a vector during range-based loop c++11</a>, please read my answer\n<a href=\"https://stackoverflow.com/a/35467831/219153\">https://stackoverflow.com/a/35467831/219153</a> with arguments to the contrary.</p>\n"}, {"tags": ["c++", "destructor"], "comments": [{"owner": {"reputation": 965, "user_id": 3783565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yhgn8.png?s=128&g=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/3783565/kevin-w"}, "edited": false, "score": 0, "creation_date": 1455744831, "post_id": 35468185, "comment_id": 58631982, "body": "As a general rule, you have to call <code>delete</code> for everything you call <code>new</code> on (note: not always true, but will hold for most cases)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455744842, "post_id": 35468185, "comment_id": 58631988, "body": "C++ is no C#, avoid <code>new</code>"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1455745049, "post_id": 35468185, "comment_id": 58632096, "body": "<i>When do you not call the destructor?</i> Always. :)"}, {"owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1455745417, "post_id": 35468185, "comment_id": 58632328, "body": "@erip No, you don&#39;t call it, when you use new without delete - thats a pretty bad idea though."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "edited": false, "score": 0, "creation_date": 1455746059, "post_id": 35468185, "comment_id": 58632711, "body": "@Anedar <code>delete</code> is NOT the destructor. <code>delete</code> destructs then deallocates memory."}, {"owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "edited": false, "score": 0, "creation_date": 1455746195, "post_id": 35468185, "comment_id": 58632788, "body": "Ok, then i am more specific: if you use a new without delete <b>or an explicit call of the destructor</b> - but as the OP showed you do not &quot;always&quot; call the destructor."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1455746202, "post_id": 35468185, "comment_id": 58632792, "body": "Well, you can&#39;t tell if the destructor is called or not because <code>c</code> is of type &quot;pointer to <code>C</code>&quot;, and ordinary pointers don&#39;t have destructors. In the second piece of code, <code>c</code> is of type <code>C</code>, and <code>C</code> does have a destructor. So in one case, the object is of a type that has a destructor, in the other it&#39;s of a type that doesn&#39;t. No mystery there."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 4268081, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ab404bdaf257bc6663836579e038925a?s=128&d=identicon&r=PG&f=1", "display_name": "David Rolfe", "link": "https://stackoverflow.com/users/4268081/david-rolfe"}, "edited": false, "score": 0, "creation_date": 1455744965, "post_id": 35468205, "comment_id": 58632045, "body": "But there&#39;s another code (that I posted up top) where I don&#39;t call delete c and that one called the destructor."}, {"owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "reply_to_user": {"reputation": 153, "user_id": 4268081, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ab404bdaf257bc6663836579e038925a?s=128&d=identicon&r=PG&f=1", "display_name": "David Rolfe", "link": "https://stackoverflow.com/users/4268081/david-rolfe"}, "edited": false, "score": 0, "creation_date": 1455745364, "post_id": 35468205, "comment_id": 58632295, "body": "I expanded a bit about this."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": true, "score": 11, "last_activity_date": 1455745257, "last_edit_date": 1455745257, "creation_date": 1455744764, "answer_id": 35468205, "question_id": 35468185, "link": "https://stackoverflow.com/questions/35468185/when-does-the-program-not-call-the-destructor-in-c/35468205#35468205", "title": "When does the program not call the destructor in c++?", "body": "<p>Because you forgot to write </p>\n\n<pre><code>delete c;\n</code></pre>\n\n<p>If you just go on in your program without deleting a variable instantiated with new you will cause a memory leak.</p>\n\n<p><strong>Edit, since you edited your question:</strong></p>\n\n<p>If you write something like</p>\n\n<pre><code>C c;\nC c{1};\nC c = C{1};\n</code></pre>\n\n<p>you create a variable with automatic storage duration. It will run out of scope once the function it is declared in exits (or more precise: once the block it is declared in exits). In this case the constructor is called automatically.</p>\n\n<p>If you write </p>\n\n<pre><code>C* c = new C{};\n</code></pre>\n\n<p>you create a pointer to a (new) C. The pointer itself has automatic storage duration, which means c will run out of scope as well. But the pointer only holds the adress of the object of type C. And this object is only deleted if you call <code>delete c;</code>. If you don't call delete, your program \"forgets\" the address of the object but it does not free the memory or destroy the object. That's a memory leak.<br>\nHowever once your program ends, all memory is freed (without calling destructors), so in your small example you wont notice.</p>\n"}, {"tags": [], "owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "is_accepted": false, "score": 5, "last_activity_date": 1455745104, "creation_date": 1455745104, "answer_id": 35468287, "question_id": 35468185, "link": "https://stackoverflow.com/questions/35468185/when-does-the-program-not-call-the-destructor-in-c/35468287#35468287", "title": "When does the program not call the destructor in c++?", "body": "<p>It's <em>very</em> rare that you need to directly call the destructor yourself.</p>\n\n<p>The destructor is called automatically when an object is destroyed, either by going out of scope for a stack instance or by being <code>delete</code>d for a heap instance. So the fact that your destructor isn't being called tells you something: the object is being lost, or leaked.</p>\n\n<p><code>new</code> creates a new instance of the object from heap memory and opens a contract that, when the object is no-longer required, you will be responsible for calling <code>delete</code> to return it to the heap. (or <code>delete []</code> if you allocate an array)</p>\n\n<p>In your code, you never <code>delete</code> the instance you created.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass C {\npublic:\n    C() : m_i(6) { cout &lt;&lt; \"A:\" &lt;&lt; m_i &lt;&lt; endl;}\n\n    C(int i_) : m_i(i_) { cout &lt;&lt; \"B:\" &lt;&lt; m_i &lt;&lt; endl;}\n\n    ~C() {cout &lt;&lt; \"C:\" &lt;&lt; m_i &lt;&lt; endl;}\nprivate:\n    int m_i;\n};\n\nint main(int argc, char* argv[]) {\n    cout &lt;&lt; \"X\\n\";\n    C* c = new C;\n    C stackC;\n    cout &lt;&lt; \"Y\\n\";\n    delete c;\n    cout &lt;&lt; \"Z\\n\";\n}\n</code></pre>\n\n<p>Live demo: <a href=\"http://ideone.com/iuZim4\" rel=\"noreferrer\">http://ideone.com/iuZim4</a></p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1455749217, "creation_date": 1455749217, "answer_id": 35469297, "question_id": 35468185, "link": "https://stackoverflow.com/questions/35468185/when-does-the-program-not-call-the-destructor-in-c/35469297#35469297", "title": "When does the program not call the destructor in c++?", "body": "<p>When you use 'new' to allocate a dynamic variable, the lifetime of the object instance ends with 1) delete or 2) process termination, or 3) system reset.</p>\n\n<p>In your code, the program terminates before 'delete c;' is invoked, thus dtor is not invoked by the process. </p>\n\n<p>Any dynamic memory used by the process is 'reclaimed' when the OS terminates the process. This OS 'Reclaiming' also does not invoke the dtor.</p>\n\n<p>And when the system shuts down or is reboot, the software stops running, and thus does not invoke the dtor.</p>\n\n<p>Allocating objects with no destructor invocation is common in embedded systems.</p>\n"}], "owner": {"reputation": 153, "user_id": 4268081, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/ab404bdaf257bc6663836579e038925a?s=128&d=identicon&r=PG&f=1", "display_name": "David Rolfe", "link": "https://stackoverflow.com/users/4268081/david-rolfe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "accepted_answer_id": 35468205, "answer_count": 3, "score": 2, "last_activity_date": 1455749217, "creation_date": 1455744701, "last_edit_date": 1455745168, "question_id": 35468185, "link": "https://stackoverflow.com/questions/35468185/when-does-the-program-not-call-the-destructor-in-c", "title": "When does the program not call the destructor in c++?", "body": "<p>So here's the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass C {\npublic:\n    C() {i = 6; cout &lt;&lt; \"A:\" &lt;&lt; i &lt;&lt; endl;}\n\n    C(int i0) {i = i0; cout &lt;&lt; \"B:\" &lt;&lt; i &lt;&lt; endl;}\n\n    ~C() {cout &lt;&lt; \"C:\" &lt;&lt; i &lt;&lt; endl;}\nprivate:\n    int i;\n};\n\nint main(int argc, char* argv[]) {\n    cout &lt;&lt; \"X\" &lt;&lt; endl;\n    C *c = new C;\n    cout &lt;&lt; \"Y\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>For some reason the output for that code is</p>\n\n<pre><code>X\nA:6\nY\n</code></pre>\n\n<p>And for some reason the destructor (C:6) is never called once you reach the end of the code. Why is that? Also this code does call the destructor:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass C {\npublic:\n    C() {i = 0; cout &lt;&lt; \"A:\" &lt;&lt; i &lt;&lt; endl;}\n\n    C(int i0) {i = i0; cout &lt;&lt; \"B:\" &lt;&lt; i &lt;&lt; endl;}\n\n    ~C() {cout &lt;&lt; \"C:\" &lt;&lt; i &lt;&lt; endl;}\nprivate:\n    int i;\n};\n\nint main(int argc, char* argv[]) {\n    cout &lt;&lt; \"X\" &lt;&lt; endl;\n    C c;\n    cout &lt;&lt; \"Y\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1455745297, "post_id": 35468112, "comment_id": 58632252, "body": "TLDR; That is a bad assignment: Although, mathematically a square is a rectangle, in terms of programming it is not (saying a square <code>is a</code> rectangle is wrong)  - note a square needs only one dimension, a rectangle, two."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1455745580, "post_id": 35468112, "comment_id": 58632436, "body": "In case your class doesn&#39;t go into <a href=\"http://stackoverflow.com/questions/56860/what-is-the-liskov-substitution-principle\">LSP</a> with this example, imagine you&#39;re writing a function that accepts any <code>Rectangle</code> and calls <code>setWidth</code> on it. This function would likely expect the length to remain constant. However, if a <code>Square</code> object is passed in, the length changes! This is not something you want to happen in real code. The trick is finding a good balance of what the base class or interface guarantees with enough leeway for different implementations to do usefully different things."}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455745597, "post_id": 35468112, "comment_id": 58632444, "body": "@DieterL&#252;cking That was my initial reaction too. If neither defined setWidth or setLength (i.e. they become immutable) then it might then be valid inheritance."}, {"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1455745638, "post_id": 35468112, "comment_id": 58632474, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3714162/class-inherited-from-class-without-default-constructor\">Class inherited from class without default constructor</a>"}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "reply_to_user": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1455745700, "post_id": 35468112, "comment_id": 58632512, "body": "@JamesRoot I didn&#39;t know that an inherited or even a derived class needed a default constructor!"}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455745806, "post_id": 35468112, "comment_id": 58632577, "body": "Don&#39;t have time to type up an answer. Square::Square should pass the input parameter to base class constructor as both parameters."}, {"owner": {"reputation": 11, "user_id": 5942626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1a6ed06e2a7a2f9fe605de645eb7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Riddler", "link": "https://stackoverflow.com/users/5942626/riddler"}, "edited": false, "score": 0, "creation_date": 1455755591, "post_id": 35468112, "comment_id": 58636518, "body": "Thanks everyone for the input, I eventually got it."}], "answers": [{"comments": [{"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455796942, "post_id": 35470124, "comment_id": 58655291, "body": "Sorry but I don&#39;t agree with this. A zero length and width &#39;rectangle&#39; is not really a rectangle. It might be a point.  The problem is that all the parameter-less constructors need removing and the Square::Square(double length) constructor needs to explicity call the Rectangle::Rectangle(double l, double w) constructor."}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "reply_to_user": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455800323, "post_id": 35470124, "comment_id": 58657695, "body": "My &#39;fix&#39; will fix the linker error that the OP reported.  ( It is a philosophical question whether a rectangle of zero-sides is a point or an extremely small rectangle.  The linker doesn&#39;t care. )"}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455895887, "post_id": 35470124, "comment_id": 58708816, "body": "I accept that a zero size rectangle is a philosophical question. I might have made a better argument if I questioned why any default value is appropriate. Also, is a default of 0, 0 better than 1,1 or any other value? Even so, i accept there will be situations where a default is appropriate. I would like to think that providing a default would be less common than requiring explicit dimensions.  You are, of course, right to say your answer removes the linker error although it is not the only way of fixing it."}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "reply_to_user": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455896750, "post_id": 35470124, "comment_id": 58709427, "body": "There are always many ways to fix build errors.  I like to do minimum violence to existing code, to minimize the chance of breaking something else. In particular: avoid changing an exiting class interface."}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455898504, "post_id": 35470124, "comment_id": 58710597, "body": "And I agree. However this was new code written by the OP, wasn&#39;t it?"}], "tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": false, "score": 0, "last_activity_date": 1455753150, "creation_date": 1455753150, "answer_id": 35470124, "question_id": 35468112, "link": "https://stackoverflow.com/questions/35468112/having-trouble-with-inheritance-between-rectangle-and-square/35470124#35470124", "title": "Having trouble with Inheritance between Rectangle and Square", "body": "<p>\"The undefined reference to Rectangle::Rectangle is the only error \"</p>\n\n<p>You really should take what the linker tells you seriously.</p>\n\n<p>In rectangle.h you have defined a default constructor</p>\n\n<pre><code>Rectangle();\n</code></pre>\n\n<p>But nowhere have you implemented it!  So the linker complains.</p>\n\n<p>Write something like this:</p>\n\n<pre><code>Rectangle::Rectangle()\n: length( 0 )\n, width( 0 )\n{}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "is_accepted": true, "score": 0, "last_activity_date": 1455795920, "creation_date": 1455795920, "answer_id": 35480579, "question_id": 35468112, "link": "https://stackoverflow.com/questions/35468112/having-trouble-with-inheritance-between-rectangle-and-square/35480579#35480579", "title": "Having trouble with Inheritance between Rectangle and Square", "body": "<p>The Rectangle::Rectangle() parameter-less constructor should not be declared (in my interpretation of the spec).</p>\n\n<p>Square::Square() with no parameters should not have been defined (in my interpretation of the spec).</p>\n\n<p>The Square::Square(double) constructor should not call the base class's default constructor (which your code currently does). Instead the requirements ask for</p>\n\n<p>Square::Square(double length) : Rectangle(length, length) {}</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 11, "user_id": 5942626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be1a6ed06e2a7a2f9fe605de645eb7e7?s=128&d=identicon&r=PG&f=1", "display_name": "Riddler", "link": "https://stackoverflow.com/users/5942626/riddler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 35480579, "answer_count": 2, "score": 0, "last_activity_date": 1455795920, "creation_date": 1455744449, "last_edit_date": 1455744553, "question_id": 35468112, "link": "https://stackoverflow.com/questions/35468112/having-trouble-with-inheritance-between-rectangle-and-square", "title": "Having trouble with Inheritance between Rectangle and Square", "body": "<p>I am 1st semester computer science student having trouble on this problem.</p>\n\n<p>Write a class called Rectangle with double fields for its length and width, set methods for both fields, a constructor that takes two double parameters and passes them to the set methods.  It should include a method called area and perimeter area of the Rectangle and the perimeter of the Rectangle.</p>\n\n<p>Write a class called Square that inherits from Rectangle.  It should have a constructor that takes one double parameter and passes it to the base class constructor for both parameters (the body of the constructor will be empty).  Square will also need to override the setLength() and setWidth() functions of its base class such that if either of its dimensions is set to a new value, then both of its dimensions will be set to that new value (so that it remains a square).  Hint: you can have the overridden versions call the versions in the base class.</p>\n\n<p>I am using Code::Blocks and C++ as the language.</p>\n\n<p>Rectangle.hpp </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;cmath&gt;\n#ifndef Rectangle_HPP\n#define Rectangle_HPP\n\nclass Rectangle\n{\n protected:\n double length;\n double width;\n public:\n\n Rectangle();\n Rectangle(double,double);\n double area();\n double perimeter();\n void setLength(double);\n void setWidth(double);\n};\n\n#endif\n</code></pre>\n\n<p>Rectangle.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;cmath&gt;\n#include \"Rectangle.hpp\"\n\nRectangle::Rectangle(double l, double w)\n {\n   length = l;\n   width  = w;\n }\n\ndouble Rectangle::area()\n {\n  return (width * length);\n }\n\ndouble Rectangle::perimeter()\n {\n    return (2*(width + length));\n }\n\nvoid Rectangle::setLength(double l)\n{\n  length = l;\n}\n\nvoid Rectangle::setWidth(double w)\n{\n  width = w;\n}\n</code></pre>\n\n<p>Square.hpp</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;cmath&gt;\n#include \"Rectangle.hpp\"\n#ifndef Square_HPP\n#define Square_HPP\n\nclass Square: public Rectangle\n{\n  public:\n\n  Square();\n  Square(double);\n  void setLength(double);\n  void setWidth(double);\n};\n#endif\n</code></pre>\n\n<p>Square.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#include &lt;cmath&gt;\n#include \"Rectangle.hpp\"\n#include \"Square.hpp\"\n\nSquare::Square(double side){}\n\nvoid Square::setLength(double side)\n{\n  length = side;\n  width = side;\n}\n\nvoid Square::setWidth(double side)\n{\n  length = side;\n  width = side;\n}\n\n int main()\n{\n    return 1;\n}\n</code></pre>\n\n<p>I have tested the Rectangle.hpp and the Rectangle.cpp by themselves with a main method, and they seem to work fine, but I am having trouble with the Square.hpp and Square.cpp. Is there anything that you see that I am obviously missing. The undefined reference to Rectangle::Rectangle is the only error that Code::Blocks is returning to me so far. It says the error is in the Square.cpp file. I have made sure that all four files are part of the same project, so that shouldn't be the issue. </p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 1, "creation_date": 1455744463, "post_id": 35468032, "comment_id": 58631757, "body": "Remember that each function call will take some time to execute.  If the timing can be determined exactly, you can included that in your offset.  If you can&#39;t, as much as I hate to say it, you may want to try a multithreaded approach and signal between the threads. (I hate myself for saying that.)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455747132, "post_id": 35468032, "comment_id": 58633238, "body": "You could use a timer function provided by the operating system"}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 5942352, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hAE49MRiIWE/AAAAAAAAAAI/AAAAAAAADk0/IkJbHZ9erog/photo.jpg?sz=128", "display_name": "Aslak Berby", "link": "https://stackoverflow.com/users/5942352/aslak-berby"}, "is_accepted": false, "score": 3, "last_activity_date": 1455745335, "last_edit_date": 1455745335, "creation_date": 1455744528, "answer_id": 35468138, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468138#35468138", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>Add value to <code>lastBlink</code>, not reread it as the <code>getTickCount</code> might have skipped more than the exact beats want to wait.</p>\n\n<pre><code>lastblink+=1000/(bpm/60);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5942741, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cd413a6a478310ee5e63053db4bfac6?s=128&d=identicon&r=PG&f=1", "display_name": "shakeit", "link": "https://stackoverflow.com/users/5942741/shakeit"}, "is_accepted": false, "score": 0, "last_activity_date": 1455744742, "creation_date": 1455744742, "answer_id": 35468195, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468195#35468195", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>You should count the time spent on the process and substract it to the flashDuration value.</p>\n"}, {"tags": [], "owner": {"reputation": 7173, "user_id": 52534, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/17d0d29fb3b7ff0dc1433e08bfe175fc?s=128&d=identicon&r=PG", "display_name": "patros", "link": "https://stackoverflow.com/users/52534/patros"}, "is_accepted": false, "score": 0, "last_activity_date": 1455744776, "creation_date": 1455744776, "answer_id": 35468209, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468209#35468209", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>The most obvious issue is that you're losing precision when you divide bpm/60. This always yields an integer (2) instead of 2.08333333...</p>\n\n<p>Calling getTickCount() twice could also lead to some drift.</p>\n"}, {"comments": [{"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455746618, "post_id": 35468241, "comment_id": 58633006, "body": "Hm, what exactly does the if statement do? <code>if (now() - start) - blink * period</code>"}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455781604, "post_id": 35468241, "comment_id": 58645482, "body": "I missed a &quot;0 &lt;&quot; there. What it was supposed to do (does now) is to take the total time (now() - start)  and subtract the time spent on previous blinks (blink * period). if the result is greater than a limit it is time for another blink. The benefit of counting compared to the beginning is that you should never drift out of sync unless your clock is inaccurate or your playback is drifting"}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455781877, "post_id": 35468241, "comment_id": 58645624, "body": "Indeed that is what I meant"}, {"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455782148, "post_id": 35468241, "comment_id": 58645785, "body": "Hm it doesn&#39;t seem to work though. I seem to get into the if statement in every iteration, so the LED is basically always on. <a href=\"http://pastebin.com/7eCty0yK\" rel=\"nofollow noreferrer\">pastebin.com/7eCty0yK</a>"}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455787754, "post_id": 35468241, "comment_id": 58648999, "body": "You period ought to be expressed in the size that getTickCount returns (aka milliseconds), &quot;1000*(60/bpm) = x milliseconds."}, {"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455791248, "post_id": 35468241, "comment_id": 58651510, "body": "I tried <code>1000&#47;(bpm&#47;60)</code>, but it was still constantly on."}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455793179, "post_id": 35468241, "comment_id": 58652862, "body": "period = 1000/125/60 = 0.1 ms. period = 1000*60/125 = 441.1 ms. You want the later."}, {"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455793514, "post_id": 35468241, "comment_id": 58653082, "body": "<code>1000&#47;(125&#47;60)</code> would be 480 though. So I should definitely see LED blinking, but I don&#39;t. :/"}, {"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455794667, "post_id": 35468241, "comment_id": 58653809, "body": "Shouldn&#39;t the if statement say something like <code>now() &gt;= (start + blinks * period)</code>? Or would that do the same thing?"}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455795846, "post_id": 35468241, "comment_id": 58654607, "body": "&quot;0 = a - b - c * d&quot;  vs 0 &quot;a = b + c * d&quot; so they ought to be equivalent"}], "tags": [], "owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "is_accepted": false, "score": 2, "last_activity_date": 1455787780, "last_edit_date": 1455787780, "creation_date": 1455744916, "answer_id": 35468241, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468241#35468241", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>If your problem is drifting out of sync rather than latency I would suggest measuring time from a given start instead of from the last blink.</p>\n\n<pre><code>start = now()\nblinks = 0\nperiod = 60 / bpm\nwhile true\n    if 0 &lt; ((now() - start) - blinks * period)\n        ledon()\n        sleep(blinklengh)\n        ledoff()\n        blinks++\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455798065, "post_id": 35468697, "comment_id": 58656024, "body": "The sleeping thing seems to work, but now it is never actually on time. It&#39;s always off by a few milliseconds. Any idea why that is? <a href=\"http://i.snag.gy/FAeYz.jpg\" rel=\"nofollow noreferrer\">i.snag.gy/FAeYz.jpg</a>"}, {"owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455812773, "post_id": 35468697, "comment_id": 58667298, "body": "Okay this is possibly happening because I am using Windows&#39; GetTickCount() function, which apparently returns very inaccurate results."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "edited": false, "score": 0, "creation_date": 1455832812, "post_id": 35468697, "comment_id": 58679221, "body": "IIRC Windows uses a 10mS tick time by default -- you can reduce it to 1mS by calling timeBeginPeriod(1) at the top of main(), if you want"}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 3, "last_activity_date": 1455747002, "last_edit_date": 1455747002, "creation_date": 1455746574, "answer_id": 35468697, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468697#35468697", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>Busy-waiting is bad, it spins the CPU for no good reason, and under most OS's it will lead to your process being punished -- the OS will notice that it is using up lots of CPU time and dynamically lower its priority so that other, less-greedy programs get first dibs on CPU time.  It's much better to sleep until the appointed time(s) instead.</p>\n\n<p>The trick is to dynamically calculate the amount of time to sleep until the next time to blink, based on the current system-clock time.  (Simply delaying by a fixed amount of time means you will inevitably drift, since each iteration of your loop takes a non-zero and somewhat indeterminate time to execute).</p>\n\n<p>Example code (tested under MacOS/X, probably also compiles under Linux, but can be adapted for just about any OS with some changes) follows:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/times.h&gt;\n\n// unit conversion code, just to make the conversion more obvious and self-documenting\nstatic unsigned long long SecondsToMillis(unsigned long secs) {return secs*1000;}\nstatic unsigned long long MillisToMicros(unsigned long ms)    {return ms*1000;}\nstatic unsigned long long NanosToMillis(unsigned long nanos)  {return nanos/1000000;}\n\n// Returns the current absolute time, in milliseconds, based on the appropriate high-resolution clock\nstatic unsigned long long getCurrentTimeMillis()\n{\n#if defined(USE_POSIX_MONOTONIC_CLOCK)\n   // Nicer New-style version using clock_gettime() and the monotonic clock\n   struct timespec ts;\n   return (clock_gettime(CLOCK_MONOTONIC, &amp;ts) == 0) ? (SecondsToMillis(ts.tv_sec)+NanosToMillis(ts.tv_nsec)) : 0;\n#  else\n   // old-school POSIX version using times()\n   static clock_t _ticksPerSecond = 0;\n   if (_ticksPerSecond &lt;= 0) _ticksPerSecond = sysconf(_SC_CLK_TCK);\n\n   struct tms junk; clock_t newTicks = (clock_t) times(&amp;junk);\n   return (_ticksPerSecond &gt; 0) ? (SecondsToMillis((unsigned long long)newTicks)/_ticksPerSecond) : 0;\n#endif\n}\n\nint main(int, char **)\n{\n   const unsigned int bpm = 125;\n   const unsigned int flashDurationMillis = 10;\n   const unsigned int millisBetweenBlinks = SecondsToMillis(60)/bpm;\n   printf(\"Milliseconds between blinks:  %u\\n\", millisBetweenBlinks);\n\n   unsigned long long nextBlinkTimeMillis = getCurrentTimeMillis();\n   for(;;) {\n       long long millisToSleepFor = nextBlinkTimeMillis - getCurrentTimeMillis();\n       if (millisToSleepFor &gt; 0) usleep(MillisToMicros(millisToSleepFor));\n\n       printf(\"Blink!\\r\\n\");\n       //RS232_SendByte(cport_nr, 4); //LED ON\n       usleep(MillisToMicros(flashDurationMillis));\n       //RS232_SendByte(cport_nr, 0); //LED OFF\n       nextBlinkTimeMillis += millisBetweenBlinks;\n   }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 3, "last_activity_date": 1472618369, "last_edit_date": 1472618369, "creation_date": 1455747088, "answer_id": 35468802, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35468802#35468802", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>I think the drift problem may be rooted in your using <em>relative</em> time delays by sleeping <em>for</em> a fixed duration rather than sleeping <em>until</em> an absolute point in time. The problem is threads don't always wake up precisely on time due to scheduling issues.</p>\n\n<p>Something like this solution may work for you:</p>\n\n<pre><code>// for readability\nusing clock = std::chrono::steady_clock;\n\nunsigned int bpm = 125;\nint flashDuration = 10;\n\n// time for entire cycle\nclock::duration total_wait = std::chrono::milliseconds(1000 * 60 / bpm);\n\n// time for LED off part of cycle\nclock::duration off_wait = std::chrono::milliseconds(1000 - flashDuration);\n\n// time for LED on part of cycle\nclock::duration on_wait = total_wait - off_wait;\n\n// when is next change ready?\nclock::time_point ready = clock::now();\n\nfor(;;)\n{\n    // wait for time to turn light on\n    std::this_thread::sleep_until(ready);\n\n    RS232_SendByte(cport_nr, 4); // LED ON\n\n    // reset timer for off\n    ready += on_wait;\n\n    // wait for time to turn light off\n    std::this_thread::sleep_until(ready);\n\n    RS232_SendByte(cport_nr, 0); // LED OFF\n\n    // reset timer for on\n    ready += off_wait;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 1, "last_activity_date": 1455769847, "last_edit_date": 1495540849, "creation_date": 1455759559, "answer_id": 35471202, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes/35471202#35471202", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>Since you didn't specify C++98/03, I'm assuming at least C++11, and thus <code>&lt;chrono&gt;</code> is available.  This so far is consistent with <a href=\"https://stackoverflow.com/a/35468802/576911\">Galik's answer</a>.  However I would set it up so as to use <code>&lt;chrono&gt;</code>'s conversion abilities more precisely, and without having to manually enter conversion factors, except to describe \"beats / minute\", or actually in this answer, the inverse:  \"minutes / beat\".</p>\n\n<pre><code>using namespace std;\nusing namespace std::chrono;\nusing mpb = duration&lt;int, ratio_divide&lt;minutes::period, ratio&lt;125&gt;&gt;&gt;;\nconstexpr auto flashDuration = 10ms;\nauto beginBlink = steady_clock::now() + mpb{0};\nwhile (true)\n{\n    RS232_SendByte(cport_nr, 4); //LED ON\n    this_thread::sleep_until(beginBlink + flashDuration);\n    RS232_SendByte(cport_nr, 0); //LED OFF\n    beginBlink += mpb{1};\n    this_thread::sleep_until(beginBlink);\n}\n</code></pre>\n\n<p>The first thing to do is specify the duration of a beat, which is \"minutes/125\".  This is what <code>mpb</code> does.  I've used <code>minutes::period</code> as a stand in for <code>60</code>, just in an attempt to improve readability and reduce the number of magic numbers.</p>\n\n<p>Assuming C++14, I can give <code>flashDuration</code> real units (milliseconds).  In C++11 this would need to be spelled with this more verbose syntax:</p>\n\n<pre><code>constexpr auto flashDuration = milliseconds{10};\n</code></pre>\n\n<p>And then the loop:  This is very similar in design to <a href=\"https://stackoverflow.com/a/35468802/576911\">Galik's answer</a>, but here I only increment the time to start the blink once per iteration, and each time, by precisely 60/125 seconds.</p>\n\n<p>By delaying until a specified <code>time_point</code>, as opposed to a specific <code>duration</code>, one ensures that there is no round off accumulation as time progresses.  And by working in units which exactly describe your required duration interval, there is also no round off error in terms of computing the start time of the next interval.</p>\n\n<p>No need to traffic in milliseconds.  And no need to compute how long one needs to delay.  Only the need to <em>symbolically</em> compute the start time of each iteration.</p>\n\n<p><strong>Um...</strong></p>\n\n<p>Sorry to pick on <a href=\"https://stackoverflow.com/a/35468802/576911\">Galik's answer</a>, which I believe is the second best answer next to mine, but it exhibits a bug which my answer not only doesn't have, but is designed to prevent.  I didn't notice it until I dug into it with a calculator, and it is subtle enough that testing might miss it.</p>\n\n<p>In <a href=\"https://stackoverflow.com/a/35468802/576911\">Galik's answer</a>:</p>\n\n<pre><code>total_wait =  480ms;  // this is exactly correct\noff_wait   =  990ms;  // likely a design flaw\non_wait    = -510ms;  // certainly a mistake\n</code></pre>\n\n<p>And the total time that an iteration takes is <code>on_wait + off_wait</code> which is <code>440ms</code>, almost imperceptibly close to <code>total_wait</code> (<code>480ms</code>), making debugging very challenging.</p>\n\n<p>In contrast my answer increments <code>ready (beginBlink)</code> only once, and by exactly <code>480ms</code>.</p>\n\n<p>My answer is <em>more likely</em> to be right for the simple reason that it delegates more of its computation to the <code>&lt;chrono&gt;</code> library.  And in this particular case, that probability paid off.</p>\n\n<blockquote>\n  <p>Avoid manual conversions.  Instead let the <code>&lt;chrono&gt;</code> library do them for you.  Manual conversions introduce the possibility for error.</p>\n</blockquote>\n"}], "owner": {"reputation": 12010, "user_id": 2879085, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e13b29dfe63e6781a1a5c0e5dcd01413?s=128&d=identicon&r=PG&f=1", "display_name": "Forivin", "link": "https://stackoverflow.com/users/2879085/forivin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 7, "score": 5, "last_activity_date": 1472618369, "creation_date": 1455744192, "last_edit_date": 1455745299, "question_id": 35468032, "link": "https://stackoverflow.com/questions/35468032/running-code-every-x-seconds-no-matter-how-long-execution-within-loop-takes", "title": "Running code every x seconds, no matter how long execution within loop takes", "body": "<p>I'm trying to make an LED blink to the beat of a certain song. The song has exactly 125 bpm.<br>\nThe code that I wrote seems to work at first, but the longer it runs the bigger the difference in time between the LED flashes and the next beat starts. The LED seems to blink a tiny bit too slow.  </p>\n\n<p>I think that happens because lastBlink is kind of depending on the blink which happened right before that to stay in sync, instead of using one static initial value to sync to...  </p>\n\n<pre><code>unsigned int bpm = 125;\nint flashDuration = 10;\nunsigned int lastBlink = 0;\nfor(;;) {\n    if (getTickCount() &gt;= lastBlink+1000/(bpm/60)) {\n        lastBlink = getTickCount();\n        printf(\"Blink!\\r\\n\");\n        RS232_SendByte(cport_nr, 4); //LED ON\n        delay(flashDuration);\n        RS232_SendByte(cport_nr, 0); //LED OFF\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "list", "vector", "insert"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1455744102, "post_id": 35467921, "comment_id": 58631523, "body": "This <code>i &lt;= intAdeplacer.end()</code> should be <code>i &lt; intAdeplacer.end()</code>. Look up any example of iterating over a vector."}, {"owner": {"reputation": 13, "user_id": 4068333, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001412335771/picture?type=large", "display_name": "Wii Cristo", "link": "https://stackoverflow.com/users/4068333/wii-cristo"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1455744169, "post_id": 35467921, "comment_id": 58631561, "body": "but I need to see all the content of the vector to be sure of the elements that will be added to the list."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1455744205, "post_id": 35467921, "comment_id": 58631581, "body": "Normally people call <code>script</code> file for interpreted languages like python, shell, basic etc. C++ produces executable, not script."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1455744226, "post_id": 35467921, "comment_id": 58631594, "body": "As I said, look up any example of iterating over a vector."}, {"owner": {"reputation": 356, "user_id": 3768532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723cade780d5da806a1c12df7d83c8dd?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Kidd", "link": "https://stackoverflow.com/users/3768532/steve-kidd"}, "edited": false, "score": 0, "creation_date": 1455744662, "post_id": 35467921, "comment_id": 58631869, "body": "During first iteration, the iterator won&#39;t refer to anything because end() is just past the end of the vector. Try using reverse_iterator and test for != intAdeplacer.end() in for loop."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1491135347, "post_id": 35467921, "comment_id": 73410333, "body": "examples should be in English, not in French"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4068333, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001412335771/picture?type=large", "display_name": "Wii Cristo", "link": "https://stackoverflow.com/users/4068333/wii-cristo"}, "edited": false, "score": 0, "creation_date": 1455745574, "post_id": 35468314, "comment_id": 58632433, "body": "thank you for your answer ! I have another question : How can I avoid adding the end of the vector to the list ?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 13, "user_id": 4068333, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001412335771/picture?type=large", "display_name": "Wii Cristo", "link": "https://stackoverflow.com/users/4068333/wii-cristo"}, "edited": false, "score": 0, "creation_date": 1455746460, "post_id": 35468314, "comment_id": 58632932, "body": "If you start from the end, you have to check that your&#39;&#39;ve not reached the begin, and instead of decrementing the iterator at the end of the for loop, you should decrement it in the loop before using it.  In this <a href=\"http://ideone.com/dr4SSu\" rel=\"nofollow noreferrer\">online example</a>, I&#39;ve edited the code with all the different remarks put together."}, {"owner": {"reputation": 13, "user_id": 4068333, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001412335771/picture?type=large", "display_name": "Wii Cristo", "link": "https://stackoverflow.com/users/4068333/wii-cristo"}, "edited": false, "score": 0, "creation_date": 1455751108, "post_id": 35468314, "comment_id": 58634980, "body": "Thank you very much Christophe"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1455745202, "creation_date": 1455745202, "answer_id": 35468314, "question_id": 35467921, "link": "https://stackoverflow.com/questions/35467921/inserting-list-elements-to-vector-getting-additional-unwanted-values-c/35468314#35468314", "title": "Inserting list elements to vector, getting additional unwanted values C++", "body": "<p>If <code>it</code> is an iterator pointing at the 6th element of your list,  the following <a href=\"http://www.cplusplus.com/reference/vector/vector/insert/\" rel=\"nofollow\"><code>insert()</code></a> will insert from <code>begin()</code> (included) to <code>it</code> (excluded) into the vector:  </p>\n\n<pre><code>intAdeplacer.insert(intAdeplacer.end(), mylist.begin(), it);\n</code></pre>\n\n<p>So you'll have only 5 elements, from 0 to 40.  Unfortunately your printing loop does include the <code>end()</code> of the vector, which is out of range.  This is why you get this strange trailing number.  </p>\n\n<p>Just correct your loop into:  </p>\n\n<pre><code>for (auto i = intAdeplacer.begin(); i != intAdeplacer.end(); ++i) {\n    std::cout &lt;&lt; *i &lt;&lt; \", \";\n}\n</code></pre>\n\n<p>Or consider this alternate <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow\"><em>range-for</em></a> syntax: </p>\n\n<pre><code>for (auto &amp;element: intAdeplacer) {\n    std::cout &lt;&lt; element &lt;&lt; \", \";\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4068333, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001412335771/picture?type=large", "display_name": "Wii Cristo", "link": "https://stackoverflow.com/users/4068333/wii-cristo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 35468314, "answer_count": 1, "score": -1, "last_activity_date": 1491135245, "creation_date": 1455743847, "last_edit_date": 1491135245, "question_id": 35467921, "link": "https://stackoverflow.com/questions/35467921/inserting-list-elements-to-vector-getting-additional-unwanted-values-c", "title": "Inserting list elements to vector, getting additional unwanted values C++", "body": "<p>In my C++ script, I want to insert some elements of a list into a vector (from the beginning of list to a specific position \"it\"), and then try to add the vector at the top of the list and keeping the same order of the vector but I get unwanted additional elements in the vector.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;iterator&gt;   \n#include &lt;vector&gt;       \n#include &lt;list&gt;        \n\nint main() {\n\nstd::list&lt;int&gt; mylist;\n\nfor (int i = 0; i &lt; 10; i++)\n    mylist.push_back(i * 10);\n\nfor (std::list&lt;int&gt;::iterator i = mylist.begin(); i &lt;= mylist.end(); ++i) {\n    std::cout &lt;&lt; *i &lt;&lt; \", \";\n}\n\nstd::cout &lt;&lt; std::endl;\n\nstd::advance(it, 6);\nstd::cout &lt;&lt; \"The 6th element in mylist is: \" &lt;&lt; *it &lt;&lt; std::endl;\n\n// The vector that will contain mylist elements\nstd::vector&lt;int&gt; intAdeplacer;\nintAdeplacer.insert(intAdeplacer.end(), mylist.begin(), it);\n\nstd::cout &lt;&lt; std::endl;\n\n\nstd::cout &lt;&lt; \"Nombre d'\u00e9l\u00e9ments dans le vecteur : \" &lt;&lt; intAdeplacer.size() &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::endl;\n\n// see the content of the vector\nstd::cout &lt;&lt; \"Le vecteur de deplacement contient  : \" &lt;&lt; std::endl;\n\nfor (std::vector&lt;int&gt;::const_iterator i = intAdeplacer.begin();\n        i &lt;= intAdeplacer.end(); ++i) {\n    std::cout &lt;&lt; *i &lt;&lt; \", \";\n}\n</code></pre>\n\n<p>I get this output:</p>\n\n<blockquote>\n  <p>Le vecteur de deplacement contient  : \n  0, 10, 20, 30, 40, 134985, </p>\n</blockquote>\n\n<p>134985 is not wanted..</p>\n\n<pre><code>// Insert in front of the list the values of the vector and keeping the same order of elements in the vector\n\nfor (std::vector&lt;int&gt;::const_iterator i = intAdeplacer.end();\n        i &gt;= intAdeplacer.begin(); --i) {\n    mylist.push_front(*i);\n}\n\nstd::cout &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::endl;\n\nstd::cout &lt;&lt; \"nouvelle composition de mylist : \" &lt;&lt; std::endl;\n\nfor (std::list&lt;int&gt;::const_iterator j = mylist.begin(); j != mylist.end();\n        ++j) {\n    std::cout &lt;&lt; *j &lt;&lt; \", \";\n}\n\nstd::cout &lt;&lt; std::endl;\nstd::cout &lt;&lt; std::endl;\n\n\n// erasing the added elements from mylist\n\nstd::list&lt;int&gt;::iterator debut = mylist.begin();\nstd::list&lt;int&gt;::iterator fin = mylist.end();\n\nstd::advance(fin, 6);\nmylist.erase(debut, fin);\n\nfor (std::list&lt;int&gt;::iterator j = mylist.begin(); j &lt;= mylist.end(); ++j) {\n    std::cout &lt;&lt; *j &lt;&lt; \", \";\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "string", "hex"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1455744121, "post_id": 35467915, "comment_id": 58631533, "body": "Put 0x in front of the &#39;f&#39;."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1455744353, "post_id": 35467915, "comment_id": 58631670, "body": "EJP, did not get the idea. It&#180;s not <code>hex1 = 0xF</code>, but <code>hex1 = &#39;f&#39;</code>, a character...."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455745520, "post_id": 35467915, "comment_id": 58632389, "body": "IMO, the most straightforward is to use an existing library function:  <code>strtol</code>, <code>strtoul</code>, <code>sscanf</code>, or <code>std::istringstream</code>."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 2, "last_activity_date": 1455745439, "last_edit_date": 1455745439, "creation_date": 1455745132, "answer_id": 35468296, "question_id": 35467915, "link": "https://stackoverflow.com/questions/35467915/convert-a-hex-single-literal-character-to-its-value/35468296#35468296", "title": "Convert a HEX single literal character to its value", "body": "<p>A straight forward converter function would be to use a lookup array:  </p>\n\n<pre><code>unsigned int Convert_Char_Digit_To_Hex(char digit)\n{\n    static const std::string char_to_hex[] = \"0123456789ABCDEF\";\n    const std::string::size_type posn = \n        char_to_hex.find(digit);\n    if (posn != std::string::npos)\n    {\n        return posn;\n    }\n    return 0; // Error if here.\n}\n</code></pre>\n\n<p>But why write your own when you can use existing functions to convert from textual representation to internal representation?<br>\nSee also <code>strtol</code>, <code>strtoul</code>, <code>std::istringstream</code>, <code>sscanf</code>.  </p>\n\n<p><strong>Edit 1:  Comparisons</strong><br>\nAnother alternative is to use comparisons and math:</p>\n\n<pre><code>unsigned int Hex_Char_Digit_To_Int(char digit)\n{\n  unsigned int value = 0U;\n  digit = toupper(digit);\n  if ((digit &gt;= '0') and (digit &lt;= '9'))\n  {\n    value = digit - '0';\n  }\n  else\n  {\n    if ((digit &gt;= 'A') and (digit &lt;= 'F'))\n    {\n      value = digit - 'A' + 10;\n    }\n  }\n  return value;\n}\n</code></pre>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 394, "favorite_count": 0, "accepted_answer_id": 35468296, "answer_count": 1, "score": -3, "last_activity_date": 1455745439, "creation_date": 1455743818, "question_id": 35467915, "link": "https://stackoverflow.com/questions/35467915/convert-a-hex-single-literal-character-to-its-value", "title": "Convert a HEX single literal character to its value", "body": "<p>I need to convert a hex literal character to its value. Consider the following:</p>\n\n<pre><code>char hex1 = 'f'; // hex equals 102, as \u00b4f\u00b4 is ASCII 102.\n\nchar hexvalue = converter(hex1); // I need on hexvalue 0x0F, or 1111 binary \n</code></pre>\n\n<p>What shall be the most straightfoward <code>converter</code> function here ?</p>\n\n<p>Thanks for helping.</p>\n"}, {"tags": ["c++", "cuda", "gpgpu"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1455746643, "post_id": 35467861, "comment_id": 58633020, "body": "It is not entirely clear to me what problem you hope to solve, but you may want to explore the utility of  <code>CUDA_VISIBLE_DEVICES</code>, as explained in this <a href=\"https://devblogs.nvidia.com/parallelforall/cuda-pro-tip-control-gpu-visibility-cuda_visible_devices/\" rel=\"nofollow noreferrer\">blog post</a>"}, {"owner": {"reputation": 372, "user_id": 3116936, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eaf7a9f1d2ca9a7cd9632bd558e5238?s=128&d=identicon&r=PG&f=1", "display_name": "user3116936", "link": "https://stackoverflow.com/users/3116936/user3116936"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1455747519, "post_id": 35467861, "comment_id": 58633413, "body": "I managed to pick the target GPU using HANDLE_ERROR(cudaSetDevice(1));"}, {"owner": {"reputation": 372, "user_id": 3116936, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eaf7a9f1d2ca9a7cd9632bd558e5238?s=128&d=identicon&r=PG&f=1", "display_name": "user3116936", "link": "https://stackoverflow.com/users/3116936/user3116936"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1455748195, "post_id": 35467861, "comment_id": 58633702, "body": "I managed to pick the target GPU using HANDLE_ERROR(cudaSetDevice(1)). I think that it is a programmatic  equivalent to  export the variable CUDA_VISIBLE_DEVICES.  my question is  related to  what is more appropriated? setup the GPU to a compute-exclusive mode or not."}], "answers": [{"tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 1, "last_activity_date": 1456329430, "creation_date": 1456329430, "answer_id": 35606878, "question_id": 35467861, "link": "https://stackoverflow.com/questions/35467861/how-to-setup-a-dedicated-gpu-in-order-to-benchmark-a-cuda-kernel/35606878#35606878", "title": "How to setup a dedicated GPU in order to benchmark a CUDA kernel?", "body": "<blockquote>\n  <p>my question is related to what is more appropriated? setup the GPU to a compute-exclusive mode or not. </p>\n</blockquote>\n\n<p>It should not matter whether you set the GPU to exclusive-process or Default, as long as there is only one process attempting to use that GPU.</p>\n\n<p>You generally would not want to use exclusive-thread except in specific situations, because exclusive-thread could prevent multi-threaded GPU apps from running correctly, and may also interfere with other functions such as profiler functions.</p>\n\n<blockquote>\n  <p>What is the command that I should use in order to make permanent such setup?</p>\n</blockquote>\n\n<p>If you refer to the nvidia-smi command line help (<code>nvidia-smi --help</code>) or the nvidia-smi man page (<code>man nvidia-smi</code>), you can determine the command to make the change.  Any changes you make will be permanent until they are explicitly changed again.</p>\n"}], "owner": {"reputation": 372, "user_id": 3116936, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9eaf7a9f1d2ca9a7cd9632bd558e5238?s=128&d=identicon&r=PG&f=1", "display_name": "user3116936", "link": "https://stackoverflow.com/users/3116936/user3116936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 0, "accepted_answer_id": 35606878, "answer_count": 1, "score": 0, "last_activity_date": 1456329430, "creation_date": 1455743550, "last_edit_date": 1455750889, "question_id": 35467861, "link": "https://stackoverflow.com/questions/35467861/how-to-setup-a-dedicated-gpu-in-order-to-benchmark-a-cuda-kernel", "title": "How to setup a dedicated GPU in order to benchmark a CUDA kernel?", "body": "<p>I want to use second GPU device as a dedicate device under linux, in order  to benchmark a kernel. </p>\n\n<p>The kernel that I am testing  is a SIMD computing kernel without reductions and not X-Server is attached to the GPU, the device is a GeForge GTX-480 so I suppose that the compute capability is 2. Therefore, advanced features as dynamic parallelism and others, are disabled.</p>\n\n<p>using the nvidia-smi utility there are various modes to setup the GPU</p>\n\n<pre><code>\"Default\" means multiple contexts are allowed per device.\n\"Exclusive Process\" means only one context is allowed per device, usable from multiple threads at a time.\n\"Prohibited\" means no contexts are allowed per device (no compute apps).\n</code></pre>\n\n<p>Which is the best mode to setup the GPU in order to obtain a benchmark as faithful as possible?</p>\n\n<p>What is the command that I should use in order to make permanent such setup?</p>\n\n<p>I am compiling the  kernel using the following flags:</p>\n\n<pre><code>nvcc --ptxas-options=-v -O3   -w   -arch=sm_20 -use_fast_math -c -o\n</code></pre>\n\n<p>Exist a better combination of flags in order to obtain more help from the compiler to get faster execution times?</p>\n\n<p>Any suggestion will be very appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3055, "user_id": 2865186, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/ehbWg.jpg?s=128&g=1", "display_name": "MattSizzle", "link": "https://stackoverflow.com/users/2865186/mattsizzle"}, "edited": false, "score": 0, "creation_date": 1455743993, "post_id": 35467848, "comment_id": 58631474, "body": "Neat homework. So one point of advice I can give you is that you typically want to work from &quot;top down&quot;. The first (or highest level) problem you have is cycling through the &quot;1 to 100,000&quot; populations. This sounds like a while loop. Then you have to deal with the &quot;cycles&quot;  within this loop this will be the second loop and the first inner loop. In a cycle you have to determine the resulting population from the population created in the previous cycle. Once a cycle is done you will want to check that the population is greater then 1 and return if it is not."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1455744024, "post_id": 35467848, "comment_id": 58631484, "body": "Testing that an initial population value does not eventually go extinct requires running generations until the population gets to 0 - but if it does not eventually go extinct then you will keep running generations forever.  The is the definition of the halting problem: prove somehow whether the program will end or not without spending infinite time to do the inginite generations necessary."}, {"owner": {"reputation": 6886, "user_id": 272708, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b5cf904a50bb9106a1f177a0a81a405b?s=128&d=identicon&r=PG", "display_name": "dascandy", "link": "https://stackoverflow.com/users/272708/dascandy"}, "edited": false, "score": 0, "creation_date": 1455745839, "post_id": 35467848, "comment_id": 58632595, "body": "For reference, this is literally the Collatz conjecture, currently still unproven mathematical conjecture that says that this series is finite for every number."}], "answers": [{"comments": [{"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1455751345, "post_id": 35467955, "comment_id": 58635076, "body": "To get the largest number of generations you actually do not need to store them all, just store the current maximum and check whether the newly calculated value is greater than the maximum (then update the maximum and store the population number for that maximum)."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1455783149, "post_id": 35467955, "comment_id": 58646305, "body": "You initially set the maxes to 0 (like <code>size_t max_n=0, max_gen=0;</code>), then as you go through the <code>for(size_t n=1;n&lt;=100000;++n)</code> you calculate the number of generations per each population <code>n</code>. Then, <code>if(gen&gt;max_gen) {max_gen=gen;max_n=n}</code>. After the loop ends, you have the max values in <code>max_gen</code> and <code>max_n</code>."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": true, "score": 0, "last_activity_date": 1455743961, "creation_date": 1455743961, "answer_id": 35467955, "question_id": 35467848, "link": "https://stackoverflow.com/questions/35467848/cant-figure-out-how-to-program-in-outputs-for-the-given-situations/35467955#35467955", "title": "Can&#39;t figure out how to program in outputs for the given situations", "body": "<p>Basically what you want to do is this: wrap your code into a while-loop that exits if either P==1 or generations > someMaxValue. </p>\n\n<p>Wrap this construct into a for-loop that counts from 1 to 100,000 and uses this count to set the initial P.</p>\n\n<p>If you always store the generations after your while-loop (e.g. into an array) you can then search for the greatest element in the array.</p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 5931497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c89c5e5c4eb80b902fb53c9c3ef798?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Hall", "link": "https://stackoverflow.com/users/5931497/jonathan-hall"}, "edited": false, "score": 0, "creation_date": 1455750616, "post_id": 35468384, "comment_id": 58634773, "body": "Ya, I understand what you meant :) Appreciate the help!"}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1455783786, "last_edit_date": 1455783786, "creation_date": 1455745390, "answer_id": 35468384, "question_id": 35467848, "link": "https://stackoverflow.com/questions/35467848/cant-figure-out-how-to-program-in-outputs-for-the-given-situations/35468384#35468384", "title": "Can&#39;t figure out how to program in outputs for the given situations", "body": "<p>This problem can actually be harder than it looks at the first sight. First, you should use memorization to speed things up - for example, with 3 you get 3 -> 10 -> 5 -> 16 -> 8 -> 4 -> 2 -> 1 -> 0, so you know the answer for all those numbers as well (note that every power of 2 will extinct).</p>\n\n<p>But as pointed out by @Jerry, the problem is with the generations which eventually do not extinct - it will be difficult to say when to actually stop. The only chance is that there will (always) be a recurrence (number of organisms you already passed once when examining the current number of organisms), then you can say for sure that the organisms will not extinct.</p>\n\n<p>Edit: I hacked a solution quickly and if it is correct, you are lucky - every population between 1-100,000 seems to eventually extinct (as my program terminated so I didn't actually need to check for recurrences). Will not give you the solution for now so that you can try by yourself and learn, but according to my program the largest number of cycles is 351 (and the number is close to 3/4 of the range). According to the google search for Collatz conjecture, that is a correct number (they say 350 to go to population of 1, where I'm adding one extra cycle to 0), also the initial population number agrees.</p>\n\n<p>One additional hint: Check for integer overflow, and <strong>use 64-bit integer</strong> (unsigned __int64, unsigned long long) to calculate the population growth, as with 32-bit unsignet int, there is already an overflow in the range of 1-100,000 (the population can indeed grow much higher intermediately) - that was a problem in my initial solution, although it did not change the result. With 64-bit ints I was able to calculate up to 100,000,000 in relatively decent time (didn't try more; optimized release MSVC build), for that I had to limit the memo table to first 80,000,000 items to not go out of memory (compiled in 32-bit with LARGEADDRESSAWARE to be able to use up to 4 GB of memory - when compiled 64-bit the table could of course be larger).</p>\n"}], "owner": {"reputation": 131, "user_id": 5931497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13c89c5e5c4eb80b902fb53c9c3ef798?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Hall", "link": "https://stackoverflow.com/users/5931497/jonathan-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 35467955, "answer_count": 2, "score": 2, "last_activity_date": 1455783786, "creation_date": 1455743515, "question_id": 35467848, "link": "https://stackoverflow.com/questions/35467848/cant-figure-out-how-to-program-in-outputs-for-the-given-situations", "title": "Can&#39;t figure out how to program in outputs for the given situations", "body": "<p>So, I'm working on an assignment for my intro to computer science class. The assignment is as follows.</p>\n\n<blockquote>\n  <p>There is an organism whose population can be determined according to\n  the following rules:</p>\n  \n  <p>The organism requires at least one other organism to propagate.  Thus,\n  if the population goes to 1, then the organism will become extinct in\n  one time cycle (e.g. one breeding season). In an unusual turn of\n  events, an even number of organisms is not a good thing.  The\n  organisms will form pairs and from each pair, only one organism will\n  survive If there are an odd number of organisms and this number is\n  greater than 1 (e.g., 3,5,7,9,\u2026), then this is good for population\n  growth.  The organisms cannot pair up and in one time cycle, each\n  organism will produce 2 other organisms. In addition, one other\n  organism will be created.  (As an example, let us say there are 3\n  organisms.  Since 3 is an odd number greater than 1, in one time\n  cycle, each of the 3 organisms will produce 2 others.  This yields 6\n  additional organisms.  Furthermore, there is one more organism\n  produced so the total will be 10 organisms, 3 originals, 6 produced by\n  the 3, and then 1 more.) </p>\n  \n  <p>A: Write a program that tests initial populations from 1 to 100,000. \n  Find all populations that do not eventually become extinct.</p>\n  \n  <p>Write your answer here:</p>\n  \n  <p>B: Find the value of the initial population that eventually goes\n  extinct but that has the largest number of time cycles before it does.</p>\n  \n  <p>Write your answer here:</p>\n</blockquote>\n\n<p>The general idea of what I have so far is (lacking sytanx) is this with P representing the population</p>\n\n<blockquote>\n  <p>int generations = 0;</p>\n  \n  <p>{</p>\n  \n  <blockquote>\n    <p>if (P is odd) //I'll use a modulus modifier to divide by two and if the result is not 0 then I'll know it's odd</p>\n    \n    <p>P = 3P + 1</p>\n  </blockquote>\n  \n  <p>else</p>\n  \n  <blockquote>\n    <p>P = 1/2 P</p>\n  </blockquote>\n  \n  <p>generations = generations + 1</p>\n  \n  <p>}</p>\n</blockquote>\n\n<p>The problem for me is that I'm uncertain how to tell what numbers will not go extinct or how to figure out which population takes the longest time to go extinct. Any suggestions would be helpful.</p>\n"}, {"tags": ["c++", "linux", "vector"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455743598, "post_id": 35467786, "comment_id": 58631261, "body": "You program should be simple and readable first of all, then only if you have issue with performance you should optimize it"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455743954, "post_id": 35467786, "comment_id": 58631454, "body": "Unless you&#39;re processing the data, you might just pipe the output from your one process directly into the other. Reading lines is really only relevant if you have to do some alteration, otherwise it&#39;s just buffered data."}, {"owner": {"reputation": 633, "user_id": 3577756, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e8a7a25a96cf4d6fd919556e82d43104?s=128&d=identicon&r=PG&f=1", "display_name": "user3577756", "link": "https://stackoverflow.com/users/3577756/user3577756"}, "edited": false, "score": 0, "creation_date": 1455744340, "post_id": 35467786, "comment_id": 58631659, "body": "I have to allow for the user to type in ls -l &gt; txt.txt for example and pass ls -l to execvp(..) while opening txt.txt for output of ls -l"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1455752327, "post_id": 35467786, "comment_id": 58635456, "body": "Unless <code>execvp</code> operates differently under <code>c++</code> than <code>c</code>, what it needs is a <code>NULL</code> terminated <code>char **args</code> [or <code>char *argl[...]</code>]. I&#39;m not sure that <code>vector</code> can provide that directly [if so, all to the good]. So, if you&#39;re trying to skip [multiple] conversion steps, you may want to use some lower level functions. See my recent answer here: <a href=\"http://stackoverflow.com/questions/35422929/proper-memory-allocation-for-strings/35424246#35424246\" title=\"proper memory allocation for strings\">stackoverflow.com/questions/35422929/&hellip;</a> as the function is quite similar to what you need [using <code>stdin</code> instead of a file stream and removing the outer loop]."}], "answers": [{"tags": [], "owner": {"reputation": 633, "user_id": 3577756, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e8a7a25a96cf4d6fd919556e82d43104?s=128&d=identicon&r=PG&f=1", "display_name": "user3577756", "link": "https://stackoverflow.com/users/3577756/user3577756"}, "is_accepted": true, "score": 0, "last_activity_date": 1455762758, "creation_date": 1455762758, "answer_id": 35471718, "question_id": 35467786, "link": "https://stackoverflow.com/questions/35467786/getting-user-input-for-execvp-linux-c-using-stdvecorchar/35471718#35471718", "title": "Getting user input for execvp() Linux c++ using std::vecor&lt;char*&gt;", "body": "<p>This solution seems to work for what I was wanting. Not sure how great of a solution it is though. </p>\n\n<pre><code>std::vector&lt;std::string&gt; processString(std::string userInput)\n{\n   int j = 0;\n   std::vector&lt;std::string&gt; subStrs;\n   for (int i = 0; i &lt; userInput.size(); i++)\n   {\n      bool sameSeq = false;\n      if (isalnum(userInput[i]) || ispunct(userInput[i]))\n      {\n         subStrs.resize(subStrs.size() + 1);\n         while (isalnum(userInput[i]) || ispunct(userInput[i]))\n         {\n            subStrs[j].push_back(userInput[i]);\n            sameSeq = true; \n            i++;\n         }\n         if (sameSeq)\n         {\n            subStrs[j].push_back('\\0');\n            j++;   \n         }\n      }\n\n   }\n   return subStrs;\n}\n</code></pre>\n"}], "owner": {"reputation": 633, "user_id": 3577756, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e8a7a25a96cf4d6fd919556e82d43104?s=128&d=identicon&r=PG&f=1", "display_name": "user3577756", "link": "https://stackoverflow.com/users/3577756/user3577756"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 35471718, "answer_count": 1, "score": 0, "last_activity_date": 1455762758, "creation_date": 1455743284, "last_edit_date": 1455743562, "question_id": 35467786, "link": "https://stackoverflow.com/questions/35467786/getting-user-input-for-execvp-linux-c-using-stdvecorchar", "title": "Getting user input for execvp() Linux c++ using std::vecor&lt;char*&gt;", "body": "<p>So I have a semiworking program where I read in user input using </p>\n\n<pre><code>getline(std::cin, userinput, '\\n')\n</code></pre>\n\n<p>I then send the input to a \n<code>std::vector&lt;std::string&gt; subStrs</code> \nto break up the input from the user so each command element is seperate</p>\n\n<p>and then push them all to a \n<code>std::vector&lt;char*&gt; params</code> \nso I can pass it to <code>execvp(..)</code></p>\n\n<p>This seems very inefficient to me but is there a better way of getting the user input into the <code>std::vector&lt;char*&gt;</code> without all of the intermediate steps?</p>\n"}, {"tags": ["c++", "while-loop", "getline"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1455742807, "post_id": 35467586, "comment_id": 58630827, "body": "A tip: Always reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> before asking any questions about it. That either leads you to the answer, or at least makes for a better question."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455742840, "post_id": 35467586, "comment_id": 58630848, "body": "use a debugger or some debugging statements to see how execution is flowing through your loop. Also check whether opening the file succeeded, and you should also have a condition to exit your loop after 2000 iterations"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1455742874, "post_id": 35467586, "comment_id": 58630871, "body": "@Deduplicator it looks like a MCVE to me, apart from not including the input file of course"}, {"owner": {"reputation": 3, "user_id": 3891532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d37021befd40088fd14ca4940f0b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3891532", "link": "https://stackoverflow.com/users/3891532/user3891532"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1455742911, "post_id": 35467586, "comment_id": 58630887, "body": "@Deduplicator What do you suggest I remove?"}, {"owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "edited": false, "score": 0, "creation_date": 1455743018, "post_id": 35467586, "comment_id": 58630940, "body": "does this one column also does not end with ;? This might be an issue. Have you checked the content of rrow_train and whether your loop runs 1000 times? I would also suspect stof... Maybe, could you provide 5 lines of your file, so that we could test?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1455743076, "post_id": 35467586, "comment_id": 58630974, "body": "@MM As an example, why does he include <code>vector</code>, <code>sstream</code> or <code>stdlib.h</code>? Could be far worse, but could be better too."}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1455743121, "post_id": 35467586, "comment_id": 58630998, "body": "an MCVE doesn&#39;t need a counter or an array..."}, {"owner": {"reputation": 3, "user_id": 3891532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d37021befd40088fd14ca4940f0b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3891532", "link": "https://stackoverflow.com/users/3891532/user3891532"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1455743188, "post_id": 35467586, "comment_id": 58631039, "body": "@deduplicator *she.  I will now you pointed it out,"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1455743208, "post_id": 35467586, "comment_id": 58631049, "body": "The most likely cause of the problem is that the file &quot;filename.csv&quot; does not exist in the directory where you are running your program. Add a line to check whether the file was opened successfully. <code>if (r_train.is_open()) { ... }</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1455743316, "post_id": 35467586, "comment_id": 58631109, "body": "Well, there was no indication, and I guessed wrong ;-)"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1455743420, "post_id": 35467586, "comment_id": 58631171, "body": "That&#39;s strange, I swear I just saw a glitch in the matrix. The OP updated her question."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1455743428, "post_id": 35467586, "comment_id": 58631175, "body": "This probably isn&#39;t the problem, but since you&#39;re in <code>std</code> namespace anyway, you might as well just use <code>endl</code>, so you don&#39;t have to worry about &#39;\\n&#39; vs &#39;\\r\\n&#39;"}, {"owner": {"reputation": 3, "user_id": 3891532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d37021befd40088fd14ca4940f0b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3891532", "link": "https://stackoverflow.com/users/3891532/user3891532"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1455743474, "post_id": 35467586, "comment_id": 58631200, "body": "@RSahu THanks very much for this.  I appear to have got the filepath misspelt.  Sorry about that"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1455754174, "post_id": 35467586, "comment_id": 58636078, "body": "@ocket8888 You seem to have a misconception what <code>std::endl</code> does. <code>stream &lt;&lt; std::endl</code> is exactly the same as <code>stream &lt;&lt; &#39;\\n&#39; &lt;&lt; </code>std::flush<code>. In other words, only use </code>std::endl` if you might need the explicit manual flush, and have to output <code>&#39;\\n&#39;</code>."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1455754348, "post_id": 35467586, "comment_id": 58636126, "body": "Oh, I thought the purpose of endl was to eliminate the need for a C++ program to know if it&#39;s running on Windows/DOS or *nix just to output to a terminal."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1455938501, "post_id": 35467586, "comment_id": 58727775, "body": "@ocket8888: If the stream is in text-mode, it does line-end-conversions where needed. In other words, only ever on windows, or some old and obsolete platforms."}, {"owner": {"reputation": 702, "user_id": 3777314, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/600103728/picture?type=large", "display_name": "ocket8888", "link": "https://stackoverflow.com/users/3777314/ocket8888"}, "edited": false, "score": 0, "creation_date": 1456098294, "post_id": 35467586, "comment_id": 58776037, "body": "hmmm. But what if I want &#39;incorrect&#39; line endings?"}], "answers": [{"tags": [], "owner": {"reputation": 6299, "user_id": 143931, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0f87a9f76e50c212510492dd5f2923f6?s=128&d=identicon&r=PG", "display_name": "fuenfundachtzig", "link": "https://stackoverflow.com/users/143931/fuenfundachtzig"}, "is_accepted": true, "score": 1, "last_activity_date": 1455743403, "creation_date": 1455743403, "answer_id": 35467821, "question_id": 35467586, "link": "https://stackoverflow.com/questions/35467586/while-loop-not-initialiazing/35467821#35467821", "title": "While loop not initialiazing", "body": "<p>Running your code when there is no file <code>filename.csv</code> or it is empty yields no output. Running your code when the file exists gives the expected output.</p>\n\n<p>PS: You don't need <code>.c_str()</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 3891532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e0d37021befd40088fd14ca4940f0b7?s=128&d=identicon&r=PG&f=1", "display_name": "user3891532", "link": "https://stackoverflow.com/users/3891532/user3891532"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1455799614, "accepted_answer_id": 35467821, "answer_count": 1, "score": 0, "last_activity_date": 1455743608, "creation_date": 1455742642, "last_edit_date": 1455743608, "question_id": 35467586, "link": "https://stackoverflow.com/questions/35467586/while-loop-not-initialiazing", "closed_reason": "Not suitable for this site", "title": "While loop not initialiazing", "body": "<p>My while loop does not appear to be initializing. The file filename.csv is a CSV file with only one column of 2000 numbers between -1 and 1.  I've tried getline with both \\n and \\r.  Neither seem to work.  I'm not getting any output.  </p>\n\n<p>I'm quite new to C++ so it might be something very obvious.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\n\nusing namespace std;\n\nint main()\n{    \n    float rarray_train[2000];\n    int rrow_train=0;\n    ifstream  r_train(\"filename.csv\");\n    string rline_train;    \n\n    while( getline(r_train,rline_train,'\\n') )\n    {\n        rarray_train[rrow_train] = stof( rline_train.c_str() );\n        cout&lt;&lt;rarray_train[rrow_train]&lt;&lt;endl;\n        ++rrow_train;\n    }\nreturn 0;\n}\n</code></pre>\n\n<p>Edit: Sorry about this.  I misspelt my file path.  Thanks for your help.  Don't know etiquette around here so if you think I should delete the question let me know.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 5177, "user_id": 95674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e606b10c31dd8d9eecd1034789653e44?s=128&d=identicon&r=PG", "display_name": "Barett", "link": "https://stackoverflow.com/users/95674/barett"}, "edited": false, "score": 1, "creation_date": 1455743918, "post_id": 35467475, "comment_id": 58631432, "body": "Try creating a new variable to read the input. Don&#39;t read it into the same intArray."}, {"owner": {"reputation": 1, "user_id": 5942557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BcyrsrG8hYg/AAAAAAAAAAI/AAAAAAAAANo/aO5k9FZLxbY/photo.jpg?sz=128", "display_name": "taylor simmons", "link": "https://stackoverflow.com/users/5942557/taylor-simmons"}, "reply_to_user": {"reputation": 5177, "user_id": 95674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e606b10c31dd8d9eecd1034789653e44?s=128&d=identicon&r=PG", "display_name": "Barett", "link": "https://stackoverflow.com/users/95674/barett"}, "edited": false, "score": 0, "creation_date": 1455862195, "post_id": 35467475, "comment_id": 58688775, "body": "How would I go about doing that?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5942557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BcyrsrG8hYg/AAAAAAAAAAI/AAAAAAAAANo/aO5k9FZLxbY/photo.jpg?sz=128", "display_name": "taylor simmons", "link": "https://stackoverflow.com/users/5942557/taylor-simmons"}, "edited": false, "score": 0, "creation_date": 1455930466, "post_id": 35467648, "comment_id": 58726199, "body": "My skills at C++ are pretty basic, how would I go about adding code to look for numberToLookFor in intArray?"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1455742831, "creation_date": 1455742831, "answer_id": 35467648, "question_id": 35467475, "link": "https://stackoverflow.com/questions/35467475/error-c2678-binary-no-operator-found-which-takes-a-left-hand-operand-of/35467648#35467648", "title": "error C2678: binary &#39;&gt;&gt;&#39; : no operator found which takes a left-hand operand of type &#39;std::istream&#39; . How to provide an input for a search index?", "body": "<p>The compiler is telling you that there is no function that supports the call.</p>\n\n<pre><code>cin &gt;&gt; intArray;\n</code></pre>\n\n<p>Looking at the previous line in your code, that is not what you should be doing anyway. You need something like:</p>\n\n<pre><code>int numberToLookFor;\ncin &gt;&gt; numberToLookFor;\n</code></pre>\n\n<p>and then add the code to look for <code>numberToLookFor</code> in <code>intArray</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1363, "user_id": 5779452, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c07c442a138d5852b368944ecf43a4c?s=128&d=identicon&r=PG&f=1", "display_name": "DxAlpha", "link": "https://stackoverflow.com/users/5779452/dxalpha"}, "is_accepted": false, "score": 0, "last_activity_date": 1455743008, "creation_date": 1455743008, "answer_id": 35467713, "question_id": 35467475, "link": "https://stackoverflow.com/questions/35467475/error-c2678-binary-no-operator-found-which-takes-a-left-hand-operand-of/35467713#35467713", "title": "error C2678: binary &#39;&gt;&gt;&#39; : no operator found which takes a left-hand operand of type &#39;std::istream&#39; . How to provide an input for a search index?", "body": "<p>You can't search an array that way like R. Sahu described.</p>\n\n<p>You could use a ranged base for loop where you ask for the input.</p>\n\n<p>Something like this:</p>\n\n<pre><code>int value;\nstd::cin &gt;&gt; value;\nfor (int i : intarray)\n{  \n   if (i == value)\n   std::cout &lt;&lt; \"Found\";\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5942557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BcyrsrG8hYg/AAAAAAAAAAI/AAAAAAAAANo/aO5k9FZLxbY/photo.jpg?sz=128", "display_name": "taylor simmons", "link": "https://stackoverflow.com/users/5942557/taylor-simmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 649, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455743008, "creation_date": 1455742286, "question_id": 35467475, "link": "https://stackoverflow.com/questions/35467475/error-c2678-binary-no-operator-found-which-takes-a-left-hand-operand-of", "title": "error C2678: binary &#39;&gt;&gt;&#39; : no operator found which takes a left-hand operand of type &#39;std::istream&#39; . How to provide an input for a search index?", "body": "<p>My assignment is to hardcode an integer array, display the array to the user, and then ask the user to input an integer to search for. My problem is getting the input to search the array.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main ()\n\n{\n\nint intArray [17] = {7, 3, 32, 2, 55, 34, 6, 13,29,22, 11, 9, 1, 5,42,39, 8};\n\ncout &lt;&lt; \"List = 7, 3, 32, 2, 55, 34, 6, 13,29,22, 11, 9, 1, 5,42,39, 8 \" &lt;&lt; endl;\n\ncout &lt;&lt; \"Enter an integer in the list to search for: \" &lt;&lt; endl;\ncin &gt;&gt; intArray;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "boost-spirit-x3"], "answers": [{"tags": [], "owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "is_accepted": true, "score": 0, "last_activity_date": 1455780128, "creation_date": 1455780128, "answer_id": 35475186, "question_id": 35467203, "link": "https://stackoverflow.com/questions/35467203/spirit-x3-compile-error-a-template-declaration-cannot-appear-at-block-scope/35475186#35475186", "title": "Spirit X3 Compile Error &quot;a template declaration cannot appear at block scope&quot;", "body": "<p>After playing arround, i found a solution:</p>\n\n<p>You need to encapsulate the Rule in a own namespace:</p>\n\n<pre><code>namespace grammer\n{\n  using namespace x3;\n\n    x3::rule&lt;class quote,std::string&gt; const quote = \"quote\";\n        auto quote_def = '\"' &gt;&gt; *(char_-'\"') &gt;&gt; '\"';\n\n    x3::rule&lt;class header,std::vector&lt;std::string&gt;&gt; const header = \"header\";\n        auto header_def = quote % ',';\n\n\n   BOOST_SPIRIT_DEFINE(quote, header);\n}\n\n\ntemplate &lt;typename Iterator&gt;\nbool parser(Iterator&amp; first, Iterator const&amp; last)\n{\n    using namespace x3;\n    std::vector&lt;std::string&gt; headerVec;\n\n    auto ret = x3::parse( first, last, grammer::header , headerVec);\n    if(ret)\n        std::cout &lt;&lt; \"all done \" &lt;&lt; headerVec.size() &lt;&lt;\"\\n\";\n    else\n    {\n        std::cout &lt;&lt; \"not : \" &lt;&lt; headerVec.size() &lt;&lt;\"\\n\";\n    }\n    return true;\n}\n</code></pre>\n\n<p>But i cannot explain why this solves the compiler error.</p>\n"}], "owner": {"reputation": 1861, "user_id": 722695, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02e5730386e784c40ab552297e5c3f95?s=128&d=identicon&r=PG", "display_name": "Roby", "link": "https://stackoverflow.com/users/722695/roby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2325, "favorite_count": 0, "accepted_answer_id": 35475186, "answer_count": 1, "score": 1, "last_activity_date": 1455780128, "creation_date": 1455741386, "question_id": 35467203, "link": "https://stackoverflow.com/questions/35467203/spirit-x3-compile-error-a-template-declaration-cannot-appear-at-block-scope", "title": "Spirit X3 Compile Error &quot;a template declaration cannot appear at block scope&quot;", "body": "<p>im trying a small example to get startet with Spirit X3.</p>\n\n<pre><code>template &lt;typename Iterator&gt;\nbool parser(Iterator&amp; first, Iterator const&amp; last)\n{\n    using namespace x3;\n\n    x3::rule&lt;class quote,std::string&gt; const quote = \"quote\";\n        auto quote_def = '\"' &gt;&gt; *(char_-'\"') &gt;&gt; '\"';\n\n//   x3::rule&lt;class header,std::vector&lt;std::string&gt;&gt; const header = \"header\";\n//  auto header_def = quote % ',';\n\n    BOOST_SPIRIT_DEFINE(quote);\n\n    return true;\n}\n\nint main(int argc, char** argv)\n{\n    std::string test = \"\\\"abc\\\",\\\"def\\\"\";\n\n    auto it=std::begin(test);\n    parser( it, std::end(test));\n\n    return 0;\n}\n</code></pre>\n\n<p>And im getting the following compiler error:</p>\n\n<pre><code>In file included from /home/robstr/Downloads/boost_1_60_0/boost/spirit/home/x3/nonterminal.hpp:10:0,\n                 from /home/robstr/Downloads/boost_1_60_0/boost/spirit/home/x3.hpp:17,\n                 from tmp.cc:5:\ntmp.cc: In function \u2018bool parser(Iterator&amp;, const Iterator&amp;)\u2019:\n/home/robstr/Downloads/boost_1_60_0/boost/spirit/home/x3/nonterminal/rule.hpp:157:5: error: a template declaration cannot appear at block scope\n     template &lt;typename Iterator, typename Context, typename Attribute&gt;          \\\n     ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/seq/for_each.hpp:83:61: note: in expansion of macro \u2018BOOST_SPIRIT_DEFINE_\u2019\n # define BOOST_PP_SEQ_FOR_EACH_M_I(r, macro, data, seq, sz) macro(r, data, BOOST_PP_SEQ_HEAD(seq))\n                                                             ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/seq/for_each.hpp:78:47: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH_M_I\u2019\n #    define BOOST_PP_SEQ_FOR_EACH_M_IM(r, im) BOOST_PP_SEQ_FOR_EACH_M_I(r, im)\n                                               ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/seq/for_each.hpp:77:43: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH_M_IM\u2019\n #    define BOOST_PP_SEQ_FOR_EACH_M(r, x) BOOST_PP_SEQ_FOR_EACH_M_IM(r, BOOST_PP_TUPLE_REM_4 x)\n                                           ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/seq/for_each.hpp:77:73: note: in expansion of macro \u2018BOOST_PP_TUPLE_REM_4\u2019\n #    define BOOST_PP_SEQ_FOR_EACH_M(r, x) BOOST_PP_SEQ_FOR_EACH_M_IM(r, BOOST_PP_TUPLE_REM_4 x)\n                                                                         ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/control/iif.hpp:32:31: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH_M\u2019\n # define BOOST_PP_IIF_1(t, f) t\n                               ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/repetition/detail/for.hpp:22:37: note: in expansion of macro \u2018BOOST_PP_FOR_1_C\u2019\n # define BOOST_PP_FOR_1(s, p, o, m) BOOST_PP_FOR_1_C(BOOST_PP_BOOL(p(2, s)), s, p, o, m)\n                                     ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/cat.hpp:29:34: note: in expansion of macro \u2018BOOST_PP_FOR_1\u2019\n #    define BOOST_PP_CAT_I(a, b) a ## b\n                                  ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/control/iif.hpp:32:31: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH_DETAIL_CHECK_EXEC\u2019\n # define BOOST_PP_IIF_1(t, f) t\n                               ^\n/home/robstr/Downloads/boost_1_60_0/boost/preprocessor/seq/for_each.hpp:29:53: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH_DETAIL_CHECK\u2019\n #    define BOOST_PP_SEQ_FOR_EACH(macro, data, seq) BOOST_PP_SEQ_FOR_EACH_DETAIL_CHECK(macro, data, seq)\n                                                     ^\n/home/robstr/Downloads/boost_1_60_0/boost/spirit/home/x3/nonterminal/rule.hpp:169:34: note: in expansion of macro \u2018BOOST_PP_SEQ_FOR_EACH\u2019\n #define BOOST_SPIRIT_DEFINE(...) BOOST_PP_SEQ_FOR_EACH(                         \\\n                                  ^\nsrc/dico.cc:21:1: note: in expansion of macro \u2018BOOST_SPIRIT_DEFINE\u2019\n BOOST_SPIRIT_DEFINE(quote);\n ^\n</code></pre>\n\n<p>The problem is i think <strong>BOOST_SPIRIT_DEFINE</strong> but i have no idea how to fix it.</p>\n"}, {"tags": ["c++", "stringstream", "bitset"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1455741178, "post_id": 35467045, "comment_id": 58629938, "body": "Don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455742512, "post_id": 35467045, "comment_id": 58630680, "body": "Not sure what you mean by &quot;Converting F to 0100&quot; ? Did you mean &quot;Converting f to 0110&quot; ? Which is correct for ASCII as Pete points out.  The ASCII code for <code>f</code> is 01100110 .  Maybe you&#39;re mixing up with the hexadecimal digit F."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455742622, "post_id": 35467045, "comment_id": 58630735, "body": "It would help your question if you showed what was in <code>buffer</code> and also showed what you expected and which sixbit encoding you were using. The samples on Wikipedia don&#39;t include any lower-case letters amongst the 64 characters."}], "answers": [{"comments": [{"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1455742127, "post_id": 35467328, "comment_id": 58630449, "body": "[link]<a href=\"https://en.wikipedia.org/wiki/Six-bit_character_code\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Six-bit_character_code</a> for SixBit. The characters are 1byte hex values. BTW: What does the <code>+</code> do.. Now I see all decimal values (in this case 102 for f)... humm. I need to convert the text hex value to numeric hex value..."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1455742328, "post_id": 35467328, "comment_id": 58630591, "body": "@Mendes - that Wikipedia article lists a bunch of variants. Regardless, that stream inserter shows the character value that each entry represents; to figure out what&#39;s going on, you have to look at the numeric value."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1455742973, "post_id": 35467328, "comment_id": 58630921, "body": "Pete, that helped me. I need a ASCII Literal to integer converter... Issue for a new topic... Thanks."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1455741823, "creation_date": 1455741823, "answer_id": 35467328, "question_id": 35467045, "link": "https://stackoverflow.com/questions/35467045/bitset4-converted-to-wrong-value-on-win7-embedded/35467328#35467328", "title": "bitset&lt;4&gt; converted to wrong value on Win7 Embedded", "body": "<p>To see better what's going on, change</p>\n\n<pre><code>std::cout &lt;&lt; buffer[index] &lt;&lt; \" - \" &lt;&lt; bset &lt;&lt; std::endl;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>std::cout &lt;&lt; +buffer[index] &lt;&lt; \" - \" &lt;&lt; bset &lt;&lt; std::endl;\n</code></pre>\n\n<p>That will show you the numeric value of <code>buffer[index]</code> instead of whatever character that numeric value represents. I don't now what \"Sixbit ASCII\" refers to, but with straight ASCII the result you're seeing is exactly what I'd expect: the ASCII code for the letter f is 0x66, so the low 4 bits are, indeed, 0110. You need to convert those character codes to digits. Again for ASCII (and for all standard character codes), values in the range <code>'0'</code> through <code>'9'</code> can be converted by subtracting <code>'0'</code>; values in the range <code>'a'</code> through <code>'f'</code> and <code>'A'</code> through <code>'F'</code> will require a more sophisticated lookup.</p>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 35467328, "answer_count": 1, "score": 0, "last_activity_date": 1455741823, "creation_date": 1455740859, "question_id": 35467045, "link": "https://stackoverflow.com/questions/35467045/bitset4-converted-to-wrong-value-on-win7-embedded", "title": "bitset&lt;4&gt; converted to wrong value on Win7 Embedded", "body": "<p>I have the following piece of code to convert from Sixbit ASCII to an ASCII string:</p>\n\n<pre><code>    std::string SixBitToASCII(char *buffer)\n    {\n        std::stringstream ss;\n        std::stringstream out;\n\n        for (int index = 0; index &lt; 16; index++)\n        {\n            std::bitset&lt;4&gt; bset(buffer[index]);\n\n            std::cout &lt;&lt; buffer[index] &lt;&lt; \" - \" &lt;&lt; bset &lt;&lt; std::endl;\n\n            ss &lt;&lt; bset;\n        }\n\n        std::cout &lt;&lt; ss.str() &lt;&lt; std::endl;\n\n        for (int index = 0; index &lt; 60; index += 6)\n        {\n            std::string s = ss.str().substr(index, index + 6);\n            std::bitset&lt;6&gt; bits;\n            std::istringstream is(s);\n            is &gt;&gt; bits;\n\n            int asciiCode = bits.to_ulong() + 32;\n\n            out &lt;&lt; (char) asciiCode;\n        }\n\n        return out.str();\n    }\n</code></pre>\n\n<p>It compiles fine. I\u00b4m compiling in a VS2012 Win7 Professional 32bits. </p>\n\n<p>When I run it into an embedded Win7 I\u00b4m getting the following output:</p>\n\n<pre><code>8 - 1000\nf - 0110 &lt;&lt;&lt; ??? PROBLEM HERE\n2 - 0010\n9 - 1001 \n2 - 0010\n3 - 0011\n4 - 0100\n1 - 0001\n0 - 0000\n4 - 0100\n1 - 0001\n3 - 0011\n\n100001100010100100100011010000010000010000010011\n</code></pre>\n\n<p>What is going on where is maked as a problem ? Converting <code>F</code> to <code>0100</code> ??? Isn\u00b4t is supposed to be <code>1111</code> ?</p>\n\n<p>Of course the final conversion is wrong due to this error convering <code>F</code>. I\u00b4ve tried <code>std::bitset&lt;4&gt; bset((unsigned char) buffer[index])</code> with same results.</p>\n\n<p>Help appreciated.</p>\n"}, {"tags": ["python", "c++", "callback", "swig"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1455741692, "post_id": 35466991, "comment_id": 58630217, "body": "Unfortunately passing a callback function from Python to C++ via SWIG is not very well supported yet. There&#39;d a fair number of swig code you&#39;d need to hand-write, and I believe there are a few attempts at it."}], "answers": [{"tags": [], "owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "is_accepted": false, "score": 0, "last_activity_date": 1456415112, "last_edit_date": 1456415112, "creation_date": 1455894275, "answer_id": 35508383, "question_id": 35466991, "link": "https://stackoverflow.com/questions/35466991/calling-python-objects-method-from-c/35508383#35508383", "title": "Calling python object&#39;s method from c++", "body": "<p>Using in the constructor</p>\n\n<pre><code>po=this-&gt;po\n</code></pre>\n\n<p>solves the \"issue\". Sorry for the spam! I will leave here this thing as an example.. maybe someone finds it useful.</p>\n"}], "owner": {"reputation": 1271, "user_id": 4121210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/lLgLn.jpg?s=128&g=1", "display_name": "El Sampsa", "link": "https://stackoverflow.com/users/4121210/el-sampsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 817, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1456415112, "creation_date": 1455740683, "last_edit_date": 1495535307, "question_id": 35466991, "link": "https://stackoverflow.com/questions/35466991/calling-python-objects-method-from-c", "title": "Calling python object&#39;s method from c++", "body": "<p>I am trying to achieve the following: passing a python object to a c++ callback chain (which are typical in many popular c++ libraries).  In the c++ code, callbacks pass on objects that have necessary information for consecutive callbacks in the cascade/chain.</p>\n\n<p>Here is a small test code I wrote: we pass a python object to a c routine (case 1) and call it's method.  That works ok.  But when I pass the python object to a c++ object and try to call it \"inside\" the c++ object, I get segfault.. :(</p>\n\n<p>Here it goes:</p>\n\n<p>c++ module (\"some.cpp\"):</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;iostream&gt;\n#include &lt;Python.h&gt;\n\n/* objective:\n* create c++ objects / routines that accept python objects\n* then call methods of the python objects inside c++\n* \n* python objects (including its variables and methods) could be passed along, for example in c++ callback chains ..\n* .. and in the end we could call a python callback\n*\n* Compile and test as follows:\n* python setup.py build_ext\n* [copy/link some.so where test.py is]\n* python test.py\n* \n*/\n\nclass testclass {\n\npublic:  \ntestclass(int* i, PyObject* po) {\n  std::cerr &lt;&lt; \"testclass constructor! \\n\";\n  i=i; po=po; \n}\n~testclass() {}\n\nvoid runpo() {\n  PyObject* name;\n  const char* mname=\"testmethod\"; \n  name=PyString_FromString(mname);\n  std::cerr &lt;&lt; \"about to run the python method .. \\n\";\n  PyObject_CallMethodObjArgs(po, name, NULL);\n  std::cerr &lt;&lt; \".. you did it - i will buy you a beer!\\n\";\n}\n\npublic:\n  int* i;\n  PyObject* po;\n};\n\n\n/* Docstrings */\nstatic char module_docstring[] = \"hand-made python module\";\n\n/* Available functions */\nstatic PyObject* regi_wrapper(PyObject * self, PyObject * args);\nvoid regi(int* i, PyObject* po);\n\n/* Module specification */\nstatic PyMethodDef module_methods[] = {\n{\"regi_wrapper\",regi_wrapper, METH_VARARGS, \"lets see if we can wrap this sucker\"},\n{NULL, NULL, 0, NULL}\n};\n\n\n/* Initialize the module */\nPyMODINIT_FUNC initsome(void)\n{\n    PyObject *m = Py_InitModule3(\"some\", module_methods, module_docstring);\n    if (m == NULL)\n        return;\n    // import_array(); // numpy not required here ..\n}\n\n\nstatic PyObject* regi_wrapper(PyObject * self, PyObject * args)\n{\n  int* input_i; // whatever input variable\n  PyObject* input_po; // python object\n  PyObject* ret; // return variable\n\n  // parse arguments\n  if (!PyArg_ParseTuple(args, \"iO\", &amp;input_i, &amp;input_po)) {\n    return NULL;\n  }\n\n  // https://stackoverflow.com/questions/16606872/calling-python-method-from-c-or-c-callback\n\n  // Py_INCREF(input_po); // need this, right? .. makes no difference\n\n  /* // seems not to make any difference ..\n  PyGILState_STATE gstate;\n  gstate = PyGILState_Ensure();\n  */\n\n  regi(input_i, input_po);\n\n  // PyGILState_Release(gstate); // .. makes no difference\n\n  // Py_DECREF(input_po); // .. makes no difference\n\n  Py_RETURN_TRUE;\n}\n\nvoid regi(int* i, PyObject* po) {\n  // search variable and methods from PyObject \"po\" and call its methods?\n  PyObject* name;\n  const char* mname=\"testmethod\";\n\n  testclass* testobj;\n  testobj=new testclass(i,po);\n\n  /* [insert // in front of this line to test case 1]\n  // ***** this one works! *********\n  name=PyString_FromString(mname);  \n  PyObject_CallMethodObjArgs(po, name, NULL);\n  */ // [insert // in front of this line to test case 1]\n\n  // *** I WOULD LIKE THIS TO WORK *** but it gives segfault.. :(\n  testobj-&gt;runpo(); // [uncomment to test case 2]\n\n}\n</code></pre>\n\n<p>setup.py:</p>\n\n<pre><code>from distutils.core import setup, Extension\n\n# the c++ extension module\nextension_mod = Extension(\"some\", [\"some.cpp\"])\n\nsetup(name = \"some\", ext_modules=[extension_mod])\n</code></pre>\n\n<p>test.py:</p>\n\n<pre><code>import some\n\nclass sentinel:\n\n  def __init__(self):\n    pass\n\n  def testmethod(self):\n    print \"hello from sentinel.testmethod\"\n    pass\n\nse=sentinel()\n\nsome.regi_wrapper(1,se)\n</code></pre>\n\n<p>This question seems relevant:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/16606872/calling-python-method-from-c-or-c-callback\">Calling python method from C++ (or C) callback</a></p>\n\n<p>.. however the answer did not help me.</p>\n\n<p>What am I missing/misunderstanding here (my c++ sucks big time, so I might have missed something obvious) .. ?</p>\n\n<p>Also, some bonus questions:</p>\n\n<p>a) I am familiar with swig and swig \"directors\".. however, I would like to use swig for general wrapping of the code, but my custom wrapping for the sort of things described in this question (i.e. without directors).  Is there any way to achieve this?</p>\n\n<p>b) Any other suggestions to achieve what I am trying to achieve here, are highly appreciated.. is this possible or just pure insanity?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1455741192, "post_id": 35466987, "comment_id": 58629946, "body": "I don&#39;t like the use of <code>malloc</code> in your c++ code, you should at least use <code>new</code>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1455742801, "post_id": 35466987, "comment_id": 58630824, "body": "You do not need to repeat the <code>struct</code> with each variable declaration. In C++, a <code>struct</code> declaration automatically names a type that can be used by itself. Also, <code>malloc</code> should rarely be used in C++ because it does not call the constructor of a class and <code>free</code> will not call the destructor."}], "answers": [{"comments": [{"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1455741738, "post_id": 35467208, "comment_id": 58630246, "body": "Just wrote a quick test program. This is exactly what is happening."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1455743978, "post_id": 35467208, "comment_id": 58631464, "body": "No, don&#39;t do that. Use a smart pointer. And also your scoping is wrong. C++ temporaries are scoped to the <i>full expression</i> they are contained in, which in most cases means scoped to the statement- <i>not</i> the function."}, {"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "reply_to_user": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1455745394, "post_id": 35467208, "comment_id": 58632314, "body": "@Puppy You&#39;re correct, it is the expression, not the function. I corrected my answer with that. Smart pointers are an option that help to prevent memory leaks, but they are not the only way to fix the problem."}], "tags": [], "owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1455745214, "last_edit_date": 1455745214, "creation_date": 1455741409, "answer_id": 35467208, "question_id": 35466987, "link": "https://stackoverflow.com/questions/35466987/linked-list-not-printing-the-value-what-am-i-doing-wrong/35467208#35467208", "title": "Linked list not printing the value? What am i doing wrong", "body": "<p>It looks like your problem is in SoccerClub.cpp on the line:</p>\n\n<pre><code>player = &amp;Player(subscription); /*store the subscription into player using the constructor*/\n</code></pre>\n\n<p>This is creating a Player object and assigning the address of that object to the pointer <em>player</em>, but at the end of the full expression (by the next line), this object goes out of scope and is destructed. This is not using the memory that you allocated with malloc earlier.</p>\n\n<p>Remove the malloc and use:</p>\n\n<pre><code>player = new Player(subscription);\n</code></pre>\n\n<p>just make sure to call <em>delete</em> later to destruct this object and free up the memory.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 3950834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79fe62a791b9b968eaef89adeb01d712?s=128&d=identicon&r=PG&f=1", "display_name": "bob smith", "link": "https://stackoverflow.com/users/3950834/bob-smith"}, "edited": false, "score": 0, "creation_date": 1455742371, "post_id": 35467356, "comment_id": 58630608, "body": "@ R Sahu should I just leave the Link constructor blank? when using player = new Player();"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 61, "user_id": 3950834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79fe62a791b9b968eaef89adeb01d712?s=128&d=identicon&r=PG&f=1", "display_name": "bob smith", "link": "https://stackoverflow.com/users/3950834/bob-smith"}, "edited": false, "score": 0, "creation_date": 1455742583, "post_id": 35467356, "comment_id": 58630718, "body": "@bobsmith, I didn&#39;t follow that. <code>Player</code> does not have a <code>Link</code>. Please clarify."}, {"owner": {"reputation": 61, "user_id": 3950834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79fe62a791b9b968eaef89adeb01d712?s=128&d=identicon&r=PG&f=1", "display_name": "bob smith", "link": "https://stackoverflow.com/users/3950834/bob-smith"}, "edited": false, "score": 0, "creation_date": 1455742784, "post_id": 35467356, "comment_id": 58630817, "body": "sorry, for player = new Player(). Should I leave Player() arguments blank?."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": -2, "last_activity_date": 1455742475, "last_edit_date": 1455742475, "creation_date": 1455741938, "answer_id": 35467356, "question_id": 35466987, "link": "https://stackoverflow.com/questions/35466987/linked-list-not-printing-the-value-what-am-i-doing-wrong/35467356#35467356", "title": "Linked list not printing the value? What am i doing wrong", "body": "<p>I see couple of problems in the following line (in <code>SoccerClub::AddPlayer</code>):.</p>\n\n<pre><code>player = &amp;Player(subscription); /*store the subscription into player using the constructor*/\n</code></pre>\n\n<ol>\n<li><p>You are storing a pointer to a function local object. The pointer will be a dangling pointer once the function returns.</p></li>\n<li><p>You've just leaked memory from the previous <code>malloc</code> call used\nto allocate memory for player.</p></li>\n</ol>\n\n<p>Other problems I see.</p>\n\n<p>You are using <code>malloc</code> to allocate memory for the objects. That does not initialize the objects properly. The constructors don't get called. You <em>must</em> replace them by calls to <code>new</code>.</p>\n\n<p>E.g.</p>\n\n<p>Replace </p>\n\n<pre><code>player = (struct Player *) malloc(sizeof(struct Player));\n</code></pre>\n\n<p>by</p>\n\n<pre><code>player = new Player(...); // No need to use struct Player, just Player\n                          // Provide the right arguments to the constructors\n</code></pre>\n\n<p>Replace</p>\n\n<pre><code>temp = (struct Link *) malloc(sizeof(struct Link)); /*allocate memory*/\n</code></pre>\n\n<p>by</p>\n\n<pre><code>temp = new Link(...); // No need to use struct Link, just Link\n                      // Provide the right arguments to the constructors\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 3950834, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79fe62a791b9b968eaef89adeb01d712?s=128&d=identicon&r=PG&f=1", "display_name": "bob smith", "link": "https://stackoverflow.com/users/3950834/bob-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1455814292, "creation_date": 1455740672, "last_edit_date": 1455814292, "question_id": 35466987, "link": "https://stackoverflow.com/questions/35466987/linked-list-not-printing-the-value-what-am-i-doing-wrong", "title": "Linked list not printing the value? What am i doing wrong", "body": "<p>i am having trouble debugging my program.For some odd reason I cannot print the value of subscription in my linked list. </p>\n\n<pre><code>/*Player.h\n#ifndef PLAYER_H\n#define PLAYER_H\n\nclass Player\n{   \n    double  subscription; /*value to be stored*/\npublic:\n    Player(); /*default constructor*/\n    Player(double); //double\n    ~Player();\n    double getSubscription(){ return subscription; }\n};\n#endif\n</code></pre>\n"}, {"tags": ["c++", "initialization"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1455740635, "post_id": 35466960, "comment_id": 58629642, "body": "What is unclear about this error message (or, more precisely, warning)?"}, {"owner": {"reputation": 623, "user_id": 650113, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n7lSa.jpg?s=128&g=1", "display_name": "Andy Wiesendanger", "link": "https://stackoverflow.com/users/650113/andy-wiesendanger"}, "edited": false, "score": 1, "creation_date": 1455740653, "post_id": 35466960, "comment_id": 58629654, "body": "Those variables are not initialized, like error says."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455742145, "post_id": 35466960, "comment_id": 58630467, "body": "The <i>first</i> time you get to <code>if (!OnSpeed)</code>, what value does it have? None so far..."}, {"owner": {"reputation": 3971, "user_id": 2921343, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5a6a90bd1c391e3f7aa638134a14481?s=128&d=identicon&r=PG&f=1", "display_name": "Eutherpy", "link": "https://stackoverflow.com/users/2921343/eutherpy"}, "edited": false, "score": 1, "creation_date": 1455742313, "post_id": 35466960, "comment_id": 58630583, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/19106689/uninitialized-local-variable-j-used\">uninitialized local variable &#39;j&#39; used</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3971, "user_id": 2921343, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e5a6a90bd1c391e3f7aa638134a14481?s=128&d=identicon&r=PG&f=1", "display_name": "Eutherpy", "link": "https://stackoverflow.com/users/2921343/eutherpy"}, "is_accepted": true, "score": 1, "last_activity_date": 1455740750, "creation_date": 1455740750, "answer_id": 35467012, "question_id": 35466960, "link": "https://stackoverflow.com/questions/35466960/uninitialized-local-variable-onspeed-used/35467012#35467012", "title": "Uninitialized local variable &#39;OnSpeed&#39; Used", "body": "<p>The message could not be clearer.</p>\n\n<p>In C++, you have to initialize local variables in order to use them. They do not have a default value.</p>\n\n<p>You have to assign a value to <code>OnSpeed</code>, <code>OnBM2</code>, <code>OnCombo</code>, <code>OnNSD</code> first.</p>\n"}], "owner": {"reputation": 3, "user_id": 5942435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BnoRu.jpg?s=128&g=1", "display_name": "RodrigoR", "link": "https://stackoverflow.com/users/5942435/rodrigor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 35467012, "answer_count": 1, "score": -1, "last_activity_date": 1455740750, "creation_date": 1455740554, "last_edit_date": 1592644375, "question_id": 35466960, "link": "https://stackoverflow.com/questions/35466960/uninitialized-local-variable-onspeed-used", "title": "Uninitialized local variable &#39;OnSpeed&#39; Used", "body": "<p><strong>Hello people came here because I have a problem in a code that I'm changing.</strong></p>\n<p><strong>I'm using Visual Studio 2015</strong></p>\n<p>the code is giving this issue</p>\n<blockquote>\n<p>Uninitialized local variable 'OnSpeed' used</p>\n<p>Uninitialized local variable 'OnBM2' used</p>\n<p>Uninitialized local variable 'OnCombo' used</p>\n<p>Uninitialized local variable 'OnNSD' used</p>\n</blockquote>\n<pre><code> #include &lt;windows.h&gt;\n #include &quot;MyCheat.h&quot;\n\n void Start()\n{\n   bool OnSpeed, OnBM2, OnCombo, OnNSD;\n   char * CAPTION = &quot;My Sample DLL&quot;;\n\n   while (true)\n  {\n     //================================ CHANGE NATION      ===================================================\n    if (GetKeyState(VK_F11) &lt; 0) { CHANGE_NATION(); }\n    //==================================================================================================\n\n    //================================ MOVEMENT SPEED ==================================================\n    if (GetKeyState(VK_F12) &lt; 0)\n    {\n        if (!OnSpeed) {\n            OnSpeed = true;\n            MessageBoxA(NULL, &quot;Movement Speed ON&quot;, CAPTION, MB_OK);\n        }\n        else {\n            OnSpeed = false;\n            MOVE_SPEED(450.0);\n            MessageBoxA(NULL, &quot;Movement Speed OFF&quot;, CAPTION, MB_OK);\n        }\n    }\n    //==================================================================================================\n\n    //THIS BM2, COMBO AND NSD IS ONLY WORK IN WIN 7 32BIT AND 64BIT\n\n    //================================ NO COOLDOWN BM2 =================================================\n    if (GetKeyState(VK_F10) &lt; 0)\n    {\n        if (!OnBM2) {\n            OnBM2 = true;\n            MessageBoxA(NULL, &quot;No Cooldown BM2 ON&quot;, CAPTION, MB_OK);\n        }\n        else {\n            OnBM2 = false;\n            MessageBoxA(NULL, &quot;No Cooldown BM2 OFF&quot;, CAPTION, MB_OK);\n        }\n    }\n    //==================================================================================================\n\n    //================================ PERFECT COMBO ===================================================\n    if (GetKeyState(VK_F9) &lt; 0)\n    {\n        if (!OnCombo) {\n            OnCombo = true;\n            MessageBoxA(NULL, &quot;PERFECT COMBO ON&quot;, CAPTION, MB_OK);\n        }\n        else {\n            OnCombo = false;\n            MessageBoxA(NULL, &quot;PERFECT COMBO OFF&quot;, CAPTION, MB_OK);\n        }\n    }\n    //==================================================================================================\n\n    //================================ NO SKILL DELAY ==================================================\n    if (GetKeyState(VK_F8) &lt; 0)\n    {\n        if (!OnNSD) {\n            OnNSD = true;\n            MessageBoxA(NULL, &quot;No Skill Delay ON&quot;, CAPTION, MB_OK);\n        }\n        else {\n            OnNSD = false;\n            MessageBoxA(NULL, &quot;No Skill Delay OFF&quot;, CAPTION, MB_OK);\n        }\n    }\n    //==================================================================================================\n\n    //================================ FREEZING VALUE ==================================================\n    if (OnSpeed) MOVE_SPEED(600.0);\n    if (OnBM2) NOCD_BM2();\n    if (OnCombo) NOCD_COMBO();\n    if (OnNSD) NSD();\n    //==================================================================================================\n\n    Sleep(1);\n}\n</code></pre>\n<p>}</p>\n"}, {"tags": ["c++", "c++11", "design-patterns"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 4, "creation_date": 1455740202, "post_id": 35466799, "comment_id": 58629360, "body": "Have you tried to write code for the solution you suggest?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 3, "creation_date": 1455740314, "post_id": 35466799, "comment_id": 58629439, "body": "In order to decouple <code>C2</code> from how it&#39;s stored, you could give it a function to call that knows how to perform the action."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455740795, "post_id": 35466799, "comment_id": 58629733, "body": "You have to maintain ownership, otherwise you end up in circular references (resource/memory leaks)"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1455753034, "post_id": 35466799, "comment_id": 58635696, "body": "Rather than having your C2 object try to remove itself (which is likely to get messy), how about having a boolean &quot;dead&quot; variable in your C2 object.  When your C2 object wants to go away, it sets the &quot;dead&quot; variable to true, and the other code that looks in the vector knows not to do anything with C2 objects whose &quot;dead&quot; flag is set (except maybe remove them from the vector -- something that can be done whenever is convenient)."}], "answers": [{"tags": [], "owner": {"reputation": 437, "user_id": 3214670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/822c3edc7d842c642172f5f9b98ce3b1?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Smaro\u0144", "link": "https://stackoverflow.com/users/3214670/piotr-smaro%c5%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1455784988, "last_edit_date": 1455784988, "creation_date": 1455784123, "answer_id": 35476310, "question_id": 35466799, "link": "https://stackoverflow.com/questions/35466799/elements-of-container-removing-itselves/35476310#35476310", "title": "Elements of container removing itselves?", "body": "<p>I think that intrusive containers are nice solution to your problem, so if you not necessarily have to use std::vector, then I would suggest to take a look at them (intrusive containers are something close to container of pointers, where each element stores reference to next and previous element, which makes it easy for element to remove itself from container). boost have nice library of intrusive containers, so in case you use it, you won't have to write everything from scratch. Take a look here, to see what are differences between std::vector (non-intrusive container) and intrusive containers: <a href=\"http://www.boost.org/doc/libs/1_35_0/doc/html/intrusive/intrusive_vs_nontrusive.html\" rel=\"nofollow\">http://www.boost.org/doc/libs/1_35_0/doc/html/intrusive/intrusive_vs_nontrusive.html</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 0, "last_activity_date": 1455785695, "creation_date": 1455785695, "answer_id": 35476782, "question_id": 35466799, "link": "https://stackoverflow.com/questions/35466799/elements-of-container-removing-itselves/35476782#35476782", "title": "Elements of container removing itselves?", "body": "<p>As @JeremyFriesner suggests, one solution is to construct C2 objects with callback functions for removal - but you have to be careful not to destruct the object while its method code is running (well, you might be able to pull this off but it's somewhat dangerous). Maybe some tricks with holding onto a shared_ptr would help (or maybe not).</p>\n\n<p>Also, instead of a callback function you could have C2's assume they're contained in vectors, or other similar containers, and just have them store a (plain? weak?) pointer to the vector.</p>\n\n<p>Finally, and I hate to do this, but - are you absolutely sure you need to have C2s remove themselves from the vector? That is, are you sure the semantics of the classes requires it, and it can't be the (simpler) case of C1 removing them? The answer you provide yourself might also give you a direction for how to implement the removal mechanism.</p>\n"}], "owner": {"reputation": 1263, "user_id": 2466619, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b48616162f6ad348a0c242b57ff381f?s=128&d=identicon&r=PG", "display_name": "peter55555", "link": "https://stackoverflow.com/users/2466619/peter55555"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455785695, "creation_date": 1455739985, "last_edit_date": 1455740321, "question_id": 35466799, "link": "https://stackoverflow.com/questions/35466799/elements-of-container-removing-itselves", "title": "Elements of container removing itselves?", "body": "<p>I have a class:</p>\n\n<pre><code>class C1 {\n    std::vector&lt;C2&gt; vec;\n};\n</code></pre>\n\n<p>I'd like to implement C1 and C2 class that element in vector (of C2 class) can cause removing itself from container vec. How to do this best? </p>\n\n<p>Maybe I can pass reference to C1 class to C2 class and call method in C1 to remove this element. Is it nice solution? How to do that in C++11?</p>\n\n<p>(C1 is the only one class in the program)</p>\n"}, {"tags": ["c++", "tree", "deep-copy"], "comments": [{"owner": {"reputation": 1554, "user_id": 3250971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2840796a62fdc1c1368d6b0977cef34?s=128&d=identicon&r=PG&f=1", "display_name": "WhatsUp", "link": "https://stackoverflow.com/users/3250971/whatsup"}, "edited": false, "score": 0, "creation_date": 1455740695, "post_id": 35466750, "comment_id": 58629683, "body": "<code>int childCount()</code> declares a MEMBER FUNCTION, which is not your intention, I guess. Idem for <code>Node * parent()</code> and <code>Node * child(int row)</code>."}, {"owner": {"reputation": 2018, "user_id": 789505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6bc1d6aeb2a49f810f8d68d70c84f4?s=128&d=identicon&r=PG&f=1", "display_name": "Monkpit", "link": "https://stackoverflow.com/users/789505/monkpit"}, "edited": false, "score": 0, "creation_date": 1455742301, "post_id": 35466750, "comment_id": 58630575, "body": "If you have attempted the problem yourself, post the code so someone can guide you in the right direction."}, {"owner": {"reputation": 37, "user_id": 246517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd7efea2d0ebc227ce06250aa50ffa2?s=128&d=identicon&r=PG", "display_name": "tosspot", "link": "https://stackoverflow.com/users/246517/tosspot"}, "reply_to_user": {"reputation": 2018, "user_id": 789505, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6bc1d6aeb2a49f810f8d68d70c84f4?s=128&d=identicon&r=PG&f=1", "display_name": "Monkpit", "link": "https://stackoverflow.com/users/789505/monkpit"}, "edited": false, "score": 1, "creation_date": 1455743878, "post_id": 35466750, "comment_id": 58631402, "body": "No problem, thanks @Monkpit"}], "owner": {"reputation": 37, "user_id": 246517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cd7efea2d0ebc227ce06250aa50ffa2?s=128&d=identicon&r=PG", "display_name": "tosspot", "link": "https://stackoverflow.com/users/246517/tosspot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1537344499, "creation_date": 1455739841, "last_edit_date": 1537344499, "question_id": 35466750, "link": "https://stackoverflow.com/questions/35466750/c-copy-branch-of-n-ary-tree", "title": "c++ copy branch of n-ary tree", "body": "<p>I have a n-ary tree structure. I would like to recursively copy a branch to another branch. How do I go about achieving this. Each node has the following structure</p>\n\n<pre><code>class Node\n{\npublic:\n     Node();\n     void insertChild(Node *child);\n     Node *child(int row);\n     int childCount();\n     Node *parent();\n};\n</code></pre>\n\n<p>Each node in the tree has a pointer to its parent and a list of pointers to its children.</p>\n\n<p>I have a copy routine for the node, it is the recursion that is the stumbling block.</p>\n\n<pre><code>void cloneBranch(Node *source, Node *target)\n{\n    for(int child = 0; child &lt; source-&gt;childCount(); ++child)\n    {\n        Node *node = copy(source-&gt;child(child));\n        target-&gt;insertChild(node);\n        cloneBranch(source-&gt;child(child), node);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "iterator"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455740003, "post_id": 35466623, "comment_id": 58629245, "body": "Interesting fun fact: TCP don&#39;t give a crap that you&#39;re feeding it chunks of 8 bytes. It will buffer those chunks and send what it wants, when it wants."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1455740563, "post_id": 35466623, "comment_id": 58629591, "body": "This looks like a lot of work to do something simple. <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow noreferrer\">std::istream::read()</a> was designed for this."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1455740666, "post_id": 35466623, "comment_id": 58629665, "body": "Also what happens if the file size is not divisible by 8? Iterators would fail to read the last part of the file in that scenario."}, {"owner": {"reputation": 621, "user_id": 4968804, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/429dd943ccef708583cf1c328c2ce62b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4968804/mike"}, "edited": false, "score": 0, "creation_date": 1455740794, "post_id": 35466623, "comment_id": 58629732, "body": "I have to add some header for each block. Algorithm like so: 1. read 8 bytes from file - add to them header - send it. 2. read next 8 bytes - add header - send ... until the end of the file."}, {"owner": {"reputation": 621, "user_id": 4968804, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/429dd943ccef708583cf1c328c2ce62b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4968804/mike"}, "edited": false, "score": 0, "creation_date": 1455740876, "post_id": 35466623, "comment_id": 58629780, "body": "Galik, if file is not  divisible by 8 then the last massage will not equal 8 bytes."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1455740328, "post_id": 35466814, "comment_id": 58629449, "body": "Not sure you want to use exceptions here. To be honest, not sure you want to use <code>istream_iterator&lt;char&gt;</code>, either. <code>istream_iterator&lt;OP&#39;sUnspecified8ByteStruct&gt;</code> is probably a better fit. But it&#39;s coming out of a file so endian and other nastiness needs to be accounted for and <code>istream_iterator</code> won&#39;t do that."}, {"owner": {"reputation": 584, "user_id": 2639398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af0cf25bed0d359dce19de12cfcd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Curve25519", "link": "https://stackoverflow.com/users/2639398/curve25519"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1455740635, "post_id": 35466814, "comment_id": 58629640, "body": "@user4581301 hypothetically, you are right. I just simplified it to the most default concert solution. The logic behind my decisions were that C++ is an exception based language and char is the type used in fstream."}], "tags": [], "owner": {"reputation": 584, "user_id": 2639398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2af0cf25bed0d359dce19de12cfcd9e?s=128&d=identicon&r=PG&f=1", "display_name": "Curve25519", "link": "https://stackoverflow.com/users/2639398/curve25519"}, "is_accepted": false, "score": 4, "last_activity_date": 1455741313, "last_edit_date": 1455741313, "creation_date": 1455740032, "answer_id": 35466814, "question_id": 35466623, "link": "https://stackoverflow.com/questions/35466623/iterator-for-read-binary-file/35466814#35466814", "title": "Iterator for read binary file", "body": "<p>Yes you can! </p>\n\n<p>You can use fstream with istream_iterator, like so:</p>\n\n<pre><code>auto f = std::ifstream(\"lol.bin\", std::ios::binary | std::ios::in);\nf.exceptions(std::ios::badbit);\nfor (auto start = std::istream_iterator&lt;char&gt;{ f }, end = std::istream_iterator&lt;char&gt;{}; start != end; ++start)\n{\n    ...\n}\n</code></pre>\n\n<p><strong>Edit:</strong>\nI haven't notice you asked for 8 bytes block. The way you can solve it is like this:</p>\n\n<p>First define an operator>> for example:</p>\n\n<pre><code>struct My8Bytes {\n    char bytes[8];\n};\n\nstd::istream&amp; operator&gt;&gt;(std::istream&amp; s, My8Bytes&amp; bytes) {\n    s.read(bytes.bytes, sizeof(bytes.bytes));\n    return s;\n}\n</code></pre>\n\n<p>and than use the the iterator the same way as before, only now with your specific type:</p>\n\n<pre><code>for (auto start = std::istream_iterator&lt;My8Bytes&gt;{ f }, end = std::istream_iterator&lt;My8Bytes&gt;{}; start != end; ++start)\n{\n    ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 621, "user_id": 4968804, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/429dd943ccef708583cf1c328c2ce62b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4968804/mike"}, "edited": false, "score": 0, "creation_date": 1455743255, "post_id": 35467393, "comment_id": 58631073, "body": "Yeap I think about something like that you&#39;ve written. But, probable I&#39;ll make by different way, In class I write method which will return bool state: true - there is some block, false - there is no any blocks. And it method also will be take variable in which will be written block from file with header."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 0, "last_activity_date": 1455742029, "last_edit_date": 1490005770, "creation_date": 1455742029, "answer_id": 35467393, "question_id": 35466623, "link": "https://stackoverflow.com/questions/35466623/iterator-for-read-binary-file/35467393#35467393", "title": "Iterator for read binary file", "body": "<p><a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">I see this as an X-Y problem.</a> Yes, it can be done with an iterator, but iterators aren't the best fit solution for this job. Using an iterator for this is an interesting educational experience, but going old school solves this problem with almost zero fuss and much easier error resolution.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\n// simple 8 byte struct\nstruct EightByteStruct\n{\n    uint32_t a;\n    uint32_t b;\n};\n\n// quick hack send routine. Added capacity for some simple error checking.\nbool sendTcp(EightByteStruct &amp; test)\n{\n    bool rval = false;\n    // send test. Set rval true if success\n    return rval;\n}\n\n//main event: read file into struct, write struct to socket\nint main()\n{\n    std::ifstream in(\"filename\", std::ios::binary);\n    EightByteStruct test;\n    while (in.read((char*)&amp;test, sizeof(test)))\n    { // will not enter if sizeof(test) bytes not read from file\n        if (sendTcp(test))\n        {\n            // handle send error\n        }\n    }\n    // test here for any file error conditions you wish to have special handling\n}\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 4968804, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/429dd943ccef708583cf1c328c2ce62b?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/4968804/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1576, "favorite_count": 1, "accepted_answer_id": 35467393, "answer_count": 2, "score": 1, "last_activity_date": 1455742029, "creation_date": 1455739414, "last_edit_date": 1455740157, "question_id": 35466623, "link": "https://stackoverflow.com/questions/35466623/iterator-for-read-binary-file", "title": "Iterator for read binary file", "body": "<p>I have to read some binary file in blocks of 8 bytes and then send those blocks by tcp socket.\nCan I use C++ iterator for this task? Like:</p>\n\n<pre><code> FileIterator file(\"name_file.bin\");\n\nfor(iter = file.begin(); iter != file.end(); iter++) {\n    sendTcp(iter);\n}\n</code></pre>\n\n<p>Class <code>FileIterator</code> has to return some struct which will be sent.\nIn constructor of <code>FileIterator</code> I open binary file and read it. Then I create dinamic array and write in it file's content. And in each step iterator I have to read next block from array and write it in struct and return.</p>\n"}, {"tags": ["c++", "multithreading", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1455739874, "post_id": 35466600, "comment_id": 58629157, "body": "What is the output you&#39;re expecting to take place? Everything looks like it&#39;s happening in the correct order, from my perspective."}, {"owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1455740065, "post_id": 35466600, "comment_id": 58629287, "body": "@Xirema - please see my edit to question above.I have explained what I would expect to happen."}], "answers": [{"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1455740310, "creation_date": 1455740310, "answer_id": 35466883, "question_id": 35466600, "link": "https://stackoverflow.com/questions/35466600/boosasio-async-wait-seems-to-be-blocking/35466883#35466883", "title": "boos::asio async_wait seems to be blocking", "body": "<p>The <code>async_wait</code> function isn't blocking, <code>run</code> is. That's <code>run</code>'s job. If you don't want a thread to block in the io_service's processing loop, don't have that thread call <code>run</code>.</p>\n\n<p>The <code>async_wait</code> function doesn't create any threads. That would make it expensive and make it much harder to control the number of threads servicing the io_service.</p>\n\n<p>Your expectation is unreasonable because returning from <code>main</code> terminates the process. So who or what would wait for the timer?</p>\n"}, {"comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "edited": false, "score": 1, "creation_date": 1455741117, "post_id": 35466905, "comment_id": 58629913, "body": "@liv2hak I wrote a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda expression</a> to quickly model the creation of a thread without going through the effort of constructing and binding a function pointer. In this case, the <code>[&amp;]</code> is indicating that any variables I reference inside the lambda that aren&#39;t locally declared are meant to be captured, and specifically, captured by reference (as opposed to <code>[=]</code>, which would have meant I wanted to capture by value)."}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 5, "last_activity_date": 1455740383, "creation_date": 1455740383, "answer_id": 35466905, "question_id": 35466600, "link": "https://stackoverflow.com/questions/35466600/boosasio-async-wait-seems-to-be-blocking/35466905#35466905", "title": "boos::asio async_wait seems to be blocking", "body": "<p>The <code>io.run();</code> statement is the key to explaining the difference between the output you're getting and the output you're expecting.</p>\n\n<p>In the ASIO framework, any asynchronous commands need to have a dedicated thread to run the callbacks upon. But because ASIO is relatively low-level, it expects you to provide the thread yourself.</p>\n\n<p>As a result, what you're doing when you call <code>io.run();</code> within the main thread is to specify to the framework that you intend to run all asynchronous commands on the main thread. That's acceptable, but that also means that the program will block on <code>io.run();</code>.</p>\n\n<p>If you intend the commands to run on a separate thread, you'll have to write something like this:</p>\n\n<pre><code>std::thread run_thread([&amp;]() {\n    io.run();\n});\n\nstd::cout &lt;&lt; \"Just called io.run() \" &lt;&lt; std::endl;                                                                                                                                                             \n\nstd::cout &lt;&lt; \"Final count is \" &lt;&lt; count &lt;&lt; std::endl;\n\nrun_thread.join();\n\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "accepted_answer_id": 35466883, "answer_count": 2, "score": 2, "last_activity_date": 1455740383, "creation_date": 1455739357, "last_edit_date": 1455740031, "question_id": 35466600, "link": "https://stackoverflow.com/questions/35466600/boosasio-async-wait-seems-to-be-blocking", "title": "boos::asio async_wait seems to be blocking", "body": "<p>I was learning boost asio documentation.I came across this <code>deadline_timer</code> example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/bind.hpp&gt;\n#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;\n\n\n/*This timer example shows a timer that fires once every second.*/\n\nvoid print(const boost::system::error_code&amp; e, boost::asio::deadline_timer* t, int* count)\n{\n    if (*count &lt; 5)\n    {   \n        std::cout &lt;&lt; *count &lt;&lt; std::endl;\n        ++(*count);\n\n        t-&gt;expires_at(t-&gt;expires_at() + boost::posix_time::seconds(1));\n\n        t-&gt;async_wait(boost::bind(print,boost::asio::placeholders::error, t, count));\n    }   \n}\n\nint main()\n{\n    boost::asio::io_service io; \n\n    int count = 0;\n\n    boost::asio::deadline_timer t(io, boost::posix_time::seconds(10));\n\n    auto myfunc = boost::bind(print, boost::asio::placeholders::error, &amp;t ,&amp;count);\n    t.async_wait(myfunc);\n\n    std::cout &lt;&lt; \"async wait \" &lt;&lt; std::endl;\n\n    io.run();\n\n    std::cout &lt;&lt; \"Just called io.run() \" &lt;&lt; std::endl;                                                                                                                                                             \n\n    std::cout &lt;&lt; \"Final count is \" &lt;&lt; count &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>The <code>async_wait()</code> function seems to be blocking (i.e waiting for the 10 second timer to expire) </p>\n\n<p>The output from the above program is as follows.</p>\n\n<pre><code>async wait \n0\n1\n2\n3\n4\nJust called io.run() \nFinal count is 5\n</code></pre>\n\n<p>I would expect an async_wait() to create a separate thread and wait for the timer to expire there meanwhile executing the main thread.</p>\n\n<p>i.e I would expect the program to print </p>\n\n<pre><code>Just called io.run() \nFinal count is 5\n</code></pre>\n\n<p>while waiting for the timer to expire.? Is my understanding wrong?</p>\n\n<p>This is my understanding of async_wait(). This implementation looks more like a <code>blocking wait</code>. Is my understanding wrong? What am I missing?</p>\n"}, {"tags": ["c++", "multithreading", "stdthread"], "comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1455740292, "post_id": 35466550, "comment_id": 58629422, "body": "There are too many avenues for the calling code to cause problems that it&#39;s really impossible to answer this question."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1455740344, "post_id": 35466550, "comment_id": 58629460, "body": "When you start a thread performing a function, all of the local variables in that function will be thread local (ie each thread has its own copy). If the thread is referencing class variables, if one class has multiple running threads than the class variables are common between those threads and you&#39;ll need the appropriate mutexes/semaphores/synchronization to ensure multiple threads aren&#39;t stepping on each other."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1455741614, "post_id": 35466550, "comment_id": 58630181, "body": "Thanks. I understand that is the case. I&#39;m trying to understand how it actually works deep down. When main() is called, it sets up the main() stack frame, then on creation of the object and creating different threads and calling different functions, the stack must grow with different stack frames. How can they access the same variables? So the member variables are like global variables in this case."}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1455742469, "post_id": 35466550, "comment_id": 58630654, "body": "Are you asking how to share data between threads?  It&#39;s very unclear what you are actually asking.  It seems, to me at least, that you are asking why these variables are being shared when they should not be.  That cannot be told from the code you have shared so far."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1455743185, "post_id": 35466550, "comment_id": 58631035, "body": "@Engineer999 each thread calls a function which gets added to that threads stack, all local variables to that function exist on that threads stack and are independent. All class members of the object exist on the stack that created the object and have a distinct memory location. All of the threads are in the same virtual address space, and can reference that location (despite it being a part of another stack). This is why when you pass a local variable to a function via reference, it still works even though the variable exists in a different frame on that stack."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1455744634, "post_id": 35466550, "comment_id": 58631854, "body": "Thanks RyanP. Good explanation"}], "answers": [{"comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1455739832, "post_id": 35466703, "comment_id": 58629136, "body": "This does <i>nothing</i> to answer the question that was actually asked."}, {"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1455740478, "post_id": 35466703, "comment_id": 58629547, "body": "The constructor return type was a typo. Sorry. Yes , I understand that. 2 different objects will have different copies of member variables, but in my case, I don&#39;t want that. I am just curious as to what is going on in memory"}, {"owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1455740946, "post_id": 35466703, "comment_id": 58629826, "body": "@mah for me it is not obvious that what I wrote is not answering OPs question, but I added information which might be what he is looking for."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1455741519, "post_id": 35466703, "comment_id": 58630132, "body": "@alex you might want to re-read his question. It&#39;s pretty clear that he&#39;s talking about a single object with multiple threads -- spelled out quite plainly in the top of his second paragraph. (In addition, the OP commented here regarding your answer.) He&#39;s trying to understand why the threads are accessing member variables of the same object rather than copies on different stacks -- something which would never be questioned if he were dealing with separate objects to begin with."}, {"owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1455741848, "post_id": 35466703, "comment_id": 58630310, "body": "@mah I have been misled by the provided code which creates exactly one thread per instance of MyClass."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1455742277, "post_id": 35466703, "comment_id": 58630564, "body": "@alex even with creation of one thread, there&#39;s still the main thread that perofrmed the creation -- so there are at least two threads that can access the object ;)"}], "tags": [], "owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "is_accepted": false, "score": 0, "last_activity_date": 1455742126, "last_edit_date": 1455742126, "creation_date": 1455739662, "answer_id": 35466703, "question_id": 35466550, "link": "https://stackoverflow.com/questions/35466550/multiple-threads-inside-class-accessing-data/35466703#35466703", "title": "Multiple threads inside class accessing data", "body": "<p>If you have</p>\n\n<pre><code>MyClass c1;\nMyClass c2;\n</code></pre>\n\n<p>then there will be two instances of MyClass, c1 and c2, each with its own members. The thread started during construction of c1 will have access to c1's members only and the thread started in c2 will have access to c2's members only.</p>\n\n<p>If you are talking about several threads within one class (not obvious from your code), then each thread has a copy of <code>this</code> which is just a pointer to your MyClass object. New (local) variables will be allocated on the thread's stack and will be visible only for the thread which creates them.</p>\n"}, {"tags": [], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1455741211, "creation_date": 1455741211, "answer_id": 35467152, "question_id": 35466550, "link": "https://stackoverflow.com/questions/35466550/multiple-threads-inside-class-accessing-data/35467152#35467152", "title": "Multiple threads inside class accessing data", "body": "<blockquote>\n  <p>I've read that different threads share the same memory segments apart from the stack. [...] If every thread gets its own stack, why doesn't each thread get a copy of the member variables rather than access to the same variable. </p>\n</blockquote>\n\n<p>Hmm... the short answer is, that's the purpose for which threads were designed: multiple threads of execution, all accessing the same data. Then you have threading primitives - like mutexes - to make sure that they don't step on each others' toes, so to speak - that you don't have concurrent writes, for example. </p>\n\n<p>Thus in the default case, threads share objects, and you have to do extra work to synchronize accesses. If you want threads to each have copies of objects... then you can instead write the code to give each thread a copy of the object, instead of the same object. Or, you may consider using processes (e.g. via <code>fork()</code>) instead of threads.</p>\n"}, {"comments": [{"owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "edited": false, "score": 0, "creation_date": 1455745214, "post_id": 35467671, "comment_id": 58632196, "body": "Awesome. Just what I was looking for . Thanks"}], "tags": [], "owner": {"reputation": 2012, "user_id": 5397911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a072ff6221030c46750c7e994f484e50?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamad Elghawi", "link": "https://stackoverflow.com/users/5397911/mohamad-elghawi"}, "is_accepted": false, "score": 3, "last_activity_date": 1455744157, "last_edit_date": 1455744157, "creation_date": 1455742890, "answer_id": 35467671, "question_id": 35466550, "link": "https://stackoverflow.com/questions/35466550/multiple-threads-inside-class-accessing-data/35467671#35467671", "title": "Multiple threads inside class accessing data", "body": "<blockquote>\n  <p>I've read that different threads share the same memory segments apart\n  from the stack.</p>\n</blockquote>\n\n<p>This is not entirely accurate. Threads share the same address space as opposed to being sand-boxed like processes are.</p>\n\n<p>The stack is just some memory in your application that has been specifically reserved and is used to hold things such as function parameters, local variables, and other function-related information.</p>\n\n<p>Every thread has it's own stack. This means that when a particular thread is executing, it will use it's own specific stack to avoid trampling over other threads which might be idle or executing simultaneously in a multi-core system.</p>\n\n<p>Remember that these <em>stacks</em> are all still inside <strong>the same address space</strong> which means that any thread can access the contents of another threads' stack.</p>\n\n<p>A simple example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nvoid Foo(int&amp; i)\n{\n    // if thread t is executing this function then j will sit inside thread t's stack\n    // if we call this function from the main thread then j will sit inside the main stack\n    int j = 456;\n\n    i++; // we can see i because threads share the same address space\n}\n\nint main()\n{\n    int i = 123; // this will sit inside the main threads' stack\n\n    std::thread t(std::bind(&amp;Foo, std::ref(i))); // we pass the address of i to our thread\n    t.join();\n\n    std::cout &lt;&lt; i &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>An illustration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FktZN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FktZN.jpg\" alt=\"enter image description here\"></a>></p>\n\n<p>As you can see, each thread has its own stack (which is just some part of the processes' memory) which lives inside the same address space.</p>\n"}], "owner": {"reputation": 3037, "user_id": 4768946, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/dca1cd14f29e197b1547ac5127218d95?s=128&d=identicon&r=PG&f=1", "display_name": "Engineer999", "link": "https://stackoverflow.com/users/4768946/engineer999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3645, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1455744157, "creation_date": 1455739229, "last_edit_date": 1455740381, "question_id": 35466550, "link": "https://stackoverflow.com/questions/35466550/multiple-threads-inside-class-accessing-data", "title": "Multiple threads inside class accessing data", "body": "<p>I've read that different threads share the same memory segments apart from the stack. There is something i've been trying to understand. I have a class which creates different threads. Below is a simple example of what I am doing, creating one thread in the constructor.</p>\n\n<p>When an object of this class is created, in main() for example, all the threads can access the same member variables. If every thread gets its own stack, why doesn't each thread get a copy of the member variables rather than access to the same variable. I have looked around and I'm trying to get a picture in my mind of what is going on in memory here with the different stack frames. Many thanks in advance for any replies.  </p>\n\n<pre><code>////////////////////////    \nMyClass::MyClass()\n{\n    t1 = std::thread([this] { this-&gt;threadFunc(); });\n    t1.detach();\n\n}\n\n/////////////////////////\n\nvoid MyClass::threadFunc()\n{\n    ///do stuff.. update member variables etc.\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "c++11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1455737913, "post_id": 35466091, "comment_id": 58627903, "body": "You need to escape backslashes."}, {"owner": {"reputation": 211, "user_id": 3292596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5636e5facca8ed84ea95f2e9a341b89?s=128&d=identicon&r=PG&f=1", "display_name": "Punkster", "link": "https://stackoverflow.com/users/3292596/punkster"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455738198, "post_id": 35466091, "comment_id": 58628089, "body": "I have tried both but it is still failing. I am still getting the same error"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455738509, "post_id": 35466091, "comment_id": 58628282, "body": "Using raw-string: <code>r1(R&quot;(^[\\s]*{[\\s]*\\n)&quot;)</code> may help."}, {"owner": {"reputation": 211, "user_id": 3292596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5636e5facca8ed84ea95f2e9a341b89?s=128&d=identicon&r=PG&f=1", "display_name": "Punkster", "link": "https://stackoverflow.com/users/3292596/punkster"}, "edited": false, "score": 0, "creation_date": 1455741251, "post_id": 35466091, "comment_id": 58629981, "body": "Nope.It didnt work either"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1455741638, "post_id": 35466091, "comment_id": 58630190, "body": "What is the input string that fails? What is expected behavior?"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1455742009, "post_id": 35466091, "comment_id": 58630385, "body": "I think you need to also escape the <code>{</code> character. See <a href=\"https://ideone.com/rLH7Yb\" rel=\"nofollow noreferrer\">ideone.com/rLH7Yb</a>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1455743402, "post_id": 35466091, "comment_id": 58631161, "body": "I reopened the question as the <a href=\"http://stackoverflow.com/questions/15998482/regex-w-escaping-in-c11\"><i>Regex \\w escaping in C++11</i></a> does not help answering this question. Question title is edited to reflect the real issue OP has."}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1455743333, "creation_date": 1455743333, "answer_id": 35467803, "question_id": 35466091, "link": "https://stackoverflow.com/questions/35466091/how-to-match-a-string-with-an-opening-brace-in-c-regex/35467803#35467803", "title": "How to match a string with an opening brace { in C++ regex", "body": "<p>See <a href=\"http://www.cplusplus.com/reference/regex/basic_regex/\" rel=\"nofollow\"><code>basic_regex</code> reference</a>:</p>\n\n<blockquote>\n  <p>By default, regex patterns follow the <code>ECMAScript syntax</code>.</p>\n</blockquote>\n\n<p><a href=\"http://www.cplusplus.com/reference/regex/ECMAScript/\" rel=\"nofollow\">ECMAScript syntax reference</a> states:</p>\n\n<blockquote>\n  <p><strong>characters</strong>:\n  <code>\\</code><em>character</em> <br/>\n  <strong>description</strong>: <em>character</em><br>\n  <strong>matches</strong>: the character character as it is, without interpreting its special meaning within a regex expression.\n  Any character can be escaped except those which form any of the special character sequences above.\n  <strong><em>Needed for: <code>^</code> <code>$</code> <code>\\</code> <code>.</code> <code>*</code> <code>+</code> <code>?</code> <code>(</code> <code>)</code> <code>[</code> <code>]</code> <code>{</code> <code>}</code> <code>|</code></em></strong></p>\n</blockquote>\n\n<p>So, you need to escape <code>{</code> to get the code working:</p>\n\n<pre><code>std::string s(\"\\r\\n  { \\r\\nSome text here\");\nregex r1(R\"(^\\s*\\{\\s*\\n)\");\nregex r2(R\"(^\\s*\\{\\s*//.*\\n)\");\nstd::string newtext = std::regex_replace( s, r1, \"\" );\nstd::cout &lt;&lt; newtext &lt;&lt; std::endl;\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/rLH7Yb\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>Also, note how the <code>R\"(pattern_here_with_single_escaping_backslashes)\"</code> raw string literal syntax simplifies a regex declaration.</p>\n"}], "owner": {"reputation": 211, "user_id": 3292596, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b5636e5facca8ed84ea95f2e9a341b89?s=128&d=identicon&r=PG&f=1", "display_name": "Punkster", "link": "https://stackoverflow.com/users/3292596/punkster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 35467803, "answer_count": 1, "score": 1, "last_activity_date": 1455743333, "creation_date": 1455737800, "last_edit_date": 1455743298, "question_id": 35466091, "link": "https://stackoverflow.com/questions/35466091/how-to-match-a-string-with-an-opening-brace-in-c-regex", "title": "How to match a string with an opening brace { in C++ regex", "body": "<p>I have about writing regexes in C++. I have 2 regexes which work fine in java. But these throws an error namely</p>\n\n<pre><code> one of * + was not preceded by a valid regular expression C++\n</code></pre>\n\n<p>These regexes are as follows:</p>\n\n<pre><code> regex r1(\"^[\\s]*{[\\s]*\\n\"); //Space followed by '{' then followed by spaces and '\\n'\n regex r2(\"^[\\s]*{[\\s]*\\/\\/.*\\n\") // Space followed by '{' then by  '//' and '\\n'\n</code></pre>\n\n<p>Can someone help me how to fix this error or re-write these regex in C++?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1455738987, "post_id": 35466073, "comment_id": 58628592, "body": "<code>%S</code> is not the right format specifier for <code>VARIANT</code>, and <code>%s</code> is not the right format specifier for <code>BSTR</code>.  If you use the wrong format specifier you get undefined behaviour."}, {"owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455739851, "post_id": 35466073, "comment_id": 58629149, "body": "@M.M Please mention the right format specifier."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455739982, "post_id": 35466073, "comment_id": 58629229, "body": "There is none for Variant, so far as I know.  <code>%S</code> is the specifier for <code>wchar_t</code>.  But since you used <code>SysAllocStringByteLen</code> I think you should write <code>sprintf_s(buff, &quot;Head: %s&quot;, (char *)Heads);</code> ."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455740314, "post_id": 35466073, "comment_id": 58629440, "body": "The documentation says <code>SysAllocStringByteLen</code> creates a copy of the bytes, with no translation to Unicode. Then treating it as a Unicode string produces garbage. For modern Windows programming just use the basic wide string functions."}, {"owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455741231, "post_id": 35466073, "comment_id": 58629969, "body": "@Cheersandhth.-Alf Can you show me more clue or example or how may i convert vector string to usable BSTR Value."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455741823, "post_id": 35466073, "comment_id": 58630292, "body": "Depends on the encoding of the <code>string</code>. Assuming it&#39;s ANSI you can use <a href=\"http://stackoverflow.com/a/17066676/464581\">stackoverflow.com/a/17066676/464581</a> Disclaimer: I haven&#39;t scrutinized the code."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455741872, "post_id": 35466073, "comment_id": 58630317, "body": "<code>SysAllocStringByteLen</code> is more intended to be used when transporting binary data via BSTRs"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1455741879, "post_id": 35466073, "comment_id": 58630322, "body": "@M.M. No there is no automatic conversion <code>string</code> \u2192 <code>wstring</code>."}, {"owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "edited": false, "score": 0, "creation_date": 1455742501, "post_id": 35466073, "comment_id": 58630672, "body": "So someone say me how would i transfer string to bstr actually then."}, {"owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455742717, "post_id": 35466073, "comment_id": 58630786, "body": "@Cheers and hth. - Alf error C2664: &#39;MultiByteToWideChar&#39; : cannot convert parameter 3 from &#39;std::basic_string&lt;_Elem,_Traits,_Ax&gt;&#39; to &#39;LPCSTR&#39;."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455743237, "post_id": 35466073, "comment_id": 58631063, "body": "@Toe.Pal: <code>LPCSTR</code> is Microsoft-speak for <code>char const*</code>. If you&#39;re using Visual Studio than you can probably just hover the mouse cursor over the word to get a definition. Or &quot;peek definition&quot;."}, {"owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455745056, "post_id": 35466073, "comment_id": 58632099, "body": "@Cheersandhth.-Alf Your link stackoverflow.com/a/17066676/464581 helped me. thanks. but by adding &#39;.c_str()&#39; to string datat type."}], "owner": {"reputation": 1, "user_id": 5942287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81cb7c1c871e5279a982ab37dcb6da99?s=128&d=identicon&r=PG&f=1", "display_name": "Toe.Pal", "link": "https://stackoverflow.com/users/5942287/toe-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455737742, "creation_date": 1455737742, "question_id": 35466073, "link": "https://stackoverflow.com/questions/35466073/c-converstion-of-bstr-fails", "title": "c++ Converstion of BSTR Fails", "body": "<p>I want to convert a vector string to BSTR and to V_BSTR but when i debug the output it shows some strange output. Below is the code which am trying.</p>\n\n<pre><code>vector&lt;string&gt; v = explode(\"*\", Types);\n\nVARIANT vHeads = { 0 };\nBSTR Heads = SysAllocStringByteLen(v[0].c_str(), v[0].size());\nV_VT( &amp;vHeads ) = VT_BSTR;\nV_BSTR( &amp;vHeads ) = Heads;\n\nchar buff[1024];\nsprintf_s(buff, \"Vhead: %S And Head: %s\", vHeads,Heads);\nMessageBoxA(NULL, buff, \"Debug\", MB_OK | MB_ICONQUESTION);\n</code></pre>\n\n<p>The vhead output is some weird output but heads output is as expected.\nCan someone say what's wrong?</p>\n"}, {"tags": ["c++", "arrays", "string", "multidimensional-array", "variable-length"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1455737742, "post_id": 35466016, "comment_id": 58627770, "body": "In c++ you would never do it that way. You would use std::string."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 3, "creation_date": 1455737757, "post_id": 35466016, "comment_id": 58627786, "body": "The C++ way to do this is a <code>std::array</code> or <code>std::vector</code> of <code>std::string</code>. Otherwise you would need to have a fixed and oversized buffer or use a ragged array."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1455738141, "post_id": 35466016, "comment_id": 58628059, "body": "character-specific operations in <code>std::string</code> is usually pretty easy. Use the <code>[]</code> operator to get the character and go to town. That said, there is often a better way to do it with <a href=\"http://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\">std::transform</a>"}, {"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1455738389, "post_id": 35466016, "comment_id": 58628204, "body": "To clarify, you <i>could</i> work without <code>std::string</code>, but you&#39;d be reinventing the wheel -- likely with error, but it&#39;s a great learning experience."}, {"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 0, "creation_date": 1455740327, "post_id": 35466016, "comment_id": 58629446, "body": "what did you actually try so far?"}], "answers": [{"tags": [], "owner": {"reputation": 14429, "user_id": 3494013, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/ff6b6de2f59471e271413f74921e054a?s=128&d=identicon&r=PG&f=1", "display_name": "cadaniluk", "link": "https://stackoverflow.com/users/3494013/cadaniluk"}, "is_accepted": false, "score": 3, "last_activity_date": 1455738740, "last_edit_date": 1495542670, "creation_date": 1455738740, "answer_id": 35466400, "question_id": 35466016, "link": "https://stackoverflow.com/questions/35466016/how-can-i-enter-strings-of-different-length-in-a-2d-char-array-in-c/35466400#35466400", "title": "How can I enter strings of different length in a 2d char array in C++?", "body": "<p>The C++ standard library provides the class <a href=\"http://www.cplusplus.com/reference/string/string/\" rel=\"nofollow noreferrer\"><code>std::string</code></a>, which you should opt for as opposed to <code>char*</code>, <code>char[]</code>, and that C-ish, unsafe stuff.</p>\n\n<p>You then read into these strings (in your case) from the <a href=\"http://www.cplusplus.com/reference/iostream/cin/\" rel=\"nofollow noreferrer\"><code>std::cin</code></a> input stream using either <a href=\"http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/\" rel=\"nofollow noreferrer\"><code>std::istream::operator&gt;&gt;</code></a> or <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> or whatever you want to use, <a href=\"https://stackoverflow.com/questions/4745858/stdcin-getline-vs-stdcin\">depending on what you want to read</a>.</p>\n\n<p>Now, to store these strings in a suitable data structure, something array-ish seems fit. The C++ standard library offers various kinds of containers for this, solely depending on how you want to store/access the strings. Examples are <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> (dynamically modifiable array), <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> (safer alternative to an array), <a href=\"http://en.cppreference.com/w/cpp/container/deque\" rel=\"nofollow noreferrer\"><code>std::deque</code></a> (double-ended queue), <a href=\"http://en.cppreference.com/w/cpp/container/forward_list\" rel=\"nofollow noreferrer\"><code>std::forward_list</code></a> (singly-linked list), and <a href=\"http://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a> (doubly-linked list). These data structures provide appropriate operations to append items, remove them, insert them, etc. depending on the particular container how efficient they are and if they're implemented at all.<br>\nFor general-purpose tasks, I recommend <code>std::vector</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33821, "user_id": 45685, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/y4RJr.jpg?s=128&g=1", "display_name": "AndersK", "link": "https://stackoverflow.com/users/45685/andersk"}, "edited": false, "score": 1, "creation_date": 1455740290, "post_id": 35466827, "comment_id": 58629418, "body": "it is tagged c++ so new/delete would be more natural than malloc/free"}], "tags": [], "owner": {"reputation": 84, "user_id": 5764457, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/SWF43.jpg?s=128&g=1", "display_name": "Z Rev", "link": "https://stackoverflow.com/users/5764457/z-rev"}, "is_accepted": false, "score": 0, "last_activity_date": 1455740084, "creation_date": 1455740084, "answer_id": 35466827, "question_id": 35466016, "link": "https://stackoverflow.com/questions/35466016/how-can-i-enter-strings-of-different-length-in-a-2d-char-array-in-c/35466827#35466827", "title": "How can I enter strings of different length in a 2d char array in C++?", "body": "<p>If you really wanted to, you could use malloc() to initialize a character array and then realloc() sizeof(char) times x amount of characters. You could even add a marker to separate the various lines you want to enter.</p>\n\n<p>Just make sure you don't forget to free() the array at the end of your code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5733274"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 474, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455740084, "creation_date": 1455737574, "last_edit_date": 1455737759, "question_id": 35466016, "link": "https://stackoverflow.com/questions/35466016/how-can-i-enter-strings-of-different-length-in-a-2d-char-array-in-c", "title": "How can I enter strings of different length in a 2d char array in C++?", "body": "<p>I am required to enter 4 strings therefore number of strings that needs to be entered is specified but the length of each string is different. Since I have to perform character specific operations it has to be 2d char array, if I am not wrong. How can i code this in c++.</p>\n\n<p>Reference: the question is in spoj </p>\n\n<p>Input:</p>\n\n<pre><code>4          // number of test cases\nyour \nprogress \nis \nnoticeable\n</code></pre>\n\n<p>How to input this in C++ ? Kindly help in clearing the concept behind this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4332327"}, "edited": false, "score": 6, "creation_date": 1455737655, "post_id": 35466000, "comment_id": 58627707, "body": "false positive? hard to tell without seeing your code"}, {"owner": {"reputation": 1351, "user_id": 1671693, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/29d161382ae04e0889c241931b8aae1f?s=128&d=identicon&r=PG", "display_name": "Gregory Kuhn", "link": "https://stackoverflow.com/users/1671693/gregory-kuhn"}, "edited": false, "score": 0, "creation_date": 1455737857, "post_id": 35466000, "comment_id": 58627860, "body": "you could post it on github or some other code sharing site?"}, {"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 1, "creation_date": 1455737978, "post_id": 35466000, "comment_id": 58627952, "body": "I noticed that most names start with &quot;Gen&quot; or &quot;Heur&quot;. This means it behaves a bit like a common virus. Usually this is the case if it mutates system files after downloading, or encrypts user data based on a downloaded key, things like that. Does your program/code do things like that?"}, {"owner": {"reputation": 123, "user_id": 5904154, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8dcdc362824a2af384796ccd5167d391?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron ", "link": "https://stackoverflow.com/users/5904154/aaron"}, "edited": false, "score": 0, "creation_date": 1455738089, "post_id": 35466000, "comment_id": 58628027, "body": "Well, here you go. I&#39;m almost certain there&#39;s nothing wrong with the code though. <a href=\"http://pastebin.com/ZwJZrRSu\" rel=\"nofollow noreferrer\">pastebin.com/ZwJZrRSu</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1455738300, "post_id": 35466000, "comment_id": 58628148, "body": "My god! A C++ program that Avast doesn&#39;t kill on site!"}, {"owner": {"reputation": 13415, "user_id": 102, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f20eaa6bccefd48c6ca5aff0badffdce?s=128&d=identicon&r=PG", "display_name": "Bill", "link": "https://stackoverflow.com/users/102/bill"}, "edited": false, "score": 6, "creation_date": 1455738313, "post_id": 35466000, "comment_id": 58628160, "body": "Any chance you have a virus on your computer that is adding itself to your compiled executables?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 7, "creation_date": 1455738554, "post_id": 35466000, "comment_id": 58628305, "body": "So, I don&#39;t know whether this is contributing to the Virus claim or not, but those <code>goto</code> statements are offending my delicate programming sensibilities."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1455739029, "post_id": 35466000, "comment_id": 58628621, "body": "Off topic: You can eliminate probably 80% of your code by moving all of the monday, tuesday, etc reading and writing code into a function with the day as a parameter."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1455739334, "post_id": 35466000, "comment_id": 58628822, "body": "Probably the virus scanner is just seeing a certain bit pattern in the executable that matches a pattern seen in viruses. Some minor (and seemingly irrelevant) tweak to your program might change it enough to eliminate the false positive."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1455739759, "post_id": 35466000, "comment_id": 58629093, "body": "@panthor314: I doubt that seeing the code would be helpful in this case."}, {"owner": {"reputation": 5161, "user_id": 3065406, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a6697e5c2ff5cfdf8f196fe42a309598?s=128&d=identicon&r=PG", "display_name": "deW1", "link": "https://stackoverflow.com/users/3065406/dew1"}, "edited": false, "score": 1, "creation_date": 1455740652, "post_id": 35466000, "comment_id": 58629653, "body": "Why is this getting upvotes? O.o"}, {"owner": {"reputation": 146, "user_id": 4280460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a69fb9e87240f46445f370ad66b0679?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/4280460/vincent"}, "edited": false, "score": 0, "creation_date": 1455740892, "post_id": 35466000, "comment_id": 58629787, "body": "<a href=\"https://xkcd.com/1513/\" rel=\"nofollow noreferrer\">xkcd.com/1513</a>"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1455741693, "post_id": 35466000, "comment_id": 58630220, "body": "&quot;Detection ratio:\t11 / 54&quot; -- if I understand it correctly, that tends to suggest it&#39;s a false positive."}, {"owner": {"reputation": 123, "user_id": 5904154, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8dcdc362824a2af384796ccd5167d391?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron ", "link": "https://stackoverflow.com/users/5904154/aaron"}, "edited": false, "score": 0, "creation_date": 1455764893, "post_id": 35466000, "comment_id": 58639273, "body": "I also thought it was || but it gives the same result either way, I&#39;m not sure why though."}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 4543471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ede6239f1061a4722e5b39ecb1d64eee?s=128&d=identicon&r=PG&f=1", "display_name": "Itay Sharon", "link": "https://stackoverflow.com/users/4543471/itay-sharon"}, "is_accepted": false, "score": 2, "last_activity_date": 1455738109, "creation_date": 1455738109, "answer_id": 35466187, "question_id": 35466000, "link": "https://stackoverflow.com/questions/35466000/program-i-just-made-is-apparently-a-virus-c/35466187#35466187", "title": "Program I just made is apparently a virus? C++", "body": "<p>I am not sure but I think it because you imported kernel32.dll\nAgain, it is hard to tell without the source\nAlso take a look at the file detail in the report</p>\n"}, {"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1455740778, "post_id": 35466945, "comment_id": 58629720, "body": "I think you&#39;re probably right and this is a true positive."}, {"owner": {"reputation": 123, "user_id": 5904154, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8dcdc362824a2af384796ccd5167d391?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron ", "link": "https://stackoverflow.com/users/5904154/aaron"}, "edited": false, "score": 0, "creation_date": 1455740806, "post_id": 35466945, "comment_id": 58629740, "body": "Actually I made my friend compile my code on his PC and the same Virus Scanner online only found 1 &quot;virus&quot; instead of 11. so yeah I guess I&#39;m infected. Thank you!."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 5, "last_activity_date": 1455740500, "creation_date": 1455740500, "answer_id": 35466945, "question_id": 35466000, "link": "https://stackoverflow.com/questions/35466000/program-i-just-made-is-apparently-a-virus-c/35466945#35466945", "title": "Program I just made is apparently a virus? C++", "body": "<p>Most probably your PC is already infected by a virus, which adds itself to any executable it can find on your machine. That would easily explain this behavior. Try to compile the same program on PC that is clean for sure and check your PC by antivirus.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 9682481, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "ananth", "link": "https://stackoverflow.com/users/9682481/ananth"}, "is_accepted": false, "score": -1, "last_activity_date": 1598977360, "creation_date": 1598977360, "answer_id": 63691676, "question_id": 35466000, "link": "https://stackoverflow.com/questions/35466000/program-i-just-made-is-apparently-a-virus-c/63691676#63691676", "title": "Program I just made is apparently a virus? C++", "body": "<p>The Report says it contains the Razy Trojan, it might be that it infected the file</p>\n"}], "owner": {"reputation": 123, "user_id": 5904154, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8dcdc362824a2af384796ccd5167d391?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron ", "link": "https://stackoverflow.com/users/5904154/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 35466945, "answer_count": 3, "score": 4, "last_activity_date": 1598977360, "creation_date": 1455737528, "last_edit_date": 1455738449, "question_id": 35466000, "link": "https://stackoverflow.com/questions/35466000/program-i-just-made-is-apparently-a-virus-c", "title": "Program I just made is apparently a virus? C++", "body": "<p>Okay so I just made a C++ program that is basically a notebook,\nyou write stuff in it and it saves it to a .dat file and then you can\nread it later.</p>\n\n<p>I compiled it with Microsoft Visual C++ and now I sent it to a friend and it's\nsaying that it is a virus? I scan it online and it also says that it's a virus.\nI don't know why this is happening, as I literally just used some if/else statements, created some strings and used a couple getlines. (and fstream to create the .dat files).</p>\n\n<p>This is the virus report: <a href=\"https://www.virustotal.com/en/file/a1b72280a32915429607fd5abeef1aad4f8310867df1feb7707ea0f7a404026e/analysis/1455735299/\" rel=\"nofollow\">https://www.virustotal.com/en/file/a1b72280a32915429607fd5abeef1aad4f8310867df1feb7707ea0f7a404026e/analysis/1455735299/</a></p>\n\n<p>Here is my code. (Its 400+ lines). And I'm almost certain there's nothing wrong\nwith it. <a href=\"http://pastebin.com/ZwJZrRSu\" rel=\"nofollow\">http://pastebin.com/ZwJZrRSu</a></p>\n\n<p>Any idea why this is happening? </p>\n"}, {"tags": ["c++", "lnk2005"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 1, "creation_date": 1455737080, "post_id": 35465833, "comment_id": 58627316, "body": "Defining something once in a header file means it&#39;s defined once per file that includes that header."}], "answers": [{"tags": [], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "is_accepted": false, "score": 1, "last_activity_date": 1455738359, "creation_date": 1455738359, "answer_id": 35466271, "question_id": 35465833, "link": "https://stackoverflow.com/questions/35465833/error-lnk2005-constructor-already-defined/35466271#35466271", "title": "error LNK2005 constructor already defined", "body": "<p>Just move the definitions inside the class so that they are inlined:</p>\n\n<pre><code>class Date\n{\npublic:\n    Date(int j, int m, int a)\n    {\n        jour = j;\n        mois = m;\n        annee = a;\n    }\n    ~Date()\n    {\n    }\n    void afficher();\n    void setJour(int newj);\n    void setMois(int newm);\n    void setAnne(int newa);\n    int getJour()const;\n    int getMois()const;\n    int getAnne()const;\nprivate:\n    int jour;\n    int mois;\n    int annee;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1790, "user_id": 1370397, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/4cd00d196b2f9bef669ce212eec963b1?s=128&d=identicon&r=PG", "display_name": "alex", "link": "https://stackoverflow.com/users/1370397/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1455738400, "creation_date": 1455738400, "answer_id": 35466285, "question_id": 35465833, "link": "https://stackoverflow.com/questions/35465833/error-lnk2005-constructor-already-defined/35466285#35466285", "title": "error LNK2005 constructor already defined", "body": "<p>You should define the constructor in date.cpp. Since you include date.h in club.cpp as well as in club.cpp (as you should), it is defined once in club.cpp and once in date.cpp. Leave only the constructor's declaration in date.h.</p>\n\n<p>An alternative is to define the constructor directly where you declare it. This you should do only for small member functions / or constructors, since they are then inlined, which means the code is inserted everywhere it is used which makes your executable file bigger.</p>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 5659601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cddd3ac31838f39c1e019a91fdbdd23?s=128&d=identicon&r=PG&f=1", "display_name": "ShorKy", "link": "https://stackoverflow.com/users/5659601/shorky"}, "edited": false, "score": 1, "creation_date": 1455740510, "post_id": 35466291, "comment_id": 58629567, "body": "thank you i found the solution quickly after my post X) and it&#39;s exacly that but thanks again ^^"}], "tags": [], "owner": {"reputation": 14710, "user_id": 5538420, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/oc81s.jpg?s=128&g=1", "display_name": "dxiv", "link": "https://stackoverflow.com/users/5538420/dxiv"}, "is_accepted": true, "score": 2, "last_activity_date": 1455738415, "creation_date": 1455738415, "answer_id": 35466291, "question_id": 35465833, "link": "https://stackoverflow.com/questions/35465833/error-lnk2005-constructor-already-defined/35466291#35466291", "title": "error LNK2005 constructor already defined", "body": "<p>As it is, the <code>Date::Date</code> constructor is defined in <code>date.h</code> and will therefore be (re)defined in any <code>.cpp</code> that includes <code>date.h</code>, in your case (at least) <code>club.cpp</code> and <code>date.cpp</code>. Same goes for the <code>Date::~Date</code> destructor.</p>\n\n<p>You can either (a) move the <code>Date::Date</code> and <code>Date::~Date</code> definitions to <code>date.cpp</code>, or (b) define them as inline in <code>date.h</code>:</p>\n\n<pre><code>class Date\n{\npublic:\n    Date::Date(int j, int m, int a)\n    {\n        jour = j;\n        mois = m;\n        annee = a;\n    }\n\n    Date::~Date()\n    {\n    }\n\n    //...\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 5659601, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9cddd3ac31838f39c1e019a91fdbdd23?s=128&d=identicon&r=PG&f=1", "display_name": "ShorKy", "link": "https://stackoverflow.com/users/5659601/shorky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1649, "favorite_count": 0, "accepted_answer_id": 35466291, "answer_count": 3, "score": 1, "last_activity_date": 1455738415, "creation_date": 1455737001, "question_id": 35465833, "link": "https://stackoverflow.com/questions/35465833/error-lnk2005-constructor-already-defined", "title": "error LNK2005 constructor already defined", "body": "<p>hello i've got a little problem with my code.</p>\n\n<p>//club.h</p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n#include &lt;string&gt;\n#include&lt;vector&gt;\n#include\"Palmares.h\"\n#include\"Stade.h\"\n#include\"Joueur.h\"\n#include\"Date.h\"\nusing namespace std;\n\nclass Club\n    {\n    public:\n        Club(int j, int m, int a, int c, string qualite, string n, string addressstade, string nom, string hist, string couleur, string vill, string addressclub);\n        ~Club();\n        void setNom(string newnom);\n        void setHistoire(string newt);\n        void setDate(int newj, int newm, int newa);\n        void setCouleurClub(string newcouleur);\n        void setStade(int newc, string newqualite, string newnom, string newadresse);\n        void setVille(string newville);\n        void setAddresse(string newadresse);\n        string getHistoire()const;\n        string getCouleur()const;\n        Date getDate()const;\n        Stade getStade()const;\n        string getVille()const;\n        string getAddresse()const;\n        vector&lt;Personne*&gt; getTabStaff()const { return tabStaff; };\n        vector&lt;Joueur&gt; getTabJoueur()const { return tabJoueur; };\n        vector&lt;Palmares&gt; getPalmares()const { return tabPalmares; };\n\n        void addStaff(Personne &amp;newpersonne);\n        void addJoueur(Joueur newjoueur);\n        void addPalmares(Palmares newpalmares);\n\n    private: \n        string nom_club;\n        string histoire;//histoire du club\n        string couleur_club;\n        Date date;// date de creation\n        Stade stade;//stade du club\n        string ville; \n        string addresse;\n        vector&lt;Personne*&gt; tabStaff;\n        vector&lt;Joueur&gt; tabJoueur;//tableau des joueur du club\n        vector&lt;Palmares&gt; tabPalmares;//tableau des palmares du club\n\n\n    };\n\n    //******************************constructeur/destructeur*************************************************\n    Club::Club(int j, int m, int a, int c, string qualite, string n, string addressstad, string nom, string hist, string couleur, string vill, string addressclub) \n        : date(j, m, a), stade(c,qualite,n,addressstad)\n    {\n        nom_club = nom;\n        histoire = hist;\n        couleur_club = couleur;\n        ville = vill;\n        addresse = addressclub;\n    }\n\n    Club::~Club()\n    {\n    }\n</code></pre>\n\n<p>//club.cpp</p>\n\n<pre><code>#include\"Club.h\"\n\n//*****************************Setteur/getteur************************************************************\nvoid Club::setNom(string newnom){\n    nom_club = newnom;\n}\nvoid Club::setHistoire(string newt){\n    histoire = newt;\n}\nvoid Club::setDate(int newj, int newm, int newa){\n    date.setJour(newj);\n    date.setMois(newm);\n    date.setAnne(newa);\n}\nvoid Club::setCouleurClub(string newcouleur){\n    couleur_club = newcouleur;\n}\nvoid Club::setStade(int newc, string newqualite, string newnom, string newadresse){\n    stade.setCapacite(newc);\n    stade.setQalitePeouse(newqualite);\n    stade.setNom(newnom);\n    stade.setAdresse(newadresse);\n}\nvoid Club::setVille(string newville){\n    ville = newville;\n}\nvoid Club::setAddresse(string newadresse){\n    addresse = newadresse;\n}\nstring Club::getHistoire()const{\n    return histoire;\n}\nstring Club::getCouleur()const{\n    return couleur_club;\n}\nDate Club::getDate()const{\n    return date;\n}\nStade Club::getStade()const{\n    return stade;\n}\nstring Club::getVille()const{\n    return ville;\n}\nstring Club::getAddresse()const{\n    return addresse;\n}\n\n/****************************************fonction d'ajout des joueur, staff et palmares*************************************************/\nvoid Club::addStaff(Personne &amp;newpersonne){\n    tabStaff.push_back(&amp;newpersonne);\n}\nvoid Club::addJoueur(Joueur newjoueur){\n    tabJoueur.push_back(newjoueur);\n}\nvoid Club::addPalmares(Palmares newpalmares){\n    tabPalmares.push_back(newpalmares);\n}\n</code></pre>\n\n<p>//date.h</p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include&lt;conio.h&gt;\n\nusing namespace std;\n\n\nclass Date\n{\npublic:\n    Date(int j, int m, int a);\n    ~Date();\n    void afficher();\n    void setJour(int newj);\n    void setMois(int newm);\n    void setAnne(int newa);\n    int getJour()const;\n    int getMois()const;\n    int getAnne()const;\nprivate:\n    int jour;\n    int mois;\n    int annee;\n};\n\nDate::Date(int j, int m, int a)\n{\n    jour = j;\n    mois = m;\n    annee = a;\n}\n\nDate::~Date()\n{\n}\n</code></pre>\n\n<p>//date.cpp</p>\n\n<pre><code>#include\"Date.h\"\n\nvoid Date::afficher(){\n    cout &lt;&lt; jour &lt;&lt; '/' &lt;&lt; mois &lt;&lt; '/' &lt;&lt; annee &lt;&lt; endl;\n}\n\nvoid Date::setJour(int newj){\n    jour = newj;\n}\nvoid Date::setMois(int newm){\n    mois = newm;\n}\nvoid Date::setAnne(int newa){\n    annee = newa;\n}\n\nint Date::getJour()const{\n    return jour;\n}\nint Date::getMois()const{\n    return mois;\n}\nint Date::getAnne()const{\n    return annee;\n}\n</code></pre>\n\n<p>and my problem is VS throw me this \n1>Date.obj : error LNK2005: \"public: __thiscall Date::Date(int,int,int)\" (??0Date@@QAE@HHH@Z) already defined in Club.obj</p>\n\n<p>i know what he would mean but i have defined the constructor only on date.h\nand i check there is no other definition.\nhelp me please</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1455737868, "post_id": 35465839, "comment_id": 58627868, "body": "Of course! How did I miss that :) oddly enough, now I have the same problem with <code>_storage.insert(_storage.end(), value | carry)</code>, which I didn&#39;t before, due to the bitwise operator&#39;s return type. It&#39;s funny that the compiler was capable of deducing one type and not the other, but that already makes sense solving with a cast. Thanks!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1455744121, "post_id": 35465839, "comment_id": 58631535, "body": "@Andr&#233;Fratelli What are <code>value</code> and <code>carry</code> when you try it?"}, {"owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1455753260, "post_id": 35465839, "comment_id": 58635803, "body": "<code>value</code> and <code>carry</code> are both of <code>_value_type</code> (aka <code>uint8_t</code>), but that was not the problem. I was being misled by the previous error, because this one was telling me that the call was <i>ambiguous</i>. This is due to the fact that besides the <code>typename argument&lt;value_type&gt;::type</code> overload I also had a <code>value_type &amp;&amp;</code> overload, which is meant for class types. Apparently these two cannot coexist, which bears a problem with my <code>argument</code> design approach. For now I commented out the <code>&amp;&amp;</code> and it&#39;s working well, I&#39;m thinking of reviewing this issue later. Or maybe you know how to solve? ;)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "edited": false, "score": 0, "creation_date": 1455799580, "post_id": 35465839, "comment_id": 58657154, "body": "@Andr&#233;Fratelli I would have to see the code but that would be a separate question."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1455737026, "creation_date": 1455737026, "answer_id": 35465839, "question_id": 35465743, "link": "https://stackoverflow.com/questions/35465743/no-matching-member-function-for-call-to-insert/35465839#35465839", "title": "no matching member function for call to &#39;insert&#39;", "body": "<p>You have</p>\n\n<pre><code>typedef std::conditional&lt;std::is_fundamental&lt;T&gt;::value || std::is_pointer&lt;T&gt;::value, const T, const T &amp;&gt; type;\n</code></pre>\n\n<p>So type is a <code>std::conditional&lt;std::is_fundamental&lt;T&gt;::value || std::is_pointer&lt;T&gt;::value, const T, const T &amp;&gt;</code></p>\n\n<p>When you call</p>\n\n<pre><code>_storage.insert(_storage.end(), value);\n</code></pre>\n\n<p>It is trying to convert <code>value</code> to a <code>std::conditional&lt;std::is_fundamental&lt;T&gt;::value || std::is_pointer&lt;T&gt;::value, const T, const T &amp;&gt;</code></p>\n\n<p>You need to add <code>::type</code> to the conditional to get the resulting type from the condition.</p>\n\n<pre><code>typedef std::conditional&lt;std::is_fundamental&lt;T&gt;::value || std::is_pointer&lt;T&gt;::value, const T, const T &amp;&gt;::type type;\n</code></pre>\n"}], "owner": {"reputation": 5464, "user_id": 2328352, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/40762ba3bb07ad05fdcfa713b671673f?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Fratelli", "link": "https://stackoverflow.com/users/2328352/andr%c3%a9-fratelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1425, "favorite_count": 0, "accepted_answer_id": 35465839, "answer_count": 1, "score": 1, "last_activity_date": 1455737026, "creation_date": 1455736725, "question_id": 35465743, "link": "https://stackoverflow.com/questions/35465743/no-matching-member-function-for-call-to-insert", "title": "no matching member function for call to &#39;insert&#39;", "body": "<p>I have the following method declaration on a <code>basic_buffer</code> class:</p>\n\n<pre><code>const_iterator insert(const_iterator position, typename argument&lt;value_type&gt;::type val)\n</code></pre>\n\n<p>Notice the type of the second argument. I often use this <code>argument</code> traits that basically decides whether the argument should be passed by copy or by reference when receiving template arguments. In this case, <code>value_type</code> is a <code>typedef</code> of the template argument <code>T</code>. For instance, fundamental types should be passed by copy instead of const reference. Here's the implementation:</p>\n\n<pre><code>template &lt;typename T&gt; struct argument\n{\n    typedef std::conditional&lt;std::is_fundamental&lt;T&gt;::value || std::is_pointer&lt;T&gt;::value, const T, const T &amp;&gt; type;\n};\n</code></pre>\n\n<p>Notice how fundamental and pointer types evaluate to <code>const T</code> and other types evaluate to <code>const T &amp;</code>. This has been working great so far.</p>\n\n<p>Now consider the following function:</p>\n\n<pre><code>template &lt;class T&gt;\nvoid foo()\n{\n    typedef basic_buffer&lt;T&gt; _storage_type;\n    typedef typename _storage_type::value_type _value_type;\n\n    _value_type value = 0;\n    _storage_type _storage;\n\n    _storage.insert(_storage.end(), value);\n}\n</code></pre>\n\n<p>Several details are omitted. This is what I get:</p>\n\n<pre><code>error: no matching member function for call to 'insert'\n    _storage.insert(_storage.end(), value);\n    ~~~~~~~~~^~~~~~\n</code></pre>\n\n<p>What surprises me is this overload version not being matched:</p>\n\n<pre><code>note: candidate function not viable: no known conversion from '_value_type' (aka 'unsigned char') to 'typename argument&lt;value_type&gt;::type' (aka 'conditional&lt;std::is_fundamental&lt;unsigned\n      char&gt;::value || std::is_pointer&lt;unsigned char&gt;::value, const unsigned char, const unsigned char &amp;&gt;') for 2nd argument\n    const_iterator insert(const_iterator position, typename argument&lt;value_type&gt;::type val)\n</code></pre>\n\n<p>To make matters even more confusing, if I cast <code>value</code> to <code>_value_type</code> (that, notably, is already its type) it works:</p>\n\n<pre><code>_storage.insert(_storage.end(), static_cast&lt;_value_type&gt;(value));\n</code></pre>\n\n<p>So I can solve this by casting <code>value</code>, but rather not. What is happening here?</p>\n"}, {"tags": ["c++", "opencv", "caffe", "mnist"], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 733941, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HF1GX.png?s=128&g=1", "display_name": "Ghassem Tofighi", "link": "https://stackoverflow.com/users/733941/ghassem-tofighi"}, "edited": false, "score": 0, "creation_date": 1459210967, "post_id": 36215234, "comment_id": 60173689, "body": "I&#39;m using the correct image from command line interface. It comes from args variable and it is grayscale."}], "tags": [], "owner": {"reputation": 11, "user_id": 6092010, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aLq63xeLteQ/AAAAAAAAAAI/AAAAAAAAAB8/IyJu3fOv05Y/photo.jpg?sz=128", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0413\u043e\u0440\u0438\u043d", "link": "https://stackoverflow.com/users/6092010/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%93%d0%be%d1%80%d0%b8%d0%bd"}, "is_accepted": false, "score": 1, "last_activity_date": 1458887936, "creation_date": 1458887936, "answer_id": 36215234, "question_id": 35465651, "link": "https://stackoverflow.com/questions/35465651/how-to-use-opencv-dnn-module-for-digit-classification-by-using-lenet/36215234#36215234", "title": "How to use opencv_dnn module for digit classification by using LeNet?", "body": "<p>Perhaps you are applying an incorrect image. Correct line: \nMat img = imread(imageFile, CV_LOAD_IMAGE_GRAYSCALE); </p>\n"}, {"comments": [{"owner": {"reputation": 5426, "user_id": 4887423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yW2L2.jpg?s=128&g=1", "display_name": "Willie Cheng", "link": "https://stackoverflow.com/users/4887423/willie-cheng"}, "edited": false, "score": 0, "creation_date": 1463527197, "post_id": 37287524, "comment_id": 62100435, "body": "Please check this <a href=\"http://stackoverflow.com/help\">URL</a>it will be useful to lift your content quality up"}], "tags": [], "owner": {"reputation": 113, "user_id": 3736842, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e8cdcc85d2e97d5ad3f46af4dd21afe7?s=128&d=identicon&r=PG&f=1", "display_name": "vikiboy", "link": "https://stackoverflow.com/users/3736842/vikiboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1463525822, "creation_date": 1463525822, "answer_id": 37287524, "question_id": 35465651, "link": "https://stackoverflow.com/questions/35465651/how-to-use-opencv-dnn-module-for-digit-classification-by-using-lenet/37287524#37287524", "title": "How to use opencv_dnn module for digit classification by using LeNet?", "body": "<p>I faced the same problem. Upon changing it to CV_LOAD_IMAGE_GRAYSCALE, the code ran without errors. </p>\n"}], "owner": {"reputation": 381, "user_id": 733941, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HF1GX.png?s=128&g=1", "display_name": "Ghassem Tofighi", "link": "https://stackoverflow.com/users/733941/ghassem-tofighi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2618, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1473037797, "creation_date": 1455736444, "question_id": 35465651, "link": "https://stackoverflow.com/questions/35465651/how-to-use-opencv-dnn-module-for-digit-classification-by-using-lenet", "title": "How to use opencv_dnn module for digit classification by using LeNet?", "body": "<p>I tried to use the same code with some modification <a href=\"http://docs.opencv.org/master/d5/de7/tutorial_dnn_googlenet.html\" rel=\"nofollow\">here</a> for digit recognitions using a trained model for mnist based on Caffe. \nMy modified source code and network is as follows. I also included the error message at the end. The image is used in the code is a sample image from mnist.\nThe line of code that it cannot go through is </p>\n\n<pre><code>net.forward();  \n</code></pre>\n\n<p>And I'm pretty sure it is because of the dimension of input. </p>\n\n<p>Any ideas how to run the code for LeNet?</p>\n\n<p><strong>caffe_mnist.cpp</strong></p>\n\n<pre><code>#include &lt;opencv2/dnn.hpp&gt;\n#include &lt;opencv2/imgproc.hpp&gt;\n#include &lt;opencv2/highgui.hpp&gt;\n#include &lt;time.h&gt;\n#include &lt;math.h&gt;\nusing namespace cv;\nusing namespace cv::dnn;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\nclock_t t;\n/* Find best class for the blob (i. e. class with maximal probability) */\nvoid getMaxClass(dnn::Blob &amp;probBlob, int *classId, double *classProb)\n{\n    Mat probMat = probBlob.matRefConst().reshape(1, 1); //reshape the blob to 1x1000 matrix\n    Point classNumber;\n    minMaxLoc(probMat, NULL, classProb, NULL, &amp;classNumber);\n    *classId = classNumber.x;\n}\nstd::vector&lt;String&gt; readClassNames(const char *filename = \"./caffe_model/mnist/label.txt\")\n{\n    std::vector&lt;String&gt; classNames;\n    std::ifstream fp(filename);\n    if (!fp.is_open())\n    {\n        std::cerr &lt;&lt; \"File with classes labels not found: \" &lt;&lt; filename &lt;&lt; std::endl;\n        exit(-1);\n    }\n    std::string name;\n    while (!fp.eof())\n    {\n        std::getline(fp, name);\n        if (name.length())\n            classNames.push_back( name.substr(name.find(' ')+1) );\n    }\n    fp.close();\n    return classNames;\n}\nint main(int argc, char **argv)\n{\n    String modelTxt = \"./caffe_model/mnist/mnist.prototxt\";\n    String modelBin = \"./caffe_model/mnist/mnist.caffemodel\";\n    String imageFile = (argc &gt; 1) ? argv[1] : \"./caffe_model/mnist/0.png\";\n    Ptr&lt;dnn::Importer&gt; importer;\n    try                                     //Try to import Caffe GoogleNet model\n    {\n        importer = dnn::createCaffeImporter(modelTxt, modelBin);\n    }\n    catch (const cv::Exception &amp;err)        //Importer can throw errors, we will catch them\n    {\n        std::cerr &lt;&lt; err.msg &lt;&lt; std::endl;\n    }\n    if (!importer)\n    {\n        std::cerr &lt;&lt; \"Can't load network by using the following files: \" &lt;&lt; std::endl;\n        std::cerr &lt;&lt; \"prototxt:   \" &lt;&lt; modelTxt &lt;&lt; std::endl;\n        std::cerr &lt;&lt; \"caffemodel: \" &lt;&lt; modelBin &lt;&lt; std::endl;\n        exit(-1);\n    }\n    dnn::Net net;\n    importer-&gt;populateNet(net);\n    std::cout &lt;&lt; \"done: importer-&gt;populateNet(net) \" &lt;&lt;  std::endl;\n    importer.release();                     //We don't need importer anymore\n    Mat img = imread(imageFile);\n    if (img.empty())\n    {\n        std::cerr &lt;&lt; \"Can't read image from the file: \" &lt;&lt; imageFile &lt;&lt; std::endl;\n        exit(-1);\n    }\n    resize(img, img, Size(28, 28));       //LeNet accepts 224x224 RGB-images\n    std::cout &lt;&lt; \"done: resize(img, img, Size(28, 28));  \" &lt;&lt;  std::endl;\n    dnn::Blob inputBlob = dnn::Blob(img);   //Convert Mat to dnn::Blob image batch\n    net.setBlob(\".data\", inputBlob);        //set the network input\n    std::cout &lt;&lt; \"done: net.setBlob(.data, inputBlob);  \" &lt;&lt;  std::endl;\n    t = clock();\n    net.forward();   \n    std::cout &lt;&lt; \"done: net.forward();  \" &lt;&lt;  std::endl;\n    //compute output\n    dnn::Blob prob = net.getBlob(\"prob\");   //gather output of \"prob\" layer\n    int classId;\n    double classProb;\n    getMaxClass(prob, &amp;classId, &amp;classProb);//find the best class\n    std::vector&lt;String&gt; classNames = readClassNames();\n    std::cout &lt;&lt; \"Best class: #\" &lt;&lt; classId &lt;&lt; \" '\" &lt;&lt; classNames.at(classId) &lt;&lt; \"'\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Probability: \" &lt;&lt; classProb * 100 &lt;&lt; \"%\" &lt;&lt; std::endl;\n    t = clock() - t;\n    std::cout &lt;&lt; \"Time Spent: \" &lt;&lt; ((float)t)/CLOCKS_PER_SEC &lt;&lt; std::endl;\n    return 0;\n} //main\n</code></pre>\n\n<p><strong>mnist.prototxt</strong></p>\n\n<pre><code>name: \"LeNet\"\ninput: \"data\"\ninput_dim: 1\ninput_dim: 1\ninput_dim: 28\ninput_dim: 28\nlayer {\n  name: \"conv1\"\n  type: \"Convolution\"\n  bottom: \"data\"\n  top: \"conv1\"\n  param {\n    lr_mult: 1\n  }\n  param {\n    lr_mult: 2\n  }\n  convolution_param {\n    num_output: 20\n    kernel_size: 5\n    stride: 1\n    weight_filler {\n      type: \"xavier\"\n    }\n    bias_filler {\n      type: \"constant\"\n    }\n  }\n}\nlayer {\n  name: \"pool1\"\n  type: \"Pooling\"\n  bottom: \"conv1\"\n  top: \"pool1\"\n  pooling_param {\n    pool: MAX\n    kernel_size: 2\n    stride: 2\n  }\n}\nlayer {\n  name: \"conv2\"\n  type: \"Convolution\"\n  bottom: \"pool1\"\n  top: \"conv2\"\n  param {\n    lr_mult: 1\n  }\n  param {\n    lr_mult: 2\n  }\n  convolution_param {\n    num_output: 50\n    kernel_size: 5\n    stride: 1\n    weight_filler {\n      type: \"xavier\"\n    }\n    bias_filler {\n      type: \"constant\"\n    }\n  }\n}\nlayer {\n  name: \"pool2\"\n  type: \"Pooling\"\n  bottom: \"conv2\"\n  top: \"pool2\"\n  pooling_param {\n    pool: MAX\n    kernel_size: 2\n    stride: 2\n  }\n}\nlayer {\n  name: \"ip1\"\n  type: \"InnerProduct\"\n  bottom: \"pool2\"\n  top: \"ip1\"\n  param {\n    lr_mult: 1\n  }\n  param {\n    lr_mult: 2\n  }\n  inner_product_param {\n    num_output: 500\n    weight_filler {\n      type: \"xavier\"\n    }\n    bias_filler {\n      type: \"constant\"\n    }\n  }\n}\nlayer {\n  name: \"relu1\"\n  type: \"ReLU\"\n  bottom: \"ip1\"\n  top: \"ip1\"\n}\nlayer {\n  name: \"ip2\"\n  type: \"InnerProduct\"\n  bottom: \"ip1\"\n  top: \"ip2\"\n  param {\n    lr_mult: 1\n  }\n  param {\n    lr_mult: 2\n  }\n  inner_product_param {\n    num_output: 10\n    weight_filler {\n      type: \"xavier\"\n    }\n    bias_filler {\n      type: \"constant\"\n    }\n  }\n}\nlayer {\n  name: \"prob\"\n  type: \"Softmax\"\n  bottom: \"ip2\"\n  top: \"prob\"\n}\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>done: importer-&gt;populateNet(net)\ndone: resize(img, img, Size(28, 28));\ndone: net.setBlob(.data, inputBlob); \n OpenCV Error: Assertion failed (blobs[0].num() == outCn &amp;&amp; blobs[0].channels() == inpCn / group) in allocate, file /home/ubuntu/opencv_contrib/modules/dnn/src/layers/convolution_layer.cpp, line 87\n    terminate called after throwing an instance of 'cv::Exception'\n      what():  /home/ubuntu/opencv_contrib/modules/dnn/src/layers/convolution_layer.cpp:87: error: (-215) blobs[0].num() == outCn &amp;&amp; blobs[0].channels() == inpCn / group in function allocate\n\n    Aborted (core dumped)\n</code></pre>\n"}, {"tags": ["c++", "class", "abstract-data-type"], "comments": [{"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736163, "post_id": 35465479, "comment_id": 58626722, "body": "Read about <code>operator&lt;&lt;</code> overload."}, {"owner": {"reputation": 2917, "user_id": 4201290, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9ccbbaf6668b86d037e5080a8f9fdb8d?s=128&d=identicon&r=PG", "display_name": "hmak.me", "link": "https://stackoverflow.com/users/4201290/hmak-me"}, "reply_to_user": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736231, "post_id": 35465479, "comment_id": 58626757, "body": "@Lasoloz You mean binary left shift operator overloading?"}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736296, "post_id": 35465479, "comment_id": 58626787, "body": "Yes! STL classes also use it."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455736343, "post_id": 35465479, "comment_id": 58626835, "body": "@HosseinMaktoobian You can also overload the cast operator alternatively."}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736378, "post_id": 35465479, "comment_id": 58626860, "body": "A good point to start: <a href=\"https://msdn.microsoft.com/en-us/library/1z2f6c2k.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/1z2f6c2k.aspx</a>  . C++ rererence documentations are also good."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1455736379, "post_id": 35465479, "comment_id": 58626863, "body": "<code>main</code> should return <code>int</code>, not <code>void</code>."}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736478, "post_id": 35465479, "comment_id": 58626938, "body": "In your example, you should also overload <code>=</code> operator."}, {"owner": {"reputation": 2917, "user_id": 4201290, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9ccbbaf6668b86d037e5080a8f9fdb8d?s=128&d=identicon&r=PG", "display_name": "hmak.me", "link": "https://stackoverflow.com/users/4201290/hmak-me"}, "reply_to_user": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455736589, "post_id": 35465479, "comment_id": 58627012, "body": "@Lasoloz I did the = operator overload. I was trying to handle the stream. and as @SergeyA mentioned, I was looking in a wrong direction. thank you all. that was the <code>output stream</code> operator;"}], "answers": [{"tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": true, "score": 3, "last_activity_date": 1455736322, "creation_date": 1455736322, "answer_id": 35465614, "question_id": 35465479, "link": "https://stackoverflow.com/questions/35465479/how-to-return-a-value-by-class-name-itself-in-c/35465614#35465614", "title": "How to return a value by class name itself in C++?", "body": "<p>This is probably what you mean:</p>\n\n<pre><code>std::ostream &amp; operator &lt;&lt; (std::ostream &amp; os, const String &amp; s)\n{\n    return os &lt;&lt; s.get_char_pointer();\n}\n</code></pre>\n\n<p>Of course you will need to change <code>get_char_pointer</code> to whatever works for your <code>String</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 2, "last_activity_date": 1455736375, "creation_date": 1455736375, "answer_id": 35465624, "question_id": 35465479, "link": "https://stackoverflow.com/questions/35465479/how-to-return-a-value-by-class-name-itself-in-c/35465624#35465624", "title": "How to return a value by class name itself in C++?", "body": "<p>You are looking in the wrong direction. You do not need <code>str</code> to <em>return</em> a character array (which of course it can't anyway). While technically you can define a <em>conversion operator</em> on your <code>String</code> class, it is not recommended, since it can have an unintended effect.</p>\n\n<p>Instead, <strong>overload</strong> <code>operator&lt;&lt;</code>, giving your class as it's second argument, and perform streaming there.</p>\n"}], "owner": {"reputation": 2917, "user_id": 4201290, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9ccbbaf6668b86d037e5080a8f9fdb8d?s=128&d=identicon&r=PG", "display_name": "hmak.me", "link": "https://stackoverflow.com/users/4201290/hmak-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 35465614, "answer_count": 2, "score": -1, "last_activity_date": 1455736375, "creation_date": 1455735931, "question_id": 35465479, "link": "https://stackoverflow.com/questions/35465479/how-to-return-a-value-by-class-name-itself-in-c", "title": "How to return a value by class name itself in C++?", "body": "<p>I'm working on a wrapper class for <code>char[]</code> in c++. Something like a <code>String</code>. Now I want to get a value from the object name. For example:</p>\n\n<pre><code>void main() {\n    String str;\n    str = \"Hello\";\n    cout &lt;&lt; str;\n}\n</code></pre>\n\n<p>so the <code>str</code> return a <code>character array</code>, and <code>cout</code> can print it on the screen. How can I achieve this in my class? <em>(By the way, I know there is already a string class. This is an exercise for <code>Data Structures</code> lesson)</em></p>\n"}, {"tags": ["c++", "pointers", "sizeof", "dereference"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455735878, "post_id": 35465431, "comment_id": 58626550, "body": "What do you mean <i>&quot;an element that doesn&#39;t exist&quot;</i>? It&#39;s right there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5249738"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455735964, "post_id": 35465431, "comment_id": 58626599, "body": "Meant to say *Uninitialized."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1455735978, "post_id": 35465431, "comment_id": 58626610, "body": "Your result is defined but useless"}, {"owner": {"reputation": 252, "user_id": 3573460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d232ac3fdc6012d3627976c253235a8?s=128&d=identicon&r=PG&f=1", "display_name": "Lasoloz", "link": "https://stackoverflow.com/users/3573460/lasoloz"}, "edited": false, "score": 0, "creation_date": 1455735989, "post_id": 35465431, "comment_id": 58626617, "body": "It&#39;s not the same question, but actually it answers your problem: <a href=\"http://stackoverflow.com/questions/7721184/is-sizeofptr-undefined-behavior-when-pointing-to-invalid-memory\" title=\"is sizeofptr undefined behavior when pointing to invalid memory\">stackoverflow.com/questions/7721184/&hellip;</a>"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1455736067, "post_id": 35465431, "comment_id": 58626663, "body": "You&#39;re not dereferencing anything, because the operand expression of <code>sizeof</code> is <i>unevaluated</i>. &quot;Dereferencing&quot; means &quot;to evaluate an indirection expression&quot;."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 5, "creation_date": 1455736089, "post_id": 35465431, "comment_id": 58626676, "body": "<code>sizeof</code> works at comple-time, not run-time.  The code is equivalent to <code>sizeof(int*) &#47; sizeof(int);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455736299, "post_id": 35465521, "comment_id": 58626790, "body": "@Slava, unfortunate but true."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455736386, "post_id": 35465521, "comment_id": 58626872, "body": "@MajorasCoffee, that is correct. Since <code>sizeof</code> is evaluated at compile time, the only thing that matters is the type of the object, not whether it has a valid value."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455736446, "post_id": 35465521, "comment_id": 58626920, "body": "@MajorasCoffee that&#39;s fine. Problem is what you trying to achieve dividing size of pointer to size of int. That barely means anything for you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5249738"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455736787, "post_id": 35465521, "comment_id": 58627140, "body": "@Slava Originally I thought I was right in thinking that it would result in 4/4 but I like to double check my answers so I looked up the exercise and some guy has that the result is undefined so I was unsure. Thanks for the help!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455737191, "post_id": 35465521, "comment_id": 58627390, "body": "@MajorasCoffee The result is implementation defined.  <code>sizeof(pointer)</code> changes depending on what system you are on.  Typically it is 4 on a 32 bit system and 8 on a 64 bit system.  Maybe that is what was meant by undefined."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 5, "last_activity_date": 1455736127, "last_edit_date": 1455736127, "creation_date": 1455736047, "answer_id": 35465521, "question_id": 35465431, "link": "https://stackoverflow.com/questions/35465431/sizeofp-are-my-results-undefined/35465521#35465521", "title": "sizeof(*p) are my results undefined?", "body": "<pre><code>cout &lt;&lt; sizeof(p) / sizeof(*p) &lt;&lt; endl;\n</code></pre>\n\n<p>is perfectly legal and but not exactly valid code. <code>sizeof</code> is evaluated at compile time. If they can't be evaluated at compile time, you will get compiler error.</p>\n\n<p>The surprise will be the expected result. You won't get <code>10</code>. To get <code>10</code>, you'll need to use:</p>\n\n<pre><code>cout &lt;&lt; sizeof(x) / sizeof(x[0]) &lt;&lt; endl;\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5249738"}, "edited": false, "score": 0, "creation_date": 1455737011, "post_id": 35465726, "comment_id": 58627273, "body": "Originally I thought I was right in thinking that it would result in 4/4 going by my book but I like to double check my answers so I looked up the exercise I was on and some guy has that the result is undefined so I was unsure. Thanks for the help :)"}], "tags": [], "owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "is_accepted": false, "score": 1, "last_activity_date": 1455736662, "creation_date": 1455736662, "answer_id": 35465726, "question_id": 35465431, "link": "https://stackoverflow.com/questions/35465431/sizeofp-are-my-results-undefined/35465726#35465726", "title": "sizeof(*p) are my results undefined?", "body": "<p>In c++, the expressions \"*p\" and \"p[0]\" evaluate the same way, so:</p>\n\n<pre><code>*p == p[0]\n</code></pre>\n\n<p>would evaluate to true. I don't know what you mean by \"an element that doesn't exist\".</p>\n\n<p>I don't think your code does what you think. The line</p>\n\n<pre><code>cout &lt;&lt; sizeof(p) / sizeof(*p) &lt;&lt; endl;\n</code></pre>\n\n<p>will evaluate sizeof(p), which is of type int*, and give something like 4, evaluate sizeof(*p), which is of type int, and give something like 4, and then divide them to give 1.</p>\n\n<p>This code is perfectly valid, but since most common systems use 4 bytes for both ints and pointers, you will most likely print out \"1\" every time.</p>\n\n<p>If you instead wrote:</p>\n\n<pre><code>cout &lt;&lt; sizeof(x) / sizeof(*x) &lt;&lt; endl;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>cout &lt;&lt; sizeof(x) / sizeof(x[0]) &lt;&lt; endl;\n</code></pre>\n\n<p>you would get \"sizeof(int[10]) / sizeof(int)\", which equals 10. This is because the type of <em>x</em> is not int*, but int[10], or \"an array of 10 ints\".</p>\n\n<p>As answered by R Sahu, sizeof() evaluates at compile-time, so if it can't figure out the size, your code will not compile.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5249738"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 35465521, "answer_count": 2, "score": 1, "last_activity_date": 1455736860, "creation_date": 1455735784, "last_edit_date": 1455736860, "question_id": 35465431, "link": "https://stackoverflow.com/questions/35465431/sizeofp-are-my-results-undefined", "title": "sizeof(*p) are my results undefined?", "body": "<p>In this code, I'm dereferencing an element that is uninitialized. Are my results undefined? </p>\n\n<pre><code>int x[10];\nint *p = x;\n\ncout &lt;&lt; sizeof(p) / sizeof(*p) &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "arduino", "embedded", "placement-new", "teensy"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1455735919, "post_id": 35465405, "comment_id": 58626572, "body": "<code>static_cast&lt;AudioStream*&gt;</code> is suspicious, and your operator new/delete would need to be <code>inline</code> if there are in header. (And I think they should be in only cpp file)."}, {"owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455736949, "post_id": 35465405, "comment_id": 58627231, "body": "@Jarod42 The reason I&#39;m trying to do that is that there are several different classes that derive from AudioStream, and I want to upcast them to their parent class, so within the class I am defining here I only need to keep one pointer (of type AudioStream) to the buffer where they are placed, rather than keep a separate pointer for each type  and a bunch of logic to figure out where the pointer returned from &quot;new&quot; should be put"}, {"owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455737235, "post_id": 35465405, "comment_id": 58627420, "body": "basically the problem is that in the library I&#39;m using, in class &quot;AudioStream&quot; only the &quot;update&quot; function for the stream has been declared &quot;virtual&quot;, so if I&#39;m going to store a pointer to the superclass for all subclasses of &quot;AudioStream&quot; I believe I have to downcast the pointer every time I want to call a method other than that for one of its subclasses"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455738227, "post_id": 35465405, "comment_id": 58628100, "body": "Do you know <b>why</b> you do placement new ? what is <code>_waveform</code> and how has it been initialized ?"}, {"owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1455740347, "post_id": 35465405, "comment_id": 58629462, "body": "As in the accepted answer to this question: <a href=\"http://stackoverflow.com/questions/35371369/finding-out-the-largest-size-of-several-objects-for-placement-new\" title=\"finding out the largest size of several objects for placement new\">stackoverflow.com/questions/35371369/&hellip;</a>  _waveform is a type of one of the subclasses of AudioStream within the union in the private variable section, and then I&#39;m using the following (_current tone is a pointer of type AudioStream):  <code>_current_tone = static_cast&lt;AudioStream*&gt;(new (&amp;_waveform) AudioSynthWaveform);</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "is_accepted": false, "score": 1, "last_activity_date": 1455767178, "creation_date": 1455767178, "answer_id": 35472451, "question_id": 35465405, "link": "https://stackoverflow.com/questions/35465405/using-placement-new-with-the-teensy-3/35472451#35472451", "title": "Using placement new with the Teensy 3", "body": "<p>I found the most straightforward way to resolve this is to simply open up </p>\n\n<pre><code>/opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/new.h\n</code></pre>\n\n<p>And put the prototypes</p>\n\n<pre><code>void *operator new(size_t size, void *ptr);\n\nvoid operator delete(void *obj, void *alloc);\n</code></pre>\n\n<p>there to multiple overload the operator, and then the functions in the associated \".cpp\" file.</p>\n\n<p>Not sure why that wasn't included to begin with...</p>\n"}], "owner": {"reputation": 1473, "user_id": 139996, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/139e403bc51d49d3de61db25632e8ec4?s=128&d=identicon&r=PG", "display_name": "Bitrex", "link": "https://stackoverflow.com/users/139996/bitrex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1455767178, "creation_date": 1455735719, "question_id": 35465405, "link": "https://stackoverflow.com/questions/35465405/using-placement-new-with-the-teensy-3", "title": "Using placement new with the Teensy 3", "body": "<p>I have a C++ class in the Arduino/Teensy environment which is defined in a \".h\" file. Within the \".cpp\" file I'm attempting to do \"placement new\" with some code. I'm getting the following error:</p>\n\n<pre><code>oscillator.h:17: error: no matching function for call to 'operator new(sizetype, AudioSynthWaveform*)'\n_current_tone = static_cast&lt;AudioStream*&gt;(new (&amp;_waveform) AudioSynthWaveform);\n^\n/tmp/build578ae2c22656d87e9d0d68db21416349.tmp/sketch/oscillator.h:17:68: note: candidate is:\nIn file included from /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/Printable.h:25:0,\nfrom /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/Print.h:39,\nfrom /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/Stream.h:24,\nfrom /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/HardwareSerial.h:169,\nfrom /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/WProgram.h:16,\nfrom /opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/Arduino.h:1,\nfrom /tmp/build578ae2c22656d87e9d0d68db21416349.tmp/sketch/Synthesizer.ino.cpp:1:\n/opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/new.h:12:8: note: void* operator new(size_t)\nvoid * operator new(size_t size);\n^\n/opt/arduino-1.6.7/hardware/teensy/avr/cores/teensy3/new.h:12:8: note:   candidate expects 1 argument, 2 provided\nexit status 1\nno matching function for call to 'operator new(sizetype, AudioSynthWaveform*)'\n</code></pre>\n\n<p>So it looks like problem is that in the Teensy core libraries placement new isn't defined - the operator is expecting only a single argument, not two.</p>\n\n<p>If I define my own implementation of placement new in a \".h\" file like so and include it in the header file of the above class:</p>\n\n<pre><code>#ifndef NEW_H\n#define NEW_H\n\nvoid *operator new(size_t size, void *ptr){\n  return ptr;\n}\n\nvoid operator delete(void *obj, void *alloc){\n  return;\n}\n\n#endif //NEW_H\n</code></pre>\n\n<p>it seems to work, but only if I use placement new in a method within the header file. I get a similar error about only a single argument being expected if I move the code out of the header and into the \".cpp\" implementation file.</p>\n\n<p>Is there a way to resolve this?</p>\n"}, {"tags": ["c++", "windows", "networking", "ip", "winsock2"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1455739254, "post_id": 35465126, "comment_id": 58628770, "body": "Your last parameter to <code>getsockname()</code> is wrong. You need to assign the <code>sizeof()</code> value to a real <code>int</code> variable and then pass a pointer to that variable to <code>getsockname()</code> (which can modify the value, so it needs to be a real variable), do not simply type-cast the <code>sizeof()</code> value directly to a pointer.  And you are not doing any error handling on <code>getsockname()</code>&#39;s return value, either. Don&#39;t call <code>inet_ntoa()</code> if <code>getsockname()</code> fails, the data will be garbage."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455739647, "post_id": 35465126, "comment_id": 58629021, "body": "Also, you did not show what values you are populating the <code>hints</code> variable with when calling <code>getaddrinfo()</code>. If it returns an IPv6 address and you create an IPv6 socket, your use of a <code>sockaddr_in</code> variable will not work, you need to use <code>sockaddr_in6</code> or better <code>sockaddr_storage</code> instead. And <code>inet_ntoa()</code> only works with IPv4, not IPv6, so you would need to use <code>inet_ntop()</code> or equivalent instead."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455739801, "post_id": 35465126, "comment_id": 58629122, "body": "Also, <code>getaddrinfo()</code> can return multiple IP addresses for a given host, so you should be looping through the entire <code>addrinfo</code> chain.  If one address fails, try the next one, and so on until one succeeds or the chain is exhausted.  THEN retry the entire chain again if desired, repeating as needed."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455740479, "post_id": 35465126, "comment_id": 58629548, "body": "Thanks, I figured out the same but if you write an answer I&#39;ll accept yours instead. Good to know about IPv6 but thankfully this is entirely local and I won&#39;t have to deal with that. The while loop does do the looping for trying all the addresses so far as I know."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1455740621, "post_id": 35465126, "comment_id": 58629627, "body": "The <code>while</code> loop you have shown DOES NOT account for multiple IP addreses in the <code>addrinfo</code> chain. And if you want to limit your code to IPv4, just make sure you specify <code>AF_INET</code> in the <code>hints</code> and not <code>AF_INET6</code> or <code>AF_UNSPEC</code>."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455740678, "post_id": 35465126, "comment_id": 58629677, "body": "Ah, good to know. I was using <code>AF_UNSPEC</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1455740833, "post_id": 35465126, "comment_id": 58629753, "body": "Read the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms738520.aspx\" rel=\"nofollow noreferrer\"><code>getaddrinfo()</code> documentation</a>: &quot;<i>A value of <code>AF_UNSPEC</code> for <code>ai_family</code> indicates the caller will accept any protocol family. This value can be used to <b>return both IPv4 and IPv6 addresses</b> for the host name pointed to by the <code>pNodeName</code> parameter</i>&quot;, so you have to pay attention to the actual <code>ai_family</code> value you are passing to <code>socket()</code>, it could be either <code>AF_INET</code> or <code>AF_INET6</code>, which then affects all uses of <code>sockaddr_XXX</code> structures on that socket."}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1455740908, "post_id": 35465126, "comment_id": 58629802, "body": "@RemyLebeau Well that&#39;s news to me. The first one has always been failing so I thought it was looping and selecting the next one which worked. This is a separate question but what am I missing that actually loops to the next potential address?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 0, "creation_date": 1455741041, "post_id": 35465126, "comment_id": 58629873, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/103764/discussion-between-remy-lebeau-and-enigma\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 0, "creation_date": 1455736299, "post_id": 35465186, "comment_id": 58626791, "body": "An example of the usage of <code>getsockname()</code> would also be helpful."}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1455735019, "creation_date": 1455735019, "answer_id": 35465186, "question_id": 35465126, "link": "https://stackoverflow.com/questions/35465126/how-can-i-get-the-ip-of-the-interface-getaddrinfo-addrinfo-uses-for-connect/35465186#35465186", "title": "How can I get the IP of the interface getaddrinfo() (addrinfo) uses for connect()", "body": "<p>After connecting, call <code>getsockname()</code> to find out the address of the local side of the socket (<code>getpeername</code> for the remote side).</p>\n\n<p>You can also call <code>bind()</code> before <code>connect()</code> to select a particular local address... pass zero as the port number if you want the OS to select a free ephemeral port as it does when you don't call bind at all.</p>\n"}, {"tags": [], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "is_accepted": true, "score": 1, "last_activity_date": 1455740142, "creation_date": 1455740142, "answer_id": 35466850, "question_id": 35465126, "link": "https://stackoverflow.com/questions/35465126/how-can-i-get-the-ip-of-the-interface-getaddrinfo-addrinfo-uses-for-connect/35466850#35466850", "title": "How can I get the IP of the interface getaddrinfo() (addrinfo) uses for connect()", "body": "<p>This did the trick:</p>\n\n<pre><code>SOCKADDR_IN ClientSocketInterface;\nmemset(&amp;ClientSocketInterface, 0, sizeof(ClientSocketInterface));\nint iNlen = sizeof(ClientSocketInterface);\n\ngetsockname(m_ConnectSocket, (SOCKADDR*)&amp;ClientSocketInterface, &amp;iNlen);\n\nstring sIP = inet_ntoa(ClientSocketInterface.sin_addr);\nSTrace = String::Format(\"Client IP: [{0}:{1}]\", gcnew String(sIP.c_str()), htons(ClientSocketInterface.sin_port));\nTrace(STrace, TRACE_INFO);\n</code></pre>\n"}], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1717, "favorite_count": 1, "accepted_answer_id": 35466850, "answer_count": 2, "score": 0, "last_activity_date": 1455740142, "creation_date": 1455734862, "last_edit_date": 1455739116, "question_id": 35465126, "link": "https://stackoverflow.com/questions/35465126/how-can-i-get-the-ip-of-the-interface-getaddrinfo-addrinfo-uses-for-connect", "title": "How can I get the IP of the interface getaddrinfo() (addrinfo) uses for connect()", "body": "<p>I need to be able to verify my app is using the right interface and IMO the best way to do that is to know the IP of the interface it's trying to use.</p>\n\n<pre><code>struct addrinfo                 *result = NULL,\n                                *ptr = NULL,\n                                hints;\n</code></pre>\n\n<p><code>getaddrinfo(sServer.c_str(), DEFAULT_PORT, &amp;hints, &amp;result);</code></p>\n\n<pre><code>ptr=result;\n\niResult = SOCKET_ERROR;\n\nint iTries = 0;\nwhile (iResult == SOCKET_ERROR &amp;&amp; iTries &lt;= 5)\n{\n    // Create a SOCKET for connecting to server\n    m_ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, ptr-&gt;ai_protocol);\n\n    // Connect to server.\n    iResult = connect( m_ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n    if (iResult == SOCKET_ERROR)\n    {\n        closesocket(m_ConnectSocket);\n        m_ConnectSocket = INVALID_SOCKET;\n\n        ptr = result-&gt;ai_next;\n    }\n\n    iTries++;\n}\n</code></pre>\n\n<p>I'm guessing I need to get it out of <code>ptr</code> or <code>result</code> but I have no idea how.</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>I added some <code>getsockname()</code> code which as far as I can tell is just fabricating random IP's. I have no idea where they are coming from:</p>\n\n<pre><code>    if (iResult == SOCKET_ERROR)\n    {\n        closesocket(m_ConnectSocket);\n        m_ConnectSocket = INVALID_SOCKET;\n\n        ptr = result-&gt;ai_next;\n    }\n    else\n    {\n        SOCKADDR_IN ClientSocketInterface;\n\n        getsockname(m_ConnectSocket, (SOCKADDR*)&amp;ClientSocketInterface, (int*)sizeof(ClientSocketInterface));\n\n        string sIP = inet_ntoa(ClientSocketInterface.sin_addr);\n    }\n</code></pre>\n\n<p>I got <code>44.x.x.x</code>, <code>200.x.x.x</code>, <code>60.x.x.x</code> IP's in the first three tests so something isn't quite right. I can verify that when it is a valid socket, I am able to send/receive between <code>localhost</code>.</p>\n"}, {"tags": ["c++", "parsing", "c++11"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455734597, "post_id": 35464996, "comment_id": 58625779, "body": "Use <code>stringstream</code>, then you can read the first word into a throwaway string."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 3, "last_activity_date": 1455734921, "last_edit_date": 1455734921, "creation_date": 1455734584, "answer_id": 35465033, "question_id": 35464996, "link": "https://stackoverflow.com/questions/35464996/taking-doubles-out-of-a-specific-string/35465033#35465033", "title": "taking doubles out of a specific string", "body": "<p>A simple way to handle this is to load the string into a <a href=\"http://en.cppreference.com/w/cpp/io/basic_stringstream\" rel=\"nofollow\"><code>std::stringstream</code></a> and then use its <code>operator &gt;&gt;</code> to extract the different parts.  In the example I use a dummy string called <code>eater</code> that is used to extract the <code>\"Vertex\"</code> part out of the string.</p>\n\n<pre><code>std::stringstream ss(orbits)\nstd::string eater;\nss &gt;&gt; eater; //consumes \"Vertex\"\nss &gt;&gt; x &gt;&gt; y &gt;&gt; z; // gets the doubles\n</code></pre>\n\n<p>We could even scope the extraction part so that the temporary <code>string</code> and <code>stringstream</code> only exist for the extraction like</p>\n\n<pre><code>{\n    std::stringstream ss(orbits)\n    std::string eater;\n    ss &gt;&gt; eater; //consumes \"Vertex\"\n    ss &gt;&gt; x &gt;&gt; y &gt;&gt; z; // gets the doubles\n}\n// now ss and eater are gone and x, y and z are populated.\n</code></pre>\n\n<p>You could also do this as a function if you do not like free scopes like that.</p>\n"}], "owner": {"reputation": 11, "user_id": 5818364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/454eb3895e3b50a1d56484a00ec78f3c?s=128&d=identicon&r=PG&f=1", "display_name": "n. Doe", "link": "https://stackoverflow.com/users/5818364/n-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 35465033, "answer_count": 1, "score": 0, "last_activity_date": 1455734921, "creation_date": 1455734427, "last_edit_date": 1455734791, "question_id": 35464996, "link": "https://stackoverflow.com/questions/35464996/taking-doubles-out-of-a-specific-string", "title": "taking doubles out of a specific string", "body": "<p>All my strings will be formatted such as</p>\n\n<pre><code>std::string templine;\ntempline = \"vertex 4.5 2.2 1\";\n</code></pre>\n\n<p>something of that sort. of course different doubles will be input but vertex will always be there\nI tried <code>stod</code> but I just don't know what to do.</p>\n\n<p>just to test it I did this:</p>\n\n<pre><code>    std::string orbits = \"Vertex 4.5 2.3 5\";\ndouble x,y,z;\nstd::size_t offset = 0;\n\nz = std::stod(&amp;orbits[7], &amp;offset);\ny = std::stod(&amp;orbits[offset+2]);\nx = std::stod(&amp;orbits[offset+2]);\n\nstd::cout &lt;&lt; \"z \" &lt;&lt; z &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"y \" &lt;&lt; y &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"x \" &lt;&lt; x &lt;&lt; std::endl;\n</code></pre>\n\n<p>it gives me this error</p>\n\n<p>terminate called after throwing an instance of 'std::invalid_argument'\n  what():  stod\nAborted</p>\n"}, {"tags": ["c++", "debugging", "overflow", "codeblocks", "unsigned-long-long-int"], "answers": [{"tags": [], "owner": {"reputation": 7763, "user_id": 5924721, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LWjjj.png?s=128&g=1", "display_name": "Frank Puffer", "link": "https://stackoverflow.com/users/5924721/frank-puffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1455735655, "last_edit_date": 1455735655, "creation_date": 1455735197, "answer_id": 35465237, "question_id": 35464806, "link": "https://stackoverflow.com/questions/35464806/project-euler-task-8-code-starts-returning-wrong-answers-after-certain-point/35465237#35465237", "title": "Project Euler task #8, code starts returning wrong answers after certain point", "body": "<p>Use <code>unsigned long long int</code> instead of int to calculate the product. The product of 13 digits can easily become larger than the largest int.</p>\n"}], "owner": {"reputation": 1, "user_id": 5941472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02604514f7ab83a654a2a69aa33c59e6?s=128&d=identicon&r=PG&f=1", "display_name": "CopperB", "link": "https://stackoverflow.com/users/5941472/copperb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1455738948, "answer_count": 1, "score": -2, "last_activity_date": 1455735655, "creation_date": 1455733769, "question_id": 35464806, "link": "https://stackoverflow.com/questions/35464806/project-euler-task-8-code-starts-returning-wrong-answers-after-certain-point", "closed_reason": "Not suitable for this site", "title": "Project Euler task #8, code starts returning wrong answers after certain point", "body": "<p>I am having some sort of a problem in a task from\n <a href=\"https://projecteuler.net/problem=8\" rel=\"nofollow\">https://projecteuler.net/problem=8</a>, (finding highest product of 13 consecutive numbers from a 1000-number string) where up to some point the program gives me predictable results and then the function returns a number very close to the <strong><em>unsigned long long int</em></strong> range. The point where it occurs depends on the values which were read, for instance if the string of numbers consisted mostly of 8s and 9s, it would happen sooner than it would if it had only 5s and 6s. Why does it happen?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\n\nint product (int res, int a, char buffer[]){\nfor (int i = 0; i &lt; a; i++){\n//simple char to int conversion\nres*=(buffer[i] - '0');\n}\n\nreturn res;\n}\n\nint main () {\nchar check;\nint res = 1;\nfstream plik;\nplik.open (\"8.txt\");\nunsigned long long int high;\nunsigned long long int result;\n//main function in the program\nif (plik.good()){\n    char buffer [13];\n    for (int i = 0; i &lt; 13; i++){\n        plik &gt;&gt; buffer[i];\n    }\n    result = product (res, 13, buffer);\n    high = result;\n    cout &lt;&lt; high &lt;&lt; endl;\n    //the main checking loop\n    while (!plik.eof()){\n    //just an interruption to make it possible to view consecutive products\n    //the iteration in the buffer\n    for (int i = 0; i &lt; 12; i++){\n    buffer[i] = buffer[i+1];\n    }\n    plik &gt;&gt; buffer[12];\n    result = product (res, 13, buffer);\n    //comparison between the current product and highest one\n    if (high &lt; result){\n    high = result;\n    }\n    cin &gt;&gt; check;\n    cout &lt;&lt; high &lt;&lt; endl;\n    //again a tool for checking where the problem arises\n    for (int i = 0; i &lt; 13; i++){\n        cout &lt;&lt; buffer[i] &lt;&lt; \"  \";\n    }\n    cout &lt;&lt; endl;\n    }\n    plik.close();\n    cout &lt;&lt; high &lt;&lt; endl;\n}\n\nreturn 0;\n\n}\n</code></pre>\n\n<p>The program prints out the currently highest product and all the numbers currently contained in the array.\nIt looks like this:\n<a href=\"http://i.stack.imgur.com/E9FaK.png\" rel=\"nofollow\">The error</a></p>\n"}, {"tags": ["c++", "prefix-operator"], "answers": [{"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1455734258, "post_id": 35464872, "comment_id": 58625575, "body": "&quot;See Brian&#39;s answer for the actual answer&quot;... sorry, I couldn&#39;t resist."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455734273, "post_id": 35464872, "comment_id": 58625584, "body": "I did not ask if that is syntactically correct, I asked if that leads to UB, which is completely different."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1455734641, "post_id": 35464872, "comment_id": 58625807, "body": "I quoted the standard with respect to the operators themselves, &quot;...the result is an lvalue...&quot; basically has one part of the answer there..."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1455734985, "post_id": 35464872, "comment_id": 58626022, "body": "Well, I&#39;ve since updated it. I didn&#39;t see Brian&#39;s answer earlier, that was why I modified my answer to acknowledge his"}], "tags": [], "owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "is_accepted": false, "score": 2, "last_activity_date": 1455734868, "last_edit_date": 1495541270, "creation_date": 1455733992, "answer_id": 35464872, "question_id": 35464793, "link": "https://stackoverflow.com/questions/35464793/why-chained-prefix-increment-decrement-for-builtin-type-is-not-ub-for-c/35464872#35464872", "title": "Why chained prefix increment/decrement for builtin type is not UB for C++?", "body": "<p>See <a href=\"https://stackoverflow.com/a/35464886/1621391\">Brian's</a> answer for simpler terms, .</p>\n\n<p>It's legal cause the C++ standard says so, emphasis are mine... Going by the C++14 draft</p>\n\n<p><strong>5.3.2 Increment and decrement [expr.pre.incr]</strong></p>\n\n<blockquote>\n  <p>The operand of prefix ++ is modified by adding 1, or set to true if it\n  is bool (this use is deprecated). The operand shall be a modifiable\n  lvalue. The type of the operand shall be an arithmetic type or a\n  pointer to a completely-defined object type. <strong>The result is the\n  updated operand; it is an lvalue</strong>, and it is a bit-field if the\n  operand is a bit-field. If x is not of type bool, the expression ++x\n  is equivalent to x+=1</p>\n</blockquote>\n\n<p>So, this is perfectly legal</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n    int x =8;\n    int y = ++ ++ ++ ++ ++ ++ ++ ++ x;\n    cout &lt;&lt; x &lt;&lt; \" \" &lt;&lt; y;\n\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>16 16\n</code></pre>\n\n<p><strong>1.9 Program execution [intro.execution]</strong> </p>\n\n<blockquote>\n  <p><strong>15</strong>...If a side effect on a scalar object is unsequenced relative to either\n  another side effect on the <strong>same scalar object</strong> or a value computation\n  using the value of the <strong>same scalar object</strong>, the behavior is undefined. ...</p>\n</blockquote>\n\n<p>And it's attached example:</p>\n\n<pre><code>void f(int, int);\nvoid g(int i, int* v) {\ni = v[i++]; // the behavior is undefined\ni = 7, i++, i++; // i becomes 9\ni = i++ + 1; // the behavior is undefined\ni = i + 1; // the value of i is incremented\nf(i = -1, i = -1); // the behavior is undefined\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1455734437, "post_id": 35464886, "comment_id": 58625671, "body": "It became way too complicated"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 11, "last_activity_date": 1455734058, "creation_date": 1455734058, "answer_id": 35464886, "question_id": 35464793, "link": "https://stackoverflow.com/questions/35464793/why-chained-prefix-increment-decrement-for-builtin-type-is-not-ub-for-c/35464886#35464886", "title": "Why chained prefix increment/decrement for builtin type is not UB for C++?", "body": "<p>In C++11 and later, UB occurs when there are two writes or a write and a read that are unsequenced and access the same memory location. But <code>++x</code> is equivalent to <code>x+=1</code>, so <code>++ ++n1</code> is equivalent to <code>(n1+=1)+=1</code>, and here the reads and writes happen in a strict sequence because of the properties of assignment and compound assignment operators: first <code>n1</code> is read, then one plus the original value is written, then the resulting value is read again, then one plus that value is written back.</p>\n\n<p>In C++03, this <em>was</em> UB, because of the old rule you allude to: there is no sequence point between the two modifications. But in C++11 there are no longer any sequence points; instead there is the \"sequenced before\" partial order.</p>\n"}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 35464886, "answer_count": 2, "score": 9, "last_activity_date": 1455734868, "creation_date": 1455733721, "question_id": 35464793, "link": "https://stackoverflow.com/questions/35464793/why-chained-prefix-increment-decrement-for-builtin-type-is-not-ub-for-c", "title": "Why chained prefix increment/decrement for builtin type is not UB for C++?", "body": "<p>In cpprefernce.com <a href=\"http://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"noreferrer\">example</a> for prefix increment there is such code:</p>\n\n<pre><code>int n1 = 1;\n...\nint n3 = ++ ++n1;\n</code></pre>\n\n<p>Why chained increment in this case does not lead to UB? Is rule for at most once modified not violated in this case?</p>\n"}, {"tags": ["c++", "irrlicht"], "comments": [{"owner": {"reputation": 19025, "user_id": 17826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5a7aca325b6be746ea9e9ae17ff5b6b?s=128&d=identicon&r=PG", "display_name": "Mark Bessey", "link": "https://stackoverflow.com/users/17826/mark-bessey"}, "edited": false, "score": 1, "creation_date": 1455735527, "post_id": 35464709, "comment_id": 58626322, "body": "You should try running the executable from a terminal window, so you can see what errors are output (if any). Alternatively, debug it using GDB."}], "answers": [{"tags": [], "owner": {"reputation": 406, "user_id": 3817643, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1166064908/picture?type=large", "display_name": "Irrmich", "link": "https://stackoverflow.com/users/3817643/irrmich"}, "is_accepted": false, "score": 0, "last_activity_date": 1456130266, "last_edit_date": 1456130266, "creation_date": 1456129308, "answer_id": 35548837, "question_id": 35464709, "link": "https://stackoverflow.com/questions/35464709/irrlicht-build-terminated-with-status-1/35548837#35548837", "title": "Irrlicht build terminated with status 1", "body": "<p>Obviously, the line <code>Process terminated with status 1</code> indicate that your createDevice function failed at this line:\n<code>if(device==0) return 1;</code></p>\n\n<p>Your build is not terminated with status 1 as the title of your question  claims, the build have succeed, your execution has started and then the execution is terminated with this status</p>\n\n<p>Why not use the official way of getting the irrlicht driver:</p>\n\n<pre><code>#include \"driverChoice.h\"\nint main()\n{\n     video::E_DRIVER_TYPE driverType=driverChoiceConsole();\n    if (driverType==video::EDT_COUNT)\n        return 1;\n\n// create device\n\nIrrlichtDevice* device = createDevice(driverType,\n        core::dimension2d&lt;u32&gt;(640, 480), 16, false, false, false);\n\nif (device == 0)\n    return 1; // could not create selected driver.\n//your code + irrlicht loop\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5556109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a09e1969100f31f79421ea66e5acca9?s=128&d=identicon&r=PG&f=1", "display_name": "ckenyon_17", "link": "https://stackoverflow.com/users/5556109/ckenyon-17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1456130266, "creation_date": 1455733455, "last_edit_date": 1455734964, "question_id": 35464709, "link": "https://stackoverflow.com/questions/35464709/irrlicht-build-terminated-with-status-1", "title": "Irrlicht build terminated with status 1", "body": "<p>So I've been playing around with the Irrlicht engine in C::B but I don't think I have things linked correctly. When I build my project, I get one error:</p>\n\n<pre><code>-------------- Build: Linux in First Game (compiler: GNU GCC Compiler)---------------\n\nTarget is up to date.\nNothing to be done (all items are up-to-date).\n\n\n-------------- Run: Linux in First Game (compiler: GNU GCC Compiler)--    -------------\n\nChecking for existence: /home/administrator/Desktop/First Game/bin/Debug/First Game\nExecuting: /home/administrator/Desktop/First\\ Game/bin/Debug/First\\ Game  (in /home/administrator/Desktop/First Game/.)\nProcess terminated with status 1 (0 minute(s), 0 second(s))\n</code></pre>\n\n<p>I don't know if it's something I have linked wrong or what. I will provide my source code too, which is very much like the example I got it from. </p>\n\n<pre><code>#include &lt;/home/administrator/Desktop/irrlicht1.8.3/include/irrlicht.h&gt;\n#include &lt;iostream&gt;\n\n\nusing namespace irr;\n\n#ifdef _IRR_WINDOWS_\n#pragma comment(lib, \"Irrlicht.lib\")\n#pragma comment(linker, \"/subsystem:windows /ENTRY:mainCRTStartup\")\n#endif\n\n\n\n\nint main()\n{\nvideo::E_DRIVER_TYPE driverType;\n\nprintf(\"Please select the driver you want for this example:\\n\"\\\n    \" (a) OpenGL 1.5\\n (b) Direct3D 9.0c\\n (c) Direct3D 8.1\\n\"\\\n    \" (d) Burning's Software Renderer\\n (e) Software Renderer\\n\"\\\n    \" (f) NullDevice\\n (otherKey) exit\\n\\n\");\n\nchar i;\nstd::cin &gt;&gt; i;\n\nswitch(i)\n{\n    case 'a': driverType = video::EDT_OPENGL;   break;\n    case 'b': driverType = video::EDT_DIRECT3D9;break;\n    case 'c': driverType = video::EDT_DIRECT3D8;break;\n    case 'd': driverType = video::EDT_BURNINGSVIDEO;break;\n    case 'e': driverType = video::EDT_SOFTWARE; break;\n    case 'f': driverType = video::EDT_NULL;     break;\n    default: return 1;\n}\n\nIrrlichtDevice *device =\n    createDevice(driverType, core::dimension2d&lt;u32&gt;(640,480));\n\nif(device==0)\n    return 1;\n\nvideo::IVideoDriver* driver = device-&gt;getVideoDriver();\nscene::ISceneManager* smgr = device-&gt;getSceneManager();\n\ndevice-&gt;getFileSystem()-&gt;addFileArchive(\"/home/administrator/Desktop/irrlicht-1.8.3/ascension.pk3\");\n\nscene::IAnimatedMesh* mesh = smgr-&gt;getMesh(\"ascension.bsp\");\nscene::ISceneNode* node = 0;\n\nif (mesh)\n    node = smgr-&gt;addOctreeSceneNode(mesh-&gt;getMesh(0), 0, -1, 1024);\n\nif (node)\n    node-&gt;setPosition(core::vector3df(-1300,-144,-1249));\n\nsmgr-&gt;addCameraSceneNodeFPS();\n\n/*\nThe mouse cursor needs not be visible, so we hide it via the\nirr::IrrlichtDevice::ICursorControl.\n*/\ndevice-&gt;getCursorControl()-&gt;setVisible(false);\n\n\nint lastFPS = -1;\n\nwhile(device-&gt;run())\n{\n    if (device-&gt;isWindowActive())\n    {\n        driver-&gt;beginScene(true, true, video::SColor(255,200,200,200));\n        smgr-&gt;drawAll();\n        driver-&gt;endScene();\n\n        int fps = driver-&gt;getFPS();\n\n        if (lastFPS != fps)\n        {\n            core::stringw str = L\"Irrlicht Engine - Quake 3 Map example [\";\n            str += driver-&gt;getName();\n            str += \"] FPS:\";\n            str += fps;\n\n            device-&gt;setWindowCaption(str.c_str());\n            lastFPS = fps;\n        }\n    }\n    else\n        device-&gt;yield();\n}\n\ndevice-&gt;drop();\nreturn 0;\n}\n</code></pre>\n\n<p>Any help would be appreciated. </p>\n"}, {"tags": ["c++", "makefile", "cmake", "qt4"], "comments": [{"owner": {"reputation": 274, "user_id": 5930639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qd3QgRZwiIM/AAAAAAAAAAI/AAAAAAAAAFY/tFfpIqgQYE0/photo.jpg?sz=128", "display_name": "Khale_Kitha", "link": "https://stackoverflow.com/users/5930639/khale-kitha"}, "edited": false, "score": 0, "creation_date": 1455734100, "post_id": 35464634, "comment_id": 58625500, "body": "<a href=\"http://doc.qt.io/qt-4.8/qtglobal.html#Q_WS_WIN\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/qtglobal.html#Q_WS_WIN</a>"}, {"owner": {"reputation": 1279, "user_id": 1543263, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WaOlX.png?s=128&g=1", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1543263/fernando"}, "reply_to_user": {"reputation": 274, "user_id": 5930639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qd3QgRZwiIM/AAAAAAAAAAI/AAAAAAAAAFY/tFfpIqgQYE0/photo.jpg?sz=128", "display_name": "Khale_Kitha", "link": "https://stackoverflow.com/users/5930639/khale-kitha"}, "edited": false, "score": 0, "creation_date": 1455735471, "post_id": 35464634, "comment_id": 58626293, "body": "Why does CMake is complaining about this Q_WS_WIN if I&#39;m on Linux?"}, {"owner": {"reputation": 274, "user_id": 5930639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qd3QgRZwiIM/AAAAAAAAAAI/AAAAAAAAAFY/tFfpIqgQYE0/photo.jpg?sz=128", "display_name": "Khale_Kitha", "link": "https://stackoverflow.com/users/5930639/khale-kitha"}, "edited": false, "score": 0, "creation_date": 1455736650, "post_id": 35464634, "comment_id": 58627054, "body": "I&#39;m a bit out of practice on C++, but it appears to me that the code is stating to use Q_WS_WIN if Q_WS_WIN is not defined.  Doesn&#39;t really make sense."}], "owner": {"reputation": 1279, "user_id": 1543263, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WaOlX.png?s=128&g=1", "display_name": "Fernando", "link": "https://stackoverflow.com/users/1543263/fernando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2209, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455733252, "creation_date": 1455733252, "question_id": 35464634, "link": "https://stackoverflow.com/questions/35464634/what-does-q-ws-win-represents", "title": "What does Q_WS_WIN represents?", "body": "<p>I'm trying to build a project using CMake in Ubuntu 14.04 64bit but CMake always fails while trying to whether Q_WS_WIN exists.\nWhat does Q_WS_WIN means/represents?</p>\n\n<p>Here is the output of the error log:</p>\n\n<pre><code>Determining if the Q_WS_WIN exist failed with the following output:\nChange Dir: /home/software/software_qt/build/CMakeFiles/CMakeTmp\n\nRun Build Command:/usr/bin/make \"cmTryCompileExec3778196767/fast\"\n/usr/bin/make -f CMakeFiles/cmTryCompileExec3778196767.dir/build.make CMakeFiles/cmTryCompileExec3778196767.dir/build\nmake[1]: Entering directory `/home/software/software_qt/build/CMakeFiles/CMakeTmp'\n/usr/bin/cmake -E cmake_progress_report /home/software/software_qt/build/CMakeFiles/CMakeTmp/CMakeFiles 1\nBuilding CXX object CMakeFiles/cmTryCompileExec3778196767.dir/CheckSymbolExists.cxx.o\n/usr/bin/c++    -Wall -Wextra  -I/usr/include/qt4    -o CMakeFiles/cmTryCompileExec3778196767.dir/CheckSymbolExists.cxx.o -c /home/software/software_qt/build/CMakeFiles/CMakeTmp/CheckSymbolExists.cxx\n/home/software/software_qt/build/CMakeFiles/CMakeTmp/CheckSymbolExists.cxx: In function \u2018int main(int, char**)\u2019:\n/home/software/software_qt/build/CMakeFiles/CMakeTmp/CheckSymbolExists.cxx:8:19: error: \u2018Q_WS_WIN\u2019 was not declared in this scope\n   return ((int*)(&amp;Q_WS_WIN))[argc];\n                   ^\nmake[1]: *** [CMakeFiles/cmTryCompileExec3778196767.dir/CheckSymbolExists.cxx.o] Error 1\nmake[1]: Leaving directory `/home/software/software_qt/build/CMakeFiles/CMakeTmp'\nmake: *** [cmTryCompileExec3778196767/fast] Error 2\n\nFile /home/software/software_qt/build/CMakeFiles/CMakeTmp/CheckSymbolExists.cxx:\n/* */\n#include &lt;QtCore/qglobal.h&gt;\n\nint main(int argc, char** argv)\n{\n  (void)argv;\n#ifndef Q_WS_WIN\n  return ((int*)(&amp;Q_WS_WIN))[argc];\n#else\n  (void)argc;\n  return 0;\n#endif\n}\n</code></pre>\n"}, {"tags": ["c++", "encryption", "crypto++"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1456888046, "post_id": 35464554, "comment_id": 59149604, "body": "I reached out to the author of the Crypto++ library about this use case. He&#39;s very busy with other things nowadays, so he does not have the spare cycles to work on these issues. But he remains available to answer questions for us. Once we get pointed in the general direction, I hope we can check-in a fix for your issue. I hope its as simple as a new flag  and maybe <b><i><code>VERIFY_MAC</code></i></b>, which performs the mac verification without the decryption. And maybe <b><i><code>IGNORE_MAC</code></i></b>, which allows you to decrypt-only once you verify the mac."}], "answers": [{"tags": [], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": false, "score": 2, "last_activity_date": 1455751691, "last_edit_date": 1492087698, "creation_date": 1455751285, "answer_id": 35469754, "question_id": 35464554, "link": "https://stackoverflow.com/questions/35464554/no-error-when-using-authenticatedencryptionfilter/35469754#35469754", "title": "No error when using AuthenticatedEncryptionFilter", "body": "<blockquote>\n  <p>My Problem is, that this Method is not throwing an Error when decrypting no matter what inputs are used. I can modify the encrypted file or use another password or whatever, I only get an incorrectly decrypted file, but no exception...<br>\n  <br>\n  Why is not throwing any exception?</p>\n</blockquote>\n\n<p>The short of it is, <strong><em><code>FileSource file(url.c_str(), false, new AuthenticatedDecryptionFilter...)</code></em></strong> means the message is <strong><em>not</em></strong> <code>Put</code> because <strong><em><code>pumpAll=false</code></em></strong>. Because the message is not <code>Put</code>, <strong><em><code>LastPut</code></em></strong>, which triggers the MAC verification, is not called. You can trigger it with <strong><em><code>MessageEnd</code></em></strong>, but you are not at the end of the message, so that's always going to fail.</p>\n\n<p>I understand what you are trying to do, and the fix is trickier.</p>\n\n<hr>\n\n<p>In the big picture, nearly everything is OK. You are using authenticated encryption and MAC'ing before you consume the data. But I'm wondering if the single or \"one shot\" MAC is the way to approach the problem.</p>\n\n<p>To use the single MAC in this case, you probably want to disgorge decryption from verification. You still want to do them, but you want to do them as separate steps. Before decryption, you will verify the MAC over the entire message (read-only operation, fast). Once the MAC verifies, you then perform decryption (read-write operation, slow). Unfortunately, the library does not offer a separate <strong><em><code>EAX_Mac</code></em></strong> class that you can key, consume the message and then determine if the MAC is good.</p>\n\n<p>Maybe the way to go is to apply a MAC at each block sized data unit, like 4096 or 16384. This is the use case or handling envisioned by folks like Bernstein in the <a href=\"https://competitions.cr.yp.to/caesar.html\" rel=\"nofollow noreferrer\">CAESAR Competition</a>. The competition is for the next generation of authenticated encryption schemes. Unfortunately, the library does not have a filter set to do it.</p>\n\n<hr>\n\n<p>Applying the MAC on block sized data units through a custom filter is possible, and its an interesting problem in security engineering because each security context must be unique. I think the way to approach it is...</p>\n\n<p>Create a <code>BlockedAuthenticatedEncryptionFilter</code>. Instead of keying the encryptor object:</p>\n\n<pre><code>EAX&lt;AES&gt;::Encryption encryptor;\nencryptor.SetKeyWithIV(derived.data(), derived.size(), iv, iv.size());\n</code></pre>\n\n<p>key the <code>BlockedAuthenticatedEncryptionFilter</code> instead:</p>\n\n<pre><code>FileSource f(... new BlockedAuthenticatedEncryptionFilter(\n    encryptor,\n    key.data(), key.size(),\n    iv, iv.size(),\n    new FileSink(...));\n</code></pre>\n\n<p>Now, <code>BlockedAuthenticatedEncryptionFilter</code> will accumulate source data. Whenever a full block is available, it performs the authenticated encryption on the block under the key and iv. That's an encryption under a security context (<strong><em><code>{message,key,iv}</code></em></strong>), so the security context must be changed for the next block or message. That's why the filter is keyed rather than the mode.</p>\n\n<p>To change the security context <strong><em><code>{message,key,iv}</code></em></strong> for the next message, you might be able to do a simple <code>Increment</code> on both the key and iv. That will ensure the security context is unique for each message.</p>\n\n<p>One thing you <strong><em>can't</em></strong> do is call <code>encryptor.GetNextIV()</code> to get the next <em>deterministic</em> iv derived from the cipher's state. That's because, by design, the library does not offer it. This comes up on occasion on the mailing list, but I can't find a sample message at the moment.</p>\n\n<p>However, I'm not sure what troubles <code>next_key = Increment(key)</code> and <code>next_iv = Increment(iv)</code> could cause, so I would need to think about it and research it a bit. I would probably ask about it on the <a href=\"https://security.stackexchange.com/\">Security Stack Exchange</a> or the <a href=\"https://crypto.stackexchange.com/\">Cryptography Stack Exchange</a>, too.</p>\n"}], "owner": {"reputation": 180, "user_id": 5889490, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6690a4cf47486da80afdd3bea5f27c4?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/5889490/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1455751691, "creation_date": 1455732985, "last_edit_date": 1455751570, "question_id": 35464554, "link": "https://stackoverflow.com/questions/35464554/no-error-when-using-authenticatedencryptionfilter", "title": "No error when using AuthenticatedEncryptionFilter", "body": "<p>I am using Crypto++ to Encrypt and Decrypt a File with the following code:</p>\n\n<pre><code>try {\n\n    EAX&lt;AES&gt;::Encryption encryptor;\n    encryptor.SetKeyWithIV(derived.data(), 32, ivb, ivb.size());\n    FileSource f(fileUrl.c_str(), false,\n                 new AuthenticatedEncryptionFilter(encryptor, new FileSink(\n                         std::string(fileUrl).c_str()),  CryptoPP::AuthenticatedDecryptionFilter::THROW_EXCEPTION |  CryptoPP::AuthenticatedDecryptionFilter::MAC_AT_END ));\n    std::fstream file(fileUrl, std::ios::binary | std::ios::ate);\n    size_t remaining = file.tellg();\n    file.close();\n    size_t BLOCK_SIZE = 16384;\n    while (remaining &amp;&amp; !f.SourceExhausted()) {\n        const unsigned int req = STDMIN(remaining, BLOCK_SIZE);\n        f.Pump(req);\n        f.Flush(false);\n        remaining -= req;\n    }\n\n} catch (const CryptoPP::Exception&amp; e) {\n    cout &lt;&lt; e.GetWhat();\n    return 5;\n}\n</code></pre>\n\n<p>Decryption:</p>\n\n<pre><code>try {\n\n    EAX&lt;AES&gt;::Decryption decryptor;\n    decryptor.SetKeyWithIV(derived2.data(), 32, ivb2, ivb2.size());\n\n    FileSource fe(fileUrl.c_str(), false,\n                  new AuthenticatedDecryptionFilter(decryptor, new FileSink(\n                          std::string(fileUrl).c_str()), CryptoPP::AuthenticatedDecryptionFilter::THROW_EXCEPTION |  CryptoPP::AuthenticatedDecryptionFilter::MAC_AT_END ));\n\n    file.open(fileUrl, std::ios::binary | std::ios::ate);\n    size_t remaining = file.tellg();\n    remaining -= 3;\n    file.close();\n\n    size_t BLOCK_SIZE = 16384;\n    while (remaining &amp;&amp; !fe.SourceExhausted()) {\n        const unsigned int req = STDMIN(remaining, BLOCK_SIZE);\n        fe.Pump(req);\n        fe.Flush(false);\n\n        remaining -= req;\n    }\n} catch (const CryptoPP::Exception&amp; e) {\n    cout &lt;&lt; e.GetWhat();\n    return 5;\n}\n</code></pre>\n\n<p>My Problem is, that this Method is not throwing an Error when decrypting no matter what inputs are used. I can modify the encrypted file or use another password or whatever, I only get an incorrectly decrypted file, but no exception.</p>\n\n<p>As far as I have read, the <code>AuthenticatedDecryptionFilter</code> should check for this stuff automatically and throw an exception.</p>\n\n<p>Why is not throwing any exception?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 1, "creation_date": 1455733492, "post_id": 35464540, "comment_id": 58625140, "body": "Do you have libcpmt.lib? Are you linking it in your program?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1455733616, "post_id": 35464540, "comment_id": 58625220, "body": "Make sure that you are using 32 bit libraries and your project is 32 bit and that all of the dependencies for your application were built with the same toolset."}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455733794, "post_id": 35464540, "comment_id": 58625317, "body": "@drescherjm Project is build in 32 bit libraries, and working on 64 bit os. I would like to say that on normal Platform Toolset program work..."}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1455733869, "post_id": 35464540, "comment_id": 58625365, "body": "@Litty How can see it ? It worked before i change Platform Toolset"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455733886, "post_id": 35464540, "comment_id": 58625381, "body": "Are you using any third party libraries? If so did you recompile them with the v120_xp toolset?"}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455734057, "post_id": 35464540, "comment_id": 58625478, "body": "@drescherjm I&#39;m using only with C++11 Libraries. This is console program, so i don&#39;t have to use third party libraries."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455734100, "post_id": 35464540, "comment_id": 58625499, "body": "Did you try a clean build?"}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455734411, "post_id": 35464540, "comment_id": 58625654, "body": "@drescherjm What do you mean ? I was builded on default Platform Toolset, and it was worked. It were  worked with this Toolset , but not on /MT mode. It were worked on /MD mode"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455734461, "post_id": 35464540, "comment_id": 58625688, "body": "I mean to rebuild all for your entire solution after making the change."}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455734543, "post_id": 35464540, "comment_id": 58625737, "body": "@drescherjm This same error..."}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "edited": false, "score": 0, "creation_date": 1455734901, "post_id": 35464540, "comment_id": 58625970, "body": "Maybe this line from Output window will help you and me to resolve problem. :LINK : fatal error LNK1104: cannot open file &#39;libcpmt.lib&#39;"}, {"owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1455735170, "post_id": 35464540, "comment_id": 58626123, "body": "@drescherjm On debug mode it work ! I&#39;m sure that the problem is in /MT option ...."}], "owner": {"reputation": 1, "user_id": 5941492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af904930b374a394d3020deeb9e9c58?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Wawrzk&#243;w", "link": "https://stackoverflow.com/users/5941492/marcin-wawrzk%c3%b3w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455997989, "creation_date": 1455732938, "last_edit_date": 1455997989, "question_id": 35464540, "link": "https://stackoverflow.com/questions/35464540/lnk1104-microsoft-visual-studio-error", "title": "LNK1104 Microsoft Visual Studio Error", "body": "<p>My problem is LNK1104 : </p>\n\n<blockquote>\n  <p>cannot open file libcpmt.lib .</p>\n</blockquote>\n\n<p>I have to use Platform Toolset v120_xp to have compatibility with windows xp, also i have to use /MT option in Project properties>C/C++>Code Generation>Runtime Library. How can I fix it ? \n@up</p>\n"}, {"tags": ["c++", "linux", "opencv", "makefile", "cmake"], "comments": [{"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 1, "creation_date": 1455733775, "post_id": 35464535, "comment_id": 58625305, "body": "It&#39;s great that you&#39;ve provided so much information, but consider isolating your problem in the future. There&#39;s a lot of code here that isn&#39;t necessary to address your issue."}, {"owner": {"reputation": 33, "user_id": 5703104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0j4yAK8zxD4/AAAAAAAAAAI/AAAAAAAAADs/eUlXRi-UXWU/photo.jpg?sz=128", "display_name": "Th&#224;nh V&#245; Minh", "link": "https://stackoverflow.com/users/5703104/th%c3%a0nh-v%c3%b5-minh"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 1, "creation_date": 1455770169, "post_id": 35464535, "comment_id": 58640760, "body": "Yah. This is the first time I post question in StackOverflow and I was so frustrated about it. Thanks for your advice, I will consider carefully for the next time post. :)"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 5703104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0j4yAK8zxD4/AAAAAAAAAAI/AAAAAAAAADs/eUlXRi-UXWU/photo.jpg?sz=128", "display_name": "Th&#224;nh V&#245; Minh", "link": "https://stackoverflow.com/users/5703104/th%c3%a0nh-v%c3%b5-minh"}, "edited": false, "score": 1, "creation_date": 1455770034, "post_id": 35464981, "comment_id": 58640706, "body": "Yeah. I cannot say how to express my grateful. This problem took me nearly a week to figure out. Thank you again. I wish I can vote more than one :)"}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "reply_to_user": {"reputation": 33, "user_id": 5703104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0j4yAK8zxD4/AAAAAAAAAAI/AAAAAAAAADs/eUlXRi-UXWU/photo.jpg?sz=128", "display_name": "Th&#224;nh V&#245; Minh", "link": "https://stackoverflow.com/users/5703104/th%c3%a0nh-v%c3%b5-minh"}, "edited": false, "score": 0, "creation_date": 1455772713, "post_id": 35464981, "comment_id": 58641611, "body": "@Th&#224;nhV&#245;Minh : Don&#39;t forget to to actually accept this answer so writer gets the rep points deserved. See meta.stackexchange.com/a/5235/160242 . Good luck to all."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 3, "last_activity_date": 1455734379, "creation_date": 1455734379, "answer_id": 35464981, "question_id": 35464535, "link": "https://stackoverflow.com/questions/35464535/cmake-linker-does-not-recognized-the-header-file/35464981#35464981", "title": "CMake linker does not recognized the header file", "body": "<p>The issue is that CMake compiles the readData.cpp separately and in there is no inclusion of <code>&lt;string&gt;</code> and <code>using namespace std;</code> in there, so it doesn't compile because of that.</p>\n\n<p>When you include readData.cpp, features.cpp, featuresRGBD.cpp etc. in main.cpp (which compiled as you can see) then you do not need to setup them in CMake for separate compilation, i.e. remove them from the CMake <code>add_executable(...</code> line.</p>\n\n<p>But in general it is usual to do it the other way, i.e. compile each *.cpp separately, not include it in main.cpp, and <code>#include ...</code> in each of them just the stuff they need.</p>\n"}], "owner": {"reputation": 33, "user_id": 5703104, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0j4yAK8zxD4/AAAAAAAAAAI/AAAAAAAAADs/eUlXRi-UXWU/photo.jpg?sz=128", "display_name": "Th&#224;nh V&#245; Minh", "link": "https://stackoverflow.com/users/5703104/th%c3%a0nh-v%c3%b5-minh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2081, "favorite_count": 0, "accepted_answer_id": 35464981, "answer_count": 1, "score": 3, "last_activity_date": 1455734379, "creation_date": 1455732920, "question_id": 35464535, "link": "https://stackoverflow.com/questions/35464535/cmake-linker-does-not-recognized-the-header-file", "title": "CMake linker does not recognized the header file", "body": "<p>I'm a beginner in the Linux programing and here is my issue. \nMy project is a OpenCV project written by C++ in Linux environment. In order to compile, I use CMake to build a Makefile and run. In order to make clear, I am also new in playing with CMake.</p>\n\n<p>First, I have a main.cpp where starts everything:</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/highgui/highgui.hpp&gt;\n#include &lt;cstdio&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;cmath&gt;\n#include &lt;dirent.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;string.h&gt;\n\nusing namespace std;\n\n#include \"constants.h\"\n#include \"readData.cpp\"\n#include \"features.cpp\"\n#include \"featuresRGBD.cpp\"\n\nbool USE_HOG = true;\n\n// print error message\nvoid errorMsg(string message) {\n    cout &lt;&lt; \"ERROR! \" &lt;&lt; message &lt;&lt; endl;\n    exit(1);\n}\n</code></pre>\n\n<p>As we can see, I had included some predefined files as: constants.h, readData.cpp,features.cpp and featuresRGBD.cpp</p>\n\n<p>In constaints.cpp, I set up some constant variables:</p>\n\n<pre><code>const int SLEEP_TIME = 0;\n\nconst int JOINT_NUM = 11;\nconst int JOINT_DATA_ORI_NUM = 9;\nconst int JOINT_DATA_POS_NUM = 3;\nconst int JOINT_DATA_NUM = (JOINT_DATA_ORI_NUM+JOINT_DATA_POS_NUM);\nconst int JOINT_DATA_TYPE_NUM = 2; // two types : orientation and xyz position\n\nconst int TORSO_JOINT_NUM = 2;\nconst int HEAD_JOINT_NUM = 0;\n\nconst int POS_JOINT_NUM = 4;\nconst int POS_JOINT_DATA_NUM = 3;\n\nconst int POS_LEFT_HAND_NUM = 0;\nconst int POS_RIGHT_HAND_NUM = 1;\nconst int POS_LEFT_FOOT_NUM = 2;\nconst int POS_RIGHT_FOOT_NUM = 3;\n\nconst int X_RES = 320;\nconst int Y_RES = 240;\nconst int RGBD_data = 4;\n\n// 30 fps\nconst int frameStoreNum = 66;\nconst int compareFrame[] = {0, -5, -9, -14, -20, -27, -35, -44, -54, -65};\nconst int compareFrameNum = sizeof(compareFrame)/sizeof(compareFrame[0]);\n</code></pre>\n\n<p>In readData.cpp, I implemented my method using with some constants in constants.cpp</p>\n\n<pre><code>bool READ_FROM_PNG = true;\n\nclass readData {\nprivate:\n\n    int currentFrameNum;\n    int currentFrameNum_RGBD;\n    int lastFrame;\n\n    string dataLocation;\n    string dataLocation_mirrored;\n    string fileName;\n    string fileName_skeleton;\n    string fileName_RGBD;\n    string curActivity;\n    map&lt;string, string&gt; data_act_map;\n    ifstream* file;\n    ifstream* file_RGBD;\n\n    bool mirrored;\n\n    // print error message\n    void errorMsg(string message, bool exitProgram) {\n        cout &lt;&lt; \"ERROR! \" &lt;&lt; message &lt;&lt; endl;\n        printf(\"\\tcurrentFrameNum = %d\\n\", currentFrameNum);\n        printf(\"\\tcurrentFrameNum_RGBD = %d\\n\", currentFrameNum_RGBD);\n\n        if (exitProgram) {\n            exit(1);\n        }\n    }    \n\n    void errorMsg(string message) {\n        errorMsg(message, true);\n    }\n\n\n\n    bool parseChk(bool chk, bool skeleton) {\n        if (!chk) {\n            if (skeleton) {\n                errorMsg(\"parsing error. (skeleton)\", true); \n            } else {\n                errorMsg(\"parsing error. (RGBD) - IGNORE THIS ERROR!! (all random dataset will hit this error)\", false);\n            }\n            return false;\n        }\n        return true;\n    }\n\n    // read skeleton data file\n    void prepareSkeletonData() {\n        curActivity = data_act_map[fileName];\n\n        if (!mirrored) {\n            fileName_skeleton = dataLocation + fileName + \".txt\";\n        } else {\n            fileName_skeleton = dataLocation_mirrored + fileName + \".txt\";\n        }\n\n        printf(\"\\tOpening \\\"%s\\\" (%s)\\n\", (char*)fileName_skeleton.c_str(), (char*)curActivity.c_str());\n        file = new ifstream((char*)fileName_skeleton.c_str(), ifstream::in);\n        currentFrameNum = -99;\n    }\n\n    void closeSkeletonData() {\n        file-&gt;close();\n        printf(\"\\tskeleton file closed\\n\");\n    }\n\n    // return true if data retrieving was successful\n    bool readNextLine_skeleton(double **data, double **pos_data, int **data_CONF, int *data_pos_CONF) {\n        string line;        \n        bool file_ended = true;\n\n        if (getline(*file,line)) {\n            file_ended=false;\n            stringstream lineStream(line);\n            string element;\n\n            int jointCount=0;  \n            int joint_dataCount = 0;\n\n            int pos_jointCount = 0;      \n            int pos_joint_dataCount = 0;\n\n            parseChk(getline(lineStream, element, ','), true);\n            currentFrameNum = atoi((char*)element.c_str());\n\n            if (element.compare(\"END\") == 0) {\n                file_ended = true;\n                return false;\n            }\n\n            while (getline(lineStream, element, ',')) {\n                double e = strtod((char*)element.c_str(), NULL);\n\n                if (jointCount &lt; JOINT_NUM) {\n                    data[jointCount][joint_dataCount] = e;\n                    joint_dataCount++;\n\n                    if (joint_dataCount == JOINT_DATA_ORI_NUM) {\n                        parseChk(getline(lineStream, element, ','), true); // ori conf value\n                        data_CONF[jointCount][0] = atoi((char*)element.c_str());\n                    } else if (joint_dataCount &gt;= JOINT_DATA_NUM) {\n                        parseChk(getline(lineStream, element, ','), true); // pos conf value\n                        data_CONF[jointCount][1] = atoi((char*)element.c_str());\n                        jointCount++;\n                        joint_dataCount = 0;\n                    }\n\n                } else {\n                    // pos only joints\n                    if (pos_jointCount &gt;= POS_JOINT_NUM) {\n                        errorMsg(\"PARSING ERROR!!!!!\");\n                    }\n                    pos_data[pos_jointCount][pos_joint_dataCount] = e;\n                    pos_joint_dataCount++;\n                    if (pos_joint_dataCount &gt;= POS_JOINT_DATA_NUM) {\n                        parseChk(getline(lineStream, element, ','), true); // pos conf value\n                        data_pos_CONF[pos_jointCount] = atoi((char*)element.c_str());\n\n                        pos_jointCount++;\n                        pos_joint_dataCount = 0;\n                    }\n                }\n            }\n\n            // check if there is more data in current frame..\n            if (getline(lineStream, element,',')) {\n                errorMsg(\"more data exist in skeleton data ..\\n\");\n            }\n\n        } \n\n        if (currentFrameNum == -99) {\n            errorMsg(\"file does not exist or empty!!\");\n        }\n\n        return !file_ended;\n    }\n\n    // read RGBD data file\n    void prepareRGBDData() {\n        fileName_RGBD = dataLocation + fileName + \"_rgbd.txt\";\n        printf(\"\\tOpening \\\"%s\\\" (%s)\\n\", (char*)fileName_RGBD.c_str(), (char*)curActivity.c_str());\n        file_RGBD = new ifstream((char*)fileName_RGBD.c_str(), ifstream::in);\n        currentFrameNum = -99;\n    }\n\n    void closeRGBDData() {\n        file_RGBD-&gt;close();\n        printf(\"\\tRGBD file closed\\n\");\n    }\n\n    // return true if data retrieving was successful\n    bool readNextPNG(int ***data) {\n        stringstream ss;\n        ss &lt;&lt; currentFrameNum;\n        fileName_RGBD = dataLocation + fileName + \"/RGB_\" + ss.str() +\".png\";\n        string fileName_Depth = dataLocation + fileName + \"/Depth_\" + ss.str() +\".png\";\n        if (currentFrameNum == 1) {\n            printf(\"\\tOpening \\\"%s\\\" and so forth..\\n\", \n                    (char*)fileName_RGBD.c_str());\n            printf(\"\\tOpening \\\"%s\\\" and so forth..\\n\", \n                    (char*)fileName_Depth.c_str());\n        }\n\n        // Load an image from file\n        cv::Mat rgbImage = cv::imread((char*)fileName_RGBD.c_str(),1);\n        cv::Mat colorArr[3];\n        cv::split(rgbImage, colorArr);\n\n        cv::Mat depthImage = cv::imread((char*)fileName_Depth.c_str(),-1);\n\n        if (rgbImage.data == NULL) {\n            printf(\"ERROR! Unable to open file %s.\\n\", (char*)fileName_RGBD.c_str());\n            exit(1);\n        }\n        if (depthImage.data == NULL) {\n            printf(\"ERROR! Unable to open file %s.\\n\", (char*)fileName_Depth.c_str());\n            exit(1);\n        }\n\n        for (int y=0; y&lt;Y_RES; y++){ \n            // opencv uses BGR order\n            uchar* Bptr = colorArr[0].ptr&lt;uchar&gt;(y); \n            uchar* Gptr = colorArr[1].ptr&lt;uchar&gt;(y); \n            uchar* Rptr = colorArr[2].ptr&lt;uchar&gt;(y); \n            ushort* IRptr = depthImage.ptr&lt;ushort&gt;(y); \n            for(int x=0;x&lt;X_RES; x++){\n                // our data is stored in RGB order\n                data[x][y][0] = Rptr[x]; \n                data[x][y][1] = Gptr[x]; \n                data[x][y][2] = Bptr[x]; \n                data[x][y][3] = IRptr[x];\n            } \n        } \n\n        return true;\n    }\n\n    // return true if data retrieving was successful\n    bool readNextLine_RGBD(int ***IMAGE) {\n        string line;        \n        char* line_c;\n        bool file_ended = true;\n\n        if (getline(*file_RGBD,line)) {\n            file_ended = false;\n\n            line_c = (char*)line.c_str();\n            char* element = strtok(line_c, \",\");\n            if (element == NULL || strcmp(element,\"END\") == 0) {\n                file_ended = true;\n                return false;\n            }\n            currentFrameNum_RGBD = atoi(element);\n            if (currentFrameNum != currentFrameNum_RGBD) {\n                printf(\"skeleton: %d rgbd: %d\\n\", currentFrameNum, currentFrameNum_RGBD);\n                errorMsg(\"FRAME NUMBER BETWEEN SKELETON AND RGBD DOES NOT MATCH!!!!!!!!! (READING RGBD)\");\n            }\n\n            for (int y=0;y&lt;Y_RES;y++) {\n                for (int x=0;x&lt;X_RES;x++) {   \n                    for (int d = 0; d&lt;RGBD_data; d++) {     \n\n                        element = strtok(NULL, \",\");  // passing NULL keeps tokenizing previous call\n                        if (element == NULL) {\n                            file_ended = true;\n                            return false;\n                        }\n                        int e = atoi(element);\n\n                        if (!mirrored) {\n                            IMAGE[x][y][d] = e;\n                        } else {\n                            IMAGE[x][(Y_RES-1)-y][d] = e; \n                        }\n                    }\n                }\n            }            \n\n            // check if there is more data in current frame..\n            element = strtok(NULL, \",\");  \n            if (element != NULL) {\n                printf(\"line_c = %s\\n\", line_c);\n                errorMsg(\"more data exist in RGBD data ..\\n\");\n\n            }\n\n        } \n\n        return !file_ended;\n    }\n\npublic:\n\n\n\n    // return true if data retrieving was successful\n    bool readNextFrame(double **data, double **pos_data, int **data_CONF, int *data_pos_CONF, int ***IMAGE) {\n        if (currentFrameNum % 100 == 0) {\n            printf(\"\\t\\t(progress..) frame num = %d\\n\", currentFrameNum);\n        }\n        bool status = readNextLine_skeleton(data,pos_data, data_CONF, data_pos_CONF);\n        if (!status) {\n            printf(\"\\t\\ttotal number of frames = %d\\n\", lastFrame);\n            return false;\n        }\n\n        bool status_RGBD;\n        if (!READ_FROM_PNG) {\n            status_RGBD = readNextLine_RGBD(IMAGE);\n        } else {\n            status_RGBD = readNextPNG(IMAGE);    \n        }\n        if (status_RGBD) {\n            lastFrame = currentFrameNum;\n        } else {\n            printf(\"\\t\\ttotal number of frames = %d\\n\", lastFrame);\n        }\n        return status_RGBD;\n    }\n\n    readData(string dataLoc, string fileN, map&lt;string, string&gt; d_a_map, int i, bool mirrored, string dataLoc_mirrored) {\n        if (!mirrored) {\n            printf(\"%d. \", i);    \n        } else {\n            printf(\"%d(M). \", i);\n        }\n        dataLocation = dataLoc;\n        dataLocation_mirrored = dataLoc_mirrored;\n        fileName = fileN;\n        data_act_map = d_a_map;\n        this-&gt;mirrored = mirrored;\n\n        prepareSkeletonData();\n        if (!READ_FROM_PNG) {\n            prepareRGBDData();\n        }\n    }\n\n    readData() {\n\n    }\n\n    ~readData(){\n        closeSkeletonData();\n        if (!READ_FROM_PNG) {\n            closeRGBDData();\n        }\n        printf(\"\\n\");\n    }\n\n};\n</code></pre>\n\n<p>And continues to other files, I also use some predefined constants.\nThen, I write the CMakeLists.txt in order to build the MakeFiles, like this:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject( FeatureExtractor )\nfind_package( OpenCV REQUIRED )\nadd_executable( FeatureExtractor main.cpp readData.cpp features.cpp featuresRGBD.cpp HOG.cpp HOGFeaturesOfBlock.cpp)\ntarget_link_libraries( FeatureExtractor ${OpenCV_LIBS} )\n</code></pre>\n\n<p>Since I read somewhere, they said that \"CMake handles dependencies automatically so headers don\u2019t need to be listed\" so I don't mention the header file (constaint.h) in the config CMakeLists.txt.</p>\n\n<p>Then, I met this error when I run the command to combine and build the Makefile</p>\n\n<pre><code>make\nScanning dependencies of target FeatureExtractor\n[ 16%] Building CXX object CMakeFiles/FeatureExtractor.dir/main.cpp.o\n[ 33%] Building CXX object CMakeFiles/FeatureExtractor.dir/readData.cpp.o\n/home/minhthanh/Downloads/Test/readData.cpp:11:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:12:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:13:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:14:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:15:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:16:5: error: \u2018string\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:17:5: error: \u2018map\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:18:5: error: \u2018ifstream\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:19:5: error: \u2018ifstream\u2019 does not name a type\n/home/minhthanh/Downloads/Test/readData.cpp:24:19: error: \u2018string\u2019 has not been declared\n/home/minhthanh/Downloads/Test/readData.cpp:34:19: error: \u2018string\u2019 has not been declared\n/home/minhthanh/Downloads/Test/readData.cpp:287:21: error: expected \u2018)\u2019 before \u2018dataLoc\u2019\n/home/minhthanh/Downloads/Test/readData.cpp:317:2: error: expected \u2018}\u2019 at end of input\n/home/minhthanh/Downloads/Test/readData.cpp: In member function \u2018void readData::errorMsg(int, bool)\u2019:\n/home/minhthanh/Downloads/Test/readData.cpp:25:9: error: \u2018cout\u2019 was not declared in this scope\n/home/minhthanh/Downloads/Test/readData.cpp:25:41: error: \u2018endl\u2019 was not declared in this scope\n/home/minhthanh/Downloads/Test/readData.cpp:26:59: error: \u2018printf\u2019 was not declared in this scope\n/home/minhthanh/Downloads/Test/readData.cpp:30:19: error: \u2018exit\u2019 was not declared in this scope\n/home/minhthanh/Downloads/Test/readData.cpp: In member function \u2018bool readData::parseChk(bool, bool)\u2019:\n/home/minhthanh/Downloads/Test/readData.cpp:43:59: error: invalid conversion from \u2018const char*\u2019 to \u2018int\u2019 [-fpermissive]\n/home/minhthanh/Downloads/Test/readData.cpp:24:10: error:   initializing argument 1 of \u2018void readData::errorMsg(int, bool)\u2019 [-fpermissive]\n/home/minhthanh/Downloads/Test/readData.cpp:45:119: error: invalid conversion from \u2018const char*\u2019 to \u2018int\u2019 [-fpermissive]\n/home/minhthanh/Downloads/Test/readData.cpp:24:10: error:   initializing argument 1 of \u2018void readData::errorMsg(int, bool)\u2019 [-fpermissive]\n/home/minhthanh/Downloads/Test/readData.cpp: In member function \u2018void readData::prepareSkeletonData()\u2019:\n/home/minhthanh/Downloads/Test/readData.cpp:54:9: error: \u2018curActivity\u2019 was not declared in this scope\n/home/minhthanh/Downloads/Test/readData.cpp:54:23: error: \u2018data_act_map\u2019 was not declared in this scope\n</code></pre>\n\n<p>Though it was a long list, I guess the problem is that some library and file I included in the main.cpp are not recognized in the below files (readData.cpp, features.cpp,...).</p>\n\n<p>How can I config or modify in order to those files I include below could recognized those predefined files and libraries?</p>\n"}, {"tags": ["c++", "c++-cli", "interop", "dllimport"], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5467566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db5e16d2eb1798600c7f175f1445fcc5?s=128&d=identicon&r=PG&f=1", "display_name": "DrCocoa", "link": "https://stackoverflow.com/users/5467566/drcocoa"}, "edited": false, "score": 0, "creation_date": 1455733557, "post_id": 35464693, "comment_id": 58625180, "body": "Different compiler. Very astute of you."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "reply_to_user": {"reputation": 37, "user_id": 5467566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db5e16d2eb1798600c7f175f1445fcc5?s=128&d=identicon&r=PG&f=1", "display_name": "DrCocoa", "link": "https://stackoverflow.com/users/5467566/drcocoa"}, "edited": false, "score": 0, "creation_date": 1455733709, "post_id": 35464693, "comment_id": 58625268, "body": "It will in many cases not work even when called directly from C++, when different compilers are used (e.g. I suppose MSVC vs. mingw will have different definitions of std::string)."}, {"owner": {"reputation": 627, "user_id": 5438128, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5d0e061b267311381d8226c3bb60a20c?s=128&d=identicon&r=PG", "display_name": "ebyrob", "link": "https://stackoverflow.com/users/5438128/ebyrob"}, "edited": false, "score": 4, "creation_date": 1455733862, "post_id": 35464693, "comment_id": 58625360, "body": "<code>extern &quot;C&quot;</code> is pretty hard to honor with <code>std::string</code> when you think about it..."}, {"owner": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "edited": false, "score": 1, "creation_date": 1455734989, "post_id": 35464693, "comment_id": 58626024, "body": "You don&#39;t need to get as drastic a difference as MSVC vs. mingw to have problems passing std::string: Even different versions of MSVC will cause the issue."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 1, "last_activity_date": 1455733422, "creation_date": 1455733422, "answer_id": 35464693, "question_id": 35464520, "link": "https://stackoverflow.com/questions/35464520/calling-a-native-c-dll-with-stdstring-argument-from-c-cli/35464693#35464693", "title": "Calling a native c++ dll with std::string argument from c++/cli", "body": "<p>Is the DLL and the CLI compiled with the same compiler? In general, different compilers can have different definitions of <code>std::string</code> which can cause the error.</p>\n\n<p>Therefore I wouldn't recommend in general to use <code>std::string</code> or any compiler specific types in DLL interface.</p>\n\n<p>I guess that was the reason you make the function <code>extern \"C\"</code>. If it doesn't work without <code>extern \"C\"</code>, it will most likely not work (because of different mangling rules, which imply either different compiler or at least different <code>std::string</code> definition).</p>\n\n<p>In this case I would prefer to create a wrapping function which takes <code>const char *</code> pointers.</p>\n"}], "owner": {"reputation": 37, "user_id": 5467566, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/db5e16d2eb1798600c7f175f1445fcc5?s=128&d=identicon&r=PG&f=1", "display_name": "DrCocoa", "link": "https://stackoverflow.com/users/5467566/drcocoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 945, "favorite_count": 1, "accepted_answer_id": 35464693, "answer_count": 1, "score": 0, "last_activity_date": 1455733422, "creation_date": 1455732886, "question_id": 35464520, "link": "https://stackoverflow.com/questions/35464520/calling-a-native-c-dll-with-stdstring-argument-from-c-cli", "title": "Calling a native c++ dll with std::string argument from c++/cli", "body": "<p>I have a native c++ dll which I am trying to call from a c++/cli project.  Here's the dll's function</p>\n\n<pre><code>extern \"C\"\n{\n   int DLL_EXPORT Add(std::string s1, std::string s2, std::string s3)\n   {\n     [do stuff]\n   }\n}\n</code></pre>\n\n<p>Here's the reference in c++/cli:</p>\n\n<pre><code>using namespace System::Runtime::InteropServices;\n[DllImport(\"my_dll.dll\")]\nextern \"C\" int Add(std::string, std::string, std::string);\n</code></pre>\n\n<p>When I call the function, I marshal the String^ objects to std::string:</p>\n\n<pre><code>Add(msclr::interop::marshal_as&lt;std::string&gt;(stringA),\n            msclr::interop::marshal_as&lt;std::string&gt;(stringB),\n            msclr::interop::marshal_as&lt;std::string&gt;(stringC));\n</code></pre>\n\n<p>I get an access violation exception when the call to the DLL is made.  </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1455732964, "post_id": 35464517, "comment_id": 58624840, "body": "Do you also have <code>#include &quot;Furniture.h&quot;</code> in the cc file main is in?  Are you including the furniture cc file anywhere?"}, {"owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "edited": false, "score": 2, "creation_date": 1455733214, "post_id": 35464517, "comment_id": 58624983, "body": "I see no <code>#pragma once</code> or include guards in the header."}], "answers": [{"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1455733687, "post_id": 35464722, "comment_id": 58625255, "body": "I would skip the double underscores, as such <a href=\"http://stackoverflow.com/questions/9668947/reserved-names-in-the-global-namespace\">names are reserved</a> for the implementation."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455738781, "post_id": 35464722, "comment_id": 58628455, "body": "BTW, the subject of your answer is called <i>include guards</i>."}, {"owner": {"reputation": 43, "user_id": 5941976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TnL-1tY_sGs/AAAAAAAAAAI/AAAAAAAABnM/2Ku6LP-aWeQ/photo.jpg?sz=128", "display_name": "Henry Gridley", "link": "https://stackoverflow.com/users/5941976/henry-gridley"}, "edited": false, "score": 0, "creation_date": 1455820393, "post_id": 35464722, "comment_id": 58672291, "body": "Thank you so much I&#39;ll make sure I read up on include guards."}], "tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": true, "score": 6, "last_activity_date": 1455733522, "creation_date": 1455733522, "answer_id": 35464722, "question_id": 35464517, "link": "https://stackoverflow.com/questions/35464517/error-redefinition-of-class-but-no-redeclaration/35464722#35464722", "title": "&quot;Error: Redefinition of Class&quot; - But No Redeclaration", "body": "<p>Try adding following code in your .h file. This will prevent redefinition.</p>\n\n<pre><code>#ifndef __FURNITURE_H__\n#define __FURNITURE_H__\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Furniture\n{\n    float width, height, depth;\n    std::string name;\n\npublic:\n    // Constructor\n    Furniture(std::string name);\n    void ReadDimensions();\n    virtual void Print();\n};\n\n#endif\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5941976, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-TnL-1tY_sGs/AAAAAAAAAAI/AAAAAAAABnM/2Ku6LP-aWeQ/photo.jpg?sz=128", "display_name": "Henry Gridley", "link": "https://stackoverflow.com/users/5941976/henry-gridley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3070, "favorite_count": 0, "accepted_answer_id": 35464722, "answer_count": 1, "score": 0, "last_activity_date": 1455733599, "creation_date": 1455732874, "last_edit_date": 1455733599, "question_id": 35464517, "link": "https://stackoverflow.com/questions/35464517/error-redefinition-of-class-but-no-redeclaration", "title": "&quot;Error: Redefinition of Class&quot; - But No Redeclaration", "body": "<p>So I have this header file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Furniture\n{\n    float width, height, depth;\n    std::string name;\n\npublic:\n    // Constructor\n    Furniture(std::string name);\n    void ReadDimensions();\n    virtual void Print();\n};\n</code></pre>\n\n<p>And this .cc file to define the functions declared above:</p>\n\n<pre><code>#include \"Furniture.h\"\n\nFurniture::Furniture(std::string name)\n{\n    this-&gt;name = name;\n}\n\nvoid Furniture::ReadDimensions()\n{\n    // Read width\n    std::cout &lt;&lt; \"Enter width: \";\n    std::cin &gt;&gt; width;\n    // Read height\n    std::cout &lt;&lt; \"Enter height: \";\n    std::cin &gt;&gt; height;\n    // Read depth\n    std::cout &lt;&lt; \"Enter depth: \";\n    std::cin &gt;&gt; depth;\n\n    if (width &lt;= 0 || height &lt;= 0 || depth &lt;=0)\n            std::cout &lt;&lt; \"You entered invalidd values\\n\";\n}\n</code></pre>\n\n<p>And when I try to compile my main file which includes two child classes written in their own files, it gives me an error which reads </p>\n\n<p>\"Furniture.h:4: error: redefinition of \u2018class Furniture\u2019</p>\n\n<p>Furniture.h:5: error: previous definition of \u2018class Furniture\u2019\"</p>\n\n<p>But as far as I know I declared the class correctly and didn't redeclare it in the definition. Why is it giving me this error and what can I do to fix it?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455732766, "post_id": 35464310, "comment_id": 58624726, "body": "That is the correct way to set the viewport and projection matrix. I&#39;m thinking the problem may lie elsewhere. How is <code>proj_matrix</code> calculated initially?"}, {"owner": {"reputation": 41, "user_id": 5415642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014a47c58a0c72e4f634d1983aab4b7?s=128&d=identicon&r=PG&f=1", "display_name": "C. Hennebelle", "link": "https://stackoverflow.com/users/5415642/c-hennebelle"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455733400, "post_id": 35464310, "comment_id": 58625094, "body": "It is initialized as follows: <code>glm::mat4 proj_matrix;</code>"}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455733583, "post_id": 35464310, "comment_id": 58625195, "body": "How big is the triangle you&#39;re rendering? It could be that you&#39;re rendering it but it&#39;s so small that you don&#39;t notice it."}, {"owner": {"reputation": 41, "user_id": 5415642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014a47c58a0c72e4f634d1983aab4b7?s=128&d=identicon&r=PG&f=1", "display_name": "C. Hennebelle", "link": "https://stackoverflow.com/users/5415642/c-hennebelle"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455733714, "post_id": 35464310, "comment_id": 58625270, "body": "I don&#39;t think so, it&#39;s the same size as the original 800x800 window. Here are the vertices coordinates:  <code>static const GLfloat g_vertex_buffer_data[] = { \t-1.0f, -1.0f, 0.0f, \t1.0f, -1.0f, 0.0f, \t0.0f,  1.0f, 0.0f, };</code>"}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 2, "creation_date": 1455733997, "post_id": 35464310, "comment_id": 58625450, "body": "When you&#39;re drawing orthographically, those vertices are sized absolutely. You&#39;re drawing an incredibly tiny triangle, most and most of your vertices there are off of the screen. Try these vertices: <code>{ 0.0f, 0.0f, 0.0f, 800.0f, 0.0f, 0.0f, 400.0f, 800.f, 0.0f, };</code>"}, {"owner": {"reputation": 41, "user_id": 5415642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014a47c58a0c72e4f634d1983aab4b7?s=128&d=identicon&r=PG&f=1", "display_name": "C. Hennebelle", "link": "https://stackoverflow.com/users/5415642/c-hennebelle"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455734422, "post_id": 35464310, "comment_id": 58625662, "body": "Thank you! It works, after the first resizing. Originally though, the drawn triangle is huge, because, as I understand, the drawing mode is not the same. So in order for the triangle to always have the same size, should I change the buffer&#39;s data upon resizing?"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1455735110, "post_id": 35464310, "comment_id": 58626093, "body": "No. Initialize the <code>proj_matrix</code> with <code>glm::ortho</code> and the initial size of the window, then the data can stay the same."}, {"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1455748624, "post_id": 35464310, "comment_id": 58633881, "body": "@ColinBasnett You should post your comments as an answer"}, {"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1455755824, "post_id": 35464310, "comment_id": 58636584, "body": "What are you doing with <code>proj_matrix</code> in your drawing code. <code>proj_matrix</code> is not magically jumping into shader uniforms, you&#39;ve to set it explicitly. BTW: You should always place <code>glViewport</code> in the drawing code, never in the display code. Not adhering to this rule makes dealing with FBOs, HUDs drawing and other advanced techniques much harder in the long run."}], "owner": {"reputation": 41, "user_id": 5415642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1014a47c58a0c72e4f634d1983aab4b7?s=128&d=identicon&r=PG&f=1", "display_name": "C. Hennebelle", "link": "https://stackoverflow.com/users/5415642/c-hennebelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2778, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455733072, "creation_date": 1455732194, "question_id": 35464310, "link": "https://stackoverflow.com/questions/35464310/how-glmortho-works", "title": "How glm::ortho works", "body": "<p>I am fairly new to OpenGL and I am trying to handle a window resizing event using <code>glm::ortho</code>. I am displaying a simple triangle on screen and I am trying to make it so it keeps the same width/height ratio upon window resizing. However, when I resize the window, the triangle just disappears.</p>\n\n<p>Here is my window resizing handling function:</p>\n\n<pre><code>int width = 800, height = 800;\n\nvoid windowResized(GLFWwindow* window, int width2, int height2) {\n\n   width = width2;\n   height = height2;\n\n   glViewport(0, 0, width, height);\n   proj_matrix = glm::ortho(0.0f, (float)width, (float)height, 0.0f);\n}\n</code></pre>\n\n<p>Cheers!</p>\n"}, {"tags": ["c++", "qt", "dll", "qml"], "comments": [{"owner": {"reputation": 284, "user_id": 5559943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b01524c74d09cb8949c04555259719ea?s=128&d=identicon&r=PG&f=1", "display_name": "ahesa", "link": "https://stackoverflow.com/users/5559943/ahesa"}, "edited": false, "score": 1, "creation_date": 1455732345, "post_id": 35464305, "comment_id": 58624498, "body": "Do you mean getting acces to it from qtDesigner like described here : <a href=\"http://doc.qt.io/qt-4.8/designer-creating-custom-widgets.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-4.8/designer-creating-custom-widgets.html</a> ? Edit: what version of qt, what version of tools, what ide, ... ?"}, {"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1455744602, "post_id": 35464305, "comment_id": 58631833, "body": "Your text is missing a description of the problems you have with your code."}, {"owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1455894217, "post_id": 35464305, "comment_id": 58707753, "body": "The above code works just fine. But am trying to come up with a code that gets the contents of &#39;myCpp.lib&#39; in the QML types window. I want to be able to drag and drop my personal widgets to the panel in the design widow of QT. Yes, like mentioned in the link &quot; doc.qt.io/qt-4.8/designer-creating-custom-widgets.html&quot;. I am using QTCreator 5.3 version."}], "owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455732182, "creation_date": 1455732182, "question_id": 35464305, "link": "https://stackoverflow.com/questions/35464305/how-to-get-your-personalized-library-widget-in-qt-design-window", "title": "How to get your personalized library widget in QT design window?", "body": "<p>I am a newbie to QT.\nMy goal is to  access my personalized widget(created in my DLL) from the Design window of application in QT.\nI was able to create the DLL successfully and call it from my application. \nKindly guide me as to how to access the DLL widget which I created in the design window along with other library QML types.</p>\n\n<p>Thanks in advance,</p>\n\n<p>Sam</p>\n\n<p>Please find my files below :</p>\n\n<p><strong>myCppLib.h</strong></p>\n\n<pre><code>#ifndef MYCPPLIB_H\n#define MYCPPLIB_H\n\n#include \"mycpplib_global.h\"\n#include &lt;QDebug&gt;\n#include &lt;QWidget&gt;\n\nclass MYCPPLIBSHARED_EXPORT MyCppLib : public QWidget\n{\nprivate:\n    Q_OBJECT\npublic:\n    MyCppLib();\n\n    void Test();\n\n    //void resize(int, int);\n\n    //void show();\n\n};\n\n#endif // MYCPPLIB_H\n</code></pre>\n\n<p>Application \n<strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;QGuiApplication&gt;\n#include &lt;QApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;mycpplib.h&gt;\n\nint main(int argc, char *argv[])\n{\n    //QGuiApplication app(argc, argv);\n    QApplication app(argc, argv);\n\n    QQmlApplicationEngine engine;\n    engine.load(QUrl(QStringLiteral(\"qrc:/main.qml\")));\n\n    MyCppLib testLib;\n    //testLib.resize(200,200);\n    testLib.setProperty(\"height\", 250);\n    testLib.setProperty(\"width\", 250);\n    testLib.Test();\n    testLib.show();\n\n    return app.exec();\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc", "compilation", "makefile"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1455731845, "post_id": 35464131, "comment_id": 58624211, "body": "Posting the contents of the makefile but not the code! How can anybody help you figure out what&#39;s wrong?"}, {"owner": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 1, "creation_date": 1455731854, "post_id": 35464131, "comment_id": 58624217, "body": "We need to see some code. What is <code>beta</code> or <code>alpha</code>? Are they <code>Pvec&lt;double&gt;</code>?"}, {"owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "edited": false, "score": 1, "creation_date": 1455731922, "post_id": 35464131, "comment_id": 58624262, "body": "I think it is quite feasible from your error messages that, the error lies in methods in &quot;BurstyBTM.cpp&quot;. It has no relation with the Makefile."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 1, "creation_date": 1455731991, "post_id": 35464131, "comment_id": 58624302, "body": "Apparently the compiler believes that the functions <code>normalize</code> and <code>normr</code> are declared with a <code>void</code> return type. So, are they?"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1455732406, "post_id": 35464131, "comment_id": 58624528, "body": "Yes, they are indeed: <a href=\"https://github.com/xiaohuiyan/BurstyBTM/blob/master/src/pvec.h\" rel=\"nofollow noreferrer\">github.com/xiaohuiyan/BurstyBTM/blob/master/src/pvec.h</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4462740"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1455777376, "post_id": 35464131, "comment_id": 58643520, "body": "@RSahu Sorry, as there are many code in the folder, i dont&#39; know to post which piece. Now i have posted the github address and those lines of code that the errors point to. Please tell me if any other one you want to take a look."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4462740"}, "reply_to_user": {"reputation": 5834, "user_id": 2297365, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b4179be309867f97cb08385c9338c436?s=128&d=identicon&r=PG", "display_name": "huu", "link": "https://stackoverflow.com/users/2297365/huu"}, "edited": false, "score": 0, "creation_date": 1455777494, "post_id": 35464131, "comment_id": 58643561, "body": "@huu Could you please take a look at <a href=\"https://github.com/xiaohuiyan/BurstyBTM/blob/master/script/runExample.sh\" rel=\"nofollow noreferrer\">here</a> In the line 8 and line 9 there are declaration. But I am not quite sure whether they are."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4462740"}, "reply_to_user": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1455777639, "post_id": 35464131, "comment_id": 58643627, "body": "@BoPersson it seems to be, please take a look at <a href=\"https://github.com/xiaohuiyan/BurstyBTM/blob/master/src/pmat.h\" rel=\"nofollow noreferrer\">line 314</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4462740"}, "edited": false, "score": 0, "creation_date": 1455778416, "post_id": 35464290, "comment_id": 58643965, "body": "Not only the author said it could be run successfully. Another guy said he could run it in Linux without errors. I am using os x 10.10."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1455732106, "creation_date": 1455732106, "answer_id": 35464290, "question_id": 35464131, "link": "https://stackoverflow.com/questions/35464131/fail-to-compile-and-run-the-c-code-with-gcc48/35464290#35464290", "title": "Fail to compile and run the c++ code with gcc48", "body": "<p>At least the first error BurstyBTM.cpp:129:23 is indeed a coding error and the compiler is right - in pvec.h the Pvec::normalize is defined with void as the return type.</p>\n\n<p>Didn't check the other ones but I suppose it is the same kind of error and I'm wondering how the author even managed to compile it (it will definitely not compile with g++ and MSVC).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4462740"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455777696, "creation_date": 1455731544, "last_edit_date": 1455777696, "question_id": 35464131, "link": "https://stackoverflow.com/questions/35464131/fail-to-compile-and-run-the-c-code-with-gcc48", "title": "Fail to compile and run the c++ code with gcc48", "body": "<p>I have cloned someone's c++ code from github but failed to compile it. The author told me that he could successfully run it with gcc 4.8.4. So I installed gcc48 using <code>homebrew</code> and specify the version of <code>gcc</code> in the <code>makefile</code> placed in his code folder.</p>\n\n<p>Here is the setting in Makefile:</p>\n\n<pre><code>CC=g++-4.8\nCFLAGS=-c -pipe -O3\n#INCLUDE=-I /home/xh/jianguoyun/my/code/cpp/mylib\nMODEL_EXE=bbtm infer\n\nall:$(MODEL_EXE) \n\nbbtm:BurstyBTM.o main.o\n    $(CC) $^ -o $@\n\ninfer:infer.o\n    $(CC) $^ -o $@\n\nmail.o:BurstyBTM.h\nBurstyBTM.o:BurstyBTM.h biterm.h doc.h\ninfer.o:infer.h doc.h\n\n%.o:%.cpp\n    $(CC) $(INCLUDE) $(CFLAGS) $&lt; -o $@ \n\nclean:\n    rm -rf *.o $(MODEL_EXE)\n</code></pre>\n\n<p>However, an error is got during the compile:</p>\n\n<pre><code>g++-4.8  -c -pipe -O3 BurstyBTM.cpp -o BurstyBTM.o \nBurstyBTM.cpp: In member function 'Pvec&lt;double&gt; BurstyBTM::compute_pz_b(Biterm&amp;)':\nBurstyBTM.cpp:129:23: error: could not convert 'pz.Pvec&lt;T&gt;::normalize&lt;double&gt;(0.0)' from 'void' to 'Pvec&lt;double&gt;'\n   return pz.normalize();\n                       ^\nBurstyBTM.cpp: In member function 'void BurstyBTM::save_pz(std::string)':\nBurstyBTM.cpp:158:41: error: conversion from 'void' to non-scalar type 'Pvec&lt;double&gt;' requested\n   Pvec&lt;double&gt; pz = nb_z.normalize(alpha);\n                                         ^\nBurstyBTM.cpp: In member function 'void BurstyBTM::save_pw_z(std::string)':\nBurstyBTM.cpp:164:37: error: conversion from 'void' to non-scalar type 'Pmat&lt;double&gt;' requested\n   Pmat&lt;double&gt; pw_z = nwz.normr(beta);\n                                     ^\nmake: *** [BurstyBTM.o] Error 1\n</code></pre>\n\n<p>I have tried to install gcc49 and run it again but also failed. I guess it is not because of the error of code as the author said he could run it with no errors. My os is os x 10.10. Could you please help me to solve this problem? I am nearly mad about this. Thank you in advance!</p>\n\n<p>EDIT:</p>\n\n<p>Here is the linkage to <a href=\"https://github.com/xiaohuiyan/BurstyBTM/\" rel=\"nofollow\">github</a></p>\n\n<p>And the code with errors are as below:</p>\n\n<pre><code>for (int k = 1; k &lt; K + 1; ++k) {\n  double deno = 2 * nb_z[k] + W * beta;\n  double pw1k = (nwz[k][w1] + beta) / deno;\n  double pw2k = (nwz[k][w2] + beta) / (deno + 1);\n  double pk_t = (nb_z[k] + alpha) / (nb + K * alpha);\n  pz[k] = eta * pk_t * pw1k * pw2k;\n}\n\nreturn pz.normalize();\n}\n\nvoid BurstyBTM::save_pz(string pt) {\nPvec&lt;double&gt; pz = nb_z.normalize(alpha);\npz.write(pt);\n}\n\n\nvoid BurstyBTM::save_pw_z(string pt) {\nPmat&lt;double&gt; pw_z = nwz.normr(beta);\npw_z.write(pt);\n}\n</code></pre>\n"}, {"tags": ["c++", "sdl", "frame-rate"], "answers": [{"tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": false, "score": 4, "last_activity_date": 1455731942, "creation_date": 1455731942, "answer_id": 35464238, "question_id": 35464127, "link": "https://stackoverflow.com/questions/35464127/calculating-fps-in-game/35464238#35464238", "title": "Calculating FPS in game", "body": "<p>If you start the clock once before entering your while-loop and then use the two lines calculating deltaclock and resetting startclock inside your loop, it doesn't matter at what point of the loop you do it. It will always calculate the delta in respect to your last loop.</p>\n\n<p>If you place it at the beginning or at the end of your loop will then only affect your first/last iteration, which should not matter in a FPS-counter.</p>\n"}], "owner": {"reputation": 57, "user_id": 5937832, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0289ab3d89498fb626113b5724027757?s=128&d=identicon&r=PG&f=1", "display_name": "Jessica99", "link": "https://stackoverflow.com/users/5937832/jessica99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1455739500, "creation_date": 1455731540, "last_edit_date": 1455739500, "question_id": 35464127, "link": "https://stackoverflow.com/questions/35464127/calculating-fps-in-game", "title": "Calculating FPS in game", "body": "<p>Hello i am programming a 2D game and i have found several ways how to calculate Frames per second but i didnot really get the architecture rules yet , one of them is :</p>\n\n<pre><code>//at the start of main function\nUint32 startclock = 0;\nUint32 deltaclock = 0;\nUint32 currentFPS = 0;\n// at beginning of while(!end_of_game)\nstartclock = SDL_GetTicks();\n//fps calculation inside loop\ndeltaclock = SDL_GetTicks() - startclock;\nstartclock = SDL_GetTicks();\n//evaluate the formula inside loop\nif ( deltaclock != 0 )\n    currentFPS = 1000 / deltaclock;\n//now i can output the current fps\n</code></pre>\n\n<p>what i cant figure out is that , rendering a screen takes some time so should i put this part at the absolute end of the loop (after rendering getting input etc (absolute end) :</p>\n\n<pre><code>if ( deltaclock != 0 )\n    currentFPS = 1000 / deltaclock;\n</code></pre>\n\n<p>so basicaly at the start of the game loop i get start clock then i run every single function like movement collision rendering etc and then i evaluate delta clock and based on that i count fps ? there are tons of fps calculation \"formulas\" but i need a real program architecture i mean:</p>\n\n<pre><code>//main game loop\n//get elapsed time\n//game logic\n//delta time a.k.a how much time it took to go through the game logic part\n//output the fps\n</code></pre>\n\n<p>thanks</p>\n"}, {"tags": ["c++", "compiler-errors", "undefined-behavior"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1455731741, "post_id": 35464084, "comment_id": 58624145, "body": "Should the compile be able to figure <a href=\"http://coliru.stacked-crooked.com/a/f11297b5b6e064c8\" rel=\"nofollow noreferrer\">this</a> out?  It is the same thing but much harder to diagnose."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1455731876, "post_id": 35464084, "comment_id": 58624232, "body": "A hard error is a valid result of undefined behaviour, so making it UB allows compilers to reject it <i>if</i> they can detect it (e.g. with <code>-Werror=sequence-point</code> or similar)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1455732075, "post_id": 35464084, "comment_id": 58624335, "body": "@JonathanWakely A hard error is only a valid result of undefined behaviour in code that would be executed at run time. <code>-Werror=sequence-point</code> can be very useful, but when using it, by design, GCC no longer conforms to the C++ standard. <code>int main() {} void f(int i) { ++i + ++i; }</code> is what C would call a strictly conforming program. (I&#39;m not sure what the proper C++ term for it is.)"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1455732214, "post_id": 35464084, "comment_id": 58624417, "body": "@hvd, good point. An omniscient compiler could still reject it in cases where it can prove it would be reached at run time. That&#39;s not very practically useful though."}, {"owner": {"reputation": 51, "user_id": 5939003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a54d980fa14e40e395a94ddc159731?s=128&d=identicon&r=PG&f=1", "display_name": "user5939003", "link": "https://stackoverflow.com/users/5939003/user5939003"}, "edited": false, "score": 0, "creation_date": 1455732534, "post_id": 35464084, "comment_id": 58624595, "body": "Does this mean something like <code>i = ++i + i++</code> is a valid program?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1455731783, "post_id": 35464140, "comment_id": 58624173, "body": "Perhaps a concrete example of something that a compiler won&#39;t be able to detect would be a good addition to your answer to help the OP. (Something like <code>++*p + ++*q</code> should do, when the compiler can&#39;t know whether <code>p == q</code>.)"}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455731843, "post_id": 35464140, "comment_id": 58624209, "body": "Is it NP-hard or undecidable or something to ensure sequencing rules are held?"}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455732159, "post_id": 35464140, "comment_id": 58624378, "body": "hvd&#39;s comment seems to contradict this answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455732218, "post_id": 35464140, "comment_id": 58624420, "body": "@djechlin I&#39;m agreeing with this answer."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455732552, "post_id": 35464140, "comment_id": 58624606, "body": "@hvd sorry I just don&#39;t see how &quot;Because it&#39;s difficult&quot; is a valid answer in light of &quot;-Werror=sequence-point does it.&quot; I guess this has little to do with your comment, although that&#39;s where I learned of the flag from."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 2, "creation_date": 1455732744, "post_id": 35464140, "comment_id": 58624709, "body": "@djechlin: &quot;-Werror=sequence-point&quot; does not do it, for the general case. Only for the &quot;really contrived and obvious example&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455732748, "post_id": 35464140, "comment_id": 58624712, "body": "@djechlin Oh, I thought you meant my comment on this answer, rather than my comment on the question. I suppose adding &quot;without false positives&quot; to this answer addresses your concerns. Adding a hard error for invalid code is trivial if you don&#39;t care about valid code getting rejected equally. :)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1455731570, "creation_date": 1455731570, "answer_id": 35464140, "question_id": 35464084, "link": "https://stackoverflow.com/questions/35464084/why-doesnt-the-compiler-enforce-that-sequencing-rules-are-held/35464140#35464140", "title": "Why doesn&#39;t the compiler enforce that sequencing rules are held?", "body": "<p>Because it's difficult for a compiler to produce a hard diagnostic here in the general case. You've shown a really contrived and obvious example, but the reality is usually more complex than this. It's easier just to say \"don't do it, and the compiler doesn't have to tell you off for it either\".</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1455732788, "post_id": 35464477, "comment_id": 58624739, "body": "And as I commented on the question, causes valid programs to be rejected."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455732816, "post_id": 35464477, "comment_id": 58624752, "body": "@hvd you clearly know more about this than anyone else on this question, can you post an answer?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1455732877, "post_id": 35464477, "comment_id": 58624785, "body": "I considered that initially, but felt that I wouldn&#39;t be able to add much to @PreferenceBean&#39;s answer. I&#39;ll try again to see if I can come up with something."}, {"owner": {"reputation": 51, "user_id": 5939003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a54d980fa14e40e395a94ddc159731?s=128&d=identicon&r=PG&f=1", "display_name": "user5939003", "link": "https://stackoverflow.com/users/5939003/user5939003"}, "edited": false, "score": 0, "creation_date": 1455732943, "post_id": 35464477, "comment_id": 58624832, "body": "@djechlin I&#39;m not an expert, but the gist of it is that &quot;undefined behavior&quot; means the program is not &quot;ill-formed&quot; so a hard diagnostic would imply rejecting compilation is in violation of the Standard, but now I&#39;m confusing myself..."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "edited": false, "score": 0, "creation_date": 1455733047, "post_id": 35464477, "comment_id": 58624886, "body": "@hvd ok, brought my answer up to being accurate at least."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455733749, "post_id": 35464477, "comment_id": 58625290, "body": "@BenjaminLindley dunno, is the issue false negatives?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 1, "creation_date": 1455734101, "post_id": 35464477, "comment_id": 58625501, "body": "I wouldn&#39;t say that, since <code>-Werror=sequence-point</code> is not claimed to find all sequence point related undefined behavior. The problem is that, for now, it is simply too difficult to detect, as PreferenceBean stated, and no tool that I&#39;m aware of claims to be capable of it."}, {"owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455736538, "post_id": 35464477, "comment_id": 58626981, "body": "@BenjaminLindley what does &quot;too difficult&quot; mean? Is it NP-hard or something?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455737123, "post_id": 35464477, "comment_id": 58627344, "body": "@djechlin: I simply mean that nobody has been able to figure out how to do it, as far as I&#39;m aware."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1455747009, "post_id": 35464477, "comment_id": 58633173, "body": "@djechlin: hvd&#39;s indirection example&#39;s pretty good. It is actually impossible for the compiler to know whether his function has UB or not, for any given values of <code>pa</code> and <code>pb</code> -- because it does not know what those values are, and crucially whether they are the same or not, if that (say) depends on user input. Make this ill-formed and suddenly every compiler is non-compliant because there are ill-formed programs they simply cannot diagnose. This is a textbook occasion for calling it UB instead."}], "tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 1, "last_activity_date": 1455733037, "last_edit_date": 1455733037, "creation_date": 1455732746, "answer_id": 35464477, "question_id": 35464084, "link": "https://stackoverflow.com/questions/35464084/why-doesnt-the-compiler-enforce-that-sequencing-rules-are-held/35464477#35464477", "title": "Why doesn&#39;t the compiler enforce that sequencing rules are held?", "body": "<p><code>-Werror=sequence-point</code> detects and emits compile error on the behavior you are talking about, but it produces false positives in the general case. </p>\n\n<p>I do not know how easy it is to write general practical programs that conform to this flag (presumably hard enough to not make it a language requirement).</p>\n\n<p>I also do not know in what sense it is computationally hard to verify sequence points validity (undecidable, NP-hard, etc). This would seem to impact the former question.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "is_accepted": false, "score": 2, "last_activity_date": 1455733364, "creation_date": 1455733364, "answer_id": 35464680, "question_id": 35464084, "link": "https://stackoverflow.com/questions/35464084/why-doesnt-the-compiler-enforce-that-sequencing-rules-are-held/35464680#35464680", "title": "Why doesn&#39;t the compiler enforce that sequencing rules are held?", "body": "<p>In the general case, it's very hard to detect whether an arbitrary expression violates the sequencing rules.</p>\n\n<pre><code>int f(int *pa, int *pb) {\n  return ++*pa + ++*pb;\n}\n</code></pre>\n\n<p>It can have UB for reason other than sequencing depending on the input values, consider e.g. <code>f(0, 0)</code>, but when considering only sequencing, does this have defined behaviour?</p>\n\n<p>There's not enough information to answer that question. It violates the sequencing rules only if <code>pa == pb</code>. There's nothing to rule that out, but equally, there's nothing to suggest that any code calls it like that.</p>\n\n<p>If we can't tell, a compiler can't tell either. Therefore, it cannot be ill-formed, only undefined, and any diagnostics are left as a quality of implementation issue.</p>\n\n<p>The fact that it's undefined at run-time, not ill-formed, then has another consequence: it means that it's only a problem if the code is ever executed. I gave an example in a comment:</p>\n\n<pre><code>int main() { }\nvoid f(int i) { ++i + ++i; }\n</code></pre>\n\n<p>The function <code>f</code> has undefined behaviour, but the program as a whole does not, because the function <code>f</code> is never called. Because there is not and cannot be any rule in the C++ standard to disallow this, compilers are not allowed to issue error messages even for the simple cases.</p>\n\n<p>However, compilers are always allowed to issue a warning (or any other non-fatal diagnostic) for any code, so useful compilers do try to detect this and let you know you're doing something wrong.</p>\n"}], "owner": {"reputation": 51, "user_id": 5939003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82a54d980fa14e40e395a94ddc159731?s=128&d=identicon&r=PG&f=1", "display_name": "user5939003", "link": "https://stackoverflow.com/users/5939003/user5939003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1455733364, "creation_date": 1455731423, "last_edit_date": 1455732117, "question_id": 35464084, "link": "https://stackoverflow.com/questions/35464084/why-doesnt-the-compiler-enforce-that-sequencing-rules-are-held", "title": "Why doesn&#39;t the compiler enforce that sequencing rules are held?", "body": "<p>Statements like <code>int n6 = n1 + ++n1;</code> are undefined behavior because they violate the sequencing rules. But if they're a violation of the sequence rules, why doesn't the compiler just give a hard error? Other examples:</p>\n\n<pre><code>i = ++i + i++; // undefined behavior\ni = i++ + 1; // undefined behavior (but i = ++i + 1; is well-defined)\nf(++i, ++i); // undefined behavior\nf(i = -1, i = -1); // undefined behavior\n</code></pre>\n\n<p>It seems in all of these cases the standard explicitly says it's undefined behavior, so it could just as easily say \"the program is ill-formed\" which will usually result in a hard diagnostic.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 274, "user_id": 5930639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qd3QgRZwiIM/AAAAAAAAAAI/AAAAAAAAAFY/tFfpIqgQYE0/photo.jpg?sz=128", "display_name": "Khale_Kitha", "link": "https://stackoverflow.com/users/5930639/khale-kitha"}, "is_accepted": false, "score": 2, "last_activity_date": 1455731470, "creation_date": 1455731470, "answer_id": 35464095, "question_id": 35464070, "link": "https://stackoverflow.com/questions/35464070/how-to-read-two-files-and-closing-the-first-one-properly-c/35464095#35464095", "title": "How to read two files and closing the first one properly? C++", "body": "<p>You're getting the data from inFile, the second time, instead of inFile1.</p>\n\n<pre><code>inFile &gt;&gt; first2 &gt;&gt; second2 &gt;&gt; third2 &gt;&gt; last2;\n</code></pre>\n"}], "owner": {"reputation": 507, "user_id": 4965791, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/afab9df44d9426af49306403f1abc457?s=128&d=identicon&r=PG&f=1", "display_name": "rose", "link": "https://stackoverflow.com/users/4965791/rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455731601, "creation_date": 1455731387, "question_id": 35464070, "link": "https://stackoverflow.com/questions/35464070/how-to-read-two-files-and-closing-the-first-one-properly-c", "title": "How to read two files and closing the first one properly? C++", "body": "<p>I created two files \nthe first one contains : 1 2 3 4;\nthe second contains: 5 6 7 8\nI'm attempting to read the second file after the other, but instead of reading the second file, it reads the first one again despite the fact that I closed it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\nusing  namespace std;\n\nint main()\n\n{\n\n    ifstream  inFile;\n     inFile.clear();\n    inFile.open(\"text1.txt\");\n\n    if (inFile.fail())\n    {\n        cerr &lt;&lt; \"Error Opening File \"&lt;&lt; endl;\n        exit(1);\n    }\n\n    int first1, second1, third1, last1;\n\n    inFile &gt;&gt; first1 &gt;&gt; second1 &gt;&gt; third1 &gt;&gt; last1;\n\n\n    cout \n&lt;&lt; first1 &lt;&lt; \" \" &lt;&lt; second1 &lt;&lt; \" \" &lt;&lt; third1  &lt;&lt;  \" \"&lt;&lt;  last1 &lt;&lt; endl;\n\n    inFile.close();\n\n\n\n\n    ifstream  inFile1;\n     inFile1.clear();\n    inFile1.open(\"text2.txt\");\n\n    if (inFile1.fail())\n    {\n        cerr &lt;&lt; \"Error Opening File \"&lt;&lt; endl;\n        exit(1);\n    }\n\n   int first2, second2, third2, last2;\n\n    inFile &gt;&gt; first2 &gt;&gt; second2 &gt;&gt; third2 &gt;&gt; last2;\n\n\n    cout \n&lt;&lt; first2 &lt;&lt; \" \" &lt;&lt; second2 &lt;&lt; \" \" &lt;&lt; third2  &lt;&lt;  \" \"&lt;&lt;  last2 &lt;&lt; endl;\n\n    inFile1.close();\n\n\n\n\n\n\n    return 0;\n} \n</code></pre>\n\n<p>it prints</p>\n\n<pre><code>1 2 3 4\n1 2 3 4\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>1 2 3 4\n5 6 7 8\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "templates", "template-specialization", "sfinae", "enable-if"], "comments": [{"owner": {"reputation": 651, "user_id": 509819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aq4aR.jpg?s=128&g=1", "display_name": "Slava Zhuyko", "link": "https://stackoverflow.com/users/509819/slava-zhuyko"}, "edited": false, "score": 0, "creation_date": 1455736533, "post_id": 35464018, "comment_id": 58626977, "body": "Subclass the original ValueTraits with an extended version taking 3 template arguments?"}, {"owner": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "reply_to_user": {"reputation": 651, "user_id": 509819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Aq4aR.jpg?s=128&g=1", "display_name": "Slava Zhuyko", "link": "https://stackoverflow.com/users/509819/slava-zhuyko"}, "edited": false, "score": 0, "creation_date": 1455741330, "post_id": 35464018, "comment_id": 58630022, "body": "I don&#39;t think that would add any specializations to ValueTraits itself - see the edit."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455752887, "post_id": 35464018, "comment_id": 58635642, "body": "What compiler(s) do you need this to work with?"}, {"owner": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455770288, "post_id": 35464018, "comment_id": 58640807, "body": "I&#39;d say the code should be c++11 compliant. I&#39;d rather not rely on any  (mis)behavior of any specific compiler."}], "answers": [{"comments": [{"owner": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455740677, "post_id": 35464929, "comment_id": 58629674, "body": "I&#39;ve edited the question to clarify this. ValueTraits is instantiated by the library too, so I have no control on how it gets to be instantiated. I&#39;m only supposed to provide specializations for it, and so far I can only figure how to do the simpler ones."}, {"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "reply_to_user": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455785587, "post_id": 35464929, "comment_id": 58647631, "body": "@dragonroot i think an approach like this could still work even is the library is the user of <code>ValueTraits</code>. I don&#39;t have any other solution for this problem so i&#39;m just going to leave my reply here for the record."}], "tags": [], "owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "is_accepted": false, "score": 0, "last_activity_date": 1455734185, "creation_date": 1455734185, "answer_id": 35464929, "question_id": 35464018, "link": "https://stackoverflow.com/questions/35464018/specializing-class-template-for-any-subclass-of-x-without-adding-an-additional-t/35464929#35464929", "title": "Specializing class template for any subclass of X without adding an additional type argument to the template", "body": "<p>Interesting question , but it would helped more if you provided some additional use cases or more info, because the way it's going to be used can change details of implementation.</p>\n\n<p>Ok, now back to the answer, so considering that there is a library there that you can't modify here is something that you can do:</p>\n\n<p>First have a class with in any shape or form you want:</p>\n\n<pre><code>template&lt; typename T, typename Dummy&gt;\nstruct MyOwnSpecializedClassInAnyWayIWant\n{\n    // your own specialization:\n    static int getValue() { return 0; }\n};\n</code></pre>\n\n<p>Now you only need to specialize <code>ValueTraits</code> once:</p>\n\n<pre><code>template&lt; typename T , typename Dummy = void &gt;\nstruct ValueTraits &lt; MyOwnSpecializedClassInAnyWayIWant&lt;T, Dummy&gt; &gt;\n{\n    // Default version\n    static int getValue() { return MyOwnSpecializedClassInAnyWayIWant&lt;T, Dummy&gt;::getValue(); }\n};\n</code></pre>\n\n<p>And the use case would be something like: </p>\n\n<pre><code>ValueTraits&lt; MyOwnSpecializedClassInAnyWayIWant&lt; ConcreteSub1 &gt;&gt;::getValue()\n</code></pre>\n\n<p>Now this is kind of a pain to write like that so you can make a using:</p>\n\n<pre><code>template &lt;class T&gt;\nusing ValueTraits_t = ValueTraits&lt; MyOwnSpecializedClassInAnyWayIWant&lt; T &gt; &gt;;\n//use ValueTraits_t&lt;ConcreteSub1&gt;;\n</code></pre>\n\n<p>As a side note i removed the <code>Id</code> for simplicity but this can work with that also.</p>\n"}, {"comments": [{"owner": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455769545, "post_id": 35472381, "comment_id": 58640535, "body": "This is quite brilliant, using <code>integral_constant</code> as a type for <code>enable_if</code>, and then accessing its value... Yeah, I have a feeling specifying a non-type argument like that violates the standard, since it involves a template parameter T. It might be a gcc bug, which would make it risky to depend on the current behavior. Still, I really like this <code>integral_constant</code> trick."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455789206, "post_id": 35472381, "comment_id": 58650087, "body": "@dragonroot Like I said, CWG 1315 should (hopefully soon) make this officially (TM) valid code. I can&#39;t think of anything better at the moment."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "edited": false, "score": 0, "creation_date": 1455841625, "post_id": 35472381, "comment_id": 58682789, "body": "@dragonroot Most certainly part of C++17 (C++11 is long ratified). I anticipate it being resolved in Rapperswil (Beginning of March)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1455841894, "post_id": 35472381, "comment_id": 58682872, "body": "@Columbo You mean Jacksonville? And compilers usually implement DRs retroactively anyway. (Also, nice paper.)"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1455842398, "post_id": 35472381, "comment_id": 58683020, "body": "@T.C. Sorry; Jacksonville. :) Concerning DRs: Surely they aren&#39;t resolved retroactively, though? Or is that irrelevant?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1455934329, "post_id": 35472381, "comment_id": 58727015, "body": "@Columbo Well, since nobody is going to implement C++11 exactly as published, does it really matter? (My current favorite example: nobody is going to parse the <code>&lt;int&gt;</code> in  <code>vector&lt;int&gt;</code> as a <i>header-name</i>, max-munch notwithstanding.)"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1455969986, "post_id": 35472381, "comment_id": 58735685, "body": "@T.C. Issue 2000. Very nice :-)"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1455766755, "creation_date": 1455766755, "answer_id": 35472381, "question_id": 35464018, "link": "https://stackoverflow.com/questions/35464018/specializing-class-template-for-any-subclass-of-x-without-adding-an-additional-t/35472381#35472381", "title": "Specializing class template for any subclass of X without adding an additional type argument to the template", "body": "<p>GCC 4.8+ is OK with this, but not Clang:</p>\n\n<pre><code>template&lt; typename T &gt;\nstruct ValueTraits&lt; T, std::enable_if&lt;std::is_base_of&lt; ConcreteClass, T &gt;::value,\n                                      std::integral_constant&lt;int, 123&gt; &gt;::type::value &gt;\n{\n  static int getValue() { return T::get(); }\n};\n</code></pre>\n\n<p>I'm inclined to think that Clang is currently right, but <a href=\"http://wg21.link/cwg1315\" rel=\"nofollow\">CWG 1315</a> is likely to change the rules here so that the above code becomes valid, so you are probably safe if you only need this to work on GCC 4.8 or later.</p>\n"}], "owner": {"reputation": 4970, "user_id": 882478, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/ba7a0499650df3855d8abb564d9ca348?s=128&d=identicon&r=PG", "display_name": "dragonroot", "link": "https://stackoverflow.com/users/882478/dragonroot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1455766755, "creation_date": 1455731236, "last_edit_date": 1455740566, "question_id": 35464018, "link": "https://stackoverflow.com/questions/35464018/specializing-class-template-for-any-subclass-of-x-without-adding-an-additional-t", "title": "Specializing class template for any subclass of X without adding an additional type argument to the template", "body": "<p>I need to specialize</p>\n\n<pre><code>template&lt; typename T, int Id &gt;\nstruct ValueTraits\n{\n  // Default version\n  static int getValue() { return 0; }\n};\n</code></pre>\n\n<p>for any subclass of some <code>ConcreteClass</code> as <code>T</code>:</p>\n\n<pre><code>class ConcreteClass {};\n\nstruct ConcreteSub1: public ConcreteClass\n{\n  static int get() { return 1; }\n};\n\nstruct ConcreteSub2: public ConcreteClass\n{\n  static int get() { return 2; }\n};\n</code></pre>\n\n<p>and for some predetermined value of <code>Id</code>, say <code>123</code>,</p>\n\n<p>...so that <code>ValueTraits&lt; ConcreteSub1, 123 &gt;::getValue()</code> would call <code>ConcreteSub1::get()</code> and return <code>1</code>, and <code>ValueTraits&lt; ConcreteSub2, 123 &gt;::getValue()</code> would call <code>ConcreteSub2::get()</code> and return <code>2</code>. Use of any <code>Id</code> other than <code>123</code> or the class other than a subclass of <code>ConcreteClass</code> should fall back to the default version of the template.</p>\n\n<p>Now, I understand that I could use <code>std::enable_if</code> with <code>std::is_base_of</code>, but wouldn't that require adding an additional dummy type argument to <code>ValueTraits</code>? Something like this would work, for example:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt; typename T, int Id, typename Dummy = void &gt;\nstruct ValueTraits\n{\n  // Default version\n  static int getValue() { return 0; }\n};\n\nclass ConcreteClass {};\n\nstruct ConcreteSub1: public ConcreteClass\n{\n  static int get() { return 1; }\n};\n\nstruct ConcreteSub2: public ConcreteClass\n{\n  static int get() { return 2; }\n};\n\ntemplate&lt; typename T &gt;\nstruct ValueTraits&lt; T, 123, typename std::enable_if&lt;\n  std::is_base_of&lt; ConcreteClass, T &gt;::value &gt;::type &gt;\n{\n  static int getValue() { return T::get(); }\n};\n\nint main()\n{\n  // prints 1, 2, 0\n  printf( \"%d, %d, %d\\n\",\n          ValueTraits&lt; ConcreteSub1, 123 &gt;::getValue(),\n          ValueTraits&lt; ConcreteSub2, 123 &gt;::getValue(),\n          ValueTraits&lt; int, 123 &gt;::getValue() );\n  return 0;\n}\n</code></pre>\n\n<p>The problem is, I can't add an additional dummy type argument to <code>ValueTraits</code>, since it's part of a library which actually provides this <code>ValueTraits</code> for me to specialize.</p>\n\n<p>So my question is, can I perform this specialization with the original version of <code>ValueTraits</code> taking only <code>typename</code> and <code>int</code>, and how?</p>\n\n<p>EDIT: To clarify, I am not the user of <code>ValueTraits</code> either - the library provides it for me to specialize, and then the library again instantiates it with my types to get the behavior I've defined in my specializations. So I have no control on neither the definition of <code>ValueTraits</code> nor on the way it's used afterwards.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 0, "creation_date": 1455733068, "post_id": 35463978, "comment_id": 58624897, "body": "OpenCV has optimisations for different CPU architectures and CPU instruction sets (so ARM NEON, tegra, SSE, etc). If you&#39;re just trying to understand the code it&#39;s usually best to ignore them and look at the implementation that isn&#39;t specialised."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "reply_to_user": {"reputation": 3277, "user_id": 3427404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c06cd15efe014a0e304ae60b4ef0da21?s=128&d=identicon&r=PG&f=1", "display_name": "yhenon", "link": "https://stackoverflow.com/users/3427404/yhenon"}, "edited": false, "score": 0, "creation_date": 1455735057, "post_id": 35463978, "comment_id": 58626063, "body": "as @y300 said, NEON is an optimization set for ARM processors, TEGRA is an nvdidia graphics chip on mobile devices, SSE are instructions of standard CPUs (typically applying same instruction for multiple data elements at once)"}], "owner": {"reputation": 1, "user_id": 5843098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9030b3b1fcaedcc0ad2f204d99d79db7?s=128&d=identicon&r=PG&f=1", "display_name": "hbrezak", "link": "https://stackoverflow.com/users/5843098/hbrezak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 329, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1455731102, "creation_date": 1455731102, "question_id": 35463978, "link": "https://stackoverflow.com/questions/35463978/opencv-code-interpretation", "title": "OpenCV code interpretation", "body": "<p>I need to understand how Lucas Kanade openCV implementation works. Going through the code, these three types of declaration turn up very often:</p>\n\n<pre><code>#ifdef HAVE_TEGRA_OPTIMIZATION\n    if (tegra::useTegra() &amp;&amp; tegra::calcSharrDeriv(src, dst))\n        return;\n#endif\n\n#if CV_SSE2\n        for( ; x &lt;= colsn - 8; x += 8 )\n        {\n            __m128i s0 = _mm_unpacklo_epi8(_mm_loadl_epi64((const __m128i*)(srow0 + x)), z);\n            __m128i s1 = _mm_unpacklo_epi8(_mm_loadl_epi64((const __m128i*)(srow1 + x)), z);\n            __m128i s2 = _mm_unpacklo_epi8(_mm_loadl_epi64((const __m128i*)(srow2 + x)), z);\n            __m128i t0 = _mm_add_epi16(_mm_mullo_epi16(_mm_add_epi16(s0, s2), c3), _mm_mullo_epi16(s1, c10));\n            __m128i t1 = _mm_sub_epi16(s2, s0);\n            _mm_store_si128((__m128i*)(trow0 + x), t0);\n            _mm_store_si128((__m128i*)(trow1 + x), t1);\n        }\n#endif\n\n#if CV_NEON\n        for( ; x &lt;= colsn - 8; x += 8)\n        {\n            uint8x8_t d0 = vld1_u8((const uint8_t*)&amp;srow0[x]);\n            uint8x8_t d1 = vld1_u8((const uint8_t*)&amp;srow1[x]);\n            uint8x8_t d2 = vld1_u8((const uint8_t*)&amp;srow2[x]);\n            uint16x8_t q4 = vaddl_u8(d0, d2);\n            uint16x8_t q11 = vsubl_u8(d2, d0);\n            uint16x8_t q5 = vmulq_u16(q4, q8);\n            uint16x8_t q6 = vmull_u8(d1, d18);\n            uint16x8_t q10 = vaddq_u16(q6, q5);\n            vst1q_u16((uint16_t*)&amp;trow0[x], q10);\n            vst1q_u16((uint16_t*)&amp;trow1[x], q11);\n\n        }\n#endif\n</code></pre>\n\n<p>I assume they are a part of code optimisation but could anyone explain what they stand for and how to interpret them?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "c++11", "memory-leaks"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1455731431, "post_id": 35463945, "comment_id": 58623945, "body": "<code>string = new std::string(*newString);</code>  With all of your usage of smart pointers, you need to do or have something like this?  I can easily create a <code>main</code> program that leaks memory, just given that one line."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1455731447, "post_id": 35463945, "comment_id": 58623952, "body": "TLDR; Never use shared_ptr referencing to childs and parents. Either make the child pointers or the parent pointers a weak_ptr (or raw pointer) If not you have circular references, leading to a memory leak."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455731856, "post_id": 35463945, "comment_id": 58624219, "body": "[OT] I see you did not implement a copy constructor.  Since you did not if you copy a <code>CTree</code> the copy will refer the the original so anything you do to the copy happens to the original.  Not sure if that is what you want."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1455733292, "post_id": 35463945, "comment_id": 58625021, "body": "Why is <code>CTree::string</code> even a pointer?"}, {"owner": {"reputation": 58, "user_id": 5941557, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3f0bca4b5d5da4277e8c1b3aeab3c004?s=128&d=identicon&r=PG&f=1", "display_name": "n4zArh", "link": "https://stackoverflow.com/users/5941557/n4zarh"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1455737597, "post_id": 35463945, "comment_id": 58627666, "body": "Mostly my fault, I started to use normal pointer when I wrote class and few methods, by the time I noticed it it was <b>bit</b> too late and I decided to leave it as it is. Thanks for noticing that though. @NathanOliver I didn&#39;t need copy constructor, since I plan to use only a single instance of tree at the time."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1455739130, "post_id": 35463945, "comment_id": 58628683, "body": "@n4zArh If you do not want copies, express that: <code>T(const T&amp;) = delete</code> and <code>T&amp; operator = (const T&amp;) = delete</code> (pre c++11 make these private)"}], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 1, "creation_date": 1455732022, "post_id": 35464136, "comment_id": 58624313, "body": "While <code>std::make_shared</code> is the <i>preferred</i> method of creating <code>shared_ptr</code>s, it is not incorrect to do it manually. Specifically, using <code>make_shared</code> allocates the block for the refcount along with the block for the object, whereas calling the constructor manually will allocate the refcount on a separate block. This is important because whatever block the refcount is on will stay alive as long as any <code>weak_ptr</code>s pointing at the block are still alive."}, {"owner": {"reputation": 58, "user_id": 5941557, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3f0bca4b5d5da4277e8c1b3aeab3c004?s=128&d=identicon&r=PG&f=1", "display_name": "n4zArh", "link": "https://stackoverflow.com/users/5941557/n4zarh"}, "edited": false, "score": 0, "creation_date": 1455737784, "post_id": 35464136, "comment_id": 58627811, "body": "Thanks for your insight. I fixed my LoadString to have a check if there&#39;s a string and to delete it if there is some of them (however I use this method once, so there was no leak there). Also, changed the way I create shared_ptr - it was only one I knew :) unfortunately it did not help with memory leaks."}, {"owner": {"reputation": 1095, "user_id": 2025214, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wLpN8.jpg?s=128&g=1", "display_name": "caps", "link": "https://stackoverflow.com/users/2025214/caps"}, "edited": false, "score": 0, "creation_date": 1455742153, "post_id": 35464136, "comment_id": 58630478, "body": "On the note of memory leaks, one of the reasons that <code>make_shared</code> and <code>make_unique</code> are preferred is that they ensure that the allocation is owned by the time the <code>make_</code> function returns. Calling <code>new</code> manually can leak if it is done as one of several parameters to a function, the others of which might throw. The order that parameters are evaluated is implementation-specific, so a throw there would lead to a leak."}], "tags": [], "owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "is_accepted": false, "score": 1, "last_activity_date": 1455732098, "last_edit_date": 1455732098, "creation_date": 1455731565, "answer_id": 35464136, "question_id": 35463945, "link": "https://stackoverflow.com/questions/35463945/shared-ptrs-and-memory-leaks/35464136#35464136", "title": "shared_ptrs and memory leaks", "body": "<p>There's a potential leak when calling <code>LoadString</code>:</p>\n\n<pre><code>void CTree::LoadString(std::string* newString)\n{\n    string = new std::string(*newString);\n}\n</code></pre>\n\n<p>This function does not delete previously allocated <code>string</code>.</p>\n\n<p>Your method for creating <code>shared_ptr</code> objects is also odd. This shouldn't necessarily cause memory leaks but it's very strange to behold. You are, for example, doing this:</p>\n\n<pre><code>std::shared_ptr&lt;TNode&gt; newLeaf(new TNode(position, count++));\n</code></pre>\n\n<p>When you should be doing this:</p>\n\n<pre><code>std::shared_ptr&lt;TNode&gt; newLeaf = std::make_shared&lt;TNode&gt;(position, count++)\n</code></pre>\n"}], "owner": {"reputation": 58, "user_id": 5941557, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/3f0bca4b5d5da4277e8c1b3aeab3c004?s=128&d=identicon&r=PG&f=1", "display_name": "n4zArh", "link": "https://stackoverflow.com/users/5941557/n4zarh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455732098, "creation_date": 1455731016, "question_id": 35463945, "link": "https://stackoverflow.com/questions/35463945/shared-ptrs-and-memory-leaks", "title": "shared_ptrs and memory leaks", "body": "<p>I had a project to do in C++ (moreover, I had to use some stuff from C++11, specifically: custom iterators, smart pointers and chrono) which constructs suffix tree for specific string. When it comes down to constructing a tree, I think I did a good job - I have a proper tree, construction times and search times are looking rather good and there's not a single problem with this. However, I know I messed up with my TNode struct - I didn't use weak_ptrs, therefore in my tree class I had to build up hugeass destructor walking on every node and forcibly erasing any connections.</p>\n\n<p>Anyway, I used Deleaker to check for possible memory leaks. There were none for \"abracadabra\" word. Unfortunately, it found some leaks for \"lorem ipsum (...)\". Most of them are linked with creating new nodes and I fail to understand where my problem is. I simply don't get it - it appears that every node is destructed when program is ending. Where did I make mistake?</p>\n\n<p>Node.h:</p>\n\n<pre><code>#pragma once\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n#include &lt;Windows.h&gt;\n\n#define INF 1&lt;&lt;30\n\nstruct TNode : public std::enable_shared_from_this&lt;TNode&gt;{\n    long int indexStart;\n    long int indexEnd;\n    std::vector&lt;std::shared_ptr&lt;TNode&gt;&gt; children;\n    std::shared_ptr&lt;TNode&gt; suffixLink;\n    int count;\n    TNode(long int pIndexStart, int pCount) {\n        indexStart = pIndexStart;\n        indexEnd = INF;\n        children.clear();\n        suffixLink = nullptr;\n        count = pCount;\n    }\n    ~TNode() {\n        //OutputDebugString(L\"node dies\\n\");\n    }\n    int EdgeLength(long int pos) {\n        return min(indexEnd, pos+1) - indexStart;\n    }\n};\n</code></pre>\n\n<p>tree.h</p>\n\n<pre><code>#pragma once\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n#include \"IChildIterator.h\"\n#include \"Node.h\"\n\nclass CTree\n{\npublic:\n    CTree();\n    ~CTree();\n    void LoadString(std::string* newString);\n    void CreateTree();\n    bool FindPhrase(std::string* toFind);\n    void PrintSuffix(std::vector&lt;long&gt; indexes);\n    std::shared_ptr&lt;TNode&gt; GetRoot();\n\nprivate:\n    std::shared_ptr&lt;TNode&gt;  root;\n    std::shared_ptr&lt;TNode&gt;  activeNode;\n    long int                activeEdge;\n    long int                activeLength;\n    std::string*            string;\n    std::shared_ptr&lt;TNode&gt;  lastAddedNode;\n    long int                position;\n    long int                remainder;\n    int                     count;\n\n    void AddSuffixLink(std::shared_ptr&lt;TNode&gt; node);\n    bool WalkDown(std::shared_ptr&lt;TNode&gt; node);\n    void ExtendTree();\n    char GetActiveEdge();\n};\n</code></pre>\n\n<p>tree.cpp</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Tree.h\"\n\n\nCTree::CTree()\n{\n    std::shared_ptr&lt;TNode&gt; nowy(new TNode(-1, -1));\n    root = activeNode = nowy;\n    activeEdge = activeLength = 0;\n    lastAddedNode = nowy;\n    position = -1;\n    remainder = 0;\n    count = 0;\n    string = nullptr;\n}\n\n\nCTree::~CTree()\n{\n    if (string) {\n        delete string;\n    }\n    std::vector&lt;IChildIterator&gt; iterstack;\n    iterstack.resize(0);\n    IChildIterator child(root, true);\n    while (true) {\n        if (0 == (*child)-&gt;children.size()) {\n            if (iterstack.size() == 0)\n                break;\n            child = iterstack.back();\n            iterstack.pop_back();\n            (*child)-&gt;children.erase((*child)-&gt;children.begin());\n            child++;\n            continue;\n        }\n        if ((*child)-&gt;children.front()-&gt;indexEnd != INF) {\n            iterstack.push_back(child);\n            child = IChildIterator(*child);\n            continue;\n        }\n        std::shared_ptr&lt;TNode&gt; temp = (*child)-&gt;children.front();\n        if (temp-&gt;suffixLink) temp-&gt;suffixLink = nullptr;\n        (*child)-&gt;children.erase((*child)-&gt;children.begin());\n    }\n\n    OutputDebugString(L\"tree dies\\n\");\n}\n\nvoid CTree::LoadString(std::string* newString)\n{\n    string = new std::string(*newString);\n}\n\nvoid CTree::CreateTree()\n{\n    for (int i = 0; i &lt; string-&gt;size(); i++) {\n        ExtendTree();\n    }\n}\n\nstd::shared_ptr&lt;TNode&gt; CTree::GetRoot()\n{\n    return root;\n}\n\nvoid CTree::AddSuffixLink(std::shared_ptr&lt;TNode&gt; node)\n{\n    if (lastAddedNode) lastAddedNode-&gt;suffixLink = node;\n    lastAddedNode = node-&gt;shared_from_this();\n}\n\nbool CTree::WalkDown(std::shared_ptr&lt;TNode&gt; node)\n{\n    if (activeLength &gt;= node-&gt;EdgeLength(position)) {\n        activeEdge += node-&gt;EdgeLength(position);\n        activeLength -= node-&gt;EdgeLength(position);\n        activeNode = node;\n        return true;\n    }\n    return false;\n}\n\nvoid CTree::ExtendTree()\n{\n    ++position;\n    lastAddedNode = nullptr;\n    remainder++;\n    while (remainder &gt; 0) {\n        if (activeLength == 0) activeEdge = position;\n        std::shared_ptr&lt;TNode&gt; selected = nullptr;\n        for each (std::shared_ptr&lt;TNode&gt; child in activeNode-&gt;children) {\n            if (string-&gt;at(child-&gt;indexStart) == GetActiveEdge()) {\n                selected = child;\n                break;\n            }\n        }\n        if (!selected) {\n            std::shared_ptr&lt;TNode&gt; newLeaf(new TNode(position, count++));\n            activeNode-&gt;children.push_back(newLeaf);\n            AddSuffixLink(activeNode);\n        }\n        else {\n            if (WalkDown(selected)) continue;\n            if (string-&gt;at(selected-&gt;indexStart + activeLength) == string-&gt;at(position)) {\n                activeLength++;\n                AddSuffixLink(activeNode);\n                break;\n            }\n            //split\n            if (selected-&gt;children.size() &gt; 0) {\n                long lastStart = selected-&gt;indexStart;\n                selected-&gt;indexStart = selected-&gt;indexStart + activeLength;\n                std::shared_ptr&lt;TNode&gt; newNode(new TNode(lastStart, count++));\n                newNode-&gt;indexEnd = selected-&gt;indexStart;\n                newNode-&gt;children.push_back(selected);\n                std::shared_ptr&lt;TNode&gt; yetAnotherNewLeaf(new TNode(position, count++));\n                newNode-&gt;children.push_back(yetAnotherNewLeaf);\n                std::vector&lt;std::shared_ptr&lt;TNode&gt;&gt;::iterator iter;\n                iter = activeNode-&gt;children.begin();\n                while (true) {\n                    if (*iter == selected) {\n                        activeNode-&gt;children.insert(iter, newNode);\n                        iter = activeNode-&gt;children.begin();\n                        while (true) {\n                            if (*iter == selected) {\n                                activeNode-&gt;children.erase(iter);\n                                break;\n                            }\n                            iter++;\n                        }\n                        break;\n                    }\n                    iter++;\n                }\n                AddSuffixLink(newNode);\n            }\n            else {\n                selected-&gt;indexEnd = selected-&gt;indexStart + activeLength;\n                std::shared_ptr&lt;TNode&gt; newLeaf(new TNode(selected-&gt;indexEnd, count++));\n                selected-&gt;children.push_back(newLeaf);\n                std::shared_ptr&lt;TNode&gt; yetAnotherNewLeaf(new TNode(position, count++));\n                selected-&gt;children.push_back(yetAnotherNewLeaf);\n                AddSuffixLink(selected);\n            }\n        }\n        remainder--;\n        if (activeNode == root &amp;&amp; activeLength &gt; 0) {\n            activeLength--;\n            activeEdge = position - remainder + 1;\n        }\n        else {\n            if (activeNode-&gt;suffixLink) {\n                activeNode = activeNode-&gt;suffixLink;\n            }\n            else {\n                activeNode = root;\n            }\n        }\n    }\n}\n\nchar CTree::GetActiveEdge()\n{\n    return string-&gt;at(activeEdge);\n}\n</code></pre>\n\n<p>Memory leaks:</p>\n\n<ul>\n<li>during creation of every new node in ExtendTree() method</li>\n<li>tree constructor</li>\n<li><p>on line </p>\n\n<blockquote>\n  <p>iter = activeNode->children.begin();</p>\n</blockquote></li>\n</ul>\n\n<p>I'd be grateful for any kind of tip how to fix this.</p>\n"}, {"tags": ["c++", "unix", "g++"], "comments": [{"owner": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 6, "creation_date": 1455730868, "post_id": 35463880, "comment_id": 58623604, "body": "You don&#39;t have a <code>}</code> for the destructor."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 2640, "user_id": 5195699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f85291bb71f55981b1d412f1efcb7603?s=128&d=identicon&r=PG&f=1", "display_name": "R_Kapp", "link": "https://stackoverflow.com/users/5195699/r-kapp"}, "edited": false, "score": 0, "creation_date": 1455731198, "post_id": 35463880, "comment_id": 58623795, "body": "Thanks, such a silly error!"}], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": true, "score": 4, "last_activity_date": 1455731661, "creation_date": 1455731661, "answer_id": 35464168, "question_id": 35463880, "link": "https://stackoverflow.com/questions/35463880/why-wont-this-compile-on-my-schools-unix-system/35464168#35464168", "title": "Why won&#39;t this compile on my schools unix system?", "body": "<p>I think the problem is in the following code:</p>\n\n<pre><code>#include \"Set.h\"\nSet::Set()\n{\n    int i;\n    for(i = 0; i &lt;= 3; i++)\n        bitString[i] = 0;\n}\n\nSet::Set(const Set&amp; s)\n{\n}\n\nSet::~Set()\n{\n</code></pre>\n\n<p>Here in the destructor you forgot to close the parenthesis. That's what the compiler is complaining about. It will not run in any system. You modify it as:</p>\n\n<pre><code>Set::~Set()\n{\n}\n</code></pre>\n"}], "owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1455733236, "accepted_answer_id": 35464168, "answer_count": 1, "score": 0, "last_activity_date": 1455731661, "creation_date": 1455730822, "question_id": 35463880, "link": "https://stackoverflow.com/questions/35463880/why-wont-this-compile-on-my-schools-unix-system", "closed_reason": "Not suitable for this site", "title": "Why won&#39;t this compile on my schools unix system?", "body": "<p>I finished an assignment that worked fine on my compiler at home, but when I uploaded it to the schools linux system I can't get it to compile.</p>\n\n<p>Here is the error I'm getting:</p>\n\n<pre><code>Set.cpp: In destructor \u2018Set::~Set()\u2019:\nSet.cpp:42:1: error: a function-definition is not allowed here before \u2018{\u2019 token\nSet.cpp:55:1: error: a function-definition is not allowed here before \u2018{\u2019 token\nSet.cpp:67:1: error: a function-definition is not allowed here before \u2018{\u2019 token\nSet.cpp:193:1: error: expected \u2018}\u2019 at end of input\n</code></pre>\n\n<p>I'm not exactly sure whats going on here, but my program compiles just fine in codeblocks.</p>\n\n<pre><code>#include \"Set.h\"\nSet::Set()\n{\n    int i;\n    for(i = 0; i &lt;= 3; i++)\n        bitString[i] = 0;\n}\n\n\nSet::Set(const Set&amp; s)\n{\n}\n\n\n\nSet::~Set()\n{\n\n\n\n\n\n\n//Functions for modifying the sets individually:\n\n\n\n\n\nvoid Set::add(int i)\n{\n    unsigned int mask;\n    int bit, word;\n\n    word = i / 32;\n    bit = i % 32;\n    mask = 1 &lt;&lt; bit;\n    bitString[word] |= mask;\n}\n\n\n\nvoid Set::remove(int i)\n{\n    unsigned int mask;\n    int bit, word;\n\n    word = i / 32;\n    mask = (1 &lt;&lt; (i % 32)) ;\n    bitString[word] &amp;= ~(mask);\n}\n\n\n\nint Set::size()\n{\n    unsigned size = 0;\n\n    for (unsigned i = 0; i &lt;= 3; ++i)\n    {\n        for (unsigned x = 0; x &lt; 32; ++x)\n        {\n            if (bitString[i] &amp; (1 &lt;&lt; x))\n                ++size;\n        }\n    }\n    cout &lt;&lt; \"Size of this set is: \" &lt;&lt; size &lt;&lt; endl;\n    return size;\n}\n\n\n\nint Set::is_member(int i)\n\n{\n    int bit, word;\n\n    word = i / 32;\n    bit = i % 32;\n\n    if((bitString[word] &gt;&gt; bit) &amp; 1)\n        return 1;\n    else\n        return 0;\n}\n\n\n\n\n\n\n\n//Operators Defined here:\n\n\n\n\n\n\n\n\nvoid Set::operator=(const Set&amp; s)\n{\n    int bits;\n    for (bits = 0; bits &lt;= 3; bits++)\n    {\n        bitString[bits] = s.bitString[bits];\n    }\n}\n\nSet Set::operator-(const Set&amp; s)\n{\n    Set result;\n    int x;\n\n    for (x = 0; x &lt;= 3; x++)\n    {\n        result.bitString[x] = (bitString[x] &amp; ~s.bitString[x]);\n    }\n    return result;\n}\n\nSet Set::operator&amp;(const Set&amp; s)\n{\n    Set result;\n    int x;\n\n    for (x = 0; x &lt;= 3; x++)\n    {\n        result.bitString[x] = (bitString[x] &amp; s.bitString[x]);\n    }\n    return result;\n}\n\n\n\nSet Set::operator|(const Set&amp; s)\n{\n    Set result;\n    int x;\n\n    for (x = 0; x &lt;= 3; x++)\n    {\n        result.bitString[x] = (bitString[x] | s.bitString[x]);\n    }\n\n    return result;\n}\n\n\n// XOR\nSet Set::operator^(const Set&amp; s)\n{\n    Set result;\n    int x;\n\n    for (x = 0; x &lt;= 3; x++)\n    {\n        result.bitString[x] = (bitString[x] ^ s.bitString[x]);\n    }\n    return result;\n}\n\n\n\n// Print Result\nvoid Set::printSet()\n\n{\n    unsigned size = 0;\n\n    cout &lt;&lt; \"Set:  { \\b\";\n    for (unsigned i = 0; i &lt;= 3; ++i)\n    {\n        for (unsigned x = 0; x &lt; 32; ++x)\n        {\n            if (bitString[i] &amp; (1 &lt;&lt; x))\n                cout &lt;&lt; (x + (i * 32)) &lt;&lt; \",\";\n        }\n    }\n    cout &lt;&lt; \"\\b}\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "opencv", "opencv3.0", "opencv-stitching"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 5006200, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mC640Vu0Q_VRenFl1xtiaW5Tf7C6HTNG-NE3da42g=k-s128", "display_name": "Ali Jahani", "link": "https://stackoverflow.com/users/5006200/ali-jahani"}, "is_accepted": false, "score": 0, "last_activity_date": 1456148199, "last_edit_date": 1456148199, "creation_date": 1456034162, "answer_id": 35532823, "question_id": 35463797, "link": "https://stackoverflow.com/questions/35463797/opencv-stitching-how-to-get-better-performance-using-opencv-stitcher-class/35532823#35532823", "title": "(OpenCV Stitching) How to get better performance using OpenCV Stitcher class?", "body": "<ol>\n<li><p>FAST feature detector is faster than SURF and ORB.</p>\n\n<p>Moreover, finding 1500 features in a 640*480 picture takes too much time. 300 features is ok. So you can use this code instead:</p>\n\n<pre><code>detail::OrbFeaturesFinder(Size(3,1),300));\n</code></pre></li>\n<li><p>Stitcher Class is so slow. I suggest you try to implement stitcher class yourself. Try using feature detectors, descriptors, then matching and after that find homography then making mask and then warping. </p></li>\n<li><p>I don't understand your third question, <em>\"How can I catch directions between two images?\"</em>. What do you mean exactly?</p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 4082588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890cad26c94c7d7f6891ad652b19e758?s=128&d=identicon&r=PG&f=1", "display_name": "\uae40\ub0a8\uaddc", "link": "https://stackoverflow.com/users/4082588/%ea%b9%80%eb%82%a8%ea%b7%9c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2743, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1456148199, "creation_date": 1455730603, "question_id": 35463797, "link": "https://stackoverflow.com/questions/35463797/opencv-stitching-how-to-get-better-performance-using-opencv-stitcher-class", "title": "(OpenCV Stitching) How to get better performance using OpenCV Stitcher class?", "body": "<p>I have some problems when using Stitcher class.</p>\n\n<p>First, I use ORB Feature Finder because it's faster than SURF.\nbut it's still slow.</p>\n\n<p>Second, Stitcher class accuracy is too low.</p>\n\n<p>Third, How can I get more performance by using Stitcher class?</p>\n\n<p>Additional, How can I catch directions between two images?</p>\n\n<p>This is my code.</p>\n\n<p>Thank you.</p>\n\n<pre><code>#include \"opencv2/core/core.hpp\"\n#include \"opencv2/highgui/highgui.hpp\"\n#include \"opencv2/stitching.hpp\"\n#include \"opencv2/features2d.hpp\"\n\nusing namespace cv;\nusing namespace std;\n\nvoid overlayImage(const cv::Mat &amp;background, const cv::Mat &amp;foreground, cv::Mat &amp;output, cv::Point2i location);\n\nint main(int argc, char* argv[])\n{\n\n Mat first;\n Mat second;\n Mat m_first;\n Mat m_second;\n vector&lt;Mat&gt; images;\n// vector&lt;Mat&gt; re_images;\n Mat panorama;\n Mat result;\n unsigned long t;\n t = getTickCount();\n first = imread(argv[1], CV_LOAD_IMAGE_COLOR);\n second = imread(argv[2], CV_LOAD_IMAGE_COLOR);\n //Mat m_first = Mat::zeros( first.size(), first.type() );\n //Mat m_second = Mat::zeros( second.size(), second.type() );\n /*\nfor( int y = 0; y &lt; first.rows; y++ ) {\n    for( int x = 0; x &lt; first.cols; x++ ) {\n         for( int c = 0; c &lt; 3; c++ ) {\n          m_first.at&lt;Vec3b&gt;(y,x)[c] = saturate_cast&lt;uchar&gt;( 1.2*( first.at&lt;Vec3b&gt;(y,x)[c] ) + 20 );\n     }\n    }\n}\n\nfor( int y = 0; y &lt; second.rows; y++ ){\n for( int x = 0; x &lt; second.cols; x++ ) {\n         for( int c = 0; c &lt; 3; c++ )  {\n      m_second.at&lt;Vec3b&gt;(y,x)[c] =\n         saturate_cast&lt;uchar&gt;( 1.2*( second.at&lt;Vec3b&gt;(y,x)[c] ) + 20 );\n    }\n    }\n}\n*/\n//imwrite(\"first.png\", m_first);\n//imwrite(\"second.png\", m_second);\n resize(first, m_first, Size(640, 480));\n resize(second, m_second, Size(640, 480));\n images.push_back(m_first); \n images.push_back(m_second);\n\n\n Stitcher stitcher = Stitcher::createDefault(false);\n //Stitcher::Status status = stitcher.stitch(imgs, pano);\n //stitcher.setWarper(new PlaneWarper());\n stitcher.setWarper(new SphericalWarper());\n// stitcher.setWarper(new CylindricalWarper());\n stitcher.setFeaturesFinder(new detail::OrbFeaturesFinder(Size(3,1),1500));\n//        stitcher.setRegistrationResol(0.6);\n//        stitcher.setSeamEstimationResol(0.1);\n//        stitcher.setCompositingResol(0.5);\n//stitcher.setPanoConfidenceThresh(1);\n        stitcher.setWaveCorrection(true);\n        stitcher.setWaveCorrectKind(detail::WAVE_CORRECT_HORIZ);\n        stitcher.setFeaturesMatcher(new detail::BestOf2NearestMatcher(false,0.3));\n        stitcher.setBundleAdjuster(new detail::BundleAdjusterRay());\n\n        stitcher.setBlender(new detail::MultiBandBlender());\n stitcher.stitch(images, panorama);\n printf(\"%.2lf sec \\n\",  (getTickCount() - t) / getTickFrequency() );\n Rect rect(panorama.cols / 2 - 320, panorama.rows / 2 - 240, 640, 480);\n Mat subimage = panorama(rect);\n Mat car = imread(\"car.png\");\n overlayImage(subimage, car, result, cv::Point(320 - (car.cols / 2), 240 - (car.rows / 2 )));\n imshow(\"panorama\", result);\n// resize(panorama, result, Size(640, 480));\n imwrite(\"result.jpg\", result);\n waitKey(0); \n\n return 0;\n}\n\nvoid overlayImage(const cv::Mat &amp;background, const cv::Mat &amp;foreground, cv::Mat &amp;output, cv::Point2i location)\n{\n  background.copyTo(output);\n\n\n\n   // start at the row indicated by location, or at row 0 if location.y is negative.\n  for(int y = std::max(location.y , 0); y &lt; background.rows; ++y)\n  {\n    int fY = y - location.y; // because of the translation\n\n     // we are done of we have processed all rows of the foreground image.\n    if(fY &gt;= foreground.rows)\n      break;\n\n     // start at the column indicated by location, \n\n\n    // or at column 0 if location.x is negative.\n    for(int x = std::max(location.x, 0); x &lt; background.cols; ++x)\n    {\n      int fX = x - location.x; // because of the translation.\n\n       // we are done with this row if the column is outside of the foreground image.\n      if(fX &gt;= foreground.cols)\n        break;\n\n       // determine the opacity of the foregrond pixel, using its fourth (alpha) channel.\n      double opacity =\n        ((double)foreground.data[fY * foreground.step + fX * foreground.channels() + 3])\n\n\n        / 255.;\n\n\n\n       // and now combine the background and foreground pixel, using the opacity, \n\n\n      // but only if opacity &gt; 0.\n      for(int c = 0; opacity &gt; 0 &amp;&amp; c &lt; output.channels(); ++c)\n      {\n        unsigned char foregroundPx =\n          foreground.data[fY * foreground.step + fX * foreground.channels() + c];\n\n        unsigned char backgroundPx =\n          background.data[y * background.step + x * background.channels() + c];\n\n        output.data[y*output.step + output.channels()*x + c] =\n          backgroundPx * (1.-opacity) + foregroundPx * opacity;\n\n      }\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "prefix", "postfix-operator"], "answers": [{"comments": [{"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455732983, "post_id": 35463909, "comment_id": 58624851, "body": "@Slava - No, a user defined operator involves a function call that adds proper sequence points to the expression. This is <i>very</i> different from <code>i++ + ++ i</code> for an <code>int</code> variable."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1455733888, "post_id": 35463909, "comment_id": 58625385, "body": "Actually that brings interesting question if chained prefix UB for builtin. Asked it here <a href=\"http://stackoverflow.com/questions/35464793/why-chained-prefix-increment-decrement-for-builtin-type-is-not-ub-for-c\" title=\"why chained prefix increment decrement for builtin type is not ub for c\">stackoverflow.com/questions/35464793/&hellip;</a>"}, {"owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "edited": false, "score": 0, "creation_date": 1455738461, "post_id": 35463909, "comment_id": 58628249, "body": "<code>++ ++ ++ i</code> is the same as <code>op++(op++(op++(i)))</code>: the order of evaluation is unique.   Thats different from <code>i++ + ++i</code>, alias <code>op+(op++(i,0), op++(i))</code> where the two <code>op+</code> parameters can be evaluated in whatever order, modifying <code>i</code> with different histories, thus giving an UB."}], "tags": [], "owner": {"reputation": 18808, "user_id": 924727, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bd2dcbbfd05a7c49cd74c7cb93e26488?s=128&d=identicon&r=PG", "display_name": "Emilio Garavaglia", "link": "https://stackoverflow.com/users/924727/emilio-garavaglia"}, "is_accepted": false, "score": 2, "last_activity_date": 1455730914, "creation_date": 1455730914, "answer_id": 35463909, "question_id": 35463789, "link": "https://stackoverflow.com/questions/35463789/why-does-prefix-incrementor-overload-return-type-instead-of-type/35463909#35463909", "title": "Why does Prefix Incrementor Overload return Type&amp; instead of Type?", "body": "<p>The reason is to allow chaining:</p>\n\n<pre><code>++ ++ ++ i;\n</code></pre>\n\n<p>To allow <code>i</code> to triple increment, <code>++</code> must return the reference and take the reference. If it returns a temporary copy, the second <code>++</code> would increment ... the temporary copy (in fact, a temporary copy won't bind a <code>&amp;</code>, so it will not even compile).</p>\n"}, {"tags": [], "owner": {"reputation": 250, "user_id": 5937424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5870a99ee03e4af8fd990722adfb0149?s=128&d=identicon&r=PG&f=1", "display_name": "Careful Now", "link": "https://stackoverflow.com/users/5937424/careful-now"}, "is_accepted": false, "score": 1, "last_activity_date": 1455732426, "creation_date": 1455732426, "answer_id": 35464372, "question_id": 35463789, "link": "https://stackoverflow.com/questions/35463789/why-does-prefix-incrementor-overload-return-type-instead-of-type/35464372#35464372", "title": "Why does Prefix Incrementor Overload return Type&amp; instead of Type?", "body": "<p>To add to Emilio's answer postfix incrementing creates a temporary variable and sets that to 1 plus the variable you want to increment where as prefix incrementing increments the actual variable which can have a performance boost in certain cases.    </p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1455733061, "creation_date": 1455733061, "answer_id": 35464586, "question_id": 35463789, "link": "https://stackoverflow.com/questions/35463789/why-does-prefix-incrementor-overload-return-type-instead-of-type/35464586#35464586", "title": "Why does Prefix Incrementor Overload return Type&amp; instead of Type?", "body": "<p>Main reason is to follow semantics for builtin types in C++ where prefix increment/decrement returns lvalue and postfix one returns rvalue. Details can be found <a href=\"http://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 1, "user_id": 5831003, "user_type": "registered", "profile_image": "https://graph.facebook.com/1048642778535511/picture?type=large", "display_name": "TheMightyHerb", "link": "https://stackoverflow.com/users/5831003/themightyherb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1455733061, "creation_date": 1455730564, "question_id": 35463789, "link": "https://stackoverflow.com/questions/35463789/why-does-prefix-incrementor-overload-return-type-instead-of-type", "title": "Why does Prefix Incrementor Overload return Type&amp; instead of Type?", "body": "<p>Just started doing operator overloads and my teacher didn't go too in depth into them so I was wondering why the return type is different for Prefix/Postfix increment/decrement. When I see the prefix overloads the return type is written as Type&amp;, but the return type for the postfix is written as Type. I made the prefix without the &amp; and the functions both ran properly. Does the return type affect anything or is it just another way to distinguish prefix from postfix?</p>\n"}, {"tags": ["c++", "arrays", "function", "bubble-sort", "unresolved-external"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1455730800, "post_id": 35463751, "comment_id": 58623559, "body": "Whenever you gt such an error, and you know that you have defined the function, take a close look at the function definition and compare it to the declaration, maybe copy the declaration and put it just above the definition so you could look at both at the same time. Doint that will immediately reveal any differences."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1455734984, "post_id": 35463751, "comment_id": 58626021, "body": "This is one of the reasons I try to always define a function before its uses, and avoid pre-declarations. A separate declaration is a form of code duplication which has to be kept in sync with the definition. Don&#39;t Repeat Yourself!"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455776651, "post_id": 35463751, "comment_id": 58643199, "body": "<a href=\"http://stackoverflow.com/a/12574403/3747990\">stackoverflow.com/a/12574403/3747990</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5326107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d067f897f5a82a899e8127c766acc4?s=128&d=identicon&r=PG&f=1", "display_name": "dawa", "link": "https://stackoverflow.com/users/5326107/dawa"}, "edited": false, "score": 0, "creation_date": 1455730717, "post_id": 35463786, "comment_id": 58623512, "body": "ow, that was silly of me, thank you so much!"}], "tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": false, "score": 1, "last_activity_date": 1455730548, "creation_date": 1455730548, "answer_id": 35463786, "question_id": 35463751, "link": "https://stackoverflow.com/questions/35463751/unresolved-external-symbol-error-when-compiling/35463786#35463786", "title": "Unresolved external symbol error when compiling", "body": "<p>You are declaring a </p>\n\n<pre><code>void showarray(int [],int );\n</code></pre>\n\n<p>but defining a </p>\n\n<pre><code>void showarray(const float array[], int size)\n</code></pre>\n\n<p>Both are not the same. At the point the compiler tries to compile the function call, he only knows about the first one and uses this. But the linker can only find the second one, which is why he produces an error.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 5326107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d067f897f5a82a899e8127c766acc4?s=128&d=identicon&r=PG&f=1", "display_name": "dawa", "link": "https://stackoverflow.com/users/5326107/dawa"}, "edited": false, "score": 0, "creation_date": 1455730835, "post_id": 35463843, "comment_id": 58623584, "body": "thank you! its all fixed now."}], "tags": [], "owner": {"reputation": 2030, "user_id": 1249278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85067d968f90780d8ca292ab99962189?s=128&d=identicon&r=PG", "display_name": "shafeen", "link": "https://stackoverflow.com/users/1249278/shafeen"}, "is_accepted": false, "score": 0, "last_activity_date": 1455730732, "creation_date": 1455730732, "answer_id": 35463843, "question_id": 35463751, "link": "https://stackoverflow.com/questions/35463751/unresolved-external-symbol-error-when-compiling/35463843#35463843", "title": "Unresolved external symbol error when compiling", "body": "<p>Your function declaration needs to match your function definition:</p>\n\n<pre><code>void showarray(int [],int );\n</code></pre>\n\n<p>And</p>\n\n<pre><code>void showarray(const float array[], int size){\n    for (int i = 0; i &lt; size; i++)\n       cout &lt;&lt; array[i] &lt;&lt;\" \"&lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>Need to have matching function signatures.</p>\n"}, {"comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 15, "user_id": 5326107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d067f897f5a82a899e8127c766acc4?s=128&d=identicon&r=PG&f=1", "display_name": "dawa", "link": "https://stackoverflow.com/users/5326107/dawa"}, "edited": false, "score": 0, "creation_date": 1455737001, "post_id": 35463848, "comment_id": 58627266, "body": "@dawa Pay attention that my sort function had a typo. There must be    last = i; instead of last = i - 1;"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1455741583, "last_edit_date": 1455741583, "creation_date": 1455730759, "answer_id": 35463848, "question_id": 35463751, "link": "https://stackoverflow.com/questions/35463751/unresolved-external-symbol-error-when-compiling/35463848#35463848", "title": "Unresolved external symbol error when compiling", "body": "<p>At first you declared function</p>\n\n<pre><code>void showarray(int [],int );\n</code></pre>\n\n<p>but defined function </p>\n\n<pre><code>void showarray(const float array[], int size)\n{\n    //...\n}\n</code></pre>\n\n<p>Change the both declaration and the definition like</p>\n\n<pre><code>void showArray( const int [], int );\n     ^^^^^^^^^  ^^^^^^^^^^^^\n</code></pre>\n\n<p>For example (the function definition)</p>\n\n<pre><code>void showArray( const int array[], int size )\n{\n    for ( int i = 0; i &lt; size; i++ )\n    {\n        cout &lt;&lt; array[i] &lt;&lt; ' ';\n    }\n    cout &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And do not forget to change function calls using name <code>showArray</code>.</p>\n\n<p>Take into account that the variable <code>temp</code> should be declared inside the if statement. Also you could use standard function <code>std::swap</code> as for example</p>\n\n<pre><code>std::swap( array[count], array[count+1] );\n</code></pre>\n\n<p>The program can look like</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nvoid sortArray( int a[], size_t n )\n{\n    while ( !( n &lt; 2 ) )\n    {\n        size_t last = 0;\n        for ( size_t i = 1; i &lt; n; i++ )\n        {\n            if ( a[i] &lt; a[i-1] )\n            {\n                int temp = a[i];\n                a[i] = a[i-1];\n                a[i-1] = temp;\n                last = i;\n            }\n        }\n        n = last;\n    }\n}\n\nvoid showArray( const int a[], size_t n )\n{\n    for ( size_t i = 0; i &lt; n; i++ ) std::cout &lt;&lt; a[i] &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n}\n\nint main()\n{\n    const size_t N = 10;\n    int endtime[N] = { 70, 38, 8, 101, 11, 127, 313, 14, 16, 127 };\n\n    std::cout &lt;&lt; \"unsorted: \";\n    showArray( endtime, N );\n\n    sortArray( endtime, N );\n\n    std::cout &lt;&lt; \"  sorted: \";\n    showArray( endtime, N );\n}        \n</code></pre>\n\n<p>Its output is</p>\n\n<pre><code>unsorted: 70 38 8 101 11 127 313 14 16 127 \n  sorted: 8 11 14 16 38 70 101 127 127 313 \n</code></pre>\n\n<p>With using standard function <code>std::swap</code> the function <code>sortArray</code> can be more compact and clear</p>\n\n<pre><code>void sortArray( int a[], size_t n )\n{\n    while ( not ( n &lt; 2 ) )\n    {\n        size_t last = 0;\n        for ( size_t i = 1; i &lt; n; i++ )\n        {\n            if ( a[i] &lt; a[i-1] )\n            {\n                std::swap( a[i], a[i-1] );\n                last = i;\n            }\n        }\n        n = last;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5326107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7d067f897f5a82a899e8127c766acc4?s=128&d=identicon&r=PG&f=1", "display_name": "dawa", "link": "https://stackoverflow.com/users/5326107/dawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 1, "closed_date": 1455778460, "accepted_answer_id": 35463848, "answer_count": 3, "score": 1, "last_activity_date": 1455741583, "creation_date": 1455730431, "last_edit_date": 1455736209, "question_id": 35463751, "link": "https://stackoverflow.com/questions/35463751/unresolved-external-symbol-error-when-compiling", "closed_reason": "Duplicate", "title": "Unresolved external symbol error when compiling", "body": "<p>when ever am trying to compile it, i get an error message </p>\n\n<pre><code> unresolved external symbol \"void __cdecl showarray(int * const,int)\"\n</code></pre>\n\n<p>am not sure what i am doing wrong? what should I do, my code looks like this</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n\nusing namespace std;\n\n\nvoid sortArray(int [], int );\nvoid showarray(int [],int );\n\nint main(){\n    int endtime[10] = { 70, 38, 8, 101, 11, 127, 313, 14, 16, 127 };\n\n    cout &lt;&lt; \"unsorted\" &lt;&lt; endl;\n    showarray(endtime, 10);\n\n    sortArray(endtime, 10);\n\n    cout &lt;&lt; \"the sorted value are :\" &lt;&lt; endl;\n    showarray(endtime, 10);\n\n    return 0;\n}\n\nvoid sortArray(int array[], int size){\n    bool swap;\n    int temp;\n\n    do{\n        swap = false;\n        for (int count = 0; count &lt; (size - 1); count++){\n            if (array[count] &gt; array[count+1]){\n                temp = array[count];\n                array[count] = array[count + 1];\n                array[count + 1] = temp;\n                swap = true;\n            }\n        }\n    } while (swap);\n}\n\nvoid showarray(const float array[], int size){\n    for (int i = 0; i &lt; size; i++)\n        cout &lt;&lt; array[i] &lt;&lt;\" \"&lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "binary", "fstream", "eof"], "comments": [{"owner": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1455731055, "post_id": 35463708, "comment_id": 58623719, "body": "What is <code>trace</code>?  That seems pretty important here."}, {"owner": {"reputation": 13, "user_id": 5410730, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4hiZaTVAcbE/AAAAAAAAAAI/AAAAAAAAAC4/3fcnW0cWKa8/photo.jpg?sz=128", "display_name": "Cornelius Kloosterman", "link": "https://stackoverflow.com/users/5410730/cornelius-kloosterman"}, "reply_to_user": {"reputation": 414, "user_id": 3708904, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc0603de733d41d03de17c919944581f?s=128&d=identicon&r=PG&f=1", "display_name": "Jack O&#39;Reilly", "link": "https://stackoverflow.com/users/3708904/jack-oreilly"}, "edited": false, "score": 0, "creation_date": 1455907139, "post_id": 35463708, "comment_id": 58715827, "body": "it&#39;s an error I made while copying this from my own code. <code>trace</code> should read <code>point</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5410730, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4hiZaTVAcbE/AAAAAAAAAAI/AAAAAAAAAC4/3fcnW0cWKa8/photo.jpg?sz=128", "display_name": "Cornelius Kloosterman", "link": "https://stackoverflow.com/users/5410730/cornelius-kloosterman"}, "edited": false, "score": 0, "creation_date": 1455906249, "post_id": 35464660, "comment_id": 58715298, "body": "Worked perfectly. Thank you for the help."}], "tags": [], "owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "is_accepted": true, "score": 4, "last_activity_date": 1455733298, "creation_date": 1455733298, "answer_id": 35464660, "question_id": 35463708, "link": "https://stackoverflow.com/questions/35463708/c-fstream-thinks-it-has-reached-eof-of-binary-file/35464660#35464660", "title": "C++: FStream thinks it has reached EOF of binary file", "body": "<p>To read the file as a binary file, you should add <code>binary</code> to the file mode:</p>\n\n<pre><code>bbrFile.open(inFilename, ios::binary);\n</code></pre>\n\n<p>otherwise it will be read as a text file, and some codes could be interpreted as an end-of-file mark.</p>\n"}], "owner": {"reputation": 13, "user_id": 5410730, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4hiZaTVAcbE/AAAAAAAAAAI/AAAAAAAAAC4/3fcnW0cWKa8/photo.jpg?sz=128", "display_name": "Cornelius Kloosterman", "link": "https://stackoverflow.com/users/5410730/cornelius-kloosterman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 35464660, "answer_count": 1, "score": 0, "last_activity_date": 1455907211, "creation_date": 1455730318, "last_edit_date": 1455907211, "question_id": 35463708, "link": "https://stackoverflow.com/questions/35463708/c-fstream-thinks-it-has-reached-eof-of-binary-file", "title": "C++: FStream thinks it has reached EOF of binary file", "body": "<p>I'm trying to read a binary file with the following format:</p>\n\n<p>-64 bit integer</p>\n\n<p>-3276 32-bit floats </p>\n\n<p>-(Repeat last 2 lines until eof)</p>\n\n<p>This is the block where I interpret the file:</p>\n\n<pre><code>ifstream bbrFile;\nofstream csvFile;\n\nbbrFile.open(inFilename);\ncsvFile.open(dataFilename);\n//yes I did actually check to make sure that the files had opened. \n//I omitted it here for brevity\n\nlong long int time;\nfloat point;\nwhile (bbrFile)\n{\n    bbrFile.read((char*)&amp;time, sizeof(time));\n    csvFile &lt;&lt; time;\n    for (int i = 0; i &lt; 3276; i++) {\n                bbrFile.read((char*)&amp;point, sizeof(point));\n                csvFile &lt;&lt; ',' &lt;&lt; point;\n    }\n    csvFile &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>So far, my code is working fine, except that it thinks it's reached the end of file after reading in about 53 floats, and then just outputs the last float it read until the 'for' loop ends. I've tried using fread and FILE* instead of read and fstream, and gotten identical results. I've also tried replacing</p>\n\n<pre><code>while (bbrFile)\n</code></pre>\n\n<p>with</p>\n\n<pre><code>while (!bbrFile.eof())\n</code></pre>\n\n<p>To no avail.</p>\n\n<p>Since the binary file is about 12 megabytes, I'm somewhat as a loss as to why it stops reading here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1455730519, "post_id": 35463703, "comment_id": 58623389, "body": "Why are you using <code>NULL</code> for 0 ion all of your initialization?  That&#39;s just wrong."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 0, "creation_date": 1455730846, "post_id": 35463703, "comment_id": 58623588, "body": "x and y are ints, not arrays.  You&#39;re stomping on some random memory somewhere because of your code.  You&#39;re lucky that it works the first 4 times consistently.  (This is also true of no_points, but since you never go past [0] you get lucky)"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1455735938, "post_id": 35463703, "comment_id": 58626579, "body": "&#39;I have already taken the test and received my grade&#39; - fail?"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 5941764, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124947134205682/picture?type=large", "display_name": "joker113", "link": "https://stackoverflow.com/users/5941764/joker113"}, "edited": false, "score": 0, "creation_date": 1455731762, "post_id": 35463886, "comment_id": 58624161, "body": "Wow. Thank you. That is what happens when I rush. Clearly forgot to make x and y arrays, and instead was using them as single integers."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1455730839, "creation_date": 1455730839, "answer_id": 35463886, "question_id": 35463703, "link": "https://stackoverflow.com/questions/35463703/for-loop-is-overwriting-loop-counter/35463886#35463886", "title": "For loop is overwriting loop counter?", "body": "<blockquote>\n  <p>the x coordinate value appears to be overwriting the loop control variable \"no_points[0]\", for no apparent reason.</p>\n</blockquote>\n\n<p>Well, for no reason that is apparent to <em>you</em> anyway.</p>\n\n<p>In your main program you declare all your variables <code>no_points</code>, <code>x</code>, <code>y</code>, etc. as scalars, not arrays.  That is, each variable accommodates <em>one</em> <code>int</code>.  Your other functions treat the pointers to those variables (that you provide as arguments) as if they pointed into <em>arrays</em> at least <code>no_points</code> elements in length.  Accessing elements past the first (at index 0) produces undefined behavior.</p>\n\n<p>Although one cannot actually predict the outcome of undefined behavior from the code and the standard, memory corruption is a common outcome of the kind of incorrect code you present.</p>\n"}], "owner": {"reputation": 9, "user_id": 5941764, "user_type": "registered", "profile_image": "https://graph.facebook.com/1124947134205682/picture?type=large", "display_name": "joker113", "link": "https://stackoverflow.com/users/5941764/joker113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1455736202, "creation_date": 1455730295, "last_edit_date": 1455731653, "question_id": 35463703, "link": "https://stackoverflow.com/questions/35463703/for-loop-is-overwriting-loop-counter", "title": "For loop is overwriting loop counter?", "body": "<p>The code below is my source code that was part of a lab test that I recently took. I was counted off points because the program did not properly display the line and color it as it was supposed to. I found this incredible, as I had tested it for 3 points (to draw two lines), in order to save time on a timed test, and it works perfectly. The example input for the test was for 5 points (four lines). When I downloaded my code and tested it with 5 points, the graphical display does indeed go haywire, drawing seemingly random lines. I have debugged it, and after the third iteration (fourth time through the loop) of the first for loop where the program is collecting the x and y coordinates from the user, whatever is entered for the x coordinate value appears to be overwriting the loop control variable<code>no_points[0]</code>, for no apparent reason. My thoughts are that the loop control variable, and the fourth x coordinate value are sharing an address somehow. As I said, I have already taken the test and received my grade, so I am not looking for a handout to cheat on anything. I simply am not able to understand why this occurring. Any help would be appreciated.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"graph1.h\"\n#include &lt;cstdlib&gt;\n\nusing namespace std;\n\n// declaring prototypes\nvoid getData(int* no_points, int* x, int* y, int* r, int* g, int* b);\nvoid drawPolyLine(int* objects, int*x, int* y, int* no_points);\nvoid colorPolyLine(int* objects, int* no_points, int r, int g, int b);\n\n// declaring main\nint main()\n{\n    int no_points = NULL;\n    int x = NULL;\n    int y = NULL;\n    int r = NULL;\n    int g = NULL;\n    int b = NULL;\n    int objects[50] = {};\n\n\n    int again = 1;\n    do\n    {\n        displayGraphics();\n        clearGraphics();\n        getData(&amp;no_points, &amp;x, &amp;y, &amp;r, &amp;g, &amp;b);\n        drawPolyLine(objects, &amp;x, &amp;y, &amp;no_points);\n        colorPolyLine(objects, &amp;no_points, r, g, b);\n        cout &lt;&lt; \"Please enter a 0 to exit the program...\" &lt;&lt; endl;\n        cin &gt;&gt; again;\n    } while (again == 1);\n\n    return 0;\n}\n\n// declaring functions\nvoid getData(int* no_points, int* x, int* y, int* r, int* g, int* b)\n{\n\n    cout &lt;&lt; \"Enter # of points: \" &lt;&lt; endl;\n    cin &gt;&gt; *no_points;\n\n    cout &lt;&lt; \"Number of points entered is \" &lt;&lt; *no_points &lt;&lt; endl;\n    cout &lt;&lt; \"Enter r/g/b colors...\" &lt;&lt; endl;\n    do\n    {\n        cout &lt;&lt; \"Enter a red value between 0 and 255 \" &lt;&lt; endl;\n        cin &gt;&gt; *r;\n    } while (*r &lt; 0 || *r &gt; 255);\n    do\n    {\n        cout &lt;&lt; \"Enter a green value between 0 and 255 \" &lt;&lt; endl;\n        cin &gt;&gt; *g;\n    } while (*g &lt; 0 || *g &gt; 255);\n    do\n    {\n        cout &lt;&lt; \"Enter a blue value between 0 and 255 \" &lt;&lt; endl;\n        cin &gt;&gt; *b;\n    } while (*b &lt; 0 || *b &gt; 255);\n\n    for (int i = 0; i &lt; no_points[0]; i++)\n    {\n        cout &lt;&lt; \"Enter the x/y coord for Point #\" &lt;&lt; i + 1 &lt;&lt; endl;\n        cin &gt;&gt; x[i]; cin &gt;&gt; y[i];\n\n    } \n}\nvoid drawPolyLine(int* objects, int* x, int* y, int* no_points)\n{\n\n    for (int i = 0; i &lt; no_points[0] -1; i++)\n    objects[i] = drawLine((x[i]), (y[i]), (x[i + 1]), (y[i + 1]), 3);\n}\nvoid colorPolyLine(int* objects, int* no_points, int r, int g, int b)\n{\n\n    for (int i = 0; i &lt; no_points[0] - 1; i++)\n    {\n        setColor(objects[i], r, g, b);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "linker", "unresolved-external"], "comments": [{"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455730657, "post_id": 35463679, "comment_id": 58623474, "body": "You need the extern &quot;C&quot; bit"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1455730526, "post_id": 35463736, "comment_id": 58623393, "body": "As that header is used in .c <code>extern &quot;C&quot;</code> should be <code>#ifdef</code> for C++"}, {"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455730645, "post_id": 35463736, "comment_id": 58623469, "body": "Yep. Added now. Thanks!"}, {"owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "edited": false, "score": 0, "creation_date": 1455730658, "post_id": 35463736, "comment_id": 58623475, "body": "Just tried surrounding both C functions with #ifdef __cplusplus and that works"}, {"owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "edited": false, "score": 0, "creation_date": 1455730793, "post_id": 35463736, "comment_id": 58623550, "body": "Sorry, only needed for legacy_task func"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455731372, "post_id": 35463736, "comment_id": 58623910, "body": "Albeit that this is a duplicate, this is a very nice answer."}, {"owner": {"reputation": 202, "user_id": 3664223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc0235b292b7fcf98faf75e2aa360865?s=128&d=identicon&r=PG&f=1", "display_name": "user3664223", "link": "https://stackoverflow.com/users/3664223/user3664223"}, "edited": false, "score": 0, "creation_date": 1530108493, "post_id": 35463736, "comment_id": 89119735, "body": "Tried with this(surrounding with extern c) didnt worked, Actually c code code in another project in same solution(vs2015) and I am calling from cpp function project, please let me know any other things to check."}], "tags": [], "owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "is_accepted": true, "score": 13, "last_activity_date": 1455730737, "last_edit_date": 1495542176, "creation_date": 1455730392, "answer_id": 35463736, "question_id": 35463679, "link": "https://stackoverflow.com/questions/35463679/unresolved-external-calling-c-function-from-c/35463736#35463736", "title": "Unresolved external calling C function from C++", "body": "<p>Notice that the link error says that the symbol <code>?legacy_task@@YAXXZ</code> was not found. This is a mingled name, derived by the C++ compiler from the function name. For compatibility with C, you need to use \"extern \"C\" in <code>legacy.h</code>:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n   void legacy_task (void);\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>This way, the compiler does not mangle the funtion's name.</p>\n\n<p>For a detailed discussion of <code>extern \"C\"</code>, see <a href=\"https://stackoverflow.com/questions/1041866/in-c-source-what-is-the-effect-of-extern-c\">In C++ source, what is the effect of extern &quot;C&quot;?</a></p>\n"}], "owner": {"reputation": 8058, "user_id": 619818, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/qzq4k.jpg?s=128&g=1", "display_name": "Angus Comber", "link": "https://stackoverflow.com/users/619818/angus-comber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4971, "favorite_count": 0, "closed_date": 1455730625, "accepted_answer_id": 35463736, "answer_count": 1, "score": 2, "last_activity_date": 1455730737, "creation_date": 1455730235, "question_id": 35463679, "link": "https://stackoverflow.com/questions/35463679/unresolved-external-calling-c-function-from-c", "closed_reason": "Duplicate", "title": "Unresolved external calling C function from C++", "body": "<p>I have a Visual Studio solution which has to call legacy C code from C++ code and I am getting linker errors.  Eg:</p>\n\n<pre><code>1&gt;------ Build started: Project: testapp_soln, Configuration: Debug Win32 ------\n1&gt;legacy.lib(launchit.obj) : error LNK2019: unresolved external symbol \"void __cdecl legacy_task(void)\" (?legacy_task@@YAXXZ) referenced in function \"public: virtual void __thiscall Launchit::DoIt(void)\" (?DoIt@Launchit@@UAEXXZ)\n1&gt;E:\\share\\code\\so\\TestApp\\testapp_soln\\Debug\\testapp_soln.exe : fatal error LNK1120: 1 unresolved externals\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I have a static lib project called legacy with a C++ class, launchit calling the C functions in legacy C code.</p>\n\n<p>Here are details of the legacy project.</p>\n\n<p>legacy.h:</p>\n\n<pre><code>#ifndef LEGACY_H_\n#define LEGACY_H_\n\nextern void legacy_task (void);\n\nextern int initialise_thing();\n\n#endif /* LEGACY_H_ */\n</code></pre>\n\n<p>legacy.c</p>\n\n<pre><code>#include \"legacy.h\"\n\nvoid legacy_task (void)\n{\n  /* doing things */\n  initialise_thing();\n}\n</code></pre>\n\n<p>legacy_init.c</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint initialise_thing()\n{\n  printf(\"Doing init thing here\\n\");\n  return 0;\n}\n</code></pre>\n\n<p>legacy C stuff called from launchit class</p>\n\n<p>launchit.hpp</p>\n\n<pre><code>#ifndef LAUNCHIT_HPP_\n#define LAUNCHIT_HPP_\n\nclass Launchit\n{\npublic:\n    Launchit();\n    virtual ~Launchit();\n    virtual void DoIt();\n};\n\n#endif // LAUNCHIT_HPP_\n</code></pre>\n\n<p>launchit.cpp</p>\n\n<pre><code>#include \"Launchit.hpp\"\n#include \"legacy.h\"\n\nLaunchit::Launchit() \n{\n}\n\nLaunchit::~Launchit()\n{\n</code></pre>\n\n<h2>    }</h2>\n\n<pre><code>void Launchit::DoIt()\n{\n    legacy_task();\n}\n</code></pre>\n\n<p>Then I build this as a static lib.  It build just fine.</p>\n\n<p>I have a console application project like this:</p>\n\n<pre><code>#include \"launchit.hpp\"\n\nint main() {\n    Launchit li;\n    li.DoIt();\n}\n</code></pre>\n\n<p>But this gives me linker error:</p>\n\n<pre><code>legacy.lib(launchit.obj) : error LNK2019: unresolved external symbol \"void __cdecl legacy_task(void)\" (?legacy_task@@YAXXZ) referenced in function \"public: virtual void __thiscall Launchit::DoIt(void)\" (?DoIt@Launchit@@UAEXXZ)\n</code></pre>\n\n<p>How can I fix this linker error?</p>\n"}, {"tags": ["c++", "c++11", "aggregate", "c++14", "typetraits"], "comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1455730290, "post_id": 35463646, "comment_id": 58623250, "body": "Another question raised is: what are the types in <code>C50::C50(...)</code>? <code>operator type</code> template parameter have no default."}, {"owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "edited": false, "score": 1, "creation_date": 1455734297, "post_id": 35463646, "comment_id": 58625595, "body": "it should be <code>filler</code> itself, you can make sure by adding something like <code>struct {} dummy = some_type_list&lt;Args...&gt; {};</code> in the body to explicitly trigger an error (hopefully with a good enough compiler diagnostic)."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "edited": false, "score": 0, "creation_date": 1455734396, "post_id": 35463646, "comment_id": 58625643, "body": "@LucDanton Really so, thanks."}], "answers": [{"comments": [{"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1455738151, "post_id": 35465666, "comment_id": 58628064, "body": "@Orient: you&#39;re right, I wanted to rename it as <code>is_constructible</code> ... and then came to my mind that one should better use <code>std::is_constructible</code> ..."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1455738362, "post_id": 35465666, "comment_id": 58628193, "body": "<a href=\"http://stackoverflow.com/questions/20885541/is-braces-constructible-type-trait\"><code>is_braces_constructible</code> or <code>is_embraceable</code></a>, but custom <code>is_constructible</code> is good enough here too, I think."}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1455738981, "post_id": 35465666, "comment_id": 58628589, "body": "Ok, my <code>std::is_constructible</code> trials did not succeed, probably due to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4462.html\" rel=\"nofollow noreferrer\">this issue</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1455751149, "post_id": 35465666, "comment_id": 58634991, "body": "This doesn&#39;t handle various corner cases (immovable types, non-default-constructible types, references), and handles brace elision inconsistently (elided for arrays, not for any other subaggregate). Also, surely you meant <code>Low + (Up - Low)&#47;2</code>?"}, {"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455784640, "post_id": 35465666, "comment_id": 58647098, "body": "@T.C.: <code>Low + (Up - Low)&#47;2</code> ... of course. For the rest: do you have suggestions for improvement? Anyways, thanks for correction."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": true, "score": 2, "last_activity_date": 1455784655, "last_edit_date": 1495540235, "creation_date": 1455736472, "answer_id": 35465666, "question_id": 35463646, "link": "https://stackoverflow.com/questions/35463646/arity-of-aggregate-in-logarithmic-time/35465666#35465666", "title": "Arity of aggregate in logarithmic time", "body": "<h3>Discussion</h3>\n\n<p>(The discussion is based on another answer of mine which I will delete now.)</p>\n\n<p>As in the original question, the following answer checks whether the invocation of the constructor of the aggregate is possible with a given number of arguments. For aggregates, one can base a binary search on this pattern by using the following properties from the standard:</p>\n\n<blockquote>\n  <p>8.5.1 (6):</p>\n  \n  <p>An initializer-list is <strong>ill-formed if the number of initializer-clauses\n  exceeds the number of members or elements to initialize</strong>. [ Example:\n  char cv[4] = { \u2019a\u2019, \u2019s\u2019, \u2019d\u2019, \u2019f\u2019, 0 }; // error is ill-formed. \u2014 end\n  example ]</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>8.5.1 (7):</p>\n  \n  <p>If there are <strong>fewer initializer-clauses in the list than there are\n  members in the aggregate, then each member not explicitly initialized\n  shall be initialized from its default member initializer</strong> (9.2) or, if\n  there is no default member initializer, from an empty initializer list\n  (8.5.4). [ Example: struct S { int a; const char* b; int c; int d =\n  b[a]; }; S ss = { 1, \"asdf\" }; initializes ss.a with 1, ss.b with\n  \"asdf\", ss.c with the value of an expression of the form int{} (that\n  is, 0), and ss.d with the value of ss.b[ss.a] (that is, \u2019s\u2019), and in\n  struct X { int i, j, k = 42; }; X a[] = { 1, 2, 3, 4, 5, 6 }; X b[2] =\n  { { 1, 2, 3 }, { 4, 5, 6 } }; a and b have the same value \u2014 end\n  example ]</p>\n</blockquote>\n\n<p>However, as you already implied by the question title, a binary search will in general not work with non-aggregates, first due to the fact that those are usually not callable with less parameters than necessary, and next due to the fact that non-aggregates can have <code>explicit</code> constructors so that the \"conversion-to-anything\" trick via the struct <code>filler</code> won't work.</p>\n\n<h3>Implementation</h3>\n\n<p>First ingredient is an <code>is_callable</code> check from <a href=\"https://stackoverflow.com/a/35349542/2412846\">here</a>:</p>\n\n<pre><code>template&lt;typename V, typename ... Args&gt;\nstruct is_constructible_impl\n{\n    template&lt;typename C&gt; static constexpr auto test(int) -&gt; decltype(C{std::declval&lt;Args&gt;() ...}, bool{}) { return true; }\n    template&lt;typename&gt; static constexpr auto test(...) { return false; }\n    static constexpr bool value = test&lt;V&gt;(int{});\n    using type = std::integral_constant&lt;bool, value&gt;;\n};\n\ntemplate&lt;typename ... Args&gt;\nusing is_constructible = typename is_callable_impl&lt;Args...&gt;::type;\n</code></pre>\n\n<p>Note that this one is usable also with a fewer number of parameters than necessary (unlike your check).</p>\n\n<p>Next a helper function which takes an integer argument and returns whether the aggregate is callable with the corresponding number of constructor arguments:    </p>\n\n<pre><code>template&lt;typename A, size_t ... I&gt;\nconstexpr auto check_impl(std::index_sequence&lt;I ...&gt;)\n{\n    return is_constructible&lt;A, decltype(I, filler{}) ...&gt;::value;\n}\n\ntemplate&lt;typename A, size_t N&gt;\nconstexpr auto check()\n{\n    return check_impl&lt;A&gt;(std::make_index_sequence&lt;N&gt;{});\n}\n</code></pre>\n\n<p>And finally the binary search:</p>\n\n<pre><code>template&lt;typename A, size_t Low, size_t Up, size_t i = Low + (Up - Low)/2&gt;\nstruct binary_search\n   : public std::conditional_t&lt;check&lt;A, i&gt;() &amp;&amp; !check&lt;A,i+1&gt;()\n                           , std::integral_constant&lt;size_t, i&gt;\n                           , std::conditional_t&lt;check&lt;A, i&gt;()\n                                              , binary_search&lt;A, i, Up&gt;\n                                              , binary_search&lt;A, Low, i&gt; &gt;\n                              &gt;\n{};\n</code></pre>\n\n<p>Use it as</p>\n\n<pre><code>int main()\n{\n    static_assert(binary_search&lt;A2,0,10&gt;::value==2);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6826375c5d23fc3c\" rel=\"nofollow noreferrer\"><kbd>Live on Coliru</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 0, "creation_date": 1455739153, "post_id": 35466496, "comment_id": 58628696, "body": "Doubling is better than a fixed range as in my answer, +1."}, {"owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "reply_to_user": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "edited": false, "score": 1, "creation_date": 1455739679, "post_id": 35466496, "comment_id": 58629044, "body": "@davidhigh In turn I really appreciated the <code>invariant(N) &amp;&amp; !invariant(N+1)</code> test shortcut in your answer which gets rid of the need of <i>two</i> <code>max_aggregate_arity_impl&lt;Aggr, N, N&gt;</code> and <code>max_aggregate_arity_impl&lt;Aggr, N, N+1&gt;</code> partial specializations to handle the final cases. Esp. made worse as the latter one is not allowed and I had to resort to e.g. <code>max_aggregate_arity_impl&lt;Aggr, int_pair&lt;N, N+1&gt;&gt;</code> to circumvent the restriction on non-type template parameters."}], "tags": [], "owner": {"reputation": 33082, "user_id": 726300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZWH6H.png?s=128&g=1", "display_name": "Luc Danton", "link": "https://stackoverflow.com/users/726300/luc-danton"}, "is_accepted": false, "score": 3, "last_activity_date": 1455739875, "last_edit_date": 1455739875, "creation_date": 1455739043, "answer_id": 35466496, "question_id": 35463646, "link": "https://stackoverflow.com/questions/35463646/arity-of-aggregate-in-logarithmic-time/35466496#35466496", "title": "Arity of aggregate in logarithmic time", "body": "<p>A bit of terminology first: we can argue that you are not so much looking for the aggregate initialization arity but the <em>maximum</em> aggregate initialization arity. E.g. the aptly named <code>A2</code> can be aggregate initialized from 0, 1, and 2 arguments so its maximum arity is 2.</p>\n\n<p>Let\u2019s turn 'is aggregate initializable from N arguments' into a trait (although with a shorter name):</p>\n\n<pre><code>struct filler { template&lt;typename type&gt; operator type () const; };\n\ntemplate&lt;typename Arg&gt; void accept(Arg);\n\ntemplate&lt;typename Aggr, std::size_t... Indices,\n         typename = decltype( accept&lt;Aggr&gt;({ (static_cast&lt;void&gt;(Indices), filler {})... }) )&gt;\nvoid aggregate_arity_test(std::index_sequence&lt;Indices...&gt;);\n\ntemplate&lt;typename Aggr, int N, typename Sfinae = void&gt;\nstruct has_aggregate_arity: std::false_type {};\n\ntemplate&lt;typename Aggr, int N&gt;\nstruct has_aggregate_arity&lt;Aggr, N, std::void_t&lt;decltype( aggregate_arity_test&lt;Aggr&gt;(std::make_index_sequence&lt;N&gt;()) )&gt;&gt;\n: std::true_type {};\n</code></pre>\n\n<p>(We use <code>accept&lt;Aggr&gt;({ args... })</code> because that\u2019s the same as checking for <code>Aggr aggr = { args... };</code>, i.e. copy-list-initialization and what people have in mind when they talk about aggregate initialization. <code>Aggr aggr { args.. };</code> is direct-list-initialization, but you can still check against that if that\u2019s what you care about.)</p>\n\n<p>Now we can find an arity for which initialization fails in not too many instantiations with iterated doubling (i.e. we will check at arity 0, then arity 1, arity 2, arity 4, arity 8, ..., arity 2<sup>i</sup>):</p>\n\n<pre><code>template&lt;typename Aggr, int Acc = 0&gt;\nstruct find_failing_init_fast: std::conditional_t&lt;\n    has_aggregate_arity&lt;Aggr, Acc&gt;::value,\n    find_failing_init_fast&lt;Aggr, Acc == 0 ? 1 : Acc * 2&gt;,\n    std::integral_constant&lt;int, Acc&gt;\n&gt; {};\n</code></pre>\n\n<p>Now it\u2019s a matter of a binary search inside <code>[0, N)</code> where <code>N</code> is an arity for which initialization fails:</p>\n\n<pre><code>// binary search invariant:\n//   has_aggregate_arity&lt;Aggr, Low&gt; &amp;&amp; !has_aggregate_arity&lt;Aggr, High&gt;\ntemplate&lt;typename Aggr, int Low, int High&gt;\nstruct max_aggregate_arity_impl\n: std::conditional_t&lt;\n    has_aggregate_arity&lt;Aggr, midpoint(Low, High)&gt;::value\n      &amp;&amp; !has_aggregate_arity&lt;Aggr, midpoint(Low, High) + 1&gt;::value,\n    std::integral_constant&lt;int, midpoint(Low, High)&gt;,\n    std::conditional&lt;\n        has_aggregate_arity&lt;Aggr, midpoint(Low, High)&gt;::value,\n        max_aggregate_arity_impl&lt;Aggr, midpoint(Low, High), High&gt;,\n        max_aggregate_arity_impl&lt;Aggr, Low, midpoint(Low, High)&gt;\n    &gt;\n&gt;::type {};\n\n// special case that 'errors' out (important for SFINAE purposes)\n// as the invariant obviously cannot be maintained\ntemplate&lt;typename Aggr&gt;\nstruct max_aggregate_arity_impl&lt;Aggr, 0, 0&gt; {};\n\ntemplate&lt;typename Aggr&gt;\nstruct max_aggregate_arity\n: max_aggregate_arity_impl&lt;Aggr, 0, find_failing_init_fast&lt;Aggr&gt;::value&gt; {};\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/462b1e3dfa1898b8\" rel=\"nofollow\">Live On Coliru</a></kbd></p>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 35465666, "answer_count": 2, "score": 3, "last_activity_date": 1455784655, "creation_date": 1455730161, "last_edit_date": 1455777177, "question_id": 35463646, "link": "https://stackoverflow.com/questions/35463646/arity-of-aggregate-in-logarithmic-time", "title": "Arity of aggregate in logarithmic time", "body": "<p>How to define arity of an aggregate in logarithmic (at least base two) compilation time (strictly speaking, in logarithmic number of instantiations)?</p>\n\n<p>What I can do currently is to achieve desired in a linear time:</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n\nstruct filler { template&lt; typename type &gt; operator type (); };\n\ntemplate&lt; typename A, typename index_sequence = std::index_sequence&lt;&gt;, typename = void &gt;\nstruct aggregate_arity\n    : index_sequence\n{\n\n};\n\ntemplate&lt; typename A, std::size_t ...indices &gt;\nstruct aggregate_arity&lt; A, std::index_sequence&lt; indices... &gt;, std::__void_t&lt; decltype(A{(indices, std::declval&lt; filler &gt;())..., std::declval&lt; filler &gt;()}) &gt; &gt;\n    : aggregate_arity&lt; A, std::index_sequence&lt; indices..., sizeof...(indices) &gt; &gt;\n{\n\n};\n\nstruct A0 {};\nstruct A1 { double x; };\nstruct A2 { int i; char c; }; \nstruct C50 { template&lt; typename ...Args, typename = std::enable_if_t&lt; (sizeof...(Args) &lt; 51) &gt; &gt; C50(Args &amp;&amp;...) { ; } };\n\nstatic_assert(aggregate_arity&lt;  A0 &gt;::size() == 0);\nstatic_assert(aggregate_arity&lt;  A1 &gt;::size() == 1);\nstatic_assert(aggregate_arity&lt;  A2 &gt;::size() == 2);\nstatic_assert(aggregate_arity&lt; C50 &gt;::size() == 50);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/9d8231ebd1f9911b\" rel=\"nofollow\">Live example</a>.</p>\n\n<p>Please correct me if term \"arity\" is poor.</p>\n\n<p>I think it is possible in principle: firstly one need to double arity trials starting from one until SFINAE failed (surely, in soft manner), then use bisection.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1455730548, "post_id": 35463626, "comment_id": 58623410, "body": "What are the arguments passed to the program? Please edit your question to include them."}, {"owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1455730837, "post_id": 35463626, "comment_id": 58623585, "body": "so the command &quot;./a.out tcnj 1 1 &lt; 0505matrix&quot; will return true because the letters tcnj start at position 1 1 in the matrix"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1455730965, "post_id": 35463626, "comment_id": 58623673, "body": "What is 0505matrix? You need to include information like this in your question otherwise we can&#39;t help you. And edit your question instead of putting this information in the comments."}, {"owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "reply_to_user": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1455731709, "post_id": 35463626, "comment_id": 58624123, "body": "I tried to add the matrix but im unsure how to add a file but the above letters/numbers are all thats in the file"}], "answers": [{"comments": [{"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1455731386, "post_id": 35464011, "comment_id": 58623915, "body": "The condition for the 2nd loop should be <code>k &lt; matrix[i].size()</code> or <code>k &lt; y</code>. Also instead of using <code>resize</code> you can use a different constructor: <code>std::vector&lt;std::vector&lt;char&gt;&gt; matrix(x, std::vector&lt;char&gt;(y));</code>"}, {"owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "edited": false, "score": 1, "creation_date": 1455731797, "post_id": 35464011, "comment_id": 58624181, "body": "wow man i didnt get a sgmentation fault msg omggggggg this might be big news, have been stuck on this for soooo long"}, {"owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "edited": false, "score": 0, "creation_date": 1455731959, "post_id": 35464011, "comment_id": 58624286, "body": "unfortunately, the last for loop isnt working cause i added a cout true/false statement respectively and its printing nothing when i run the program"}, {"owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "reply_to_user": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "edited": false, "score": 0, "creation_date": 1455732319, "post_id": 35464011, "comment_id": 58624479, "body": "@Thomas Molloy, I am not getting what you are trying to say. Do you want to display the user inputs."}, {"owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "edited": false, "score": 1, "creation_date": 1455732796, "post_id": 35464011, "comment_id": 58624742, "body": "figured it out, thanks so much for getting rid of the segmentation fault, took me forever to deal with that"}], "tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1455731201, "creation_date": 1455731201, "answer_id": 35464011, "question_id": 35463626, "link": "https://stackoverflow.com/questions/35463626/new-edit-continue-to-receive-msg-segmentation-fault-11-when-i-try-to-run-the/35464011#35464011", "title": "New Edit: Continue to receive msg &quot;Segmentation Fault: 11&quot; when I try to run the program, any ideas?", "body": "<p>I think the problem in your code is, in the below line,</p>\n\n<pre><code>matrix.resize(y);\n</code></pre>\n\n<p>Since it is a two dimensional vector You should do like this.</p>\n\n<pre><code>  matrix.resize(x);\n  for(int i = 0; i &lt; matrix.size(); i++){\n    matrix[i].resize(y);\n    for(int k = 0; k &lt; matrix.size(); k++){\n      cin &gt;&gt; matrix[i][k];\n    }\n  }\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5941340, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/56f2acb3491f55a48bf821583b4e7e72?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Molloy", "link": "https://stackoverflow.com/users/5941340/thomas-molloy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1455731534, "creation_date": 1455730090, "last_edit_date": 1455731534, "question_id": 35463626, "link": "https://stackoverflow.com/questions/35463626/new-edit-continue-to-receive-msg-segmentation-fault-11-when-i-try-to-run-the", "title": "New Edit: Continue to receive msg &quot;Segmentation Fault: 11&quot; when I try to run the program, any ideas?", "body": "<p>Really unsure what to do, all it is is checking if a word matches in the matrix only from left to right. You out the word and the starting position in the command line. So the command \"./a.out tcnj 1 1 &lt; 0505matrix\" will return true because the letters tcnj start at position 1 1 in the matrix Thanks so much, all help is appreciated!\nSo this is the matrix only the letters are in 5 rows of 5 (thats what the 5s are) similar to a word search</p>\n\n<p>5 5\nu r a q o \nf t c n j \nk r h p r \ne a v o t \nz h g a h </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(int argc, char *argv[]){\n\n  for(int i = 0; i &lt; argc; i++){\n    cout &lt;&lt; argv[i] &lt;&lt; \" \";\n  }\n  std::string sWord = argv[1];\n  int wordLength = sWord.length();\n  int startRow = atoi(argv[2]);\n  int startCol = atoi(argv[3]);\n\n  int x, y;\n  cin &gt;&gt; x &gt;&gt; y;\n  cout &lt;&lt; x &lt;&lt; y &lt;&lt; endl;\n  vector &lt; vector &lt; char &gt; &gt; matrix;\n  matrix.resize(x);\n  for(int i = 0; i &lt; matrix.size(); i++){\n    matrix.resize(y);\n    for(int k = 0; k &lt; matrix.size(); k++){\n      cin &gt;&gt; matrix[i][k];\n    }\n  }\n  for(int i = 0; i &lt; wordLength; i++){\n    if(matrix[startRow][startCol + i] != sWord[i]){\n      return false;\n    }\n    else{\n      return true;\n    }\n  }\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 2, "creation_date": 1455730146, "post_id": 35463589, "comment_id": 58623149, "body": "You need some synchronization mechanism to guarantee that the constructor is done.  That&#39;s all that matters here, when the thread gets created is irrelevant."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5941786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf939cf59d7f913dff141e705d0c848?s=128&d=identicon&r=PG&f=1", "display_name": "mbarnapam", "link": "https://stackoverflow.com/users/5941786/mbarnapam"}, "edited": false, "score": 0, "creation_date": 1455731085, "post_id": 35463664, "comment_id": 58623739, "body": "Could i call start() from the constructor of Derived?"}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "reply_to_user": {"reputation": 11, "user_id": 5941786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf939cf59d7f913dff141e705d0c848?s=128&d=identicon&r=PG&f=1", "display_name": "mbarnapam", "link": "https://stackoverflow.com/users/5941786/mbarnapam"}, "edited": false, "score": 0, "creation_date": 1455731213, "post_id": 35463664, "comment_id": 58623803, "body": "@mbarnapam: No, <a href=\"http://www.artima.com/cppsource/nevercall.html\" rel=\"nofollow noreferrer\">just don&#39;t do it</a>. Particularly, what if you inherit <code>Derived</code> and override <code>handleEvent</code> again?"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1455731417, "post_id": 35463664, "comment_id": 58623937, "body": "You can call the start() in constructor of Derived, however note that the Derived version of the virtual function will be called (which might or might not be a problem, depending whether you derive further from Derived). I.e. calling of virtual functions in constructor is well defined, but you need to know what will happen (which might be a different thing than you could expect)."}], "tags": [], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "is_accepted": false, "score": 1, "last_activity_date": 1455731171, "last_edit_date": 1455731171, "creation_date": 1455730205, "answer_id": 35463664, "question_id": 35463589, "link": "https://stackoverflow.com/questions/35463589/calling-a-pure-virtual-function-in-a-separate-thread-that-is-created-from-base-c/35463664#35463664", "title": "Calling a pure virtual function in a separate thread that is created from base-class constructor", "body": "<p>This can blow up if the <code>threadFunction()</code> calls <code>handleEvent()</code> before the constructor of <code>Derived</code> is done.</p>\n\n<p>Why not place the <code>pthread_create</code> call in another function - say, <code>start()</code> - and call it once the object is constructed?</p>\n\n<pre><code>class Base {\nprotected:\n    pthread_t receiverThreadID;\n    Base() {}\n    ~Base() {}\n\n    void start() {\n        pthread_create(&amp;receiverThreadID,NULL,threadFunction,this);\n    }\n\n    ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3997, "user_id": 3193464, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2cea5a766d750121c7c89390262ee88e?s=128&d=identicon&r=PG&f=1", "display_name": "Anedar", "link": "https://stackoverflow.com/users/3193464/anedar"}, "is_accepted": false, "score": 1, "last_activity_date": 1455730329, "creation_date": 1455730329, "answer_id": 35463710, "question_id": 35463589, "link": "https://stackoverflow.com/questions/35463589/calling-a-pure-virtual-function-in-a-separate-thread-that-is-created-from-base-c/35463710#35463710", "title": "Calling a pure virtual function in a separate thread that is created from base-class constructor", "body": "<p>If you call it in a thread or directly doesn't matter, you should not call the pure virtual function before Derived is fully constructed - and this happens after the construction of Base.</p>\n\n<p>Your sleep is what makes this code running, but not safe.</p>\n\n<p>If you want a safe version, i see 2 options:</p>\n\n<ol>\n<li>Use mutexes or similar mechanisms to prevent the thread from calling the function before the constructor is done.</li>\n<li>(And thats probably the better option): Start your thread in a function called after the constructor. You might want to utilize a factory-function here to make sure it is always called.</li>\n</ol>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user1138939"}, "is_accepted": false, "score": 0, "last_activity_date": 1455731765, "creation_date": 1455731765, "answer_id": 35464191, "question_id": 35463589, "link": "https://stackoverflow.com/questions/35463589/calling-a-pure-virtual-function-in-a-separate-thread-that-is-created-from-base-c/35464191#35464191", "title": "Calling a pure virtual function in a separate thread that is created from base-class constructor", "body": "<p>It is wrong to call virtual function when the constructor is not completely executed. </p>\n\n<p>As other suggested, please make sure to have another function that used this virtual function. And call this function once object is created. \neg. </p>\n\n<pre><code>class Base{\n    static void *create_thread(void * arg){\n         pthread_create(&amp;receiverThreadID,NULL,threadFunction,this);\n    }   \n\n};\n// client call something like this.\nBase * b = new Derived();\nb-&gt;create_thread();\n</code></pre>\n\n<p>Hope this should solve the problem. </p>\n"}], "owner": {"reputation": 11, "user_id": 5941786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdf939cf59d7f913dff141e705d0c848?s=128&d=identicon&r=PG&f=1", "display_name": "mbarnapam", "link": "https://stackoverflow.com/users/5941786/mbarnapam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 633, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1455731765, "creation_date": 1455729965, "question_id": 35463589, "link": "https://stackoverflow.com/questions/35463589/calling-a-pure-virtual-function-in-a-separate-thread-that-is-created-from-base-c", "title": "Calling a pure virtual function in a separate thread that is created from base-class constructor", "body": "<pre><code>#include &lt;unistd.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\n\nclass Base {\nprotected:\n    pthread_t receiverThreadID;\n    Base() {\n        pthread_create(&amp;receiverThreadID,NULL,threadFunction,this);\n    }\n    ~Base() {\n\n    }\n\n    virtual void handleEvent() = 0;\n    static void* threadFunction(void* arg) {\n        while(true) {\n            // This threads receives UDP via recvfrom(). The messages can come in randomly. I use sleep() to simulate a blocking wait\n            sleep(1);\n            ((Base*)arg)-&gt;handleEvent();\n        }\n        return 0;\n    }\n};\n\nclass Derived : public Base {\n    virtual void handleEvent() {\n        // Do something\n        printf(\"hello\\n\");\n    }\n\npublic:\n    Derived() {}\n    ~Derived() {}\n\n};\n\nint main() {\n    Derived derived;\n\n    sleep(10);\n}\n</code></pre>\n\n<p>You are not supposed to call a pure virtual function from the constructor of a class, but is it ok to create a thread in the constructor, that in turn calls a pure virtual function? Is there any risk for a race condition? I did not get any runtime errors with the code above. </p>\n\n<p>If it is not ok to code like I've done, how should you solve it?</p>\n"}, {"tags": ["c++", "matrix"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1455729860, "post_id": 35463502, "comment_id": 58622976, "body": "<code>d[2][2] = a[2][2];</code> acesses all out of bounds. Besides that I see that question asked at least once a day, don&#39;t you find any hints when searching here before asking?"}, {"owner": {"reputation": 661, "user_id": 1096225, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cf3a000cc886bb04f478e2911154dd84?s=128&d=identicon&r=PG", "display_name": "Zermingore", "link": "https://stackoverflow.com/users/1096225/zermingore"}, "edited": false, "score": 0, "creation_date": 1455729929, "post_id": 35463502, "comment_id": 58623020, "body": "You really should use easily understandable variable names"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1455729941, "post_id": 35463502, "comment_id": 58623030, "body": "If you&#39;re intending to copy the entire array, that&#39;s not how you do it. You need to use nested loops."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455729967, "post_id": 35463502, "comment_id": 58623043, "body": "@Barmar or better yet use a container that has operator= overloaded instead of a raw array."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 0, "creation_date": 1455729984, "post_id": 35463502, "comment_id": 58623048, "body": "Oh, this is my first time seeing <code>void _tmain</code>. Why do I not see it being used much?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1455729997, "post_id": 35463502, "comment_id": 58623055, "body": "Consider using the BLAS classes from boost. See www.boost.org."}, {"owner": {"reputation": 661, "user_id": 1096225, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/cf3a000cc886bb04f478e2911154dd84?s=128&d=identicon&r=PG", "display_name": "Zermingore", "link": "https://stackoverflow.com/users/1096225/zermingore"}, "reply_to_user": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 2, "creation_date": 1455730058, "post_id": 35463502, "comment_id": 58623092, "body": "@AimanAl-Eryani it&#39;s a Microsoft extension (see <a href=\"http://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c\" title=\"what is the difference between tmain and main in c\">stackoverflow.com/questions/895827/&hellip;</a>)"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 1, "creation_date": 1455730077, "post_id": 35463502, "comment_id": 58623105, "body": "@AimanAl-Eryani void main is not standard to begin with (and im pretty sure _tmain isnt either but im less sure of that part)."}, {"owner": {"reputation": 3193, "user_id": 2694511, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/2e9aw.png?s=128&g=1", "display_name": "Spencer D", "link": "https://stackoverflow.com/users/2694511/spencer-d"}, "reply_to_user": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "edited": false, "score": 1, "creation_date": 1455730129, "post_id": 35463502, "comment_id": 58623133, "body": "@AimanAl-Eryani, <code>_tmain</code> is explained <a href=\"https://stackoverflow.com/questions/895827/what-is-the-difference-between-tmain-and-main-in-c\">here</a>. Essentially it&#39;s just a Microsoft Visual C++ thing."}, {"owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1455730134, "post_id": 35463502, "comment_id": 58623138, "body": "@Borgleader What is the standard then? Do you mean <code>int main</code>?"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 2, "creation_date": 1455730210, "post_id": 35463502, "comment_id": 58623195, "body": "Long-living variables should be descriptive.  Single letters are not."}], "answers": [{"tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1455730293, "creation_date": 1455730293, "answer_id": 35463701, "question_id": 35463502, "link": "https://stackoverflow.com/questions/35463502/passing-array-as-parameter-to-a-class-in-c/35463701#35463701", "title": "Passing array as parameter to a class in c++", "body": "<p>Here is the problem in your code;</p>\n\n<p>In following line you are passing the argument in incorrect way;</p>\n\n<pre><code>matrix m1(int x[2][2], int y[2][2]);\n</code></pre>\n\n<p>Instead you need to pass as follows;</p>\n\n<pre><code>matrix m1(x, y);\n</code></pre>\n\n<p>Also please add the return statement in your <code>Add()</code> method as it returns an integer otherwise it will give error.</p>\n"}, {"tags": [], "owner": {"reputation": 681, "user_id": 4391671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13dde20277e88d335edf7b8176b1f511?s=128&d=identicon&r=PG&f=1", "display_name": "Aiman Al-Eryani", "link": "https://stackoverflow.com/users/4391671/aiman-al-eryani"}, "is_accepted": false, "score": 1, "last_activity_date": 1455731146, "creation_date": 1455731146, "answer_id": 35463994, "question_id": 35463502, "link": "https://stackoverflow.com/questions/35463502/passing-array-as-parameter-to-a-class-in-c/35463994#35463994", "title": "Passing array as parameter to a class in c++", "body": "<p>There is a lot to comment on about your code, but most importantly this is how you pass an array to a function:</p>\n\n<pre><code>int someArray[] = {1, 2, 3};\n\nvoid incrementArrayElements(int *someArray)\n{\n  someArray[0] += 1;\n  someArray[1] += 1;\n  someArray[2] += 1;\n}\n</code></pre>\n\n<p>An array is essentially a pointer to the first element in it, so you declare the function parameter as a pointer of your type.</p>\n\n<p>Regarding your code, you're having a class <code>matrix</code> which in the constructor takes 2 rank2 arrays for constructing 2 matrices. This makes the name of your class bad as it doesn't describe what an object of that class really is. </p>\n\n<p>Second, your member function, <code>add</code>, is declared <code>int</code>, and so it's supposed to return an integer. Otherwise, you declare it <code>void</code> which is what you use when the function will not return anything.</p>\n\n<p>Third, it appears you're trying to copy the content of the parameter arrays to your member arrays, but that's not how it's done at all. I highly recommend you read on <a href=\"http://www.cplusplus.com/doc/tutorial/arrays/\" rel=\"nofollow\">arrays</a> before you attempt creating anything like this.</p>\n\n<p>Last, after you've read on arrays and any other basics covered in the website that you've missed, check out operator overloading. Learn how overloading <code>operator+</code> can let you add 2 objects <code>a</code> and <code>b</code> of a class easily and cleanly by simply doing <code>a + b</code>.</p>\n\n<p>There are more problems in your code, really. And the snippet you posted shows you've skipped over very important basics.</p>\n"}], "owner": {"reputation": 179, "user_id": 5073177, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4fef1f37ce6885e526ea84d3495c944f?s=128&d=identicon&r=PG&f=1", "display_name": "NoobCoder", "link": "https://stackoverflow.com/users/5073177/noobcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4246, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1455731146, "creation_date": 1455729712, "question_id": 35463502, "link": "https://stackoverflow.com/questions/35463502/passing-array-as-parameter-to-a-class-in-c", "title": "Passing array as parameter to a class in c++", "body": "<p>I need to make a program to add two matrices but it has to show the usage of objects and classes. The m1.add(); line isn't working. I get error c2228 - left of .add must have class/struct/union</p>\n\n<p>The basic idea of this program is that there is a class called matrix which contains the add() function which takes two 2-dimensional arrays (two matrices) and adds them together and outputs a final matrix and displays it to the user.</p>\n\n<p>I'm trying to use a constructor in the class but not sure if that's the proper way. Basically the two matrices has to pass from the main function to the class either through the function or constructor as parameters.</p>\n\n<p>Also, am I using too many variable names like a,b,c,d,e,f?</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;conio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass matrix{\nprivate:\nint d[2][2];\nint e[2][2];\nint f[2][2];\npublic:\nmatrix(int a[2][2], int b[2][2]){\n    d[2][2] = a[2][2];\n    e[2][2] = b[2][2];\n}\n\nint add(){\n        for (int i = 0; i &lt; 2; i++)\n            for (int j = 0; j &lt; 2; j++)\n                f[i][j] = d[i][j] + e[i][j]; \n\n        for (int i = 0; i &lt; 2; i++)\n        {\n            for (int j = 0; j &lt; 2; j++)\n            {\n                cout &lt;&lt; f[i][j] &lt;&lt; \"\\t\";\n            }\n        }\n        cout &lt;&lt; \"\\n\";\n    }\n };\n\nvoid _tmain(int argc, _TCHAR* argv[])\n{\nint x[2][2];\nint y[2][2];\ncout &lt;&lt; \"Enter numbers for Matrix A:\\n\";\n\nfor (int i = 0; i&lt;2; i++)\n    for (int j = 0; j&lt;2; j++)\n    {       \n        cin &gt;&gt; x[i][j];\n    }\n\ncout &lt;&lt; \"Enter numbers for Matrix B:\\n\";\n\nfor (int i = 0; i&lt;2; i++)\n    for (int j = 0; j&lt;2; j++)\n    {\n        cin &gt;&gt; y[i][j];\n    }\n\nmatrix m1(int x[2][2], int y[2][2]);\nm1.add();\n\ncout &lt;&lt; \"\\n\";\nsystem(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "specialization"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 5451092, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UQvhAI4X3F4/AAAAAAAAAAI/AAAAAAAAABM/OXr1c5T3ink/photo.jpg?sz=128", "display_name": "Wang Weiyi", "link": "https://stackoverflow.com/users/5451092/wang-weiyi"}, "is_accepted": true, "score": 3, "last_activity_date": 1455730076, "creation_date": 1455730076, "answer_id": 35463620, "question_id": 35463466, "link": "https://stackoverflow.com/questions/35463466/template-specialization-within-template-specialized-class/35463620#35463620", "title": "Template specialization within template specialized class", "body": "<pre><code>template&lt;int&gt; struct Test;\n\ntemplate&lt;&gt; struct Test&lt;0&gt; {\n    template&lt;int&gt; static void foo();\n\n};\n\ntemplate&lt;&gt; void Test&lt;0&gt;::foo&lt;0&gt;() {}\ntemplate&lt;&gt; void Test&lt;0&gt;::foo&lt;1&gt;() {}\n</code></pre>\n\n<p>Try this</p>\n"}, {"tags": [], "owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "is_accepted": false, "score": 1, "last_activity_date": 1455730144, "creation_date": 1455730144, "answer_id": 35463639, "question_id": 35463466, "link": "https://stackoverflow.com/questions/35463466/template-specialization-within-template-specialized-class/35463639#35463639", "title": "Template specialization within template specialized class", "body": "<p>This should work in g++ and MSVC alike:</p>\n\n<pre><code>template &lt;int&gt;\nstruct Test;\n\ntemplate &lt;&gt;\nstruct Test&lt;0&gt;\n{\n  template &lt;int&gt;\n  static void foo();\n};\ntemplate &lt;&gt;\nvoid Test&lt;0&gt;::foo&lt;1&gt;()\n{\n}\n\nint main()\n{\n  Test&lt;0&gt;::foo&lt;1&gt;();\n}\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 35463620, "answer_count": 2, "score": 1, "last_activity_date": 1455730144, "creation_date": 1455729606, "question_id": 35463466, "link": "https://stackoverflow.com/questions/35463466/template-specialization-within-template-specialized-class", "title": "Template specialization within template specialized class", "body": "<p>The following compiles in Visual Studio 2015</p>\n\n<pre><code>template &lt;int&gt; struct Test;\n\ntemplate &lt;&gt; struct Test&lt;0&gt; {\n    template &lt;int&gt; static void foo();\n    template &lt;&gt; static void foo&lt;0&gt;() {}\n    template &lt;&gt; static void foo&lt;1&gt;() {}\n};\n</code></pre>\n\n<p>But GCC 5.2 complains error: template-id 'foo&lt;0>' in declaration of primary template\n  template &lt;> static void foo&lt;0>() {}</p>\n\n<p>How to fix the code so that it compiles in both compilers?</p>\n"}, {"tags": ["c++", "menu", "ifstream"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3743440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02968d31e2f240ed67929144de068c0?s=128&d=identicon&r=PG&f=1", "display_name": "AznChris", "link": "https://stackoverflow.com/users/3743440/aznchris"}, "edited": false, "score": 0, "creation_date": 1455736339, "post_id": 35463568, "comment_id": 58626830, "body": "omg. I hadn&#39;t realized that I checked before opened. Also I had to throw in a cin.clear and cin,ignore to get it to work. Thank you so much. May I ask why you suggest a do-while instead of while? I&#39;m just a student so I&#39;m still learning what may be the best options to do. At the moment, I&#39;m just typing in first what I know and fix if it doesn&#39;t work."}, {"owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "reply_to_user": {"reputation": 15, "user_id": 3743440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02968d31e2f240ed67929144de068c0?s=128&d=identicon&r=PG&f=1", "display_name": "AznChris", "link": "https://stackoverflow.com/users/3743440/aznchris"}, "edited": false, "score": 0, "creation_date": 1455736975, "post_id": 35463568, "comment_id": 58627250, "body": "a while loop checks a condition before starting to execute a loop, but in this you want a person to do something then check if the value is some specific or not. DO something WHILE a value is true and WHILE a value is true DO something is totally different, hopefully this clears this and i am also a student aswell its just that practice makes perfect bro :D"}], "tags": [], "owner": {"reputation": 971, "user_id": 5935366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6dfca29890919ec6ab874cf49b92041?s=128&d=identicon&r=PG&f=1", "display_name": "Martin Gardener", "link": "https://stackoverflow.com/users/5935366/martin-gardener"}, "is_accepted": true, "score": 0, "last_activity_date": 1455729908, "creation_date": 1455729908, "answer_id": 35463568, "question_id": 35463371, "link": "https://stackoverflow.com/questions/35463371/ifstream-wont-open-file-after-selecting-menu-choice/35463568#35463568", "title": "ifstream won&#39;t open file after selecting menu choice", "body": "<p>1 - change your main code to <code>do-while</code>, idk why people opt for while loops in such scenarios. </p>\n\n<pre><code>do{\n    cout &lt;&lt; \"menu here\";\n    cin &gt;&gt; UserAction;\n\n    if (UserAction == 1)\n        BA.getInstance(BA); //Input by keyboard. Works fine.\n    if (UserAction == 2)\n        BA.getInstance(BA, fin); //Input by file. \n} while(UserAction!=0);\n</code></pre>\n\n<p>2 - fin.fails because it isn't initialized, remove that line and it will work fine. try to use <code>fin.fail()</code> after <code>fin.open();</code></p>\n"}], "owner": {"reputation": 15, "user_id": 3743440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02968d31e2f240ed67929144de068c0?s=128&d=identicon&r=PG&f=1", "display_name": "AznChris", "link": "https://stackoverflow.com/users/3743440/aznchris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 35463568, "answer_count": 1, "score": 0, "last_activity_date": 1455729908, "creation_date": 1455729354, "question_id": 35463371, "link": "https://stackoverflow.com/questions/35463371/ifstream-wont-open-file-after-selecting-menu-choice", "title": "ifstream won&#39;t open file after selecting menu choice", "body": "<p>So my main code is a menu.</p>\n\n<pre><code>BankAccount BA;\nifstream fin;\nint UserAction = -1;\n\nwhile (UserAction != 0) {\n    cout &lt;&lt; \"menu here\";\n    cin &gt;&gt; UserAction;\n\n    if (UserAction == 1)\n        BA.getInstance(BA); //Input by keyboard. Works fine.\n    if (UserAction == 2)\n        BA.getInstance(BA, fin); //Input by file.\n}\n</code></pre>\n\n<p>If I were to choose option #2, it would execute this code:</p>\n\n<pre><code>void BankAccount::getInstance(BankAccount &amp;BA, ifstream &amp;fin) {\n    string actN, fname, lname, InputFileName;\n    double bal;\n\n    fin.sync();\n    cout &lt;&lt; \"Please enter input file path: \";\n    getline(cin, InputFileName);\n    if (fin.fail())\n        cout &lt;&lt; \"failed\";\n    else {\n        fin.open(InputFileName.c_str());\n        BA.getInstance(BA, fin);\n    }\n\n    fin &gt;&gt; actN;\n    fin &gt;&gt; lname;\n    fin &gt;&gt; fname;\n    fin &gt;&gt; bal;\n    BA = BankAccount(actN, lname, fname, bal);\n}\n</code></pre>\n\n<p>After entering the file path, and pressing enter, it would say failed and kick me to menu. If I put cin.sync(); where fin.sync is, it would just keep looping me to enter in the file path. Note that it works outside the menu though. How would I fix it so that it would open the file path correctly without issues so it could process the information?</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1455729392, "post_id": 35463359, "comment_id": 58622634, "body": "Change language to C? Is that an option?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1455729406, "post_id": 35463359, "comment_id": 58622642, "body": "How are you generating them?  If you are using a <code>int**</code> why not have your function take that?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1455729436, "post_id": 35463359, "comment_id": 58622661, "body": "Shame on you. <a href=\"https://www.google.com/search?q=How+can+I+pass+a+variably+sized+2d+array+to+a+function\" rel=\"nofollow noreferrer\">google.com/&hellip;</a> pick a duplicate and close the question."}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 2, "creation_date": 1455730294, "post_id": 35463359, "comment_id": 58623253, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/14548753/passing-a-multidimensional-variable-length-array-to-a-function\">Passing a multidimensional variable length array to a function</a>"}], "answers": [{"comments": [{"owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "edited": false, "score": 0, "creation_date": 1455730315, "post_id": 35463653, "comment_id": 58623268, "body": "More complete answers can be found to this duplicate question: <a href=\"http://stackoverflow.com/questions/8767166/passing-a-2d-array-to-a-c-function?rq=1\">Passing a 2D array to a C++ function</a>"}, {"owner": {"reputation": 2201, "user_id": 1488801, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/6uYLp.jpg?s=128&g=1", "display_name": "James Elderfield", "link": "https://stackoverflow.com/users/1488801/james-elderfield"}, "edited": false, "score": 0, "creation_date": 1455730972, "post_id": 35463653, "comment_id": 58623676, "body": "You can use a pointer to a pointer, you don&#39;t have to collapse it to a 1D array. i.e. int** in the example above."}], "tags": [], "owner": {"reputation": 848, "user_id": 5941564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916422a9c9c1aef25c1c3e886725781?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle A", "link": "https://stackoverflow.com/users/5941564/kyle-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1455730182, "creation_date": 1455730182, "answer_id": 35463653, "question_id": 35463359, "link": "https://stackoverflow.com/questions/35463359/how-can-i-pass-a-variably-sized-2d-array-to-a-function/35463653#35463653", "title": "How can I pass a variably sized 2d array to a function?", "body": "<p>In c++ multi-dimensional arrays need the sizes of all but the top dimension as part of the type. So the type of a 2d array could be int a[][3], but not int a[][].</p>\n\n<p>Assuming that <em>n</em> is not a constant, your best bet is to treat <em>square</em> as a one dimensional array and then use <em>n</em>, which you passed in, to index into <em>square</em>, like so:</p>\n\n<pre><code>for(int i=0; i&lt;n*n; i++)\n{\n    printf(\"%3d \", square[i]);\n    if((n-1)==(i%n))\n        printf(\"\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5486737, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-Y4SaSmqag90/AAAAAAAAAAI/AAAAAAAACOk/mKi5fBUPOQk/photo.jpg?sz=128", "display_name": "Duncan Adkins", "link": "https://stackoverflow.com/users/5486737/duncan-adkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1455730182, "creation_date": 1455729314, "question_id": 35463359, "link": "https://stackoverflow.com/questions/35463359/how-can-i-pass-a-variably-sized-2d-array-to-a-function", "title": "How can I pass a variably sized 2d array to a function?", "body": "<p>I am generating 3 nxn sized magic squares (Where n is an odd number between 3 and 15), and want to pass the 2d arrays they are stored in to this function:</p>\n\n<pre><code>void printSquare(int n, int square[n][n], int b){\n    cout &lt;&lt; \"Magic Square #\" &lt;&lt; b &lt;&lt; \" is:\\n\";\n\n    for(int i=0; i&lt;n; i++)\n    {\n        for(int j=0; j&lt;n; j++)\n            printf(\"%3d \", square[i][j]);\n        printf(\"\\n\");\n    }\n}\n</code></pre>\n\n<p>The arrays are passed to the function like this:</p>\n\n<pre><code> printSquare(n, magicSquare, 1);\n</code></pre>\n\n<p>However, no matter how I try to change it to get the function to accept the 2d array with undefined size, I keep getting errors like \"candidate function not viable: no known conversion\n      from 'int [n][n]' to 'int (*)[n]' for 2nd argument\". How can I fix this so that I can use the 2d array in my function?</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1455729780, "post_id": 35463343, "comment_id": 58622909, "body": "Look for <code>unaryExpr</code> in the doc of Eigen."}], "answers": [{"comments": [{"owner": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "edited": false, "score": 0, "creation_date": 1455730437, "post_id": 35463537, "comment_id": 58623347, "body": "thank you very much. that was exactly what i wanted."}], "tags": [], "owner": {"reputation": 12139, "user_id": 2412846, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/eBJip.gif?s=128&g=1", "display_name": "davidhigh", "link": "https://stackoverflow.com/users/2412846/davidhigh"}, "is_accepted": true, "score": 3, "last_activity_date": 1455729796, "creation_date": 1455729796, "answer_id": 35463537, "question_id": 35463343, "link": "https://stackoverflow.com/questions/35463343/eigen-matrix-library-coefficient-wise-manipulation/35463537#35463537", "title": "Eigen Matrix library coefficient wise manipulation", "body": "<p>You can apply a <code>unaryExpr</code> onto your matrix:</p>\n\n<pre><code>Eigen::MatrixXd M(10,12);\n//fill matrix M\n\nauto f = my_F{1.0,2.0};\nauto M_new = M.unaryExpr(f);\n</code></pre>\n\n<p>Note that the result of the transformation <code>M_new</code> is not stored, but evaluated on the fly (as usual in expression template libraries). If you want to store the result, replace \"<code>auto M_new</code>\" by \"<code>Eigen::MatrixXd M_new</code>\".</p>\n"}], "owner": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "closed_date": 1455923570, "accepted_answer_id": 35463537, "answer_count": 1, "score": 0, "last_activity_date": 1455729796, "creation_date": 1455729274, "question_id": 35463343, "link": "https://stackoverflow.com/questions/35463343/eigen-matrix-library-coefficient-wise-manipulation", "closed_reason": "Duplicate", "title": "Eigen Matrix library coefficient wise manipulation", "body": "<p>May I please seek help with a computation issue of the matrix library \"Eigen.\" </p>\n\n<p>say i have a functor:</p>\n\n<pre><code>    struct my_F\n    {\n      double a_,b_;\n      my_F(double a,double b):a_(a),b_(b){};\n      double operator()(double x){return (x+a)*(x+b);}\n    }\n</code></pre>\n\n<p>Now I want to use this functor to operate on a Eigen::MatrixXd</p>\n\n<pre><code>Eigen::MatrixXd a(10,12);\na.setConstant(2.); \n</code></pre>\n\n<p>How do I write something (in a compact and nice way) so that each element of \"a\" is taken and the functor operation to it is applied. </p>\n\n<p>I can always do it in a loop but is that the only way out ?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "clang", "copy-elision"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1455729616, "post_id": 35463291, "comment_id": 58622781, "body": "Seems to be implementation defined, so all of them. See <a href=\"http://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization?rq=1\" title=\"what are copy elision and return value optimization\">stackoverflow.com/questions/12953127/&hellip;</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455730317, "post_id": 35463291, "comment_id": 58623269, "body": "which version of boost are you using?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1455737166, "post_id": 35463291, "comment_id": 58627373, "body": "@barry: It doesn&#39;t compile with older versions (at least, not with 1.54) so maybe there will be a hint there."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455775961, "post_id": 35463291, "comment_id": 58642910, "body": "Is it just about <code>foo</code>? That behavior&#39;s <a href=\"http://stackoverflow.com/questions/25875596/can-returning-a-local-variable-by-value-in-c11-14-result-in-the-return-value-b/25876175#25876175\">due to a DR</a>. I assume that the older version issue is simply that <code>boost::optional</code> didn&#39;t have move-only type support then."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455809259, "post_id": 35463291, "comment_id": 58664478, "body": "@T.C. Same boost version (1.59) - it has move support, it&#39;s the compiler versions that I was changing. I guess gcc5.2 implements that DR but clang3.7 does not?"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1455729153, "creation_date": 1455729153, "question_id": 35463291, "link": "https://stackoverflow.com/questions/35463291/chained-copy-elision-with-noncopyable-types", "title": "chained copy elision with noncopyable types", "body": "<p>Consider the following example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;boost/optional.hpp&gt;\n\nstruct X {\n    boost::optional&lt;std::unique_ptr&lt;int&gt;&gt; foo(int i) {\n        std::unique_ptr&lt;int&gt; t(new int{i});\n        return t;\n\n        // every compiler works with:\n        // return std::unique_ptr&lt;int&gt;(new int{i});\n    }\n};\n\nstruct Y {\n    X x;\n\n    boost::optional&lt;std::unique_ptr&lt;int&gt;&gt; bar(int i) {\n        return x.foo(i);\n    }\n};\n\n\nint main()\n{\n    Y{}.bar(42);   \n}\n</code></pre>\n\n<p>I have two chained copy-elidable returns of a non-copyable object. gcc 5.2 compiles it fine. But neither gcc 4.8 nor clang 3.7 like it, due to actually trying to perform the copy. Which compiler is right? I'm assuming gcc intentionally changed to allow this behavior, which seems particularly useful for cases like this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1455729305, "post_id": 35463279, "comment_id": 58622587, "body": "Why did you put <code>cin.ignore();</code> there?  Have you tried putting it somewhere else?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1455729382, "post_id": 35463279, "comment_id": 58622628, "body": "What happens if you enter 3 or more names? Which ones lose the first letter?"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1455729391, "post_id": 35463279, "comment_id": 58622633, "body": "I dunno, but my 1st step would be figuring out what exactly <code>ignore</code> does, On a side note, better don&#39;t try to insert <code>-5</code> names."}, {"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1455729551, "post_id": 35463279, "comment_id": 58622741, "body": "I tried putting it after getline(cin,names[i]); but that creates an issue and I put it above cout &lt;&lt; &quot;Enter name #&quot; &lt;&lt; (i+1) &lt;&lt; &quot;: &quot;; and that created a spacing issue."}, {"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1455729600, "post_id": 35463279, "comment_id": 58622771, "body": "if I try 3 names the first name will be fine but the final two lose the first letter"}, {"owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1455729620, "post_id": 35463279, "comment_id": 58622784, "body": "are std::vector, std::sort and std::remove off of the table? You can improve your task using STL. About, the chomp letter, see if you can flush the cin buffer. I&#39;m just a few ideas the came in my mind."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1455729672, "post_id": 35463279, "comment_id": 58622825, "body": "@ernie, can you explain what cin.ignore() does?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1455729709, "post_id": 35463279, "comment_id": 58622852, "body": "Using a debugger will help you narrow the scope of the failure.  Have you used the debugger?"}, {"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "reply_to_user": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1455729819, "post_id": 35463279, "comment_id": 58622948, "body": "@Captain Giraffe I&#39;m sorry if this is wrong since I&#39;m relatively new, but from my knowledge the typical &quot;cin&quot; alone would only take up until the first space in a user input, but using ignore allows cin to take in the input until the next enter occurs ?"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1455729707, "creation_date": 1455729707, "answer_id": 35463497, "question_id": 35463279, "link": "https://stackoverflow.com/questions/35463279/how-come-the-first-letter-in-my-final-cout-gets-cut-off/35463497#35463497", "title": "How come the first letter in my final cout gets cut off?", "body": "<p>Move <code>cin.ignore()</code> right after <code>cin &gt;&gt; numNames;</code>, before the loop that reads the names.</p>\n\n<p>You only need this to ignore the newline that is left in the stream after reading the number of names. <code>getline()</code> reads (and ignores) the newline from the stream, so there's no need to call <code>ignore()</code> again before reading each name. As a result, it's reading and ignoring the first character of the name.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "edited": false, "score": 0, "creation_date": 1455730485, "post_id": 35463555, "comment_id": 58623372, "body": "Wow thank you so much! this gave me a better understanding of what     cin.ignore  means which I think was my main issue here. My professor takes off points if we use anything we haven&#39;t learned yet, so I couldn&#39;t use the limits but it worked fine without them!"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1455730759, "last_edit_date": 1455730759, "creation_date": 1455729863, "answer_id": 35463555, "question_id": 35463279, "link": "https://stackoverflow.com/questions/35463279/how-come-the-first-letter-in-my-final-cout-gets-cut-off/35463555#35463555", "title": "How come the first letter in my final cout gets cut off?", "body": "<p>The following block of code</p>\n\n<pre><code>if(numNames &gt; MAX_INPUT) {\n   cout &lt;&lt; \"Out of memory!\" &lt;&lt; endl;\n   break;\n }  \n</code></pre>\n\n<p>does not need to be executed in every iteration of the <code>do-while</code> loop. You can change you function to use:</p>\n\n<pre><code>if(numNames &gt; MAX_INPUT) {\n   cout &lt;&lt; \"Out of memory!\" &lt;&lt; endl;\n   // Deal with the problem. Exit??\n}\n\ndo {\n    cout &lt;&lt; \"Enter name #\" &lt;&lt; (i+1) &lt;&lt; \": \";\n    cin.ignore();\n    getline(cin,names[i]);\n    ++i;\n}  while (i &lt; numNames);\n</code></pre>\n\n<p>Once you move the check out of the loop, you have to ask yourself, \"Do I need to ignore a character in each iteration of the loop?\" The answer is \"No\". You need to ignore the newline only after reading <code>numNames</code>. So, you move it out of the loop also.</p>\n\n<pre><code>if(numNames &gt; MAX_INPUT) {\n   cout &lt;&lt; \"Out of memory!\" &lt;&lt; endl;\n   // Deal with the problem. Exit??\n}\n\n// Ignore the newline left on the stream before reading names.\ncin.ignore();\n\ndo {\n    cout &lt;&lt; \"Enter name #\" &lt;&lt; (i+1) &lt;&lt; \": \";\n    getline(cin,names[i]);\n    ++i;\n}  while (i &lt; numNames);\n</code></pre>\n\n<p>You can improve on that by making sure that everything up to and including the newline is ignored by using:</p>\n\n<pre><code>cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n</code></pre>\n\n<p>Add</p>\n\n<pre><code>#include &lt;limits&gt;\n</code></pre>\n\n<p>to be able to use <code>std::numeric_limits</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 5941698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/618adf1e4c3fced72e83c790b423d336?s=128&d=identicon&r=PG&f=1", "display_name": "ernie", "link": "https://stackoverflow.com/users/5941698/ernie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "accepted_answer_id": 35463555, "answer_count": 2, "score": 3, "last_activity_date": 1455730759, "creation_date": 1455729121, "last_edit_date": 1455729668, "question_id": 35463279, "link": "https://stackoverflow.com/questions/35463279/how-come-the-first-letter-in-my-final-cout-gets-cut-off", "title": "How come the first letter in my final cout gets cut off?", "body": "<pre><code>int main () {\n    const int MAX_INPUT = 99;\n    string names[MAX_INPUT];\n    string eraseName;\n    string newList;\n    int numNames = 0;\n    int i = 0;\n\n\n    cout &lt;&lt; \"How many names do you want (max 99)? \";\n    cin &gt;&gt; numNames;   \n\n    do {\n        if(numNames &gt; MAX_INPUT) {\n            cout &lt;&lt; \"Out of memory!\" &lt;&lt; endl;\n            break;\n        }  \n        cout &lt;&lt; \"Enter name #\" &lt;&lt; (i+1) &lt;&lt; \": \";\n        cin.ignore();\n        getline(cin,names[i]);\n        ++i;\n    }  \n    while (i &lt; numNames);\n\n    cout &lt;&lt; \"What name do you want to eliminate? \";\n    getline(cin,eraseName);\n    cout &lt;&lt; \"Here is the list in reverse order, skipping \";\n    cout &lt;&lt; eraseName &lt;&lt; \"...\" &lt;&lt; endl;\n\n    i = 0;\n    for (i = 0; i &lt; numNames; ++i) {\n        cout &lt;&lt; names[i] &lt;&lt; endl;\n    }       \n    return 0;\n} \n</code></pre>\n\n<p>I have an assignment where I have to \"eliminate\" an element in an array and recreate the output. I know my final for loop will not erase the element, it's just there because I was testing the issue, but if names has two inputs (John Doe and Jane Doe) and I say to cout them the final loop couts: </p>\n\n<p>John Doe<br>\nane Doe</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1455729132, "post_id": 35463181, "comment_id": 58622481, "body": "You can&#39;t, it reads until it fails (that is, you enter a non-integer) or the stream ends. In your terminal, Ctrl-Z may terminate the stream. See your documentation for details."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1455729150, "post_id": 35463181, "comment_id": 58622490, "body": "[Ctrl]+Z will terminate the stream."}], "answers": [{"tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": true, "score": 0, "last_activity_date": 1455732711, "creation_date": 1455732711, "answer_id": 35464467, "question_id": 35463181, "link": "https://stackoverflow.com/questions/35463181/how-can-i-terminate-data-input-by-enter/35464467#35464467", "title": "How can I terminate data input by enter?", "body": "<p>Write your own stream buffer. Just an example (not verified):</p>\n\n<pre><code>class nl_to_eof_buf : public std::streambuf\n{\n\n  std::streambuf* src;\n  char ch;\n\n  traits_type::int_type underflow() override\n  {\n    ch = src-&gt;sbumpc();\n    if ( ch == '\\n' )\n      return traits_type::eof();\n    setg( &amp;ch, &amp;ch, &amp;ch+1 );\n    return ch;\n  }\n\npublic:\n\n  nl_to_eof_buf( std::streambuf* buf ) : src( buf ) { setg( &amp;ch, &amp;ch+1, &amp;ch+1 ); }\n\n};\n\nint main()\n{\n  //\n  std::streambuf* orig = cin.rdbuf();\n  nl_to_eof_buf buf( orig );\n\n  //\n  cin.rdbuf( &amp;buf );\n  vector&lt;int&gt; vec ={ istream_iterator&lt;int&gt;( cin ), istream_iterator&lt;int&gt;() };\n  cin.rdbuf( orig );\n\n  //\n  copy( begin( vec ), end( vec ), ostream_iterator&lt;int&gt;( cout, \" \" ) );\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 5720724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9d2558365dcf8ce95ab7f6a5329add2?s=128&d=identicon&r=PG&f=1", "display_name": "T-kin-ter", "link": "https://stackoverflow.com/users/5720724/t-kin-ter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 35464467, "answer_count": 1, "score": 0, "last_activity_date": 1455732711, "creation_date": 1455728852, "last_edit_date": 1455730030, "question_id": 35463181, "link": "https://stackoverflow.com/questions/35463181/how-can-i-terminate-data-input-by-enter", "title": "How can I terminate data input by enter?", "body": "<p>How can I terminate input numbers by press 'enter' using 'istream_iterator'? In my program, only if I press other key than 'enter' input is finished.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iterator&gt;\nusing namespace std;\n\nint main() {\nvector&lt;int&gt; vec = { istream_iterator&lt;int&gt;(cin), istream_iterator&lt;int&gt;() };\ncopy(begin(vec), end(vec), ostream_iterator&lt;int&gt;(cout, \" \"));\nreturn 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "oop", "codeblocks", "friend"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455729472, "post_id": 35463169, "comment_id": 58622690, "body": "That syntax is available with the current standard only AFAIK. Are you sure <code>--std=c++11</code> is used when compiling your code?"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455729476, "post_id": 35463169, "comment_id": 58622692, "body": "Remove the &#39;inline&#39; on <code>comparePersonAge</code> and try it again on Linux. I&#39;m thinking that because you&#39;re passing the function to <code>std::sort</code> it needs to be an actual function, not just be inlined, and apparently the compiler you&#39;re using on Linux isn&#39;t bright enough to handle this."}, {"owner": {"reputation": 73, "user_id": 5911365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6ceb588ddb4d01b0ace53d64f1f0df4?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Simmons ", "link": "https://stackoverflow.com/users/5911365/christine-simmons"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455729686, "post_id": 35463169, "comment_id": 58622836, "body": "@BobJarvis Removing &#39;inline&#39; does not solve the problem. I am using Code Blocks with C++11 compiler."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455729725, "post_id": 35463169, "comment_id": 58622860, "body": "Also, to be passed to <code>std::sort</code> doesn&#39;t <code>comparePersonAge</code> need to be <code>static</code>?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455729766, "post_id": 35463169, "comment_id": 58622896, "body": "@BobJarvis It&#39;s a friend, not a member."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1455729795, "post_id": 35463169, "comment_id": 58622923, "body": "@molbdnilo - whoops. Overlooked that..."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1455730006, "post_id": 35463169, "comment_id": 58623060, "body": "Using <code>comparePersonAge</code> &quot;standalone&quot; (not passing it to <code>std::sort</code>) works as it should. I suspect that it&#39;s a g++ bug."}, {"owner": {"reputation": 73, "user_id": 5911365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6ceb588ddb4d01b0ace53d64f1f0df4?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Simmons ", "link": "https://stackoverflow.com/users/5911365/christine-simmons"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1455730047, "post_id": 35463169, "comment_id": 58623085, "body": "@BobJarvis Changing comparePersonAge to static will induce an additional error on CodeBlocks in Linux: &#39;Storage class specifiers invalid in friend function declarations&#39;. On the other side, the application will run fine in Visual Studio 2015 on Windows."}, {"owner": {"reputation": 73, "user_id": 5911365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6ceb588ddb4d01b0ace53d64f1f0df4?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Simmons ", "link": "https://stackoverflow.com/users/5911365/christine-simmons"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1455730200, "post_id": 35463169, "comment_id": 58623187, "body": "@molbdnilo How does one get around these g++ bugs? How can I modify the above code to do the same work, while not inducing the compilation error?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1455730278, "post_id": 35463169, "comment_id": 58623242, "body": "@ChristineSimmons Write the function&#39;s definition outside the class, leaving only a friend declaration inside it."}, {"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455802366, "post_id": 35463169, "comment_id": 58659215, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 which syntax?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "edited": false, "score": 0, "creation_date": 1455802922, "post_id": 35463169, "comment_id": 58659620, "body": "@AngelusMortis The inlined <code>friend</code> function."}], "answers": [{"tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1455801595, "last_edit_date": 1455801595, "creation_date": 1455729936, "answer_id": 35463579, "question_id": 35463169, "link": "https://stackoverflow.com/questions/35463169/error-friend-member-function-name-was-not-declared-in-this-scope/35463579#35463579", "title": "Error: &#39;Friend Member Function Name&#39; was not declared in this scope", "body": "<p>The purpose of the <code>friend</code> keyword is to make an exception to the access rules (<code>protected</code> and <code>private</code>), giving a class or function access to members not otherwise allowed.</p>\n\n<p>So you can declare and define your <code>comparePersonAge()</code> function outside of your class declaration, and use the <code>friend</code> keyword inside the declaration, to give the function access to private members, <code>age</code> specifically.</p>\n"}, {"comments": [{"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455802799, "post_id": 35482857, "comment_id": 58659521, "body": "So gcc (and clang) are correct? <code>comparePersonAge</code> has no arguments in as provided to <code>sort</code>."}, {"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "reply_to_user": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455803090, "post_id": 35482857, "comment_id": 58659739, "body": "@Niall Sorry but I&#39;m not sure what you&#39;re saying"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 1, "creation_date": 1455803940, "post_id": 35482857, "comment_id": 58660371, "body": "Ok, I think they are correct to reject the code. When <code>std::sort(v.begin(), v.end(), comparePersonAge);</code> is complied, <code>comparePersonAge</code> has no arguments, so there is no ADL and since there is no matching declaration in the namespace scope, it can&#39;t be found."}, {"owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "reply_to_user": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1455804062, "post_id": 35482857, "comment_id": 58660481, "body": "I &#39;m sorry but I just realized that too, since ADL only happens in function call but since <code>std::sort</code> is being passed just name of function, no function <code>comparePersonAge</code> should be found"}], "tags": [], "owner": {"reputation": 1364, "user_id": 4882052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b6f17495dcbf1f2bd2ed7e3dfa3cc46f?s=128&d=identicon&r=PG&f=1", "display_name": "Angelus Mortis", "link": "https://stackoverflow.com/users/4882052/angelus-mortis"}, "is_accepted": false, "score": 1, "last_activity_date": 1455804378, "last_edit_date": 1455804378, "creation_date": 1455802310, "answer_id": 35482857, "question_id": 35463169, "link": "https://stackoverflow.com/questions/35463169/error-friend-member-function-name-was-not-declared-in-this-scope/35482857#35482857", "title": "Error: &#39;Friend Member Function Name&#39; was not declared in this scope", "body": "<p>Standard 7.3.1.2/3 : </p>\n\n<blockquote>\n  <p>Every name first declared in a namespace is a member of that\n  namespace. <strong>If a friend declaration in a non-local class first declares\n  a class or function the friend class or function is a member of the\n  innermost enclosing namespace. The name of the friend is not found by\n  unqualified lookup (3.4.1) or by qualified lookup (3.4.3) until a\n  matching declaration is provided in that namespace scope (either\n  before or after the class definition granting friendship). If a friend\n  function is called, its name may be found by the name lookup that\n  considers functions from namespaces and classes associated with the\n  types of the function arguments (3.4.2)</strong> . If the name in a friend\n  declaration is neither qualified nor a template-id and the declaration\n  is a function or an elaborated-type-specifier, the lookup to determine\n  whether the entity has been previously declared shall not consider any\n  scopes outside the innermost enclosing namespace.</p>\n</blockquote>\n\n<p>Ok after little discussion with @Niall I realized that MSVC++ is wrong in this case, since ADL only happens in function call expression and since <code>std::sort</code> is being passed just name of function i.e <code>comparePersonAge</code>, no function <code>comparePersonAge</code> should be found at the time of call to <code>std::sort</code> . Hence GCC and Clang are correct I think </p>\n"}, {"tags": [], "owner": {"reputation": 7447, "user_id": 602372, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/q6bLu.jpg?s=128&g=1", "display_name": "Yam Marcovic", "link": "https://stackoverflow.com/users/602372/yam-marcovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1455805953, "creation_date": 1455805953, "answer_id": 35484257, "question_id": 35463169, "link": "https://stackoverflow.com/questions/35463169/error-friend-member-function-name-was-not-declared-in-this-scope/35484257#35484257", "title": "Error: &#39;Friend Member Function Name&#39; was not declared in this scope", "body": "<p>A couple of points.</p>\n\n<ol>\n<li>There's no need to specify <code>inline</code> if it's defined within the class.</li>\n<li>Although that declaration yields a <a href=\"http://en.cppreference.com/w/cpp/language/friend#Notes\" rel=\"nofollow\">friend function</a> which is a member of the enclosing namespace of the class, until it's declared <em>in that namespace</em> explicitly, it's not available for regular lookup&mdash;though ADL is allowed.</li>\n</ol>\n\n<p>So if you want to make it accessible via regular lookup, declare it in the enclosing namespace.</p>\n\n<p><kbd><a href=\"http://rextester.com/DWC97124\" rel=\"nofollow\">Demo</a></kbd></p>\n"}], "owner": {"reputation": 73, "user_id": 5911365, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e6ceb588ddb4d01b0ace53d64f1f0df4?s=128&d=identicon&r=PG&f=1", "display_name": "Christine Simmons ", "link": "https://stackoverflow.com/users/5911365/christine-simmons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1455805953, "creation_date": 1455728810, "last_edit_date": 1455729416, "question_id": 35463169, "link": "https://stackoverflow.com/questions/35463169/error-friend-member-function-name-was-not-declared-in-this-scope", "title": "Error: &#39;Friend Member Function Name&#39; was not declared in this scope", "body": "<p>I am in the process of moving all of my C++ Windows applications to Ubuntu Linux. This application runs fine on Visual Studio 2015 Community on Windows 7 OS. However, it gives an error when running in Code Blocks on Ubuntu Linux. I have replicated the error message I am getting using the following simple <code>Person</code> class.</p>\n\n<blockquote>\n  <p>Error Message: 'comparePersonAge' was not declared in this scope</p>\n</blockquote>\n\n<h3>Person.h</h3>\n\n<pre><code>#ifndef Person_h\n#define Person_h\n\n#include &lt;string&gt;\n\nclass Person\n{\nprivate:\n    int age;\n    std::string name;\npublic:\n    Person(int a, std::string n) : age(a), name(n) {}\n\n    int getAge()\n    {\n        return age;\n    }\n    std::string getName()\n    {\n        return name;\n    }\n    inline friend bool comparePersonAge(const Person&amp; p1, const Person&amp; p2)\n    {\n        return p1.age &lt; p2.age;\n    }\n};\n\n#endif\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include \"Person.h\"\n\nint main()\n{\n    Person p1(93, \"harold\");\n    Person p2(32, \"james\");\n    Person p3(67, \"tracey\");\n\n    std::vector&lt;Person&gt; v;\n    v.push_back(p1);\n    v.push_back(p2);\n    v.push_back(p3);\n\n    std::sort(v.begin(), v.end(), comparePersonAge);\n\n    std::cout &lt;&lt; v[0].getAge() &lt;&lt; \" \" &lt;&lt; v[1].getAge() &lt;&lt; \" \" &lt;&lt; v[2].getAge()  &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>On Windows machine, the output is: <code>32 67 93</code> as expected. On Linux, the error message is as written above.</p>\n\n<p><strong>Note:</strong> Someone else name DJR discusses this issue in this post: <a href=\"https://stackoverflow.com/questions/16780013/friend-function-not-declared-in-this-scope-error\">Friend function not declared in this scope error</a>.\nHowever, his explanation is very vague I and don't follow his steps.</p>\n\n<p>He writes:</p>\n\n<blockquote>\n  <p>Previous comment should have read: It is a bug on the the Linux side. The code should work as written. I have code right now that compiles fine on the Windows side and when I move it to the Linux side I get the same error. Apparently the compiler that you are using on the Linux side does not see/use the friend declaration in the header file and hence gives this error. By simply moving the friend function's definition/implementation in the C++ file BEFORE that function's usage (e.g.: as might be used in function callback assignment), this resolved my issue and should resolve yours also. </p>\n</blockquote>\n\n<p>I don't know what he means by by moving the friend function's definition in the C++ file before the function's usage. What does this mean precisely?</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455728946, "post_id": 35463153, "comment_id": 58622364, "body": "<i>&quot;Should it be in an anonymous namespace outside the class? &quot;</i> I&#39;d choose this option. But your question isn&#39;t concisely answerable, it&#39;s most likely to get opinionated answers."}, {"owner": {"reputation": 100185, "user_id": 3234959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93bb12ca0f93dfddb33880316f7e66c2?s=128&d=identicon&r=PG&f=1", "display_name": "chi", "link": "https://stackoverflow.com/users/3234959/chi"}, "edited": false, "score": 0, "creation_date": 1455728995, "post_id": 35463153, "comment_id": 58622397, "body": "I would be surprised to look at the <code>Hourglass</code> class and find such a private member function. Hence, I&#39;d put it outside the class."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1455729245, "post_id": 35463153, "comment_id": 58622550, "body": "If <code>computeLine</code> is only ever called from within that <code>print</code> function then consider an anonymous lambda scoped to that function."}, {"owner": {"reputation": 27385, "user_id": 1382251, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/17622c39e8ead537a0944c767551b2fe?s=128&d=identicon&r=PG", "display_name": "barak manos", "link": "https://stackoverflow.com/users/1382251/barak-manos"}, "edited": false, "score": 1, "creation_date": 1455729542, "post_id": 35463153, "comment_id": 58622738, "body": "If it&#39;s invoked only by other functions of the same class, then it can be declared <code>private</code>.  If it&#39;s invoked only by other functions of inheriting classes, then it can be declared <code>protected</code>.  If it doesn&#39;t need any information contained inside the object, then it can be declared <code>static</code>."}], "owner": {"reputation": 2647, "user_id": 2891462, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a27bd5b9762d5fad9cffc4f4f2812046?s=128&d=identicon&r=PG&f=1", "display_name": "user2891462", "link": "https://stackoverflow.com/users/2891462/user2891462"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1455728773, "creation_date": 1455728773, "question_id": 35463153, "link": "https://stackoverflow.com/questions/35463153/where-should-methods-performing-small-very-specialised-tasks-be-placed", "title": "Where should methods performing small, very specialised tasks be placed?", "body": "<p>This question has been bugging me in the last couple of quick coding challenges I've done.</p>\n\n<p>I have a class called Hourglass, which takes a <code>char</code> representing a capital letter in its constructor (e.g. 'D'), and has a method <code>print()</code> which prints something like:</p>\n\n<pre><code>AAAAAAA\n BBBBB\n  CCC\n   D\n  CCC\n BBBBB\nAAAAAAA\n</code></pre>\n\n<p>Print looks then something like:</p>\n\n<pre><code>void Hourglass::print() const\n{\n    final int centreCol = (mFinalChar - 'A');\n\n    for(char c = 'A'; c &lt;= mFinalChar; ++c) {\n        std::cout &lt;&lt; computeLine(centreCol, c - 'A', c) &lt;&lt; std::endl;\n    }\n\n    for (char c = mFinalChar - 1; c &gt;= 'A'; --c) {\n        std::cout &lt;&lt; computeLine(centreCol, c - 'A', c) &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>std::string computeLine(int centreColumn, int initialBlankSpaces, char characterToPrint) const;\n</code></pre>\n\n<p>Where should <code>computeLine()</code> be? Should it be a private member of the class (it doesn't need any information contained inside the object)? Should it be in an anonymous namespace outside the class? Should I avoid such methods somehow?</p>\n\n<p>I am aware this might be a somewhat opinionated subject, but I am sure there is at least some debate towards which I can be pointed to to make up my mind.</p>\n"}, {"tags": ["c++", "linux", "qt", "ubuntu", "qt-creator"], "comments": [{"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455728910, "post_id": 35463105, "comment_id": 58622344, "body": "Can you verify that the working folder at run-time is indeed the project folder as you are assuming here? One way to do it is to write a file to the path <code>.&#47;dummy.txt</code> and later see where the file was created."}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455729315, "post_id": 35463105, "comment_id": 58622592, "body": "I have tried writing a file to <code>dummy.txt</code>, and it wrote it to <code>&#47;home&#47;karnivaurus&#47;project&#47;build&#47;dummy.txt</code> as expected. (same with <code>.&#47;dummy.txt</code>)"}, {"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455729422, "post_id": 35463105, "comment_id": 58622650, "body": "How exactly do you load the .stl file? Can you share the line of code where you try to open the file?"}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455729524, "post_id": 35463105, "comment_id": 58622724, "body": "The line is: <code>const aiScene* mesh = MeshLib::LoadMesh(&quot;mesh.stl&quot;);</code>, or <code>const aiScene* mesh = MeshLib::LoadMesh(&quot;..&#47;build&#47;mesh.stl&quot;);</code>, etc..."}, {"owner": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455730022, "post_id": 35463105, "comment_id": 58623074, "body": "This is wierd. I&#39;d look into <code>LoadMesh</code> to see if they do anything special with the given file path... Have you also tried <code>.&#47;..&#47;build&#47;mesh.stl</code>?"}, {"owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "reply_to_user": {"reputation": 4858, "user_id": 5739035, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-RQUt7m42pBk/AAAAAAAAAAI/AAAAAAAAAyw/mLHBtE-PQic/photo.jpg?sz=128", "display_name": "Adi Levin", "link": "https://stackoverflow.com/users/5739035/adi-levin"}, "edited": false, "score": 0, "creation_date": 1455730175, "post_id": 35463105, "comment_id": 58623166, "body": "Passing <code>.&#47;..&#47;build&#47;mesh.stl</code> gives me the error: <code>Failed opening file &#39;&#47;..&#47;build&#47;mesh.stl&#39; for reading: No such file or directory</code>. Yes, it looks like <code>LoadMesh()</code> is a bit dodgy then, but I don&#39;t have the source. I will have to keep to absolute paths for now then!"}, {"owner": {"reputation": 3304, "user_id": 2743307, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f8ee6ac582d2582fb14c295507eddba?s=128&d=identicon&r=PG&f=1", "display_name": "bibi", "link": "https://stackoverflow.com/users/2743307/bibi"}, "edited": false, "score": 0, "creation_date": 1455731939, "post_id": 35463105, "comment_id": 58624271, "body": "Are you sure about the directory in which you are? <code>use QDir::currentPath()</code> to check. You can keep internally relative paths and then you can then use Qt <code>QFileInfo::absoluteFilePath()</code> to convert it to absolute path."}, {"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 0, "creation_date": 1455746570, "post_id": 35463105, "comment_id": 58632978, "body": "Find you binary file in your project directory; most probably it&#39;s in a subdir of <code>project&#47;build&#47;</code>. This is usually the working dir Creator sets when executing the binary. Then use the path from there to the file you want to open. You can also use <code>QDir().absolutePath()</code> to determine the working dir of your binary."}], "answers": [{"comments": [{"owner": {"reputation": 3209, "user_id": 5794048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Egkox.jpg?s=128&g=1", "display_name": "Murphy", "link": "https://stackoverflow.com/users/5794048/murphy"}, "edited": false, "score": 1, "creation_date": 1455782121, "post_id": 35468380, "comment_id": 58645768, "body": "Or you could use <code>QDir().absoluteFilePath(&quot;..&#47;mesh.stl&quot;)</code> to pass an absolute path to MeshLib."}], "tags": [], "owner": {"reputation": 1246, "user_id": 167664, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuCUB.jpg?s=128&g=1", "display_name": "Georgy Pashkov", "link": "https://stackoverflow.com/users/167664/georgy-pashkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1455745380, "creation_date": 1455745380, "answer_id": 35468380, "question_id": 35463105, "link": "https://stackoverflow.com/questions/35463105/loading-a-file-with-a-relative-path-in-qt-creator/35468380#35468380", "title": "Loading a file with a relative path in Qt Creator", "body": "<p>Looks like you've already made sure that the working directory is correct. Given that that possibility is eliminated, what's left is a bug in the 3rd party library.</p>\n\n<p>You can construct an absolute path using Qt:</p>\n\n<pre><code>QString meshPath = QDir().filePath(\"../mesh.stl\"); \nconst aiScene* mesh = MeshLib::loadMesh(meshPath.toLatin1().data());\n</code></pre>\n\n<p>This could serve as work-around until developers of the library fix the bug.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2721, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1455745380, "creation_date": 1455728635, "last_edit_date": 1455729813, "question_id": 35463105, "link": "https://stackoverflow.com/questions/35463105/loading-a-file-with-a-relative-path-in-qt-creator", "title": "Loading a file with a relative path in Qt Creator", "body": "<p>I am writing a C++ program using Qt Creator 3.1.1 in Ubuntu 14.04. This code uses an existing library which loads a file from disk, by passing a string representing a path to that file. The trouble I am having is that when the string represents an absolute path, the file loads fine, but when the string represents a relative path, it fails to load, saying that it cannot find the file.</p>\n\n<p>My project has source files at <code>/home/karnivaurus/project/src</code>, and build files at <code>/home/karnivaurus/project/build</code>. I have placed a copy of the file <code>mesh.stl</code> in each of these directories, and also in the project root directory <code>/home/karnivaurus/project</code>. But when I pass the string <code>../src/mesh.stl</code>, <code>../build/mesh.stl</code>, or <code>../mesh.stl</code>, it fails to load. It also fails with <code>/../src/mesh.stl</code>, <code>/../build/mesh.stl</code>, and<code>../src/mesh.stl</code>, <code>../build/mesh.stl</code>, or <code>../mesh.stl</code>.</p>\n\n<p>However, it does find the file if I pass the strings <code>/home/karnivaurus/project/src/mesh.stl</code>, <code>/home/karnivaurus/project/build/mesh.stl</code> or <code>/home/karnivaurus/project/mesh.stl</code>.</p>\n\n<p>Why is this? Is it a problem with my understanding of relative paths in C++? Or is it something I need to configure in Qt Creator? In my Qt Creator settings, I have the working directory set to <code>/home/karnivaurus/project/build</code>.</p>\n\n<p>The exact line I use to load the mesh is:</p>\n\n<pre><code>const aiScene* mesh = MeshLib::loadMesh(\"../mesh.stl\");\n</code></pre>\n\n<p>And the corresponding error message is:</p>\n\n<pre><code>Failed opening file '/mesh.stl' for reading: No such file or directory\n</code></pre>\n\n<p>This error message is suspicious to me because <code>/mesh.stl</code> is not equivalent to <code>../mesh.stl</code>...</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "visual-studio-2012", "visual-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1455728627, "post_id": 35463017, "comment_id": 58622160, "body": "VS only does that in debug builds.  Test your release builds."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455728671, "post_id": 35463017, "comment_id": 58622198, "body": "As I recall the problem is more the opposite, that g++ intends to provide &quot;bear&#39;s help&quot; by zeroing local variables. Anyway the solution is to adopt more rigorous programming practices."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1455728740, "post_id": 35463017, "comment_id": 58622245, "body": "@Y. Lou  Usually compilers issue a warning when an uninitialized variable with the automatic storage duration is used. Look whether you can change the level of warnings for MS VC++."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1455728790, "post_id": 35463017, "comment_id": 58622272, "body": "Try compiling in release mode. Also consider making Linux your primary build platform. Run your program through valgrind to catch lots of errors. Compile with -Wall -Wextra -Werror and you&#39;re mostly set."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1455728837, "post_id": 35463017, "comment_id": 58622297, "body": "@n.m. The devil has better songs."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1455729275, "post_id": 35463017, "comment_id": 58622575, "body": "@Cheersandhth.-Alf No need to give up anything. It&#39;s OK to edit code in Visual Studio, nothing wrong with this."}], "answers": [{"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1455729390, "post_id": 35463339, "comment_id": 58622632, "body": "Also up the warning level to <code>&#47;W4</code>."}], "tags": [], "owner": {"reputation": 999, "user_id": 5668691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51b2f0199abaed8efe849372dc60bb35?s=128&d=identicon&r=PG&f=1", "display_name": "Sudipta Kumar Sahoo", "link": "https://stackoverflow.com/users/5668691/sudipta-kumar-sahoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1455729272, "creation_date": 1455729272, "answer_id": 35463339, "question_id": 35463017, "link": "https://stackoverflow.com/questions/35463017/visual-studio-disable-automatic-initialization/35463339#35463339", "title": "Visual Studio: Disable Automatic Initialization", "body": "<p>You can solve few of issues using visual studio settings.</p>\n\n<p>Go to <code>ProjectProperties -&gt; C/C++ -&gt; General -&gt; Treat Warning as Error</code>\nand set it to <code>True</code></p>\n\n<p>I may not solve your problem entirely but will help you to catch few error beforehand.</p>\n\n<p>Hope this helps. </p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 5225468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852b4c6a0ae7fcb608eee34b6063276c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Lou", "link": "https://stackoverflow.com/users/5225468/y-lou"}, "edited": false, "score": 0, "creation_date": 1455833713, "post_id": 35464099, "comment_id": 58679682, "body": "Thank you so much! This helped catch my nullptr error!"}], "tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": false, "score": 2, "last_activity_date": 1455731480, "creation_date": 1455731480, "answer_id": 35464099, "question_id": 35463017, "link": "https://stackoverflow.com/questions/35463017/visual-studio-disable-automatic-initialization/35464099#35464099", "title": "Visual Studio: Disable Automatic Initialization", "body": "<p><a href=\"https://msdn.microsoft.com/en-us/library/jj161081.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/jj161081.aspx</a></p>\n\n<p>Have you tried disabling SDL?</p>\n\n<p>Right clikc your Project => Properties => C/C++ => Code Generation => Security Check => Disable Security Check.</p>\n"}, {"tags": [], "owner": {"reputation": 8889, "user_id": 3493731, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0ccfa8c5c786e748c8cf4f1d3bae9694?s=128&d=identicon&r=PG&f=1", "display_name": "MuertoExcobito", "link": "https://stackoverflow.com/users/3493731/muertoexcobito"}, "is_accepted": false, "score": 1, "last_activity_date": 1455795272, "creation_date": 1455795272, "answer_id": 35480329, "question_id": 35463017, "link": "https://stackoverflow.com/questions/35463017/visual-studio-disable-automatic-initialization/35480329#35480329", "title": "Visual Studio: Disable Automatic Initialization", "body": "<p>In terms of the underlying issue, calls to <a href=\"http://www.cplusplus.com/reference/cstdlib/malloc/\" rel=\"nofollow\"><code>malloc</code></a> are what is causing the inconsistency (Note that <code>operator new</code> uses <code>malloc</code> internally). In the  documentation for <code>malloc</code>, it explicitly states that the memory is not initialized. However, the OS/runtime may intervene and initialize the memory automatically, as is the case for VS debug runtime, but this shouldn't be relied upon in cross platform development. </p>\n\n<p>To have consistent behavior, you could instead allocate memory with <a href=\"http://www.cplusplus.com/reference/cstdlib/calloc/\" rel=\"nofollow\"><code>calloc</code></a> (and override <code>operator new</code> to use <code>calloc</code> instead of <code>malloc</code>). Of course, this means you'll be using some cycles in your program to initialize the memory. Alternatively, you could fill the allocated memory from <code>malloc</code> with 'garbage', which is also a popular strategy for finding memory initialization issues.</p>\n\n<p>In terms of detecting it without replacing the allocator, in Visual Studio, ensure that you have \"Basic Runtime Checks\" set to \"Both /RTC1\" or \"Uninitialized variables /RTCu\". This should give you a break in the debugger when a member is used without being initialized, in certain situations, although it's no guarantee. See <a href=\"https://msdn.microsoft.com/en-us/library/8wtf2dfz.aspx\" rel=\"nofollow\">here</a> for more information on the situations in which this detection will occur.</p>\n"}], "owner": {"reputation": 41, "user_id": 5225468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852b4c6a0ae7fcb608eee34b6063276c?s=128&d=identicon&r=PG&f=1", "display_name": "Y. Lou", "link": "https://stackoverflow.com/users/5225468/y-lou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2941, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1455795272, "creation_date": 1455728365, "question_id": 35463017, "link": "https://stackoverflow.com/questions/35463017/visual-studio-disable-automatic-initialization", "title": "Visual Studio: Disable Automatic Initialization", "body": "<p>I code my C++ assignments in Visual Studio Enterprise. However, I noticed that when I ran my code in linux to check on different platforms, that I would have errors because visual studio, regardless of what you do with your variables, initializes all variables to zero. for instance, I forgot to set the head pointer in a Linked List exercise to nullptr and VS still ran fine, but linux did not. I really want to be able to catch these errors earlier, so is there a way to disable in VS this automatic initialization?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "matrix", "cin", "ppm"], "comments": [{"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1455728391, "post_id": 35462990, "comment_id": 58622016, "body": "Did not check yet, but maybe you are missing the <i>first</i> pixel?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1455728420, "post_id": 35462990, "comment_id": 58622032, "body": "Which pixel coordinates are missing? Does this vary depending on the size of the input image? Have you tried more than one source image file?"}, {"owner": {"reputation": 3012, "user_id": 3044410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/623aab3cf97b6b36efa14d0b791007da?s=128&d=identicon&r=PG&f=1", "display_name": "DBoyer", "link": "https://stackoverflow.com/users/3044410/dboyer"}, "edited": false, "score": 0, "creation_date": 1455728444, "post_id": 35462990, "comment_id": 58622048, "body": "When I compare the original file to my output, the original has 1 extra byte at the end."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1455728514, "post_id": 35462990, "comment_id": 58622092, "body": "It&#39;s also worth noting that you can declare <code>Pixel&amp; p = ppm-&gt;pixels[r][c]</code> and avoid creating a useless intermediate variable. Less copying that way."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1455728558, "post_id": 35462990, "comment_id": 58622123, "body": "A single byte is not enough for a pixel, as your code reads 3 per pixel. What is that extra byte and what is your system?"}, {"owner": {"reputation": 3012, "user_id": 3044410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/623aab3cf97b6b36efa14d0b791007da?s=128&d=identicon&r=PG&f=1", "display_name": "DBoyer", "link": "https://stackoverflow.com/users/3044410/dboyer"}, "edited": false, "score": 0, "creation_date": 1455728897, "post_id": 35462990, "comment_id": 58622337, "body": "I have tried it with 2 different images, and same problem, there is 1 extra byte at the end, the byte is different for each image."}, {"owner": {"reputation": 3012, "user_id": 3044410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/623aab3cf97b6b36efa14d0b791007da?s=128&d=identicon&r=PG&f=1", "display_name": "DBoyer", "link": "https://stackoverflow.com/users/3044410/dboyer"}, "edited": false, "score": 0, "creation_date": 1455729081, "post_id": 35462990, "comment_id": 58622453, "body": "For 1 image the extra byte is 255 and the other is a 0"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1455730051, "post_id": 35462990, "comment_id": 58623087, "body": "Hard to confirm without a real file, but it looks that your original files do have an extra byte."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1455736966, "creation_date": 1455736966, "answer_id": 35465822, "question_id": 35462990, "link": "https://stackoverflow.com/questions/35462990/reading-ppm-image-in-c-missing-last-pixel/35465822#35465822", "title": "Reading PPM image in C++ missing last pixel", "body": "<p>The <a href=\"http://netpbm.sourceforge.net/doc/ppm.html\" rel=\"nofollow\">PPM file format</a> has for all its variant a single space character following the <code>colourMax</code> parameter: </p>\n\n<blockquote>\n  <p>Each PPM image consists of the following:</p>\n  \n  <p>...<br>\n    5. A height, again in ASCII decimal.<br>\n    6. Whitespace.<br>\n    7. The maximum color value (Maxval), again in ASCII decimal. Must be less than 65536 and more than zero.<br>\n     <strong>8. A single whitespace character (usually a newline).</strong><br>\n    ...</p>\n</blockquote>\n\n<p>In your code, this extra whitespace is not extractacted from the stream because <code>read()</code> starts reading at the current position. And as you read an fixed number of chars, this extras space, causes your code to ignore the last char. </p>\n\n<p>Solution:  just <a href=\"http://www.cplusplus.com/reference/istream/istream/ignore/\" rel=\"nofollow\"><code>cin.ignore();</code></a> before starting your reading loops.    </p>\n"}], "owner": {"reputation": 3012, "user_id": 3044410, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/623aab3cf97b6b36efa14d0b791007da?s=128&d=identicon&r=PG&f=1", "display_name": "DBoyer", "link": "https://stackoverflow.com/users/3044410/dboyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 435, "favorite_count": 0, "accepted_answer_id": 35465822, "answer_count": 1, "score": 1, "last_activity_date": 1455736966, "creation_date": 1455728272, "question_id": 35462990, "link": "https://stackoverflow.com/questions/35462990/reading-ppm-image-in-c-missing-last-pixel", "title": "Reading PPM image in C++ missing last pixel", "body": "<p>I am attempting to read a PPM image from standard input with this code:</p>\n\n<pre><code>cin &gt;&gt; format;\ncin &gt;&gt; ppm-&gt;width &gt;&gt; ppm-&gt;height &gt;&gt; ppm-&gt;colourMax;\n\nfor (int r = 0; r &lt; ppm-&gt;height; r++) {\n  ppm-&gt;pixels[r] = new Pixel[ppm-&gt;width];\n  for (int c = 0; c &lt; ppm-&gt;width; c++) {\n    Pixel p = Pixel();\n    cin.read(reinterpret_cast&lt;char *&gt;(&amp;p.r), sizeof(unsigned char));\n    cin.read(reinterpret_cast&lt;char *&gt;(&amp;p.g), sizeof(unsigned char));\n    cin.read(reinterpret_cast&lt;char *&gt;(&amp;p.b), sizeof(unsigned char));\n    ppm-&gt;pixels[r][c] = p;\n  }\n}\n</code></pre>\n\n<p>However, when I output the PPM image unchanged, I am missing the very last pixel. Everything else seems to work perfectly. Any ideas?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1455729086, "post_id": 35462959, "comment_id": 58622456, "body": "If you specialize <code>TestTemplate&lt;T2&gt;</code> to inherit from <code>TestTemplate&lt;T1&gt;</code>, it probably makes sense to specialize <code>KeyType&lt;T2&gt;</code> to inherit from <code>KeyType&lt;T1&gt;</code> as well. That will solve the issue."}, {"owner": {"reputation": 1729, "user_id": 1353119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b776cc7ec84e485a6869f7c2f3e89af7?s=128&d=identicon&r=PG", "display_name": "Kristian Duske", "link": "https://stackoverflow.com/users/1353119/kristian-duske"}, "reply_to_user": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "edited": false, "score": 0, "creation_date": 1455729622, "post_id": 35462959, "comment_id": 58622786, "body": "@StenSoft I don&#39;t think that&#39;s right, <code>TestTemplate&lt;T2&gt;</code> doesn&#39;t have a constructor that accepts <code>KeyType&lt;T1&gt; const&amp;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1729, "user_id": 1353119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b776cc7ec84e485a6869f7c2f3e89af7?s=128&d=identicon&r=PG", "display_name": "Kristian Duske", "link": "https://stackoverflow.com/users/1353119/kristian-duske"}, "is_accepted": true, "score": 1, "last_activity_date": 1455729555, "last_edit_date": 1455729555, "creation_date": 1455729200, "answer_id": 35463312, "question_id": 35462959, "link": "https://stackoverflow.com/questions/35462959/specialized-template-class-descended-from-general-case-with-a-template-constru/35463312#35463312", "title": "Specialized template class (descended from general case) with a template constructor using a dependent type", "body": "<p>Constructors are not inherited at all in C++, so your instance <code>TestTemplate&lt;T2&gt;</code> only has the implicitly declared constructors (default, copy and move it seems by the error messages you posted). In case you assume that, when you specialize a template, the specialized template inherits declarations and definitions from the template that is being specialized: that is not the case. You have to redeclare and redefine all members in your specialized template again.</p>\n\n<p>So in your case, you have to add the appropriate constructor to your specialized template like so:</p>\n\n<pre><code>template &lt;&gt;\nclass TestTemplate&lt;T2&gt; : public TestTemplate&lt;T1&gt; {\npublic:\n    TestTemplate&lt;KeyType&lt;T2&gt; const &amp;key) :\n    TestTemplate&lt;T1&gt;(...) {}\n};\n</code></pre>\n\n<p>Since the base class, <code>TestTemplate&lt;T1&gt;</code>, does not provide a default constructor, you have to call that constructor, however, it is unclear what you want to pass to it as the key argument, since you have a reference to an instance of <code>KeyType&lt;T2&gt;</code> and not <code>KeyType&lt;T1&gt;</code>.</p>\n\n<p>If you do wish to inherit the constructor from <code>TestTemplate&lt;T1&gt;</code>, you can do this with a <code>using</code> directive, assuming you're using C++11:</p>\n\n<pre><code>template &lt;&gt;\nclass TestTemplate&lt;T2&gt; : public TestTemplate&lt;T1&gt; {\npublic:\n    using TestTemplate&lt;T1&gt;::TestTemplate;\n};\n</code></pre>\n\n<p>But admittedly, I'm not 100% about the syntax here.</p>\n"}], "owner": {"reputation": 14881, "user_id": 118150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a13f84fbcc39ff96aafccfb3da4172ea?s=128&d=identicon&r=PG", "display_name": "jkerian", "link": "https://stackoverflow.com/users/118150/jkerian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 35463312, "answer_count": 1, "score": 0, "last_activity_date": 1455729555, "creation_date": 1455728194, "last_edit_date": 1455728918, "question_id": 35462959, "link": "https://stackoverflow.com/questions/35462959/specialized-template-class-descended-from-general-case-with-a-template-constru", "title": "Specialized template class (descended from general case) with a template constructor using a dependent type", "body": "<p>I need to make a templated class constructor take a dependent type (on the templated class types). This works fine, unless I have a specialization of the templated class, in which case the constructor doesn't seem to be found. And if I reimplement the constructor in the specialized subclass, I don't seem to be able to initialize the base class either through the constructor or directly.</p>\n\n<p>Is there any way to preserve this relatively narrow interface outside of the class?</p>\n\n<pre><code>class T1 {};\nclass T2 {};\n\n// KeyType\ntemplate &lt;typename SELECT&gt;\nclass KeyType {\n};\n\n// Declarations\ntemplate &lt;typename SELECT = T1&gt;\nclass TestTemplate {\nprotected:\n    TestTemplate() {}\n    KeyType&lt;SELECT&gt; k;\npublic:\n    TestTemplate(KeyType&lt;SELECT&gt; const &amp;key) : k(key) {}\n};\n\ntemplate &lt;&gt;\nclass TestTemplate&lt;T2&gt; : public TestTemplate&lt;T1&gt; {\n};\n\n\nint main() {\n\n    KeyType&lt;T2&gt; key;\n    TestTemplate&lt;T2&gt; foo(key);\n    return 0;\n}\n</code></pre>\n\n<p>After staring at it for a bit, I realize that the problem is that I can't just arbitrarily convert the <code>KeyType&lt;T2&gt;</code> to a <code>KeyType&lt;T1&gt;</code> for the <code>TestTemplate&lt;T1&gt;</code> baseclass.</p>\n\n<p>g++ gives:</p>\n\n<pre><code>g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nmain.cpp: In function 'int main()':\nmain.cpp:27:29: error: no matching function for call to 'TestTemplate&lt;T2&gt;::TestTemplate(KeyType&lt;T2&gt;&amp;)'\n     TestTemplate&lt;T2&gt; foo(key);\n                             ^\nmain.cpp:20:7: note: candidate: TestTemplate&lt;T2&gt;::TestTemplate()\n class TestTemplate&lt;T2&gt; : public TestTemplate&lt;T1&gt; {\n       ^\nmain.cpp:20:7: note:   candidate expects 0 arguments, 1 provided\nmain.cpp:20:7: note: candidate: constexpr TestTemplate&lt;T2&gt;::TestTemplate(const TestTemplate&lt;T2&gt;&amp;)\nmain.cpp:20:7: note:   no known conversion for argument 1 from 'KeyType&lt;T2&gt;' to 'const TestTemplate&lt;T2&gt;&amp;'\nmain.cpp:20:7: note: candidate: constexpr TestTemplate&lt;T2&gt;::TestTemplate(TestTemplate&lt;T2&gt;&amp;&amp;)\nmain.cpp:20:7: note:   no known conversion for argument 1 from 'KeyType&lt;T2&gt;' to 'TestTemplate&lt;T2&gt;&amp;&amp;'\n</code></pre>\n"}, {"tags": ["c++", "vector", "set"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 3, "creation_date": 1455728047, "post_id": 35462811, "comment_id": 58621816, "body": "Please post the complete error message."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 5, "creation_date": 1455728128, "post_id": 35462811, "comment_id": 58621866, "body": "<code>it &lt; myset.end()</code> -- shouldn&#39;t that be <code>it != myset.end()</code> ?"}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 1, "creation_date": 1455728152, "post_id": 35462811, "comment_id": 58621878, "body": "Also, you are missing a closing brace for the <code>for</code> loop."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 2, "creation_date": 1455728161, "post_id": 35462811, "comment_id": 58621884, "body": "You have mismatched <code>{}</code>. And <code>set</code> iterator is not random-access so doesn&#39;t have <code>operator&lt;</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1455728215, "post_id": 35462811, "comment_id": 58621916, "body": "Please post <b>real code</b>. Copy and paste it. First reduce it to a minimal (but complete) example."}, {"owner": {"reputation": 29, "user_id": 5941594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d3608ee64b9f75c78aeec8bb30919?s=128&d=identicon&r=PG&f=1", "display_name": "C0nn0t", "link": "https://stackoverflow.com/users/5941594/c0nn0t"}, "edited": false, "score": 0, "creation_date": 1455784589, "post_id": 35462811, "comment_id": 58647070, "body": "Thank you all. I corrected the code. I copied the code, but it was not correctly formatted and in the process of making it so I deleted a }. Thank you for the answers!"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 3, "last_activity_date": 1455728523, "last_edit_date": 1455728523, "creation_date": 1455728211, "answer_id": 35462964, "question_id": 35462811, "link": "https://stackoverflow.com/questions/35462811/iterating-over-sets-in-c/35462964#35462964", "title": "Iterating over sets in c++", "body": "<p>To work in both cases you loop should be:</p>\n\n<pre><code>for (std::set&lt;int&gt;::const_iterator it = myset.begin(); it != myset.end(); ++it)\n</code></pre>\n\n<p><code>it &lt; myset.end()</code> works only for random access iterator where <code>std::set::iterator</code> is bidirectional.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/concept/BidirectionalIterator\" rel=\"nofollow\">Here</a> you can read what bidirectional iterator provides vs <a href=\"http://en.cppreference.com/w/cpp/concept/RandomAccessIterator\" rel=\"nofollow\">random access one</a> </p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1455728223, "creation_date": 1455728223, "answer_id": 35462968, "question_id": 35462811, "link": "https://stackoverflow.com/questions/35462811/iterating-over-sets-in-c/35462968#35462968", "title": "Iterating over sets in c++", "body": "<p>Your loop condition is wrong <code>it &lt; myset.end();</code>. A <code>std::set::iterator</code> can't be compared with the <code>&lt;</code> operator since it's not a random access iterator. The error messages in <a href=\"http://ideone.com/Y6CEvm\" rel=\"nofollow\">this sample</a> are clearer about that.</p>\n\n<p>To fix, compare using the <code>!=</code> operator:</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::set&lt;int&gt;&amp; myset) {\n    for (std::set&lt;int&gt;::const_iterator it = myset.begin(); it !=  myset.end(); ++it) {\n                                                           // ^^\n        os &lt;&lt; *it;\n    }\n    return os;\n}\n\nint main () {}\n</code></pre>\n\n<p><kbd><a href=\"http://ideone.com/5qmR8A\" rel=\"nofollow\">Working Demo</a></kbd></p>\n\n<hr>\n\n<p>BTW you had a missing <code>}</code> for the for loop body in your sample.</p>\n"}, {"comments": [{"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455728559, "post_id": 35462977, "comment_id": 58622124, "body": "The iterators don&#39;t need to be pointers in order to be comparable with <code>operator&lt;</code>. They just need to be random access iterators, which includes <code>vector</code>, <code>deque</code>, <code>basic_string</code>, and <code>array</code> from the standard library."}, {"owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455729027, "post_id": 35462977, "comment_id": 58622413, "body": "@BenjaminLindley Thanks for your comment. I updated the answer. Out of curiosity, s there any algorithm or container that actually uses this? I can&#39;t recall any. Again, many thanks."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1455729370, "post_id": 35462977, "comment_id": 58622621, "body": "It follows from the standard library&#39;s requirements for what it takes to qualify as a random access iterator. It requires all 6 comparison operators, <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code> and <code>&gt;=</code>, whether any specific algorithms require those operations or not."}], "tags": [], "owner": {"reputation": 66318, "user_id": 3510736, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/kVtHP.jpg?s=128&g=1", "display_name": "Ami Tavory", "link": "https://stackoverflow.com/users/3510736/ami-tavory"}, "is_accepted": false, "score": 1, "last_activity_date": 1455728877, "last_edit_date": 1455728877, "creation_date": 1455728236, "answer_id": 35462977, "question_id": 35462811, "link": "https://stackoverflow.com/questions/35462811/iterating-over-sets-in-c/35462977#35462977", "title": "Iterating over sets in c++", "body": "<p>Your code built fine after changing the loop to</p>\n\n<pre><code>for (std::set&lt;int&gt;::const_iterator it = myset.begin(); it != myset.end(); ++it)\n</code></pre>\n\n<p>Note that, in general, you cannot assume that you can less-than compare iterators.</p>\n\n<p>Some containers' iterators might support this (and this might possibly also depend on the implementation), but you should really not rely on this.</p>\n"}], "owner": {"reputation": 29, "user_id": 5941594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b2d3608ee64b9f75c78aeec8bb30919?s=128&d=identicon&r=PG&f=1", "display_name": "C0nn0t", "link": "https://stackoverflow.com/users/5941594/c0nn0t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 35462964, "answer_count": 3, "score": 1, "last_activity_date": 1455783582, "creation_date": 1455727821, "last_edit_date": 1455783582, "question_id": 35462811, "link": "https://stackoverflow.com/questions/35462811/iterating-over-sets-in-c", "title": "Iterating over sets in c++", "body": "<p>Either I'm blind or <code>std::set</code> behaves a lot differently than <code>std::vector</code> when it comes to overloading the output operator. Consider the code below.</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nstd::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const std::set&lt;int&gt;&amp; myset) {\n    for (std::set&lt;int&gt;::const_iterator it = myset.begin(); it &lt; myset.end(); ++it) {\n        os &lt;&lt; *it;\n        return os;\n    }\n}\n\nint main () {}\n</code></pre>\n\n<p>If one replaces <code>std::set</code> by <code>std::vector</code> in two places and <code>&lt;set&gt;</code> by <code>&lt;vector&gt;</code> in the includes, then the code works as expected. Where is the difference? My compiler (g++) gives weird error messages such as the following.</p>\n\n<blockquote>\n  <p>/usr/include/c++/4.8/bits/stl_iterator.h:297:5: note:   template argument deduction/substitution failed:</p>\n</blockquote>\n\n<p>So even though I'm explicitly telling that I'm using <code>std::set&lt;int&gt;</code> it somehow fails and this behavior happens only for <code>std::set</code>. </p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1455728966, "post_id": 35462802, "comment_id": 58622382, "body": "Usually you&#39;d <code>forward</code> it, but there might be rare exceptions, depending on what that overload is supposed to do."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 1, "creation_date": 1455729219, "post_id": 35462802, "comment_id": 58622533, "body": "The name <code>value</code> in <code>set_value</code> is an lvalue, so <code>set_value(value);</code> would result in the one-parameter overload being called with an lvalue reference. Use <code>forward</code> if you want perfect forwarding of the argument."}], "answers": [{"tags": [], "owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "is_accepted": true, "score": 0, "last_activity_date": 1455729892, "creation_date": 1455729892, "answer_id": 35463562, "question_id": 35462802, "link": "https://stackoverflow.com/questions/35462802/universal-references-and-overloads/35463562#35463562", "title": "universal references and overloads", "body": "<p>If you want perfect forwarding of <code>value</code>, use <code>std::forward</code></p>\n\n<p>Even though <code>value</code> <em>might</em> be bound to an rvalue, when you use it by name inside <code>set_value</code> it is an lvalue. Therefore, if you do <code>set_value(value);</code> the universal reference in the one-parameter overload would be bound to an lvalue reference.</p>\n\n<p>We can confirm this by adding doing something like this:</p>\n\n<pre><code>template&lt;class T&gt; class TD;  // Allows us to view type deduction results in\n                             // the form of compilation errors.\n                             // (From \"Effective Modern C++\")\n\n...\n\ntemplate &lt;typename U&gt;\nvoid set_value(U&amp;&amp; value) {\n    TD&lt;decltype(value)&gt; td;\n}\n\n...\n\nint i;\nset_value(i, 0);\nset_value(3, 0);\n</code></pre>\n\n<p>When forwarding is used, this will give you a compilation error that will reveal the type of <code>value</code> to be <code>int&amp;</code> for <code>set_value(i, 0);</code>. If you comment out that statement you'll get a compilation error for <code>set_value(3, 0);</code> revealing the type of <code>value</code> to be <code>int&amp;&amp;</code>.<br>\nIf you remove the forwarding you'll get <code>int&amp;</code> in both cases. </p>\n"}], "owner": {"reputation": 1208, "user_id": 1923959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/52b5f89646c1141e0b6410b9d49d8cc7?s=128&d=identicon&r=PG", "display_name": "twentylemon", "link": "https://stackoverflow.com/users/1923959/twentylemon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 35463562, "answer_count": 1, "score": 1, "last_activity_date": 1455729892, "creation_date": 1455727773, "last_edit_date": 1455728924, "question_id": 35462802, "link": "https://stackoverflow.com/questions/35462802/universal-references-and-overloads", "title": "universal references and overloads", "body": "<p>Say I have two overloads of a method in a class, <code>set_value</code> which each take a universal reference. I'd like to have one function call the other to avoid code duplication, but I'm not sure which is the correct way to give the universal reference to the other function.</p>\n\n<pre><code>template &lt;typename U&gt;\nvoid set_value(U&amp;&amp; value) {\n    this-&gt;value_ = std::forward&lt;U&gt;(value);\n}\n\ntemplate &lt;typename U&gt;\nvoid set_value(U&amp;&amp; value, int overloaded) {\n    // which is the correct way to use the other `set_value` overload?\n    set_value(value); // just use value directly?\n    set_value(std::forward&lt;U&gt;(value)); // or should I forward it?\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1455727492, "post_id": 35462652, "comment_id": 58621429, "body": "Please show the code you&#39;re using that causes the error."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1, "user_id": 5220761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffafd1454a8d00fcef3c560451918c7?s=128&d=identicon&r=PG&f=1", "display_name": "Basheer Al_Hadeethi", "link": "https://stackoverflow.com/users/5220761/basheer-al-hadeethi"}, "edited": false, "score": 0, "creation_date": 1455731356, "post_id": 35462731, "comment_id": 58623896, "body": "@BasheerAl_Hadeethi Lookup the search results I&#39;ve linked."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1455727598, "last_edit_date": 1495541254, "creation_date": 1455727598, "answer_id": 35462731, "question_id": 35462652, "link": "https://stackoverflow.com/questions/35462652/how-can-i-solve-the-stack-overflow-in-2d-code/35462731#35462731", "title": "how can I solve the stack overflow in 2D code?", "body": "<blockquote>\n  <p>how can I solve the problem without using dynamic arrays?</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/search?q=%5Bc%2B%2B%5DIncrease+the+stack+size\">Increase the stack size available for your process</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5220761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ffafd1454a8d00fcef3c560451918c7?s=128&d=identicon&r=PG&f=1", "display_name": "Basheer Al_Hadeethi", "link": "https://stackoverflow.com/users/5220761/basheer-al-hadeethi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1455727598, "creation_date": 1455727361, "question_id": 35462652, "link": "https://stackoverflow.com/questions/35462652/how-can-i-solve-the-stack-overflow-in-2d-code", "title": "how can I solve the stack overflow in 2D code?", "body": "<p>I produce a code that simulate dam break flow. I use many normal arrays. when I run the code it is ok and ave result but when I increase the number of cells 100x100 it show stack overflow and the run stop immediately. how can I solve the problem without using dynamic arrays? </p>\n"}, {"tags": ["c++", "iterator", "move-semantics"], "answers": [{"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 2, "last_activity_date": 1455728042, "creation_date": 1455728042, "answer_id": 35462891, "question_id": 35462642, "link": "https://stackoverflow.com/questions/35462642/set-iterator-invalidated-by-move-semantic/35462891#35462891", "title": "Set iterator invalidated by move semantic", "body": "<p><code>currentContainer</code> is a pointer to an element of the vector <code>containers</code>. The loop body modifies <code>containers</code> by calling <code>push_back</code>. That can invalidate pointers into the vector, and if it does, <code>currentContainer</code> can end up pointing to garbage.</p>\n\n<p>In general, don't use pointers to objects that are held in an <code>std::vector</code>. Instead, use <code>containers.front()</code> or <code>containers[0]</code> to get at the first element.</p>\n"}], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 35462891, "answer_count": 1, "score": 1, "last_activity_date": 1455728042, "creation_date": 1455727332, "question_id": 35462642, "link": "https://stackoverflow.com/questions/35462642/set-iterator-invalidated-by-move-semantic", "title": "Set iterator invalidated by move semantic", "body": "<p>I have the following immutable container class (public access to <code>values</code> is just for reasons of simplicity):</p>\n\n<pre><code>struct Container\n{\n    std::unordered_set&lt;int&gt; values;\n\n    //Default constructor\n    Container() = default;\n\n    //Copy constructor\n    Container(const Container&amp; other)\n        : values(other.values)\n    {   }\n\n    //Move constructor\n    Container(const Container&amp;&amp; other)\n        : values(std::move(other.values))\n    {   }\n\n    Container RemoveValue(int value) const\n    {\n        //Create a copy of this object\n        Container copy(*this);\n        //Remove one element from the copy\n        copy.values.erase(value);\n        return copy;\n    }\n};\n</code></pre>\n\n<p>This container contains a set of values. The method <code>RemoveValue()</code> returns a copy of the current object where a specific value has been removed. An appropriate move constructor is defined for this struct.</p>\n\n<p>I use this container as follows:</p>\n\n<pre><code>int main() \n{\n    std::vector&lt;Container&gt; containers;\n\n    {\n        //Initialization\n        Container initialContainer;\n        initialContainer.values.insert(1);\n        initialContainer.values.insert(2);\n\n        containers.push_back(std::move(initialContainer));\n    }\n\n    const Container* currentContainer = &amp;containers.front();\n    for (int value : currentContainer-&gt;values)\n    {\n        Container newContainer = currentContainer-&gt;RemoveValue(value);\n\n        //Do some checks, then...\n        containers.push_back(std::move(newContainer));\n    }\n\n    std::cout &lt;&lt; containers.size() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I initialize a vector of containers with a single container (with values 1 and 2). Then, I acquire a pointer to this initial element and iterate every value. For each value, I call <code>RemoveValue()</code> and insert the resulting container into the vector.</p>\n\n<p>In gcc, this seems to work just fine. However, I get runtime errors in Visual Studio 2015. </p>\n\n<p>In Debug Mode, the error is: <strong>\"list iterator not incrementable\"</strong>. This error occurs after the first iteration at <code>for (int value : currentContainer-&gt;values)</code> (when the iterator is to be incremented).</p>\n\n<p>In Release Mode, the error is: <strong>\"Access violation reading at position 0x38\"</strong>. This error occurs at <code>copy.values.erase(value)</code> in <code>RemoveValue</code>. But only in the second iteration. Surprisingly, <code>values</code> does not contain elements at this point, anymore (<code>size()</code> returns 0).</p>\n\n<p>I don't understand either of these errors. How can I resolve them?</p>\n\n<p><a href=\"http://cpp.sh/6eraw\" rel=\"nofollow\">A C++ Shell example</a> also runs without errors. However, it outputs <code>2</code> as the final number of containers, whereas I expected three (the initial one, one with <code>1</code> removed, one with <code>2</code> removed).</p>\n"}, {"tags": ["c++", "openmp", "x86-64", "atomic", "memory-fences"], "comments": [{"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455731914, "post_id": 35462453, "comment_id": 58624254, "body": "My GCC 4.9.2 generates an <code>mfence</code> immediately after <code>movl $1, i(%rip)</code> for the sequentially consistent atomic write."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 2, "creation_date": 1455732731, "post_id": 35462453, "comment_id": 58624702, "body": "Also, Clang 3.5.0 only supports the regular non-sequentially consistent atomics. It doesn&#39;t even have a full OpenMP 3.1 support - see <a href=\"http://wongmichael.com/2015/08/19/clang-3-7-will-have-full-openmp-3-1-support-followed-by-openmp-4/\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455798596, "post_id": 35462453, "comment_id": 58656392, "body": "Your GCC 4.9.2 generates <code>mfence</code> for OpenMP SC atomic write? That is, with <code>i</code> being of type <code>int</code>? My GCC only for <code>std::atomic&lt;int&gt;</code>."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 1, "creation_date": 1455883893, "post_id": 35462453, "comment_id": 58701102, "body": "I just realized that g++ 5.3.0 produces <code>mfence</code> for SC OpenMP atomic writes. So, the problem was with (my) g++ 4.9.2."}, {"owner": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455896155, "post_id": 35462453, "comment_id": 58709000, "body": "I wonder how your 4.9.2 is different from my 4.9.2. I doubt that the machine specification in GCC could be different. What OS and distribution are you using?"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 65854, "user_id": 1374437, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/34xta.png?s=128&g=1", "display_name": "Hristo &#39;away&#39; Iliev", "link": "https://stackoverflow.com/users/1374437/hristo-away-iliev"}, "edited": false, "score": 0, "creation_date": 1455903972, "post_id": 35462453, "comment_id": 58713930, "body": "@Hristo Iliev: You are absolutely right, I had a bug in my Makefile, a wrong source was used :(. Guys, I am so sorry about that. Thanks for you time and help."}], "answers": [{"comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1455727782, "post_id": 35462602, "comment_id": 58621626, "body": "I agree, however, <code>MOV</code> alone should not be enough for sequentially consistent atomic store (see, e.g., <a href=\"https://www.cl.cam.ac.uk/~pes20/cpp/cpp0xmappings.html\" rel=\"nofollow noreferrer\">here</a>, or <a href=\"https://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Herb-Sutter-atomic-Weapons-2-of-2\" rel=\"nofollow noreferrer\">Herb Sutter&#39;s lecture around 0:35:00</a>). Therefore, I would expect <code>XCHG</code> or <code>MFENCE</code> for <code>#pragma omp atomic write seq_cst</code>."}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 1, "creation_date": 1455798419, "post_id": 35462602, "comment_id": 58656278, "body": "However, assuming that the data is correctly aligned, mov <i>is</i> sufficient for the simple atomic (without seq_cst), since in X86 tearing cannot occur. (All of the bytes making up the value are written atomically by mov). Without the seq_cst the atomic construct does not also imply an OpenMP &quot;flush&quot;."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1455799542, "post_id": 35462602, "comment_id": 58657133, "body": "@Jim Cownie: Are your sure about flush? From OpenMP Spec. 4.0: <i>A flush region <b>with a list</b> is implied at the following locations: At entry to and exit from the atomic operation performed in a <b>non-sequentially consistent atomic region</b>, where the list contains only the storage location designated as x according to the description of the syntax of the atomic construct in Section 2.12.6 on page 127.</i> And: <i>A flush region <b>without a list</b> is implied at the following locations: ... At entry to and exit from the atomic operation performed in a <b>sequentially consistent atomic region</b>.</i>"}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1455874816, "post_id": 35462602, "comment_id": 58695149, "body": "@Daniel: See the 4.5 spec, which says: &quot;Any atomic construct with a seq_cst clause forces the atomically performed operation to 17 include an implicit flush operation without a list.&quot; Since it calls out that case, I assume that that also implies that a construct without a seq_cst does not imply a flush. It also explicitly (though in non-normative text) says that &quot;a non-sequentially consistent atomic construct has the same semantics as a memory_order_relaxed atomic operation in C++11/C11&quot;. (And, the text you quote only requires flushing the variable in question anyway, which a simple mov does.)"}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1455881733, "post_id": 35462602, "comment_id": 58699745, "body": "@Jim Cownie: The text I quoted is in 4.5 spec. as well, thus even non SC atomics imply flush, though flush with a list. And you are right that <code>mov</code> provides this. For SC atomics, I would expect additional fence to prevent reordering at CPU level, but it&#39;s not put in the program by g++ in my case. That is what I wodner about; does sequential consistency mean something different for OpenMP and C++11 memory models?"}, {"owner": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1455900190, "post_id": 35462602, "comment_id": 58711702, "body": "@Daniel. I think we&#39;re in violent agreement. The non-SC read/write operations don&#39;t need any memory fences on X86. The SC ones do. (And we were being confused by a gcc bug :-( )."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "reply_to_user": {"reputation": 1807, "user_id": 1900441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3540494c1cb556bf1f517992b172fe?s=128&d=identicon&r=PG", "display_name": "Jim Cownie", "link": "https://stackoverflow.com/users/1900441/jim-cownie"}, "edited": false, "score": 0, "creation_date": 1455904049, "post_id": 35462602, "comment_id": 58713973, "body": "@Jim I think so as well :). Thanks for help"}], "tags": [], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1455727169, "creation_date": 1455727169, "answer_id": 35462602, "question_id": 35462453, "link": "https://stackoverflow.com/questions/35462453/openmp-atomic-and-non-atomic-reads-writes-produce-the-same-instructions-on-x86-6/35462602#35462602", "title": "OpenMP atomic and non-atomic reads/writes produce the same instructions on x86_64", "body": "<p>There are two possibilities.</p>\n\n<ol>\n<li><p>The compiler is not obligated to convert C++ code containing a data race into bad machine code.  Depending on the machine memory model, the instructions normally used may already be atomic and coherent.  Take that same C++ code to another architecture and you may start seeing the pragmas cause differences that didn't exist on x86_64.</p></li>\n<li><p>In addition to potentially causing use of different instructions and/or extra memory fence instructions, the atomic pragmas (as well <code>std::atomic</code> and <code>volatile</code>) also constrain the compiler's own code reordering optimizations.  They may not apply to your simply case, but you certainly could see that common-subexpression elimination, including hoisting computations outside a loop, may be affected.</p></li>\n</ol>\n"}], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 35462602, "answer_count": 1, "score": 6, "last_activity_date": 1455904291, "creation_date": 1455726763, "last_edit_date": 1455904291, "question_id": 35462453, "link": "https://stackoverflow.com/questions/35462453/openmp-atomic-and-non-atomic-reads-writes-produce-the-same-instructions-on-x86-6", "title": "OpenMP atomic and non-atomic reads/writes produce the same instructions on x86_64", "body": "<p>According to the OpenMP Specification (v4.0), the following program contains a possible data race due to unsynchronized read/write of <code>i</code>:</p>\n\n<pre><code>int i{0}; // std::atomic&lt;int&gt; i{0};\n\nvoid write() {\n// #pragma omp atomic write // seq_cst\n   i = 1;\n}\n\nint read() {\n   int j;\n// #pragma omp atomic read // seq_cst\n   j = i; \n   return j;\n}\n\nint main() {\n   #pragma omp parallel\n   { /* code that calls both write() and read() */ }\n}\n</code></pre>\n\n<p>Possible solutions that came to my mind are shown in the code as comments:</p>\n\n<ol>\n<li>to protect write and read of <code>i</code> with <code>#pragma omp atomic write/read</code>,</li>\n<li>to protect write and read of <code>i</code> with <code>#pragma omp atomic write/read seq_cst</code>,</li>\n<li>to use <code>std::atomic&lt;int&gt;</code> instead of <code>int</code> as a type of <code>i</code>.</li>\n</ol>\n\n<p>Here are the compilers-generated instructions on x86_64 (with <code>-O2</code> in all cases): </p>\n\n<pre><code>GNU g++ 4.9.2:               i = 1;        j = i;\noriginal code:               MOV           MOV\n#pragma omp atomic:          MOV           MOV\n// #pragma omp atomic seq_cst:  MOV           MOV\n#pragma omp atomic seq_cst:  MOV+MFENCE    MOV    (see UPDATE)\nstd::atomic&lt;int&gt;:            MOV+MFENCE    MOV\n\nclang++ 3.5.0:               i = 1;        j = i;\noriginal code:               MOV           MOV\n#pragma omp atomic:          MOV           MOV\n#pragma omp atomic seq_cst:  MOV           MOV\nstd::atomic&lt;int&gt;:            XCHG          MOV\n\nIntel icpc 16.0.1:           i = 1;        j = i;\noriginal code:               MOV           MOV\n#pragma omp atomic:          *             *\n#pragma omp atomic seq_cst:  *             *\nstd::atomic&lt;int&gt;:            XCHG          MOV\n\n* Multiple instructions with calls to __kmpc_atomic_xxx functions.\n</code></pre>\n\n<p>What I wonder is why the GNU/clang compiler does not generate any special instructions for <code>#pragma omp atomic</code> writes. I would expect similar instructions as for <code>std::atomic</code>, i.e, either <code>MOV+MFENCE</code> or <code>XCHG</code>. Any explanation?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>g++ 5.3.0 produces <code>MFENCE</code> for <code>#pragma omp atomic write seq_cst</code>. That is the correct behavior, I believe. Without <code>seq_cst</code>, it produces plain <code>MOV</code>, which is sufficient for non-SC atomicity.</p>\n\n<p>There was a bug in my Makefile, g++ 4.9.2 produces <code>MFENCE</code> for CS atomic write as well. Sorry guys for that.</p>\n\n<p>Clang 3.5.0 does not implement the OpenMP SC atomics, thanks Hristo Iliev for pointing this out.</p>\n"}, {"tags": ["c++", "common-lisp", "wrapper", "swig", "cffi"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5941469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc6b3c0c0bfa7d47cc52d8bffe3943f?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffroy Zoetardt", "link": "https://stackoverflow.com/users/5941469/geoffroy-zoetardt"}, "edited": false, "score": 0, "creation_date": 1455871546, "post_id": 35465572, "comment_id": 58693187, "body": "Thanks, it is what I needed ;)"}], "tags": [], "owner": {"reputation": 32098, "user_id": 124319, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVhrR.jpg?s=128&g=1", "display_name": "coredump", "link": "https://stackoverflow.com/users/124319/coredump"}, "is_accepted": true, "score": 3, "last_activity_date": 1455736198, "creation_date": 1455736198, "answer_id": 35465572, "question_id": 35462435, "link": "https://stackoverflow.com/questions/35462435/swig-c-to-lispcffi-error-when-compiling-wrapper/35465572#35465572", "title": "SWIG [C++ to Lisp(CFFI)] error when compiling wrapper", "body": "<p>Here is a modified <code>test.i</code> which makes the rest compile:</p>\n\n<pre><code>%module test\n%{\n#include \"test.hpp\"\n%}\n\n%include &lt;test.hpp&gt;\n</code></pre>\n\n<p>I followed <a href=\"http://www.swig.org/papers/PyTutorial98/PyTutorial98.pdf\" rel=\"nofollow\">this presentation</a> (page 24) and apparently you need to insert the <code>include</code> directive in the generated wrapper.</p>\n"}], "owner": {"reputation": 43, "user_id": 5941469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fc6b3c0c0bfa7d47cc52d8bffe3943f?s=128&d=identicon&r=PG&f=1", "display_name": "Geoffroy Zoetardt", "link": "https://stackoverflow.com/users/5941469/geoffroy-zoetardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 35465572, "answer_count": 1, "score": 4, "last_activity_date": 1455736198, "creation_date": 1455726697, "last_edit_date": 1455728941, "question_id": 35462435, "link": "https://stackoverflow.com/questions/35462435/swig-c-to-lispcffi-error-when-compiling-wrapper", "title": "SWIG [C++ to Lisp(CFFI)] error when compiling wrapper", "body": "<p>I'm a beginner with interface between C++ and Lisp with SWIG. I've follow the SWIG's documentation but I'm facing a problem.\nHere is the simple program I want to interface (It can easily be done in Lisp but it is to understand how to import C++ code into Lisp):</p>\n\n<p>test.cpp:</p>\n\n<pre><code>#include \"test.hpp\"\nint test(int x, int y) {\n   std::cout &lt;&lt; x+y;\n   return 0;\n}\n</code></pre>\n\n<p>test.hpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\nint test(int x, int y);\n</code></pre>\n\n<p>In order to use SWIG, I create the interface file:</p>\n\n<p>test.i:</p>\n\n<pre><code>%module test\n%include &lt;test.hpp&gt;\n</code></pre>\n\n<p>And, I've execute the following command line:</p>\n\n<pre><code>$ swig -c++ -cffi test.i \n$ c++ -c test_wrap.cxx\n</code></pre>\n\n<p>But when compiling the test_wrap.cxx, the terminal says:</p>\n\n<pre><code>test_wrap.cxx:193:19: error: use of undeclared identifier 'test'\nresult = (int)test(arg1,arg2);\n              ^\n1 error generated. \n</code></pre>\n\n<p>Anyone can help me with that?</p>\n"}, {"tags": ["c++", "arrays", "c++11", "insertion"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1455726738, "post_id": 35462419, "comment_id": 58620888, "body": "You cannot. Just use <code>std::vector</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5304349"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1455726786, "post_id": 35462419, "comment_id": 58620927, "body": "i know ! thanks ! but this was a homework problem .. i got it to work but it just doesn&#39;t work .. wanted to know what&#39;s the problem"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1455726871, "post_id": 35462419, "comment_id": 58620993, "body": "If you have an array of 10 items, and you need to insert 1, then you&#39;ve overflowed the array (assigning to <code>num[size]</code>) with the code you have (you would need to drop the last item from the array)."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1455726936, "post_id": 35462419, "comment_id": 58621040, "body": "Don&#39;t use <code>std::endl</code> unless you need the extra stuff that it does. <code>&#39;\\n&#39;</code> ends a line."}, {"owner": {"reputation": 1892, "user_id": 2995907, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c5c13110c63a9c7fd100f0eac2b303b4?s=128&d=identicon&r=PG&f=1", "display_name": "dingalapadum", "link": "https://stackoverflow.com/users/2995907/dingalapadum"}, "edited": false, "score": 0, "creation_date": 1455727237, "post_id": 35462419, "comment_id": 58621253, "body": "&quot;however when i take input using a for loop the code does not work&quot;. What you mean it does not work? It does not compile? It gives the wrong result? &quot;the for loop causing the problem&quot;: What is the problem with it? What do you expect and what do you get? Please be more precise. What <i>exactly</i> is the problem?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5304349"}, "edited": false, "score": 0, "creation_date": 1455727389, "post_id": 35462419, "comment_id": 58621357, "body": "when i use initializer list the insertion occurs at the particular position .. when i use for loop the program does not insert a value in the array at particular position"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1455727877, "post_id": 35462419, "comment_id": 58621708, "body": "@MuhammadUmarTariq So the <code>for</code> loop does not work because you did not write the <code>for</code> loop in a way that it inserts the values in a sorted order? So try to write that code then ask questions about why your attempt is not working."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1455727755, "creation_date": 1455727755, "answer_id": 35462789, "question_id": 35462419, "link": "https://stackoverflow.com/questions/35462419/inserting-a-value-in-array/35462789#35462789", "title": "Inserting a value in array", "body": "<p>This code snippet</p>\n\n<pre><code>i=size-1;\nwhile(i&gt;=pos)\n{\n    num[i+1]=num[i];\n    i=i-1;\n}\nnum[i+1] = item;\n</code></pre>\n\n<p>is wrong. First of all <code>pos</code> can be greater than or equal to <code>size</code> In this case none element should be inserted in the array. However according to the last statement of the code snippet</p>\n\n<pre><code>num[i+1] = item;\n</code></pre>\n\n<p><code>num[size]</code> will be asssigned with <code>item</code>.</p>\n\n<p>Again within the loop for initial value of i equal to <code>size - 1</code> there is an attempt to assign <code>num[size]</code> element</p>\n\n<pre><code>    num[i+1]=num[i];\n</code></pre>\n\n<p>The code snippet can be rewritten for example the following way</p>\n\n<pre><code>if ( pos &lt; size )\n{\n    i = size;\n\n    while ( --i != pos ) num[i] = num[i-1];\n\n    num[i] = item;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5304349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 35462789, "answer_count": 1, "score": 1, "last_activity_date": 1455727755, "creation_date": 1455726660, "question_id": 35462419, "link": "https://stackoverflow.com/questions/35462419/inserting-a-value-in-array", "title": "Inserting a value in array", "body": "<p>I am trying to insert a value \"item\" in a sorted linear array at position \"pos\"\nwhen i take input in the array using a initialization list the code works fine .. however when i take input using a for loop the code does not work   </p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\nconst int size = 10;\nint num[size];\nint num[size] = {1,2,3,4,5,6,7,8,9,10}; //a sorted linear array\nint item;\nint pos;\nint i;\n\n/*\n\nfor(int a=0;a&lt;size;a++)\n{\n    cin&gt;&gt;num[a];\n\n}\n*/\n\ncout&lt;&lt;\"Enter item\"&lt;&lt;endl; //insert this item in array\ncin&gt;&gt;item;\ncout&lt;&lt;\"Enter Position To Insert\"&lt;&lt;endl;\n\ncin&gt;&gt;pos;\n\ni=size-1;\nwhile(i&gt;=pos)\n{\n    num[i+1]=num[i];\n    i=i-1;\n}\nnum[i+1] = item;\n\ncout&lt;&lt;endl;\ncout&lt;&lt;\"array after insertion\"&lt;&lt;endl;\nfor(int b=0;b&lt;size;b++)\n{\n\n    cout&lt;&lt;num[b]&lt;&lt;endl;\n}\n\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>the for loop causing the problem</p>\n\n<pre><code>for(int a=0;a&lt;size;a++)\n{\n    cin&gt;&gt;num[a];\n\n}\n</code></pre>\n"}]