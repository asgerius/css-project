[{"tags": ["c++", "smart-pointers", "poco-libraries"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1458183554, "post_id": 36049086, "comment_id": 59749970, "body": "Always read the documentation to check this.  Most of the time functions will take <code>Poco::AutoPtr</code>  (which is like <code>std::shared_ptr</code>)"}, {"owner": {"reputation": 11, "user_id": 6074261, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153490462451048/picture?type=large", "display_name": "Dave Braford-Grimes", "link": "https://stackoverflow.com/users/6074261/dave-braford-grimes"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1458319825, "post_id": 36049086, "comment_id": 59824253, "body": "Yes, **MOST functions do indeed accept a pointer. My intent here is to focus on how the provided examples seem to break traditional rules of C++ &quot;readability&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 1244, "user_id": 6053907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74c527b9736547b1be600cad630083ef?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/6053907/gam"}, "is_accepted": false, "score": 2, "last_activity_date": 1458172102, "creation_date": 1458172102, "answer_id": 36049141, "question_id": 36049086, "link": "https://stackoverflow.com/questions/36049086/using-new-with-poco-library-methods/36049141#36049141", "title": "Using &quot;new&quot; with Poco library methods", "body": "<p><a href=\"http://pocoproject.org/docs/Poco.Net.MailMessage.html#22405\" rel=\"nofollow\">http://pocoproject.org/docs/Poco.Net.MailMessage.html#22405</a></p>\n\n<blockquote>\n  <blockquote>\n    <blockquote>\n      <p>The <strong>MailMessage</strong> takes ownership of the <strong>PartSource</strong> and <strong>deletes</strong> it when\n      it is no longer needed.</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 6074261, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153490462451048/picture?type=large", "display_name": "Dave Braford-Grimes", "link": "https://stackoverflow.com/users/6074261/dave-braford-grimes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458172102, "creation_date": 1458171813, "last_edit_date": 1495539919, "question_id": 36049086, "link": "https://stackoverflow.com/questions/36049086/using-new-with-poco-library-methods", "title": "Using &quot;new&quot; with Poco library methods", "body": "<p>Using the Poco libraries, if I'm doing something like this:</p>\n\n<pre><code>MailMessage mailMessage;\nmailMessage.addPart(\"\", new FilePartSource(\"/path/icon.png\", \"image/png\"),\n    Poco::Net::MailMessage::CONTENT_ATTACHMENT,\n    Poco::Net::MailMessage::ENCODING_BASE64);\n</code></pre>\n\n<p>Do I need to worry about deleting the \"newed\" FilePartSource<br>\nthat's sent to the addPart method/function in MailMessage?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24773000/upload-a-file-using-poco-ssl-connection-unexpectedly-closed-exception\">Upload a file using POCO - SSL Connection Unexpectedly Closed Exception</a></p>\n\n<p>I've noticed in some examples where \"new\" is tossed-in places that I wouldn't call typical.</p>\n\n<p>Line 65-66: new StringPartSource\n<a href=\"https://github.com/pocoproject/poco/blob/develop/Net/samples/Mail/src/Mail.cpp\" rel=\"nofollow noreferrer\">https://github.com/pocoproject/poco/blob/develop/Net/samples/Mail/src/Mail.cpp</a></p>\n\n<p>Line 88: new Context\n<a href=\"https://github.com/pocoproject/poco/blob/develop/NetSSL_OpenSSL/samples/Mail/src/Mail.cpp\" rel=\"nofollow noreferrer\">https://github.com/pocoproject/poco/blob/develop/NetSSL_OpenSSL/samples/Mail/src/Mail.cpp</a></p>\n"}, {"tags": ["c++", "string", "windows", "path", "appdata"], "comments": [{"owner": {"reputation": 365, "user_id": 2204413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a61a719935fe6031c308377b1f550ae?s=128&d=identicon&r=PG", "display_name": "Geries", "link": "https://stackoverflow.com/users/2204413/geries"}, "edited": false, "score": 0, "creation_date": 1458172226, "post_id": 36049010, "comment_id": 59746656, "body": "SHGetSpecialFolderPath is not supported since Windows 2000 according to msdn, how about using SHGetFolderPath? <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762181(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>  If you need to force the coding type, at winapi you usually have endings with W for wchar_t, A for char. Such as SHGetFolderPathA. This one should support from Win 2000 up to this day, even tho it&#39;s set for deprecation."}], "answers": [{"comments": [{"owner": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458171948, "post_id": 36049074, "comment_id": 59746565, "body": "What impact does switching over to wide text have on my project? It is currently configured as <code>Use Multi-Byte Character Set</code>."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172083, "post_id": 36049074, "comment_id": 59746608, "body": "@Z0q: Literals and strings in calls of API functions need to be changed to wide. Mostly that&#39;s just prefixing an <code>L</code>. E.g., where with ANSI you had <code>&quot;hello&quot;</code>, with Unicode you have <code>L&quot;Hello&quot;</code>."}, {"owner": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172188, "post_id": 36049074, "comment_id": 59746644, "body": "If I call <code>fopen()</code> for example, how would I send a wide text as parameter?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172414, "post_id": 36049074, "comment_id": 59746718, "body": "@Z0q: You can&#39;t use standard <code>fopen</code> to open an arbitrary file in Windows, because the path needs to be ANSI-encoded, and so it can&#39;t handle all the possible path characters. You can use Windows-specific <code>_wfopen</code> to do it. Or you can go one level higher and use the Boost filesystem sublibrary, which (possibly slightly modified) will be part of C++17."}, {"owner": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172548, "post_id": 36049074, "comment_id": 59746766, "body": "Would it be a problem for my application if I use the ANSI encoded char based text? It would save me a lot of time rewriting large parts of my code"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "reply_to_user": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172700, "post_id": 36049074, "comment_id": 59746821, "body": "It will be unable to handle some paths, that&#39;s all. For example, if you&#39;re writing this program in the US, and someone in some Asian or Arabic or Eastern European country uses it, they may run into problems."}, {"owner": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "edited": false, "score": 0, "creation_date": 1458172753, "post_id": 36049074, "comment_id": 59746841, "body": "Thanks. I&#39;ll use that one for now, and migrate in a future update :)"}], "tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 2, "last_activity_date": 1458172198, "last_edit_date": 1458172198, "creation_date": 1458171735, "answer_id": 36049074, "question_id": 36049010, "link": "https://stackoverflow.com/questions/36049010/how-to-get-appdata-path-as-stdstring/36049074#36049074", "title": "How to get %AppData% path as std::string?", "body": "<p>The <code>T</code> type means that <code>SHGetSpecialFolderPath</code> is a pair of functions:</p>\n\n<ul>\n<li><p><code>SHGetSpecialFolderPathA</code> for Windows ANSI encoded <code>char</code> based text, and</p></li>\n<li><p><code>SHGetSpecialFolderPathW</code> for UTF-16 encoded <code>wchar_t</code> based text, Windows' &ldquo;Unicode&rdquo;.</p></li>\n</ul>\n\n<p>The ANSI variant is just a wrapper for the Unicode variant, and it <strong>can not</strong> logically produce a correct path in all cases.</p>\n\n<p>But this is what you need to use for <code>char</code> based data.</p>\n\n<hr>\n\n<p>An alternative is to use the wide variant of the function, and use whatever machinery that you're comfortable with to convert the wide text result to a byte-oriented <code>char</code> based encoding of your choice, e.g. UTF-8.</p>\n\n<p>Note that UTF-8 strings can't be used directly to open files etc. via the Windows API, so this approach involves even more conversion just to use the string.</p>\n\n<hr>\n\n<p>However, I recommend switching over to wide text, in Windows.</p>\n\n<p>For this, define the macro symbol <code>UNICODE</code> before including <code>&lt;windows.h&gt;</code>.</p>\n\n<p>That's also the default in a Visual Studio project.</p>\n"}, {"tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1458172174, "last_edit_date": 1458172174, "creation_date": 1458171751, "answer_id": 36049075, "question_id": 36049010, "link": "https://stackoverflow.com/questions/36049010/how-to-get-appdata-path-as-stdstring/36049075#36049075", "title": "How to get %AppData% path as std::string?", "body": "<p>You should use <code>SHGetSpecialFolderPathA()</code> to have the function deal with ANSI characters explicitly.</p>\n\n<p>Then, just convert the array of <code>char</code> to <code>std::string</code> as usual.</p>\n\n<pre><code>/* to have MinGW declare SHGetSpecialFolderPathA() */\n#if !defined(_WIN32_IE) || _WIN32_IE &lt; 0x0400\n#undef _WIN32_IE\n#define _WIN32_IE 0x0400\n#endif\n\n#include &lt;shlobj.h&gt;\n#include &lt;string&gt;\n\nstd::string getPath(int csidl) {\n    char out[MAX_PATH];\n    if (SHGetSpecialFolderPathA(NULL, out, csidl, 0)) {\n        return out;\n    } else {\n        return \"\";\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 5799115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea42d06211736a04c76fa20257c9171?s=128&d=identicon&r=PG", "display_name": "IOB Toolkit Team", "link": "https://stackoverflow.com/users/5799115/iob-toolkit-team"}, "is_accepted": false, "score": 1, "last_activity_date": 1458171770, "creation_date": 1458171770, "answer_id": 36049078, "question_id": 36049010, "link": "https://stackoverflow.com/questions/36049010/how-to-get-appdata-path-as-stdstring/36049078#36049078", "title": "How to get %AppData% path as std::string?", "body": "<p><a href=\"https://msdn.microsoft.com/en-gb/library/windows/desktop/dd374131%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-gb/library/windows/desktop/dd374131%28v=vs.85%29.aspx</a></p>\n\n<pre><code>#ifdef UNICODE\n    typedef wchar_t TCHAR;\n#else\n    typedef unsigned char TCHAR;\n#endif\n</code></pre>\n\n<p>Basically you can can convert this array to <code>std::wstring</code>. Converting to <code>std::string</code> is straightforward with <code>std::wstring_convert</code>.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/locale/wstring_convert\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/locale/wstring_convert</a></p>\n"}, {"tags": [], "owner": {"reputation": 1995, "user_id": 3492631, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/6X56B.jpg?s=128&g=1", "display_name": "Dendi Suhubdy", "link": "https://stackoverflow.com/users/3492631/dendi-suhubdy"}, "is_accepted": false, "score": 0, "last_activity_date": 1458172025, "creation_date": 1458172025, "answer_id": 36049119, "question_id": 36049010, "link": "https://stackoverflow.com/questions/36049010/how-to-get-appdata-path-as-stdstring/36049119#36049119", "title": "How to get %AppData% path as std::string?", "body": "<p>Typedef String as either std::string or std::wstring depending on your compilation configuration. The following code might be useful:</p>\n\n<pre><code>#ifndef UNICODE  \n  typedef std::string String; \n#else\n  typedef std::wstring String; \n#endif\n</code></pre>\n"}], "owner": {"reputation": 1846, "user_id": 5437864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/y4CZo.png?s=128&g=1", "display_name": "Z0q", "link": "https://stackoverflow.com/users/5437864/z0q"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2368, "favorite_count": 0, "accepted_answer_id": 36049074, "answer_count": 4, "score": 1, "last_activity_date": 1458172198, "creation_date": 1458171371, "question_id": 36049010, "link": "https://stackoverflow.com/questions/36049010/how-to-get-appdata-path-as-stdstring", "title": "How to get %AppData% path as std::string?", "body": "<p>I've read that one can use <code>SHGetSpecialFolderPath();</code> to get the AppData path. However, it returns a <code>TCHAR</code> array. I need to have an <code>std::string</code>.</p>\n\n<p>How can it be converted to an <code>std::string</code>?</p>\n\n<p><strong>Update</strong></p>\n\n<p>I've read that it is possible to use <code>getenv(\"APPDATA\")</code>, but that it is not available in Windows XP. I want to support Windows XP - Windows 10.</p>\n"}, {"tags": ["c++", "arrays", "list", "linked-list"], "comments": [{"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1458171378, "post_id": 36048977, "comment_id": 59746370, "body": "What length of word are you typing into the console?"}, {"owner": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "reply_to_user": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1458171700, "post_id": 36048977, "comment_id": 59746485, "body": "it crashes with 10 characters, but  there shouldn&#39;t be any limitation of lenght for user, actually word is just an expression here, it can be unlimited string of characters"}], "answers": [{"comments": [{"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1458172281, "post_id": 36049083, "comment_id": 59746665, "body": "So the OP has the last element in the list point to the first, then uses that to determine the end of the list. It&#39;s odd, but the code runs as expected."}, {"owner": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458172516, "post_id": 36049083, "comment_id": 59746755, "body": "my intent was that it should work as circular linked list for other purposes"}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1458175770, "post_id": 36049083, "comment_id": 59747700, "body": "It&#39;s not going to be a well-working linked list, with each node in the list points to itself."}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "edited": false, "score": 0, "creation_date": 1458215528, "post_id": 36049083, "comment_id": 59766114, "body": "@SamVarshavchik it doesn&#39;t though, the condition for <code>p-&gt;next = p;</code> is that <code>head</code> is null, which will only happen at the start when the list is empty."}], "tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": false, "score": 1, "last_activity_date": 1458171783, "creation_date": 1458171783, "answer_id": 36049083, "question_id": 36048977, "link": "https://stackoverflow.com/questions/36048977/stack-corruption-with-linked-list-implementation/36049083#36049083", "title": "Stack corruption with linked list implementation", "body": "<p>In your <code>l_push</code>() method, you allocate the new node:</p>\n\n<pre><code>void l_push(slistEl * &amp; head, char v)\n{\nslistEl * p = new slistEl;\n\np-&gt;data = v;\n</code></pre>\n\n<p>Now, a few lines below, we have this:</p>\n\n<pre><code>p-&gt;next = p;\n</code></pre>\n\n<p>Do you think it makes sense to set the new node's <code>next</code> pointer to point to itself?</p>\n\n<p>Obviously not, and that's your problem.</p>\n\n<p>P.S. If the intent of your <code>l_push()</code> is to append the next character to the end of the list (you didn't make it quite clear in your question whether this is the case), even after fixing this problem, <code>l_push</code>() will not do it properly. You need a completely different algorithm to implement this logic, correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458172664, "post_id": 36049114, "comment_id": 59746809, "body": "thanks for your help, but i cannot use string or pre-declare lenght of word (it is an academic problem)"}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "reply_to_user": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458172932, "post_id": 36049114, "comment_id": 59746907, "body": "@JackPatch in which case just read characters from cin directly, I&#39;ve updated the answer."}, {"owner": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458173407, "post_id": 36049114, "comment_id": 59747046, "body": "thanks! it works for me, now i have to just figure it out how to exit this &quot;while (cin &gt;&gt; c)&quot; loop"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458173961, "post_id": 36049114, "comment_id": 59747203, "body": "@JackPatch look for <code>\\n</code> as a canary value. <code>while (cin &gt;&gt; c &amp;&amp; c != &#39;\\n&#39;)</code>.Unless someone types in a godawful long string the stream will not pass data on to you until someone hits enter"}, {"owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "reply_to_user": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "edited": false, "score": 0, "creation_date": 1458215471, "post_id": 36049114, "comment_id": 59766064, "body": "@JackPatch Ctrl+C was the only method I found (reading cin like this). A better method then is to have a buffer of 256 bytes, and use <code>cin::getline</code> in a loop."}], "tags": [], "owner": {"reputation": 6882, "user_id": 611562, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3dbe1a93b0b5d353b419d62de19832c3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/611562/matt"}, "is_accepted": true, "score": 0, "last_activity_date": 1458172923, "last_edit_date": 1458172923, "creation_date": 1458171976, "answer_id": 36049114, "question_id": 36048977, "link": "https://stackoverflow.com/questions/36048977/stack-corruption-with-linked-list-implementation/36049114#36049114", "title": "Stack corruption with linked list implementation", "body": "<p>This is because <code>char str[]</code> is an array created with the correct length for the literal passed to it, and C++ arrays do not expand dynamically. </p>\n\n<p>If I replace the definition of str with: <code>char* str = new char[256];</code> then the program executes perfectly (as long as you don't give it more than 256 characters now). </p>\n\n<p>Better method to do this would be to make use of C++, using <code>getline</code> and <code>string</code>. </p>\n\n<pre><code>std::string str;\nstd::getline(cin, str);\n\nfor (int i = 0; str[i] != '\\0'; i++)\n{\n    l_push(head, str[i]);\n    l_printl(head);\n}\n</code></pre>\n\n<p>Alternatively add characters as you read from <code>cin</code>, though this doesn't terminate on newlines as I'd expect. </p>\n\n<pre><code>char c;\nwhile (cin &gt;&gt; c)\n{\n    l_push(head, c);\n    l_printl(head);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6074209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da6f759996d9e3062776ca590e13c968?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Patch", "link": "https://stackoverflow.com/users/6074209/jack-patch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 36049114, "answer_count": 2, "score": -2, "last_activity_date": 1458173325, "creation_date": 1458171188, "last_edit_date": 1458173325, "question_id": 36048977, "link": "https://stackoverflow.com/questions/36048977/stack-corruption-with-linked-list-implementation", "title": "Stack corruption with linked list implementation", "body": "<p>My program is supposed to take a word from the user (of unknown length) and then create a linked list where each node should contain one character. It works with a pre-declared word, but I am getting a problem if I try to simplify <code>cin &gt;&gt; word</code>:</p>\n\n<blockquote>\n  <p>Stack around the variable 'str' was corrupted. </p>\n</blockquote>\n\n<p>Any help would be welcome.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nstruct slistEl\n{\n    slistEl * next;\n    char data;\n};\n\nunsigned l_size(slistEl * head)\n{\n    unsigned  c = 0;\n    slistEl * p = head;\n\n    if (p)\n        do\n        {\n            c++;\n            p = p-&gt;next;\n        } while (p != head);\n    return c;\n}\n\n\nvoid l_printl(slistEl * head)\n{\n    slistEl * p;\n\n    cout &lt;&lt; setw(3) &lt;&lt; l_size(head) &lt;&lt; \" [\";\n    p = head;\n    if (p)\n        do\n        {\n            p = p-&gt;next;\n            cout &lt;&lt; \" \" &lt;&lt; p-&gt;data;\n\n        } while (p != head);\n    cout &lt;&lt; \" ]\\n\\n\";\n}\n\nvoid l_push(slistEl * &amp; head, char v)\n{\n    slistEl * p = new slistEl;\n\n    p-&gt;data = v;\n    if (head)\n    {\n        p-&gt;next = head-&gt;next;\n        head-&gt;next = p;\n    }\n    else\n        p-&gt;next = p;\n    head = p;\n}\n\nvoid l_pop(slistEl * &amp; head)\n{\n    if (head)\n    {\n        slistEl * p = head-&gt;next;\n        head-&gt;next = p-&gt;next;\n        if (p-&gt;next == p)\n            head = NULL;\n        delete p;\n    }\n}\n\nint main()\n{\n    slistEl * head = NULL;\n\n    char str[] = \"abcdefgh\"; // pre-declarated word\n\n    //cin &gt;&gt; str;  //program should take word from user\n\n    for (int i = 0; str[i] != '\\0'; i++)\n    {\n        l_push(head, str[i]);\n        l_printl(head);\n    }\n\n    system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 518, "user_id": 273649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff481edd2d4d3cc46e04b4cb0952b7c4?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/273649/david"}, "edited": false, "score": 1, "creation_date": 1458171345, "post_id": 36048962, "comment_id": 59746356, "body": "You probably have a path problem.  Can you post for us what you get when type: echo $PATH in your MinGW run terminal and what you get when you type: echo %PATH% in cmd.exe?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1458171816, "post_id": 36048962, "comment_id": 59746523, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6404636/libstdc-6-dll-not-found\">libstdc++-6.dll not found</a>"}, {"owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458218027, "post_id": 36048962, "comment_id": 59767959, "body": "in MinGW I get the result $PATH and in cmd.exe I get the result &quot;The command C:\\Python27\\ is written wrong or cannot be found.&quot; I also develop Python-programs to explain this."}, {"owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "reply_to_user": {"reputation": 518, "user_id": 273649, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff481edd2d4d3cc46e04b4cb0952b7c4?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/273649/david"}, "edited": false, "score": 0, "creation_date": 1474381409, "post_id": 36048962, "comment_id": 66501936, "body": "@david yes, was a path problem. In the MinGW path (where the g++.exe is) are some dll-files. I just need to copy three of them (libstdc++-6.dll, libgcc.dll and libwinp-thread.dll) and insert them into the folder where my C++ programms are. Now they run, thank you."}], "answers": [{"comments": [{"owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458217692, "post_id": 36049036, "comment_id": 59767683, "body": "I read this answer to a similar question but as I tried to compile with this options it still didn&#180;t work"}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "reply_to_user": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458218010, "post_id": 36049036, "comment_id": 59767938, "body": "can you confirm with <code>strings MY.EXE | grep -i \\.dll$</code> or <code>DependencyWalker</code> that the library doesn&#39;t show up to be linked dynamically? ---------- ETA: try using this, might be more reliable <a href=\"https://github.com/gsauthof/pe-util\" rel=\"nofollow noreferrer\">github.com/gsauthof/pe-util</a>"}, {"owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458218607, "post_id": 36049036, "comment_id": 59768412, "body": "the commands grep and DependencyWalker cannot be found. Did I missunderstand you? the command strings works and prints a very long list of sth (module names?) in cmd."}, {"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "reply_to_user": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458218701, "post_id": 36049036, "comment_id": 59768476, "body": "DependencyWalker is a third party application <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow noreferrer\">dependencywalker.com</a> . Or you can search for *.dll files in the output of strings."}], "tags": [], "owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1458171490, "creation_date": 1458171490, "answer_id": 36049036, "question_id": 36048962, "link": "https://stackoverflow.com/questions/36048962/problems-with-running-c-programs/36049036#36049036", "title": "problems with running c++-programs", "body": "<p>You might want to compile your code with <code>g++</code> and the options <code>-static-libgcc</code> and <code>-static-libstdc++</code> so to link the C and C++ standard libraries statically. As a result you don't have to install libraries in your Windows path and you can carry around the executable on other systems.</p>\n"}, {"comments": [{"owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "edited": false, "score": 0, "creation_date": 1458217584, "post_id": 36049042, "comment_id": 59767595, "body": "I already read this question and the answers but linking the libraries with the -static options didn&#180;t work :("}], "tags": [], "owner": {"reputation": 1995, "user_id": 3492631, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/6X56B.jpg?s=128&g=1", "display_name": "Dendi Suhubdy", "link": "https://stackoverflow.com/users/3492631/dendi-suhubdy"}, "is_accepted": false, "score": 2, "last_activity_date": 1458171522, "last_edit_date": 1495535651, "creation_date": 1458171522, "answer_id": 36049042, "question_id": 36048962, "link": "https://stackoverflow.com/questions/36048962/problems-with-running-c-programs/36049042#36049042", "title": "problems with running c++-programs", "body": "<p>This is a repetition of this question <a href=\"https://stackoverflow.com/questions/6404636/libstdc-6-dll-not-found\">libstdc++-6.dll not found</a> according to @kerrek-sb do this</p>\n\n<blockquote>\n  <p>If you are using MingW to compile C++ code on Windows, you may like to add the options -static-libgcc and -static-libstdc++ to link the C and C++ standard libraries statically and thus remove the need to carry around any separate copies of those. Version management of libraries is a pain in Windows, so I've found this approach the quickest and cleanest solution to creating Windows binaries.</p>\n</blockquote>\n"}], "owner": {"reputation": 1297, "user_id": 6074182, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/eea96ceabd30de865464b40ddbd2e64d?s=128&d=identicon&r=PG&f=1", "display_name": "Aemyl", "link": "https://stackoverflow.com/users/6074182/aemyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 1, "accepted_answer_id": 36049036, "answer_count": 2, "score": 1, "last_activity_date": 1458938327, "creation_date": 1458171105, "last_edit_date": 1458938327, "question_id": 36048962, "link": "https://stackoverflow.com/questions/36048962/problems-with-running-c-programs", "title": "problems with running c++-programs", "body": "<p>I wrote a c++-program including <code>&lt;iostream&gt;</code> to use std::cout and std::cin. I compiled it with the g++ compiler (GNU compiler collection) on Windows 10 using MinGW. When I run the program with the run-terminal of MinGW it works but when I try to run it with cmd.exe or open it in Windows Explorer I get this Error:</p>\n\n<p>\"The program cannot be run because libstdc++-6.dll is missing. Please reinstall the program to solve the problem.\"</p>\n\n<p>Because I didn\u00b4t install my program, I tried to install libstdc++-6.dll. I downloaded the file in zip-format but I don\u00b4t know where to unpack. Has this file to be in system32? Do I have another problem? Can anyone help me to solve it? I already read a simliar question and its answers but -static-libgcc -static-libstdc++ didn\u00b4t work.</p>\n"}, {"tags": ["c++", "vector", "input"], "comments": [{"owner": {"reputation": 1338, "user_id": 1917215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/enqwo.png?s=128&g=1", "display_name": "redFIVE", "link": "https://stackoverflow.com/users/1917215/redfive"}, "edited": false, "score": 0, "creation_date": 1458170713, "post_id": 36048848, "comment_id": 59746141, "body": "use a <code>do while</code> loop instead"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1458170739, "post_id": 36048848, "comment_id": 59746150, "body": "C++ is not a scripting language"}, {"owner": {"reputation": 1338, "user_id": 1917215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/enqwo.png?s=128&g=1", "display_name": "redFIVE", "link": "https://stackoverflow.com/users/1917215/redfive"}, "reply_to_user": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "edited": false, "score": 0, "creation_date": 1458171114, "post_id": 36048848, "comment_id": 59746279, "body": "@Amit how is your comment even remotely relevant to this question"}, {"owner": {"reputation": 41440, "user_id": 3887516, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/62e0310897139a10f3293022b6eb7054?s=128&d=identicon&r=PG&f=1", "display_name": "Amit", "link": "https://stackoverflow.com/users/3887516/amit"}, "reply_to_user": {"reputation": 1338, "user_id": 1917215, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/enqwo.png?s=128&g=1", "display_name": "redFIVE", "link": "https://stackoverflow.com/users/1917215/redfive"}, "edited": false, "score": 0, "creation_date": 1458171307, "post_id": 36048848, "comment_id": 59746341, "body": "@redFIVE - it&#39;s not remotely relevant - it&#39;s a comment on the contents of the question, specifically: &quot;<i>But for some reason the script won&#39;t work</i>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 54577, "user_id": 1339987, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/76aa5ba88e0d95b6480113239fe50008?s=128&d=identicon&r=PG", "display_name": "djechlin", "link": "https://stackoverflow.com/users/1339987/djechlin"}, "is_accepted": false, "score": 0, "last_activity_date": 1458170646, "creation_date": 1458170646, "answer_id": 36048868, "question_id": 36048848, "link": "https://stackoverflow.com/questions/36048848/how-to-limit-the-amount-of-inputs-for-a-vector/36048868#36048868", "title": "How to limit the amount of inputs for a vector?", "body": "<p>It pushes the 10th, executes <code>cin &gt;&gt; input;</code> waits for that to complete, then proceeds. In other words, the code executes in the order in which it is in.</p>\n"}], "owner": {"reputation": 25, "user_id": 6069425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d9a3f75c095ba3a8d8d25a86b7296cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sal", "link": "https://stackoverflow.com/users/6069425/sal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "closed_date": 1458170694, "answer_count": 1, "score": -1, "last_activity_date": 1458170684, "creation_date": 1458170514, "question_id": 36048848, "link": "https://stackoverflow.com/questions/36048848/how-to-limit-the-amount-of-inputs-for-a-vector", "closed_reason": "Duplicate", "title": "How to limit the amount of inputs for a vector?", "body": "<p>I am using void FillVector to fill a vector with values that are inserted by a user, and want to limit the amount inserted by the user to 10, and if they were to insert any more, it'd still take the first 10. But for some reason the script won't work unless an 11th value is inserted, and only then will it process the first ten numbers. Why isn't it performing the while command when the user presses Enter after inputting the first 10 values?   </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid fillVector(vector&lt;int&gt;&amp; newVectorQuantities)\n{\ncout &lt;&lt; \"Please type in your list of 10 numbers separated by a space.\"\nint input;\ncin &gt;&gt; input;\n\nwhile (newVectorQuantities.size() &lt; 10) {\nnewVectorQuantities.push_back(input);\ncin &gt;&gt; input;\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "casting", "constants", "containers"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1458171297, "post_id": 36048746, "comment_id": 59746338, "body": "There is no easy way to do this. Part of the reason has to do with certain design deficiencies of std::shared_ptr."}, {"owner": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1458174160, "post_id": 36048746, "comment_id": 59747262, "body": "Is there a reason you need to use the shared pointer to begin with?  If you just use std::set&lt;Data&gt; then you can provide public access to a const reference of the set.  On a side note, it is also strange to see the use of shared pointer while simultaneously providing a public method which returns a raw pointer."}, {"owner": {"reputation": 428, "user_id": 1927728, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8814a6ec8c4f0a8c41975ad0238a7fca?s=128&d=identicon&r=PG", "display_name": "Haoshu", "link": "https://stackoverflow.com/users/1927728/haoshu"}, "reply_to_user": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1458175295, "post_id": 36048746, "comment_id": 59747556, "body": "@qexyn My <code>Data</code> class is actually big. I have two data sets in <code>Manager</code> class consist of almost the same set of data, while one set is sorted by property <code>a</code>, and the other by <code>b</code>. Sometimes I get the first few elements from one set and remove them from the other. So I chose to use pointer."}, {"owner": {"reputation": 428, "user_id": 1927728, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8814a6ec8c4f0a8c41975ad0238a7fca?s=128&d=identicon&r=PG", "display_name": "Haoshu", "link": "https://stackoverflow.com/users/1927728/haoshu"}, "reply_to_user": {"reputation": 780, "user_id": 4151225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4dc7068fd65a846c927df403c73805f?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas Smith", "link": "https://stackoverflow.com/users/4151225/nicholas-smith"}, "edited": false, "score": 0, "creation_date": 1458175422, "post_id": 36048746, "comment_id": 59747590, "body": "@qexyn If I make my dataSet a smart pointer <code>std::shared_ptr&lt;std::set&lt;std::shared_ptr&lt;Data&gt;&gt;&gt; dataSet;</code>, and return a smart pointer, it still can&#39;t be converted. <code>std::shared_ptr&lt;const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;&gt; GetDataSet() {return std::shared_ptr&lt;const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;&gt;(dataSet);}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 1927728, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8814a6ec8c4f0a8c41975ad0238a7fca?s=128&d=identicon&r=PG", "display_name": "Haoshu", "link": "https://stackoverflow.com/users/1927728/haoshu"}, "edited": false, "score": 0, "creation_date": 1458174228, "post_id": 36049065, "comment_id": 59747282, "body": "It works for me as well. I tried <code>return &amp;((const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;)dataSet);</code> but didn&#39;t try <code>return (const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;*)&amp;dataSet;</code>. I think it should work as expected too. But since someone minus this answer, I wonder does it have any deficiency?"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "reply_to_user": {"reputation": 428, "user_id": 1927728, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8814a6ec8c4f0a8c41975ad0238a7fca?s=128&d=identicon&r=PG", "display_name": "Haoshu", "link": "https://stackoverflow.com/users/1927728/haoshu"}, "edited": false, "score": 0, "creation_date": 1458175356, "post_id": 36049065, "comment_id": 59747569, "body": "I guess the down-voters angry because I didn&#39;t used <code>return reinterpret_cast&lt;ConstDataSet*&gt;(&amp;dataSet);</code> which also works... :)"}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": -1, "last_activity_date": 1458172925, "last_edit_date": 1458172925, "creation_date": 1458171693, "answer_id": 36049065, "question_id": 36048746, "link": "https://stackoverflow.com/questions/36048746/how-to-convert-a-set-of-pointer-to-a-set-of-const-pointer/36049065#36049065", "title": "How to convert a set of pointer to a set of const pointer?", "body": "<p>I'm not sure but maybe C pointer casting may help, it easier when you use typedefs.</p>\n\n<p>like this:</p>\n\n<pre><code>typedef std::set&lt;std::shared_ptr&lt;Data&gt;&gt; DataSet;\ntypedef const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt; ConstDataSet;\nclass Manager {\nprivate:\n    DataSet dataSet;\npublic:\n    ConstDataSet* GetDataSet(){\n        return  (ConstDataSet*) &amp;dataSet;\n    }\n};\n</code></pre>\n\n<p><strong>EDIT</strong>\nI just tried it in visual studio 10 Express and it worked.</p>\n\n<p>I guess it work just because <code>std::shared_ptr&lt;Data&gt;</code> and <code>std::shared_ptr&lt;const Data&gt;</code> have the same structure.   </p>\n"}, {"tags": [], "owner": {"reputation": 230, "user_id": 3430265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a705ca50c907800e3fbe71e6ad8f556?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/3430265/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1458186213, "creation_date": 1458186213, "answer_id": 36051280, "question_id": 36048746, "link": "https://stackoverflow.com/questions/36048746/how-to-convert-a-set-of-pointer-to-a-set-of-const-pointer/36051280#36051280", "title": "How to convert a set of pointer to a set of const pointer?", "body": "<p>I think a nice solution would be to construct and return a \n<code>std::vector&lt;const Data*&gt;</code>, since you don't want to share ownership (I assume) with the caller. Unless <code>GetDataSet()</code> is used very often, I think it shouldn't effect performance too much.</p>\n"}], "owner": {"reputation": 428, "user_id": 1927728, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8814a6ec8c4f0a8c41975ad0238a7fca?s=128&d=identicon&r=PG", "display_name": "Haoshu", "link": "https://stackoverflow.com/users/1927728/haoshu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1458186213, "creation_date": 1458169996, "question_id": 36048746, "link": "https://stackoverflow.com/questions/36048746/how-to-convert-a-set-of-pointer-to-a-set-of-const-pointer", "title": "How to convert a set of pointer to a set of const pointer?", "body": "<p>I have a class <code>Data</code>:</p>\n\n<pre><code>class Data {\nprivate:\n    int d;\npublic:\n    int Get() const {\n        return d;\n    }\n    void Set(int d) {\n        this-&gt;d = d;\n    }\n};\n</code></pre>\n\n<p>and a class <code>Manager</code> to manage a set of <code>Data</code>:</p>\n\n<pre><code>class Manager {\nprivate:\n    std::set&lt;std::shared_ptr&lt;Data&gt;&gt; dataSet;\npublic:\n    const std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;* GetDataSet();\n};\n</code></pre>\n\n<p>I want to get the <code>dataSet</code> from class <code>Manager</code> using <code>GetDataSet()</code>, but I don't want others to modify the set or the data. So I want the return type of <code>GetDataSet()</code> to be a const pointer to a set of const pointers. However, I can't directly <code>return &amp;dataSet</code> in <code>GetDataSet()</code> because <code>std::set&lt;std::shared_ptr&lt;Data&gt;&gt;</code> can't be converted to <code>std::set&lt;std::shared_ptr&lt;const Data&gt;&gt;</code>.</p>\n\n<p>One way to solve the problem is to make a copy of the set. But it has extra costs. Another way is to make the <code>Set()</code> function of class <code>Data</code> private, and let the class <code>Manager</code> be a friend of class <code>Data</code>. But it will expose all the private fields of class <code>Data</code> to class <code>Manager</code>.</p>\n\n<p>Is there a better way?</p>\n"}, {"tags": ["c++", "algorithm", "3d", "openscenegraph"], "comments": [{"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1458174838, "post_id": 36048698, "comment_id": 59747425, "body": "Open your model in blender or similar. These program already have some algorithms to figure out the right side of each normal, at least if your model is closed."}, {"owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1458189678, "post_id": 36048698, "comment_id": 59751544, "body": "is the source code available ? i want to implement this solution on my cad program."}], "answers": [{"comments": [{"owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "edited": false, "score": 0, "creation_date": 1458189470, "post_id": 36048975, "comment_id": 59751483, "body": "hi, thanks for the reply and for suggestion me Stack Exchange, i will try to post there."}, {"owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "edited": false, "score": 0, "creation_date": 1458189566, "post_id": 36048975, "comment_id": 59751510, "body": "and about normal yes they are vertices normals , i update the question with an image please check it. and let me know what type of information is missing."}, {"owner": {"reputation": 365, "user_id": 2204413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a61a719935fe6031c308377b1f550ae?s=128&d=identicon&r=PG", "display_name": "Geries", "link": "https://stackoverflow.com/users/2204413/geries"}, "reply_to_user": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "edited": false, "score": 0, "creation_date": 1458218668, "post_id": 36048975, "comment_id": 59768461, "body": "Well calculating the normal vector and then calculating the dot product of the calculated one and the default one should reliably detect issues where dot &lt; 0.0f.  <a href=\"http://www.lighthouse3d.com/opengl/terrain/index.php?normals\" rel=\"nofollow noreferrer\">lighthouse3d.com/opengl/terrain/index.php?normals</a> There I can see actual math for your basic normal vector calculating needs."}], "tags": [], "owner": {"reputation": 365, "user_id": 2204413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a61a719935fe6031c308377b1f550ae?s=128&d=identicon&r=PG", "display_name": "Geries", "link": "https://stackoverflow.com/users/2204413/geries"}, "is_accepted": false, "score": 0, "last_activity_date": 1458171171, "creation_date": 1458171171, "answer_id": 36048975, "question_id": 36048698, "link": "https://stackoverflow.com/questions/36048698/algorithm-to-correct-wrong-normal-direction-on-3d-model/36048975#36048975", "title": "Algorithm to correct wrong normal direction on 3D model", "body": "<p>I suspect something is up with the indexing, if not then it is probably better to ignore the normal's table entirely. I'm not really sure about the details, but I assume it is 1 normal/vertex, so approaching it would involve calculating poligon normals, which you can do with:</p>\n\n<pre><code>normalize(cross_product(vert0 - vert1, vert0 - vert2));\n</code></pre>\n\n<p>After that averaging the normals of the poligons sharing the vertex should do.\nCalculating the dot product of the freshly calculated normal and the original normal would reveal if the original normal is way off.</p>\n\n<p>Anyways for your problem StackOverflow isn't really the one, there are other Stack Exchange sites that are actually specialized for similar problems. Also there are way too few informations about the issue so helping isn't easy as well.</p>\n"}, {"tags": [], "owner": {"reputation": 861, "user_id": 1339735, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c14e2c15dbcf0db2d57dc40a4880bdd?s=128&d=identicon&r=PG", "display_name": "Ruan Caiman", "link": "https://stackoverflow.com/users/1339735/ruan-caiman"}, "is_accepted": false, "score": 1, "last_activity_date": 1460662720, "creation_date": 1460662720, "answer_id": 36632431, "question_id": 36048698, "link": "https://stackoverflow.com/questions/36048698/algorithm-to-correct-wrong-normal-direction-on-3d-model/36632431#36632431", "title": "Algorithm to correct wrong normal direction on 3D model", "body": "<p>OSG has a visitor class in osgUtil that can calculate all the vertex normals for you, called smoothingVisitor.  You just need to point it at your model after you've loaded it, eg:</p>\n\n<pre><code>// recalculate normals with the smoothing visitor\nosgUtil::SmoothingVisitor sv;\nloadedModel-&gt;accept(sv);\n</code></pre>\n\n<p>This will clobber existing vertex normals, or create new ones if they don't exist.  Just looking quickly at it, it looks like it assumes your geometry is triangles, not quads as you've drawn, but I could be wrong.</p>\n"}], "owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1113, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1460662720, "creation_date": 1458169732, "last_edit_date": 1458190050, "question_id": 36048698, "link": "https://stackoverflow.com/questions/36048698/algorithm-to-correct-wrong-normal-direction-on-3d-model", "title": "Algorithm to correct wrong normal direction on 3D model", "body": "<p>i am new to 3D math, but i am facing a problem that when i am importing a model to CAD program - (single sided light/ open scene graph) - there are a lot of faces from meshs, Black !</p>\n\n<p>When i flip the normal manually for each of the faces i got the correct material and texture.</p>\n\n<p>my question is, if i know vertices table and normals table for every mesh in the model, can i write an algorithm that will correct all wrong normal direction automatically, i mean it must detect the wrong normals without any help form users and correct them.  </p>\n\n<p>i thought about an idea that needs image processing, i know nothing about image processing, so if you can help with from where i should start to achieve this :</p>\n\n<p>first i will assume every blacked face is a wrong normal.</p>\n\n<p>second i will direct a light form the camera to the mesh, and if are all the pixels in black then flip the normal.</p>\n\n<p>and do this for all meshs.</p>\n\n<p>i think i will have a speed issue but that all what i think about. </p>\n\n<p>thanks.</p>\n\n<p>the wrong red plane and the black one, they are in the same model and both of them must have red color, but as i mentioned the black one his normals are flipped.\n<a href=\"https://i.stack.imgur.com/iDfbw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iDfbw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "boost", "boost-program-options"], "answers": [{"tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": true, "score": 1, "last_activity_date": 1458171650, "creation_date": 1458171650, "answer_id": 36049057, "question_id": 36048609, "link": "https://stackoverflow.com/questions/36048609/how-to-avoid-a-positional-option-to-be-specified-as-a-regular-option-in-boost/36049057#36049057", "title": "How to avoid a positional option to be specified as a &quot;regular&quot; option in boost::program_options?", "body": "<p>This exact use-case is described later in the tutorial. You have to create two different <code>options_description</code> objects, one for the visible, an other for the hidden options, then mix them together in a third <code>options_description</code> object. When printing the help, describe only the visible one.</p>\n"}], "owner": {"reputation": 6351, "user_id": 1150462, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/092b20f85f41e56494e4d1fabcb7099c?s=128&d=identicon&r=PG", "display_name": "xuhdev", "link": "https://stackoverflow.com/users/1150462/xuhdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 36049057, "answer_count": 1, "score": -1, "last_activity_date": 1458171650, "creation_date": 1458169350, "question_id": 36048609, "link": "https://stackoverflow.com/questions/36048609/how-to-avoid-a-positional-option-to-be-specified-as-a-regular-option-in-boost", "title": "How to avoid a positional option to be specified as a &quot;regular&quot; option in boost::program_options?", "body": "<p>According to the <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/program_options/tutorial.html#idm45555218453872\" rel=\"nofollow\">tutorial</a>, it seems that every option has a name and can be specified as a regular option. Is it possible, to enforce an option to be only legal if specified as a positional option, and not show up in the help message as a regular option?</p>\n"}, {"tags": ["c++", "qt", "qtableview", "qstandarditemmodel"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 5924079, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1bE7x.png?s=128&g=1", "display_name": "PowerGlove", "link": "https://stackoverflow.com/users/5924079/powerglove"}, "is_accepted": false, "score": 7, "last_activity_date": 1458173403, "creation_date": 1458173403, "answer_id": 36049352, "question_id": 36048581, "link": "https://stackoverflow.com/questions/36048581/add-items-to-columns-in-qstandarditemmodel/36049352#36049352", "title": "Add items to columns in QStandardItemModel", "body": "<p>Calling appendRow(QStandardItem *) only adds a single item to the first column.  You would need to pass in a QList to appendRow() to add items to each column, e.g.:</p>\n\n<pre><code>QList&lt;QStandardItem *&gt; items;\n\nitems.append(new QStandardItem(\"Column 1 Text\"));\nitems.append(new QStandardItem(\"Column 2 Text\"));\n\nQStandardItemModel* model = new QStandardItemModel(this);\n\nmodel-&gt;setColumnCount(2);\nmodel-&gt;appendRow(items);\n</code></pre>\n\n<p>See <a href=\"http://doc.qt.io/qt-5/qstandarditemmodel.html#appendRow\" rel=\"noreferrer\">http://doc.qt.io/qt-5/qstandarditemmodel.html#appendRow</a> for more detail.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9493, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1458192955, "creation_date": 1458169200, "last_edit_date": 1458192955, "question_id": 36048581, "link": "https://stackoverflow.com/questions/36048581/add-items-to-columns-in-qstandarditemmodel", "title": "Add items to columns in QStandardItemModel", "body": "<p>I am currently adding rows to my <code>QTableView</code> as such</p>\n\n<pre><code>QStandardItem* itm;\nQStandardItemModel* model = new QStandardItemModel(this);\nmodel-&gt;setColumnCount(2);\nmodel-&gt;appendRow(new QStandardItem(\"Some Text in Column1\");\n</code></pre>\n\n<p>How do I add items to column 2 dynamically by appending?\nIn the above example column 2 is empty. How do I add item to column 2?</p>\n"}, {"tags": ["c++", "templates", "move-semantics", "rvalue-reference", "perfect-forwarding"], "comments": [{"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1458169241, "post_id": 36048535, "comment_id": 59745587, "body": "<code>A&amp;&amp;</code> if supplied with an rvalue, <code>A &amp;</code> otherwise, as far as I remember."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1458169545, "post_id": 36048535, "comment_id": 59745709, "body": "The phrase &quot;perfect forwarding&quot; stems from precisely the fact that <code>A</code> can deduce to either of a couple different types, depending on what&#39;s passed."}], "answers": [{"comments": [{"owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1458170157, "post_id": 36048584, "comment_id": 59745926, "body": "Which means it would expand to <code>A&amp;&amp;</code> for rvalues, <code>A&amp;</code> for lvalues, and <code>A const&amp;</code> for const lvalues (but not rvalues)?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "edited": false, "score": 0, "creation_date": 1458170195, "post_id": 36048584, "comment_id": 59745945, "body": "@hgiesel Read it over again: the appropriate cv qualifiers would be deduced for rvalues too. Otherwise the reference binding would not be possible."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 5, "last_activity_date": 1458169211, "creation_date": 1458169211, "answer_id": 36048584, "question_id": 36048535, "link": "https://stackoverflow.com/questions/36048535/what-is-perfect-forwarding-equal-to/36048584#36048584", "title": "What is Perfect Forwarding equal to", "body": "<p>It's the first one. The second wouldn't make very much sense: there is no <code>A</code> such that <code>A&amp;&amp;</code> is a non-reference type.</p>\n\n<p>If the argument is an lvalue of type <em>cv</em> <code>T</code>, then <code>A</code> is deduced as <em>cv</em> <code>T&amp;</code>. If the argument is an rvalue of type <em>cv</em> <code>T</code>, then <code>A</code> is deduced as <em>cv</em> <code>T</code> and <code>A&amp;&amp;</code> is <em>cv</em> <code>T&amp;&amp;</code>. So when you pass in a <code>const</code> lvalue, the specialization generated is one that can accept a <code>const</code> argument.</p>\n"}, {"tags": [], "owner": {"reputation": 1244, "user_id": 6053907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74c527b9736547b1be600cad630083ef?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/6053907/gam"}, "is_accepted": false, "score": 2, "last_activity_date": 1458170272, "creation_date": 1458170272, "answer_id": 36048811, "question_id": 36048535, "link": "https://stackoverflow.com/questions/36048535/what-is-perfect-forwarding-equal-to/36048811#36048811", "title": "What is Perfect Forwarding equal to", "body": "<p>They were called originally \"<strong>Univeral</strong> <strong>References</strong>\" by Scott Meyers, and now \"<strong>Forwarding References</strong>\".</p>\n\n<p>As you can see, the <strong>references</strong> part has not changed. You pass in any kind of <code>rvalue</code>, you get a <code>rvalue</code> reference. You pass in any kind of <code>lvalue</code>, and you get a lvalue reference. Life is that simple.</p>\n"}], "owner": {"reputation": 4639, "user_id": 3986708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/g0JCF.jpg?s=128&g=1", "display_name": "hgiesel", "link": "https://stackoverflow.com/users/3986708/hgiesel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 36048584, "answer_count": 2, "score": 0, "last_activity_date": 1458171982, "creation_date": 1458168926, "last_edit_date": 1458171982, "question_id": 36048535, "link": "https://stackoverflow.com/questions/36048535/what-is-perfect-forwarding-equal-to", "title": "What is Perfect Forwarding equal to", "body": "<p>I know that this can be used to perform perfect forwarding:</p>\n\n<pre><code>template &lt;typename A&gt;\nvoid foo(A&amp;&amp;) { /* */ }\n</code></pre>\n\n<p>This can be used to perform perfect forwarding on a certain type:</p>\n\n<pre><code>template &lt;typename A, std::enable_if_t&lt;std::is_same&lt;std::decay_t&lt;A&gt;, int&gt;::value, int&gt; = 0&gt;\nvoid foo(A&amp;&amp;) { /* */ }\n</code></pre>\n\n<p>But these are just templates for functions, which means, that these get expanded to some functions, which are then used for every special case in which it might be used. However do these get expanded to:</p>\n\n<p><code>void foo(A&amp;)</code> and <code>void foo(A&amp;&amp;)</code></p>\n\n<p><strong>OR</strong></p>\n\n<p><code>void foo(A&amp;)</code> and <code>void foo(A)</code></p>\n\n<p>I always thought, it would be the first one, but then I noticed, that in that case, you wouldn't be able to use <code>A const</code> as an argument to the function, which certainly works.</p>\n\n<p>However the second would be ambiguous, if you used a normal non-const lvalue. Does it call <code>foo(A&amp;)</code> or <code>foo(A)</code>?</p>\n"}, {"tags": ["c++", "arrays", "average"], "comments": [{"owner": {"reputation": 49, "user_id": 5880395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfavy.jpg?s=128&g=1", "display_name": "xmaddiemuffin", "link": "https://stackoverflow.com/users/5880395/xmaddiemuffin"}, "edited": false, "score": 1, "creation_date": 1458168406, "post_id": 36048402, "comment_id": 59745249, "body": "line 23 continues as +integer[7]+integer[8]+integer[9];"}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 3, "creation_date": 1458168579, "post_id": 36048402, "comment_id": 59745320, "body": "Side note: it seems that you already know about loops; so why do use a loop to compare against average; but write down all the array elements manually when computing the initial sum? That&#39;s like ... well, not very clever."}, {"owner": {"reputation": 8851, "user_id": 760746, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19726c55cf8ab72ea01bbb2feee5a3f1?s=128&d=identicon&r=PG", "display_name": "Nobody moving away from SE", "link": "https://stackoverflow.com/users/760746/nobody-moving-away-from-se"}, "edited": false, "score": 0, "creation_date": 1458168646, "post_id": 36048402, "comment_id": 59745341, "body": "You should read up on <code>std::vector</code>, <code>std::accumulate</code> or more generally the standard library."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458168978, "post_id": 36048402, "comment_id": 59745486, "body": "A <code>for</code> loop can be used to input data as well!  Another one to calculate the sum."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1458171077, "post_id": 36048402, "comment_id": 59746263, "body": "@ThomasMatthews -- or the same one to calculate the sum."}], "answers": [{"tags": [], "owner": {"reputation": 1531, "user_id": 4253427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177fbfd7d486a5687d0ea82d1a5e9e2e?s=128&d=identicon&r=PG&f=1", "display_name": "zeromus", "link": "https://stackoverflow.com/users/4253427/zeromus"}, "is_accepted": true, "score": 3, "last_activity_date": 1458168470, "creation_date": 1458168470, "answer_id": 36048425, "question_id": 36048402, "link": "https://stackoverflow.com/questions/36048402/why-is-my-code-printing-every-number/36048425#36048425", "title": "Why is my code printing every number?", "body": "<p><code>if (integer[i]&gt;=average);</code> contains a semicolon at the end, removing its ability to control the print statement after it. Turn up the warning level on your compiler and you'd have a message about this</p>\n"}, {"tags": [], "owner": {"reputation": 8851, "user_id": 760746, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19726c55cf8ab72ea01bbb2feee5a3f1?s=128&d=identicon&r=PG", "display_name": "Nobody moving away from SE", "link": "https://stackoverflow.com/users/760746/nobody-moving-away-from-se"}, "is_accepted": false, "score": 5, "last_activity_date": 1458168527, "creation_date": 1458168527, "answer_id": 36048437, "question_id": 36048402, "link": "https://stackoverflow.com/questions/36048402/why-is-my-code-printing-every-number/36048437#36048437", "title": "Why is my code printing every number?", "body": "<p>You have a spurious <code>;</code> after the <code>if</code> in the loop.</p>\n\n<p>When you always use <code>{}</code> on <code>if</code>s and similar control structures instead of relying on the \"one line exception\", this error is less likely to happen.</p>\n"}], "owner": {"reputation": 49, "user_id": 5880395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfavy.jpg?s=128&g=1", "display_name": "xmaddiemuffin", "link": "https://stackoverflow.com/users/5880395/xmaddiemuffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "closed_date": 1458171664, "accepted_answer_id": 36048425, "answer_count": 2, "score": -1, "last_activity_date": 1458168527, "creation_date": 1458168385, "question_id": 36048402, "link": "https://stackoverflow.com/questions/36048402/why-is-my-code-printing-every-number", "closed_reason": "Not suitable for this site", "title": "Why is my code printing every number?", "body": "<p>I have written this code that reads 10 integers from the user, stores them in an array, then calculates and prints the average. It is also supposed to print the numbers in the array that are greater than or equal to the average. Instead, my code prints out every number in the array. How can I fix this?</p>\n\n<p>Also, if anyone has any tips on how to simplify this code, that would be much appreciated, as well.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    const int ENTER_NUM = 10;\n    int integer[ENTER_NUM];\n\n    cout &lt;&lt; \"Enter \"&lt;&lt;ENTER_NUM&lt;&lt;\" numbers: \"&lt;&lt;endl;\n    cin &gt;&gt; integer[0];\n    cin &gt;&gt; integer[1];\n    cin &gt;&gt; integer[2];\n    cin &gt;&gt; integer[3];\n    cin &gt;&gt; integer[4];\n    cin &gt;&gt; integer[5];\n    cin &gt;&gt; integer[6];\n    cin &gt;&gt; integer[7];\n    cin &gt;&gt; integer[8];\n    cin &gt;&gt; integer[9];\n\n    int sum;\n    sum = integer[0]+integer[1]+integer[2]+integer[3]+integer[4]+integer[5]+integer[6]+integer[7]+integer[8]+integer[9];\n\n    int average;\n    average = sum/ENTER_NUM;\n\n    cout&lt;&lt;\"Average is: \"&lt;&lt;average&lt;&lt;endl;\n\n    for(int i=0; i&lt;10; i++)\n    {\n            if (integer[i]&gt;=average);\n            cout&lt;&lt;\"Number in array greater than or equal to the average: \"&lt;&lt;integer[i]&lt;&lt;endl;\n    }\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "function", "io", "percentage"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458168391, "post_id": 36048319, "comment_id": 59745245, "body": "The problem is that most computers are not just running your program. They have other things in hand that effects performance so they will have to make a guess"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458168508, "post_id": 36048319, "comment_id": 59745295, "body": "Time the first x% and extrapolate."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 1, "creation_date": 1458168522, "post_id": 36048319, "comment_id": 59745301, "body": "How  are you going to calculate that percentage? Once you&#39;ve determined that, the display is simple. The calculation, however, is anything but simple. Given 1000 items, how does your sort algorithm know it&#39;s reached 17% of the sort, when by nature a bubble sort is highly repetitive?"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458168579, "post_id": 36048319, "comment_id": 59745319, "body": "@EdHeal No. If you observe the algorithm of bubble sort, after every main iteration, 1 element is correctly placed to it&#39;s position, either in the start or at the end. Consider the loop has 100 elements, so after every main loop, the progress increases by 1%. The computer has nothing to do with it anyways."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458168678, "post_id": 36048319, "comment_id": 59745356, "body": "@SahilArora: <i>so after every main loop, the progress increases by 1%</i> false. Bubble sort gets faster at every iteration. The first iteration takes ~N, the second ~N-1, the third ~N-2 and so on."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458168679, "post_id": 36048319, "comment_id": 59745359, "body": "But you have a computer that is running multiple processes at the same time."}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458168976, "post_id": 36048319, "comment_id": 59745484, "body": "@JonathanPotter how?"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1458169009, "post_id": 36048319, "comment_id": 59745500, "body": "@KenWhite Question details edited, added how percentage can be calculated."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458169031, "post_id": 36048319, "comment_id": 59745508, "body": "<code>1- num_sorted&#47;num_to_sort</code>"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458169068, "post_id": 36048319, "comment_id": 59745523, "body": "@MatteoItalia Yes, I agree. But it could also show up something like, no. of elements sorted = 100/1000. I have edited the description, have a look."}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458169161, "post_id": 36048319, "comment_id": 59745560, "body": "@user4581301 I get that, but how do I make the function return the percentage, or print, that too on the same spot."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458169485, "post_id": 36048319, "comment_id": 59745687, "body": "@SahilArora: well, then just print it when you are inside the loop (<a href=\"http://pastebin.com/THXrPqxg\" rel=\"nofollow noreferrer\">example</a>), what&#39;s so difficult about it?"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458169955, "post_id": 36048319, "comment_id": 59745848, "body": "@MatteoItalia This will print a new on each line. I need to print it at the same place. Like: 1%, then after some time this 1 changes to 2, 2%. I do not want something like: 1% 2% 3% 4% ...  This is the problem."}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458170091, "post_id": 36048319, "comment_id": 59745896, "body": "Google <code>ncurses</code> library"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 2, "creation_date": 1458170316, "post_id": 36048319, "comment_id": 59745999, "body": "Use the carriage return character (<code>\\r</code>) to reposition at the beginning of the line."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458170346, "post_id": 36048319, "comment_id": 59746016, "body": "Brute force: <code>std::cout</code> a &#39;\\b&#39; for every character in the previous percentage, then <code>std::cout &lt;&lt; currentPercent;</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458170394, "post_id": 36048319, "comment_id": 59746034, "body": "Dang it @MatteoItalia Why do it the easy way?"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458170566, "post_id": 36048319, "comment_id": 59746084, "body": "@EdHeal sorry I did not mention, without any external library support"}, {"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1458170607, "post_id": 36048319, "comment_id": 59746099, "body": "@MatteoItalia yeah this may work."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1458170726, "post_id": 36048319, "comment_id": 59746146, "body": "Don&#39;t forget to flush."}], "answers": [{"comments": [{"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "edited": false, "score": 0, "creation_date": 1458171231, "post_id": 36048906, "comment_id": 59746319, "body": "I thought of the progress bar only after posting the question! I&#39;ll try anyway. And cannot use ncurses library."}], "tags": [], "owner": {"reputation": 109, "user_id": 4099449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e83934c4c0b56e486cab624d6fa38981?s=128&d=identicon&r=PG&f=1", "display_name": "guptashark", "link": "https://stackoverflow.com/users/4099449/guptashark"}, "is_accepted": false, "score": 1, "last_activity_date": 1458170805, "creation_date": 1458170805, "answer_id": 36048906, "question_id": 36048319, "link": "https://stackoverflow.com/questions/36048319/show-the-percentage-of-process-completion-in-a-c-program/36048906#36048906", "title": "Show the percentage of process completion in a C++ program", "body": "<p>For the special case of bubblesort, you can take the number of elements you have, then divide that by 100. If you have 552 elements, then you will get 5. (integers make sense to work with). Then, have a counter in your loop. If the counter is a multiple of 5, (you've so far sorted 5 elements) then you can increase the percentage by 1 and print it. As far as printing it so that the percentage appears on the spot instead of printing below, you can print backspaces! Either that or try using the ncurses library, though that might be overkill. Finally, a different way to do this might be to use a linux style progress bar that is 50 characters long or something similar. </p>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "edited": false, "score": 0, "creation_date": 1493759304, "post_id": 36049379, "comment_id": 74537599, "body": "Whoa man! This is gold. I don&#39;t know why I did not accept this answer back then. Thanks a lot! Also, why don&#39;t you make the video public?"}], "tags": [], "owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "is_accepted": true, "score": 1, "last_activity_date": 1505910516, "last_edit_date": 1505910516, "creation_date": 1458173546, "answer_id": 36049379, "question_id": 36048319, "link": "https://stackoverflow.com/questions/36048319/show-the-percentage-of-process-completion-in-a-c-program/36049379#36049379", "title": "Show the percentage of process completion in a C++ program", "body": "<p>You can pass a callback function of a generic type to your bubblesort function and call the function at reasonable intervals.</p>\n\n<p>This will impact performance, but this shouldn't be a concern when you're using bubblesort anyway.</p>\n\n<p>First we'll need some includes:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;random&gt;\n#include &lt;chrono&gt;\n</code></pre>\n\n<p>And then the bubblesort function, which I essentially took from wikipedia: <a href=\"https://en.wikipedia.org/wiki/Bubble_sort#Optimizing_bubble_sort\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Bubble_sort#Optimizing_bubble_sort</a></p>\n\n<pre><code>template &lt;typename T, typename Func&gt;\nvoid bubblesort(std::vector&lt;T&gt; &amp;v, Func callback) {\n    size_t const len = v.size();\n    size_t n = v.size();\n    while(n &gt; 0) {\n        size_t newn = 0;\n        for(size_t i = 1; i &lt;= n-1; ++i) {\n            if (v[i - 1] &gt; v[i]) {\n                std::swap(v[i-1], v[i]);\n                newn = i;\n            }\n        }\n        n = newn;\n        callback(100-static_cast&lt;int&gt;(n*100/len));\n    }\n}\n</code></pre>\n\n<p>We will call the given callback function (or use operator() on an object) whenever it's done sorting in one element. </p>\n\n<p>The parameter we pass is an integer percentage of how far we've come. Note that due to integer arithmetic you cannot change the order of operations with n*100/v.size() or else it would always result in 0, since n will always be smaller than v.size();</p>\n\n<pre><code>using namespace std::chrono; //to avoid the horrible line becoming even longer\n\nint main() {\n    std::vector&lt;int&gt; vec; \n\n    /* fill vector with some data */\n    std::mt19937 generator(static_cast&lt;unsigned long&gt;(duration_cast&lt;milliseconds&gt;(system_clock::now().time_since_epoch()).count())); //oh god\n    for(int i = 0; i &lt; 100000; ++i) {\n        vec.push_back(static_cast&lt;int&gt;(generator()));\n    }\n</code></pre>\n\n<p>For initialization we get create a random number generator and seed it with the current time. Then we put some elements in the vector.</p>\n\n<pre><code>    char const *prefix = \"Bubble sort under progress. Done: \";\n    int lastp = -1;\n    bubblesort(vec, [&amp;lastp,prefix](int p){\n        //if progress has changed, update it\n        if(p != lastp) {\n            lastp = p;\n            std::cout &lt;&lt; \"\\r\" &lt;&lt; prefix &lt;&lt; p &lt;&lt; \"%\" &lt;&lt; std::flush;\n            /*std::flush is needed when we don't start a new line\n              '\\r' puts the cursor to the start of the line */\n        }\n    });\n\n    std::cout &lt;&lt; \"\\r\" &lt;&lt; prefix &lt;&lt; \"100%\" &lt;&lt; std::endl;\n    //make sure we always end on 100% and end the line\n}\n</code></pre>\n\n<p>Now the core part: we pass a C++ lambda function to our bubblesort function as a callback. Our bubblesort function will then call this lambda with the percentage value and write it to the screen.</p>\n\n<p>And voil\u00e0, we got ourselves some neat output:</p>\n\n<p><a href=\"https://youtu.be/iFGN8Wy9T3o\" rel=\"nofollow noreferrer\">https://youtu.be/iFGN8Wy9T3o</a></p>\n\n<h1>Closing notes:</h1>\n\n<p>You can of course integrate the lamda function into the sort function itself, however I would not recommend this as you lose a lot of flexibility. But it's a design choice that's up to you - if you don't need the flexibility, just hardcode it.</p>\n\n<p>The percentage is not very accurate, in fact knowing you're at 20% (and how long it took to get there) does not tell you much at all about the time it will take to get to 100% as it could very well be, that the last 20% of the vector were sorted (and thus were quick to sort with bubblesort - O(n)), but the remaining 80% are random, and take O(n^2) to sort.\nIn fact all it tells you is that you're making progress, but that's all you wanted in the first place so I guess that's okay.</p>\n\n<p>If you want a more accurate percentage adjust your program like this:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n/* ... */\ncallback(10000-static_cast&lt;int&gt;(n*10000/len));\n/* ... */\nstd::cout.fill('0'); //to fill leading zero of p%100\nstd::cout &lt;&lt; \"\\r\" &lt;&lt; prefix &lt;&lt; p/100 &lt;&lt; \".\" &lt;&lt; std::setw(2) &lt;&lt; p%100 &lt;&lt; \"%\" &lt;&lt; std::flush;\n</code></pre>\n\n<p>If you decide to use floating point values instead remember to clear remnant characters from previous outputs - \"\\r\" only resets the cursor position, but does not clear the line.</p>\n\n<p>Use <code>std::cout.precision(3);</code> for a fixed precision or write some spaces after your message to clear previous runs.</p>\n"}], "owner": {"reputation": 811, "user_id": 4554700, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/WLOyw.jpg?s=128&g=1", "display_name": "Sahil Arora", "link": "https://stackoverflow.com/users/4554700/sahil-arora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1462, "favorite_count": 0, "accepted_answer_id": 36049379, "answer_count": 2, "score": 0, "last_activity_date": 1505910516, "creation_date": 1458167924, "last_edit_date": 1458168901, "question_id": 36048319, "link": "https://stackoverflow.com/questions/36048319/show-the-percentage-of-process-completion-in-a-c-program", "title": "Show the percentage of process completion in a C++ program", "body": "<p>I am making a set of C++ library as a part of my Data Structures assignment, which includes custom implementation of vector, sorting algorithms, stacks, etc. I am supposed to work on the running time of sorting algorithms, bubble sort, selection sort, quick sort, etc., which are part of my library.</p>\n\n<p>Now the data set given to test the algorithms in of the order of 10^6. I ran bubble sort on a data of 2*10^6 elements, and it took about 138 minutes for the program to run, and in all this time, I did not know if my sorting algorithm is working correctly or not, or is it even working or not. I would want to add another feature to the sorting functions, i.e they could display the percentage of sorting done, and I think this is possible, since algorithms like bubble sort are deterministic. </p>\n\n<p>I need a message like something to appear as soon as I start the process:</p>\n\n<blockquote>\n  <p>Bubble sort under progress. Done: 17%</p>\n</blockquote>\n\n<p>This percentage is to be determined by the algorithm. Consider the example of bubble sort with 10000 elements. If you look at the bubble sort algorithm(refer here: <a href=\"https://en.wikipedia.org/wiki/Bubble_sort\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Bubble_sort</a>), it has 2 loops, and after each iteration of the main loop, one element is fixed to its correct position in the sorted array. So after like 1 iteration, the percentage should increase by 0.01%.</p>\n\n<p>Though this percentage calculation has a problem that in this case, the time for the percentage to increase keeps on decreasing, but something like this would do. </p>\n\n<p>Also, this number should increase as and when required, on the same place. But I have no idea how to implement it. </p>\n"}, {"tags": ["c++", "c", "gcc"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 3, "creation_date": 1458167060, "post_id": 36048089, "comment_id": 59744694, "body": "Is not it like C and C++ are different languages?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1458167270, "post_id": 36048089, "comment_id": 59744791, "body": "@Leushenko But you can&#39;t overload based on return type only. Also, g++ might compile the code as C due to the file name. Either way, it shouldn&#39;t compile."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "edited": false, "score": 0, "creation_date": 1458167578, "post_id": 36048089, "comment_id": 59744918, "body": "If you want to use printf, make sure you pass the correct format string. In this case, I&#39;m guessing that the global overload is used, so <code>%lf</code> should be used instead of <code>%d</code>. However I would recommend <code>std::cout &lt;&lt; f(1)&lt;&lt; std::endl;</code> Note that gcc does notice this inconsistency and tells you it&#39;ll have problems with it and most likely a reinterpret_cast will occur for 1.0 to an int"}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1458167591, "post_id": 36048089, "comment_id": 59744924, "body": "@juanchopanza: The code is wrong, but is a diagnostic actually mandated in this case?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458167950, "post_id": 36048089, "comment_id": 59745052, "body": "What is the problem? Ruby behaves different that Rust, C than C++, Java different than Pascal, etc."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 1666237, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ae31965f7351e2e8679156cf114b3a8?s=128&d=identicon&r=PG", "display_name": "Don Slowik", "link": "https://stackoverflow.com/users/1666237/don-slowik"}, "edited": false, "score": 0, "creation_date": 1458232225, "post_id": 36048365, "comment_id": 59779131, "body": "Thank you, that does seem to explain what is happening here. So one should be careful to self-check that the function type of a function declared within a block matches that function&#39;s definition, as the compiler may not."}, {"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "reply_to_user": {"reputation": 693, "user_id": 1666237, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ae31965f7351e2e8679156cf114b3a8?s=128&d=identicon&r=PG", "display_name": "Don Slowik", "link": "https://stackoverflow.com/users/1666237/don-slowik"}, "edited": false, "score": 0, "creation_date": 1458232991, "post_id": 36048365, "comment_id": 59779740, "body": "@user1666237: Yes. Also, this sort of local declaration for a global name is, in my experience, very unusual... In fact I have never seen one in production code. The usual approach is to put <i>all</i> non-static declarations into header files and <code>#include</code> them as appropriate. That way, the compiler will tell you about this sort of mismatch even across translation units."}, {"owner": {"reputation": 693, "user_id": 1666237, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ae31965f7351e2e8679156cf114b3a8?s=128&d=identicon&r=PG", "display_name": "Don Slowik", "link": "https://stackoverflow.com/users/1666237/don-slowik"}, "edited": false, "score": 0, "creation_date": 1458233619, "post_id": 36048365, "comment_id": 59780182, "body": "Agreed  (comment to &gt;15 chars)"}], "tags": [], "owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "is_accepted": true, "score": 5, "last_activity_date": 1458233077, "last_edit_date": 1458233077, "creation_date": 1458168196, "answer_id": 36048365, "question_id": 36048089, "link": "https://stackoverflow.com/questions/36048089/localblock-function-decln-vs-defn-return-type-mismatch-diagnostic-in-c/36048365#36048365", "title": "Local(Block) function decln vs. defn return type mismatch; Diagnostic in C++?", "body": "<p>I can explain this behavior for C++.</p>\n\n<p>From the C++11 spec, section 3.5 [basic.link], paragraph (7):</p>\n\n<blockquote>\n  <p>When a block scope declaration of an entity with linkage is not found to refer to some other declaration, then that entity is a member of the innermost enclosing namespace. However such a declaration does not introduce the member name in its namespace scope.</p>\n</blockquote>\n\n<p>So the <code>int f(int)</code> declaration has global linkage, but does not introduce the name into the global namespace. This might explain why GCC does not notice the conflict.</p>\n\n<p>More importantly, paragraph (10) says:</p>\n\n<blockquote>\n  <p>After all adjustments of types (during which typedefs (7.1.3) are replaced by their definitions), the types specified by all declarations referring to a given variable or function shall be identical, except that declarations for an array object can specify array types that differ by the presence or absence of a major array bound (8.3.4). A violation of this rule on type identity does not require a diagnostic.</p>\n</blockquote>\n\n<p>Your program violates the \"shall\" portion of this paragraph, so its behavior is undefined. That means anything GCC does whatsoever -- such as calling the <code>double foo(int)</code> function and treating its return value as an int -- is permitted by the spec. Moreover, no diagnostic is required.</p>\n\n<p>I do not know what C says about this case; in particular, whether the diagnostic is required.</p>\n"}], "owner": {"reputation": 693, "user_id": 1666237, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9ae31965f7351e2e8679156cf114b3a8?s=128&d=identicon&r=PG", "display_name": "Don Slowik", "link": "https://stackoverflow.com/users/1666237/don-slowik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 36048365, "answer_count": 1, "score": 0, "last_activity_date": 1458234123, "creation_date": 1458166970, "last_edit_date": 1458234123, "question_id": 36048089, "link": "https://stackoverflow.com/questions/36048089/localblock-function-decln-vs-defn-return-type-mismatch-diagnostic-in-c", "title": "Local(Block) function decln vs. defn return type mismatch; Diagnostic in C++?", "body": "<p>This program is in the file called localFunc.c:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n// int f(int);  // Global forward declaration.\n\nint main() {\n   int f(int);  // Local forward declaration.\n   printf(\"%d\\n\", f(1));\n}\n\ndouble f(int i) {\n   return 1.0;\n}\n</code></pre>\n\n<p>Compiling via <code>gcc localFunc.c</code> gives:</p>\n\n<pre><code>localFunc.c:10:8: error: conflicting types for \u2018f\u2019\n double f(int i) {\n        ^\nlocalFunc.c:6:7: note: previous declaration of \u2018f\u2019 was here\n    int f(int);  // Local forward declaration.\n</code></pre>\n\n<p>But compiled via <code>g++ localFunc.c</code>, there is no error and the result of running the executable is: <code>4195638</code>.</p>\n\n<p>Commenting out the Local forward declaration, and turning on the Global forward declaration of: <code>int f(int);</code>, both gcc and g++ give errors similar to the above, as expected(by me).</p>\n\n<p>So my question is, why does it appear that g++ is not seeing the conflicting types(ambiguous declaration) on locally declared functions?</p>\n\n<pre><code>don@HAL:~/UNIX/CS213$ gcc --version\ngcc (Ubuntu 5.2.1-22ubuntu2) 5.2.1 20151010\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458167034, "post_id": 36048072, "comment_id": 59744681, "body": "Why have you tagged this as <i>C</i>?"}, {"owner": {"reputation": 45, "user_id": 1003686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74dccd0de3e3bd2bfe9c383a1d628a4c?s=128&d=identicon&r=PG", "display_name": "TheCell", "link": "https://stackoverflow.com/users/1003686/thecell"}, "reply_to_user": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 0, "creation_date": 1458167146, "post_id": 36048072, "comment_id": 59744743, "body": "sorry thought this problem would be interchangeable between the two. Deleted the C tag."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458167250, "post_id": 36048072, "comment_id": 59744782, "body": "The language with classes is C++, not C. And there is no multidimensional array. A pointer is not even a 1D array."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458169893, "post_id": 36048072, "comment_id": 59745828, "body": "When passing a pointer to a multi-dimensional array to a function, the receiving function only gets a pointer to the first element.  All information about the dimensions is lost.  You will have to calculate the index yourself or use the correct syntax for passing an array."}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458170008, "post_id": 36048588, "comment_id": 59745872, "body": "The problem is that the receiving function has no idea on the capacities of the dimensions.  The evaluation of <code>arr[1][2][1]</code> is meaningless without the capacities of the dimensions.  The second dimension may have 5 elements, it may have 512."}, {"owner": {"reputation": 45, "user_id": 1003686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74dccd0de3e3bd2bfe9c383a1d628a4c?s=128&d=identicon&r=PG", "display_name": "TheCell", "link": "https://stackoverflow.com/users/1003686/thecell"}, "edited": false, "score": 0, "creation_date": 1458204452, "post_id": 36048588, "comment_id": 59758143, "body": "thanks for actually trying to answer and not just blaming :). Does this mean If I want to have a multidimensional array I need a pointer to a pointer wich then points to the array. I will also need a for loop to create the multi dimensional array (the arr_input method)? Or is it possible to create the array via <code>int myArr[3][3][3];</code>."}], "tags": [], "owner": {"reputation": 16, "user_id": 6074084, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-owMC6a79q8M/AAAAAAAAAAI/AAAAAAAAAB4/rRNbQ1l-msI/photo.jpg?sz=128", "display_name": "Asif Iqbal", "link": "https://stackoverflow.com/users/6074084/asif-iqbal"}, "is_accepted": true, "score": 0, "last_activity_date": 1458169231, "creation_date": 1458169231, "answer_id": 36048588, "question_id": 36048072, "link": "https://stackoverflow.com/questions/36048072/access-multidimensional-array-passed-to-function/36048588#36048588", "title": "Access multidimensional array passed to function", "body": "<p>Use pointer notation to access elements! Here is an example to access and use 2d array's pointer this program prints transpose of a matrix</p>\n\n<pre><code>#include&lt;iostream&gt;\nint **arr_input(int row, int col)\n{\n    int **arr;\n    arr = new int*[row];\n    for (int i = 0; i &lt; row; i++)        //array size\n    {\n        *(arr + i) = new int[col];\n    }\n    for (int i = 0; i &lt; row; i++)\n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            cin &gt;&gt; *(*(arr + i) + j);\n        }\n    }   //input array\n    return arr;\n}\n\n\nvoid transpose(int**arr, int row, int col)\n{\n    for (size_t i = 0; i &lt; row; i++)\n    {\n        for (size_t j = 0; j &lt; col; j++)\n        {\n            cout &lt;&lt; *(*(arr + j) + i) &lt;&lt; \"  \";      //pointer notation//\n        }   \n        cout &lt;&lt; endl;\n    }\n}\nvoid main(){\n          int row ,col,**ptr1;\n        cout &lt;&lt; \"Enter size of Square Matrix: \";    cin &gt;&gt; row; col = row;\n        cout &lt;&lt; \"\\n\\tEnter the elements of Matrix\\n\";\n        ptr1 = arr_input(row, col);    //calling array input function\n        cout &lt;&lt; \"\\nAdress of pointer is \" &lt;&lt; ptr1&lt;&lt;endl;\n        transpose(ptr1, row, col);  //calling transpose function\n        system(\"pause\");\n   }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 1003686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74dccd0de3e3bd2bfe9c383a1d628a4c?s=128&d=identicon&r=PG", "display_name": "TheCell", "link": "https://stackoverflow.com/users/1003686/thecell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 36048588, "answer_count": 1, "score": 0, "last_activity_date": 1458169231, "creation_date": 1458166907, "last_edit_date": 1495540772, "question_id": 36048072, "link": "https://stackoverflow.com/questions/36048072/access-multidimensional-array-passed-to-function", "title": "Access multidimensional array passed to function", "body": "<p>I am looking for a way to access a multidimensional Array that is passed via pointer. I followed the question here (<a href=\"https://stackoverflow.com/questions/1052818/create-a-pointer-to-two-dimensional-array\">Create a pointer to two-dimensional array</a>) to create my array and a pointer to it. I could even pass the pointer to the function, but I can't use the pointer to access the array values. What's the correct way to access the values inside the function.</p>\n\n<p>main.cpp:</p>\n\n<pre><code>MyArrayGenerator theArrGen = MyArrayGenerator();\nconst int size = 9;\nint generatorArray[size][size][10];\n\ntheArrGen.generateArray(size, generatorArray[size][size+1]);\n</code></pre>\n\n<p>The method in my class:</p>\n\n<pre><code>void MyArrayGenerator::generateArray(int size,int* pointerToMultiDimArr)\n{\n    int height = size + 1;\n    // this ptr points to the array address\n    int* ptr = pointerToMultiDimArr;\n    // not working:\n    ptr[1][1][1] = 123;\n}\n</code></pre>\n\n<p>this throws the compiler error <a href=\"https://msdn.microsoft.com/de-de/library/fhexbxk9.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/de-de/library/fhexbxk9.aspx</a> wich means that the pointer is not declared as array.</p>\n\n<p>I guess my method argument needs to change since it wants a pointer and does not know that it will be an array. My question is: How should the method argument look like and how do I access the array in my method after that. Later on I want the user to input the size of the multidimensional array and</p>\n\n<pre><code>    const int size = 9;\n</code></pre>\n\n<p>is just a placeholder</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "edited": false, "score": 0, "creation_date": 1458167132, "post_id": 36048052, "comment_id": 59744734, "body": "Care to explain the downvotes?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 5, "creation_date": 1458167426, "post_id": 36048052, "comment_id": 59744856, "body": "Probably from people that didn&#39;t want to read through the wall of text. Your entire post can be reduced to this sentence - <i>Is it possible to seed the <code>mt19937_64</code> engine in such a way that the same sequence is generated each time a program is run?</i>. The answer is yes, construct it by seeding it with the same value each time."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1458180865, "post_id": 36048052, "comment_id": 59749232, "body": "@user3728501: this is a very poorly written question. SO is about questions and answers, its not a forum, you should not post all the details of your job or even your project. Almost every &quot;chapter&quot; of your question is entirely irrelevant, only the TLDR part belongs on SO. If you write questions that people can&#39;t easily understand, then they can&#39;t easily be searched later by people needing help either. Which makes them bad questions for the purpose of SO."}], "answers": [{"tags": [], "owner": {"reputation": 17641, "user_id": 16800, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea1de76c4c343fc844135e18da8a80f1?s=128&d=identicon&r=PG", "display_name": "Guvante", "link": "https://stackoverflow.com/users/16800/guvante"}, "is_accepted": false, "score": 0, "last_activity_date": 1458167925, "creation_date": 1458167925, "answer_id": 36048320, "question_id": 36048052, "link": "https://stackoverflow.com/questions/36048052/c11-random-numbers-using-c11-random-number-support-library-generate-same-s/36048320#36048320", "title": "C++11: Random Numbers using C++11 Random Number Support Library, Generate Same Sequence Each Run", "body": "<p>You can either set the seed using <code>seed</code> or call the constructor that takes a seed. In either case ensure you are passing some constant such as <code>27423</code>.</p>\n"}], "owner": {"reputation": 9704, "user_id": 893254, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e4417c43fd253cd5b52e2dd709e34b44?s=128&d=identicon&r=PG&f=1", "display_name": "FreelanceConsultant", "link": "https://stackoverflow.com/users/893254/freelanceconsultant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1458207615, "creation_date": 1458166825, "last_edit_date": 1592644375, "question_id": 36048052, "link": "https://stackoverflow.com/questions/36048052/c11-random-numbers-using-c11-random-number-support-library-generate-same-s", "title": "C++11: Random Numbers using C++11 Random Number Support Library, Generate Same Sequence Each Run", "body": "<h1>Question</h1>\n<p>Is it possible to seed the <code>mt19937_64</code> engine in such a way that the same sequence is generated each time a program is run?</p>\n<p>I presume this is possible, as there is a seed function. However I don't know if this will do what I want it to, or will work as I expect, generating the same sequence each time.</p>\n"}, {"tags": ["c++", "c++11", "std-function", "stdbind"], "answers": [{"tags": [], "owner": {"reputation": 103812, "user_id": 320726, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/02041b18199678d1f02e6d5040dbb907?s=128&d=identicon&r=PG", "display_name": "6502", "link": "https://stackoverflow.com/users/320726/6502"}, "is_accepted": false, "score": 1, "last_activity_date": 1458166945, "creation_date": 1458166945, "answer_id": 36048081, "question_id": 36048029, "link": "https://stackoverflow.com/questions/36048029/pass-a-function-of-an-object-to-another-stdfunction-of-another-class/36048081#36048081", "title": "pass a function of an object to another std::function of another class", "body": "<p>You can use a lambda:</p>\n\n<pre><code>bar.testFunction = [&amp;foo1](int x){ return foo1.isEven(x); };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "is_accepted": false, "score": 3, "last_activity_date": 1458167179, "creation_date": 1458167179, "answer_id": 36048144, "question_id": 36048029, "link": "https://stackoverflow.com/questions/36048029/pass-a-function-of-an-object-to-another-stdfunction-of-another-class/36048144#36048144", "title": "pass a function of an object to another std::function of another class", "body": "<p><code>Foo::isEven</code> takes an argument which you'll be passing later, so you need to add a placeholder to indicate that unbound argument.</p>\n\n<pre><code>bar.testFunction = std::bind(&amp;Foo::isEven, &amp;foo1, std::placeholders::_1);\n</code></pre>\n\n<p>Or just use a lambda instead of <code>bind</code></p>\n\n<pre><code>bar.testFunction = [&amp;foo1](int x) { return foo1.isEven(x); };\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 512838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3229d6106c440bb3d527af6967dc20?s=128&d=identicon&r=PG", "display_name": "Solti", "link": "https://stackoverflow.com/users/512838/solti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 665, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458167258, "creation_date": 1458166706, "last_edit_date": 1458167258, "question_id": 36048029, "link": "https://stackoverflow.com/questions/36048029/pass-a-function-of-an-object-to-another-stdfunction-of-another-class", "title": "pass a function of an object to another std::function of another class", "body": "<p>What is the right way to pass a member function of one class to an <code>std::function</code> of another class?</p>\n\n<p>For example, the <code>Bar</code> below wants to store one function of a <code>Foo</code> object.</p>\n\n<pre><code>class Foo {\npublic:\n  Foo(int x) : data(x) {}\n  bool isEven(int y) { return (data + y) &amp; 0x01; }\n  int data;\n};\n\nclass Bar {\npublic:\n  std::function&lt;bool(int)&gt; testFunction;\n};\n\n\nint main() {\n  Foo foo1(1);\n  Bar bar;\n  bar.testFunction = std::bind(&amp;Foo::isEven, &amp;foo1);\n  if (bar.testFunction(3)) {\n    std::cout &lt;&lt; \"is even\" &lt;&lt; std::endl;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>This doesn't compile:</p>\n\n<pre><code>no match for 'operator=' (operand types are 'std::function&lt;bool(int)&gt;' and 'std::_Bind_helper&lt;false, bool (Foo::*)(int), Foo*&gt;::type {aka std::_Bind&lt;std::_Mem_fn&lt;bool (Foo::*)(int)&gt;(Foo*)&gt;}')**\n</code></pre>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "c++-standard-library", "library-design"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1458166698, "post_id": 36047944, "comment_id": 59744543, "body": "I&#39;m not sure I understand your complaint. Are you asking how you can package a distribution and an engine together? If yes, then you can use <a href=\"http://www.boost.org/doc/libs/release/doc/html/boost/variate_generator.html\" rel=\"nofollow noreferrer\"><code>boost::variate_generator</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "edited": false, "score": 0, "creation_date": 1458180310, "post_id": 36048705, "comment_id": 59749044, "body": "This makes sense. So, it&#39;s an optimization."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1458169770, "creation_date": 1458169770, "answer_id": 36048705, "question_id": 36047944, "link": "https://stackoverflow.com/questions/36047944/confusion-about-the-interface-design-of-c11-random-distributions/36048705#36048705", "title": "Confusion about the interface design of C++11 random distributions", "body": "<blockquote>\n  <p>In my opinion, despite the fact that it stores a default set of\n  distribution parameters, it is practically stateless.</p>\n</blockquote>\n\n<p>No, not necessarily. For example, if the underlying engine generates X random bits at a time, and <code>uniform_int_distribution</code> (with the given range) requires only Y random bits (where Y &lt; X), the implementation may choose as an optimization to store the remaining random bits for use later.</p>\n\n<p>Besides, you want to keep a uniform interface with things like <code>normal_distribution</code> (where many methods generate 2 random numbers at once, so you'd return one and store the other for the next invocation), and distributions where you'd want to precompute some parameters at construction time.</p>\n"}], "owner": {"reputation": 13218, "user_id": 1348273, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/IYjFG.jpg?s=128&g=1", "display_name": "Lingxi", "link": "https://stackoverflow.com/users/1348273/lingxi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 36048705, "answer_count": 1, "score": -2, "last_activity_date": 1458169770, "creation_date": 1458166382, "question_id": 36047944, "link": "https://stackoverflow.com/questions/36047944/confusion-about-the-interface-design-of-c11-random-distributions", "title": "Confusion about the interface design of C++11 random distributions", "body": "<p>Let's take <code>uniform_int_distribution</code> for example. In my opinion, despite the fact that it stores a default set of distribution parameters, it is practically stateless. As such, wouldn't it be better and more convenient to design it as a function template like</p>\n\n<pre><code>template &lt;class Engine, class IntType = int&gt;\nIntType uniform_int(Engine&amp; engine, IntType a = 0, IntType b = numeric_limits&lt;IntType&gt;::max());\n</code></pre>\n\n<p>Quite often, I find myself write something like</p>\n\n<pre><code>std::uniform_int_distribution&lt;int&gt; uniform_int(a, b);\n... = uniform_int(engine);\n</code></pre>\n\n<p>Or to compress it into a single line</p>\n\n<pre><code>... = std::uniform_int_distribution&lt;int&gt;(a, b)(engine);\n</code></pre>\n\n<p>Either way, this feels contrived and awkward. With a function interface, this can be done naturally as</p>\n\n<pre><code>... = std::uniform_int(engine, a, b);\n</code></pre>\n\n<p>You can still store a default set of distribution parameters if you like</p>\n\n<pre><code>auto my_uniform_int = std::bind(std::uniform_int&lt;int&gt;, placeholders::_1, a, b);\n</code></pre>\n\n<p>Am I missing something?</p>\n"}, {"tags": ["c++", "performance", "gpu", "tensorflow", "mxnet"], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 258834, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/73c433692510200ade41516f7dc7fd32?s=128&d=identicon&r=PG", "display_name": "luke", "link": "https://stackoverflow.com/users/258834/luke"}, "edited": false, "score": 0, "creation_date": 1458308820, "post_id": 36077298, "comment_id": 59816470, "body": "I attached a gist of the source. Thank you for the help. Is it safe to assume that the the second template argument of <code>TensorMap</code> is the kernel being applied? How do you know that it is <code>TensorPadding</code> and not <code>TensorAssign</code> for example?"}, {"owner": {"reputation": 421, "user_id": 5548115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMl5P.jpg?s=128&g=1", "display_name": "vrv", "link": "https://stackoverflow.com/users/5548115/vrv"}, "edited": false, "score": 1, "creation_date": 1458407634, "post_id": 36077298, "comment_id": 59851562, "body": "A few suggestions:  1) Try recloning from HEAD -- there were several improvements to padding in Eigen since March that should help with speed.  2) Convolutions are currently faster when using the best supported layout by CuDNN: NCHW is currently the best tensor layout.  <a href=\"https://github.com/soumith/convnet-benchmarks/blob/master/tensorflow/benchmark_alexnet.py#L18\" rel=\"nofollow noreferrer\">github.com/soumith/convnet-benchmarks/blob/master/tensorflow&zwnj;&#8203;/&hellip;</a> for an example of how you can specify the data format order for convolutions, max pooling, etc."}, {"owner": {"reputation": 764, "user_id": 258834, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/73c433692510200ade41516f7dc7fd32?s=128&d=identicon&r=PG", "display_name": "luke", "link": "https://stackoverflow.com/users/258834/luke"}, "reply_to_user": {"reputation": 421, "user_id": 5548115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMl5P.jpg?s=128&g=1", "display_name": "vrv", "link": "https://stackoverflow.com/users/5548115/vrv"}, "edited": false, "score": 0, "creation_date": 1458590456, "post_id": 36077298, "comment_id": 59919305, "body": "@vrv Recloning from HEAD results in a significant improvement in performance. Thanks! As for data_format I have updated my original post. I am looking into the slowdown. (fairly sure its the reduce on different dimensions.)"}], "tags": [], "owner": {"reputation": 156, "user_id": 5545462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6882029cc4f452fb8e181f49b6e850?s=128&d=identicon&r=PG", "display_name": "zfc", "link": "https://stackoverflow.com/users/5545462/zfc"}, "is_accepted": false, "score": 1, "last_activity_date": 1458281294, "creation_date": 1458281294, "answer_id": 36077298, "question_id": 36047937, "link": "https://stackoverflow.com/questions/36047937/maximize-tensorflow-multi-gpu-performance/36077298#36077298", "title": "Maximize tensorflow multi gpu performance", "body": "<p>It's a bit hard to diagnose your program's performance problem without seeing the code. Is it possible for us to read your test code somehow?</p>\n\n<p>TensorPadding showing on the top is a bit strange. I'd expect cudnn calls should be on the top of the profile. Anyway, showing us the test code will be helpful.</p>\n"}], "owner": {"reputation": 764, "user_id": 258834, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/73c433692510200ade41516f7dc7fd32?s=128&d=identicon&r=PG", "display_name": "luke", "link": "https://stackoverflow.com/users/258834/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1809, "favorite_count": 3, "answer_count": 1, "score": 11, "last_activity_date": 1458590077, "creation_date": 1458166337, "last_edit_date": 1458590077, "question_id": 36047937, "link": "https://stackoverflow.com/questions/36047937/maximize-tensorflow-multi-gpu-performance", "title": "Maximize tensorflow multi gpu performance", "body": "<p>I was wondering if anybody could advise on how to get peak performance out of tensorflow in a 4 GPU setting.</p>\n\n<p>As a test I created two of the same network (18 ish layer residual network with small filter banks (ranging from 16-128) on 32x32 inputs. Batch size 512, 128 per GPU.). One in MXNet and one I have modelled off of <a href=\"https://github.com/tensorflow/models/tree/master/inception\">the inception example</a>.</p>\n\n<p>My MXNet network can train at around 7k examples a second where tensorflow is only capable of 4.2k with dummy data and 3.7 with real data.</p>\n\n<p>(when running on 1 GPU the numbers are 1.2k examples a second vs 2.1k)</p>\n\n<p>In my experiment I have a few questions in hopes to speed things up.</p>\n\n<ol>\n<li><p>GPU utilization seems quite low when training. I noticed that in the tensorflow white paper there is support for running multiple streams on the same GPU. Is this possible in the public release?</p></li>\n<li><p>Is there anyway to perform multiple train operations in one execution of <code>session.run()</code>? Or have async execution? This would allow for weight updates to be done at the same time as the next batches forward pass? I have tried using 2 threads (both system and with <code>QueueRunners</code>'s), but this only resulted in a slowdown. MXNet is able to increase speeds by running weight updates on the CPU so that the gpu's can be used for the next batch.</p></li>\n<li><p>Will the new distributed run time get around some of these issues by letting me run more than one worker on a single machine?</p></li>\n<li><p>Is there something else that can be done?</p></li>\n</ol>\n\n<p>I know there are a number of similar questions here on stack overflow, but though my searching I couldn't find a solution to my problems that I have not already tried.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I did a little bit of CUDA profiling to see what the expensive kernels were. According to my run, 21.4% of the time is spent inside:</p>\n\n<pre><code>void Eigen::internal::EigenMetaKernel_NonVectorizable&lt;Eigen::TensorEvaluator\n&lt;Eigen::TensorAssignOp&lt;Eigen::TensorMap&lt;Eigen::Tensor&lt;float, int=4, int=1, long&gt;, int=16&gt;,\nEigen::TensorPaddingOp&lt;Eigen::array&lt;std::pair&lt;int, int&gt;,\nunsigned long=4&gt; const, Eigen::TensorMap&lt;Eigen::Tensor&lt;float const,\nint=4, int=1, long&gt;, int=16&gt; const &gt; const &gt; const, Eigen::GpuDevice&gt;, long&gt;(float, int=4)\n</code></pre>\n\n<p>and 20.0% of the time were spent in </p>\n\n<pre><code>void Eigen::internal::EigenMetaKernel_NonVectorizable&lt;Eigen::TensorEvaluator\n&lt;Eigen::TensorAssignOp&lt;Eigen::TensorMap&lt;Eigen::Tensor&lt;float, int=4, int=1, long&gt;, int=16&gt;,\nEigen::TensorBroadcastingOp&lt;Eigen::array&lt;int, unsigned long=4&gt;\nconst, Eigen::TensorMap&lt;Eigen::Tensor&lt;float const, int=4, int=1, long&gt;,\nint=16&gt; const &gt; const &gt; const, Eigen::GpuDevice&gt;, long&gt;(float, int=4)\n</code></pre>\n\n<p>Off of the Signature I am not exactly sure what these are doing. Do these make sense?</p>\n\n<p>In addition to this, the analysis reports low kernel concurrency, 0%, as expected.\nAnd Low compute utilization 34.9% (granted this includes start-up time and a little bit of python in train loop. Around 32 seconds total out of 91. This comes out to around 50% utilization inside tensorflow.)</p>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>I have attached a copy of the trimmed down <a href=\"https://gist.github.com/lukemetz/2072e9f7b3f2b9325e25\">source code</a>. In general though I am more concerned about question 1-3 and don't want to take too much of ever bodies time.</p>\n\n<p>In addition I am running on tensorflow built from: f07234db2f7b316b08f7df25417245274b63342a</p>\n\n<p><strong>Edit 3:</strong></p>\n\n<p>Updated to the most recent tensorflow (63409bd23facad471973b110df998782c0e19c06) same code, default data format (NHWC) and that seemed to speed this up a lot.\nOn fake data 6.7k-6.8k (thermal dependence I think?) examples a second 4gpu. 1gpu -- 2.0k examples a second.\nReal data performance is around 4.9k examples a second for 4gpu. 1gpu -- 1.7k examples a second.</p>\n\n<p><strong>Edit 4:</strong></p>\n\n<p>In addition I tried out switching data formats to BCHW. I made the conversion modelled off of <a href=\"https://github.com/soumith/convnet-benchmarks/blob/master/tensorflow/benchmark_googlenet.py\">Soumith's benchmarks</a>. The convolution parts were indeed faster, but batch norm appears to be messing everything up. With a <a href=\"https://gist.github.com/lukemetz/2072e9f7b3f2b9325e25#file-batchnorm_function-py\">naive implementation</a> (fixing axis, and making weights [1,C,1,1] instead of [C,]) I am only able to get 1.2k examples a second on 4 gpu (fake data). Where as with a transpose before and after the batch norm op I am able to get 6.2k examples a second (fake data). Still slower than the NHWC data_format.</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1458166851, "post_id": 36047874, "comment_id": 59744607, "body": "That <code>IStr::</code> prefixes look fishy. But apart from that, the error seems to be pointing you in the right direction -- it makes no sense to pass a member function reference/pointer to an <code>ostream</code>, since it has no way of knowing what instance to invoke that method on. <a href=\"http://ideone.com/RPdiyu\" rel=\"nofollow noreferrer\">Try making it static</a>."}, {"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1458166980, "post_id": 36047874, "comment_id": 59744660, "body": "@Cameron It&#39;s typo when writing this question. Yes. Sad. Is there workaround to make non-static manipulator suitable for me maybe.."}], "answers": [{"tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 1, "last_activity_date": 1458167112, "creation_date": 1458167112, "answer_id": 36048135, "question_id": 36047874, "link": "https://stackoverflow.com/questions/36047874/error-c3867-non-standard-syntax-use-to-create-a-pointer-to-member-when-u/36048135#36048135", "title": "&quot;Error C3867: non-standard syntax; use &#39;&amp;&#39; to create a pointer to member&quot; when using virtual stream manipulator", "body": "<p>You have written:</p>\n\n<pre><code>IStr * pStr = new MyStr();\npStr-&gt;beginMessage() &lt;&lt; \"Hello Wordl!\" &lt;&lt; pStr-&gt;endMessage;\n</code></pre>\n\n<p>while you should have written something similar to:</p>\n\n<pre><code>IStr * pStr = new MyStr();\npStr-&gt;beginMessage() &lt;&lt; \"Hello Wordl!\" &lt;&lt; pStr-&gt;endMessage(*pStream);\n</code></pre>\n\n<p>The difference here is in the (), which results in doing the function call instead of trying to pass a pointer to the function (which is most likely not your intent).</p>\n"}, {"comments": [{"owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "edited": false, "score": 0, "creation_date": 1458168207, "post_id": 36048160, "comment_id": 59745168, "body": "Your solution is great and works like a charm, and not &quot;dirty&quot; for interface part as well!"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1458167244, "creation_date": 1458167244, "answer_id": 36048160, "question_id": 36047874, "link": "https://stackoverflow.com/questions/36047874/error-c3867-non-standard-syntax-use-to-create-a-pointer-to-member-when-u/36048160#36048160", "title": "&quot;Error C3867: non-standard syntax; use &#39;&amp;&#39; to create a pointer to member&quot; when using virtual stream manipulator", "body": "<p>Use NVI, and have <code>endMessage()</code> return a (stateful) manipulator that calls the virtual function on the stream when streamed.</p>\n\n<pre><code>struct IStr\n{\n    // other stuff\n\n    private: \n    virtual std::ostream&amp; doBeginMessage() = 0;\n    virtual std::ostream&amp; doEndMessage(std::ostream&amp;) = 0;\n\n    struct EndManip{\n        IStr* istr;\n    };\n    friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; ss, EndManip em){\n        return em.istr-&gt;doEndMessage(ss);\n    }\n    public:\n    EndManip endMessage() { return {this}; }\n    std::ostream&amp; beginMessage() { return doBeginMessage(); }\n};\n</code></pre>\n\n<p>With this you'd do <code>pStr-&gt;beginMessage() &lt;&lt; \"Hello World!\" &lt;&lt; pStr-&gt;endMessage();</code>.</p>\n"}], "owner": {"reputation": 3213, "user_id": 3367446, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f849293d5517d4525ff6f47dc9d0486a?s=128&d=identicon&r=PG&f=1", "display_name": "Croll", "link": "https://stackoverflow.com/users/3367446/croll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6499, "favorite_count": 1, "accepted_answer_id": 36048160, "answer_count": 2, "score": 0, "last_activity_date": 1458167363, "creation_date": 1458166056, "last_edit_date": 1458167363, "question_id": 36047874, "link": "https://stackoverflow.com/questions/36047874/error-c3867-non-standard-syntax-use-to-create-a-pointer-to-member-when-u", "title": "&quot;Error C3867: non-standard syntax; use &#39;&amp;&#39; to create a pointer to member&quot; when using virtual stream manipulator", "body": "<p>In my code in Visual Studio 2015 i have interface:</p>\n\n<pre><code>struct IStr\n{\n    virtual std::ostream&amp; beginMessage() = 0;\n    virtual std::ostream&amp; endMessage(std::ostream&amp;) = 0;\n};\n</code></pre>\n\n<p>And i have a class that implements this interface, like this:</p>\n\n<pre><code>#include &lt;sstream&gt;\n\nstruct MyStr : public IStr\n{\n    std::stringstream m_stream;\n    std::ostream&amp; beginMessage() override { return m_stream; }\n    std::ostream&amp; endMessage(std::ostream&amp; ss) override { return std::endl(ss); }\n};\n</code></pre>\n\n<p>However, i am getting an error when trying to compile simple code:</p>\n\n<pre><code>IStr * pStr = new MyStr();\npStr-&gt;beginMessage() &lt;&lt; \"Hello Wordl!\" &lt;&lt; pStr-&gt;endMessage;\n</code></pre>\n\n<p>With message:</p>\n\n<pre><code>Error   C3867   \n'IStr::endMessage': non-standard syntax; use '&amp;' to create a pointer to member\n</code></pre>\n\n<p>I really like syntax i am trying to use. But is this possible? Maybe the problem is that my manipulator is virtual, or non-static?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "dll", "dllexport"], "comments": [{"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1458197114, "post_id": 36047824, "comment_id": 59754276, "body": "You have to export classes, not their methods. If interface differs then you may use something else like interfaces or base classes and factories. Moreover do not export standard library objects unless you&#39;re ready to big headaches"}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1458197268, "post_id": 36047824, "comment_id": 59754347, "body": "Side note: you&#39;re importing into a managed assembly...is it your library an assembly?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1458281297, "post_id": 36047824, "comment_id": 59799612, "body": "Start up the wizard of the IDE and generate a DLL project to get an example. That said, you are supposed to extract a minimal example, so your question is off topic. Think about it: Who cares about your implementations of multiple functions if not even one function behaves as expected?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6073533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_w7iNWS5Now/AAAAAAAAAAI/AAAAAAAAABA/adeiWNJWBdU/photo.jpg?sz=128", "display_name": "Ishan Tikku", "link": "https://stackoverflow.com/users/6073533/ishan-tikku"}, "edited": false, "score": 0, "creation_date": 1458240385, "post_id": 36054123, "comment_id": 59784520, "body": "Hey Ajay, appreciate the feedback and help! Just one quick point of clarification - what would &#39;forwarding the calls from helper to real&#39; look like in terms of code?   Also, if I do end up requiring it, where would I place that typedef?"}, {"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "reply_to_user": {"reputation": 11, "user_id": 6073533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_w7iNWS5Now/AAAAAAAAAAI/AAAAAAAAABA/adeiWNJWBdU/photo.jpg?sz=128", "display_name": "Ishan Tikku", "link": "https://stackoverflow.com/users/6073533/ishan-tikku"}, "edited": false, "score": 0, "creation_date": 1458279723, "post_id": 36054123, "comment_id": 59799019, "body": "I urge you to start coding. Without that you wont understand. For your clarification, let me further expand the answer."}], "tags": [], "owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1458280283, "last_edit_date": 1458280283, "creation_date": 1458199856, "answer_id": 36054123, "question_id": 36047824, "link": "https://stackoverflow.com/questions/36047824/c-dll-not-exporting-functions/36054123#36054123", "title": "C++ DLL not exporting functions", "body": "<p>Your code is confusing:</p>\n\n<pre><code>public class RegressionTrainer\n</code></pre>\n\n<p>Is this C++ or C#? Some other part of your code clearly shows it is C++. Therefore you must always put exact (or syntactically same) code.</p>\n\n<p>Back to your problem, you cannot export members of a class. You must export entire class from a DLL. </p>\n\n<p>Then issues start to begin. For one, you must expose (export or not, doesn't matter) all types the class uses (<code>pugi::xml_parse_result</code> for example). Then, you need to take care of different compilers versions (Even VC2015, various versions, debug/release, compiler settings etc). For example a <code>vector</code> on VC2015 debug build would be different from a release version. Service pack would complicate the problem. </p>\n\n<p>In short: Don't export entire class having data-members. Even if entire data is private, you will need to export entire class, so that client (consumer of DLL) can compile and link (to code) properly.</p>\n\n<p>So, what's the solution?</p>\n\n<p>Well, just export a helper class:</p>\n\n<pre><code>class DLL_EXPORT RegressionTrainerHelper\n{\n    RegressionTrainer* pCoreClass;\n};\n</code></pre>\n\n<p>Expose (export) all required methods (for the client) from this class. You'd just need to <strong>forward the calls from helper to real</strong> class.</p>\n\n<p>Now, you might wonder, you will need to export the underlying <strong>type RegressionTrainer</strong>, and you are back to same problem. </p>\n\n<p>Well, yes and no. If this helper class is being compiled within DLL, <code>RegressionTrainer</code> would be real thing. If not, just:</p>\n\n<pre><code>typedef int RegressionTrainer;\n</code></pre>\n\n<p>Pointer of anytype is of same size (32-bit or 64-bit). Hence the size of entire <strong>exported</strong> class would always match the size in DLL and in EXE.</p>\n\n<p><strong>EDIT</strong>\nFor example, there is a XML parser class, ParseXML, but it uses comlpex data members, you have a method <code>Parse</code>.</p>\n\n<pre><code>class ParseXML\n{\n// complex data members\n// some private OR public datamembers and functions, you dont want/need to export\npublic:\nvoid Parse(const char*); // or something different\n};\n</code></pre>\n\n<p>You would want to export only <code>Parse</code>, through helper class.</p>\n\n<pre><code>class DLL_EXPORT Exported_ParseXML\n{\nprivate:\nParseXML* pCoreXMLInstance;\npublic:\nExported_ParseXML()\n{\n  // implementation in CPP\n  pCoreXMLInstance = new ParseXML();\n}\n// The function!\nvoid Parse(const char* pData)\n{\n  // FORWARD\n  pCoreXMLInstance-&gt;Parse(pData);\n}\n</code></pre>\n\n<p>The client will simply use the exported class:</p>\n\n<pre><code>Exported_ParseXML parser;\nparser.Parse(\"XML-data\");\n</code></pre>\n\n<p>The server compiler (DLL) would see <code>ParseXML</code> as real class type. But the client (EXE, or other DLL), would need see <code>ParseXML</code> as <code>int</code>. You got to figure out this!</p>\n"}], "owner": {"reputation": 11, "user_id": 6073533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-_w7iNWS5Now/AAAAAAAAAAI/AAAAAAAAABA/adeiWNJWBdU/photo.jpg?sz=128", "display_name": "Ishan Tikku", "link": "https://stackoverflow.com/users/6073533/ishan-tikku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458280283, "creation_date": 1458165834, "question_id": 36047824, "link": "https://stackoverflow.com/questions/36047824/c-dll-not-exporting-functions", "title": "C++ DLL not exporting functions", "body": "<p>I'm developing a C++ library for export as a DLL in Visual Studio 2013 (C++ 11), and I'm running into a challenge where the library, once imported as an external dependency by another program, contains the classes that I wanted, but none of the functions of the classes are included.</p>\n\n<p><a href=\"http://i.stack.imgur.com/JZulk.png\" rel=\"nofollow\">View of classes within external dependency</a></p>\n\n<p>I have included one particular class that is supposed to be part of this DLL export.</p>\n\n<p>Here is my RegressionTrainer class header file:</p>\n\n<pre><code>#ifndef REGRESSION_TRAINER_H\n#define REGRESSION_TRAINER_H\n#include \"MachineLearning.h\"\n#pragma once\n\n#ifndef DLL_EXPORT\n#define DLL_EXPORT __declspec(dllexport)\n#endif\n\nusing namespace MachineLearning;\n\nnamespace MachineLearningTraining{\n\npublic class RegressionTrainer{\npublic:\n    DLL_EXPORT RegressionTrainer();\n    virtual DLL_EXPORT ~RegressionTrainer();\n\n    std::vector&lt;sample_type&gt; DLL_EXPORT getInputData();\n    std::vector&lt;double&gt; DLL_EXPORT getAugmentedOutputs();\n    std::vector&lt;double&gt; DLL_EXPORT getNonAugmentedOutputs();\nprotected:\n    pugi::xml_parse_result DLL_EXPORT setDataFile(pugi::xml_document &amp;doc, char* file_name);\n    void DLL_EXPORT setDataFolder(char* folder_name);\n    std::vector&lt;char*&gt; DLL_EXPORT findDataFiles();\n    char* data_folder;\n    std::vector&lt;char*&gt; file_names;\n    std::vector&lt;sample_type&gt; input_data;\n    /*\n    sample_type m;\n    m(0, 0) = 14.86;\n    m(1, 0) = 0.24;\n    */\n    std::vector&lt;double&gt; augmented_outputs;\n    std::vector&lt;double&gt; non_augmented_outputs;\n    pugi::xml_parse_result result;\n\n    void DLL_EXPORT setInputData();\n    void DLL_EXPORT setAugmentedOutputs();\n    void DLL_EXPORT setNonAugmentedOutputs();\n    virtual int DLL_EXPORT trainAugmentedModel();\n    virtual int DLL_EXPORT trainNonAugmentedModel();\n};\n}\n#endif\n</code></pre>\n\n<p>Here are the contents of MachineLearning.h:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;exception&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;dlib/svm.h&gt;\n#include \"pugixml.hpp\"\n\nnamespace MachineLearning{\n// Here we declare that our samples will be 2 dimensional column vectors.  \n    typedef dlib::matrix&lt;double, 3, 1&gt; sample_type;\n\n// Now we are making a typedef for the kind of kernel we want to use.  I picked the\n// radial basis kernel because it only has one parameter and generally gives good\n// results without much fiddling.\n    typedef dlib::radial_basis_kernel&lt;sample_type&gt; kernel_type;\n}\n</code></pre>\n\n<p>And here is my RegressionTrainer.cpp file:</p>\n\n<pre><code>#include \"Stdafx.h\"\n#include \"RegressionTrainer.h\"\n#include \"dirent.h\"\n\nusing namespace std;\nusing namespace dlib;\nusing namespace MachineLearning;\n\nnamespace MachineLearningTraining{\n\nRegressionTrainer::RegressionTrainer(){\n    file_names = findDataFiles();\n}\n\nRegressionTrainer::~RegressionTrainer(){\n\n}\n\npugi::xml_parse_result RegressionTrainer::setDataFile(pugi::xml_document &amp;doc, char *file_name){\n    return doc.load_file(file_name);\n}\n\nvoid RegressionTrainer::setDataFolder(char *folder_name){\n    data_folder = folder_name;\n}\n\nstd::vector&lt;char*&gt; RegressionTrainer::findDataFiles(){\n    DIR *dir;\n    struct dirent *ent;\n    std::vector&lt;char*&gt; file_names;\n    if ((dir = opendir(data_folder)) != NULL) {\n        /* print all the files and directories within directory */\n        while ((ent = readdir(dir)) != NULL) {\n            file_names.push_back(ent-&gt;d_name);\n        }\n        closedir(dir);\n    }\n    else {\n        /* could not open directory */\n        perror(\"Could not open directory\");\n    }\n    return file_names;\n}\n\nstd::vector&lt;sample_type&gt; RegressionTrainer::getInputData(){\n    return input_data;\n}\n\nstd::vector&lt;double&gt; RegressionTrainer::getAugmentedOutputs(){\n    return augmented_outputs;\n}\n\nstd::vector&lt;double&gt; RegressionTrainer::getNonAugmentedOutputs(){\n    return non_augmented_outputs;\n}\n\nvoid RegressionTrainer::setInputData(){\n    pugi::xml_document doc;\n\n    for (unsigned i = 0; i &lt; file_names.size(); i++){\n        setDataFile(doc, file_names[i]);\n        std::cout &lt;&lt; \"Load result: \" &lt;&lt; result.description() &lt;&lt; endl;\n\n        pugi::xml_node measures = doc.child(\"case\").child(\"measures\");\n\n        sample_type m;\n        int count = 0;\n\n        for (pugi::xml_node measure = measures.first_child(); measure; measure = measure.next_sibling()){\n            m(count, 0) = measure.text().as_double();\n            count++;\n        }\n        input_data.push_back(m);\n    }\n\n}\n\nvoid RegressionTrainer::setAugmentedOutputs(){\n    pugi::xml_document doc;\n    for (unsigned i = 0; i &lt; file_names.size(); i++){\n        setDataFile(doc, file_names[i]);\n        std::cout &lt;&lt; \"Load result: \" &lt;&lt; result.description() &lt;&lt; endl;\n\n        pugi::xml_node output = doc.child(\"case\").child(\"studyresults\").child(\"averageangledeviation\");\n        augmented_outputs.push_back(output.text().as_double());\n    }\n}\n\nvoid RegressionTrainer::setNonAugmentedOutputs(){\n    pugi::xml_document doc;\n    for (unsigned i = 0; i &lt; file_names.size(); i++){\n        setDataFile(doc, file_names[i]);\n        std::cout &lt;&lt; \"Load result: \" &lt;&lt; result.description() &lt;&lt; endl;\n\n        pugi::xml_node output = doc.child(\"case\").child(\"studyresults\").child(\"averageangledeviationAR\");\n            augmented_outputs.push_back(output.text().as_double());\n        }\n    }\n\n    int RegressionTrainer::trainAugmentedModel(){\n        return 0;\n    }\n\n    int RegressionTrainer::trainNonAugmentedModel(){\n        return 0;\n    }\n}\n</code></pre>\n\n<p>Would welcome any thoughts!</p>\n"}, {"tags": ["c++", "function-declaration"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 1, "creation_date": 1458165763, "post_id": 36047769, "comment_id": 59744116, "body": "<a href=\"http://stackoverflow.com/questions/2816293/passing-optional-parameter-by-reference-in-c\" title=\"passing optional parameter by reference in c\">stackoverflow.com/questions/2816293/&hellip;</a>"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1458165787, "post_id": 36047769, "comment_id": 59744125, "body": "Swap the order. Put the defaults to the end of the signature"}, {"owner": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 0, "creation_date": 1458165856, "post_id": 36047769, "comment_id": 59744152, "body": "You can&#39;t have boolean references."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 5, "creation_date": 1458165899, "post_id": 36047769, "comment_id": 59744172, "body": "@Poriferous - sure you can."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "reply_to_user": {"reputation": 1368, "user_id": 3878405, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd7fbf1b3f55fad1bb62300c97593fe5?s=128&d=identicon&r=PG&f=1", "display_name": "Poriferous", "link": "https://stackoverflow.com/users/3878405/poriferous"}, "edited": false, "score": 1, "creation_date": 1458166119, "post_id": 36047769, "comment_id": 59744274, "body": "@Poriferous I think you are confusing <code>bool</code> objects with bit-fields. You cannot have references to bit-fields, but a <code>bool</code> is at least as big as a <code>char</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2311, "user_id": 945391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9202d33eb022558d3e6d30f3fd42d0b2?s=128&d=identicon&r=PG", "display_name": "ssn", "link": "https://stackoverflow.com/users/945391/ssn"}, "edited": false, "score": 0, "creation_date": 1458166298, "post_id": 36047868, "comment_id": 59744365, "body": "I understand that. Let me rephrase my question. How do I initialise &#39;bool&amp;&#39; in: int Remove(Object <i>spl, Object1</i> parent, bool&amp; proceed, int num = 0, Object2* th = NULL           );"}], "tags": [], "owner": {"reputation": 3700, "user_id": 2573127, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J2n1Z.png?s=128&g=1", "display_name": "IceFire", "link": "https://stackoverflow.com/users/2573127/icefire"}, "is_accepted": false, "score": 1, "last_activity_date": 1458166448, "last_edit_date": 1458166448, "creation_date": 1458166039, "answer_id": 36047868, "question_id": 36047769, "link": "https://stackoverflow.com/questions/36047769/default-argument-for-bool-in-function-declaration/36047868#36047868", "title": "Default argument for &#39;bool&amp;&#39; in function declaration", "body": "<p>All function in C++ have to end with the default arguments. It is <em>not</em> possible to call your function like so:</p>\n\n<pre><code>Remove(someSpl, someParent, 10, /* no argument, use default */, someBool);\n</code></pre>\n\n<p>Since you cannot omit arguments in the middle, they have to wander to the end.</p>\n\n<p>Regarding the first comment clarifying the question, let me give a small example that should transfer fine to your application:</p>\n\n<pre><code>void changingBoolFunction(bool&amp; someBool)\n{\n    someBool = false;\n}\n\nbool changeableBool = true;\nchangingBoolFunction(someBool);\ncout &lt;&lt; (changeableBool ? \"true\" : \"false\"); // output: false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1458166492, "creation_date": 1458166492, "answer_id": 36047976, "question_id": 36047769, "link": "https://stackoverflow.com/questions/36047769/default-argument-for-bool-in-function-declaration/36047976#36047976", "title": "Default argument for &#39;bool&amp;&#39; in function declaration", "body": "<p>To clarify: that value for <code>th</code> is a <strong>default argument</strong>, not an initialization. And once you've put in a default argument every argument after that one has to have a default. It's unusual to have a default value for an argument that's passed by (modifiable) reference, but if that's what you really want, you have to provide a <code>bool</code> object for that default argument:</p>\n\n<pre><code>bool bool_value = true;\nint Remove(Object *spl, Object1* parent,\n           int num, Object2* th = NULL, bool&amp; proceed = bool_value\n          );\n</code></pre>\n\n<p>After the function returns, if it changed the value of <code>proceed</code> that change will show up in <code>bool_value</code>.</p>\n"}], "owner": {"reputation": 2311, "user_id": 945391, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/9202d33eb022558d3e6d30f3fd42d0b2?s=128&d=identicon&r=PG", "display_name": "ssn", "link": "https://stackoverflow.com/users/945391/ssn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1458166676, "creation_date": 1458165619, "last_edit_date": 1458166676, "question_id": 36047769, "link": "https://stackoverflow.com/questions/36047769/default-argument-for-bool-in-function-declaration", "title": "Default argument for &#39;bool&amp;&#39; in function declaration", "body": "<p>If I have a function declaration as follows:</p>\n\n<pre><code>int Remove(Object *spl, Object1* parent,\n           int num, Object2* th = NULL, bool&amp; proceed\n          );\n</code></pre>\n\n<p>I get an error that I need to declare 'proceed' becasue 'th' has a default argument. I understand why. But how do I make a default argument for a \"bool&amp;\" in function declaration?</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1458166070, "post_id": 36047804, "comment_id": 59744255, "body": "But if I add a copy constructor and pass an object on stack (not a ptr) via signal then the slot receives a copy am I correct ?"}, {"owner": {"reputation": 483, "user_id": 5775544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBB4o.jpg?s=128&g=1", "display_name": "Tony O", "link": "https://stackoverflow.com/users/5775544/tony-o"}, "reply_to_user": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "edited": false, "score": 0, "creation_date": 1458167089, "post_id": 36047804, "comment_id": 59744711, "body": "Just noticed that Analytis is struct, not class. If you&#39;ll define Analytics as class you&#39;ll get an error that copy constructor is private. QObjects not support copying by design, don&#39;t do this. Also you don&#39;t need to use Q_DECLARE_METATYPE for classes derived from QObject. Why do you want to do <code>Q_DECLARE_METATYPE(Analytics)</code> ?"}], "tags": [], "owner": {"reputation": 483, "user_id": 5775544, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uBB4o.jpg?s=128&g=1", "display_name": "Tony O", "link": "https://stackoverflow.com/users/5775544/tony-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1458165775, "creation_date": 1458165775, "answer_id": 36047804, "question_id": 36047711, "link": "https://stackoverflow.com/questions/36047711/using-default-generated-copy-constructor-with-q-declare-metatype/36047804#36047804", "title": "Using default generated copy constructor with Q_DECLARE_METATYPE", "body": "<p>From documentation:</p>\n\n<blockquote>\n  <p>QObject has neither a copy constructor nor an assignment operator.\n  This is by design. Actually, they are declared, but in a private\n  section with the macro Q_DISABLE_COPY(). In fact, all Qt classes\n  derived from QObject (direct or indirect) use this macro to declare\n  their copy constructor and assignment operator to be private. The\n  reasoning is found in the discussion on Identity vs Value on the Qt\n  Object Model page.</p>\n</blockquote>\n\n<p>So you can't copy QObjects and classes derived from QObject. If you want to use signals and slots mechanism with QObjects, use pointers instead.</p>\n"}], "owner": {"reputation": 3558, "user_id": 4589819, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d29fd6d2f29e22c18d200b5108b2ed99?s=128&d=identicon&r=PG&f=1", "display_name": "James Franco", "link": "https://stackoverflow.com/users/4589819/james-franco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1506232515, "creation_date": 1458165343, "last_edit_date": 1506232515, "question_id": 36047711, "link": "https://stackoverflow.com/questions/36047711/using-default-generated-copy-constructor-with-q-declare-metatype", "title": "Using default generated copy constructor with Q_DECLARE_METATYPE", "body": "<p>Suppose I have this custom class</p>\n\n<pre><code>struct Analytics : public QObject\n{\n  Q_OBJECT\n\n  public:\n  int a  = 12;\n\n  Analytics(const Analytics&amp; a) {\n  }\n\n  Analytics(){\n  }\n\n};\n\nQ_DECLARE_METATYPE(Analytics)\n</code></pre>\n\n<p>The above works fine. However I have to supply my own copy constructor.\nI tried this using the default generated copy contructor however I get the error </p>\n\n<p>struct Analytics : public QObject\n    {\n      Q_OBJECT</p>\n\n<pre><code>  public:\n  int a  = 12;\n\n  Analytics(const Analytics&amp; a) = default;\n\n  Analytics(){\n  }\n\n};\n\nQ_DECLARE_METATYPE(Analytics)\n</code></pre>\n\n<p>this is the error that I get</p>\n\n<pre><code>  5: error: call to implicitly-deleted copy constructor of 'Analytics'\n                return new (where) T(*static_cast&lt;const T*&gt;(t));\n</code></pre>\n\n<p>Is it possible to use Q_DECLARE_METATYPE with default generated copy constructor.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1458165144, "post_id": 36047624, "comment_id": 59743833, "body": "Is the data file in the same directory as where you run the executable from?"}, {"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 3, "creation_date": 1458165214, "post_id": 36047624, "comment_id": 59743865, "body": "PS: Why not check if you successfully opened the file?"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 3, "creation_date": 1458165237, "post_id": 36047624, "comment_id": 59743879, "body": "Try outputting an error if <code>inFile.is_open()</code> returns false after you open the file.  Either the file isn&#39;t where your program is looking (current working directory), or the file is locked or does not have read permission.  Or it doesn&#39;t contain any non-whitespace characters ;)"}, {"owner": {"reputation": 259, "user_id": 2898736, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/pmVNS.jpg?s=128&g=1", "display_name": "andres", "link": "https://stackoverflow.com/users/2898736/andres"}, "edited": false, "score": 0, "creation_date": 1458165707, "post_id": 36047624, "comment_id": 59744082, "body": "This <a href=\"https://www.cs.bu.edu/teaching/cs111/spring-2000/file-io/\" rel=\"nofollow noreferrer\">link</a> may be helpful to you."}, {"owner": {"reputation": 3, "user_id": 6030808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2558313ccb4826316cb8f0d1bb2aedc?s=128&d=identicon&r=PG&f=1", "display_name": "j.feld", "link": "https://stackoverflow.com/users/6030808/j-feld"}, "edited": false, "score": 0, "creation_date": 1458177159, "post_id": 36047624, "comment_id": 59748118, "body": "lol the default directory is buried somewhere in xcode library. for any xcode users coming across this same problem, right click on the .exe file in the &quot;products&quot; folder on your browser, open it and save your file to this directory."}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 5892996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49d0d9646914d7411668abc15e37316d?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/5892996/riccardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1458224386, "creation_date": 1458224386, "answer_id": 36063263, "question_id": 36047624, "link": "https://stackoverflow.com/questions/36047624/cant-input-file-into-c-program/36063263#36063263", "title": "can&#39;t input file into c++ program", "body": "<p>I try to use your code and it works well if you put the file A3Q2.dat not in the same directory of your *.exe but in another directory (also of the same project). However I suggest you to take a look on the code below to have a correct usage of exception.</p>\n\n<pre><code>// new variables\nstring fileName = \"..//A3Q2.dat\";\nifstream inFile(fileName);\nstring inputString;\n\ntry\n{\n    while (getline(inFile, inputString))\n    {\n        cout &lt;&lt; inputString;\n    }\n    cin &gt;&gt; inputString;\n\n    inFile.close();\n}\ncatch (exception ex)\n{\n    cout &lt;&lt; ex.what();\n}\n\nreturn 0;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6030808, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a2558313ccb4826316cb8f0d1bb2aedc?s=128&d=identicon&r=PG&f=1", "display_name": "j.feld", "link": "https://stackoverflow.com/users/6030808/j-feld"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1458224386, "creation_date": 1458164965, "question_id": 36047624, "link": "https://stackoverflow.com/questions/36047624/cant-input-file-into-c-program", "title": "can&#39;t input file into c++ program", "body": "<p>oof my brain hurts. i've been following the documentation and i still can't get this to work. string \"inputString\" returns nothing when the program runs. yes, the file \"A3Q2.dat\" is in the same directory as main.cpp. oh yeah and std namespace is a requirement for my class, otherwise i wouldn't use it. thank you!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n\n    // new variables\n\n    ifstream inFile;\n    string fileName = \"A3Q2.dat\";\n    string inputString;\n\n    // Query user\n\n    inFile.open(fileName.c_str(), ifstream::in);\n\n    inFile &gt;&gt; inputString;\n\n    cout &lt;&lt; inputString;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "openbr"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 4254290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f3aebf88c4b8136abd316d78ece223f?s=128&d=identicon&r=PG&f=1", "display_name": "Sn&#230;bj&#246;rn Valur Lilliendahl", "link": "https://stackoverflow.com/users/4254290/sn%c3%a6bj%c3%b6rn-valur-lilliendahl"}, "is_accepted": false, "score": 0, "last_activity_date": 1467767817, "creation_date": 1467767817, "answer_id": 38215103, "question_id": 36047569, "link": "https://stackoverflow.com/questions/36047569/how-to-run-c-files-in-openbr/38215103#38215103", "title": "How to run C++ files in OpenBR?", "body": "<p>To run the example files you first have to download the dataset. The scripts/downloadDatasets.sh is in the openbr directory.</p>\n\n<p>In the qt interface after opening the upmost CMakeList and building openbr you can select what to run on the bottom of the left toolbar, and then click the \"play\" arrow below to run the executable.</p>\n"}], "owner": {"reputation": 165, "user_id": 2700875, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/3217149/picture?type=large", "display_name": "Xelad1", "link": "https://stackoverflow.com/users/2700875/xelad1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467767817, "creation_date": 1458164741, "question_id": 36047569, "link": "https://stackoverflow.com/questions/36047569/how-to-run-c-files-in-openbr", "title": "How to run C++ files in OpenBR?", "body": "<p>Sorry if the documentation is clear on this, but I'm having a hard time running C++ files in OpenBR. I've tried running them through the terminal via g++ and via the QT interface to no avail.</p>\n\n<p>Ultimately I don't see any way to create (nuanced) custom OpenBR scripts than by using the C++ API, but I can't even run the provided demos (age_estimation.cpp, face_recognition.cpp etc.).</p>\n\n<p>I'm running this on Ubuntu for reference.</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 155, "user_id": 5726763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51cc46d5a1e782673c9f032039f1c9ac?s=128&d=identicon&r=PG&f=1", "display_name": "penguina", "link": "https://stackoverflow.com/users/5726763/penguina"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1458164903, "post_id": 36047566, "comment_id": 59743714, "body": "O yes, but I do not understand that minus (-)"}], "answers": [{"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1458165138, "creation_date": 1458165138, "answer_id": 36047660, "question_id": 36047566, "link": "https://stackoverflow.com/questions/36047566/lower-bound-in-c-minus-vector/36047660#36047660", "title": "lower_bound in C++ minus vector", "body": "<p>I think your description is wrong, and <code>prim</code> is an iterator or a pointer rather than a vector.</p>\n\n<p>This line is taking the return value of <code>lower_bound</code>, which is the same type as the iterator, and subtracting that iterator. That gives you an index into the container that <code>prim</code> refers to.</p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 5726763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51cc46d5a1e782673c9f032039f1c9ac?s=128&d=identicon&r=PG&f=1", "display_name": "penguina", "link": "https://stackoverflow.com/users/5726763/penguina"}, "edited": false, "score": 0, "creation_date": 1458165345, "post_id": 36047678, "comment_id": 59743922, "body": "Ok, thank you @agnis!"}], "tags": [], "owner": {"reputation": 121, "user_id": 3193797, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001282840206/picture?type=large", "display_name": "Agnis", "link": "https://stackoverflow.com/users/3193797/agnis"}, "is_accepted": true, "score": 0, "last_activity_date": 1458165202, "creation_date": 1458165202, "answer_id": 36047678, "question_id": 36047566, "link": "https://stackoverflow.com/questions/36047566/lower-bound-in-c-minus-vector/36047678#36047678", "title": "lower_bound in C++ minus vector", "body": "<p>You should start with reading what the function lower_bound does: <a href=\"http://www.cplusplus.com/reference/algorithm/lower_bound/\" rel=\"nofollow\">http://www.cplusplus.com/reference/algorithm/lower_bound/</a></p>\n\n<p>In this case for each element v[i] in vector v[] we find a vector's prim[] index k with lowest value where prim[k]>=val[i].</p>\n"}], "owner": {"reputation": 155, "user_id": 5726763, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51cc46d5a1e782673c9f032039f1c9ac?s=128&d=identicon&r=PG&f=1", "display_name": "penguina", "link": "https://stackoverflow.com/users/5726763/penguina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "closed_date": 1458251122, "accepted_answer_id": 36047678, "answer_count": 2, "score": -3, "last_activity_date": 1458166220, "creation_date": 1458164727, "last_edit_date": 1458166220, "question_id": 36047566, "link": "https://stackoverflow.com/questions/36047566/lower-bound-in-c-minus-vector", "closed_reason": "Needs details or clarity", "title": "lower_bound in C++ minus vector", "body": "<p>What does the following code do?</p>\n\n<pre><code>for (i = 1; i &lt;= n; i++)\n    v[i] = std::lower_bound(prim+1, prim+h+1, val[i]) - prim;\n</code></pre>\n\n<p>Where <code>prim</code>,<code>v</code> and <code>val</code> are vectors of integers.</p>\n"}, {"tags": ["c++", "ios", "xcode", "linker", "dlib"], "comments": [{"owner": {"reputation": 2552, "user_id": 5360912, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/gfQGt.png?s=128&g=1", "display_name": "TinyTheBrontosaurus", "link": "https://stackoverflow.com/users/5360912/tinythebrontosaurus"}, "edited": false, "score": 0, "creation_date": 1458171205, "post_id": 36047481, "comment_id": 59746308, "body": "So, to clarify where dlib is, is queue.h in EmoTrain/queue.h or in EmoTrain/dlib/queue.h?"}, {"owner": {"reputation": 177, "user_id": 5228544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-UYr890RiX3I/AAAAAAAAAAI/AAAAAAAAKGs/bUkXxmhF85s/photo.jpg?sz=128", "display_name": "Christina Tsangouri", "link": "https://stackoverflow.com/users/5228544/christina-tsangouri"}, "reply_to_user": {"reputation": 2552, "user_id": 5360912, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/gfQGt.png?s=128&g=1", "display_name": "TinyTheBrontosaurus", "link": "https://stackoverflow.com/users/5360912/tinythebrontosaurus"}, "edited": false, "score": 0, "creation_date": 1458187191, "post_id": 36047481, "comment_id": 59750836, "body": "in EmoTrain/dlib/queue.h @TinyTheBrontosaurus"}], "answers": [{"tags": [], "owner": {"reputation": 2482, "user_id": 856925, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/3j9uM.jpg?s=128&g=1", "display_name": "Kaolin Fire", "link": "https://stackoverflow.com/users/856925/kaolin-fire"}, "is_accepted": false, "score": 0, "last_activity_date": 1467052761, "creation_date": 1467052761, "answer_id": 38060983, "question_id": 36047481, "link": "https://stackoverflow.com/questions/36047481/linking-dlib-to-xcode/38060983#38060983", "title": "Linking dlib to Xcode", "body": "<p>There's two things to be sure of. </p>\n\n<p>1) there is a \"dlib\" directory inside of the directory you are attaching\n2) the project is not set to search recursively.</p>\n\n<p>So if your header search path is \"/Users/Christina/Desktop/ccvl/ios/EmoTrain/\", and queue.h is \"/Users/Christina/Desktop/ccvl/ios/EmoTrain/dlib/queue.h\", then...double check your header search path is not \"/Users/Christina/Desktop/ccvl/ios/EmoTrain/**\".</p>\n\n<p>I suppose a third thing to be sure of is you don't accidentally have the headers included in two different ways, the <em>other</em> of which might be backfiring on you. ;)</p>\n"}], "owner": {"reputation": 177, "user_id": 5228544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-UYr890RiX3I/AAAAAAAAAAI/AAAAAAAAKGs/bUkXxmhF85s/photo.jpg?sz=128", "display_name": "Christina Tsangouri", "link": "https://stackoverflow.com/users/5228544/christina-tsangouri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 906, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1467052761, "creation_date": 1458164401, "question_id": 36047481, "link": "https://stackoverflow.com/questions/36047481/linking-dlib-to-xcode", "title": "Linking dlib to Xcode", "body": "<p>I'm trying to link dlib to iOS project. I have generated a libdlib.a file and successfully added it to my project. When adding to Header Search Paths under build settings the directory of the dlib folder which is /Users/Christina/Desktop/ccvl/ios/EmoTrain/. When trying to build I get the following error:</p>\n\n<p><em>You should NOT add the dlib folder itself to your compiler's include path. \n  Doing so will cause the build to fail because of name collisions (such as \n  dlib/string.h and string.h from the standard library). Instead you should \n  add the folder that contains the dlib folder to your include search path \n  and then use include statements of the form #include  or\n  #include \"dlib/queue.h\".</em> </p>\n\n<p>This is exactly what I'm doing though, as the folder that contains dlib is EmoTrain.  Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458164622, "post_id": 36047446, "comment_id": 59743607, "body": "ostream creates the file automatically if it doesn&#39;t exist. So writing to a file even if the user didn&#39;t want to doesn&#39;t make sense"}, {"owner": {"reputation": 123, "user_id": 5464963, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-s76WJsTM9Lg/AAAAAAAAAAI/AAAAAAAAHmw/NcqBW_YQIZo/photo.jpg?sz=128", "display_name": "That guy", "link": "https://stackoverflow.com/users/5464963/that-guy"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458164682, "post_id": 36047446, "comment_id": 59743633, "body": "As you just answered, I saw that on a library reference on cpluscplus.com  And you have no idea how ashamed I am right now."}, {"owner": {"reputation": 1719, "user_id": 2590568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uRtGx.jpg?s=128&g=1", "display_name": "Colin Pitrat", "link": "https://stackoverflow.com/users/2590568/colin-pitrat"}, "edited": false, "score": 0, "creation_date": 1458164731, "post_id": 36047446, "comment_id": 59743647, "body": "Why <code>while (file_result.fail())</code> ? You want just an <code>if</code> as far as I understand. Then you need to read user input, probably something like <code>char answer; cin &gt;&gt; answer;</code> and take action depending on it. But that&#39;s assuming you reach this code, as you didn&#39;t even describe what your issue is (i.e what is the current result you obtain)."}, {"owner": {"reputation": 123, "user_id": 5464963, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-s76WJsTM9Lg/AAAAAAAAAAI/AAAAAAAAHmw/NcqBW_YQIZo/photo.jpg?sz=128", "display_name": "That guy", "link": "https://stackoverflow.com/users/5464963/that-guy"}, "edited": false, "score": 0, "creation_date": 1458164931, "post_id": 36047446, "comment_id": 59743728, "body": "My intention was to double check the user. If what they typed in didn&#39;t exist, it would just be made. So what I get right now is a file that the computer thinks is made.  But yeah I literally just did an ostream, and everything worked as i intended."}], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 5464963, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-s76WJsTM9Lg/AAAAAAAAAAI/AAAAAAAAHmw/NcqBW_YQIZo/photo.jpg?sz=128", "display_name": "That guy", "link": "https://stackoverflow.com/users/5464963/that-guy"}, "edited": false, "score": 0, "creation_date": 1458164952, "post_id": 36047551, "comment_id": 59743737, "body": "Thanks! Using ofstream did what I wanted!"}], "tags": [], "owner": {"reputation": 121, "user_id": 3193797, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001282840206/picture?type=large", "display_name": "Agnis", "link": "https://stackoverflow.com/users/3193797/agnis"}, "is_accepted": false, "score": 2, "last_activity_date": 1458164681, "creation_date": 1458164681, "answer_id": 36047551, "question_id": 36047446, "link": "https://stackoverflow.com/questions/36047446/how-to-have-a-text-file-created-based-on-user-input-c/36047551#36047551", "title": "How to have a text file created based on user input C++", "body": "<p>You can open a file for writting (in append mode) in this way:    </p>\n\n<pre><code>std::ofstream ofs;\nofs.open (output.c_str(), std::ofstream::out | std::ofstream::app);\nofs &lt;&lt; \" more lorem ipsum\";\nofs.close();\n</code></pre>\n\n<p>More information about file operations can be found here:\n<a href=\"http://www.cplusplus.com/reference/fstream/ofstream/open/\" rel=\"nofollow\">http://www.cplusplus.com/reference/fstream/ofstream/open/</a></p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "is_accepted": true, "score": 1, "last_activity_date": 1458165152, "creation_date": 1458165152, "answer_id": 36047666, "question_id": 36047446, "link": "https://stackoverflow.com/questions/36047446/how-to-have-a-text-file-created-based-on-user-input-c/36047666#36047666", "title": "How to have a text file created based on user input C++", "body": "<p>The most basic way to create a file based off of user input is this, You should how ever include checks to make sure the path is valid and that no file exists etc.. I only have time to show you how to do this.</p>\n\n<pre><code>#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n\nint main()\n{  \n  ofstream outFile;\n  string path;\n  cout &lt;&lt; \"Please enter the full path for your file: \";\n  getline(cin, path);\n  outFile.open(path);\n\n  return 0;\n}\n</code></pre>\n\n<p>What's happening here is quite simple the user inputs the full path (C:\\Hello.txt) it's read by getline(cin, path) and is stored in path.</p>\n\n<p>outfile then creates that file.</p>\n\n<p>Please make sure you add checks to validate no file with that name already exists etc.. I'll update this later with a better example but this will create a file for you</p>\n"}], "owner": {"reputation": 123, "user_id": 5464963, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-s76WJsTM9Lg/AAAAAAAAAAI/AAAAAAAAHmw/NcqBW_YQIZo/photo.jpg?sz=128", "display_name": "That guy", "link": "https://stackoverflow.com/users/5464963/that-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2752, "favorite_count": 0, "accepted_answer_id": 36047666, "answer_count": 2, "score": -3, "last_activity_date": 1458165152, "creation_date": 1458164281, "question_id": 36047446, "link": "https://stackoverflow.com/questions/36047446/how-to-have-a-text-file-created-based-on-user-input-c", "title": "How to have a text file created based on user input C++", "body": "<p>I'm fairly new to C++. I'm creating a code that will input a file and output the results in an output file, and using stacks and junk. </p>\n\n<p>But what i want to do is create a file based on a user input. Asking the user (when a file doesn't exist in a specific directory) if they would like to create that empty file. I've done this on C# using Directory and Dictionary, but C++ isn't really clicking for me. Here's the snippet of my code (I'm not going to paste 200+ lines for one thing) and where i want to do. Ignore the comments. It's just to keep track of what I'm doing.</p>\n\n<pre><code>if (file.is_open()) //if the file is open (and works)\n{\nstring output;\ncout &lt;&lt; \"Please enter the full directory of  the file you would like to have the results in\" &lt;&lt; endl;\ncin &gt;&gt; output;\noutput.c_str();\nfile_result.open(output); //open the results file for checking answers \nwhile (file_result.fail())\n{\ncout &lt;&lt; \"This file does not exist. Would you like to make one?\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>As you see, where I ask the user if they would like to make that file is where i would want this to be.</p>\n\n<p>Any help would be lovely! Transitioning from C# to C++ was a bad idea.</p>\n"}, {"tags": ["c++", "memory-management", "vector", "mpi"], "comments": [{"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458164466, "post_id": 36047425, "comment_id": 59743515, "body": "The digit <code>1</code> in a plain text file takes up one byte, but <code>int a = 1;</code> probably takes up four bytes of memory. Just one reason."}, {"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458164598, "post_id": 36047425, "comment_id": 59743598, "body": "@JonathanPotter Hi Jonathan, does that mean a four digit number 1234 in the file takes same amount of memory as int a=1234; ?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1458164622, "post_id": 36047425, "comment_id": 59743608, "body": "The code may be fragmenting the heap. Try pre-allocating space when you create a <code>vector</code> object: <code>std::vector&lt;int&gt; newRow(best_guess);</code> etc., where <code>best_guess</code> is a guess at the number of elements that are going to go in."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458165773, "post_id": 36047425, "comment_id": 59744119, "body": "@IanLi , assuming typical ASCII encoding and a 32 bit <code>int</code>, yes. 4 characters will be 4 bytes and an <code>int</code> will be 4 bytes. You might also have a 64 bit (8 byte) <code>int</code> depending on your platform and compiler options."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458166626, "post_id": 36047425, "comment_id": 59744517, "body": "Off topic: since you are using MPI I assume you&#39;re aiming for speed. Because a <code>vector</code> of <code>vector</code>s is not contiguous storage (each <code>vector</code> points to its own allocated block of memory) you may be taking a performance penalty when you traverse from one vector to the next. If every row in your your data is the same length you can allocate a 1D array and fake the 2D indexing with <code>row * numberColumns + column</code>. This keeps all of your data in one big block and makes it easy for the CPU to predict and cache."}, {"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458167204, "post_id": 36047425, "comment_id": 59744766, "body": "@user4581301 Interesting thought on storing them in a single line! do you by chance know if calculating row * numberColumns + column will be slow since it&#39;s doing calculation? or is that fast enough and we can ignor it ?"}, {"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1458167350, "post_id": 36047425, "comment_id": 59744824, "body": "@PeteBecker I added this  if(matrix.size()==0){                       std::vector&lt;int&gt; newRow;                   }                   else{                       std::vector&lt;int&gt; newRow(matrix[0].size());                   } But I don&#39;t see improvement on memory used. I&#39;m assuming it&#39;s because the vector is too small?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458168502, "post_id": 36047425, "comment_id": 59745291, "body": "It&#39;s one of those depends things. <code>vec[x][y]</code> winds up looking something like <code>(vec.array + x)-&gt;array + y</code>, so you are trading a pointer dereference for a multiplication. If you have lots of really short rows the calculation is insignificant compared to the increased cache misses. If you have long rows, you won&#39;t see as much of an improvement and maybe you will lose versus taking a reference to the row and accessing it as a 1D vector. Have to profile it to find out for sure."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "edited": false, "score": 0, "creation_date": 1458168677, "post_id": 36047425, "comment_id": 59745355, "body": "@IanLi Have a look at <a href=\"http://stackoverflow.com/a/15799557/1553090\">this answer</a> I wrote a while ago for someone dealing with vector-of-vector matrices.  I provided an alternative simple class that stores the data contiguously.  It does require that each row in your matrix is the same length, however.  If you used the pooling approach suggested in my answer here, you could easily check that each row is the same length when reading, and then construct my <code>SimpleMatrix</code> class accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458166800, "post_id": 36047862, "comment_id": 59744585, "body": "what do you mean by &quot;creating a more memory-efficient 2D structure&quot;? should I just use a 3D deque in this case or faster insertion? And thanks for the reading file twice tip! I&#39;m not sure how long is it going to take to go through a file with 10million lines, I&#39;ll have to test it out!"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458167464, "post_id": 36047862, "comment_id": 59744872, "body": "I meant some kind of structure where you can preallocate.  Matrices do not lend themselves to vector-of-vector because they are rectangular.  Whereas vector-of-vector can have arbitrary row lengths for each row."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458167530, "post_id": 36047862, "comment_id": 59744898, "body": "I&#39;ve added some example code for a way that might be more efficient for reading vector-of-vector data.  I used <code>deque</code> structures as a simple memory pool - holding temporary information about a matrix before adding it, then being recycled.  Completely untested.  Haven&#39;t tried compiling or anything."}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458167888, "post_id": 36047862, "comment_id": 59745032, "body": "Oh, and I just realised the pool containers should be <code>vector</code>, since <code>vector::clear</code> is guaranteed not to release the memory.  I&#39;m not sure the same is true of <code>deque</code>."}, {"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458227506, "post_id": 36047862, "comment_id": 59775538, "body": "Thanks a lot, this and the template really helped me to figure things out, I&#39;ll play around it and see!"}, {"owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "reply_to_user": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458248021, "post_id": 36047862, "comment_id": 59789038, "body": "You&#39;re welcome.  Drop a comment in here with your final result.  Curious to know how you get on."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 3, "last_activity_date": 1458168813, "last_edit_date": 1495539919, "creation_date": 1458166018, "answer_id": 36047862, "question_id": 36047425, "link": "https://stackoverflow.com/questions/36047425/c-read-file-and-store-integer-in-vectors-ends-up-taking-around-5-time-more-re/36047862#36047862", "title": "c++ read file and store integer in vectors. ends up taking around 5 time more resident memory than actual file size", "body": "<p>Vector-of-vector-of-vector is not an efficient structure to use.  You have memory overheads of the vector classes themselves, plus the standard behaviour of <code>push_back</code>.</p>\n\n<p>A <code>vector</code> will grow its memory exponentially when it needs to resize after <code>push_back</code>, in order to meet time complexity requirements.  If your vector capacity is currently 10 values, and you add 11 values, then it will most likely resize its capacity to 20 values.</p>\n\n<p>A side-effect of this growth is potential memory fragmentation.  Vector memory is defined to be contiguous.  The standard allocators do not have a <code>realloc</code> ability, as in C.  So, they must allocate more memory elsewhere, move the data, and free the old storage.  This can leave holes in memory that your program can't use for anything else.  Not to mention reduce cache locality of your data, leading to poor performance.</p>\n\n<p>You would be better off creating a more memory-efficient 2D structure for your matrices, and then push them on to a <code>deque</code> instead of <code>vector</code>.  <a href=\"https://stackoverflow.com/a/15799557/1553090\">Here's one I prepared earlier ;)</a>.  At the very least, if you <em>must</em> use vector-of-vector for the matrix, then pre-allocate it using <code>vector::reserve</code>.</p>\n\n<p>If memory is more important to you than I/O, then it's not out of the question to read the file twice.  The first time around, you obtain information about matrix sizes and row lengths.  Then you pre-allocate all your structures, and read the file again.</p>\n\n<p>Otherwise, using some kind of temporary pool to store your values for a matrix would be acceptable:</p>\n\n<pre><code>std::deque&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; matrices;\nstd::vector&lt; size_t &gt; columns;  // number of columns, indexed by row\nstd::vector&lt; int &gt; values;      // all values in matrix\n\ncolumns.reserve( 1000 );   // Guess a reasonable row count to begin with\nvalues.reserve( 1000000 ); // Guess reasonable value count to begin with\n\nwhile( getline(fp, line) ) {\n    if( line.empty() ) {\n        AddMatrix( matrices, columns, values );\n    } else {\n        std::istringstream iss( line );\n        size_t count = 0;\n        for( int val; iss &gt;&gt; val; ) {\n            values.push_back( val );\n            count++;\n        }\n        columns.push_back( count );\n    }\n}\n\n// In case last line in file was not empty, add the last matrix.\nAddMatrix( matrices, columns, values );\n</code></pre>\n\n<p>And add the matrix something like this:</p>\n\n<pre><code>void AddMatrix( std::deque&lt; std::vector&lt; std::vector&lt; int &gt; &gt; &gt; &amp; matrices,\n                std::vector&lt; size_t &gt; &amp; columns,\n                std::vector&lt; int &gt; &amp; values )\n{\n    if( columns.empty() ) return;\n\n    // Reserve matrix rows\n    size_t num_rows = columns.size();\n    std::vector&lt; std::vector&lt; int &gt; &gt; matrix;\n    matrix.reserve( num_rows );\n\n    // Copy rows into matrix\n    auto val_it = values.begin();\n    for( size_t num_cols : columns )\n    {\n        std::vector&lt; int &gt; row;\n        row.reserve( num_cols );\n        std::copy_n( val_it, num_cols, std::back_inserter( row ) );\n        matrix.emplace_back( row );\n        val_it += num_cols;\n    }\n\n    // Clear the column and value pools for re-use.\n    columns.clear();\n    values.clear();\n}\n</code></pre>\n\n<p>Finally, I recommend you choose an appropriate integer type from <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow noreferrer\"><code>&lt;cstdint&gt;</code></a> rather than leaving it up the compiler.  If you need only 32-bit integers, use <code>int_least32_t</code>.  If your data range fits in 16-bit integers, you'll save a lot of memory by using <code>int_least16_t</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458167807, "post_id": 36048006, "comment_id": 59745002, "body": "Just wondering how do I check if I&#39;m refering to the actual file size, I think I&#39;m refering to size on disk (ls -lh). And I just tried to use shrink_to_fit, it didn&#39;t effect the memory usage for some reason..."}, {"owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "reply_to_user": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "edited": false, "score": 0, "creation_date": 1458196568, "post_id": 36048006, "comment_id": 59754054, "body": "I know that on windows you can/could see in in the properties od that file. Haven&#39;t checked on linux yet"}], "tags": [], "owner": {"reputation": 10055, "user_id": 2466431, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/gSQh3.png?s=128&g=1", "display_name": "JVApen", "link": "https://stackoverflow.com/users/2466431/jvapen"}, "is_accepted": false, "score": 0, "last_activity_date": 1458166604, "creation_date": 1458166604, "answer_id": 36048006, "question_id": 36047425, "link": "https://stackoverflow.com/questions/36047425/c-read-file-and-store-integer-in-vectors-ends-up-taking-around-5-time-more-re/36048006#36048006", "title": "c++ read file and store integer in vectors. ends up taking around 5 time more resident memory than actual file size", "body": "<p>I guess you are seeing the combination of 2 effects: Different size of the int + extra memory in vector.</p>\n\n<p>I'm not sure if you are able to see the first effect, though an int takes about 4 bytes of memory (I think they are allowed to make this 8 bytes, though I have not yet seen implementations of it). The character on the other end only takes 1 byte per digit/char + 1 byte for the space. So if you would have a lot of small integer in there, the internal representation will be larger, though if you have a lot of large numbers, it will be smaller. \nAlso check if you are comparing to the size of the file, or the size on disk, as some filesystems support compression!</p>\n\n<p>A next effect that you will most likely notice is the capacity of the vector, as you most likely have many, this can give quite some overhead.\nIn order to not having to realloc every insertion, the std::vector class has a capacity, this is the size it actually uses and will fill in with the objects you add.</p>\n\n<p>Depending on the implementation, the capacity can grow. An example: Doubling the capacity every time you go over it: If you start with a capacity of 10 and you reach a size of 11, the capacity can go to 20, if you reach a size of 21, the capacity can go to 40 ...  (Note: This is also the reason that reserving is important, as it will directly give you the right size)</p>\n\n<p>So if you check the capacity and the size of every individual vector, this can be different. If this is really dramatic for you, you can call <code>shrink_to_fit</code> on the vector to realloc the capacity to the actual stored size.</p>\n\n<p>Finally, the size of your program is also influenced by the application itself. I don't think it's gonna be influencing here, though if you happen to link a lot of shared objects and all are loaded during startup, some memory measurements can include the size of these shared objects as part of your programs memory.</p>\n"}], "owner": {"reputation": 33, "user_id": 6058966, "user_type": "registered", "profile_image": "https://graph.facebook.com/991680494231505/picture?type=large", "display_name": "Ian Li", "link": "https://stackoverflow.com/users/6058966/ian-li"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 36047862, "answer_count": 2, "score": 3, "last_activity_date": 1458168813, "creation_date": 1458164182, "question_id": 36047425, "link": "https://stackoverflow.com/questions/36047425/c-read-file-and-store-integer-in-vectors-ends-up-taking-around-5-time-more-re", "title": "c++ read file and store integer in vectors. ends up taking around 5 time more resident memory than actual file size", "body": "<p>I need to read in few input files(each contains a 2d matrix of integers) and store them in a vector of 2d vectors. below is code I wrote:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n  /*\n    int my_rank;\n    int p;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;p);\n  */\n\n  std::vector&lt;std::vector&lt;std::vector&lt;int &gt; &gt; &gt; matrices(argc);\n  for(int i=1; i&lt;argc; ++i){\n      std::string line;\n      std::ifstream fp(argv[i]);\n      std::vector&lt;std::vector&lt;int&gt; &gt; matrix;\n\n      if (fp.is_open()) {\n          while (getline(fp, line)) {\n              if(line!=\"\"){\n                  //add a new row to file\n                  std::vector&lt;int&gt; newRow;\n                  //parse each row put the values in the file buffer\n                  std::stringstream buff(line);\n                  //buffValue is each number in a row\n                  int buffValue;\n                  while (buff &gt;&gt; buffValue) {\n                      newRow.push_back(buffValue);\n                  }\n                  matrix.push_back(newRow);\n              }\n          }\n      }\n      else {\n          std::cout &lt;&lt; \"Failed to read files\" &lt;&lt; std::endl;\n      }\n     matrices.push_back(matrix);\n  }\n  //MPI_Finalize();\n  return 0;\n}\n</code></pre>\n\n<p>I have two questions here:</p>\n\n<ol>\n<li><p>when I read in one single file of 175M, the program ended up taking 900M in resident memory. This is a problem because I usually need to read in 4 files with few hundred M's per file. and it will eventually take multiple G's of memory. Is this because of the way I read/store the integers?</p></li>\n<li><p>If I uncomment the lines involve MPI, the resident memory usage goes up to 1.7G, is this normal or I'm doing something wrong here, I'm using MPICH.</p></li>\n</ol>\n"}, {"tags": ["c++", "templates", "sfml"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1458164109, "post_id": 36047371, "comment_id": 59743350, "body": "Look up about <i>lambda expression</i>."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1458164114, "post_id": 36047371, "comment_id": 59743353, "body": "Take a look at this:  <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/lambda</a>"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 3602293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/643548697/picture?type=large", "display_name": "thebigreddude", "link": "https://stackoverflow.com/users/3602293/thebigreddude"}, "edited": false, "score": 0, "creation_date": 1458165631, "post_id": 36047461, "comment_id": 59744058, "body": "Perfect. The way the search engines work and strip the characters down so it wouldn&#39;t even let me search on this site and yet already somebody has tagged it as a duplicate question."}], "tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 4, "last_activity_date": 1458164558, "last_edit_date": 1458164558, "creation_date": 1458164321, "answer_id": 36047461, "question_id": 36047371, "link": "https://stackoverflow.com/questions/36047371/unfamiliar-symbol-in-c/36047461#36047461", "title": "Unfamiliar symbol [=] in C++", "body": "<p>The square brackets indicate the capture terms for the lambda function.  If you put <code>=</code> in it, that indicates automatic capture (by value) of all symbols used in the lambda.  Capture means that those variables are available for use in the lambda, without being function parameters.</p>\n\n<p>Let's say you were using the variable <code>x</code> that was passed into <code>foo</code> inside the lambda.  Then the value of <code>x</code> would automatically be captured in the lambda, and made accessible by the same name.  A more explicit way would be to indicate that <code>x</code> is to be captured:</p>\n\n<pre><code>[x] (data_type1 y)\n{\n    DoSomethingElse(x, y);\n};\n</code></pre>\n\n<p>In your case it doesn't have any effect because there are no such symbols.  More likely, it's a sloppy programming practice that has been adopted by whoever wrote it.  Or there are times when it is required, and this is a copy-paste hangover.</p>\n\n<p>I should add that this might be used if <code>foo</code> and <code>DoSomething</code> are actually methods in a class.  In that case, the <code>=</code> would automatically capture <code>this</code>, and resolve to the correct call to <code>DoSomething</code></p>\n"}], "owner": {"reputation": 25, "user_id": 3602293, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/643548697/picture?type=large", "display_name": "thebigreddude", "link": "https://stackoverflow.com/users/3602293/thebigreddude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "closed_date": 1458164450, "accepted_answer_id": 36047461, "answer_count": 1, "score": 1, "last_activity_date": 1458164558, "creation_date": 1458163953, "last_edit_date": 1458164425, "question_id": 36047371, "link": "https://stackoverflow.com/questions/36047371/unfamiliar-symbol-in-c", "closed_reason": "Duplicate", "title": "Unfamiliar symbol [=] in C++", "body": "<p>I am working on a game using SFML going through some tutorials when I ran into a line of code that I have never scene. The full thing is at <a href=\"https://github.com/SFML/SFML-Game-Development-Book/blob/master/05_States/Include/Book/Command.hpp\" rel=\"nofollow\" title=\"SMFL Game Development\">SFML Game Development</a> but the specific symbol was [=] and here is a simplified form of the code.</p>\n\n<pre><code>template &lt;typename data_type, typename Function&gt;\nstd::function&lt;void(data_type1&amp;)&gt; foo(Function x)\n{\n    return [=] (data_type1 y)\n    {\n        DoSomething(y);\n    };\n}\n</code></pre>\n\n<p>I think I get the point of the code but what is the significance of the brackets around an equal sign? I did not find mention of it on any website unless I just used poor search terms.</p>\n"}, {"tags": ["c++", "cuda", "constants", "gpu-warp"], "comments": [{"owner": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 3, "creation_date": 1458163071, "post_id": 36047035, "comment_id": 59742813, "body": "What do you mean by &quot;come ... from instruction itself&quot;?"}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 1, "creation_date": 1458163796, "post_id": 36047035, "comment_id": 59743173, "body": "A <i>lot</i> of your questions could be answered by reading a little bit of documentation - <a href=\"https://docs.nvidia.com/cuda/parallel-thread-execution/index.html#special-registers\" rel=\"nofollow noreferrer\">docs.nvidia.com/cuda/parallel-thread-execution/&hellip;</a>"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 2, "creation_date": 1458165926, "post_id": 36047035, "comment_id": 59744184, "body": "@talonmies: Sometimes you don&#39;t know which document to read, and where."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 19034, "user_id": 780717, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eead3a6ab011b880ca6ec354ca00f0b3?s=128&d=identicon&r=PG", "display_name": "njuffa", "link": "https://stackoverflow.com/users/780717/njuffa"}, "edited": false, "score": 0, "creation_date": 1458166050, "post_id": 36047035, "comment_id": 59744246, "body": "@njuffa: I mean from an operand of the machine instruction (SASS instruction)."}], "answers": [{"comments": [{"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 4, "creation_date": 1458208056, "post_id": 36053776, "comment_id": 59760629, "body": "This answer is correct/best/elegant.  However there are plenty of codes out there that treat warp size as a universal constant  (some even originating with NVIDIA so following the rule about people who live in glass houses...).  Therefore, a possible compromise would be to treat warpsize as a universal constant, but to test for the actual runtime immediate value as returned by the hardware to be equal to the assumed universal constant, at the beginning of your code, with an assert or similar.  This should be safe and sufficient, with the caveat that if it ever changes, your code will break."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1458209515, "post_id": 36053776, "comment_id": 59761730, "body": "@RobertCrovella: &quot;the beginning of your code&quot; &lt;- when the application first looks at the device and before launching any kernels. Then it would be graceful breakage."}], "tags": [], "owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "is_accepted": false, "score": 10, "last_activity_date": 1458202303, "last_edit_date": 1458202303, "creation_date": 1458198673, "answer_id": 36053776, "question_id": 36047035, "link": "https://stackoverflow.com/questions/36047035/when-should-i-use-cudas-built-in-warpsize-as-opposed-to-my-own-proper-constant/36053776#36053776", "title": "When should I use CUDA&#39;s built-in warpSize, as opposed to my own proper constant?", "body": "<p>Let's get a couple of points straight. The warp size <em>isn't</em> a compile time constant and shouldn't be treated as one. It is an architecture specific <em>runtime immediate constant</em> (and its value just happens to be 32 for all architectures to date). Once upon a time, the old Open64 compiler did emit a constant into PTX, however that changed at least 6 years ago if my memory doesn't fail me.</p>\n\n<p>The value is available:</p>\n\n<ol>\n<li>In CUDA C via <code>warpSize</code>, where is is <em>not a compile time constant</em> (the PTX <code>WARP_SZ</code> variable is emitted by the compiler in such cases).</li>\n<li>In PTX assembler via <code>WARP_SZ</code>, where it is a runtime immediate constant</li>\n<li>From the runtime API as a device <a href=\"http://docs.nvidia.com/cuda/cuda-runtime-api/structcudaDeviceProp.html#structcudaDeviceProp_18656f53eb2a7e54500f6fb95a830b47d\">property</a></li>\n</ol>\n\n<p>Don't declare you own constant for the warp size, that is just asking for trouble. The normal use case for an in-kernel array dimensioned to be some multiple of the warp size would be to use dynamically allocated shared memory. You can read the warp size from the host API at runtime to get it. If you have a statically declared in-kernel you need to dimension from the warp size, use templates and select the correct instance at runtime. The latter might seem like unnecessary theatre, but it is the right thing to do for a use case that almost never arises in practice. The choice is yours.</p>\n"}, {"tags": [], "owner": {"reputation": 19146, "user_id": 635654, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b8fb58eef98caeec6ab3366e0ac986d7?s=128&d=identicon&r=PG", "display_name": "CygnusX1", "link": "https://stackoverflow.com/users/635654/cygnusx1"}, "is_accepted": true, "score": 2, "last_activity_date": 1487696793, "last_edit_date": 1487696793, "creation_date": 1487696230, "answer_id": 42373441, "question_id": 36047035, "link": "https://stackoverflow.com/questions/36047035/when-should-i-use-cudas-built-in-warpsize-as-opposed-to-my-own-proper-constant/42373441#42373441", "title": "When should I use CUDA&#39;s built-in warpSize, as opposed to my own proper constant?", "body": "<p>Contrary to talonmies's answer I find <code>warp_size</code> constant perfectly acceptable. The only reason to use <code>warpSize</code> is to make the code forward-compatibly with a possible future hardware that may have warps of different size. However, when such hardware arrives, the kernel code will most likely require other alterations as well in order to remain efficient. CUDA is not a hardware-agnostic language - on the contrary, it is still quite a low-level programming language. Production code uses various intrinsic functions that come and go over time (e.g. <code>__umul24</code>).</p>\n\n<p>The day we get a different warp size (e.g. 64) many things will change:</p>\n\n<ul>\n<li>The <code>warpSize</code> will have to be adjusted obviously</li>\n<li>Many warp-level intrinsic will need their signature adjusted, or a new version produced, e.g. <code>int __ballot</code>, and while <code>int</code> does not need to be 32-bit, it <em>is</em> most commonly so!</li>\n<li><p>Iterative operations, such as warp-level reductions, will need their number of iterations adjusted. I have never seen anyone writing:</p>\n\n<pre><code>for (int i = 0; i &lt; log2(warpSize); ++i) ...\n</code></pre>\n\n<p>that would be overly complex in something that is usually a time-critical piece of code.</p></li>\n<li><p><code>warpIdx</code> and <code>laneIdx</code> computation out of <code>threadIdx</code> would need to be adjusted. Currently, the most typical code I see for it is:</p>\n\n<pre><code>warpIdx = threadIdx.x/32;\nlaneIdx = threadIdx.x%32;\n</code></pre>\n\n<p>which reduces to simple right-shift and mask operations. However, if you replace <code>32</code> with <code>warpSize</code> this suddenly becomes a quite expensive operation!</p></li>\n</ul>\n\n<p>At the same time, using <code>warpSize</code> in the code prevents optimization, since formally it is not a compile-time known constant.\nAlso, if the amount of shared memory depends on the <code>warpSize</code> this forces you to use the dynamically allocated shmem (as per talonmies's answer). However, the syntax for that is inconvenient to use, especially when you have several arrays -- this forces you to do pointer arithmetic yourself and manually compute the sum of all memory usage.</p>\n\n<p>Using templates for that <code>warp_size</code> is a partial solution, but adds a layer of syntactic complexity needed at every function call:</p>\n\n<pre><code>deviceFunction&lt;warp_size&gt;(params)\n</code></pre>\n\n<p>This obfuscates the code. The more boilerplate, the harder the code is to read and maintain.</p>\n\n<hr>\n\n<p>My suggestion would be to have a single header that control all the model-specific constants, e.g.</p>\n\n<pre><code>#if __CUDA_ARCH__ &lt;= 600\n//all devices of compute capability &lt;= 6.0\nstatic const int warp_size = 32; \n#endif\n</code></pre>\n\n<p>Now the rest of your CUDA code can use it without any syntactic overhead. The day you decide to add support for newer architecture, you just need to alter this one piece of code.</p>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 42373441, "answer_count": 2, "score": 0, "last_activity_date": 1487696793, "creation_date": 1458162695, "last_edit_date": 1487696622, "question_id": 36047035, "link": "https://stackoverflow.com/questions/36047035/when-should-i-use-cudas-built-in-warpsize-as-opposed-to-my-own-proper-constant", "title": "When should I use CUDA&#39;s built-in warpSize, as opposed to my own proper constant?", "body": "<p>nvcc device code has access to a built-in value, <code>warpSize</code>, which is set to the  warp size of the device executing the kernel (i.e. 32 for the foreseeable future). Usually you can't tell it apart from a constant - but if you try to declare an array of length warpSize you get a complaint about it being non-const... (with CUDA 7.5)</p>\n\n<p>So, at least for that purpose you are motivated to have something like (<strong>edit</strong>):</p>\n\n<pre><code>enum : unsigned int { warp_size  = 32 };\n</code></pre>\n\n<p>somewhere in your headers. But now - which should I prefer, and when? : <code>warpSize</code>, or <code>warp_size</code>? </p>\n\n<p><strong>Edit:</strong> <code>warpSize</code> is apparently a compile-time constant in PTX. Still, the question stands.</p>\n"}, {"tags": ["c++", "qt", "qwidget", "qmainwindow", "qprogressbar"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3416156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19ba99b659f22ed259f668b85fd95662?s=128&d=identicon&r=PG&f=1", "display_name": "JZH", "link": "https://stackoverflow.com/users/3416156/jzh"}, "edited": false, "score": 0, "creation_date": 1458164303, "post_id": 36047330, "comment_id": 59743438, "body": "And of course by this you can delete the member     QProgressBar progressBar_horizontal; from your header horrizontalprogressbar.h, because we don&#39;t need it anymore"}, {"owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1458165731, "post_id": 36047330, "comment_id": 59744102, "body": "Thanks a lots JZK, I just tried it and it works for me. Much obliged."}, {"owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "edited": false, "score": 0, "creation_date": 1458231425, "post_id": 36047330, "comment_id": 59778576, "body": "Can we add the horrizontalprogressbar in a QGroupBox and display on mainwindow?. How can it be done?"}], "tags": [], "owner": {"reputation": 1, "user_id": 3416156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19ba99b659f22ed259f668b85fd95662?s=128&d=identicon&r=PG&f=1", "display_name": "JZH", "link": "https://stackoverflow.com/users/3416156/jzh"}, "is_accepted": false, "score": 0, "last_activity_date": 1458163790, "creation_date": 1458163790, "answer_id": 36047330, "question_id": 36046689, "link": "https://stackoverflow.com/questions/36046689/how-to-add-and-show-the-contents-of-a-widget-onto-another-widget-in-qt/36047330#36047330", "title": "How to add and show the contents of a widget onto another widget in QT?", "body": "<p>It works for me, change the following so that at construction the settings of your new object will be applied:</p>\n\n<pre><code>#include \"horrizontalprogressbar.h\"\n\nhorrizontalprogressbar::horrizontalprogressbar()\n{\n   this-&gt;setRange(0,5);\n   this-&gt;setValue(2.5);\n   this-&gt;setFixedSize(300,50);\n   //    progressBar_horizontal.show();\n}\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5941001, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/580cbb534ec31fee75b50ceecf55f777?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/5941001/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1458163790, "creation_date": 1458161499, "last_edit_date": 1458162260, "question_id": 36046689, "link": "https://stackoverflow.com/questions/36046689/how-to-add-and-show-the-contents-of-a-widget-onto-another-widget-in-qt", "title": "How to add and show the contents of a widget onto another widget in QT?", "body": "<p>I have created a class horrizontalprogressbar in which i created a simple progressbar. I have another class called mainwindow and I would like to access and display the contents of horrizontalprogressbar on mainwindow. I tried a lot off things here, but still I keep getting the horrizontalprogressbar and mainwindow on separate windows. Is there anyway to display them both on the same same window. Since I am new to QT, I would much appreciate any help I could get to resolve this.</p>\n\n<p>Please find the code below:-\nhorrizontalprogressbar.h</p>\n\n<pre><code>#ifndef HORRIZONTALPROGRESSBAR_H\n#define HORRIZONTALPROGRESSBAR_H\n\n#include &lt;QProgressBar&gt;\n#include &lt;QWidget&gt;\n\nclass horrizontalprogressbar: public QProgressBar\n{\n    Q_OBJECT\npublic:\n    horrizontalprogressbar();\n    QProgressBar progressBar_horizontal;\n};\n\n#endif // HORRIZONTALPROGRESSBAR_H\n</code></pre>\n\n<p>horrizontalprogressbar.cpp</p>\n\n<pre><code>#include \"horrizontalprogressbar.h\"\n\nhorrizontalprogressbar::horrizontalprogressbar()\n{\n    progressBar_horizontal.setRange(0,5);\n    progressBar_horizontal.setValue(2.5);\n    progressBar_horizontal.setFixedSize(300,50);\n    //progressBar_horizontal.show();\n}\n</code></pre>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include &lt;QtWidgets&gt;\n\nclass horrizontalprogressbar;\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\nprivate:\n    horrizontalprogressbar *progressbar_H;\n\npublic:\n    MainWindow();//(QWidget *parent = 0);\n    ~MainWindow();\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"horrizontalprogressbar.h\"\n\nMainWindow::MainWindow()//(QWidget *parent)\n   // : QMainWindow(parent)\n{\n    progressbar_H = new horrizontalprogressbar;\n    setCentralWidget(progressbar_H);\n    progressbar_H-&gt;setParent(this);\n    //progressbar_H-&gt;setFixedSize(200,200);\n    //progressbar_H-&gt;show();\n\n}\n\nMainWindow::~MainWindow()\n{\n\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.setFixedSize(800,600);\n    w.setStyleSheet(\"QMainWindow {background: 'black';}\");\n    w.show();\n\n    return a.exec();\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 5, "creation_date": 1458161670, "post_id": 36046661, "comment_id": 59742019, "body": "Don&#39;t keep us in suspense. The compiler didn&#39;t just say &quot;no viable overloaded &#39;=&#39;&quot;. It also specified exactly what it was trying to do that triggered a lack-of-overload-found condition. And that was... ? I&#39;m guessing it says something about expectation of an l-value. In which case your <code>operator =</code> would be better served taking a <code>const</code> reference rather than a hot one. <code>nod &amp;operator=(nod const &amp;x)</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458161710, "post_id": 36046661, "comment_id": 59742040, "body": "<code>nod &amp;operator=(nod &amp;x)</code> wants a non-const reference. Looks like you are using it in contexts where non-const reference can&#39;t be bound to the argument. You also didn&#39;t post the Minimal, Complete and Verifiable Example, so I am voting to close this."}, {"owner": {"reputation": 3910, "user_id": 1770952, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743e6716b63a6502a10a212655005e81?s=128&d=identicon&r=PG", "display_name": "Ivan Gritsenko", "link": "https://stackoverflow.com/users/1770952/ivan-gritsenko"}, "edited": false, "score": 0, "creation_date": 1458161729, "post_id": 36046661, "comment_id": 59742056, "body": "Can you show code for <code>graf operator~();</code>?"}, {"owner": {"reputation": 1843, "user_id": 3185860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/23e2427bb6481f77d8fb17f990e33ab4?s=128&d=identicon&r=PG&f=1", "display_name": "Toma Radu-Petrescu", "link": "https://stackoverflow.com/users/3185860/toma-radu-petrescu"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1458162049, "post_id": 36046661, "comment_id": 59742220, "body": "@WhozCraig Wow, that worked! Thanks a lot! But could you please explain me why taking a constant reference made it work?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1458162206, "post_id": 36046661, "comment_id": 59742313, "body": "You&#39;re returning a temporary object. Unless you have move semantics on the menu (and you don&#39;t), a const reference is the only thing you&#39;re going to bind it to (which you now do)."}, {"owner": {"reputation": 1843, "user_id": 3185860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/23e2427bb6481f77d8fb17f990e33ab4?s=128&d=identicon&r=PG&f=1", "display_name": "Toma Radu-Petrescu", "link": "https://stackoverflow.com/users/3185860/toma-radu-petrescu"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1458162352, "post_id": 36046661, "comment_id": 59742396, "body": "@WhozCraig I guess I have to study constants more. Thanks a lot again!"}], "answers": [{"tags": [], "owner": {"reputation": 1843, "user_id": 3185860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/23e2427bb6481f77d8fb17f990e33ab4?s=128&d=identicon&r=PG&f=1", "display_name": "Toma Radu-Petrescu", "link": "https://stackoverflow.com/users/3185860/toma-radu-petrescu"}, "is_accepted": true, "score": 2, "last_activity_date": 1458162081, "creation_date": 1458162081, "answer_id": 36046831, "question_id": 36046661, "link": "https://stackoverflow.com/questions/36046661/no-viable-overloaded-when-assigning-an-object-to-another/36046831#36046831", "title": "No viable overloaded &#39;=&#39; when assigning an object to another", "body": "<p><code>nod &amp;operator=(nod &amp;x)</code> had to be changed to <code>nod &amp;operator=(const nod &amp;x)</code></p>\n"}], "owner": {"reputation": 1843, "user_id": 3185860, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/23e2427bb6481f77d8fb17f990e33ab4?s=128&d=identicon&r=PG&f=1", "display_name": "Toma Radu-Petrescu", "link": "https://stackoverflow.com/users/3185860/toma-radu-petrescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "accepted_answer_id": 36046831, "answer_count": 1, "score": 0, "last_activity_date": 1458162081, "creation_date": 1458161388, "last_edit_date": 1458161829, "question_id": 36046661, "link": "https://stackoverflow.com/questions/36046661/no-viable-overloaded-when-assigning-an-object-to-another", "title": "No viable overloaded &#39;=&#39; when assigning an object to another", "body": "<p>My class <code>Graf</code> looks like this:</p>\n\n<pre><code>class graf{\nprivate:\n    int n, m;\n    nod a[100];\npublic:\n    graf(int n, int m);\n    graf operator~();\n};\n</code></pre>\n\n<p>My class <code>nod</code> looks like this:</p>\n\n<pre><code>class nod{\nprivate:\n    muchie *a;\npublic:\n    nod();\n    nod(nod &amp;x);\n    ~nod();\n    nod &amp;operator=(nod &amp;x){\n        int i;\n        this-&gt;id=x.id;\n        this-&gt;nr=x.nr;\n        for(i=0;i&lt;=nr;i++) this-&gt;a[i]=x.a[i];\n        return *this;\n    }\n    void operator+(nod &amp;y);\n};\n</code></pre>\n\n<p>When I try to run the simple code below, the compiler will say: <code>No viable overloaded '='</code>. If I delete the '=' overcharge within <code>nod</code>, there will be no error, so I guess the problem is with this overcharge? I really can't figure out what is wrong.</p>\n\n<pre><code>graf gt(4,4);\ngt=~g;    // where g is an already declared graf                       \n</code></pre>\n\n<p>The problem isn't the <code>~</code> overcharge, I tried it without the overcharging of <code>=</code> and it could run the code properply.</p>\n\n<p>Edit:</p>\n\n<pre><code>graf graf::operator~(){\n    nod nodc;\n    int i,j;\n    graf gt(this-&gt;getN(), this-&gt;getM());\n\n    for(i=1;i&lt;=this-&gt;getN();i++){\n        nodc=this-&gt;getNode(i);\n        for(j=0;j&lt;=nodc.getNr();j++){\n            gt.getNode(nodc.getMuchie(j).getY()-&gt;getId()) + (gt.getNode(nodc.getMuchie(j).getY()-&gt;getId()), gt.getNode(i));\n        }\n    }\n    return gt;\n}\n</code></pre>\n"}, {"tags": ["c++", "conditional"], "comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 3, "creation_date": 1458161216, "post_id": 36046568, "comment_id": 59741732, "body": "Without a specific problem and some code to back it up, this is off-topic. I also don&#39;t know why you would need a lot of conditionals."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1458161312, "post_id": 36046568, "comment_id": 59741792, "body": "<i>&quot;I can do this by using tons of if conditionals&quot;</i> I think two should be actually sufficient."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1458161429, "post_id": 36046568, "comment_id": 59741874, "body": "Is the time in three actual variables or is it in a tm struct?"}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1458161708, "post_id": 36046568, "comment_id": 59742039, "body": "It sounds like it&#39;s in three separate variables, the op also said he/she is new so struct may be a stretch at the moment."}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "edited": false, "score": 0, "creation_date": 1458161787, "post_id": 36046568, "comment_id": 59742079, "body": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5 - Thats what I mean. I want to know how to do that. I am a beginner"}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "edited": false, "score": 0, "creation_date": 1458161874, "post_id": 36046568, "comment_id": 59742140, "body": "Just the way to do that. I can read on it myself"}, {"owner": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1458162288, "post_id": 36046568, "comment_id": 59742361, "body": "Do you know that you don&#39;t have to end a <code>cout</code> statement with <code>endl</code> so you can later add more text to the same line?"}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "reply_to_user": {"reputation": 15720, "user_id": 19719, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/3355303796cad8b9ea85993abc9030aa?s=128&d=identicon&r=PG&f=1", "display_name": "indiv", "link": "https://stackoverflow.com/users/19719/indiv"}, "edited": false, "score": 0, "creation_date": 1458162367, "post_id": 36046568, "comment_id": 59742406, "body": "@indiv yeah i know, but i wanted to here."}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "reply_to_user": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1458162582, "post_id": 36046568, "comment_id": 59742532, "body": "@Afflicted No, I know about struct but I don&#39;t see where it would be used here."}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1458162778, "post_id": 36046568, "comment_id": 59742653, "body": "It depends on the situation, more specifically how are you actually handling the conversion. Are you telling the user to input a time in hours minutes and seconds seperatly? Or are you having them enter it in seconds and then using mod? There are quite a few ways to break down your if statements but it would be easier to help if we could see all of your code :)"}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "reply_to_user": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "edited": false, "score": 0, "creation_date": 1458162978, "post_id": 36046568, "comment_id": 59742758, "body": "They input seconds and i wrote some messy code that turns it into hours,mins and seconds as separate variables. @Afflicted"}], "answers": [{"comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1458163500, "post_id": 36047202, "comment_id": 59743021, "body": "In the question, the sample he gave was <code>x hours y minutes and z seconds</code> including the word and - even though he didn&#39;t know how to code it that seems to be what he is after.  How would you do that considering the and will move around depending on which values are zero?"}, {"owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "edited": false, "score": 0, "creation_date": 1458163674, "post_id": 36047202, "comment_id": 59743111, "body": "Thats exactly what I meant. I was updating the text right when you wrote this."}, {"owner": {"reputation": 56, "user_id": 4939284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9044e8e97ead584c55fe3e941f65b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony West", "link": "https://stackoverflow.com/users/4939284/anthony-west"}, "reply_to_user": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1458165133, "post_id": 36047202, "comment_id": 59743825, "body": "@JerryJeremiah It was deduced from his &quot;would become&quot; statement that he didn&#39;t need the word &quot;and&quot; in the output. Looks like the deduction was accurate based on the recent edit by OP."}], "tags": [], "owner": {"reputation": 56, "user_id": 4939284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9044e8e97ead584c55fe3e941f65b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony West", "link": "https://stackoverflow.com/users/4939284/anthony-west"}, "is_accepted": true, "score": 1, "last_activity_date": 1458163370, "creation_date": 1458163370, "answer_id": 36047202, "question_id": 36046568, "link": "https://stackoverflow.com/questions/36046568/c-seconds-minutes-hours-when-0/36047202#36047202", "title": "C++ Seconds Minutes Hours when 0", "body": "<p>Try something like this:</p>\n\n<pre><code>if (hours &gt; 0)\n    cout &lt;&lt; hours &lt;&lt; \"hours \";\n\nif (minutes &gt; 0)\n    cout &lt;&lt; minutes &lt;&lt; \"minutes \";\n\nif (seconds &gt; 0)\n    cout &lt;&lt; seconds &lt;&lt; \"seconds \";\n\ncout &lt;&lt; endl;\n</code></pre>\n\n<p>That code should do what you want, with only 3 conditionals. If all values are zero, just a new line will be printed.</p>\n"}], "owner": {"reputation": 31, "user_id": 6073765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XNXssjhegUI/AAAAAAAAAAI/AAAAAAAANfo/4wn6QF5VxZ4/photo.jpg?sz=128", "display_name": "Matthias Prodani", "link": "https://stackoverflow.com/users/6073765/matthias-prodani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "closed_date": 1458270565, "accepted_answer_id": 36047202, "answer_count": 1, "score": -1, "last_activity_date": 1458163574, "creation_date": 1458161057, "last_edit_date": 1458163574, "question_id": 36046568, "link": "https://stackoverflow.com/questions/36046568/c-seconds-minutes-hours-when-0", "closed_reason": "Needs details or clarity", "title": "C++ Seconds Minutes Hours when 0", "body": "<p>I'm a programming beginner learning C++.</p>\n\n<p>I have some code that will give an output in hours mins and seconds.\nLike :</p>\n\n<pre><code>x hours y minutes z seconds\n</code></pre>\n\n<p>What I want is that when <code>x, y or z</code> is equal to <code>0</code> to not have that showing up so:<br/>\n<code>30hours 0minutes 5seconds</code> would become: <br/>\n<code>30hours 5seconds</code>. <br/>\nI can do this by using tons of if conditionals but it gets very messed up.\nIf there's another way please let me know as i really want to learn the right way</p>\n\n<p>Thanks in advance </p>\n\n<p>--EDIT--\nThis is my actual code</p>\n\n<pre><code>if (hours == 0 &amp;&amp; mins == 0 &amp;&amp; secs != 0) {\n    cout &lt;&lt;  secs &lt;&lt; \"secs \" &lt;&lt; endl;\n}\nif (hours == 0 &amp;&amp; mins != 0 &amp;&amp; secs == 0) {\n    cout &lt;&lt; mins &lt;&lt; \"mins \" &lt;&lt; endl;\n}\nif (hours != 0 &amp;&amp; mins == 0 &amp;&amp; secs == 0) {\n    cout &lt;&lt; hours &lt;&lt; \"hours \" &lt;&lt; endl;\n}\nif (hours == 0 &amp;&amp; mins != 0 &amp;&amp; secs != 0) {\n    cout &lt;&lt; mins &lt;&lt; \"mins \" &lt;&lt; secs &lt;&lt; \"secs \" &lt;&lt; endl;\n}\nif (hours != 0 &amp;&amp; mins == 0 &amp;&amp; secs != 0) {\n    cout &lt;&lt; hours &lt;&lt; \"hours \" &lt;&lt; secs &lt;&lt; \"secs \" &lt;&lt; endl;\n}\nif (hours != 0 &amp;&amp; mins != 0 &amp;&amp; secs == 0) {\n    cout &lt;&lt; hours &lt;&lt; \"hours \" &lt;&lt; mins &lt;&lt; \"mins \" &lt;&lt; endl;\n}\nif (hours != 0 &amp;&amp; mins != 0 &amp;&amp; secs != 0) {\n    cout &lt;&lt; hours &lt;&lt; \"hours \" &lt;&lt; mins &lt;&lt; \"mins \" &lt;&lt; secs &lt;&lt; \"secs \" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This works but I dont think thats how actual programmers do it.</p>\n\n<p>Here's the second to hour min secs converter </p>\n\n<pre><code>void readabletime(const double a){\n\nhours = a / 3600;\nmins = (a/60 - hours * 60);\nsecs = (a - ((hours * 3600) + (mins * 60)));\n</code></pre>\n\n<p>---UPDATE----\nI thought of a simpler way to do it with 3 conditionals</p>\n\n<pre><code>if (hours != 0) {\n    cout &lt;&lt; hours &lt;&lt; \"hours\";\n}\nif (mins != 0) {\n    cout &lt;&lt; mins &lt;&lt; \"mins\"\n}\nif (secs != 0) {\n    cout &lt;&lt; secs &lt;&lt; \"secs\"\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "stl"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 5, "creation_date": 1458160928, "post_id": 36046462, "comment_id": 59741570, "body": "In the C++ standard library, they get around this problem by passing pairs of iterators rather than a reference to an array. Random access iterators can easily be offset for a sub-range."}, {"owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1458163587, "post_id": 36046462, "comment_id": 59743067, "body": "Except that then you are not telling the compiler the distance between the first and the last element. Without knowing you have three elements, you can&#39;t unroll the loop."}], "answers": [{"comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 1, "creation_date": 1458161063, "post_id": 36046533, "comment_id": 59741644, "body": "Doesn&#39;t this violate strict aliasing?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1458161176, "post_id": 36046533, "comment_id": 59741699, "body": "@JamesRoot, it definitely does."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1458161667, "post_id": 36046533, "comment_id": 59742017, "body": "Violates it most violently. I can think of several off colour analogies I won&#39;t be using in a public forum."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 2, "creation_date": 1458162469, "post_id": 36046533, "comment_id": 59742469, "body": "This would rely on <code>std::array</code> wrapping a C-style array (in which case I am not convinced there is an aliasing violation) but the standard doesn&#39;t require that"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518606922, "post_id": 36046533, "comment_id": 84572934, "body": "@user4581301, I have been using this technique for a while and interestingly I never managed to make <code>clang</code> or <code>gcc</code> to produce a <code>strict aliasing</code> warning when using <code>std::array</code>. Perhaps there is something special about the internal representation of <code>std::array&lt;T,N&gt;</code> as <code>T[N]</code> that makes it work. I am talking about this code for example <code>std::array&lt;int,3&gt; aa = {{1,2,3}}; std::array&lt;int,2&gt;&amp; ee = reinterpret_cast&lt;std::array&lt;int,2&gt;&amp;&gt;(aa[1]); assert(ee[0] == 2);</code>"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1518607075, "post_id": 36046533, "comment_id": 84573042, "body": "@M.M, maybe there is no aliasing because the two arrays point to different locations in memory, they &quot;overlap&quot; but they are still different. (see the code in my comment above)."}, {"owner": {"reputation": 7526, "user_id": 4108376, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/163807162a115b27e50f5f5f2b90de26?s=128&d=identicon&r=PG&f=1", "display_name": "tmlen", "link": "https://stackoverflow.com/users/4108376/tmlen"}, "edited": false, "score": 0, "creation_date": 1518608190, "post_id": 36046533, "comment_id": 84573789, "body": "To have clean code it is probably better to use an <code>array_view</code> class. It is easy to implement if only the interface of <code>std::array</code> is needed."}], "tags": [], "owner": {"reputation": 153, "user_id": 4359761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2977c50e023bb55dec112e7a83622392?s=128&d=identicon&r=PG&f=1", "display_name": "Bartosz Bosowiec", "link": "https://stackoverflow.com/users/4359761/bartosz-bosowiec"}, "is_accepted": false, "score": -4, "last_activity_date": 1458160946, "creation_date": 1458160946, "answer_id": 36046533, "question_id": 36046462, "link": "https://stackoverflow.com/questions/36046462/is-it-possible-to-get-a-sub-array-of-a-stdarray-in-c/36046533#36046533", "title": "Is it possible to get a sub-array of a std::array in C++?", "body": "<pre><code>std::array&lt;int, 3&gt;&amp; array2 = reinterpret_cast&lt;std::array&lt;int, 3&gt;&amp;&gt;(array1);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "edited": false, "score": 0, "creation_date": 1458163813, "post_id": 36046713, "comment_id": 59743180, "body": "I thought that a reference (array&amp;) doesn&#39;t own the data anyway."}, {"owner": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "edited": false, "score": 1, "creation_date": 1458164580, "post_id": 36046713, "comment_id": 59743585, "body": "I hope the crutches like array_view and string_view never make it to the standard, and only reside within google, microsoft and bloomberg were they originated from. The real solution would be the ranges library proposed to C++17 by Eric Niebler."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "edited": false, "score": 0, "creation_date": 1478549744, "post_id": 36046713, "comment_id": 68192150, "body": "@Slava: What about C++ Core Guidelines types <code>span&lt;T&gt;</code>, `string_span&gt;?"}, {"owner": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1478698842, "post_id": 36046713, "comment_id": 68258869, "body": "@Ben Voigt Which is basically the same array_view but mutable? That makes me a sad panda..."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 6, "last_activity_date": 1458161610, "creation_date": 1458161610, "answer_id": 36046713, "question_id": 36046462, "link": "https://stackoverflow.com/questions/36046462/is-it-possible-to-get-a-sub-array-of-a-stdarray-in-c/36046713#36046713", "title": "Is it possible to get a sub-array of a std::array in C++?", "body": "<p>No, you can't do that. All standard library containers are unique owners of their data, and <code>std::array</code> is no exception. In fact, <code>std::array</code> is constrained to be implemented in such a way so that the elements are stored inside an actual array member of the class, which would make aliasing impossible.</p>\n\n<p>There is a proposal for an <code>array_view</code> class that would represent a non-owning view into a contiguous block of data. You can read about it <a href=\"https://isocpp.org/files/papers/N3851.pdf\" rel=\"noreferrer\">here</a>. I don't know the status of this proposal (the current C++ standardization process confuses me).</p>\n"}, {"tags": [], "owner": {"reputation": 1443, "user_id": 383522, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d9479f90cc655523847909e680e290e?s=128&d=identicon&r=PG", "display_name": "Slava", "link": "https://stackoverflow.com/users/383522/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1458164128, "creation_date": 1458164128, "answer_id": 36047411, "question_id": 36046462, "link": "https://stackoverflow.com/questions/36046462/is-it-possible-to-get-a-sub-array-of-a-stdarray-in-c/36047411#36047411", "title": "Is it possible to get a sub-array of a std::array in C++?", "body": "<p>You can if you use valarray instead of array\n<a href=\"http://en.cppreference.com/w/cpp/numeric/valarray/slice\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/numeric/valarray/slice</a></p>\n"}], "owner": {"reputation": 1598, "user_id": 1899587, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ad0a2dd3306606ccbd235ecca26f9c64?s=128&d=identicon&r=PG", "display_name": "Ant6n", "link": "https://stackoverflow.com/users/1899587/ant6n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4158, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1458164128, "creation_date": 1458160689, "question_id": 36046462, "link": "https://stackoverflow.com/questions/36046462/is-it-possible-to-get-a-sub-array-of-a-stdarray-in-c", "title": "Is it possible to get a sub-array of a std::array in C++?", "body": "<p>I would like to do something like</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::array&lt;int, 5&gt; array1 = {{ ... }};\nconst std::array&lt;int, 3&gt;&amp; array2 = array1[1:4]; // [x:y] doesn't exist\n</code></pre>\n\n<p>That is, get an array that is a sort of view of another array, without having to copy it.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 2090, "user_id": 2797642, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7f18efc80d45cd819f45c9ee71c9d2a9?s=128&d=identicon&r=PG", "display_name": "Apin", "link": "https://stackoverflow.com/users/2797642/apin"}, "edited": false, "score": 0, "creation_date": 1458177861, "post_id": 36046397, "comment_id": 59748351, "body": "is your context menu is using QMenu and you put graphic view on QMenu? Or the context menu is in graphics view?"}, {"owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "reply_to_user": {"reputation": 2090, "user_id": 2797642, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7f18efc80d45cd819f45c9ee71c9d2a9?s=128&d=identicon&r=PG", "display_name": "Apin", "link": "https://stackoverflow.com/users/2797642/apin"}, "edited": false, "score": 0, "creation_date": 1458188503, "post_id": 36046397, "comment_id": 59751189, "body": "no i am not using the QMenu at all , just QGraphicsView and QWidget and a class inherited from QGraphicsItem that represent a clickable item(circle in the image) ."}], "answers": [{"tags": [], "owner": {"reputation": 2090, "user_id": 2797642, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7f18efc80d45cd819f45c9ee71c9d2a9?s=128&d=identicon&r=PG", "display_name": "Apin", "link": "https://stackoverflow.com/users/2797642/apin"}, "is_accepted": false, "score": 0, "last_activity_date": 1458191530, "creation_date": 1458191530, "answer_id": 36052142, "question_id": 36046397, "link": "https://stackoverflow.com/questions/36046397/qt-advance-gui-fancy-context-menu/36052142#36052142", "title": "QT, advance GUI, fancy context menu", "body": "<p>I think you can do this :</p>\n\n<ul>\n<li>Hover the orange one and the sub menu appear.</li>\n<li>Keep the sub menu appear until your mouse hover nothing or hover another circle menu. When you move your mouse to sub menu -> it means you hover thing, so the sub menu will still there. If your sub menus are all same, so when you hover another circle, just move sub menu position and maybe set some property.</li>\n<li>Make sure that your orange circle and the sub menu is overlap, so moving mouse from orange to sub menu will not trigger \"hover nothing\"</li>\n</ul>\n"}], "owner": {"reputation": 62, "user_id": 5417288, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/HkfRS.png?s=128&g=1", "display_name": "Saif_Qaher94", "link": "https://stackoverflow.com/users/5417288/saif-qaher94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 458, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458191530, "creation_date": 1458160453, "question_id": 36046397, "link": "https://stackoverflow.com/questions/36046397/qt-advance-gui-fancy-context-menu", "title": "QT, advance GUI, fancy context menu", "body": "<p>i am working on a Qt project and i want to make a fancy context pie right click.... menu.</p>\n\n<p>like the one in the image</p>\n\n<p><a href=\"https://i.stack.imgur.com/JqaUW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JqaUW.png\" alt=\"enter image description here\"></a>bellow </p>\n\n<p>I am using QGraphicsItem, QGraphicsScene, QGraphicsView, and setting the background transparent by </p>\n\n<pre><code> setAttribute(Qt::WA_TranslucentBackground);\n setStyleSheet(\"background: transparent ;border: none;\");\n</code></pre>\n\n<p>what i want to achieve is when user hove over the circle and it is a sub-menu then a pie menu will appears but, </p>\n\n<p>The problem is:</p>\n\n<p>sadly mouse events will not emit unless its touching a solid pixel from my QGraphicsView, so when mouse cursor hove over a sub-menu the red pie will appear BUT as soon as i move to click on a sector from the pie it will disappear because i am no longer hovering over the orange circle.</p>\n\n<p>any another good idea or solution so i can get mouse events over my transparent area (i will calculate the distance from the orange circle and if the mouse IN RANGE the pie will stay shown)</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1458160438, "post_id": 36046298, "comment_id": 59741292, "body": "Extract a minimal example before posting here, your question is off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 0, "creation_date": 1458161621, "post_id": 36046379, "comment_id": 59741990, "body": "So, should I use always <code>integer</code> variables as indexes so that the value of the variable can get to <code>-1</code> and when the <code>while</code> will do the test, it will stop the loop?"}, {"owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "reply_to_user": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 1, "creation_date": 1458225985, "post_id": 36046379, "comment_id": 59774244, "body": "@Skyp89 That&#39;s a tough question.  A lot of people recommend you should (almost) always use signed types to avoid these kinds of boundary issues, so that&#39;s a legitimate way to program.  Personally, in C++, I often use unsigned types for things that should be unsigned, like array lengths and indices; it just means I have to be careful if I have loops that are going backwards.  One solution is to loop from 0 to &lt;length and then access the array using length-1-index.  Another solution is to loop from length to &gt;0 and then access the array using index-1."}], "tags": [], "owner": {"reputation": 734, "user_id": 2387521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bf0d528ab74149a60fb059d8cdf380?s=128&d=identicon&r=PG", "display_name": "Steven", "link": "https://stackoverflow.com/users/2387521/steven"}, "is_accepted": false, "score": 3, "last_activity_date": 1458160398, "creation_date": 1458160398, "answer_id": 36046379, "question_id": 36046298, "link": "https://stackoverflow.com/questions/36046298/why-was-unsigned-int-causing-the-program-to-crash/36046379#36046379", "title": "Why was `unsigned int` causing the program to crash?", "body": "<p>Part of your code goes:</p>\n\n<pre><code>while (i &gt;= 0 &amp;&amp; ok) { /* ...stuff here... */  --i; }\n</code></pre>\n\n<p>With an unsigned, if i is 0 and you decrement it, it will become the maximum unsigned value.  As a result, i is always greater than or equal to 0 and the while loop keeps executing.</p>\n\n<p>My guess is that is what is happening, and then, when you access word[i] you are accessing outside of the bounds of the array and crashing.</p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 0, "creation_date": 1458161719, "post_id": 36046389, "comment_id": 59742047, "body": "So, should I use always integer variables as indexes so that the value of the variable can get to -1 and when the while will do the test again, it will stop the loop?"}, {"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "reply_to_user": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 0, "creation_date": 1458162337, "post_id": 36046389, "comment_id": 59742382, "body": "@Skyp89 when you define condition for your loop you should let your variable to fail the test so your loop breaks (in this case becomes negative) so yes you should define it as int in this case"}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1458162724, "post_id": 36046389, "comment_id": 59742622, "body": "Sometimes I do something like this in this situation: <code>for(j=strlen(word1)-1; j+1; --j)</code> or <code>while (i+1 &amp;&amp; ok)</code>   &quot;<code>x+1</code>&quot; evaluates to false for both signed and unsigned integer types when <code>x</code> has the value you get when zero is decremented by one."}, {"owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1458163405, "post_id": 36046389, "comment_id": 59742982, "body": "@ChristopherOicles, can you explain a little bit better how this test (<code>j+1</code> or <code>i+1</code>) works inside the <code>for</code> loop? I can not see how the <code>for</code> loop checks this condition at a iteration."}, {"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "reply_to_user": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 1, "creation_date": 1458164794, "post_id": 36046389, "comment_id": 59743672, "body": "@Skyp89 Before each iteration of a for loop, the <code>for</code> statement&#39;s second expression is evaluated.  Looping ends when this evaluates to a false boolean value.  Your original conditional expression is <code>j &gt;= 0</code>, which is always &quot;true&quot; for an unsigned integer.  For a signed integer, it is &quot;false&quot; only when <code>j</code> has a negative value.  Because an integer value evaluates as &quot;false&quot; when equal to zero (and only when zero), I suggested raplacting the conditional with <code>j+1</code>, which is zero (thus &quot;false&quot;) when <code>j</code> is one below zero <code>((0-1)+1)==0</code>."}], "tags": [], "owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "is_accepted": false, "score": 2, "last_activity_date": 1458160441, "creation_date": 1458160441, "answer_id": 36046389, "question_id": 36046298, "link": "https://stackoverflow.com/questions/36046298/why-was-unsigned-int-causing-the-program-to-crash/36046389#36046389", "title": "Why was `unsigned int` causing the program to crash?", "body": "<p>the problem is probably from the following code:</p>\n\n<pre><code>for (j = strlen(word1) - 1; j &gt;= 0; j--)\n</code></pre>\n\n<p>because you defined j as unsigned int the for loop goes on for ever and never breaks.</p>\n"}, {"comments": [{"owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 0, "creation_date": 1458160664, "post_id": 36046396, "comment_id": 59741417, "body": "I&#39;m working in Visual Studio 2015, and yes, I am a beginner."}, {"owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "edited": false, "score": 0, "creation_date": 1458161094, "post_id": 36046396, "comment_id": 59741664, "body": "The warning should appear when I&#39;m debugging ? I get only a crash error saying something of a stack overflow."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1458161843, "post_id": 36046396, "comment_id": 59742128, "body": "The warning should appear when you compile your application. Not when you debug."}], "tags": [], "owner": {"reputation": 47569, "user_id": 3255455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5993e7ece129141878cd6419d39cc26e?s=128&d=identicon&r=PG&f=1", "display_name": "gnasher729", "link": "https://stackoverflow.com/users/3255455/gnasher729"}, "is_accepted": true, "score": 1, "last_activity_date": 1458160451, "creation_date": 1458160451, "answer_id": 36046396, "question_id": 36046298, "link": "https://stackoverflow.com/questions/36046298/why-was-unsigned-int-causing-the-program-to-crash/36046396#36046396", "title": "Why was `unsigned int` causing the program to crash?", "body": "<p>Beginners mistake: Consider that if i is an unsigned int, i >= 0 will always be true. It cannot be false. If you set i to 0 and then subtract 1, you will get a very large positive number. </p>\n\n<p>If your compiler didn't give you a warning, ask someone to show you how to turn more warnings on. </p>\n"}], "owner": {"reputation": 161, "user_id": 5845734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1JD90.jpg?s=128&g=1", "display_name": "CCBet", "link": "https://stackoverflow.com/users/5845734/ccbet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "closed_date": 1459751487, "accepted_answer_id": 36046396, "answer_count": 3, "score": 0, "last_activity_date": 1458160451, "creation_date": 1458160135, "question_id": 36046298, "link": "https://stackoverflow.com/questions/36046298/why-was-unsigned-int-causing-the-program-to-crash", "closed_reason": "Not suitable for this site", "title": "Why was `unsigned int` causing the program to crash?", "body": "<p>I had to make a program that checks if two words can be obtained one from the other by permutating the letters. I wrote the code as you can see below and I struggled quite a long time to find out why the program is crashing, and at some point I  had the idea to change the fundametal type of these variables from <code>unsigned int</code> (<code>unsigned int code = 0, i, j, counter = 0, ok = 1;</code>) to <code>integer</code> (<code>int code = 0, i, j, counter = 0, ok = 1;</code>) and now it works properly but I don't know what changed so that now it works. I know (please correct me if I'm wrong) that <code>unsigned int</code> goes from 0 (including 0) to a very large number. All the variables were not going under 0, so I don't know why it didin't work in the <code>unsigned int</code> version and how the fundamental type changing solved the crash.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string.h&gt;\n\nusing namespace std;\n\nint main()\n\n{   char word1[50], word2[50];\n    unsigned int code = 0, i, j, counter = 0, ok = 1;\n\n    cout &lt;&lt; \"Type in the first word and then press ENTER:\";\n    cin.getline(word1, 50);\n    cout &lt;&lt; \"Type in the second word and then press ENTER:\";\n    cin.getline(word2, 50);\n    cout &lt;&lt; endl;\n\n    if (strlen(word1) == strlen(word2)) //If the two words don't have the same lenght, it's impossible to obtain one word of the other by permutating it's letters.\n\n    {   for (i = 0; word1[i]; i++)  /*This nested FOR will generate a number in the code variable. The first digit will indicate how many times will the letter word1[0] be found in word2,\n                                    the second digit will indicate how many times will the letter word1[1] be found in word2 and so on until the end of word1*/\n        {   counter = 0;\n            for (j = 0; word2[j]; j++)\n                if (word1[i] == word2[j])\n                    counter += 1;\n\n            code = code * 10 + counter;\n        }\n\n        i = strlen(word1) - 1;\n\n        while (i &gt;= 0 &amp;&amp; ok)    /*In this loop we are checking if the code is valable also for the word1 itself. If it is, it means that the words can be obtained one of the other by permutating the letters*/\n        {   counter = 0;        \n            for (j = strlen(word1) - 1; j &gt;= 0; j--)\n                if (word1[i] == word1[j])\n                    counter++;\n\n            if (counter == code % 10)\n                ok = 1;\n            else\n                ok = 0;\n\n            code = code / 10;\n            i--;\n        }\n\n        if (ok)\n            cout &lt;&lt; \"Yes, the words can be obtained one of the other by permutating the letters.\";\n        else\n            cout &lt;&lt; \"No, the words can not be obtained one of the other by permutating the letters.\";\n    }\n\n    else\n        cout &lt;&lt; \"No, the words can not be obtained one of the other by permutating the letters.\";\n\n    cin.get();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "com", "atl"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458160290, "post_id": 36046274, "comment_id": 59741207, "body": "You do not seem to understand what you are talking about. Grab a good C++ book and start reading."}, {"owner": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458160418, "post_id": 36046274, "comment_id": 59741279, "body": "I understand c++. What I&#39;m talking about is COM."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458160487, "post_id": 36046274, "comment_id": 59741315, "body": "Nope, you don&#39;t. Otherwise you would understand that your question does not make any sense."}, {"owner": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458160574, "post_id": 36046274, "comment_id": 59741369, "body": "It would be helpful if you can tell me where it does not make any sense."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458160644, "post_id": 36046274, "comment_id": 59741402, "body": "@Danny Do you want to add a <i>class template</i> or a templated class? ATL is all about template classes."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458160736, "post_id": 36046274, "comment_id": 59741458, "body": "@Danny, your question is not unlike riddles from Alice in Wonderland. It&#39;s impossible to answer them. What do you mean by &#39;adding template class&#39;? How can ATL (wich is just a library) support or prevent you from having a class of your own? Like I said, it does not make sense."}, {"owner": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "edited": false, "score": 0, "creation_date": 1458161447, "post_id": 36046274, "comment_id": 59741887, "body": "Sorry I didn&#39;t my question clear. Should I change it to how can I add a template class to ATL project?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "edited": false, "score": 0, "creation_date": 1458161257, "post_id": 36046487, "comment_id": 59741762, "body": "Thank you for your answer. Yes I know the background of ATL is template classes which help us to build COM. I add ATL classes in VS2013 using ATL wizard. I didn&#39;t find any options there to let me add a template class. Could you give me some hint how to add template classes? Thank you again."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "edited": false, "score": 0, "creation_date": 1458163926, "post_id": 36046487, "comment_id": 59743258, "body": "@Danny <i>&quot;Could you give me some hint how to add template classes?&quot;</i> Just write the code. Are you actually asking for some wizard `dialog support?"}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1458160799, "creation_date": 1458160799, "answer_id": 36046487, "question_id": 36046274, "link": "https://stackoverflow.com/questions/36046274/how-can-i-add-a-template-class-to-atl-project/36046487#36046487", "title": "How can I add a template class to ATL project?", "body": "<blockquote>\n  <p>I am wondering if ATL support template class. If yes, could any one tell me how to add it?</p>\n</blockquote>\n\n<p>Yes, ATL supports template parameters (it's actually in the name <em>Active Template Library</em>) and you can build your own templated classes around these templates to aggregate things using meta programming techniques.</p>\n"}], "owner": {"reputation": 33, "user_id": 3559709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40f500b84723f1ccdf1c1294c1736bfd?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/3559709/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458162332, "creation_date": 1458160014, "last_edit_date": 1458162332, "question_id": 36046274, "link": "https://stackoverflow.com/questions/36046274/how-can-i-add-a-template-class-to-atl-project", "title": "How can I add a template class to ATL project?", "body": "<p>I am a beginner of COM (component object model) technology. Now I'm using ATL to build a com project in VS2013. I want to add a template class into the project using ATL wizard. But I don't know how. I did some search and find nothing about my question. </p>\n\n<p>I am wondering if ATL support template class. If yes, could any one tell me how to add it?</p>\n\n<p>Any help would be appreciated. </p>\n"}, {"tags": ["c++", "inheritance", "compilation"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "edited": false, "score": 0, "creation_date": 1458160779, "post_id": 36046367, "comment_id": 59741486, "body": "But what if I&#39;am using this objects on this pointers inside class?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "edited": false, "score": 0, "creation_date": 1458160846, "post_id": 36046367, "comment_id": 59741521, "body": "Then you need the .h files. If you implement the functions that need access to the objects that these pointers point to in a .cc file, then there is no problem at all."}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "edited": false, "score": 0, "creation_date": 1458161415, "post_id": 36046367, "comment_id": 59741865, "body": "Wow, thanks. All that time I really thought that I have to use <code>#include</code> only in <code>.h</code> file."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1458160360, "creation_date": 1458160360, "answer_id": 36046367, "question_id": 36046265, "link": "https://stackoverflow.com/questions/36046265/c-class-inheritance-expected-class-name-error/36046367#36046367", "title": "C++ Class inheritance &quot;expected class-name&quot; error", "body": "<p>You have circulary dependent .h files.</p>\n\n<p>In BaseClass.h:</p>\n\n<pre><code>#ifndef INHERITTEST_BASECLASS_H\n#define INHERITTEST_BASECLASS_H\n\n#include \"ElementClass.h\"  // Includes ElementClass.h\n</code></pre>\n\n<p>In ElementClass.h:</p>\n\n<pre><code>#ifndef INHERITTEST_ELEMENTCLASS_H\n#define INHERITTEST_ELEMENTCLASS_H\n\n#include \"ChildClass.h\"   // Which included BaseClass.h\n</code></pre>\n\n<p>You can remove those <code>#include</code> lines since you are using those classes by pointers only and a forward declaration is sufficient for that purpose.</p>\n"}, {"tags": [], "owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "is_accepted": false, "score": 0, "last_activity_date": 1458161616, "creation_date": 1458161616, "answer_id": 36046716, "question_id": 36046265, "link": "https://stackoverflow.com/questions/36046265/c-class-inheritance-expected-class-name-error/36046716#36046716", "title": "C++ Class inheritance &quot;expected class-name&quot; error", "body": "<p>When you're working with inheritance the following </p>\n\n<pre><code>#include \"ChildClass.h\"\nclass ChildClass;\n</code></pre>\n\n<p>is unnecessary, if you're going to break these into sepperate source files (which it looks like you are) you can say </p>\n\n<pre><code>#include \"ElementClass.h\"\n</code></pre>\n\n<p>in the source file of your derived class</p>\n"}], "owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1444, "favorite_count": 1, "accepted_answer_id": 36046367, "answer_count": 2, "score": 0, "last_activity_date": 1458161616, "creation_date": 1458159994, "question_id": 36046265, "link": "https://stackoverflow.com/questions/36046265/c-class-inheritance-expected-class-name-error", "title": "C++ Class inheritance &quot;expected class-name&quot; error", "body": "<p>My previous question was asked wrong, so I'll post it fixed.<br>\nI have this example throwing <br>\n<code>expected class-name before \u2018{\u2019 token</code><br>\nerror while compiling. I am understanding why is it fails, but I don't know how to fix it. Thank you.<br>\n<strong>BaseClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_BASECLASS_H\n#define INHERITTEST_BASECLASS_H\n\n#include \"ElementClass.h\"\n\nclass ElementClass;\n\nclass BaseClass\n{\n\nprivate:\n    ElementClass *m_someField;\n};\n\n\n#endif\n</code></pre>\n\n<p><br>\n<strong>ElementClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_ELEMENTCLASS_H\n#define INHERITTEST_ELEMENTCLASS_H\n\n#include \"ChildClass.h\"\n\nclass ChildClass;\n\nclass ElementClass\n{\nprivate:\n    ChildClass *m_class;\n};\n\n\n#endif\n</code></pre>\n\n<p><br>\n<strong>ChildClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_CHILDCLASS_H\n#define INHERITTEST_CHILDCLASS_H\n\n#include \"BaseClass.h\"\n\nclass ChildClass : public BaseClass\n{\n\n};\n\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "memory-alignment", "pragma"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1458160187, "post_id": 36046242, "comment_id": 59741139, "body": "If you didn&#39;t insist on putting a BOOL (32 bits) in front of a HANDLE (32 or 64 bits), the compiler wouldn&#39;t have to add padding. Order the elements by decreasing size, like HANDLEs, DWORDs, BOOL. That said, check system headers for examples of packing with MSVC."}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1458160798, "post_id": 36046242, "comment_id": 59741496, "body": "@UlrichEckhardt I ordered elements by decrasing size and offset of second <code>HANDLE</code> element is still 4. Is there a way to make each field offset aligned to 8?"}, {"owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1458161259, "post_id": 36046242, "comment_id": 59741764, "body": "Use pragma pack show option to display the actual settings."}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "edited": false, "score": 0, "creation_date": 1458161598, "post_id": 36046242, "comment_id": 59741983, "body": "@ZDF it shows <code>value of pragma pack(show) == 8</code>."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458161630, "post_id": 36046242, "comment_id": 59741998, "body": "<code>#pragma pack</code> can only make a structure tighter, never sparser. E.g. if you have <code>struct S { char a, b;}</code> the two members will be at offsets 0 and 1 regardless of packing. You could probably get to the desired outcome with something like <code>union {HANDLE hEvent; LONGLONG dummy;};</code> members."}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458162060, "post_id": 36046242, "comment_id": 59742225, "body": "@IgorTandetnik I need one structure definition which could be included from both x86 and x64 projects. HANDLE is 4 bytes on x86 and 8 bytes on x64. Is there a MSVC way to do it? Of course I can use <code>#ifdef _X86</code> and add dummy padding."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1458162092, "post_id": 36046242, "comment_id": 59742242, "body": "I&#39;m pretty sure you can tell the compile to align an object&#39;s address to a multiple of a number of bytes. I think that&#39;s actually what you want."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458162108, "post_id": 36046242, "comment_id": 59742253, "body": "Have you tried my suggestion and found it lacking, then? In what way did it fail to satisfy your requirements? Seems to <a href=\"http://rextester.com/WOG62385\" rel=\"nofollow noreferrer\">work for me</a>"}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458162439, "post_id": 36046242, "comment_id": 59742452, "body": "@IgorTandetnik of course it works; but I wonder if there is an another (maybe MSVC-specific) way like <code>#pragma pack</code> to make each field aligned to 8."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458162572, "post_id": 36046242, "comment_id": 59742526, "body": "Has my code not made each field aligned to 8? I fail to grasp the nature of the problem. What difficulty still remains to be resolved?"}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458162709, "post_id": 36046242, "comment_id": 59742607, "body": "@IgorTandetnik your code works perfectly, and I can use it. I wonder about if there is a built-in MSVC solution, something like <code>forcealign(8)</code> to do that. If no, I can use dummy paddings."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 5, "creation_date": 1458163036, "post_id": 36046242, "comment_id": 59742795, "body": "Ah. You are probably looking for <code>__declspec(align(8))</code>, like <a href=\"http://rextester.com/SQTHV80758\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1458163300, "post_id": 36046242, "comment_id": 59742926, "body": "@IgorTandetnik thank you, it works perfectly now :)"}], "owner": {"reputation": 491, "user_id": 1663200, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1d3a9b756e3299359d785bdc4e709d01?s=128&d=identicon&r=PG", "display_name": "cls", "link": "https://stackoverflow.com/users/1663200/cls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 647, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458164677, "creation_date": 1458159934, "question_id": 36046242, "link": "https://stackoverflow.com/questions/36046242/pragma-packpush-8-does-not-work-as-expected", "title": "#pragma pack(push, 8) does not work as expected", "body": "<p>I use Microsoft Visual Studio 2010 and Windows 7 x64. I write in C++.</p>\n\n<p>I have one structure, and I need proper access to it's fields both in x86 and x64 applications. That's why I added <code>#pragma pack(push, 8)</code>. Here is the structure:</p>\n\n<pre><code>#pragma pack(push, 8)\ntypedef struct \n{\n    BOOL    Inst;\n    HANDLE  hEvent;\n    HANDLE  hModuleMemory;\n    DWORD   dwModuleSize;\n    HANDLE  hFileMemory;\n    DWORD   dwFileSize;\n}\nINIT_DATA, *LPINIT_DATA;\n#pragma pack(pop)\n</code></pre>\n\n<p>But this does not work as expected; alignment is 4 bytes in x86. For example, this code:</p>\n\n<pre><code>DWORD dwOffset = offsetof(INIT_DATA, hEvent);\nDWORD dwSize   = sizeof(INIT_DATA);\n\nDebugPrint(DEBUG_INFO, \"dwOffset = %d; dwSize = %d\\n\", dwOffset, dwSize);\n</code></pre>\n\n<p>outputs this:</p>\n\n<pre><code>[INFO] &lt;main.cpp:572 TID:51536 ERR:0&gt; WinMain(): dwOffset = 4; dwSize = 24\n</code></pre>\n\n<p>If I change packing to <code>#pragma pack(push, 4)</code> output is still the same!</p>\n\n<p>How can I get 8-byte alignment to work?</p>\n"}, {"tags": ["c++", "ubuntu", "metis"], "comments": [{"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1458174356, "post_id": 36046189, "comment_id": 59747316, "body": "can you show us the result of <code>locate metis.h</code> ? On my system I get only a <code>metis.hpp</code> after installing such a package, which would explain why the include doesn&#39;t help you."}], "answers": [{"tags": [], "owner": {"reputation": 90, "user_id": 6281925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f933472f9410f0b762a595adf9426dc5?s=128&d=identicon&r=PG&f=1", "display_name": "ksyrium", "link": "https://stackoverflow.com/users/6281925/ksyrium"}, "is_accepted": false, "score": 5, "last_activity_date": 1477587733, "creation_date": 1477587733, "answer_id": 40290394, "question_id": 36046189, "link": "https://stackoverflow.com/questions/36046189/how-to-install-metis-on-ubuntu/40290394#40290394", "title": "How to install METIS on ubuntu", "body": "<p>You can try <code>sudo apt-get install libmetis-dev</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1622, "user_id": 7343388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0dc7456b14b1a70bd862e8495d36a6?s=128&d=identicon&r=PG", "display_name": "Soeren", "link": "https://stackoverflow.com/users/7343388/soeren"}, "is_accepted": false, "score": 2, "last_activity_date": 1483810933, "last_edit_date": 1483810933, "creation_date": 1482787048, "answer_id": 41336362, "question_id": 36046189, "link": "https://stackoverflow.com/questions/36046189/how-to-install-metis-on-ubuntu/41336362#41336362", "title": "How to install METIS on ubuntu", "body": "<p>BUILD.txt file from metis:</p>\n\n<blockquote>\n  <p>Building METIS requires CMake 2.8, found at <a href=\"http://www.cmake.org/\" rel=\"nofollow noreferrer\">http://www.cmake.org/</a>, as\n  well as GNU make. Assumming CMake and GNU make are installed, two\n  commands should suffice to build metis:</p>\n</blockquote>\n\n<pre><code> $ make config\n $ make\n</code></pre>\n\n<p>so, i tried not directly on ubuntu, but on my mac and it works in that order. \nafter the two make command i have the following folder strucure:</p>\n\n<pre><code>build\n-Darwin-x86_64 (the build architecture)\n -libmetis\n   -libmetis.a\n -programs\n   -gpmetis\n    ...\n</code></pre>\n\n<p>after you can call</p>\n\n<pre><code>make install\n</code></pre>\n\n<p>I make a little test example and it works. You are maybe interest in my CMake-File. This could be the solution for your problem:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.9)\nproject (MetisTest)\ninclude_directories(\"/usr/local/include\")\nlink_directories(\"/usr/local/lib\")\nadd_executable(metisTest main.cpp)\ntarget_link_libraries(metisTest metis)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6506935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06510429c6d701310960dd116ead68f6?s=128&d=identicon&r=PG&f=1", "display_name": "confu", "link": "https://stackoverflow.com/users/6506935/confu"}, "is_accepted": false, "score": 0, "last_activity_date": 1537183003, "creation_date": 1537183003, "answer_id": 52366516, "question_id": 36046189, "link": "https://stackoverflow.com/questions/36046189/how-to-install-metis-on-ubuntu/52366516#52366516", "title": "How to install METIS on ubuntu", "body": "<p>You may append your metis installation path to the environment variable CPLUS_INCLUDE_PATH. For example, in your ~/.bashrc, add:</p>\n\n<p><code>export CPLUS_INCLUDE_PATH=$HOME/metis/include:$CPLUS_INCLUDE_PATH</code></p>\n\n<p>then,</p>\n\n<p><code>source ~/.bashrc</code></p>\n\n<p>Please see more in the question <a href=\"https://stackoverflow.com/a/52366401/6506935\">Linux could not find metis.h</a>.</p>\n"}], "owner": {"reputation": 241, "user_id": 1091567, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1e0ab204196d369015d5d6a8c7b04fb1?s=128&d=identicon&r=PG", "display_name": "System", "link": "https://stackoverflow.com/users/1091567/system"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6746, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1537183003, "creation_date": 1458159719, "question_id": 36046189, "link": "https://stackoverflow.com/questions/36046189/how-to-install-metis-on-ubuntu", "title": "How to install METIS on ubuntu", "body": "<p>I want to install the METIS package on ubuntu.</p>\n\n<p>I tried the instructions on the install.txt file which says  to use </p>\n\n<pre><code>$ make install \n</code></pre>\n\n<p>which I did, after installing make as well.</p>\n\n<p>I also tried the</p>\n\n<pre><code>sudo apt-get install metis\n</code></pre>\n\n<p>which installed it successfully but </p>\n\n<p>when trying to use it in both cases I get</p>\n\n<pre><code>metis.h: No such file in directory compilation terminated\n</code></pre>\n\n<p>In case anyone asks I use g++ -I/path/to/file myprogram.cpp to specify the path where metis.h is.</p>\n\n<p>I believe I haven't done something correct in the installation but I can't determine what it is.</p>\n\n<p>Can someone help me with the installation process?</p>\n"}, {"tags": ["c++", "linux", "qt", "qprocess"], "comments": [{"owner": {"reputation": 477, "user_id": 5845844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787cdb5c42baff72c4869e874a00af33?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/5845844/radek"}, "edited": false, "score": 0, "creation_date": 1458160095, "post_id": 36046160, "comment_id": 59741090, "body": "Both with same <code>&#47;path</code>? Because there could be some bad symbol."}, {"owner": {"reputation": 2008, "user_id": 1074367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9058c070662d7560ecb21a93e523466b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1074367/michael"}, "reply_to_user": {"reputation": 477, "user_id": 5845844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787cdb5c42baff72c4869e874a00af33?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/5845844/radek"}, "edited": false, "score": 0, "creation_date": 1458160269, "post_id": 36046160, "comment_id": 59741196, "body": "It&#39;s not a problem, I&#39;ve tried with /tmp."}], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 286109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f7e7814da560e9d97ae8cfb174eec8?s=128&d=identicon&r=PG", "display_name": "onion", "link": "https://stackoverflow.com/users/286109/onion"}, "reply_to_user": {"reputation": 2008, "user_id": 1074367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9058c070662d7560ecb21a93e523466b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1074367/michael"}, "edited": false, "score": 0, "creation_date": 1458980824, "post_id": 36057646, "comment_id": 60097012, "body": "What happens is that when you use plain fork+exec the process uses the parents stdin/stdout but QProcess will create its own pipe."}], "tags": [], "owner": {"reputation": 407, "user_id": 286109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f7e7814da560e9d97ae8cfb174eec8?s=128&d=identicon&r=PG", "display_name": "onion", "link": "https://stackoverflow.com/users/286109/onion"}, "is_accepted": false, "score": 0, "last_activity_date": 1458210094, "creation_date": 1458210094, "answer_id": 36057646, "question_id": 36046160, "link": "https://stackoverflow.com/questions/36046160/command-run-with-shell-but-get-stuck-with-qprocess/36057646#36057646", "title": "Command run with shell but get stuck with QProcess", "body": "<p>It looks like the process is trying to read from stdin.</p>\n"}], "owner": {"reputation": 2008, "user_id": 1074367, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9058c070662d7560ecb21a93e523466b?s=128&d=identicon&r=PG", "display_name": "Michael", "link": "https://stackoverflow.com/users/1074367/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458230649, "creation_date": 1458159611, "last_edit_date": 1458230649, "question_id": 36046160, "link": "https://stackoverflow.com/questions/36046160/command-run-with-shell-but-get-stuck-with-qprocess", "title": "Command run with shell but get stuck with QProcess", "body": "<p>I'm trying to execute some command with QProcess. Executing from terminal works fine.</p>\n\n<p>For example, I want to execute following command: <code>fpscan /path --report --verbose=2 --nospin</code> (scanning files with f-prot antivirus).\nI'm trying the following code:</p>\n\n<pre><code>QProcess* p = new QProcess(this);\np-&gt;start(\"fpscan\", params);\n</code></pre>\n\n<p>process get stuck. </p>\n\n<p>From <code>ps -Al | grep fpscan</code> output I see, that this process opens another process.</p>\n\n<pre><code>process     |    WCHAN    |    TIME\n1           |    wait     |  00:00:00\n2           |    pipe_w   |  00:00:00\n</code></pre>\n\n<p>strace command:</p>\n\n<ol>\n<li>wait4(-1, </li>\n<li>read(0,</li>\n</ol>\n\n<p>Any suggestions?</p>\n\n<p>P.S.: another command <code>clamscan /path params</code> works fine with QProcess.</p>\n\n<p><strong>Update:</strong> I've tried to use fork, execl, and it works, so the problem is with QT and QProcess.</p>\n\n<pre><code>pid_t pid = fork();\nif (pid == 0) {\n    execl(\"/usr/local/bin/fpscan\", \"fpscan\", \"/path\", ... , NULL);\n}\n</code></pre>\n"}, {"tags": ["c++", "dll", "stl"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1458160124, "post_id": 36046131, "comment_id": 59741104, "body": "I think the reason is that <code>std::string</code> is an explicit specialization of <code>std::basic_string</code>. Hence, it is not a class template any more."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1458163422, "post_id": 36046131, "comment_id": 59742988, "body": "That applies to all four cases alike though, @RSahu. That said, I think that the answer in the mentioned SO post spreads quite some FUD in addition to the useful info. Take a look at e.g. Boost to get an idea how to do it correctly. It takes a bit more to set up, but then you don&#39;t have to compromise your interface for dynamic linking."}], "owner": {"reputation": 719, "user_id": 1522062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63d84f758a27d77d362bba09036e542c?s=128&d=identicon&r=PG", "display_name": "Zoltan Tirinda", "link": "https://stackoverflow.com/users/1522062/zoltan-tirinda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458159537, "creation_date": 1458159537, "last_edit_date": 1495541726, "question_id": 36046131, "link": "https://stackoverflow.com/questions/36046131/why-is-the-compiler-not-throwing-warning-c4251-when-the-stl-class-is-used-as-fun", "title": "Why is the compiler not throwing Warning c4251 when the STL class is used as function argument or return type", "body": "<p>The problem related to the Warning C4251 'X' needs to have dll-interface to be used by clients of class 'Y' is explained very well here: <a href=\"https://stackoverflow.com/questions/5661738/how-can-i-use-standard-library-stl-classes-in-my-dll-interface-or-abi\">How can I use Standard Library (STL) classes in my dll interface or ABI?</a></p>\n\n<p>The reason why it isn't good idea to have lets say std::string as member in a class which is exported from a library is clear for me and it makes sense. However, I don't really understand why it isn't a problem if I use an std::string as an argument type or as a return type?</p>\n\n<pre><code>class DllPort SampleClass\n{\nprivate:\n    std::string privateMember;  // Warning C4251\n\npublic:\n    std::string publicMember;   // Warning C4251\n\n    std::string publicFunction1();          // compiler says it is OK\n    void publicFunction2(std::string value);// compiler says it is OK\n};\n</code></pre>\n\n<p>I use Visual Studio 2015.</p>\n"}, {"tags": ["c++", "function", "swap"], "answers": [{"comments": [{"owner": {"reputation": 5563, "user_id": 5808727, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a8de86a7bb2dbb67425971abc1e1cef8?s=128&d=identicon&r=PG&f=1", "display_name": "Pooya", "link": "https://stackoverflow.com/users/5808727/pooya"}, "edited": false, "score": 0, "creation_date": 1458159754, "post_id": 36046187, "comment_id": 59740898, "body": "there is also a problem with the body"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1458159860, "last_edit_date": 1458159860, "creation_date": 1458159712, "answer_id": 36046187, "question_id": 36046128, "link": "https://stackoverflow.com/questions/36046128/why-wont-my-values-swap/36046187#36046187", "title": "Why won&#39;t my values swap?", "body": "<p>You need to pass the variables by reference in order for the modifications in the function to apply to the variables from the call site.  As it is right now all you are doing is modifying copies that get destroyed once the function ends.</p>\n\n<p>Change</p>\n\n<pre><code>void double_swap(double x, double y)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>void double_swap(double&amp; x, double&amp; y)\n</code></pre>\n\n<p>Also instead of hard coding the values lets do a real swap using</p>\n\n<pre><code>void double_swap(double&amp; x, double&amp; y)\n{\n    double temp = x;\n    x = y;\n    y = temp;\n}\n</code></pre>\n\n<p>You could also use pointers for the function paramters for this but then your call site would have to be changed to <code>double_swap(&amp;x,&amp;y);</code> and you would have to remember to reference the pointers in the function.</p>\n\n<p>Instead of doing all of this though we can just use <a href=\"http://en.cppreference.com/w/cpp/algorithm/swap\" rel=\"nofollow\"><code>std::swap</code></a> and let it do this for us.</p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 5623147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da068ffce1337828392e929ed1e3921c?s=128&d=identicon&r=PG&f=1", "display_name": "Matriac", "link": "https://stackoverflow.com/users/5623147/matriac"}, "is_accepted": false, "score": 0, "last_activity_date": 1458159795, "creation_date": 1458159795, "answer_id": 36046210, "question_id": 36046128, "link": "https://stackoverflow.com/questions/36046128/why-wont-my-values-swap/36046210#36046210", "title": "Why won&#39;t my values swap?", "body": "<p>When calling a function in c++ , There is 3 way to pass the parameters. The first one is by Copy where it only make a copy of the variable in parameters and then delete them. </p>\n\n<pre><code> void double_swap(double x, double y)\n</code></pre>\n\n<p>The second one is by Reference, where the paramaters refere to the real variable (Whats you want).</p>\n\n<pre><code> void double_swap(double&amp; x, double&amp; y)\n</code></pre>\n\n<p>And the last one is by address where you pass the address of the variables.</p>\n\n<pre><code>   void double_swap(double* x, double* y)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5880395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qfavy.jpg?s=128&g=1", "display_name": "xmaddiemuffin", "link": "https://stackoverflow.com/users/5880395/xmaddiemuffin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 36046187, "answer_count": 2, "score": 0, "last_activity_date": 1458159860, "creation_date": 1458159531, "question_id": 36046128, "link": "https://stackoverflow.com/questions/36046128/why-wont-my-values-swap", "title": "Why won&#39;t my values swap?", "body": "<p>I am supposed to write a function name <strong>double_swap</strong> that takes two doubles as arguments and interchanges the values that are stored in those arguments. The function should return no value, so I know that means it must be a void function.</p>\n\n<p>For example, if the following code fragment is executed,</p>\n\n<pre><code>int main()\n{\ndouble x = 4.8, y = 0.7;\ndouble_swap(x,y);\ncout&lt;&lt;\"x = \"&lt;&lt;x&lt;&lt;\" y = \"&lt;&lt;y;\n}\n</code></pre>\n\n<p>The output will be:\nx = 0.7 y = 4.8</p>\n\n<p>The program I wrote is not swapping the values. I'd greatly appreciate if someone could point out my errors.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nvoid double_swap(double x, double y)\n{\n        x = 1.9;\n        y = 4.2;\n}\n\nint main()\n{\n        double x = 4.2, y = 1.9;\n        double_swap(x,y);\n        cout&lt;&lt;\"x = \"&lt;&lt;x&lt;&lt;\" y = \"&lt;&lt;y&lt;&lt;endl;\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "cryptography", "gmp"], "answers": [{"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1458174164, "last_edit_date": 1458174164, "creation_date": 1458173512, "answer_id": 36049374, "question_id": 36046023, "link": "https://stackoverflow.com/questions/36046023/linking-problems-with-gmp-and-xcode/36049374#36049374", "title": "Linking problems with GMP and Xcode", "body": "<p>On my Ubuntu 15.10(64), libgmp installed into </p>\n\n<pre><code>&gt; /usr/lib/i386-linux-gnu/libgmp.so.10\n&gt; /usr/lib/i386-linux-gnu/libgmp.so.10.2.0\n&gt; /usr/lib/i386-linux-gnu/openssl-1.0.0/engines/libgmp.so\n&gt; /usr/lib/x86_64-linux-gnu/libgmp.a /usr/lib/x86_64-linux-gnu/libgmp.so\n&gt; /usr/lib/x86_64-linux-gnu/libgmp.so.10\n&gt; /usr/lib/x86_64-linux-gnu/libgmp.so.10.2.0\n&gt; /usr/lib/x86_64-linux-gnu/libgmpxx.a\n&gt; /usr/lib/x86_64-linux-gnu/libgmpxx.so\n&gt; /usr/lib/x86_64-linux-gnu/libgmpxx.so.4\n&gt; /usr/lib/x86_64-linux-gnu/libgmpxx.so.4.4.0\n</code></pre>\n\n<p>I found this using command \"locate libgmp\".  (locate searches what  updatedb updates.)</p>\n\n<p>You say you 'installed' it locally?  I ran install without any options.   Maybe your linker is not informed about where to look for the libs?  Perhaps  add a \"-L 'local location'\"?</p>\n\n<p>Hope this helps ... </p>\n"}], "owner": {"reputation": 83, "user_id": 2131960, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/03d91d2990cce33035c0d44436928265?s=128&d=identicon&r=PG&f=1", "display_name": "heming", "link": "https://stackoverflow.com/users/2131960/heming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458174164, "creation_date": 1458159207, "question_id": 36046023, "link": "https://stackoverflow.com/questions/36046023/linking-problems-with-gmp-and-xcode", "title": "Linking problems with GMP and Xcode", "body": "<p>I am trying to run a C++ project which has also dependence to PBC (<a href=\"https://crypto.stanford.edu/pbc/\" rel=\"nofollow\">https://crypto.stanford.edu/pbc/</a>) and GMP (<a href=\"https://gmplib.org\" rel=\"nofollow\">https://gmplib.org</a>). I have installed PBC and GMP in the /usr/local/ directory. For this project I added the PBC (pbc-0.5.14) and GMP (gmp-6.1.0) libraries manually (I dragged those libraries into my project). </p>\n\n<p>When I add the -lgmp -lgmpxx flags into Other linker flags in Xcode (Version 7.2) I got this: </p>\n\n<pre><code>ld: library not found for -lgmp\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>When I build (and clean) without Other linker flags I got:</p>\n\n<pre><code>Undefined symbols for architecture x86_64:\n  \"_pairing_clear\", referenced from:\n      Member::~Member() in member.o\n      Manager::~Manager() in manager.o\n      Verifier::~Verifier() in verifier.o\n  \"_pairing_init_set_str\", referenced from:\n      Member::Member() in member.o\n      Manager::Manager() in manager.o\n      Verifier::Verifier() in verifier.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Did anyone know how to fix this issue or any suggestions?\nThanks.</p>\n"}, {"tags": ["c++", "date", "date-arithmetic"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458159150, "post_id": 36045961, "comment_id": 59740520, "body": "Calendars have been modified over the years.  You will need to use the adjustment in your program."}, {"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1458159227, "post_id": 36045961, "comment_id": 59740569, "body": "Are you aware of the <i><a href=\"http://www.cplusplus.com/reference/ctime/\" rel=\"nofollow noreferrer\">C time functions</a></i>?"}, {"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 2, "creation_date": 1458159429, "post_id": 36045961, "comment_id": 59740683, "body": "If the answer below doesn&#39;t fix your problem, please write an MCVE.  (I started to debug this myself, but why recreate your code when all you have to do is post it?)"}, {"owner": {"reputation": 199, "user_id": 5272740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d171d615ba7da8335044482e2f05d94e?s=128&d=identicon&r=PG&f=1", "display_name": "Kenta", "link": "https://stackoverflow.com/users/5272740/kenta"}, "edited": false, "score": 0, "creation_date": 1458159792, "post_id": 36045961, "comment_id": 59740923, "body": "I am aware of C time functions, but the purpose of this lesson is to create classes, not to use existing libraries. And I didn&#39;t think the Gregorian calendar has been modified since 1853. That is why my program does not account for anything before that."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5272740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d171d615ba7da8335044482e2f05d94e?s=128&d=identicon&r=PG&f=1", "display_name": "Kenta", "link": "https://stackoverflow.com/users/5272740/kenta"}, "edited": false, "score": 0, "creation_date": 1458159913, "post_id": 36046038, "comment_id": 59740988, "body": "Oh my goodness... such a simple mistake. There is still a small amount of error somewhere though. That reduced the error by a lot though."}], "tags": [], "owner": {"reputation": 8201, "user_id": 3690024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2d5067f52318f0ed4db9eca0b2cda1?s=128&d=identicon&r=PG", "display_name": "AJNeufeld", "link": "https://stackoverflow.com/users/3690024/ajneufeld"}, "is_accepted": true, "score": 4, "last_activity_date": 1458159710, "last_edit_date": 1458159710, "creation_date": 1458159286, "answer_id": 36046038, "question_id": 36045961, "link": "https://stackoverflow.com/questions/36045961/how-many-days-between-two-dates-c/36046038#36046038", "title": "How many days between two dates C++", "body": "<p>Problem 1:</p>\n\n<pre><code>int daysInMonth[]={0,31,28,31,30,31,30,31,31,31,31,30,31};\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>int daysInMonth[]={0,31,28,31,30,31,30,31,31,30,31,30,31};\n//                                           ^^\n</code></pre>\n\n<hr>\n\n<p>Problem 2:</p>\n\n<p>if the current <code>year</code> is a leap-year, and <code>month</code> is greater than 2, you'll also need to add one day to account for February 29th of the current year.</p>\n"}], "owner": {"reputation": 199, "user_id": 5272740, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d171d615ba7da8335044482e2f05d94e?s=128&d=identicon&r=PG&f=1", "display_name": "Kenta", "link": "https://stackoverflow.com/users/5272740/kenta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3715, "favorite_count": 0, "accepted_answer_id": 36046038, "answer_count": 1, "score": 0, "last_activity_date": 1458159710, "creation_date": 1458158993, "question_id": 36045961, "link": "https://stackoverflow.com/questions/36045961/how-many-days-between-two-dates-c", "title": "How many days between two dates C++", "body": "<p>I have a program that uses two functions I have defined inside a class. My class works fine, but my program always returns an amount that is some amount of days off. There is more error when the dates are farther apart. My code is designed to in one function calculate the total amount of days since 1582, and another function subtracts the higher amount from the lesser. Where am I getting the error from? I know it may not be the most efficient way to do things (cpu wise) but can someone find where my logic is messed up? This accounts for leap years as well. I have been checking my program against a website <a href=\"http://www.timeanddate.com/date/durationresult.html\" rel=\"nofollow\" title=\"here\">http://www.timeanddate.com/date/durationresult.html</a></p>\n\n<pre><code>int Date::totalDays()\n{\n    int totalDays = 0;\n    int daysInMonth[]={0,31,28,31,30,31,30,31,31,31,31,30,31};\n    totalDays += day;\n    for (int i = month-1; i &gt; 0; i--)\n    {\n        totalDays += daysInMonth[i];\n    }\n    for (int i = year-1; i &gt; 1582; i--)\n    {\n        if(year % 100 == 0)\n        {\n            if(year % 400 == 0)\n                totalDays += 366;\n            else\n                totalDays += 365;\n        }\n        else\n        {\n            if(year % 4 == 0)\n                totalDays += 366;\n            else\n                totalDays += 365;\n        }\n    }\n    return totalDays;\n}\n\nint Date::daysBetween(Date other)\n{\n    if (this-&gt;totalDays() &gt; other.totalDays())\n        return this-&gt;totalDays() - other.totalDays();\n    else\n        return other.totalDays() - this-&gt;totalDays();\n}\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "qt", "mingw", "qt-creator"], "comments": [{"owner": {"reputation": 2405, "user_id": 2216129, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/U0xqx.jpg?s=128&g=1", "display_name": "Topological Sort", "link": "https://stackoverflow.com/users/2216129/topological-sort"}, "edited": false, "score": 0, "creation_date": 1458158994, "post_id": 36045890, "comment_id": 59740421, "body": "What compiler are you using?  You might make that one of your tags."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1458158996, "post_id": 36045890, "comment_id": 59740424, "body": "You don&#39;t have a class named <code>LibB</code> .. you have <code>LibBClass</code>, you probably meant that."}, {"owner": {"reputation": 3508, "user_id": 2366975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ae4a011fee0b6009688aabb269cda8a8?s=128&d=identicon&r=PG", "display_name": "user2366975", "link": "https://stackoverflow.com/users/2366975/user2366975"}, "edited": false, "score": 0, "creation_date": 1458159060, "post_id": 36045890, "comment_id": 59740456, "body": "Yes I noticed immediatley after writing. On SO i see this, but not the last hour when coding... Well I am editing now to explain my original problem with the import of libA in another project."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458170199, "post_id": 36045890, "comment_id": 59745947, "body": "Please, give some clarifications. First, what do you mean by <code>The Gui application crashes as soon as I click on compile</code>? Qt Creator crashes or your application has a compile button? Second, does your application run ok if you manually copy all the dll files it depends on to the folder with your exe file?"}, {"owner": {"reputation": 3508, "user_id": 2366975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ae4a011fee0b6009688aabb269cda8a8?s=128&d=identicon&r=PG", "display_name": "user2366975", "link": "https://stackoverflow.com/users/2366975/user2366975"}, "edited": false, "score": 0, "creation_date": 1458202104, "post_id": 36045890, "comment_id": 59756741, "body": "It crashes when I click on the green triangle button of Qt Creator. The app is not running then. I meanwhile got it working by copying some of the dlls of the 3rd party lib (e.g. &quot;LibB&quot;) and the dll of my own lib (&quot;LibA&quot;) to the same folder (no subfolders, as opposed to when I created &quot;LibA&quot;) of my GUI app. My question is still there, because how do I know to which folder to copy all the needed dlls? Now in the end, they are in another folder (relative to the executable) than while creating LibA."}], "owner": {"reputation": 3508, "user_id": 2366975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ae4a011fee0b6009688aabb269cda8a8?s=128&d=identicon&r=PG", "display_name": "user2366975", "link": "https://stackoverflow.com/users/2366975/user2366975"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458163153, "creation_date": 1458158735, "last_edit_date": 1458163153, "question_id": 36045890, "link": "https://stackoverflow.com/questions/36045890/deploying-dynamic-libraries-folder-structure-library-placement", "title": "Deploying dynamic libraries: folder structure library placement", "body": "<p>I want to create a dynamic library A that includes another dynamic library B.\nThe library A itself is used in a project that creates a GUI that uses A. The Gui application crashes as soon as I click on compile. I  think it is a library import issue.</p>\n\n<p>So I set up a minimal example, that you can find at the end of the question.\nIn the minimal example, I can get the main project working, but not in the real project. I am missing the analogy.</p>\n\n<p>As I think from the example at the end, it seems to boil down to the placing of the libraries of B in my folder structure. My directory structure is like</p>\n\n<pre><code>LibA\n     include (include folder for the class \"MainUsesLibA\"\n        libaclass.h\n        libbclass.h\n        libb.dll (copied from output of LibB compilation)\n    LibA.pro\n    libaclass.cpp\n    main.cpp\nLibB\n    include\n      libaclass.h      \n    LibB.pro\n    libbclass.cpp\n    main.cpp\nMainUsesLibA\n    libs\n        liba.dll\n        libaclass.h  &lt;-- you do only need libaclass.h, not libbclass.h\n        libb.dll     &lt;-- must be supported, else CRASH **before** compiling! \n                         This was my initial error (*)\n</code></pre>\n\n<p>(*) So, this is the main question: Dynamic libraries must be deployed until the end, even if they are used inside another dll. Clear about that. But with my main AudioPlayer app, I also tried this and first failed (now have to check again after things are more clear to me). </p>\n\n<p><strong>The question is: To which directory do I have to copy the 'libb.dll' in general so that 'liba.dll' finds it? I do not have to specify 'libb.dll' in the pro-file, but I need to have it in the project directory. Where exactly? Do I know this from the inclusion inside of LibA? Or is it always in the same directory of LibA?</strong></p>\n\n<p>There is the library \"libB\" that is used in library \"libA\" that is used in the main app \"MainUsesLibA\". </p>\n\n<p>LibB.pro</p>\n\n<pre><code>QT       += core\nQT       -= gui\n\nTARGET = libb\nCONFIG   += console\nCONFIG   -= app_bundle\n\nTEMPLATE = lib\n\nDEFINES += TEST_BUILD_LIBB\n\nINCLUDEPATH += \\\n$$PWD/include\n\nSOURCES += main.cpp \\\n    libbclass.cpp\n\nHEADERS += \\\n$$PWD/include/libbclass.h\n</code></pre>\n\n<p>libbclass.h</p>\n\n<pre><code>#ifndef LIBBCLASS_H\n#define LIBBCLASS_H\n\n#include &lt;QObject&gt;\n\n#if defined TEST_BUILD_LIBB\n    #define TEST_COMMON_DLLSPEC Q_DECL_EXPORT\n#else\n    #define TEST_COMMON_DLLSPEC Q_DECL_IMPORT\n#endif\n\nclass TEST_COMMON_DLLSPEC LibBClass : public QObject\n{\npublic:\n    LibBClass(QObject* parent = 0);\n    void sayHello();\n};\n\n#endif // LIBBCLASS_H\n</code></pre>\n\n<p>libbclass.cpp</p>\n\n<pre><code>#include \"libbclass.h\"\n#include &lt;QDebug&gt;\nLibBClass::LibBClass(QObject* parent) : QObject(parent){\n\n}\nvoid LibBClass::sayHello(){\n    qDebug()&lt;&lt;\"Lib B: Hello\";\n}\n</code></pre>\n\n<p>The lib \"libB\" is created and I copy the dll to the include dir of LibA.</p>\n\n<p>LibA.pro</p>\n\n<pre><code>QT       += core\nQT       -= gui\n\nTARGET = liba\nCONFIG   += console\nCONFIG   -= app_bundle\n\nTEMPLATE = lib\n\nDEFINES += TEST_BUILD_LIBA\n\nLIBS += -L$$PWD/include/ -lb\n\nINCLUDEPATH += $$PWD/include\n\nSOURCES += \\\nmain.cpp \\\nlibaclass.cpp\n\nHEADERS += \\\ninclude/libaclass.h \\\ninclude/libbclass.h\n</code></pre>\n\n<p>libaclass.h</p>\n\n<pre><code>#ifndef LIBACLASS_H\n#define LIBACLASS_H\n\n#include &lt;QObject&gt;\n\n#if defined TEST_BUILD_LIBA\n    #define TEST_COMMON_DLLSPEC Q_DECL_EXPORT\n#else\n    #define TEST_COMMON_DLLSPEC Q_DECL_IMPORT\n#endif\n\nclass LibBClass;\nclass TEST_COMMON_DLLSPEC LibAClass : public QObject\n{\n    Q_OBJECT\npublic:\n    LibAClass(QObject *parent = 0);\n    void sayHello();\nprivate:\n    LibBClass* libB;\n};\n\n#endif // LIBACLASS_H\n</code></pre>\n\n<p>libaclass.cpp</p>\n\n<pre><code>#include \"libaclass.h\"\n#include \"libbclass.h\"\n\n#include &lt;QDebug&gt;\n\nLibAClass::LibAClass(QObject* parent) : QObject(parent){\n    libB = new LibBClass(this); \n}\nvoid LibAClass::sayHello(){\n    qDebug()&lt;&lt;\"LibA: Hello\";\n    libB-&gt;sayHello(); \n}\n</code></pre>\n\n<p>MainUsesLibA.pro</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = MainUsesLibA\nTEMPLATE = app\n\nLIBS += -L$$PWD/libs/ -la    &lt;-- only specify the library LibA! \n                                 You do not need to specify LibB! (At least for compiling)\n\nINCLUDEPATH += $$PWD/libs\n\nSOURCES += \\\nmain.cpp\\\nmainwindow.cpp\n\nHEADERS  += \\\nmainwindow.h \\\nlibs/libaclass.h\n\nFORMS    += mainwindow.ui\n</code></pre>\n"}, {"tags": ["c++", "windows", "path", "environment"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458158764, "post_id": 36045704, "comment_id": 59740291, "body": "What&#39;s <code>env()</code> actually? Environment variables can be accessed using the <a href=\"http://stackoverflow.com/questions/631664/accessing-environment-variables-in-c\"><code>getenv()</code></a> function."}, {"owner": {"reputation": 25, "user_id": 4491037, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec48be3fbd161f0135ad8fc05fa1f798?s=128&d=identicon&r=PG&f=1", "display_name": "Marabunta", "link": "https://stackoverflow.com/users/4491037/marabunta"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458158856, "post_id": 36045704, "comment_id": 59740340, "body": "temp and Homedrive are neccessary here to replace the full paths of PSArg"}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "edited": false, "score": 0, "creation_date": 1458159852, "post_id": 36045704, "comment_id": 59740955, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 25, "user_id": 4491037, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec48be3fbd161f0135ad8fc05fa1f798?s=128&d=identicon&r=PG&f=1", "display_name": "Marabunta", "link": "https://stackoverflow.com/users/4491037/marabunta"}, "edited": false, "score": 0, "creation_date": 1458162076, "post_id": 36045704, "comment_id": 59742232, "body": "did, could you help with that?"}], "owner": {"reputation": 25, "user_id": 4491037, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec48be3fbd161f0135ad8fc05fa1f798?s=128&d=identicon&r=PG&f=1", "display_name": "Marabunta", "link": "https://stackoverflow.com/users/4491037/marabunta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485654142, "creation_date": 1458158046, "last_edit_date": 1485654142, "question_id": 36045704, "link": "https://stackoverflow.com/questions/36045704/c-build-full-path", "title": "C++ build full Path", "body": "<p>I can't build the full path using the variables.\nHow would this work?\nMore code as requested:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;Windows.h&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;Shellapi.h&gt;\n#include &lt;urlmon.h&gt;\n#pragma comment(lib, \"urlmon.lib\")\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\n wchar_t* env(wchar_t* environmentVariable)\n{\n    wchar_t* buffer;\n    size_t bufferSize;\n    errno_t errorCode;\n    errorCode = _wdupenv_s(&amp;buffer, &amp;bufferSize, environmentVariable);\n    return buffer;\n}\n\nint WINAPI WinMain(HINSTANCE instanceHandle, HINSTANCE, char*, int)\n{\n\n    LPWSTR PSPath = env(_TEXT(\"SystemRoot\"));\n    LPWSTR TEMP2 = env(_TEXT(\"TEMP\"));\n    LPWSTR HOMEDRIVE = env(_TEXT(\"HOMEDRIVE\"));\n    LPWSTR PSPathexe = (_TEXT(\"powershell.exe\"));\n    std::stringstream BuildPath;\n    BuildPath &lt;&lt; \"-noexit -Executionpolicy bypass -File (($env:temp) + '\\\\psscript.ps1') -Filename psscript -Folderpath (($env:systemdrive)+ '\\\\deployment')\";\n    std::string s = BuildPath.str();\n    LPWSTR PSPathexe = s.c_str();\n\n\n    STARTUPINFO si;\n    PROCESS_INFORMATION pi;\n\n    ZeroMemory(&amp;si, sizeof(si));\n    si.cb = sizeof(si);\n    ZeroMemory(&amp;pi, sizeof(pi));\n    ShellExecute(NULL, NULL, PSPathexe, s, NULL, SW_SHOW);\n\n    return 0;\n}\n</code></pre>\n\n<p>The only thing I need is the Buildpath, currently build in PS in the string, I don't expect that this will work.\nBut I can't even convert this to LPWSTR, so I'm totally stuck here.</p>\n"}, {"tags": ["c++", "file", "size", "istream"], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 5735630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a01dacc93f117afa749969161fc3a43?s=128&d=identicon&r=PG&f=1", "display_name": "IGarFieldI", "link": "https://stackoverflow.com/users/5735630/igarfieldi"}, "is_accepted": false, "score": 0, "last_activity_date": 1458158240, "creation_date": 1458158240, "answer_id": 36045746, "question_id": 36045606, "link": "https://stackoverflow.com/questions/36045606/c-istream-counts-every-newline-in-a-txt-file-as-two/36045746#36045746", "title": "c++: Istream counts every newline in a .txt file as two", "body": "<p>Windows stores newlines as two characters: '\\r\\n', known as carriage return and line feed. That's why it's counted twice: there are actually two characters to be counted.</p>\n"}, {"tags": [], "owner": {"reputation": 437, "user_id": 3868157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea640d71ffc26471c0471a551fdc262?s=128&d=identicon&r=PG&f=1", "display_name": "cisnjxqu", "link": "https://stackoverflow.com/users/3868157/cisnjxqu"}, "is_accepted": false, "score": 1, "last_activity_date": 1458158494, "creation_date": 1458158494, "answer_id": 36045821, "question_id": 36045606, "link": "https://stackoverflow.com/questions/36045606/c-istream-counts-every-newline-in-a-txt-file-as-two/36045821#36045821", "title": "c++: Istream counts every newline in a .txt file as two", "body": "<p>Windows uses \"\\r\\n\" to return to the beginning of the line ('\\r') and begin a new one ('\\n'). </p>\n\n<p>To remove them from your count you have to read the whole file and count the number of '\\r's.</p>\n"}, {"tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 1, "last_activity_date": 1458226951, "last_edit_date": 1458226951, "creation_date": 1458158777, "answer_id": 36045900, "question_id": 36045606, "link": "https://stackoverflow.com/questions/36045606/c-istream-counts-every-newline-in-a-txt-file-as-two/36045900#36045900", "title": "c++: Istream counts every newline in a .txt file as two", "body": "<p>To add to the other answers, if you want to read special characters such as newline characters, you should open your file in <code>binary</code> mode, not text mode.  </p>\n\n<pre><code>ifstream f(IN_FILE, ios::in | ios::binary);\n</code></pre>\n\n<p>If you don't open the file in binary mode, the actual characters that make up the <code>'\\n'</code> are translated by the runtime to a single character (namely <code>'\\n'</code>). So in text mode, you don't get the \"real\" version of the file in terms of all of the actual characters that the file consists of.   </p>\n\n<p>In addition, functions such as <code>seekg()</code> and <code>tellg()</code> will not work as expected with a file opened in text mode, or at the very least, will give you \"wrong results\" (actually not wrong to the functions themselves, but wrong if you're writing a program that tries to \"hone in\" on a position within the file).  Again, the newline (and EOF) translation that is done under the hood by the runtime gets in the way of these functions working as you would expect them to.  </p>\n\n<p>On the other hand, a file opened in binary mode allows these functions to work as expected -- no translation of newline, or EOF -- whatever the individual bytes that makes up the file contents are, that is what you get.</p>\n\n<p>The next thing you need to determine is whether it is a Unix text file or a Windows text file.  Depending on which one it is, the line endings will be different. </p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 4939284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e9044e8e97ead584c55fe3e941f65b9?s=128&d=identicon&r=PG&f=1", "display_name": "Anthony West", "link": "https://stackoverflow.com/users/4939284/anthony-west"}, "is_accepted": false, "score": 0, "last_activity_date": 1458158966, "creation_date": 1458158966, "answer_id": 36045957, "question_id": 36045606, "link": "https://stackoverflow.com/questions/36045606/c-istream-counts-every-newline-in-a-txt-file-as-two/36045957#36045957", "title": "c++: Istream counts every newline in a .txt file as two", "body": "<p>I am assuming that you are running on Windows. If not, disregard my answer below.</p>\n\n<p>Windows stores new line characters in text files as two characters (CR LF or '\\r' '\\n'). So, seeking to the end of the file and calling tellg() will return the binary size of the file (60), not the text size (49).</p>\n\n<p>In order to get the correct text size (49), one solution would be to count each new line character (11) and subtract that number from the total byte size.</p>\n"}], "owner": {"reputation": 13, "user_id": 6073498, "user_type": "registered", "profile_image": "https://graph.facebook.com/1119330731431056/picture?type=large", "display_name": "Micha\u0142 Iljicz Piechowski", "link": "https://stackoverflow.com/users/6073498/micha%c5%82-iljicz-piechowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 36045900, "answer_count": 4, "score": 1, "last_activity_date": 1458226951, "creation_date": 1458157709, "question_id": 36045606, "link": "https://stackoverflow.com/questions/36045606/c-istream-counts-every-newline-in-a-txt-file-as-two", "title": "c++: Istream counts every newline in a .txt file as two", "body": "<p>I've got a slight problem. It appears that for some reason my function, when counting the size of a .txt file, counts a newline as it was two chars instead of one. Here's the function:</p>\n\n<pre><code>#define IN_FILE \"in_mat.txt\"    \n\n#define IN_BUF\n#ifdef IN_BUF\nvoid inBuf(char *(&amp;b)){\n\n    streampos size;\n\n    ifstream f(IN_FILE, ios::in);\n\n    f.seekg(0,ios::end);\n    size=f.tellg();\n\n    b=new char[size];\n\n    f.seekg(0, ios::beg);\n    f.read(b, size);\n\n    f.close();\n}\n#endif\n</code></pre>\n\n<p>And here's the read file:</p>\n\n<pre><code>2 2\n1 0\n0 1\n2 2\ni 0\n0 -i\n2 2\n0 1\n-1 0\n2 2\n0 i\ni 0\n</code></pre>\n\n<p>Earlier, i've put some couts, and it appears, that size=60, while the actual size is 49 (checked it), and the count of newlines in the file is 11, so exactly 60-49. Could somebody help me with that?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "edited": false, "score": 0, "creation_date": 1500091728, "post_id": 36045789, "comment_id": 77199927, "body": "What are you talking about? There&#39;s no Recent, Online, or Installed menu options anywhere in VS2015 that I can see. Do you have screenshots of what you&#39;re talking about? Furthermore, your link does not describe how to <i>download</i> them in greater detail, only how to modify the installer."}], "tags": [], "owner": {"reputation": 2422, "user_id": 3829459, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4362c547ff7ac8eee971e312e4621ed?s=128&d=identicon&r=PG", "display_name": "Szeki", "link": "https://stackoverflow.com/users/3829459/szeki"}, "is_accepted": false, "score": 0, "last_activity_date": 1458162161, "last_edit_date": 1458162161, "creation_date": 1458158363, "answer_id": 36045789, "question_id": 36045572, "link": "https://stackoverflow.com/questions/36045572/i-have-installed-the-visual-studio-2015-but-there-is-no-c-project/36045789#36045789", "title": "i have installed the Visual Studio 2015, but there is no C++ Project.?", "body": "<p>Go to the <code>online</code> menu (it's below <code>Recent</code> and <code>Installed</code>. There you'll be able to download C++ templates and samples. See this <a href=\"https://blogs.msdn.microsoft.com/vcblog/2015/07/24/setup-changes-in-visual-studio-2015-affecting-c-developers/\" rel=\"nofollow\">MSDN</a> article which describes it in greater details.</p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 3, "last_activity_date": 1458161469, "creation_date": 1458161469, "answer_id": 36046681, "question_id": 36045572, "link": "https://stackoverflow.com/questions/36045572/i-have-installed-the-visual-studio-2015-but-there-is-no-c-project/36046681#36046681", "title": "i have installed the Visual Studio 2015, but there is no C++ Project.?", "body": "<p>The VS2015 installer does not install C++ by default. </p>\n\n<p>Since you already have Visual Studio installed, you can modify the existing install. </p>\n\n<ol>\n<li>On Control Panel->Programs and Features (or run appwiz.cpl) find and run  the Installer for Visual Studio 2015. </li>\n<li>Wait for Installer dialog to load.</li>\n<li>Click the Modify button on the bottom of the installer dialog.</li>\n<li>On the Features Tab, expand Programming Languages.</li>\n<li>Select Visual C++.</li>\n<li>Click the UPDATE button on the bottom right.</li>\n</ol>\n\n<p>That should do it. You may have to insert the install media or suffer through a download, but these days Windows caches the installer info so everything needed may already be present on your system.</p>\n"}, {"tags": [], "owner": {"reputation": 5461, "user_id": 3543437, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/947362c9bddd67410a62fe6b02b5487d?s=128&d=identicon&r=PG&f=1", "display_name": "kayleeFrye_onDeck", "link": "https://stackoverflow.com/users/3543437/kayleefrye-ondeck"}, "is_accepted": false, "score": 0, "last_activity_date": 1500334732, "last_edit_date": 1500334732, "creation_date": 1500086322, "answer_id": 45113936, "question_id": 36045572, "link": "https://stackoverflow.com/questions/36045572/i-have-installed-the-visual-studio-2015-but-there-is-no-c-project/45113936#45113936", "title": "i have installed the Visual Studio 2015, but there is no C++ Project.?", "body": "<p>While most users will be unblocked by the accepted solution, there is another scenario where Visual C++ is not working as intended for VS2015. </p>\n\n<p>I was installing both VS2015 and VS2017 on the same system on the same day. Long story short, I got <a href=\"https://developercommunity.visualstudio.com/solutions/68949/view.html\" rel=\"nofollow noreferrer\">this person's problem</a>.</p>\n\n<p>From the link:</p>\n\n<blockquote>\n  <p>I am also running into this -- but in my case, I also installed full\n  VS2015 Pro. It shows that the VC++ common tools are installed, but\n  they are not on disk in the usual location, they seem to be in the\n  MSVS/Shared folder (Program Files (x86)/Microsoft Visual\n  Studio/Shared/14.0/VC/bin/cl.exe reports version 19.00.124218.2).\n  Uninstalling VS2015 removes these, and reinstalling puts them back in\n  Shared.</p>\n  \n  <p>For me at least, it goes worse than just the batch files -- I can't\n  actually create any C++ projects. Trying to create one just causes the\n  \"New Project\" window to pop up again; no error, no warning.</p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p>No amount of uninstalling components from both 2015 or 2017 got me\n  into a usable state (Shared\\14.0\\VC still persisted as the install\n  dir, I couldn't find what component was keeping those tools on-disk\n  and preventing them from being removed). I ended up just copying the\n  contents of \"Microsoft Visual Studio/Shared/14.0\" into the \"Microsoft\n  Visual Studio 14.0\" folder -- a gross hammer, and VS2015 still can't\n  create C++ projects, but it got me unstuck, and existing build systems\n  started finding tools again.</p>\n  \n  <p>VS team -- I totally get the goals of the layout change, and I love\n  what you guys are doing with VS overall. But please treat this as a\n  major bug; you can't decide to permanently change the location of\n  build tools that have been in one place for multiple years, as it will\n  break many, many existing build systems. At best, install them in both\n  locations; let VS2015 manage the \"Visual Studio 14.0/VC\" dir like it\n  always has, and let VS2017 manage the Shared/14.0 dir (via the \"VS2015\n  C++ build tools\" package). They should be unrelated.</p>\n</blockquote>\n\n<hr>\n\n<h2>Fix:</h2>\n\n<ol>\n<li>Uninstall all copies of Visual Studio</li>\n<li>If you have frameworks that can install copies or partial copies of Visual Studio, or rely on them, consider uninstalling them too. For me, this was a couple versions of Qt. </li>\n<li>Nuke <code>C:\\Windows\\Temp</code> and <code>%temp%</code> </li>\n<li>Nuke anything visual studio related in C:\\PROGRA~1,2,3, %appdata%, and %localappdata% </li>\n<li>Reboot</li>\n<li>Install the oldest version of Visual Studio you want to use first</li>\n<li>Try to build a C++ Win32 console app with that version </li>\n</ol>\n\n<p>If you can do that, you're unblocked. Otherwise, yikes! I don't know what to do next short of a full registry deep-dive keyword purge or a re-install of Windows. With an SSD, the latter is probably faster TBH.</p>\n"}], "owner": {"reputation": 384, "user_id": 4154520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uVWJN.jpg?s=128&g=1", "display_name": "Raheel Khan", "link": "https://stackoverflow.com/users/4154520/raheel-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3538, "favorite_count": 1, "accepted_answer_id": 36046681, "answer_count": 3, "score": 3, "last_activity_date": 1500334732, "creation_date": 1458157617, "last_edit_date": 1500100000, "question_id": 36045572, "link": "https://stackoverflow.com/questions/36045572/i-have-installed-the-visual-studio-2015-but-there-is-no-c-project", "title": "i have installed the Visual Studio 2015, but there is no C++ Project.?", "body": "<p>I am facing problem, I want to write c++ code in visual studio 2015, but I can't create c++ project because there is no c++ template in the New Project window. </p>\n\n<p>I am creating new project in this way\n<em>File > New > Project > Visual C++</em></p>\n\n<p>but there is no c++ template. Please help</p>\n"}, {"tags": ["c++", "c++14", "unique-ptr"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1458157662, "post_id": 36045440, "comment_id": 59739642, "body": "Maybe because executable code is not considered in the size calculation of an object."}, {"owner": {"reputation": 3536, "user_id": 3589890, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2c51e57398bf347074f512dede124f23?s=128&d=identicon&r=PG&f=1", "display_name": "Rostislav", "link": "https://stackoverflow.com/users/3589890/rostislav"}, "edited": false, "score": 0, "creation_date": 1458157798, "post_id": 36045440, "comment_id": 59739726, "body": "Hint - capture a variable in your lambda and see the results. And then look at the <code>sizeof</code> of an empty struct (even with a non-virtual member function)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1458158453, "post_id": 36045440, "comment_id": 59740123, "body": "empty base class optimization."}], "owner": {"reputation": 862, "user_id": 3943956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/491b0b6ba7087082a5b2ac071560373d?s=128&d=identicon&r=PG&f=1", "display_name": "ALEXANDER KONSTANTINOV", "link": "https://stackoverflow.com/users/3943956/alexander-konstantinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 151, "favorite_count": 0, "closed_date": 1458157890, "answer_count": 0, "score": 1, "last_activity_date": 1458157955, "creation_date": 1458157168, "question_id": 36045440, "link": "https://stackoverflow.com/questions/36045440/why-the-custom-deleter-doesnt-increase-the-size-of-unique-ptr-object", "closed_reason": "Duplicate", "title": "Why the custom deleter doesn&#39;t increase the size of unique_ptr object?", "body": "<p>I have written this test code:</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n    int *testRaw = nullptr;\n    cout &lt;&lt; sizeof(testRaw) &lt;&lt; endl;\n\n    unique_ptr&lt;int&gt; testUnique(nullptr);\n    cout &lt;&lt; sizeof(testUnique) &lt;&lt; endl;\n\n    auto CustomeDeleter = [](int *ptr)\n    {\n        cout &lt;&lt; *ptr;\n        delete ptr;\n    };\n\n    unique_ptr&lt;int, decltype(CustomeDeleter)&gt; testUniqueCustom(nullptr, CustomeDeleter);\n    cout &lt;&lt; sizeof(testUniqueCustom) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>With the compiler clang-700.1.81 my output is:</p>\n\n<pre><code>8\n8\n8\n</code></pre>\n\n<p>How could it be that the custom deleter didn't increase the pointer size? \nAs I understand lambda function is an object of the closure type, and the size of any class always > 0 in C++.\nThank you for your help!</p>\n"}, {"tags": ["c++", "templates", "gcc", "visual-c++", "clang"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1458157256, "post_id": 36045416, "comment_id": 59739382, "body": "Use simple overload."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458157571, "post_id": 36045416, "comment_id": 59739586, "body": "Removing <code>&lt;double&gt;</code> fix compilation for clang <a href=\"http://coliru.stacked-crooked.com/a/97cc256dc279430a\" rel=\"nofollow noreferrer\">Demo</a>"}], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458253040, "post_id": 36046152, "comment_id": 59791465, "body": "As discussed later in the GCC bugzilla thread, this is <a href=\"http://wg21.link/cwg581\" rel=\"nofollow noreferrer\">CWG 581</a>."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1458159597, "creation_date": 1458159597, "answer_id": 36046152, "question_id": 36045416, "link": "https://stackoverflow.com/questions/36045416/specialising-templated-constructor-of-a-non-template-class/36046152#36046152", "title": "specialising templated constructor of a non-template class", "body": "<p>I believe, it is a bug in CLang. There is nothing in standard which prevents explicit specialization for constructors, and similar issue in gcc was considered to be a bug:</p>\n\n<p><a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=9050\" rel=\"nofollow\">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=9050</a></p>\n"}], "owner": {"reputation": 239, "user_id": 5153458, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4LqBj.png?s=128&g=1", "display_name": "eg0x20", "link": "https://stackoverflow.com/users/5153458/eg0x20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1495411311, "creation_date": 1458157102, "last_edit_date": 1495411311, "question_id": 36045416, "link": "https://stackoverflow.com/questions/36045416/specialising-templated-constructor-of-a-non-template-class", "title": "specialising templated constructor of a non-template class", "body": "<p>How to specialise a templated constructor of a non-template class? The code below compiles fine with gcc and icc, but not with clang and msvc.</p>\n\n<p>Is the code a) illegal but icc/gcc compiles it anyway or b) is legal  but clang/msvc fail to compile for some reason.</p>\n\n<p>Reproducer:</p>\n\n<pre><code>$ cat template_01.cpp\nstruct A\n{\n  template&lt;class T&gt;\n  A(T const &amp;t);\n};\n\ntemplate&lt;&gt;\nA::A&lt;double&gt;(double const&amp; t) {}\n\nint main()\n{\n  A a(42.0);\n}\n</code></pre>\n\n<p>Reproducing steps:</p>\n\n<pre><code>$ clang++ template_01.cpp\ntemplate_01.cpp:8:4: error: qualified reference to 'A' is a constructor name rather than a type wherever a constructor can be declared\nA::A&lt;double&gt;(double const&amp; t) {}\n   ^\ntemplate_01.cpp:8:5: error: expected unqualified-id\nA::A&lt;double&gt;(double const&amp; t) {}\n    ^\n2 errors generated.\n$\n\n$ g++ template_01.cpp\n$\n\n$ icc template_01.cpp\n$\n\n$ cl.exe template_01.cpp\nMicrosoft (R) C/C++ Optimizing Compiler Version 18.00.40629 for x86\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ntemplate_01.cpp\ntemplate_01.cpp(8) : error C2143: syntax error : missing ';' before '&lt;'\ntemplate_01.cpp(8) : error C2988: unrecognizable template declaration/definition\ntemplate_01.cpp(8) : error C2059: syntax error : '&lt;'\ntemplate_01.cpp(11) : error C2143: syntax error : missing ';' before '{'\ntemplate_01.cpp(11) : error C2447: '{' : missing function header (old-style formal list?)\n$\n</code></pre>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1458157085, "post_id": 36045353, "comment_id": 59739282, "body": "You don&#39;t count instances created from copy constructors."}], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458157681, "post_id": 36045483, "comment_id": 59739656, "body": "Unfortunately the solution does not work. Or I don&#39;t know how to use it. Now I&#39;m gettng <code>Error: no instance of constructor &quot;Employee:Employee&quot; matches the argument list</code>"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458157803, "post_id": 36045483, "comment_id": 59739730, "body": "@mathsicist <code>Employee:Employee</code> is certainly wrong, you need <code>::</code>, see here: <a href=\"https://ideone.com/17TnWN\" rel=\"nofollow noreferrer\">ideone.com/17TnWN</a>"}, {"owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159348, "post_id": 36045483, "comment_id": 59740638, "body": "ok, I&#39;ve got it. Thank you. Could u look at edited question?"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159503, "post_id": 36045483, "comment_id": 59740734, "body": "You need to write explicitly assign operator, operator=."}, {"owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159620, "post_id": 36045483, "comment_id": 59740825, "body": "Do u mean operator overloading?"}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "reply_to_user": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159985, "post_id": 36045483, "comment_id": 59741023, "body": "Yes, move constructor caused implicit assignment operator to be deleted"}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 4, "last_activity_date": 1458157310, "creation_date": 1458157310, "answer_id": 36045483, "question_id": 36045353, "link": "https://stackoverflow.com/questions/36045353/counting-created-class-objects/36045483#36045483", "title": "Counting created class objects", "body": "<p>Add:</p>\n\n<pre><code>Employee(const Employee&amp;)\n{\n    counter++;\n}\nEmployee( Employee&amp;&amp;)\n{\n    counter++;\n}\n</code></pre>\n\n<p>and it should be fine</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1458157650, "creation_date": 1458157650, "answer_id": 36045585, "question_id": 36045353, "link": "https://stackoverflow.com/questions/36045353/counting-created-class-objects/36045585#36045585", "title": "Counting created class objects", "body": "<p>You are missing to count instances created with the default compiler generated copy/move constructor. If you create a user defined version, the counting should be balanced:</p>\n\n<pre><code>Employee::Employee(Employee&amp;&amp; rhs) // : Whatever needs to be copied/moved\n{\n    counter++;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/224fcac3bfc30ff2\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n"}, {"comments": [{"owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159461, "post_id": 36045590, "comment_id": 59740705, "body": "Ok, I understand now how it works. The questions is why <code>const Employee&amp; rhs</code>. What does it mean? Maybe some link?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1458159515, "post_id": 36045590, "comment_id": 59740742, "body": "@mathsicist It is how you define a <a href=\"http://en.cppreference.com/w/cpp/language/copy_constructor\" rel=\"nofollow noreferrer\">copy constructor</a>"}, {"owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1459629983, "post_id": 36045590, "comment_id": 60374430, "body": "I&#39;d like to make sure: all of what you&#39;ve described is about how the <code>v.push_back(T())</code> works, is not? If will I use another container or just create a new object by <code>T obj</code> it would work fine without creating any copies? Am I thinking right?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "edited": false, "score": 0, "creation_date": 1459631289, "post_id": 36045590, "comment_id": 60374839, "body": "@mathsicist unless you are using C++11 and your class is moveable then anytime you call <code>push_back</code> it will make a copy"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1458157657, "creation_date": 1458157657, "answer_id": 36045590, "question_id": 36045353, "link": "https://stackoverflow.com/questions/36045353/counting-created-class-objects/36045590#36045590", "title": "Counting created class objects", "body": "<p>You forgot to handle copies.  Every time you push an element into the vector a copy is made.  So</p>\n\n<pre><code>employees.push_back(Employee());\n</code></pre>\n\n<p>Calls the constructor, makes a copy and then <code>Employee()</code> gets destroyed which leaves you with a net of 0.  unfortunately most empty vectors start at 0 capacity so the second call to <code>push_back</code> is going to need to grow the array.  When it does that you have one copy and one destruction.  This is my you see <code>-1</code> after the next insertion.  Then we grow the vector again so now we have 2 copies and 2 destructor calls so we go from -1 to -3.  Then when you empty the vector you have one destructor call for each element and since we have 3 elements we go from -3 to -6.  If we add a copy constructor like</p>\n\n<pre><code>Employee(const Employee&amp; rhs)\n{\n    counter++;\n}\n</code></pre>\n\n<p>Then we offset all of the destruction from the copies(<a href=\"http://coliru.stacked-crooked.com/a/3c06e494af2e0afb\" rel=\"nofollow\">Live Example</a>).</p>\n"}], "owner": {"reputation": 183, "user_id": 4499647, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e3b43e4e7ec2c5bfbd68d7c988ce68fc?s=128&d=identicon&r=PG&f=1", "display_name": "mathsicist", "link": "https://stackoverflow.com/users/4499647/mathsicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1458199940, "accepted_answer_id": 36045483, "answer_count": 3, "score": 2, "last_activity_date": 1458159287, "creation_date": 1458156928, "last_edit_date": 1458159287, "question_id": 36045353, "link": "https://stackoverflow.com/questions/36045353/counting-created-class-objects", "closed_reason": "Needs details or clarity", "title": "Counting created class objects", "body": "<p>The issue does not need any explanations, I guess. I really don't know what I do wrong. I've made it once before and it was working properly. I'm still beginner in oop.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Employee\n{\nprivate:\n    static int counter;\npublic:\n    Employee::Employee()\n    {\n        counter++;\n    }\n\n    Employee::~Employee()\n    {\n        counter--;\n    }\n\n    static int ShowCounter()\n    {\n        //std::cout &lt;&lt; counter &lt;&lt; std::endl;\n        return counter;\n    }\n};\n\nint Employee::counter = 0;\n\nint main()\n{\n    std::vector&lt;Employee&gt; employees;\n\n    std::cout &lt;&lt; \"Constructors: \" &lt;&lt; std::endl;\n    employees.push_back(Employee());\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n    employees.push_back(Employee());\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n    employees.push_back(Employee());\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; \"Destructors: \" &lt;&lt; std::endl;\n    employees.pop_back();\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n    employees.pop_back();\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n    employees.pop_back();\n    std::cout &lt;&lt; Employee::ShowCounter() &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; std::endl;\n\n    system(\"pause\");\n}\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>Constructors:\n0\n-1\n-3\nDestructors:\n-4\n-5\n-6\n</code></pre>\n\n<p>I probably made some stupid mistake</p>\n\n<p>EDIT: I afraid that it is against the rules but I have the next issue related with previous one. I've pasted minimal code which had to show my problem. Now, when I try to implement your solution into my main code I get the error <code>'Employee &amp;Employee::operator =(const Employee &amp;)': attempting to reference a deleted function'</code>. The line with issue:</p>\n\n<pre><code>employees[employees.size() - 1] = generate_random_employee(employees[employees.size() - 1], employees);\n</code></pre>\n\n<p>The function <code>generate_random_employee</code> is <code>Employee</code> type function. If u need more details I will ask a new question.</p>\n"}, {"tags": ["c++", "qt", "qml", "qt5"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 3594694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdfa813818ccbbb1a2cb4a910900e279?s=128&d=identicon&r=PG&f=1", "display_name": "Churak", "link": "https://stackoverflow.com/users/3594694/churak"}, "is_accepted": true, "score": 0, "last_activity_date": 1458325236, "creation_date": 1458325236, "answer_id": 36091644, "question_id": 36045336, "link": "https://stackoverflow.com/questions/36045336/why-are-the-files-in-my-qrc-resource-file-showing-up-empty/36091644#36091644", "title": "Why are the files in my .qrc resource file showing up empty?", "body": "<p><em>This is a follow up with an explanation I posted elsewhere but the answer is relevant. It was empty because I wasn't actually hitting the proper path where the file was. Below is the fix and my explanation of what it was happening.</em></p>\n\n<p>I've found the \"issue\" and the answer to my problem. Although I think the problem would be a QT bug or my understanding of string definition is wrong. I set the resource file called <code>certs.qrc</code> when I put the two certificates for dev and prod. I created the file definition and used the path I got by right clicking on the resource file and copying it's path. See below for the full definition of the SSL, hopefully this will serve as an example for QT SSL as well because I could barely find any of those either.</p>\n\n<p>Here is my certs file without the 'RCC' header because it seems to break block quotes:</p>\n\n<blockquote>\n<pre><code>&lt;qresource prefix=\"/certs\"&gt;\n    &lt;file&gt;GandiStandardSSLCA2.crt&lt;/file&gt;\n    &lt;file&gt;SSLcomDVCA_2.crt&lt;/file&gt;\n&lt;/qresource&gt;\n</code></pre>\n</blockquote>\n\n<p>Below is the definition for that certificate file:</p>\n\n<blockquote>\n<pre><code>// SSL socket set up\nQFile certFile(\":/certs/GandiStandardSSLCA2.crt\");\nif(certFile.open(QIODevice::ReadOnly))\n{\n    qDebug() &lt;&lt; \"File opened\";\n}\nelse {\n    qDebug() &lt;&lt; \"Boooo\";\n}\nQSslCertificate cert(&amp;certFile, QSsl::Pem);\nforgotPwSocket = new QSslSocket(this);\nforgotPwSocket-&gt;addCaCertificate(cert);\n</code></pre>\n</blockquote>\n\n<p>All this is currently functional. make sure you run qmake in order to get the resource files compiled. </p>\n\n<p>So now, my explanation as to why I was having a problem. I was using a different deploy method before for the certs where I was deploying the entire assets folder. That works for Android by not iOS so I decided to go with qrc instead. While I was trying to implement the <code>/assets</code> folder deployment I was using an <strong>ifdef to define the string of the path depending on if it was iOS or Android.</strong> I removed the ifdef, and all my problems went away, it was now able to find the files at the path. The string is a member of my network object and I would define it at run time using the ifdef. During all my debugging, it was the correct path as shown in the inspector. Realizing that using the .qrc resource eliminated the need to define the path based on Android/iOS I hardcoded the path value as stated above. Once I did that, it started working. The path name is the same as it was in the debugger with the ifdef in place so I'm not sure why/where this was breaking. If anyone has any further insight it would be fantastic to hear. Hopefully this will help anyone having a similar issue or getting SSL working in QT in general!</p>\n"}], "owner": {"reputation": 33, "user_id": 3594694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fdfa813818ccbbb1a2cb4a910900e279?s=128&d=identicon&r=PG&f=1", "display_name": "Churak", "link": "https://stackoverflow.com/users/3594694/churak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 36091644, "answer_count": 1, "score": 0, "last_activity_date": 1458325236, "creation_date": 1458156887, "question_id": 36045336, "link": "https://stackoverflow.com/questions/36045336/why-are-the-files-in-my-qrc-resource-file-showing-up-empty", "title": "Why are the files in my .qrc resource file showing up empty?", "body": "<p>I'm trying to load in SSL cert files from a .qrc resource file. It shows the entry when I query the directory for an entry list with: <code>QStringList apples = QDir (\":/\").entryList();</code></p>\n\n<p>The output of which is:</p>\n\n<blockquote>\n  <p>D TAPMobile: (null):0 ((null)): \"items\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"particleresources\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"particles\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"plugins\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"qml\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"qt-project.org\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"qtmultimediaquicktools\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"QtQuick\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"scenegraph\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"shaders\"</p>\n  \n  <p>D TAPMobile: (null):0 ((null)): \"SSLcomDVCA_2.crt\"</p>\n</blockquote>\n\n<p>I set the path of the cert using <code>certPath = \":/SSLcomDVCA_2.crt\"; // Dev Cert</code></p>\n\n<p>I also load the resource file with <code>RESOURCES += resources.qrc certs.qrc # uncomment for publishing</code> in the .pro file.</p>\n\n<p>When going through debugging looking at the cert path and the cert file I get the following: <a href=\"http://bit.ly/1MngyId\" rel=\"nofollow\">http://bit.ly/1MngyId</a></p>\n\n<p>I also explicitly init the resource file with: <code>Q_INIT_RESOURCE(resources);</code></p>\n\n<p>This is the last remaining hurdle before deployment to the app store, so any help would be fantastic. Thanks!</p>\n"}, {"tags": ["c++", "c++11", "datamapper"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 4572754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d707a60dd280634a453a38326681e7?s=128&d=identicon&r=PG&f=1", "display_name": "iwbnwif", "link": "https://stackoverflow.com/users/4572754/iwbnwif"}, "edited": false, "score": 0, "creation_date": 1458335923, "post_id": 36077286, "comment_id": 59833129, "body": "Thanks! You are right, I should have mentioned about writing, my plan was to solve reading first and then do the opposite for writing! Your answer and the discussion in <a href=\"http://stackoverflow.com/questions/8844105/repository-and-data-mapper-pattern\">this question</a> have put me on a good way. I will put my final solution as an answer if I can."}], "tags": [], "owner": {"reputation": 3226, "user_id": 2173029, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ad13ad637acc30b9be7d129798894b1?s=128&d=identicon&r=PG&f=1", "display_name": "Rumburak", "link": "https://stackoverflow.com/users/2173029/rumburak"}, "is_accepted": false, "score": 0, "last_activity_date": 1458281249, "creation_date": 1458281249, "answer_id": 36077286, "question_id": 36045335, "link": "https://stackoverflow.com/questions/36045335/lightweight-data-mapper-in-c11/36077286#36077286", "title": "Lightweight Data Mapper in C++11", "body": "<p>Since you are asking about reading data from the database, and seem to have no questions about writing: Can't you just do the inverse of whatever you do for persisting the data in the database?</p>\n\n<p>If not:</p>\n\n<p>You could translate the result rows into intermediate objects which decouple <code>myDataObject</code> and <code>resultRow</code>. This object could have known data members for well-known fields and one or more maps for other fields, e.g.</p>\n\n<pre><code>struct mySerializedObject\n{\n   int id;\n   std::string title;\n   std::map&lt;std::string, std::string&gt; texts;\n   std::map&lt;std::string, int&gt; numbers;\n};\n</code></pre>\n\n<p>And then the <code>fromSerialized</code> functions of the data objects can just pick what they need.</p>\n"}, {"comments": [{"owner": {"reputation": 317, "user_id": 4572754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d707a60dd280634a453a38326681e7?s=128&d=identicon&r=PG&f=1", "display_name": "iwbnwif", "link": "https://stackoverflow.com/users/4572754/iwbnwif"}, "edited": false, "score": 0, "creation_date": 1458338690, "post_id": 36094965, "comment_id": 59834366, "body": "I am going to mark this as my answer because it is what I have ended up doing, however I hope that doesn&#39;t detract from the help given by @Rumburak."}], "tags": [], "owner": {"reputation": 317, "user_id": 4572754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d707a60dd280634a453a38326681e7?s=128&d=identicon&r=PG&f=1", "display_name": "iwbnwif", "link": "https://stackoverflow.com/users/4572754/iwbnwif"}, "is_accepted": true, "score": 0, "last_activity_date": 1458338592, "last_edit_date": 1495542688, "creation_date": 1458338592, "answer_id": 36094965, "question_id": 36045335, "link": "https://stackoverflow.com/questions/36045335/lightweight-data-mapper-in-c11/36094965#36094965", "title": "Lightweight Data Mapper in C++11", "body": "<p>Thanks to the suggestion by @rumburak and <a href=\"https://stackoverflow.com/questions/8844105/repository-and-data-mapper-pattern\" title=\"this answer\">this answer</a> I have solved my problem for now.</p>\n\n<p>I translate a result row into a general-purpose intermediate object which is defined as follows:</p>\n\n<pre><code>typedef std::unordered_map&lt;std::string, boost::any&gt; myDataRow;\n</code></pre>\n\n<p>Then in my database layer I have a GetRow() method that returns a reference to a myDataRow. The method iterates over the columns of the resultset's current record and populates the row object.</p>\n\n<pre><code>myDataRow&amp; myDataResultSet::GetRow()\n{\n    // Get the column names.\n    std::vector&lt;myDataColumn&gt;&amp; cols = GetColumns();\n\n    // Iterate through the columns, setting the mapped value against the column name.\n    // Note: the map's columns are automatically be created on the first use of this function and their contents updated thereafter.\n    int i = 0; for (myDataColumn col : cols)\n    {\n        switch(col.m_Type)\n        {\n            case dtInteger:\n                m_Data[col.m_Name] = GetInt(i++);\n                break;\n\n            case dtString: \n                m_Data[col.m_Name] = GetString(i++);\n                break;\n        }\n\n    return m_Data;\n}\n</code></pre>\n\n<p>Now 'data aware' objects can be initialised from the intermediate myDataRow class.</p>\n\n<pre><code>void myDataObject::FromData(const myDataRow&amp; row)\n{\n    auto it = row.find(\"UID\");\n    m_UID = it != row.end() ? boost::any_cast&lt;int&gt;(it-&gt;second) : 0;\n\n    it = row.find(\"TITLE\");\n    m_Title = it != row.end() ? boost::any_cast&lt;std::string&gt;(it-&gt;second) : \"\";\n\n    it = row.find(\"DESCRIPTION\");\n    m_Description = it != row.end() ? boost::any_cast&lt;std::string&gt;(it-&gt;second) : \"\"; : \"\"; \n}\n</code></pre>\n\n<p>With each derived class calling its parent's FromData(). They also have a convenience constructor myDataObject(const myDataRow&amp;).</p>\n\n<p>The data mapper layer now consists of querying the database and populating objects from result set rows, i.e.:</p>\n\n<pre><code>myDerivedDataObject temp(results-&gt;GetRow());\n</code></pre>\n\n<p>The 'data mapping' part consists of making sure that the resultset columns have names that correctly map to the data object's members.</p>\n"}], "owner": {"reputation": 317, "user_id": 4572754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54d707a60dd280634a453a38326681e7?s=128&d=identicon&r=PG&f=1", "display_name": "iwbnwif", "link": "https://stackoverflow.com/users/4572754/iwbnwif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1018, "favorite_count": 0, "accepted_answer_id": 36094965, "answer_count": 2, "score": 0, "last_activity_date": 1458338592, "creation_date": 1458156887, "last_edit_date": 1458336037, "question_id": 36045335, "link": "https://stackoverflow.com/questions/36045335/lightweight-data-mapper-in-c11", "title": "Lightweight Data Mapper in C++11", "body": "<p>I want to display lists of business layer objects in 'grid' controls. I also want to edit any given object in a dialog box.</p>\n\n<p>The objects are persisted in a relational database that also performs referential and multi-user integrity. Although the business objects are quite similar to the database tables, I would like to decouple them to a degree using some sort of 'data mapper'.</p>\n\n<p>My objects are derived from a myDataObject base class. The base class has a static member as follows:</p>\n\n<pre><code>// Initialise a static list of member names for this class. Used when the object is displayed in a grid.\nconst std::vector&lt;myDataObjectDescriptor&gt; myDataObject::m_Descriptors \n{\n    { myDO_INT_FIELD, \"UID\", \"m_UID\", 40, false, false },\n    { myDO_STRING_FIELD, \"TITLE\", \"m_Title\", 200, true, false },\n    { myDO_STRING_FIELD, \"DESCRIPTION\", \"m_Description\", 400, true, false }\n};\n</code></pre>\n\n<p>This descriptor list allows the grid control to directly render the object list with the correct column titles and widths. I can extend the base class descriptors using a lambda:</p>\n\n<pre><code>// Static initialisation of descriptor list using a lamda.\nconst std::vector&lt;myDataObjectDescriptor&gt; myDerivedDataObject::m_Descriptors = [] \n{ \n    std::vector&lt;myDataObjectDescriptor&gt; v = myDataObject::m_Descriptors; \n    v.push_back ({myDO_STRING_FIELD, \"BACKGROUND\", \"m_Background\", 120, false, false}); \n    v.push_back ({myDO_STRING_FIELD, \"FONT\", \"m_Font\", 120, false, false}); \n    return v; \n} ();\n</code></pre>\n\n<p>So far so good. Now, I would like to create a list of objects from a database query, the list can be a <code>std::vector&lt;some class derived from myDataObject&gt;</code>. My database layer returns a result set which allows rows to be retrieved one at a time.</p>\n\n<p>How can I write a data mapper that takes a reference to the object list (<code>std:vector&lt;some class derived from myDataObject&gt;&amp;</code>) and a reference to the result set and populates the list?</p>\n\n<p><em>Additional info:</em></p>\n\n<p>Currently I have 2 methods that are overridden in each class derived from myDataObject:</p>\n\n<ul>\n<li>FromData (myResultSet&amp; resultset): populates 'this' object from the current row in the result set.</li>\n<li>SetByName (string name, variant value): sets an attribute based on its stringified name. Used by FromData to set an attribute based on the field name in the result set.</li>\n</ul>\n\n<p>There are multiple things that I don't like about this, but mostly:</p>\n\n<ul>\n<li>myDataObject shouldn't know anything about the database layer (too\nclosely coupled).</li>\n<li><p>SetByName is a series of <strong>if</strong> statements that sets an attribute if the 'name' parameter is matched, i.e.</p>\n\n<pre><code>if (name == \"m_Title\")\n    m_Title = value;\n</code></pre></li>\n</ul>\n\n<p>Edit re. comment by rumburak: Once I have solved the problem of reading, it is my plan to somehow do the reverse for persisting data.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "edited": false, "score": 0, "creation_date": 1458157977, "post_id": 36045233, "comment_id": 59739826, "body": "I would expect that any time you switch between shader programs, GL might map the pipeline differently. Do you have more than one shader program in your application?"}, {"owner": {"reputation": 1049, "user_id": 481111, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4212a65ed49b519e47c6ca78d89ce70?s=128&d=identicon&r=PG&f=1", "display_name": "skimon", "link": "https://stackoverflow.com/users/481111/skimon"}, "reply_to_user": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "edited": false, "score": 0, "creation_date": 1458161026, "post_id": 36045233, "comment_id": 59741624, "body": "@sevatitov Yes I have 2 shader programs , one uses the first ubo block , the other uses the 2nd ubo block.  It doesnt seem to have any problem , but i might be in undefined territory"}], "answers": [{"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 2, "last_activity_date": 1458163558, "creation_date": 1458163558, "answer_id": 36047253, "question_id": 36045233, "link": "https://stackoverflow.com/questions/36045233/is-reusing-the-pointer-from-glmapbufferrange-undefined/36047253#36047253", "title": "is reusing the pointer from glMapBufferRange undefined?", "body": "<p>This is completely undefined behavior which only seems to work by accident on your implementaion.</p>\n\n<p>The <a href=\"https://www.opengl.org/registry/doc/glspec45.core.pdf\" rel=\"nofollow\">OpenGL 4.5 core profile specification</a><br>\nunambiguously states in section 6.3.1 \"Unmapping Buffers\":</p>\n\n<blockquote>\n  <p>Unmapping a mapped buffer object invalidates the pointer to its data store</p>\n</blockquote>\n\n<p>You must never use the pointer to the mapped buffer after you unmapped it. </p>\n\n<p>However, with fairly modern GL, the <a href=\"https://www.opengl.org/registry/specs/ARB/buffer_storage.txt\" rel=\"nofollow\"><code>ARB_buffer_storage</code></a> functionality is available as a core feature, which allows you to <em>persistently</em> map a buffer object. In that case, you can use the buffer in the GL <em>while it is still mapped</em>. You of course have to manually synchronize all accesses to that memory region, so that the data doesn't get overwritten before the GL finished processing it.</p>\n"}], "owner": {"reputation": 1049, "user_id": 481111, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d4212a65ed49b519e47c6ca78d89ce70?s=128&d=identicon&r=PG&f=1", "display_name": "skimon", "link": "https://stackoverflow.com/users/481111/skimon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 1, "accepted_answer_id": 36047253, "answer_count": 1, "score": 0, "last_activity_date": 1458163558, "creation_date": 1458156519, "question_id": 36045233, "link": "https://stackoverflow.com/questions/36045233/is-reusing-the-pointer-from-glmapbufferrange-undefined", "title": "is reusing the pointer from glMapBufferRange undefined?", "body": "<p>I am using a uniform buffer via mapBufferRange and updating every frame as follows (assuming the buffer and bufferbase are already bound correctly):</p>\n\n<pre><code>    float* uboBlock0 = reinterpret_cast&lt;float*&gt;(\n        glMapBufferRange(GL_UNIFORM_BUFFER, 0,\n        buffSizeInFloats, GL_MAP_WRITE_BIT | GL_MAP_INVALIDATE_BUFFER_BIT | GL_MAP_UNSYNCHRONIZED_BIT));\n\n    // cache it here and dont map/unmap for test - float* uboBlock0 = getUboBlockMemory();\n    memcpy(uboBlock0, obj, buffSize);\n    glUnmapBuffer(GL_UNIFORM_BUFFER);\n</code></pre>\n\n<p>However if instead of mapping the buffer before using it , i simply cache <code>float* uboBlock0</code> , it still updates correctly every frame.  Even if i switch uboBlocks, and update them separately it still updates correctly. It even works on two separate nvidia cards. I read the opengl spec on mapping buffers but i cant see any description of this behavior (<a href=\"https://www.opengl.org/registry/doc/glspec45.core.pdf\" rel=\"nofollow\">https://www.opengl.org/registry/doc/glspec45.core.pdf</a> 6.3) so i wonder if im just getting 'lucky' and should not expect it to work , or if that is ok? </p>\n"}, {"tags": ["c++", "cocos2d-x", "action"], "comments": [{"owner": {"reputation": 3997, "user_id": 5006372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7df1194f7039c4f4b85d9eb244e14c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5006372/zen"}, "edited": false, "score": 0, "creation_date": 1458209023, "post_id": 36045222, "comment_id": 59761350, "body": "Cocos2d-x is single thread. A while loop will make it stucked. Use a scheduled function instead of while-loop. See my edit2."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6073485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200b2b18e567c36332cdfdc297fe23d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gualtiero", "link": "https://stackoverflow.com/users/6073485/gualtiero"}, "edited": false, "score": 0, "creation_date": 1458203530, "post_id": 36051972, "comment_id": 59757579, "body": "Hi, with this i can stop the current tile from doing another action and they don&#39;t go off the screen anymore, but what i would like it to do is to wait after running the sequence for all the actions to finish before doing CCLOG(&quot;running&quot;); and continuing in the code"}, {"owner": {"reputation": 3997, "user_id": 5006372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7df1194f7039c4f4b85d9eb244e14c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5006372/zen"}, "reply_to_user": {"reputation": 13, "user_id": 6073485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200b2b18e567c36332cdfdc297fe23d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gualtiero", "link": "https://stackoverflow.com/users/6073485/gualtiero"}, "edited": false, "score": 0, "creation_date": 1458205563, "post_id": 36051972, "comment_id": 59758863, "body": "Not really understand your question. But I guess you can use <code>enumerateChildren</code> and timers to do it.@Gualtiero"}, {"owner": {"reputation": 13, "user_id": 6073485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200b2b18e567c36332cdfdc297fe23d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gualtiero", "link": "https://stackoverflow.com/users/6073485/gualtiero"}, "edited": false, "score": 0, "creation_date": 1458207187, "post_id": 36051972, "comment_id": 59760023, "body": "ok, i edited the question to make it clearer, the problem is that this code prints : running and after 0.2 sec(time it takes to run action moveTo) hi(from action whatever)  my goal is for it to wait 0.2 sec then print hi and, only after that, print running but if i try to stop the code using any kind of delay or loop it does not run any action and just gets stuck, any ideas ?"}, {"owner": {"reputation": 1582, "user_id": 3772041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c94870a0274bc091b806eef6575e406?s=128&d=identicon&r=PG&f=1", "display_name": "akash93", "link": "https://stackoverflow.com/users/3772041/akash93"}, "edited": false, "score": 0, "creation_date": 1478664024, "post_id": 36051972, "comment_id": 68243845, "body": "@Zen I&#39;m new to cocos2dx and trying to do the same thing but can you tell me what function is passed to <code>tile-&gt;unschedule</code>? It&#39;s a little confusing in the above example."}, {"owner": {"reputation": 3997, "user_id": 5006372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7df1194f7039c4f4b85d9eb244e14c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5006372/zen"}, "reply_to_user": {"reputation": 1582, "user_id": 3772041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c94870a0274bc091b806eef6575e406?s=128&d=identicon&r=PG&f=1", "display_name": "akash93", "link": "https://stackoverflow.com/users/3772041/akash93"}, "edited": false, "score": 0, "creation_date": 1478747832, "post_id": 36051972, "comment_id": 68280312, "body": "No function (pointer) is passed to <code>unschedule</code>. Rather, we pass function name (a string) to <code>unschedule</code> since cocos-2dx use strings to identify callback functions. @akash93"}], "tags": [], "owner": {"reputation": 3997, "user_id": 5006372, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f7df1194f7039c4f4b85d9eb244e14c9?s=128&d=identicon&r=PG&f=1", "display_name": "Zen", "link": "https://stackoverflow.com/users/5006372/zen"}, "is_accepted": true, "score": 3, "last_activity_date": 1458208929, "last_edit_date": 1458208929, "creation_date": 1458190570, "answer_id": 36051972, "question_id": 36045222, "link": "https://stackoverflow.com/questions/36045222/cocos2d-x-c-wait-for-action-finish-before-continuing/36051972#36051972", "title": "Cocos2d-x c++ - Wait for action finish before continuing", "body": "<p>You can use <code>tag</code> to check whether an action has finished:</p>\n\n<pre><code>bool GameScene::updateTile(Sprite* tile, int newPos)\n{\n    static const int MY_MOVE_SEQ = 3333;\n    if (tile-&gt;getActionByTag(MY_MOVE_SEQ) &amp;&amp; !tile-&gt;getActionByTag(MY_MOVE_SEQ)-&gt;isDone()) {\n        return;\n        //or you can stop the last action sequence and then run new action\n        //tile-&gt;stopActionByTag(MY_MOVE_SEQ);\n    }\n\n    auto moveTo = MoveTo::create(0.2, Vec2(widthArray[newPos], heightArray[newPos]));\n    auto whatever = CallFunc::create([]() {\n        CCLOG(\"hi\");\n    });\n    auto seq = Sequence::create(moveTo, whatever, nullptr);\n    //set tag here!\n    seq-&gt;setTag(MY_MOVE_SEQ);\n\n    tile-&gt;runAction(seq);\n    CCLOG(\"running\");\n    return true;\n}\n</code></pre>\n\n<p>//Edit</p>\n\n<pre><code>    bool anyActionRunning = false;\n    tile-&gt;getParent()-&gt;enumerateChildren(\"//Tile\", [&amp;anyActionRunning](Node* child) {\n        if (child-&gt;getActionByTag(MY_MOVE_SEQ) &amp;&amp; !child-&gt;getActionByTag(MY_MOVE_SEQ)-&gt;isDone()) {\n            anyActionRunning = true;\n            return true;\n        }\n        return false;\n    });\n</code></pre>\n\n<p>//Edit2:</p>\n\n<pre><code>static const string funcName = \"CheckAction\";\ntile-&gt;schedule([tile](float dt) {\n    if (tile-&gt;getNumberOfRunningActions == 0) {\n        CCLOG(\"running\");\n        tile-&gt;unschedule(funcName);\n    }\n}, funcName);\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6073485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/200b2b18e567c36332cdfdc297fe23d7?s=128&d=identicon&r=PG&f=1", "display_name": "Gualtiero", "link": "https://stackoverflow.com/users/6073485/gualtiero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1614, "favorite_count": 0, "accepted_answer_id": 36051972, "answer_count": 1, "score": 1, "last_activity_date": 1458208929, "creation_date": 1458156465, "last_edit_date": 1458207057, "question_id": 36045222, "link": "https://stackoverflow.com/questions/36045222/cocos2d-x-c-wait-for-action-finish-before-continuing", "title": "Cocos2d-x c++ - Wait for action finish before continuing", "body": "<p>I'm making a slider puzzle, this function should move a tile and then return back to the main function so that i can continue playing, i also use this function to shuffle the tiles at the beginning of the game but when i call this all the tiles move toghether and go in the wrong spot or off the screen, this is because instead of running the action moveTo which takes 0.2 sec and then, after 0.2 sec, returning, it starts the action and returns straight away so when this gets called again the tile is still moving messing everything up.</p>\n\n<p>is there any way to stop the code from continuing before the action has finished? thanks ;) </p>\n\n<pre><code>bool GameScene::updateTile(Sprite* tile, int newPos)\n{\n    auto moveTo = MoveTo::create(0.2, Vec2(widthArray[newPos], heightArray[newPos]));\n    auto whatever = CallFunc::create([]() {\n        CCLOG(\"hi\");\n    });\n    auto seq = Sequence::create(moveTo, whatever, nullptr);\n    tile-&gt;runAction(seq);\n    CCLOG(\"running\");\n    return true;\n}\n</code></pre>\n\n<p>//edit</p>\n\n<p>This code prints: \n\"running\"\nand after 0.2 sec (time it takes to run action moveTo)\n\"hi\" (from action whatever)</p>\n\n<p>my goal is for it to wait 0.2 sec then print \"hi\" and, only after that, print \"running\" but if i try to stop the code using any kind of delay or loop\nlike:</p>\n\n<pre><code> bool GameScene::updateTile(Sprite* tile, int newPos)\n    {\n        auto moveTo = MoveTo::create(0.2, Vec2(widthArray[newPos], heightArray[newPos]));\n        auto whatever = CallFunc::create([]() {\n            CCLOG(\"hi\");\n        });\n        auto seq = Sequence::create(moveTo, whatever, nullptr);\n        tile-&gt;runAction(seq);\n        while (tile-&gt;getNumberOfRunningActions != 0)\n              { //delay \n              }\n        CCLOG(\"running\");\n        return true;\n    }\n</code></pre>\n\n<p>it does not run any action and just gets stuck, any ideas?</p>\n"}, {"tags": ["c++", "linked-list", "nodes"], "answers": [{"tags": [], "owner": {"reputation": 3910, "user_id": 1770952, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/743e6716b63a6502a10a212655005e81?s=128&d=identicon&r=PG", "display_name": "Ivan Gritsenko", "link": "https://stackoverflow.com/users/1770952/ivan-gritsenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1458157543, "last_edit_date": 1458157543, "creation_date": 1458156808, "answer_id": 36045317, "question_id": 36045161, "link": "https://stackoverflow.com/questions/36045161/c-linked-list-problems/36045317#36045317", "title": "c++ linked list problems", "body": "<p>In your insert method when you have 1 element already present <code>tmp</code> is set to <code>head</code>, then <code>tmp-&gt;setNext(head);</code> will create a reference to itself. This is the reason of infinite loop in your print method. Try the following insert code instead.</p>\n\n<pre><code>void List::Insert(float sal, int en) \n{\n    // Create a new node\n    node* newNode = new node();\n    newNode-&gt;SetData(sal, en);\n    newNode-&gt;setNext(head);\n    head = newNode;\n}\n</code></pre>\n\n<p>I would also note that in you print method there is no corner case for the list with 1 element. Your loop will perfectly handle this case. You will get the same result if you omit <em>One node in the list</em> branch.</p>\n\n<pre><code>void List::Print()\n{\n    // Temp pointer\n    node *tmp = head;\n\n    // No nodes\n    if ( tmp == NULL ) \n    {\n        cout &lt;&lt; \"EMPTY\" &lt;&lt; endl;\n        return;\n    }\n\n    // Parse and print the list\n    do \n    {\n        cout &lt;&lt; tmp-&gt;Epnum();\n        cout &lt;&lt; \" --&gt; \";\n        tmp = tmp-&gt;Next();\n    }\n    while ( tmp != NULL );\n\n    cout &lt;&lt; \"NULL\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458156880, "creation_date": 1458156880, "answer_id": 36045334, "question_id": 36045161, "link": "https://stackoverflow.com/questions/36045161/c-linked-list-problems/36045334#36045334", "title": "c++ linked list problems", "body": "<p>In <code>List::Insert</code>, you have:</p>\n\n<pre><code>node *tmp = head;\n</code></pre>\n\n<p>followed by</p>\n\n<pre><code>tmp-&gt;next = head;\n</code></pre>\n\n<p>Hence, you have circular link in the object. Its <code>next</code> points to itself. This leads to infinite loop in the print function.</p>\n\n<p>What you need is very simple:</p>\n\n<pre><code>void List::Insert(float sal, int en) \n{\n    // Create a new node\n    node* newNode = new node();\n    newNode-&gt;SetData(sal, en);\n    newNode-&gt;setNext(head);\n    head = newNode;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6073472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d429b0f91b3cf96f6ec4827ff0af25?s=128&d=identicon&r=PG&f=1", "display_name": "tcc88", "link": "https://stackoverflow.com/users/6073472/tcc88"}, "edited": false, "score": 0, "creation_date": 1458157981, "post_id": 36045671, "comment_id": 59739830, "body": "Well now my delete function doesn&#39;t work. It work only if its the last node, but not for the first node or middle one I believe"}], "tags": [], "owner": {"reputation": 1, "user_id": 6073472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d429b0f91b3cf96f6ec4827ff0af25?s=128&d=identicon&r=PG&f=1", "display_name": "tcc88", "link": "https://stackoverflow.com/users/6073472/tcc88"}, "is_accepted": false, "score": 0, "last_activity_date": 1458157928, "creation_date": 1458157928, "answer_id": 36045671, "question_id": 36045161, "link": "https://stackoverflow.com/questions/36045161/c-linked-list-problems/36045671#36045671", "title": "c++ linked list problems", "body": "<pre><code>void List::Insert(float sal, int en) \n{\n\n    // Create a new node\n    node* newNode = new node();\n    newNode-&gt;SetData(sal, en);\n    newNode-&gt;setNext(NULL);\n\n    //set the newNode next to point to head \n    newNode-&gt;setNext(head);\n    //set the new head as the newNode\n    head = newNode;\n\n\n    // Create a temp pointer\n    //node *tmp = head;\n\n    /*if ( tmp != NULL ) \n    {\n        // Nodes already present in the list\n        // Parse to end of list\n        /*while ( tmp-&gt;Next() != NULL ) \n        {\n            tmp = tmp-&gt;Next();\n        }\n\n        // Point the last node to the new node\n        tmp-&gt;setNext(head);\n    }\n    else \n    {\n        // First node in the list\n        head = newNode;\n    }*/\n}\n\n/**\n * Delete a node from the list\n */\nvoid List::Delete(float salary, int data) \n{\n    // Create a temp pointer\n    node *tmp = head;\n\n    // No nodes\n    if ( tmp == NULL )\n    return;\n\n    // Last node of the list\n    if ( tmp-&gt;Next() == NULL ) \n    {\n        delete tmp;\n        head = NULL;\n    }\n    else \n    {\n        // Parse thru the nodes\n        node *prev;\n        do \n        {\n            if ( tmp-&gt;Epnum() == data &amp;&amp; tmp-&gt;Salary()== salary ) \n                break;\n            prev = tmp;\n            tmp = tmp-&gt;Next();\n        } while ( tmp != NULL );\n\n        // Adjust the pointers\n        prev-&gt;setNext(tmp-&gt;Next());\n\n        // Delete the current node\n        delete tmp;\n    }\n}\n\n/**\n * Print the contents of the list\n */\nvoid List::Print()\n{\n    // Temp pointer\n    node *tmp = head;\n\n    // No nodes\n    if ( tmp == NULL ) \n    {\n        cout &lt;&lt; \"EMPTY\" &lt;&lt; endl;\n        return;\n    }\n\n    // One node in the list\n    if ( tmp-&gt;Next() == NULL ) \n    {\n        cout &lt;&lt; tmp-&gt;Salary() + tmp-&gt;Epnum();\n        cout &lt;&lt; \" --&gt; \";\n        cout &lt;&lt; \"NULL\" &lt;&lt; endl;\n    }\n    else \n    {\n        // Parse and print the list\n        do \n        {\n            cout &lt;&lt; tmp-&gt;Epnum();\n            cout &lt;&lt; \" --&gt; \";\n            tmp = tmp-&gt;Next();\n        }\n        while ( tmp != NULL );\n\n        cout &lt;&lt; \"NULL\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>nvm i was tired when i was writting this code and just realized what I did wrong. </p>\n"}], "owner": {"reputation": 1, "user_id": 6073472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19d429b0f91b3cf96f6ec4827ff0af25?s=128&d=identicon&r=PG&f=1", "display_name": "tcc88", "link": "https://stackoverflow.com/users/6073472/tcc88"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1458157928, "creation_date": 1458156276, "question_id": 36045161, "link": "https://stackoverflow.com/questions/36045161/c-linked-list-problems", "title": "c++ linked list problems", "body": "<pre><code>#include \"node.h\"\n#include &lt;iostream&gt;\n\n// List class\nclass List \n{\n    node *head; // head is an object that stores the address of the first node\n  public:\n    // constructor that initializes every list to null\n    List() \n    { \n        head = NULL; \n    }\n    // prtototype of the list member functions \n    void Print();\n    void Insert(float sal, int en);\n    void Delete(float sal, int en);\n};\n</code></pre>\n\n<p>//linklist.h above</p>\n\n<pre><code>#include \"linklist.h\"\n#include &lt;iostream&gt;\n\nusing std::cout;\nusing std::cin;\nusing std::endl;\n\n\n/**\n * Append a node to the linked list\n */\nvoid List::Insert(float sal, int en) \n{\n\n    // Create a new node\n    node* newNode = new node();\n    newNode-&gt;SetData(sal, en);\n    newNode-&gt;setNext(NULL);\n\n    // Create a temp pointer\n    node *tmp = head;\n\n    if ( tmp != NULL ) \n    {\n        // Nodes already present in the list\n        // Parse to end of list\n        /*while ( tmp-&gt;Next() != NULL ) \n        {\n            tmp = tmp-&gt;Next();\n        }*/\n\n        // Point the last node to the new node\n        tmp-&gt;setNext(head);\n    }\n    else \n    {\n        // First node in the list\n        head = newNode;\n    }\n}\n\n/**\n * Delete a node from the list\n */\nvoid List::Delete(float salary, int data) \n{\n    // Create a temp pointer\n    node *tmp = head;\n\n    // No nodes\n    if ( tmp == NULL )\n    return;\n\n    // Last node of the list\n    if ( tmp-&gt;Next() == NULL ) \n    {\n        delete tmp;\n        head = NULL;\n    }\n    else \n    {\n        // Parse thru the nodes\n        node *prev;\n        do \n        {\n            if ( tmp-&gt;Epnum() == data &amp;&amp; tmp-&gt;Salary()== salary ) \n                break;\n            prev = tmp;\n            tmp = tmp-&gt;Next();\n        } while ( tmp != NULL );\n\n        // Adjust the pointers\n        prev-&gt;setNext(tmp-&gt;Next());\n\n        // Delete the current node\n        delete tmp;\n    }\n}\n\n/**\n * Print the contents of the list\n */\nvoid List::Print()\n{\n    // Temp pointer\n    node *tmp = head;\n\n    // No nodes\n    if ( tmp == NULL ) \n    {\n        cout &lt;&lt; \"EMPTY\" &lt;&lt; endl;\n        return;\n    }\n\n    // One node in the list\n    if ( tmp-&gt;Next() == NULL ) \n    {\n        cout &lt;&lt; tmp-&gt;Salary() + tmp-&gt;Epnum();\n        cout &lt;&lt; \" --&gt; \";\n        cout &lt;&lt; \"NULL\" &lt;&lt; endl;\n    }\n    else \n    {\n        // Parse and print the list\n        do \n        {\n            cout &lt;&lt; tmp-&gt;Epnum();\n            cout &lt;&lt; \" --&gt; \";\n            tmp = tmp-&gt;Next();\n        }\n        while ( tmp != NULL );\n\n        cout &lt;&lt; \"NULL\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>//linlist.cpp above</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include \"linklist.h\"\n\nusing namespace std;\n\nvoid menu(List &amp;);\n\nint main()\n{\n    // New list\n    List list;\n    menu(list); \n    return 0;\n}\nvoid menu(List &amp;list)\n{   char choice;\n    int item;\n    float salary;\n    do{ \n        system(\"CLS\"); // use #include &lt;cstdlib&gt;\n        cout &lt;&lt; \"\\t\\t\\tMain Menu\\n\\n\";\n        cout &lt;&lt; \"\\tInsert{A}\\n\";\n        cout &lt;&lt; \"\\tDelete\\n\";\n        cout &lt;&lt; \"\\tPrint{P}\\n\";\n        cout &lt;&lt; \"\\tExit\\n\";\n        cout &lt;&lt; \"\\t\\t What? \";cin &gt;&gt;choice;\n        choice = toupper(choice);\n        cin.ignore();\n        switch (choice)\n        { case 'A':\n            cout &lt;&lt; \"Enter Employee numbers to insert and salary : \"; cin &gt;&gt; item; cin&gt;&gt;salary; \n            list.Insert(salary, item);\n            cout &lt;&lt; item&lt;&lt; \" Inserted \\n\"; cin.get();\n            break;\n          /*case 'D':\n            cout &lt;&lt; \"Enter Item to Delete : \"; cin &gt;&gt; item; \n            list.Delete(item);\n            cout &lt;&lt; item&lt;&lt; \" Deleted\\n\";cin.get();\n            break;*/\n          case 'P':\n            list.Print();cin.get();\n            break;\n        } \n    }while (choice != 'E');\n}\n</code></pre>\n\n<p>//main.cpp above</p>\n\n<pre><code>//node.h\n//#ifndef NODE_H\n#define NODE_H\n\n//node class\nclass node {\n    int epnum;\n    float salary;\n    node* next;\n\n    public:\n    node()\n    {} //null constructor\n\n    //stores argument passed in func.\n    void SetData(float _salary, int _epnum){\n        salary = _salary;\n        epnum = _epnum;\n    }\n    //stores in next the address of the next node\n    void setNext (node* anext){\n        next = anext;\n    }\n    //returns epnum stored\n    int Epnum(){\n        return epnum;\n    }\n    float Salary(){\n        return salary;}\n    //returns addres of next node \n    node* Next(){\n        return next;\n    }\n};\n</code></pre>\n\n<p>//node.h above</p>\n\n<p>I need to create a linked list that inserts a node at the front of the list as a program and of course print it out. I am unable to insert the node at the front of the list for some reason and I run into an infinte loop while trying to print it. It does something but I do not know exactly what. Please help. </p>\n"}, {"tags": ["c++", "c++11", "overloading", "variadic-templates", "variadic-functions"], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 4, "last_activity_date": 1458157187, "last_edit_date": 1458157187, "creation_date": 1458156482, "answer_id": 36045224, "question_id": 36045160, "link": "https://stackoverflow.com/questions/36045160/template-metaprogramming-mixed-with-classic-name-overloading/36045224#36045224", "title": "Template metaprogramming mixed with classic name overloading", "body": "<p>You may use generic lambda (C++14):</p>\n\n<pre><code>apply_to_many([](auto v) { return std::sqrt(v); }, a, b, c, d, e);\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/782c6af65c9b40b9\" rel=\"nofollow\">Demo</a></p>\n\n<p>In c++11, you have to create your functor the old way:</p>\n\n<pre><code>struct Sqrt\n{\n    template &lt;typename T&gt;\n    auto operator()(T value) const\n    -&gt; decltype(std::sqrt(value))\n    {\n        return std::sqrt(value);\n    }\n};\n</code></pre>\n\n<p>and later</p>\n\n<pre><code>apply_to_many(Sqrt{}, a, b, c, d, e);\n</code></pre>\n"}], "owner": {"reputation": 6885, "user_id": 5405086, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/PxgGr.png?s=128&g=1", "display_name": "xinaiz", "link": "https://stackoverflow.com/users/5405086/xinaiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 36045224, "answer_count": 1, "score": 0, "last_activity_date": 1458157187, "creation_date": 1458156276, "question_id": 36045160, "link": "https://stackoverflow.com/questions/36045160/template-metaprogramming-mixed-with-classic-name-overloading", "title": "Template metaprogramming mixed with classic name overloading", "body": "<p>I wanted to make a simple function-applier-to-many-variables-at-once template, which works just fine, but I just don't feel contented enough. Here is working code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// generated for last (or the only) variable sent to apply_to_many template overload\ntemplate&lt;class Fun, class Type&gt;\nvoid apply_to_many(Fun fun, Type&amp; current)\n{\n    current = fun(current);\n}\n\n// variadic template + variadic arguments, fun is applied to \n// current variable, and template is generated for the rest\ntemplate&lt;class Fun, class Type, class ...Types&gt;\nvoid apply_to_many(Fun fun, Type&amp; current, Types&amp;... other_variables)\n{\n    current = fun(current);\n    if(sizeof...(other_variables) &gt; 0)\n        apply_to_many(fun, other_variables...);\n}\n\n// simple function returning square of value\nint square(int x)\n{\n    return x*x;\n}\n\nint main()\n{\n    // some ints\n    int a{3}, b{4}, c{5}, d{6}, e{7};\n\n    std::cout &lt;&lt; a &lt;&lt; '\\t'\n              &lt;&lt; b &lt;&lt; '\\t'\n              &lt;&lt; c &lt;&lt; '\\t'\n              &lt;&lt; d &lt;&lt; '\\t'\n              &lt;&lt; e &lt;&lt; std::endl;\n\n    apply_to_many(square, a, b, c, d, e);\n\n    std::cout &lt;&lt; a &lt;&lt; '\\t'\n              &lt;&lt; b &lt;&lt; '\\t'\n              &lt;&lt; c &lt;&lt; '\\t'\n              &lt;&lt; d &lt;&lt; '\\t'\n              &lt;&lt; e &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>3       4       5       6       7\n9       16      25      36      49\n</code></pre>\n\n<p>Though <code>a b c d e</code> can be different types, like <code>int</code>, <code>double</code>, <code>complex&lt;float&gt;</code>, the function that is applied here is only for <code>int</code>s, so <code>int</code>s are squared like <code>int</code>s, <code>float</code>s are squared like <code>int</code>s, <code>complex&lt;float&gt;</code>es are squared like <code>int</code>s... Oh well, <code>complex&lt;float&gt;</code> just fails to convert. The point is - it would be nice to use classic overload that is provided for these types, like <code>std::sqrt</code>, or <code>std::pow</code>. But obviously we can't pass overloaded name to template without explicitly choosing one overload. </p>\n\n<pre><code>apply_to_many(std::sqrt, a, b, c, d, e); //error\n</code></pre>\n\n<p>As far as I know, we can't send template function as argument (which would be amazing, but probably tricky). I'll accept anything, even macro.</p>\n"}, {"tags": ["c++", "visual-studio-2010", "stack"], "comments": [{"owner": {"reputation": 11030, "user_id": 656346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WCIys.png?s=128&g=1", "display_name": "seva titov", "link": "https://stackoverflow.com/users/656346/seva-titov"}, "edited": false, "score": 0, "creation_date": 1458156530, "post_id": 36045116, "comment_id": 59738901, "body": "In your LinkedList constructor Start and Current are initialized with a pointer to local variable, they will be pointing to garbage when constructor returns."}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1458157769, "post_id": 36045116, "comment_id": 59739706, "body": "<code>I got a feeling like I&#39;m using the Stack wrong somehow</code>: I believe you&#39;re thinking about the <code>stack&lt;int&gt; s</code> in your code, but this is <i>not</i> the stack that the error is talking about. There is another stack called the &quot;call stack&quot; that provides a place to put local temporary variables (among other things). The answers below talk about adding a local variable to your list and then returning from the function. The local variable you&#39;re adding to the list is in the call stack, and writes to that location will corrupt it."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458157207, "post_id": 36045212, "comment_id": 59739353, "body": "**** me, could spend the whole day looking for this. Thank you."}], "tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": true, "score": 0, "last_activity_date": 1458156778, "last_edit_date": 1458156778, "creation_date": 1458156426, "answer_id": 36045212, "question_id": 36045116, "link": "https://stackoverflow.com/questions/36045116/stack-around-the-variable-n-was-corrupted-c-vs2010/36045212#36045212", "title": "Stack around the variable &#39;n&#39; was corrupted? C++ VS2010", "body": "<p>In this method:</p>\n\n<pre><code>void LinkedList::add(int a)\n{\n    Node n;\n    n.Str.Integer = a;\n    Current-&gt;next = &amp;n;\n    Current = Current-&gt;next;\n    cout &lt;&lt; Current-&gt;Str.Integer;\n}\n</code></pre>\n\n<p>you are adding as <code>next</code> local variable <code>n</code>, it will get destroyed once <code>add</code> returns. This is undefined behaviour. You should use <code>Node* n = new Node;</code>, dont forget to deallocate.</p>\n\n<p>[edit]</p>\n\n<p>The same applies to other places in your code where you take a pointer to local variable and store it as a list node.</p>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458156499, "creation_date": 1458156499, "answer_id": 36045229, "question_id": 36045116, "link": "https://stackoverflow.com/questions/36045116/stack-around-the-variable-n-was-corrupted-c-vs2010/36045229#36045229", "title": "Stack around the variable &#39;n&#39; was corrupted? C++ VS2010", "body": "<p>You have:</p>\n\n<pre><code>void LinkedList::add(int a)\n{\n    Node n;\n    n.Str.Integer = a;\n\n    Current-&gt;next = &amp;n;\n    // Here, you are storing a pointer to a local variable.\n    // The pointer becomes a dangling pointer when the function returns.\n\n\n    Current = Current-&gt;next;\n    cout &lt;&lt; Current-&gt;Str.Integer;\n}\n</code></pre>\n\n<p>Use a dynamically allocated <code>Node</code>.</p>\n\n<pre><code>void LinkedList::add(int a)\n{\n    Node* n = new Node;\n    n-&gt;Str.Integer = a;\n    Current-&gt;next = n;\n    Current = Current-&gt;next;\n    cout &lt;&lt; Current-&gt;Str.Integer;\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 36045212, "answer_count": 2, "score": 0, "last_activity_date": 1458156778, "creation_date": 1458156157, "question_id": 36045116, "link": "https://stackoverflow.com/questions/36045116/stack-around-the-variable-n-was-corrupted-c-vs2010", "title": "Stack around the variable &#39;n&#39; was corrupted? C++ VS2010", "body": "<p>So I'm working on a college project where I need to create a linked list of 'Structures'. and when I'm adding a new element to the linked list I get this error, which is weird because I am not even using the stack while doing it.\n Here's how 'Structure' is defined:</p>\n\n<pre><code>#ifndef Structure_h\n#define Structure_h\n#include &lt;stack&gt;\nusing namespace std;\nclass Structure\n{\npublic:\n    int Integer;\n    stack &lt;int&gt; s;\n};\n\n#endif\n</code></pre>\n\n<p>Definition of node:</p>\n\n<pre><code>#pragma once\n#ifndef Node_h\n#define Node_h\nusing namespace std;\n#include \"Structure.h\"\nclass Node\n{\npublic:\n    Node();\n    Structure Str;\n    Node *next;\n};\n\n#endif\n</code></pre>\n\n<p>LinkedList.h:</p>\n\n<pre><code>#pragma once\n#ifndef LinkedList_h\n#define LinkedList_h\nusing namespace std;\n#include \"Node.h\"\nclass LinkedList\n{\npublic:\n    LinkedList();\n    int size;\n    void add(int a);\n    Node *Current;\n    Node *Start;\n};\n\n#endif\n</code></pre>\n\n<p>LinkedList.cpp:</p>\n\n<pre><code>#include \"LinkedList.h\"\n#include &lt;iostream&gt;\nLinkedList::LinkedList()\n{\n    Node FirstNode;\n    Start = Current = &amp;FirstNode;\n    cout &lt;&lt; \"Start = \" &lt;&lt; Start-&gt;Str.Integer &lt;&lt; endl;\n    cout &lt;&lt; \"Current = \" &lt;&lt; Current-&gt;Str.Integer &lt;&lt; endl;\n}\nvoid LinkedList::add(int a)\n{\n    Node n;\n    n.Str.Integer = a;\n    Current-&gt;next = &amp;n;\n    Current = Current-&gt;next;\n    cout &lt;&lt; Current-&gt;Str.Integer;\n}\n</code></pre>\n\n<p>Now whenever I create a new LinkedList and adding something to it I get this error.\nI got a feeling like I'm using the Stack wrong somehow, not sure why though.\nThank you from advance.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6055637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c21SGtYf0f8/AAAAAAAAAAI/AAAAAAAAAHs/_Q_cAiI5VSQ/photo.jpg?sz=128", "display_name": "Briana Caldera", "link": "https://stackoverflow.com/users/6055637/briana-caldera"}, "edited": false, "score": 0, "creation_date": 1458178531, "post_id": 36045244, "comment_id": 59748569, "body": "Thank you i got it the only change I made was I changed <code>std::vector&lt;double&gt; data</code> to <code>std::vector&lt;double&gt; arr</code>. If it not to much to ask can you show me how it would be done with the sum and I could figure out the rest. In class we&#39;ve only looked at one example using the vector library."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 5, "user_id": 6055637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c21SGtYf0f8/AAAAAAAAAAI/AAAAAAAAAHs/_Q_cAiI5VSQ/photo.jpg?sz=128", "display_name": "Briana Caldera", "link": "https://stackoverflow.com/users/6055637/briana-caldera"}, "edited": false, "score": 0, "creation_date": 1458180355, "post_id": 36045244, "comment_id": 59749059, "body": "You could employ the use of <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"nofollow noreferrer\"><code>std::accumulate</code></a> to perform summation on <code>arr</code>. <code>double sum = std::accumulate(arr.begin(), arr.end(), 0);</code>"}], "tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": true, "score": 1, "last_activity_date": 1458156911, "last_edit_date": 1458156911, "creation_date": 1458156554, "answer_id": 36045244, "question_id": 36045095, "link": "https://stackoverflow.com/questions/36045095/lost-data-from-double-and-error-windows-has-triggered-a-breakpoint-in-exe-this/36045244#36045244", "title": "Lost data from double and Error: Windows has triggered a breakpoint in exe. This may be due to a corruption of the heap,", "body": "<pre><code>int count=0, floatpt;\ndouble *arr =new double[count]; \n</code></pre>\n\n<p><code>count</code> is 0, so the array you create has no allocation. In <code>getdata</code> you therefore read into memory locations that are out of bounds.:</p>\n\n<p>Did you intend to reallocate later?</p>\n\n<p>Perhaps if you tried to use a <code>std::vector&lt;double&gt;</code>, then things would work out. It automatically resizes itself, and it's easy to do bounds checking.</p>\n\n<p>Something like this (not tested):</p>\n\n<pre><code>#include &lt;vector&gt;\n// ...\nstd::vector&lt;double&gt; data;\ngetdata(arr);\n// ...\n\nvoid getdata(std::vector&lt;double&gt;&amp; arr)\n{\n    double nextValue;\n\n    cout&lt;&lt;\"Please enter floating point data.\\n\"; \n    cout&lt;&lt;\"After the last number has been entered press 0 (zero) \\n\"; \n    cin&gt;&gt;nextValue; \n    while(nextValue != 0)\n    {\n       arr.push_back(nextValue);\n       cin &gt;&gt; nextValue;\n    }\n }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6055637, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-c21SGtYf0f8/AAAAAAAAAAI/AAAAAAAAAHs/_Q_cAiI5VSQ/photo.jpg?sz=128", "display_name": "Briana Caldera", "link": "https://stackoverflow.com/users/6055637/briana-caldera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 36045244, "answer_count": 1, "score": 0, "last_activity_date": 1458156911, "creation_date": 1458156073, "question_id": 36045095, "link": "https://stackoverflow.com/questions/36045095/lost-data-from-double-and-error-windows-has-triggered-a-breakpoint-in-exe-this", "title": "Lost data from double and Error: Windows has triggered a breakpoint in exe. This may be due to a corruption of the heap,", "body": "<p>I've been working on this code for a while and I almost got it to work but I'm running into a problem. I'm loosing data when it is sorting it. The more number I input the more numbers display a just integers. <a href=\"http://i.stack.imgur.com/RiLwF.png\" rel=\"nofollow\">link to the image of my output</a></p>\n\n<p>Also once the code runs I'm getting a pop up window with this message (I noticed I get this error after I added the sum function and every function after that and I did not press F12):</p>\n\n<p>\"Windows has triggered a breakpoint in project3.exe.</p>\n\n<p>This may be due to a corruption of the heap, which indicates a bug in project3.exe or any of the DLLs it has loaded.</p>\n\n<p>This may also be due to the user pressing F12 while \nproject3.exe has focus.</p>\n\n<p>The output window may have more diagnostic information.\n\"</p>\n\n<p>This is my code:\nAsk the user for number after the last numbered enter they have to press zero, it display back the data, displays some statistics and sorts the data.\nI'm not checking for user error</p>\n\n<p>(*The terminal window closes if I don't use <code>system(\"pause\")</code> so that is why it's there and I know I'm supposed to <code>'delete []arr</code> but it will give me breakpoint message after I put zero that is why it is comment out) </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nvoid getdata(double *arr, double &amp;data, int &amp;floatpt);\nvoid display (double *arr, int floatpt);\nvoid computesum (double *arr, int floatpt, double sum);\nvoid computearthmeticmean (double *arr, int floatpt, double aMean);\nvoid computeharmonicmean (double *arr, int floatpt, double hMean);\nvoid median(double *arr, int floatpt);\nvoid sort (double *arr, int floatpt);\nint main ()\n{\n    double data, sum=0, aMean=0, hMean=0;\n    int count=0, floatpt;\n    double *arr =new double[count]; \n\n    getdata (arr, data, floatpt);\n    cout&lt;&lt;\"Thank you.  The data you entered are \"&lt;&lt;endl; \n    display(arr, floatpt);\n    cout&lt;&lt;\"The following statistics were computed \"&lt;&lt;endl;\n    computesum(arr,floatpt, sum);\n    computearthmeticmean(arr, floatpt, aMean);\n    median(arr, floatpt);\n    computeharmonicmean (arr, floatpt, hMean);\n    sort(arr, floatpt);\n    cout&lt;&lt;\"The original data set is \"&lt;&lt;endl;\n    display(arr, floatpt);\n    cout&lt;&lt;\"Thank you for using this program.  Enjoy your statistics \"&lt;&lt;endl;\n\n    //delete []arr;\n\n\n   system (\"pause\");\n   return 0;\n}\nvoid getdata(double *arr, double &amp;data, int &amp;floatpt)\n{\n    int count=0; \n\n    cout&lt;&lt;\"Please enter floating point data.\\n\"; \n    cout&lt;&lt;\"After the last number has been entered press 0 (zero) \\n\"; \n    do\n    {\n        cin&gt;&gt;arr[count]; \n        data = arr[count]; \n\n        count++; \n\n    }while(data != 0);\n    floatpt=(count-1);\n\n }\nvoid display (double *arr, int floatpt)\n{\n    for(int i=0; i&lt;floatpt; i++) \n    { \n        cout&lt;&lt;arr[i]&lt;&lt;endl;\n    }\n\n}\nvoid computesum (double *arr, int floatpt, double sum)\n{\n    for (int j=0; j&lt;floatpt; j++)\n    {\n        sum+=arr[j];\n    }\n    cout&lt;&lt;\"Sum: \"&lt;&lt;sum&lt;&lt;endl;\n\n}\nvoid computearthmeticmean (double *arr, int floatpt, double aMean)\n{\n    for (int a=0; a&lt;floatpt; a++)\n    {\n        aMean+=arr[a];\n    }\n    aMean=aMean/floatpt;\n    cout&lt;&lt;\"Arithmetic Mean: \"&lt;&lt;aMean&lt;&lt;endl;\n\n}\nvoid computeharmonicmean (double *arr, int floatpt, double hMean)\n{\n    for (int h=0; h&lt;floatpt; h++)\n    {\n        hMean+=(1/arr[h]);\n    }\n    hMean=floatpt/hMean;\n    cout&lt;&lt;\"Harmonic Mean: \"&lt;&lt;hMean&lt;&lt;endl;\n\n}\nvoid median(double *arr, int floatpt)\n{\n    int temp;\n    double median;\n\n    for (int s=0; s&lt;floatpt; s++) \n    {\n        for (int r=0; r&lt;(floatpt-1); ++r) \n        {\n            if (arr[r] &gt; arr[r+1]) \n            {\n                temp = arr[r];\n                arr[r] = arr[r+1];\n                arr[r+1] = temp;\n            }\n        }\n\n        if (floatpt%2 == 0)\n        {\n            median = (arr[s/2] + arr[(s/2)-1])/2.0;\n        }\n        else\n        {\n            median = arr[s/2]/1.0;\n        }\n    }\n\n    cout&lt;&lt;\"Median: \"&lt;&lt;median&lt;&lt;endl;\n\n}\nvoid sort (double *arr, int floatpt)\n{\n    cout&lt;&lt;\"The sorted data set is: \"&lt;&lt;endl;\n    for (int sd=0; sd&lt;floatpt; sd++) \n    {\n        cout&lt;&lt;arr[sd]&lt;&lt;endl;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458156141, "post_id": 36045078, "comment_id": 59738672, "body": "Replace <code>int i</code> by <code>auto i</code> (that you can rename into <code>it</code> as <b>iterator</b>)."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1458156291, "post_id": 36045078, "comment_id": 59738769, "body": "it seems also that <code>*e</code> should just be <code>e</code> in the <code>find</code>."}, {"owner": {"reputation": 742, "user_id": 4238854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37c9e926e2883f6e69806dea08124344?s=128&d=identicon&r=PG&f=1", "display_name": "KimR", "link": "https://stackoverflow.com/users/4238854/kimr"}, "edited": false, "score": 0, "creation_date": 1458157470, "post_id": 36045078, "comment_id": 59739515, "body": "added my graph methods. I can&#39;t find a way to delete an edge without my program crashing. (silent, no errors this time)."}, {"owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "edited": false, "score": 1, "creation_date": 1458158133, "post_id": 36045078, "comment_id": 59739925, "body": "Try to add <code>if (it != edgeList.end()) </code> before <code>edgeList.erase(it)</code>"}, {"owner": {"reputation": 742, "user_id": 4238854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37c9e926e2883f6e69806dea08124344?s=128&d=identicon&r=PG&f=1", "display_name": "KimR", "link": "https://stackoverflow.com/users/4238854/kimr"}, "edited": false, "score": 0, "creation_date": 1458158391, "post_id": 36045078, "comment_id": 59740088, "body": "Nah, actually, it seems that the iterator is not finding the edge. I will get to the end of the list when i should&#39;nt, - and my program crash when i try to erase."}], "answers": [{"comments": [{"owner": {"reputation": 742, "user_id": 4238854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37c9e926e2883f6e69806dea08124344?s=128&d=identicon&r=PG&f=1", "display_name": "KimR", "link": "https://stackoverflow.com/users/4238854/kimr"}, "edited": false, "score": 0, "creation_date": 1458159106, "post_id": 36045189, "comment_id": 59740477, "body": "It still crashes when i get to the erase-part. I assume it should be erase(it) and not erase(i) since &quot;i&quot; is not declared."}, {"owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "reply_to_user": {"reputation": 742, "user_id": 4238854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37c9e926e2883f6e69806dea08124344?s=128&d=identicon&r=PG&f=1", "display_name": "KimR", "link": "https://stackoverflow.com/users/4238854/kimr"}, "edited": false, "score": 0, "creation_date": 1458160024, "post_id": 36045189, "comment_id": 59741045, "body": "@KimR Yes, it should be <code>it</code>, sorry for my mistake"}], "tags": [], "owner": {"reputation": 4791, "user_id": 3899471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f65ff7602231a1a1653a7debf32e7f?s=128&d=identicon&r=PG&f=1", "display_name": "kvorobiev", "link": "https://stackoverflow.com/users/3899471/kvorobiev"}, "is_accepted": false, "score": 2, "last_activity_date": 1458160032, "last_edit_date": 1458160032, "creation_date": 1458156340, "answer_id": 36045189, "question_id": 36045078, "link": "https://stackoverflow.com/questions/36045078/find-element-in-a-vector-and-remove-it/36045189#36045189", "title": "Find element in a vector and remove it", "body": "<p><code>std::find</code> <a href=\"http://www.cplusplus.com/reference/algorithm/find/\" rel=\"nofollow\">function</a> returns not an <code>int</code>, but <code>iterator</code>. You could use <code>auto</code> keyword, as mentioned in comments, or use something like</p>\n\n<pre><code>std::vector&lt;Edge*&gt;::iterator it = find(edgeList.begin(),edgeList.end(), e);\n</code></pre>\n\n<p>Also you should check <code>iterator</code> before erase</p>\n\n<pre><code>void Graph::removeEdge(Edge *e)\n{\n  Node* v = e-&gt;endpoint[0];\n  Node* w = e-&gt;endpoint[1];\n  if (this-&gt;areAdjacent(v,w))\n  {\n    auto it = find(edgeList.begin(),edgeList.end(), e);\n\n    if ( it != edgeList.end() )\n      edgeList.erase(it)\n  }\n}\n</code></pre>\n\n<p>because invalid input causes <a href=\"http://www.cplusplus.com/reference/vector/vector/erase/\" rel=\"nofollow\">undefined behavior</a>.</p>\n"}], "owner": {"reputation": 742, "user_id": 4238854, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/37c9e926e2883f6e69806dea08124344?s=128&d=identicon&r=PG&f=1", "display_name": "KimR", "link": "https://stackoverflow.com/users/4238854/kimr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1937, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458160032, "creation_date": 1458156009, "last_edit_date": 1458157414, "question_id": 36045078, "link": "https://stackoverflow.com/questions/36045078/find-element-in-a-vector-and-remove-it", "title": "Find element in a vector and remove it", "body": "<p>I have a vector with a set of pointers to edges in a graph. \nI'm supposed to remove an edge but i get an error when i run this code. What i try to do is to find the index of the edge I'm looking for so i can delete the edge from the list.</p>\n\n<p>Error:</p>\n\n<pre><code>error: cannot convert '__gnu_cxx::__normal_iterator&lt;Edge**,    \nstd::vector&lt;Edge*&gt; &gt;' to 'int' in initialization\n   int i = find(edgeList.begin(),edgeList.end(), *e);\n</code></pre>\n\n<p>I understand it has something to do with the convertion from Edge To int, but i cant find the soloution for this.</p>\n\n<p>My method:</p>\n\n<pre><code>void Graph::removeEdge(Edge *e)\n{\n\nNode* v = e-&gt;endpoint[0];\nNode* w = e-&gt;endpoint[1];\nif (this-&gt;areAdjacent(v,w) == true)\n{\n  int i = find(edgeList.begin(),edgeList.end(), *e);\n\n  edgeList.erase(i)\n\n }\n}\n</code></pre>\n\n<p>Graph Class</p>\n\n<pre><code>class Graph : public GraphADT {\n\npublic:\n// General graph methods\nNode* aVertex();\nvoid insertVertex(Node* n);\nvoid insertEdge(Node* v, Node* w, int i = 0);\nvoid removeVertex(Node* n);\nvoid removeEdge(Edge* e);\nstd::vector&lt;Edge*&gt;&amp; incidentEdges(Node* n);\nNode** endVertices(Edge* e);\nNode* opposite(Node* n, Edge* e);\nbool areAdjacent(Node* v, Node* w);\n\n// Methods for directed edges\nbool isDirected(Edge* e);\nvoid insertDirectedEdge(Node* v, Node* w, int i = 0);\nNode* origin(Edge* e);\nNode* destination(Edge* e);\n\n// Generic methods\nint numVertices();\nint numEdges();\nvector&lt;Node*&gt;&amp; vertices();\nvector&lt;Edge*&gt;&amp; edges();\n\n// Algorithms\nvoid depthFirstTraversal(Node* n);\nvoid breadthFirstTraversal(Node* n);\nvector&lt;Edge*&gt; primsAlgorithm();\nvoid dijkstrasAlgorithm(Node* n);\n\nprivate:\nvoid setAllUnvisited();\nvector&lt;Node*&gt; verticeList;\nvector&lt;Edge*&gt; edgeList;\n};\n</code></pre>\n\n<p>Any help is much appreciated </p>\n"}, {"tags": ["c++", "c", "gcc", "static-libraries"], "comments": [{"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1458160229, "post_id": 36044996, "comment_id": 59741169, "body": "I added another script to do the task you want. Does it help you?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1458164647, "post_id": 36044996, "comment_id": 59743621, "body": "You get <code>bar</code> as undefined in <code>foo.o</code>, and <code>missing</code> as undefined in <code>bar.o</code>, both of which are correct. Unclear what you&#39;re asking for. <code>nm</code> isn&#39;t a linker."}], "answers": [{"comments": [{"owner": {"reputation": 360, "user_id": 2402092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f86b405b842bb73a31293545c59004?s=128&d=identicon&r=PG", "display_name": "flapenguin", "link": "https://stackoverflow.com/users/2402092/flapenguin"}, "edited": false, "score": 0, "creation_date": 1458156342, "post_id": 36045066, "comment_id": 59738802, "body": "I undestand that <code>ar</code> is just and archiver, but I hoped <code>nm</code> or some other tool can &quot;match&quot; defined and undefined symbols in whole archive."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 360, "user_id": 2402092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f86b405b842bb73a31293545c59004?s=128&d=identicon&r=PG", "display_name": "flapenguin", "link": "https://stackoverflow.com/users/2402092/flapenguin"}, "edited": false, "score": 3, "creation_date": 1458156980, "post_id": 36045066, "comment_id": 59739211, "body": "@flapenguin, nope. ar archive is not much different from zip archive. It is merely a collection of .o files (and a symbol table). And nm <b>never</b> matches anything. It works with a single file and basically prints object file structure."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1458155976, "creation_date": 1458155976, "answer_id": 36045066, "question_id": 36044996, "link": "https://stackoverflow.com/questions/36044996/nm-get-undefined-symbols-for-whole-archive-not-separate-object-files/36045066#36045066", "title": "nm get undefined symbols for whole archive, not separate object files", "body": "<p>The archival tool just creates ... well, an archive. It's not a linker. References are resolved by your linker, and this process will find <code>foo.o</code>'s reference to <code>bar</code> to be resolved in <code>bar.o</code>. The archiver can't do that, and <code>nm</code> won't do it either - it's just running itself over each object inside the archive, independently.</p>\n"}, {"tags": [], "owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "is_accepted": true, "score": 3, "last_activity_date": 1458223105, "last_edit_date": 1458223105, "creation_date": 1458156321, "answer_id": 36045180, "question_id": 36044996, "link": "https://stackoverflow.com/questions/36044996/nm-get-undefined-symbols-for-whole-archive-not-separate-object-files/36045180#36045180", "title": "nm get undefined symbols for whole archive, not separate object files", "body": "<p>Link the whole archive into a single object file and check that:</p>\n\n<pre><code>ar -x libfoo.a      # unpack libfoo.a\nld -r -o tmp.o *.o  # link all objects into tmp.o\nnm -u tmp.o         # find undefined symbols in tmp.o\nrm *.o              # remove tmp.o as well as the contents of libfoo.a\n</code></pre>\n\n<p>This should give the desired result as the linker resolves all symbols it can find in the partial link requested by <code>-r</code>.</p>\n\n<p>Note that the current working directory should not contain any object files for best results.</p>\n\n<p>You can use the following script for more consistent results:</p>\n\n<pre><code># use: script libfoo.a\ntmp=${TEMPDIR:-/tmp}/undefsyms.$$\nmkdir $tmp\ncp $1 $tmp/lib.a\ncd $tmp\nar -x lib.a\nld -r -o $$.o *.o\nnm -u $$.o\nrm *\ncd ..\nrmdir $tmp\n</code></pre>\n\n<p>If you feel uncomfortable unpacking and linking the library for this purpose, use this script which uses command line utilities to compute the information you need using the <code>join</code> utility:</p>\n\n<pre><code>if [ $# -lt 1 ]\nthen\n    echo Usage: $0 library.a\n    exit 1\nfi\n\nlib=$1\n\npostproc() { cut -w -f 2-3 | sort -u; }\nallsyms() { nm -g -P -A $lib | postproc; }\nundefsyms() { nm -g -P -A -u $lib | postproc; }\ndefsyms() { allsyms | grep -v 'U$'; }\n\ncomm -2 -3 &lt;(undefsyms | cut -w -f 1) &lt;(defsyms | cut -w -f 1)\n</code></pre>\n"}], "owner": {"reputation": 360, "user_id": 2402092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f86b405b842bb73a31293545c59004?s=128&d=identicon&r=PG", "display_name": "flapenguin", "link": "https://stackoverflow.com/users/2402092/flapenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 2, "accepted_answer_id": 36045180, "answer_count": 2, "score": 4, "last_activity_date": 1458223105, "creation_date": 1458155729, "question_id": 36044996, "link": "https://stackoverflow.com/questions/36044996/nm-get-undefined-symbols-for-whole-archive-not-separate-object-files", "title": "nm get undefined symbols for whole archive, not separate object files", "body": "<p>I have two files:</p>\n\n<p><code>foo.c</code>: <code>int foo() { extern int bar(); return bar(); }</code></p>\n\n<p><code>bar.c</code>: <code>int bar() { extern int missing(); return missing() + 42; }</code></p>\n\n<p>I compile them and and compose into <code>.a</code> static lib:</p>\n\n<pre><code>$ gcc -c foo.c bar.c\n$ ar rcs libfoobar.a foo.o bar.o\n</code></pre>\n\n<p>I want to find which symbols are missing (undefined) from whole archive. But I still get <code>bar</code> as undefined, while it exists in <code>foo.o</code>:</p>\n\n<pre><code>$ nm -u libfoobar.a\nfoo.o:\n    U bar\nbar.o:\n    U missing\n</code></pre>\n\n<p>How can I omit <code>bar</code> from output and show only <code>missing</code>?</p>\n"}, {"tags": ["c++", "logging", "global-variables", "functor"], "answers": [{"comments": [{"owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458156672, "post_id": 36045057, "comment_id": 59739004, "body": "Where, in all of this, is my_message written anywhere?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458156766, "post_id": 36045057, "comment_id": 59739070, "body": "@Chap, <code>Message_</code> is an argument to the macro <code>LOG_DEBUG</code>. When you call <code>LOG_DEBUG(my_message)</code> <code>Message_</code> is substituted with actual paramter - <code>my_message</code> in your case."}, {"owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458157075, "post_id": 36045057, "comment_id": 59739277, "body": "Yes, but I don&#39;t see where it&#39;s actually being outputted. Is that being done by the part that begins &quot;static cast&lt;...&gt;&quot;?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458158696, "post_id": 36045057, "comment_id": 59740244, "body": "@Chap, I do not see any static_cast in the <code>LOG</code> macro. I would assume, <code>operator()()</code> for Logger object takes care of actual output."}, {"owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458159744, "post_id": 36045057, "comment_id": 59740895, "body": "My apologies, I was referring to the code in the SO article I referenced, which I thought was irrelevant in my case. I have edited my OP so that #define LOG is exactly like the referenced answer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458160045, "post_id": 36045057, "comment_id": 59741052, "body": "@Chap, yes, the part which begins with <code>static_cast...</code> will serialize <code>Message_</code> into temporary <code>std::ostringstream</code>, and than call <code>str()</code> - returning the string representation of <code>Message_</code> object. I am not clear why it has <code>flush()</code> or cast in it, though."}, {"owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458160493, "post_id": 36045057, "comment_id": 59741318, "body": "So as I thought, it&#39;s not relevant to my problem - one way or another, we&#39;ve got this nicely formatted string, but nowhere is it actually outputted or sent to the &quot;LogSink&quot;. I guess the referenced answer didn&#39;t attempt to describe that."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "edited": false, "score": 0, "creation_date": 1458160620, "post_id": 36045057, "comment_id": 59741397, "body": "@Chap, I would not follow this answer. The overall quality of this solution is low. For example, when Message_ is a string, the code will unneccessary send it to stringstream, resulting in performance degaradation."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 5, "last_activity_date": 1458156635, "last_edit_date": 1458156635, "creation_date": 1458155956, "answer_id": 36045057, "question_id": 36044897, "link": "https://stackoverflow.com/questions/36044897/implementing-logging-using-globals-and-functors/36045057#36045057", "title": "Implementing logging using globals and functors", "body": "<p>The function <code>Debug</code> returns a Logger object (which is created on the first invocation of this function). </p>\n\n<p>This <code>Logger</code> object seems to have <code>operator()()</code> defined for it (judging by the macro definition), which does make it <em>a functor</em>. By the way, functor is nothing special - it's by definiton any type which has <code>operator()()</code> defined for it. However, your analysis doesn't seem correct. Instead, </p>\n\n<pre><code>LOG_DEBUG(my_message);\n</code></pre>\n\n<p>will be expanded into</p>\n\n<pre><code>LOG(Debug(), Message_)\n</code></pre>\n\n<p>And that into </p>\n\n<pre><code>Debug()(Message_, __FUNCTION__, __FILE__, __LINE__);\n</code></pre>\n\n<p>Here <code>Debug()</code> will return an object which have <code>operator()()</code> defined, and this object will be used for the call.</p>\n\n<h2>Some QnA</h2>\n\n<blockquote>\n  <p>Why doesn't the Logger&amp; Debug() signature specify four arguments?</p>\n</blockquote>\n\n<p>Because it doesn't need to. Debug() simply returns (static) Logger object created with specific arguments (log level and output device). </p>\n\n<blockquote>\n  <p>At what point is the static Logger object instantiated? What causes it to be instantiated?</p>\n</blockquote>\n\n<p>When Debug() function is called first time it initializes it's static objects. This is the basic of static function variables.</p>\n\n<p>The last, but not the least. I personally find it not worth the efforts to write own logger. It is tedious and extremely boring unless you really need something special out of it. While I am not really crazy about both Boost.Log and log4cpp, I would (am in fact) certainly use one of them instead of rolling my own logger. Even suboptimal logging is better than spending weeks on own solution.</p>\n"}], "owner": {"reputation": 3439, "user_id": 522385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a34ec8fb0c5c9a2a455d63626bc9b1a?s=128&d=identicon&r=PG", "display_name": "Chap", "link": "https://stackoverflow.com/users/522385/chap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 526, "favorite_count": 1, "answer_count": 1, "score": 14, "last_activity_date": 1458506532, "creation_date": 1458155415, "last_edit_date": 1495542251, "question_id": 36044897, "link": "https://stackoverflow.com/questions/36044897/implementing-logging-using-globals-and-functors", "title": "Implementing logging using globals and functors", "body": "<p>I want to implement C++ logging with the following characteristics:</p>\n\n<ul>\n<li>It must be available to all source code without needing for every function to have an extra parameter (which I presume requires a global)</li>\n<li>A logging call can specify a severity level (INFO, DEBUG, WARN, etc.) and the logging facility can be set at runtime to ignore calls below a certain severity level</li>\n<li>The log sink can be set at runtime to the console, or to a file.</li>\n</ul>\n\n<p>Things I <em>don't</em> need are: </p>\n\n<ul>\n<li>Support for multiple log sinks at runtime (i.e., it all goes either to the console, or to a file)</li>\n<li>Support for multithreaded logging</li>\n<li>Ability to pass <code>cout</code>-style expressions (e.g. <code>\"foo=\" &lt;&lt; foo</code>) in a logger call. I will only pass a <code>std::string</code>.</li>\n</ul>\n\n<p>I found <a href=\"https://stackoverflow.com/a/8338089/522385\">this answer</a>, which appears to address my needs, but it's quite a bit over my head. I think my confusion centers around functors. (I read the Wikipedia article but it clearly hasn't sunk in.) </p>\n\n<p>Here are the parts I <em>do</em> understand:</p>\n\n<ul>\n<li>Using a macro (e.g. LOG_DEBUG) to conveniently specify severity level and call the logger.</li>\n<li>Using <code>#ifdef NDEBUG</code> to keep logging calls from being compiled (although I need to be able to set logging at runtime).</li>\n<li>The rationale for using a macro to invoke the logger, so that it can automatically and invisibly add info like <code>__FILE__</code> and <code>__LINE__</code> at point where the logger is being called.</li>\n<li>The LOG macro contains an expression beginning with <code>static_cast&lt;std::ostringstream&amp;&gt;</code>. I <em>think</em> this is purely to do with evaluating the <code>cout</code>-style formatting string, which I don't intend to support.</li>\n</ul>\n\n<p>Here's where I'm struggling:</p>\n\n<pre><code>Logger&amp; Debug() {\n  static Logger logger(Level::Debug, Console);\n  return logger;\n}\n</code></pre>\n\n<p>Reading about <code>operator()</code>, it looks like <code>class Logger</code> is used for creating \"functors\". Each Logger functor is instantiated (?) with both a level, and a LogSink. (Do you \"instantiate\" a functor?) LogSink is described as \"a backend consuming preformatted messages\", but I don't know what that would look like or how it's \"written to\". At what point is the static Logger object instantiated? What causes it to be instantiated?</p>\n\n<p>These macro definitions...</p>\n\n<pre><code>#define LOG(Logger_, Message_)                   \\\n  Logger_(                                       \\\n    static_cast&lt;std::ostringstream&amp;&gt;(            \\\n       std::ostringstream().flush() &lt;&lt; Message_  \\\n    ).str(),                                     \\\n    __FUNCTION__,                                \\\n    __FILE__,                                    \\\n    __LINE__                                     \\\n  );\n\n#define LOG_DEBUG(Message_) LOG(Debug(), Message_)\n</code></pre>\n\n<p>... and this line of code...</p>\n\n<pre><code>LOG_DEBUG(my_message);\n</code></pre>\n\n<p>... get preprocessed to:</p>\n\n<pre><code>Debug()(my_message, \"my_function\", \"my_file\", 42);\n</code></pre>\n\n<p>What happens when this executes? </p>\n\n<p>How and where is the formatted string actually written to the \"log sink\"?</p>\n\n<p>(Note: it was suggested that I look at <strong>log4cpp</strong> - I found it much bigger and harder to understand than what I need, not to mention the political problems I'd have bringing a third-party library into our environment)</p>\n\n<hr>\n\n<p>UPDATE: </p>\n\n<p>To understand how the above solution works, I tried writing a minimally complete, working program. I intentionally removed the following:</p>\n\n<ul>\n<li>the \"magic\" involving std::ostringstream</li>\n<li>the #ifdef NDEBUG</li>\n<li>the Logger Level class enum</li>\n<li>the LogSink ctor argument (for now I will just write to std::cout)</li>\n</ul>\n\n<p>Here is the complete source file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nclass Logger {\npublic:\n    Logger(int l);\n    void operator()(std::string const&amp; message,\n                    char const* function,\n                    char const* file,\n                    int line);\nprivate:\n    int _level;\n};\n\nLogger::Logger(int l) :\n    _level(l)\n{ }\n\n#define LOG(Logger_, Message_)  \\\n    Logger_(                    \\\n        Message_,               \\\n        __FUNCTION__,           \\\n        __FILE__,               \\\n        __LINE__                \\\n    )\n\n#define LOG_DEBUG(Message_)     \\\n    LOG(                        \\\n        Debug(),                \\\n        Message_                \\\n    )\n\nLogger&amp; Debug() {\n    static Logger logger(1);\n    return logger;\n}\n\n// Use of Logger class begins here\n\nint main(int argc, char** argv) {\n    LOG_DEBUG(\"Hello, world!\");\n    return 0;\n}\n</code></pre>\n\n<p>When compiled:</p>\n\n<pre><code>$ c++ main.cpp\nUndefined symbols for architecture x86_64:\n  \"Logger::operator()(std::__1::basic_string&lt;char, std::__1::char_traits&lt;char&gt;, std::__1::allocator&lt;char&gt; &gt; const&amp;, char const*, char const*, int)\", referenced from:\n      _main in main-c81cf6.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>I see that there's no definition of a function that takes those four arguments and writes them to <code>std::cout</code>, but what is the name of the function I need to define?</p>\n\n<p>(By now I agree that I should be using Boost::Log, but functors are obviously a topic that I don't fully understand.)</p>\n"}, {"tags": ["c++", "firebird", "firebird2.5", "firebird-embedded"], "comments": [{"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1458158648, "post_id": 36044885, "comment_id": 59740223, "body": "The fact that you can select the value should indicate that the insert succeeded. And whether the value is too long depends on the column character set and your connection character set. Say your connection character set is NONE, and the column is UTF8 (by way of the database default character set), then you might be able to get longer values in without error. Could the problem be that other parts of your program use a transaction that started before the transaction that committed the row, and therefor that transaction can&#39;t see the row?"}, {"owner": {"reputation": 315, "user_id": 270319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b78a9b7e27253d97bcc7d1ce9a43d277?s=128&d=identicon&r=PG", "display_name": "DAG", "link": "https://stackoverflow.com/users/270319/dag"}, "reply_to_user": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 0, "creation_date": 1458163559, "post_id": 36044885, "comment_id": 59743049, "body": "@MarkRotteveel So the value I select back is the ID field (the primary key) which gets used to establish some foreign key relationships.  It&#39;s not transaction start time related because I am shutting down the application and looking at the database with an external tool to see (or not see) what got inserted.  The records are definitely not being inserted.  I can with isql and Flamerobin do the same insert and get an error back right away, though in those cases I am putting the values directly into the SQL string instead of using parameters as with my code."}, {"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "edited": false, "score": 1, "creation_date": 1458209900, "post_id": 36044885, "comment_id": 59762032, "body": "If you did a successful select, the value was in the table, and the insert should have succeeded. I can&#39;t really explain the behavior you&#39;re seeing. I do suggest that you try to upgrade to Firebird 2.5.5 (and backup/restore your database) to see if it also occurs in that version."}], "answers": [{"tags": [], "owner": {"reputation": 315, "user_id": 270319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b78a9b7e27253d97bcc7d1ce9a43d277?s=128&d=identicon&r=PG", "display_name": "DAG", "link": "https://stackoverflow.com/users/270319/dag"}, "is_accepted": true, "score": 2, "last_activity_date": 1460732205, "creation_date": 1460732205, "answer_id": 36650525, "question_id": 36044885, "link": "https://stackoverflow.com/questions/36044885/firebird-ibpp-insert-fails-silently/36650525#36650525", "title": "Firebird/IBPP Insert Fails Silently", "body": "<p>So a few weeks later a coworker and I stumbled onto the cause of this issue while looking into a slightly different issue.  We were doing our work/testing using the 64 bit Microsoft Visual Studio C++ toolchain.  The Firebird libraries return status and error information through an array of type <code>ISC_STATUS</code>.  The libraries define this as a typedef of <code>intptr_t</code> which is pointer sized and thus on a 64 bit system is 64 bits.</p>\n\n<p>The IBPP library dynamically loads the Firebird client libraries.  When it defines its version of <code>ISC_STATUS</code>, it defines it as a <code>long</code>.  On Linux/GCC I think this works (e.g. will be 32 bits on a 32 bit architecture and 64 bits on a 64 bit architecture) but in Microsoft's Visual C++ <code>long</code> is always 32 bits.  The result was that when we compiled and ran in a 64 bit configuration it was interpreting an array of 64 bit integers as an array of 32 bit integers.  The result was that, as all the values that were put in the array were positive integers that fit in 32 bits, it appeared that every other value in the status array was 0.  IBPP detects errors by checking for a non-zero value in the second spot in the array which in 64 bit processing would always be zero because of this.</p>\n\n<p>The solution was to update IBPP's definition of <code>ISC_STATUS</code> to properly match what the Firebird client library was using (this is in the 'ibase.h' header file).</p>\n"}], "owner": {"reputation": 315, "user_id": 270319, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b78a9b7e27253d97bcc7d1ce9a43d277?s=128&d=identicon&r=PG", "display_name": "DAG", "link": "https://stackoverflow.com/users/270319/dag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 36650525, "answer_count": 1, "score": 2, "last_activity_date": 1460732205, "creation_date": 1458155393, "last_edit_date": 1458158349, "question_id": 36044885, "link": "https://stackoverflow.com/questions/36044885/firebird-ibpp-insert-fails-silently", "title": "Firebird/IBPP Insert Fails Silently", "body": "<p>I have a C++ application which uses an embedded Firebird database (e.g. using the fbembed.dll on Windows for embedded use) via the IBPP library.  I am currently using version 2.5.3 of Firebird and 2.5.3.1 of IBPP.  The problem I am having is that when I attempt to insert data which cannot be inserted due to column size issues or constraint violations (e.g. the insert should fail), I get no error or indication that the insertion failed.</p>\n\n<p>As a (simplified but representative) example, I have a table like:</p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>create table USER_TABLE (\n    ID BIGINT not null,\n    USER_ID VARCHAR(10) not null,\n    DISPLAY_NAME VARCHAR(50) not null,\n-- etc...\n    primary key (ID),\n    unique (USER_ID)\n);\n</code></pre>\n\n<p>The ID column is populated with a generator in a before insert trigger.  Now I try to insert from my application with the following code:</p>\n\n<pre><code>const string SQL_STMT = \"insert into USER_TABLE \"\n        \"(USER_ID, DISPLAY_NAME, etc) \"\n        \"values (?, ?, ?);\";\nIBPP::Statement stmt = IBPP::StatementFactory(m_db, m_tr, SQL_STMT);\nstmt-&gt;Set(1, userDataObject.getUserId());//returns const string&amp;,\nstmt-&gt;Set(2, userDataObject.getDisplayName());//returns const string&amp;\n//etc, etc...\nstmt-&gt;Execute();\n</code></pre>\n\n<p>If my <code>userDataObject.getUserId()</code> value is a string too long for the column like <code>1234567890xxx</code> I will not get an exception like I would expect.  I can (apparently successfully) get the ID inside the same transaction with a <code>select ID from user_table where ...</code> after doing the insert, or via a <code>... returning ID</code> at the end of the <code>SQL_STMT</code> variable above.  But once the transaction is committed and other parts of the code try to get the values in the table, it's not there.  At no point do I get an error/exception.</p>\n\n<p>Any ideas why I'm not getting an error in these circumstances?</p>\n"}, {"tags": ["c++", "ifstream", "cin"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1458155914, "post_id": 36044870, "comment_id": 59738540, "body": "<code>int Array1[NumOne];</code>  This line and lines like this are not valid ANSI C++.  You must declare arrays using a constant expression denoting the number of elements, not a runtime value.  Also what is the value of <code>sizeof(Array1)</code>?  Instead, use <code>std::vector</code> and the <code>std::vector::size()</code> function to determine the number of elements."}, {"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1458155923, "post_id": 36044870, "comment_id": 59738547, "body": "What is it exactly you expect <code>cout&lt;&lt;&quot;first array&quot;&lt;&lt;Array1&lt;&lt;endl;</code> to do? <code>Array1</code> is a pointer, so it prints out the memory location of the pointer."}, {"owner": {"reputation": 1799, "user_id": 5867869, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/M7o7w.jpg?s=128&g=1", "display_name": "RomCoo", "link": "https://stackoverflow.com/users/5867869/romcoo"}, "edited": false, "score": 1, "creation_date": 1458156029, "post_id": 36044870, "comment_id": 59738612, "body": "NumOne is 6, so read 6 lines of your file but it has only 3"}, {"owner": {"reputation": 515, "user_id": 4477150, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3aea7d6f507f324654ee5b653165399a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4477150/steph"}, "edited": false, "score": 0, "creation_date": 1458156433, "post_id": 36044870, "comment_id": 59738849, "body": "I see many things go wrong here, I adapted the code. However I only know the size of my array from NumTwo. How can I solve this then?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458156517, "post_id": 36044870, "comment_id": 59738896, "body": "do you know vectors? consider it same as arrays but can be resized or declared without an initial size"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1458157187, "post_id": 36044870, "comment_id": 59739345, "body": "@steph  -- In C++, dynamic arrays are done by using <code>std::vector</code>.  Arrays in standard C++ are fixed in sixe -- they cannot be resized, or have their sizes determined at runtime."}, {"owner": {"reputation": 515, "user_id": 4477150, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3aea7d6f507f324654ee5b653165399a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4477150/steph"}, "edited": false, "score": 0, "creation_date": 1458157282, "post_id": 36044870, "comment_id": 59739400, "body": "This number won&#39;t change during runtime that&#39;s why I thought this might be possible."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1458157410, "post_id": 36044870, "comment_id": 59739478, "body": "@steph - You declared <b>variable</b>s to store the size value.  Note the emphasis on the word <i>variable</i>.  That&#39;s all the compiler cares about.  If it were a constant, then that would be a different story.  <code>const int NumOne = 10;</code> for example would be ok, since it is a compile-time value.  In addition, you&#39;re reading in the value for <code>NumOne</code> and <code>NumTwo</code>.  That is considered a value determined at runtime."}, {"owner": {"reputation": 515, "user_id": 4477150, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3aea7d6f507f324654ee5b653165399a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4477150/steph"}, "edited": false, "score": 0, "creation_date": 1458157665, "post_id": 36044870, "comment_id": 59739646, "body": "Yes, it makes completely sense. Thanks!"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1458161057, "post_id": 36044870, "comment_id": 59741640, "body": "Instead of checking if infile is good only before reading the first two numbers you should check if it is bad (and terminate)."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1458156377, "post_id": 36045140, "comment_id": 59738819, "body": "There are other issues, such as 1) missing the return type when declaring <code>main</code>, and 2) Using non-standard C++ Variable Length Arrays."}, {"owner": {"reputation": 515, "user_id": 4477150, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3aea7d6f507f324654ee5b653165399a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4477150/steph"}, "edited": false, "score": 0, "creation_date": 1458157032, "post_id": 36045140, "comment_id": 59739244, "body": "in the first for-loop I want to store the first number in the first array, the second number in the second array and the third number in the third array and this for all rows (except the first)"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458157435, "post_id": 36045140, "comment_id": 59739495, "body": "okay, you read two numbers already in if (!inFile.good()). so you want 0 in the first, 1 in the second and 5 in the third? and so on till the end of file?"}], "tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": true, "score": 2, "last_activity_date": 1458156934, "last_edit_date": 1458156934, "creation_date": 1458156221, "answer_id": 36045140, "question_id": 36044870, "link": "https://stackoverflow.com/questions/36044870/storing-data-from-txt-as-column-vectors-in-c/36045140#36045140", "title": "storing data from .txt as column vectors in c++", "body": "<p>I am not sure how this code already compiled but:\n<strong>Issue One:</strong></p>\n\n<pre><code>cout&lt;&lt;\"first array\"&lt;&lt;Array1&lt;&lt;endl;\ncout&lt;&lt;\"second array\"&lt;&lt; Array2&lt;&lt;endl;\ncout&lt;&lt;\"third array\"&lt;&lt; Array3&lt;&lt;endl;\n</code></pre>\n\n<p>I think this will display the hexadecimal address of each array, since you didn't type which element <code>Array[?]</code> in every array you are tying to display.</p>\n\n<p><strong>Issue Two:</strong></p>\n\n<pre><code>    for(int i = 1; i &lt; NumOne + 1; i++){\n    infile &gt;&gt; Array1[i-1] &gt;&gt; Array2[i-1] &gt;&gt; Array3[i-1];\n</code></pre>\n\n<p>This code will set junk data, since it's going to try reading NumOne + 1 means 6 + 1 = 7 lines as max while you only have 3 lines. So what are you trying to do here?</p>\n\n<p><strong>Issue Three:</strong>\n you need to set a fixed size before declaring any array. So <code>int Numone = ?</code> or <code>Array[?]</code></p>\n\n<p>Try this part of using vectors if you need to set the size of your container <em>during</em> run time</p>\n\n<pre><code>        #include &lt;vectors&gt;\n        #include &lt;iostream&gt;\n        int main(int argc, char** argv)\n        {\n            std::ifstream infile(\"instance1.txt\");\n\n        int NumOne, NumTwo;\n\n        if (infile.good()){\n            infile &gt;&gt; NumOne &gt;&gt; NumTwo;\n        }\n\n        std::vector&lt;int&gt; MyVectorOne(NumTwo);\n        std::vector&lt;int&gt; MyVectorTwo(NumTwo);\n        std::vector&lt;int&gt; MyVectorThree(NumTwo);\n\n        for(int i = 1; i &lt; NumTwo + 1; i++){ // again this is wrong. What do you want here??\n            infile &gt;&gt; MyVectorOne[i-1] &gt;&gt; MyVectorOne[i-1] &gt;&gt; MyVectorOne[i-1];\n        }\n\n        infile.close();\n        cout&lt;&lt;\"first number\"&lt;&lt;NumOne&lt;&lt;endl;\n        cout&lt;&lt;\"second number\"&lt;&lt;NumTwo&lt;&lt;endl;\n\n        for (int i=0; i &lt; MyVectorOne.size(); i++){\n            cout &lt;&lt; MyVectorOne[i] &lt;&lt; \" \" &lt;&lt; MyVectorTwo[i] &lt;&lt; \" \" &lt;&lt; MyVectorThree[i] &lt;&lt; endl;\n        }\n\n     // and here? what are you trying to display? this is also wrong\n        cout&lt;&lt;\"first array\"&lt;&lt; MyVectorOne&lt;&lt;endl;\n        cout&lt;&lt;\"second array\"&lt;&lt; MyVectorTwo&lt;&lt;endl;\n        cout&lt;&lt;\"third array\"&lt;&lt; MyVectorThree&lt;&lt;endl;\n\n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 515, "user_id": 4477150, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3aea7d6f507f324654ee5b653165399a?s=128&d=identicon&r=PG&f=1", "display_name": "steph", "link": "https://stackoverflow.com/users/4477150/steph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 36045140, "answer_count": 1, "score": 0, "last_activity_date": 1458156934, "creation_date": 1458155325, "last_edit_date": 1458156326, "question_id": 36044870, "link": "https://stackoverflow.com/questions/36044870/storing-data-from-txt-as-column-vectors-in-c", "title": "storing data from .txt as column vectors in c++", "body": "<p>My input .txt looks as follows:</p>\n\n<pre><code>6 3\n0 1 5\n0 2 1\n0 5 53\n</code></pre>\n\n<p>From the second line onwards I want to store the columns in arrays, so I did the following:</p>\n\n<pre><code>main(int argc, char** argv)\n{\n    std::ifstream infile(\"instance1.txt\");\n\n    int NumOne, NumTwo;\n\n    if (infile.good()){\n        infile &gt;&gt; NumOne &gt;&gt; NumTwo;\n    }\n\n    int Array1[NumTwo];\n    int Array2[NumTwo];\n    int Array3[NumTwo];\n\n    for(int i = 1; i &lt; NumTwo + 1; i++){\n        infile &gt;&gt; Array1[i-1] &gt;&gt; Array2[i-1] &gt;&gt; Array3[i-1];\n    }\n\n    infile.close();\n    cout&lt;&lt;\"first number\"&lt;&lt;NumOne&lt;&lt;endl;\n    cout&lt;&lt;\"second number\"&lt;&lt;NumTwo&lt;&lt;endl;\n\n    for (int i=0; i &lt; sizeof(Array1); i++){\n        cout &lt;&lt; Array1[i] &lt;&lt; \" \" &lt;&lt; Array2[i] &lt;&lt; \" \" &lt;&lt; Array3[i] &lt;&lt; endl;\n    }\n    cout&lt;&lt;\"first array\"&lt;&lt;Array1&lt;&lt;endl;\n    cout&lt;&lt;\"second array\"&lt;&lt; Array2&lt;&lt;endl;\n    cout&lt;&lt;\"third array\"&lt;&lt; Array3&lt;&lt;endl;\n}\n</code></pre>\n\n<p>My output is the following:</p>\n\n<pre><code>first number6\nsecond number5\n0 1606413088 0\n0 1 5\n0 2 1\n0 5 53\n6923 5 1606414340\n1 0 32767\n1606673872 0 1606413088\n32767 0 1\n1606594089 0 2\n32767 0 5\n0 1 4\n65793 2 5\n80256 6923 5\n0 1 0\n80256 1606673872 0\n0 32767 0\n17623816 1606594089 0\n1 32767 0\nfirst array10x7fff5fbfeb10\nsecond array20x7fff5fbfeaf0\nthird array0x7fff5fbfead0\n</code></pre>\n\n<p>Does anyone know where these numbers come from? I'm new to C++ and appreciate any hints about what goes wrong here.</p>\n"}, {"tags": ["c++", "types", "arduino"], "comments": [{"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458156976, "post_id": 36044770, "comment_id": 59739208, "body": "Consider <code>unsigned int</code> for shifting if you want well defined behavior in c++."}, {"owner": {"reputation": 407, "user_id": 1307231, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe087c567bfda4d2f2cf9b42a9e91829?s=128&d=identicon&r=PG", "display_name": "mcenno", "link": "https://stackoverflow.com/users/1307231/mcenno"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458162261, "post_id": 36044770, "comment_id": 59742345, "body": "Yep, that&#39;s what I resorted to after staring at this for an hour."}], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 1307231, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe087c567bfda4d2f2cf9b42a9e91829?s=128&d=identicon&r=PG", "display_name": "mcenno", "link": "https://stackoverflow.com/users/1307231/mcenno"}, "edited": false, "score": 0, "creation_date": 1458162355, "post_id": 36045292, "comment_id": 59742398, "body": "Thanks for the comprehensive reply. I just couldn&#39;t wrap my head around this sort of &quot;dynamic typing&quot;, and am glad to see it happens only at the printing stage."}], "tags": [], "owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1458158424, "last_edit_date": 1458158424, "creation_date": 1458156677, "answer_id": 36045292, "question_id": 36044770, "link": "https://stackoverflow.com/questions/36044770/arduino-code-shifting-bits-seems-to-change-data-type-from-int-to-long/36045292#36045292", "title": "Arduino code: shifting bits seems to change data type from int to long", "body": "<p>The function printing numbers in Arduino is defined in <strong>/arduino-1.0.5/hardware/arduino/cores/arduino/Print.cpp</strong></p>\n\n<pre><code>size_t Print::printNumber(unsigned long n, uint8_t base) {\n  char buf[8 * sizeof(long) + 1]; // Assumes 8-bit chars plus zero byte.\n  char *str = &amp;buf[sizeof(buf) - 1];\n\n  *str = '\\0';\n\n  // prevent crash if called with base == 1\n  if (base &lt; 2) base = 10;\n\n  do {\n    unsigned long m = n;\n    n /= base;\n    char c = m - base * n;\n    *--str = c &lt; 10 ? c + '0' : c + 'A' - 10;\n  } while(n);\n\n  return write(str);\n}\n</code></pre>\n\n<p>All other functions rely on this one, so yes your <strong>int</strong> gets promoted to an <strong>unsigned long</strong> when you print it, not when you shift it. </p>\n\n<p>However, the library is correct. By shifting left 8 positions, the negative bit in the integer number becomes '1', so when the integer value is promoted to unsigned long the runtime correctly pads it with 16 extra '1's instead of '0's. </p>\n\n<p>If you are using such a value not as a number but to contain some flags, use <strong>unsigned int</strong> instead of <strong>int</strong>.</p>\n\n<hr>\n\n<p>ETA: for completeness, I'll add further explanation for the second shifting operation.</p>\n\n<p>Once you touch the 'negative bit' inside the <strong>int</strong> number, when you shift towards right the runtime pads the number with '1's in order to preserve its negative value. Shifting to the left <strong>k</strong> positions corresponds to dividing the number by <strong>2^k</strong>, and since the number is negative to start with then the result must remain negative.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5718714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/747c099ea2731d366ae46b804a3ff08e?s=128&d=identicon&r=PG&f=1", "display_name": "corroleaus", "link": "https://stackoverflow.com/users/5718714/corroleaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1458157157, "creation_date": 1458157157, "answer_id": 36045434, "question_id": 36044770, "link": "https://stackoverflow.com/questions/36044770/arduino-code-shifting-bits-seems-to-change-data-type-from-int-to-long/36045434#36045434", "title": "Arduino code: shifting bits seems to change data type from int to long", "body": "<p>In addition to other answers,  Integers might be stored in 16 bits or 32 bits depending on what arduino you have.</p>\n"}], "owner": {"reputation": 407, "user_id": 1307231, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/fe087c567bfda4d2f2cf9b42a9e91829?s=128&d=identicon&r=PG", "display_name": "mcenno", "link": "https://stackoverflow.com/users/1307231/mcenno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1458158424, "creation_date": 1458155003, "question_id": 36044770, "link": "https://stackoverflow.com/questions/36044770/arduino-code-shifting-bits-seems-to-change-data-type-from-int-to-long", "title": "Arduino code: shifting bits seems to change data type from int to long", "body": "<p>on my Arduino, the following code produces output I don't understand:</p>\n\n<pre><code>void setup(){\n  Serial.begin(9600);\n  int a = 250;\n\n  Serial.println(a, BIN);\n  a = a &lt;&lt; 8;\n  Serial.println(a, BIN);\n  a = a &gt;&gt; 8;\n  Serial.println(a, BIN);\n\n\n}\n\nvoid loop(){}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>11111010\n11111111111111111111101000000000\n11111111111111111111111111111010\n</code></pre>\n\n<p>I do understand the first line: leading zeros are not printed to the serial terminal. However, after shifting the bits the data type of <code>a</code> seems to have changed from int to long (32 bits are printed). The expected behaviour is that bits are shifted to the left, and that bits which are shifted \"out\" of the 16 bits an int has are simply dropped. Shifting the bits back does not turn the \"32bit\" variable to \"16bit\" again.</p>\n\n<p>Shifting by 7 or less positions does not show this effect.</p>\n\n<p>I probably should say that I am not using the Arduino IDE, but the Makefile from <a href=\"https://github.com/sudar/Arduino-Makefile\" rel=\"nofollow\">https://github.com/sudar/Arduino-Makefile</a>.</p>\n\n<p>What is going on? I almost expect this to be \"normal\", but I don't get it. Or is it something in the printing routine which simply adds 16 \"1\"'s to the output?</p>\n\n<p>Enno</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1458155358, "post_id": 36044743, "comment_id": 59738207, "body": "You should really check for error from <i>all</i> system calls."}, {"owner": {"reputation": 119, "user_id": 3223959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vkUM.jpg?s=128&g=1", "display_name": "Khacho", "link": "https://stackoverflow.com/users/3223959/khacho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1458155381, "post_id": 36044743, "comment_id": 59738219, "body": "Ya sorry, edited. Didn&#39;t effect the output though."}, {"owner": {"reputation": 119, "user_id": 3223959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vkUM.jpg?s=128&g=1", "display_name": "Khacho", "link": "https://stackoverflow.com/users/3223959/khacho"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1458155492, "post_id": 36044743, "comment_id": 59738281, "body": "Let me try. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 3223959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vkUM.jpg?s=128&g=1", "display_name": "Khacho", "link": "https://stackoverflow.com/users/3223959/khacho"}, "edited": false, "score": 0, "creation_date": 1458156125, "post_id": 36044942, "comment_id": 59738664, "body": "How do I make the reader to read the pipe as soon as writer starts writing? thanks for the reply"}, {"owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "reply_to_user": {"reputation": 119, "user_id": 3223959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vkUM.jpg?s=128&g=1", "display_name": "Khacho", "link": "https://stackoverflow.com/users/3223959/khacho"}, "edited": false, "score": 0, "creation_date": 1458156419, "post_id": 36044942, "comment_id": 59738838, "body": "It&#39;s the other way around. The reader needs to be reading before the writer starts writing. The reader will repeatedly get EOF until the writer is attached to the pipe."}], "tags": [], "owner": {"reputation": 33990, "user_id": 14768, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/b6aMa.png?s=128&g=1", "display_name": "Joshua", "link": "https://stackoverflow.com/users/14768/joshua"}, "is_accepted": true, "score": 1, "last_activity_date": 1458155584, "creation_date": 1458155584, "answer_id": 36044942, "question_id": 36044743, "link": "https://stackoverflow.com/questions/36044743/pipe-broken-fifo-file/36044942#36044942", "title": "Pipe Broken, FIFO file", "body": "<p>Your write happens before you start your reader. When you write to a pipe and it has no reader you get SIGPIPE.</p>\n\n<p>In this particular design, you need to <em>handle</em> SIGPIPE with retry logic.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 1, "last_activity_date": 1458155660, "creation_date": 1458155660, "answer_id": 36044969, "question_id": 36044743, "link": "https://stackoverflow.com/questions/36044743/pipe-broken-fifo-file/36044969#36044969", "title": "Pipe Broken, FIFO file", "body": "<p>The error you get is <code>EPIPE</code> and if you read a <a href=\"http://man7.org/linux/man-pages/man2/write.2.html\" rel=\"nofollow\"><code>write</code></a> manual you will see that you get <code>EPIPE</code> when</p>\n\n<blockquote>\n  <p><code>fd</code> is connected to a pipe or socket whose reading end is closed.</p>\n</blockquote>\n\n<p>You get this error because you open the reading end of the pipe in non-blocking mode, which means the <code>read</code> call will not block and wait for data to be received, instead when the <code>read</code> call immediately return you close the pipe and exit the process.</p>\n\n<p>That means when you run the writer there is no one waiting for the data you write and you get the error.</p>\n\n<p>You need to run the read and the writer in opposite order: First the writer so it writes to the pipe, and <em>then</em> the reader to read the data from the pipe.</p>\n"}], "owner": {"reputation": 119, "user_id": 3223959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5vkUM.jpg?s=128&g=1", "display_name": "Khacho", "link": "https://stackoverflow.com/users/3223959/khacho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1200, "favorite_count": 0, "accepted_answer_id": 36044942, "answer_count": 2, "score": 0, "last_activity_date": 1458156294, "creation_date": 1458154928, "last_edit_date": 1458156294, "question_id": 36044743, "link": "https://stackoverflow.com/questions/36044743/pipe-broken-fifo-file", "title": "Pipe Broken, FIFO file", "body": "<p>I'm trying a program to use FIFO file, but I'm getting Broken pipe as output. Here is the code - </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;fcntl.h&gt;\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;\n#include&lt;unistd.h&gt;\n#include&lt;sys/stat.h&gt;\n#include&lt;sys/types.h&gt;\nusing namespace std;\nint main(int argc,char *argv[])\n{\nint fd; //stores file descriptor returnd from open\nchar buf[256];\nif(argc&lt;2||argc&gt;3)\n{\n    cout&lt;&lt;\"Invalid Arguments\";\n    return 1;\n}\n\nmkfifo(argv[1],0777);\nif(argc==3)\n{   \n    cout&lt;&lt;\"Writer\\n\";\n    if((fd=open(argv[1],O_WRONLY))==-1)\n    {\n        perror(\"open\");\n        return 1;\n    }\n    write(fd,argv[2],strlen(argv[2]));\n    sleep(10);\n}\nelse\n{   cout&lt;&lt;\"Reader\\n\";\n    if((fd=open(argv[1],O_RDONLY|O_NONBLOCK))==-1)\n    {       \n        perror(\"open\");\n        return 1;\n    }\n\n    read(fd,&amp;buf,sizeof(buf));\n    cout&lt;&lt;buf;\n\n}\n close(fd);\n return 1;\n }\n</code></pre>\n\n<p>Output: \nBelow Fifo is the name of the file and Hello is the content.</p>\n\n<blockquote>\n<pre><code>./a.out fifo hello &amp;\n\nWriter\n\n./a.out fifo\nReader\n\n[1]+  Broken pipe  \n</code></pre>\n</blockquote>\n\n<p>I should get \"Hello\" as the output. Can anyone help?</p>\n"}, {"tags": ["c++", "distance", "min", "coordinate"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458154805, "post_id": 36044663, "comment_id": 59737874, "body": "What is the error?"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1458154946, "post_id": 36044663, "comment_id": 59737963, "body": "What&#39;s your question?"}, {"owner": {"reputation": 15, "user_id": 5755013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4dd6070e72cfef89dc70cdf207218dc?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprogramm", "link": "https://stackoverflow.com/users/5755013/michaelprogramm"}, "edited": false, "score": 0, "creation_date": 1458156620, "post_id": 36044663, "comment_id": 59738972, "body": "as i said , i need the coordinates related to that min distance . I have 3 distances and 3 coordinates (x,y) . I find the min of them and need to save the coordinates because after i take these coordinates i find another tasks."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458159609, "post_id": 36044663, "comment_id": 59740810, "body": "Don&#39;t use <code>pow</code> for squaring things; multiply them.  The <code>pow</code> function has a lot more execution overhead than a simple multiply."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 5755013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4dd6070e72cfef89dc70cdf207218dc?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprogramm", "link": "https://stackoverflow.com/users/5755013/michaelprogramm"}, "edited": false, "score": 0, "creation_date": 1458164835, "post_id": 36046236, "comment_id": 59743691, "body": "Yes i understand what you mean but my fault that i didn&#39;t add one more thing. For example i find some coordinates associated with min distance. Then my first loop at the beginning i didn&#39;t post it iterates a new person and i need to do the same procedure for that person. Here is the problem , i have already Min value = previous min distance. So if the distance of that second person is larger than mean , he won&#39;t be added at all.. So i need the solution.   I find the coordinates of a station for the first person and then i need to find the new coordinates for the second person if he can reach"}, {"owner": {"reputation": 15, "user_id": 5755013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4dd6070e72cfef89dc70cdf207218dc?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprogramm", "link": "https://stackoverflow.com/users/5755013/michaelprogramm"}, "edited": false, "score": 0, "creation_date": 1458165029, "post_id": 36046236, "comment_id": 59743778, "body": "the station of the first one.Hope it is quite clear what my program should do. I did everything right but the problem is just here. My Min value can become too low and then those people won&#39;t have any station but i need to check all the time , if that person can&#39;t reach the previous one or any , that person should have a new station with new coordinates even if the distance is larger than the Min value after some iterations"}, {"owner": {"reputation": 15, "user_id": 5755013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4dd6070e72cfef89dc70cdf207218dc?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprogramm", "link": "https://stackoverflow.com/users/5755013/michaelprogramm"}, "edited": false, "score": 0, "creation_date": 1458165158, "post_id": 36046236, "comment_id": 59743837, "body": "Because i have  already done as you posted. But by the way thanks for your comment"}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1458159905, "creation_date": 1458159905, "answer_id": 36046236, "question_id": 36044663, "link": "https://stackoverflow.com/questions/36044663/coordinates-min-distance-c/36046236#36046236", "title": "coordinates min distance c++", "body": "<p>I would treat this as finding a minimum value in a <code>std::vector</code>.  </p>\n\n<p>One variable contains the minimum distance; initialized to the largest value.\nTwo <code>Point</code> variables define the straight line associated with the minimum distance.  </p>\n\n<p>Here's an algorithm:</p>\n\n<pre><code>Calculate distance.  \nif distance &lt; minimum distance  \n    set Point1 and Point2 to the ordinates used in the distance calculation.  \n    set minimum distance to the calculated distance.  \n</code></pre>\n\n<p>At the end of the loop, the variables <code>Point1</code> and <code>Point2</code> will be the coordinates associated with the <code>minimum distance</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 5755013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4dd6070e72cfef89dc70cdf207218dc?s=128&d=identicon&r=PG&f=1", "display_name": "michaelprogramm", "link": "https://stackoverflow.com/users/5755013/michaelprogramm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 737, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1458159905, "creation_date": 1458154694, "last_edit_date": 1458154738, "question_id": 36044663, "link": "https://stackoverflow.com/questions/36044663/coordinates-min-distance-c", "title": "coordinates min distance c++", "body": "<p>Im currently having a small problems , because i need to find the coordinates corresponded to my min distance. \nFor example i have a person and three potential stations. I need to find the distance between them and then take the min distance and in the next i have to take the coordinates related to that min distance.\nIm sending you my loop just for that part of my program.</p>\n\n<pre><code>for (newCoordinate = newPoints.begin(); newCoordinate != newPoints.end(); newCoordinate++)// here are my three potential stations\n{\n    distanceBetweenBusCoordinateAndNewPoint = sqrt(pow((busRequest-&gt;x - newCoordinate-&gt;x), 2) + (pow((busRequest-&gt;y - newCoordinate-&gt;y), 2)));// find min\n    distances.push_back(distanceBetweenBusCoordinateAndNewPoint);//add to the vector\n}\nnewdis = min_element(distances.begin(), distances.end());// find the min of min\n</code></pre>\n\n<p>Thank you for you help!</p>\n"}, {"tags": ["c++", "pseudocode"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458160090, "post_id": 36044659, "comment_id": 59741089, "body": "If I was clever, I would search the internet for &quot;c++ reverse linked list example&quot;.  But, I guess today is not a day to be clever."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 6004160, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9RX3S.png?s=128&g=1", "display_name": "Chip Grandits", "link": "https://stackoverflow.com/users/6004160/chip-grandits"}, "edited": false, "score": 0, "creation_date": 1458160884, "post_id": 36046145, "comment_id": 59741543, "body": "Well explained @BitTickler ! I upvoted this obvious propaganda for functional languages"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 155, "user_id": 6004160, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/9RX3S.png?s=128&g=1", "display_name": "Chip Grandits", "link": "https://stackoverflow.com/users/6004160/chip-grandits"}, "edited": false, "score": 0, "creation_date": 1458168199, "post_id": 36046145, "comment_id": 59745163, "body": "Not sure how long those links last but.... <a href=\"https://ideone.com/d6VZYQ\" rel=\"nofollow noreferrer\">ideone.com/d6VZYQ</a> shows the alternate solution in action."}], "tags": [], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 1, "last_activity_date": 1458167969, "last_edit_date": 1458167969, "creation_date": 1458159576, "answer_id": 36046145, "question_id": 36044659, "link": "https://stackoverflow.com/questions/36044659/recursive-reverse-list/36046145#36046145", "title": "Recursive Reverse List", "body": "<p>Sometimes it is easier to create some un-formal algorithm gibberish, if you start\nwith the idea expressed clearly. Then, obfuscate and verbalize until you have something, your professor will happily accept.</p>\n\n<p>So, lets start with our general idea of the algorithm:</p>\n\n<pre><code>let rec fold folder acc l = \n    match l with\n    | [] -&gt; acc\n    | x::xs -&gt; fold folder (folder acc x) xs\n\nlet prepend l e = e :: l\n\nlet revlist l = fold prepend [] l\n</code></pre>\n\n<p>...and start to verbalize:</p>\n\n<ol>\n<li>let result = empty list</li>\n<li>let l = the list we want to reverse</li>\n<li>if l is the empty list, goto 7</li>\n<li>let head = l.front, l = l.pop_front()</li>\n<li>result.push_front head</li>\n<li>goto 3</li>\n<li>l = result</li>\n</ol>\n\n<p>The steps 3..6 can be easily expressed as a recursive function:</p>\n\n<pre><code>void loop(list&amp; l, list&amp; result)\n{\n    if( l.is_empty()) return;\n    auto head = l.front();\n    l.pop_front();\n    result.push_front(head);\n    loop(l,result);\n}\n</code></pre>\n\n<p>As we want to create the illusion of in-place.reversal, our reverse_list function is</p>\n\n<pre><code>void reverse_list( list&amp; l )\n{\n    list result;\n    loop( l, result);\n    l = result;\n}\n</code></pre>\n\n<p><strong>Alternate solution</strong></p>\n\n<p>We can also do it in another way:</p>\n\n<pre><code>let rec revlist1 l =\n    match l with\n    | [] -&gt; l\n    | x::xs -&gt; (revlist1 xs) @ [x]\n</code></pre>\n\n<p>This basically states, that the reversed list is the front element of the original list appended to the reverse of the rest.</p>\n\n<p>Translating the algorithm to gibberish form yields:</p>\n\n<pre><code>Node* reverse_list1( Node* list )\n{\n    if( list == NULL) return NULL; // reverse of empty list is empty list.\n    if( list-&gt;next == NULL ) // last element in list?\n        return list; // the reverse of a list with 1 element is the same.\n    else\n    {\n        Node* head = list;\n        Node* tail = list-&gt;next;\n        head-&gt;next = NULL;\n        Node* end_of_reverse_tail = tail; // the first will be the last...\n        Node * result = reverse_list1(tail);\n        end_of_reverse_tail-&gt;next = head;\n        return result;\n    }\n}\n</code></pre>\n\n<p>Note, that this is not a tail recursive solution. </p>\n"}], "owner": {"reputation": 167, "user_id": 6005434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4702d50ebda1f0d92cee6a13eac5a97f?s=128&d=identicon&r=PG&f=1", "display_name": "Moose Hamid", "link": "https://stackoverflow.com/users/6005434/moose-hamid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458167969, "creation_date": 1458154690, "question_id": 36044659, "link": "https://stackoverflow.com/questions/36044659/recursive-reverse-list", "title": "Recursive Reverse List", "body": "<p>I need to write an algorithm called reverseNodes that takes a RefToNode as a parameter and recuriveley reverses the list the header i came up with was</p>\n\n<p>Algorithm reverse (rList)</p>\n\n<p>reverves elementsin a list</p>\n\n<p>Pre: rList :: a referance to a list to be reversed</p>\n\n<p>Post: elements in rList are reversed</p>\n\n<p>if ( rList !=NULL)\nreverseNodes (rList -> head)\nreturn</p>\n\n<p>I need to find a way to write this is psuedocode and find the time complexity</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 1847, "user_id": 2611078, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a4d6410b45d0deeeee4a144e75067afc?s=128&d=identicon&r=PG", "display_name": "Julie", "link": "https://stackoverflow.com/users/2611078/julie"}, "edited": false, "score": 1, "creation_date": 1458155107, "post_id": 36044644, "comment_id": 59738062, "body": "do you mean that you want the length of the linked list minus 1?  If not, could you show what your linked list looks like?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1458155116, "post_id": 36044644, "comment_id": 59738067, "body": "I don&#39;t think we can help without knowing how your polynomial is represented as a list."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458155123, "post_id": 36044644, "comment_id": 59738074, "body": "you need to find the max pow using the linked list? or just use the linked list for general structure of your data"}, {"owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "edited": false, "score": 0, "creation_date": 1458160016, "post_id": 36044644, "comment_id": 59741039, "body": "how are you reading/inputing the polynomial as a string or something else?"}, {"owner": {"reputation": 11, "user_id": 6073388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/960c1ac2b23a6fde04118c4b91a744ee?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Ross", "link": "https://stackoverflow.com/users/6073388/jonathan-ross"}, "edited": false, "score": 0, "creation_date": 1458169817, "post_id": 36044644, "comment_id": 59745798, "body": "I am inputting them as integers."}], "answers": [{"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 0, "last_activity_date": 1458161489, "creation_date": 1458161489, "answer_id": 36046687, "question_id": 36044644, "link": "https://stackoverflow.com/questions/36044644/how-to-return-a-degree-in-polynomial-function/36046687#36046687", "title": "How to return a degree in polynomial function?", "body": "<p>A <em>polynomial</em> is made up of one or more <em>terms</em>.<br>\nA <em>term</em> has a base variable, an <em>exponent</em> and a <em>coefficient</em>.</p>\n\n<pre><code>3 x ^2  \n| | |  \n| | +-- Exponent  \n| |  \n| +---- base  \n|    \n+------ Coefficient  \n</code></pre>\n\n<p>In representing a <em>term</em>, the base is not necessary; so only the pairs <em>coefficient</em> and <em>exponent</em> are required.  </p>\n\n<p>Let us implement a term as a class:  </p>\n\n<pre><code>class Term\n{\n  public:\n    signed int coefficient;\n    signed int exponent;\n};\n</code></pre>\n\n<p>Let the <em>sign</em> of the term be represented in the sign of the <em>coefficient</em> field.</p>\n\n<p>A polynomial now becomes a container of <code>Term</code>:  </p>\n\n<pre><code>typedef std::vector&lt;Term&gt; Polynomial;  \n</code></pre>\n\n<p>Finding the term with the largest exponent now involves iterating through the container, looking at the <code>exponent</code> fields.  </p>\n\n<p>Inputting a polynomial is left as an exercise for the OP.<br>\n<em>Hint:  search the internet for \"c++ polynomial\" for examples.</em>  </p>\n"}], "owner": {"reputation": 11, "user_id": 6073388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/960c1ac2b23a6fde04118c4b91a744ee?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Ross", "link": "https://stackoverflow.com/users/6073388/jonathan-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 526, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458161489, "creation_date": 1458154636, "question_id": 36044644, "link": "https://stackoverflow.com/questions/36044644/how-to-return-a-degree-in-polynomial-function", "title": "How to return a degree in polynomial function?", "body": "<p>I am writing a program that deals with representing a polynomial as a linked list. I understand majority of how to write the code as far as the polynomial, however, I am having trouble understanding how to implement the function 'degree()' to return the highest power in a function. </p>\n\n<p>For example, \n3x^2+4x+5</p>\n\n<p>The function should return '2'. </p>\n\n<p>Thank you! </p>\n"}, {"tags": ["c++", "class", "rows", "member-functions"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458154355, "post_id": 36044364, "comment_id": 59737629, "body": "What do you expect out of <code>hex &lt;&lt; static_cast&lt;int&gt;(AccA)</code>?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458154490, "post_id": 36044364, "comment_id": 59737709, "body": "Memory is where your data supposed to be stored? If yes, Did you intend to make it one dimension as array of chars and not two dimension as array of arrays of chars?"}, {"owner": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "edited": false, "score": 0, "creation_date": 1458154525, "post_id": 36044364, "comment_id": 59737735, "body": "The value that is in AccA. I was having issues with loading a hex value into the program counter (PC) and it would output as a symbol - setting it as a static_cast&lt;int&gt; output it as hex."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458154780, "post_id": 36044364, "comment_id": 59737863, "body": "@Sanaa Are you actually asking about how to format the <code>Memory</code> output that rows &amp; columns way correctly?"}, {"owner": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458155106, "post_id": 36044364, "comment_id": 59738060, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Yeah, how to display the Memory in rows and columns"}], "answers": [{"tags": [], "owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1458155484, "creation_date": 1458155484, "answer_id": 36044913, "question_id": 36044364, "link": "https://stackoverflow.com/questions/36044364/displaying-memory-in-rows-and-columns-with-starting-address-of-each-row-display/36044913#36044913", "title": "Displaying memory in rows and columns, with starting address of each row displayed at the beginning of each line", "body": "<p>Here is a very good <a href=\"http://www.tutorialspoint.com/cplusplus/cpp_multi_dimensional_arrays.htm\" rel=\"nofollow noreferrer\"><strong>tutorial</strong></a> </p>\n\n<p>One of the basic two dimensional data structures is an array of arrays. This is how you <em>declare</em> a multidimensional array:</p>\n\n<pre><code>type arrayName [ x ][ y ];\n</code></pre>\n\n<p>Tnd this is how you <em>initially populate it</em> with data:</p>\n\n<pre><code>   int a[3][4] = {  \n {0, 1, 2, 3} ,   /*  initializers for row indexed by 0 */\n {4, 5, 6, 7} ,   /*  initializers for row indexed by 1 */\n {8, 9, 10, 11}   /*  initializers for row indexed by 2 */\n};\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/w5KxL.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w5KxL.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And this is how you <em>access</em> its data:</p>\n\n<pre><code>    #include &lt;iostream&gt;\nusing namespace std;\n\nint main ()\n{\n   // an array with 5 rows and 2 columns.\n   int a[5][2] = { {0,0}, {1,2}, {2,4}, {3,6},{4,8}};\n\n   // output each array element's value                      \n   for ( int i = 0; i &lt; 5; i++ )\n      for ( int j = 0; j &lt; 2; j++ )\n      {\n         cout &lt;&lt; \"a[\" &lt;&lt; i &lt;&lt; \"][\" &lt;&lt; j &lt;&lt; \"]: \";\n         cout &lt;&lt; a[i][j]&lt;&lt; endl;\n      }\n\n   return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "edited": false, "score": 0, "creation_date": 1458157235, "post_id": 36044926, "comment_id": 59739371, "body": "I tried this, but the output wasn&#39;t the same. Some lines were longer than others and there were a few random symbols amongst the numbers"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "edited": false, "score": 0, "creation_date": 1458158230, "post_id": 36044926, "comment_id": 59739994, "body": "@Sanaa Well, I can&#39;t tell what&#39;s wrong with your actual code without seeing it (that might be worth another question asking for what you actually have now). The live demo link proves that this works under <i>normal circumstances</i> and within the constraints you were giving for the output format."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "edited": false, "score": 0, "creation_date": 1458159496, "post_id": 36044926, "comment_id": 59740730, "body": "@Sanaa As mentioned, it might be better <b>to ask another question</b> for what you have now, instead of creating a moving target, possibly invalidating the existing answers."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "edited": false, "score": 0, "creation_date": 1458163302, "post_id": 36044926, "comment_id": 59742928, "body": "@Sanaa Apparently you missed my recent corrections for the code sample given in my answer. Check what&#39;s different from your attempt now."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 0, "last_activity_date": 1458156190, "last_edit_date": 1458156190, "creation_date": 1458155535, "answer_id": 36044926, "question_id": 36044364, "link": "https://stackoverflow.com/questions/36044364/displaying-memory-in-rows-and-columns-with-starting-address-of-each-row-display/36044926#36044926", "title": "Displaying memory in rows and columns, with starting address of each row displayed at the beginning of each line", "body": "<blockquote>\n  <p>I'm unsure of how to display the contents of memory in rows and columns.</p>\n</blockquote>\n\n<p>Supposed you meant how to output the section for the <code>Memory</code> array, you should use a loop like this:</p>\n\n<pre><code> bool print_address = true;\n std::cout &lt;&lt; std::hex &lt;&lt; std::setfill('0');\n for(size_t i = 0; i &lt; MEMSIZE; ++i) {\n     if(print_address) {\n          std::cout &lt;&lt; (void*)&amp;Memory[i] &lt;&lt; ' ';\n          print_address = false;         \n     }\n     std::cout &lt;&lt; std::setw(2) &lt;&lt; static_cast&lt;unsigned int&gt;(Memory[i]) &lt;&lt; ' ';         \n     if(((i + 1) % 16) == 0) {\n         print_address = true;\n         std::cout &lt;&lt; std::endl;\n     }\n }\n</code></pre>\n\n<p>prints a pattern like</p>\n\n<pre><code>0x7fff95c1a410 06 00 00 00 10 00 00 00 01 00 00 00 00 00 00 00 \n0x7fff95c1a420 78 12 60 00 00 00 00 00 00 00 00 00 00 00 00 00 \n0x7fff95c1a430 08 a6 c1 95 ff 7f 00 00 18 a6 c1 95 ff 7f 00 00 \n0x7fff95c1a440 00 00 00 00 00 00 00 00 74 e7 08 af 46 7f 00 00 \n0x7fff95c1a450 01 00 00 00 46 7f 00 00 00 00 00 00 00 00 00 00 \n0x7fff95c1a460 48 07 21 ae 46 7f 00 00 28 79 07 af 46 7f 00 00 \n0x7fff95c1a470 e0 73 07 af 46 7f 00 00 01 00 00 00 00 00 00 00 \n0x7fff95c1a480 02 00 00 00 00 00 00 00 00 10 60 00 00 00 00 00 \n0x7fff95c1a490 01 00 00 00 00 00 00 00 35 52 09 af 46 7f 00 00 \n0x7fff95c1a4a0 00 00 00 00 00 00 00 00 00 a4 c1 95 ff 7f 00 00 \n0x7fff95c1a4b0 b8 12 60 00 00 00 00 00 60 09 40 00 00 00 00 00 \n0x7fff95c1a4c0 d4 13 60 00 00 00 00 00 a8 38 24 ae 46 7f 00 00 \n0x7fff95c1a4d0 01 00 00 00 00 00 00 00 02 00 00 00 00 00 00 00 \n0x7fff95c1a4e0 00 10 60 00 00 00 00 00 bd 0c 40 00 00 00 00 00 \n0x7fff95c1a4f0 00 00 00 00 00 00 00 00 60 0c 40 00 00 00 00 00 \n0x7fff95c1a500 00 00 00 00 00 00 00 00 38 0b 40 00 00 00 00 00 \n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/628312107bed77c6\" rel=\"nofollow\"><kbd>Live Demo</kbd></a></p>\n"}], "owner": {"reputation": 3, "user_id": 6073180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22646cb7a5518d74e48fed3c2b983c21?s=128&d=identicon&r=PG&f=1", "display_name": "Sanaa", "link": "https://stackoverflow.com/users/6073180/sanaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 36044926, "answer_count": 2, "score": 0, "last_activity_date": 1458156190, "creation_date": 1458153799, "last_edit_date": 1458155071, "question_id": 36044364, "link": "https://stackoverflow.com/questions/36044364/displaying-memory-in-rows-and-columns-with-starting-address-of-each-row-display", "title": "Displaying memory in rows and columns, with starting address of each row displayed at the beginning of each line", "body": "<p>I'm currently writing a program which uses a class to simulate the operation of an 8-bit microcontroller. I had to create 5 member functions - setPC, show, loadFile, step and constructor. I'm having difficulty with a few aspects of the program but at the minute, specifically the show member function. This is what I have so far:  </p>\n\n<pre><code>void cpu::show(void)\n</code></pre>\n\n<p>{</p>\n\n<pre><code>cout &lt;&lt; \"AccA = \" &lt;&lt; hex &lt;&lt; static_cast&lt;int&gt;(AccA) &lt;&lt; endl;\n\ncout &lt;&lt; \"AccB = \" &lt;&lt; hex &lt;&lt; static_cast&lt;int&gt;(AccB) &lt;&lt; endl;\n\ncout &lt;&lt; \"PC = \" &lt;&lt; hex &lt;&lt; static_cast&lt;int&gt;(PC) &lt;&lt; endl;\n\ncout &lt;&lt; \"SP = \" &lt;&lt; hex &lt;&lt; static_cast&lt;int&gt; (SP) &lt;&lt; endl;\n\ncout &lt;&lt; \"X = \" &lt;&lt; static_cast&lt;int&gt; (X) &lt;&lt; endl;\n\ncout &lt;&lt; \"Memory = \" &lt;&lt; hex &lt;&lt; Memory &lt;&lt; endl;\n</code></pre>\n\n<p>}</p>\n\n<p>This member function is supposed to display the contents of the registers and memory in 2-digit hexadecimal format. It is supposed to display the memory in 16 rows and columns, with the starting address of each row displayed at the beginning of each line (the rest of the line can then be blank). I'm unsure of how to display the contents of memory in rows and columns. I'd appreciate any pointers in how to do this.  </p>\n\n<p>Here is the header file for the program: </p>\n\n<pre><code>#ifndef CPU_H\n#define CPU_H\n\n#define MEMSIZE 256\n\nclass cpu\n{\nprivate:\n  unsigned char AccA;\n  unsigned char AccB;\n  unsigned char PC;\n  unsigned char SP;\n  unsigned char X;\n  bool Z;\n  unsigned char Memory[MEMSIZE];\npublic:\n  cpu();\n  void loadFile(const char *fileName);\n  void setPC(unsigned char aAddress);\n  bool step(void);\n  void show(void);\n};\n\n#endif // CPU_H\n</code></pre>\n"}, {"tags": ["c++", "random", "operators", "eigen", "functor"], "answers": [{"comments": [{"owner": {"reputation": 6853, "user_id": 538272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/167cac00c75fffceef90095f2496bf4d?s=128&d=identicon&r=PG", "display_name": "Brandon Moretz", "link": "https://stackoverflow.com/users/538272/brandon-moretz"}, "edited": false, "score": 0, "creation_date": 1590170093, "post_id": 36053378, "comment_id": 109589299, "body": "I just spent 2 hours trying to figure out this insanity. thank you"}], "tags": [], "owner": {"reputation": 25314, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": false, "score": 1, "last_activity_date": 1458197195, "creation_date": 1458197195, "answer_id": 36053378, "question_id": 36044295, "link": "https://stackoverflow.com/questions/36044295/eigenunaryexpr-and-const-for-random-number-engine/36053378#36053378", "title": "Eigen::unaryExpr and const for random number engine", "body": "<p>The <code>rng</code> attribut should be declared <code>mutable</code>, e.g.:</p>\n\n<pre><code>mutable std::mt19937 rng;\n</code></pre>\n"}], "owner": {"reputation": 1291, "user_id": 1612986, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/a7d5ead19e763bd039bd868f8f36a64b?s=128&d=identicon&r=PG", "display_name": "user1612986", "link": "https://stackoverflow.com/users/1612986/user1612986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458197195, "creation_date": 1458153578, "question_id": 36044295, "link": "https://stackoverflow.com/questions/36044295/eigenunaryexpr-and-const-for-random-number-engine", "title": "Eigen::unaryExpr and const for random number engine", "body": "<p>I have the following class:</p>\n\n<pre><code>class TestRandom\n{\n\n    public:\n        struct scalar_op\n          {\n            std::mt19937 rng;                  \n            std::normal_distribution&lt;double&gt; norm;  \n            scalar_op(){}\n            scalar_op(unsigned long seed){rng = std::mt19937(seed);}\n            void reset(unsigned long seed=std::mt19937::default_seed){ rng142.seed(seed);norm.reset(); }\n            double operator()(void) const\n            { \n                    double n_noise =norm(rng);\n                    return n_noise;\n            }\n          };\n\n        TestRandom(){}\n        void reset(unsigned long seed=std::mt19937::default_seed){rand.reset(seed);}\n\n        /// Draw nn samples from the gaussian and return them\n        Eigen::MatrixXd samples(int n)\n        {    \n             Eigen::MatrixXd noise(3,n);\n             noise.unaryExpr(rand);\n             return corr_noise;\n        }\n    private:\n        scalar_op rand; \n}; //TestRandom  \n</code></pre>\n\n<p>What i am trying to achieve is first reset the random number generator as</p>\n\n<pre><code>TestRandom r1;\n r1.reset(1)\n</code></pre>\n\n<p>Then fill up a matrix with random samples as</p>\n\n<pre><code>  Eigen::MatrixXd normal_random = r1.samples(1); // just a sample of random numbers\n</code></pre>\n\n<p>But I get a compilation error of </p>\n\n<pre><code> error C3848: expression having type 'const std::mt19937' would lose some const-volatile qualifiers in order to call 'unsigned int std::mersenne_twister&lt;_Ty,_Wx,_Nx,_Mx,_Rx,_Px,_Ux,_Sx,_Bx,_Tx,_Cx,_Lx&gt;::operator ()(void)\n</code></pre>\n\n<p>If I remove the const of the () operator, code compiles but the computation inside operator() is not executed (I can see this in the debugger).</p>\n\n<p>It would be very kind of someone to point out my mistake and possibly provide way to resolve this. Thanks in advance </p>\n"}, {"tags": ["c++", "c", "sockets", "http", "pointers"], "comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1458153852, "post_id": 36044266, "comment_id": 59737356, "body": "&quot;are we sure that the size of the request will not exceeds 1024?&quot; No. If I recall correctly the standard says nothing about size. The browsers has limits between 4 and 11 kBs."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1458155613, "post_id": 36044266, "comment_id": 59738359, "body": "The buffer should just be for efficiency of reading. You should keep filling the buffer in a loop until the whole request has been received (or timeout/error etc)."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 2063020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78dff2c5da3daf7517011cfd6f6beaa0?s=128&d=identicon&r=PG", "display_name": "jean jack", "link": "https://stackoverflow.com/users/2063020/jean-jack"}, "edited": false, "score": 0, "creation_date": 1458161130, "post_id": 36044371, "comment_id": 59741678, "body": "thanks , how can i append the new incoming data in C ? i think if i loop and read to the buffer i will overwrite the preceding data."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 33, "user_id": 2063020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78dff2c5da3daf7517011cfd6f6beaa0?s=128&d=identicon&r=PG", "display_name": "jean jack", "link": "https://stackoverflow.com/users/2063020/jean-jack"}, "edited": false, "score": 0, "creation_date": 1458161191, "post_id": 36044371, "comment_id": 59741710, "body": "@jeanjack, in C you would have to use something like <code>realloc</code> to keep increasing your buffer size."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1458160399, "last_edit_date": 1458160399, "creation_date": 1458153844, "answer_id": 36044371, "question_id": 36044266, "link": "https://stackoverflow.com/questions/36044266/how-to-read-an-http-requestan-http-proxy-server/36044371#36044371", "title": "how to read an http request(an http proxy server)", "body": "<p>Reading by a single character is terribly inefficient and slows you down tremendously. Instead, you should be reading by chunks of approriate size (1024 seems as good initial guess as any) in the loop and append read buffer to the total data read so far. It is extremely easy to do with C++ <code>std::vector</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 230, "user_id": 3430265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a705ca50c907800e3fbe71e6ad8f556?s=128&d=identicon&r=PG&f=1", "display_name": "adam", "link": "https://stackoverflow.com/users/3430265/adam"}, "is_accepted": false, "score": 0, "last_activity_date": 1458186646, "creation_date": 1458186646, "answer_id": 36051348, "question_id": 36044266, "link": "https://stackoverflow.com/questions/36044266/how-to-read-an-http-requestan-http-proxy-server/36051348#36051348", "title": "how to read an http request(an http proxy server)", "body": "<p>Parsing an HTTP request is a quite complicated task, I think it could be easier to use a library like <a href=\"https://github.com/nodejs/http-parser\" rel=\"nofollow\">http-parser</a>, which does the parsing for you in a very efficient way.</p>\n"}], "owner": {"reputation": 33, "user_id": 2063020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78dff2c5da3daf7517011cfd6f6beaa0?s=128&d=identicon&r=PG", "display_name": "jean jack", "link": "https://stackoverflow.com/users/2063020/jean-jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 36044371, "answer_count": 2, "score": 1, "last_activity_date": 1464865073, "creation_date": 1458153500, "last_edit_date": 1464865073, "question_id": 36044266, "link": "https://stackoverflow.com/questions/36044266/how-to-read-an-http-requestan-http-proxy-server", "title": "how to read an http request(an http proxy server)", "body": "<p>I have to make an http proxy. In the proxy side I have to parse the http request sent by the user.</p>\n\n<p>The question is: How to read binary data from the client such at the final I will  get an array of char that contains the full request .</p>\n\n<p>What I did is: Read 1 Byte each time.</p>\n\n<pre><code>    char c;\n    int  n = read(con,&amp;c,1);\n</code></pre>\n\n<p>I saw many implementation where we use 1024 bytes as the size of the buffer , but are we sure that the size of the request will not exceeds  1024?</p>\n\n<p>Normally in first place I have to allocate the memory for the buffer array , so how can i know the size of the request to allocate the same size of memory?</p>\n\n<p>My full methods:</p>\n\n<pre><code>void readToken(int con,char *token){\nchar c;\nint i=0;\ndo{\n    int  n = read(con,&amp;c,1);\n    *token++ = c;\n    }while(c!=' ' &amp;&amp; c!='\\n');      \n}\n\nvoid readLine(int con,char *line){\n    char c;int i=0;\n    do{\n        int  n = read(con,&amp;c,1);\n        *line++ = c;\n        }while(c!='\\n');\n\n}\nchar * handleRequest(int con){\n    char resource[30];\n    char version[5];\n    char  method[4] ;\n    //i read 4 byte to get the method tyepe \n    int n = read(con,&amp;method,4);\n    //here i read until i get a blank space\n    readToken(con,resource);\n    //readToken(con,version);\n    printf(\"the method is%s\\n\",method);\n    printf(\"the resource asked is%s\\n\",resource);\n    //printf(\"the resource asked is%s\\n\",version);\n    printf(\"the method read is %s\",firstLine);\n    readLine(con,hostLine);\n    printf(\"the method read is %s\",hostLine);       \n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 2107, "user_id": 1420429, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/654a205004c867c4d53cd7a9f2520800?s=128&d=identicon&r=PG", "display_name": "harsh", "link": "https://stackoverflow.com/users/1420429/harsh"}, "edited": false, "score": 0, "creation_date": 1523384164, "post_id": 36093347, "comment_id": 86535958, "body": "what is the number of depth in tensorflow::TensorShape for a greyscale image?"}], "tags": [], "owner": {"reputation": 2808, "user_id": 5708323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iN_dtRnmo9Y/AAAAAAAAAAI/AAAAAAAAABE/VlOtp_yX8RI/photo.jpg?sz=128", "display_name": "Pete Warden", "link": "https://stackoverflow.com/users/5708323/pete-warden"}, "is_accepted": true, "score": 24, "last_activity_date": 1508772165, "last_edit_date": 1508772165, "creation_date": 1458331675, "answer_id": 36093347, "question_id": 36044197, "link": "https://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph/36093347#36093347", "title": "How do I pass an OpenCV Mat into a C++ Tensorflow graph?", "body": "<p>It's not directly from a CvMat, but you can see an example of how to initialize a Tensor from an in-memory array in the TensorFlow Android example:\n<a href=\"https://github.com/tensorflow/tensorflow/blob/0.6.0/tensorflow/examples/android/jni/tensorflow_jni.cc#L173\" rel=\"noreferrer\">https://github.com/tensorflow/tensorflow/blob/0.6.0/tensorflow/examples/android/jni/tensorflow_jni.cc#L173</a></p>\n\n<p>You would start off by creating a new tensorflow::Tensor object, with something like this (all code untested):</p>\n\n<p><code>tensorflow::Tensor input_tensor(tensorflow::DT_FLOAT,\n      tensorflow::TensorShape({1, height, width, depth}));\n</code></p>\n\n<p>This creates a Tensor object with float values, with a batch size of 1, and a size of <code>width</code>x<code>height</code>, and with <code>depth</code> channels. For example a 128 wide by 64 high image with 3 channels would pass in a shape of <code>{1, 64, 128, 3}</code>. The batch size is just used when you need to pass in multiple images in a single call, and for simple uses you can leave it as 1.</p>\n\n<p>Then you would get the underlying array behind the tensor using a line like this:</p>\n\n<p><code>auto input_tensor_mapped = input_tensor.tensor&lt;float, 4&gt;();</code></p>\n\n<p>The <code>input_tensor_mapped</code> object is an interface to the data in your newly-created tensor, and you can then copy your own data into it. Here I'm assuming you've set <code>source_data</code> as a pointer to your source data, for example:</p>\n\n<p><code>const float* source_data = some_structure.imageData;</code></p>\n\n<p>You can then loop through your data and copy it over:</p>\n\n<pre><code>for (int y = 0; y &lt; height; ++y) {\n    const float* source_row = source_data + (y * width * depth);\n    for (int x = 0; x &lt; width; ++x) {\n        const float* source_pixel = source_row + (x * depth);\n        for (int c = 0; c &lt; depth; ++c) {\n           const float* source_value = source_pixel + c;\n           input_tensor_mapped(0, y, x, c) = *source_value;\n        }\n    }\n}\n</code></pre>\n\n<p>There are obvious opportunities to optimize this naive approach, and I don't have sample code on hand to show how to deal with the OpenCV side of getting the source data, but hopefully this is helpful to get you started.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4985869, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/207c5de721871ec17e885579343514d3?s=128&d=identicon&r=PG&f=1", "display_name": "kumar shubham", "link": "https://stackoverflow.com/users/4985869/kumar-shubham"}, "is_accepted": false, "score": 1, "last_activity_date": 1461069584, "creation_date": 1461069584, "answer_id": 36718671, "question_id": 36044197, "link": "https://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph/36718671#36718671", "title": "How do I pass an OpenCV Mat into a C++ Tensorflow graph?", "body": "<p>I had tried to run inception model on the opencv <code>Mat</code> file and following code worked for me <a href=\"https://gist.github.com/kyrs/9adf86366e9e4f04addb\" rel=\"nofollow\">https://gist.github.com/kyrs/9adf86366e9e4f04addb</a>. Although there are some issue with integration of opencv and  tensorflow. Code worked without any issue for <code>.png</code> files but failed to load  <code>.jpg</code> and <code>.jpeg</code>. You can follow this for more info <a href=\"https://github.com/tensorflow/tensorflow/issues/1924\" rel=\"nofollow\">https://github.com/tensorflow/tensorflow/issues/1924</a> </p>\n"}, {"tags": [], "owner": {"reputation": 4491, "user_id": 2953509, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/rUiC5.jpg?s=128&g=1", "display_name": "Ivan Talalaev", "link": "https://stackoverflow.com/users/2953509/ivan-talalaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1539783230, "creation_date": 1539783230, "answer_id": 52856207, "question_id": 36044197, "link": "https://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph/52856207#52856207", "title": "How do I pass an OpenCV Mat into a C++ Tensorflow graph?", "body": "<p>Here is complete example to read and feed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Mat image;\nimage = imread(\"flowers.jpg\", CV_LOAD_IMAGE_COLOR);\ncv::resize(image, image, cv::Size(input_height, input_width), 0, 0, CV_INTER_CUBIC);\n\nint depth = 3;\ntensorflow::Tensor input_tensor(tensorflow::DT_FLOAT,\n                                tensorflow::TensorShape({1, image.rows, image.cols, depth}));\n\nfor (int y = 0; y &lt; image.rows; y++) {\n    for (int x = 0; x &lt; image.cols; x++) {\n        Vec3b pixel = image.at&lt;Vec3b&gt;(y, x);\n\n        input_tensor_mapped(0, y, x, 0) = pixel.val[2]; //R\n        input_tensor_mapped(0, y, x, 1) = pixel.val[1]; //G\n        input_tensor_mapped(0, y, x, 2) = pixel.val[0]; //B\n    }\n}\n\nauto result = Sub(root.WithOpName(\"subtract_mean\"), input_tensor, {input_mean});\nClientSession session(root);\nTF_CHECK_OK(session.Run({result}, out_tensors));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1117, "user_id": 470835, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/FDagI.jpg?s=128&g=1", "display_name": "Saurabh Saxena", "link": "https://stackoverflow.com/users/470835/saurabh-saxena"}, "is_accepted": false, "score": 0, "last_activity_date": 1574644441, "creation_date": 1574644441, "answer_id": 59024051, "question_id": 36044197, "link": "https://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph/59024051#59024051", "title": "How do I pass an OpenCV Mat into a C++ Tensorflow graph?", "body": "<pre><code>Tensor convertMatToTensor(Mat &amp;input)\n{\n    int height = input.rows;\n    int width = input.cols;\n    int depth = input.channels();\n\n    Tensor imgTensor(tensorflow::DT_FLOAT, tensorflow::TensorShape({height, width, depth}));\n\n    float* p = imgTensor.flat&lt;float&gt;().data();\n    Mat outputImg(height, width, CV_32FC3, p);\n    input.convertTo(outputImg, CV_32FC3);\n\n    return imgTensor;\n}\n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 6073278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/895468b9ea94b5c2779d5ff58bd21d3a?s=128&d=identicon&r=PG&f=1", "display_name": "lefty", "link": "https://stackoverflow.com/users/6073278/lefty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14894, "favorite_count": 7, "accepted_answer_id": 36093347, "answer_count": 4, "score": 17, "last_activity_date": 1574644441, "creation_date": 1458153278, "last_edit_date": 1464815570, "question_id": 36044197, "link": "https://stackoverflow.com/questions/36044197/how-do-i-pass-an-opencv-mat-into-a-c-tensorflow-graph", "title": "How do I pass an OpenCV Mat into a C++ Tensorflow graph?", "body": "<p>In Tensorflow C++ I can load an image file into the graph using</p>\n\n<pre><code>tensorflow::Node* file_reader =  tensorflow::ops::ReadFile(tensorflow::ops::Const(IMAGE_FILE_NAME, b.opts()),b.opts().WithName(input_name));\ntensorflow::Node* image_reader = tensorflow::ops::DecodePng(file_reader, b.opts().WithAttr(\"channels\", 3).WithName(\"png_reader\"));\ntensorflow::Node* float_caster = tensorflow::ops::Cast(image_reader, tensorflow::DT_FLOAT, b.opts().WithName(\"float_caster\"));\ntensorflow::Node* dims_expander = tensorflow::ops::ExpandDims(float_caster, tensorflow::ops::Const(0, b.opts()), b.opts());\ntensorflow::Node* resized = tensorflow::ops::ResizeBilinear(dims_expander, tensorflow::ops::Const({input_height, input_width},b.opts().WithName(\"size\")),b.opts());\n</code></pre>\n\n<p>For an embedded application I would like to instead pass an OpenCV Mat into this graph.  </p>\n\n<p>How would I convert the Mat to a tensor that could be used as input to tensorflow::ops::Cast or tensorflow::ops::ExpandDims?</p>\n"}, {"tags": ["c++", "c", "linux", "build", "cmake"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458153668, "post_id": 36044132, "comment_id": 59737256, "body": "DId you check your $PATH? Does it have /usr/lib by any chance?"}, {"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458153822, "post_id": 36044132, "comment_id": 59737339, "body": "Good point! Unfortunately, my PATH doesn&#39;t have /usr/lib in it, so that&#39;s not the fix, but I should add that information to the question, regardless."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458154076, "post_id": 36044132, "comment_id": 59737465, "body": "At this point, I&#39;d try strace/ltrace - may be it will give you a hint. Not neccessary, but better than nothing. For example, if it is reading some obscure env variable, you will see <code>getenv</code> call in ltrace output."}, {"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458154388, "post_id": 36044132, "comment_id": 59737648, "body": "That&#39;s a good idea.  I wouldn&#39;t have thought to use ltrace/strace for that... It will certainly give me a lot more information than I have now!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458155494, "post_id": 36044132, "comment_id": 59738285, "body": "Let me know how it goes, now I am curious!"}, {"owner": {"reputation": 98, "user_id": 6005220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7076643bd014e005ca669ef78dcd594b?s=128&d=identicon&r=PG&f=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/6005220/ravi"}, "edited": false, "score": 0, "creation_date": 1458157275, "post_id": 36044132, "comment_id": 59739394, "body": "Try finding what does CMAKE_LIBRARY_PATH is to set, if not set it to the library location."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1458157530, "post_id": 36044132, "comment_id": 59739555, "body": "In many *nix systems, <code>&#47;usr&#47;lib</code> is a symbolic link to either <code>lib32</code> or <code>lib64</code>. Is there any chance your link is pointing to the wrong directory?"}, {"owner": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 0, "creation_date": 1458157882, "post_id": 36044132, "comment_id": 59739776, "body": "In short, because cmake is an awful, utterly broken tool that does not respect the toolchain&#39;s library paths but tries to impose its own hard-coded assumptions that are wrong in anything but the most vanilla configurations."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 194515, "user_id": 379897, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/73c5967cf90e62b10d34b1d2d0ad3aae?s=128&d=identicon&r=PG", "display_name": "R.. GitHub STOP HELPING ICE", "link": "https://stackoverflow.com/users/379897/r-github-stop-helping-ice"}, "edited": false, "score": 1, "creation_date": 1458158810, "post_id": 36044132, "comment_id": 59740318, "body": "@R.., while I not neccesarily disagree with that, do you know of any better tool? Manual Makefile typing is out of the question, and configure is a hassle."}], "answers": [{"comments": [{"owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "edited": false, "score": 0, "creation_date": 1458161818, "post_id": 36046564, "comment_id": 59742113, "body": "Good suggestion. Sadly, it doesn&#39;t change which library is found (still finding <code>&#47;usr&#47;lib&#47;libX11.so</code>).  However, that does get me pointed in the right direction, I think."}], "tags": [], "owner": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1458161048, "creation_date": 1458161048, "answer_id": 36046564, "question_id": 36044132, "link": "https://stackoverflow.com/questions/36044132/why-is-cmake-finding-32-bit-libraries-instead-of-64-bit-libs-on-a-64-bit-system/36046564#36046564", "title": "Why is cmake finding 32-bit libraries instead of 64-bit libs on a 64-bit system?", "body": "<p>You could try :</p>\n\n<p>list(INSERT 0 CMAKE_SYSTEM_LIBRARY_PATH /usr/lib64)</p>\n\n<p>The full list of variables used by find_library is available in the documentation: <a href=\"https://cmake.org/cmake/help/v3.5/command/find_library.html\" rel=\"nofollow\">https://cmake.org/cmake/help/v3.5/command/find_library.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 1670, "user_id": 754534, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/567f7e1a18f931b5a6e3d88a20c27c67?s=128&d=identicon&r=PG&f=1", "display_name": "JPNotADragon", "link": "https://stackoverflow.com/users/754534/jpnotadragon"}, "edited": false, "score": 0, "creation_date": 1502548528, "post_id": 36047243, "comment_id": 78261162, "body": "Just stumbled upon this while looking for something else. I&#39;ve very little experience with Linux programming, but I&#39;m wondering: if applications are looking for <code>libX11.so.6</code>, shouldn&#39;t the CMake Find module do the same? IMHO the answer here might involve fixing the Find module."}], "tags": [], "owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "is_accepted": true, "score": 1, "last_activity_date": 1458163529, "creation_date": 1458163529, "answer_id": 36047243, "question_id": 36044132, "link": "https://stackoverflow.com/questions/36044132/why-is-cmake-finding-32-bit-libraries-instead-of-64-bit-libs-on-a-64-bit-system/36047243#36047243", "title": "Why is cmake finding 32-bit libraries instead of 64-bit libs on a 64-bit system?", "body": "<p>It turns out that the root problem is the version suffix and the lack of a symlink to specifically <code>/usr/lib64/libX11.so</code> on the RHEL6 side.</p>\n\n<p><code>cmake</code> looks specifically for <code>libX11.so</code> and not <code>libX11.so.6</code> or some other version-specific variant.</p>\n\n<p>In this case, making the symlink wasn't an option, but I was able to prefer the specific version by listing the filename first:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nfind_library(XTEST NAMES libX11.so.6 X11)\nmessage(\"Found X11 at ${XTEST}\")\n</code></pre>\n\n<p>However, there are undoubtedly a variety of better ways of handling this, and I'd be very interested to hear them if anyone has any better approaches.</p>\n"}], "owner": {"reputation": 237077, "user_id": 325565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/342bd0a61c7081db529c856d3bcd9545?s=128&d=identicon&r=PG", "display_name": "Joe Kington", "link": "https://stackoverflow.com/users/325565/joe-kington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2004, "favorite_count": 1, "accepted_answer_id": 36047243, "answer_count": 2, "score": 3, "last_activity_date": 1458163529, "creation_date": 1458153120, "last_edit_date": 1592644375, "question_id": 36044132, "link": "https://stackoverflow.com/questions/36044132/why-is-cmake-finding-32-bit-libraries-instead-of-64-bit-libs-on-a-64-bit-system", "title": "Why is cmake finding 32-bit libraries instead of 64-bit libs on a 64-bit system?", "body": "<h1>Problem Description</h1>\n<p>I'm working on porting several codebases over from Red Hat 5 to 6, and I've run into a cmake issue that I'm completely stumped by.</p>\n<p>Cmake is consistently finding the 32-bit versions of libraries under <code>/usr/lib</code> instead of the 64-bit versions under <code>/usr/lib64</code> on an RHEL6 system, while it correctly detects the lib64 versions on the an RHEL5 system.</p>\n<h1>Minimal Example</h1>\n<p>For example, I have a very minimal <code>CMakeLists.txt</code> file:</p>\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nfind_library(XTEST X11)\nmessage(&quot;Found X11 at ${XTEST}&quot;)\n</code></pre>\n<p>On an RHEL6 system, running <code>cmake</code> on this results in:</p>\n<pre><code>$ cmake ..\n-- The C compiler identification is GNU 4.4.7\n-- The CXX compiler identification is GNU 4.4.7\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\nFound X11 at /usr/lib/libX11.so\n-- Configuring done\n-- Generating done\n-- Build files have been written to: $HOME/software/64bit_problem/build\n</code></pre>\n<p>(The key part here is the <code>Found X11 at /usr/lib/libX11.so</code> line)</p>\n<p>However, if I do the same thing on an RHEL5 system, it correctly detects the <code>/usr/lib64/</code> version: (Note that I'm clearing out the <code>CMakeCache.txt</code> and other temporary cmake-files in between runs.)</p>\n<pre><code>$ cmake ..\n-- The C compiler identification is GNU 4.1.2\n-- The CXX compiler identification is GNU 4.1.2\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working CXX compiler: /usr/bin/c++\n-- Check for working CXX compiler: /usr/bin/c++ -- works\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\nFound X11 at /usr/lib64/libX11.so\n-- Configuring done\n-- Generating done\n-- Build files have been written to: $HOME/software/64bit_problem/build\n</code></pre>\n<h1>Troubleshooting Info</h1>\n<p>The <code>/usr/lib64</code> versions of the libraries exist on both systems.  Here's the listing on the RHEL6 system:</p>\n<pre><code>$ ls /usr/lib64/libX11.so*\n/usr/lib64/libX11.so.6  /usr/lib64/libX11.so.6.3.0\n</code></pre>\n<p>And on the RHEL5 system:</p>\n<pre><code>$ ls /usr/lib64/libX11.so*\n/usr/lib64/libX11.so.6  /usr/lib64/libX11.so.6.3.0\n</code></pre>\n<p>Just to confirm that <code>/usr/lib</code> is indeed the 32-bit versions (also, it's not a symlink to another location):</p>\n<pre><code>$ file /usr/lib/libX11.so*\n/usr/lib/libX11.so:       symbolic link to `libX11.so.6.3.0'\n/usr/lib/libX11.so.6:     symbolic link to `libX11.so.6.3.0'\n/usr/lib/libX11.so.6.3.0: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, stripped\n\n$ file /usr/lib64/libX11.so*\n/usr/lib64/libX11.so.6:     symbolic link to `libX11.so.6.3.0'\n/usr/lib64/libX11.so.6.3.0: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, stripped\n</code></pre>\n<p>This is probably due to an environment setting somewhere, but I'm a bit stumped as to where.  I don't have <code>LD_LIBRARY_PATH</code>, <code>LD_RUN_PATH</code>, or <code>LDFLAGS</code> set. Same for <code>CFLAGS</code> and <code>CXXFLAGS</code>.  My user environment should be identical, as my $HOME is an NFS share that's the same on both machines.</p>\n<p><code>/usr/lib</code> isn't in my <code>$PATH</code>, and regardless, limiting my path to a minimal subset doesn't seem to help:</p>\n<pre><code>$ export PATH=/bin:/usr/bin:$HOME/local/bin\n\n$ cmake ..\n&lt;snip&gt;\nFound X11 at /usr/lib/libX11.so\n-- Configuring done\n&lt;snip&gt;\n</code></pre>\n<p>@SergyA had the excellent suggestion of checking which environment variables were being accessed by using <code>ltrace</code>. <code>strace</code> didn't turn up anything diagnostic from what I could see, but <code>ltrace</code> shows the environment variable access nicely. Here's a quick summary:</p>\n<pre><code>$ ltrace -o ltrace_output cmake ..\n\n$ grep getenv ltrace_output\ngetenv(&quot;PWD&quot;)                                                    = &quot;$HOME/software/64bit_problem&quot;\ngetenv(&quot;PATH&quot;)                                                   = &quot;/bin:/usr/bin:$HOME/local/bin&quot;\ngetenv(&quot;CMAKE_ROOT&quot;)                                             = NULL\ngetenv(&quot;MAKEFLAGS&quot;)                                              = NULL\ngetenv(&quot;VERBOSE&quot;)                                                = NULL\ngetenv(&quot;CFLAGS&quot;)                                                 = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\ngetenv(&quot;CXXFLAGS&quot;)                                               = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\ngetenv(&quot;LDFLAGS&quot;)                                                = NULL\n</code></pre>\n<h3><code>cmake</code>-specific Trobleshooting</h3>\n<p>The cmake version is identical on both machines (in fact, it's the same executable for reasons I'll omit for brevity):</p>\n<pre><code>$ cmake --version\ncmake version 2.8.11.2\n\n$ which cmake\n$HOME/local/bin/cmake\n</code></pre>\n<p>I've tried explicitly enabling <code>FIND_LIBRARY_USE_LIB64_PATHS</code>, but this doesn't seem to make a difference:</p>\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nset_property(GLOBAL PROPERTY FIND_LIBRARY_USE_LIB64_PATHS ON)\n\nfind_library(XTEST X11)\nmessage(&quot;Found X11 at ${XTEST}&quot;)\n</code></pre>\n<p>As @Ravi mentioned, this is more likely due to some issue with <code>CMAKE_LIBRARY_PATH</code>, but it's not set, and changing it as either an environment variable or as a cmake variable doesn't seem to help.  However, I fully admit I am largely ignorant of the various cmake configuration variables, so it's very likely that I'm missing something obvious here.</p>\n<p>One key thing I've recently realized is that it's not all libraries... For example:</p>\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nfind_library(PNGTEST png)\nmessage(&quot;Found libpng at ${PNGTEST}&quot;)\n</code></pre>\n<p>Finds <code>/usr/lib64/libpng.so</code> instead of <code>/usr/lib/libpng.so</code>.</p>\n<p>This leads me to think it's something cmake-specific, at any rate.</p>\n<h3><code>find_package</code> instead of <code>find_library</code></h3>\n<p>Given the library-specific issues I mentioned above, I thought to try finding the entire X11 package instead of a single library (which is really what the codebase I was working with should have done anyway).</p>\n<p>However, I'm getting even more confusing results... It seems to be detecting a mix of 64-bit and 32-bit libraries?  For example:</p>\n<pre><code>cmake_minimum_required(VERSION 2.8)\n\nFIND_PACKAGE(X11 REQUIRED)\n\nmessage(&quot;X11_LIBRARIES: ${X11_LIBRARIES}&quot;)\n</code></pre>\n<p>We'll get:</p>\n<pre><code>$ cmake ..\n&lt;snip&gt;\n-- Looking for XOpenDisplay in /usr/lib/libX11.so;/usr/lib/libXext.so\n-- Looking for XOpenDisplay in /usr/lib/libX11.so;/usr/lib/libXext.so - not found\n&lt;snip&gt;\n-- Found X11: /usr/lib/libX11.so\nX11_LIBRARIES: /usr/lib64/libSM.so;/usr/lib64/libICE.so;/usr/lib/libX11.so;/usr/lib/libXext.so\n-- Configuring done\n&lt;snip&gt;\n</code></pre>\n<p>However, if we have a look at these specific libraries in <code>X11_LIBRARIES</code>, they're a mix of 32-bit and 64-bit versions!</p>\n<pre><code>$ file /usr/lib64/libSM.so.6.0.1\n/usr/lib64/libSM.so.6.0.1: ELF 64-bit LSB shared object, x86-64, &lt;snip&gt;\n\n$ file /usr/lib64/libICE.so.6.3.0\n/usr/lib64/libICE.so.6.3.0: ELF 64-bit LSB shared object, x86-64, &lt;snip&gt;\n\n$ file /usr/lib/libX11.so.6.3.0\n/usr/lib/libX11.so.6.3.0: ELF 32-bit LSB shared object, Intel 80386, &lt;snip&gt;\n\n$ file /usr/lib/libXext.so.6.4.0\n/usr/lib/libXext.so.6.4.0: ELF 32-bit LSB shared object, Intel 80386, &lt;snip&gt;\n</code></pre>\n<h1>In summary, what else should I try?</h1>\n<p>Am I missing a cmake-specific or possibly X11-specific configuration option?</p>\n"}, {"tags": ["c++", "qt", "qwidget"], "comments": [{"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1458154162, "post_id": 36044025, "comment_id": 59737519, "body": "You can walk with debugger, to handle a crash. For auto-deleting objects you may call <code>this-&gt;deleteLater()</code> in your <code>leaveEvent</code> handler."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1458156516, "post_id": 36044025, "comment_id": 59738894, "body": "@SaZ I didn&#39;t know an object can delete itself... It seems to work but when I run with Valgrind it crashes."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458156789, "post_id": 36044025, "comment_id": 59739083, "body": "Not clear what you exactly want to achieve. Dow you want to show different images on the same label or each time to create and show a new label with the image and destroy it afterwards? In the latter case you can use a QTimer to destroy the label after required period of time. And I see this-&gt;close() in the mouse event - you can call this-&gt;deleteLater(); after that and your label will be destroyed on the mouse leaving."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458156997, "post_id": 36044025, "comment_id": 59739222, "body": "@EvgenyS. - when processing some images somewhere else, I want at the end of processing to show the image, temporarily - but NOT on a timer - I don&#39;t know how long the user wants to look at it. So I made that class to close the label once the user moves his mouse off the label. As I mentioned in my comment to precious identical suggestion, it seems to work but if I run on valgrind it crashes. I will add that to the question."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1458157058, "post_id": 36044025, "comment_id": 59739261, "body": "You can put it into a QDialog, then connect the <code>finished</code> signal to <code>deleteLater</code>. QLabel is not designed to be a window of itself and it lacks the signals to be connected to <code>deleteLater</code>."}, {"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1458157127, "post_id": 36044025, "comment_id": 59739313, "body": "Or you can emit a signal in hideEvent or other events, can connect it to <code>deleteLater</code>"}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458157151, "post_id": 36044025, "comment_id": 59739322, "body": "Don&#39;t create QLabel on stack and you won&#39;t get crash. Well, your initial code with <code>new</code>  then ok. The only you should add there is <code>deleterLater()</code> in <code>leaveEvent()</code>."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 3, "creation_date": 1458157443, "post_id": 36044025, "comment_id": 59739502, "body": "Regarding crashes with <code>m_previewShow</code>. Are sure that you set NULL to it in constructor? And this must be <code>QPointer</code> if you want to reuse it."}, {"owner": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "reply_to_user": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458158021, "post_id": 36044025, "comment_id": 59739856, "body": "Why don&#39;t you hide/show it instead of delete/create it ? And @EvgenyS. is right about the NULL."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458158312, "post_id": 36044025, "comment_id": 59740048, "body": "Thanks @EvgenyS. I just tested it - and valgrind approves - I will mark it as answer if you write an answer."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "reply_to_user": {"reputation": 4667, "user_id": 5695504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7c8870ba24f6cb1b54dfae0521cb13?s=128&d=identicon&r=PG", "display_name": "Ilya", "link": "https://stackoverflow.com/users/5695504/ilya"}, "edited": false, "score": 0, "creation_date": 1458158431, "post_id": 36044025, "comment_id": 59740115, "body": "@Ilya I don&#39;t know if I need to ever create it... So I thought I only create it if needed."}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1458160549, "post_id": 36044025, "comment_id": 59741354, "body": "QPointer is only needed if anyone else could the delete label - and here I don\u2019t see anyone who would do that."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "reply_to_user": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1458160809, "post_id": 36044025, "comment_id": 59741503, "body": "@FrankOsterfeld Not exactly. If we reuse the same varible that can destroy itself elsewhere we need to know if it still exists or not. Without <code>QPointer</code> when we call <code>deleteLater</code> we invalidate the pointer in <code>m_previewShow</code>. Of course, this makes sence only in case we create/destroy the label each time as OP requested. If we would hide/show the label then QPointer is not required."}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "reply_to_user": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458197222, "post_id": 36044025, "comment_id": 59754327, "body": "@EvgenyS. Right, I missed the part about deleteLater()"}], "answers": [{"comments": [{"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1458163368, "post_id": 36045901, "comment_id": 59742959, "body": "This did not work. the only thing that worked was your noticing that, if I create the preview as a (pointer) member variable, I had to initialize it to NULL in constructor. the <code>this-&gt;deleteLater()</code> in any shape or form makes the program crash when I run it in Valgrind - so I cannot use it."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "reply_to_user": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1458164557, "post_id": 36045901, "comment_id": 59743569, "body": "@Thalia At what moment the app crashes? Just after <code>deleteLater</code> or somewhen later? How many times you can see the image label popup?"}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1458225709, "post_id": 36045901, "comment_id": 59774016, "body": "The crash in Valgrind happens as soon as I start the program. I don&#39;t get to do anything that leads to showing the popup. I imagine they create and allocate their objects differently... Regardless, since I must be able to run it with Valgrind as well as stand-alone, even if that command is normally safe I cannot use it."}, {"owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "edited": false, "score": 0, "creation_date": 1458225872, "post_id": 36045901, "comment_id": 59774137, "body": "Like I mentioned in comments above - I cannot use <code>this-&gt;deletelater()</code>. What worked was, creating my preview as a class member variable (see my 3rd code snippet in question) - and you helped by reminding me to set it to NULL in constructor (I assumed it was so)."}], "tags": [], "owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1458158778, "creation_date": 1458158778, "answer_id": 36045901, "question_id": 36044025, "link": "https://stackoverflow.com/questions/36044025/can-i-show-an-object-subclass-of-qlabel-created-as-needed-the-issue-i-have/36045901#36045901", "title": "Can I show an object (subclass of QLabel ) created as needed? (the issue I have is deleting it)", "body": "<p>Ok, list all variants.</p>\n\n<p>First is as is initial code. Just add <code>deleteLater()</code> to <code>leaveEvent()</code> and the label will be destroyed when mouse leaves the widget.</p>\n\n<pre><code>class PreviewLabel : public QLabel\n{\npublic:\n    explicit PreviewLabel(QWidget *parent = 0) :\n        QLabel(parent)\n    {\n        this-&gt;setWindowFlags(Qt::Popup);\n    }\n\nprotected:\n    virtual void leaveEvent(QEvent *)\n    {\n        this-&gt;close();\n        this-&gt;deleteLater();\n    }\n};\n\nvoid showImageSlot()\n{\n    QImage preview = getSomeImage();\n    if(preview.isNull())\n        return;\n    PreviewLabel* previewShow = new PreviewLabel();\n    previewShow-&gt;setPixmap(QPixmap::fromImage(preview));\n    previewShow-&gt;show();\n}\n</code></pre>\n\n<p>Second, with member variable that destroys itself after mose leaving the widget. Note, that the member variable must be guarded with <code>QPointer</code> so you always know if it exists or not.</p>\n\n<pre><code>class PreviewLabel : public QLabel\n{\npublic:\n    explicit PreviewLabel(QWidget *parent = 0) :\n        QLabel(parent)\n    {\n        this-&gt;setWindowFlags(Qt::Popup);\n    }\n\nprotected:\n    virtual void leaveEvent(QEvent *)\n    {\n        this-&gt;close();\n        this-&gt;deleteLater();\n    }\n};\n\n// somewhere in member declaration\n\n// this should be QPointer in order to detect label destroy\nQPointer&lt;QLabel&gt; m_previewShow;\n\n...\n\nvoid showImageSlot()\n{\n   if(!m_previewShow)\n      m_previewShow = new PreviewLabel();\n   m_previewShow-&gt;setPixmap(QPixmap::fromImage(preview));\n   m_previewShow-&gt;show();    \n</code></pre>\n\n<p>}</p>\n"}], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458158778, "creation_date": 1458152829, "last_edit_date": 1458157236, "question_id": 36044025, "link": "https://stackoverflow.com/questions/36044025/can-i-show-an-object-subclass-of-qlabel-created-as-needed-the-issue-i-have", "title": "Can I show an object (subclass of QLabel ) created as needed? (the issue I have is deleting it)", "body": "<p>I have created a label to show some info.. the way it works, if I need to show an image I set it on the label.</p>\n\n<pre><code>class PreviewLabel : public QLabel\n{\npublic:\n    explicit PreviewLabel(QWidget *parent = 0) :\n        QLabel(parent)\n    {\n        this-&gt;setWindowFlags(Qt::Popup);\n    }\n\nprotected:\n    virtual void leaveEvent(QEvent *)\n    {\n        this-&gt;close();\n    }\n};\n\nvoid showImageSlot()\n{\n    QImage preview = getSomeImage();\n    if(preview.isNull())\n        return;\n    PreviewLabel* previewShow = new PreviewLabel();\n    previewShow-&gt;setPixmap(QPixmap::fromImage(preview));\n    previewShow-&gt;show();\n}\n</code></pre>\n\n<p>This has a memory leak though - the <code>PreviewLabel</code> object never gets deleted.<br>\n(Which is probably why it works.)</p>\n\n<p>I tried to add a <code>previewShow-&gt;deleteLater();</code> after the <code>show()</code> and the image didn't show.<br>\nI also tried not to make it a pointer, but the image didn't show (see code below).<br>\nTechnically it shows but gets killed instantly... because the program reaches the end of the <code>showImageSlot</code> function. </p>\n\n<pre><code>void showImageSlot()\n{\n    QImage preview = getSomeImage();\n    if(preview.isNull())\n        return;\n    PreviewLabel previewShow;\n    previewShow.setPixmap(QPixmap::fromImage(preview));\n    previewShow.show();\n}\n</code></pre>\n\n<p>So the <code>previewShow</code> object needs a lifetime longer than that function... but how ?</p>\n\n<p>I preferred not to make it a member variable - but I also tried to make it one (deleted in class destructor).</p>\n\n<pre><code>if(m_previewShow == NULL)\n    m_previewShow = new PreviewLabel();\nm_previewShow-&gt;setPixmap(QPixmap::fromImage(preview));\nm_previewShow-&gt;show();\n</code></pre>\n\n<p>This... crashes on first call.</p>\n\n<p>How can I show it, preferably without having to make it a class member variable ?</p>\n\n<p>I was thinking of making the object kill itself in the <code>leaveEvent</code> - is that possible ?</p>\n\n<p>Edit - Two people have suggested the same thing - I add <code>this-&gt;deleteLater();</code> in the <code>leaveEvent</code>.<br>\nI tried and the program seems to run fine - </p>\n\n<p>But I also ran it in Valgrind and the program crashes, the log file says</p>\n\n<pre><code>--15595-- memcheck GC: 32768 nodes, 30902 survivors ( 94.3%)\n--15595-- memcheck GC: increase table size to 65536\n==15595== Invalid free() / delete / delete[] / realloc()\n==15595==    at 0x402ACFC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)\n==15595==    by 0x805D495: MainWindow::~MainWindow() (mainwindow.cpp:234)\n==15595==    by 0x4E7ED02: qDeleteInEventHandler(QObject*) (in /usr/lib/i386-linux-gnu/libQtCore.so.4.8.1)\n</code></pre>\n\n<p>(the referenced line number is at the end of the destructor of the main class containing <code>showImageSlot()</code> function)</p>\n"}, {"tags": ["c++", "multithreading", "qt", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 5274985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d6Ega.jpg?s=128&g=1", "display_name": "Michael Sobrepera", "link": "https://stackoverflow.com/users/5274985/michael-sobrepera"}, "is_accepted": true, "score": 1, "last_activity_date": 1460056887, "creation_date": 1460056887, "answer_id": 36485312, "question_id": 36043874, "link": "https://stackoverflow.com/questions/36043874/cvshowimage-blocks-in-secondary-thread-when-opencv-is-built-with-qt/36485312#36485312", "title": "cvShowImage blocks in secondary thread when OpenCV is built with Qt", "body": "<p>So it turns out that <strong>ALL</strong> highgui elements must be created and used in the same thread. That includes window creation, image showing, waitkey, window destruction. So in this case the <code>cvNamedWindow</code> line needed to go into the <code>TrackerBase::displayLoop()</code> function (ideally inside of the first <code>if</code>). </p>\n"}], "owner": {"reputation": 80, "user_id": 5274985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d6Ega.jpg?s=128&g=1", "display_name": "Michael Sobrepera", "link": "https://stackoverflow.com/users/5274985/michael-sobrepera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 36485312, "answer_count": 1, "score": 2, "last_activity_date": 1460056887, "creation_date": 1458152325, "question_id": 36043874, "link": "https://stackoverflow.com/questions/36043874/cvshowimage-blocks-in-secondary-thread-when-opencv-is-built-with-qt", "title": "cvShowImage blocks in secondary thread when OpenCV is built with Qt", "body": "<p>I am working on some legacy OpenCV code (old C style, too big to convert to C++ style) and using threading to try to speed things up. Displaying is done in its own thread with a buffered image protected by a mutex. Threads are implemented using C++11 std::threads. </p>\n\n<p>When on a system that has OpenCV built with the standard GTK gui, everything works great (>10 hours of testing on the current version). When working on a system that has Qt as the gui (setup during OpenCV build), the call to cvShowImage blocks, however, the other threads keep on going. </p>\n\n<p>The architecture is something like this:</p>\n\n<pre><code>main(){\n    cvNamedWindow(\"Image\", CV_WINDOW_NORMAL | CV_WINDOW_KEEPRATIO | CV_GUI_EXPANDED);\n\n    std::thread imageAcquisition(&amp;TrackerBase::getImageLoop, this);\n    std::thread displayThread(&amp;TrackerBase::displayLoop, this); \n\n    while (run_) {\n        if (newImage_) {\n            newImage_ = false;\n            {\n                std::lock_guard&lt;std::mutex&gt; lock(img_mutex_);\n                cvCopyImage(img_, img_process_);\n            }\n            // do processing, will dump an image into img_result_ while locking img_result_mutex_\n            {\n                std::lock_guard&lt;std::mutex&gt; lock(process_mutex_);\n                process();\n            }\n            newResult_ = true;\n        }\n    }\n}\n\n//Grab an image from a camera, dumps it in img_ while locking img_mutex_\nvoid TrackerBase::getImageLoop(){\n    while(run_){\n        if (!getImage()) {\n            newImage_ = true;\n        }\n    }\n}\n\nvoid TrackerBase::displayLoop(){\n    if(display_) {\n        while (run_) {\n            if(newResult_) {\n                {\n                    std::lock_guard&lt;std::mutex&gt; lock(img_result_mutex_);\n                    cvCopy(img_result_, img_result_display_);\n                }\n                cvShowImage(\"Image\", img_result_display_);\n                newResult_ = false;\n                cvWaitKey(10);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>Note that <code>run_</code>, <code>newImage_</code>, and <code>newResult_</code> are all atomic. </p>\n\n<p>Does anybody have any idea as to why this is happening and how to fix it?</p>\n"}, {"tags": ["c++", "winapi", "dll", "console-application"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 5, "creation_date": 1458152262, "post_id": 36043832, "comment_id": 59736379, "body": "You can always create an invisible window from console application and post all those messages to this window."}], "answers": [{"tags": [], "owner": {"reputation": 28147, "user_id": 3857, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TOHg8.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3857/andy"}, "is_accepted": true, "score": 5, "last_activity_date": 1458174884, "last_edit_date": 1458174884, "creation_date": 1458152582, "answer_id": 36043960, "question_id": 36043832, "link": "https://stackoverflow.com/questions/36043832/send-windows-message-to-a-console-application/36043960#36043960", "title": "Send windows message to a console application", "body": "<p>You can create a window in a console application, just like in a standard Windows application. If you create a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx#message_only\" rel=\"nofollow\">message only window</a> (set the parent of the window to <code>HWND_MESSAGE</code> when calling <code>CreateWindow()</code>), then it won't be visible, but will still be able to receive Windows messages. You will need to have the standard Windows message loop running somewhere in your console application in order for the messages to be dispatched to your window.</p>\n"}], "owner": {"reputation": 55, "user_id": 2058604, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a93f8a6e376baae03830567518463558?s=128&d=identicon&r=PG", "display_name": "Ram Shmider", "link": "https://stackoverflow.com/users/2058604/ram-shmider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2033, "favorite_count": 0, "accepted_answer_id": 36043960, "answer_count": 1, "score": 2, "last_activity_date": 1458174884, "creation_date": 1458152191, "question_id": 36043832, "link": "https://stackoverflow.com/questions/36043832/send-windows-message-to-a-console-application", "title": "Send windows message to a console application", "body": "<p>I have a DLL that send message to the UI application, most of the messages that the DLL send contains text in them, the GUI application get the message and act according to the message.</p>\n\n<p>I need to create a console application that works with the same DLL, Is there any option to get the messages to the console application, as in console application I do not have a windows message procedure.</p>\n\n<p>In the GUI application I load the DLL and use one of its function to set my current HWND to the DLL, once I do this all the messages are send to my GUI.</p>\n\n<p>I thought about adding a Boolean value to the DLL to know if the DLL was call from the GUI interface or from the command line console application, but that involve a lot of changes in the DLL code.</p>\n\n<p>How can I get or redirect the messages to the console application (command line interface)?</p>\n\n<p>The DLL, GUI and console application are coded in C/C++ using the win32 API.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c#", "c++", "visual-studio-2013", "windows-10", "dllnotfoundexception"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458151865, "post_id": 36043505, "comment_id": 59736125, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17023419/win-7-64-bit-dll-problems\">Win 7, 64 bit, dll problems</a>"}, {"owner": {"reputation": 449, "user_id": 6073048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3NetH.jpg?s=128&g=1", "display_name": "Fabrice Dugas", "link": "https://stackoverflow.com/users/6073048/fabrice-dugas"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458153725, "post_id": 36043505, "comment_id": 59737285, "body": "I have tried downloading the redistributable packages but it didn&#39;t solve my problem. Your link suggests that Dependency Walker is misleading (which I was suspecting because all of a sudden all those dlls went missing)."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458154447, "post_id": 36043505, "comment_id": 59737684, "body": "Try running Dependency Walker on your desktop computer and compare the results."}, {"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1458155798, "post_id": 36043505, "comment_id": 59738454, "body": "Two things you can try; 1. compile your c# project as <code>x86</code> instead of <code>any cpu</code>. 2. run <code>regsvr32 path\\to\\Noyau.dll</code>. If you get an errormessage saying <code>Noyau.dll was loaded, but the DllRegisterServer entry point was not found</code>, the dll can be loaded fine, and it&#39;s dependencies are not the problem."}, {"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1458156233, "post_id": 36043505, "comment_id": 59738724, "body": "<i>I downloaded Visual C++ redistributable packages for visual studio 2013 x64</i>, <a href=\"http://superuser.com/q/695704\">also</a> install the x86 version on x64 pc&#39;s"}, {"owner": {"reputation": 449, "user_id": 6073048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3NetH.jpg?s=128&g=1", "display_name": "Fabrice Dugas", "link": "https://stackoverflow.com/users/6073048/fabrice-dugas"}, "reply_to_user": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1458166034, "post_id": 36043505, "comment_id": 59744241, "body": "@Wimmel 1. Compiling as <code>x86</code> didn&#39;t do it. 2. Running <code>regsvr32</code> fails to load <code>Noyau.dll</code>. 3. I downloaded both. Still didn&#39;t work. Ugh... My computer really doesn&#39;t want to use my dll anymore."}, {"owner": {"reputation": 449, "user_id": 6073048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3NetH.jpg?s=128&g=1", "display_name": "Fabrice Dugas", "link": "https://stackoverflow.com/users/6073048/fabrice-dugas"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458218427, "post_id": 36043505, "comment_id": 59768264, "body": "@Richard I just saw your comment about trying <code>dependency walker</code> on my desktop! I will try it tonight and and post the results if anything is suspicious."}, {"owner": {"reputation": 18869, "user_id": 749973, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ed8780279845d7a949f8fb288bef33a5?s=128&d=identicon&r=PG&f=1", "display_name": "Tae-Sung Shin", "link": "https://stackoverflow.com/users/749973/tae-sung-shin"}, "edited": false, "score": 0, "creation_date": 1476649844, "post_id": 36043505, "comment_id": 67423418, "body": "I have exactly same problem and after reading your post, it seems to me that the cause might be due to conflict between multiple visual studios or multiple redistributable packages. You might not have the problem in Windows 7, but Windows 10 did something to break the environment."}], "owner": {"reputation": 449, "user_id": 6073048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/3NetH.jpg?s=128&g=1", "display_name": "Fabrice Dugas", "link": "https://stackoverflow.com/users/6073048/fabrice-dugas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2659, "favorite_count": 3, "answer_count": 0, "score": 2, "last_activity_date": 1465560842, "creation_date": 1458151342, "last_edit_date": 1465560842, "question_id": 36043505, "link": "https://stackoverflow.com/questions/36043505/cant-load-dll-after-windows-10-march-update", "title": "Can&#39;t load DLL after Windows 10 March update", "body": "<p>This is my first question on stackoverflow, so I am open to suggestions.</p>\n\n<p>I have been working on a C++/C# school project for the past few months on Visual Studio Ultimate 2013. The project is a robot simulator and we use a dll named Noyau.dll that was created for us by the teacher and lab assistants. We use P/Invoke between C# and C++ to access the libraries.</p>\n\n<p>Never had a problem with Visual Studio until this last Sunday (March 13th). My computer started an update for Windows 10 and now when I try to run my program it says:</p>\n\n<blockquote>\n  <p>First-chance exception at 0x00007FF93DFC1F28 in InterfaceGraphique.exe: Microsoft C++ exception: EEMessageException at memory location 0x00000043C3DFE360.</p>\n  \n  <p>A first chance exception of type 'System.DllNotFoundException' occurred in InterfaceGraphique.exe\n  An unhandled exception of type 'System.DllNotFoundException' occurred in InterfaceGraphique.exe\n  Additional information: Unable to load DLL 'Noyau.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E)</p>\n</blockquote>\n\n<p>The only thing that happened in between when it was working and when it stopped working is the Windows 10 Update. \"Noyau.dll\" is compiled and it is in the right directory. The project works for my whole team. It works on my desktop computer. The project is much probably fine, my laptop seems to be the problem.</p>\n\n<p>So of course, I searched for similar problems and many people suggest the use of Dependency Walker which I did. When I run \"Noyau.dll\" with Dependency Walker, I get that tons of dlls seem to be missing but I have no idea what these are. They seem to be core dlls. I could go and start downloading them all separately, but there are hundreds of them.</p>\n\n<p>What I have tried so far:</p>\n\n<ul>\n<li>I ran the repair tool for Visual Studio</li>\n<li>I reinstalled Visual Studio 2013</li>\n<li>I downloaded Visual C++ redistributable packages for visual studio 2013 x64</li>\n<li>I ran Dependency Walker (I posted a link to a screenshot at the end of the post)</li>\n</ul>\n\n<p>My computer is a Dell XPS13 9343 running Windows 10 Home x64.</p>\n\n<p>Here is a <a href=\"http://imgur.com/Y2EoCOs\" rel=\"nofollow\">screenshot</a> of Dependency Walker.</p>\n\n<p>I am sorry if this looks like a duplicate, but I have never seen a Windows Update break my Visual Studio or my dlls.</p>\n\n<hr>\n\n<p>EDIT: Ok, I ran Dependency Walker on my .exe instead. I found that many dlls are missing in <code>C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\</code></p>\n\n<blockquote>\n  <p>LoadLibraryExW(\"C:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\VERSION.dll\", 0x0000000000000000, LOAD_WITH_ALTERED_SEARCH_PATH) returned NULL. Error: The specified module could not be found (126).</p>\n</blockquote>\n\n<p>I can't find these ones in the specified path but I can find them in System32:</p>\n\n<ul>\n<li>VERSION.dll</li>\n<li>ole32.dll</li>\n</ul>\n\n<p>Why can't Dependency Walker find these two dlls?</p>\n\n<hr>\n\n<p>FINALLY:</p>\n\n<p>This is an old thread, but if anyone comes across this in the future I had to reset my laptop and reinstall VS to fix it. If anyone ever comes across this problem and finds a better solution, feel free to leave an answer here.</p>\n"}, {"tags": ["c++", "c++11", "chrono"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1458151556, "post_id": 36043351, "comment_id": 59735944, "body": "I think you&#39;re looking for <a href=\"http://en.cppreference.com/w/cpp/chrono/duration\" rel=\"nofollow noreferrer\"><code>std::chrono::duration</code></a> specifically for representing a time interval."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 811724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a37e7e88a383c9c0fda78b6798dcaf6?s=128&d=identicon&r=PG", "display_name": "lorcap", "link": "https://stackoverflow.com/users/811724/lorcap"}, "edited": false, "score": 0, "creation_date": 1460617490, "post_id": 36044086, "comment_id": 60828345, "body": "A ready-to-use and simpler (yet, less powerful) solution than this one is found in question <a href=\"http://stackoverflow.com/questions/21868368/units-of-measurement-in-c\">Units of measurement in C++</a>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 8, "last_activity_date": 1458590713, "last_edit_date": 1458590713, "creation_date": 1458153033, "answer_id": 36044086, "question_id": 36043351, "link": "https://stackoverflow.com/questions/36043351/stdchrono-for-frequencies/36044086#36044086", "title": "std::chrono for frequencies?", "body": "<p>A frequency can be treated as the duration of a cycle.  So 20 Hz can be treated as 0.05 seconds.</p>\n\n<p>Chrono will fully support that.</p>\n\n<p>You can probably write a <code>Hz</code> type or frequency template that does the opposite of what periods/durations do in some contexts.  Internally storing a duration doesn't work well, sadly, as an int Hz in seconds as a duration in seconds is a failure.</p>\n\n<pre><code>template&lt;\n  class Rep,\n  class Period = std::ratio&lt;1&gt;\n&gt;\nstruct frequency;\n\ntemplate&lt;\n  class Rep,\n  std::intmax_t Num,\n  std::intmax_t Denom&gt;\n&gt;\nstruct frequency&lt;Rep, std::ratio&lt;Num, Denom&gt;&gt;\n{\n  // todo!\n  frequency&amp; operator+=(const frequency&amp; d);\n  frequency&amp; operator-=(const frequency&amp; d);\n  frequency&amp; operator*=(const Rep&amp; rhs);\n  frequency&amp; operator/=(const Rep&amp; rhs);\n  frequency&amp; operator%=(const frequency&amp; rhs);\n  Rep count() const;\n  friend frequency operator+(frequency lhs, frequency const&amp; rhs);\n  friend frequency operator-(frequency lhs, frequency const&amp; rhs);\n  friend frequency operator*(frequency self, Rep const&amp; scalar);\n  friend frequency operator*(Rep const&amp; scalar, frequency self);\n  friend frequency operator/(frequency self, Rep const&amp; scalar);\n  friend frequency operator%(frequency lhs, Rep const&amp; rhs);\n  friend frequency operator%(frequency lhs, frequency const&amp; rhs);\n  friend bool operator==(frequency const&amp; lhs, frequency const&amp; rhs);\n  friend bool operator!=(frequency const&amp; lhs, frequency const&amp; rhs);\n  friend bool operator&lt;=(frequency const&amp; lhs, frequency const&amp; rhs);\n  friend bool operator&gt;=(frequency const&amp; lhs, frequency const&amp; rhs);\n  friend bool operator&lt;(frequency const&amp; lhs, frequency const&amp; rhs);\n  friend bool operator&gt;(frequency const&amp; lhs, frequency const&amp; rhs);\n  template&lt;class ToFrequency&gt;\n  friend ToFrequency duration_cast(frequency const&amp; self);\n  // etc\n};\n\ntemplate&lt;class Rep&gt;\nusing hertz = frequency&lt;Rep&gt;;\n\ntemplate&lt;class T&gt;\nhertz&lt;T&gt; operator \"\" _hz(T t) {\n  return hertz&lt;T&gt;(std::move(t));\n}\n</code></pre>\n\n<p>now <code>13_hz</code> is an object of type <code>frequency&lt;int, std::ratio&lt;1,1&gt;&gt;</code>.</p>\n"}], "owner": {"reputation": 8257, "user_id": 3568092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlJHI.png?s=128&g=1", "display_name": "dangom", "link": "https://stackoverflow.com/users/3568092/dangom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2009, "favorite_count": 1, "accepted_answer_id": 36044086, "answer_count": 1, "score": 4, "last_activity_date": 1458590713, "creation_date": 1458150899, "question_id": 36043351, "link": "https://stackoverflow.com/questions/36043351/stdchrono-for-frequencies", "title": "std::chrono for frequencies?", "body": "<p>I'm implementing a very simple band-pass filter, and it's input arguments are a vector containing the signal, the dwell time, and the cutoff frequencies for the high-pass and low-pass filters:</p>\n\n<pre><code>typedef std::vector&lt;double&gt; vec;\nvec bandPass(const vec&amp; signal, double dwellTime, double lowCutoff, double highCutoff);\n</code></pre>\n\n<p>The obvious problem with my interface is that the function caller has to know in advance what units of time and frequency are expected, and may have to go through the annoyance of converting them appropriately, if necessary.</p>\n\n<p>I figured I could maybe use <code>std::chrono</code> to solve my problem, but I haven't seen it being used to measure frequencies. I'd want to have:</p>\n\n<pre><code>vec bandPass(const vec&amp; signal, milliseconds dwellTime, kHertz lowCutoff, kHertz highCutoff);\n</code></pre>\n\n<p>and have my function convert all units to seconds and Hertz for the computation. Ideally, multiplying milliseconds and kHz would give me the same results as multiplying seconds and Hz.</p>\n\n<p>Has anyone ever come accross a similar issue? Is it legal C++ to write anything like <code>1/10s</code> to refer to Hertz?</p>\n\n<p>I don't have much experience with std::chrono (and with C++, for that matter) and hoped I could gather some words of wisdom here before defining my interface. Any other suggestions are also welcome.</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1458150659, "post_id": 36043249, "comment_id": 59735400, "body": "Move <code>product</code> out of the for loops?"}, {"owner": {"reputation": 13, "user_id": 6073110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056389037751278/picture?type=large", "display_name": "\u041a\u0430\u0441\u0438\u043c \u0421\u0430\u043b", "link": "https://stackoverflow.com/users/6073110/%d0%9a%d0%b0%d1%81%d0%b8%d0%bc-%d0%a1%d0%b0%d0%bb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1458150739, "post_id": 36043249, "comment_id": 59735447, "body": "How would I grab the diagonals from the loops though, since I&#39;m defining the specific numbers with the if statement?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1458150834, "post_id": 36043249, "comment_id": 59735503, "body": "Just move the the declaration.  Still do the multiplication in the if statement."}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "edited": false, "score": 0, "creation_date": 1458151447, "post_id": 36043249, "comment_id": 59735882, "body": "@\u041a\u0430\u0441\u0438\u043c\u0421\u0430\u043b, you have 2 arrays lets say A and B, each array is a 4x4 array and you want to make the product of the diagonal nombers of array A with the diagonal numbers of array B,  is this what you are looking for?"}, {"owner": {"reputation": 13, "user_id": 6073110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056389037751278/picture?type=large", "display_name": "\u041a\u0430\u0441\u0438\u043c \u0421\u0430\u043b", "link": "https://stackoverflow.com/users/6073110/%d0%9a%d0%b0%d1%81%d0%b8%d0%bc-%d0%a1%d0%b0%d0%bb"}, "edited": false, "score": 0, "creation_date": 1458151559, "post_id": 36043249, "comment_id": 59735946, "body": "Yeah. I&#39;m trying to take the product of the numbers in Array A, then multiply that product by the product of the numbers in Array B. What Nathan said works, although in the script I run I see 8 diagonal elements, I don&#39;t see how there would be 7 since they don&#39;t seem to cross in center."}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "edited": false, "score": 0, "creation_date": 1458151777, "post_id": 36043249, "comment_id": 59736073, "body": "what do you mean by the product of the numbers in array A, the product of them with what?"}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 1952500, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd15d38fd1e508e6c2bcad9e153e789d?s=128&d=identicon&r=PG", "display_name": "user1952500", "link": "https://stackoverflow.com/users/1952500/user1952500"}, "is_accepted": true, "score": 0, "last_activity_date": 1458150989, "creation_date": 1458150989, "answer_id": 36043390, "question_id": 36043249, "link": "https://stackoverflow.com/questions/36043249/two-dimensional-array-4x4-product-of-diagonals/36043390#36043390", "title": "Two dimensional array 4x4, product of diagonals?", "body": "<p>Note:</p>\n\n<ul>\n<li>There are only <code>7</code> diagonal elements. You are counting the element in the centre of the matrix twice.</li>\n<li>you don't need to iterate the whole array in order to know about the diagonals. The diagonals have a nice property of <code>row == column</code> as you have observed and you only need to iterate along the diagonals.</li>\n</ul>\n\n<p>To make things clearer and easier, calculate the two diagonal products separately:</p>\n\n<pre><code>double product = 1;\nfor (int row = 0; row &lt; 4; row++) {\n    product *= arr[row][row]\n}\nfor (int row = 0; row &lt; 4; row++) {\n    product *= arr[row][4 - (row + 1)]\n}\n</code></pre>\n\n<p>If you consider both entries in each row at a time, you'll have to also account for the fact that the middle element appears in both diagonals which makes the code unnecessarily messy.</p>\n"}, {"tags": [], "owner": {"reputation": 3197, "user_id": 5853530, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/3b9567983f2e1d6c2315fa26202accb6?s=128&d=identicon&r=PG&f=1", "display_name": "Rajeev Singh", "link": "https://stackoverflow.com/users/5853530/rajeev-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1458151991, "creation_date": 1458151991, "answer_id": 36043755, "question_id": 36043249, "link": "https://stackoverflow.com/questions/36043249/two-dimensional-array-4x4-product-of-diagonals/36043755#36043755", "title": "Two dimensional array 4x4, product of diagonals?", "body": "<p>why you are defining the variable <code>product</code> inside the loop,thats why the previous data stored in the variable is lost when it goes out of scope.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ndouble product = 1; // var product should be defined out of the loop\n\nfor (int row = 0; row &lt; 4; row++)\n{\nfor (int column = 0; column &lt; 4; column++)\n{\n    if (row==column || row == 3 - column)\n    {\n        product *= arr[row][column];\n    }\n}\n}\n\ncout &lt;&lt; product &lt;&lt; \".\";\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6073110, "user_type": "registered", "profile_image": "https://graph.facebook.com/1056389037751278/picture?type=large", "display_name": "\u041a\u0430\u0441\u0438\u043c \u0421\u0430\u043b", "link": "https://stackoverflow.com/users/6073110/%d0%9a%d0%b0%d1%81%d0%b8%d0%bc-%d0%a1%d0%b0%d0%bb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1073, "favorite_count": 0, "accepted_answer_id": 36043390, "answer_count": 2, "score": -1, "last_activity_date": 1458151991, "creation_date": 1458150586, "question_id": 36043249, "link": "https://stackoverflow.com/questions/36043249/two-dimensional-array-4x4-product-of-diagonals", "title": "Two dimensional array 4x4, product of diagonals?", "body": "<p>I'm trying to take the product of all of the diagonal numbers in a 4x4 array. I know how to grab the numbers and print them, but I'm not sure how to take the product of them, how would I make it calculate the product of the 8 numbers?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nfor (int row = 0; row &lt; 4; row++)\n{\nfor (int column = 0; column &lt; 4; column++)\n{\n    if (row==column || row == 3 - column)\n    {\n        double product = 1;\n        product *= arr[row][column] \n        cout &lt;&lt; product &lt;&lt; \".\";\n    }\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "powershell"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1458151133, "post_id": 36043193, "comment_id": 59735678, "body": "Have you tried using the <code>-WindowStyle Hidden</code> option?"}, {"owner": {"reputation": 25, "user_id": 4491037, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec48be3fbd161f0135ad8fc05fa1f798?s=128&d=identicon&r=PG&f=1", "display_name": "Marabunta", "link": "https://stackoverflow.com/users/4491037/marabunta"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1458152018, "post_id": 36043193, "comment_id": 59736226, "body": "yes, still not working. And I found a mistake, there was a system() call for powershell before.  The code above does not even work =/"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1458152284, "post_id": 36043193, "comment_id": 59736390, "body": "Initializing pointer to non-<code>const</code> with a literal is invalid as of C++11, the rule set that governs that bit. At least two of the <code>CreateProcess</code> arguments where you provide 0, don&#39;t accept 0, according to Microsoft&#39;s documentation, which is the rule set that governs <i>that</i> bit. Do <b>read the documentation</b>."}], "answers": [{"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 1, "last_activity_date": 1458153643, "last_edit_date": 1458153643, "creation_date": 1458153300, "answer_id": 36044212, "question_id": 36043193, "link": "https://stackoverflow.com/questions/36043193/how-to-call-powershell-in-c-with-no-window/36044212#36044212", "title": "How to call powershell in c++ with no window", "body": "<p>First, the line</p>\n\n<pre><code>LPWSTR command=(_TEXT(\"powershell.exe -Executionpolicy bypass -File \\\"%deploy%\\\\psscript.ps1\\\" -Filename psscript -Folderpath \\\"%HOMEDRIVE%\\\\deployment\\\"\"));\n</code></pre>\n\n<p>&hellip; has three serious problems:</p>\n\n<ul>\n<li><p><code>LPWSTR</code> is a Microsoft macro that expands to <code>wchar_t*</code>, while the initializer reduces to a literal, which is an array of <code>const</code> characters. This removal of <code>const</code> was deprecated in C++98 already (the first C++ standard), and was removed &ndash; it's now <strong>invalid</strong> &ndash; in C++11.</p></li>\n<li><p><code>_TEXT</code> is a Microsoft macro that adds a prefix <code>L</code> to the literal if the macro symbol <code>_UNICODE</code> is defined. It was once part of a scheme to provide compatibility with Windows 95, until the Layer for Unicode was introduced in the year 2000. We are now <strong>16 years after this became obsolete</strong>, and to top it, you will just get a compilation error if you don't define <code>_UNICODE</code>, because you're not using the scheme everywhere, as required.</p></li>\n<li><p>The <code>%HOMEDRIVE%</code> in the string is a command interpreter syntax for expanding an environment variable. I'm not 100% sure, only 99.8% or thereabouts, but as far as I can recall <code>CreateProcess</code> doesn't have that functionality.</p></li>\n</ul>\n\n<p>The type problem (first bullet point) can be fixed by using a local array, e.g.</p>\n\n<pre><code>wchar_t command[] = L\"notepad.exe\";\n</code></pre>\n\n<p>Note that <code>CreateProcess</code> requires this to be writeable. So even with a compiler that accepts the original declaration you'd be off in <strong>Undefined Behavior</strong> land, with code potentially trying to modify a literal.</p>\n\n<p>The environment variable problem can be fixed by expanding that variable prior to constructing the command string. For this I would use <code>std::wstring</code>. It helps with concatenation and such.</p>\n\n<hr>\n\n<p>Then, the call</p>\n\n<pre><code>CreateProcess(NULL, command, NULL, NULL, NULL, CREATE_NO_WINDOW, NULL, NULL, NULL, NULL);\n</code></pre>\n\n<p>&hellip; provides <code>NULL</code> for the argument where the process and thread handles are returned, and for the argument specifying startup info. That's not going to work. Read the documentation.</p>\n\n<hr>\n\n<p>Tips:</p>\n\n<ol>\n<li><p>If you try out <code>CreateProcess</code> with some simpler task in mind, e.g. running Notepad, you can learn how to call it properly with less effort.</p></li>\n<li><p>You might find <code>ShellExecute</code> or <code>ShellExecuteEx</code> preferable to the basic <code>CreateProcess</code> (disclaimer: I haven't checked whether they support windowless execution, but it's likely they do).</p></li>\n</ol>\n"}], "owner": {"reputation": 25, "user_id": 4491037, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/ec48be3fbd161f0135ad8fc05fa1f798?s=128&d=identicon&r=PG&f=1", "display_name": "Marabunta", "link": "https://stackoverflow.com/users/4491037/marabunta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458154268, "creation_date": 1458150458, "last_edit_date": 1458154268, "question_id": 36043193, "link": "https://stackoverflow.com/questions/36043193/how-to-call-powershell-in-c-with-no-window", "title": "How to call powershell in c++ with no window", "body": "<p>I am using this to call powershell, but even if I use CREATE_NO_WINDOW, this code is a C&amp;P from my previous system() call. But it doesnt work.\nupdated code (still not working):</p>\n\n<pre><code>LPWSTR PSPath = env(_TEXT(\"SystemRoot\"));\nLPWSTR TEMP2 = env(_TEXT(\"TEMP\"));\nLPWSTR HOMEDRIVE = env(_TEXT(\"HOMEDRIVE\"));\nLPWSTR PSPathexe = (_TEXT(\"%s\\\\system32\\\\WindowsPowerShell\\\\v1.0\\\\powershell.exe -Executionpolicy bypass -File \\\"%s\\\\psscript.ps1\\\" -Filename psscript -Folderpath \\\"%s\\\\deployment\\\"\"),PSPath,TEMP2, HOMEDRIVE);\nSTARTUPINFO si;\nPROCESS_INFORMATION pi;\n\nZeroMemory(&amp;si, sizeof(si));\nsi.cb = sizeof(si);\nZeroMemory(&amp;pi, sizeof(pi));\n\nCreateProcess(NULL, PSPathexe, NULL, NULL, FALSE, CREATE_NO_WINDOW, NULL, NULL, &amp;si, &amp;pi);\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 6681, "user_id": 6024122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-uiRWa4coXLs/AAAAAAAAAAI/AAAAAAAAJUs/5BxfhSS1bUY/photo.jpg?sz=128", "display_name": "Patrick Trentin", "link": "https://stackoverflow.com/users/6024122/patrick-trentin"}, "edited": false, "score": 0, "creation_date": 1458152728, "post_id": 36043007, "comment_id": 59736664, "body": "1. how do you want to handle the situation in which the input is shorter than 40? 2. how do you represent data in memory? array of integers? array of chars? 3. did you take 40 for the sake of an example or that&#39;s your largest supported size?"}], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 657390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc72eb54267e47df12ead9675dfef86a?s=128&d=identicon&r=PG", "display_name": "yuyoyuppe", "link": "https://stackoverflow.com/users/657390/yuyoyuppe"}, "is_accepted": false, "score": 1, "last_activity_date": 1458151697, "creation_date": 1458151697, "answer_id": 36043635, "question_id": 36043007, "link": "https://stackoverflow.com/questions/36043007/taking-continuos-input-in-an-integer-array/36043635#36043635", "title": "Taking continuos input in an integer array", "body": "<p>No, you can't get an array of integers directly, since there's no overload for this type. You'll have to either use third-party library for parsing or define an additional overload for <code>operator&gt;&gt;</code> and array. Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n\ntemplate &lt;int  N&gt;\nstd::istream &amp; operator&gt;&gt;(std::istream &amp; is, std::array&lt;int, N&gt; a)\n{\n  for(int i = 0; i &lt; N; i++)\n    is &gt;&gt; a[i];\n  return is;\n}\n\nint main()\n{\n  std::array&lt;int, 10&gt; ar;\n  std::cin &gt;&gt; ar;\n  for(auto &amp; e : ar)\n    std::cout &lt;&lt; e &lt;&lt; ' ';\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6073060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3jDmv.jpg?s=128&g=1", "display_name": "Ali Lal Din", "link": "https://stackoverflow.com/users/6073060/ali-lal-din"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1458151864, "creation_date": 1458149892, "last_edit_date": 1458151864, "question_id": 36043007, "link": "https://stackoverflow.com/questions/36043007/taking-continuos-input-in-an-integer-array", "title": "Taking continuos input in an integer array", "body": "<p>I'm trying to make a class for adding huge integers.\nI have 2 arrays both of size 40 I wanted to know if there is any way I can take input with out doing the old school method:</p>\n\n<pre><code>for(int i=0;i&lt;40;i++)\n{\n   std::cin &gt;&gt; arr[i];\n}\n</code></pre>\n\n<p>In this way I have to take input 40 times. Is there a way to take input like we do in <code>cin.getline</code>?</p>\n"}, {"tags": ["c++", "class", "oop", "design-patterns"], "comments": [{"owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "edited": false, "score": 0, "creation_date": 1458149981, "post_id": 36042982, "comment_id": 59734965, "body": "It&#39;s hard to say without knowing more, but I would consider eliminating ReadFromAFile, and putting that functionality directly into first and second object. Just my two cents..."}], "answers": [{"tags": [], "owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "is_accepted": false, "score": 3, "last_activity_date": 1458151953, "last_edit_date": 1458151953, "creation_date": 1458150926, "answer_id": 36043361, "question_id": 36042982, "link": "https://stackoverflow.com/questions/36042982/which-design-pattern-is-appriopriate-for-this-situation/36043361#36043361", "title": "Which design pattern is appriopriate for this situation?", "body": "<p><code>MyExperiment</code> does not depend on a file. It depends on <code>FirstObject</code> and <code>SecondObject</code>; have its constructor reflect that:</p>\n\n<pre><code>class MyExperiment {\n  public:\n    MyExperiment(FirstObject fo, SecondObject so)\n     : fo(fo), so(so) { }\n  private:\n    FirstObject fo;\n    SecondObject so;\n};\n</code></pre>\n\n<p>Now you have removed any dependencies between <code>MyExperiment</code> and the manner in which the <code>First</code> and <code>Second</code> objects are read.</p>\n\n<p>Now you can create some factory functions. For example, to make an experiment from a file you could do something like this:</p>\n\n<pre><code>MyExperiment make_experiment(std::string file) {\n ReadFromAFile stuff(file);\n return MyExperiment(stuff.fist_object(), stuff.second_object());\n}\n</code></pre>\n\n<p>Finally, <code>ReadFromAFile</code> is a horrible name for a class. Probably you mean <code>FileReader</code> (possible a sub-class of a more general <code>DataSource</code> base class). In general, class names should be nouns and its methods should be verbs. You can, of course, name them whatever you want. But the <code>noun</code>-<code>verb</code> guideline does help you form a well-defined mental model of your system.</p>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 2014022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b5ab8fa77e562296a1b668005395762?s=128&d=identicon&r=PG", "display_name": "Peter K", "link": "https://stackoverflow.com/users/2014022/peter-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1458150989, "creation_date": 1458150989, "answer_id": 36043389, "question_id": 36042982, "link": "https://stackoverflow.com/questions/36042982/which-design-pattern-is-appriopriate-for-this-situation/36043389#36043389", "title": "Which design pattern is appriopriate for this situation?", "body": "<p>It looks to me that you want a <a href=\"https://en.wikipedia.org/wiki/Factory_(object-oriented_programming)\" rel=\"nofollow\">Factory</a>. To not repeat yourself and drop 'structs' you can let your Reader class just construct objects, like this</p>\n\n<pre><code>firstObject = readfromafile.NewFirstObject();\nsecondObject = readfromafile.NewSecondObject();\n</code></pre>\n\n<p>Then you can declare the Reader FirstObject's and SecondObject's friend and make their constructors private, but that's not actually required.</p>\n"}, {"tags": [], "owner": {"reputation": 2645, "user_id": 2965184, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b6077dcbbb1fdf63f93efad3e078ff54?s=128&d=identicon&r=PG&f=1", "display_name": "Ferit Buyukkececi", "link": "https://stackoverflow.com/users/2965184/ferit-buyukkececi"}, "is_accepted": false, "score": 0, "last_activity_date": 1458151362, "creation_date": 1458151362, "answer_id": 36043512, "question_id": 36042982, "link": "https://stackoverflow.com/questions/36042982/which-design-pattern-is-appriopriate-for-this-situation/36043512#36043512", "title": "Which design pattern is appriopriate for this situation?", "body": "<p>If you really don't want to define separate classes and (I'm assuming that) you have few strategies for initialization, then I'd prefer to make a constructor that takes the an enum to choose the strategy for initialization, such as:</p>\n\n<pre><code>typedef enum _Strategy \n{\n    STRATEGY_A = 1,\n    STRATEGY_B\n}\n\nclass MyExperiment\n{\n    FirstObject *firstObject;\n    SecondObject *secondObject;\n    public:\n        MyExperiment()\n        {\n            firstObject = new FirstObject(STRATEGY_A);\n            secondObject = new SecondObject(STRATEGY_B);\n    }\n}\n</code></pre>\n\n<p>and do the file reading and initialization according to the given strategy as @H. Gujit wrote in his comment.</p>\n"}], "owner": {"reputation": 1046, "user_id": 2738748, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/f1e01dda2f60d48b1ac3a6e6125723fe?s=128&d=identicon&r=PG&f=1", "display_name": "user2738748", "link": "https://stackoverflow.com/users/2738748/user2738748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1458151953, "creation_date": 1458149774, "question_id": 36042982, "link": "https://stackoverflow.com/questions/36042982/which-design-pattern-is-appriopriate-for-this-situation", "title": "Which design pattern is appriopriate for this situation?", "body": "<p>I'm writing my program in C++11. I have a main class called <em>MyExperiment</em>. In this class there is another class, <em>ReadFromAFile</em>, which reads out some information about the set-up from a file. Then I want to use the data to initialise some other object which are members of the <em>MyExperiment</em> class. This is how it should look like:</p>\n\n<pre><code>class MyExperiment\n{\n    FirstObject *firstObject;\n    SecondObject *secondObject;\npublic:\n    MyExperiment()\n    {\n        ReadFromAFile readfromafile;\n        readfromafile.read();\n        firstObject = new FirstObject(/*some data from the readfromafile object */);\n        secondObject = new SecondObject(/*some data from the readfromafile object */);\n    }\n}\n</code></pre>\n\n<p>Each <em>object</em> (<em>firstObject</em> and <em>secondObject</em>) class consists of some information that can (and should) be read out from a file and of some other variables and functions. I really <strong>don't</strong> want to have two classes for each object type: one for the data that can be read from the file and the other for the rest.</p>\n\n<p>So, I want to read some infromation from a file using the ReadFromAFile class and then somehow pass the information to the construtors of my <em>objects</em>. My question is: what is the right way to do it?</p>\n\n<p>Right now I have some structures which describe the data that I read from a file in the <em>ReadFromAFile</em> class. Each structure refers to one object. I have also getters functions which are invoked in the constructor of the <em>MyExperiment</em> class:</p>\n\n<pre><code>class MyExperiment\n{\n    FirstObject *firstObject;\n    SecondObject *secondObject;\npublic:\n    MyExperiment()\n    {\n        ReadFromAFile readfromafile;\n        readfromafile.read();\n        firstObject = new FirstObject(readfromafile.getFirstStruct());\n        secondObject = new SecondObject(readfromafile.getSecondStruct());\n    }\n}\n</code></pre>\n\n<p>I don't think this solution is elegant and smart. I have a structure which depicts my <em>firstObject</em> and then I use it the constructor of this object.</p>\n\n<p>I have no idea how to do it in a better way, so I'll be grateful for any remarks. </p>\n\n<p>I don't want to read the file in my <em>myExperiment</em> class, because it's already complicated, so I need some enacpsulation.</p>\n\n<p>Is there a workaround for this problem?</p>\n"}, {"tags": ["c++", "algorithm", "data-structures"], "answers": [{"tags": [], "owner": {"reputation": 3159, "user_id": 4566726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703bf229fd5caa423e3681efd566dcb7?s=128&d=identicon&r=PG", "display_name": "H. Guijt", "link": "https://stackoverflow.com/users/4566726/h-guijt"}, "is_accepted": false, "score": 2, "last_activity_date": 1458150726, "creation_date": 1458150726, "answer_id": 36043288, "question_id": 36042974, "link": "https://stackoverflow.com/questions/36042974/construct-a-circle-from-set-of-points-in-2d-space-80-of-the-given-points-lie/36043288#36043288", "title": "Construct a circle from set of points in 2D space. 80% of the given points, lie on the circles&#39;s circumference. The rest 20% are garbage values.", "body": "<p>I've dealt with a similar problem, detecting circles in 3D geometry. My solution, which works reasonably well, samples three points from the available set of points, using them to calculate candidate circles. Once enough of the candidates agree, the result is determined to be a circle.</p>\n\n<p>The calculation itself takes place in a 2D plane, so points need to be projected beforehand. The actual function is this:</p>\n\n<pre><code>bool GetCircleCenter (const cPoint2 &amp;P1, const cPoint2 &amp;P2, const cPoint2 &amp;P3, cPoint2 &amp;Center)\n{   const float X1 = P2.X - P1.X;\n    const float X2 = P3.X - P1.X;\n    const float Y1 = P2.Y - P1.Y;\n    const float Y2 = P3.Y - P1.Y;\n\n    const float Area = (X1 * Y2 - Y1 * X2);\n    if (ABS (Area) &lt; 0.0000001)\n        return false;\n\n    const float L1 = (P2 - P1).Length ();\n    const float L2 = (P3 - P1).Length ();\n\n    Center.X = P1.X + (Y2 * L1 * L1 - Y1 * L2 * L2) / (2 * Area);\n    Center.Y = P1.Y + (X1 * L2 * L2 - X2 * L1 * L1) / (2 * Area);\n    return true;\n}\n</code></pre>\n\n<p>Source code is from page 800 of this book: <a href=\"https://rads.stackoverflow.com/amzn/click/com/1558605940\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">http://www.amazon.com/Geometric-Computer-Graphics-Morgan-Kaufmann/dp/1558605940</a></p>\n"}, {"tags": [], "owner": {"reputation": 1328, "user_id": 2079934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cf1f4bf373ae0a70c59cef1239401117?s=128&d=identicon&r=PG&f=1", "display_name": "SpamBot", "link": "https://stackoverflow.com/users/2079934/spambot"}, "is_accepted": false, "score": 2, "last_activity_date": 1458150787, "creation_date": 1458150787, "answer_id": 36043313, "question_id": 36042974, "link": "https://stackoverflow.com/questions/36042974/construct-a-circle-from-set-of-points-in-2d-space-80-of-the-given-points-lie/36043313#36043313", "title": "Construct a circle from set of points in 2D space. 80% of the given points, lie on the circles&#39;s circumference. The rest 20% are garbage values.", "body": "<p>The simplest solution should be the <a href=\"https://en.wikipedia.org/wiki/Circle_Hough_Transform\" rel=\"nofollow\">Circle Hough Transform</a>. You accumulate possible circle placements in a large 3D array of all circle parameters. Since most points are on the circumference, the maximum should be very clear.</p>\n\n<p>If you had much lower numbers of inliers, you could still solve this problem with <a href=\"https://en.wikipedia.org/wiki/RANSAC\" rel=\"nofollow\">Random sample consensus</a>. Since three points define a circle, you are very likely to find three inliers after a few trials.</p>\n"}], "owner": {"reputation": 159, "user_id": 4177774, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90fdd647c2d3a2a7d67dc67f3719af39?s=128&d=identicon&r=PG&f=1", "display_name": "purudpd", "link": "https://stackoverflow.com/users/4177774/purudpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458150787, "creation_date": 1458149753, "question_id": 36042974, "link": "https://stackoverflow.com/questions/36042974/construct-a-circle-from-set-of-points-in-2d-space-80-of-the-given-points-lie", "title": "Construct a circle from set of points in 2D space. 80% of the given points, lie on the circles&#39;s circumference. The rest 20% are garbage values.", "body": "<p><strong>How can I identify the circle ?</strong>\nI have a set of points(70) of which 80% percent always fall on the circumference of the circle and the rest 20% are garbage values.</p>\n\n<p><strong>What else do I have ?</strong>\nA 320*240 matrix in which, only these points have value \"1\", while the others have value \"0\".</p>\n\n<p>Is there any way I can go about solving this. If not solve, at least reduce the problem somehow ?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1458149776, "post_id": 36042903, "comment_id": 59734820, "body": "related/dupe: <a href=\"http://stackoverflow.com/questions/625799/resolve-circular-dependencies-in-c\" title=\"resolve circular dependencies in c\">stackoverflow.com/questions/625799/&hellip;</a>"}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1458149842, "post_id": 36042903, "comment_id": 59734859, "body": "1. sounds like your class design could use more work, 2. forward declaration."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 2, "creation_date": 1458149877, "post_id": 36042903, "comment_id": 59734887, "body": "3. show actual code instead of describing how the code looks like."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1458150059, "post_id": 36042903, "comment_id": 59735031, "body": "If <code>BaseClass</code> contains one <code>ElementClass</code> field and if <code>ElementClass</code> contains one  <code>BaseClass</code> field, the program is ill-formed and will not compile. C++ will only accept a fully defined class for a member."}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "reply_to_user": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1458152407, "post_id": 36042903, "comment_id": 59736461, "body": "@SergeBallesta I meant, that fields are pointers to objects."}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1458152476, "post_id": 36042903, "comment_id": 59736499, "body": "@NathanOliver No, I have another problem. I have problem with inherit, not with cycle pointer fields."}, {"owner": {"reputation": 1047, "user_id": 2524973, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/beaf52d3d28d6e26653336c359a3f5e1?s=128&d=identicon&r=PG", "display_name": "user2524973", "link": "https://stackoverflow.com/users/2524973/user2524973"}, "edited": false, "score": 0, "creation_date": 1458153046, "post_id": 36042903, "comment_id": 59736860, "body": "can you show us your code?"}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "edited": false, "score": 0, "creation_date": 1458153498, "post_id": 36042903, "comment_id": 59737144, "body": "Hm. It&#39;s pretty big, so I&#39;ll try to make small alternative. If I&#39;ll can&#39;t I will post all my code."}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "reply_to_user": {"reputation": 1047, "user_id": 2524973, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/beaf52d3d28d6e26653336c359a3f5e1?s=128&d=identicon&r=PG", "display_name": "user2524973", "link": "https://stackoverflow.com/users/2524973/user2524973"}, "edited": false, "score": 0, "creation_date": 1458154058, "post_id": 36042903, "comment_id": 59737454, "body": "@lispHK01 Ok. Edited question with sample project, introducing this &quot;problem&quot;"}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1458154143, "post_id": 36042903, "comment_id": 59737508, "body": "@bolov Added example code with this &quot;problem&quot; that is not compiling."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1458154306, "post_id": 36042903, "comment_id": 59737595, "body": "@Megaxela No you didn&#39;t, your BaseClass.h and ChildClass.h are identical"}, {"owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1458154470, "post_id": 36042903, "comment_id": 59737700, "body": "@MooingDuck Oh... I am idiot. Fixed it."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1458158123, "post_id": 36042903, "comment_id": 59739921, "body": "Your problem is probably, that you are indirectly including <code>ChildClass.h</code> in <code>BaseClass.h</code>, resulting in you trying to define <code>ChildClass</code> before <code>BaseClass</code>. Just remove the extra <code>#include</code>s and only use forward declarations. Only include you need here is <code>BaseClass.h</code> in <code>ChildClass.h</code> (since that&#39;s not a pointer)."}], "answers": [{"comments": [{"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1458150167, "post_id": 36043071, "comment_id": 59735097, "body": "I tried to answer by quoting my own answer inside itself. You beat me to the punch. I&#39;m stil copy-pasting..."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1458150172, "last_edit_date": 1592644375, "creation_date": 1458150078, "answer_id": 36043071, "question_id": 36042903, "link": "https://stackoverflow.com/questions/36042903/including-child-class-into-basic-c/36043071#36043071", "title": "Including child class into basic C++", "body": "<blockquote>\n<p>BaseClass, that contains ElementClass as field</p>\n<p>ElementClass, that contains BaseClass as field</p>\n</blockquote>\n<p>So, a <code>BaseClass</code> instance contains an <code>ElementClass</code> instance which contains a <code>BaseClass</code> instance which contains an <code>ElementClass</code> instance which contains... instances all the way down. One instance is going to use all of your memory and then some. That cannot work.</p>\n<p>It also cannot work because when defining the first class, you need to have a complete definition of the second class, which needs a complete definition of the first class, which wasn't defined yet.</p>\n<p>You must use indirection. At least one of the classes must not contain the other instance inside, but instead a pointer or a reference to an instance.</p>\n"}], "owner": {"reputation": 97, "user_id": 3199845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/49ac8881832f2106f3a843d3523cf9ee?s=128&d=identicon&r=PG&f=1", "display_name": "Megaxela", "link": "https://stackoverflow.com/users/3199845/megaxela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458158783, "creation_date": 1458149562, "last_edit_date": 1458154430, "question_id": 36042903, "link": "https://stackoverflow.com/questions/36042903/including-child-class-into-basic-c", "title": "Including child class into basic C++", "body": "<p>I have three classes:<br>\n<code>BaseClass</code>, that contains <code>ElementClass</code> as field<br>\n<code>ElementClass</code>, that contains <code>BaseClass</code> as field and <code>ChildClass</code> as return type (pointer) <br>\n<code>ChildClass</code>, that's inherits from <code>BaseClass</code>. <br>\nWhen I'm trying to compile this, I am getting <br>\n<code>expected class-name before '{' token</code><br>\nfor <code>ChildClass</code>, that was included in <code>ElementClass</code>, that was included in <code>BaseClass</code>. <br>\nI understand, why is this happens. Because I'm trying to inherit child class from nonexistent, for compiler, class <code>BaseClass</code>.<br>\nI can't understand hot to fix this. Thank you.<br><br>\nHere is code example with this problem<br>\n<strong>BaseClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_BASECLASS_H\n#define INHERITTEST_BASECLASS_H\n\n#include \"ElementClass.h\"\n\nclass ElementClass;\n\nclass BaseClass\n{\n\nprivate:\n    ElementClass *m_someField;\n};\n\n\n#endif\n</code></pre>\n\n<p><br>\n<strong>ElementClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_ELEMENTCLASS_H\n#define INHERITTEST_ELEMENTCLASS_H\n\n#include \"ChildClass.h\"\n\nclass ChildClass;\n\nclass ElementClass\n{\nprivate:\n    ChildClass *m_class;\n};\n\n\n#endif\n</code></pre>\n\n<p><br>\n<strong>ChildClass.h</strong></p>\n\n<pre><code>#ifndef INHERITTEST_CHILDCLASS_H\n#define INHERITTEST_CHILDCLASS_H\n\n#include \"BaseClass.h\"\n\nclass ChildClass : public BaseClass\n{\n\n};\n\n\n#endif\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1458152428, "post_id": 36042683, "comment_id": 59736478, "body": "I suspect the closest thing you are going to find in Qt is the QTextEdit (or if you prefer efficiency over rich-text support, QPlainTextEdit) class.  The rest you would need to implement yourself, on top of that."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1458152644, "post_id": 36042683, "comment_id": 59736606, "body": "I don&#39;t think such a thing exists. You can start working on top of QPlainTextEdit, QTextEdit/QTextBrowser, a HTML widget (QWebView), or maybe even a QListView. You could also develop the terminal from scratch, basically using QScrollView and a custom QWidget&#39;s QPaintEvent, which is the way to go if you want the terminal to behave exactly as you want. As is, the question is a bit too broad for Stack Overflow, though."}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 4228024, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/100001411862495/picture?type=large", "display_name": "Sayantan Roy", "link": "https://stackoverflow.com/users/4228024/sayantan-roy"}, "is_accepted": false, "score": 2, "last_activity_date": 1458205297, "creation_date": 1458205297, "answer_id": 36055802, "question_id": 36042683, "link": "https://stackoverflow.com/questions/36042683/terminal-emulator-as-qt-widget/36055802#36055802", "title": "Terminal emulator as Qt Widget", "body": "<p>Check QTerminal .Maybe thats what you are looking for. Else you can emulate a console using QTextEdit.</p>\n"}, {"tags": [], "owner": {"reputation": 57498, "user_id": 874024, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/ZZtwe.jpg?s=128&g=1", "display_name": "CapelliC", "link": "https://stackoverflow.com/users/874024/capellic"}, "is_accepted": false, "score": 0, "last_activity_date": 1458206347, "creation_date": 1458206347, "answer_id": 36056189, "question_id": 36042683, "link": "https://stackoverflow.com/questions/36042683/terminal-emulator-as-qt-widget/36056189#36056189", "title": "Terminal emulator as Qt Widget", "body": "<p>I developed a <a href=\"https://github.com/SWI-Prolog/packages-swipl-win\" rel=\"nofollow\">console</a> for <a href=\"http://www.swi-prolog.org/\" rel=\"nofollow\">SWI-Prolog</a>, one of the leading Prolog implementations worldwide.</p>\n\n<p>Most of the code is required by the complex multithreading model implemented, so would be useless in less specialized environments. But it's actively developed (compatibly with high stability requirements) even if it appears to stale to 2013. I carry on with implementations in my own <a href=\"https://github.com/CapelliC/loqt\" rel=\"nofollow\">loqt</a>. No so stable, of course...</p>\n"}, {"tags": [], "owner": {"reputation": 1093, "user_id": 3642914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/034a47abb43659aba14fef3ff0eff17c?s=128&d=identicon&r=PG", "display_name": "Leonora Tindall", "link": "https://stackoverflow.com/users/3642914/leonora-tindall"}, "is_accepted": false, "score": 2, "last_activity_date": 1458225290, "creation_date": 1458225290, "answer_id": 36063635, "question_id": 36042683, "link": "https://stackoverflow.com/questions/36042683/terminal-emulator-as-qt-widget/36063635#36063635", "title": "Terminal emulator as Qt Widget", "body": "<p>Lxqt has created such a widget for QTerminal, called qtermwidget. It works well and can be found here: <a href=\"https://github.com/lxde/qtermwidget\" rel=\"nofollow\">https://github.com/lxde/qtermwidget</a></p>\n"}], "owner": {"reputation": 1093, "user_id": 3642914, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/034a47abb43659aba14fef3ff0eff17c?s=128&d=identicon&r=PG", "display_name": "Leonora Tindall", "link": "https://stackoverflow.com/users/3642914/leonora-tindall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1907, "favorite_count": 0, "closed_date": 1458713217, "answer_count": 3, "score": 0, "last_activity_date": 1458225290, "creation_date": 1458148926, "question_id": 36042683, "link": "https://stackoverflow.com/questions/36042683/terminal-emulator-as-qt-widget", "closed_reason": "Not suitable for this site", "title": "Terminal emulator as Qt Widget", "body": "<p>I would like to implement a GUI with a terminal emulator (NOT a system shell, but I would like to have command history, etc). I have only found QConsole, which is not actively developed anymore. Does such a widget exist? If not, where should I begin in looking at how to create such a widget?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1458149196, "post_id": 36042674, "comment_id": 59734423, "body": "dupe/related: <a href=\"http://stackoverflow.com/questions/357600/is-const-cast-safe\">stackoverflow.com/questions/357600/is-const-cast-safe</a>"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1458149374, "post_id": 36042674, "comment_id": 59734542, "body": "the last part of <a href=\"http://stackoverflow.com/a/34842262/2805305\">this answer</a> is helpful to understand const casting and what you can and cannot do."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1458149245, "creation_date": 1458149245, "answer_id": 36042802, "question_id": 36042674, "link": "https://stackoverflow.com/questions/36042674/undefined-behaviour-of-const-cast-when-we-return-mutable-object-from-class/36042802#36042802", "title": "Undefined behaviour of const_cast when we return mutable object from class", "body": "<p>Modifying a variable that is non-const is well defined. <code>const_cast</code> exists precisely to allow modification of a non-const object using a const reference (works similarly for volatile despite the name). There is no undefined behaviour in the example code. </p>\n"}, {"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 1, "last_activity_date": 1458149386, "creation_date": 1458149386, "answer_id": 36042845, "question_id": 36042674, "link": "https://stackoverflow.com/questions/36042674/undefined-behaviour-of-const-cast-when-we-return-mutable-object-from-class/36042845#36042845", "title": "Undefined behaviour of const_cast when we return mutable object from class", "body": "<p>It is safe to remove const from a reference to a variable that is non-const. In this case, <code>a</code> is non-const, <code>a.a</code> is non-const, so the <code>const_cast</code> is perfectly legal.</p>\n\n<p>The <code>const_cast</code> is also a bad idea because it may result in class the invariant being violated behind its back. Modifications to the vector should be done through an appropriate public interface to the class.</p>\n"}], "owner": {"reputation": 39, "user_id": 5356514, "user_type": "registered", "profile_image": "https://graph.facebook.com/918214438253735/picture?type=large", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432\u0441\u043a\u0438\u0439", "link": "https://stackoverflow.com/users/5356514/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2%d1%81%d0%ba%d0%b8%d0%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1458149386, "creation_date": 1458148901, "question_id": 36042674, "link": "https://stackoverflow.com/questions/36042674/undefined-behaviour-of-const-cast-when-we-return-mutable-object-from-class", "title": "Undefined behaviour of const_cast when we return mutable object from class", "body": "<p>I am not sure about const_cast in this case. Do we have undefined behaviour or not?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nstruct A {\n    mutable vector&lt;int&gt; a;\n    A() : a(1,2) {}\n    const vector&lt;int&gt;&amp; get() const {\n        return a;\n    }\n};\n\nint main()\n{\n    A a;\n    vector&lt;int&gt; &amp;b = const_cast&lt;vector&lt;int&gt;&amp;&gt;( a.get() );\n    b[0] = 3;\n    cout &lt;&lt; a.a[0] &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "pointers"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1458149116, "post_id": 36042658, "comment_id": 59734365, "body": "Don&#39;t tag-spam. This is not C. And what you do with the <code>int</code> is undefined behaviour."}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1458149152, "post_id": 36042658, "comment_id": 59734392, "body": "<code>m.data</code>, or <code>m.ptr&lt;T&gt;(0)</code> to get the pointer to the matrix data. It probably doesn&#39;t make sense to send to other process, though."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1458149366, "post_id": 36042658, "comment_id": 59734536, "body": "You can use <a href=\"https://en.wikipedia.org/wiki/Shared_memory#Support_on_Unix-like_systems\" rel=\"nofollow noreferrer\">shared memory</a>, but the shared memory API is OS dependent."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1458149054, "creation_date": 1458149054, "answer_id": 36042731, "question_id": 36042658, "link": "https://stackoverflow.com/questions/36042658/passing-an-image-pointer-to-another-program/36042731#36042731", "title": "Passing an image pointer to another program", "body": "<blockquote>\n  <p>can we create pointers to these images and pass it other programs ?</p>\n</blockquote>\n\n<p>No you can't do that. Pointers are bound to a particular processes virtual memory space and these are meaningless when used in a different process. </p>\n"}, {"tags": [], "owner": {"reputation": 415, "user_id": 4889185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba4de1c73670c85dc8e301011668f009?s=128&d=identicon&r=PG&f=1", "display_name": "Always Confused", "link": "https://stackoverflow.com/users/4889185/always-confused"}, "is_accepted": false, "score": 0, "last_activity_date": 1458316532, "creation_date": 1458316532, "answer_id": 36088879, "question_id": 36042658, "link": "https://stackoverflow.com/questions/36042658/passing-an-image-pointer-to-another-program/36088879#36088879", "title": "Passing an image pointer to another program", "body": "<p>You need to use shared memory to do this.  For a POSIX-y system, using <code>shm_open</code> and <code>mmap</code>, you can create a region of memory that both processes can access.  Note that the address of the region will typically not be the same in both processes however.  Not a windows programmer, but I believe <code>CreateFileMapping</code> and <code>MapViewOfFile</code> are analogous.  The code example below is an outline of what you might do on linux:</p>\n\n<p>In both process A and B:</p>\n\n<pre><code>#include &lt;sys/mman.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n\n//ensure success by checking fd &gt;= 0!\nint fd = shm_open(\"unique_name\", O_CREAT | O_RDWR | O_CREAT, S_IRUSR | S_IWUSR);\n\n//choose length to be some sufficiently large region of memory to\n//hold the data structures you want to share.  Both process A and B\n//should agree on this.\n//ensure success by checking that ptr != 0\nvoid* ptr = mmap(0, length, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0);\n\n//Create your image objects using the memory region you have just created\n//using one of the constructors that takes a user-provided data pointer\ncv::Mat(rows, cols, type, ptr, step);\n</code></pre>\n\n<p>At this point, anything you do to the object in one process will be reflected in the other.  You need to separately synchronize the two processes (perhaps using a semaphore, message queue or pipe) to ensure consistency of the image content between the two processes.  You can simplify things a bit if process A will always write and process B will always only read the image content.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"reputation": 21, "user_id": 5703599, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KRgtw5Kk4E4/AAAAAAAAAAI/AAAAAAAACDs/nFqITCTN2Bw/photo.jpg?sz=128", "display_name": "maheswari", "link": "https://stackoverflow.com/users/5703599/maheswari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 652, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458316532, "creation_date": 1458148835, "last_edit_date": 1458149094, "question_id": 36042658, "link": "https://stackoverflow.com/questions/36042658/passing-an-image-pointer-to-another-program", "title": "Passing an image pointer to another program", "body": "<p>Is there a way we can create a pointer to an image memory location , pass it to another program and access it from there. We have image container datatypes like Mat using which we read an image </p>\n\n<pre><code>cv::Mat m ; \n\nm = imread(\"a.jpg\") ; \n</code></pre>\n\n<p>can we create pointers to these images and pass it other programs ? </p>\n\n<p>For example i can pass the address of an integer </p>\n\n<pre><code>int x = 10 as '&amp;x' to another program by using named pipes for IPC \n\nwrite(pipe , &amp;x , sizeof(int)); \n</code></pre>\n\n<p>on receivers side </p>\n\n<pre><code>read(pipe , &amp;y , sizeof(int)); \n</code></pre>\n\n<p>when print y it display 10</p>\n\n<p>will do it for an integer , how can we do it for images. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1458148923, "post_id": 36042637, "comment_id": 59734225, "body": "<code>clock</code> is very primitive. Use <a href=\"http://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\"><code>std::chrono</code></a> instead."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1458151526, "post_id": 36042637, "comment_id": 59735927, "body": "There&#39;s no way the provided code gives this output."}], "answers": [{"comments": [{"owner": {"reputation": 4863, "user_id": 338913, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/be8a9bbc0062d38e0315f63509756bd9?s=128&d=identicon&r=PG", "display_name": "yasouser", "link": "https://stackoverflow.com/users/338913/yasouser"}, "edited": false, "score": 1, "creation_date": 1458149101, "post_id": 36042699, "comment_id": 59734355, "body": "Another example is here: <a href=\"http://www.cplusplus.com/reference/chrono/high_resolution_clock/now/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/chrono/high_resolution_clock/now</a>"}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 4863, "user_id": 338913, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/be8a9bbc0062d38e0315f63509756bd9?s=128&d=identicon&r=PG", "display_name": "yasouser", "link": "https://stackoverflow.com/users/338913/yasouser"}, "edited": false, "score": 0, "creation_date": 1458149130, "post_id": 36042699, "comment_id": 59734372, "body": "@yasouser, yeah, I was just going to include this link as well."}, {"owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458149633, "post_id": 36042699, "comment_id": 59734711, "body": "I&#39;m using VS2010 and can&#39;t find the chrono header. Does this make sense?"}, {"owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458149739, "post_id": 36042699, "comment_id": 59734790, "body": "Just googled it and yep, VS2010 doesn&#39;t have the chrono header, unfortunately my college forces me to use VS 2010."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458149812, "post_id": 36042699, "comment_id": 59734839, "body": "@Gilzy, does it have C++11 support?"}, {"owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458149904, "post_id": 36042699, "comment_id": 59734905, "body": "Partly, It doesn&#39;t recognize the chrono header though."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458150058, "post_id": 36042699, "comment_id": 59735030, "body": "@Gilzy, that&#39;s bad. Maybe your college wants you to learn some Windows API? All in all, you won&#39;t achieve such precision with neither <code>clock</code>, nor <code>time</code>."}, {"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "reply_to_user": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "edited": false, "score": 0, "creation_date": 1458150492, "post_id": 36042699, "comment_id": 59735293, "body": "@Gilzy, I think there is a solution. Please take a look at my updated answer."}], "tags": [], "owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "is_accepted": false, "score": 14, "last_activity_date": 1495781884, "last_edit_date": 1495781884, "creation_date": 1458148973, "answer_id": 36042699, "question_id": 36042637, "link": "https://stackoverflow.com/questions/36042637/how-to-calculate-execution-time-in-milliseconds/36042699#36042699", "title": "How to calculate execution time in milliseconds", "body": "<p>Use <a href=\"http://www.cplusplus.com/reference/chrono/high_resolution_clock/\" rel=\"noreferrer\"><code>std::chrono::high_resolution_clock</code></a> from the <a href=\"http://www.cplusplus.com/reference/chrono/\" rel=\"noreferrer\"><code>chrono</code></a> header.</p>\n\n<pre><code>auto started = std::chrono::high_resolution_clock::now();\nDoWork();\nauto done = std::chrono::high_resolution_clock::now();\n\nstd::cout &lt;&lt; std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(done-started).count();\n</code></pre>\n\n<p>You can also cast to <code>std::chrono::seconds</code> or <code>std::chrono::nanoseconds</code> if you wish. </p>\n\n<p>Here's a <a href=\"http://www.eriksmistad.no/measuring-runtime-in-milliseconds-using-the-c-11-chrono-library/\" rel=\"noreferrer\">tutorial</a> on measuring execution time with <code>chrono</code>. </p>\n\n<hr>\n\n<p><strong>Edit:</strong> if your compiler doesn't support <code>chrono</code>, then <strike>get a newer one</strike> take a look at <code>src/ptimer.c</code> in the source code of <a href=\"http://ftp.gnu.org/gnu/wget/wget-1.17.tar.gz\" rel=\"noreferrer\"><code>wget</code></a>. It works on Windows and Linux and uses native API. </p>\n"}], "owner": {"reputation": 83, "user_id": 6073002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca59988707854e31ba7af05a34d706dd?s=128&d=identicon&r=PG&f=1", "display_name": "Gilzy", "link": "https://stackoverflow.com/users/6073002/gilzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20706, "favorite_count": 1, "closed_date": 1458156619, "answer_count": 1, "score": 6, "last_activity_date": 1495781884, "creation_date": 1458148768, "last_edit_date": 1458151498, "question_id": 36042637, "link": "https://stackoverflow.com/questions/36042637/how-to-calculate-execution-time-in-milliseconds", "closed_reason": "Duplicate", "title": "How to calculate execution time in milliseconds", "body": "<p>I'm pretty new to C++, I need to print the execution time of my program in milliseconds with 4 digits (X.XXX) - I tried to use </p>\n\n<pre><code>double start_s=clock();\n// my program here\ndouble stop_s=clock();\ncout &lt;&lt; \"time: \" &lt;&lt; (stop_s) &lt;&lt; endl;\n</code></pre>\n\n<p>I got 0.\nWhat am I doing wrong?\nBtw I am using (and have to use, college project) VS2010, so chrono is not an option.</p>\n"}, {"tags": ["c++", "cocos2d-x", "accelerometer", "cocos2d-android"], "answers": [{"comments": [{"owner": {"reputation": 2251, "user_id": 1706188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a7bfc74d6cbefae63b49d0b51e32ca?s=128&d=identicon&r=PG", "display_name": "user18853", "link": "https://stackoverflow.com/users/1706188/user18853"}, "edited": false, "score": 0, "creation_date": 1494048146, "post_id": 36069306, "comment_id": 74672938, "body": "Remember you wont get accelerator events in simulator, you need a device."}], "tags": [], "owner": {"reputation": 452, "user_id": 4342776, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/945daf9d14631631575f80f72d6fbc9c?s=128&d=identicon&r=PG&f=1", "display_name": "v_johan", "link": "https://stackoverflow.com/users/4342776/v-johan"}, "is_accepted": true, "score": 3, "last_activity_date": 1458240776, "creation_date": 1458240776, "answer_id": 36069306, "question_id": 36042583, "link": "https://stackoverflow.com/questions/36042583/how-to-use-accelerometer-in-cocos2dx/36069306#36069306", "title": "How to use Accelerometer in cocos2dx", "body": "<p>The guys at the cocos forums linked me to this:\n<a href=\"http://cocos2d-x.org/docs/programmers-guide/8/index.html#creating-an-accelerometer-event\" rel=\"nofollow\">Cocos docs</a></p>\n\n<p>As you can see the correct way to go is to use the EventListener approach as described earlier. However you need to call</p>\n\n<pre><code>Device::setAccelerometerEnabled(true);\n</code></pre>\n\n<p>Calling </p>\n\n<pre><code>setAccelerometerEnabled(true);\n</code></pre>\n\n<p>From the scene's init doesn't work, you need to call the static method on 'Device'.</p>\n\n<p>So here's how you do it.</p>\n\n<pre><code>Device::setAccelerometerEnabled(true);\nauto accListener = EventListenerAcceleration::create(CC_CALLBACK_2(MainScene::accelerated, this));\ngetEventDispatcher()-&gt;addEventListenerWithSceneGraphPriority(accListener, this);\n</code></pre>\n\n<p>Where accelerated is takes these parameters:</p>\n\n<pre><code>void accelerated(Acceleration *acceleration, Event *event);\n</code></pre>\n\n<p>Of course this function can be called anything as the EventListener takes a function pointer.</p>\n"}, {"tags": [], "owner": {"reputation": 2251, "user_id": 1706188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a7bfc74d6cbefae63b49d0b51e32ca?s=128&d=identicon&r=PG", "display_name": "user18853", "link": "https://stackoverflow.com/users/1706188/user18853"}, "is_accepted": false, "score": 1, "last_activity_date": 1494048189, "creation_date": 1494048189, "answer_id": 43817036, "question_id": 36042583, "link": "https://stackoverflow.com/questions/36042583/how-to-use-accelerometer-in-cocos2dx/43817036#43817036", "title": "How to use Accelerometer in cocos2dx", "body": "<p>Tritzium answered it right. Just wanted point out:\nYou wont get accelerator events in simulator, you need a device.</p>\n"}], "owner": {"reputation": 452, "user_id": 4342776, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/945daf9d14631631575f80f72d6fbc9c?s=128&d=identicon&r=PG&f=1", "display_name": "v_johan", "link": "https://stackoverflow.com/users/4342776/v-johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 1, "accepted_answer_id": 36069306, "answer_count": 2, "score": 3, "last_activity_date": 1494048189, "creation_date": 1458148617, "last_edit_date": 1458162170, "question_id": 36042583, "link": "https://stackoverflow.com/questions/36042583/how-to-use-accelerometer-in-cocos2dx", "title": "How to use Accelerometer in cocos2dx", "body": "<p>I've been trying to get the acceleromter to work in cocos2d-x c++.\nI tried to add this function to my scene which a lot of my Google search results said I should:</p>\n\n<pre><code>virtual void didAccelerate(Acceleration *acceleration);\n</code></pre>\n\n<p>That does however give me an error saying I'm overriding a final function.\nThen I found how I could use the EventDispatcher thing for it.</p>\n\n<pre><code>    auto accListener = EventListenerAcceleration::create(CC_CALLBACK_2(MainScene::accelerated, this));\ngetEventDispatcher()-&gt;addEventListenerWithSceneGraphPriority(accListener, this);\n</code></pre>\n\n<p>In both of these I had called this function earlier in my scene's init function:</p>\n\n<pre><code>    setAccelerometerEnabled(true);\n</code></pre>\n\n<p>I'm all out of ideas and I need help. On the second \"approach\" it compiled, but my accelerated function was never called.\n<br><br>\nThank you in advance!\n<br><br>\nI'm using Android so maybe I need to edit something in the AndroidManifest?</p>\n"}, {"tags": ["c++", "asynchronous", "timer", "com", "vb6"], "comments": [{"owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "edited": false, "score": 0, "creation_date": 1458148395, "post_id": 36042463, "comment_id": 59733841, "body": "Native <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644901(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Timers</a>?"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "edited": false, "score": 0, "creation_date": 1458148479, "post_id": 36042463, "comment_id": 59733915, "body": "The question is not about the timer, just for firing events (a COM mechanism) asynchronously."}], "answers": [{"comments": [{"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "edited": false, "score": 0, "creation_date": 1458150483, "post_id": 36042727, "comment_id": 59735285, "body": "But how does <code>Timer</code> do that? I can do <code>Timer1.Interval = 1000</code>, <code>Timer1.Enabled = True</code> and one second later the <code>Timer1_Timer()</code> event gets called in the main thread. Some code must have posted the event to the main thread&#39;s event queue, but this code cannot be in the main thread because the main thread is simply in a <code>DoEvents</code> loop (processing its event queue). So how does does this entry get posted in the event queue?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1458151383, "post_id": 36042727, "comment_id": 59735841, "body": "It uses a message, WM_TIMER.  Just as you&#39;ll use a message when you marshal the interface pointer and raise the event, the COM plumbing takes care of that."}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "edited": false, "score": 0, "creation_date": 1458446076, "post_id": 36042727, "comment_id": 59861943, "body": "This is not only laborious but working out the exact steps is quite hardcore. Luckily, and only with the input from both of you, I was able to find an article which deals with async COM events and have added the relevant link to complete the answer."}], "tags": [], "owner": {"reputation": 272630, "user_id": 105929, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/414213a8181616151fe73334532746ab?s=128&d=identicon&r=PG", "display_name": "Remus Rusanu", "link": "https://stackoverflow.com/users/105929/remus-rusanu"}, "is_accepted": true, "score": 2, "last_activity_date": 1458446146, "last_edit_date": 1458446146, "creation_date": 1458149045, "answer_id": 36042727, "question_id": 36042463, "link": "https://stackoverflow.com/questions/36042463/how-can-i-write-a-c-com-object-with-asynchronous-event-firing-like-vb6s-time/36042727#36042727", "title": "How can I write a C++ COM object with asynchronous event firing (like VB6&#39;s Timer object)?", "body": "<p>COM events.</p>\n\n<p>The topic is rather laborious, it implies defining a 'sink' interface that the event consumer (VB) is passing to the event source, and then raising events by calling methods on the 'sunken' interface. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms686567(v=vs.85).aspx\" rel=\"nofollow\">Architecture of Connectable Objects</a>. You must implement <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683857(v=vs.85).aspx\" rel=\"nofollow\"><code>IConnectionPointContainer</code></a>. The good news is that IDEs are fully aware of this model and will expose your events in the VB designer. From the VB side will be as simple as a double-click on the COM object 'events' properties panel.</p>\n\n<p>As for the 'async' part, this falls in the 'threading' model of your component and the VB host app. In Apartment threads (the default) you will have to raise the events in the main Apartment thread, and you <em>may</em> have to marshal the interface between threads. See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20151022-00/?p=91301\" rel=\"nofollow\">What are the rules for CoMarshalInterface and CoUnmarshalInterface?</a>. </p>\n\n<p>The details about asynchronous COM event firing from C++ server to VB6 client can be found in <a href=\"http://www.codeproject.com/Articles/9506/Understanding-The-COM-Single-Threaded-Apartment\" rel=\"nofollow\">this article</a>.</p>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 36042727, "answer_count": 1, "score": 1, "last_activity_date": 1458446146, "creation_date": 1458148236, "last_edit_date": 1458445662, "question_id": 36042463, "link": "https://stackoverflow.com/questions/36042463/how-can-i-write-a-c-com-object-with-asynchronous-event-firing-like-vb6s-time", "title": "How can I write a C++ COM object with asynchronous event firing (like VB6&#39;s Timer object)?", "body": "<p>I'm writing a C++ COM object for directory change notifications via <code>ReadDirectoryChangesW</code>. A thread in my object will wait for changes, then notify the VB6 client.</p>\n\n<p>I know how to trigger events from the main thread of my program, similar to callback functions, but I don't want to force the user to poll my object for changes every small interval. </p>\n\n<p>As far as I'm aware, what I want could be done by sending window messages, but this needs form subclassing on the VB6 side, which is quite complicated.</p>\n\n<p>So I'm looking for a way to write an object like VB6's <code>Timer</code> which can fire an event in VB6 even when VB6 isn't currently calling into a method of <code>Timer</code>. Is this possible?</p>\n"}, {"tags": ["c++", "arrays", "vector", "stl"], "comments": [{"owner": {"reputation": 1891, "user_id": 995218, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZKQoe.jpg?s=128&g=1", "display_name": "atkins", "link": "https://stackoverflow.com/users/995218/atkins"}, "edited": false, "score": 0, "creation_date": 1458147973, "post_id": 36042316, "comment_id": 59733566, "body": "Think about how you initialised <code>low</code>..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1458147976, "post_id": 36042316, "comment_id": 59733570, "body": "Possible duplicate: <a href=\"http://stackoverflow.com/questions/35046549/logic-help-for-smallest-largest-value\">logic help for smallest/largest value</a>"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 5385572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60f473fcbdb31313f69f071463cfe49f?s=128&d=identicon&r=PG&f=1", "display_name": "ADB", "link": "https://stackoverflow.com/users/5385572/adb"}, "edited": false, "score": 0, "creation_date": 1458148076, "post_id": 36042373, "comment_id": 59733641, "body": "I feel like such a dummy! Thank you. I completely overlooked that."}, {"owner": {"reputation": 1891, "user_id": 995218, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZKQoe.jpg?s=128&g=1", "display_name": "atkins", "link": "https://stackoverflow.com/users/995218/atkins"}, "edited": false, "score": 0, "creation_date": 1458148096, "post_id": 36042373, "comment_id": 59733661, "body": "Or just initialise with <code>low = vecList.front()</code>."}, {"owner": {"reputation": 332, "user_id": 3698909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271c301dac5048d98ba662da9c44871?s=128&d=identicon&r=PG&f=1", "display_name": "DaveB", "link": "https://stackoverflow.com/users/3698909/daveb"}, "edited": false, "score": 0, "creation_date": 1458148724, "post_id": 36042373, "comment_id": 59734079, "body": "you should initialize both low and hight to vecList.front() if you allow negative numbers, otherwise you can always come up with input that will not give the correct result."}], "tags": [], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 0, "last_activity_date": 1458148002, "creation_date": 1458148002, "answer_id": 36042373, "question_id": 36042316, "link": "https://stackoverflow.com/questions/36042316/find-the-smallest-value-in-a-vector/36042373#36042373", "title": "Find the smallest value in a vector", "body": "<p>you need to initalize low to a big value not 0, otherwise this</p>\n\n<pre><code>   if(low &gt; vecList[i])\n</code></pre>\n\n<p>is never true</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1458148160, "post_id": 36042415, "comment_id": 59733704, "body": "You actually want <code>min_element</code> and <code>max_element</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 3, "creation_date": 1458148303, "post_id": 36042415, "comment_id": 59733795, "body": "Or even <a href=\"http://en.cppreference.com/w/cpp/algorithm/minmax_element\" rel=\"nofollow noreferrer\">minmax_element</a>."}], "tags": [], "owner": {"reputation": 4863, "user_id": 338913, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/be8a9bbc0062d38e0315f63509756bd9?s=128&d=identicon&r=PG", "display_name": "yasouser", "link": "https://stackoverflow.com/users/338913/yasouser"}, "is_accepted": false, "score": 2, "last_activity_date": 1458148095, "creation_date": 1458148095, "answer_id": 36042415, "question_id": 36042316, "link": "https://stackoverflow.com/questions/36042316/find-the-smallest-value-in-a-vector/36042415#36042415", "title": "Find the smallest value in a vector", "body": "<p>Since you are trying to learn STL, take a look at the <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow\">algorithms library</a> and it has some helper functions which will give the min, max and sum (accumulate is the actual function name) for a given range.</p>\n"}], "owner": {"reputation": 65, "user_id": 5385572, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/60f473fcbdb31313f69f071463cfe49f?s=128&d=identicon&r=PG&f=1", "display_name": "ADB", "link": "https://stackoverflow.com/users/5385572/adb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 36042373, "answer_count": 2, "score": 0, "last_activity_date": 1458148095, "creation_date": 1458147835, "question_id": 36042316, "link": "https://stackoverflow.com/questions/36042316/find-the-smallest-value-in-a-vector", "title": "Find the smallest value in a vector", "body": "<p>I am pretty new when it comes to programming with STL and I thought I was getting the hang of it. But I am a little perplexed about this one bit. My goal is to take in 5 values, then print out my values, print the highest value among them, print the average, and print the lowest among them ( my problem ). It seems that my variable \"low\" is given the value of 0 and I do not know why this is. I have tested to see if my values are being read in and to my knowledge, they are. So if anyone could please enlighten me to why I cannot seem to get the proper lowest value, I would greatly appreciate it. Thank you for your time.</p>\n\n<pre><code>vector&lt;double&gt; vecList;\nint x = 0;\ndouble high = 0;\ndouble low = 0;\ndouble sum = 0;\n\ncout &lt;&lt; \"Enter Integer Values, then press Ctrl(z) to Quit:\" &lt;&lt; endl;\n\nfor (int i=0; i &lt; 5; i++)\n{\n cin &gt;&gt; x;\n sum = sum + x;\n vecList.push_back(x);\n}\nvector&lt;double&gt;::iterator intVecIter;\n\ncout &lt;&lt;\"List contains: \";\nfor (intVecIter = vecList.begin(); intVecIter != vecList.end(); ++intVecIter)\ncout &lt;&lt; *intVecIter &lt;&lt; \" \";\nfor (int i=0; i &lt; 5; i++)\n {\n    if(vecList[i] &gt; high)\n    {\n            high = vecList[i];\n    }\n// prints out \"0\"\n    if(low &gt; vecList[i])\n    {\n            low = vecList[i];\n    }\n }\ncout &lt;&lt; endl &lt;&lt; \"Largest: \"&lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; high &lt;&lt; endl;\ncout &lt;&lt; \"Smallest: \"&lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; low &lt;&lt; endl;\ncout &lt;&lt; \"Average: \" &lt;&lt; fixed &lt;&lt; setprecision(2)&lt;&lt; (sum/5);\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "string", "c++11"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1458147889, "post_id": 36042228, "comment_id": 59733512, "body": "How is <code>CutomInitString</code> not a &quot;simple form?&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458147903, "post_id": 36042228, "comment_id": 59733522, "body": "<code>std::begin()</code> and <code>std::end()</code> might come in handy."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1458148242, "post_id": 36042228, "comment_id": 59733755, "body": "Possible <a href=\"http://stackoverflow.com/q/164168/620382\">duplcicate</a>."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "reply_to_user": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1458148630, "post_id": 36042228, "comment_id": 59734016, "body": "@Zulan definitely duplcicate - somehow I missed it."}, {"owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "edited": false, "score": 0, "creation_date": 1458151500, "post_id": 36042228, "comment_id": 59735914, "body": "The other question has a C++14 answer: <code>std::string s = &quot;ABC\\0b&quot;s;</code> this is what I was looking for. Follow the link and up vote that answer if you like it as much as I do."}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1458148085, "post_id": 36042351, "comment_id": 59733646, "body": "He effectively used that in item #3. He deemed it &quot;ugly&quot;."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 4, "last_activity_date": 1458147945, "creation_date": 1458147945, "answer_id": 36042351, "question_id": 36042228, "link": "https://stackoverflow.com/questions/36042228/how-to-initialise-a-stdstring-when-data-ends-in-a-binary-zero/36042351#36042351", "title": "How to initialise a std::string when data ends in a binary zero", "body": "<p>You could use an <code>std::string</code> constructor which takes the size of the buffer: </p>\n\n<pre><code>basic_string( const CharT* s,\n              size_type count, \n              const Allocator&amp; alloc = Allocator() );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": true, "score": 1, "last_activity_date": 1458148511, "last_edit_date": 1458148511, "creation_date": 1458147962, "answer_id": 36042359, "question_id": 36042228, "link": "https://stackoverflow.com/questions/36042228/how-to-initialise-a-stdstring-when-data-ends-in-a-binary-zero/36042359#36042359", "title": "How to initialise a std::string when data ends in a binary zero", "body": "<p>Edit: Rewrote answer after some consideration.</p>\n\n<p>The real problem here is not in <code>std::string</code> but actually in the built-in array type, which doesn't really work like a container. The solution below isn't much different from yours, but you might think it's less ugly if you use <code>to_array</code> to convert the built-in array type to <code>std::array</code> immediately.</p>\n\n<pre><code>auto my_array = std::experimental::to_array(\"ABC\\0\");\nstd::string my_string{my_array.begin(), my_array.end()};\n</code></pre>\n"}], "owner": {"reputation": 5574, "user_id": 536874, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/00yFk.jpg?s=128&g=1", "display_name": "Johannes", "link": "https://stackoverflow.com/users/536874/johannes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "closed_date": 1458148188, "accepted_answer_id": 36042359, "answer_count": 2, "score": 1, "last_activity_date": 1458148511, "creation_date": 1458147609, "question_id": 36042228, "link": "https://stackoverflow.com/questions/36042228/how-to-initialise-a-stdstring-when-data-ends-in-a-binary-zero", "closed_reason": "Duplicate", "title": "How to initialise a std::string when data ends in a binary zero", "body": "<p>I am writing a unit test where a string has to end in a binary zero.</p>\n\n<p>Consider <code>const char * data_c = \"1234\";</code> , here <code>data_c</code> contains 5 characters including a zero. std::string removes that zero and tracks the size like a vector. <code>std::string data_cpp = \"1234\";</code></p>\n\n<p>The string I need to create has a binary zero at the end. Initialising std::string with simple means seems problematic. <code>std::string data_cpp{\"ABC\\0\"};</code> Gives back a string of size 3;</p>\n\n<p>The following minimal example show passing and not passing examples to illustrate my problem further:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nvoid testString(std::string name, std::string str)\n{\n    int e = 0;\n    std::cout &lt;&lt; name &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"----------------------\" &lt;&lt; \"\\n\";\n\n    if (4 != str.size())\n    {\n        std::cout &lt;&lt; \"Size was not 4\" &lt;&lt; \"\\n\";\n        e += 1;\n    }\n    char testvals[] = {'A', 'B', 'C', '\\0'};\n    for (size_t n = 0; n &lt; 4 &amp;&amp; n &lt; str.size(); ++n)\n    {\n        if (str[n] != testvals[n])\n        {\n            std::cout &lt;&lt; \"Character \" &lt;&lt; std::to_string(n) &lt;&lt; \" '\" &lt;&lt; str[n] &lt;&lt; \"'\" &lt;&lt; \" did not match\" &lt;&lt; \"\\n\";\n            e += 1;\n        }\n    }\n    std::cout &lt;&lt; \"ERRORS: \" &lt;&lt; std::to_string(e) &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; \"----------------------\" &lt;&lt; std::endl;\n}\n\ntemplate&lt;size_t N&gt;\nstd::string CutomInitString(const char(&amp;str)[N])\n{\n    return std::string{str, str + N - 1};\n}\n\nint main()\n{\n    std::string one{\"ABC\\0\"};\n    testString(\"ONE\", one); //FAILS\n\n    const char two_c[] = \"ABC\\0\";\n    std::string two{two_c};\n    testString(\"TWO\", two); //FAILS\n\n\n    const char three_c[] = \"ABC\\0\";\n    std::string three{three_c, three_c + (sizeof(three_c) / sizeof(char)) - 1};\n    testString(\"THREE\", three); //PASS, also ugly\n\n    const char four_c[] = \"ABC\\0\";\n    std::string four{CutomInitString(four_c)};\n    testString(\"FOUR\", four); //PASS, also ugly\n}\n</code></pre>\n\n<p>An example for simple would be <code>std::string one</code>.\nIs there a simple form that I can use?</p>\n"}, {"tags": ["c++", "templates", "compiler-errors", "binary-search-tree", "function-pointers"], "comments": [{"owner": {"reputation": 332, "user_id": 3698909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0271c301dac5048d98ba662da9c44871?s=128&d=identicon&r=PG&f=1", "display_name": "DaveB", "link": "https://stackoverflow.com/users/3698909/daveb"}, "edited": false, "score": 0, "creation_date": 1458149105, "post_id": 36042187, "comment_id": 59734358, "body": "try to change  comparePrimaryKey(const House* &amp;left, const House* &amp;right) to comparePrimaryKey(const House* left, const House* right)"}], "answers": [{"tags": [], "owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "is_accepted": false, "score": 0, "last_activity_date": 1458150405, "creation_date": 1458150405, "answer_id": 36043177, "question_id": 36042187, "link": "https://stackoverflow.com/questions/36042187/inserting-values-into-two-bsts-sorted-differently/36043177#36043177", "title": "Inserting values into two BSTs sorted differently", "body": "<p>here is a simple program that solve your first problem, i added the definitions of some function so that i can test your class and functions.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n\nclass House\n{\n    private:\n    std::string APN; // Unique key\n    int price;  // Non-unique key\n\n    std::string address;\n    int bedrooms;\n    double bathrooms;\n    int sqFt;\n\npublic:\n\n    House(std::string apn, int prix)\n\n    {\n    APN = apn;\n    price = prix;\n\n    }\n    std::string getAPN(void)\n\n    {\n    return APN;\n\n    }\n\n\n        int getPrice()\n        {\n\n        return price;\n\n        }\n\n};\n\n    int comparePrimaryKey( House *const  &amp;left,  House *const  &amp;right)\n{\n    if(left-&gt;getAPN() &lt; right-&gt;getAPN())\n        return -1;\n    else\n        return 1;\n}\n\nint compareSecondaryKey( House *const  &amp;left,  House *const  &amp;right)\n{\n    if(left-&gt;getPrice() &lt; right-&gt;getPrice())         // right &gt; left\n       return -1;\n    else                                            // right &lt; left\n       return 1;\n}\n\n// Main function for the program\nint main( )\n{\n\n    int PrimaryKey =0;\n    int SecondaryKey=0;\n\n    House right(\"droite\",2050);\n    House left(\"gauche\",2000);\n\n\n\n    PrimaryKey =  comparePrimaryKey(&amp;left, &amp;right);\n    SecondaryKey =  compareSecondaryKey(&amp;left, &amp;right);\n\nstd::cout&lt;&lt; PrimaryKey &lt;&lt; std::endl;\nstd::cout &lt;&lt; SecondaryKey &lt;&lt; std::endl;\n\n    std::system(\"PAUSE\");\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6072791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89e6479219e9bd9f2d6a7d8969180501?s=128&d=identicon&r=PG&f=1", "display_name": "Ibosaka", "link": "https://stackoverflow.com/users/6072791/ibosaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458150405, "creation_date": 1458147468, "question_id": 36042187, "link": "https://stackoverflow.com/questions/36042187/inserting-values-into-two-bsts-sorted-differently", "title": "Inserting values into two BSTs sorted differently", "body": "<p>For a project I'm working on in school I have to insert a pointer to one object into two BSTs. One BST is sorted by the APN(a unique key), and the other is sorted by price(non unique). We are using templates, so I asked my professor how to accomplish this and she said to use function pointers. When I tried to do so, I came across a few errors I don't know how to resolve.</p>\n\n<p>The object is defined as</p>\n\n<pre><code>class House\n{\n    private:\n    string APN; // Unique key\n    int price;  // Non-unique key\n\n    string address;\n    int bedrooms;\n    double bathrooms;\n    int sqFt;\n}\n</code></pre>\n\n<p>In main, after I've created the object I try to run.</p>\n\n<pre><code>uniqueTree-&gt;insert(newHouse, comparePrimaryKey);\nnonUniqueTree-&gt;insert(newHouse, compareSecondaryKey);\n</code></pre>\n\n<p>Where each function is defined as</p>\n\n<pre><code>int comparePrimaryKey(const House* &amp;left, const House* &amp;right)\n{\n    if(left-&gt;getAPN() &lt; right-&gt;getAPN())\n        return -1;\n    else\n        return 1;\n}\n\nint compareSecondaryKey(const House* &amp;left, const House* &amp;right)\n{\n    if(left-&gt;getPrice() &lt; right-&gt;getPrice())         // right &gt; left\n       return -1;\n    else                                            // right &lt; left\n       return 1;\n}\n</code></pre>\n\n<p>But I get an error saying </p>\n\n<pre><code>\"Cannot initialize a parameter of type 'int (*)(House *const &amp;, House *const &amp;) \nwith an lvalue of type 'int (const House *&amp;, const House *&amp;)'\"\n</code></pre>\n\n<p>There is a BinaryNode object pointer called rootPtr in the Binary Tree file, and insert is defined as a purely virtual function.</p>\n\n<pre><code>BinaryNode&lt;ItemType&gt;* rootPtr;\nvirtual bool insert(const ItemType &amp; newData, int compare(const \nItemType&amp;, const ItemType&amp;)) = 0;\n</code></pre>\n\n<p>The binary node class:</p>\n\n<pre><code>template&lt;class T&gt;\nclass BinaryNode\n{   \nprivate:\n    T              item;         // Data portion\n    BinaryNode&lt;T&gt;* leftPtr;     // Pointer to left child\n    BinaryNode&lt;T&gt;* rightPtr;        // Pointer to right child\n\npublic:\n    // constructors\n    BinaryNode(const T &amp; anItem)    {item = anItem; leftPtr = 0; rightPtr = 0;}\n    BinaryNode(const T &amp; anItem, \n           BinaryNode&lt;T&gt;* left, \n           BinaryNode&lt;T&gt;* right) {item = anItem; leftPtr = left; rightPtr = right;}\n    // mutators\n    void setItem(const T &amp; anItem) {item = anItem;}\n    void setLeftPtr(BinaryNode&lt;T&gt;* left) {leftPtr = left;}\n    void setRightPtr(BinaryNode&lt;T&gt;* right) {rightPtr = right;}\n    // accessors\n    T getItem() const    {return item;}\n    BinaryNode&lt;T&gt;* getLeftPtr() const  {return leftPtr;}\n    BinaryNode&lt;T&gt;* getRightPtr() const {return rightPtr;}\n\n    bool isLeaf() const {return (leftPtr == 0 &amp;&amp; rightPtr == 0);}\n}; \n</code></pre>\n\n<p>In the BST file, insert is defined as</p>\n\n<pre><code>template&lt;class ItemType&gt;\nbool BinarySearchTree&lt;ItemType&gt;::insert(const ItemType &amp;newEntry, int \ncompare(const ItemType &amp;, const ItemType &amp;))\n{\n    BinaryNode&lt;ItemType&gt;* newNodePtr = new BinaryNode&lt;ItemType&gt;(newEntry);\n    BinaryTree&lt;ItemType&gt;::rootPtr = _insert(BinaryTree&lt;ItemType&gt;::rootPtr, \nnewNodePtr, compare(newNodePtr-&gt;getItem(), BinaryTree&lt;ItemType&gt;::rootPtr()-&gt;getItem()));\n    return true;\n}\n</code></pre>\n\n<p>I am also getting an error at the BinaryTree::rootPtr line saying that</p>\n\n<pre><code>Called object type 'BinaryNode&lt;House *&gt; *' is not a function or function pointer\n</code></pre>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"comments": [{"owner": {"reputation": 1106, "user_id": 3608565, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/41a8d2ba25a17884453f6bce20b66dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Trashman", "link": "https://stackoverflow.com/users/3608565/trashman"}, "edited": false, "score": 0, "creation_date": 1458146987, "post_id": 36041761, "comment_id": 59732806, "body": "Wow. Parentheses. I new it was something obvious. I feel stupid asking the question now, but thank you for the quick answer."}, {"owner": {"reputation": 1106, "user_id": 3608565, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/41a8d2ba25a17884453f6bce20b66dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Trashman", "link": "https://stackoverflow.com/users/3608565/trashman"}, "edited": false, "score": 0, "creation_date": 1458147326, "post_id": 36041761, "comment_id": 59733091, "body": "I didn&#39;t design initfoo to be a mutator. It simply returns an initial value for foo based on data. My constructor function initializes foo to the value from initfoo and never touches foo again. My understanding is mutators are typically used when called from an external function to try to change the value in the class. Once foo is set in the constructor, I don&#39;t want to modify it again, so I&#39;m not using a mutator. Is my thinking wrong here?"}, {"owner": {"reputation": 73, "user_id": 3616561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204a3bf0b8009b743fbd075f63f91a4?s=128&d=identicon&r=PG&f=1", "display_name": "rcs", "link": "https://stackoverflow.com/users/3616561/rcs"}, "reply_to_user": {"reputation": 1106, "user_id": 3608565, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/41a8d2ba25a17884453f6bce20b66dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Trashman", "link": "https://stackoverflow.com/users/3608565/trashman"}, "edited": false, "score": 0, "creation_date": 1458147655, "post_id": 36041761, "comment_id": 59733340, "body": "No that sounds ok, but there might be a better way to achieve that. If you really don&#39;t want a class member to change, you can enforce that by making it &#39;const&#39; and initialise it in the constructors initialiser list. I&#39;ll add an example to the answer."}, {"owner": {"reputation": 1106, "user_id": 3608565, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/41a8d2ba25a17884453f6bce20b66dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Trashman", "link": "https://stackoverflow.com/users/3608565/trashman"}, "edited": false, "score": 0, "creation_date": 1458325482, "post_id": 36041761, "comment_id": 59827599, "body": "This pattern doesn&#39;t work for me. The issue is, &quot;data&quot; requires some code to execute to determine what should be in it, then this is passed to the initfoo function to determine the value of foo. Since declaring const requires it to be initialized immediately upon calling the constructor I cannot set it to the value it needs to be this way. That data may be different each time the code is run (it&#39;s hardware dependent), but then once it is initialized it is never changed."}], "tags": [], "owner": {"reputation": 73, "user_id": 3616561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d204a3bf0b8009b743fbd075f63f91a4?s=128&d=identicon&r=PG&f=1", "display_name": "rcs", "link": "https://stackoverflow.com/users/3616561/rcs"}, "is_accepted": true, "score": 2, "last_activity_date": 1458147938, "last_edit_date": 1458147938, "creation_date": 1458146412, "answer_id": 36041761, "question_id": 36041708, "link": "https://stackoverflow.com/questions/36041708/error-calling-external-accessor-function/36041761#36041761", "title": "Error calling external accessor function", "body": "<p>Your function call should be this:</p>\n\n<pre><code>myfoo = a.getfoo();\n</code></pre>\n\n<p>Also, it is not normal for a mutator to return a value, so </p>\n\n<pre><code>UINT initfoo (data);\n</code></pre>\n\n<p>should probably be</p>\n\n<pre><code>void initfoo (data);\n</code></pre>\n\n<p>Also it is good practise to stick to the following naming conventions for accessors/mutators:</p>\n\n<pre><code>UINT foo;\nUINT getFoo();\nvoid setFoo(UINT val);\n</code></pre>\n\n<p><strong>EDIT</strong> with const example:</p>\n\n<pre><code>class A\n{\npublic:\n\n  // Initialise foo to some random number\n  A()\n    : foo(4U)\n  {\n    // constructor body here\n  }\n\nprivate:\n  // Once initialised foo cannot change during the lifetime of this object\n  const UINT foo;\n};\n</code></pre>\n\n<p>For clarity I've written the declarations and implementation together. If you split it into .h/.cpp, the intitialiser list goes in the .cpp with the constructor definition</p>\n"}], "owner": {"reputation": 1106, "user_id": 3608565, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/41a8d2ba25a17884453f6bce20b66dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Trashman", "link": "https://stackoverflow.com/users/3608565/trashman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "closed_date": 1458158287, "accepted_answer_id": 36041761, "answer_count": 1, "score": 0, "last_activity_date": 1458147938, "creation_date": 1458146226, "question_id": 36041708, "link": "https://stackoverflow.com/questions/36041708/error-calling-external-accessor-function", "closed_reason": "Not suitable for this site", "title": "Error calling external accessor function", "body": "<p>If I have a class</p>\n\n<pre><code>Class A \n{\n    public:\n        UINT getfoo ();\n\n... other stuff ...\n\n    private:\n        UINT initfoo (data);\n        UINT foo;\n\n     ... other stuff ...\n}\n</code></pre>\n\n<p>The idea is, in the class constructor, I set </p>\n\n<pre><code>foo = initfoo (data);\n</code></pre>\n\n<p>getfoo is a simple return statment</p>\n\n<pre><code>UNIT getfoo ()\n{\n     return foo;\n}\n</code></pre>\n\n<p>Then from an external function, where I have an instance of that class, I use the getfoo accessor function to get the value of foo in that class.</p>\n\n<pre><code> A    a;\n UINT myfoo;\n ...\n myfoo = A::getfoo\n -or-\n myfoo = a.getfoo\n</code></pre>\n\n<p>But when I try to assign a the value of the same type in an external function, I keep getting an error.</p>\n\n<p>Using A:: VS2013 gives me an error in the editor</p>\n\n<blockquote>\n  <p>A value of type UINT (A::*)() cannot be assigned to an entity of type\n  UINT</p>\n</blockquote>\n\n<p>Using a. the editor doesn\u2019t complain, but when I try to compile I get the error:</p>\n\n<blockquote>\n  <p>error C2440: '=' : cannot convert from 'unsigned int (__thiscall\n  A::*)(void)' to 'unsigned int'</p>\n</blockquote>\n\n<p>I'm sure this is a basic c++ issue, and I've searched a lot but I can't seem to find the right search terms to figure out my problem. What am I doing wrong in the function call?</p>\n"}, {"tags": ["c++", "operator-overloading", "move-semantics", "rvalue-reference", "perfect-forwarding"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 16, "creation_date": 1458146297, "post_id": 36041662, "comment_id": 59732275, "body": "I think it is best just to type in <code>std::move</code> - at least it is clear to everybody what is happening. Makes maintenance a lot easier."}, {"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 10, "creation_date": 1458146301, "post_id": 36041662, "comment_id": 59732278, "body": "I would hate to read that. <code>std::move</code> isn&#39;t so long after all. And writing code is a lot easier than reading it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1458146331, "post_id": 36041662, "comment_id": 59732300, "body": "I would not do this.  Its just going to add confusion to your source code(oh what is type of this variable and is it one of the types that use the <code>+</code> move operator?).  If you want to shorten <code>std::move</code> then use <code>using std::move;</code> and then at least you have <code>move(a)</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 9, "creation_date": 1458146755, "post_id": 36041662, "comment_id": 59732628, "body": "Would be extremely unfair to anyone maintaining your code, including yourself in 3 years.,"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 3, "creation_date": 1458147941, "post_id": 36041662, "comment_id": 59733545, "body": "I guess <code>set_value_category_to_xvalue</code> (<a href=\"http://stackoverflow.com/q/21358432/576911\">stackoverflow.com/q/21358432/576911</a>) is <i>completely</i> out of the question. :-)"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458148638, "post_id": 36041662, "comment_id": 59734020, "body": "@HowardHinnant Maybe there is a need to introduce some new unary prefix operators to replace <code>std::forward</code> and <code>std::move</code>? Introducing rvalue-references is core language changing, but there is no corresponding (core language) operators introduced. It seems a slight oversight, isn&#39;t it? I mean somthing like built-in <code>operator @</code> =)."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458149072, "post_id": 36041662, "comment_id": 59734335, "body": "If it were to become an operator, it would need to be an operator that is not overloadable.  <code>move</code> is purposefully not a customization point.  <code>forward</code> would be difficult to replace with an operator since it <i>must</i> be used with a template parameter (and failure to do so <i>must</i> be ill-formed).  There have been similar proposals around <code>swap</code> (<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3746.pdf\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3746.pdf</a>) and they have failed to gain traction."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458149265, "post_id": 36041662, "comment_id": 59734464, "body": "@HowardHinnant Why I begin to talk about operators is the fact, that  when <b>debug</b> with <code>-O0</code> it became really anoying thing to <i>step into</i> <code>std::move</code> and <code>std::forward</code> for every parameter moved to/forwarded into function, e.g. in case of <code>f(std::move(a), std::forward&lt; B &gt;(b));</code>."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458149535, "post_id": 36041662, "comment_id": 59734634, "body": "Hmm... that sounds like (yet) another good argument in favor of libc++&#39;s use of the <code>__always_inline__</code> attribute:  <a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/type_traits#L2154\" rel=\"nofollow noreferrer\">github.com/llvm-mirror/libcxx/blob/master/include/&hellip;</a> <a href=\"https://github.com/llvm-mirror/libcxx/blob/master/include/__config#L215\" rel=\"nofollow noreferrer\">github.com/llvm-mirror/libcxx/blob/master/include/__config#L&zwnj;&#8203;215</a>"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1458149537, "post_id": 36041662, "comment_id": 59734638, "body": "<code>forward</code> operator might be an equivalent of <code>std::forward&lt; decltype(x) &gt;(x)</code>"}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "edited": false, "score": 2, "creation_date": 1458149549, "post_id": 36041662, "comment_id": 59734645, "body": "What you will win in perceived &quot;simplicity&quot; you will pay ten thousand times over in maintenance nightmare."}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "reply_to_user": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "edited": false, "score": 0, "creation_date": 1458149739, "post_id": 36041662, "comment_id": 59734789, "body": "@Escualo How do you think, is it permittable for some DSEL library? Or would it be acceptable if it became common technique to overload <code>operator +</code> for the purpose described above?"}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "edited": false, "score": 0, "creation_date": 1458150248, "post_id": 36041662, "comment_id": 59735150, "body": "Remember that code is read many more times than it is written. Hopefully it is written once and read dozens, hundreds of times. What do you think you gain by saving a few keystrokes? Do you really think the complexity of your code comes from extra ten characters you need to write here and there?"}, {"owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "edited": false, "score": 2, "creation_date": 1458150382, "post_id": 36041662, "comment_id": 59735234, "body": "Remember a fundamental tenet of programming: <b>don&#39;t try to be clever</b>. Stick to the basics, keep it simple, and let the sophistication stem from the well-defined interaction between simple things."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 1, "creation_date": 1458150523, "post_id": 36041662, "comment_id": 59735317, "body": "When you have to write <code>std::move</code> all the time, then I think you have a more fundamental design problem anyway."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458150542, "post_id": 36041662, "comment_id": 59735330, "body": "@HowardHinnant Just curious, is there a link to the discussion regarding <code>operator:=:</code>? I&#39;d to know what kind of feedback there was."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1458150948, "post_id": 36041662, "comment_id": 59735576, "body": "@Barry:  There are discussion notes on this subject, but they are not public.  However this SO answer (<a href=\"http://stackoverflow.com/a/20843994/576911\">stackoverflow.com/a/20843994/576911</a>) covers that discussion in the section titled &quot;std::swap vs swap operator&quot;."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1458151356, "post_id": 36041662, "comment_id": 59735824, "body": "@HowardHinnant Thanks! The &quot;having both exist&quot; argument makes sense, though seems unsatisfying. Either way, not related to this discussion."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458146802, "post_id": 36041895, "comment_id": 59732658, "body": "Well, <code>BEGIN</code> doesn&#39;t even have the perceived notion of being shorthand for anything - it is <b>more</b> characters :)"}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 9, "last_activity_date": 1458146845, "last_edit_date": 1458146845, "creation_date": 1458146753, "answer_id": 36041895, "question_id": 36041662, "link": "https://stackoverflow.com/questions/36041662/shorthand-for-stdmove/36041895#36041895", "title": "Shorthand for std::move", "body": "<p>I would argue against this for the same reason we don't <code>#define BEGIN {</code> in C++: future code maintainers (and this might even be <em>you</em>) won't understand immediately what's going on.</p>\n\n<p>Remember, you write code once and read it many times. <code>std::move</code> is so quick to type, clear about what it's doing, and anyone who knows C++11 will know exactly what it means.</p>\n"}, {"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1458147307, "post_id": 36041955, "comment_id": 59733076, "body": "IDEs generally can&#39;t find declaration of overloaded operators."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1458147331, "post_id": 36041955, "comment_id": 59733093, "body": "@Orient: Huh? Sure they can..."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 15, "last_activity_date": 1458147871, "last_edit_date": 1458147871, "creation_date": 1458146880, "answer_id": 36041955, "question_id": 36041662, "link": "https://stackoverflow.com/questions/36041662/shorthand-for-stdmove/36041955#36041955", "title": "Shorthand for std::move", "body": "<p>It is objectively bad practice to do such a thing. <code>std::move()</code> is the standard provided, well-understood way of casting to an rvalue (specifically xvalue). Anybody who sees <code>std::move(a)</code> either knows exactly what it does - or doesn't understand move semantics anyway (and if they don't, <code>std::move</code> is pretty easy to Google to learn about).</p>\n\n<p>Seeing <code>+a</code> does not have any meaning without having to look it up first. Even worse, there is an expected meaning of what unary <code>+</code> does for many types - which has nothing to do with move semantics! (e.g. Is <code>a</code> a <code>char</code> getting promoted to <code>int</code>? Is it a no-capture lambda getting converted to a function pointer?) All for just saving 10 characters? Not to mention that you'd have to implement this <code>operator+</code> for every type, and you don't have to implement <code>std::move()</code> at all. That is a very poor trade-off.</p>\n"}, {"comments": [{"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1458147610, "post_id": 36042211, "comment_id": 59733312, "body": "My experience said it is not too easy in some cases."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 1, "creation_date": 1458147668, "post_id": 36042211, "comment_id": 59733350, "body": "@Orient, but replacing it with <code>+</code> doesn&#39;t make it any easier, so doesn&#39;t solve anything."}, {"owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "reply_to_user": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1458147985, "post_id": 36042211, "comment_id": 59733574, "body": "@Orient I meant in terms of numbers of characters"}, {"owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "edited": false, "score": 0, "creation_date": 1458149075, "post_id": 36042211, "comment_id": 59734338, "body": "Even so, I type <code>operator +</code> definition once and uses it a (really) plenty of times. I can even write a macro <code>#define MOVE(X) X &amp;&amp; operator + () &amp; noexcept { return std::move(*this); }</code> and then use it in class definiton of every type I need."}], "tags": [], "owner": {"reputation": 6770, "user_id": 3658660, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5b40f4e2bead9eca6951da110a3c84e7?s=128&d=identicon&r=PG&f=1", "display_name": "hlscalon", "link": "https://stackoverflow.com/users/3658660/hlscalon"}, "is_accepted": false, "score": 8, "last_activity_date": 1458148039, "last_edit_date": 1458148039, "creation_date": 1458147549, "answer_id": 36042211, "question_id": 36041662, "link": "https://stackoverflow.com/questions/36041662/shorthand-for-stdmove/36042211#36042211", "title": "Shorthand for std::move", "body": "<p>As Scott Meyers stated in item 7 of More Effective C++:</p>\n\n<blockquote>\n  <p>The purpose of operator overloading is to make programs easier to <strong>read</strong>, <strong>write</strong>, and <strong>understand</strong></p>\n</blockquote>\n\n<p><code>+a;</code> is less characters to type and ... that's it. You need to look it up everytime to understand it's meaning and read it is not clear at all (<code>+ +a</code>, <code>++a</code>, <code>- +a</code> ?).</p>\n\n<p>Use <code>std::move</code> as it is easy to read, write and understand.</p>\n"}], "owner": {"reputation": 13492, "user_id": 1430927, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/ruRvK.png?s=128&g=1", "display_name": "Tomilov Anatoliy", "link": "https://stackoverflow.com/users/1430927/tomilov-anatoliy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "closed_date": 1458152493, "accepted_answer_id": 36041955, "answer_count": 3, "score": 1, "last_activity_date": 1458218344, "creation_date": 1458146128, "last_edit_date": 1458218344, "question_id": 36041662, "link": "https://stackoverflow.com/questions/36041662/shorthand-for-stdmove", "closed_reason": "Opinion-based", "title": "Shorthand for std::move", "body": "<p>Would it be a bad practice for some class <code>S</code> to overload unary <code>operator +</code> (or maybe <code>operator *</code> for non-pointer-like classes) as following?</p>\n\n<pre><code>struct S { S &amp;&amp; operator + () &amp; noexcept { return std::move(*this); } };\n</code></pre>\n\n<p>The goal it to invent shorthand for <code>std::move</code>.</p>\n\n<pre><code>S a;\nS b = +a;\n// instead of\nS c = std::move(a);\n</code></pre>\n\n<p>Say I have a project with plenty of different classes, which intensively uses move-semantics. All the classes not mimics any arithmetical counterparts.</p>\n"}, {"tags": ["c++", ".net", "windows", "textbox", "clr"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458150637, "post_id": 36041560, "comment_id": 59735383, "body": "The problem is that they <b>are</b> being recognized.  If you set the Handled property to <i>true</i> then you say that you handled it so the key no longer works.  Testing for A..Z etc is wrong as well, you must do that in the KeyPress event handler.  The entire event handler needs to be deleted."}, {"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458155641, "post_id": 36041560, "comment_id": 59738377, "body": "Hans, I&#180;ve changed the code to work with <code>KeyPress</code> according to your hint (see new code in post), but I&#180;m still in trouble. DEL or BACKSPACE does not even call the handler...."}], "answers": [{"comments": [{"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1458150250, "post_id": 36043106, "comment_id": 59735151, "body": "Windows 7. I&#180;m using Visual Studio 2012. The key is recognized (I can see at the debug, but not processed after e-&gt;Handled = true)."}], "tags": [], "owner": {"reputation": 491, "user_id": 5258433, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/3492395b6814580f5500046f18a72a08?s=128&d=identicon&r=PG&f=1", "display_name": "mask", "link": "https://stackoverflow.com/users/5258433/mask"}, "is_accepted": false, "score": 0, "last_activity_date": 1458150266, "last_edit_date": 1458150266, "creation_date": 1458150201, "answer_id": 36043106, "question_id": 36041560, "link": "https://stackoverflow.com/questions/36041560/del-or-backspace-not-processed-on-overridden-windowsformsmaskedtextboxonke/36043106#36043106", "title": "DEL or BACKSPACE not processed on overridden Windows::Forms::MaskedTextBox::OnKeyPress", "body": "<p>I had the same issue. What is your OS (windows/linux/mac)?\nI  think this issue is related to the compiler. I ended up using Qt to recognize those keys (<code>Qt::Key_Delete</code>   <code>Qt::Key_Backspace</code>).</p>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1458155574, "creation_date": 1458145827, "last_edit_date": 1458155574, "question_id": 36041560, "link": "https://stackoverflow.com/questions/36041560/del-or-backspace-not-processed-on-overridden-windowsformsmaskedtextboxonke", "title": "DEL or BACKSPACE not processed on overridden Windows::Forms::MaskedTextBox::OnKeyPress", "body": "<p>I\u00b4m building a custom <code>MaskedTextBox</code> that needs to accept just some types of characters. I had overridden the original class with the following code:</p>\n\n<pre><code>    ref class CustomMaskedTextBox : System::Windows::Forms::MaskedTextBox\n    {\n        public:\n            CustomMaskedTextBox();\n            virtual void OnKeyPRess(System::Windows::Forms::KeyPressEventArgs^ e) override;\n    };\n\n    CustomMaskedTextBox::CustomMaskedTextBox(void) {}\n    CustomMaskedTextBox::~CustomMaskedTextBox(void) {}\n    void CustomMaskedTextBox::OnKeyPress(System::Windows::Forms::KeyPressEventArgs^ e)\n    {\n        if ((e-&gt;KeyChar &gt;= 'A' &amp;&amp; e-&gt;KeyChar &lt;= 'Z') ||\n            (e-&gt;KeyChar &gt;= '0' &amp;&amp; e-&gt;KeyChar &lt;= '9') ||\n             e-&gt;KeyChar == '*' ||\n             e-&gt;KeyChar == '-' ||\n             e-&gt;KeyChar == '/' ||\n             e-&gt;KeyChar == '.' ||\n             e-&gt;KeyChar == ' ' ||\n             e-&gt;KeyChar == (char) System::Windows::Forms::Keys::Back ||\n             e-&gt;KeyChar == (char) System::Windows::Forms::Keys::Delete)\n        {\n            e-&gt;Handled = false;\n        }\n        else\n        {\n            e-&gt;Handled = true;\n        }\n    }\n</code></pre>\n\n<p>For some reason the DEL and BACKSPACE keys are not being recognized, having no effect when texting on the object. </p>\n\n<p>Help appreciated to make the DEL and BACKSPACE keys work.</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458146164, "post_id": 36041553, "comment_id": 59732181, "body": "why not shift the rest once found its position?"}], "answers": [{"tags": [], "owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "is_accepted": false, "score": 4, "last_activity_date": 1458146836, "last_edit_date": 1458146836, "creation_date": 1458146194, "answer_id": 36041693, "question_id": 36041553, "link": "https://stackoverflow.com/questions/36041553/sorting-one-element-in-a-sorted-container/36041693#36041693", "title": "Sorting one element in a sorted container", "body": "<p>In theory, you should use a combination of <code>std::lower_bound</code> and <code>std::insert</code>, as shown in the example below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;typename T&gt;\nvoid insert(T value, std::vector&lt;T&gt;&amp; data) {\n  auto it = std::lower_bound(data.begin(), data.end(), value);\n  data.insert(it, value);\n}\n\ntemplate&lt;typename C&gt;\nvoid show(const C&amp; data) {\n  for(const auto &amp; item : data) {\n    std::cout &lt;&lt; item &lt;&lt; \" \";\n  }\n  std::cout &lt;&lt; \"\\n\";\n}\n\nint main() {\n\n  std::vector&lt;int&gt; data { 1, 2, 4, 5, 7, 9 };\n  show(data);\n  insert(3, data);\n  show(data);\n  insert(6, data);\n  show(data);\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ g++ example.cpp -std=c++14\n./a.out\n1 2 4 5 7 9\n1 2 3 4 5 7 9\n1 2 3 4 5 6 7 9\n</code></pre>\n\n<p><code>std::lower_bound(beg, end, val)</code> will find the iterator pointing to the first element in the range <code>[beg, end)</code> that is not less than (i.e. greater or equal to) value (cf. <a href=\"http://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow\">cppreference</a>); it only works for sorted containers. Its complexity is logarithmic in <code>std::distance(beg, end)</code>.</p>\n\n<p><code>std::vector&lt;T&gt;::insert(it, value)</code> will insert <code>value</code> before <code>it</code>.</p>\n\n<p>In practice (for a relatively small number of elements), you may be better off using linear search up to the point of insertion and then <code>std::insert</code>. In other words: linear search is <code>O(N)</code>, and <code>std::lower_bound</code> is <code>O(log N)</code>, but linear search is faster (due to cache effects) for vectors with about 10-50 elements (your mileage may vary).</p>\n"}, {"comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1458146260, "post_id": 36041696, "comment_id": 59732241, "body": "exactly, using the same loop btw"}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1458146384, "last_edit_date": 1458146384, "creation_date": 1458146196, "answer_id": 36041696, "question_id": 36041553, "link": "https://stackoverflow.com/questions/36041553/sorting-one-element-in-a-sorted-container/36041696#36041696", "title": "Sorting one element in a sorted container", "body": "<p>If the vector is already sorted, you can easily find the new place of the updated value by dichotomy (compare with value at size+2 and iterate ...). Then you shift all elements between old and new place.</p>\n\n<p>This is a rather optimised way since the shift between old and new place is a condensed operation combining a <code>std::erase</code> and <code>std::insert</code>, but it will be more tedious to write and test...</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1458155720, "last_edit_date": 1458155720, "creation_date": 1458155212, "answer_id": 36044839, "question_id": 36041553, "link": "https://stackoverflow.com/questions/36041553/sorting-one-element-in-a-sorted-container/36044839#36044839", "title": "Sorting one element in a sorted container", "body": "<ul>\n<li><code>std::sort</code> has a complexity of <code>O(n log n)</code>.</li>\n<li>removal and insertion has a complexity of <code>O(n)</code>.</li>\n<li>rotation has a complexity of <code>O(log n) + O(length_of_rotation)</code>.</li>\n</ul>\n\n<p>You can use <code>std::lower_bound</code> to find the new place and <code>std::rotate</code> to fix order:</p>\n\n<pre><code>void update(std::vector&lt;int&gt;&amp; v, std::vector&lt;int&gt;::iterator old_it, int new_value)\n{\n    if (old_it == v.end()) {\n        return;   \n    }\n    auto it = std::lower_bound(v.begin(), v.end(), new_value);\n    *old_it = new_value;\n\n    if (old_it &lt; it) {\n        std::rotate(old_it, old_it + 1, it);\n    } else if (it &lt; old_it) {\n        std::rotate(it, old_it, old_it + 1);\n    }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/670dc821b02b5a26\" rel=\"nofollow\">Demo</a></p>\n\n<p>The advantage of <code>std::rotate</code> vs <code>remove</code>/<code>insertion</code> is the number of copy/move:\nif you have to swap only the 2 first elements, <code>std::rotate</code> does only the swap, whereas remove shift all elements, and insert shift again the element in the other side.</p>\n"}], "owner": {"reputation": 8548, "user_id": 528590, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/11f6e7c6b69c464212231a550e1c3940?s=128&d=identicon&r=PG", "display_name": "KaiserJohaan", "link": "https://stackoverflow.com/users/528590/kaiserjohaan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1458155720, "creation_date": 1458145810, "last_edit_date": 1458146038, "question_id": 36041553, "link": "https://stackoverflow.com/questions/36041553/sorting-one-element-in-a-sorted-container", "title": "Sorting one element in a sorted container", "body": "<p>I have a vector of sorted objects. At some point one of the objects gets updated and that element (only) has to be sorted again.</p>\n\n<p>What is the best approach? std::sort() on the whole container (if the container is already sorted, is it faster?) or erase() the object and insert() it where it should be?</p>\n\n<p>EDIT: in this case I have to use a vector container</p>\n"}, {"tags": ["c++", "multithreading", "qt", "infinite-loop", "qthread"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458145092, "post_id": 36041166, "comment_id": 59731447, "body": "<code>QThread::wait()</code> might work"}], "answers": [{"comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1458148065, "post_id": 36042199, "comment_id": 59733630, "body": "I think you can simplify this further -- get rid of the waitCondition, and just have setPaused() lock or unlock the mutex as necessary.  That will be enough to keep the thread&#39;s while loop blocked whenever the mutex is locked"}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1458148407, "post_id": 36042199, "comment_id": 59733848, "body": "@JeremyFriesner I guess not. QWaitCondition says the thread to sleep, i.e. the thread won&#39;t eat CPU resources. In case you just check <code>paused</code> and continue the cycle if <code>paused</code> is true the thread will be stiil running and consuming CPU resources."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458152777, "post_id": 36042199, "comment_id": 59736690, "body": "@Evgeny, no, the thread will be blocked on <code>mutex.lock()</code>. I&#39;ve done a similar thing in Java to suspend another thread. Worked perfectly. In fact, this is exactly the case where <code>QMutexLocker(&amp;mutex);</code> would make sense! Because it would just lock/unlock the mutex if it isn&#39;t locked (not paused), and it would block until it&#39;s unlocked otherwise (and then, when you unlock/unpause, it would quickly lock/unlock and continue the loop)."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458153294, "post_id": 36042199, "comment_id": 59737011, "body": "@SergeyTachenov Well, I probably misunderstood the meaning thinking that it was suggested just to remove the waitcondition leaveing the rest as is. But still, I wouldn&#39;t recommend to widely separate mutex locking/unlocking in code. I think mutex is good to protect a critical section on short range but using it as thread blocking control is not a good practice. One day one will encounter a deadlock on unpaired locking. For example, in this case there is a risk to call setPaused(true) twice."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458153790, "post_id": 36042199, "comment_id": 59737320, "body": "Yeah, come to think of it, leaving a mutex locked for a long time certainly sounds like a bad idea. Probably not the best thing I did in that Java app, either."}], "tags": [], "owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1458151078, "last_edit_date": 1458151078, "creation_date": 1458147509, "answer_id": 36042199, "question_id": 36041166, "link": "https://stackoverflow.com/questions/36041166/pausing-qthread-on-infinite-loop/36042199#36042199", "title": "Pausing QThread on infinite loop", "body": "<p>Use <code>paused</code> flag with <code>QMutex</code> and <code>QWaitCondition</code>.</p>\n\n<pre><code>// in header\nQMutex mutex;\nQWaitCondition waitCondition;\n\n// don't forget to false it in constructor\nbool paused;\n\npublic slots:\n   // connect this slot to GUI button toggled(bool) signal\n   void setPaused(enable);\n\n...\n\n// in source\nvoid setPaused(bool enable)\n{\n   mutex.lock();\n   paused=enable;\n   if (!paused)\n      waitCondition.wakeAll();\n   mutex.unlock();\n}\n\nvoid Calculations::run()\n{\n    while (1)\n    {\n        mutex.lock();\n        if (paused)\n        {\n           waitCondition.wait(&amp;mutex);\n        }\n        mutex.unlock();\n\n        unsigned long loopStart = millis();\n\n        //Heavy calculations per second!\n\n        unsigned long loopEnd = millis();\n        if ((loopEnd - loopStart) &lt;= 1000)\n        {\n                delay(1000 - (loopEnd - LoopStart));\n                emit signalResultAvailable;\n        }\n     }\n}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Note, that in your implementation you can use signalResultAvailable() only in slots directly connected to the signal with Qt::DirectConnection. If you want to get it back to the main GUI thread with Qt::QueuedConnection you will never get it there. And be aware that all that you connect with Qt::DirectConnection is invoked in the caller thread, so you can not update GUI in that slot.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Well, there is something more. Look at this construct:</p>\n\n<pre><code>QThread *thread_1 = new Qthread;\ncal.moveToThread(thread_1);\nconnect(thread_1, SIGNAL(started()), &amp;cal, SLOT(run()));\nthread_1-&gt;start();\n</code></pre>\n\n<p>I guess, you want the <code>cal.run()</code> method to be invoked in your <code>thread_1</code>. Sorry, it will be invoked in your current GUI thread. It would be invoked via <code>Qt::AutoConnection</code> in the separate thread if you had declared the <code>void run()</code> as public slot (maybe, it is just hidden behind the <code>//many functions!</code>). </p>\n\n<p>And note again. As I've mentioned, your signal emitted in the custom infinite loop in <code>run()</code> will never go to other thread. Moreover, in your implementation now there is no way to leave your thread: <code>QThread::stop()</code> will not help, because it stops only Qt event loop (which you'll never reach, btw, after you enter your loop) but it does not break the execution in your custom infinite loop.</p>\n"}, {"comments": [{"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "edited": false, "score": 0, "creation_date": 1458149909, "post_id": 36042392, "comment_id": 59734909, "body": "@EvgenyS. QThread&#39;s default run just starts the event loop. The code in the OP uses a infinite loop which is connected to the <code>started</code> signal of the thread. So for the rest of the lifetime of the thread it&#39;s &quot;handling&quot; that slot."}, {"owner": {"reputation": 818, "user_id": 6053990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71be268cc2a2806def3bdc3782b719a2?s=128&d=identicon&r=PG&f=1", "display_name": "Evgeny S.", "link": "https://stackoverflow.com/users/6053990/evgeny-s"}, "edited": false, "score": 0, "creation_date": 1458151396, "post_id": 36042392, "comment_id": 59735851, "body": "Yes, I&#39;ve just missed how they invoke <code>run()</code>. Actually, your method is preferrable for them because with custom infinite loop there are a number of pitfalls they should have considered. With standard event loop and QTimer the queued signals/slots will be fine as well as the thread can be stopped with standard API call."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458153297, "post_id": 36042392, "comment_id": 59737014, "body": "Are you sure that these timer function can be safely called from another thread? Because <code>QTimer</code> certainly can&#39;t (according to its docs), but for these the docs say nothing. But if you make your <code>pause()&#47;restart()</code> methods public slots and call them from the GUI thread using queued connections, I guess it should work fine."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458153787, "post_id": 36042392, "comment_id": 59737318, "body": "@SergeyTachenov At the time it&#39;s called in the constructor it&#39;s in the main thread. Then the object gets moved to another thread. So Calculator::startTimer only gets called in the thread that the Calculator is in."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 1, "creation_date": 1458154139, "post_id": 36042392, "comment_id": 59737506, "body": "<code>startTimer</code> and <code>killTimer</code> get called from whatever thread calls <code>pause()</code> and <code>restart()</code>. If that happens to be the GUI thread (and the OP <i>does</i> want to pause / restart by GUI command), then they will obviously be called from there, <i>unless</i> they are called through a queued/auto connection. So I think you should mention in your answer that these methods shouldn&#39;t be called <i>directly</i> from the GUI thread. Unless I&#39;m missing something."}, {"owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "reply_to_user": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458154806, "post_id": 36042392, "comment_id": 59737875, "body": "@SergeyTachenov I did; &quot;Both <code>pauze</code> and <code>restart</code> are <i>slots connected to</i> their respective buttons.&quot; With the Implication that AutoConnection would be used which will queue automatically."}, {"owner": {"reputation": 22271, "user_id": 540312, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/MD7FS.jpg?s=128&g=1", "display_name": "Sergei Tachenov", "link": "https://stackoverflow.com/users/540312/sergei-tachenov"}, "edited": false, "score": 0, "creation_date": 1458155101, "post_id": 36042392, "comment_id": 59738057, "body": "I see, but IMO it&#39;s worth <i>explicitly</i> mentioning (and even better, documenting in the comments / API docs) that they should <i>not</i> be called from other threads. Otherwise someone, someday may think \u201chey, let&#39;s call this nice slot directly, after all slots may be called directly, right?\u201d Or maybe even better, we could actually check whether the current thread is the right one and if it isn&#39;t, schedule a queued callback to the same function using <code>QTimer::singleShot</code>."}], "tags": [], "owner": {"reputation": 44714, "user_id": 731620, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6e2168c4647a4f096a14c254bd3d3f68?s=128&d=identicon&r=PG", "display_name": "ratchet freak", "link": "https://stackoverflow.com/users/731620/ratchet-freak"}, "is_accepted": true, "score": 3, "last_activity_date": 1458155712, "last_edit_date": 1458155712, "creation_date": 1458148047, "answer_id": 36042392, "question_id": 36041166, "link": "https://stackoverflow.com/questions/36041166/pausing-qthread-on-infinite-loop/36042392#36042392", "title": "Pausing QThread on infinite loop", "body": "<p>You can instead of doing a loop make the Qthread do the looping for you using a timer:</p>\n\n<pre><code>Calculations::Calculations(QObject *parent) :QObject(parent)\n{\n    timerId = startTimer(0);\n}\nCalculations::pauze(){\n    killTimer(timerId);\n    timerId = 0;\n}\nCalculations.restart(){\n    timerId = startTimer(0);\n}\nCalculations::timerEvent(QTimerEvent *event){\n\n\n    //Heavy calculations per second!\n\n\n\n    emit signalResultAvailable;\n\n}\n</code></pre>\n\n<p>Both <code>pauze</code> and <code>restart</code> are slots connected to the <code>clicked</code> signal of their respective buttons.</p>\n\n<p>If you want it to run only once per second then you can pass 1000 instead of 0 to <code>startTimer</code>.</p>\n"}], "owner": {"reputation": 554, "user_id": 6072457, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/zhfel.png?s=128&g=1", "display_name": "WonderfulMe", "link": "https://stackoverflow.com/users/6072457/wonderfulme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "accepted_answer_id": 36042392, "answer_count": 2, "score": 3, "last_activity_date": 1458155712, "creation_date": 1458144807, "last_edit_date": 1495535278, "question_id": 36041166, "link": "https://stackoverflow.com/questions/36041166/pausing-qthread-on-infinite-loop", "title": "Pausing QThread on infinite loop", "body": "<p>I have a Qt gui as <code>QMainWindow</code> which has a <code>QThread</code> that starts a infinite loop of the object of another class.</p>\n\n<p>Here is the brief code:\n<code>Calculations.h</code></p>\n\n<pre><code>Class Calculations : public QObject\n{\npublic:\n//many functions!\nvoid run();\nsignals:\nvoid signalResultAvailable();\nvoid signalECUQueryTimePassed();\nprivate:\n//many things!\n}\n</code></pre>\n\n<p>and <code>Calculations.cpp</code></p>\n\n<pre><code>void Calculations::run()\n{\n    while (1)\n    {\n        unsigned long loopStart = millis();\n\n        //Heavy calculations per second!\n\n        unsigned long loopEnd = millis();\n        if ((loopEnd - loopStart) &lt;= 1000)\n        {\n                delay(1000 - (loopEnd - LoopStart));\n                emit signalResultAvailable;\n        }\n     }\n}\n</code></pre>\n\n<p><code>MainWindow.h</code>is as follows:</p>\n\n<pre><code>Class MainWindow : public QMainWindow\n{\n\nprivate slots:\n    on_button_Pause_clicked();\nprivate:\n    Calculations cal;\n}\n</code></pre>\n\n<p><code>MainWindow.cpp</code>:</p>\n\n<pre><code>MainWindow::MainWIndow() : ui(new Ui::MainWindow), cal()\n{\n    //all the initializations...\n\n    QThread *thread_1 = new Qthread;\n    cal.moveToThread(thread_1);\n    connect(thread_1, SIGNAL(started()), &amp;cal, SLOT(run()));\n    thread_1-&gt;start();\n}\n\nvoid MainWindow::on_buttonPause_clicked()\n{\n    // I want to put the Thread pause HERE!\n}\n</code></pre>\n\n<p>I want to have a Pause button on the GUI, so when the user clicks it pauses the qthread (absolutely GUI must not freeze!) and when a user clicks the Resume button it continues the calculations.\nI've read <a href=\"https://stackoverflow.com/questions/9075837/pause-and-resume-a-qthread\">this</a> topic as well but it didnt help since it uses the QThread subclass as I understood.</p>\n\n<p>Can anybody please help me?</p>\n"}]