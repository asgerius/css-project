[{"tags": ["c++", "eclipse", "opencv", "ubuntu", "build"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463010923, "post_id": 37174940, "comment_id": 61884823, "body": "Please post error messages as verbatim text. Screenshots are rarely helpful (especially if you don&#39;t have enough rep to post them)."}, {"owner": {"reputation": 9, "user_id": 6322833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O4wg2Ai3Rc4/AAAAAAAAAAI/AAAAAAAAAaA/icHzVRKrS1g/photo.jpg?sz=128", "display_name": "EArevalo", "link": "https://stackoverflow.com/users/6322833/earevalo"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463011404, "post_id": 37174940, "comment_id": 61884942, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 Thanks for the reply. You think is a problem with the libraries?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463011470, "post_id": 37174940, "comment_id": 61884958, "body": "Sure, you probably missed to specify the appropriate libraries for linking. The more general dupe is linked in the answer: <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}], "owner": {"reputation": 9, "user_id": 6322833, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-O4wg2Ai3Rc4/AAAAAAAAAAI/AAAAAAAAAaA/icHzVRKrS1g/photo.jpg?sz=128", "display_name": "EArevalo", "link": "https://stackoverflow.com/users/6322833/earevalo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 11, "favorite_count": 0, "closed_date": 1463011013, "answer_count": 0, "score": 0, "last_activity_date": 1463010845, "creation_date": 1463009804, "last_edit_date": 1463010845, "question_id": 37174940, "link": "https://stackoverflow.com/questions/37174940/opencv-2-4-12-build-error-on-ubuntu-12-04-with-eclipse", "closed_reason": "Duplicate", "title": "OpenCV 2.4.12 build error on Ubuntu 12.04 with Eclipse", "body": "<p>I'm currently testing OpenCV with a program I've found on the Internet. Here is the code:</p>\n\n<pre><code>#include &lt;cv.h&gt;\n#include &lt;highgui.h&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;opencv2/highgui/highgui_c.h&gt;\n\nusing namespace cv;\n\nint main( int argc, char** argv )\n{\n  Mat image;\n  image = imread( argv[1], 1 );\n\n  if( argc != 2 || !image.data )\n    {\n      printf( \"No image data \\n\" );\n      return -1;\n    }\n\n  namedWindow( \"Display Image\", CV_WINDOW_AUTOSIZE );\n  imshow( \"Display Image\", image );\n\n  waitKey(0);\n\n  return 0;\n}\n</code></pre>\n\n<p>The problem appears when I try to build the project on Eclipse Platform v3.7.2, I get this error (please refer to the attached photos below), but I don't know how I can fix it, can anybody help?</p>\n\n<p><a href=\"https://i.stack.imgur.com/rSViV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rSViV.png\" alt=\"Error 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FeXan.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FeXan.png\" alt=\"Error 2\"></a></p>\n"}, {"tags": ["c++", "unit-testing", "visual-studio-2015"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 5, "creation_date": 1463008857, "post_id": 37174750, "comment_id": 61884231, "body": "<i>&quot; I could create a different project  ...&quot;</i> So you are working with some particular IDE? For most of them having a separate unit testing project is the right way to go."}, {"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463009058, "post_id": 37174750, "comment_id": 61884289, "body": "Oh,  my bad! I use VS2015 and I edited my question with it. I thought a new project was &quot;overkill&quot; , but I&#39;m going to look into that now"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 5, "creation_date": 1463009111, "post_id": 37174750, "comment_id": 61884302, "body": "VS has a built-in testing project template and test system built-in (MSTest). Look at VS&#39; documentation."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1463009207, "post_id": 37174750, "comment_id": 61884340, "body": "@Dai Can&#39;t upvote your comment (out of votes today), but I was about writing merely the same."}, {"owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "edited": false, "score": 0, "creation_date": 1463009526, "post_id": 37174750, "comment_id": 61884420, "body": "Thank you! I&#39;m going to look into that too, looks promising."}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "edited": false, "score": 0, "creation_date": 1463012053, "post_id": 37174750, "comment_id": 61885105, "body": "Just test your library the same way a user would use your library."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1463012799, "post_id": 37174750, "comment_id": 61885286, "body": "also could also consider google test (very easy) and boost::test (slightly harder to set up)"}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 1, "last_activity_date": 1463012796, "creation_date": 1463012796, "answer_id": 37175338, "question_id": 37174750, "link": "https://stackoverflow.com/questions/37174750/unit-testing-c-static-library/37175338#37175338", "title": "Unit Testing C++ static library", "body": "<blockquote>\n  <p>However, due to the nature of static libraries, I can't run a main() function on them... though that's exactly what I'd like to do.</p>\n</blockquote>\n\n<p>For unit testing, it ends up that you'll need to have a <code>main()</code> function that triggers running the tests (that's what's called a <em>test runner</em>).</p>\n\n<p>You're right, that you can't provide a <code>main()</code> function with your library, since this would lead to clashes with other programs that link to your library.</p>\n\n<p>So, for most build systems (or IDEs) that's built as a separate target (project), that involves to build the executable test runner target.</p>\n\n<p>VS2015 has a <a href=\"https://www.visualstudio.com/en-us/get-started/code/create-and-run-unit-tests-vs\" rel=\"nofollow\">builtin project template</a> to provide this functionality.</p>\n\n<p>Other build systems might rely to unit-testing frameworks like <a href=\"https://github.com/google/googletest\" rel=\"nofollow\">gtest</a> that also provides a <code>main()</code> to realize the test runner on demand. </p>\n"}], "owner": {"reputation": 181, "user_id": 5890209, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a5bb8c367a0aa588cb1927969dc0f75c?s=128&d=identicon&r=PG&f=1", "display_name": "Spook", "link": "https://stackoverflow.com/users/5890209/spook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1868, "favorite_count": 1, "accepted_answer_id": 37175338, "answer_count": 1, "score": 0, "last_activity_date": 1463012796, "creation_date": 1463008380, "last_edit_date": 1463009239, "question_id": 37174750, "link": "https://stackoverflow.com/questions/37174750/unit-testing-c-static-library", "title": "Unit Testing C++ static library", "body": "<p>I've made a small C++ library and I'd like to test it. However, due to the nature of static libraries, I can't run   a main()  function on them... though that's exactly what I'd like to do. I want to create a simple header and source files that make use of the library's classes, so I can debug it if anything doesn't go well. I could create a different project but I'm not sure if that's the correct way to go. \nIs there any other way I could do that?  I'm using Visual Studio 2015 as the IDE. </p>\n"}, {"tags": ["java", "c++", "gcc", "gcj"], "answers": [{"comments": [{"owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "edited": false, "score": 0, "creation_date": 1463051205, "post_id": 37181746, "comment_id": 61902919, "body": "Yes, it does seem obvious after your explanation. I guess I should have come up with this myself. Thanks."}], "tags": [], "owner": {"reputation": 3574, "user_id": 5793987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057299226b268d59f2faa0b3f1d1112?s=128&d=identicon&r=PG", "display_name": "gudok", "link": "https://stackoverflow.com/users/5793987/gudok"}, "is_accepted": true, "score": 1, "last_activity_date": 1463042826, "creation_date": 1463042826, "answer_id": 37181746, "question_id": 37174740, "link": "https://stackoverflow.com/questions/37174740/instantiating-a-template-class-in-cni-c-code/37181746#37181746", "title": "instantiating a template class in CNI/C++ code", "body": "<p>Not a CNI user, but the reason for this one seems to be obvious enough. </p>\n\n<p>Generic specification <code>java.util.Stack&lt;T&gt;</code> in Java is only a compile time constraint that checks that you add objects of type compatible with T. Internally, <code>java.util.Stack</code> has only single implementation which accepts all types of <code>Object</code>s (actually, <em>references</em> to all types of objects). You may even trick compiler into addding not an instance of T by using unsafe conversions. So, <code>java.util.Stack&lt;String&gt;</code> and <code>java.util.Stack&lt;Date&gt;</code> are the same internally.</p>\n\n<p>C++ is different. Instantiation of the same template with different arguments creates different incompatible types. For example, <code>std::stack&lt;int&gt;</code>, <code>std::stack&lt;int*&gt;</code> and <code>std::stack&lt;char&gt;</code> are totally different implementations and have different code. C++ template mechanism is a superset of java generics.</p>\n\n<p>If, for example, you wanted to get Java functionality in C++, you would write <code>std::stack&lt;void*&gt;</code> even if you wanted to store objects of some particular type T. Type conversion to T has to be done manually.</p>\n\n<p>CNI does the same thing. It instantiates the only one implementation of <code>java.util.Stack</code> which can accept all types of objects. </p>\n"}], "owner": {"reputation": 328, "user_id": 4768463, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/02e9b7b066da2e7d2373ea09fcb63e33?s=128&d=identicon&r=PG&f=1", "display_name": "Aviv", "link": "https://stackoverflow.com/users/4768463/aviv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 37181746, "answer_count": 1, "score": 0, "last_activity_date": 1463042826, "creation_date": 1463008307, "last_edit_date": 1463035931, "question_id": 37174740, "link": "https://stackoverflow.com/questions/37174740/instantiating-a-template-class-in-cni-c-code", "title": "instantiating a template class in CNI/C++ code", "body": "<p>I have been fooling around with CNI in order to interpolate Java and C++ code for the last few hours.</p>\n\n<p>While I was looking the possibility to use the Java collections as a replacement for my old team missing <code>libstd</code>, I tried to create a <code>java.util.Stack</code> object and manipulate it.</p>\n\n<p>However, the compiler (<code>gcc</code> and <code>gcj</code>, in that probably the same) seems to play his cheap tricks upon my innocent mind:</p>\n\n<pre><code># gcc -g -I. test.cc\ntest.cc: In function \u2018int main(int, char**)\u2019:\ntest.cc:24:3: error: \u2018java::util::Stack\u2019 is not a template\n   Stack&lt;Person&gt; *stack = new Stack&lt;Person&gt;();\n   ^\ntest.cc:24:30: error: \u2018java::util::Stack\u2019 is not a template\n   Stack&lt;Person&gt; *stack = new Stack&lt;Person&gt;();\n</code></pre>\n\n<p>(the Person object is well defined java class)</p>\n\n<p>Only when I removed the type argument specification, It let me use the data-structure, as if the type argument was chosen to be<code>java.lang.Object</code>. The <a href=\"https://gcc.gnu.org/onlinedocs/gcj/About-CNI.html\" rel=\"nofollow\">CNI docs</a> seems to mention nothing about it at all! no words about templates indeed.</p>\n\n<p>Does anyone know about using templates in CNI context? is it supported? I searched <code>google</code> and <code>stackoverflow</code> for answers, but couldn't come with the slightest clue. Any help will be appreciated.</p>\n\n<p>In addition, I would like to know if i'm using a gcc 2.95.2 (is there a gcj for that gcc version?)</p>\n\n<p>I am working on <code>Virtual Boxed</code> <code>Ubunto 12</code> over <code>windows 10</code> host. \nMore importantly <code>gcj</code> and <code>gcc</code> versions stands on <code>4.8.4</code>\n<code>java --version</code> yields <code>1.5</code> and <code>libgcj 4.8.4</code></p>\n"}, {"tags": ["c++", "inheritance", "function-pointers", "virtual"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1463008445, "post_id": 37174724, "comment_id": 61884128, "body": "Why? Did you find a compiler that allows this and are wondering if it is standard C++?"}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1463008482, "post_id": 37174724, "comment_id": 61884137, "body": "@juanchopanza Just curious...haven&#39;t actually written any code yet"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 3, "creation_date": 1463008484, "post_id": 37174724, "comment_id": 61884139, "body": "&quot;it basically stores a function pointer in the class&quot; - not quite. Vtable implementations store a pointer to a table of function pointers, but that table is shared between all objects of the class."}, {"owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1463008558, "post_id": 37174724, "comment_id": 61884161, "body": "@aschepler That is probably a more space efficient way to do it then I had in my mind"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1463010526, "post_id": 37174724, "comment_id": 61884713, "body": "There might not be a vtable. The vtable is a common solution to virtual functions, but not one required by the standard."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1463011434, "post_id": 37174724, "comment_id": 61884953, "body": "Please review the difference between a pointer to a function and a pointer to a member function."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463010711, "post_id": 37174741, "comment_id": 61884764, "body": "Not to forget the opportunity to exchange whole abstract interfaces at runtime. Very useful to provide State Pattern implementations."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 10, "last_activity_date": 1463008310, "last_edit_date": 1490005771, "creation_date": 1463008310, "answer_id": 37174741, "question_id": 37174724, "link": "https://stackoverflow.com/questions/37174724/is-reassigning-a-virtual-function-legal/37174741#37174741", "title": "Is reassigning a virtual function legal", "body": "<p>No, there are no circumstances under which a function may be reassigned.</p>\n\n<p>You can, however, reassign a function pointer, but whether this will be useful depends on what you are actually trying to do. <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem</a></p>\n"}, {"tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 3, "last_activity_date": 1463008407, "creation_date": 1463008407, "answer_id": 37174757, "question_id": 37174724, "link": "https://stackoverflow.com/questions/37174724/is-reassigning-a-virtual-function-legal/37174757#37174757", "title": "Is reassigning a virtual function legal", "body": "<p>No, it is not possible to re-assign a function. </p>\n\n<p>You can do 2 things to get a different function behavior:</p>\n\n<ol>\n<li>Use a function pointer.</li>\n<li>Inherit from this class and override the function.</li>\n</ol>\n\n<p>It is likely that neither of these ways are an elegant solution to the problem you have.</p>\n\n<hr>\n\n<p>An example of a function pointer might be:</p>\n\n<pre><code>struct A{\n  virtual void (*pSomeFunc)(void);\n};\n\n...\n\nA a;\na.pSomeFunc = &amp;aRandomFunc;\na.pSomeFunc();\n</code></pre>\n\n<hr>\n\n<p>An inheritance example might be:</p>\n\n<pre><code>struct AWithDifferentFuncAbility : public A {\n    virtual void someFunc() {\n       //some new functionality;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 0, "last_activity_date": 1472178455, "creation_date": 1472178455, "answer_id": 39157454, "question_id": 37174724, "link": "https://stackoverflow.com/questions/37174724/is-reassigning-a-virtual-function-legal/39157454#39157454", "title": "Is reassigning a virtual function legal", "body": "<p>you should try <code>std::function</code>, it does something close to what you need.</p>\n\n<p>Here's how you can do it with this class:</p>\n\n<pre><code>struct A{\n  std::function&lt;void()&gt; someFunc = []{ /* default implementation */ };\n};\n</code></pre>\n\n<p>And then you can change what function it is later:</p>\n\n<pre><code>void aRandomFunc();\nA mya;\nmya.someFunc = &amp;aRandomFunc;\n</code></pre>\n\n<p>Or even replace it with another lambda:</p>\n\n<pre><code>mya.someFunc = []{ /* another function */ };\n</code></pre>\n"}], "owner": {"reputation": 3647, "user_id": 6149078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/mGEdb.jpg?s=128&g=1", "display_name": "DarthRubik", "link": "https://stackoverflow.com/users/6149078/darthrubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 37174741, "answer_count": 3, "score": 3, "last_activity_date": 1472178455, "creation_date": 1463008201, "question_id": 37174724, "link": "https://stackoverflow.com/questions/37174724/is-reassigning-a-virtual-function-legal", "title": "Is reassigning a virtual function legal", "body": "<p>Suppose I have a class like this:</p>\n\n<pre><code>struct A{\n  virtual void someFunc() { }\n};\n</code></pre>\n\n<p>Is it possible to reassign the virtual function to another function....This might be possible because it basically stores a function pointer in the class so that it can be <code>virtual</code>.</p>\n\n<p>I realize that something like this:</p>\n\n<pre><code>void aRandomFunc();\nA mya;\nmya.someFunc = &amp;aRandomFunc;\n</code></pre>\n\n<p>Is probably impossible because member functions take a <code>this</code> pointer as an implicit parameter.</p>\n\n<p>But is it possible to reassign a member function to another member function?</p>\n"}, {"tags": ["c++", "algorithm", "c++11", "decode", "compression"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1463007644, "post_id": 37174562, "comment_id": 61883890, "body": "@NonCreature0714: What is the decompression algorithm?  What&#39;s the sample input?"}, {"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1463007739, "post_id": 37174562, "comment_id": 61883911, "body": "@MooingDuck thanks for the question. The sample input is the first char array displayed in the question: <code>unsigned char bytes[25] = {9,0,207,176,159,163,255,33,58,115,199,255,255,181,223,67,10&zwnj;&#8203;2,69,173,6,35,103,24&zwnj;&#8203;5,160,164 };</code>"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 5, "creation_date": 1463007749, "post_id": 37174562, "comment_id": 61883915, "body": "Right off the bat you&#39;re using <code>|=</code> on an uninitialized variable, which is problematic."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1463007823, "post_id": 37174562, "comment_id": 61883941, "body": "Also, <code>buffer &amp; 0xFFFF</code> doesn&#39;t do anything."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1463016982, "post_id": 37174562, "comment_id": 61886188, "body": "0xffff appears to be a 16 bit mask, or perhaps the bottom half of a 32 bit mask.  buffer and result are declared as int.  Do you know the size of int on your machine?  (on my machine/compiler, an int is 32 bits).  Consider using uintxx_t for all 3 items."}], "answers": [{"comments": [{"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1463074749, "post_id": 37175151, "comment_id": 61920240, "body": "This answer is excellent, and a great example of good generic programming, and demonstrates great use of the STL and knowledge of it. This is certainly the way I will be approaching bitwise obstacles in the future. Unfortunately I can&#39;t select it as the answer because it gave me an entirely new \u2013 <i>and better</i> \u2013 way to solve my problem, rather than indicate my particular mistakes. Thank you for your contribution to my personal knowledge and to stack overflow on the whole."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 1, "creation_date": 1463075475, "post_id": 37175151, "comment_id": 61920681, "body": "@NonCreature0714 You are absolutely welcome. Learning the stl is probably the single most important step for any c++ programmer. Why build scaffolding when we can stand on the shoulders of giants?"}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1463012191, "last_edit_date": 1463012191, "creation_date": 1463011356, "answer_id": 37175151, "question_id": 37174562, "link": "https://stackoverflow.com/questions/37174562/c-bit-operations-how-to-decode-decompress-char-to-int-and-display-correct/37175151#37175151", "title": "C++ Bit Operations: How to decode / decompress char to int, and display correct string?", "body": "<p>One way to approach this is to treat the code extraction as an iterator (in this case a forward_only iterator for simplicity).</p>\n\n<p>This allows you to employ std algorithms for the logic while leaving the iterator to extract chunks of 5 bits.</p>\n\n<p>Here's a (simple) example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n#include &lt;iterator&gt;\n#include &lt;algorithm&gt;\n\ntemplate&lt;std::size_t Bits&gt;\nstruct bit_iterator\n{\n    bit_iterator(const unsigned char* buffer, std::size_t bitnum)\n    : _buffer(buffer)\n    , _bitnum(bitnum)\n    {}\n\n    std::size_t operator*() {\n        std::size_t result = 0;\n        for(std::size_t count = 0 ; count &lt; Bits ; ++count)\n        {\n            auto bit = 7 - (_bitnum % 8);\n            auto byte = _bitnum / 8;\n            auto val = _buffer[byte] &amp; (1 &lt;&lt; bit);\n            if (val) {\n                result |= 1 &lt;&lt; ((Bits-1) - count);\n            }\n            ++_bitnum;\n        }\n        return result;\n    }\n\n    bit_iterator&lt;Bits&gt;&amp; operator++() {\n        return *this;\n    }\n\n    bool operator==(const bit_iterator&lt;Bits&gt;&amp; r) const {\n        return _buffer == r._buffer &amp;&amp; (_bitnum + Bits) &gt; r._bitnum;\n    }\n\n    bool operator!=(const bit_iterator&lt;Bits&gt;&amp; r) const {\n        return !(*this == r);\n    }\n\n    const unsigned char* _buffer;\n    std::size_t _bitnum;\n};\n\nstruct to_char\n{\n\n    char operator()(std::size_t index) const {\n        return symbols[index];\n    }\n    static const char symbols[27];\n};\n\nconst char to_char::symbols[27] = {\n    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I',\n    'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R',\n    'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' '\n};\n\nint main()\n{\n    static const unsigned char bytes[25] = { 9,0,207,176,159,163,255,33,58,115,\n        199,255,255,181,223,67,102,69,173,\n        6,35,103,245,160,164 };\n\n\n    // stream to stdout\n\n    std::transform(bit_iterator&lt;5&gt;(bytes, 0),\n                   bit_iterator&lt;5&gt;(bytes, std::extent&lt;decltype(bytes)&gt;::value * 8),\n                   std::ostream_iterator&lt;char&gt;(std::cout),\n                   to_char());\n    std::cout &lt;&lt; std::endl;\n\n    // or to a string\n    std::string result;\n    std::transform(bit_iterator&lt;5&gt;(bytes, 0),\n                   bit_iterator&lt;5&gt;(bytes, std::extent&lt;decltype(bytes)&gt;::value * 8),\n                   std::back_inserter(result),\n                   to_char());\n    std::cout &lt;&lt; result &lt;&lt; std::endl;\n\n    // or just print the codes\n    std::copy(bit_iterator&lt;5&gt;(bytes, 0),\n              bit_iterator&lt;5&gt;(bytes, std::extent&lt;decltype(bytes)&gt;::value * 8),\n              std::ostream_iterator&lt;std::size_t&gt;(std::cout, \", \"));\n    std::cout &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>BEAM?ME?UP?SCOTTY????NO?INTELLIGENT?LIFE\nBEAM?ME?UP?SCOTTY????NO?INTELLIGENT?LIFE\n1, 4, 0, 12, 31, 12, 4, 31, 20, 15, 31, 18, 2, 14, 19, 19, 24, 31, 31, 31, 31, 13, 14, 31, 8, 13, 19, 4, 11, 11, 8, 6, 4, 13, 19, 31, 11, 8, 5, 4, \n</code></pre>\n\n<p>Printing out the codes may help to diagnose the encoding problem.</p>\n"}, {"comments": [{"owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "edited": false, "score": 0, "creation_date": 1463075004, "post_id": 37175593, "comment_id": 61920394, "body": "Given two great answers, I selected Harry&#39;s as the answer because he clearly indicated to my mistakes and provided straightforward guidance. By indicating the critical flaws I needed to receive education on, I&#39;ve taken a little step forward."}], "tags": [], "owner": {"reputation": 10563, "user_id": 1104328, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df0790774838286ad0d93567ae1fcf56?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/1104328/harry"}, "is_accepted": true, "score": 1, "last_activity_date": 1463014815, "creation_date": 1463014815, "answer_id": 37175593, "question_id": 37174562, "link": "https://stackoverflow.com/questions/37174562/c-bit-operations-how-to-decode-decompress-char-to-int-and-display-correct/37175593#37175593", "title": "C++ Bit Operations: How to decode / decompress char to int, and display correct string?", "body": "<p>This line is not doing what you think it's doing, I commented it out... </p>\n\n<pre><code>result |= (buffer &amp; 0xFFFF); //copy buffer to result.\n</code></pre>\n\n<p>It's not copying it. This is working code, note I've also changed the types used in bit manipulations to be unsigned in the following. The code produces </p>\n\n<pre><code>BEAMMEUPSCOTTYNOINTELLIGENTLIFE\n</code></pre>\n\n<p>which I believe is what you're trying to get. Code as follows, note, I think the C++ gurus on SO could make this look a lot neater.</p>\n\n<pre><code>#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;stack&gt;\n#include &lt;cassert&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nusing namespace std;\nconst int READIBLE_AMOUNT = 5;\n\nconst char symbols[27] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I',\n  'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R',\n  'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' '};\n\ninline void bitWiseOpsDemo(unsigned char *bytey, size_t sizeOfArray){\n  assert(sizeOfArray == 25);\n  //const int READIBLE_AMOUNT = 5;\n  unsigned int result = 0;\n  stringstream stringOfCharacters;\n  string words;\n  int numBitsReadible = 0;\n  int shift;\n  unsigned int indexInto;\n  unsigned short buffer = 0; //will be used to hold bits\n  //sizeOfArray = 1; //Only want to loop once right now for testing purposes. Comment out later.\n  int whileLoopIndex = 0;\n  //int innerLoopIndex = 0;\n  while(whileLoopIndex &lt; sizeOfArray) {\n    (buffer |= (bytey[whileLoopIndex]) &amp; 0xFF);\n    numBitsReadible += 8;\n    //result |= (buffer &amp; 0xFFFF); //copy buffer to result.\n    result = buffer;\n    while(numBitsReadible&gt;=READIBLE_AMOUNT){//While readible, read\n      result |= (buffer &amp; 0xFFFF); //copy buffer to result.\n      indexInto = result;\n      result &lt;&lt;=5;\n      //Only want to manipulate the 'result' here\n      numBitsReadible -= 5; //Reducd the amount of bytes readible by 5.\n      //calculate the amount to shift result by\n      shift = numBitsReadible;\n      result &lt;&lt;= shift;\n      indexInto &gt;&gt;=shift;\n      //set all bits to 0, except the five we want in mask\n      (indexInto &amp;= 0x1F);\n\n      stringOfCharacters &lt;&lt; symbols[indexInto]; //Get symbol and store in streamstring\n      if(numBitsReadible==0) {\n        (result &amp;= 0x0000); //Flush buffer if none readible.\n      }   \n    }   \n    buffer |= (result &amp;= 0xFF00); // Change 'Y', not 'x': YYYYYYYY xxxxxxxx\n    buffer &lt;&lt;= 8; //Make room in buffer for next char\n    ++whileLoopIndex;\n  }\n  words = stringOfCharacters.str();\n  cout &lt;&lt; words &lt;&lt; endl;\n}\n\n\nconst size_t SIZE = 25; \n\nint main() {\n  unsigned char bytes[SIZE] = {9, 0, 207, 176, 159, 163, 255, 33, 58, 115, 199, 255, 255, 181, 223, 67, 102, 69, 173, 6, 35, 103, 245, 160, 164};\n  bitWiseOpsDemo(bytes, SIZE);\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 4300, "user_id": 4513509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/MAkrs.png?s=128&g=1", "display_name": "NonCreature0714", "link": "https://stackoverflow.com/users/4513509/noncreature0714"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 708, "favorite_count": 0, "accepted_answer_id": 37175593, "answer_count": 2, "score": 2, "last_activity_date": 1463014815, "creation_date": 1463007156, "last_edit_date": 1463007354, "question_id": 37174562, "link": "https://stackoverflow.com/questions/37174562/c-bit-operations-how-to-decode-decompress-char-to-int-and-display-correct", "title": "C++ Bit Operations: How to decode / decompress char to int, and display correct string?", "body": "<p>I'm studying bit operations. Starting at the 8th iteration of my decode/decompress algorithm, my bits begin to drift in and out of control, and I need some help from a more experienced/smarter person, so my bits don't drift. I've been through it in my debugger too many times to count and I still can't nail it down. I suspect that at some point I shift a bit left or right too far by 1 or more. Full program is on Github <a href=\"https://github.com/NonCreature0714/Bit_Operations\" rel=\"nofollow\">here</a>.</p>\n\n<p>Input to decode/decompress is: </p>\n\n<pre><code>unsigned char bytes[25] = { 9,0,207,176,159,163,255,33,58,115,\n                              199,255,255,181,223,67,102,69,173,\n                              6,35,103,245,160,164 };\n</code></pre>\n\n<p>Reference array is: </p>\n\n<pre><code>const char symbols[27] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I',\n                          'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R',\n                          'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', ' '};\n</code></pre>\n\n<p>Output from the decoded 'bytes' char array is: </p>\n\n<pre><code>'BEAM_ME_UP_SGO_TY____N__INTU_LYGENT__IFE' //Underscores represent space.\n</code></pre>\n\n<p>Using Libraries:</p>\n\n<pre><code>#include &lt;bitset&gt;\n#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;stack&gt;\n#include &lt;cassert&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n</code></pre>\n\n<p>Algorithm function:</p>\n\n<pre><code>/* Function reads one char at a time, and converts chars to int.\n * Resulting integer value then indexes into char array of 27 chars\n * A-Z and 'space', storing results in string stream.\n * */\n\nvoid bitWiseOpsDemo(unsigned char *bytey, size_t sizeOfArray){ //Input char array and size.\n    assert(sizeOfArray&gt;0);\n    const int READIBLE_AMOUNT = 5;\n    int result;\n    stringstream stringOfCharacters;\n    string words;\n    int numBitsReadible = 0;\n    int shift;\n    int indexInto;\n    short buffer; //will be used to hold bits\n    int whileLoopIndex = 0;\n\n    while(whileLoopIndex&lt;sizeOfArray) {\n        (buffer |= (bytey[whileLoopIndex]) &amp; 0xFF);\n        numBitsReadible += 8;\n        result |= (buffer &amp; 0xFFFF); //copy buffer to result.\n        while(numBitsReadible&gt;=READIBLE_AMOUNT){//While readible, read\n            result |= (buffer &amp; 0xFFFF); //copy buffer to result.\n            indexInto = result;\n            result &lt;&lt;=5;\n            numBitsReadible -= 5; //Reducd the amount of bytes readible by 5.\n\n            //calculate the amount to shift result by\n            shift = numBitsReadible;\n            result &lt;&lt;= shift;\n            indexInto &gt;&gt;=shift;\n\n            (indexInto &amp;= 0x1F); //set all bits to 0, except the five we want in mask\n            stringOfCharacters &lt;&lt; symbols[indexInto]; //Get symbol and store in streamstring\n            if(numBitsReadible==0){\n                (result &amp;= 0x0000); //Flush buffer if none readible.\n            }\n        }\n        buffer |= (result &amp;= 0xFF00); // Change 'Y', not 'x': YYYYYYYY xxxxxxxx\n        buffer &lt;&lt;= 8; //Make room in buffer for next char\n        ++whileLoopIndex;\n    }\n    words = stringOfCharacters.str();\n    cout &lt;&lt; words &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "cocos2d-iphone", "cocos2d-x", "cocos2d-android"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1463007481, "post_id": 37174553, "comment_id": 61883843, "body": "<i>&quot;Is there something i&#39;m missing?&quot;</i> - Yes, you forgot to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> in your post."}, {"owner": {"reputation": 1829, "user_id": 553380, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/CBLh1.jpg?s=128&g=1", "display_name": "MduSenthil", "link": "https://stackoverflow.com/users/553380/mdusenthil"}, "edited": false, "score": 0, "creation_date": 1464767878, "post_id": 37174553, "comment_id": 62613053, "body": "Add a CCLOG before &quot;if&quot; to check whether onContactBegin is working or not."}, {"owner": {"reputation": 11, "user_id": 6322737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f9c192da83745fda2430b30e979de8?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Calcagni", "link": "https://stackoverflow.com/users/6322737/damiano-calcagni"}, "edited": false, "score": 0, "creation_date": 1464876279, "post_id": 37174553, "comment_id": 62673043, "body": "Already tried...not working"}], "owner": {"reputation": 11, "user_id": 6322737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f9c192da83745fda2430b30e979de8?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Calcagni", "link": "https://stackoverflow.com/users/6322737/damiano-calcagni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463011786, "creation_date": 1463007105, "last_edit_date": 1463011786, "question_id": 37174553, "link": "https://stackoverflow.com/questions/37174553/cocos2d-c-collision-between-edge-physics-bodies", "title": "cocos2d c++ Collision between edge physics bodies", "body": "<h2>I'm working on a game with cocos2d, need to detect collision between two PhysicsEdgeBody.</h2>\n\n<p><strong>I've created an EventListener for contact and added it to the layer i'm working on, PhysicsContact and Collisions between two PhysicsBody or PhysicsBody and PhysicsEdgeBody works fine, but whith two PhysicsEdgeBody it doesn't work at all.</strong></p>\n\n<p>Already tried to: </p>\n\n<ul>\n<li>set the value of contactTestBitmask, collisionBitmask and categoryBitmask.</li>\n<li>change the value of mass and moment since theirs default value is PHYSICS_INFINITY</li>\n<li>set both the bodies dynamics</li>\n<li>change the materials</li>\n<li>add an event listener for groups and set them on the bodies</li>\n</ul>\n\n<p>but still not working.</p>\n\n<p>Is there something i'm missing? </p>\n\n<p><strong>Here's an example of the GameScene created with:</strong> <code>Scene::createWithPhysics()</code></p>\n\n<p><strong>Also added the command:</strong> <code>scene-&gt;getPhysicsWorld()-&gt;setDebugDrawMask(DEBUGDRAW_ALL);</code></p>\n\n<pre><code>//Node and PhysicsBody creation\nPhysicsBody* bodyA = PhysicsBody::createEdgeBox(someSize, somePhysicsMaterial);\n\nbodyA-&gt;setDynamic(true);\nbodyA-&gt;setMass(100);\nbodyA-&gt;setCategoryBitmask(0X01);       //0001\nbodyA-&gt;setCollisionBitmask(0X02);      //0010\nbodyA-&gt;setContactTestBitmask(0X02);    //0010\n\nPhysicsBody* bodyB = PhysicsBody::createEdgeSegment(Vec2::ZERO, Vec2(visibleSize.width, 0), somePhysicsMaterial);\n\nbodyB-&gt;setDynamic(true);\nbodyB-&gt;setMass(100);\nbodyB-&gt;setCategoryBitmask(0X02);       //0010\nbodyB-&gt;setCollisionBitmask(0X01);      //0001\nbodyB-&gt;setContactTestBitmask(0X01);    //0001\n\nNode* nodeA = Node::create();\n\nnodeA-&gt;setPosition(visibleCenter);\nnodeA-&gt;setPhysicsBody(bodyA);\n\nNode* nodeB = Node::create();\n\nnodeB-&gt;setPosition(Vec2::ZERO);\nnodeB-&gt;setPhysicsBody(bodyB);\n\nthis-&gt;addChild(nodeA);\nthis-&gt;addChild(nodeB);\n\n//EventListener creation\nauto cListener = EventListenerPhysicsContact::create();\n\ncListener-&gt;onContactBegan = CC_CALLBACK__1(GameScene::onContactBegan, this);\ncListener-&gt;onContactPreSolve = CC_CALLBACK_\"(GameScene::onContactPreSolve, this);\n\nthis-&gt;getEventDispatcher()-&gt;addEventListenerWithSceneGraphPriority(cListener, this);\n</code></pre>\n\n<p>This callback is never called, even when the two bodies collide on the screen.</p>\n\n<pre><code>//onContactBegan Callback\nbool GameScene::onContactBegan(PhysicsContact &amp;contact)\n{\n    PhysicsBody *bodyA = contact.getShapeA()-&gt;getPhysicsBody();\n    PhysicsBody *bodyB = contact.getShapeB()-&gt;getPhysicsBody();\n\n    if ((bodyA-&gt;getCategoryBitmask() == 0X01 &amp;&amp; bodyB-&gt;getCategoryBitmask() == 0X02) ||\n        (bodyA-&gt;getCategoryBitmask() == 0X02 &amp;&amp; bodyB-&gt;getCategoryBitmask() == 0X01))\n    {\n        CCLOG(\"COLLISION\");\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "tuples", "variadic-templates", "template-meta-programming"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1463008739, "post_id": 37174489, "comment_id": 61884199, "body": "Replace the types in the tree with indices. Look at them closely. Do you see any relationship between the value of a node and its children? Then think about how you can exploit that relationship to do an in-order traversal of the tree."}], "answers": [{"tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1463010137, "last_edit_date": 1463010137, "creation_date": 1463009678, "answer_id": 37174927, "question_id": 37174489, "link": "https://stackoverflow.com/questions/37174489/compile-time-rearrangement-of-types-in-a-tuple/37174927#37174927", "title": "Compile-time rearrangement of types in a tuple", "body": "<p>Concatenate three <code>std::index_sequence</code>s (trivial to generalize, but I just need exactly three here):</p>\n\n<pre><code>template&lt;size_t... Seq1, size_t... Seq2, size_t... Seq3&gt;\nauto concat3_impl(std::index_sequence&lt;Seq1...&gt;, \n                  std::index_sequence&lt;Seq2...&gt;,\n                  std::index_sequence&lt;Seq3...&gt;)\n  -&gt; std::index_sequence&lt;Seq1..., Seq2..., Seq3...&gt;;\n\ntemplate&lt;class...Ts&gt;\nusing concat3 = decltype(concat3_impl(Ts{}...));\n</code></pre>\n\n<p>In-order traversal for a complete binary tree whose level-order traversal is <code>0, 1, ..., (max - 1)</code>:</p>\n\n<pre><code>template&lt;size_t start, size_t max, bool = (start &lt; max) &gt;\nstruct in_order;\n\ntemplate&lt;size_t start, size_t max&gt;\nusing in_order_t = typename in_order&lt;start, max&gt;::type;\n\ntemplate&lt;size_t start, size_t max, bool &gt;\nstruct in_order {\n    using type = concat3&lt;in_order_t&lt;2*start + 1, max&gt;, \n                         std::index_sequence&lt;start&gt;,\n                         in_order_t&lt;2*start + 2, max&gt;&gt;;\n};\n\ntemplate&lt;size_t start, size_t max &gt;\nstruct in_order&lt;start, max, false&gt; {\n    using type = std::index_sequence&lt;&gt;;\n};\n</code></pre>\n\n<p>Reorder a tuple according to a list of indices:</p>\n\n<pre><code>template&lt;class Tuple, size_t...Is&gt;\nauto reorder_by_index_impl(std::index_sequence&lt;Is...&gt;)\n    -&gt; std::tuple&lt;std::tuple_element_t&lt;Is, Tuple&gt;...&gt;;\n\ntemplate&lt;class Tuple, class Index&gt;\nusing reorder_by_index = decltype(reorder_by_index_impl&lt;Tuple&gt;(Index{}));\n</code></pre>\n\n<p>Finally:</p>\n\n<pre><code>template&lt;class Tuple&gt;\nusing reorder_tuple = reorder_by_index&lt;Tuple, in_order_t&lt;0, std::tuple_size&lt;Tuple&gt;{}&gt;&gt;;\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/5406b4e44f5c9360\" rel=\"nofollow\">Demo</a>:</p>\n\n<pre><code>struct A{}; struct B{}; struct C{}; struct D{}; struct E{};\nstruct F{}; struct G{}; struct H{}; struct I{}; struct J{};\nstruct K{}; struct L{}; struct M{}; struct N{}; struct O{};\n\nusing t = reorder_tuple&lt;std::tuple&lt;A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;&gt;;\nusing t = std::tuple&lt;H,D,I,B,J,E,K,A,L,F,M,C,N,G,O&gt;; // OK, same type.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "is_accepted": false, "score": 0, "last_activity_date": 1463089855, "last_edit_date": 1463089855, "creation_date": 1463084975, "answer_id": 37196844, "question_id": 37174489, "link": "https://stackoverflow.com/questions/37174489/compile-time-rearrangement-of-types-in-a-tuple/37196844#37196844", "title": "Compile-time rearrangement of types in a tuple", "body": "<p>Here is T.C.'s solution generalized to any type of traversal of an N-ary tree,\nwhere <code>reorder&lt;std::tuple, 2, 1, A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;</code> is the special case of the original problem (binary tree inorder traversal), as the 2 indicates a binary tree, and the 1 indicates action after recursion with the first child.  The 2 and 1 can take on any other values.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;utility&gt;\n#include &lt;tuple&gt;\n\n// Concatenating std::index_sequences.\ntemplate &lt;typename... Packs&gt; struct concat;\n\ntemplate &lt;typename Pack&gt;\nstruct concat&lt;Pack&gt; {\n    using type = Pack;\n};\n\ntemplate &lt;std::size_t... Is, std::size_t... Js&gt;\nstruct concat&lt;std::index_sequence&lt;Is...&gt;, std::index_sequence&lt;Js...&gt;&gt; {\n    using type = std::index_sequence&lt;Is..., Js...&gt;;\n};\n\ntemplate &lt;typename Pack1, typename Pack2, typename... Packs&gt;\nstruct concat&lt;Pack1, Pack2, Packs...&gt; : concat&lt;Pack1, typename concat&lt;Pack2, Packs...&gt;::type&gt; {};\n\n// In-order traversal for a complete binary tree whose level-order traversal is 0,1,2, ..., max-1.\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max, typename = void&gt;\nstruct traversal {\n    using type = std::index_sequence&lt;&gt;;  // So that concatenating changes nothing and ends the recursion.\n};\n\n// General recursion.\ntemplate &lt;std::size_t Count, std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max, typename Pack, bool ActionJustTookPlace = false&gt;\nstruct concat_traversals_impl : concat_traversals_impl&lt;Count + 1, NumChildren, ActionPoint, Start, Max,\n        typename concat&lt;Pack, typename traversal&lt;NumChildren, ActionPoint, NumChildren * Start + Count + 1, Max&gt;::type&gt;::type&gt; {};\n\n//             0\n//         /   |   \\\n//        /    |    \\\n//       1     2     3\n//    /  |  \\\n//   4   5  6\n// Above we see that the three children of node K is 3*K+1, 3*K+2, 3*K+3.  In general, it is N*K+1, N*K+2, ..., N*K+N, where N is the number of children. \n\n// If Count == ActionPoint (and ActionJustTookPlace == false), then concat the action, which is std::index_sequence&lt;Start&gt; in this case, but then let ActionJustTookPlace == true so that this does not happen infinitely (as Count still remains equal to ActionPoint) on the next template instantiation, and the primary template is used instead.\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max, typename Pack&gt;\nstruct concat_traversals_impl&lt;ActionPoint, NumChildren, ActionPoint, Start, Max, Pack, false&gt; : concat_traversals_impl&lt;ActionPoint, NumChildren, ActionPoint, Start, Max,\n        typename concat&lt;Pack, std::index_sequence&lt;Start&gt;&gt;::type, true&gt; {};\n\n// End the recursion when Count == NumChildren. \ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max, typename Pack&gt;\nstruct concat_traversals_impl&lt;NumChildren, NumChildren, ActionPoint, Start, Max, Pack&gt; {\n    using type = Pack;\n};\n\n// Special case of when Count == NumChildren and ActionPoint == NumChildren as well (this partial specialization is needed else there will be ambiguity compilng error).\ntemplate &lt;std::size_t ActionPoint, std::size_t Start, std::size_t Max, typename Pack&gt;\nstruct concat_traversals_impl&lt;ActionPoint, ActionPoint, ActionPoint, Start, Max, Pack, false&gt; : concat&lt;Pack, std::index_sequence&lt;Start&gt;&gt; {};\n\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max&gt;\nusing concat_traversals = typename concat_traversals_impl&lt;0, NumChildren, ActionPoint, Start, Max, std::index_sequence&lt;&gt;&gt;::type;\n\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, std::size_t Start, std::size_t Max&gt;  // Recursive call.\nstruct traversal&lt;NumChildren, ActionPoint, Start, Max, std::enable_if_t&lt;(Start &lt; Max)&gt;&gt; {\n    using type = concat_traversals&lt;NumChildren, ActionPoint, Start, Max&gt;;\n};\n\n// Now the actual reordering.\ntemplate &lt;typename Pack, typename Sequence&gt; struct reorder_helper;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Ts, std::size_t... Is&gt;\nstruct reorder_helper&lt;P&lt;Ts...&gt;, std::index_sequence&lt;Is...&gt;&gt; {\n    using type = P&lt;std::tuple_element_t&lt;Is, std::tuple&lt;Ts...&gt;&gt;...&gt;;\n};\n\ntemplate &lt;template &lt;typename...&gt; class P, std::size_t NumChildren, std::size_t ActionPoint, typename... Ts&gt;\nusing reorder = typename reorder_helper&lt;P&lt;Ts...&gt;, typename traversal&lt;NumChildren, ActionPoint, 0, sizeof...(Ts)&gt;::type&gt;::type;\n\n// Special syntax for reordering a pack.\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, typename Pack&gt; struct reorder_pack;\n\ntemplate &lt;std::size_t NumChildren, std::size_t ActionPoint, template &lt;typename...&gt; class P, typename... Ts&gt;\nstruct reorder_pack&lt;NumChildren, ActionPoint, P&lt;Ts...&gt;&gt; {\n    using type = reorder&lt;P, NumChildren, ActionPoint, Ts...&gt;;\n};\n\n// Testing\nstruct A{};  struct B{};  struct C{};  struct D{};  struct E{};  struct F{};  struct G{};  struct H{};\nstruct I{};  struct J{};  struct K{};  struct L{};  struct M{};  struct N{};  struct O{};\n\nint main() {\n    static_assert (std::is_same&lt;\n        reorder&lt;std::tuple, 2, 1, A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;,  // 2 means it is a binary tree, 1 means that we do left traversal, then the node action, then right traversal (i.e. inorder traversal).\n        std::tuple&lt;H,D,I,B,J,E,K,A,L,F,M,C,N,G,O&gt;\n    &gt;::value, \"\");\n\n    static_assert (std::is_same&lt;\n        reorder&lt;std::tuple, 2, 0, A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;,  // 2 means it is a binary tree, 0 means that we do the node action, then left traversal, and then right traversal (i.e. preorder traversal).\n        std::tuple&lt;A,B,D,H,I,E,J,K,C,F,L,M,G,N,O&gt;\n    &gt;::value, \"\");\n\n    static_assert (std::is_same&lt;\n        reorder&lt;std::tuple, 2, 2, A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;,  // 2 means it is a binary tree, 2 means that we do left traversal, then right traversal, then the node action (i.e. postorder traversal).\n        std::tuple&lt;H,I,D,J,K,E,B,L,M,F,N,O,G,C,A&gt;\n    &gt;::value, \"\");\n\n    static_assert (std::is_same&lt;    \n        reorder_pack&lt;3, 2, std::tuple&lt;A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;&gt;::type,  // 3 children per node.  Do first child, second child, then node action, then do third child recursively. \n        std::tuple&lt;N,O,E,F,B,G,H,I,C,J,A,K,L,D,M&gt;\n    &gt;::value, \"\");      \n}\n</code></pre>\n"}], "owner": {"reputation": 4585, "user_id": 3089350, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/2070bd8045abf2ac967cd4ead6dc59a9?s=128&d=identicon&r=PG&f=1", "display_name": "prestokeys", "link": "https://stackoverflow.com/users/3089350/prestokeys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 2, "accepted_answer_id": 37174927, "answer_count": 2, "score": 2, "last_activity_date": 1463089855, "creation_date": 1463006747, "last_edit_date": 1463019159, "question_id": 37174489, "link": "https://stackoverflow.com/questions/37174489/compile-time-rearrangement-of-types-in-a-tuple", "title": "Compile-time rearrangement of types in a tuple", "body": "<p>Define a typedef of <code>template &lt;typename...&gt; struct order;</code> with the following example:</p>\n\n<pre><code>order&lt;A,B,C,D,E,F,G,H,I,J,K,L,M,N,O&gt;::type\n</code></pre>\n\n<p>is to be</p>\n\n<pre><code>std::tuple&lt;H,D,I,B,J,E,K,A,L,F,M,C,N,G,O&gt;\n</code></pre>\n\n<p>because the original types are arranged in a binary tree row by row, from left to right, as in the following diagram:</p>\n\n<pre><code>             A\n         /       \\\n        /         \\\n       B           C\n    /    \\       /    \\\n   D      E     F      G\n  / \\    / \\   / \\    / \\\n H   I  J   K L   M  N   O\n</code></pre>\n\n<p>A type that is left of a certain type shall precede that type in the ordering.  A type that is right of a certain type shall follow that type in the ordering.\nSo we can see that H is listed first and O is listed last.  The resulting type is <code>std::tuple&lt;H,D,I,B,J,E,K,A,L,F,M,C,N,G,O&gt;</code> as already stated.</p>\n\n<p>How to build this ordering during compile-time (for any length of the tuple, even if the last row is not finished)?  Any help would be appreciated.</p>\n\n<p><strong>The latest idea I have is to use recursion:</strong>  <code>D,H,I</code> is ordered as <code>H,D,I</code>.  <code>E,J,K</code> is ordered as <code>J,E,K</code>.  Then <code>B,D,E,H,I,J,K</code> is ordered as <code>H,D,I,</code>  <code>B,</code>  <code>J,E,K,</code> i.e. we use the previous two orderings to build the ordering of the tree that is one generation bigger, placing the \"root\" B in the middle.  Then we can do that for the right subtree of A, and then the entire tree in the example can be concatenated similarly (with A in the middle).  Something like that, but now figuring out how to translate that into code is the problem.  Something along the lines of (before refinements and generalizations):</p>\n\n<pre><code>template &lt;typename... Packs&gt; struct concat;\n\ntemplate &lt;template &lt;typename...&gt; class P, typename... Ts, typename... Us&gt;\nstruct concat&lt;P&lt;Ts...&gt;, P&lt;Us...&gt;&gt; {\n    using type = P&lt;Ts..., Us...&gt;;\n};\n\ntemplate &lt;typename Pack1, typename Pack2, typename... Packs&gt;\nstruct concat&lt;Pack1, Pack2, Packs...&gt; : concat&lt;Pack1, typename concat&lt;Pack2, Packs...&gt;::type&gt; {};\n\ntemplate &lt;typename...&gt; struct order;\n\ntemplate &lt;typename T&gt;\nstruct order&lt;T&gt; {\n    using type = std::tuple&lt;T&gt;;\n};\n\ntemplate &lt;typename A, typename B, typename C&gt;\nstruct order&lt;A,B,C&gt; :\n    concat&lt;typename order&lt;B&gt;::type, std::tuple&lt;A&gt;, typename order&lt;C&gt;::type&gt; {};\n\ntemplate &lt;typename A, typename B, typename C, typename D, typename E, typename F, typename G&gt;\nstruct order&lt;A,B,C,D,E,F,G&gt; :\n    concat&lt;typename order&lt;B,D,E&gt;::type, std::tuple&lt;A&gt;, typename order&lt;C,F,G&gt;::type&gt; {};\n</code></pre>\n"}, {"tags": ["c++", "boost", "scope"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463006241, "post_id": 37174252, "comment_id": 61883473, "body": "I haven&#39;t used <code>BOOST_SCOPE_EXIT</code> but looking at the documentation, what I think you need is     <code>BOOST_SCOPE_EXIT(&amp;this)     {         this-&gt;bar();     }     BOOST_SCOPE_EXIT_END</code>"}], "answers": [{"comments": [{"owner": {"reputation": 680, "user_id": 1480181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/568a44e49e6988545d74e3e76fcefc05?s=128&d=identicon&r=PG", "display_name": "Sven", "link": "https://stackoverflow.com/users/1480181/sven"}, "edited": false, "score": 1, "creation_date": 1490615835, "post_id": 37174672, "comment_id": 73175611, "body": "-&gt; error: \u2018this_\u2019 was not declared in this scope; Seems to be dependent on version or compiler."}], "tags": [], "owner": {"reputation": 124, "user_id": 4062198, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cDdEF.jpg?s=128&g=1", "display_name": "mikero", "link": "https://stackoverflow.com/users/4062198/mikero"}, "is_accepted": true, "score": 2, "last_activity_date": 1463009560, "last_edit_date": 1463009560, "creation_date": 1463007779, "answer_id": 37174672, "question_id": 37174252, "link": "https://stackoverflow.com/questions/37174252/calling-a-object-function-in-boost-scope-exit/37174672#37174672", "title": "Calling a object function in boost scope exit", "body": "<p>Your code will work if you make bar static (and call A::bar()).<br>\nIf that's not an option, it looks like you need to capture the this pointer\nusing the special symbol this_  (note the trailing underscore).  </p>\n\n<pre><code>BOOST_SCOPE_EXIT(this_)\n{\n    this_-&gt;bar();  // note trailing underscore on this_\n}\nBOOST_SCOPE_EXIT_END\n</code></pre>\n"}], "owner": {"reputation": 1003, "user_id": 1246264, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/340babcf9e2adc1e205a315618bce6e0?s=128&d=identicon&r=PG", "display_name": "gudge", "link": "https://stackoverflow.com/users/1246264/gudge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 1, "accepted_answer_id": 37174672, "answer_count": 1, "score": 1, "last_activity_date": 1463009589, "creation_date": 1463005320, "last_edit_date": 1463009589, "question_id": 37174252, "link": "https://stackoverflow.com/questions/37174252/calling-a-object-function-in-boost-scope-exit", "title": "Calling a object function in boost scope exit", "body": "<p>I have the following piece of code:\nHow do I call a member function in scope exit.</p>\n\n<pre><code>class A\n{\npublic:\n    void foo();\n    void bar();\n};\n\nvoid A::foo() \n{\n    BOOST_SCOPE_EXIT(void)\n    {\n        bar(); // Does not compile\n    }\n    BOOST_SCOPE_EXIT_END\n}\n\nvoid A::bar() {}\n\nvoid foo4()\n{\n    A a;    \n    a.foo();\n} \n</code></pre>\n\n<p>Err message</p>\n\n<pre><code>boost_scope_exit.cpp: In static member function \u2018static void  \nA::foo()::boost_se_guard_t_71::boost_se_body()\u2019:\nboost_scope_exit.cpp:73:13: error: cannot call member function \u2018void          \nA::bar()\u2019 without object\n     bar(); // Does not compile\n         ^\n</code></pre>\n\n<p>How can I call a member function from scope exit. </p>\n\n<p>Found a answer in the boost documentation:</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_56_0/libs/scope_exit/doc/html/scope_exit/tutorial.html\" rel=\"nofollow\">Boost docs</a></p>\n\n<p>Just search for \"Capturing The Object this\"</p>\n"}, {"tags": ["c++", "opengl", "visual-studio-2015", "sdl", "sdl-2"], "comments": [{"owner": {"reputation": 91, "user_id": 6322488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2049e6145a765ab5fdc0b3a9eafffbd?s=128&d=identicon&r=PG&f=1", "display_name": "user6322488", "link": "https://stackoverflow.com/users/6322488/user6322488"}, "edited": false, "score": 0, "creation_date": 1463004455, "post_id": 37174013, "comment_id": 61882817, "body": "I managed to compile this just fine on a Linux system by running <code>cmake</code>. How are you performing the build?"}, {"owner": {"reputation": 1, "user_id": 6132203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qY4iR.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/6132203/ariel"}, "reply_to_user": {"reputation": 91, "user_id": 6322488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2049e6145a765ab5fdc0b3a9eafffbd?s=128&d=identicon&r=PG&f=1", "display_name": "user6322488", "link": "https://stackoverflow.com/users/6322488/user6322488"}, "edited": false, "score": 0, "creation_date": 1463004614, "post_id": 37174013, "comment_id": 61882875, "body": "Thanks for your reply. I used cmake to create Visual Studio files and am trying to run the debug verison from within VS2015 using the v140 Platform Toolset."}, {"owner": {"reputation": 1, "user_id": 6132203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qY4iR.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/6132203/ariel"}, "reply_to_user": {"reputation": 91, "user_id": 6322488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2049e6145a765ab5fdc0b3a9eafffbd?s=128&d=identicon&r=PG&f=1", "display_name": "user6322488", "link": "https://stackoverflow.com/users/6322488/user6322488"}, "edited": false, "score": 0, "creation_date": 1463007724, "post_id": 37174013, "comment_id": 61883908, "body": "did you type in anything special after cmake?"}], "owner": {"reputation": 1, "user_id": 6132203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qY4iR.jpg?s=128&g=1", "display_name": "Ariel", "link": "https://stackoverflow.com/users/6132203/ariel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463004989, "creation_date": 1463004134, "last_edit_date": 1463004989, "question_id": 37174013, "link": "https://stackoverflow.com/questions/37174013/opengl-active-texture-redefinition-error-with-function-as-left-operand", "title": "OpenGL active texture redefinition error with &#39;=&#39;: function as left operand", "body": "<p>I am trying to build the open source project <a href=\"https://github.com/dalerank/nanogui-sdl\" rel=\"nofollow\">nanogui-sdl</a> in Visual Studio 2015. </p>\n\n<p>After adding all the necessary libraries, I get the following two errors:</p>\n\n<pre><code>Error C2365 - 'glActiveTexture': redefinition; previous definition was 'function'\nError C2659 - '=': function as left operand\n</code></pre>\n\n<p>Here are the offending lines of code:</p>\n\n<pre><code>#ifdef WIN32\n    PFNGLACTIVETEXTUREPROC glActiveTexture;\n#else\n\n...\n\n#ifdef WIN32\n    ASSIGNGLFUNCTION(PFNGLACTIVETEXTUREPROC,glActiveTexture)\n#endif\n</code></pre>\n"}, {"tags": ["c++", "recursion", "increment", "decrement"], "comments": [{"owner": {"reputation": 21464, "user_id": 257645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/SE5gW.jpg?s=128&g=1", "display_name": "kfsone", "link": "https://stackoverflow.com/users/257645/kfsone"}, "edited": false, "score": 3, "creation_date": 1463003322, "post_id": 37173815, "comment_id": 61882343, "body": "Show one of the ways you&#39;ve tried so we have a frame of reference."}, {"owner": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 0, "creation_date": 1463003773, "post_id": 37173815, "comment_id": 61882528, "body": "Why would anyone <i>not</i> want to use the addition operator?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "reply_to_user": {"reputation": 53754, "user_id": 198536, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9edaf4c1c1b89b5d39c40528d0017509?s=128&d=identicon&r=PG", "display_name": "wallyk", "link": "https://stackoverflow.com/users/198536/wallyk"}, "edited": false, "score": 1, "creation_date": 1463003967, "post_id": 37173815, "comment_id": 61882607, "body": "@wallyk It&#39;s probably a course assignment."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1463003476, "post_id": 37173848, "comment_id": 61882405, "body": "Hmmm, very nice. Very, very nice."}, {"owner": {"reputation": 21, "user_id": 6307956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467c380362bbf6e02fba068a56fd8888?s=128&d=identicon&r=PG&f=1", "display_name": "Chris22", "link": "https://stackoverflow.com/users/6307956/chris22"}, "edited": false, "score": 0, "creation_date": 1463004785, "post_id": 37173848, "comment_id": 61882953, "body": "Hmm, I tried this however it crashes after calling it twice with two different variables."}, {"owner": {"reputation": 3991, "user_id": 751932, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GEsPb.jpg?s=128&g=1", "display_name": "Maxim Kholyavkin", "link": "https://stackoverflow.com/users/751932/maxim-kholyavkin"}, "reply_to_user": {"reputation": 21, "user_id": 6307956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467c380362bbf6e02fba068a56fd8888?s=128&d=identicon&r=PG&f=1", "display_name": "Chris22", "link": "https://stackoverflow.com/users/6307956/chris22"}, "edited": false, "score": 0, "creation_date": 1463004934, "post_id": 37173848, "comment_id": 61883002, "body": "@Chris22 please use site like repl.it to show your code which crashed."}, {"owner": {"reputation": 3991, "user_id": 751932, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GEsPb.jpg?s=128&g=1", "display_name": "Maxim Kholyavkin", "link": "https://stackoverflow.com/users/751932/maxim-kholyavkin"}, "edited": false, "score": 0, "creation_date": 1463008442, "post_id": 37173848, "comment_id": 61884125, "body": "I gave the solution for <code>unsigned</code> case which you tried to use in signed case without changing."}], "tags": [], "owner": {"reputation": 3991, "user_id": 751932, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/GEsPb.jpg?s=128&g=1", "display_name": "Maxim Kholyavkin", "link": "https://stackoverflow.com/users/751932/maxim-kholyavkin"}, "is_accepted": false, "score": 5, "last_activity_date": 1463003286, "creation_date": 1463003286, "answer_id": 37173848, "question_id": 37173815, "link": "https://stackoverflow.com/questions/37173815/recursive-function-that-adds-two-variables-passed-to-it/37173848#37173848", "title": "Recursive Function that adds two variables passed to it", "body": "<p>For unsigned solution is:</p>\n\n<pre><code>unsigned add2_recurse(unsigned a, unsigned b){\n    return (0 == b) ? a : add2_recurse(++a, --b);\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6307956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/467c380362bbf6e02fba068a56fd8888?s=128&d=identicon&r=PG&f=1", "display_name": "Chris22", "link": "https://stackoverflow.com/users/6307956/chris22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1463003583, "creation_date": 1463003082, "last_edit_date": 1463003255, "question_id": 37173815, "link": "https://stackoverflow.com/questions/37173815/recursive-function-that-adds-two-variables-passed-to-it", "title": "Recursive Function that adds two variables passed to it", "body": "<pre><code>int mult2_recurse(int a, int b) {\n}\n</code></pre>\n\n<p>Hello, I'm trying to fill in this function, which is passed 2 variables - called with different variables a couple times. I have to add the two variables without using any of *, /, +, =, *=, /=, +=, -= operators. I can only use ++ and/or -- operators. Can someone help me? I've tried numerous ways and can't seem to wrap the logic around my head.</p>\n"}, {"tags": ["c++", "c++11", "boost", "stl", "optional"], "comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1463002897, "post_id": 37173697, "comment_id": 61882173, "body": "Yes, moving it is safe, so long as <b>the only</b> thing you then do with it is pop it"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "reply_to_user": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 6, "creation_date": 1463002992, "post_id": 37173697, "comment_id": 61882210, "body": "@SteveLorimer or reassign it. Or do any other operation without preconditions."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 0, "creation_date": 1463016194, "post_id": 37173697, "comment_id": 61885998, "body": "@Revolver_Ocelot Assignment is not necessarily without preconditions."}, {"owner": {"reputation": 873, "user_id": 866741, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/f47bc7af3ddd90bdc14f37092418bd51?s=128&d=identicon&r=PG", "display_name": "jterm", "link": "https://stackoverflow.com/users/866741/jterm"}, "edited": false, "score": 0, "creation_date": 1552496678, "post_id": 37173697, "comment_id": 97035457, "body": "These precautions apply to any time an object is moved. Unrelated to the queue pop."}], "answers": [{"tags": [], "owner": {"reputation": 2725, "user_id": 2296177, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/854fa6632f9806fae99a1b49b4e07e08?s=128&d=identicon&r=PG", "display_name": "user2296177", "link": "https://stackoverflow.com/users/2296177/user2296177"}, "is_accepted": false, "score": 4, "last_activity_date": 1463003919, "last_edit_date": 1463003919, "creation_date": 1463002874, "answer_id": 37173767, "question_id": 37173697, "link": "https://stackoverflow.com/questions/37173697/is-it-okay-to-move-an-object-from-a-queue-if-youre-about-to-pop-from-it/37173767#37173767", "title": "Is it okay to &quot;Move&quot; an object from a queue, if you&#39;re about to pop from it?", "body": "<p><strong>Yes</strong>. As long as your <code>std::queue</code>'s container template argument ensures that there are no preconditions on the state of its contained values for <code>pop_front()</code>; the default for <code>std::queue</code> is <code>std::deque</code> and that offers the guarantee.</p>\n\n<p>As long as you ensure what I wrote on the previous paragraph, you are completely safe. You're about to remove that item from your queue, thus there is no reason not to move it out since you are <em>taking ownership</em> of that object.</p>\n"}, {"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1463006897, "post_id": 37173771, "comment_id": 61883674, "body": "It is perfectly safe... depending on the characteristics of <code>T</code>. So it isn&#39;t guaranteed to be safe."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1463007027, "post_id": 37173771, "comment_id": 61883713, "body": "@juanchopanza Sure, as long as <code>T</code> is MoveConstructible."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1463007081, "post_id": 37173771, "comment_id": 61883727, "body": "That is the requirement I had in mind. The point if that it has to be in a certain state after being moved <i>from</i>."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1463015995, "post_id": 37173771, "comment_id": 61885959, "body": "@juanchopanza The standard already requires that moved-from object should be in a valid state (at least destructible), so there is no problem here."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1463033789, "post_id": 37173771, "comment_id": 61891201, "body": "@IlyaPopov Do you have a reference for that? I don&#39;t remember that being the case in C++11, but it may have been changed / fixed."}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1463052653, "post_id": 37173771, "comment_id": 61903911, "body": "I checked now and I agree it is vague. For library types, It is guaranteed  in [lib.types.movedfrom]. For other types, in the definition of MoveConstructible [moveconstructible] in posconditions it says: &quot;rv\u2019s state is unspecified [Note:rv must still meet the requirements of the library component that is using it. The operations listed in those requirements must work as specified whether rv has been moved from or not. \u2014 end note ]&quot;"}, {"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 0, "creation_date": 1463052839, "post_id": 37173771, "comment_id": 61904040, "body": "I read this note as: If the type <code>command</code> is used in a queue, then both moved-from or not it must meet the queue&#39;s requirements."}, {"owner": {"reputation": 457, "user_id": 9584001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IxBn4.png?s=128&g=1", "display_name": "Rotartsi", "link": "https://stackoverflow.com/users/9584001/rotartsi"}, "edited": false, "score": 1, "creation_date": 1578018254, "post_id": 37173771, "comment_id": 105312555, "body": "Hmm does this apply to <code>priority_queue</code>s too? You have to cast away <code>const</code> from <code>priority_queue::top()</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 1121, "user_id": 4988044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176bea70fb8474bc1a454ffeefd59702?s=128&d=identicon&r=PG&f=1", "display_name": "TheCppZoo", "link": "https://stackoverflow.com/users/4988044/thecppzoo"}, "edited": false, "score": 1, "creation_date": 1581175162, "post_id": 37173771, "comment_id": 106346287, "body": "@TheCppZoo The question is about <code>std::queue</code>, which does not have a <code>top</code>. For <code>std::priority_queue</code>, you could need to <code>const_cast</code>, yes (which would also be safe)."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 34, "last_activity_date": 1463002896, "creation_date": 1463002896, "answer_id": 37173771, "question_id": 37173697, "link": "https://stackoverflow.com/questions/37173697/is-it-okay-to-move-an-object-from-a-queue-if-youre-about-to-pop-from-it/37173771#37173771", "title": "Is it okay to &quot;Move&quot; an object from a queue, if you&#39;re about to pop from it?", "body": "<p>Yes, this is perfectly safe:</p>\n\n<pre><code>std::queue&lt;T&gt; q;\n// add stuff...\n\nT top = std::move(q.front());\nq.pop();\n</code></pre>\n\n<p><code>pop()</code> doesn't have any preconditions on the first element in the <code>q</code> having a specified state, and since you're not subsequently using <code>q.front()</code> you don't have to deal with that object being invalidated any more. </p>\n\n<p>Sounds like a good idea to do!</p>\n"}, {"comments": [{"owner": {"reputation": 3356, "user_id": 4451432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b46aba1c1ec6b780b9735f0ec7f885?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya Popov", "link": "https://stackoverflow.com/users/4451432/ilya-popov"}, "edited": false, "score": 5, "creation_date": 1463016094, "post_id": 37173976, "comment_id": 61885977, "body": "If the moved-from object is not destructible, this move constructor/assignment it is basically unusable."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 7, "last_activity_date": 1463003888, "creation_date": 1463003888, "answer_id": 37173976, "question_id": 37173697, "link": "https://stackoverflow.com/questions/37173697/is-it-okay-to-move-an-object-from-a-queue-if-youre-about-to-pop-from-it/37173976#37173976", "title": "Is it okay to &quot;Move&quot; an object from a queue, if you&#39;re about to pop from it?", "body": "<p>It depends on what the move constructor for your type does. If it leaves the original object in a state that can safely be destroyed, then all is well. If not, then you may be in trouble. Note that the comments about preconditions and valid states are about constraints on types defined <strong>in the standard library</strong>. Types that you define do not have those constraints, except to the extent that they use types from the standard library. So look at your move constructor to sort out what you can and can't do with a moved-from object.</p>\n"}, {"comments": [{"owner": {"reputation": 5463, "user_id": 3198247, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8b74cda6fdfa7637a602efabf115f02f?s=128&d=identicon&r=PG&f=1", "display_name": "anderas", "link": "https://stackoverflow.com/users/3198247/anderas"}, "edited": false, "score": 1, "creation_date": 1463055834, "post_id": 37174090, "comment_id": 61906235, "body": "<i>moving an object may leave it in an invalid state. It&#39;s invariants are no longer guaranteed.</i> &lt;- this is considered bad practice. Moving from an object should leave it in a <b>valid but unspecified</b> state!"}], "tags": [], "owner": {"reputation": 1921, "user_id": 6317147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376fccc260dbc5e810117896b2bdf3a9?s=128&d=identicon&r=PG", "display_name": "Gregg", "link": "https://stackoverflow.com/users/6317147/gregg"}, "is_accepted": false, "score": 1, "last_activity_date": 1463004517, "creation_date": 1463004517, "answer_id": 37174090, "question_id": 37173697, "link": "https://stackoverflow.com/questions/37173697/is-it-okay-to-move-an-object-from-a-queue-if-youre-about-to-pop-from-it/37174090#37174090", "title": "Is it okay to &quot;Move&quot; an object from a queue, if you&#39;re about to pop from it?", "body": "<p>moving an object may leave it in an invalid state.  It's invariants are no longer guaranteed.  You would be safe popping it from a non-intrusive queue. </p>\n\n<ul>\n<li><p>The std::move itself does nothing other than tell the compiler, that it can select a comm routine that takes an r-value.  </p></li>\n<li><p>A well written comm routine, would then steal the representation from the old object for the new object. For instance, just copy the pointers to the new object, and zero the pointers in the old object (that way the old object destructor won't destroy the arrays).</p></li>\n<li><p>if comm is not overloaded to do this there will not be any benefit to std::mov.</p></li>\n</ul>\n"}], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10203, "favorite_count": 3, "accepted_answer_id": 37173771, "answer_count": 4, "score": 26, "last_activity_date": 1463004517, "creation_date": 1463002577, "question_id": 37173697, "link": "https://stackoverflow.com/questions/37173697/is-it-okay-to-move-an-object-from-a-queue-if-youre-about-to-pop-from-it", "title": "Is it okay to &quot;Move&quot; an object from a queue, if you&#39;re about to pop from it?", "body": "<p>I've been working on a parser for <code>commands</code> (which are fancy wrappers around large arrays of data), and have a queue that unhandled commands reside on. If I need a command, I query it with code like this:</p>\n\n<pre><code>boost::optional&lt;command&gt; get_command() {\n    if (!has_command()) return boost::optional&lt;command&gt;(nullptr);\n    else {\n        boost::optional&lt;command&gt; comm(command_feed.front()); //command_feed is declared as a std::queue&lt;command&gt;\n        command_feed.pop();\n        return comm;\n    }\n}\n</code></pre>\n\n<p>The problem is, these commands could be megabytes in size, under the right circumstances, and need to parse pretty quickly. My thought was that I could optimize the transferal to a move like so:</p>\n\n<pre><code>boost::optional&lt;command&gt; get_command() {\n    if (!has_command()) return boost::optional&lt;command&gt;(nullptr);\n    else {\n        boost::optional&lt;command&gt; comm(std::move(command_feed.front())); //command_feed is declared as a std::queue&lt;command&gt;\n        command_feed.pop();\n        return comm;\n    }\n}\n</code></pre>\n\n<p>And it seems to work for this specific case, but can this be used as a general purpose solution to any properly maintained RAII object, or should I be doing something else?</p>\n"}, {"tags": ["c++", "qt", "opengl", "shader", "fragment-shader"], "answers": [{"comments": [{"owner": {"reputation": 1799, "user_id": 3024116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1920be341bbc905918a5294e552a12f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar Rabinoviz", "link": "https://stackoverflow.com/users/3024116/sahar-rabinoviz"}, "edited": false, "score": 0, "creation_date": 1463004205, "post_id": 37173904, "comment_id": 61882712, "body": "For the second parameter it is asking for a filename, you can look at the specs, <a href=\"http://doc.qt.io/qt-4.8/qglshaderprogram.html#addShaderFromSourceFile\" rel=\"nofollow noreferrer\">QGLShaderProgram::addShaderFromSourceFile</a>. Also shader.vert is loading fine. fragment shader is not though."}, {"owner": {"reputation": 36, "user_id": 6321658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73644abedbbcc7a6e5640d137ae15753?s=128&d=identicon&r=PG&f=1", "display_name": "mofed8461", "link": "https://stackoverflow.com/users/6321658/mofed8461"}, "reply_to_user": {"reputation": 1799, "user_id": 3024116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1920be341bbc905918a5294e552a12f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar Rabinoviz", "link": "https://stackoverflow.com/users/3024116/sahar-rabinoviz"}, "edited": false, "score": 0, "creation_date": 1463004706, "post_id": 37173904, "comment_id": 61882917, "body": "you are loading the vertex shader from file and fragment shader from code .. change the name of the function .. from addShaderFromSourceCode to addShaderFromSourceFile"}], "tags": [], "owner": {"reputation": 36, "user_id": 6321658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73644abedbbcc7a6e5640d137ae15753?s=128&d=identicon&r=PG&f=1", "display_name": "mofed8461", "link": "https://stackoverflow.com/users/6321658/mofed8461"}, "is_accepted": true, "score": 1, "last_activity_date": 1463003521, "last_edit_date": 1495539847, "creation_date": 1463003521, "answer_id": 37173904, "question_id": 37173642, "link": "https://stackoverflow.com/questions/37173642/qglshaderprogram-opengl-shaders/37173904#37173904", "title": "QGLShaderProgram OpenGL shaders", "body": "<p>The second parameter of addShaderFromSourceCode(, code)</p>\n\n<p>you must provide the content of file not the name of file itself\nhere you can put this code in a function and use it to load the file</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2602013/read-whole-ascii-file-into-c-stdstring\">Read whole ASCII file into C++ std::string</a></p>\n"}], "owner": {"reputation": 1799, "user_id": 3024116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1920be341bbc905918a5294e552a12f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar Rabinoviz", "link": "https://stackoverflow.com/users/3024116/sahar-rabinoviz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 37173904, "answer_count": 1, "score": 0, "last_activity_date": 1463003521, "creation_date": 1463002324, "question_id": 37173642, "link": "https://stackoverflow.com/questions/37173642/qglshaderprogram-opengl-shaders", "title": "QGLShaderProgram OpenGL shaders", "body": "<p>I'm getting the following error when I try link my fragment shader, </p>\n\n<blockquote>\n  <p>QGLShader::compile(Fragment): 0(4) : error C0000: syntax error, unexpected '.', expecting \"::\" at token \".\"</p>\n</blockquote>\n\n<p>I'm just trying to implement a simple fragment shader that sets colour to be green. </p>\n\n<p>The code for my vertex shader (which is working) file name <code>shader.vert</code></p>\n\n<pre><code>#version 430\n\nin layout(location=0) vec2 position;\n\nvoid main()\n{\n    gl_Position = vec4(position, 0.0, 1.0);\n}\n</code></pre>\n\n<p>The code for my fragment shader <code>shader.frag</code></p>\n\n<pre><code>#version 430\n\nout vec4 finalColour;\n\nvoid main()\n{\n    finalColour = vec4(0.0, 1.0, 0.0, 1.0);\n}\n</code></pre>\n\n<p>The code that links the <code>QGLShaderProgram mProgram</code></p>\n\n<pre><code>//Add Shaders\nif (!mProgram.addShaderFromSourceFile(QGLShader::Vertex, \"shader.vert\")) {\n    error_msg(\"Vertex shader load failed\");\n}\nif (!mProgram.addShaderFromSourceCode(QGLShader::Fragment, \"testShader.frag\")) {\n    error_msg(\"Fragment shader load failed\");\n}\nif (!mProgram.link()) {\n    error_msg(\"Cannot link shaders\");\n}\nmProgram.bind()\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1463002313, "post_id": 37173601, "comment_id": 61881911, "body": "Well, <a href=\"http://en.cppreference.com/w/cpp/container/list/unique\" rel=\"nofollow noreferrer\"><code>std::list::unique()</code></a> has <code>void</code> as return type. You cannot do any further dereferncing?`"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1463002578, "post_id": 37173601, "comment_id": 61882030, "body": "Read the docs: <a href=\"http://en.cppreference.com/w/cpp/container/list/unique\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/list/unique</a>"}, {"owner": {"reputation": 159, "user_id": 4205319, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-XvWKO_nW8P4/AAAAAAAAAAI/AAAAAAAAASc/RY2owsSlE7I/photo.jpg?sz=128", "display_name": "Jimbo_ai", "link": "https://stackoverflow.com/users/4205319/jimbo-ai"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463003071, "post_id": 37173601, "comment_id": 61882245, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 I would like a list which will keep for each and every category the amount that the customers of the supermarket spent on their products. But, firstly, I want to reserve the necessary space for the categories_prices list. This size is the size of the categories list (which includes the name of all available categories of products that a supermarket has - and this list is unique, I do not care for the duplicates). But I am doing something wrong by implementing it."}, {"owner": {"reputation": 159, "user_id": 4205319, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-XvWKO_nW8P4/AAAAAAAAAAI/AAAAAAAAASc/RY2owsSlE7I/photo.jpg?sz=128", "display_name": "Jimbo_ai", "link": "https://stackoverflow.com/users/4205319/jimbo-ai"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1463003257, "post_id": 37173601, "comment_id": 61882324, "body": "@FredLarson I have read this documentation, so what? What exactly would  you like me to take into consideration?"}, {"owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "edited": false, "score": 1, "creation_date": 1463003427, "post_id": 37173601, "comment_id": 61882383, "body": "@Jimbo_ai return type"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463003800, "post_id": 37173601, "comment_id": 61882537, "body": "<code>void</code> is nothing. Nothing has no <code>size()</code> to call. What <code>unique</code> is doing is removing repetition from <code>categories</code>, effectively destroying your data. Not what you want."}], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 4205319, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-XvWKO_nW8P4/AAAAAAAAAAI/AAAAAAAAASc/RY2owsSlE7I/photo.jpg?sz=128", "display_name": "Jimbo_ai", "link": "https://stackoverflow.com/users/4205319/jimbo-ai"}, "edited": false, "score": 0, "creation_date": 1463003789, "post_id": 37173691, "comment_id": 61882531, "body": "So, in case I wrote firstly categories.unique() and then reserved the necessary space for my list through categories_prices.reserve(categories.size()) would it be a solution?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463005451, "post_id": 37173691, "comment_id": 61883202, "body": "Almost. <code>unique</code> only removes repetition. <code>unique</code> will turn 1 2 3 4 4 3 2 1 into 1 2 3 4 3 2 1. But if you sort the list first...."}], "tags": [], "owner": {"reputation": 224, "user_id": 6317244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249837f50c1372400da954a62bed963a?s=128&d=identicon&r=PG&f=1", "display_name": "jthomas", "link": "https://stackoverflow.com/users/6317244/jthomas"}, "is_accepted": false, "score": 8, "last_activity_date": 1463002561, "creation_date": 1463002561, "answer_id": 37173691, "question_id": 37173601, "link": "https://stackoverflow.com/questions/37173601/error-invalid-use-of-void-using-vectors/37173691#37173691", "title": "Error: invalid use of &#39;void&#39; (using vectors)", "body": "<p>list::unique is a void function, it does not return anything. On that last line, where you call categories.unique().size(), you are calling .size() on a void expression. </p>\n"}], "owner": {"reputation": 159, "user_id": 4205319, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-XvWKO_nW8P4/AAAAAAAAAAI/AAAAAAAAASc/RY2owsSlE7I/photo.jpg?sz=128", "display_name": "Jimbo_ai", "link": "https://stackoverflow.com/users/4205319/jimbo-ai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 477, "favorite_count": 0, "closed_date": 1463006504, "answer_count": 1, "score": -2, "last_activity_date": 1463002561, "creation_date": 1463002164, "question_id": 37173601, "link": "https://stackoverflow.com/questions/37173601/error-invalid-use-of-void-using-vectors", "closed_reason": "Not suitable for this site", "title": "Error: invalid use of &#39;void&#39; (using vectors)", "body": "<p>I am trying to create a code using vectors and other c++11 utilities. The above mentioned(on the title) error occurs in my code and despite I looked for a solution to this error on the internet I did not find something that works into my code. I tried to make some type castings but did not work. I present you the contentious part of code below:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;  \n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n#include &lt;list&gt;\n//#include &lt;Winbase.h&gt;\n\nusing namespace std;\n\n// A struct describing a product.\ntypedef struct Products\n{\n    string category;\n    string name;\n    float price;\n} Product;\n\ninline void scenario1(int num_cashiers)\n{\n    vector&lt;Product&gt; products; // It is a vector(a pseudo-second dimension) of products which will be used for each customer\n    vector&lt;vector&lt;Product&gt;&gt; customers; // A vector containing all customers\n    vector&lt;vector&lt;vector&lt;Product&gt;&gt;&gt; cashiers(num_cashiers); // A vector describing the supermarket cashiers declaring a queue of customers for each cashier\n    double start = GetTickCount(); // It will be used for counting 10 secs until next update\n    vector&lt;int&gt; total_products(num_cashiers); // A vector keeping the total number of products of each queue\n    list&lt;string&gt; categories; // A list containing all the categories of the products\n    list&lt;float&gt; categories_prices(categories.unique().size()); // A list containing all category prices\n    //THE ABOVE LINE - THE LAST ONE IN THIS PART OF CODE - IS THE LINE I GET THE ERROR!!!\n    ....\n\n}\n</code></pre>\n\n<p>What is wrong with the code?</p>\n\n<p>Thank you everyone in advance!</p>\n"}, {"tags": ["c++", "visual-studio", "linker", "include", "lnk2019"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463001887, "post_id": 37173479, "comment_id": 61881731, "body": "<b><i>I set the additional include path in the wrapper project to the path of the ffmpeg folder, I get several LNK2019 errors like this</i></b> Did you add the Additional Link Dependencies?"}, {"owner": {"reputation": 27, "user_id": 3619400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f66cbc80ab5e0394c5c38a8d8caad585?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3619400/richard"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463039232, "post_id": 37173479, "comment_id": 61894418, "body": "What I don&#180;t understand is: why do I have to add the additional include folder of ffmpeg also in the wrapper project, since the entire inclusion of the ffmpeg source files happens only in the productive project. Is it because the productive project is not a static lib but an executable exe? I added the additional lib to the linker, but the LNK2019 error remained, however this morning - after starting VS again - it builds now..."}], "owner": {"reputation": 27, "user_id": 3619400, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f66cbc80ab5e0394c5c38a8d8caad585?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/3619400/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "closed_date": 1463002392, "answer_count": 0, "score": 0, "last_activity_date": 1463088062, "creation_date": 1463001604, "last_edit_date": 1463088062, "question_id": 37173479, "link": "https://stackoverflow.com/questions/37173479/interplay-of-two-different-c-projects-in-msvs", "closed_reason": "Duplicate", "title": "interplay of two different c++ projects in MSVS", "body": "<p>I think this is a basic question, however I can not find any adequate posts about this topic or maybe I just don\u00b4t know how to find the right wording when searching.</p>\n\n<p>I have two projects in two different solutions. Project A is an application (.exe) using third party libs like ffmpeg (native C) and Project B is a DLL, which wants to use code of Project A (Purpose: A C# project is suppose to use funktionality of Project A via Project B).\nFrom my point of view I just have to add include path to Project A in order to include source files of it and set the linker input to the Project B .obj.\nHowever, when compiling Project B MSVS can not find the header file \"libavutil/opt.h\" of a ffmpeg Header:</p>\n\n<pre><code>#pragma once\nextern \"C\"\n{\n#include &lt;libavutil/opt.h&gt;\n#include &lt;libavcodec/avcodec.h&gt;\n#include &lt;libavutil/channel_layout.h&gt;\n#include &lt;libavutil/common.h&gt;\n#include &lt;libavutil/imgutils.h&gt;\n#include &lt;libavutil/mathematics.h&gt;\n#include &lt;libavutil/samplefmt.h&gt;\n}\n\nfatal error C1083: Cannot open include file: 'libavutil/opt.h': No such file or directory.\n</code></pre>\n\n<p>Do I really have to set include paths to those ffmpeg libs?\nIf doing so I get many LNK2001, 2005 and 2019 errors. \nAny Ideas?</p>\n"}, {"tags": ["c++", "set"], "comments": [{"owner": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1463001439, "post_id": 37173417, "comment_id": 61881504, "body": "Your pseudo code is hard to follow. You have an <code>int</code> array denoted by <code>x</code>, yet you insert <code>int</code> literals into your set. Then your comment says &quot;because x[1] &lt; x[4] &lt; x[0]&quot; yet you never use <code>x</code> in your pseudo code. You also don&#39;t address what <code>???</code> means. I don&#39;t think you need another type parameter other than <code>int</code>."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1463001676, "post_id": 37173417, "comment_id": 61881636, "body": "See <a href=\"http://stackoverflow.com/questions/2620862/using-custom-stdset-comparator\" title=\"using custom stdset comparator\">stackoverflow.com/questions/2620862/&hellip;</a>"}, {"owner": {"reputation": 448, "user_id": 6253321, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34792a0922a91eacb20efe6b49db95e4?s=128&d=identicon&r=PG&f=1", "display_name": "cpp beginner", "link": "https://stackoverflow.com/users/6253321/cpp-beginner"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1463001901, "post_id": 37173417, "comment_id": 61881739, "body": "@JonnyHenly Sorry you&#39;re right - it could be much clearer. I think vu1p3n0x&#39;s answer explains the question better than I have."}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 6322488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2049e6145a765ab5fdc0b3a9eafffbd?s=128&d=identicon&r=PG&f=1", "display_name": "user6322488", "link": "https://stackoverflow.com/users/6322488/user6322488"}, "is_accepted": false, "score": 3, "last_activity_date": 1463001692, "creation_date": 1463001692, "answer_id": 37173497, "question_id": 37173417, "link": "https://stackoverflow.com/questions/37173417/how-do-i-make-a-set-where-elements-are-sorted-using-a-local-variable/37173497#37173497", "title": "How do I make a set where elements are sorted using a local variable?", "body": "<p>Well since you're \"pairing\" elements, why not use an <code>std::pair</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n\nint main()\n{\n    int order[5] {9, 2, 3, 1, 8};\n    int data[3] {0, 1, 4};\n    std::set&lt;std::pair&lt;int, int&gt;&gt; s;\n    for (std::size_t i = 0; i &lt; 3; ++i)\n    {\n        s.emplace(order[i], data[i]);\n    }\n    for (auto a : s)\n        std::cout &lt;&lt; a.second &lt;&lt; \" \";\n}\n</code></pre>\n\n<p>This outputs <code>1 4 0</code> as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": true, "score": 8, "last_activity_date": 1463001744, "creation_date": 1463001744, "answer_id": 37173511, "question_id": 37173417, "link": "https://stackoverflow.com/questions/37173417/how-do-i-make-a-set-where-elements-are-sorted-using-a-local-variable/37173511#37173511", "title": "How do I make a set where elements are sorted using a local variable?", "body": "<p>You can set it up like so with a lambda</p>\n\n<pre><code>int x[5] {9, 2, 3, 1, 8};\nauto comparator = [&amp;](int a, int b){ return x[a] &lt; x[b]; };\nstd::set&lt;int, decltype(comparator)&gt; my_set(comparator);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 267, "user_id": 4775544, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-yEUsccqbq50/AAAAAAAAAAI/AAAAAAAAABw/4haCtp3Sd2E/photo.jpg?sz=128", "display_name": "cristian franco", "link": "https://stackoverflow.com/users/4775544/cristian-franco"}, "is_accepted": false, "score": 0, "last_activity_date": 1463001764, "creation_date": 1463001764, "answer_id": 37173516, "question_id": 37173417, "link": "https://stackoverflow.com/questions/37173417/how-do-i-make-a-set-where-elements-are-sorted-using-a-local-variable/37173516#37173516", "title": "How do I make a set where elements are sorted using a local variable?", "body": "<p>you can use a pair and sort this elements by y and the pair in x always has the reference example</p>\n\n<pre><code>pair&lt;0,9&gt;\npair&lt;1,2&gt;\npair&lt;2,3&gt;\n</code></pre>\n\n<p>SORTED</p>\n\n<pre><code>pair&lt;1,2&gt;\npair&lt;2,3&gt;\npair&lt;0,9&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 2, "last_activity_date": 1463002133, "creation_date": 1463002133, "answer_id": 37173592, "question_id": 37173417, "link": "https://stackoverflow.com/questions/37173417/how-do-i-make-a-set-where-elements-are-sorted-using-a-local-variable/37173592#37173592", "title": "How do I make a set where elements are sorted using a local variable?", "body": "<p>voila!</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    int x[5] {9, 2, 3, 1, 8};\n    struct indirect_less\n    {\n        indirect_less(const int* p) : _p(p) {}\n        bool operator()(int l, int r) const {\n            return _p[l] &lt; _p[r];\n        }\n        const int* _p;\n    };\n\n    std::set&lt;int, indirect_less&gt; my_set { indirect_less(x) };\n\n    my_set.insert(0);\n    my_set.insert(1);\n    my_set.insert(4);\n\n    for (int a : my_set) {\n\n        std::cout &lt;&lt; a &lt;&lt; \" \";   // I want the answer 1 4 0 because x[1] &lt; x[4] &lt; x[0]\n    }\n    std::cout &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>1 4 0 \n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 6253321, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/34792a0922a91eacb20efe6b49db95e4?s=128&d=identicon&r=PG&f=1", "display_name": "cpp beginner", "link": "https://stackoverflow.com/users/6253321/cpp-beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 37173511, "answer_count": 4, "score": 3, "last_activity_date": 1463002133, "creation_date": 1463001307, "question_id": 37173417, "link": "https://stackoverflow.com/questions/37173417/how-do-i-make-a-set-where-elements-are-sorted-using-a-local-variable", "title": "How do I make a set where elements are sorted using a local variable?", "body": "<p>How do I make a set where the elements are always ordered using some local variable?</p>\n\n<p>A simplified example of what I am trying to do is this.</p>\n\n<pre><code>int x[5] {9, 2, 3, 1, 8};\nset&lt;int, ???&gt; my_set;\nmy_set.insert(0);\nmy_set.insert(1);\nmy_set.insert(4);\nfor (int a : my_set)\n    cout &lt;&lt; a &lt;&lt; \" \";   // I want the answer 1 4 0 because x[1] &lt; x[4] &lt; x[0]\n</code></pre>\n\n<p>I think I might be able to do this using a <code>struct</code>, but I am unsure how the use of <code>x</code> changes things.</p>\n"}, {"tags": ["c++", "multithreading", "file", "vector", "iomanip"], "comments": [{"owner": {"reputation": 2794, "user_id": 5836291, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1327347077/picture?type=large", "display_name": "Vtik", "link": "https://stackoverflow.com/users/5836291/vtik"}, "edited": false, "score": 0, "creation_date": 1463003189, "post_id": 37173388, "comment_id": 61882298, "body": "no errors thrown, nothing  ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463003221, "post_id": 37173388, "comment_id": 61882306, "body": "Off topic: Recommend writing binary, not text to the file. Much smaller file (6x), easier to predict boundaries (but you&#39;ve done a great job here restricting the bounds), and you won&#39;t have to convert from text to integer. Should get you a large speed boost because you can suck the whole file up into one big array of bytes in one shot and then partition the array among threads.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1463003354, "post_id": 37173388, "comment_id": 61882355, "body": "Anyway, a block or busy-spin should be an easy problem to spot with the debugger that came with your development environment."}, {"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1463003407, "post_id": 37173388, "comment_id": 61882372, "body": "I was unable to reproduce the problem, it successfully writes and loads data for me. Please provide Minimal, Complete, and Verifiable example so it&#39;ll be easier to help you ( <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a> )"}, {"owner": {"reputation": 81, "user_id": 6199879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b578cb4a8473a5c2732f6dd57b099bf3?s=128&d=identicon&r=PG&f=1", "display_name": "CIVI89", "link": "https://stackoverflow.com/users/6199879/civi89"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1463032963, "post_id": 37173388, "comment_id": 61890846, "body": "@user4581301: but if I don&#39;t use binary but text, my method to read is semantically/syntactically correct? or I need to convert and/or to skip from one line to another in another way?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1463035169, "post_id": 37173388, "comment_id": 61891879, "body": "There are no lines. One frame-full will be exactly <code>GridFlow.read((char*)frame.grid, width * height * pixel depth)</code> and the offset would be <code>frameNo * width * height * pixel depth</code>. However, I&#39;d read all of the frames sequentially and then fire up the threads to process the frames. I don&#39;t think you will gain much from threading the frame reads because without the text-to-number conversion the reads will probably wind up mostly sequential anyway with the threads queuing for file system access. You&#39;d have to profile that to see if I&#39;m right."}], "answers": [{"tags": [], "owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "is_accepted": false, "score": 0, "last_activity_date": 1463008020, "creation_date": 1463008020, "answer_id": 37174704, "question_id": 37173388, "link": "https://stackoverflow.com/questions/37173388/reading-integers-from-a-file-and-store-it-in-a-2d-vector/37174704#37174704", "title": "Reading integers from a file and store it in a 2D vector", "body": "<p>Suppose the file is like this:</p>\n\n<pre><code>1, 2, 3, 4, 5,\n6, 7, 8, 9, 10,\n11, 12, 13, 14, 15,\n</code></pre>\n\n<p>Here's one approach on how you could read the file into a vector and output it to another file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n    using vvint = std::vector&lt;std::vector&lt;int&gt;&gt;;\n    std::ifstream file{ \"file.txt\" };\n    vvint vec;\n\n    std::string line;\n    while (std::getline(file, line)) {\n        std::stringstream ss(line);\n        std::string str_num;\n        std::vector&lt;int&gt; temp;\n        while (std::getline(ss, str_num, ',')) {\n            temp.emplace_back(std::stoi(str_num));\n        }\n            vec.emplace_back(temp);\n    }\n\n    std::ofstream out_file{ \"output.txt\" };\n    for (const auto&amp; i : vec) {\n        for (const auto&amp; j : i) {\n            out_file &lt;&lt; j &lt;&lt; \", \";\n        }\n        out_file &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6199879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b578cb4a8473a5c2732f6dd57b099bf3?s=128&d=identicon&r=PG&f=1", "display_name": "CIVI89", "link": "https://stackoverflow.com/users/6199879/civi89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463008020, "creation_date": 1463001171, "question_id": 37173388, "link": "https://stackoverflow.com/questions/37173388/reading-integers-from-a-file-and-store-it-in-a-2d-vector", "title": "Reading integers from a file and store it in a 2D vector", "body": "<p>I've a problem in reading from a file and saving back in a 2D vector. This is the function that write on the file:</p>\n\n<pre><code>void create_input (int num_frames, int height, int width)\n{\n    ofstream GridFlow;\n\n    GridFlow.open (\"GridDB\");\n\n    for (int i = 0; i &lt; num_frames; i++)\n    {\n        for (int j = 0; j &lt; height; j++)\n        {\n            for (int k = 0; k &lt; width; k++)\n            {\n                GridFlow &lt;&lt; setw(5);\n                GridFlow &lt;&lt; rand() % 256 &lt;&lt; endl;\n            }\n        }\n    }\n\n    GridFlow.close();\n}\n</code></pre>\n\n<p>That simply writes a random number for each line (height * width * num_frames) number of times. Like this:</p>\n\n<pre><code>    3\n   74\n  160\n   78\n   15\n   30\n  127\n   64\n  178\n   15\n  107\n</code></pre>\n\n<p>What I want to do is to read back from the file and save different chunks of the file (width * height) in different frames. I've tried to do this but the program blocks without any error: </p>\n\n<pre><code>vector&lt;Frame&gt; movie;\nmovie.resize(num_frames);\n\nfor (int i = 0; i &lt; num_frames; i++)\n{\n    Frame frame;\n\n    int offset = i*width*height*6;\n\n    vector&lt;vector&lt;int&gt;&gt;tmp_grid(height, vector&lt;int&gt;(width, 0));\n\n    ifstream GridFlow;\n    GridFlow.open (\"GridDB\");\n    GridFlow.seekg(offset, GridFlow.beg);\n\n    for (int h = 0; h &lt; height; h++)\n    {\n        for (int g = 0; g &lt; width; g++)\n        {\n            int value;\n\n            GridFlow &gt;&gt; value;\n\n            tmp_grid[h][g] = value;\n        }\n    }\n\n    frame.grid = tmp_grid;\n    movie[i] = frame;\n}\n</code></pre>\n\n<p>I've used an offset that each time is multiplied by 6 (number of bytes * line) to start reading, the structure Frame is only a 2D vector to store the values. I've to do this with the offset because the next step will be doing this multi threading, each thread knowing the number of the frame should compute the right offset to start reading and storing.</p>\n"}, {"tags": ["c++", "buffer", "itoa"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463000333, "post_id": 37173159, "comment_id": 61880924, "body": "What did you experience when doing so? I can&#39;t spot any UB."}, {"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 3, "creation_date": 1463000443, "post_id": 37173159, "comment_id": 61880984, "body": "Yes you can (the memset is not necessary)"}], "answers": [{"tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": true, "score": 5, "last_activity_date": 1463000754, "creation_date": 1463000754, "answer_id": 37173282, "question_id": 37173159, "link": "https://stackoverflow.com/questions/37173159/can-i-reuse-the-same-buffer-for-subsequent-itoa-calls/37173282#37173282", "title": "Can I reuse the same buffer for subsequent itoa() calls?", "body": "<p>Yes it is safe.</p>\n\n<p><code>itoa</code> will just overwrite the memory, and insert a null terminator at the end. It is this null terminator which makes it safe (assuming of course that your array is large enough)</p>\n\n<p>Consider the following:</p>\n\n<pre><code>int iInt = 12345;\nchar pBuf[10];\nitoa(iInt, pBuf, 10);\n</code></pre>\n\n<p>At this point, <code>pBuf</code> will look something like this in memory:</p>\n\n<pre><code>+---+---+---+---+---+----+-----------------------------+\n| 1 | 2 | 3 | 4 | 5 | \\0 | ... unintialised memory ... |\n+---+---+---+---+---+----+-----------------------------+\n</code></pre>\n\n<p>Then you re-use <code>pBuf</code>:</p>\n\n<pre><code>int iInt2 = 5;    \nitoa(iInt2, pBuf, 10);\n</code></pre>\n\n<p>Now <code>pBuf</code> will look like something this in memory:</p>\n\n<pre><code>+---+----+---+---+---+----+-----------------------------+\n| 5 | \\0 | 3 | 4 | 5 | \\0 | ... unintialised memory ... |\n+---+----+---+---+---+----+-----------------------------+\n       ^\n       |\n       +---- note the null terminator \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1389, "user_id": 1038309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1882b1ee3d56a02a08f95a7b833e38?s=128&d=identicon&r=PG", "display_name": "quarterdome", "link": "https://stackoverflow.com/users/1038309/quarterdome"}, "is_accepted": false, "score": 2, "last_activity_date": 1463000762, "creation_date": 1463000762, "answer_id": 37173286, "question_id": 37173159, "link": "https://stackoverflow.com/questions/37173159/can-i-reuse-the-same-buffer-for-subsequent-itoa-calls/37173286#37173286", "title": "Can I reuse the same buffer for subsequent itoa() calls?", "body": "<p>Yes you can. No need to <code>memset()</code>, <code>itoa()</code> will overwrite. </p>\n\n<p>Also make sure your buffer is large enough to fit the value. </p>\n"}, {"comments": [{"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 1, "creation_date": 1463001582, "post_id": 37173296, "comment_id": 61881588, "body": "Thanks for that tip. I did end up just using <code>to_string</code> instead."}, {"owner": {"reputation": 2794, "user_id": 5836291, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1327347077/picture?type=large", "display_name": "Vtik", "link": "https://stackoverflow.com/users/5836291/vtik"}, "reply_to_user": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 0, "creation_date": 1463001767, "post_id": 37173296, "comment_id": 61881673, "body": "if that helped, don&#39;t forget to accept the answer, please . Thanks"}, {"owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "edited": false, "score": 0, "creation_date": 1463061868, "post_id": 37173296, "comment_id": 61911189, "body": "It was helpful though it wasn&#39;t a direct answer to the question technically."}], "tags": [], "owner": {"reputation": 2794, "user_id": 5836291, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/1327347077/picture?type=large", "display_name": "Vtik", "link": "https://stackoverflow.com/users/5836291/vtik"}, "is_accepted": false, "score": 1, "last_activity_date": 1463000804, "creation_date": 1463000804, "answer_id": 37173296, "question_id": 37173159, "link": "https://stackoverflow.com/questions/37173159/can-i-reuse-the-same-buffer-for-subsequent-itoa-calls/37173296#37173296", "title": "Can I reuse the same buffer for subsequent itoa() calls?", "body": "<p>Best practice: <strong>Don't use it at all</strong>, this function is not defined in ANSI-C and is not part of C++, but is supported by some compilers.</p>\n\n<p>Use <code>std::to_string</code> instead. (to keep in mind, std::to_string may yield unexpected results when used with floating point types and the return values may be substantially different from what std::cout would print)</p>\n"}, {"tags": [], "owner": {"reputation": 11286, "user_id": 3928385, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/3HdfL.png?s=128&g=1", "display_name": "Ishamael", "link": "https://stackoverflow.com/users/3928385/ishamael"}, "is_accepted": false, "score": 2, "last_activity_date": 1463000804, "creation_date": 1463000804, "answer_id": 37173297, "question_id": 37173159, "link": "https://stackoverflow.com/questions/37173159/can-i-reuse-the-same-buffer-for-subsequent-itoa-calls/37173297#37173297", "title": "Can I reuse the same buffer for subsequent itoa() calls?", "body": "<p>Yes, you can call <code>itoa</code> twice using the same buffer. Memset is also not necessary, because <code>itoa</code> makes no assumptions about the buffer being empty.</p>\n\n<p>Also note that <code>10</code> characters is not long enough for <code>itoa</code>, the string representing a 4 bytes int can be as long as 11 characters + <code>\\0</code> terminator, totalling 12 bytes.</p>\n"}], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 37173282, "answer_count": 4, "score": 3, "last_activity_date": 1463000804, "creation_date": 1463000268, "last_edit_date": 1463000492, "question_id": 37173159, "link": "https://stackoverflow.com/questions/37173159/can-i-reuse-the-same-buffer-for-subsequent-itoa-calls", "title": "Can I reuse the same buffer for subsequent itoa() calls?", "body": "<p>I'm wondering if this is safe/sanctioned usage:</p>\n\n<pre><code>char pBuf[10];\nitoa(iInt, pBuf, 10);\n// pBuf value gets copied elsewhere\n\n//memset(pBuf, 0, sizeof(pBuf)); // Is this necessary?\nitoa(iInt2, pBuf, 10);\n// pBuf value gets copied elsewhere\n</code></pre>\n\n<p>Can I reuse the buffer like this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3242, "user_id": 445525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac37c182e46d085a1b3d1042a7419682?s=128&d=identicon&r=PG", "display_name": "James Youngman", "link": "https://stackoverflow.com/users/445525/james-youngman"}, "edited": false, "score": 0, "creation_date": 1463000499, "post_id": 37173141, "comment_id": 61881014, "body": "Yes.   But  using my_logs(foo) is more flexible (since it allows you to change the type of my_logs without changing other code)."}], "answers": [{"comments": [{"owner": {"reputation": 6540, "user_id": 983333, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/af2e20bf7ed9b97f26878bda2d9d3288?s=128&d=identicon&r=PG", "display_name": "vinnylinux", "link": "https://stackoverflow.com/users/983333/vinnylinux"}, "edited": false, "score": 0, "creation_date": 1463005954, "post_id": 37173436, "comment_id": 61883369, "body": "Quick question: how can i detect remains on my buffer?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 3, "last_activity_date": 1463001396, "creation_date": 1463001396, "answer_id": 37173436, "question_id": 37173141, "link": "https://stackoverflow.com/questions/37173141/hashmap-of-ostringstream/37173436#37173436", "title": "Hashmap of ostringstream?", "body": "<p>Yes. The only requirement that either <code>std::map</code> nor <code>std::unordered_map</code> place on <code>operator[]</code> for the <code>mapped_type</code> is that it be DefaultConstructible. Since <code>std::ostringstream</code> is DefaultConstructible - this is perfectly valid code.</p>\n\n<p>It's as efficient as map lookup - whether that's efficient enough depends on the rest of your program. If you're logging stuff through <code>ostringstream</code>, I doubt the additional map lookup will be significant to the rest of the logging. But, if it's a concern, you can simply keep references instead:</p>\n\n<pre><code>auto&amp;&amp; log_info = my_logs[\"info\"];\n// ...\n\nlog_info &lt;&lt; blah;\n</code></pre>\n\n<p>and use the references. References aren't invalidated by either map (unless you erase the subsequent logs). </p>\n"}], "owner": {"reputation": 6540, "user_id": 983333, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/af2e20bf7ed9b97f26878bda2d9d3288?s=128&d=identicon&r=PG", "display_name": "vinnylinux", "link": "https://stackoverflow.com/users/983333/vinnylinux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 37173436, "answer_count": 1, "score": 2, "last_activity_date": 1463001396, "creation_date": 1463000211, "question_id": 37173141, "link": "https://stackoverflow.com/questions/37173141/hashmap-of-ostringstream", "title": "Hashmap of ostringstream?", "body": "<p>Is it possible to have a map or an unordered_map of ostringstream? How efficient it is? I want to populate streams by \"id\":</p>\n\n<pre><code>my_logs[\"info\"] &lt;&lt; \"stuff\"\nmy_logs[\"info\"] &lt;&lt; \"stuff\"\nmy_logs[\"debug\"] &lt;&lt; \"stuff\"\n</code></pre>\n"}, {"tags": ["c++", "opengl", "textures"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1463000350, "post_id": 37172998, "comment_id": 61880931, "body": "In <code>handleKeys()</code> why are you testing for equality with <code>gViewportMode == VIEWPORT_MODE_C</code> and ignoring the result?"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1463000982, "post_id": 37172998, "comment_id": 61881270, "body": "it was supposed to help keep the cycle going but now that you&#39;ve said that I&#39;m thinking I can just remove that if statement entirely. Unfortunately I cannot test that right now as I&#39;m away from my house and computer. I&#39;ll post an update ASAP."}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1463025799, "post_id": 37172998, "comment_id": 61888406, "body": "Update: I removed the <code>if ( key == &#39;q&#39; ) { gViewportMode++; if ( gViewportMode &gt; VIEWPORT_MODE_N )  { gViewportMode == VIEWPORT_MODE_C; } }</code>"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1463026150, "post_id": 37172998, "comment_id": 61888497, "body": "I&#39;m still getting the same results, I thought removing it might do something but there was no change."}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1463026567, "post_id": 37172998, "comment_id": 61888597, "body": "I also tried changing the <code>gViewPortMode == VIEWPORT_MODE_C;</code> to <code>gViewPortMode = VIEWPORT_MODE_C;</code> Sorry for the comment spam..."}, {"owner": {"reputation": 757, "user_id": 1220338, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78cb6dfe63d03ee7196863e9822bce3e?s=128&d=identicon&r=PG", "display_name": "jocopa3", "link": "https://stackoverflow.com/users/1220338/jocopa3"}, "edited": false, "score": 0, "creation_date": 1463058664, "post_id": 37172998, "comment_id": 61908532, "body": "Why are you setting <code>gArrowClips</code> in <code>loadMedia</code>? Why not put all the code for <code>gArrowClips</code> in a new function and then call that new function when the q key is pressed after updating <code>gViewportMode</code>? I&#39;m assuming <code>loadMedia</code> is only called once during initialization, since you don&#39;t call it anywhere in the code sample you provided."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "edited": false, "score": 0, "creation_date": 1463080219, "post_id": 37188541, "comment_id": 61923472, "body": "It didn&#39;t work to update the textures so I tried rendering a couple basic quads of different colors under each viewport mode. The first quad rendered fine but the second wouldn&#39;t come up at all when I pressed &quot;q&quot; (the window just remained the same) so I now believe this to be a problem with my viewport. This is the same way I always change my viewport and I&#39;ve never had any issues with it until now. Does anyone know what I can do to fix this? Any alternatives?"}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "edited": false, "score": 0, "creation_date": 1463086263, "post_id": 37188541, "comment_id": 61926742, "body": "Ok so I played around with it a little more and got a red quad to render once I press q. The new issue is once the red quad is rendered it tints the textures red and even worse once I press q again it removes the quad but the textures stay red."}, {"owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "edited": false, "score": 0, "creation_date": 1463112033, "post_id": 37188541, "comment_id": 61934047, "body": "I tried to add <code>glDisable(GL_TEXTURE_2D);</code> into my handleKeys() function which obviously turns all the textures white when I pressed q. But once I added in a <code>glEnable(GL_TEXTURE_2D);</code> under it after the <code>gViewportMode++;</code> it stopped doing anything. I was however able to get it to switch from white quads back to textures and vise versa by putting the <code>glEnable(GL_TEXTURE_2D);</code> in its own key command. I&#39;m completely stumped right now and Google doesn&#39;t have the answers I need."}], "tags": [], "owner": {"reputation": 757, "user_id": 1220338, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/78cb6dfe63d03ee7196863e9822bce3e?s=128&d=identicon&r=PG", "display_name": "jocopa3", "link": "https://stackoverflow.com/users/1220338/jocopa3"}, "is_accepted": false, "score": 0, "last_activity_date": 1463060346, "last_edit_date": 1463060346, "creation_date": 1463060037, "answer_id": 37188541, "question_id": 37172998, "link": "https://stackoverflow.com/questions/37172998/swapping-between-textures-on-a-sprite-sheet-opengl-c/37188541#37188541", "title": "Swapping between textures on a sprite sheet (OpenGL, C++)", "body": "<p>The OpenGL code looks fine, it's just a matter of updating <code>gArrowClips</code> every time the <em>q</em> key is pressed. From the code sample you provided, it looks like you're only setting <code>gArrowClips</code> when <code>loadMedia()</code> is called. Since you never call <code>loadMedia()</code> after the <em>q</em> key is pressed, meaning <code>gArrowClips</code> is never updated, no changes to the textures take effect. I'm assuming <code>loadMedia()</code> is only ever called once when your program starts since it handles loading a texture from a file and you don't call it anywhere else from your code. </p>\n\n<p>I haven't tested the code below, but it should do what you're asking. I essentially moved the code you had in <code>loadMedia()</code> that handles setting <code>gArrowClips</code> to its own function, <code>updateSpriteAreas()</code>. I then call that function once when <code>loadMedia()</code> is called to initialize <code>gArrowClips</code>, and again when the <em>q</em> key is pressed in <code>handleKeys()</code> to change the sprite textures.</p>\n\n<pre><code>#include \"LUtil.h\"\n#include &lt;IL/il.h&gt;\n#include &lt;IL/ilu.h&gt;\n#include \"LTexture.h\"\n\nint gViewportMode = VIEWPORT_MODE_C;\n\n//Sprite texture\nLTexture gArrowTexture;\n\n//Sprite area\nLFRect gArrowClips[ 4 ];\n\nbool initGL()\n{\n    //Set the viewport\n    glViewport( 0.f, 0.f, SCREEN_WIDTH, SCREEN_HEIGHT );\n\n    //Initialize Projection Matrix\n    glMatrixMode( GL_PROJECTION );\n    glLoadIdentity();\n    glOrtho( 0.0, SCREEN_WIDTH, SCREEN_HEIGHT, 0.0, 1.0, -1.0 );\n\n    //Initialize Modelview Matrix\n    glMatrixMode( GL_MODELVIEW );\n    glLoadIdentity();\n\n    //Initialize clear color\n    glClearColor( 0.f, 0.f, 0.f, 1.f );\n\n    //Enable texturing\n    glEnable( GL_TEXTURE_2D );\n\n    //Check for error\n    GLenum error = glGetError();\n    if( error != GL_NO_ERROR )\n    {\n        printf( \"Error initializing OpenGL! %s\\n\", gluErrorString(error);\n        return false;\n    }\n\n    //Initialize DevIL\n    ilInit();\n    ilClearColour( 255, 255, 255, 000 );\n\n    //Check for error\n    ILenum ilError = ilGetError();\n    if( ilError != IL_NO_ERROR )\n    {\n        printf( \"Error initializing DevIL! %s\\n\", iluErrorString(ilError) );\n        return false;\n    }\n\n    return true;\n}\n\n//Move the sprite changes to a new function that gets called every time you make changes\nvoid updateSpriteAreas()\n{\n    //Set clip rectangles\n    if ( gViewportMode == VIEWPORT_MODE_C) {\n        gArrowClips[ 0 ].x = 0.f;\n        gArrowClips[ 0 ].y = 0.f;\n        gArrowClips[ 0 ].w = 330.f;\n        gArrowClips[ 0 ].h = 355.f;\n\n        gArrowClips[ 1 ].x = 330.f;\n        gArrowClips[ 1 ].y = 0.f;\n        gArrowClips[ 1 ].w = 310.f;\n        gArrowClips[ 1 ].h = 480.f;\n\n        gArrowClips[ 2 ].x = 0.f;\n        gArrowClips[ 2 ].y = 355.f;\n        gArrowClips[ 2 ].w = 330.f;\n        gArrowClips[ 2 ].h = 125.f;\n    }\n    else if ( gViewportMode == VIEWPORT_MODE_N) {\n        gArrowClips[ 0 ].x = 0.f;\n        gArrowClips[ 0 ].y = 480.f;\n        gArrowClips[ 0 ].w = 330.f;\n        gArrowClips[ 0 ].h = 355.f;\n\n        gArrowClips[ 1 ].x = 330.f;\n        gArrowClips[ 1 ].y = 480.f;\n        gArrowClips[ 1 ].w = 310.f;\n        gArrowClips[ 1 ].h = 480.f;\n\n        gArrowClips[ 2 ].x = 0.f;\n        gArrowClips[ 2 ].y = 835.f;\n        gArrowClips[ 2 ].w = 330.f;\n        gArrowClips[ 2 ].h = 125.f;\n    }\n}\n\nbool loadMedia()\n{\n    //Initialize the sprite rectangles\n    updateSpriteAreas()\n\n    //Load texture\n    if( !gArrowTexture.loadTextureFromFile( \"SpriteSheet.png\" ) )\n    {\n        printf( \"Unable to load texture!\\n\" );\n        return false;\n    }\n    return true;\n}\n\nvoid update()\n{\n\n}\n\nvoid render()\n{\n    //Clear color buffer\n    glClear( GL_COLOR_BUFFER_BIT );\n\n    //Render arrows\n    gArrowTexture.render( 0.f, 0.f, &amp;gArrowClips[ 0 ] );\n    gArrowTexture.render( SCREEN_WIDTH - gArrowClips[ 1 ].w, 0.f, &amp;gArrowClips[ 1 ] );\n    gArrowTexture.render( 0.f, SCREEN_HEIGHT - gArrowClips[ 2 ].h, &amp;gArrowClips[ 2 ] );\n\n    //Update screen\n    glutSwapBuffers();\n\n}\nvoid handleKeys( unsigned char key, int x, int y )\n{\n    //If the user presses q\n    if( key == 'q' )\n    {\n        gViewportMode++;\n        if ( gViewportMode &gt; VIEWPORT_MODE_N ) \n        {\n            gViewportMode == VIEWPORT_MODE_C;\n        }\n        //Update the sprite rectangles so the texture change takes effect\n        updateSpriteAreas();\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "is_accepted": false, "score": 0, "last_activity_date": 1463146926, "creation_date": 1463146926, "answer_id": 37211593, "question_id": 37172998, "link": "https://stackoverflow.com/questions/37172998/swapping-between-textures-on-a-sprite-sheet-opengl-c/37211593#37211593", "title": "Swapping between textures on a sprite sheet (OpenGL, C++)", "body": "<p>I fixed my issue simply by turning the one sprite sheet into 2(1 sprite sheet for each set of images)and adding an int with a value of 0 then put an if and else if statement in my handle keys function that both check if q is pressed then check the value of the int. In the if statement if the value of the int is 0 when q is pressed, it will change the image and add 1 to the int. In the else if statement it checks if the value of the int is 1 when q is pressed, change the image, then subtract 1 from the int.</p>\n"}], "owner": {"reputation": 21, "user_id": 6322396, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/eULRp.jpg?s=128&g=1", "display_name": "PocketTNT", "link": "https://stackoverflow.com/users/6322396/pockettnt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463146926, "creation_date": 1462999639, "question_id": 37172998, "link": "https://stackoverflow.com/questions/37172998/swapping-between-textures-on-a-sprite-sheet-opengl-c", "title": "Swapping between textures on a sprite sheet (OpenGL, C++)", "body": "<p>I'm working on a project where I want to swap between two textures on a sprite sheet using OpenGL.\nI have both textures rendering in my window individually with no issues but I can't get them to switch with the key press I have set.\nCould someone tell me what I'm doing wrong/missing to get it to swap?</p>\n\n<pre><code>#include \"LUtil.h\"\n#include &lt;IL/il.h&gt;\n#include &lt;IL/ilu.h&gt;\n#include \"LTexture.h\"\n\nint gViewportMode = VIEWPORT_MODE_C;\n\n//Sprite texture\nLTexture gArrowTexture;\n\n//Sprite area\nLFRect gArrowClips[ 4 ];\n\nbool initGL()\n{\n//Set the viewport\nglViewport( 0.f, 0.f, SCREEN_WIDTH, SCREEN_HEIGHT );\n\n//Initialize Projection Matrix\nglMatrixMode( GL_PROJECTION );\nglLoadIdentity();\nglOrtho( 0.0, SCREEN_WIDTH, SCREEN_HEIGHT, 0.0, 1.0, -1.0 );\n\n//Initialize Modelview Matrix\nglMatrixMode( GL_MODELVIEW );\nglLoadIdentity();\n\n//Initialize clear color\nglClearColor( 0.f, 0.f, 0.f, 1.f );\n\n//Enable texturing\nglEnable( GL_TEXTURE_2D );\n\n//Check for error\nGLenum error = glGetError();\nif( error != GL_NO_ERROR )\n{\n    printf( \"Error initializing OpenGL! %s\\n\", gluErrorString(error);\n    return false;\n}\n\n//Initialize DevIL\nilInit();\nilClearColour( 255, 255, 255, 000 );\n\n//Check for error\nILenum ilError = ilGetError();\nif( ilError != IL_NO_ERROR )\n{\n printf( \"Error initializing DevIL! %s\\n\", iluErrorString(ilError) );\n    return false;\n}\n\nreturn true;\n}\n\nbool loadMedia()\n{\n//Set clip rectangles\nif ( gViewportMode == VIEWPORT_MODE_C) {\ngArrowClips[ 0 ].x = 0.f;\ngArrowClips[ 0 ].y = 0.f;\ngArrowClips[ 0 ].w = 330.f;\ngArrowClips[ 0 ].h = 355.f;\n\ngArrowClips[ 1 ].x = 330.f;\ngArrowClips[ 1 ].y = 0.f;\ngArrowClips[ 1 ].w = 310.f;\ngArrowClips[ 1 ].h = 480.f;\n\ngArrowClips[ 2 ].x = 0.f;\ngArrowClips[ 2 ].y = 355.f;\ngArrowClips[ 2 ].w = 330.f;\ngArrowClips[ 2 ].h = 125.f;\n}\nelse if ( gViewportMode == VIEWPORT_MODE_N) {\ngArrowClips[ 0 ].x = 0.f;\ngArrowClips[ 0 ].y = 480.f;\ngArrowClips[ 0 ].w = 330.f;\ngArrowClips[ 0 ].h = 355.f;\n\ngArrowClips[ 1 ].x = 330.f;\ngArrowClips[ 1 ].y = 480.f;\ngArrowClips[ 1 ].w = 310.f;\ngArrowClips[ 1 ].h = 480.f;\n\ngArrowClips[ 2 ].x = 0.f;\ngArrowClips[ 2 ].y = 835.f;\ngArrowClips[ 2 ].w = 330.f;\ngArrowClips[ 2 ].h = 125.f;\n}\n//Load texture\nif( !gArrowTexture.loadTextureFromFile( \"SpriteSheet.png\" ) )\n{\n    printf( \"Unable to load texture!\\n\" );\n    return false;\n}\nreturn true;\n}\n\nvoid update()\n{\n\n}\n\nvoid render()\n{\n//Clear color buffer\nglClear( GL_COLOR_BUFFER_BIT );\n\n//Render arrows\ngArrowTexture.render( 0.f, 0.f, &amp;gArrowClips[ 0 ] );\ngArrowTexture.render( SCREEN_WIDTH - gArrowClips[ 1 ].w, 0.f, &amp;gArrowClips[ 1 ] );\ngArrowTexture.render( 0.f, SCREEN_HEIGHT - gArrowClips[ 2 ].h, &amp;gArrowClips[ 2 ] );\n\n\n\n\n//Update screen\nglutSwapBuffers();\n\n}\nvoid handleKeys( unsigned char key, int x, int y )\n{\n//If the user presses q\nif( key == 'q' )\n{\ngViewportMode++;\nif ( gViewportMode &gt; VIEWPORT_MODE_N ) \n{\ngViewportMode == VIEWPORT_MODE_C;\n}\n}\n}\n</code></pre>\n\n<p>Like I said earlier I am able to get the different textures to render by swapping VIEWPORT_MODE_C and VIEWPORT_MODE_N at int gViewPortMode just under my includes.</p>\n\n<p>My issue is that I cannot get them to swap using the key command that switches the viewport so I have to stop the program, change the code, then start it again to change the textures.</p>\n\n<p>Does switching the viewport just not work for this?\nIf yes, is there an alternative?\nIf no, what do I need to fix/change?</p>\n"}, {"tags": ["c++", "sprite", "sfml"], "comments": [{"owner": {"reputation": 9606, "user_id": 3677097, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b8c49e598194e53b9aba3a195da387a5?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas DM", "link": "https://stackoverflow.com/users/3677097/andreas-dm"}, "edited": false, "score": 0, "creation_date": 1463000376, "post_id": 37172983, "comment_id": 61880951, "body": "Can you post the relevant code?"}, {"owner": {"reputation": 155, "user_id": 2647614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5808b4faa22effde3109a7a8eb3adfd?s=128&d=identicon&r=PG", "display_name": "DarkPhantom", "link": "https://stackoverflow.com/users/2647614/darkphantom"}, "edited": false, "score": 0, "creation_date": 1463014437, "post_id": 37172983, "comment_id": 61885644, "body": "The origin also affects the position, use <code>Sprite::setPosition</code> to correctly place the Sprite"}, {"owner": {"reputation": 45, "user_id": 5923167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-z-8x0kiT3J0/AAAAAAAAAAI/AAAAAAAAADc/1g2-wN0gFHQ/photo.jpg?sz=128", "display_name": "D4RKS0UL23", "link": "https://stackoverflow.com/users/5923167/d4rks0ul23"}, "reply_to_user": {"reputation": 155, "user_id": 2647614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5808b4faa22effde3109a7a8eb3adfd?s=128&d=identicon&r=PG", "display_name": "DarkPhantom", "link": "https://stackoverflow.com/users/2647614/darkphantom"}, "edited": false, "score": 0, "creation_date": 1463058885, "post_id": 37172983, "comment_id": 61908708, "body": "@DarkPhantom I know that I have to set thr position new. I also have made this, and the Texture AND the Sprite have been set to the new position. But as I said: Sprite and Texture are offset.  Edit: The Upper left corner of the Sprite, is now in the middle (the new origin) of the Texture. So the sprite&#39;s hitbox starts in the center of the texture I set"}, {"owner": {"reputation": 155, "user_id": 2647614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5808b4faa22effde3109a7a8eb3adfd?s=128&d=identicon&r=PG", "display_name": "DarkPhantom", "link": "https://stackoverflow.com/users/2647614/darkphantom"}, "edited": false, "score": 0, "creation_date": 1463076585, "post_id": 37172983, "comment_id": 61921351, "body": "Then the problem is where you create the hitbox (<code>sf::Sprite</code> does not have a hitbox or anything like that, just shows the texture). Shows the code where you create the hitbox."}], "owner": {"reputation": 45, "user_id": 5923167, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-z-8x0kiT3J0/AAAAAAAAAAI/AAAAAAAAADc/1g2-wN0gFHQ/photo.jpg?sz=128", "display_name": "D4RKS0UL23", "link": "https://stackoverflow.com/users/5923167/d4rks0ul23"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 602, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462999595, "creation_date": 1462999595, "question_id": 37172983, "link": "https://stackoverflow.com/questions/37172983/sfml-sprite-is-changing-the-position-of-the-texture-when-setting-an-origin", "title": "SFML Sprite is changing the position of the texture when setting an origin", "body": "<p>I'm recently trying to build a program by myself, and for this reason I need to make a Sprite bigger when the MouseCursor is over it. Is solved it by checking for Mouse movement and then checking if ths mouse is over the Sprite. I increase the size of the sprite by using the <code>setScale();</code> function. The problem then was, that the Sprite has been enlarged, but the center of the Sprite has been moved. I tried to set the Origin to the center of the Sprite, but now, the texture is at an other place than the Sprite.</p>\n\n<p>The Texture is 500x500px large, so I set the origin to 250, 250. The Texture of the sprite moved to the right spot, since the origin is at an other place. The Position is \"50, 250\", so the texture is slightly off the screen. When I set a new position, the texture moves, but the sprite also. So texture and sprite don't match anymore.</p>\n\n<p>Does anyone know how to fix the problem?</p>\n"}, {"tags": ["c++", "vector", "struct", "binary"], "comments": [{"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1462999603, "post_id": 37172971, "comment_id": 61880556, "body": "Note: The crash occurs right after  cout &lt;&lt; &quot;Attempting to load book...&quot; &lt;&lt; endl; is called..."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1462999731, "post_id": 37172971, "comment_id": 61880629, "body": "I strongly recommend you take a look at <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/serialization/doc/index.html\" rel=\"nofollow noreferrer\">Boost.Serialization</a>."}, {"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "reply_to_user": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1462999824, "post_id": 37172971, "comment_id": 61880676, "body": "This is for a class project, and I&#39;m not allowed to use boost."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463000423, "post_id": 37172971, "comment_id": 61880977, "body": "Why oh why do they give these &quot;binary file&quot; writing / reading assignments, when it will not work?  Your <code>Book</code> is not a POD type, thus it cannot be written to a binary file in the fashion that you&#39;re writing it.  You cannot write <code>Book</code> in just a binary blob like that -- it has to be serialized, meaning you must write the <i>data</i> to the file, not the object.  (I see this question or variations of it over and over again, especially from students)."}, {"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1463000483, "post_id": 37172971, "comment_id": 61881001, "body": "Is it the string inclusion that prevents it from being a POD? I was under the impression that I could serialize it like so if I preceded it with the size of the struct."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463000615, "post_id": 37172971, "comment_id": 61881068, "body": "@Kerem The <code>sizeof</code> is a compile-time value.  The <code>sizeof</code> knows nothing about how much data your string is using at runtime.  If you want proof, write a <code>Book</code> object with 50 or so characters for the string members.  Open the file you wrote in an editor -- can you identify where the string is, or do you just see junk where the string data is supposed to be?  I bet it&#39;s junk."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1463001320, "post_id": 37172971, "comment_id": 61881448, "body": "@Kerem  Also <code>sizeof(Book)</code> -- <a href=\"http://ideone.com/ajdwx2\" rel=\"nofollow noreferrer\">see here</a>.  Note that the value is the same before and after one of the strings is populated.  The <code>sizeof</code> just gives you the size of the type, in bytes, and type <code>Book</code> is 16 bytes."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1463000645, "post_id": 37173226, "comment_id": 61881082, "body": "Thanks for the quick answer. I&#39;m also assuming I could use a c-string in the Book struct instead."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "reply_to_user": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1463000887, "post_id": 37173226, "comment_id": 61881218, "body": "Of course you could use a c-string, and then it would be obvious that it&#39;s a pointer and that serializing a pointer doesn&#39;t make much sense, right? I would stick with <code>std::string</code>, though; it&#39;s the proper C++ type choice, and you have to write special (de)serialization code either way."}, {"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1463002196, "post_id": 37173226, "comment_id": 61881867, "body": "I&#39;d imagine using a c-string would work, as the ofstream::write method takes a pointer anyways?"}, {"owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "edited": false, "score": 0, "creation_date": 1463002219, "post_id": 37173226, "comment_id": 61881886, "body": "Either way, I&#39;ve implemented what you mentioned and it works."}], "tags": [], "owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "is_accepted": true, "score": 1, "last_activity_date": 1463000516, "creation_date": 1463000516, "answer_id": 37173226, "question_id": 37172971, "link": "https://stackoverflow.com/questions/37172971/storing-vector-of-variable-size-structs-in-a-binary-file-in-c/37173226#37173226", "title": "Storing vector of variable-size structs in a binary file in c++", "body": "<p>In general I would always recommend to use a library such as <a href=\"http://www.boost.org/doc/libs/1_60_0/libs/serialization/doc/index.html\" rel=\"nofollow\">Boost.Serialization</a>, but alas, you're not allowed to use Boost (or any other serialization library, I guess).  So we'll look at your current approach instead.</p>\n\n<p>While your method of dumping the binary object layout straight to disk is fraught with risk (e.g. because of platform dependencies like endianness), I'll assume that for a mere class project we can live with these deficiencies.</p>\n\n<p>Your main problem, right now, is that you are dumping the <code>struct Book</code> memory representation to disk and reading it back in, but you are overlooking the fact that the <code>std::string</code> fields are not handled like that.</p>\n\n<p>Internally, <code>std::string</code> is <em>not a POD</em>, but (roughly) another class which allocates <em>separate</em> memory for the actual string data (for sake of illustration, assume it carries a <code>char*</code> pointer in its implementation).  You are currently not storing this data; you are only storing the values of <code>std::string</code>'s internal pointers, and reading them back when loading.  At that point, these internal pointers are pointing nowhere meaningful.</p>\n\n<p>For a rough idea of what you need to do, you will have to explicitly and individually serialize/deserialize all members of your <code>Book</code> class recursively.  Roughly like this:</p>\n\n<ol>\n<li>Store the length, and the raw string data of <code>author</code></li>\n<li>Store the length, and the raw string data of <code>title</code></li>\n<li>Store the length, and the raw string data of <code>isbn</code></li>\n<li>Store the integer <code>copies</code></li>\n<li>Store the enum value of <code>status</code></li>\n</ol>\n\n<p>And when reading, load every member in the same way.  So you will need a serialzer/deserializer function for every \"basic\" type (in your case, <code>std::string</code>, <code>int</code> and <code>Status</code>), and \"combining\" serializer and deserializer functions for <code>Book</code> which call the base members' serialization/deserialization functions in turn.</p>\n\n<p>This is also roughly what Boost.Serialization does internally, so I recommend you have a look at it anyway. Good luck!</p>\n"}], "owner": {"reputation": 113, "user_id": 6322473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9733f47d0afc90220a6f10f006539f33?s=128&d=identicon&r=PG&f=1", "display_name": "knc", "link": "https://stackoverflow.com/users/6322473/knc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 828, "favorite_count": 0, "accepted_answer_id": 37173226, "answer_count": 1, "score": 0, "last_activity_date": 1463000516, "creation_date": 1462999562, "last_edit_date": 1463000380, "question_id": 37172971, "link": "https://stackoverflow.com/questions/37172971/storing-vector-of-variable-size-structs-in-a-binary-file-in-c", "title": "Storing vector of variable-size structs in a binary file in c++", "body": "<p>I am attempting to read and write a vector of structs into a file. Iterating through each struct, first I write the size of the following struct, then I write the structure. I encounter crashes when reading the file.</p>\n\n<p>Structure:</p>\n\n<pre><code>struct Book {\n\n   string author;\n   string title;\n   string isbn;\n   int copies;\n   Status status;\n\n};\n</code></pre>\n\n<p>Loading from file:</p>\n\n<pre><code>void load_books(vector&lt;Book&gt; *books) {\nifstream readFile;\nint read_size;\nBook temp;\n\nreadFile.open(BOOK_DB_FILE.c_str(), ios::in | ios::binary) ;\n\nwhile(readFile.read(reinterpret_cast&lt;char*&gt; (&amp;read_size), sizeof(read_size))) {\n    cout &lt;&lt; read_size &lt;&lt; endl;\n\n    if (!readFile.read(reinterpret_cast&lt;char*&gt; (&amp;temp), read_size)) {\n        cout &lt;&lt; \"Failed to read library.dat!\" &lt;&lt; endl;\n    }\n\n    cout &lt;&lt; \"Attempting to load book...\" &lt;&lt; endl;\n    cout &lt;&lt; temp.title &lt;&lt; \":\" &lt;&lt; temp.copies &lt;&lt; endl;\n\n    (*books).push_back(temp);\n\n}\ncout &lt;&lt; \"Loaded books!\" &lt;&lt; endl;\n\n}\n</code></pre>\n\n<p>Writing to file:</p>\n\n<pre><code>void save_books(vector&lt;Book&gt; *books) {\nofstream writeFile;\nint write_size;\n\nwriteFile.open(BOOK_DB_FILE.c_str(), ios::out | ios::binary);\n\nfor (int ind = 0 ; ind &lt; (*books).size(); ind++) {\n    Book book = (*books)[ind];\n    write_size = sizeof(book);\n\n    cout &lt;&lt; \"Writing book with size: \" &lt;&lt; write_size &lt;&lt; endl;\n    cout &lt;&lt; book.copies &lt;&lt; \" of \" &lt;&lt; book.title &lt;&lt; \" by \" &lt;&lt; book.author &lt;&lt; endl;\n\n    writeFile.write(reinterpret_cast&lt;char*&gt;(&amp;write_size), sizeof(write_size));\n    writeFile.write(reinterpret_cast&lt;char*&gt;(books + ind), write_size);\n}\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++03"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462999414, "post_id": 37172819, "comment_id": 61880465, "body": "Sounds like it&#39;s time to read up on <a href=\"http://en.cppreference.com/w/cpp/regex\" rel=\"nofollow noreferrer\">regular expressions</a>."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1462999474, "post_id": 37172819, "comment_id": 61880492, "body": "This isn&#39;t homework..."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1462999491, "post_id": 37172819, "comment_id": 61880506, "body": "Please undo your vote if that was your reason."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1462999507, "post_id": 37172819, "comment_id": 61880515, "body": "<a href=\"http://stackoverflow.com/questions/8986488/how-to-read-float-with-scientific-notation-from-file-c\" title=\"how to read float with scientific notation from file c\">stackoverflow.com/questions/8986488/&hellip;</a>"}, {"owner": {"reputation": 2052, "user_id": 4434679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vrsg.png?s=128&g=1", "display_name": "BHawk", "link": "https://stackoverflow.com/users/4434679/bhawk"}, "edited": false, "score": 0, "creation_date": 1462999604, "post_id": 37172819, "comment_id": 61880558, "body": "This seems like a job for regular expression. I&#39;m pretty sure that c++98 has support for RE in std::tr1, but I&#39;m taking that info from this answer: <a href=\"http://stackoverflow.com/questions/4716098/regular-expressions-in-c-stl\" title=\"regular expressions in c stl\">stackoverflow.com/questions/4716098/&hellip;</a>"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462999604, "post_id": 37172819, "comment_id": 61880559, "body": "@tadman I read that regex in C++ was not added until 11, is that not true?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1462999665, "post_id": 37172819, "comment_id": 61880600, "body": "@pm100 the link you shared is not relevant."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1462999863, "post_id": 37172819, "comment_id": 61880695, "body": "Whether or not it is homework, you didn&#39;t show any effort in solving the problem. Therefore, the question should remain closed."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1462999918, "post_id": 37172819, "comment_id": 61880718, "body": "@FredLarson so if I write my proposed solution, and add it to the question, then you support reopening my question?"}, {"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 0, "creation_date": 1462999966, "post_id": 37172819, "comment_id": 61880748, "body": "here is the solution to your predicament <a href=\"http://mathematica.stackexchange.com/questions/1737/how-do-you-convert-a-string-containing-a-number-in-c-scientific-notation-to-a-ma\">s=&quot;1.23e-5&quot;;Internal`StringToDouble...</a>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1462999973, "post_id": 37172819, "comment_id": 61880755, "body": "If you provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a> with example input and expected vs. actual output, yes."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1463000071, "post_id": 37172819, "comment_id": 61880807, "body": "@FredLarson got it, thanks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463000277, "post_id": 37172819, "comment_id": 61880901, "body": "@Mike That&#39;s why the documentation has flags like that on the definitions. C++11 is widely supported by pretty much every compiler so generally it&#39;s safe to use unless you&#39;re dealing with historical hardware and compilers. There&#39;s no reason to do this in C++98 unless you have a specific technical constraint."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1463000451, "post_id": 37172819, "comment_id": 61880989, "body": "@tadman I specified C++98 in both my title <b>and</b> the body. I think it&#39;s quite obvious that wasn&#39;t an oversight on my part. It is a restriction based on specific technical restraint far beyond my control."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463000506, "post_id": 37172819, "comment_id": 61881017, "body": "Then I wish you good luck working with a compiler that was released during the Clinton administration."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1463000870, "post_id": 37172819, "comment_id": 61881202, "body": "C++ brings out the pedantic people because C++ is extremely difficult to get right. Each community is a product of how much abuse the compiler or runtime inflicts on them on a daily basis. To crack this nut here: Write a state machine that steps through a <code>std::string</code>."}, {"owner": {"reputation": 4783, "user_id": 3233921, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c91a2bba49841086eb1b85d219f0c2c2?s=128&d=identicon&r=PG", "display_name": "mindriot", "link": "https://stackoverflow.com/users/3233921/mindriot"}, "edited": false, "score": 0, "creation_date": 1463001364, "post_id": 37172819, "comment_id": 61881466, "body": "FWIW, <a href=\"http://www.cs.arizona.edu/~collberg/Teaching/453/2009/Handouts/Handout-3.pdf\" rel=\"nofollow noreferrer\">this lecture handout</a> contains a DFA for floating-point literals."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1463007863, "post_id": 37172819, "comment_id": 61883954, "body": "I added the C++03 tag again because C++ is taken to mean the current standard. I don&#39;t think there is a C++98 tag, but I doubt that you need something that is only available in 98 and not 03, given that the latter consists mainly of fixes on top of the former."}], "answers": [{"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463070307, "post_id": 37175006, "comment_id": 61917613, "body": "I did intentionally leave out those examples, but now that I think more about it I think you&#39;re right. The ones you mentioned should be included. Thanks for the in-depth writeup and pseudo code. Performance is somewhat important because it will run hunderds of thousands of times but it&#39;s not crucial that it be as fast as possible. I&#39;m going to play with thomas&#39; answer a bit to see if it covers all the cases before implementing something along the lines of your pseudo code."}], "tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": true, "score": 3, "last_activity_date": 1463010889, "last_edit_date": 1463010889, "creation_date": 1463010271, "answer_id": 37175006, "question_id": 37172819, "link": "https://stackoverflow.com/questions/37172819/test-if-c98-string-is-a-number-in-scientific-notation/37175006#37175006", "title": "Test if C++98 string is a number in scientific notation", "body": "<p>The main problem with your automaton is in the area of specification/requirements: it requires one or more digits on both sides of the decimal point, rejecting inputs like this:</p>\n\n<pre><code>.123\n.123E3\n123.\n123.E+3\n</code></pre>\n\n<p>It is not immediately obvious that these should be rejected; some programming languages allow these forms. It's probably a good idea to reject something with no mantissa digits at all, though:</p>\n\n<pre><code>.\n.E+03\n</code></pre>\n\n<p>If this is missed requirements, rather than intentional, then your state machine has to be adjusted. Because now elements are optional, the easiest way to fix the state machine is to let it be non-deterministic (NFA graph).  That just introduces unnecessary difficulties. Since you will end up writing code anyway, it's easiest to handle this with <em>ad hoc</em> procedural code.</p>\n\n<p>The advantage which <em>ad hoc</em> procedural code has over a formal treatment with conventional automata is lookahead: it can peek at the next character without consuming the input, as an automaton does and based on the lookahead it can decide whether to consume the character or not, independently of transitioning among several code paths. In other words, pseudo code:</p>\n\n<pre><code>have_digits_flag = false\n\nwhile (string begins with a digit character) {\n   have_digits_flag = true\n   consume digit character \n}\n\nif (!string begins with a decimal point)\n   goto bad;\nconsume decimal point\n\nwhile (string begins with digit) {\n  consume digit\n  have_digits_flag = true;\n}\n\nif (!have_digits_flag)\n  goto bad; // we scanned just a decimal point not flanked by digits!\n\nif (string begins with e or E) {\n   consume character\n   if (string begins with + or -)\n     consume character\n   if (!string begins with digit)\n     goto bad;\n   while (string begins with digit)\n     consume character\n}\n\nif (string is empty)\n  return true;\n\n// oops, trailing junk\n\nbad:\n  return false;\n</code></pre>\n\n<p>The \"string begins with\" operation obviously has to be safe against the string being empty. An empty string simply does not satisfy the \"string begins with\" predicate for any character.</p>\n\n<p>How you implement \"consume character\" is up to you. You can literally remove a character from the <code>std::string</code> object, or move an iterator through it which indicates the input position.</p>\n\n<p>The disadvantage of this type of approach is that it is not efficient. It perhaps doesn't matter here, but in general the <em>ad hoc</em> code suffers from the problem that it keeps testing multiple cases against the lookahead. In a complicated pattern, these can be numerous. A table-driven automaton never has to look at any input symbol a second time.</p>\n"}, {"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463068785, "post_id": 37175788, "comment_id": 61916606, "body": "Thanks, I suppose I should have searched for an existing FSA for scientific notation before drawing one. But oh well, it was kind of fun to work it out on the whiteboard."}, {"owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "reply_to_user": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463101769, "post_id": 37175788, "comment_id": 61931807, "body": "Added back the implementation of strict number parse from my json parser. It can tell whether it is floating point and specializes integers to allow non-standard full-range 64-bit numbers."}], "tags": [], "owner": {"reputation": 5994, "user_id": 1127972, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WkDOK.jpg?s=128&g=1", "display_name": "doug65536", "link": "https://stackoverflow.com/users/1127972/doug65536"}, "is_accepted": false, "score": 2, "last_activity_date": 1463101727, "last_edit_date": 1463101727, "creation_date": 1463016557, "answer_id": 37175788, "question_id": 37172819, "link": "https://stackoverflow.com/questions/37172819/test-if-c98-string-is-a-number-in-scientific-notation/37175788#37175788", "title": "Test if C++98 string is a number in scientific notation", "body": "<p><a href=\"http://json.org/\" rel=\"nofollow\">JSON</a> uses a pretty good state machine for parsing numbers. It is not overly strict but does not accept garbage like \"e\" or \"-.e2\".</p>\n\n<p>It is:</p>\n\n<ul>\n<li>\"-\", or,</li>\n<li>nothing,</li>\n</ul>\n\n<p>followed by</p>\n\n<ul>\n<li>'0', or,</li>\n<li>(one digit [1-9], followed by zero or more [0-9])</li>\n</ul>\n\n<p>followed by</p>\n\n<ul>\n<li>('.' followed by one or more [0-9]), or,</li>\n<li>nothing</li>\n</ul>\n\n<p>followed by</p>\n\n<ul>\n<li>(('e' or 'E'), followed by ('+' or '-' or nothing), followed by zero or more [0-9]), or,</li>\n<li>nothing</li>\n</ul>\n\n<p>If you wish to see the format specified more formally, see <a href=\"http://tools.ietf.org/html/rfc7159#section-6\" rel=\"nofollow\">RFC 7159, Section 6</a>.</p>\n\n<blockquote>\n<pre><code>number = [ minus ] int [ frac ] [ exp ]\ndecimal-point = %x2E       ; .\ndigit1-9 = %x31-39         ; 1-9\ne = %x65 / %x45            ; e E\nexp = e [ minus / plus ] 1*DIGIT\nfrac = decimal-point 1*DIGIT\nint = zero / ( digit1-9 *DIGIT )\nminus = %x2D               ; -\nplus = %x2B                ; +\nzero = %x30                ; 0\n</code></pre>\n</blockquote>\n\n<p>This is what I do in my JSON parser for numbers (I support an extended format that allows for full range 64 bit integers, JSON specification says integers cannot reliably lie outside the range -2^53+1 to 2^53-1):</p>\n\n<pre><code>template&lt;typename InputIt,\n         typename V = typename \n            std::iterator_traits&lt;InputIt&gt;::value_type&gt;\nstatic InputIt extractNumber(Variant&amp; result, InputIt st, InputIt en);\n</code></pre>\n\n<hr>\n\n<pre><code>template&lt;typename InputIt, typename V&gt;\nInputIt JsonParser::extractNumber(Variant&amp; result, InputIt st, InputIt en)\n{\n    if (st == en)\n        parseError(\"Expected number at end of input\");\n\n    std::vector&lt;V&gt; text;\n\n    auto accept = [&amp;] {\n        if (st == en)\n            parseError(\"Expected number at end of input\");\n        text.emplace_back(*st++);\n    };\n\n    // -?(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\n    // A    B C              D            E\n\n    bool isFloatingPoint = false;\n\n    if (*st == '-')\n    {\n        // A\n        accept();\n    }\n\n    if (*st == '0')\n    {\n        // B\n        accept();\n    }\n    else if (std::isdigit(*st, cLocale))\n    {\n        // C\n        do\n        {\n            accept();\n        }\n        while (st != en &amp;&amp; std::isdigit(*st, cLocale));\n    }\n    else\n    {\n        parseError(\"Invalid number\");\n    }\n\n    if (st != en &amp;&amp; *st == '.')\n    {\n        accept();\n\n        isFloatingPoint = true;\n\n        // D\n        while (st != en &amp;&amp; std::isdigit(*st, cLocale))\n            accept();\n    }\n\n    if (st != en &amp;&amp; (*st == 'E' || *st == 'e'))\n    {\n        isFloatingPoint = true;\n\n        // E\n        accept();\n\n        if (st != en &amp;&amp; (*st == '+' || *st == '-'))\n            accept();\n\n        if (st == en || !std::isdigit(*st, cLocale))\n            parseError(\"Invalid number\");\n\n        while (st != en &amp;&amp; std::isdigit(*st, cLocale))\n            accept();\n    }\n\n    text.emplace_back(0);\n\n    if (isFloatingPoint)\n        result.assign(std::atof(text.data()));\n    else\n        result.assign(std::int64_t(std::atoll(text.data())));\n\n    return st;\n}\n</code></pre>\n\n<p>I had to tweak it a little because the surrounding implementation ensured <code>st</code> won't be equal to <code>en</code> on entry, originally I asserted. It passes my unit tests.</p>\n"}, {"comments": [{"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463068922, "post_id": 37176521, "comment_id": 61916706, "body": "Thanks! I actually tried something similar to this, but I was printing out <code>ss</code> and it printed <code>0.000000</code> so I thought it was coercing the text to 0. But it seems like your function would work."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463071267, "post_id": 37176521, "comment_id": 61918227, "body": "Although technically this doesn&#39;t determine if the input is a number in scientific notation verse a regular number."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "edited": false, "score": 0, "creation_date": 1463076482, "post_id": 37176521, "comment_id": 61921283, "body": "This function doe not work for some examples in my question. For example, it returns <code>true</code> for the input &quot;03HX_12&quot;. So ultimately &quot;03HX_12&quot; would be changed to &quot;3.000000&quot;."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1463089897, "post_id": 37176521, "comment_id": 61928456, "body": "I&#39;m surprised there isn&#39;t a way to get the contents of <code>src</code> into the <code>stringstream</code> via a constructor."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1463090185, "post_id": 37176521, "comment_id": 61928577, "body": "What happens if the input is <code>123985958940581409827405987453.8478374845738982734234E+98765&zwnj;&#8203;4321</code>?  What is the requirement? The original state machine will accept this."}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1463091460, "post_id": 37176521, "comment_id": 61929106, "body": "@Kaz good point, it returns <code>false</code>. And the resulting value of <code>d</code> is <code>1.79769e+308</code>"}], "tags": [], "owner": {"reputation": 475, "user_id": 2563347, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49a41cfe6efb5f47ac4c7f7ab11d8d87?s=128&d=identicon&r=PG", "display_name": "thomas", "link": "https://stackoverflow.com/users/2563347/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1464020998, "last_edit_date": 1464020998, "creation_date": 1463021961, "answer_id": 37176521, "question_id": 37172819, "link": "https://stackoverflow.com/questions/37172819/test-if-c98-string-is-a-number-in-scientific-notation/37176521#37176521", "title": "Test if C++98 string is a number in scientific notation", "body": "<pre><code>bool is_valid(std::string src){\n    std::stringstream ss;\n    ss &lt;&lt; src;\n    double d=0;\n    ss &gt;&gt; d; \n    if (ss){\n       return true;\n    }\n    else{\n       return false;\n    }\n}\n</code></pre>\n\n<p>I have a simple solution. Use C++ stream to test is the string is a number.</p>\n"}, {"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1464020944, "last_edit_date": 1464020944, "creation_date": 1463092925, "answer_id": 37198619, "question_id": 37172819, "link": "https://stackoverflow.com/questions/37172819/test-if-c98-string-is-a-number-in-scientific-notation/37198619#37198619", "title": "Test if C++98 string is a number in scientific notation", "body": "<p>I ended up coding a function based on the FSA I drew in my question. Plus a few tweaks based on koz's information and advice (thanks), and minus some determinism because it's code and I can cut those corners :). It's bulky but it's simple to understand and it works. See the sample test cases below the code.</p>\n\n<pre><code>bool is_scientific_notation(string input) {\n    int state = 0;\n    for (string::size_type i = 0; i &lt; input.size(); i++) {\n        char character = input.at(i);\n        //cout &lt;&lt; character &lt;&lt; endl;\n        switch(state) {\n            case 0: {\n                // state 0: accept on '. or' '-' or digit\n                if (character == '.') {\n                    state = 3;\n                } else if (character == '-') {\n                    state = 1;\n                } else if (isdigit(character)) {\n                    state = 2;\n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 1: {\n                // state 1: accept on '. or digit\n                if (character == '.') {\n                    state = 3;\n                } else if (isdigit(character)) {\n                    state = 2;\n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 2: {\n                // state 2: accept on '.' or 'e' or 'E' digit\n                if (character == '.') {\n                    state = 4;\n                } else if ((character == 'e') || (character == 'E')) {\n                    state = 5;\n                } else if (isdigit(character)) {\n                    state = 2;\n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 3: {\n                // state 3: accept on digit\n                if (isdigit(character)) {\n                    state = 4;  \n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 4: {\n                // state 4: accept on 'e' or 'E' or digit\n                if ((character == 'e') || (character == 'E')) {\n                    state = 5;\n                } else if (isdigit(character)) {\n                    state = 4;  \n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 5: {\n                // state 5: accept on '+' or '-' or digit\n                if ((character == '+') || (character == '-')) {\n                    state = 6;\n                } else if (isdigit(character)) {\n                    state = 6;  \n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n            case 6: {\n                // state 6: accept on digit\n                if (isdigit(character)) {\n                    state = 6;  \n                } else {\n                    goto reject; // reject \n                }\n                break;\n            }\n        }\n    }\n    if (state == 6) {\n        return true;\n    } else {\n        reject:\n            return false;\n    }\n}\n</code></pre>\n\n<p>Tests:</p>\n\n<pre><code>// is_scientific_notation should return true\ncout &lt;&lt; ((is_scientific_notation(\"269E-9\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"269E9\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"269e-9\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"1.453e-8\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"8.43e+6\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"5.2342E-7\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\".2342E-7\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"8.e+2\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"-853.4E-2\")) ? (\"pass\") : (\"fail\")) &lt;&lt; endl;\n\n// is_scientific_notation should return false\ncout &lt;&lt; ((is_scientific_notation(\"hello\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"03HX_12\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"8432\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"8432E\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"fail-83e1\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\".e8\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"E-8\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"2e.2\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\ncout &lt;&lt; ((is_scientific_notation(\"-E3\")) ? (\"fail\") : (\"pass\")) &lt;&lt; endl;\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\npass\n</code></pre>\n"}], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 1, "accepted_answer_id": 37175006, "answer_count": 4, "score": 4, "last_activity_date": 1464020998, "creation_date": 1462999066, "last_edit_date": 1463007780, "question_id": 37172819, "link": "https://stackoverflow.com/questions/37172819/test-if-c98-string-is-a-number-in-scientific-notation", "title": "Test if C++98 string is a number in scientific notation", "body": "<p>I have a <code>string</code> variable that can be 1 of the 3 things:</p>\n\n<ol>\n<li>A number</li>\n<li>A number in scientific notation</li>\n<li>Text</li>\n</ol>\n\n<p>In cases 1 and 3 I want to do nothing and pass the data along. But in Case 2 I need to convert it a regular number. If I simply always convert the variable to a regular number then when it contains actual text it becomes \"0\". So I need to know if the string is a number in scientific notation. The obvious, dirty answer is an algorithm like this:</p>\n\n<p>Iterate through string as long as you see numbers. If the first encountered letter is \"e\" or \"E\" and it is followed by either \"+\" or \"-\", OR strictly more numbers, then it's a number in scientific notation, otherwise it's just a regular number or text.</p>\n\n<p>But I assume there is a better way to do this in C++98 (without boost). Is there any built-in method to help? Even if it's something that just uses a try/catch.</p>\n\n<p>EDIT The question was closed because it was assumed to be homework. It is not homework. Therefore, it should be reopened. Also, to clarify, I am forced to use C++98 due to technical restraints.</p>\n\n<p>I've drawn a proposed finite state automota based on my initial idea (\"other\" implies ALL characters not otherwise specified for that given state). I believe it is correct.</p>\n\n<p>Some example inputs that should accept:</p>\n\n<pre><code>1.453e-8\n0.05843E5\n8.43e6\n5.2342E-7\n</code></pre>\n\n<p>Some example inputs that should fail:</p>\n\n<pre><code>hello\n03HX_12\n8432\n8432E\ne-8\nfail-83e1\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xjBbn.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjBbn.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1462999902, "post_id": 37172698, "comment_id": 61880710, "body": "clang gives this warning: <code>main.cpp:5:5: Switch condition has boolean value</code> - presumably switching on a bool is a bad idea, perhaps if/else is a better option?"}, {"owner": {"reputation": 937, "user_id": 3143679, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/dec162275f3f2038fd180792dedd63cc?s=128&d=identicon&r=PG&f=1", "display_name": "George Skelton", "link": "https://stackoverflow.com/users/3143679/george-skelton"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1463003134, "post_id": 37172698, "comment_id": 61882271, "body": "Yeah that&#39;s the way I went"}], "answers": [{"comments": [{"owner": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1463002561, "post_id": 37172745, "comment_id": 61882027, "body": "Couldn&#39;t you also use a return statement in the default case to solve the warning?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 1196, "user_id": 5468596, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oYsoZ.png?s=128&g=1", "display_name": "Stephen", "link": "https://stackoverflow.com/users/5468596/stephen"}, "edited": false, "score": 0, "creation_date": 1463003448, "post_id": 37172745, "comment_id": 61882392, "body": "@Stephen Apparently not with VS 2013."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 2, "last_activity_date": 1462998780, "creation_date": 1462998780, "answer_id": 37172745, "question_id": 37172698, "link": "https://stackoverflow.com/questions/37172698/visual-c-switch-control-path-impasse/37172745#37172745", "title": "Visual C++ switch control path impasse", "body": "<blockquote>\n  <p>What can I do? (other than turn off treat warnings as errors)</p>\n</blockquote>\n\n<p>The following code might probably fix it:</p>\n\n<pre><code>int f_no_default(bool true_or_false)\n{\n    switch (true_or_false)\n    {\n    case (true) :\n        return 1;\n    case (false) :\n        return 0;\n    }\n\n    return 0; // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\n}\n</code></pre>\n\n<p>That's a silly warning for the case, but the static analysis capabilities depend on the actual compiler implementation, so do the usefulness of warning messages.</p>\n\n<hr>\n\n<p>Another option (more compliant with your function name) would be to throw an exception:</p>\n\n<pre><code>int f_no_default(bool true_or_false)\n{\n    switch (true_or_false)\n    {\n    case (true) :\n        return 1;\n    case (false) :\n        return 0;\n    }\n\n    throw std::runtime_error(\"Unecpected value for 'true_or_false'\");\n}\n</code></pre>\n"}], "owner": {"reputation": 937, "user_id": 3143679, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/dec162275f3f2038fd180792dedd63cc?s=128&d=identicon&r=PG&f=1", "display_name": "George Skelton", "link": "https://stackoverflow.com/users/3143679/george-skelton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 37172745, "answer_count": 1, "score": 1, "last_activity_date": 1462998780, "creation_date": 1462998578, "question_id": 37172698, "link": "https://stackoverflow.com/questions/37172698/visual-c-switch-control-path-impasse", "title": "Visual C++ switch control path impasse", "body": "<p>This yields warning C4715: not all control paths return a value.</p>\n\n<pre><code>int f_no_default(bool true_or_false)\n{\n    switch (true_or_false)\n    {\n    case (true) :\n        return 1;\n    case (false) :\n        return 0;\n    }\n}\n</code></pre>\n\n<p>But this yields warning C4809: switch statement has redundant 'default' label; all possible 'case' labels are given.</p>\n\n<pre><code>int f_with_default(bool true_or_false)\n{\n    switch (true_or_false)\n    {\n    case (true) :\n        return 1;\n    case (false) :\n        return 0;\n    default:\n        return 0;\n    }\n}\n</code></pre>\n\n<p>What can I do? (other than turn off treat warnings as errors)</p>\n\n<p>Visual Studio 2013 V12.0</p>\n"}, {"tags": ["c++", "eclipse", "debugging", "gdb", "eclipse-cdt"], "comments": [{"owner": {"reputation": 8196, "user_id": 395851, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/f7417d04460fbc27bc0ac99204cfce9c?s=128&d=identicon&r=PG", "display_name": "dbrank0", "link": "https://stackoverflow.com/users/395851/dbrank0"}, "edited": false, "score": 1, "creation_date": 1463041928, "post_id": 37172639, "comment_id": 61896121, "body": "Seems like eclipse bug. Check gdb-traces console to see how gdb responds, when eclipse tries to set a breakpoint."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 1, "creation_date": 1463043998, "post_id": 37172639, "comment_id": 61897639, "body": "I believe you are hitting an Eclipse-CDT bug here. Significant improvements have been made to this part of the code base as part of <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=472765\" rel=\"nofollow noreferrer\">Bug 472765</a>. This will be part of the next Eclipse release in just over a month&#39;s time. But if you had time to test it against your case and it still wasn&#39;t working I have a chance to fix the issues ahead of the release. <a href=\"https://www.eclipse.org/downloads/download.php?file=/technology/epp/downloads/release/neon/M7/eclipse-cpp-neon-M7-linux-gtk-x86_64.tar.gz\" rel=\"nofollow noreferrer\">Linux 64-bit download</a>"}, {"owner": {"reputation": 2980, "user_id": 198164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3fa12af1dec18b444a6ac1201c6c2b01?s=128&d=identicon&r=PG", "display_name": "Eugene S", "link": "https://stackoverflow.com/users/198164/eugene-s"}, "reply_to_user": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1463056660, "post_id": 37172639, "comment_id": 61906910, "body": "@JonahGraham I&#39;ll try to test the new release you&#39;ve linked to and will report back. Thanks!"}, {"owner": {"reputation": 2980, "user_id": 198164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3fa12af1dec18b444a6ac1201c6c2b01?s=128&d=identicon&r=PG", "display_name": "Eugene S", "link": "https://stackoverflow.com/users/198164/eugene-s"}, "reply_to_user": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1463087109, "post_id": 37172639, "comment_id": 61927153, "body": "@JonahGraham I was able to test the version of Eclipse in your link, but unfortunately the same problems exist there."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1463089228, "post_id": 37172639, "comment_id": 61928153, "body": "@unluddite Thank you for that. Would you be willing to work with me for a bit so I can recreate your test case so that I can fix it? In the first instance I need the GDB MI Traces. You can get that by changing to the &quot;gdb traces&quot; console in the Eclipse Console View."}, {"owner": {"reputation": 7471, "user_id": 2796832, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt2uE.jpg?s=128&g=1", "display_name": "Jonah Graham", "link": "https://stackoverflow.com/users/2796832/jonah-graham"}, "edited": false, "score": 0, "creation_date": 1463089302, "post_id": 37172639, "comment_id": 61928184, "body": "You can email me if that is easier too jonah at kichwacoders dot com"}], "owner": {"reputation": 2980, "user_id": 198164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3fa12af1dec18b444a6ac1201c6c2b01?s=128&d=identicon&r=PG", "display_name": "Eugene S", "link": "https://stackoverflow.com/users/198164/eugene-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1095, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462998304, "creation_date": 1462998304, "question_id": 37172639, "link": "https://stackoverflow.com/questions/37172639/eclipse-cdt-gdb-no-source-file-named", "title": "Eclipse CDT gdb No source file named", "body": "<p>I have the following Eclipse CDT setup on a Red Hat Linux system:</p>\n\n<ul>\n<li>Eclipse Mars with CDT 8.7</li>\n<li>gdb 7.6</li>\n</ul>\n\n<p>I have two projects open in my workspace</p>\n\n<ul>\n<li>Project1: the main source code that builds the executable I want to debug</li>\n<li>Project2: library code that gets statically linked with the binary in Project1</li>\n</ul>\n\n<p>Project2 is linked to Project1 in its properties.</p>\n\n<p>The problem occurs when I try to set breakpoints in a debug session in source files that are in Project2. <code>gdb</code> reports the following error:</p>\n\n<pre><code>No source file named &lt;absolute_path_to_file&gt;.\n</code></pre>\n\n<p>The weird thing is that I can set breakpoints in the <code>gdb</code> console in Eclipse using the function name and/or function name and line number syntax. When I do this, <code>gdb</code> reports that it successfully set the breakpoint showing the file and line number. The file name, in the trace message, has no path (maybe relevant?)</p>\n\n<p>Using <code>objdump</code> I was able to confirm that my executable has all of the symbols and files in it (not absolute paths though... relevant?)</p>\n\n<p>Once I get the debugger to stop at the breakpoint after setting it using the function name, I can then add/remove breakpoints within the Debug perspective like normal; even if I restart the debugging session.</p>\n\n<p>I've seen lots of comments about loading shared libraries into <code>gdb</code>, but the code I'm trying to break into is in a statically linked library, not a shared one.</p>\n\n<p>Given that I can add breakpoints using the normal method once I get <code>gdb</code> to break on one added manually in the conosole, indicates to me that maybe something is missing in my <code>gdb</code> settings.</p>\n\n<p>Any thoughts?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "time-complexity", "sieve-of-eratosthenes"], "comments": [{"owner": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "edited": false, "score": 0, "creation_date": 1462998277, "post_id": 37172597, "comment_id": 61879844, "body": "Your task is a slow one."}, {"owner": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "reply_to_user": {"reputation": 619, "user_id": 4996524, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5b7910ac129ed37a15e32deb4a2c3bd9?s=128&d=identicon&r=PG&f=1", "display_name": "YoTengoUnLCD", "link": "https://stackoverflow.com/users/4996524/yotengounlcd"}, "edited": false, "score": 0, "creation_date": 1463066636, "post_id": 37172597, "comment_id": 61915005, "body": "@YoTengoUnLCD  do you mind suggesting me some improvements."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 1, "creation_date": 1463604569, "post_id": 37172597, "comment_id": 62140688, "body": "<a href=\"http://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth\" rel=\"nofollow noreferrer\"><i>Empirical Orders of Growth, <b>please!</i></b></a> To make it faster switch to segmented sieve, this is supposed to improve the cache locality. You don&#39;t need the vector <code>c</code> at all, just maintain a counter. Always start from <code>i=2</code>. Switch to working on odds only, <code>for i=3; ...; i+= 2</code>. Use odds-packed arrays where <code>p=2i+start_value</code> <a href=\"http://ideone.com/fapob\" rel=\"nofollow noreferrer\">or something</a>."}, {"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 2, "creation_date": 1463644140, "post_id": 37172597, "comment_id": 62153845, "body": "you can also initialize the <code>k</code> array all at once with <code>s.resize(40000000, true)</code>, you know its size. -- and, <code>sqrt(40000000) = 6324.555</code>, always. simply declaring a new var to hold this value outside the for loop will make certain that it is optimized. -- do look into the Ideone entry I linked above - it runs ~0.23 sec for 40M and ~3.6 sec for 400M (<a href=\"https://en.wikipedia.org/wiki/Analysis_of_algorithms#Empirical_orders_of_growth\" rel=\"nofollow noreferrer\"><b><i>which means it is growing at ~n^1.2 empirically</i></b></a>), and it isn&#39;t even segmented. Ideone is slow, your machine should be about 3 times faster than that or so."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1463664767, "post_id": 37172597, "comment_id": 62168790, "body": "@WillNess rather than just reserve memory all at once, you can also just fill the vector up-front without a need to push_back at all. see my answer for details"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1463677367, "post_id": 37172597, "comment_id": 62178197, "body": "@WillNess sorry I misread your comment as <code>reserve</code> not <code>resize</code>. my bad"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 0, "creation_date": 1465368784, "post_id": 37172597, "comment_id": 62865885, "body": "When marking off the multiples of a prime <code>p</code>, you can start from <code>p*p</code>; all of the smaller multiples of <code>p</code> have already been marked off."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1084944"}, "edited": false, "score": 1, "creation_date": 1465369088, "post_id": 37172597, "comment_id": 62866072, "body": "Why <code>long long int</code> rather than, say, <code>int32_t</code>?  Similarly, <code>i</code> and <code>j</code> should probably be of type <code>int32_t</code> or <code>int32_fast_t</code>; technically, you&#39;re not guaranteed that <code>int</code> is capable of holding numbers this large (although it&#39;s common that it can)."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "edited": false, "score": 0, "creation_date": 1463066465, "post_id": 37172821, "comment_id": 61914894, "body": "I&#39;m using code blocks 13.12 on a intel i5-5200,8GB DDR3 machine. I&#39;ve checked the optimize fully option in compiler settings but still it takes the same amount.  what are the other ways to optimize the speed"}, {"owner": {"reputation": 2178, "user_id": 2878004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f808bd3121d4fe714d476f8cad18f9d5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2878004/aaron"}, "reply_to_user": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "edited": false, "score": 2, "creation_date": 1463068906, "post_id": 37172821, "comment_id": 61916697, "body": "Remove the c vector. That will make it twice as fast."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "edited": false, "score": 0, "creation_date": 1463652516, "post_id": 37172821, "comment_id": 62159635, "body": "@Nikhil also make sure you are not in Debug mode. That caused mine to take 5x longer than Release mode (see my answer)."}], "tags": [], "owner": {"reputation": 2178, "user_id": 2878004, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f808bd3121d4fe714d476f8cad18f9d5?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/2878004/aaron"}, "is_accepted": false, "score": 4, "last_activity_date": 1462999072, "creation_date": 1462999072, "answer_id": 37172821, "question_id": 37172597, "link": "https://stackoverflow.com/questions/37172597/c-sieve-of-eratosthenes-my-code-is-slow/37172821#37172821", "title": "c++ sieve of Eratosthenes my code is slow", "body": "<p>I got it down from taking 10 seconds to run to just half a second on my computer by changing two things. First, I'm guessing you didn't compile it with optimization enabled. That brought it from 10 seconds down to 1 second for me. Second, the vector c is unnecessary. Everywhere you have <code>c[i]</code> in your code you can replace it with <code>i+2</code>. This will make it run twice as fast. </p>\n"}, {"tags": [], "owner": {"reputation": 1451, "user_id": 210971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460c2a459e69df7edc17f4d0aed1a61c?s=128&d=identicon&r=PG", "display_name": "LookAheadAtYourTypes", "link": "https://stackoverflow.com/users/210971/lookaheadatyourtypes"}, "is_accepted": false, "score": 4, "last_activity_date": 1465368493, "last_edit_date": 1492087236, "creation_date": 1463643694, "answer_id": 37316883, "question_id": 37172597, "link": "https://stackoverflow.com/questions/37172597/c-sieve-of-eratosthenes-my-code-is-slow/37316883#37316883", "title": "c++ sieve of Eratosthenes my code is slow", "body": "<ol>\n<li>Remove vector c, you don't need it.</li>\n<li>Create vector k with known size at start. Repeatedly appending elements to a vector by invoking <code>push_back()</code> is a really bad idea from a performance point of view, as it can cause repeated memory reallocations and copies.</li>\n<li><a href=\"http://primesieve.org/segmented_sieve.html\" rel=\"nofollow noreferrer\">http://primesieve.org/segmented_sieve.html</a> - segmented version for inspiration.</li>\n<li>You can skip processing multiples of 2 and 3. <a href=\"https://codereview.stackexchange.com/a/7342/89484\">link from code review</a></li>\n<li>It looks that you've got some issue in compiler optimization flag settings. Maybe you didn't change configuration from debug to release. What is your release speedup vs debug one?</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1463676217, "post_id": 37319252, "comment_id": 62177615, "body": "did you check the <a href=\"http://stackoverflow.com/users/849891/will-ness?tab=profile\">empirical orders of growth</a> for your last variant (with the iterators and iota)? I can&#39;t imagine it being better than the vector&lt;bool&gt; code, with that much more memory use."}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "reply_to_user": {"reputation": 61419, "user_id": 849891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MbEO3.png?s=128&g=1", "display_name": "Will Ness", "link": "https://stackoverflow.com/users/849891/will-ness"}, "edited": false, "score": 0, "creation_date": 1463677290, "post_id": 37319252, "comment_id": 62178156, "body": "@WillNess the best variant I posted in my last section used vector of bool as I noted. But the vector of int is provided in the event the user wants a condensed list of the actual prime numbers themselves (rather than the count only)"}, {"owner": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "edited": false, "score": 0, "creation_date": 1463691211, "post_id": 37319252, "comment_id": 62185582, "body": "@johnbakers thank you for the answer can you tell me how to change to realease mode"}], "tags": [], "owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "is_accepted": true, "score": 5, "last_activity_date": 1463664862, "last_edit_date": 1463664862, "creation_date": 1463650407, "answer_id": 37319252, "question_id": 37172597, "link": "https://stackoverflow.com/questions/37172597/c-sieve-of-eratosthenes-my-code-is-slow/37319252#37319252", "title": "c++ sieve of Eratosthenes my code is slow", "body": "<p>I profiled your code as well as a simple tweak, below. The tweak is more than twice as fast:</p>\n\n<pre><code>    auto start = std::chrono::high_resolution_clock::now();\n\n    //original version\n    vector&lt;bool&gt; k;                         \n    vector&lt;long long int&gt; c;                \n    for (int i=2;i&lt;40000000;i++)\n      {\n        k.push_back(true);                  \n        c.push_back(i);\n      }\n\n    for ( int i=0;i&lt;sqrt(40000000)+1;i++)                            \n      {                                                               \n        if (k[i]==true)                                              \n          {                                                            \n            for (int j=i+c[i];j&lt;40000000;j=j+c[i])                  \n              {                                                       \n                k[j]=false; \n              }\n          }\n      }\n    vector &lt;long long int&gt; arr;\n    for ( int i=0;i&lt;40000000-2;i++)\n      {\n        if (k[i]==true)\n          {\n            arr.push_back(c[i]);\n          }\n      }\n    cout &lt;&lt; arr.size() &lt;&lt; endl ;\n\n\n    auto end1 = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Elapsed = \" &lt;&lt; \n      std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end1 - start).count() &lt;&lt;\n      std::endl;\n\n  }\n\n  {\n\n    auto begin = std::chrono::high_resolution_clock::now();\n\n    //new version\n\n    const long limit{40000000};\n    vector&lt;bool&gt; k(limit-1,true);  \n\n    //k[0] is the number 0\n    k[0]=false; k[1]=false;\n\n    auto sq = sqrt(limit) + 1;\n\n    //start at the number 2\n    for ( int i=2;i&lt;sq;i++)                            \n      {                                                               \n        if (k[i]==true)                                              \n          {                                                            \n            for (int j=i+i;j&lt;limit;j+=i)                  \n              {                                                       \n                k[j]=false; \n              }\n          }\n      }\n\n\n    vector &lt;long long int&gt; arr;\n    for ( int i=0;i&lt;limit-2;i++)\n      {\n        if (k[i]==true)\n          {\n            arr.push_back(i);\n          }\n      }\n    cout &lt;&lt; arr.size() &lt;&lt; endl ;\n\n\n\n    auto stop = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Elapsed = \" &lt;&lt; \n      std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(stop - begin).count() &lt;&lt;\n      std::endl;\n\n  }\n</code></pre>\n\n<p>Here is the output (elapsed in milliseconds), in Debug mode:</p>\n\n<pre><code>2433654\nElapsed = 5787\n2433654\nElapsed = 2432\n</code></pre>\n\n<p>Both have same results, second is much faster.</p>\n\n<p>Here is another version using some nice C++ features (requiring less code), and it is about 11% faster than the second version above:</p>\n\n<pre><code>    auto begin = std::chrono::high_resolution_clock::now();\n\n    const long limit{40000000};\n    vector&lt;int&gt; k(limit-1,0);\n\n    //fill with sequence of integers\n    std::iota(k.begin(),k.end(),0);\n\n    //k[0] is the number 0\n    //integers reset to 0 are not prime\n    k[0]=0; k[1]=0;\n\n    auto sq = sqrt(limit) + 1;\n\n    //start at the number 2\n    for (int i=2;i&lt;sq;i++)                            \n      {                                                               \n        if (k[i])\n          {                                                            \n            for (int j=i+i;j&lt;limit;j+=i)                  \n              {                                                       \n                k[j]=0; \n              }\n          }\n      }\n\n    auto results = std::remove(k.begin(),k.end(),0);\n\n    cout &lt;&lt; results - k.begin() &lt;&lt; endl ;\n\n\n    auto stop = std::chrono::high_resolution_clock::now();\n    std::cout &lt;&lt; \"Elapsed = \" &lt;&lt; \n      std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(stop - begin).count() &lt;&lt;\n      std::endl;\n\n  }\n</code></pre>\n\n<p>Note that in your original version, you <code>push_back</code> in three different places, while this use of modern idioms never uses <code>push_back</code> at all when operating on the <code>vector</code>s.</p>\n\n<p>In this example, the <code>vector</code> is of <code>int</code>s so that you have the actual list of prime numbers when you are finished.</p>\n\n<p>Output:</p>\n\n<pre><code>2433654\nElapsed = 2160\n</code></pre>\n\n<p>These above are all Debug mode numbers.</p>\n\n<p>In Release mode, the best is a combination of the second and third techniques above, using the numeric with a vector of bools, if you don't care what the actual prime numbers are in the end:</p>\n\n<pre><code>2433654\nElapsed = 1098\n2433654\nElapsed bool remove= 410\n2433654\nElapsed = 779\n</code></pre>\n\n<p>Note that your original code only takes about 1 second on my 5 year-old laptop in Release mode, so you are probably running in Debug mode.</p>\n"}], "owner": {"reputation": 61, "user_id": 6205961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa031a967926629fbc4c4681a6f3c6c?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil", "link": "https://stackoverflow.com/users/6205961/nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 1, "accepted_answer_id": 37319252, "answer_count": 3, "score": 4, "last_activity_date": 1465368493, "creation_date": 1462998159, "last_edit_date": 1463647316, "question_id": 37172597, "link": "https://stackoverflow.com/questions/37172597/c-sieve-of-eratosthenes-my-code-is-slow", "title": "c++ sieve of Eratosthenes my code is slow", "body": "<p>I'm trying to find the number of prime numbers below 400 million but even with just 40 million my code is taking 8 secs to run. what am i doing wrong?</p>\n\n<p>what can i do to make it faster?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include&lt;iostream&gt;\n#include&lt;math.h&gt;\n#include&lt;vector&gt;\nusing namespace std;\nint main()\n{\n    vector&lt;bool&gt; k;                         \n    vector&lt;long long int&gt; c;                \n    for (int i=2;i&lt;40000000;i++)\n    {\n        k.push_back(true);                  \n        c.push_back(i);\n    }\n\n    for ( int i=0;i&lt;sqrt(40000000)+1;i++)                            \n    {                                                               \n        if (k[i]==true)                                              \n       {                                                            \n           for (int j=i+c[i];j&lt;40000000;j=j+c[i])                  \n           {                                                       \n               k[j]=false; \n           }\n       }\n    }\n    vector &lt;long long int&gt; arr;\n    for ( int i=0;i&lt;40000000-2;i++)\n    {\n        if (k[i]==true)\n        {\n            arr.push_back(c[i]);\n        }\n    }\n    cout &lt;&lt; arr.size() &lt;&lt; endl ;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "stack"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 1, "creation_date": 1462998329, "post_id": 37172586, "comment_id": 61879877, "body": "Sarah I suggest you provide a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> instead."}, {"owner": {"reputation": 27, "user_id": 5513942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c123299264d787b40c3fce3134a973d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/5513942/sarah"}, "edited": false, "score": 0, "creation_date": 1462998546, "post_id": 37172586, "comment_id": 61880003, "body": "That is what this is, my real program is much larger."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1593881"}, "edited": false, "score": 0, "creation_date": 1462998681, "post_id": 37172586, "comment_id": 61880076, "body": "@Try to provide chunks of code only. People here do not like to go through that amount of code."}, {"owner": {"reputation": 27, "user_id": 5513942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c123299264d787b40c3fce3134a973d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/5513942/sarah"}, "edited": false, "score": 0, "creation_date": 1462999138, "post_id": 37172586, "comment_id": 61880320, "body": "I edited the code, how is that? is that too much still?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462999186, "post_id": 37172586, "comment_id": 61880344, "body": "That is all that is needed. The problem is a duplicate. Templates can not be implemented in a cpp file."}, {"owner": {"reputation": 27, "user_id": 5513942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c123299264d787b40c3fce3134a973d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/5513942/sarah"}, "edited": false, "score": 0, "creation_date": 1463002988, "post_id": 37172586, "comment_id": 61882208, "body": "Still getting the same error when I implement the templates in a header file."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1463067595, "post_id": 37172586, "comment_id": 61915707, "body": "<code>miniStackVT&lt;int&gt; myStack();</code> Should be <code>miniStackVT&lt;int&gt; myStack;</code> Replace all <code>myStack().</code> with <code>myStack</code>"}], "owner": {"reputation": 27, "user_id": 5513942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c123299264d787b40c3fce3134a973d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/5513942/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1463002282, "answer_count": 0, "score": 0, "last_activity_date": 1462999247, "creation_date": 1462998127, "last_edit_date": 1462999247, "question_id": 37172586, "link": "https://stackoverflow.com/questions/37172586/unresolved-external-symbol-stack-being-implemented-by-vector", "closed_reason": "Duplicate", "title": "unresolved external symbol, stack being implemented by vector", "body": "<p>I have been working on this project for a while now and have tried multiple things.  Please help me, I always get new errors, this is the latest one. </p>\n\n<pre><code>1&gt;Main.obj : error LNK2019: unresolved external symbol \"class miniStackVT&lt;int&gt; __cdecl myStack(void)\" (?myStack@@YA?AV?$miniStackVT@H@@XZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: __thiscall miniStackVT&lt;int&gt;::~miniStackVT&lt;int&gt;(void)\" (??1?$miniStackVT@H@@QAE@XZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: int __thiscall miniStackVT&lt;int&gt;::size(void)const \" (?size@?$miniStackVT@H@@QBEHXZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: void __thiscall miniStackVT&lt;int&gt;::Push(int const &amp;)\" (?Push@?$miniStackVT@H@@QAEXABH@Z) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: void __thiscall miniStackVT&lt;int&gt;::PrintStack(void)const \" (?PrintStack@?$miniStackVT@H@@QBEXXZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: void __thiscall miniStackVT&lt;int&gt;::Pop(void)\" (?Pop@?$miniStackVT@H@@QAEXXZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n1&gt;Main.obj : error LNK2019: unresolved external symbol \"public: int __thiscall miniStackVT&lt;int&gt;::TopStack(void)const \" (?TopStack@?$miniStackVT@H@@QBEHXZ) referenced in function \"void __cdecl stackVector(void)\" (?stackVector@@YAXXZ)\n</code></pre>\n\n<p>Here is my main file main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"miniStack.h\"\n//#include \"miniQueue.h\"\n\nusing namespace std;\nvoid Menu();\nvoid stackVector();\n\nint main()\n{\nMenu();\nreturn 0;\n}\n\nvoid Menu()\n{\nint num = 0;\ndo{\n    cout &lt;&lt; \"Will you be using: \" &lt;&lt; endl;\n    cout &lt;&lt; \"1 Stack\" &lt;&lt; endl;\n    cout &lt;&lt; \"2 Queue\" &lt;&lt; endl;\n    cin &gt;&gt; num;\n} while (num != 1 &amp;&amp; num != 2);\nif (num == 1)\n{\n    do {\n        cout &lt;&lt; \"Will you be using: \" &lt;&lt; endl;\n        cout &lt;&lt; \"1 vector\" &lt;&lt; endl;\n        cout &lt;&lt; \"2 list\" &lt;&lt; endl;\n        cout &lt;&lt; \"3 dynamic array\" &lt;&lt; endl;\n        cin &gt;&gt; num;\n    } while (num != 1 &amp;&amp; num != 2 &amp;&amp; num != 3);\n    if (num == 1) // Stack vector\n    {\n        stackVector();\n    }\n    else if (num == 2) // Stack list\n    {\n        //stackList();\n    }\n    else if (num == 3) // Stack dynamic array\n    {\n        //stackArray();\n    }\n}\nelse if (num == 2)\n{\n    do{\n        cout &lt;&lt; \"Will you be using: \" &lt;&lt; endl;\n        cout &lt;&lt; \"1 vector\" &lt;&lt; endl;\n        cout &lt;&lt; \"2 list\" &lt;&lt; endl;\n        cout &lt;&lt; \"3 dynamic array\" &lt;&lt; endl;\n        cin &gt;&gt; num;\n    } while (num != 1 &amp;&amp; num != 2 &amp;&amp; num != 3);\n    if (num == 1) // Queue vector\n    {\n        //queueVector();\n    }\n    else if (num == 2) // Queue list\n    {\n        //queueList();\n    }\n    else if (num == 3) // Queue dynamic array\n    {\n        //queueArray();\n    }\n}\n}\n\nvoid stackVector()\n{\nint num;\nint item;\nminiStackVT&lt;int&gt; myStack();\ncout &lt;&lt; \"Please choose from the following menu: \" &lt;&lt; endl;\ncout &lt;&lt; \"1 Add an element\" &lt;&lt; endl;\ncout &lt;&lt; \"2 Remove an element\" &lt;&lt; endl;\ncout &lt;&lt; \"3 display the contents\" &lt;&lt; endl;\ncout &lt;&lt; \"4 display the size\" &lt;&lt; endl;\ncout &lt;&lt; \"5 display the first element\" &lt;&lt; endl;\ncin &gt;&gt; num;\nif (num == 1)\n{\n    cout &lt;&lt; \"What you like to add into the stack?\" &lt;&lt; endl;\n    cin &gt;&gt; item;\n    myStack().Push(item);\n}\nelse if (num == 2)\n{\n    myStack().Pop();\n}\nelse if (num == 3)\n{\n    myStack().PrintStack();\n}\nelse if (num == 4)\n{\n    cout &lt;&lt; myStack().size();\n}\nelse if (num == 5)\n{\n    cout &lt;&lt; myStack().TopStack();\n}\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "thread-safety", "queue", "buffer"], "comments": [{"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 1, "creation_date": 1463004584, "post_id": 37172549, "comment_id": 61882866, "body": "You are missing a <code>notify()</code> in the <code>pop()</code> to signal the <code>push()</code> it&#39;s clear to push now. Also, as pointed out already, you need to keep holding the lock while notifying."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 6199879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b578cb4a8473a5c2732f6dd57b099bf3?s=128&d=identicon&r=PG&f=1", "display_name": "CIVI89", "link": "https://stackoverflow.com/users/6199879/civi89"}, "edited": false, "score": 0, "creation_date": 1463032246, "post_id": 37174638, "comment_id": 61890565, "body": "Ok, thanks, sorry but I&#39;m quite new to multithreading and condition variables, I don&#39;t fully understand how I can modify my code, and which of this three things is more suitable for my problem."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 81, "user_id": 6199879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b578cb4a8473a5c2732f6dd57b099bf3?s=128&d=identicon&r=PG&f=1", "display_name": "CIVI89", "link": "https://stackoverflow.com/users/6199879/civi89"}, "edited": false, "score": 0, "creation_date": 1463032570, "post_id": 37174638, "comment_id": 61890688, "body": "@CIVI89 The most important thing is to call a notify function when you pop. That will fix the problem that caused you to ask this question. As for which of the three methods to use, any of them will work fine in your case. You could use two condition variables, always signal while holding the lock, or call notify_all every time. Any one of those three things will fix the rare race condition you&#39;ll probably never actually hit. ;)"}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 0, "creation_date": 1463041085, "post_id": 37174638, "comment_id": 61895582, "body": "If you signal the condition variable while not holding the lock, the signal can get lost when it happens to be sent between the check of the predicate and the wait operation on the condition variable. The is independent of using multiple condition variables or using <code>notify_all</code> over <code>notify_one</code>. Or am I missing something? I thought that was the point of associating wait operations with locks."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 1, "creation_date": 1463042964, "post_id": 37174638, "comment_id": 61896848, "body": "@TFM There is no harm in losing the signal in that case because the thread won&#39;t wait. It will check the predicate, see that it does not need to wait, and not wait. The signal is only precious if a thread is waiting, and that thread would have to have seen the predicate before we changed it. And we needed the lock to change it, so it must have already released it. Hence it&#39;s already waiting and cannot miss the signal. (But as I said in my answer, this is very hard to understand. So just follow one of the three rules and you need not worry.)"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 1, "creation_date": 1463043191, "post_id": 37174638, "comment_id": 61897020, "body": "@TFM Think about it. All you do by unlocking before signalling is signal later. Any thread that was waiting when you held the lock will still be waiting later unless it gets woken up anyway. The only way waiting to signal can break something is if you signal the &quot;wrong thread&quot;, one that only started waiting after you released the lock. And any of the three rules will avoid this problem."}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 1, "creation_date": 1463044287, "post_id": 37174638, "comment_id": 61897872, "body": "@DavidSchwartz Yes, of course, I was confused. It is the predicate the needs to be protected, not the condition variable."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 3, "last_activity_date": 1463007558, "creation_date": 1463007558, "answer_id": 37174638, "question_id": 37172549, "link": "https://stackoverflow.com/questions/37172549/thread-safe-queue-with-fixed-size/37174638#37174638", "title": "Thread safe queue with fixed size", "body": "<p>Your <code>pop</code> functions could allow a thread waiting to <code>push</code> to make forward progress, but they don't call any <code>notify</code> function. You must call the appropriate <code>notify</code> function any time you may make it possible for a thread blocked on the condition variable to make forward progress.</p>\n\n<p>Although it's quite complex to explain why, you should either call <code>notify_all</code> or call <code>notify_one</code> while still holding the lock. It is theoretically possible to \"wake the wrong thread\" otherwise because you are using the same condition variable for two predicates (the queue is not empty and the queue is not full).</p>\n\n<p>To avoid very hard to understand failure modes, always do one of these three things:</p>\n\n<ol>\n<li>Do not use the same condition variable to handle more than one predicate. For example, use one condition variable for \"not empty\" and another for \"not full\";</li>\n<li>Always use <code>notify_all</code>, never <code>notify_one</code>; or</li>\n<li>Always call notify functions while holding the mutex.</li>\n</ol>\n\n<p>So long as you follow at least one of these three rules, you will avoid an obscure failure mode where you wake only a thread that chose to sleep after you released the mutex while leaving the only thread that could handle the condition still blocked.</p>\n"}], "owner": {"reputation": 81, "user_id": 6199879, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b578cb4a8473a5c2732f6dd57b099bf3?s=128&d=identicon&r=PG&f=1", "display_name": "CIVI89", "link": "https://stackoverflow.com/users/6199879/civi89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1492, "favorite_count": 0, "accepted_answer_id": 37174638, "answer_count": 1, "score": 1, "last_activity_date": 1463007558, "creation_date": 1462997988, "question_id": 37172549, "link": "https://stackoverflow.com/questions/37172549/thread-safe-queue-with-fixed-size", "title": "Thread safe queue with fixed size", "body": "<p>what I want to do is to push integers to my threadSafe queue implementation with multiple threads and concurrently with another series of threads pop away the inserted numbers. All of this operation has to be thread safe, but another option that I want to have is that the size of the queue must be fixed, just like a buffer. If the buffer is full all the push threads must wait the pop threads to free some slot.</p>\n\n<p>This is my implementation of the queue/buffer, it seems to work but after few iterations it stops and remains blocked without any error.</p>\n\n<pre><code>#include &lt;queue&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;typename T&gt;\n\nclass Queue\n{\nprivate:\n    std::queue&lt;T&gt; queue_;\n    std::mutex mutex_;\n    std::condition_variable cond_;\n\npublic:\n\n    T pop()\n    {\n        std::unique_lock&lt;std::mutex&gt; mlock(mutex_);\n\n        cond_.wait(mlock, [this]{return !queue_.empty();});\n\n        auto val = queue_.front();\n        queue_.pop();\n        return val;\n    }\n\n    void pop(T&amp; item)\n    {\n        std::unique_lock&lt;std::mutex&gt; mlock(mutex_);\n\n        cond_.wait(mlock, [this]{return !queue_.empty();});\n\n        item = queue_.front();\n        queue_.pop();\n    }\n\n    void push(const T&amp; item, int buffer)\n    {\n        std::unique_lock&lt;std::mutex&gt; mlock(mutex_);\n\n        while (queue_.size() &gt;= buffer)\n        {\n            cond_.wait(mlock);\n        }\n\n        queue_.push(item);\n        mlock.unlock();\n        cond_.notify_one();\n    }\n\n    Queue()=default;\n    Queue(const Queue&amp;) = delete;            // disable copying\n    Queue&amp; operator=(const Queue&amp;) = delete; // disable assignment\n\n};\n</code></pre>\n\n<p>The size of the buffer is defined in the push function with the variable buffer. This is an example of usage:</p>\n\n<pre><code> void prepare(Queue&lt;int&gt;&amp; loaded, int buffer, int num_frames)\n {\n     for (int i = 0; i &lt; num_frames; i++)\n     {\n         cout&lt;&lt; \"push \"&lt;&lt;i&lt;&lt;endl;\n         loaded.push(i, buffer);\n     }\n }\n\n void load (vector&lt;Frame&gt;&amp; movie, Queue&lt;int&gt;&amp; loaded, int num_frames,\n                            int num_points, int buffer, int height, int width)\n    {\n        for (int i = 0; i &lt; num_frames; i++)\n        {\n            int num = loaded.pop();\n            cout&lt;&lt; \"pop \"&lt;&lt;num&lt;&lt;endl;\n    }\n}\n\nint main()\n{\n    srand(time(NULL));\n\n    int num_threadsXstage = 4;\n\n    int width = 500;\n    int height = 500;\n\n    int num_points = width * height;\n\n    int num_frames = 100;\n\n    int frames_thread = num_frames/num_threadsXstage;\n\n    int preset = 3;\n\n    int buffer = 10;\n\n    //Vectors of threads\n    vector&lt;thread&gt; loader;\n\n    //Final vector\n    vector&lt;Frame&gt; movie;\n    movie.resize(num_frames);\n\n    //Working queues\n    Queue&lt;int&gt; loaded;\n\n    //Prepare loading queue task\n    thread preparator(prepare, ref(loaded), buffer, num_frames);\n\n    for (int i = 0; i &lt; num_threadsXstage; i++)\n    {\n        //stage 1\n        loader.push_back(thread(&amp;load, ref(movie), ref(loaded), frames_thread,\n                                num_points, buffer, height, width));\n\n    }\n\n\n    // JOIN\n    preparator.join();\n\n    join_all(loader);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1462997107, "post_id": 37172284, "comment_id": 61879234, "body": "The actual error text would be nice to have."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 0, "last_activity_date": 1462997181, "creation_date": 1462997181, "answer_id": 37172313, "question_id": 37172284, "link": "https://stackoverflow.com/questions/37172284/error-getting-a-passing-as-this-discards-qualifiers/37172313#37172313", "title": "error: getting a passing &quot;***&quot; as &quot;this&quot; .... discards qualifiers", "body": "<p>A <code>const</code> member can't be assigned after initialization. You have to ensure it is properly initialized in the constructor initialization list. </p>\n\n<pre><code>Dependency::Dependency(std::function&lt;void()&gt; const&amp; func) : call_back(func) {}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 6, "last_activity_date": 1462997229, "creation_date": 1462997229, "answer_id": 37172328, "question_id": 37172284, "link": "https://stackoverflow.com/questions/37172284/error-getting-a-passing-as-this-discards-qualifiers/37172328#37172328", "title": "error: getting a passing &quot;***&quot; as &quot;this&quot; .... discards qualifiers", "body": "<pre><code>Dependency::Dependency(std::function&lt;void ()&gt; const &amp; func){\n            call_back = func;\n}\n</code></pre>\n\n<p>First, this constructs a <code>Dependency</code> object, and it's <code>call_back</code> member.  Then it enters the <code>{}</code>, which attempts to reassign <code>func</code> to <code>call_back</code>, which isn't allowed, because <code>call_back</code> is const.</p>\n\n<p>Instead, we have to tell the compiler to construct <code>call_back</code> with <code>func</code> the first time, which uses this magic syntax:</p>\n\n<pre><code>Dependency::Dependency(std::function&lt;void ()&gt; const &amp; func)\n:call_back(func)\n{\n}\n</code></pre>\n\n<p>You use the same technique to call a specific constructor for parent classes.  Please note that it ignores the order you use here, the compiler will instead always construct the parent class(es) first, and then the members in the order they were declared in the class definition.</p>\n"}], "owner": {"reputation": 29, "user_id": 4966856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqb7L.jpg?s=128&g=1", "display_name": "Peter Paiste", "link": "https://stackoverflow.com/users/4966856/peter-paiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1463025087, "accepted_answer_id": 37172328, "answer_count": 2, "score": -3, "last_activity_date": 1462997229, "creation_date": 1462997059, "last_edit_date": 1462997171, "question_id": 37172284, "link": "https://stackoverflow.com/questions/37172284/error-getting-a-passing-as-this-discards-qualifiers", "closed_reason": "Not suitable for this site", "title": "error: getting a passing &quot;***&quot; as &quot;this&quot; .... discards qualifiers", "body": "<p>The compiler is telling me I can't make the assignment in the constructor. I have extremely similar code in another class and it compiles just fine.</p>\n\n<h3>Dependency.h</h3>\n\n<pre><code>class Dependency {\npublic:\n    Dependency(std::function&lt;void ()&gt; const &amp; func);\n\nprivate:\n    std::function&lt;void ()&gt; const call_back;\n};\n\nDependency::Dependency(std::function&lt;void ()&gt; const &amp; func){\n    call_back = func;\n}\n</code></pre>\n"}, {"tags": ["c++", "bitwise-operators"], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 2, "last_activity_date": 1462998014, "last_edit_date": 1462998014, "creation_date": 1462996990, "answer_id": 37172269, "question_id": 37172198, "link": "https://stackoverflow.com/questions/37172198/bitwise-operator-standard-for-different-sized-variables/37172269#37172269", "title": "Bitwise-operator standard for different sized variables", "body": "<p>As on most common systems<sup>\u2020</sup> (all I've ever used), both <code>int8_t</code> and <code>int16_t</code> have lower conversion rank than  <code>int</code>, both operands will be promoted to the latter.</p>\n\n<p>Then, the <code>operator |=</code> operates on those two (commonly 32 bit) <code>int</code>s and in the last step, the resulting <code>int</code> is converted to <code>int8_t</code>. If the result does not fit into <code>int8_t</code>, <code>a</code>'s value is implementation defined. Usually, it just drops the extra bits.</p>\n\n<hr>\n\n<p><sup>\u2020</sup> Actually, that holds on all systems as <code>int</code> is at least 16 bit and <code>long</code> at least 32 bit, so neither of the types you use can have a rank greater than <code>int</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2732, "user_id": 1745452, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/G5HdL.png?s=128&g=1", "display_name": "Broxzier", "link": "https://stackoverflow.com/users/1745452/broxzier"}, "edited": false, "score": 0, "creation_date": 1462998364, "post_id": 37172278, "comment_id": 61879882, "body": "Will a <code>uint16_t</code> value not change its sign when promoted to a signed 16-bit int, or does that not change with integral promotion?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 2732, "user_id": 1745452, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/G5HdL.png?s=128&g=1", "display_name": "Broxzier", "link": "https://stackoverflow.com/users/1745452/broxzier"}, "edited": false, "score": 0, "creation_date": 1462998774, "post_id": 37172278, "comment_id": 61880131, "body": "@Broxzier The value will not change provided <code>int</code> is more than 16bit (since every unsigned 16bit number is representable in more than 16bits with two&#39;s complement. If <code>int</code> is 16bit (minimum required by C++ standard), it will actually be converted to unsigned int."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1462998109, "last_edit_date": 1462998109, "creation_date": 1462997010, "answer_id": 37172278, "question_id": 37172198, "link": "https://stackoverflow.com/questions/37172198/bitwise-operator-standard-for-different-sized-variables/37172278#37172278", "title": "Bitwise-operator standard for different sized variables", "body": "<p>There will be integral promotion happening here. <code>uint8_t</code> will be promoted to <strong>signed</strong> <code>int</code>, as well as <code>uint16_t</code> value, and then converted back to <code>uint8_t</code>.</p>\n"}], "owner": {"reputation": 2732, "user_id": 1745452, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/G5HdL.png?s=128&g=1", "display_name": "Broxzier", "link": "https://stackoverflow.com/users/1745452/broxzier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "accepted_answer_id": 37172269, "answer_count": 2, "score": 0, "last_activity_date": 1462998109, "creation_date": 1462996779, "question_id": 37172198, "link": "https://stackoverflow.com/questions/37172198/bitwise-operator-standard-for-different-sized-variables", "title": "Bitwise-operator standard for different sized variables", "body": "<pre><code>int8 a = &lt;some value&gt;;\nint16 b = &lt;some value&gt;;\na |= b;\n</code></pre>\n\n<ul>\n<li>What is the defined behaviour for this example?</li>\n<li>Will <code>a</code> be threaded as a 16-bit integer?</li>\n<li>Will <code>b</code> drop the 8 most significant bits?</li>\n<li>Will both of them use the register size and drop all most significant bits  it cannot assign?</li>\n<li>Is it undefined behaviour?</li>\n</ul>\n"}, {"tags": ["java", "c++", "java-native-interface"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1462996559, "post_id": 37172092, "comment_id": 61878945, "body": "Define <i>efficiency</i> please. For speed, or easy to use and maintain code."}, {"owner": {"reputation": 7514, "user_id": 227426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46f68eb5a1d76ea7781401ed832f0b48?s=128&d=identicon&r=PG", "display_name": "Robben_Ford_Fan_boy", "link": "https://stackoverflow.com/users/227426/robben-ford-fan-boy"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462996823, "post_id": 37172092, "comment_id": 61879092, "body": "Efficiency only applies to speed right?  I would have asked for the simplest method otherwise :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1462997126, "post_id": 37172092, "comment_id": 61879249, "body": "<i>&quot;Efficiency only applies to speed right?&quot;</i> No. That totally depends on your actual requirements priority."}, {"owner": {"reputation": 2971, "user_id": 4975646, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XzXhmdjjKB0/AAAAAAAAAAI/AAAAAAAAAeg/9rsygRfbVyk/photo.jpg?sz=128", "display_name": "callyalater", "link": "https://stackoverflow.com/users/4975646/callyalater"}, "edited": false, "score": 0, "creation_date": 1462998726, "post_id": 37172092, "comment_id": 61880101, "body": "Those <i>two</i> ways are the <i>three</i> most common ways of doing that..."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1463001536, "post_id": 37172092, "comment_id": 61881569, "body": "Maybe I don&#39;t fully grasp the meaning of SWIG, but isn&#39;t kind of the same thing as what the <i>JNI Invocation API</i> is?  (The invocation API allows you to embed a JVM in a C or C++ program.  It&#39;s somewhat more complicated than using JNI merely to invoke native methods from within a Java program.)"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1463001625, "post_id": 37172092, "comment_id": 61881611, "body": "How about running the Java code and the C++ code as separate micro-services that communicate with each other via some kind of network API?"}], "answers": [{"tags": [], "owner": {"reputation": 5387, "user_id": 843943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1V5SP.jpg?s=128&g=1", "display_name": "Grim", "link": "https://stackoverflow.com/users/843943/grim"}, "is_accepted": false, "score": 1, "last_activity_date": 1462996677, "creation_date": 1462996677, "answer_id": 37172172, "question_id": 37172092, "link": "https://stackoverflow.com/questions/37172092/what-is-the-most-efficientfastest-way-of-passing-data-from-c-to-java/37172172#37172172", "title": "What is the most efficient(fastest) way of passing data from C++ to Java?", "body": "<p>JNI would be the best approach. Notice that javah creates compatible header-files for your java-class, its very tricky to to write compatible header-files by your own, so please use javah.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 6226152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb1c6a1726535ad9911a5a8be860ab10?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Smith", "link": "https://stackoverflow.com/users/6226152/jason-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1462996722, "creation_date": 1462996722, "answer_id": 37172186, "question_id": 37172092, "link": "https://stackoverflow.com/questions/37172092/what-is-the-most-efficientfastest-way-of-passing-data-from-c-to-java/37172186#37172186", "title": "What is the most efficient(fastest) way of passing data from C++ to Java?", "body": "<p>Java Native Interface allows you to pass anything back and forth between C++ and Java. It supports both directions, but can be tricky. There are others you can look at Swig is one and then you have JNA. I would go with JNI</p>\n"}], "owner": {"reputation": 7514, "user_id": 227426, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/46f68eb5a1d76ea7781401ed832f0b48?s=128&d=identicon&r=PG", "display_name": "Robben_Ford_Fan_boy", "link": "https://stackoverflow.com/users/227426/robben-ford-fan-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "closed_date": 1463016279, "answer_count": 2, "score": 0, "last_activity_date": 1463031084, "creation_date": 1462996382, "last_edit_date": 1463031084, "question_id": 37172092, "link": "https://stackoverflow.com/questions/37172092/what-is-the-most-efficientfastest-way-of-passing-data-from-c-to-java", "closed_reason": "Opinion-based", "title": "What is the most efficient(fastest) way of passing data from C++ to Java?", "body": "<p>What is the most efficient way of passing data from C++ to Java?</p>\n\n<p>The Java application will need to call the C++ application to retrieve the data.</p>\n\n<p>I can see the following ways of achieving this:</p>\n\n<ol>\n<li>Using JNI</li>\n<li>Using a file based approach</li>\n<li>Using SWIG</li>\n</ol>\n\n<p>My current thinking is to use JNI.  AM I missing a better method before I commit?</p>\n"}, {"tags": ["c++", "qt", "qtgui"], "comments": [{"owner": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 1, "creation_date": 1462996498, "post_id": 37171941, "comment_id": 61878909, "body": "Can you show us the places you used <code>calc_input</code> and the places where <code>player_q_learning</code> is included?"}, {"owner": {"reputation": 27, "user_id": 6322262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae6fcfe6dbd36a9c6822dbb52487460a?s=128&d=identicon&r=PG&f=1", "display_name": "Vato", "link": "https://stackoverflow.com/users/6322262/vato"}, "reply_to_user": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1462996835, "post_id": 37171941, "comment_id": 61879101, "body": "I have added a link where you can download the whole project"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 3, "creation_date": 1462998702, "post_id": 37171941, "comment_id": 61880085, "body": "Please include the relevant code instead of posting a link."}, {"owner": {"reputation": 27, "user_id": 6322262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae6fcfe6dbd36a9c6822dbb52487460a?s=128&d=identicon&r=PG&f=1", "display_name": "Vato", "link": "https://stackoverflow.com/users/6322262/vato"}, "edited": false, "score": 0, "creation_date": 1463001443, "post_id": 37171941, "comment_id": 61881507, "body": "I am not sure what is relevant, to be more specific each part is interconnected. which makes it not possible to just provide you with certain files.."}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "reply_to_user": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1463027434, "post_id": 37171941, "comment_id": 61888830, "body": "Please read about constructing an <a href=\"http://stackoverflow.com/help/mcve\">MVCE</a>. A lot of questions get asked here, every day. To not waste time (and make your question more enticing yo answer), you should include the <i>pertinent</i> code. @xsquared nailed down exactly what we need: the <code>player_q_learning</code> header file, the definition for <code>calc_input</code>, and any <code>include</code> statements for the header file."}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1463033593, "post_id": 37171941, "comment_id": 61891100, "body": "Your forgot the most important file: player_q_learning.h"}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 0, "last_activity_date": 1463079110, "last_edit_date": 1463079110, "creation_date": 1463075260, "answer_id": 37194090, "question_id": 37171941, "link": "https://stackoverflow.com/questions/37171941/qt-creator-multiple-definition-within-build-folder/37194090#37194090", "title": "Qt creator multiple definition within build folder", "body": "<p>You declared <code>calc_input</code> to be a signal, so you must not implement it. It's Qt that provides its implementation (in the MOC-generated file), such that when it is emitted it calls the slots that have been connected to it.</p>\n\n<p>If you didn't intend it to be a signal (as it seems to me, given that you never <code>connect</code> nor <code>emit</code> it), move its declaration outside the <code>signals:</code> section, so that it becomes a \"regular\" method. </p>\n"}], "owner": {"reputation": 27, "user_id": 6322262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ae6fcfe6dbd36a9c6822dbb52487460a?s=128&d=identicon&r=PG&f=1", "display_name": "Vato", "link": "https://stackoverflow.com/users/6322262/vato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 37194090, "answer_count": 1, "score": 0, "last_activity_date": 1463079110, "creation_date": 1462995879, "last_edit_date": 1463074827, "question_id": 37171941, "link": "https://stackoverflow.com/questions/37171941/qt-creator-multiple-definition-within-build-folder", "title": "Qt creator multiple definition within build folder", "body": "<p>I am getting a weird error message with Qt creator which makes no sense why it is occuring at all.. I am at the moment programming an ai player for a ludo simulator, which has been written as a QT gui. I've creates a C++ class named <code>player_q_learning</code>, but for some reason is <code>moc_player_q_learning.cpp</code> created within the build folder, and create a multiple definition of the function which i already defined in <code>player_q_learning</code>... Why  am I running into this error?</p>\n\n<pre><code>/home/Vato/Desktop/ludo-gui/build-ludo-Desktop-Debug/moc_player_q_learning.cpp:116: error: multiple definition of `player_q_learning::calc_input(float*, int, int)'\n</code></pre>\n\n<p>ludo.pro</p>\n\n<pre><code>#-------------------------------------------------\n#\n# Project created by QtCreator 2016-03-15T10:40:30\n#\n#-------------------------------------------------\n\nQT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = ludo\nTEMPLATE = app\n\n\nSOURCES += main.cpp\\\n        dialog.cpp \\\n    game.cpp \\\n    ludo_player.cpp \\\n    ludo_player_random.cpp \\\n    player_q_learning.cpp\n\nHEADERS  += dialog.h \\\n    game.h \\\n    ludo_player.h \\\n    positions_and_dice.h \\\n    ludo_player_random.h \\\n    player_q_learning.h\n\nFORMS    += dialog.ui\n\nCONFIG += object_with_source\n\nQMAKE_CXXFLAGS += -std=c++11 -Wall -Wextra -Wshadow -Wnon-virtual-dtor -pedantic -Wunused\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"dialog.h\"\n#include &lt;QApplication&gt;\n#include \"game.h\"\n#include &lt;vector&gt;\n#include \"ludo_player.h\"\n#include \"ludo_player_random.h\"\n#include \"positions_and_dice.h\"\n\nQ_DECLARE_METATYPE( positions_and_dice )\n\nusing namespace std;\n\nint main(int argc, char *argv[]){\n    QApplication a(argc, argv);\n    qRegisterMetaType&lt;positions_and_dice&gt;();\n\n    //instanciate the players here\n    ludo_player p1, p2;\n    ludo_player_random p3, p4;\n\n    game g;\n    g.setGameDelay(010); //if you want to see the game, set a delay\n\n    // Add a GUI &lt;-- remove the '/' to uncomment block\n//    Dialog w;\n//    QObject::connect(&amp;g,SIGNAL(update_graphics(std::vector&lt;int&gt;)),&amp;w,SLOT(update_graphics(std::vector&lt;int&gt;)));\n//    QObject::connect(&amp;g,SIGNAL(set_color(int)),                   &amp;w,SLOT(get_color(int)));\n//    QObject::connect(&amp;g,SIGNAL(set_dice_result(int)),             &amp;w,SLOT(get_dice_result(int)));\n//    QObject::connect(&amp;g,SIGNAL(declare_winner(int)),              &amp;w,SLOT(get_winner(int)));\n//    w.show();\n    //Or don't add the GUI\n    //QObject::connect(&amp;g,SIGNAL(close()),&amp;a,SLOT(quit()));\n    //*/\n\n    //set up for each player\n    QObject::connect(&amp;g, SIGNAL(player1_start(positions_and_dice)),&amp;p1,SLOT(start_turn(positions_and_dice)));\n    QObject::connect(&amp;p1,SIGNAL(select_piece(int)),                &amp;g, SLOT(movePiece(int)));\n    QObject::connect(&amp;g, SIGNAL(player1_end(std::vector&lt;int&gt;)),    &amp;p1,SLOT(post_game_analysis(std::vector&lt;int&gt;)));\n    QObject::connect(&amp;p1,SIGNAL(turn_complete(bool)),              &amp;g, SLOT(turnComplete(bool)));\n\n    QObject::connect(&amp;g, SIGNAL(player2_start(positions_and_dice)),&amp;p2,SLOT(start_turn(positions_and_dice)));\n    QObject::connect(&amp;p2,SIGNAL(select_piece(int)),                &amp;g, SLOT(movePiece(int)));\n    QObject::connect(&amp;g, SIGNAL(player2_end(std::vector&lt;int&gt;)),    &amp;p2,SLOT(post_game_analysis(std::vector&lt;int&gt;)));\n    QObject::connect(&amp;p2,SIGNAL(turn_complete(bool)),              &amp;g, SLOT(turnComplete(bool)));\n\n    QObject::connect(&amp;g, SIGNAL(player3_start(positions_and_dice)),&amp;p3,SLOT(start_turn(positions_and_dice)));\n    QObject::connect(&amp;p3,SIGNAL(select_piece(int)),                &amp;g, SLOT(movePiece(int)));\n    QObject::connect(&amp;g, SIGNAL(player3_end(std::vector&lt;int&gt;)),    &amp;p3,SLOT(post_game_analysis(std::vector&lt;int&gt;)));\n    QObject::connect(&amp;p3,SIGNAL(turn_complete(bool)),              &amp;g, SLOT(turnComplete(bool)));\n\n    QObject::connect(&amp;g, SIGNAL(player4_start(positions_and_dice)),&amp;p4,SLOT(start_turn(positions_and_dice)));\n    QObject::connect(&amp;p4,SIGNAL(select_piece(int)),                &amp;g, SLOT(movePiece(int)));\n    QObject::connect(&amp;g, SIGNAL(player4_end(std::vector&lt;int&gt;)),    &amp;p4,SLOT(post_game_analysis(std::vector&lt;int&gt;)));\n    QObject::connect(&amp;p4,SIGNAL(turn_complete(bool)),              &amp;g, SLOT(turnComplete(bool)));\n\n    g.start();\n\n\n    return a.exec();\n}\n</code></pre>\n\n<p>dialog.cpp</p>\n\n<pre><code>#include \"dialog.h\"\n#include \"ui_dialog.h\"\n\nDialog::Dialog(QWidget *parent) :\n    QDialog(parent),\n    ui(new Ui::Dialog)\n{\n    ui-&gt;setupUi(this);\n\n    scene = new QGraphicsScene(this);\n    ui-&gt;graphicsView-&gt;setScene(scene);\n    ui-&gt;graphicsView-&gt;setBackgroundBrush(QBrush(QColor(240,240,239)));\n\n    diceBG = scene-&gt;addRect(0,-150,100,100,QPen(Qt::black,3,Qt::SolidLine,Qt::RoundCap, Qt::RoundJoin),QBrush(Qt::green));\n    diceRoll = scene-&gt;addSimpleText(QString::number(0),QFont(\"Courier\", 72, QFont::Bold, true));\n    diceRoll-&gt;setPos(25,-150);\n    // Colors\n    std::vector&lt;std::pair&lt;QColor,QColor&gt; &gt;base_colors {\n        std::make_pair(QColor(92,170,119),QColor(185,219,125)), //G\n        std::make_pair(QColor(237,235,89),QColor(237,234,138)),  //Y\n        std::make_pair(QColor(92,93,170),QColor(111,111,170)),  //B\n        std::make_pair(QColor(237,57,60),QColor(237,114,125))   //R\n    };\n\n    QBrush white(Qt::white);\n    QPen blackPen(Qt::black);\n    blackPen.setWidth(1);\n\n\n    // Cross\n    scene-&gt;addRect(415,-155,160,960,blackPen,QBrush(QColor(195,195,194)));\n    scene-&gt;addRect(15,245,960,160,blackPen,QBrush(QColor(195,195,194)));\n    scene-&gt;addRect(415,245,160,160,QPen(QColor(195,195,194)),QBrush(QColor(195,195,194))); //clean center\n\n    // Goal stretch\n    scene-&gt;addRect(50,290,350,70,blackPen,QBrush(base_colors[0].first));\n    scene-&gt;addRect(460,-120,70,350,blackPen,QBrush(base_colors[1].first));\n    scene-&gt;addRect(590,290,350,70,blackPen,QBrush(base_colors[2].first));\n    scene-&gt;addRect(460,420,70,350,blackPen,QBrush(base_colors[3].first));\n\n    int x_pos = -10; //start place for green\n    int y_pos = 220;\n    int offset = 70;\n    int small_offset = 50;\n    int large_offset = 80;\n\n    //home fields\n    home_fields.push_back(QPointF(0,0));\n    home_fields.push_back(QPointF(630,-170));\n    home_fields.push_back(QPointF(800,445));\n    home_fields.push_back(QPointF(190,630));\n    for(size_t f = 0; f &lt; home_fields.size(); ++f){\n        addHomeField(home_fields[f].x(),home_fields[f].y(),QBrush(base_colors[f].first));\n    }\n\n    // Playing fields\n    std::vector&lt;std::pair&lt;char,char&gt; &gt; directions{std::make_pair(1,-1),std::make_pair(1,1),std::make_pair(-1,1),std::make_pair(-1,-1) };\n    for(size_t d =0; d &lt; directions.size(); ++d){\n        for(int i=0; i&lt;5;++i){\n            if(d % 2 == 0)\n                x_pos += directions[d].first * offset;\n            else\n                y_pos += directions[d].second * offset;\n            fieldPos.push_back(QPointF(x_pos,y_pos));\n        }\n        x_pos += directions[d].first * small_offset;\n        y_pos += directions[d].second * small_offset;\n        for(int i=0; i&lt;5;++i){\n            fieldPos.push_back(QPointF(x_pos,y_pos));\n            if(d % 2 == 0)\n                y_pos += directions[d].second * offset;\n            else\n                x_pos += directions[d].first * offset;\n        }\n        for(int i=0; i&lt;2;++i){\n            fieldPos.push_back(QPointF(x_pos,y_pos));\n            if(d % 2 == 0)\n                x_pos += directions[d].first * large_offset;\n            else\n                y_pos += directions[d].second * large_offset;\n        }\n        fieldPos.push_back(QPointF(x_pos,y_pos));\n    }\n\n    //goal stretches\n    for(int x=60; x&lt;=340; x+=offset)\n        fieldPos.push_back(QPointF(x,300));\n    for(int y=-110; y&lt;=170; y+=offset)\n        fieldPos.push_back(QPointF(470,y));\n    for(int x=880; x&gt;=600; x-=offset)\n        fieldPos.push_back(QPointF(x,300));\n    for(int y=710; y&gt;=430; y-=offset)\n        fieldPos.push_back(QPointF(470,y));\n\n    QImage globe_img(\"../globe.png\");//http://www.clker.com/clipart-world-black-and-white.html\n    QImage star_img(\"../star.png\");  //http://www.clker.com/clipart-2568.html\n//    QGraphicsPixmapItem globe( QPixmap::fromImage(QImage(\"../globe.png\")));\n//    QGraphicsPixmapItem star( QPixmap::fromImage(QImage(\"../star.png\")));\n    for(size_t c = 0; c &lt; base_colors.size(); ++c){\n        scene-&gt;addEllipse(fieldPos[0+13*c].x(),fieldPos[0+13*c].y(),50,50,QPen(base_colors[c].first),QBrush(base_colors[c].second));\n        for(int i=1; i &lt; 13; ++i){\n            if(i == 8){\n                QGraphicsPixmapItem * globe = new QGraphicsPixmapItem( QPixmap::fromImage(globe_img));\n                globe-&gt;setPos(fieldPos[i+13*c]);\n                globe-&gt;setScale(0.5);\n                scene-&gt;addItem(globe);\n            } else if(i == 5 || i == 11){\n                QGraphicsPixmapItem * star = new QGraphicsPixmapItem( QPixmap::fromImage(star_img));\n                star-&gt;setPos(fieldPos[i+13*c]);\n                star-&gt;setScale(0.5);\n                scene-&gt;addItem(star);\n            } else {\n                scene-&gt;addEllipse(fieldPos[i+13*c].x(),fieldPos[i+13*c].y(),50,50,blackPen,white);\n            }\n        }\n    }\n    for(size_t g = 52; g &lt; fieldPos.size(); ++g){\n        scene-&gt;addEllipse(fieldPos[g].x(),fieldPos[g].y(),50,50,blackPen,white);\n    }\n    create_graphic_players();\n    std::vector&lt;int&gt; init_pos(16,-1);\n    update_graphics(init_pos);\n}\n\nvoid Dialog::update_graphics(std::vector&lt;int&gt; player_positions){\n    QPointF p;\n    for(size_t i = 0; i &lt; player_positions.size(); ++i){\n        if(player_positions[i] == -1){\n            p = home_fields[i / 4];\n            if(i % 4 == 0)\n                graphic_player[i]-&gt;setPos(p.x()+65 ,p.y()+15 );\n            else if(i % 4 == 1)\n                graphic_player[i]-&gt;setPos(p.x()+65 ,p.y()+115);\n            else if(i % 4 == 2)\n                graphic_player[i]-&gt;setPos(p.x()+15 ,p.y()+65 );\n            else if(i % 4 == 3)\n                graphic_player[i]-&gt;setPos(p.x()+115,p.y()+65 );\n\n        } else if(player_positions[i] == 99){\n            if(i/4 == 0){\n                if(i % 4 == 0)      graphic_player[i]-&gt;setPos(405,300); //left\n                else if(i % 4 == 1) graphic_player[i]-&gt;setPos(405,270);\n                else if(i % 4 == 2) graphic_player[i]-&gt;setPos(405,330);\n                else if(i % 4 == 3) graphic_player[i]-&gt;setPos(435,300);\n            } else if(i/4 == 1){\n                if(i % 4 == 0)      graphic_player[i]-&gt;setPos(470,235); //up\n                else if(i % 4 == 1) graphic_player[i]-&gt;setPos(440,235);\n                else if(i % 4 == 2) graphic_player[i]-&gt;setPos(500,235);\n                else if(i % 4 == 3) graphic_player[i]-&gt;setPos(470,265);\n            } else if(i/4 == 2){\n                if(i % 4 == 0)      graphic_player[i]-&gt;setPos(535,300); //right\n                else if(i % 4 == 1) graphic_player[i]-&gt;setPos(535,270);\n                else if(i % 4 == 2) graphic_player[i]-&gt;setPos(535,330);\n                else if(i % 4 == 3) graphic_player[i]-&gt;setPos(505,300);\n            } else if(i/4 == 3){\n                if(i % 4 == 0)      graphic_player[i]-&gt;setPos(470,365); //down\n                else if(i % 4 == 1) graphic_player[i]-&gt;setPos(440,365);\n                else if(i % 4 == 2) graphic_player[i]-&gt;setPos(500,365);\n                else if(i % 4 == 3) graphic_player[i]-&gt;setPos(470,335);\n            }\n        } else {\n            graphic_player[i]-&gt;setPos(fieldPos[player_positions[i]]);\n        }\n    }\n    ui-&gt;graphicsView-&gt;repaint();\n}\n\nvoid Dialog::create_graphic_players(){\n    graphic_player.clear();\n    QBrush piece;\n    QPen blackPen(Qt::black);\n    blackPen.setWidth(1);\n    for(int c = 0; c&lt;4; ++c){\n        if(c == 0){\n            piece = QBrush(QColor(Qt::green));\n        } else if(c == 1){\n            piece = QBrush(QColor(Qt::yellow));\n        } else if(c == 2){\n            piece = QBrush(QColor(Qt::blue));\n        } else if(c == 3){\n            piece = QBrush(QColor(Qt::red));\n        }\n        for(int i = 0; i&lt;4; ++i){\n            graphic_player.push_back(scene-&gt;addEllipse(5,5,40,40,blackPen,piece));\n        }\n    }\n}\n\n\nDialog::~Dialog()\n{\n    delete ui;\n}\n\nvoid Dialog::showEvent(QShowEvent *) {\n    ui-&gt;graphicsView-&gt;fitInView(scene-&gt;itemsBoundingRect(),Qt::KeepAspectRatio);\n}\n\nvoid Dialog::resizeEvent(QResizeEvent *){\n    ui-&gt;graphicsView-&gt;fitInView(scene-&gt;itemsBoundingRect(),Qt::KeepAspectRatio);\n}\n\nvoid Dialog::get_winner(int color){\n    scene-&gt;addRect(0,500,1000,200,QPen(Qt::black,3,Qt::SolidLine,Qt::RoundCap, Qt::RoundJoin),QBrush(active_color));\n    QGraphicsSimpleTextItem * win = scene-&gt;addSimpleText(QString(\"Winner is found!\"),QFont(\"Courier\", 72, QFont::Bold, true));\n    win-&gt;setPos(50,550);\n}\n\nvoid Dialog::get_color(int color){\n    switch(color){\n        case 0:\n            active_color = Qt::green;\n            break;\n        case 1:\n            active_color = Qt::yellow;\n            break;\n        case 2:\n            active_color = Qt::blue;\n            break;\n        case 3:\n            active_color = Qt::red;\n        default:\n            break;\n    }\n}\n\nvoid Dialog::get_dice_result(int dice){\n    current_dice_roll = dice;\n    diceBG-&gt;setBrush(active_color);\n    diceRoll-&gt;setText(QString::number(current_dice_roll));\n    ui-&gt;graphicsView-&gt;repaint();\n}\n\nvoid Dialog::addHomeField(int x, int y,QBrush brush){\n    QBrush whiteBrush(Qt::white);\n    QPen blackPen(Qt::black);\n    blackPen.setWidth(1);\n\n    scene-&gt;addEllipse(x,y,180,180,blackPen,brush);\n    scene-&gt;addEllipse(x+65 ,y+15 ,50,50,blackPen,whiteBrush);\n    scene-&gt;addEllipse(x+65 ,y+115,50,50,blackPen,whiteBrush);\n    scene-&gt;addEllipse(x+15 ,y+65 ,50,50,blackPen,whiteBrush);\n    scene-&gt;addEllipse(x+115,y+65 ,50,50,blackPen,whiteBrush);\n}\n</code></pre>\n\n<p>game.cpp</p>\n\n<pre><code>#include \"game.h\"\n#define DEBUG 0\n\ngame::game(){\n    game_delay = 1000;\n    game_complete = false;\n    turn_complete = true;\n    for(int i = 0; i &lt; 16; ++i){\n         player_positions.push_back(-1);\n    }\n    color = 3;\n}\n\nvoid game::reset(){\n    game_complete = false;\n    turn_complete = true;\n    for(auto i : player_positions){\n        i = -1;\n    }\n    color = 3;\n}\n\n\nint game::rel_to_fixed(int relative_piece_index){\n    return relative_piece_index + color * 4;\n}\n\nint game::isStar(int index){\n    if(index == 5  ||\n       index == 18 ||\n       index == 31 ||\n       index == 44){\n        return 6;\n    } else if(index == 11 ||\n              index == 24 ||\n              index == 37 ||\n              index == 50){\n        return 7;\n    }\n    return 0;\n}\n\nint game::isOccupied(int index){ //returns number of people of another color\n    int number_of_people = 0;\n\n    if(index != 99){\n        for(size_t i = 0; i &lt; player_positions.size(); ++i){\n            if(i &lt; color*4 || i &gt;= color*4 + 4){        //Disregard own players\n                if(player_positions[i] == index){\n                    ++number_of_people;\n                }\n            }\n        }\n    }\n    return number_of_people;\n}\n\nbool game::isGlobe(int index){\n    if(index &lt; 52){     //check only the indexes on the board, not in the home streak\n        if(index % 13 == 0 || (index - 8) % 13 == 0 || isOccupied(index) &gt; 1){  //if more people of the same team stand on the same spot it counts as globe\n            return true;\n        }\n    }\n    return false;\n}\n\nvoid game::send_them_home(int index){\n    for(size_t i = 0; i &lt; player_positions.size(); ++i){\n        if(i &lt; color*4 || i &gt;= color*4 + 4){        //this way we don't skip one player position\n            if(player_positions[i] == index){\n                player_positions[i] = -1;\n            }\n        }\n    }\n}\n\nvoid game::move_start(int fixed_piece){\n    if(dice_result == 6 &amp;&amp; player_positions[fixed_piece] &lt; 0){\n        player_positions[fixed_piece] = color*13; //move me to start\n        send_them_home(color*13); //send pieces home if they are on our start\n    }\n}\n\nint game::next_turn(unsigned int delay = 0){\n    if(game_complete){\n        return 0;\n    }\n    switch(color){\n        case 0:\n        case 1:\n        case 2:\n            ++color;\n            break;\n        case 3:\n        default:\n            color = 0;\n            break;\n    }\n    global_color = color;\n    rollDice();\n    relative.dice = getDiceRoll();\n    relative.pos = relativePosition();\n    emit set_color(color);\n    emit set_dice_result(dice_result);\n\n    msleep(delay);\n    switch(color){\n        case 0:\n            emit player1_start(relative);\n            break;\n        case 1:\n            emit player2_start(relative);\n            break;\n        case 2:\n            emit player3_start(relative);\n            break;\n        case 3:\n            emit player4_start(relative);\n        default:\n            break;\n    }\n\n    return 0;\n}\n\nvoid game::movePiece(int relative_piece){\n    int fixed_piece = rel_to_fixed(relative_piece);     //index of the piece in player_positions\n    int modifier = color * 13;\n    int relative_pos = player_positions[fixed_piece];\n    int target_pos = 0;\n    if(player_positions[fixed_piece] == -1){        //if the selected piece is in the safe house, try to move it to start\n        move_start(fixed_piece);\n    } else {\n        //convert to relative position\n        if(relative_pos == 99){\n            std::cout &lt;&lt; \"I tought this would be it \";\n        } else if(relative_pos &lt; modifier) {\n            relative_pos = relative_pos + 52 - modifier;\n        } else if( relative_pos &gt; 50) {\n            relative_pos = relative_pos - color * 5 - 1;\n        } else {//if(relative &gt;= modifier)\n            relative_pos = relative_pos - modifier;\n        }\n        if(DEBUG) std::cout &lt;&lt; \"color: \" &lt;&lt; color &lt;&lt; \" pos: \" &lt;&lt; relative_pos &lt;&lt; \" + \" &lt;&lt; dice_result &lt;&lt; \" = \" &lt;&lt; relative_pos + dice_result;\n        //add dice roll\n        relative_pos += dice_result;    //this is relative position of the selected token + the dice number\n\n        int jump = isStar(relative_pos); //return 0 | 6 | 7\n        if(jump){\n            if(jump + relative_pos == 57){\n                relative_pos = 56;\n            } else {\n                relative_pos += jump;\n            }\n        }\n        //special case checks\n        if(relative_pos &gt; 56 &amp;&amp; relative_pos &lt; 72){ // go back\n            target_pos = 56-(relative_pos-56) + color * 5 + 1; //If the player moves over the goal, it should move backwards\n        }else if(relative_pos == 56 || relative_pos &gt;= 99){\n            target_pos = 99;\n        }else if(relative_pos &gt; 50){ // goal stretch\n            target_pos = relative_pos + color * 5 + 1;\n        } else {\n            int new_pos = relative_pos + color * 13;\n            if(new_pos &lt; 52){\n                target_pos = new_pos;\n            } else { //wrap around\n                target_pos = new_pos - 52;  //this is the global position wrap around at the green entry point\n            }\n        }\n        //check for game stuff\n\n        if(isOccupied(target_pos)){\n            if(isGlobe(target_pos)){\n                target_pos = -1; //send me home\n            } else {\n                send_them_home(target_pos);\n            }\n        }\n        if(DEBUG) std::cout &lt;&lt; \" =&gt; \" &lt;&lt; target_pos &lt;&lt; std::endl;\n        player_positions[fixed_piece] = target_pos;\n    }\n    std::vector&lt;int&gt; new_relative = relativePosition();\n    switch(color){\n        case 0:\n            emit player1_end(new_relative);\n            break;\n        case 1:\n            emit player2_end(new_relative);\n            break;\n        case 2:\n            emit player3_end(new_relative);\n            break;\n        case 3:\n            emit player4_end(new_relative);\n        default:\n            break;\n    }\n    emit update_graphics(player_positions);\n}\n\nstd::vector&lt;int&gt; game::relativePosition(){\n    std::vector&lt;int&gt; relative_positons;\n    int modifier = color * 13;\n\n    //from start id to end\n    for(int i = color*4; i &lt; player_positions.size(); ++i){\n        relative_positons.push_back(player_positions[i]);\n    }\n    //from 0 to start id\n    for(int i = 0; i &lt; color*4; ++i){\n        relative_positons.push_back(player_positions[i]);\n    }\n\n\n    for(size_t i = 0; i &lt; relative_positons.size(); ++i){\n        if(relative_positons[i] == 99 || relative_positons[i] == -1){\n            relative_positons[i] = (relative_positons[i]);\n        } else if(relative_positons[i] &lt; modifier) {\n            relative_positons[i] = (relative_positons[i]+52-modifier);\n        } else if(relative_positons[i] &gt; 50) {\n            relative_positons[i] = (relative_positons[i]-color*5-1);\n        } else if(relative_positons[i] &gt; modifier) {\n            relative_positons[i] = (relative_positons[i]-modifier);\n        }\n    }\n    return std::move(relative_positons);\n}\n\nvoid game::turnComplete(bool win){\n    game_complete = win;\n    turn_complete = true;\n    if(game_complete){\n        std::cout &lt;&lt; \"player: \" &lt;&lt; color &lt;&lt; \" won\" &lt;&lt; std::endl;\n        emit declare_winner(color);\n    }\n}\n\nvoid game::run() {\n    if(DEBUG) std::cout &lt;&lt; \"color:     relative pos =&gt; fixed\\n\";\n    while(!game_complete){\n        if(turn_complete){\n            turn_complete = false;\n            msleep(game_delay/4);\n            next_turn(game_delay - game_delay/4);\n        }\n    }\n    emit close();\n    QThread::exit();\n}\n</code></pre>\n\n<p>ludo_player.cpp</p>\n\n<pre><code>    #include \"ludo_player.h\"\n#include &lt;random&gt;\n\n\nludo_player::ludo_player(){\n}\n\nint ludo_player::make_decision(){\n    if(dice_roll == 6){\n        for(int i = 0; i &lt; 4; ++i){\n            if(pos_start_of_turn[i]&lt;0){\n                return i;\n            }\n        }\n        for(int i = 0; i &lt; 4; ++i){\n            if(pos_start_of_turn[i]&gt;=0 &amp;&amp; pos_start_of_turn[i] != 99){\n                return i;\n            }\n        }\n    } else {\n        for(int i = 0; i &lt; 4; ++i){\n            if(pos_start_of_turn[i]&gt;=0 &amp;&amp; pos_start_of_turn[i] != 99){\n                return i;\n            }\n        }\n        for(int i = 0; i &lt; 4; ++i){ //maybe they are all locked in\n            if(pos_start_of_turn[i]&lt;0){\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n\nvoid ludo_player::start_turn(positions_and_dice relative){\n    pos_start_of_turn = relative.pos;\n    dice_roll = relative.dice;\n    int decision = make_decision();\n    emit select_piece(decision);\n}\n\nvoid ludo_player::post_game_analysis(std::vector&lt;int&gt; relative_pos){\n    pos_end_of_turn = relative_pos;\n    bool game_complete = true;\n    for(int i = 0; i &lt; 4; ++i){\n        if(pos_end_of_turn[i] &lt; 99){\n            game_complete = false;\n        }\n    }\n    emit turn_complete(game_complete);\n}\n</code></pre>\n\n<p>ludo_player_random.cpp</p>\n\n<pre><code>#include \"ludo_player_random.h\"\n\nludo_player_random::ludo_player_random(){\n}\n\nint ludo_player_random::make_decision(){\n    std::vector&lt;int&gt; valid_moves;\n    if(dice_roll == 6){\n        for(int i = 0; i &lt; 4; ++i){\n            if(pos_start_of_turn[i]&lt;0){\n                valid_moves.push_back(i);\n            }\n        }\n    }\n    for(int i = 0; i &lt; 4; ++i){\n        if(pos_start_of_turn[i]&gt;=0 &amp;&amp; pos_start_of_turn[i] != 99){\n            valid_moves.push_back(i);\n        }\n    }\n    if(valid_moves.size()==0){\n        for(int i = 0; i &lt; 4; ++i){\n            if(pos_start_of_turn[i] != 99){\n                valid_moves.push_back(i);\n            }\n        }\n    }\n    std::random_device rd;\n    std::mt19937 gen(rd());\n    std::uniform_int_distribution&lt;&gt; piece(0, valid_moves.size()-1);\n    int select = piece(gen);\n    return valid_moves[select];\n}\n\nvoid ludo_player_random::start_turn(positions_and_dice relative){\n    pos_start_of_turn = relative.pos;\n    dice_roll = relative.dice;\n    int decision = make_decision();\n    emit select_piece(decision);\n}\n\nvoid ludo_player_random::post_game_analysis(std::vector&lt;int&gt; relative_pos){\n    pos_end_of_turn = relative_pos;\n    bool game_complete = true;\n    for(int i = 0; i &lt; 4; ++i){\n        if(pos_end_of_turn[i] &lt; 99){\n            game_complete = false;\n        }\n    }\n    emit turn_complete(game_complete);\n}\n</code></pre>\n\n<p>player_q_learning.cpp</p>\n\n<p><a href=\"http://pastebin.com/bjwFDLgj\" rel=\"nofollow\">http://pastebin.com/bjwFDLgj</a></p>\n\n<p>player_q_learning.h</p>\n\n<p><a href=\"http://pastebin.com/zUrnvdsL\" rel=\"nofollow\">http://pastebin.com/zUrnvdsL</a></p>\n\n<p>I can't add the .h due to body character limit upto 30000 chars. I hope the .cpp gives an idea of how the .h files are constructed..</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462995969, "post_id": 37171687, "comment_id": 61878580, "body": "Many opencv algorithms are optimized for certain cases and may not exist for other types of data. So yes, you&#39;d have to do it yourself"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462996006, "post_id": 37171687, "comment_id": 61878603, "body": "Is your edit asking if there&#39;s a way to convert a CV_64F to a CV_32F? Of course!"}, {"owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462996787, "post_id": 37171687, "comment_id": 61879069, "body": "Yes, I fired to quickly on that one. I edited just after the post, because it came to me, that converting to lower precision might still work. Only then did I look into the docs. Testing it right now. Probably should close this question."}], "answers": [{"tags": [], "owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "is_accepted": true, "score": 0, "last_activity_date": 1465286475, "creation_date": 1465286475, "answer_id": 37673722, "question_id": 37171687, "link": "https://stackoverflow.com/questions/37171687/opencv-kmeans-with-cv-64f1/37673722#37673722", "title": "OpenCV kmeans with CV_64F1", "body": "<p>Just to conclude this question:</p>\n\n<p>I simply converted the Matrix from 64F to 32F:</p>\n\n<pre><code>cv::Mat a32f;\na.convertTo(a32f, CV_32FC1);\n\nkmeans(a32f,k, labels,\n    cv::TermCriteria(cv::TermCriteria::EPS + cv::TermCriteria::COUNT , 10, .0001),\n    5, cv::KMEANS_RANDOM_CENTERS);\n</code></pre>\n\n<p>with <code>a</code> being a parameter of type cv::Mat CV_64FC1</p>\n"}], "owner": {"reputation": 2597, "user_id": 768656, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/TgeZI.png?s=128&g=1", "display_name": "Benjamin Maurer", "link": "https://stackoverflow.com/users/768656/benjamin-maurer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 37673722, "answer_count": 1, "score": 0, "last_activity_date": 1465286475, "creation_date": 1462994837, "last_edit_date": 1462995351, "question_id": 37171687, "link": "https://stackoverflow.com/questions/37171687/opencv-kmeans-with-cv-64f1", "title": "OpenCV kmeans with CV_64F1", "body": "<p>According to the docs and the error that I get:</p>\n\n<pre><code>OpenCV Error: Assertion failed (data.dims &lt;= 2 &amp;&amp; type == CV_32F &amp;&amp; K &gt; 0)\n</code></pre>\n\n<p>OpenCV's kmeans clustering doesn't support CV_64F1 typed Arrays. Is there something I'm overlooking or would I have to implement kmeans by hand?</p>\n\n<p>(I'm using OpenCV 3.1.0  C++ Intefaces with gcc 5.3.1 on Linux;\nand yes, I need the 64 Bit precision, I'm doing some machine learning data analysis.)</p>\n\n<p>Edit: On second thought, it would be worth a try to \"down cast\" the Matrix to 32F, since I only need the k-means clustering to initialize my factors for the NMF. Maybe the result will be still better than random initialization. Is there a way to convert an OpenCV Matrix?</p>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"tags": [], "owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1463063151, "creation_date": 1463063151, "answer_id": 37189887, "question_id": 37171448, "link": "https://stackoverflow.com/questions/37171448/is-it-possible-to-define-user-defined-variable-in-visual-studio-debug-window/37189887#37189887", "title": "is it possible to define user-defined variable in visual studio debug window?", "body": "<p>It appears that this is not possible in the C++ code (you CAN do that in C# by declaring new variable in the Intermediate window).</p>\n\n<p>However, there is an easy work-around: you can declare one (or few?) global variable of the needed type; call it something like <code>WatchVar</code>, and use it as you wish.</p>\n"}], "owner": {"reputation": 8551, "user_id": 440403, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1f6698434e6b31de0de985726bb87364?s=128&d=identicon&r=PG", "display_name": "camino", "link": "https://stackoverflow.com/users/440403/camino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 37189887, "answer_count": 1, "score": 0, "last_activity_date": 1463063151, "creation_date": 1462994009, "last_edit_date": 1463001800, "question_id": 37171448, "link": "https://stackoverflow.com/questions/37171448/is-it-possible-to-define-user-defined-variable-in-visual-studio-debug-window", "title": "is it possible to define user-defined variable in visual studio debug window?", "body": "<p>For example, I want to check the following expression in debug watch window:</p>\n\n<pre><code>((MyClass1*)0xc56fbf0)-&gt;m_data1-&gt;m_data2\n</code></pre>\n\n<p>Is it possible to write something like:</p>\n\n<pre><code>v=0xc56fbf0\n((MyClass1*)v)-&gt;m_data1-&gt;m_data2\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 4, "creation_date": 1462993814, "post_id": 37171370, "comment_id": 61877419, "body": "Nope, still <code>delete []</code>"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "edited": false, "score": 1, "creation_date": 1462994174, "post_id": 37171370, "comment_id": 61877604, "body": "@milleniumbug: I think I understand the rationale behind your comment, but do you have a citation?"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1462995005, "post_id": 37171370, "comment_id": 61878060, "body": "It is about impossible to look for a dupe for this because of a sea of <i>&quot;How can I delete my array of pointers?&quot;</i> trash. :/"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462996844, "post_id": 37171370, "comment_id": 61879104, "body": "The interesting thing about this is that it&#39;s an array of <i>one</i> item. (That one item happens to be an array of 42 subitems, but that&#39;s almost irrelevant). Is <code>auto p = new X[1]</code> followed by <code>delete p;</code> defined behaviour?"}], "answers": [{"comments": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1462994708, "post_id": 37171600, "comment_id": 61877886, "body": "Thanks. I believe the <code>delete[]</code> is required because of the <code>[1]</code>. The <code>[42]</code> still seems to take effect."}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1462996573, "post_id": 37171600, "comment_id": 61878956, "body": "@jxh although the standard requires <code>delete[] x</code>, I don&#39;t think I&#39;ve seen <code>delete x</code> fail in practice. See <a href=\"http://ideone.com/U9Fd6f\" rel=\"nofollow noreferrer\">ideone.com/U9Fd6f</a> for example."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1463005564, "post_id": 37171600, "comment_id": 61883235, "body": "It is UB, and therefore should never be done. It <i>seems</i> to work in this case because it is an array of <i>one</i> element. (The fact that this one element is itself a subarray of 42 subelements is almost irrelevant). Because the top-level array is of <i>one</i> element, a call to <code>delete</code> can  behave the same as a call to <code>delete[]</code>, calling the same destructor. It might work equivalently until, of course, the UB demon decides to delete all your files"}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 8, "last_activity_date": 1462994541, "creation_date": 1462994541, "answer_id": 37171600, "question_id": 37171370, "link": "https://stackoverflow.com/questions/37171370/is-this-deletion-expected-to-destruct-each-array-object/37171600#37171600", "title": "Is this deletion expected to destruct each array object?", "body": "<p><code>delete[]</code> must be used for arrays and <code>delete</code> for non-arrays. Since <code>x</code> is a pointer to an array, you must use <code>delete[]</code>. The citation is [expr.delete]/2. The first Note makes this crystal clear.</p>\n\n<blockquote>\n  <p>If the operand has a class type, the operand is converted to a pointer type by calling the above-mentioned\n  conversion function, and the converted operand is used in place of the original operand for the remainder of\n  this section. In the first alternative (<em>delete object</em>), the value of the operand of <code>delete</code> may be a null pointer\n  value, a pointer to a non-array object created by a previous new-expression, or a pointer to a subobject (1.8)\n  representing a base class of such an object (Clause 10). If not, the behavior is undefined. In the second\n  alternative (<em>delete array</em>), the value of the operand of <code>delete</code> may be a null pointer value or a pointer\n  value that resulted from a previous array <em>new-expression.</em> If not, the behavior is undefined. [ <em>Note:</em> this\n  means that the syntax of the <em>delete-expression</em> must match the type of the object allocated by <code>new</code>, not\n  the syntax of the <em>new-expression.</em> \u2014 <em>end note</em> ] [ <em>Note:</em> a pointer to a <code>const</code> type can be the operand of a\n  <em>delete-expression;</em> it is not necessary to cast away the constness (5.2.11) of the pointer expression before it\n  is used as the operand of the <em>delete-expression.</em> \u2014 <em>end note</em> ]</p>\n</blockquote>\n"}], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "accepted_answer_id": 37171600, "answer_count": 1, "score": 2, "last_activity_date": 1462994576, "creation_date": 1462993736, "last_edit_date": 1462994576, "question_id": 37171370, "link": "https://stackoverflow.com/questions/37171370/is-this-deletion-expected-to-destruct-each-array-object", "title": "Is this deletion expected to destruct each array object?", "body": "<p>Suppose I use a variation of using <code>new</code> to return a pointer to an array:</p>\n\n<pre><code>class Type { /* ... */ };\n\ntypedef Type Type_42[1][42];\nType (*x)[42] = new Type_42;\n</code></pre>\n\n<p>Since I used <code>new</code> to create, I use <code>delete</code> to destroy:</p>\n\n<pre><code>delete x;\n</code></pre>\n\n<p>Is it expected that each of the destructors for the 42 objects will be called?</p>\n"}, {"tags": ["c++", "windows", "github", "cmake", "cmake-gui"], "comments": [{"owner": {"reputation": 2736, "user_id": 1174343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Cx7yr.jpg?s=128&g=1", "display_name": "x squared", "link": "https://stackoverflow.com/users/1174343/x-squared"}, "edited": false, "score": 0, "creation_date": 1462995567, "post_id": 37171361, "comment_id": 61878375, "body": "I am not sure if you are talking about finding a solution for your development process or for making releases or both? <a href=\"https://sourceforge.net/projects/msys2/\" rel=\"nofollow noreferrer\">msys2</a> can be used under windows to manage your required packages."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1462996635, "post_id": 37171361, "comment_id": 61878984, "body": "I hit the same problem lately, msys2 look great, but I prefer using native toolchain for windows developement."}, {"owner": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "edited": false, "score": 0, "creation_date": 1462996912, "post_id": 37171361, "comment_id": 61879134, "body": "I looked into msys, but I want it to be native. With msys it&#39;s even harder to compile for x64 and with proper unicode support."}, {"owner": {"reputation": 3600, "user_id": 3257826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a48f9eb4b2daef375c41862f88d8bc71?s=128&d=identicon&r=PG&f=1", "display_name": "Ray Donnelly", "link": "https://stackoverflow.com/users/3257826/ray-donnelly"}, "edited": false, "score": 0, "creation_date": 1463042732, "post_id": 37171361, "comment_id": 61896701, "body": "MSYS2 provides native and POSIX toolchains."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1463748973, "post_id": 37171361, "comment_id": 62210707, "body": "@GuillaumeRacicot The question is too broad, more details should be given."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1463752980, "post_id": 37171361, "comment_id": 62213639, "body": "Should I open another question for my similar problem then?"}, {"owner": {"reputation": 33511, "user_id": 321013, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/256c9d534302a138d5d1fe3ed833e217?s=128&d=identicon&r=PG", "display_name": "Martin Ba", "link": "https://stackoverflow.com/users/321013/martin-ba"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 4, "creation_date": 1463947135, "post_id": 37171361, "comment_id": 62269123, "body": "This question is indeed rather broad, in that it asks both about the dev side as well as the deployment side. @GuillaumeRacicot - given your bounty description, I&#39;d say another question with your details (export, etc.) would really make more sense."}, {"owner": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1464005667, "post_id": 37171361, "comment_id": 62290722, "body": "A make install on Windows is not intrinsically different from a make install on Linux. It creates a &quot;deployment&quot; version of a library, i.e. copying over the binaries, perhaps headers, etc. but leaves behind all the &quot;build&quot; cruft not necessary after deployment. If you generate a Visual Studio project it will also generate an INSTALL project which you can use as a target for &quot;deployment&quot;. The equivalent of &#39;make install&#39; is then to build the INSTALL target (or call &#39;msbuild INSTALL.vcxproj&#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "edited": false, "score": 0, "creation_date": 1463080975, "post_id": 37174578, "comment_id": 61923877, "body": "It doesn&#39;t seem to work. I don&#39;t know if I&#39;m doing something wrong or LibSourcery doesn&#39;t support this type of inclusion. I did include it in contrib folder as submodule, but I&#39;m still not sure if that&#39;s the right way to include a library on Unix platforms. Would it link to the installed library if it&#39;s available? How do it add includes?"}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "reply_to_user": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "edited": false, "score": 0, "creation_date": 1463081073, "post_id": 37174578, "comment_id": 61923943, "body": "@denisps cmake also support external projects in such way <a href=\"https://cmake.org/cmake/help/v3.0/module/ExternalProject.html\" rel=\"nofollow noreferrer\">cmake.org/cmake/help/v3.0/module/ExternalProject.html</a>"}, {"owner": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "edited": false, "score": 0, "creation_date": 1464118945, "post_id": 37174578, "comment_id": 62350228, "body": "This answer seems to be the closest. Unfortunately, LibSourcery seems to be broken and potentially abandoned. I would appreciate if you elaborate on how to take into account the case when I&#39;m linking to the library that is already installed on, for instance, Linux."}, {"owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "reply_to_user": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "edited": false, "score": 1, "creation_date": 1464120920, "post_id": 37174578, "comment_id": 62351281, "body": "@denisps In case of already installed library there is no universal answer. In the most simple case, when you work on <code>Linux</code>, headers of library in <code>&#47;usr&#47;include</code> and compiled code in <code>&#47;usr&#47;lib</code> you need just add <code>-llibname</code> into <code>target_link_libraries</code>. If something more complex, for example you want not only <code>Linux</code> support, or library install files in sub-directories of <code>&#47;usr&#47;lib</code> <code>&#47;usr&#47;include</code>, you need to use <code>find_package</code>, <code>find_library</code> and other stuff, and how you should handle this situtation depend on library, and fact that some one from cmake community work with it or not."}], "tags": [], "owner": {"reputation": 7560, "user_id": 1034749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2022f0caae119ed6232cf370bb9d9d3a?s=128&d=identicon&r=PG", "display_name": "fghj", "link": "https://stackoverflow.com/users/1034749/fghj"}, "is_accepted": true, "score": 1, "last_activity_date": 1463007255, "creation_date": 1463007255, "answer_id": 37174578, "question_id": 37171361, "link": "https://stackoverflow.com/questions/37171361/cmake-make-install-or-including-a-library-in-windows/37174578#37174578", "title": "CMake &quot;make install&quot; or including a library in windows", "body": "<p>You can create <code>git submodule</code> in your git repo with path for example\n<code>contrib/LibSourcery</code> and url to github repo of <code>LibSourcery</code>, because of <code>LibSourcery</code> uses <code>cmake</code> you just\nneed add such line into your <code>CMakeLists.txt</code>: <code>add_subdirectory(contrib/LibSourcery)</code></p>\n\n<p>So person who want to use your code, just do <code>git clone --recursive url</code>\nto get all of your code and dependencies, after that it run <code>cmake -G</code>, to create project for <code>IDE</code> of his choice (including MSVC++ of course),\nopen project in <code>IDE</code> and press build button, that's all. </p>\n"}, {"tags": [], "owner": {"reputation": 256, "user_id": 4376737, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5NOrP.jpg?s=128&g=1", "display_name": "ar1a", "link": "https://stackoverflow.com/users/4376737/ar1a"}, "is_accepted": false, "score": 1, "last_activity_date": 1464002291, "creation_date": 1464002291, "answer_id": 37389578, "question_id": 37171361, "link": "https://stackoverflow.com/questions/37171361/cmake-make-install-or-including-a-library-in-windows/37389578#37389578", "title": "CMake &quot;make install&quot; or including a library in windows", "body": "<p>Use <a href=\"http://babun.github.io\" rel=\"nofollow\">babun</a>. It's a wrapper for cygwin and it works perfectly for everything I need, even compiling with cmake.</p>\n\n<p>Alternatively, you could use <a href=\"https://premake.github.io/\" rel=\"nofollow\">premake</a>, which uses lua as a config system and works fine on windows.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7044046, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a181bcc8ad9f1b5b7d72b93f59d9ff57?s=128&d=identicon&r=PG", "display_name": "ramakarl", "link": "https://stackoverflow.com/users/7044046/ramakarl"}, "is_accepted": false, "score": 0, "last_activity_date": 1476902427, "last_edit_date": 1476902427, "creation_date": 1476901916, "answer_id": 40139053, "question_id": 37171361, "link": "https://stackoverflow.com/questions/37171361/cmake-make-install-or-including-a-library-in-windows/40139053#40139053", "title": "CMake &quot;make install&quot; or including a library in windows", "body": "<p>There is no elegant cross-platform way, since the idea of \"make install\" doesn't exist on Windows, therefore the use of cmake install is undefined there. For something which is supposed to help cross-platform, I feel this is a deficiency w cmake.</p>\n\n<p>My solution is to write a custom _INSTALL which takes the same args as cmake install and then on Linux it just calls install, and on Windows it does an add_command which does a post-build copy to the install paths, which accomplishes the same thing. Basically, _INSTALL behaves the way you expect a cross-platform install command to behave. Can share my _INSTALL func if there is interest.</p>\n\n<p>_INSTALL is placed nto a Helper.cmake, and included in all my CMakeList.txt for my projects, so all I need to do is call it and the generated lib/inc files magically appear for both win and linux.</p>\n"}], "owner": {"reputation": 121, "user_id": 2158715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3862c3397d4f52ff8248d069c5ea15c4?s=128&d=identicon&r=PG", "display_name": "denisps", "link": "https://stackoverflow.com/users/2158715/denisps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1953, "favorite_count": 2, "accepted_answer_id": 37174578, "answer_count": 3, "score": 11, "last_activity_date": 1476902427, "creation_date": 1462993698, "last_edit_date": 1463154624, "question_id": 37171361, "link": "https://stackoverflow.com/questions/37171361/cmake-make-install-or-including-a-library-in-windows", "title": "CMake &quot;make install&quot; or including a library in windows", "body": "<p>I'm trying to create an Open Source C++ project. I want it to be as easy to build as possible, but at the same time cross platform.\nI don't need gui or heavy libraries like boost or Qt, so I've settled on using GitHub, CMake, and LibSourcey.\nMy problem is, I can't find a way to make my project easy to build in windows, which is my development environment.\nHow can I \"make install\" a library in Windows for use in my project? Do I even have to install it in windows?\nIs it possible to download, build, and link it automatically?</p>\n\n<p>On windows, besides an installer, I also want to make a portable version, so don't want any hard coded library paths.</p>\n\n<p>I assume, on some platforms, like Linux, libraries are built separably and packaged up by maintainers. So I shouldn't just bundle up my own copies.</p>\n\n<p>So, my question is:\nHow can I set up a project that is cross platform and easy to build, and what are the best practices?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 327, "user_id": 4812773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24812be9bfcb835e5c688c667bbbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel L", "link": "https://stackoverflow.com/users/4812773/rachel-l"}, "edited": false, "score": 0, "creation_date": 1463003554, "post_id": 37171359, "comment_id": 61882447, "body": "So, <code>faceROI</code> is the ROI of one of the faces inside that frame, and the reason it&#39;s redeclaring each for loop iteration is because it&#39;s now looking at a different face in that same frame.   Are you trying to get an image with all of ROIs of faces in that frame? Or are you trying to compare all the faceROIs in one frame to all the faceROIs in the next frame?   If you&#39;re trying to compare all the faceROIs in one frame to the faceROIs in the second frame, setting up a global <code>Mat previousROI</code> and <code>clone</code>-ing it from <code>faceROI</code> after the imshows should work (eyes will still be there, though)"}, {"owner": {"reputation": 21, "user_id": 6090661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc446103fee7b1697b5c27fdf329cc44?s=128&d=identicon&r=PG&f=1", "display_name": "C.J Blue", "link": "https://stackoverflow.com/users/6090661/c-j-blue"}, "reply_to_user": {"reputation": 327, "user_id": 4812773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24812be9bfcb835e5c688c667bbbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel L", "link": "https://stackoverflow.com/users/4812773/rachel-l"}, "edited": false, "score": 0, "creation_date": 1463005577, "post_id": 37171359, "comment_id": 61883242, "body": "@RachelL  1. &quot;Are you trying to get an image with all of ROIs of faces in that frame?&quot; No, I just care about getting one at a time. 2. &quot;are you trying to compare all the faceROIs in one frame to all the faceROIs in the next frame?&quot; Not doing that either, but I will do it later, therefore I want to save the previous frame. 3. &quot;If you&#39;re trying to compare all the faceROIs in one frame to the faceROIs in the second frame, setting up a global Mat previousROI and clone-ing it from faceROI&quot; I will try to compare them later on, but first I need to save <b>one</b> previous frame. 4. eyes = I don&#39;t use it"}, {"owner": {"reputation": 21, "user_id": 6090661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc446103fee7b1697b5c27fdf329cc44?s=128&d=identicon&r=PG&f=1", "display_name": "C.J Blue", "link": "https://stackoverflow.com/users/6090661/c-j-blue"}, "reply_to_user": {"reputation": 327, "user_id": 4812773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24812be9bfcb835e5c688c667bbbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel L", "link": "https://stackoverflow.com/users/4812773/rachel-l"}, "edited": false, "score": 0, "creation_date": 1463005671, "post_id": 37171359, "comment_id": 61883288, "body": "@RachelL Therefore I don&#39;t think cloning and showing is a good solution as it doesn&#39;t solve my problem. The previous image/frame must be saved somehow."}, {"owner": {"reputation": 327, "user_id": 4812773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a24812be9bfcb835e5c688c667bbbc4b?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel L", "link": "https://stackoverflow.com/users/4812773/rachel-l"}, "edited": false, "score": 0, "creation_date": 1463006977, "post_id": 37171359, "comment_id": 61883698, "body": "@c-j-blue Would storing each faceROI in a vector of Mats be more like what you&#39;re looking for? You could <code>push_back</code> each faceROI into it, and then iterate through the vector later to grab the ones you want. (<a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/vector/vector</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6090661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc446103fee7b1697b5c27fdf329cc44?s=128&d=identicon&r=PG&f=1", "display_name": "C.J Blue", "link": "https://stackoverflow.com/users/6090661/c-j-blue"}, "edited": false, "score": 0, "creation_date": 1463048459, "post_id": 37174905, "comment_id": 61901065, "body": "Tried it out, it works but not really as I want, it only gives the previous frame every 5 detection or so."}, {"owner": {"reputation": 2052, "user_id": 4434679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vrsg.png?s=128&g=1", "display_name": "BHawk", "link": "https://stackoverflow.com/users/4434679/bhawk"}, "reply_to_user": {"reputation": 21, "user_id": 6090661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc446103fee7b1697b5c27fdf329cc44?s=128&d=identicon&r=PG&f=1", "display_name": "C.J Blue", "link": "https://stackoverflow.com/users/6090661/c-j-blue"}, "edited": false, "score": 0, "creation_date": 1463174176, "post_id": 37174905, "comment_id": 61969824, "body": "Not knowing your full intent, I&#39;ve added arbitrary conditions of <code>*_faces.size() &gt; 0</code>. Perhaps that (or any other condition you may have included) is affecting how / when your code executes. That is a best guess, it is difficult to debug your code without seeing it."}], "tags": [], "owner": {"reputation": 2052, "user_id": 4434679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8Vrsg.png?s=128&g=1", "display_name": "BHawk", "link": "https://stackoverflow.com/users/4434679/bhawk"}, "is_accepted": false, "score": 1, "last_activity_date": 1463009524, "creation_date": 1463009524, "answer_id": 37174905, "question_id": 37171359, "link": "https://stackoverflow.com/questions/37171359/haar-detection-save-mat-of-image-in-order-to-get-and-show-previous-frame/37174905#37174905", "title": "Haar detection - save Mat of image in order to get and show previous frame", "body": "<p>You might have and easier time if you don't split the detect/display into a separate function. I've modified the OpenCV documentation code below. Keep in mind I haven't compiled or run this so there may be some errors, but it should give you an idea of a different way to address the issue.</p>\n\n<pre><code>/** @function main */\nint main( int argc, const char** argv )\n{\n    CvCapture* capture;\n    Mat frame;\n\n    //-- 1. Load the cascades\n    if( !face_cascade.load( face_cascade_name ) ){ printf(\"--(!)Error loading\\n\"); return -1; };\n    if( !eyes_cascade.load( eyes_cascade_name ) ){ printf(\"--(!)Error loading\\n\"); return -1; };\n\n    //-- 2. Read the video stream\n    capture = cvCaptureFromCAM( -1 );\n    if( capture )\n    {\n        //store faces here\n        std::vector&lt;Mat&gt; prev_faces;\n        std::vector&lt;Mat&gt; current_faces;\n\n        while( true )\n        {\n            frame = cvQueryFrame( capture );\n\n            //-- 3. Apply the classifier to the frame\n            if( !frame.empty() )\n            {\n                std::vector&lt;Rect&gt; faces;\n                Mat frame_gray;\n\n                cvtColor( frame, frame_gray, CV_BGR2GRAY );\n                equalizeHist( frame_gray, frame_gray );\n\n                //-- Detect faces\n                face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );\n\n                for( size_t i = 0; i &lt; faces.size(); i++ )\n                {\n                    Mat faceROI = frame_gray( faces[i] );\n                    current_faces.push_back(faceROI); //adds all of the current detections to a vector\n                }\n\n                if (prev_faces.size() &gt; 0 &amp;&amp; current_faces.size() &gt; 0)\n                {\n                    //  do stuff with prev_faces and current_faces\n                    //  for(int i = 0; i &lt; prev_faces.size(); i++){\n                    //      imshow(\"previous\", prev_faces[i])\n                    //  }\n                    //  for(int i = 0; i &lt; prev_faces.size(); i++){\n                    //      imshow(\"current\",  current_faces[i])\n                    //  }\n                    //  imshow(\"stuff\", other_cool_Mats_I_made_by_analysing_and_comparing_prev_and_current)\n                }\n                prev_faces = current_faces;\n                current_faces.erase(current_faces.begin(), current_faces.end());\n\n            else\n            { printf(\" --(!) No captured frame -- Break!\"); break; }\n\n            int c = waitKey(10);\n            if( (char)c == 'c' ) { break; }\n        }\n    }\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6090661, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc446103fee7b1697b5c27fdf329cc44?s=128&d=identicon&r=PG&f=1", "display_name": "C.J Blue", "link": "https://stackoverflow.com/users/6090661/c-j-blue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1463009524, "creation_date": 1462993691, "last_edit_date": 1462994320, "question_id": 37171359, "link": "https://stackoverflow.com/questions/37171359/haar-detection-save-mat-of-image-in-order-to-get-and-show-previous-frame", "title": "Haar detection - save Mat of image in order to get and show previous frame", "body": "<p>I am using Haar detection in my hobby project, the detection is done on a video stream. Once Haar detects something I imshow it, this is how it looks like: <code>Mat faceROI = frame_gray(faces[i]); \nimshow( \"Detection\", faceROI);</code></p>\n\n<p>While the video is running I am getting detections and the <code>Mat</code> is getting updated/overwritten with a new image of the object. What I want to do now is to save <code>Mat</code> so when a new detections occure I get both the <strong>previous</strong> and current frame. I'll guess I have to save the Mat in some way and then update it so <em>current -> previous</em> and so on.</p>\n\n<pre><code>imshow( \"Previous detection\", previousROI);` &lt;- want to be able to do this\n</code></pre>\n\n<p>In case you want to see the whole code, I am doing this: <a href=\"http://docs.opencv.org/2.4/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html\" rel=\"nofollow\">http://docs.opencv.org/2.4/doc/tutorials/objdetect/cascade_classifier/cascade_classifier.html</a></p>\n\n<p>Help is much appreciated!</p>\n"}, {"tags": ["c++", "xcode", "zeromq", "search-path"], "comments": [{"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462994377, "post_id": 37171348, "comment_id": 61877717, "body": "Does specifying the full path work?  Check the permissions?  Got the slashes the right way around?  Maybe post an ls -l, the exact error message and the relevant bit of the source file just in case..."}, {"owner": {"reputation": 549, "user_id": 689682, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/a19Lz.jpg?s=128&g=1", "display_name": "MegaMiley", "link": "https://stackoverflow.com/users/689682/megamiley"}, "reply_to_user": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462994446, "post_id": 37171348, "comment_id": 61877747, "body": "What should the permissions be? The full path yields the same result and I&#39;m sure I used the right / (\\ to me is escaping the next character unlike the regular / in Windows)"}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462994563, "post_id": 37171348, "comment_id": 61877805, "body": "Well permissions need to make sure Xcode can read it - they are probably fine...if you can read it Xcode probably can unless there&#39;s something unusual going on."}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462994633, "post_id": 37171348, "comment_id": 61877845, "body": "Oh - you can get the full compiler output from the Log window in Xcode. I think that should show what&#39;s being passed to the compiler ... let&#39;s see that... (<a href=\"http://stackoverflow.com/questions/30060898/xcode6-how-to-see-build-command-and-log\" title=\"xcode6 how to see build command and log\">stackoverflow.com/questions/30060898/&hellip;</a>)"}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462994979, "post_id": 37171348, "comment_id": 61878045, "body": "Just installed zmq here and #include &quot;/usr/local/include/zmq.h&quot; works - although i get a bunch of namespace related errors - looks like the version i installed didn&#39;t include the c++ bindings which have moved to a separate project."}, {"owner": {"reputation": 549, "user_id": 689682, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/a19Lz.jpg?s=128&g=1", "display_name": "MegaMiley", "link": "https://stackoverflow.com/users/689682/megamiley"}, "reply_to_user": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 1, "creation_date": 1462995310, "post_id": 37171348, "comment_id": 61878223, "body": "I just re-created the entire project and now it does work.. Really odd why it didn&#39;t before but at least it works now"}, {"owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "edited": false, "score": 0, "creation_date": 1462995459, "post_id": 37171348, "comment_id": 61878310, "body": "Awesome.  :)  Stuck bad.  Working good!"}], "answers": [{"comments": [{"owner": {"reputation": 549, "user_id": 689682, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/a19Lz.jpg?s=128&g=1", "display_name": "MegaMiley", "link": "https://stackoverflow.com/users/689682/megamiley"}, "edited": false, "score": 0, "creation_date": 1462994826, "post_id": 37171670, "comment_id": 61877964, "body": "I already changed this variable to yes but that yielded no difference, it&#39;s still at yes right now"}], "tags": [], "owner": {"reputation": 151, "user_id": 5859163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78eb5032f5084d928656ab7eaa9a2467?s=128&d=identicon&r=PG", "display_name": "Yoan", "link": "https://stackoverflow.com/users/5859163/yoan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462994775, "creation_date": 1462994775, "answer_id": 37171670, "question_id": 37171348, "link": "https://stackoverflow.com/questions/37171348/xcode-unable-to-find-zmq-h-even-though-its-in-usr-local-include-and-the-header/37171670#37171670", "title": "XCode unable to find zmq.h even though it&#39;s in /usr/local/include and the header search path", "body": "<p>Check your build configuration for Search Path -> Always search for user paths and under your project name should say \"yes\" </p>\n"}], "owner": {"reputation": 549, "user_id": 689682, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/a19Lz.jpg?s=128&g=1", "display_name": "MegaMiley", "link": "https://stackoverflow.com/users/689682/megamiley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 855, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462995276, "creation_date": 1462993645, "last_edit_date": 1462995276, "question_id": 37171348, "link": "https://stackoverflow.com/questions/37171348/xcode-unable-to-find-zmq-h-even-though-its-in-usr-local-include-and-the-header", "title": "XCode unable to find zmq.h even though it&#39;s in /usr/local/include and the header search path", "body": "<p>I just installed the ZMQ library via brew and I can see the files in /usr/local/include and /usr/local/bin, however when I add those paths to the Header Search Path and Library Search Path in XCode I am unable to use #include as it continues to tell me it can't find the find.</p>\n\n<p>Even when I add /usr/local/Cellar/zeromq/4.1.4/include (where the actual library is installed) to the Header Search Path it still won't find zmq.h even though the file is present in there.</p>\n\n<p>What should I do?</p>\n\n<p>Edit:</p>\n\n<p>The full source is simply a example file from ZMQ themselfe,</p>\n\n<pre><code>//\n//  Hello World client in C++\n//  Connects REQ socket to tcp://localhost:5555\n//  Sends \"Hello\" to server, expects \"World\" back\n//\n#include &lt;zmq.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nint main ()\n{\n    //  Prepare our context and socket\n    zmq::context_t context (1);\n    zmq::socket_t socket (context, ZMQ_REQ);\n\n    std::cout &lt;&lt; \"Connecting to hello world server\u2026\" &lt;&lt; std::endl;\n    socket.connect (\"tcp://localhost:5555\");\n\n    //  Do 10 requests, waiting each time for a response\n    for (int request_nbr = 0; request_nbr != 10; request_nbr++) {\n        zmq::message_t request (5);\n        memcpy (request.data (), \"Hello\", 5);\n        std::cout &lt;&lt; \"Sending Hello \" &lt;&lt; request_nbr &lt;&lt; \"\u2026\" &lt;&lt; std::endl;\n        socket.send (request);\n\n        //  Get the reply.\n        zmq::message_t reply;\n        socket.recv (&amp;reply);\n        std::cout &lt;&lt; \"Received World \" &lt;&lt; request_nbr &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The exact error is simply \"<strong>lexical or Preprocessor issue, 'zmq.h' file not found main.cpp</strong>\"</p>\n\n<pre><code>CompileC /Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/Objects-normal/x86_64/main.o ndovTest/main.cpp normal x86_64 c++ com.apple.compilers.llvm.clang.1_0.compiler\n    cd /Users/zezioen/stack/Projecten/CPP/ndovTest\n    export LANG=en_US.US-ASCII\n    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x c++ -arch x86_64 -fmessage-length=0 -fdiagnostics-show-note-include-stack -fmacro-backtrace-limit=0 -std=gnu++11 -stdlib=libc++ -fmodules -gmodules -fmodules-cache-path=/Users/zezioen/Library/Developer/Xcode/DerivedData/ModuleCache -fmodules-prune-interval=86400 -fmodules-prune-after=345600 -fbuild-session-file=/Users/zezioen/Library/Developer/Xcode/DerivedData/ModuleCache/Session.modulevalidation -fmodules-validate-once-per-build-session -Wnon-modular-include-in-framework-module -Werror=non-modular-include-in-framework-module -Wno-trigraphs -fpascal-strings -O0 -fno-common -Wno-missing-field-initializers -Wno-missing-prototypes -Werror=return-type -Wunreachable-code -Werror=deprecated-objc-isa-usage -Werror=objc-root-class -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wno-missing-braces -Wparentheses -Wswitch -Wunused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wconditional-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wconstant-conversion -Wint-conversion -Wbool-conversion -Wenum-conversion -Wshorten-64-to-32 -Wno-newline-eof -Wno-c++11-extensions -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk -fasm-blocks -fstrict-aliasing -Wdeprecated-declarations -Winvalid-offsetof -mmacosx-version-min=10.11 -g -fvisibility-inlines-hidden -Wno-sign-conversion -I/Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/ndovTest.hmap -I/Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Products/Debug/include -Iusr/local/include -I/Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/DerivedSources/x86_64 -I/Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/DerivedSources -F/Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Products/Debug -MMD -MT dependencies -MF /Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/Objects-normal/x86_64/main.d --serialize-diagnostics /Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/Objects-normal/x86_64/main.dia -c /Users/zezioen/stack/Projecten/CPP/ndovTest/ndovTest/main.cpp -o /Users/zezioen/Library/Developer/Xcode/DerivedData/ndovTest-bktygajikpscajfbqwlwhyjknvzq/Build/Intermediates/ndovTest.build/Debug/ndovTest.build/Objects-normal/x86_64/main.o\n\n/Users/zezioen/stack/Projecten/CPP/ndovTest/ndovTest/main.cpp:6:10: fatal error: 'zmq.h' file not found\n#include &lt;zmq.h&gt;\n         ^\n1 error generated.\n</code></pre>\n\n<p>Edit 2:</p>\n\n<p>I have no idea what happened but I just re-created the entire project, did the exact same steps as before and now it compiles and runs like it should.</p>\n\n<p>The project I used was from a while ago so there may have been something else that was causing issues.</p>\n"}, {"tags": ["c++", "vector", "data-structures", "stl", "graph-theory"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1462993546, "post_id": 37171266, "comment_id": 61877283, "body": "Maybe think about what <code>std::vector&lt;ii&gt;(10)</code> means."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1462993683, "post_id": 37171266, "comment_id": 61877353, "body": "Maybe you get a segmentation fault because you haven&#39;t reserved memory for G[u]."}], "answers": [{"comments": [{"owner": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462995284, "post_id": 37171551, "comment_id": 61878209, "body": "I want to know what is the problem to my answer? Could anybody give me a reason to these down votes?"}], "tags": [], "owner": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "is_accepted": false, "score": -1, "last_activity_date": 1462995033, "last_edit_date": 1462995033, "creation_date": 1462994395, "answer_id": 37171551, "question_id": 37171266, "link": "https://stackoverflow.com/questions/37171266/declaring-a-vectorvectorpairint-int-with-a-specific-size-and-inserting-ele/37171551#37171551", "title": "Declaring a vector&lt;vector&lt;pair&lt;int, int&gt;&gt; with a specific size and inserting elements?", "body": "<p>segmentation fault is because of that <code>u &gt;= G.size()</code> and is not by the push_back().</p>\n\n<p>You need first resize you G to the number of the vertexes of the graph, after that, you can do your push back as long as <code>u &lt; G.size()</code></p>\n\n<p>The corrected code should like this:</p>\n\n<pre><code>vector&lt; vector&lt;ii&gt; &gt; adj(10 /* number of vertexes in the graph */);\nfor (int i=0; i &lt; E-1; i++)\n{\n    cin &gt;&gt; p &gt;&gt; q &gt;&gt; l;\n    // make sure both p &lt; adj.size() and q &lt; adj.size()\n    adj[p].push_back(ii(q, l));\n    adj[q].push_back(ii(p, l));\n} \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 2, "last_activity_date": 1462995002, "last_edit_date": 1462995002, "creation_date": 1462994446, "answer_id": 37171566, "question_id": 37171266, "link": "https://stackoverflow.com/questions/37171266/declaring-a-vectorvectorpairint-int-with-a-specific-size-and-inserting-ele/37171566#37171566", "title": "Declaring a vector&lt;vector&lt;pair&lt;int, int&gt;&gt; with a specific size and inserting elements?", "body": "<p>Somehow you are contradicting yourself: When creating a vector you can either pass the number of elements in the constructor or you start with an empty vector and push the elements you want to have in the vector. If you start with size 10 and then push 10 more there are 20. They way around is to either use</p>\n\n<pre><code>std::vector&lt;T&gt; vect(10);\nfor (size_t i=0;i&lt;10;i++){\n    vect[i] = whatever;\n}\n</code></pre>\n\n<p>or </p>\n\n<pre><code>std::vector&lt;T&gt; vect;\nfor (size_t i=0;i&lt;10;i++){\n     vect.push_back(whatever);\n}\n</code></pre>\n\n<p>Maybe you are confusing the size of the vector with its capacity. This you can set via:</p>\n\n<pre><code>std::vector&lt;T&gt; vect;\nvect.reserve(10);\nfor (size_t i=0;i&lt;10;i++){\n     vect.push_back(whatever);\n}\n</code></pre>\n\n<p>For your vector of vectors you have to make sure, that there is a vector at that index before you start pushing elements into it:</p>\n\n<pre><code>std::vector&lt;std::vector&lt;T&gt;&gt; mat;\nfor (size_t i=0;i&lt;10;i++){\n    mat.push_back(std::vector&lt;T&gt;());\n    for (size_t j=0;j&lt;10;j++){\n        mat[i].push_back(whatever);\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": false, "score": 0, "last_activity_date": 1462996965, "creation_date": 1462996965, "answer_id": 37172261, "question_id": 37171266, "link": "https://stackoverflow.com/questions/37171266/declaring-a-vectorvectorpairint-int-with-a-specific-size-and-inserting-ele/37172261#37172261", "title": "Declaring a vector&lt;vector&lt;pair&lt;int, int&gt;&gt; with a specific size and inserting elements?", "body": "<p>If you know in advance your data structure size, you can declare it using the proper constructor:</p>\n\n<pre><code>vector&lt;vector&lt;pair&lt;int,int&gt;&gt;&gt; G(10);\n</code></pre>\n\n<p>While the program is reading data to fill that structure, it can either check if the inputted indeces are out of bounds or resize the vector accordingly. For example this test program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing std::vector;\nusing std::pair;\nusing std::cout;\nusing std::cin;\n\nint main() {\n\n    vector&lt;vector&lt;pair&lt;int,int&gt;&gt;&gt; G(5);\n    //  insufficient initial size  ^^^\n\n    int p, q, l;\n    while ( cin &gt;&gt; p &gt;&gt; q &gt;&gt; l )\n    {\n        // resize the vector to avoid index out of bound\n        int m = std::max(p, q) + 1;\n        if ( m &gt; G.size() )\n            G.resize(m);\n\n        G[p].push_back(std::make_pair(q, l));\n        G[q].push_back(std::make_pair(p, l));\n    } \n\n    for( int r = 0; r &lt; G.size(); ++r )\n    {\n        for ( int c = 0; c &lt; G[r].size(); ++c ) {\n            cout &lt;&lt; r &lt;&lt; \", \" &lt;&lt; c &lt;&lt; \": \" &lt;&lt; G[r][c].first &lt;&lt; ' ' &lt;&lt; G[r][c].second &lt;&lt; '\\n';\n        }\n    } \n\n    return 0;\n}\n</code></pre>\n\n<p>With an input like:</p>\n\n<pre><code>1 2 3\n4 5 6\n7 8 9\n8 7 6\n5 4 3\n2 1 0\n</code></pre>\n\n<p>Gives this output:</p>\n\n<pre><code>1, 0: 2 3\n1, 1: 2 0\n2, 0: 1 3\n2, 1: 1 0\n4, 0: 5 6\n4, 1: 5 3\n5, 0: 4 6\n5, 1: 4 3\n7, 0: 8 9\n7, 1: 8 6\n8, 0: 7 9\n8, 1: 7 6\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 4895706, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a14ea5faaf191928934f3943e359ed7f?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kusnoor", "link": "https://stackoverflow.com/users/4895706/abhishek-kusnoor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9610, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1462996965, "creation_date": 1462993403, "question_id": 37171266, "link": "https://stackoverflow.com/questions/37171266/declaring-a-vectorvectorpairint-int-with-a-specific-size-and-inserting-ele", "title": "Declaring a vector&lt;vector&lt;pair&lt;int, int&gt;&gt; with a specific size and inserting elements?", "body": "<p>I want to represent a graph data structure and I am using vector of vector of pairs in c++ stl. Example:</p>\n\n<pre><code>vector&lt;vector&lt;pair&lt;int, int&gt;&gt;&gt; G;\n</code></pre>\n\n<p>Now I can do, <code>G[u].push_back(make_pair(v, w));</code> </p>\n\n<p>The problem: I need to specify this data structure a size. If I don't I get a segmentation fault when I try to push elements to this data structure. If I do give a size like:</p>\n\n<pre><code>vector&lt; vector&lt;ii&gt; &gt; adj(10, std::vector&lt;ii&gt;(10));\n</code></pre>\n\n<p>The problem now is the first 10 pairs of vector are initialized to zero. If I push back an element now, it gets pushed to the 11th position. The first 10 being 0s. I don't want to do this. I want to insert elements in the order I need. A snippet to give you an idea about what I am trying to do:</p>\n\n<pre><code> for(int i=0;i&lt;E-1;i++)\n        {\n            cin &gt;&gt; p &gt;&gt; q &gt;&gt; l;\n            adj[p].push_back(ii(q, l));\n            adj[q].push_back(ii(p, l));\n        } \n</code></pre>\n\n<p>The output for the above would be 10 zeros followed by the values pushed. Any way to get around this?</p>\n"}, {"tags": ["c++", "windows", "winapi", "registry"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1462994746, "post_id": 37171240, "comment_id": 61877916, "body": "Is your program 32 or 64 bit.  Under 64 bit windows there is a separate set of registry keys for 32 bit programs.  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724072(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1462994842, "post_id": 37171240, "comment_id": 61877971, "body": "I am running a 64 bit version of Windows, but I do not know what my program is...? I am compiling in code::blocks with gcc"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1462995006, "post_id": 37171240, "comment_id": 61878061, "body": "The current version of code::blocks (16.01) in &quot;project build options&quot; has switches for 32 or 64 bit build."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1462995317, "post_id": 37171240, "comment_id": 61878226, "body": "If a 32bit app wants to access a 64bit Registry key, it need to use the <code>KEY_WOW64_64KEY</code> flag when opening the key. Likewise, use <code>KEY_WOW64_32KEY</code> in a 64bit process to access a 32bit key. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384232.aspx\" rel=\"nofollow noreferrer\">Registry Redirector</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384129.aspx\" rel=\"nofollow noreferrer\">Accessing an Alternate Registry View</a> for more details"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 4, "creation_date": 1462995521, "post_id": 37171240, "comment_id": 61878350, "body": "Also, your code is leaking the <code>HKEY</code> handle if <code>RegSetValueEx()</code> fails. And you are passing <code>char*</code> data to <code>RegSetValueEx()</code>, so you should use <code>RegSetValueExA()</code> directly instead of the <code>TCHAR</code> version of <code>RegSetValueEx()</code>."}], "owner": {"reputation": 3440, "user_id": 1226843, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/txrOm.jpg?s=128&g=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/1226843/matthew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462996965, "creation_date": 1462993307, "last_edit_date": 1462994967, "question_id": 37171240, "link": "https://stackoverflow.com/questions/37171240/attempting-to-set-registry-key", "title": "Attempting to set registry key", "body": "<p>I am attempting to set a basic registry key name/value pair. I run both regedit as Administrator and I run the program as an Administrator, but the key does not reflect in the regedit view. What is strange is that I successfully hit all the appropriate conditionals...</p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif // UNICODE\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\n\nINT WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR lpCmdLine, INT nCmdShow)\n{\n    HKEY key;\n\n    if(RegOpenKey(HKEY_LOCAL_MACHINE, TEXT(\"Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\"), &amp;key) != ERROR_SUCCESS)\n    {\n        cout&lt;&lt;\"Unable to open reigstry key\"&lt;&lt;endl;\n    }\n    else\n    {\n        cout&lt;&lt;\"Registry key opened...\"&lt;&lt;endl;\n        cout&lt;&lt;key;\n    }\n\n    if(RegSetValueEx(key, TEXT(\"value_name\"),0,REG_SZ, (LPBYTE)\"value_data\",strlen(\"value_data\")*sizeof(char)) != ERROR_SUCCESS)\n    {\n        cout&lt;&lt;\"unable to set key\"&lt;&lt;endl;\n    }\n    else\n    {\n        cout&lt;&lt;\"Set the key\"&lt;&lt;endl;\n        RegCloseKey(key);\n    }\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "ctypes"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1462993825, "post_id": 37171226, "comment_id": 61877428, "body": "You&#39;re certain the initialization methods run before the threads reading the data do?  The threads only read the data and don&#39;t modify it?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1462993990, "post_id": 37171226, "comment_id": 61877515, "body": "Why do you think the initialization is the problem? Are you modifying the <code>map</code> in one thread and reading it in another? If yes, you need to protect it using a mutex. And why are you <code>new</code>ing the <code>map</code>? <code>static map&lt;string, Airport*&gt; iata_airports; return iata_airports;</code> works too."}, {"owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "edited": false, "score": 0, "creation_date": 1462995308, "post_id": 37171226, "comment_id": 61878222, "body": "<code>getIataAirports</code>  doesn&#39;t seem a thread-safe method; are multiple threads calling it ? Why create the map every time it is called ?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "edited": false, "score": 0, "creation_date": 1462995700, "post_id": 37171226, "comment_id": 61878443, "body": "@perencia - <code>iata_airports</code> is <code>static</code>, so it only gets initialized the first time the function is called. That&#39;s threadsafe starting with C++11, and maybe with some compilers before then."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1462998225, "post_id": 37171226, "comment_id": 61879814, "body": "minimal complete example please?"}, {"owner": {"reputation": 549, "user_id": 931325, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d54448b92185517bc2143d2561d4a5d0?s=128&d=identicon&r=PG", "display_name": "monostop", "link": "https://stackoverflow.com/users/931325/monostop"}, "edited": false, "score": 0, "creation_date": 1463000066, "post_id": 37171226, "comment_id": 61880802, "body": "The map is not modified after initialisation so it should be thread safe. I&#39;ll try to make a minimal complete example tomorrow (though it&#39;s quite hard to mimic the runtime behaviour as its being called in a multithreaded Python web server)."}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "edited": false, "score": 0, "creation_date": 1463008903, "post_id": 37171226, "comment_id": 61884246, "body": "You could have problems if two threads call <code>getAirportByIATA</code> at the same time. While one is constructing a new map, the other is returning the static one just created. As suggested, in C++11 static initialization is thread safe, just do it as: <code>static map&lt;string, Airport*&gt; iata_airports;</code> otherwise you&#39;ll end up having problems."}, {"owner": {"reputation": 1401, "user_id": 2737046, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5gIpP.jpg?s=128&g=1", "display_name": "perencia", "link": "https://stackoverflow.com/users/2737046/perencia"}, "edited": false, "score": 0, "creation_date": 1463035528, "post_id": 37171226, "comment_id": 61892099, "body": "@dau_sarma isn&#39;t the initialization done just once?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1463059016, "post_id": 37171226, "comment_id": 61908815, "body": "You can have <code>map&lt;string, Airport*&gt;</code> as a global variable, there is no apparent reason to construct it on the first call."}, {"owner": {"reputation": 549, "user_id": 931325, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d54448b92185517bc2143d2561d4a5d0?s=128&d=identicon&r=PG", "display_name": "monostop", "link": "https://stackoverflow.com/users/931325/monostop"}, "edited": false, "score": 0, "creation_date": 1463059904, "post_id": 37171226, "comment_id": 61909526, "body": "I actually used global variables first but ran into the &#39;static initialisation order fiasco&#39;: <a href=\"https://isocpp.org/wiki/faq/ctors#static-init-order\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/ctors#static-init-order</a>"}, {"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 0, "creation_date": 1463216970, "post_id": 37171226, "comment_id": 61979665, "body": "I&#39;m not sure i fully understand the situation: You are calling C++ code from a multithreaded Python program. Are you then using any threads inside the C++ code? I can vaguely remember mixing Python and C++ threads causing me some trouble once."}], "owner": {"reputation": 549, "user_id": 931325, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d54448b92185517bc2143d2561d4a5d0?s=128&d=identicon&r=PG", "display_name": "monostop", "link": "https://stackoverflow.com/users/931325/monostop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1463060205, "creation_date": 1462993241, "last_edit_date": 1463060205, "question_id": 37171226, "link": "https://stackoverflow.com/questions/37171226/static-initializations-in-multithreaded-program", "title": "Static initializations in multithreaded program", "body": "<p>I've come across a wierd problem porting a shared library from windows to linux (CentOS 7.2). </p>\n\n<p>The library is used in a python web app and is being run in a multithreaded environment.</p>\n\n<p>There are no problems with the library when I run it on windows (compiled with visual studio 2015) but it crashes (segfaults) on linux when run with several threads. I could not reproduce the crash on linux with only one thread.</p>\n\n<p>The library loads data into maps in initialization methods. Later, when the other threads tries to access the maps it cannot read the memory the maps are pointing to.</p>\n\n<p>The following is one of the methods used to access the maps. The idea is that the first time it is called it initialize the map which is then populated with data. For the consecutive calls it simply returns a pointer to the map and the data can be extracted. </p>\n\n<pre><code>map&lt;string, Airport*&gt;&amp; getIataAirports (){\n    static auto iata_airports = new map&lt;string, Airport*&gt;;\n    return *iata_airports;\n}\n</code></pre>\n\n<p>When the thread enters this method it all looks well and good.</p>\n\n<pre><code>(gdb)p *iata_airports\n$1 = std::map with 8763 elements = {[\"ARN\"] = 0x7f34d0b3b8d8,...\n</code></pre>\n\n<p>But in the method where it gets used it doesnt work:</p>\n\n<pre><code>airport_t* getAirportByIATA(const char *iata) {\n    string iata_s{iata};\n    auto it = getIataAirports().find(iata_s);\n    if (it != getIataAirports().end())\n        return AS_C_AIRPORT(it-&gt;second);\n    else\n        return nullptr;\n}\n</code></pre>\n\n<p>Debugging through the code the find method returns an iterator which is not the end of the map but the value of the it->second is a bogus value. </p>\n\n<pre><code>(gdb)p it\n$2 = {first =\"ARN\", second = }\n\n(gdb) p &amp;(it-&gt;second)\nAttempt to take address of value not located in memory.\n</code></pre>\n\n<p>What could be the reason for this behavour? Note again that it works perfectly on windows (and singlethreaded in linux).</p>\n\n<p>On linux the library was compiled (without warnings) with g++ 4.8.5 and the following flags.\n-std=c++11 -Wall -Wextra -pthread -g -O2</p>\n\n<p>And it is loaded dynamically with python's ctype cdll.loadLibrary method.</p>\n\n<p>Any hints on how to continue debugging this behaviour is greatly appreciated!</p>\n\n<p><strong>Update</strong>:</p>\n\n<p>Thanks for all suggestions so far.</p>\n\n<p>I haven't been able to reproduce this error in pure c++. I tried calling the initialize method in a thread, wait for it until it's complete, and then access the library in a different thread and it works without problems. </p>\n\n<p>I now think it's related to the library being loaded in a python thread.</p>\n\n<p>The webserver handles each requests in separate thread. The library is initialized lazily meaning it gets loaded when used the first time. Because of this design the library will then be loaded and initialized in a thread handling the first response to the server (i.e., not in the main thread). Then, for some reason, when the next thread is going to access data the process crashes. Again only on linux, it works fine on windows. I will compile a python 2.7.11 version on linux and see if it could be python versions that is the culprit here.</p>\n\n<p><strong>Update 2</strong></p>\n\n<p>I should add that I manage to get it working by initialising the library in the main thread of the webserver. I still want to figure out why it doesn't work the way it does on windows though.</p>\n"}, {"tags": ["c++", "cplex"], "answers": [{"tags": [], "owner": {"reputation": 939, "user_id": 6312818, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-exa9fGlNwbI/AAAAAAAAAAI/AAAAAAAAHQ8/CXKe0oTPiYc/photo.jpg?sz=128", "display_name": "Eyal Cinamon", "link": "https://stackoverflow.com/users/6312818/eyal-cinamon"}, "is_accepted": false, "score": 0, "last_activity_date": 1462995170, "creation_date": 1462995170, "answer_id": 37171777, "question_id": 37171155, "link": "https://stackoverflow.com/questions/37171155/print-an-ilonumarray-to-a-file-inside-an-incumbent-callback-c/37171777#37171777", "title": "Print an IloNumArray to a file inside an Incumbent Callback (C++)", "body": "<p>IloNumArray has a getSize() member that should tell you how many elements are in it.</p>\n"}], "owner": {"reputation": 13, "user_id": 6301455, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Z1h2XjLRORY/AAAAAAAAAAI/AAAAAAAAAPM/QUd2TxmYytQ/photo.jpg?sz=128", "display_name": "Javier", "link": "https://stackoverflow.com/users/6301455/javier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462995170, "creation_date": 1462992974, "last_edit_date": 1462993882, "question_id": 37171155, "link": "https://stackoverflow.com/questions/37171155/print-an-ilonumarray-to-a-file-inside-an-incumbent-callback-c", "title": "Print an IloNumArray to a file inside an Incumbent Callback (C++)", "body": "<p>I'm trying to print an <code>IloNumArray</code> to a file using <code>fprintf()</code>. The problem is that I don't know the length of the Array since it's filled by a <code>getValues()</code> method inside an Incumbent Callback.</p>\n\n<p>The code of the Callback where I'm having the problem is the following one:</p>\n\n<pre><code>ILOINCUMBENTCALLBACK3(MyFirstcallback,\n                  IloCplex, cplex,\n                  IloInt, contador,\n                  IloNumVarArray, varenteras){\nint i;\nint length=0;\nIloNum CurrentInc = MAX_COL;\nIloNum BestTime = 0;\nIloNum BestObj = MAX_COL;\nIloNumArray BestSol(varenteras.getEnv());\n\nIloNum FirstTime = 0;\nIloNum FirstObj = MAX_COL;\nIloNumArray FirstSol(varenteras.getEnv());\n\n\nif ( hasIncumbent() ) {\n\n    if (contador == 0 || contador == 1){\n        contador+=1;\n        FirstObj=getIncumbentObjValue();\n        getValues(FirstSol,varenteras);\n        FirstTime=cplex.getTime();\n\n\n        length=sizeof(FirstSol)/sizeof(FirstSol[0]);   \n//The first issue is here, length should be the size of the solution, and it's not giving it.\n\n\n        printf(\"El tiempo %lf el valor %lf el largo de la solucion %d \\n\",FirstTime,FirstObj,length);           \n        FILE* out;\n        out = fopen(\"ResultadoPruebaTamanotest.txt\",\"at+\");\n        fprintf(out,\"%lf \\t %lf \\n\",FirstTime,FirstObj);\n        for (i=0;i&lt;length;i++){\n            fprintf(out,\"%d \\t\",FirstSol[i]);\n        }\n        fprintf(out,\"\\n\");\n    }\n}\n</code></pre>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1462993110, "post_id": 37171152, "comment_id": 61877045, "body": "Well, that depends on the capabilities of your terminal. You might need to select the correct locale settings."}, {"owner": {"reputation": 577, "user_id": 6067690, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-LSCKq-zNPDc/AAAAAAAAAAI/AAAAAAAAABU/oK_TUJ0GSmg/photo.jpg?sz=128", "display_name": "Istiyak", "link": "https://stackoverflow.com/users/6067690/istiyak"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462993254, "post_id": 37171152, "comment_id": 61877115, "body": "How i will select correct locale settings for Terminal ? :)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1462993455, "post_id": 37171152, "comment_id": 61877239, "body": "There&#39;s no standard way, depends on OS mostly."}], "answers": [{"comments": [{"owner": {"reputation": 22854, "user_id": 2142994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1bad25bebfae0b3f4bfd13b07f5d4f3b?s=128&d=identicon&r=PG", "display_name": "Ani Menon", "link": "https://stackoverflow.com/users/2142994/ani-menon"}, "reply_to_user": {"reputation": 577, "user_id": 6067690, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-LSCKq-zNPDc/AAAAAAAAAAI/AAAAAAAAABU/oK_TUJ0GSmg/photo.jpg?sz=128", "display_name": "Istiyak", "link": "https://stackoverflow.com/users/6067690/istiyak"}, "edited": false, "score": 0, "creation_date": 1463079647, "post_id": 37171664, "comment_id": 61923125, "body": "Good to know it helped :)"}], "tags": [], "owner": {"reputation": 22854, "user_id": 2142994, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1bad25bebfae0b3f4bfd13b07f5d4f3b?s=128&d=identicon&r=PG", "display_name": "Ani Menon", "link": "https://stackoverflow.com/users/2142994/ani-menon"}, "is_accepted": true, "score": 5, "last_activity_date": 1462995281, "last_edit_date": 1495535370, "creation_date": 1462994756, "answer_id": 37171664, "question_id": 37171152, "link": "https://stackoverflow.com/questions/37171152/is-it-possible-to-print-bengali-language-with-c-in-console/37171664#37171664", "title": "Is it possible to print Bengali language with C in console?", "body": "<p>To use a language &amp; display it is very much an OS dependent task and below are few generic possible ways to do it.</p>\n\n<p>On linux :</p>\n\n<ol>\n<li>Set <a href=\"https://wiki.archlinux.org/index.php/Locale\" rel=\"nofollow noreferrer\">Locale</a>,</li>\n</ol>\n\n<p>In your case it should be : <code>setlocale(LC_ALL, 'bn_IN.utf8');</code></p>\n\n<p>Refer : (<a href=\"http://www.linuxquestions.org/questions/linux-newbie-8/displaying-hindi-in-linux-command-prompt-terminal-4175448642/\" rel=\"nofollow noreferrer\">http://www.linuxquestions.org/questions/linux-newbie-8/displaying-hindi-in-linux-command-prompt-terminal-4175448642/</a>)</p>\n\n<ol start=\"2\">\n<li><p>Download appropriate font &amp; install in your system.\nCheck your : <code>cd /usr/share/fonts/</code> for the font.\nedit your .bashrc file and add your font like this:</p>\n\n<p><code>export LANG=bn_IN.UTF-8</code></p>\n\n<p>(Side effect your whole os may start using this font if it supports).</p></li>\n</ol>\n\n<p>On Windows :</p>\n\n<p><a href=\"https://support.microsoft.com/en-us/kb/247815\" rel=\"nofollow noreferrer\">Necessary criteria for fonts to be available in a command window</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/2638936/c-how-to-print-a-unicode-string-to-console\">How to print a unicode string to console?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/21751827/displaying-arabic-characters-in-c-sharp-console-application/21753872#21753872\">Refer</a></p>\n\n<p>Note : Your Terminal must support Unicode for any of this to work.</p>\n"}], "owner": {"reputation": 577, "user_id": 6067690, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-LSCKq-zNPDc/AAAAAAAAAAI/AAAAAAAAABU/oK_TUJ0GSmg/photo.jpg?sz=128", "display_name": "Istiyak", "link": "https://stackoverflow.com/users/6067690/istiyak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 1, "accepted_answer_id": 37171664, "answer_count": 1, "score": 2, "last_activity_date": 1462995281, "creation_date": 1462992959, "last_edit_date": 1462995137, "question_id": 37171152, "link": "https://stackoverflow.com/questions/37171152/is-it-possible-to-print-bengali-language-with-c-in-console", "title": "Is it possible to print Bengali language with C in console?", "body": "<p>Is it possible to print Bengali Language with C in console? If it can be done, how can I do it?</p>\n\n<p>I tried:</p>\n\n<pre><code>wprintf (L\"Character: %lc %lc \\n\", L'\u0988', 2440);\n</code></pre>\n\n<p>This does not work. It just shows an unknown symbol. What is the best formula for working with UTF-8 format data in console? If it is possible with C++, I want to know that.</p>\n"}, {"tags": ["c++", "sse"], "comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1462993309, "post_id": 37171116, "comment_id": 61877148, "body": "And the error message is?"}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1462993324, "post_id": 37171116, "comment_id": 61877156, "body": "Your data is probably misaligned."}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1463038159, "post_id": 37171116, "comment_id": 61893747, "body": "Either align your data or use <code>_mm_loadu_ps</code>/<code>_mm_storeu_ps</code>."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1463038162, "post_id": 37171116, "comment_id": 61893749, "body": "Compile in 64-bit mode and see what happens."}], "answers": [{"comments": [{"owner": {"reputation": 2337, "user_id": 1659534, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/UTcbp.jpg?s=128&g=1", "display_name": "C. Wang", "link": "https://stackoverflow.com/users/1659534/c-wang"}, "edited": false, "score": 0, "creation_date": 1462994891, "post_id": 37171397, "comment_id": 61877991, "body": "What if using g++? Is __declspec(align(16)) still necessary?"}, {"owner": {"reputation": 2348, "user_id": 5820440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eQxPRvll8zs/AAAAAAAAAAI/AAAAAAAAFZ8/meZGJQSwVro/photo.jpg?sz=128", "display_name": "Sami Sallinen", "link": "https://stackoverflow.com/users/5820440/sami-sallinen"}, "reply_to_user": {"reputation": 2337, "user_id": 1659534, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/UTcbp.jpg?s=128&g=1", "display_name": "C. Wang", "link": "https://stackoverflow.com/users/1659534/c-wang"}, "edited": false, "score": 1, "creation_date": 1462995295, "post_id": 37171397, "comment_id": 61878217, "body": "On gcc it is __attribute __((aligned(16))) - see <a href=\"http://stackoverflow.com/questions/841433/gcc-attribute-alignedx-explanation\" title=\"gcc attribute alignedx explanation\">stackoverflow.com/questions/841433/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2348, "user_id": 5820440, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-eQxPRvll8zs/AAAAAAAAAAI/AAAAAAAAFZ8/meZGJQSwVro/photo.jpg?sz=128", "display_name": "Sami Sallinen", "link": "https://stackoverflow.com/users/5820440/sami-sallinen"}, "is_accepted": false, "score": 1, "last_activity_date": 1462993822, "creation_date": 1462993822, "answer_id": 37171397, "question_id": 37171116, "link": "https://stackoverflow.com/questions/37171116/running-error-of-sse2-code-in-vs2013/37171397#37171397", "title": "Running error of SSE2 code in VS2013", "body": "<p>The address being loaded from or stored to using these intrinsics needs to be 16 byte aligned (divisible by 16). See \n<a href=\"https://msdn.microsoft.com/en-us/library/zzd50xxt(v=vs.90).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/zzd50xxt(v=vs.90).aspx</a></p>\n\n<p>You should declare the variables a,b and c like this:</p>\n\n<p><code>__declspec(align(16)) float a[num] = { 1, 2, 3, 4, 5, 6, 7 };</code></p>\n"}], "owner": {"reputation": 2337, "user_id": 1659534, "user_type": "registered", "accept_rate": 18, "profile_image": "https://i.stack.imgur.com/UTcbp.jpg?s=128&g=1", "display_name": "C. Wang", "link": "https://stackoverflow.com/users/1659534/c-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462993822, "creation_date": 1462992827, "question_id": 37171116, "link": "https://stackoverflow.com/questions/37171116/running-error-of-sse2-code-in-vs2013", "title": "Running error of SSE2 code in VS2013", "body": "<p>I have the following SIMD code trying to run in vs2013. It can be well compiled but cannot run. Anyone knows why?</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;xmmintrin.h&gt;\n\nint main() \n{\n    const size_t num = 7;\n    float a[num] = { 1, 2, 3, 4, 5, 6, 7 };\n    float b[num] = { 1, -1, -2, 1, -3, -2, 5 };\n    float c[num];\n    __m128 A, B, C;\n    A = _mm_load_ps(&amp;a[0]); // &lt;== crash here.\n    B = _mm_load_ps(&amp;b[0]);\n    C = _mm_add_ps(A, B);\n    _mm_store_ps(&amp;c[0], C);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "edited": false, "score": 0, "creation_date": 1462992844, "post_id": 37170957, "comment_id": 61876876, "body": "it have not any references and dependencies folder empety but when i build the project the dependencies folder fill and i get these error"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462992974, "post_id": 37170957, "comment_id": 61876962, "body": "I just tested with Visual Studio 2015 and had no difficulty creating a win32 console application using the <code>New Project</code> wizard. The default generation had already created a <code>.cpp</code> file which has <code>#include &quot;stdafx.h&quot;</code> as the first line since precompiled headers are on by default. The rest of my code is the same as yours."}, {"owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462993255, "post_id": 37170957, "comment_id": 61877118, "body": "i have these error every where in all project types worst thing is those error are for defualt libraries"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462993344, "post_id": 37170957, "comment_id": 61877173, "body": "Did you add <code>#include &quot;stdafx.h&quot;</code> as the first line of your source file? And create a <code>stdafx.h</code> file in the same folder as your <code>.cpp</code> file? Although the compiler output should tell you that as the first error in the Output window. Press Alt-2 to see the Output window then compile."}, {"owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462993479, "post_id": 37170957, "comment_id": 61877255, "body": "i use empty project with out headers and any refrence and wonderfull thing is that when i dont add any code project build without error but when i just add that include i get those error"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462993562, "post_id": 37170957, "comment_id": 61877292, "body": "If you are not getting the error message about precompiled headers I say time to uninstall then reinstall Visual Studio 2015. Make sure you verify that the c++ compiler is selected for install."}, {"owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462993757, "post_id": 37170957, "comment_id": 61877390, "body": "i think so seems must do that see second edit too"}], "answers": [{"comments": [{"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "edited": false, "score": 0, "creation_date": 1462993345, "post_id": 37171183, "comment_id": 61877174, "body": "do you have error when you use precompiled headers?"}, {"owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "edited": false, "score": 0, "creation_date": 1462993444, "post_id": 37171183, "comment_id": 61877235, "body": "no in empty project it has not headers but still in build i have those error and wonderfull thing is that when i dont add any code project build without error but when i just add that include i get those error"}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "edited": false, "score": 0, "creation_date": 1462993555, "post_id": 37171183, "comment_id": 61877290, "body": "you open a project now with precomplied headers .. i mean include &quot;stdafx.h&quot;  .. just to check it it works well"}, {"owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "reply_to_user": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "edited": false, "score": 0, "creation_date": 1462994736, "post_id": 37171183, "comment_id": 61877909, "body": "problem with installation then. Check compiler to see it&#39;s c++ complier. If everything is Ok, then reinstall."}], "tags": [], "owner": {"reputation": 80, "user_id": 4627836, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Rp80x-74Lek/AAAAAAAAAAI/AAAAAAAAADY/O16MjoRtsMM/photo.jpg?sz=128", "display_name": "K.M. Shihab Uddin", "link": "https://stackoverflow.com/users/4627836/k-m-shihab-uddin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462993085, "creation_date": 1462993085, "answer_id": 37171183, "question_id": 37170957, "link": "https://stackoverflow.com/questions/37170957/vs2015-and-vc-external-dependencies-error-on-build/37171183#37171183", "title": "vs2015 and vc++ external dependencies error on build", "body": "<p>I think you have created a project set to use precompiled header. Can you start with an empty project and add source file?</p>\n\n<p>And don't forget to set \"Not using precomplied header\" in file option</p>\n"}], "owner": {"reputation": 580, "user_id": 1375748, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4439c36601e926b159329b480f07a777?s=128&d=identicon&r=PG", "display_name": "Mamad R", "link": "https://stackoverflow.com/users/1375748/mamad-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 839, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462993677, "creation_date": 1462992324, "last_edit_date": 1462993677, "question_id": 37170957, "link": "https://stackoverflow.com/questions/37170957/vs2015-and-vc-external-dependencies-error-on-build", "title": "vs2015 and vc++ external dependencies error on build", "body": "<p>i am learning vc++ and i make my first application win32 console and just write simple code and i get 20 error from external files automatic included</p>\n\n<p>i change compile as to c++ and not using precompiled headers but stil have errors</p>\n\n<p>here is my code</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    //cout &lt;&lt; \"hello !\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>how can i fix it ?</p>\n\n<p><a href=\"https://i.stack.imgur.com/pNPTq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pNPTq.jpg\" alt=\"my errors\"></a></p>\n\n<p>Edit :</p>\n\n<p>i have win7 and vs2015 perhaps helps</p>\n\n<p>Edit 2:</p>\n\n<p>last picture is for an empty project this one is for a win32 console app</p>\n\n<p><a href=\"https://i.stack.imgur.com/LSMpK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LSMpK.jpg\" alt=\"second Image\"></a></p>\n"}, {"tags": ["c++", "global-variables"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1462992762, "post_id": 37170896, "comment_id": 61876829, "body": "Looks like a compiler bug. Nothing you do should cause a crash at compile/link time. What compiler and OS are you using (versions for both). If it is reproducible by other people with the same system. Then file a bug against the compiler manufacturer."}, {"owner": {"reputation": 29, "user_id": 4966856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqb7L.jpg?s=128&g=1", "display_name": "Peter Paiste", "link": "https://stackoverflow.com/users/4966856/peter-paiste"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462995934, "post_id": 37170896, "comment_id": 61878563, "body": "Thanks Loki. I was using gcc 4.9. Switching to 4.8.1 solved all my problems. It&#39;s crazy how finicky this can all be."}, {"owner": {"reputation": 29, "user_id": 4966856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqb7L.jpg?s=128&g=1", "display_name": "Peter Paiste", "link": "https://stackoverflow.com/users/4966856/peter-paiste"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462996450, "post_id": 37170896, "comment_id": 61878874, "body": "Should there be an error on callback = func; in the constructor? Is this a compiler issue or me?"}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1462997854, "post_id": 37170896, "comment_id": 61879609, "body": "That&#39;s your error in the constructor. The member is const so it can be changed after it has been created. You should set call_back in the initializer list."}], "owner": {"reputation": 29, "user_id": 4966856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tqb7L.jpg?s=128&g=1", "display_name": "Peter Paiste", "link": "https://stackoverflow.com/users/4966856/peter-paiste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462992113, "creation_date": 1462992113, "question_id": 37170896, "link": "https://stackoverflow.com/questions/37170896/getting-an-abort-trap6-at-compile-time", "title": "Getting an abort trap:6 at compile time", "body": "<p>Trying to build a c++ project and I'm getting a trap: 6 at compile time. I must be doing something wrong with memory allocation. Is there something wrong with my code? </p>\n\n<pre><code>//Dependency.h\n\nnamespace whatever{\nclass Dependency {\npublic:\n    Dependency(std::function&lt;void ()&gt; const &amp; func);\n\nprivate:\n    std::function&lt;void ()&gt; const call_back;\n};\n\nDependency::Dependency(std::function&lt;void ()&gt; const &amp; func){\n            call_back = func;\n}\n\nextern Dependency * current;\nextern int counter;\n}\n</code></pre>\n\n<p>And here is the .cpp file</p>\n\n<pre><code>#include \"Dependence.h\"\n\nnamespace whatever {\n\n    Dependency * current;\n    int counter = 1;\n\n} \n</code></pre>\n\n<p>I tried removing the assignment to counter, but that did not do anything. \nHere is the error message</p>\n\n<pre><code>*** [src/Dependence.o] Abort trap: 6    \n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2015"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462992033, "post_id": 37170798, "comment_id": 61876398, "body": "The text file is in the <i>Debug</i> folder isn&#39;t it?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462992043, "post_id": 37170798, "comment_id": 61876406, "body": "It should be in the same folder as the project file unless you changed the settings for your project."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462992044, "post_id": 37170798, "comment_id": 61876409, "body": "In MSVS the text file needs to be in the same place the source files are.  Where is your text file?"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1462992321, "post_id": 37170798, "comment_id": 61876578, "body": "What do you mean by &quot;run it without debugging&quot; exactly? Starting it from inside of Visual Studio IDE without debugging? Or starting it from outside of IDE?"}, {"owner": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "edited": false, "score": 0, "creation_date": 1462994177, "post_id": 37170798, "comment_id": 61877607, "body": "starting it from inside VS without debugging"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "edited": false, "score": 0, "creation_date": 1462993190, "post_id": 37170913, "comment_id": 61877090, "body": "I copied my file in target directory (where there is .exe) but i still got the same problem..what is source directory? The one where there is also the .vcxproj file? If it&#39;s so, myfile.txt is already there as well. Is there a way to choose the working directory in &quot;start without debugging mode&quot; ? Thank for your answers!"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "edited": false, "score": 0, "creation_date": 1462993289, "post_id": 37170913, "comment_id": 61877138, "body": "@Ale The &quot;Source Directory&quot; is where your .h and .cpp files are (normally) located. It might be helpful if you add screenshots of your directory structure to the question, to allow us to see how things are laid out, and look for discrepancies."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "edited": false, "score": 0, "creation_date": 1462994197, "post_id": 37170913, "comment_id": 61877618, "body": "@Ale Also <a href=\"https://msdn.microsoft.com/en-us/library/sf98bd4y.aspx\" rel=\"nofollow noreferrer\">look into using <code>_getcwd</code></a> to track down the working directory. No point guessing where it is if you can ask and then adjust accordingly."}, {"owner": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "edited": false, "score": 0, "creation_date": 1462994578, "post_id": 37170913, "comment_id": 61877813, "body": "Sorry i&#39;m not able to post images, but i put myfile.txt in 3 places (&quot;stream&quot; is the name of my project): .........\\Visual Studio 2015\\Projects\\stream\\Debug .........\\Visual Studio 2015\\Projects\\stream\\Release .........\\Visual Studio 2015\\Projects\\stream\\stream"}], "tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 1, "last_activity_date": 1462992608, "last_edit_date": 1462992608, "creation_date": 1462992184, "answer_id": 37170913, "question_id": 37170798, "link": "https://stackoverflow.com/questions/37170798/why-doesnt-visual-studio-open-file-in-start-without-debugging-mode/37170913#37170913", "title": "Why doesn&#39;t Visual Studio open file in &quot;Start without debugging&quot; mode?", "body": "<p>Visual Studio changes the \"Working Directory\" of the program depending on how you execute it. If you run it from within the Visual Studio IDE, it will use the Source Directory as its working directory by default (this can be changed in the project properties). If you don't, the program will use the directory from which the program was executed.</p>\n\n<p>For safety, you could try keeping copies of the file both in the source directory and the target directory (where the Executable gets created) to ensure it has no trouble finding it.</p>\n"}], "owner": {"reputation": 11, "user_id": 6321972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/019c82c72b7ec5705029da0874e6f8a2?s=128&d=identicon&r=PG&f=1", "display_name": "Ale", "link": "https://stackoverflow.com/users/6321972/ale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1517070749, "creation_date": 1462991775, "last_edit_date": 1462995646, "question_id": 37170798, "link": "https://stackoverflow.com/questions/37170798/why-doesnt-visual-studio-open-file-in-start-without-debugging-mode", "title": "Why doesn&#39;t Visual Studio open file in &quot;Start without debugging&quot; mode?", "body": "<pre><code>#include \"stdafx.h\"\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    char ch;\n    int a = 0;\n    int e = 0;\n    int i = 0;\n    int o = 0;\n    int u = 0;\n\n    std::ifstream file(\"myfile.txt\", std::ifstream::in);\n\n    if (file.is_open())\n    {\n        while (file.get(ch))\n        {\n            if (ch == 'a')\n                a++;\n            if (ch == 'e')\n                e++;\n            if (ch == 'i')\n                i++;\n            if (ch == 'o')\n                o++;\n            if (ch == 'u')\n                u++;\n        }\n\n        std::cout &lt;&lt; \"Repetitions of a: \" &lt;&lt; a &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Repetitions of e: \" &lt;&lt; e &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Repetitions of i: \" &lt;&lt; i &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Repetitions of o: \" &lt;&lt; o &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"Repetitions of u: \" &lt;&lt; u &lt;&lt; std::endl;\n\n    }\n\n    else std::cout &lt;&lt; \"Error in opening file\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to make a simple c++ program to count occurrences of vowel letters in a txt file, using Visual Studio 2015.\nThis code works in Debug Mode but when i start it without debugging (from inside Visual Studio) it's doesn't open the file. Why does it happen and how can i fix it??\nThe txt file is in the same directory of the program </p>\n\n<p>I haven't got the problem when i use the full path e.g. Y:\\Documents\\Visual Studio 2015\\Projects\\stream\\stream\\myfile.txt  but however i would like to know why it doesn't work with the relative path e.g. myfile.txt</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "llvm-ir", "late-binding"], "comments": [{"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462995970, "post_id": 37170793, "comment_id": 61878582, "body": "i&#39;m a tad confused, those overloads due in fact work and the correct version of <code>check</code> is called depending on the type of the pointer passed to the function. what are you expecting beyond this?"}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "reply_to_user": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462996230, "post_id": 37170793, "comment_id": 61878746, "body": "I&#39;ll just pass a pointer to the superclass, obviously. i need the runtime to choose the correct overload depending to the pointed object. This is the definition for late binding"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462996487, "post_id": 37170793, "comment_id": 61878899, "body": "i see, wouldn&#39;t a single <code>check</code> function accepting the base class pointer be able to use <code>dynamic_cast</code> to customize behavior for the true underlying type? You&#39;d have to create a new pointer, cast it, and test the result to see if dynamic_cast verified the cast was possible. more work, but I think that&#39;s what dynamic_cast is for"}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "reply_to_user": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462996651, "post_id": 37170793, "comment_id": 61878994, "body": "I can&#39;t use RTTI nor exceptions for LLVM policy and code styles, and I was looking for something which doesn&#39;t add too much to the code. LLVM coding standards: <a href=\"http://llvm.org/docs/CodingStandards.html\" rel=\"nofollow noreferrer\">llvm.org/docs/CodingStandards.html</a>"}, {"owner": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462997391, "post_id": 37170793, "comment_id": 61879373, "body": "is this doc referring to llvm code or (it looks like) c++ code with custom llvm c++ tools: <a href=\"http://llvm.org/docs/ProgrammersManual.html#isa\" rel=\"nofollow noreferrer\">llvm.org/docs/ProgrammersManual.html#isa</a>"}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "reply_to_user": {"reputation": 22686, "user_id": 3758484, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/pJmdo.jpg?s=128&g=1", "display_name": "johnbakers", "link": "https://stackoverflow.com/users/3758484/johnbakers"}, "edited": false, "score": 0, "creation_date": 1462998138, "post_id": 37170793, "comment_id": 61879776, "body": "llvm::isa&lt;&gt; and llvm::dyn_cast&lt;&gt; are implemented by llvm but it&#39;s not native. classes that work with those should implement a method, at least that&#39;s what I know, and it is pretty annoying"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1463231717, "post_id": 37170793, "comment_id": 61984087, "body": "If you want a dynamic type switch, then why wouldn&#39;t you use <code>dynamic_cast</code>? That&#39;s exactly what it&#39;s there for."}, {"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 0, "creation_date": 1463231973, "post_id": 37170793, "comment_id": 61984169, "body": "I can&#39;t use it as I said, because the coding standards of the super project I&#39;m working with (LLVM) does not include RTTI"}], "answers": [{"tags": [], "owner": {"reputation": 63, "user_id": 6026381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rNmA2.jpg?s=128&g=1", "display_name": "Waheed Brown", "link": "https://stackoverflow.com/users/6026381/waheed-brown"}, "is_accepted": false, "score": -1, "last_activity_date": 1462992964, "creation_date": 1462992964, "answer_id": 37171154, "question_id": 37170793, "link": "https://stackoverflow.com/questions/37170793/c-late-binding-on-function-overloads/37171154#37171154", "title": "C++ Late Binding on function overloads", "body": "<p>This looks like a job for function pointers.</p>\n\n<pre><code>void (*checkPtr)(Hello*);\n...\nvoid check(Hello *c) {\n    // Do something\n   }\n...\ncheckPtr = &amp;check;\n</code></pre>\n\n<p>It isn't perfect but makes a good workaround for late binding.</p>\n"}, {"comments": [{"owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 0, "creation_date": 1462996374, "post_id": 37171854, "comment_id": 61878826, "body": "So much interesting. It should be added to newer C++ standards. I&#39;ll probably implement it in my Lang for sure. Maybe a &quot;virtual&quot; attribute to give to parameters, or something like that"}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "reply_to_user": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "edited": false, "score": 0, "creation_date": 1463004281, "post_id": 37171854, "comment_id": 61882744, "body": "Be sure to read the literature on this. It&#39;s really a non-trivial problem."}], "tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": true, "score": 4, "last_activity_date": 1462995466, "creation_date": 1462995466, "answer_id": 37171854, "question_id": 37170793, "link": "https://stackoverflow.com/questions/37170793/c-late-binding-on-function-overloads/37171854#37171854", "title": "C++ Late Binding on function overloads", "body": "<p>No, dynamic dispatch for non-member functions is currently not part of C++.</p>\n\n<p>It is theoretically possible, but the implementation technique is not as straight-forward as for virtual functions. There have been multiple proposals to extend C++ with this (keywords: multimethods and multiple dispatch), but so far they have not resulted in a concrete suggested and accepted language change.</p>\n"}], "owner": {"reputation": 1659, "user_id": 4767670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9dda5bf53c264228a2cd807e9167dc9c?s=128&d=identicon&r=PG", "display_name": "NoImaginationGuy", "link": "https://stackoverflow.com/users/4767670/noimaginationguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 1, "accepted_answer_id": 37171854, "answer_count": 2, "score": 4, "last_activity_date": 1462995466, "creation_date": 1462991761, "question_id": 37170793, "link": "https://stackoverflow.com/questions/37170793/c-late-binding-on-function-overloads", "title": "C++ Late Binding on function overloads", "body": "<p>Assuming I have these two classes:</p>\n\n<pre><code>class Hello {\n    //members\npublic:\n    virtual int doit() {\n        return 3;\n    }\n\n};\n\nclass Wow : public Hello {\n    //members\npublic:\n    virtual int doit() {\n        return 2;\n    }\n};\n\nint main(int argc, const char *argv[]) {\n\n    Hello *c = new Wow();\n\n    return c-&gt;doit();\n}\n</code></pre>\n\n<p>As we all know, this code will be handled by a late binding in C++, implemented in LLVM IR by Clang like this:</p>\n\n<pre><code> ; ...\n  %7 = bitcast %class.Wow* %5 to %class.Hello*\n  store %class.Hello* %7, %class.Hello** %c, align 8\n  %8 = load %class.Hello*, %class.Hello** %c, align 8\n  %9 = bitcast %class.Hello* %8 to i32 (%class.Hello*)***\n  %10 = load i32 (%class.Hello*)**, i32 (%class.Hello*)*** %9, align 8\n  %11 = getelementptr inbounds i32 (%class.Hello*)*, i32 (%class.Hello*)** %10, i64 0\n  %12 = load i32 (%class.Hello*)*, i32 (%class.Hello*)** %11, align 8\n  %13 = call i32 %12(%class.Hello* %8)\n ; ...\n</code></pre>\n\n<p>My question is, what if I wanna create a function called <code>check</code> for example in another namespace like this:</p>\n\n<pre><code>namespace somewhereelse {\n   void check(Hello *c) {\n    // Do something\n   }\n   void check(Wow *c) {\n    // Do something else\n   }\n}\n</code></pre>\n\n<p>Can a sort of late binding be applied to different function overloads?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1524, "user_id": 6095189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2bf1f3967f7560a1d3b2f73b9522af?s=128&d=identicon&r=PG&f=1", "display_name": "Aenimated1", "link": "https://stackoverflow.com/users/6095189/aenimated1"}, "edited": false, "score": 0, "creation_date": 1463000851, "post_id": 37170746, "comment_id": 61881186, "body": "I don&#39;t know the answer, but FWIW, I tried this code on my machine using Visual Studio 2010, and I didn&#39;t see the behavior you&#39;re describing."}, {"owner": {"reputation": 133, "user_id": 1370781, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/386c3777b9023571a289018cffab78b9?s=128&d=identicon&r=PG&f=1", "display_name": "Otto Nahmee", "link": "https://stackoverflow.com/users/1370781/otto-nahmee"}, "reply_to_user": {"reputation": 1524, "user_id": 6095189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2bf1f3967f7560a1d3b2f73b9522af?s=128&d=identicon&r=PG&f=1", "display_name": "Aenimated1", "link": "https://stackoverflow.com/users/6095189/aenimated1"}, "edited": false, "score": 0, "creation_date": 1463066770, "post_id": 37170746, "comment_id": 61915101, "body": "@Aenimated1 ... hmm, that&#39;s unusual. So, if it helps, I&#39;m compiling in Linux using gcc 4.8.4. Everyone at my work is stumped."}], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 1370781, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/386c3777b9023571a289018cffab78b9?s=128&d=identicon&r=PG&f=1", "display_name": "Otto Nahmee", "link": "https://stackoverflow.com/users/1370781/otto-nahmee"}, "edited": false, "score": 0, "creation_date": 1463236499, "post_id": 37197285, "comment_id": 61985613, "body": "This addressed this for me.  Thanks! I&#39;ll have to admit, I&#39;m not sure if I&#39;ve seen template used like this before. Do you what this specific usage is called?"}, {"owner": {"reputation": 1524, "user_id": 6095189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2bf1f3967f7560a1d3b2f73b9522af?s=128&d=identicon&r=PG&f=1", "display_name": "Aenimated1", "link": "https://stackoverflow.com/users/6095189/aenimated1"}, "reply_to_user": {"reputation": 133, "user_id": 1370781, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/386c3777b9023571a289018cffab78b9?s=128&d=identicon&r=PG&f=1", "display_name": "Otto Nahmee", "link": "https://stackoverflow.com/users/1370781/otto-nahmee"}, "edited": false, "score": 0, "creation_date": 1463259396, "post_id": 37197285, "comment_id": 61993251, "body": "No problem! I think this is just an example of a template function in which you&#39;re explicitly providing the template argument.  You can always explicitly provide the function template argument, but it&#39;s often unnecessary since the compiler can often deduce the template argument based on the function&#39;s parameters.  In this case, it&#39;s necessary since there are no parameters for the compiler to deduce the template argument from."}], "tags": [], "owner": {"reputation": 1524, "user_id": 6095189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2bf1f3967f7560a1d3b2f73b9522af?s=128&d=identicon&r=PG&f=1", "display_name": "Aenimated1", "link": "https://stackoverflow.com/users/6095189/aenimated1"}, "is_accepted": true, "score": 1, "last_activity_date": 1463086673, "creation_date": 1463086673, "answer_id": 37197285, "question_id": 37170746, "link": "https://stackoverflow.com/questions/37170746/compilation-error-when-trying-to-use-opencv-kalman-filter-and-template-parameter/37197285#37197285", "title": "Compilation error when trying to use OpenCV Kalman Filter and template parameters, seems to not recognize cv::Matt", "body": "<p>OK, so I'm no expert, but I think I get the gist of what's happening now.  Name lookup can be complex in template classes and functions because of the potential for names that are dependent on the template.  (I.e., it may be impossible to determine whether a name referenced inside of a template function or class is a type or a template name or neither when it is first parsed.)</p>\n\n<p>As a result, under some circumstances it is necessary to explicitly tell the compiler when a name is a template or type name.  In this example, the compiler is not sure how to resolve <code>at&lt;double&gt;</code>.  Presumably, this is because the compiler mistakenly believes that it could depend on the specific template parameter (<code>SubState</code>).  I'm not sure whether that could be considered a bug - it may just be that the compiler is deliberately conservative wrt name lookup.</p>\n\n<p>Anyway, you can resolve the compiler error by explicitly indicating that <code>at&lt;double&gt;</code> is a template:</p>\n\n<pre><code>state.kalmanFilter.statePost.template at&lt;double&gt;(0) = 5;\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 1370781, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/386c3777b9023571a289018cffab78b9?s=128&d=identicon&r=PG&f=1", "display_name": "Otto Nahmee", "link": "https://stackoverflow.com/users/1370781/otto-nahmee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "accepted_answer_id": 37197285, "answer_count": 1, "score": 1, "last_activity_date": 1463086673, "creation_date": 1462991597, "question_id": 37170746, "link": "https://stackoverflow.com/questions/37170746/compilation-error-when-trying-to-use-opencv-kalman-filter-and-template-parameter", "title": "Compilation error when trying to use OpenCV Kalman Filter and template parameters, seems to not recognize cv::Matt", "body": "<p>I've created a class that has an OpenCV KalmanFilter inside of it (OpenCV 2.4 if anyone's wondering).  Without any template parameters, it compiles just fine.</p>\n\n<pre><code>class ClassOkay\n{\npublic:\n\n    struct ClassState\n    {\n        cv::KalmanFilter kalmanFilter;\n        double time;\n    };\n\n    void doSomething();\n\nprivate:\n\n    ClassState state;\n\n};\n\nvoid ClassOkay::doSomething()\n{\n    //Okay\n    cv::Mat&amp; x = state.kalmanFilter.statePost;\n    x.at&lt;double&gt;(0) = 5;\n\n    //Okay\n    state.kalmanFilter.statePost.at&lt;double&gt;(0) = 5;\n}\n</code></pre>\n\n<p>Now when I add a template parameter, although here there are no objects with this template typename, it no longer compiles. </p>\n\n<pre><code>template&lt;typename SubState&gt;\nclass ClassNotOkay\n{\npublic:\n\n    struct ClassState\n    {\n        cv::KalmanFilter kalmanFilter;\n        double time;\n    };\n\n    void doSomething();\n\nprivate:\n\n    ClassState state;\n\n};\n\ntemplate&lt;typename SubState&gt;\nvoid ClassNotOkay&lt;SubState&gt;::doSomething()\n{\n    //Okay\n    cv::Mat&amp; x = state.kalmanFilter.statePost;\n    x.at&lt;double&gt;(0) = 5;\n\n    //Not okay\n    state.kalmanFilter.statePost.at&lt;double&gt;(0) = 5;\n}\n</code></pre>\n\n<p>The very last line where I try to access statePost, it seems to not recognize it as a cv::Mat. The compiler error is as follows:</p>\n\n<pre><code>../Base.h: In member function \u2018void ClassNotOkay&lt;SubState&gt;::doSomething()\u2019:\n../Base.h:169:37: error: expected primary-expression before \u2018double\u2019\n     state.kalmanFilter.statePost.at&lt;double&gt;(0) = 5;\n                                     ^\n../Base.h:169:37: error: expected \u2018;\u2019 before \u2018double\u2019\n</code></pre>\n\n<p>It seems really weird to me that it no longer understands that <code>at</code> is a method of <code>statePost</code>. Any ideas why and how this is happening?</p>\n"}, {"tags": ["c++", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 13595, "user_id": 668501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3f15b157200c05100d6baeb0ede510f0?s=128&d=identicon&r=PG", "display_name": "Soren", "link": "https://stackoverflow.com/users/668501/soren"}, "edited": false, "score": 2, "creation_date": 1462991432, "post_id": 37170608, "comment_id": 61876103, "body": "When you use your debugger, what is the value of <code>Account *_head</code> ?"}, {"owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "edited": false, "score": 0, "creation_date": 1462991650, "post_id": 37170608, "comment_id": 61876198, "body": "Question: Why does (half of) an intrusive linked list implementation belong in a bank Account class?"}, {"owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1462992366, "post_id": 37170608, "comment_id": 61876600, "body": "The teacher told us to make It like that :)"}, {"owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "edited": false, "score": 0, "creation_date": 1462993010, "post_id": 37170608, "comment_id": 61876988, "body": "<a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Single_responsibility_principle</a> Also unless you  need lock-free data structures or are doing a homework assignment there is essentially no good reason to implement a linked-list in C++ by hand."}, {"owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1462993204, "post_id": 37170608, "comment_id": 61877095, "body": "And do you have a solution concerning the insert method please ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462995197, "post_id": 37170608, "comment_id": 61878159, "body": "<code>using namespace std;</code> is best used with caution and a dangerous thing to put in a header. More here: <a href=\"http://stackoverflow.com/questions/1452721/why-is-using-namespace-std-in-c-considered-bad-practice\">Why is \u201cusing namespace std\u201d in C++ considered bad practice?</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462995297, "post_id": 37170608, "comment_id": 61878218, "body": "When writing a linked list, you need to visualize how the items are linked. One of the best ways to do this is to draw each operation out on a piece of paper step by step."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1462991806, "post_id": 37170683, "comment_id": 61876283, "body": "So what is the solution then, can you help me please ? I&#39;m a beginner in c++"}, {"owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "reply_to_user": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1462993272, "post_id": 37170683, "comment_id": 61877126, "body": "@I.Hamza <a href=\"https://en.wikipedia.org/wiki/Linked_list\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Linked_list</a> has some pseudo code for each linked list operation."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 4, "last_activity_date": 1462991407, "creation_date": 1462991407, "answer_id": 37170683, "question_id": 37170608, "link": "https://stackoverflow.com/questions/37170608/why-is-the-insert-function-in-linked-list-not-working-c/37170683#37170683", "title": "Why is the insert function in linked list not working ? (C++)", "body": "<pre><code>bool flag(true);\n\nwhile(temp)\n{\n    if (temp-&gt;getClient() == name)\n    {\n        /* code */\n        cout &lt;&lt; \"DENIED OPERATION! --&gt; \"&lt;&lt; name &lt;&lt;\"\u2019s account already exists.\" &lt;&lt; endl;\n        flag = false;\n    }\n\n    temp = temp-&gt;getNext();\n}\n\nif (flag)\n{\n    /* code */\n    temp-&gt;setNext(new _Account(name, balance));\n}\n</code></pre>\n\n<p>This doesn't make sense.\nControl leaves the <code>while</code> loop once <code>temp</code> points to <code>nullptr</code>. Then you try to dereference that pointer with <code>temp-&gt;setNext(new _Account(name, balance));</code>. That's Undefined Behaviour.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1463003812, "post_id": 37171441, "comment_id": 61882543, "body": "I try this out, but still the same problem: segmentation fault:11."}, {"owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "edited": false, "score": 0, "creation_date": 1463003853, "post_id": 37171441, "comment_id": 61882559, "body": "Here is my actual code <code>void Bank::insert(string name, float balance) { \t_Account *temp(_head); \t&#47;&#47;_Account *n = new _Account(name, balance);  \tbool flag(true);  \twhile(temp) \t{ \t\tif (temp-&gt;getClient() == name) \t\t{ \t\t\t&#47;* code *&#47; \t\t\tcout &lt;&lt; &quot;DENIED OPERATION! --&gt; &quot;&lt;&lt; name &lt;&lt;&quot;\u2019s account already exists.&quot; &lt;&lt; endl; \t\t\tflag = false; \t\t}  \t\tif (temp-&gt;getNext())  \t\t{     \t\ttemp = temp-&gt;getNext(); \t\t}   \t\telse  \t\t{     \t\tbreak; \t\t} \t}  \tif (flag) \t{ \t\t&#47;* code *&#47; \t\ttemp-&gt;setNext(new _Account(name, balance)); \t} \t }</code>"}], "tags": [], "owner": {"reputation": 2721, "user_id": 880984, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/65f4fa9056d1884b419463410e92c5be?s=128&d=identicon&r=PG", "display_name": "Tim Seguine", "link": "https://stackoverflow.com/users/880984/tim-seguine"}, "is_accepted": true, "score": 0, "last_activity_date": 1462993976, "creation_date": 1462993976, "answer_id": 37171441, "question_id": 37170608, "link": "https://stackoverflow.com/questions/37170608/why-is-the-insert-function-in-linked-list-not-working-c/37171441#37171441", "title": "Why is the insert function in linked list not working ? (C++)", "body": "<p>As the other answer pointed out, your loop is wrong. If you change the last line from this:</p>\n\n<pre><code>temp = temp-&gt;getNext();\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>if (temp-&gt;getNext()) {\n    temp = temp-&gt;getNext();\n} else {\n    break;\n}\n</code></pre>\n\n<p>Then your loop should stop at the last element in the list instead of the (non existent) element after the last element in the list.</p>\n\n<p>The real problem however is that your teacher thinks this is a good way to teach a beginner C++.</p>\n"}], "owner": {"reputation": 15, "user_id": 6192635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e3c29886806f2851e8a67f4e042b39?s=128&d=identicon&r=PG&f=1", "display_name": "IdelHamza", "link": "https://stackoverflow.com/users/6192635/idelhamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "closed_date": 1463005925, "accepted_answer_id": 37171441, "answer_count": 2, "score": -3, "last_activity_date": 1463007835, "creation_date": 1462991207, "last_edit_date": 1463007835, "question_id": 37170608, "link": "https://stackoverflow.com/questions/37170608/why-is-the-insert-function-in-linked-list-not-working-c", "closed_reason": "Not suitable for this site", "title": "Why is the insert function in linked list not working ? (C++)", "body": "<p>I'm working on a program that insert, delete accounts from a Bank.</p>\n\n<p>Here is my .hpp code :</p>\n\n<pre><code>#ifndef DEF_BANK\n#define DEF_BANK\n\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Bank\n{\n\nprivate:\n    class _Account\n    {\n    public:\n        _Account(string, float);\n        string getClient();\n        float getBalance();\n        _Account *getNext();\n\n        void setClient(string);\n        void setBalance(float);\n        void setNext(Bank::_Account *);\n\n    private:\n        string _client; //nom client\n        float _balance; // stocke balance du compte\n        _Account *_next; // next account\n    };\n\n    _Account *_head;\npublic:\n    Bank();\n    Bank(string name, float balance);\n    _Account *rechercheClient(string);\n    float withdraw(string, float);\n    float deposit(string, float);\n    void createAccount(string, float);\n    void insert(string, float);\n    void remove(string name);\n    float deleteAccount(string);\n    void mergeAccounts(string, string);\n    void displayAccounts();\n\n};\n\n#endif\n</code></pre>\n\n<p>And here is my .cpp insert function:</p>\n\n<pre><code>void Bank::insert(string name, float balance)\n{\n    _Account *temp(_head);\n    //_Account *n = new _Account(name, balance); \n    bool flag(true);\n\n    while(temp)\n    {\n        if (temp-&gt;getClient() == name)\n        {\n            /* code */\n            cout &lt;&lt; \"DENIED OPERATION! --&gt; \"&lt;&lt; name &lt;&lt;\"\u2019s account already exists.\" &lt;&lt; endl;\n            flag = false;\n        }\n\n        temp = temp-&gt;getNext();\n    }\n\n    if (flag)\n    {\n        /* code */\n        temp-&gt;setNext(new _Account(name, balance));\n    }\n\n}\n</code></pre>\n\n<p>Why when I try this in main.cpp:</p>\n\n<pre><code>int main()\n{\n    Bank account_1;\n    account_1.insert(\"Hamza\", 1000.0);\n}\n</code></pre>\n\n<p>I get a segmentation fault :11 ? because I don't see my fault in the code.</p>\n"}, {"tags": ["c++", "qt", "root-framework"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6322467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07ee884c880d13709739cd22fe391099?s=128&d=identicon&r=PG&f=1", "display_name": "Maverick", "link": "https://stackoverflow.com/users/6322467/maverick"}, "is_accepted": false, "score": 1, "last_activity_date": 1462999335, "creation_date": 1462999335, "answer_id": 37172895, "question_id": 37170350, "link": "https://stackoverflow.com/questions/37170350/undefined-reference-to-tversionchecktversioncheckint/37172895#37172895", "title": "undefined reference to `TVersionCheck::TVersionCheck(int)", "body": "<p>Some libraries in your project are included incorrectly. e.g. <strong>-llibAfterImage -llibASImage -llibASImageGui</strong>\nyou should write <strong>-lAfterImage -lASImage -lASImageGui</strong> and so on...\nWhen i corrected your .pro file, build succeeded.\nPossibly one of that incorrectly included libraries contains implementation of <strong>TVersionCheck::TVersionCheck(int)</strong></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10727649, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/9d4c5192f6c1f681937acc6acfa9dca3?s=128&d=identicon&r=PG", "display_name": "Xiangyu", "link": "https://stackoverflow.com/users/10727649/xiangyu"}, "is_accepted": false, "score": 0, "last_activity_date": 1543580274, "creation_date": 1543580274, "answer_id": 53557458, "question_id": 37170350, "link": "https://stackoverflow.com/questions/37170350/undefined-reference-to-tversionchecktversioncheckint/53557458#53557458", "title": "undefined reference to `TVersionCheck::TVersionCheck(int)", "body": "<p>I was struggling for this problem recently. It's because that ROOT under windows is 32bit, and you need to check the MSCV2015 32bit while reinstalling Qt...</p>\n"}], "owner": {"reputation": 1, "user_id": 5268354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3f113399651ed23b30341662d9c3a6?s=128&d=identicon&r=PG&f=1", "display_name": "Vladislav", "link": "https://stackoverflow.com/users/5268354/vladislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543580274, "creation_date": 1462990243, "last_edit_date": 1463275567, "question_id": 37170350, "link": "https://stackoverflow.com/questions/37170350/undefined-reference-to-tversionchecktversioncheckint", "title": "undefined reference to `TVersionCheck::TVersionCheck(int)", "body": "<p>I want to use root cern libs in my Qt program. But I have problems with linker:     </p>\n\n<blockquote>\n  <p>undefined reference to `TVersionCheck::TVersionCheck(int)</p>\n</blockquote>\n\n<p>I don't know what's the reason. I did read another forum, but still can't understand the issue. Please, help me.</p>\n\n<p>The <code>.pro</code> file contents:</p>\n\n<pre><code>QT += core\nQT -= gui\n\nCONFIG += c++11\n\nTARGET = v_root_trees_2\nCONFIG += console\nCONFIG -= app_bundle\n\nTEMPLATE = app\n\nSOURCES += main.cpp\n\nINCLUDEPATH += \"C:/root_v5.34.34/include\"\n\nLIBS += -L\"C:/root_v5.34.34/lib\"  \\\n-lcomplexDict \\\n-ldequeDict \\\n-lfreetype \\\n-llibAfterImage \\\n-llibASImage \\\n-llibASImageGui \\\n-llibCint \\\n-llibCintex \\\n-llibCore \\\n-llibEG \\\n-llibEGPythia8 \\\n-llibEve \\\n-llibFitPanel \\\n-llibFoam \\\n-llibFTGL \\\n-llibFumili \\\n-llibGdml \\\n-llibGed \\\n-llibGenetic \\\n-llibGenVector \\\n-llibGeom \\\n-llibGeomBuilder \\\n-llibGeomPainter \\\n-llibGLEW \\\n-llibGpad \\\n-llibGraf \\\n-llibGraf3d \\\n-llibGui \\\n-llibGuiBld \\\n-llibGuiHtml \\\n-llibGviz3d \\\n-llibHist \\\n-llibHistPainter \\\n-llibHtml \\\n-llibMathCore \\\n-llibMathMore \\\n-llibMatrix \\\n-llibMinuit \\\n-llibMinuit2 \\\n-llibMLP \\\n-llibNet \\\n-llibPhysics \\\n-llibPostscript \\\n-llibProof \\\n-llibProofDraw \\\n-llibProofPlayer \\\n-llibPyROOT \\\n-llibQuadp \\\n-llibRecorder \\\n-llibReflex \\\n-llibReflexDict \\\n-llibRGL \\\n-llibRHTTP \\\n-llibRint \\\n-llibRIO \\\n-llibRODBC \\\n-llibRooFit \\\n-llibRooFitCore \\\n-llibRooStats \\\n-llibRootAuth \\\n-llibSessionViewer \\\n-llibSmatrix \\\n-llibSpectrum \\\n-llibSpectrumPainter \\\n-llibSPlot \\\n-llibSQLIO \\\n-llibTable \\\n-llibThread \\\n-llibTMVA \\\n-llibTree \\\n-llibTreePlayer \\\n-llibTreeViewer \\\n-llibUnuran \\\n-llibVMC \\\n-llibWin32gdk \\\n-llibXMLIO \\\n-llistDict \\\n-lmap2Dict \\\n-lmapDict \\\n-lmathtext \\\n-lmultimap2Dict \\\n-lmultimapDict \\\n-lmultisetDict \\\n-lsetDict \\\n-lvectorDict\n</code></pre>\n\n<p>main.cpp file:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n\n#include \"TMultiGraph.h\" // problem if add this line\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    return a.exec();\n}\n</code></pre>\n\n<p>I don't know what is wrong. I added all <code>.lib</code> files. \nThe paths <code>C:/root_v5.34.34/lib</code> and <code>C:/root_v5.34.34/include</code> are correct and do exist. Changing paths I see <code>cannot find ...</code> error.\nSo, the paths are correct. </p>\n\n<p>I checked the similar code in VS2013 and don't see any errors.\nBut I write a lot of code in Qt and can't change IDE. \nI understand, that some link causes the error, but can't find it.</p>\n"}, {"tags": ["c++", "winapi", "iocp"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462996090, "post_id": 37170012, "comment_id": 61878650, "body": "Per the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms737606.aspx\" rel=\"nofollow noreferrer\"><code>ConnectEx</code> documentation</a>: &quot;<b><i>Any attempt to reconnect an active connection will fail with the error code WSAEISCONN</b>... If the <code>DisconnectEx</code> function is called with the <code>TF_REUSE_SOCKET</code> flag, <b>the specified socket is returned to a state in which it is not connected</b>, but still bound. In such cases, the handle of the socket can be passed to the <code>ConnectEx</code> function in its <code>s</code> parameter.</i>&quot;..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1462996173, "post_id": 37170012, "comment_id": 61878711, "body": "... are you <i>absolutely sure</i> you are waiting for <code>DisconnectEx()</code> to fully finish before calling <code>ConnectEx()</code>? Are you <i>absolutely sure</i> you are passing the correct <code>SOCKET</code> from <code>DisconnectEx()</code> to <code>ConnectEx()</code>?"}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1463003648, "post_id": 37170012, "comment_id": 61882484, "body": "@RemyLebeau, yes I am:) But after thorough reading of MSDN I have stumbled upon the fact that maybe I still need to call <code>shutdown</code> before <code>DisconnectEx</code> (I was not doing that since it is mentioned nowhere in the <code>DisconnectEx</code> page). Will try that tomorrow."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1463005974, "post_id": 37170012, "comment_id": 61883381, "body": "Reading the documentation, it&#39;s not entirely clear to me how <code>TIME_WAIT</code> is implemented.  If <code>DisconnectEx</code> returns while the socket is still in the <code>TIME_WAIT</code> state then you won&#39;t be able to connect to a different host using that socket until the wait delay has expired."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1463008194, "post_id": 37170012, "comment_id": 61884049, "body": "@HarryJohnston that is another thing I stumbled upon while reading MSDN, but since there is no clear way to check if the TIME_WAIT period has elapsed I&#39;ll just hope <code>shutdown</code> will do the trick."}, {"owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "reply_to_user": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1463071261, "post_id": 37170012, "comment_id": 61918224, "body": "@HarryJohnston I tried to make an MVCE and it seems that when I use two distinct hosts (in my case the redirect was from localhost to the physical address of the interface) I get <code>ERROR_DUP_NAME</code> which is different and could be related to <code>TIME_WAIT</code>."}], "owner": {"reputation": 10998, "user_id": 1458617, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0790c4e75c14c45344fef4937aac2e8a?s=128&d=identicon&r=PG", "display_name": "Rudolfs Bundulis", "link": "https://stackoverflow.com/users/1458617/rudolfs-bundulis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 492, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1463075270, "creation_date": 1462989208, "last_edit_date": 1463075270, "question_id": 37170012, "link": "https://stackoverflow.com/questions/37170012/connectex-fails-with-wsaeisconn-after-calling-disconnectex-with-tf-reuse-socket", "title": "ConnectEx fails with WSAEISCONN after calling DisconnectEx with TF_REUSE_SOCKET", "body": "<p>I have an IOCP based client for which I wanted to implement HTTP redirects in a following way:</p>\n\n<p>1) When encountering a redirect to a different host call <code>DisconnectEx</code> with <code>TF_REUSE_SOCKET</code></p>\n\n<p>2) Await the overlapped completion and then call <code>ConnectEx</code></p>\n\n<p>However my code gets a <code>WSAEISCONN</code> return code upon calling <code>ConnectEx</code> even though if I check <code>GetLastError()</code> when the overlapped result of <code>DisconnectEx</code> is returned it gives 0.</p>\n\n<p>An MVCE would be quite big in this case, but if there are no experience based suggestions I'll post one.</p>\n\n<p><strong><em>Update</em></strong></p>\n\n<p>I tried to make a MVCE but encountered different symptoms:</p>\n\n<pre><code>#define VC_EXTRALEAN\n#define WIN32_LEAN_AND_MEAN\n\n#include &lt;WinSock2.h&gt;\n#include &lt;MSWSock.h&gt;\n#include &lt;Windows.h&gt;\n#include &lt;Ws2tcpip.h&gt;\n\n#pragma comment(lib, \"ws2_32.lib\")\n\n#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;map&gt;\n\nstatic inline std::string ErrorMessage(const char* pErrorMessage, ...)\n{\n    std::string sFormattedMessage;\n    va_list VariableArgumentList;\n    va_start(VariableArgumentList, pErrorMessage);\n    sFormattedMessage.resize(_vscprintf(pErrorMessage, VariableArgumentList) + 1);\n    vsnprintf_s(const_cast&lt;char*&gt;(sFormattedMessage.c_str()), sFormattedMessage.size(), sFormattedMessage.size(), pErrorMessage, VariableArgumentList);\n    va_end(VariableArgumentList);\n    return sFormattedMessage;\n}\n\n#define CHECK(x, format, ...) { if ((x) == false)  throw std::runtime_error(ErrorMessage(\"%s(%d): \"format, __FILE__, __LINE__, __VA_ARGS__)); }\n\ntemplate&lt;typename T&gt;\nbool LoadWinsockExtensionFunction(SOCKET Socket, GUID Guid, T* pFunction)\n{\n    DWORD nBytesReturned = 0;\n    return WSAIoctl(Socket, SIO_GET_EXTENSION_FUNCTION_POINTER, &amp;Guid, sizeof(Guid), pFunction, sizeof(T), &amp;nBytesReturned, NULL, NULL) == 0 &amp;&amp; nBytesReturned == sizeof(T);\n}\n\nint main(int argc, char** argv)\n{\n    try\n    {\n        WORD nRequestedWinsockVersion = MAKEWORD(2, 2);\n        WSADATA WsaData;\n        CHECK(WSAStartup(nRequestedWinsockVersion, &amp;WsaData) == 0, \"WSAStartup failed\");\n        auto hCompletionPort = CreateIoCompletionPort(INVALID_HANDLE_VALUE, NULL, NULL, 0);\n        CHECK(hCompletionPort != NULL, \"CreateIoCompletionPort failed(%d)\", GetLastError());\n        auto Socket = WSASocket(AF_INET, SOCK_STREAM, IPPROTO_TCP, NULL, 0, WSA_FLAG_OVERLAPPED);\n        CHECK(Socket != INVALID_SOCKET, \"WSASocket failed(%d)\", WSAGetLastError());\n        CHECK(CreateIoCompletionPort(reinterpret_cast&lt;HANDLE&gt;(Socket), hCompletionPort, NULL, 0), \"CreateIoCompletionPort failed(%d)\", GetLastError());\n        sockaddr_in LocalAddress;\n        ZeroMemory(&amp;LocalAddress, sizeof(LocalAddress));\n        LocalAddress.sin_family = AF_INET;\n        LocalAddress.sin_addr.s_addr = INADDR_ANY;\n        LocalAddress.sin_port = 0;\n        CHECK(bind(Socket, reinterpret_cast&lt;SOCKADDR*&gt;(&amp;LocalAddress), sizeof(LocalAddress)) == 0, \"bind failed(%d)\", WSAGetLastError());\n        LPFN_CONNECTEX pConnectEx = nullptr;\n        CHECK(LoadWinsockExtensionFunction(Socket, WSAID_CONNECTEX, &amp;pConnectEx), \"WSAIoctl failed to load ConnectEx(%d)\", WSAGetLastError());\n        LPFN_DISCONNECTEX pDisconnectEx = nullptr;\n        CHECK(LoadWinsockExtensionFunction(Socket, WSAID_DISCONNECTEX, &amp;pDisconnectEx), \"WSAIoctl failed to load DisconnectEx(%d)\", WSAGetLastError());\n        addrinfo Hint;\n        ZeroMemory(&amp;Hint, sizeof(Hint));\n        Hint.ai_family = AF_INET;\n        Hint.ai_protocol = IPPROTO_TCP;\n        Hint.ai_socktype = SOCK_STREAM;\n        std::map&lt;std::string, PADDRINFOA&gt; Hosts;\n        // Scenarios:\n        // one host - failure to connect on the second try to the first host with 52\n        // two distinct hosts - failure to connect on the second try to the first host with 52\n        Hosts.emplace(\"www.google.com\", nullptr);\n        Hosts.emplace(\"www.facebook.com\", nullptr);\n        for (auto&amp; Host : Hosts)\n        {\n            auto nGetAddressInfoResult = getaddrinfo(Host.first.c_str(), \"http\", &amp;Hint, &amp;Host.second);\n            CHECK(nGetAddressInfoResult == 0 &amp;&amp; &amp;Host.second, \"getaddrinfo failed(%d)\", nGetAddressInfoResult);\n        }\n        auto Host = Hosts.begin();\n        WSAOVERLAPPED Overlapped;\n        ZeroMemory(&amp;Overlapped, sizeof(Overlapped));\n        while (true)\n        {\n            if ((*pConnectEx)(Socket, Host-&gt;second-&gt;ai_addr, Host-&gt;second-&gt;ai_addrlen, nullptr, 0, nullptr, &amp;Overlapped) == FALSE)\n            {\n                auto nWSAError = WSAGetLastError();\n                CHECK(nWSAError == ERROR_IO_PENDING, \"ConnectEx failed(%d)\", nWSAError);\n                DWORD nBytesTransferred = 0;\n                ULONG_PTR pCompletionKey = 0;\n                LPOVERLAPPED pOverlapped = nullptr;\n                CHECK(GetQueuedCompletionStatus(hCompletionPort, &amp;nBytesTransferred, &amp;pCompletionKey, &amp;pOverlapped, INFINITE), \"overlapped operation failed(%d)\", GetLastError());\n            }\n            CHECK(setsockopt(Socket, SOL_SOCKET, SO_UPDATE_CONNECT_CONTEXT, NULL, 0) == 0, \"setsockopt failed(%d)\", WSAGetLastError());\n            CHECK(shutdown(Socket, SD_BOTH) == 0, \"shutdown failed(%d)\", WSAGetLastError());\n            if ((*pDisconnectEx)(Socket, &amp;Overlapped, TF_REUSE_SOCKET, 0) == FALSE)\n            {\n                auto nWSAError = WSAGetLastError();\n                CHECK(nWSAError == ERROR_IO_PENDING, \"ConnectEx failed(%d)\", nWSAError);\n                DWORD nBytesTransferred = 0;\n                ULONG_PTR pCompletionKey = 0;\n                LPOVERLAPPED pOverlapped = nullptr;\n                CHECK(GetQueuedCompletionStatus(hCompletionPort, &amp;nBytesTransferred, &amp;pCompletionKey, &amp;pOverlapped, INFINITE), \"overlapped operation failed(%d)\", GetLastError());\n            }\n            if (++Host == Hosts.end())\n            {\n                Host = Hosts.begin();\n            }\n        }\n        closesocket(Socket);\n        CloseHandle(hCompletionPort);\n        for (auto&amp; Host : Hosts)\n        {\n            freeaddrinfo(Host.second);\n        }\n        WSACleanup();\n    }\n    catch (std::exception&amp; Exception)\n    {\n        OutputDebugStringA(Exception.what());\n        std::cout &lt;&lt; Exception.what();\n        return EXIT_FAILURE;\n    }\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>With this snippet what happens is that I get <code>ERROR_DUP_NAME</code> on the second attempt to connect to the same host (<code>TIME_WAIT</code> possibly?). I assume that if I could rebind the socket (but I can't since a second <code>bind</code> call fails with <code>WSAEINVAL</code> which is correct since the socket is already bound) this could even work fine.</p>\n\n<p>What I have in my original code is a redirect from <code>localhost</code> to the actual address of the interface - maybe there simply is a path which in that case gives out <code>WSAEISCONN</code> instead of <code>ERROR_DUP_NAME</code> ? I can't post an MVCE for the original code since then another piece of code that would accept the connections is needed (maybe I'll make one).</p>\n\n<p>I actually found that if <code>DisconnectEx</code> is called by the client then yes, <code>ERROR_DUP_NAME</code> happens because of <code>TIME_WAIT</code> (see <a href=\"http://www.gamedev.net/topic/432292-disconnectex-and-socket-re-use/\" rel=\"nofollow\">this</a> for a detailed analysis). So the bottom line is I should simply not try to reuse sockets in this scenario.</p>\n"}, {"tags": ["c++", "c", "image-processing"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462988351, "post_id": 37169704, "comment_id": 61874289, "body": "Sure, there is a function in standard C for every task one can think of. Just use the <code>do_what_i_want</code>-function. Seriously: Your question is far off-topic. That could have been answered by a simple search."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1462988411, "post_id": 37169704, "comment_id": 61874333, "body": "Hmm, on second thought, that C/C++ language actually might have such a function. But the two <b>different</b> languages C and C++ don&#39;t."}, {"owner": {"reputation": 1206, "user_id": 2830225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6812bca0f44a9c23dd9ab00ef70deccf?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Angelov", "link": "https://stackoverflow.com/users/2830225/anton-angelov"}, "edited": false, "score": 0, "creation_date": 1462988646, "post_id": 37169704, "comment_id": 61874470, "body": "You can use the PGM format (<a href=\"https://en.wikipedia.org/wiki/Netpbm_format\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Netpbm_format</a>) it is exactly what you describe. Also I doubt there is a built-in function in C about loading specific image format :) But you can write a loader routine yourself, it will be a couple of fscanf() calls (or file stream readings for C++)."}, {"owner": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 1, "creation_date": 1462988772, "post_id": 37169704, "comment_id": 61874549, "body": "You should show some own effort to solve your problem. This can be done without any non-standard libraries both in C and C++ The only thing you have to do is use google or read the Bitmap file specification and implement your stuff accordingly.  And why would you put integer values between 0 and 255 into a float array? (Hint 0-255 can be covered with 1 byte)"}, {"owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462989474, "post_id": 37169704, "comment_id": 61875005, "body": "@Olaf I posted it after reading all the searches. I put some effort and seemed useless posting the failures. Thanks for looking down on me."}, {"owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "reply_to_user": {"reputation": 17633, "user_id": 2858170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4263428b9b0e0aed365e264c7a2b044?s=128&d=identicon&r=PG&f=1", "display_name": "Piglet", "link": "https://stackoverflow.com/users/2858170/piglet"}, "edited": false, "score": 0, "creation_date": 1462989597, "post_id": 37169704, "comment_id": 61875061, "body": "@Piglet  I need a float because after the anisotropic i need a &quot;threshold confront&quot; to decide between a second step of diffusion or going through edge detection"}, {"owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "edited": false, "score": 0, "creation_date": 1463026848, "post_id": 37169704, "comment_id": 61888671, "body": "I reworded my question, could you please reopen it?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "edited": false, "score": 0, "creation_date": 1462989869, "post_id": 37170066, "comment_id": 61875238, "body": "Thanks for the help :) I need the 1D part because the second part of the project is transferring the 3 functions for image processing in CUDA, and CUDA don&#39;t like 2D arrays"}, {"owner": {"reputation": 36, "user_id": 6319963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e183df3efda68d6f370a44ae2f1654d?s=128&d=identicon&r=PG&f=1", "display_name": "John Wiggles", "link": "https://stackoverflow.com/users/6319963/john-wiggles"}, "reply_to_user": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "edited": false, "score": 0, "creation_date": 1462990003, "post_id": 37170066, "comment_id": 61875327, "body": "I think OpenCV has major tie-ups with CUDA in terms of development. Try and see if you can find examples relevant to what you want to do, you might just find the code for it."}, {"owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "edited": false, "score": 0, "creation_date": 1462990918, "post_id": 37170066, "comment_id": 61875857, "body": "<i>Sigh</i> :( if i have to use OpenCV i&#39;d rather stick to my MatLab functions, then read the txt into a float array and viceversa...  My goal was to be the smartass that used only C language  I will look into it :)"}], "tags": [], "owner": {"reputation": 36, "user_id": 6319963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e183df3efda68d6f370a44ae2f1654d?s=128&d=identicon&r=PG&f=1", "display_name": "John Wiggles", "link": "https://stackoverflow.com/users/6319963/john-wiggles"}, "is_accepted": false, "score": -1, "last_activity_date": 1462989363, "creation_date": 1462989363, "answer_id": 37170066, "question_id": 37169704, "link": "https://stackoverflow.com/questions/37169704/read-write-bmp-png-grey-scale-image-with-c-or-c/37170066#37170066", "title": "Read/Write BMP/PNG grey scale image with C or C++", "body": "<p>I memorized some rules from C++ too when I was young. Sadly, I need to memorize them again if I am to use them. To answer your question (I'm attempting to do so), </p>\n\n<p>1.) I think you're getting confused with reading an image into C++. Vanilla C++ in itself has no standard libraries to read images, use something like openCV or ITK toolbox to get relevant functions.</p>\n\n<p>2.) Yes you can convert the read image into a 1D float array but there are no in-built ways that would automatically treat that 1D float array as an image, even with external toolboxes present. For eg. you read images into Mat objects in OpenCV: from there onwards, you can do whatever you want with it, even convert it into a really long 1D array. But it wont serve your purpose.</p>\n\n<p>3.) I mean I still cant understand the 1D part, I like old school code too but that's just pushing it, man. In fact I'll say, install OpenCV, and memorize its documentation, you'll be able to do all that you mentioned and even more.</p>\n"}], "owner": {"reputation": 1, "user_id": 6321619, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208252551824329/picture?type=large", "display_name": "Gabriele Fumarco", "link": "https://stackoverflow.com/users/6321619/gabriele-fumarco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1122, "favorite_count": 1, "answer_count": 1, "score": -4, "last_activity_date": 1463430878, "creation_date": 1462988201, "last_edit_date": 1463026772, "question_id": 37169704, "link": "https://stackoverflow.com/questions/37169704/read-write-bmp-png-grey-scale-image-with-c-or-c", "title": "Read/Write BMP/PNG grey scale image with C or C++", "body": "<p><em>I'm rewording it because someone thougth it was \"off topic\" and some other rude responses without thinking about my efforts and all the searches, many thanks to locking me for 4 days just because 2 of you thought I didn't write a single line of code</em></p>\n\n<p><em>I will write my puny failures and be assured, i used the search button</em></p>\n\n<p>I'm doing an imageprocessing project in C and CUDA. I knew the core of the problem but I encountered a little problem</p>\n\n<p><strong>read and write a grey scale image (PNG or BMP) as input&amp;output</strong></p>\n\n<p>My \"think about it later\" strategy was the same of my colleagues:</p>\n\n<p>1) use a Matlab script using: <code>[X,map] = imread('xray.png');</code></p>\n\n<p>map is pretty useless with a grey scale (useful for RGB files) but X returned me a Width x Height matrix with intergers as a various scale of \"brightness\"</p>\n\n<p>2) use the fprintf function in Matlab to write a xray.txt with 3 lines:</p>\n\n<ol>\n<li>Width</li>\n<li>Heigth</li>\n<li>Width*Heigth line of integers separated with a space</li>\n</ol>\n\n<p>3) import the data in C like this:</p>\n\n<pre><code>        FILE *image;\n        image = fopen(\"xray.txt\",\"r\");\n        width=fscanf(image,\"%f\\n\",&amp;width);\n        heigth=fscanf(image,\"%f\\n\",&amp;heigth);\n        pixels=(float *) calloc(width*heigth, sizeof(float));\n        for (int i = 0; i &lt; width*heigth; i++) {\n        fscanf(image,\"%f \",&amp;pixels[i]);\n        }\n        fclose(image);\n</code></pre>\n\n<p>4) <strong>OFFTOPIC</strong> core of the image processing algorithm where I <strong>NEED</strong> a 1D float array (the second version of the code is in CUDA). I need the code to be the same, for the time of processing confrontation</p>\n\n<p>5) reverse process: from width, height, pixels, i write a xrayout.txt, xrayedges.txt</p>\n\n<p>6) second MatLab script that from xrayout.txt &amp; xrayedges.txt generate xrayout.bmp &amp; xrayedges.bmp.. Not worth posting, it's the reverse process of imRead</p>\n\n<p>The project itslef is complete, it all works well but it really nags me that I couldn't find an \"only C\" solution</p>\n\n<p>Do someone know some easy way to read and write a grey scale PNG knowing: width, heigth, pixel values?\nIs there a function that can import BMP o PNG images?\nIt doesn't matter if it need a 2D array, i can work my way out</p>\n\n<p><strong>NOTE 1: by easy way i mean \"vanilla C\", without using some exotic libraries o other languages (if so, I will stick with the MatLab scripts)</strong></p>\n\n<p><strong>NOTE 2: i TRIED (with multiple failures) and searched in stackoverflow and google, posting this post is my last possibility, so please be gentle</strong></p>\n"}, {"tags": ["c++", "pointers", "memory-leaks", "free"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1462988584, "post_id": 37169675, "comment_id": 61874435, "body": "What tells you it isn&#39;t working? Also, it looks like this will always throw if there&#39;s no NULL elements."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1462988775, "post_id": 37169675, "comment_id": 61874551, "body": "Describing a problem as &quot;doesn&#39;t seem to be working&quot; isn&#39;t helpful. What <i>exactly</i> goes wrong?"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1462988843, "post_id": 37169675, "comment_id": 61874597, "body": "Please post <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>(stackoverflow.com/help/mcve)."}, {"owner": {"reputation": 2289, "user_id": 2999762, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/39Uia.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2999762/simon"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1462988924, "post_id": 37169675, "comment_id": 61874661, "body": "@DavidSchwartz I meant the program triggers a breakpoint and shuts down"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1462989343, "post_id": 37169675, "comment_id": 61874939, "body": "There&#39;s nothing in your code to indicate you have to free any memory. Better post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1462989395, "post_id": 37169675, "comment_id": 61874966, "body": "@Simon Then you probably put some address into the queue that&#39;s not legal to <code>delete</code>. You can only <code>delete</code> what you <code>new</code>."}], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1462988606, "post_id": 37169824, "comment_id": 61874448, "body": "He&#39;s using <code>std::vector&lt;node*&gt;</code> not <code>std::vector&lt;node&gt;</code>"}, {"owner": {"reputation": 21, "user_id": 6205787, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fc494ce11fd9a2636677e72a0991f218?s=128&d=identicon&r=PG", "display_name": "Russ", "link": "https://stackoverflow.com/users/6205787/russ"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462988807, "post_id": 37169824, "comment_id": 61874578, "body": "std::vector&lt;node *&gt; still requires all memory cells for all pointers to be contiguous in memory. The example of std::vector still applies to std::priority_queue in that he can&#39;t free the memory std::priority_queue allocates."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462988854, "post_id": 37169824, "comment_id": 61874603, "body": "Yes but he&#39;s not trying to delete the pointers, he&#39;s deleting what they&#39;re pointing at."}, {"owner": {"reputation": 21, "user_id": 6205787, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fc494ce11fd9a2636677e72a0991f218?s=128&d=identicon&r=PG", "display_name": "Russ", "link": "https://stackoverflow.com/users/6205787/russ"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1462989053, "post_id": 37169824, "comment_id": 61874763, "body": "I interpreted the question to ask &quot;how can I free the memory that is allocated by std::priority_queue&quot;. Not how can I free the node memory because his code calls delete for that memory."}, {"owner": {"reputation": 2289, "user_id": 2999762, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/39Uia.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2999762/simon"}, "edited": false, "score": 0, "creation_date": 1462989225, "post_id": 37169824, "comment_id": 61874867, "body": "@Russ sorry, I meant to free the memory allocated by the nodes"}], "tags": [], "owner": {"reputation": 21, "user_id": 6205787, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/fc494ce11fd9a2636677e72a0991f218?s=128&d=identicon&r=PG", "display_name": "Russ", "link": "https://stackoverflow.com/users/6205787/russ"}, "is_accepted": false, "score": 0, "last_activity_date": 1462988561, "creation_date": 1462988561, "answer_id": 37169824, "question_id": 37169675, "link": "https://stackoverflow.com/questions/37169675/c-freeing-memory-in-priority-queue/37169824#37169824", "title": "c++ freeing memory in priority_queue", "body": "<p>Just like most std:: containers, the memory may or may not be freed when you want it to be. Memory is usually kept around for a longer time so that when you perform a heap.push or equivalent operation, the memory doesn't need to be allocated again.</p>\n\n<p>Think of std::vector which has to allocate a new set of memory for the entire vector each time it grows (vector data must be contiguous in memory). It is more efficient for std::vector to perform a large one time allocation and keep the memory around so that the growth operation  doesn't kill performance -- a) allocate new space big enough, b) copy entire contents of existing vector to new vector space, c) delete the old vector space.</p>\n\n<p>Bottom line is you can't force it to free memory for individual items.</p>\n"}, {"tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": false, "score": 3, "last_activity_date": 1462989515, "creation_date": 1462989515, "answer_id": 37170104, "question_id": 37169675, "link": "https://stackoverflow.com/questions/37169675/c-freeing-memory-in-priority-queue/37170104#37170104", "title": "c++ freeing memory in priority_queue", "body": "<p>Looks like you'll want to do something more like this:</p>\n\n<pre><code>while (!heap.empty())\n{ /* the rest ... */ }\n</code></pre>\n\n<p>If the heap is empty, <code>.top()</code> will throw an exception because there's nothing to return, which will happen when you are popping elements. </p>\n\n<p>Also, if available you should use </p>\n\n<pre><code>priority_queue&lt;std::unique_ptr&lt;node&gt;, std::vector&lt;std::unique_ptr&lt;node&gt;&gt;, CompareNodes&gt; heap;\n</code></pre>\n\n<p>so you don't have to worry about clearing the memory yourself. </p>\n"}], "owner": {"reputation": 2289, "user_id": 2999762, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/39Uia.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/2999762/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1462989515, "creation_date": 1462988102, "question_id": 37169675, "link": "https://stackoverflow.com/questions/37169675/c-freeing-memory-in-priority-queue", "title": "c++ freeing memory in priority_queue", "body": "<p>I have a </p>\n\n<pre><code>priority_queue&lt;node*, std::vector&lt;node*&gt;, CompareNodes&gt; heap;\n</code></pre>\n\n<p>Let's say the node consists of: </p>\n\n<pre><code>class node {\npublic:\n    int value;\n    int key;\n    int order = 1000000;\n};  \n</code></pre>\n\n<p>How do I free the memory after i'm done with the priority queue? \nMy approach doesn't seem to be working: </p>\n\n<pre><code>while (heap.top()) {\n\n        node * t = heap.top();\n        heap.pop();\n        delete t;\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++builder-xe8"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 5, "creation_date": 1462988137, "post_id": 37169629, "comment_id": 61874154, "body": "What&#39;s the <code>return</code> type of those <code>String</code> member functions and what types are the parameters <code>String.Delete</code> accepts?"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462988203, "post_id": 37169629, "comment_id": 61874188, "body": "My guess is that <code>str[0]</code> should simply be <code>str</code>, or <code>&amp;(str[0])</code> if you like"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1462989166, "post_id": 37169629, "comment_id": 61874826, "body": "Maybe you should show the header for your <code>String</code> class since we don&#39;t have it. Please edit your question and add the header as text."}, {"owner": {"reputation": 562, "user_id": 2272357, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d3d250d994db4c4d9c2a1c14de245ef9?s=128&d=identicon&r=PG", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/2272357/happycoding"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462989640, "post_id": 37169629, "comment_id": 61875087, "body": "@drescherjm Are you asking for one of the following? <code>extern PACKAGE String\t__fastcall RemoveCharsFromString(String &amp;str, const String &amp;c);</code> or <code>typedef UnicodeString        String;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1462989751, "post_id": 37169629, "comment_id": 61875157, "body": "Your header for the class <code>String</code> that you are writing. It&#39;s hard to help without seeing the specifics of your implementation."}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1462989796, "post_id": 37169629, "comment_id": 61875186, "body": "Also show us the code of <code>remove()</code>"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 2, "creation_date": 1462990170, "post_id": 37169629, "comment_id": 61875438, "body": "Guys, my guess is that <code>remove</code> is <code>std::remove</code>. And that the other methods are from <a href=\"http://docwiki.embarcadero.com/Libraries/XE8/en/System.WideString.LastChar\" rel=\"nofollow noreferrer\">this library</a>."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1462990259, "post_id": 37169629, "comment_id": 61875493, "body": "@HappyCoding, can you replace <code>remove</code> with <code>std::remove</code> please, and confirm the problem still occurs? Then, edit the question in the same way."}, {"owner": {"reputation": 562, "user_id": 2272357, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d3d250d994db4c4d9c2a1c14de245ef9?s=128&d=identicon&r=PG", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/2272357/happycoding"}, "reply_to_user": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "edited": false, "score": 0, "creation_date": 1462990352, "post_id": 37169629, "comment_id": 61875530, "body": "@CinCout Added the <code>remove()</code> code and source as requested. It can be used by <code>#include &lt;algorithm&gt;</code>"}, {"owner": {"reputation": 8251, "user_id": 2912665, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/XrRhd.jpg?s=128&g=1", "display_name": "CinCout", "link": "https://stackoverflow.com/users/2912665/cincout"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462990431, "post_id": 37169629, "comment_id": 61875575, "body": "It, in fact, was the <code>std::remove()</code> @AaronMcDaid"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 1, "creation_date": 1462990617, "post_id": 37169629, "comment_id": 61875692, "body": "For simplicity, I&#39;ve edited the question to say <code>std::remove</code>. There should be no doubt that it is <code>std::remove</code> - any confusion will simply make it more difficult for others to join in this discussion. <code>std::remove</code> is well known"}, {"owner": {"reputation": 562, "user_id": 2272357, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d3d250d994db4c4d9c2a1c14de245ef9?s=128&d=identicon&r=PG", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/2272357/happycoding"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462990623, "post_id": 37169629, "comment_id": 61875698, "body": "@AaronMcDaid replaced <code>remove</code> with <code>std::remove</code> and received a different error. <code>Could not find a match for &#39;remove(wchar_t,wchar_t*,wchar_t)&#39;</code>"}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462990681, "post_id": 37169629, "comment_id": 61875729, "body": "@HappyCoding, that is a very similar error which confirms that <code>str[0]</code> is the issue. It is a character (<code>wchar_t</code>), not a string"}, {"owner": {"reputation": 562, "user_id": 2272357, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d3d250d994db4c4d9c2a1c14de245ef9?s=128&d=identicon&r=PG", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/2272357/happycoding"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462991750, "post_id": 37169629, "comment_id": 61876252, "body": "@AaronMcDaid I updated the question to reflect the two different scenarios you pointed out."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1462999391, "last_edit_date": 1462999391, "creation_date": 1462998291, "answer_id": 37172635, "question_id": 37169629, "link": "https://stackoverflow.com/questions/37169629/cannot-convert-int-to-const-char/37172635#37172635", "title": "Cannot Convert &#39;int&#39; to &#39;const char *&#39;", "body": "<p>In C++Builder, <code>String</code> refers to <code>System::String</code>, which is an alias for <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.UnicodeString\" rel=\"nofollow\"><code>System::UnicodeString</code></a> in XE8.</p>\n\n<p>There are a lot of mistakes in your code.</p>\n\n<p>The <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.UnicodeString.Delete\" rel=\"nofollow\"><code>System::String::Delete()</code></a> method expects an index and a count as input, but that is not what you are trying to pass to it.  You are expecting <code>Delete()</code> to work like the STL <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/erase\" rel=\"nofollow\"><code>std::wstring::erase()</code></a> method, and that is simply not the case.</p>\n\n<p>You are not taking into account that <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.UnicodeString.operator_H5BH5D\" rel=\"nofollow\"><code>System::String::operator[]</code></a> is 1-based.  It is not 0-based, like your code is assuming.</p>\n\n<p>The <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.UnicodeString.LastChar\" rel=\"nofollow\"><code>System::String::LastChar()</code></a> method returns a pointer to the last UTF-16 encoded Unicode character in the string.  It does not return a pointer to the string's null terminator, like your code is assuming.</p>\n\n<p>You are calling the STL <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow\"><code>std::remove()</code></a> algorithm that takes a range of <code>iterator</code>s as input, shifts all copies of the specified value to the end of the range, and then returns a new <code>iterator</code> to where the \"removed\" values have been moved to within the range (so they can be <code>erase()</code>'d from the container that owns the <code>iterator</code>s).  You cannot mix <code>System::String::Delete()</code> and <code>std::remove()</code> the way you are attempting to do.  If you really want to use <code>std::replace()</code>, you need to use it more like this instead:</p>\n\n<pre><code>String __fastcall RemoveCharsFromString(String &amp;str, const String &amp;c)\n{\n    for(int i = 1; i &lt;= c.Length(); ++i)\n    {\n        const Char *start = str.c_str();\n        const Char* end = start + str.Length();\n        Char* ptr = std::replace(start, end, c[i]);\n        str.Delete(1 + std::distance(start, ptr), std::distance(ptr, end));\n    }\n}\n</code></pre>\n\n<p>That being said, Embarcadero's RTL has its own <a href=\"http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.StringReplace\" rel=\"nofollow\"><code>System::Sysutils::StringReplace()</code></a> function that you can use instead of <code>std::replace()</code>:</p>\n\n<pre><code>#include &lt;System.SysUtils.hpp&gt;\n\nString __fastcall RemoveCharsFromString(String &amp;str, const String &amp;c)\n{\n    for(int i = 1; i &lt;= c.Length(); ++i)\n    {\n        str = StringReplace(str, c[i], L\"\", TReplaceFlags() &lt;&lt; rfReplaceAll);\n    }\n}\n</code></pre>\n\n<p>Or, if you need to take UTF-16 surrogates into account in the <code>c</code> string (which <code>std::remove()</code> does not account for):</p>\n\n<pre><code>#include &lt;System.SysUtils.hpp&gt;\n#include &lt;System.Character.hpp&gt;\n\nString __fastcall RemoveCharsFromString(String &amp;str, const String &amp;c)\n{\n    int i = 1; \n    while (i &lt;= c.Length())\n    {\n        String chr;\n        if (IsSurrogatePair(c, i))\n            chr = c.SubString(i, 2);\n        else\n            chr = c.SubString(i, 1);\n        str = StringReplace(str, chr, L\"\", TReplaceFlags() &lt;&lt; rfReplaceAll);\n        i += chr.Length(); \n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 2272357, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/d3d250d994db4c4d9c2a1c14de245ef9?s=128&d=identicon&r=PG", "display_name": "HappyCoding", "link": "https://stackoverflow.com/users/2272357/happycoding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4486, "favorite_count": 1, "accepted_answer_id": 37172635, "answer_count": 1, "score": 2, "last_activity_date": 1463004680, "creation_date": 1462987960, "last_edit_date": 1462991632, "question_id": 37169629, "link": "https://stackoverflow.com/questions/37169629/cannot-convert-int-to-const-char", "title": "Cannot Convert &#39;int&#39; to &#39;const char *&#39;", "body": "<p>I'm working with c++ and XE8. Given the following code:</p>\n\n<pre><code>String __fastcall RemoveCharsFromString(String &amp;str, const String &amp;c)\n{\n    for(unsigned int i=0; i&lt;c.Length(); ++i)\n    {\n        str.Delete(std::remove(str[0], str.LastChar(), c[i]), str.LastChar());\n    }\n}\n</code></pre>\n\n<p>Received errors:</p>\n\n<ul>\n<li><p>Using <code>str.Delete(remove(str[0], str.LastChar(), c[i]), str.LastChar());</code> results in a </p>\n\n<blockquote>\n  <p>Cannot convert 'int' to 'const char *'</p>\n</blockquote>\n\n<p>error inside the for loop.</p></li>\n<li><p>Using <code>str.Delete(std::remove(str[0], str.LastChar(), c[i]), str.LastChar());</code> results in a </p>\n\n<blockquote>\n  <p>Could not find a match for 'remove(wchar_t,wchar_t*,wchar_t)'</p>\n</blockquote>\n\n<p>error inside the for loop.</p></li>\n</ul>\n\n<p>Searching SO and the web, it's my understanding this error is usually received when code  is written with single quotes when double quotes should have been used. I don't believe that scenario is applicable in this case.</p>\n\n<p>The return type of <code>String</code> is Embarcadero's <code>UnicodeString</code>. Details can be found here: <a href=\"http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/System__UnicodeString.html\" rel=\"nofollow\">RAD Studio VCL Reference - UnicodeString Class</a></p>\n"}, {"tags": ["c++", "recursion", "boost", "vector", "boost-variant"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 1, "creation_date": 1462991557, "post_id": 37169384, "comment_id": 61876156, "body": "it wouldn&#39;t be unusual to find that there is a bug is MSVS2013 or an old version of boost. This might be a good opportunity to argue that your organisation ought to do the right thing and upgrade?"}, {"owner": {"reputation": 1, "user_id": 5224468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45c3f564297bcf29c06094ba1b8cc0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/5224468/alexander-kabanov"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1463037188, "post_id": 37169384, "comment_id": 61893118, "body": "@RichardHodges I could not agree more, but the cogs turn slowly and, in the meantime, I do need a workaround..."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1463045157, "post_id": 37169384, "comment_id": 61898509, "body": "does sehe&#39;s solution help? I&#39;d offer to try it but since it cost me 2 days to get vs2015 installed on my Windows computer I don&#39;t dare try a side-by-side install. These days if I need to write code for Windows I use clang or Cygwin. I just don&#39;t trust Microsoft..."}], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1462993156, "creation_date": 1462993156, "answer_id": 37171196, "question_id": 37169384, "link": "https://stackoverflow.com/questions/37169384/boostvariant-strange-behaviour-with-a-recursive-vector-type/37171196#37171196", "title": "boost::variant: strange behaviour with a recursive vector type", "body": "<p>This indeed seems to be one of many bugs with uniform initialization/initializer lists. The code is \"fine\" (in the sense that that doesn't trigger UB)</p>\n\n<p>If it's anything similar to the bugs I ran into, you could try to specify the typenames explicitly:</p>\n\n<pre><code>v.emplace_back(std::vector&lt;TestVariant&gt;{ \n     TestVariant(std::vector&lt;TestVariant&gt;{}), \n     TestVariant(std::vector&lt;int&gt;{}) }); \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5224468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b45c3f564297bcf29c06094ba1b8cc0c?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Kabanov", "link": "https://stackoverflow.com/users/5224468/alexander-kabanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462993156, "creation_date": 1462987262, "question_id": 37169384, "link": "https://stackoverflow.com/questions/37169384/boostvariant-strange-behaviour-with-a-recursive-vector-type", "title": "boost::variant: strange behaviour with a recursive vector type", "body": "<p>I have a class with a single member that is a <code>boost::variant</code> of two types: a <code>vector</code> of integers and a <code>vector</code> of the containing class objects (the latter obviously needs to be done with the help of <code>recursive_wrapper</code>). The code for the class is below</p>\n\n<pre><code>#include &lt;boost/variant/variant.hpp&gt;\n#include &lt;boost/variant/recursive_wrapper.hpp&gt;\n\n#include &lt;vector&gt;\n\nclass TestVariant\n{\npublic:\n\n    typedef boost::variant&lt; std::vector&lt;int&gt;, boost::recursive_wrapper&lt;std::vector&lt;TestVariant&gt; &gt; &gt; StorageType;\n\n    TestVariant():\n        m_value{ std::vector&lt;int&gt;{} }\n    {}\n\n    TestVariant(const TestVariant&amp; other):\n        m_value{ other.m_value }\n    {}\n\n    TestVariant&amp; operator=(const TestVariant&amp; other)\n    {\n        m_value = other.m_value;\n\n        return *this;\n    }\n\n    TestVariant(TestVariant&amp;&amp; other):\n        m_value{ std::move(other.m_value) }\n    {}\n\n    TestVariant&amp; operator=(TestVariant&amp;&amp; other)\n    {\n        m_value = std::move(other.m_value);\n\n        return *this;\n    }\n\n    TestVariant(const std::vector&lt;int&gt;&amp; value):\n        m_value{ value }\n    {}\n\n    TestVariant(std::vector&lt;int&gt;&amp;&amp; value):\n        m_value{ std::move(value) }\n    {}\n\n    TestVariant(const std::vector&lt;TestVariant&gt;&amp; value):\n        m_value{ value }\n    {}\n\n    TestVariant(std::vector&lt;TestVariant&gt;&amp;&amp; value):\n        m_value{ std::move(value) }\n    {}\n\nprivate:\n\n    StorageType m_value;\n};\n</code></pre>\n\n<p>When I try using this class by creating a <code>vector</code> of <code>TestVariant</code> and emplacing an instance of a recursive instance of TestVariant as below</p>\n\n<pre><code>std::vector&lt;TestVariant&gt; v;\n\nv.emplace_back(std::vector&lt;TestVariant&gt;{ std::vector&lt;TestVariant&gt;{}, std::vector&lt;int&gt;{} }); // access violation!\n</code></pre>\n\n<p>I get an \"access violation\" exception under MSVS 2013 and Boost ver 1.53 (I know this is an old version of Boost, but I am organisationally constrained to using it at the moment). The same code on coliru works fine (see <a href=\"http://coliru.stacked-crooked.com/a/4b8d2805d54a733f\" rel=\"nofollow\">here</a>).</p>\n\n<p>What is even stranger is that if I switch the order of the two vectors, everything seems to be fine in MSVS 2013</p>\n\n<pre><code>std::vector&lt;TestVariant&gt; v;\n\nv.emplace_back(std::vector&lt;TestVariant&gt;{std::vector&lt;int&gt;{}, std::vector&lt;TestVariant&gt;{} }); // works!\n</code></pre>\n\n<p>Any ideas? I have been trying to solve this for a day now...</p>\n"}, {"tags": ["c++", "g++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1462987324, "post_id": 37169340, "comment_id": 61873657, "body": "Why not just read them in from a file?"}, {"owner": {"reputation": 434, "user_id": 2936403, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/532dabb376b6bb4c6e2031ac19553336?s=128&d=identicon&r=PG&f=1", "display_name": "DiscobarMolokai", "link": "https://stackoverflow.com/users/2936403/discobarmolokai"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462987462, "post_id": 37169340, "comment_id": 61873736, "body": "@NathanOliver I would like to avoid external resources and just have the list compiled into the executable."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 5, "creation_date": 1462987886, "post_id": 37169340, "comment_id": 61874002, "body": "FWIW, using <code>char const* words [] = { ... };</code> works for me."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1462987988, "post_id": 37169340, "comment_id": 61874063, "body": "This should only take a few MB.  Check <code>ulimit</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1462988023, "post_id": 37169340, "comment_id": 61874090, "body": "Prefer not to place variables in header files.  Every source file that includes the header file will get a copy of the global variable.  This may violate the One Definition Rule (linker will complain about multiple copies).  Move to a source file."}, {"owner": {"reputation": 434, "user_id": 2936403, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/532dabb376b6bb4c6e2031ac19553336?s=128&d=identicon&r=PG&f=1", "display_name": "DiscobarMolokai", "link": "https://stackoverflow.com/users/2936403/discobarmolokai"}, "edited": false, "score": 0, "creation_date": 1462988513, "post_id": 37169340, "comment_id": 61874392, "body": "I currently placed it in a source file, and already decided to use a static char * with a function to build the vector of strings at runtime. I am wondering whether there is a benefit to the initializer list, though, if I can get it to compile."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1462991223, "post_id": 37169340, "comment_id": 61876004, "body": "in how many source files is that header included?"}], "answers": [{"comments": [{"owner": {"reputation": 434, "user_id": 2936403, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/532dabb376b6bb4c6e2031ac19553336?s=128&d=identicon&r=PG&f=1", "display_name": "DiscobarMolokai", "link": "https://stackoverflow.com/users/2936403/discobarmolokai"}, "edited": false, "score": 0, "creation_date": 1462995471, "post_id": 37171508, "comment_id": 61878316, "body": "Exactly what I needed +1. I currently use C style arrays and it works fine."}], "tags": [], "owner": {"reputation": 2387, "user_id": 3818191, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/aca92340c2b2e2bb08aeb1441914e929?s=128&d=identicon&r=PG&f=1", "display_name": "JCx", "link": "https://stackoverflow.com/users/3818191/jcx"}, "is_accepted": true, "score": 1, "last_activity_date": 1462994235, "last_edit_date": 1495540790, "creation_date": 1462994235, "answer_id": 37171508, "question_id": 37169340, "link": "https://stackoverflow.com/questions/37169340/g-compiling-a-huge-static-stdvector/37171508#37171508", "title": "g++: compiling a huge static std::vector", "body": "<p>As R Shau says, this is a good solution:</p>\n\n<pre><code>char const* words [] = { ... };\n</code></pre>\n\n<p>It seems that when you initialize a std::string the compiler has to generate a call to the std::string constructor so the memory can be allocated on the heap.  It doesn't seem to generate any kind of loop ... you get a lot of assembly language out the back. </p>\n\n<p>It does a lot better initializing a vector of integers, but still compared to the old C style array it's a lot of overhead.</p>\n\n<p>There are also various tricks for embedding arbitrary data into your C/C++ program.  Some references: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/2627004/embedding-binary-blobs-using-gcc-mingw\">Embedding binary blobs using gcc mingw</a></li>\n<li><a href=\"https://www.fourmilab.ch/xd/\" rel=\"nofollow noreferrer\">https://www.fourmilab.ch/xd/</a></li>\n</ul>\n"}], "owner": {"reputation": 434, "user_id": 2936403, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/532dabb376b6bb4c6e2031ac19553336?s=128&d=identicon&r=PG&f=1", "display_name": "DiscobarMolokai", "link": "https://stackoverflow.com/users/2936403/discobarmolokai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 37171508, "answer_count": 1, "score": 1, "last_activity_date": 1462994235, "creation_date": 1462987158, "question_id": 37169340, "link": "https://stackoverflow.com/questions/37169340/g-compiling-a-huge-static-stdvector", "title": "g++: compiling a huge static std::vector", "body": "<p>I have generated a sorted list of about 117000 English words, which I have put into a <code>std::vector&lt;std::string&gt;</code> in a C++ header file, like so:</p>\n\n<pre><code>#ifndef WORDS_HPP\n#define WORDS_HPP\n\n#include &lt;vector&gt;\n#include &lt;string&gt;\n\nconst std::vector&lt;std::string&gt; words{\n    \"a\",\n    \"a\\'s\",\n    \"aa\",\n    \"aa\\'s\",\n    \"aaa\",\n\n/* &gt;100k lines omitted */\n\n    \"zyuganov\",\n    \"zyuganov\\'s\",\n    \"zzz\"\n};\n\n#endif\n</code></pre>\n\n<p>When including this monstrosity in a .cpp file and compiling the thing with g++ (Debian 4.9.2-10) 4.9.2, the compiler causes my system to run out of memory. I only have 4 GB, unfortunately.</p>\n\n<p>I would like to have the vector compiled statically into my executable (toy project, FYI), but obviously I can't get it to work. How do I solve this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8862, "user_id": 148059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f5fc9fc6475627945a0b6f8c3b9be50?s=128&d=identicon&r=PG", "display_name": "atk", "link": "https://stackoverflow.com/users/148059/atk"}, "edited": false, "score": 0, "creation_date": 1462987381, "post_id": 37169333, "comment_id": 61873686, "body": "Are you showing everything? &#39;packet&#39; is initialized to &#39;null&#39; then dereferenced to get &#39;me&#39;, passed as the destination..."}, {"owner": {"reputation": 55, "user_id": 6278712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61af83dfaf1cf7f8595f9fedea344737?s=128&d=identicon&r=PG&f=1", "display_name": "Igna94", "link": "https://stackoverflow.com/users/6278712/igna94"}, "reply_to_user": {"reputation": 8862, "user_id": 148059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f5fc9fc6475627945a0b6f8c3b9be50?s=128&d=identicon&r=PG", "display_name": "atk", "link": "https://stackoverflow.com/users/148059/atk"}, "edited": false, "score": 0, "creation_date": 1462987773, "post_id": 37169333, "comment_id": 61873934, "body": "Yes, i am showing all, yes that can be the problem"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1462988548, "post_id": 37169333, "comment_id": 61874417, "body": "You should use <code>nullptr</code> in c++ not <code>NULL</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462995940, "post_id": 37169333, "comment_id": 61878566, "body": "Your teacher is write about not using <code>malloc</code>. <code>malloc</code> should not be used in C++ except in the rarest of occasions. Instead statically allocate as per Gill Bates&#39;s answer. If a static allocation cannot work, use <code>new</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 3, "last_activity_date": 1462987360, "creation_date": 1462987360, "answer_id": 37169412, "question_id": 37169333, "link": "https://stackoverflow.com/questions/37169333/c-segmentation-fault-with-structs-and-memcpy/37169412#37169412", "title": "C++ Segmentation Fault with structs and memcpy", "body": "<p><code>packet</code> points to <code>NULL</code> and thus dereferencing it causes Undefined Behaviour, in this case a segmentation fault. To do this without <code>malloc</code> just create a local object:</p>\n\n<pre><code>struct ethernet_frame packet;\nMACAddress mymac = { 0 }; \nget_my_mac_address(&amp;mymac);\nmemcpy(&amp;packet.me, &amp;mymac, sizeof(mymac)); \n</code></pre>\n\n<p>Note that I also added <code>&amp;</code> to the function calls. Which returns the address of the variable and thus allows you to pass a pointer to a local object.</p>\n"}, {"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462987537, "post_id": 37169452, "comment_id": 61873770, "body": "You should pass the address of the structures to memcpy"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1462988406, "post_id": 37169452, "comment_id": 61874331, "body": "<code>packet</code> is initialized to <code>NULL</code>, this is not the same as unintialized."}], "tags": [], "owner": {"reputation": 3782, "user_id": 839211, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/THWvr.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/839211/felipe"}, "is_accepted": false, "score": 0, "last_activity_date": 1462987479, "creation_date": 1462987479, "answer_id": 37169452, "question_id": 37169333, "link": "https://stackoverflow.com/questions/37169333/c-segmentation-fault-with-structs-and-memcpy/37169452#37169452", "title": "C++ Segmentation Fault with structs and memcpy", "body": "<p>I think that the problem is here: <code>packet-&gt;me</code> since you are trying to refer to an uninitialized pointer: <code>packet</code>. If you want to use your struct as a pointer you must use either malloc or new to allocate its memory in the heap.</p>\n\n<p>If you don't want to use malloc or new, you should create a local variable. Try this:</p>\n\n<pre><code>int send_to_ip(IPAddress ip, void *data) {\n\n  struct ethernet_frame packet;\n  MACAddress mymac = { 0 }; \n  get_my_mac_address(mymac); // this funcions is fine, and returns void \n  // this is the line that causes segmentation fault\n  memcpy(packet.me, mymac, sizeof(mymac)); \n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6278712, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/61af83dfaf1cf7f8595f9fedea344737?s=128&d=identicon&r=PG&f=1", "display_name": "Igna94", "link": "https://stackoverflow.com/users/6278712/igna94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 612, "favorite_count": 0, "accepted_answer_id": 37169412, "answer_count": 2, "score": 0, "last_activity_date": 1462987479, "creation_date": 1462987130, "question_id": 37169333, "link": "https://stackoverflow.com/questions/37169333/c-segmentation-fault-with-structs-and-memcpy", "title": "C++ Segmentation Fault with structs and memcpy", "body": "<p>Hi i am trying to do this .. and i have a segmentation fault, mi teacher don't let me use malloc, is possible to do this without malloc ? </p>\n\n<pre><code>typedef unsigned char IPAddress[4]; \ntypedef unsigned char MACAddress[6];\n\n\nstruct ethernet_frame {\n  MACAddress host; \n  MACAddress me;\n  uint16_t type ;\n  unsigned char payload[1500];\n} __attribute__((__packed__)); \nstruct ethernet_frame frame; \n\n\n\nint send_to_ip(IPAddress ip, void *data) {\n\n  struct ethernet_frame *packet = NULL ;\n  MACAddress mymac = { 0 }; \n  get_my_mac_address(mymac); // this funcions is fine, and returns void \n  // this is the line that causes segmentation fault\n  memcpy(packet-&gt;me, mymac, sizeof(mymac)); \n\n\n  / ... implementation continue  .../\n</code></pre>\n"}, {"tags": ["c++", "mfc", "visual-c++-2012"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1462986983, "post_id": 37169225, "comment_id": 61873456, "body": "According to the <a href=\"https://msdn.microsoft.com/en-us/library/9ab3z9tb%28v=vs.110%29.aspx\" rel=\"nofollow noreferrer\">documentation</a>, the parameter of the handler function should be an unsigned int -- you have it as a signed int."}, {"owner": {"reputation": 31, "user_id": 6321456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n8M84_cD7s0/AAAAAAAAAAI/AAAAAAAAAAA/A3Ri9kqpB98/photo.jpg?sz=128", "display_name": "Nima Nikvand", "link": "https://stackoverflow.com/users/6321456/nima-nikvand"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1462987605, "post_id": 37169225, "comment_id": 61873823, "body": "Thanks, such a simple issue, I thought the compiler would neglect the slight difference like that in function prototype!"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1462996149, "post_id": 37169225, "comment_id": 61878691, "body": "They are two distinct types each with a different range of values, that&#39;s a more than a <i>slight</i> difference, and certainly nothing a compiler should neglect. As marcinj mentions, the C++ compiler in VS6 is certainly not the epitome of standards compliance, so don&#39;t expect code to be correct just because it didn&#39;t complain."}], "answers": [{"tags": [], "owner": {"reputation": 6090, "user_id": 4699340, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U4Ums.jpg?s=128&g=1", "display_name": "Andrew Komiagin", "link": "https://stackoverflow.com/users/4699340/andrew-komiagin"}, "is_accepted": false, "score": 5, "last_activity_date": 1462987085, "creation_date": 1462987085, "answer_id": 37169322, "question_id": 37169225, "link": "https://stackoverflow.com/questions/37169225/issue-with-conversion-from-visual-c-6-0-to-visual-studio-2012/37169322#37169322", "title": "Issue with conversion from Visual C++ 6.0 to Visual Studio 2012", "body": "<p>Your handler should be defined like this: </p>\n\n<pre><code>void CTrendDlg::OnCheckButtons(UINT id) \n</code></pre>\n\n<p>So basically change <code>int</code> to <code>UINT</code></p>\n"}, {"tags": [], "owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "is_accepted": false, "score": 2, "last_activity_date": 1462987640, "creation_date": 1462987640, "answer_id": 37169490, "question_id": 37169225, "link": "https://stackoverflow.com/questions/37169225/issue-with-conversion-from-visual-c-6-0-to-visual-studio-2012/37169490#37169490", "title": "Issue with conversion from Visual C++ 6.0 to Visual Studio 2012", "body": "<p>See here how this macro <a href=\"https://msdn.microsoft.com/pl-pl/library/9ab3z9tb.aspx\" rel=\"nofollow\">ON_COMMAND_RANGE</a> should be used:</p>\n\n<p>1) You need a proper signature, return <code>void</code> and the parameter should be of type <code>UINT</code></p>\n\n<p>2) Qualify your method with class name:</p>\n\n<pre><code>ON_COMMAND_RANGE(IDC_CHECK_PEN, IDC_CHECK_GRID, &amp;CTrendDlg::OnCheckButtons)\n                                                ^^^^^^^^^^^^\n</code></pre>\n\n<p>VS 6.0 is quite old, modern VS versions are more standard conformant.</p>\n"}], "owner": {"reputation": 31, "user_id": 6321456, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n8M84_cD7s0/AAAAAAAAAAI/AAAAAAAAAAA/A3Ri9kqpB98/photo.jpg?sz=128", "display_name": "Nima Nikvand", "link": "https://stackoverflow.com/users/6321456/nima-nikvand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1462987640, "creation_date": 1462986748, "last_edit_date": 1592644375, "question_id": 37169225, "link": "https://stackoverflow.com/questions/37169225/issue-with-conversion-from-visual-c-6-0-to-visual-studio-2012", "title": "Issue with conversion from Visual C++ 6.0 to Visual Studio 2012", "body": "<p>I have a Visual C++ 6.0 project which I need to update and I import it to Visual Studio 2012 with no problems, however, during compilation, I get the following four errors:</p>\n<blockquote>\n<p>Error 1   error C2440: 'static_cast' : cannot convert from 'void\n(__thiscall CTrendDlg::* )(int)' to 'void (__thiscall CCmdTarget::*\n)(UINT)'  c:\\users\\nima\\desktop\\ffls_scode\\trenddlg.cpp   89</p>\n<p>Error 6   error C2440: 'static_cast' : cannot convert from 'void\n(__thiscall CManualDlg::* )(int)' to 'void (__thiscall CCmdTarget::*\n)(UINT)'  c:\\users\\nima\\desktop\\ffls_scode\\manualdlg.cpp  175</p>\n<p>Error 7   error C2440: 'static_cast' : cannot convert from 'void\n(__thiscall CManualDlg::* )(int)' to 'void (__thiscall CCmdTarget::*\n)(UINT)'  c:\\users\\nima\\desktop\\ffls_scode\\manualdlg.cpp  177</p>\n<p>Error 8   error C2440: 'static_cast' : cannot convert from 'void\n(__thiscall CManualDlg::* )(int)' to 'void (__thiscall CCmdTarget::*\n)(UINT)'  c:\\users\\nima\\desktop\\ffls_scode\\manualdlg.cpp  178</p>\n</blockquote>\n<p>The first error is originating from the following line of code, and the rest are similar:</p>\n<pre><code>ON_COMMAND_RANGE(IDC_CHECK_PEN, IDC_CHECK_GRID, OnCheckButtons)\nON_COMMAND_RANGE(IDC_REF_L1, IDC_REF_L16, OnCarriagePos)\nON_COMMAND_RANGE(IDC_VALVE_L1, IDC_VALVE_L4, OnValve)\nON_COMMAND_RANGE(IDC_SAMPLE_L_A, IDC_SAMPLE_L_B, OnDetector)\n</code></pre>\n<p>Where (as an instance) <code>OnCheckButtons</code> function is defined in <code>TrendDlg.cpp</code> as follows:</p>\n<pre><code>void CTrendDlg::OnCheckButtons(int id) \n{\n    UINT    state;\n    RECT    rect = {m_rect.left-60, m_rect.top-10, m_rect.right+40,       m_rect.bottom+30};\n\nstate = ((CButton*)GetDlgItem(id))-&gt;GetState();\nif ((state &amp; 0x0003) == 1)\n{\n    switch (id)\n    {\n    case    IDC_CHECK_PEN:\n        m_pen = TRUE;\n        break;\n    case    IDC_CHECK_LINE:\n        m_line = TRUE;\n        break;\n    case    IDC_CHECK_BUBBLES:\n        m_bubble = TRUE;\n        break;\n    case    IDC_CHECK_GRID:\n        m_grid = TRUE;\n    }\n}\nelse\n{\n    switch (id)\n    {\n    case    IDC_CHECK_PEN:\n        m_pen = FALSE;\n        break;\n    case    IDC_CHECK_LINE:\n        m_line = FALSE;\n        break;\n    case    IDC_CHECK_BUBBLES:\n        m_bubble = FALSE;\n        break;\n    case    IDC_CHECK_GRID:\n        m_grid = FALSE;\n    }\n}\nInvalidateRect(&amp;rect);  \n</code></pre>\n<p>}</p>\n<p>my message map range is also defined as:</p>\n<pre><code>  BEGIN_MESSAGE_MAP(CTrendDlg, CDialog)\n</code></pre>\n<p>Why is the compiler trying to cast <code>CTrendDlg</code> and <code>CManualDlg</code> type to <code>CCmdTarget</code> type? is there a change in class structure from VC 6.00 to VS2012?</p>\n<p>I appreciate your help.</p>\n"}, {"tags": ["c++", "templates", "template-templates"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1462987117, "post_id": 37169224, "comment_id": 61873535, "body": "<i>At some point I want to statically check what types are <code>type1</code> and <code>type2</code></i> Please elaborate that."}, {"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1463008888, "post_id": 37169224, "comment_id": 61884243, "body": "I meant I want to use <code>std::is_type</code> to determine the control flow of my code, later on in the program."}], "answers": [{"comments": [{"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1462987087, "post_id": 37169266, "comment_id": 61873519, "body": "Could you elaborate on the publish things?"}, {"owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "edited": false, "score": 0, "creation_date": 1463008926, "post_id": 37169266, "comment_id": 61884250, "body": "Thank you, this is a very comprehensive answer!"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1462987201, "last_edit_date": 1462987201, "creation_date": 1462986922, "answer_id": 37169266, "question_id": 37169224, "link": "https://stackoverflow.com/questions/37169224/template-argument-that-takes-templates-as-well-nested-templates/37169266#37169266", "title": "Template argument that takes templates as well (nested templates)", "body": "<p>You want something along the lines of </p>\n\n<pre><code>template&lt;class StringType, typename type1, typename type2,\n         template&lt;class, class&gt; class MapType&gt;\nvoid readDatastructure(MapType&lt;type1, type2&gt; map, const StringType path);\n</code></pre>\n\n<p>But this won't work for, say, <code>std::map</code>, which has two extra template parameters (for the comparator and the allocator). So you either have to do </p>\n\n<pre><code>template&lt;class StringType, typename type1, typename type2,\n         template&lt;class...&gt; class MapType&gt;\nvoid readDatastructure(MapType&lt;type1, type2&gt; map, const StringType path);\n</code></pre>\n\n<p>or add extra template parameters, i.e.,</p>\n\n<pre><code>template&lt;class StringType, typename type1, typename type2, class C, class A,\n         template&lt;class, class, class, class&gt; class MapType&gt;\nvoid readDatastructure(MapType&lt;type1, type2, C, A&gt; map, const StringType path);\n</code></pre>\n\n<p>The first still doesn't work with a <code>std::map</code> taking non-default comparator/allocators; the second doesn't work if your map doesn't have exactly four template type parameters - e.g. <code>unordered_map</code>, which has five.</p>\n\n<p>Thus, it's probably better to have your map type publish those types. <code>std::map</code>, for instance, publishes them as <code>key_type</code> and <code>mapped_type</code>. By \"publish\", I mean defining them as member typedefs. Then you can write</p>\n\n<pre><code>template&lt;class StringType, class MapType&gt;\nvoid readDatastructure(MapType map, const StringType path);\n</code></pre>\n\n<p>and use e.g., <code>typename MapType::key_type</code> in place of <code>type1</code>.</p>\n\n<p>If you can't change your map types, and they don't follow the standard protocol, you can write a traits class and specialize it for your map types:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct map_traits {\n    using key_type = typename T::key_type;\n    using mapped_type = typename T::mapped_type;\n};\ntemplate&lt;class T1, class T2&gt;\nstruct map_traits&lt;MyBrokenMap&lt;T1, T2&gt;&gt; {\n    using key_type = T1;\n    using mapped_type = T2;\n};\n</code></pre>\n\n<p>Then you can use <code>typename map_traits&lt;MapType&gt;::key_type</code> etc.</p>\n"}, {"tags": [], "owner": {"reputation": 1157, "user_id": 6261163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/927deeb08bce28096a053a9e33f1a713?s=128&d=identicon&r=PG&f=1", "display_name": "ROX", "link": "https://stackoverflow.com/users/6261163/rox"}, "is_accepted": false, "score": 1, "last_activity_date": 1462986980, "creation_date": 1462986980, "answer_id": 37169284, "question_id": 37169224, "link": "https://stackoverflow.com/questions/37169224/template-argument-that-takes-templates-as-well-nested-templates/37169284#37169284", "title": "Template argument that takes templates as well (nested templates)", "body": "<p>template template parameters  </p>\n\n<pre><code>template&lt;class StringType, typename type1, typename type2, template &lt;typename, typename &gt; class MapType&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1462992694, "creation_date": 1462992694, "answer_id": 37171070, "question_id": 37169224, "link": "https://stackoverflow.com/questions/37169224/template-argument-that-takes-templates-as-well-nested-templates/37171070#37171070", "title": "Template argument that takes templates as well (nested templates)", "body": "<p>All std:: map types define the types <code>key_type</code> and <code>mapped_type</code>.</p>\n\n<p>It's straightforward to write an is_map trait to constrain template function expansion.</p>\n\n<p>example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;unordered_map&gt;\n#include &lt;utility&gt;\n#include &lt;typeinfo&gt;\n\n\ntemplate&lt;class Map&gt; struct is_map\n{\n    static constexpr bool value = false;\n};\n\ntemplate&lt;class K, class V, class Comp, class Alloc&gt;\nstruct is_map&lt;std::map&lt;K, V, Comp, Alloc&gt;&gt;\n{\n    static constexpr bool value = true;\n};\n\ntemplate&lt;class K, class V, class Comp, class Hash, class Alloc&gt;\nstruct is_map&lt;std::unordered_map&lt;K, V, Comp, Hash, Alloc&gt;&gt;\n{\n    static constexpr bool value = true;\n};\n\ntemplate&lt;\nclass Map,\nclass String,\nstd::enable_if_t&lt;is_map&lt;Map&gt;::value&gt;* = nullptr\n&gt;\nvoid readDataStructure(Map&amp; map, String&amp;&amp; path)\n{\n    std::cout &lt;&lt; \"reading map with key type: \" &lt;&lt; typeid(typename Map::key_type).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"      and with value type: \" &lt;&lt; typeid(typename Map::mapped_type).name() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"--------------------------\"  &lt;&lt; std::endl;\n}\n\n\nint main()\n{\n    std::map&lt;int, std::string&gt; m1;\n    std::unordered_map&lt;int, std::wstring&gt; m2;\n    readDataStructure(m1, \"foo.txt\");\n    readDataStructure(m2, \"foo.txt\");\n}\n</code></pre>\n\n<p>example output:</p>\n\n<pre><code>reading map with key type: i\n      and with value type: NSt3__112basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEEE\n--------------------------\nreading map with key type: i\n      and with value type: NSt3__112basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEEE\n--------------------------\n</code></pre>\n"}], "owner": {"reputation": 1261, "user_id": 1846228, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9a17eedf0472db2700ce6f3d8848265d?s=128&d=identicon&r=PG", "display_name": "XapaJIaMnu", "link": "https://stackoverflow.com/users/1846228/xapajiamnu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37169266, "answer_count": 3, "score": 0, "last_activity_date": 1462992694, "creation_date": 1462986744, "last_edit_date": 1462987121, "question_id": 37169224, "link": "https://stackoverflow.com/questions/37169224/template-argument-that-takes-templates-as-well-nested-templates", "title": "Template argument that takes templates as well (nested templates)", "body": "<p>I am trying to avoid code duplication, for the following thing:</p>\n\n<pre><code>template&lt;class StringType, typename type1, typename type2, class MapType&gt;\nvoid readDatastructure(MapType&lt;type1, type2&gt; map, const StringType path) {\n... some code\n}\n</code></pre>\n\n<p>I have several different map types that have different <code>type1</code> and <code>type2</code> parameters. At some point I want to statically check what types are <code>type1</code> and <code>type2</code> and I can't figure out how to get this thing to compile. I have tried couple of variations on that template declaration and none of them seem to work. Is that even possible?</p>\n\n<p>Cheers,</p>\n"}, {"tags": ["android", "c++", "android-ndk"], "comments": [{"owner": {"reputation": 3782, "user_id": 839211, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/THWvr.jpg?s=128&g=1", "display_name": "Felipe", "link": "https://stackoverflow.com/users/839211/felipe"}, "edited": false, "score": 0, "creation_date": 1462987135, "post_id": 37169114, "comment_id": 61873549, "body": "I don&#39;t think that Android Studio supports C++ development. I think that you have to use another tool to build your code (such as Eclipse with the NDK) and then link it to the Java code in the Android Studio."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1462988206, "post_id": 37169114, "comment_id": 61874193, "body": "Android Studio change log: <a href=\"http://tools.android.com/tech-docs/new-build-system\" rel=\"nofollow noreferrer\">tools.android.com/tech-docs/new-build-system</a>  Last mention of NDK was Android Studio 1.3.1 (2015/08/11) ."}], "answers": [{"tags": [], "owner": {"reputation": 863, "user_id": 3932131, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zTEEr.jpg?s=128&g=1", "display_name": "Umang", "link": "https://stackoverflow.com/users/3932131/umang"}, "is_accepted": false, "score": 0, "last_activity_date": 1462988640, "creation_date": 1462988640, "answer_id": 37169843, "question_id": 37169114, "link": "https://stackoverflow.com/questions/37169114/android-studio-c-ndk-support/37169843#37169843", "title": "Android studio c++ ndk support", "body": "<p>Little off the question, storing passwords in the native layer does not ensure complete safety. A good hacker can get that as well. It is just that you add another additional layer so one has to dig deeper</p>\n"}], "owner": {"reputation": 2183, "user_id": 5257738, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1481932215459032/picture?type=large", "display_name": "Rustam Ibragimov", "link": "https://stackoverflow.com/users/5257738/rustam-ibragimov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462988640, "creation_date": 1462986409, "question_id": 37169114, "link": "https://stackoverflow.com/questions/37169114/android-studio-c-ndk-support", "title": "Android studio c++ ndk support", "body": "<p>One of my friends suggested to use c++ support in Android studio in order to hide passwords. I have found tons of tutorials how to get started with ndk in android. But they are all outdated(2015) and everytime I try to use c++ in any way, Android studio crashes. Is there any way to do it in a simpler way now? \nP.S./ I want to get rid of experimental plugin that every one uses. </p>\n"}, {"tags": ["c++", "singleton"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1462985630, "post_id": 37168836, "comment_id": 61872661, "body": "Do not use singletons."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1462985659, "post_id": 37168836, "comment_id": 61872681, "body": "Did you write any unit tests to determine if <code>connect</code> is called more than once? Did you refer to the C++ Standard to see what the lifetime of objects with static <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">storage duration</a>?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462987758, "post_id": 37168836, "comment_id": 61873923, "body": "<i>&quot;Will it guarantee that the m_connector.connect(); is only called once?&quot;</i> Hmm, <code>void reconnect();</code> somehow hints it might be called multiple times."}, {"owner": {"reputation": 377, "user_id": 3828398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36882c04937acd60d10d27ea0475cbbd?s=128&d=identicon&r=PG&f=1", "display_name": "user3828398", "link": "https://stackoverflow.com/users/3828398/user3828398"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462988620, "post_id": 37168836, "comment_id": 61874459, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 that&#39;s used when the connection is lost and retrying to connect."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462988855, "post_id": 37168836, "comment_id": 61874604, "body": "@user3828398 Well, I can&#39;t know without seeing what the implementation does. It&#39;s under your control, but the singleton pattern alone cannot guarantee this function is called more than once."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462992921, "post_id": 37168836, "comment_id": 61876931, "body": "@WilliamKappler The constructor calls a member instances function, that&#39;s a big difference."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462992980, "post_id": 37168836, "comment_id": 61876970, "body": "@user3828398 Are you actually worrying about thread safety? The pattern you use is guaranteed to be thread safe with the current standard."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3995702"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462993140, "post_id": 37168836, "comment_id": 61877061, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 You are correct, I seem to have missed that."}, {"owner": {"reputation": 377, "user_id": 3828398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36882c04937acd60d10d27ea0475cbbd?s=128&d=identicon&r=PG&f=1", "display_name": "user3828398", "link": "https://stackoverflow.com/users/3828398/user3828398"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463038129, "post_id": 37168836, "comment_id": 61893729, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 so all threads share the same connectionmanager?"}, {"owner": {"reputation": 377, "user_id": 3828398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36882c04937acd60d10d27ea0475cbbd?s=128&d=identicon&r=PG&f=1", "display_name": "user3828398", "link": "https://stackoverflow.com/users/3828398/user3828398"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463038354, "post_id": 37168836, "comment_id": 61893869, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 and if I want each thread to have a separate connectionmanager, I need to use <code>thread_local</code> instead of <code>static</code>, right?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463038392, "post_id": 37168836, "comment_id": 61893888, "body": "@user3828398 <i>&quot;so all threads share the same connectionmanager? &quot;</i> Well, I don&#39;t know? That depends on your implementation. Currently it would be like that, yes."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1463038479, "post_id": 37168836, "comment_id": 61893943, "body": "@user3828398 <i>&quot;I need to use thread_local instead of static, right?&quot;</i>, well don&#39;t use a singleton then."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1462993400, "last_edit_date": 1495542701, "creation_date": 1462986166, "answer_id": 37169037, "question_id": 37168836, "link": "https://stackoverflow.com/questions/37168836/connect-to-database-only-one-time-using-singleton/37169037#37169037", "title": "connect to database only one time using singleton", "body": "<blockquote>\n  <p>Will it guarantee that the <code>m_connector.connect();</code> only run once? </p>\n</blockquote>\n\n<p>No.</p>\n\n<p>The only fact that's guaranteed in that case of implementation (aka as <a href=\"http://www.aristeia.com/Papers/DDJ_Jul_Aug_2004_revised.pdf\" rel=\"nofollow noreferrer\">Scott Meyer's Singleton</a>) is that the constructor of <code>ConnectionManager</code> is called once and only once.</p>\n\n<pre><code>  static ConnectionManager&amp; getManager()\n  {\n    static ConnectionManager manager;\n    return manager;\n  }\n</code></pre>\n\n<p>It will be called as soon <code>ConnectionManager::getManager();</code> is called the first time.</p>\n\n<p>The constructor in turn calls <code>m_connector.connect()</code></p>\n\n<pre><code>  ConnectionManager():m_connector(\"port\")\n  {\n    m_connector.connect();\n  };\n</code></pre>\n\n<p>There's no guarantee that </p>\n\n<pre><code>    m_connector.connect();\n</code></pre>\n\n<p>won't be called from any other parts of your code. The declaration of </p>\n\n<pre><code>  void reconnect();\n</code></pre>\n\n<p>even implies that somehow.</p>\n\n<p>But well, it's all under your control.</p>\n\n<p>If the constructor is the only function that calls <code>m_connector.connect();</code>, and you are worrying about <a href=\"https://stackoverflow.com/questions/1661529/is-meyers-implementation-of-singleton-pattern-thread-safe\"><em>thread safety</em></a>, you shouldn't need to. It's guaranteed to be thread safe with the current standard.</p>\n\n<hr>\n\n<blockquote>\n  <p>Is using singleton the best solution?</p>\n</blockquote>\n\n<p>Probably not. Nothing should hinder you to revise your decisions later, and to decide you actually need to have more <code>ConnectionManager</code> instances. </p>\n\n<p>Any other part of your code that will use <code>ConnectionManager::getManager();</code> is tightly coupled to that singleton class, and it will become hard to refactor your code if it should be made more generic.</p>\n\n<p>This kind of hardcoding a DB connection </p>\n\n<pre><code>  ConnectionManager():m_connector(\"port\")\n                               // ^^^^^^\n</code></pre>\n\n<p>extremely narrows the scalability of your application.</p>\n\n<hr>\n\n<p>I personally would make it a class, with the appropriate constructor parameters to create a connection, and having a public (abstract) interface implemented, that can be accessed via a factory function, or some of the other <a href=\"https://en.wikibooks.org/wiki/C%2B%2B_Programming/Code/Design_Patterns/Creational_Patterns\" rel=\"nofollow noreferrer\">Creational Design Patterns</a> dedicated to instance creation, and nothing else.</p>\n"}], "owner": {"reputation": 377, "user_id": 3828398, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/36882c04937acd60d10d27ea0475cbbd?s=128&d=identicon&r=PG&f=1", "display_name": "user3828398", "link": "https://stackoverflow.com/users/3828398/user3828398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 772, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462993400, "creation_date": 1462985515, "last_edit_date": 1462987056, "question_id": 37168836, "link": "https://stackoverflow.com/questions/37168836/connect-to-database-only-one-time-using-singleton", "title": "connect to database only one time using singleton", "body": "<p>I'm trying to connect to the database only one time by using singleton pattern, below is my implementation.</p>\n\n<p>Will it guarantee that the <code>m_connector.connect();</code> is only called once? </p>\n\n<p>Is using singleton the best solution?</p>\n\n<pre><code>class ConnectionManager\n{\npublic:\n\n  static ConnectionManager&amp; getManager()\n  {\n    static ConnectionManager manager;\n    return manager;\n  }\n\n  void reconnect();\n  Connection getConnection();\n\nprivate:\n  ConnectionManager():m_connector(\"port\")\n  {\n    m_connector.connect();\n  };\n  ConnectionManager(ConnectionManager const&amp;);\n  void operator=(ConnectionManager const&amp;);\n\n  Connector m_connector;\n};\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1462984812, "post_id": 37168568, "comment_id": 61872227, "body": "It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming.  Further reading: <b><a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a></b>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1462984837, "post_id": 37168568, "comment_id": 61872240, "body": "I would also suggest you use <code>std::string</code> instead of c-strings."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1462985072, "post_id": 37168568, "comment_id": 61872363, "body": "<code>if(strcmp(nn,n)==0);</code> ends the if clause. The following line will be executed regardless of what the conditional evaluates to. Remove the <code>;</code> from that line. The same error is repeated in   <code>if(b[i].getbalance()==b1);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1462985406, "post_id": 37168751, "comment_id": 61872544, "body": "Oh, just now saw r sehu&#39;s comment with the same answer.."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1462985680, "post_id": 37168751, "comment_id": 61872692, "body": "It&#39;s better to close such questions with &quot;simple typographical error&quot; reason. Such questions and any answers to those are not useful to the general SO audience."}], "tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 4, "last_activity_date": 1462985205, "creation_date": 1462985205, "answer_id": 37168751, "question_id": 37168568, "link": "https://stackoverflow.com/questions/37168568/search-operation-within-array-of-objects/37168751#37168751", "title": "Search operation within array of objects?", "body": "<pre><code>if(strcmp(nn,n)==0);\nb[i].show();\n</code></pre>\n\n<p>and</p>\n\n<pre><code>if(b[i].getbalance()==b1);\nb[i].show();\n</code></pre>\n\n<p>It's the <code>;</code> on the first line of each...  that turns it into an empty if condition.  The second line is unrelated to the <code>if</code> and is always run.  This is one of the reasons you should always use curly braces for every <code>if</code> statement, even if it's only one line.</p>\n"}, {"tags": [], "owner": {"reputation": 10297, "user_id": 2425366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5z1Nm.jpg?s=128&g=1", "display_name": "Shreevardhan", "link": "https://stackoverflow.com/users/2425366/shreevardhan"}, "is_accepted": false, "score": 2, "last_activity_date": 1462987880, "creation_date": 1462987880, "answer_id": 37169595, "question_id": 37168568, "link": "https://stackoverflow.com/questions/37168568/search-operation-within-array-of-objects/37169595#37169595", "title": "Search operation within array of objects?", "body": "<p>You have terribly mixed-up C and C++. I would've done a pure C++ class declaration, like this</p>\n\n<pre><code>class bank {\n    string name, acNo, typeOfAc;\n    double balance;\npublic:\n    bank(string nm = \"NULL\", string acn = \"XXXX\", string tac = \"XXXX\")\n        : name(nm), acNo(acn), typeOfAc(tac), balance(0) {}\n\n    double getbalance() { return balance; }\n    string getname() { return name; }\n    . . .\n};\n</code></pre>\n\n<p>Here, <code>string</code> is <code>std::string</code>. </p>\n\n<p>Instead of</p>\n\n<pre><code>char n[20];\nfflush(stdin);\ngets(n);    // unsafe\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>string n;\ncin &gt;&gt; n;\n</code></pre>\n\n<p>and, to correct your search</p>\n\n<pre><code>if (b[i].getname() == n)    // no semicolon here\n    b[i].show();\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5742388, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/52c7ad9704be39a814f03c3d59fc01b1?s=128&d=identicon&r=PG&f=1", "display_name": "Star Rider", "link": "https://stackoverflow.com/users/5742388/star-rider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1462999602, "answer_count": 2, "score": -1, "last_activity_date": 1462987880, "creation_date": 1462984566, "last_edit_date": 1462984977, "question_id": 37168568, "link": "https://stackoverflow.com/questions/37168568/search-operation-within-array-of-objects", "closed_reason": "Not suitable for this site", "title": "Search operation within array of objects?", "body": "<p>I am making simple bank program,My class name is bank</p>\n\n<p>it consist of following functions <code>deposit()</code>, <code>withdraw()</code>, <code>show()</code>, <code>getname()</code>, <code>getbalance()</code>, default constructor and parametric constructor.</p>\n\n<p>I'm trying to do a search operation in the main program by name and by balance.\nBUT,Instead of showing the info of the corresponding name or balance entered,it's showing the entire list of info of account holders.</p>\n\n<p>Please Help to rectify this problem.</p>\n\n<hr>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;string.h&gt;\n\nclass bank\n{\n   char name[20],acNo[20],typeOfAc[10];\n   double balance;\n   public:\n   bank()\n   {\n      strcpy(name,\"NULL\");\n      strcpy(acNo,\"XXXX\");\n      strcpy(typeOfAc,\"XXXX\");\n      balance=0;\n   }\n   bank(char nm[20],char acn[20],char tac[10])\n   {\n      strcpy(name,nm);\n      strcpy(acNo,acn);\n      strcpy(typeOfAc,tac);\n      balance=0;\n   }\n\n   double getbalance(){return balance;}\n   char* getname(){return name;}\n   void enter();\n   void deposit();\n   void withdraw();\n   void show();\n};\n\nvoid bank::deposit()\n{\n   double d;\n   cout&lt;&lt;\"\\nEnter Amount To deposit:\";\n   cin&gt;&gt;d;\n   cout&lt;&lt;\"\\n\";\n   balance=balance+d;\n   cout&lt;&lt;\"\\nSuccessful Deposit.\\n\";\n}\nvoid bank::withdraw()\n{\n   double w;\n   cout&lt;&lt;\"\\nEnter amount to withdraw:\";\n   cin&gt;&gt;w;\n   cout&lt;&lt;\"\\n\";\n   if((balance-w)&lt;0)\n   {\n      cout&lt;&lt;\"\\nCan't withdraw!!\";\n      cout&lt;&lt;\"\\nYour Balance:\"&lt;&lt;getbalance();\n      return;\n   }\n   else\n      balance=balance-w;\n   cout&lt;&lt;\"\\nWithdrawal Successful.\\n\";\n}\nvoid bank::show()\n{\n   cout&lt;&lt;\"\\nName:\"&lt;&lt;getname();\n   cout&lt;&lt;\"\\nBalance:\"&lt;&lt;getbalance();\n}\nvoid bank::enter()\n{\n   cout&lt;&lt;\"\\nPlease enter the following info\\n\";\n   fflush(stdin);\n   cout&lt;&lt;\"\\nName:\";\n   gets(name);\n   cout&lt;&lt;\"\\n\";\n   cout&lt;&lt;\"\\nACcount Number:\";\n   gets(acNo);\n   cout&lt;&lt;\"\\n\";\n   cout&lt;&lt;\"\\nType of Account:\";\n   gets(typeOfAc);\n   cout&lt;&lt;\"\\n\";\n}\n\nint main()\n{\n   int i;\n   double b1;\n   char n[20],nn[20];\n   bank b[10];\n   for(i=0;i&lt;3;i++)\n   {\n      b[i].enter();\n      b[i].deposit();\n   }\n   //search by name\n   cout&lt;&lt;\"\\nEnter the name for search by name:\";\n   fflush(stdin);\n   gets(n);\n   for(i=0;i&lt;3;i++)\n   {\n      strcpy(nn,b[i].getname());\n      if(strcmp(nn,n)==0);\n      b[i].show();\n   }\n   cout&lt;&lt;\"\\nEnter the balance for search by balance:\";\n   cin&gt;&gt;b1;\n   for(i=0;i&lt;3;i++)\n   {\n      if(b[i].getbalance()==b1);\n      b[i].show();\n   }\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "image-processing"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462983879, "post_id": 37168115, "comment_id": 61871640, "body": "Since you never told us, how I2 relates to I1, we cannot help you with your transformation."}, {"owner": {"reputation": 13, "user_id": 3501857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b9030c9daf5fe89b585a74ac9e2f1a?s=128&d=identicon&r=PG&f=1", "display_name": "asa", "link": "https://stackoverflow.com/users/3501857/asa"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1462984150, "post_id": 37168115, "comment_id": 61871806, "body": "I1 and I2 are monochrome images of same information on a static background (white or black  background) taken on different times."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3501857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b9030c9daf5fe89b585a74ac9e2f1a?s=128&d=identicon&r=PG&f=1", "display_name": "asa", "link": "https://stackoverflow.com/users/3501857/asa"}, "edited": false, "score": 0, "creation_date": 1462985943, "post_id": 37168694, "comment_id": 61872854, "body": "Thanks! I&#39;ll try this"}], "tags": [], "owner": {"reputation": 342, "user_id": 6235255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68671c12220e20473b372bcaed907bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey Petrov", "link": "https://stackoverflow.com/users/6235255/aleksey-petrov"}, "is_accepted": true, "score": 1, "last_activity_date": 1462985000, "creation_date": 1462985000, "answer_id": 37168694, "question_id": 37168115, "link": "https://stackoverflow.com/questions/37168115/how-to-find-corresponding-points-in-two-images/37168694#37168694", "title": "How to find corresponding points in two images?", "body": "<p>You are writing that you have affine matrix, that warps l1 to l2.</p>\n\n<p>All you need is to invert the affine transformation M via <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/geometric_transformations.html#void%20invertAffineTransform(InputArray%20M,%20OutputArray%20iM)\" rel=\"nofollow\">invertAffineTransform</a> to get matrix M'</p>\n\n<p>And then apply this 2x3 matrix M' to the points:</p>\n\n<pre><code>(pseudocode)\n\nP1_onL1 = M' * [P1.x, P1.y, 1].t()\n</code></pre>\n\n<p>where .t() means transpose, so you need to multiply matrix by a column vector.</p>\n"}], "owner": {"reputation": 13, "user_id": 3501857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61b9030c9daf5fe89b585a74ac9e2f1a?s=128&d=identicon&r=PG&f=1", "display_name": "asa", "link": "https://stackoverflow.com/users/3501857/asa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "accepted_answer_id": 37168694, "answer_count": 1, "score": 0, "last_activity_date": 1462995861, "creation_date": 1462983311, "last_edit_date": 1462995861, "question_id": 37168115, "link": "https://stackoverflow.com/questions/37168115/how-to-find-corresponding-points-in-two-images", "title": "How to find corresponding points in two images?", "body": "<p>I am working with image registration. I am using OpenCV. I have two images I1(reference image), I2(current image). I determine Affine motion between them then warp I1 to see how much it aligns with the current image I2. At this point I have 3 images I1, I1'(distorted) and I2. </p>\n\n<p>Now I need to set 4 points on the current image I2 ( this is for display purpose on a GUI) and need to find corresponding 4 points on the initial reference image I1 (prior to applying the motion). The GUI highlights some feature difference and needs to toggle back and forth on I1 and I2 for the user to understand the difference.</p>\n\n<p>the four points are basically an arbitrary rectangle within the image. For example: </p>\n\n<pre><code>cv::Point P1, P2, P3, P4;\nP1.x = I2.cols / 4;\nP1.y = I2.rows / 4;\nP2.x = I2.cols * 3 / 4;\nP2.y = I2.rows / 4;\nP3.x = I2.cols * 3 / 4;\nP3.y = I2.rows * 3 / 4;\nP4.x = I2.cols / 4;\nP4.y = I2.rows * 3 / 4;\n</code></pre>\n\n<p>I need to find corresponding points of P1, P2, P3, P4 on reference image I1. \nAny idea on how can I do that using OpenCV? Or any other way? </p>\n"}, {"tags": ["c++", "function", "class", "virtual"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1462982835, "post_id": 37167948, "comment_id": 61871001, "body": "Do you have an example class to demonstrate your particular case?"}, {"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462982986, "post_id": 37167948, "comment_id": 61871096, "body": "No. Is just theory. I tried to declare a normal function in an abstract class as pure and I noticed the compile error."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1462983016, "post_id": 37167948, "comment_id": 61871115, "body": "What I mean is it&#39;s usually a good thing to include what you&#39;ve tried so people can speak to your example. Code + specific errors = better answers."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462983023, "post_id": 37167948, "comment_id": 61871121, "body": "Because it would be pointless to do so."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462983474, "post_id": 37167948, "comment_id": 61871411, "body": "Probably because C++ doesn&#39;t have the concept of &#39;pure&#39; functions?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462983924, "post_id": 37167948, "comment_id": 61871665, "body": "I think, you&#39;ve fallen into language trap. You can say that Jennifer Aniston is an example of <i>pure human beauty</i>, but it doesn&#39;t mean you can talk about pure humans."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984083, "post_id": 37167948, "comment_id": 61871762, "body": "@SergeyA Take that back. Jennifer Aniston is a <i>pure</i> human!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1462984292, "post_id": 37167948, "comment_id": 61871904, "body": "@erip, no one should <b>ever</b> mention pure humans. This assumes there are <b>unpure</b> humans, and this is what fascist ideologies are based on. There is no such thing as pure humans, since there are no unpure ones."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984331, "post_id": 37167948, "comment_id": 61871927, "body": "@SergeyA Depends on your philosophical subscription. :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1462985625, "post_id": 37167948, "comment_id": 61872657, "body": "@SergeyA: That&#39;s incorrect. Just because there is no such thing as dry water doesn&#39;t mean water isn&#39;t wet."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1462985638, "post_id": 37167948, "comment_id": 61872666, "body": "inb4 what about dry ice yes stop picking apart my hastily chosen analogy"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462985733, "post_id": 37167948, "comment_id": 61872726, "body": "@LightnessRacesinOrbit, too much of grammar for me. I am not a native speaker."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462985795, "post_id": 37167948, "comment_id": 61872760, "body": "@SergeyA: Hey, you started this!"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1462986065, "post_id": 37167948, "comment_id": 61872918, "body": "@LightnessRacesinOrbit, and now I am backpedalling."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462986440, "post_id": 37167948, "comment_id": 61873116, "body": "@LightnessRacesinOrbit Have you thought about dry ice? :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1463012479, "post_id": 37167948, "comment_id": 61885202, "body": "@erip: You are a hilarious individual!"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 0, "creation_date": 1462983263, "post_id": 37167989, "comment_id": 61871281, "body": "I don&#39;t understand. I tried to create a simple class with a normal pure function (for example: void fun() = 0) and the compiler raised an error."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 0, "creation_date": 1462983410, "post_id": 37167989, "comment_id": 61871368, "body": "@andre3312: &quot;= 0&quot; is not the syntax to declare that a function is pure; it&#39;s the syntax to declare that a virtual function is purely virtual. Trying to put it on a non-virtual function is like trying to say that a burger is &quot;very food&quot; instead of &quot;very tasty food&quot; or &quot;very unhealthy food&quot;."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1462983466, "post_id": 37167989, "comment_id": 61871407, "body": "<i>There is no requirement that a pure function be virtual.</i> Not true. Only <code>virtual</code> member functions can be pure."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1462983544, "post_id": 37167989, "comment_id": 61871448, "body": "@RSahu: &quot;Pure function&quot; refers to <a href=\"https://en.wikipedia.org/wiki/Pure_function\" rel=\"nofollow noreferrer\">a function whose return value depends only on its parameters, and which produces no side effects</a>. There is no requirement that such a function be virtual. You&#39;re thinking of pure virtual functions, an entirely unrelated concept."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1462983579, "post_id": 37167989, "comment_id": 61871474, "body": "@RSahu &quot;Pure functions&quot; are typically what functions in functional languages are referred to. A pure function is a function with no side effects."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1462983661, "post_id": 37167989, "comment_id": 61871519, "body": "That&#39;s not the kind of &quot;pure&quot; the OP is talking about. They are talking about the creation of pure virtual functions using the <code>= 0;</code> specifier."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1462983754, "post_id": 37167989, "comment_id": 61871555, "body": "@RSahu Fair, but your qualm was with the statement that pure functions must be virtual - they don&#39;t have to be. Semantics are important. :) It&#39;s also hard to understand as a concept because &quot;pure functions&quot; wrt OO <i>don&#39;t exist</i>."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1462983855, "post_id": 37167989, "comment_id": 61871624, "body": "@erip, in the context of C++, that&#39;s a correct assertion."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1462984019, "post_id": 37167989, "comment_id": 61871720, "body": "No, it&#39;s not. That&#39;s like saying C pointers are smart pointers because they&#39;re used in a good way. It&#39;s conflating two terms that have very different meanings."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984206, "post_id": 37167989, "comment_id": 61871848, "body": "Yes, this is correct answer. Pure function is not a concept which exists in  C++."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 6, "creation_date": 1462984258, "post_id": 37167989, "comment_id": 61871881, "body": "I think this would could much less confusion if people called them by their grammatical name. They&#39;re <i>purely virtual</i> functions."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462984422, "post_id": 37167989, "comment_id": 61871980, "body": "It&#39;s really annoying that you are biased / feel attacked because of the word <code>pure</code>. Yes, pure virtual functions <i>do</i> exist in C++, period."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1462984446, "post_id": 37167989, "comment_id": 61871995, "body": "@GillBates I don&#39;t think you understand the argument here."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 1, "creation_date": 1462984488, "post_id": 37167989, "comment_id": 61872019, "body": "@erip, I can see that English is your native language! :) Or you just good at english grammar."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984525, "post_id": 37167989, "comment_id": 61872039, "body": "@SergeyA Not all native speakers have a good grasp of English grammar... trust me. :P"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1462984574, "post_id": 37167989, "comment_id": 61872059, "body": "@erip I do, people are bitching about <code>pure</code> as opposed to <code>purely</code>, we all know what OP meant and bitching about something like that is childish at best."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462984622, "post_id": 37167989, "comment_id": 61872097, "body": "@GillBates No one is arguing that <i>pure virtual</i> functions don&#39;t exist. We are arguing that <i>pure</i> functions, in the C++ OO paradigm, do not exist <i>as described by OP</i>. <code>pure functions != &quot;pure functions&quot; != pure virtual functions</code>"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1462984677, "post_id": 37167989, "comment_id": 61872131, "body": "@erip As I said before, OP obviously meant pure virtual functions as opposed to pure functions. The context gives that away."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462984828, "post_id": 37167989, "comment_id": 61872235, "body": "@GillBates The question is about semantics; specifically about a misunderstanding with respect to those regarding &quot;pure functions.&quot; To address the question, we must define &quot;pure functions.&quot; The resolution to this question is simply that &quot;pure functions&quot; don&#39;t exist in C++. The confusion lies in that pure describes virtual, not function - hence my choice of calling them <i>purely virtual</i> functions."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1462984962, "post_id": 37167989, "comment_id": 61872294, "body": "@erip Yes I understand your point but from the following passage &quot;Ok, I can not use polymorphism with that pure normal function but the main reason (declare a class as abstract) is reached anyway&quot; You can clearly tell OP means purely virtual functions. My rant wasn&#39;t necessarily against you but rather to the people that purposely took the word <code>pure</code> out of context. There was no confusion OP was talking about <code>purely virtual</code> functions."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 1, "creation_date": 1462985654, "post_id": 37167989, "comment_id": 61872679, "body": "@GillBates: If the OP really was talking about purely virtual functions, then the question in the title is nonsense. It becomes, &quot;In C++, why must a purely virtual function be virtual?&quot;"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "edited": false, "score": 0, "creation_date": 1462985859, "post_id": 37167989, "comment_id": 61872804, "body": "@BenjaminLindley Well yeah, it can be. I never said it wasn&#39;t but judging from &quot; but the main reason (declare a class as abstract)&quot; it&#39;s definitely not about pure functions."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1462984724, "last_edit_date": 1495539847, "creation_date": 1462982924, "answer_id": 37167989, "question_id": 37167948, "link": "https://stackoverflow.com/questions/37167948/in-c-why-a-pure-function-must-be-virtual/37167989#37167989", "title": "In C++ why a pure function must be virtual?", "body": "<p>There is no requirement that a pure function be virtual. If you're thinking of the term \"pure virtual function\", \"pure\" applies to \"virtual\" there; the function is purely virtual. It's a different use of the word \"pure\".</p>\n\n<blockquote>\n  <p>I mean, the word \"pure\" is there just to declare an abstract class.</p>\n</blockquote>\n\n<p>It's not. The reason for declaring a pure virtual function is not to prevent instantiation of the enclosing class; it's to ensure that concrete subclasses implement the method, usually because the abstract class cannot provide a reasonable implementation.</p>\n\n<blockquote>\n  <p>Ok, I can not use polymorphism with that pure normal function but the main reason (declare a class as abstract) is reached anyway.</p>\n</blockquote>\n\n<p>If you're looking for a way to declare a class abstract without any pure virtual functions, C++ does not have dedicated syntax for that. The suggestions I've seen are to <a href=\"https://stackoverflow.com/questions/14631685/c-abstract-class-without-pure-virtual-functions\">declare and implement a pure virtual destructor (you can do that), or to make the constructor protected</a> (but making the constructor protected won't make your class pass <a href=\"http://en.cppreference.com/w/cpp/types/is_abstract\" rel=\"nofollow noreferrer\"><code>std::is_abstract</code></a>). In any case, it wouldn't make much sense to attach the syntax for that to arbitrary member functions; something like <code>class Foo = 0 { ... };</code> would make more sense.</p>\n"}, {"comments": [{"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 0, "creation_date": 1462983481, "post_id": 37168003, "comment_id": 61871413, "body": "But I can override a function not virtual."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462983507, "post_id": 37168003, "comment_id": 61871430, "body": "I think, this answer undully assumes that &#39;pure&#39; functions exist."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 1, "creation_date": 1462983570, "post_id": 37168003, "comment_id": 61871468, "body": "@andre3312, you can. However, the function call won&#39;t be dispatched to the derived class implementation if the call is made through a base class pointer or object."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462983591, "post_id": 37168003, "comment_id": 61871488, "body": "@SergeyA No, I&#39;m saying that a pure function that has no <code>virtual</code> wouldn&#39;t make sense, <code>pure virtual</code> functions exist yes. Or <code>pure virtual</code> methods if you want to get specific."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462983769, "post_id": 37168003, "comment_id": 61871567, "body": "Again, to have &#39;pure&#39; functions, language should have &#39;unpure&#39; functions. Every function in C++ is a pure function, because non of them are unpure."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984021, "post_id": 37168003, "comment_id": 61871722, "body": "@SergeyA Not sure if I understand you here, a function that does not contain a body and has <code>= 0</code> after it&#39;s signature is a pure virtual function. Once that does not is not a pure virtual function. What do you mean with &quot;every function in C++ is a pure function because non of them are unpure&quot; ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984121, "post_id": 37168003, "comment_id": 61871787, "body": "What I am saying is that C++ doesn&#39;t have the concept of pure functions. Period. They do not exist."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984338, "post_id": 37168003, "comment_id": 61871931, "body": "@SergeyA Then how would you name a function that has <code>= 0</code> after it and is vritual ? <code>equals null functions</code> ?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984438, "post_id": 37168003, "comment_id": 61871992, "body": "No, those are pure virtual function. Where <i>pure</i> relates to <i>virtual</i>, not <i>function</i>. See my comments under the question and the answer from @user2357112"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984508, "post_id": 37168003, "comment_id": 61872030, "body": "@SergeyA That&#39;s what I <i>literally</i> just said, you&#39;re just being silly now. &quot;Not sure if I understand you here, a function that does not contain a body and has = 0 after it&#39;s signature is a pure virtual function.&quot; to which you respond : &quot;No, those are pure virtual function&quot; What?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1462984565, "post_id": 37168003, "comment_id": 61872055, "body": "No is for &#39;equals null functions&#39;. Last time. While <b>pure virtual functions</b> exist, <b>pure functions</b> do not."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1462984606, "post_id": 37168003, "comment_id": 61872085, "body": "Yeah nvm, not worth arguing over."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 2, "creation_date": 1462985707, "post_id": 37168003, "comment_id": 61872711, "body": "@andre3312: <i>&quot;But I can override a function not virtual.&quot;</i> No, you can&#39;t."}, {"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462998069, "post_id": 37168003, "comment_id": 61879739, "body": "@LightnessRacesinOrbit: Are you telling I can&#39;t override a function in a derived class?"}, {"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1462998530, "post_id": 37168003, "comment_id": 61879988, "body": "@LightnessRacesinOrbit: Maybe it is not a good practice but it is not prohibited"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 0, "creation_date": 1463012303, "post_id": 37168003, "comment_id": 61885160, "body": "@andre3312: No, it&#39;s literally impossible. You&#39;re mistaking <i>name hiding</i> for overriding."}, {"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1463039302, "post_id": 37168003, "comment_id": 61894462, "body": "@LightnessRacesinOrbit: Please have a look at this. Question number 10 of the link. <a href=\"https://isocpp.org/wiki/faq/strange-inheritance#redefining-nonvirtuals\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/strange-inheritance#redefining-nonvirtua&zwnj;&#8203;ls</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "edited": false, "score": 0, "creation_date": 1463043312, "post_id": 37168003, "comment_id": 61897118, "body": "@andre3312: That&#39;s not actually overriding. The word &quot;override&quot; is in quotes there to indicate that, but really they should have avoided it altogether. Remember, a collaboratively edited Wiki on the internet is not authoritative; the ISO standard is."}, {"owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1463043857, "post_id": 37168003, "comment_id": 61897529, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/111722/discussion-between-andre3312-and-lightness-races-in-orbit\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 4, "last_activity_date": 1462982965, "creation_date": 1462982965, "answer_id": 37168003, "question_id": 37167948, "link": "https://stackoverflow.com/questions/37167948/in-c-why-a-pure-function-must-be-virtual/37168003#37168003", "title": "In C++ why a pure function must be virtual?", "body": "<p>The only reason you'd want to have a \"pure function\" is to make sure subclasses that inherit from this class define an implementation of this function. If you would allow pure functions to be non-virtual and thus not being able to be overriden they are basically pointless to have.</p>\n"}], "owner": {"reputation": 137, "user_id": 4681099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4969639b2a32f3f4f59dcebc29858d?s=128&d=identicon&r=PG&f=1", "display_name": "andre3312", "link": "https://stackoverflow.com/users/4681099/andre3312"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "closed_date": 1462986491, "accepted_answer_id": 37167989, "answer_count": 2, "score": -4, "last_activity_date": 1462984724, "creation_date": 1462982782, "last_edit_date": 1462982855, "question_id": 37167948, "link": "https://stackoverflow.com/questions/37167948/in-c-why-a-pure-function-must-be-virtual", "closed_reason": "Needs details or clarity", "title": "In C++ why a pure function must be virtual?", "body": "<p>I have searched on google and here but I can not understand why a pure function in a class must be virtual. I understand maybe it is not very useful declare a \"normal function\" as pure but I don't think is a nonsense. I mean, the word \"pure\" is there just to declare an abstract class. Ok, I can not use polymorphism with that pure normal function but the main reason (declare a class as abstract) is reached anyway.\nAm I wrong?</p>\n"}, {"tags": ["c++", "qt5", "qthread"], "comments": [{"owner": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462987110, "post_id": 37167927, "comment_id": 61873530, "body": "You could try setTimer(0) instead of the loop"}], "answers": [{"tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": true, "score": 1, "last_activity_date": 1462989153, "creation_date": 1462989153, "answer_id": 37170003, "question_id": 37167927, "link": "https://stackoverflow.com/questions/37167927/proper-way-to-run-managable-background-thread-with-qthread/37170003#37170003", "title": "Proper way to run managable background thread with QThread", "body": "<p>You don't need any magic and \"10 signals/slots\". Just create your worker:</p>\n\n<pre><code>class Worker: public QObject\n{\n    ...\npublic slots:\n    void routineTask();\n}\n</code></pre>\n\n<p>Somewhere in your code:</p>\n\n<pre><code>QThread bckgThread;\nbckgThread.start();\nWorker worker;\nworker.moveToThread(&amp;bckgThread);\n</code></pre>\n\n<p>Connect some signal to the <code>routineTask</code> slot to call it or use <code>QMetaObject::invokeMethod</code>.\nAnd when you are done with the thread, just call:</p>\n\n<pre><code>bckgThread.quit();\nbckgThread.wait();\n</code></pre>\n\n<p>That's pretty simple pattern. Why go the hard way and subclass <code>QThread</code>?</p>\n"}], "owner": {"reputation": 878, "user_id": 4247443, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sfQeY.jpg?s=128&g=1", "display_name": "Pustovalov Dmitry", "link": "https://stackoverflow.com/users/4247443/pustovalov-dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 37170003, "answer_count": 1, "score": 0, "last_activity_date": 1462989153, "creation_date": 1462982732, "question_id": 37167927, "link": "https://stackoverflow.com/questions/37167927/proper-way-to-run-managable-background-thread-with-qthread", "title": "Proper way to run managable background thread with QThread", "body": "<p>I need to run few background threads which must be managable in a way that I can safely stop it anytime. Threads should do some repetable task.</p>\n\n<p>I read documentation and the best way which I can find is to subclass QThread and reimplement run() method:</p>\n\n<pre><code>class BackgroundThread: public QThread\n{\n   Q_OBJECT\n\n   virtual void run() Q_DECL_OVERRIDE\n   {\n       while (true)\n       {\n          // do some routine task\n          // sleep ...\n       }  \n   }\n};\n</code></pre>\n\n<p>I like this because I can run code in separate thread and I don't need to do unconvient Qt magic with moveToThread and connecting up to 10 signals/slots to properly manage thread resources. </p>\n\n<p>The problem is that I can't find a way to safely stop the thread. I don't want to terminate it in a random place of execution, I would want it to stop when next iteration ends. The only way to achive it which I see now is to add some atomic flag to thread class and set it from main thread when I need to stop it, but I really don't like this solution.</p>\n\n<p>What is the best way to implement managable background thread using Qt5?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1462982501, "post_id": 37167682, "comment_id": 61870769, "body": "Extremely similar: <a href=\"http://stackoverflow.com/questions/15958577/error-expected-primary-expression-before-token?rq=1\">Error : expected primary-expression before &#39;.&#39; token</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462982523, "post_id": 37167682, "comment_id": 61870788, "body": "Change <code>Employee</code> to <code>E</code>, that simple."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462982908, "post_id": 37167682, "comment_id": 61871040, "body": "Capitalizing both your class names and your properties is going to drive other people up the wall. It&#39;s usually a lot more conventional to have the properties and variables start lower-case, like in your Date example.  Additionally, 40 characters for a name is crazy short. Is there any reason to not use <code>std::string</code> here? That&#39;s way better than copying C-style string buffers around."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5600437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b3522323de563ceaf53c786c5e8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid", "link": "https://stackoverflow.com/users/5600437/hamid"}, "edited": false, "score": 0, "creation_date": 1462982216, "post_id": 37167723, "comment_id": 61870581, "body": "Thanks you very much"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 0, "creation_date": 1462982251, "post_id": 37167723, "comment_id": 61870608, "body": "Note <code>E.Date.day</code> still won&#39;t work."}, {"owner": {"reputation": 1, "user_id": 5600437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b3522323de563ceaf53c786c5e8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid", "link": "https://stackoverflow.com/users/5600437/hamid"}, "edited": false, "score": 0, "creation_date": 1462982452, "post_id": 37167723, "comment_id": 61870736, "body": "How can i make it work then"}, {"owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "reply_to_user": {"reputation": 1, "user_id": 5600437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b3522323de563ceaf53c786c5e8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid", "link": "https://stackoverflow.com/users/5600437/hamid"}, "edited": false, "score": 0, "creation_date": 1462982505, "post_id": 37167723, "comment_id": 61870774, "body": "@Hamid I guess you should add a member having type <code>Date</code> and read the data into it."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1462984971, "post_id": 37167723, "comment_id": 61872297, "body": "Similar problem with <code>Name</code>, unless OP wants only the first or last name."}], "tags": [], "owner": {"reputation": 56828, "user_id": 4062354, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xcV4d.png?s=128&g=1", "display_name": "MikeCAT", "link": "https://stackoverflow.com/users/4062354/mikecat"}, "is_accepted": false, "score": 1, "last_activity_date": 1462982386, "last_edit_date": 1462982386, "creation_date": 1462982141, "answer_id": 37167723, "question_id": 37167682, "link": "https://stackoverflow.com/questions/37167682/how-to-remove-error-expected-primary-expression-before-token/37167723#37167723", "title": "how to remove error: expected primary-expression before &#39;.&#39; token", "body": "<p><code>Employee</code> is a type name and itself doesn't have members to read data in.\nUse the variable to access members.</p>\n\n<p>Additionally, you may want to use a reference to modify caller's local variable.\nAdd <code>&amp;</code> after the type name to use reference.</p>\n\n<pre><code>void Setter(Employee&amp; E)   //function for setting value in Employees \n{\n    cout&lt;&lt;\"Enter Id:\";\n    cin&gt;&gt;E.Id;\n    cout&lt;&lt;\"Enter Name:\";\n    cin&gt;&gt;E.Name;\n    cout&lt;&lt;\"Enter Gender:\";\n    cin&gt;&gt;E.Gender;\n    cout&lt;&lt;\"Enter Designation:\";\n    cin&gt;&gt;E.Des;\n    cout&lt;&lt;\"Enter Date of joining(DD/MM/YYYY):\";\n    //cin&gt;&gt;E.Date.day&gt;&gt;E.Date.month&gt;&gt;E.Date.year;\n}\n</code></pre>\n\n<p>Note that the comment-outed line</p>\n\n<pre><code>cin&gt;&gt;E.Date.day&gt;&gt;E.Date.month&gt;&gt;E.Date.year;\n</code></pre>\n\n<p>is wrong because the type of <code>E.Date</code> is <code>int</code> and it won't have members. You will have to alter the strucure's declaration to let the structure hold a date (or three additional integers).</p>\n"}], "owner": {"reputation": 1, "user_id": 5600437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b7b3522323de563ceaf53c786c5e8f5?s=128&d=identicon&r=PG&f=1", "display_name": "Hamid", "link": "https://stackoverflow.com/users/5600437/hamid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "closed_date": 1462985369, "answer_count": 1, "score": -6, "last_activity_date": 1462982386, "creation_date": 1462982018, "question_id": 37167682, "link": "https://stackoverflow.com/questions/37167682/how-to-remove-error-expected-primary-expression-before-token", "closed_reason": "Not suitable for this site", "title": "how to remove error: expected primary-expression before &#39;.&#39; token", "body": "<p>please help me remove this error i made these two structures and when i try to use the cin it shows this error how can i remove this error and please also tell me how to take a string in input using cin.getline and gets().</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nstruct Date //Date structure\n{\n    int day;\n    int month;\n    int year;\n};\nstruct Employee   //employee structure\n{\n    int Id;\n    char Name[40];\n    int Date;\n    char Gender;\n    char Des[40];\n};\nvoid Setter(Employee E)   //function for setting value in Employees \n{\n    cout&lt;&lt;\"Enter Id:\";\n    cin&gt;&gt;Employee.Id;\n    cout&lt;&lt;\"Enter Name:\";\n    cin&gt;&gt;Employee.Name;\n    cout&lt;&lt;\"Enter Gender:\";\n    cin&gt;&gt;Employee.Gender;\n    cout&lt;&lt;\"Enter Designation:\";\n    cin&gt;&gt;Employee.Des;\n    cout&lt;&lt;\"Enter Date of joining(DD/MM/YYYY):\";\n    cin&gt;&gt;Employee.Date.day&gt;&gt;Employee.Date.month&gt;&gt;Employee.Date.year;\n}\nint main() //main\n{\n    Employee el;\n    Setter(el);   //calling function\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "cmake", "qt-creator"], "comments": [{"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "edited": false, "score": 0, "creation_date": 1462982649, "post_id": 37167453, "comment_id": 61870864, "body": "show the content of the project(CMake) file"}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "edited": false, "score": 0, "creation_date": 1462982730, "post_id": 37167453, "comment_id": 61870930, "body": "It&#39;s all in the Git repository above. Here is the CMakeLists <a href=\"https://github.com/DanielArnett/opencv-mjpg/blob/master/CMakeLists.txt#L3\" rel=\"nofollow noreferrer\">github.com/DanielArnett/opencv-mjpg/blob/master/&hellip;</a>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 2, "creation_date": 1462982945, "post_id": 37167453, "comment_id": 61871068, "body": "It is a rule of Stack Overflow that code should be included into question post itself, not referenced to other site. See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for more info."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1462983294, "post_id": 37167453, "comment_id": 61871297, "body": "I will go through the How to Ask, thank you for your feedback @Tsyvarev. The question has been updated."}, {"owner": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 1, "creation_date": 1462986412, "post_id": 37167453, "comment_id": 61873095, "body": "I&#39;m not sure, but why aren&#39;t you using a Qt Project? It uses QMake instead of CMake, and with better Qt support."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462986774, "post_id": 37167453, "comment_id": 61873314, "body": "@user1887915 My team uses CMake, so it&#39;s easier for me to port existing projects. For this specific project I was having trouble including OpenCV, so I reverted to CMake."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462987381, "post_id": 37167453, "comment_id": 61873687, "body": "@user1887915 Perhaps the best solution is to just switch to qmake, but I can&#39;t figure out how to include opencv with it...."}, {"owner": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462987843, "post_id": 37167453, "comment_id": 61873977, "body": "<code>CONFIG += link_pkgconfig PKGCONFIG += opencv</code>  provided by <a href=\"http://stackoverflow.com/a/3517716/1887915\">stackoverflow.com/a/3517716/1887915</a>"}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462988228, "post_id": 37167453, "comment_id": 61874202, "body": "error: cannot find -lippicv"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1462988680, "post_id": 37167453, "comment_id": 61874494, "body": "Side note: You&#39;re not supposed to <code>#include &lt;QtModule&#47;QClass&gt;</code>: it hides project configuration issues and they surface during link time. You should <code>#include &lt;QClass&gt;</code> or simply <code>#include &lt;QtModule&gt;</code> as a whole. That way the project won&#39;t compile if the configuration is wrong. Any Qt examples that include <code>&lt;QtModule&#47;QClass&gt;</code> are misleading."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1462988944, "post_id": 37167453, "comment_id": 61874688, "body": "I appreciate the note @KubaOber, thanks! The project has been updated."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "reply_to_user": {"reputation": 1295, "user_id": 1887915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d43a2e328dbd73309c94f0c2a4434f1b?s=128&d=identicon&r=PG", "display_name": "user1887915", "link": "https://stackoverflow.com/users/1887915/user1887915"}, "edited": false, "score": 0, "creation_date": 1462989522, "post_id": 37167453, "comment_id": 61875027, "body": "@user1887915 I believe that is the way to link opencv on OSX. On Ubuntu Linux the appropriate way to link opencv is with <code>LIBS += `pkg-config opencv --libs`</code>, according to this excellent intro to qt and opencv guide: <a href=\"https://code.google.com/archive/p/qt-opencv-multithreaded/wikis/Documentation.wiki\" rel=\"nofollow noreferrer\">code.google.com/archive/p/qt-opencv-multithreaded/wikis/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462983550, "post_id": 37168066, "comment_id": 61871452, "body": "Made changes, updated Github to match, still have the same error."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462985433, "post_id": 37168066, "comment_id": 61872552, "body": "Also, when I try <code>find_package(Qt5Widgets Qt5Core)</code> I get the response <code>error: find_package called with invalid argument &quot;Qt5Core&quot;</code>, so I broke it up into 3 statements."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462986705, "post_id": 37168066, "comment_id": 61873280, "body": "@DanielArnett, sorry about the mistake in the answer. Did you try to make a clean build?"}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462986946, "post_id": 37168066, "comment_id": 61873433, "body": "Cleaned CMake and cleaned the build- still no luck."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462988327, "post_id": 37168066, "comment_id": 61874265, "body": "@DanielArnett, try to add <code>REQUIRED</code> to <code>find_package</code> for Qt modules like you have it for OpenCV and make sure CMake is re-run."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462989723, "post_id": 37168066, "comment_id": 61875145, "body": "Still no luck, cleaned everything and I&#39;m receiving the same error."}, {"owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "reply_to_user": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462990075, "post_id": 37168066, "comment_id": 61875376, "body": "@DanielArnett, well, it is next to impossible. If you did what you said then it found Qt \u2014 otherwise there would be errors on CMake run. And if it found Qt it is not possible that the includes weren&#39;t set. You CMake file is right, I&#39;ve cloned your repo, removed opencv(I don&#39;t have it) and it compiles fine."}, {"owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "edited": false, "score": 0, "creation_date": 1462991589, "post_id": 37168066, "comment_id": 61876173, "body": "Thanks for going the distance. I&#39;ve come to believe that it&#39;s a combination of my build environment and Qt/CMake compatibility issues. Switching to qmake now."}], "tags": [], "owner": {"reputation": 10552, "user_id": 643393, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a2cb19c975ede804712de8fcc0435f6e?s=128&d=identicon&r=PG", "display_name": "ixSci", "link": "https://stackoverflow.com/users/643393/ixsci"}, "is_accepted": false, "score": 4, "last_activity_date": 1462986644, "last_edit_date": 1462986644, "creation_date": 1462983151, "answer_id": 37168066, "question_id": 37167453, "link": "https://stackoverflow.com/questions/37167453/why-cant-my-c-classes-use-qt/37168066#37168066", "title": "Why can&#39;t my C++ classes use Qt?", "body": "<p>Add <code>find_package(Qt5Core)</code> in addition to <code>find_package(Qt5Widgets)</code> and add the following lines:</p>\n\n<pre><code>include_directories(${Qt5Widgets_INCLUDE_DIRS})\ninclude_directories(${Qt5Core_INCLUDE_DIRS})\n</code></pre>\n\n<p>And do not forget to add <code>Qt5::Core</code> to the <code>target_link_libraries</code>.\nBTW, I see you are using QtNetwork; you will have to make the same steps for that module too. And for every other module you will use.</p>\n"}], "owner": {"reputation": 466, "user_id": 2116716, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b30df13282c70d28e75408d3a2fe3877?s=128&d=identicon&r=PG", "display_name": "Daniel Arnett", "link": "https://stackoverflow.com/users/2116716/daniel-arnett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 643, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462986644, "creation_date": 1462981455, "last_edit_date": 1495542701, "question_id": 37167453, "link": "https://stackoverflow.com/questions/37167453/why-cant-my-c-classes-use-qt", "title": "Why can&#39;t my C++ classes use Qt?", "body": "<p>I'm working on a very basic C++ application using Qt5.6 with CMake. <a href=\"https://github.com/DanielArnett/opencv-mjpg\" rel=\"nofollow noreferrer\">Git Repo Here</a>.</p>\n\n<p>My problem? My <code>main.cpp</code> can <code>#include</code> Qt classes like <code>&lt;QtCore/QObject&gt;</code>, but my defined classes cannot.</p>\n\n<pre><code>error: QtCore/QObject: No such file or directory\n</code></pre>\n\n<p>I have downloaded the <a href=\"http://www.qt.io/download-open-source/\" rel=\"nofollow noreferrer\">latest version of Qt with Qt Creator here</a>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/XNAFe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XNAFe.png\" alt=\"Screenshot depicting the Qt Creator IDE with the error message &quot;QtCore/QObject: No such file or directory&quot; emanating from a user-defined header file.\"></a></p>\n\n<p>Could this be an improperly set up Qt environment? I don't understand how <code>main.cpp</code> can access Qt but my defined classes cannot.</p>\n\n<p>CMakeLists.txt</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.11)\n\nproject(testproject)\n\n# Find includes in corresponding build directories\nset(CMAKE_INCLUDE_CURRENT_DIR ON)\n# Instruct CMake to run moc automatically when needed.\nset(CMAKE_AUTOMOC ON)\n\n############ OpenCV PACKAGE #########\nset(BUILD_SHARED_LIBS ON)\nset(OpenCV_FIND_QUIETLY FALSE)\nfind_package( OpenCV REQUIRED)\ninclude_directories( ${OpenCV_INCLUDE_DIRS} )\n\n# Find the QtWidgets library\nfind_package(Qt5Widgets)\nqt5_wrap_cpp(tcp_hdr_moc ${PROJECT_SOURCE_DIR}/TcpServer.h)\n# Tell CMake to create the helloworld executable\nadd_executable(helloworld WIN32 main.cpp\n    TcpServer.h TcpServer.cpp\n    )\n# Use the Widgets module from Qt 5.\ntarget_link_libraries(helloworld Qt5::Widgets\n    ${OpenCV_LIBS}\n    ${PROJECT_SOURCE_DIR}/TcpServer.cpp\n    ${PROJECT_SOURCE_DIR}/TcpServer.h\n    )\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n#include &lt;QtWidgets/QApplication&gt;\n#include &lt;QtCore/QObject&gt;\n//#include \"TcpServer.h\"\n\nusing namespace std;\n\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    QString test = \"Hello\";\n    QObject test2;\n    int i = 0;\n//    TcpServer server;\n}\n</code></pre>\n\n<p>User defined class: TcpServer.cpp</p>\n\n<pre><code>#include \"TcpServer.h\"\n#include &lt;QtNetwork/QTcpSocket&gt;\n#include &lt;QtCore/QByteArray&gt;\n#include &lt;QtCore/QtDebug&gt;\n#include &lt;QtCore/QString&gt;\n#include &lt;opencv2/core.hpp&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nTcpServer::TcpServer(QObject *parent) :\nQObject(parent)\n{\n    server = new QTcpServer(this);\n    // whenever a user connects, it will emit signal\n    connect(server, SIGNAL(newConnection()),\n        this, SLOT(newConnection()));\n    if (!server-&gt;listen(QHostAddress::Any, 9999))\n        qDebug() &lt;&lt; \"Server could not start\";\n    else\n        qDebug() &lt;&lt; \"Server started!\";\n    vCapture = new VideoCapture(0);\n}\nvoid TcpServer::newConnection()\n{\n    QTcpSocket *socket = server-&gt;nextPendingConnection();\n    QByteArray ContentType = (\"HTTP/1.0 200 OK\\r\\n\" \\\n        \"Cache-Control: no-cache\\r\\n\" \\\n        \"Cache-Control: private\\r\\n\" \\\n        \"Content-Type: multipart/x-mixed-replace;boundary=--boundary\\r\\n\");\n    socket-&gt;write(ContentType);\n    std::vector&lt;uchar&gt; buff;\n    Mat img; //OpenCV Material\n    while (1) {\n        // Image to Byte Array via OPENCV Method\n        buff.clear();buff.empty();\n        vCapture-&gt;read(img); //Read from webcam\n\n        //TODO set the compression parameters.\n        imencode(\".jpg\", img, buff);\n        std::string content(buff.begin(), buff.end());\n        QByteArray CurrentImg(QByteArray::fromStdString(content));\n        QByteArray BoundaryString = (\"--boundary\\r\\n\" \\\n            \"Content-Type: image/jpeg\\r\\n\" \\\n            \"Content-Length: \");\n        BoundaryString.append(QString::number(CurrentImg.length()));\n        BoundaryString.append(\"\\r\\n\\r\\n\");\n\n        socket-&gt;write(BoundaryString);\n        socket-&gt;write(CurrentImg); // Write The Encoded Image\n        socket-&gt;flush();\n    }\n}\n</code></pre>\n\n<p>User Defined Class Header which throws the error: TcpServer.h</p>\n\n<pre><code>#ifndef TCPSERVER_H\n#define TCPSERVER_H\n\n#include &lt;QtCore/QObject&gt;\n#include &lt;QtNetwork/QTcpServer&gt;\n#include \"opencv2/videoio.hpp\"\n\nusing namespace cv;\nclass TcpServer : public QObject\n{\n    Q_OBJECT\n\npublic:\n    explicit TcpServer(QObject *parent = 0);\n    void newConnection();\nprivate:\n    QTcpServer* server;\n    VideoCapture* vCapture;\n};\n\n#endif\n</code></pre>\n\n<p>For reference I am working on these two related stack overflow questions.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/33064955/how-to-create-a-http-mjpeg-streaming-server-with-qtcp-server-sockets\">How to Create a HTTP MJPEG Streaming Server With QTcp-Server Sockets?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/37025383/error-while-using-qtcpsocket\">Error while using QTcpSocket.</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 4, "creation_date": 1462981473, "post_id": 37167417, "comment_id": 61870023, "body": "This is such a weird use case for an union - what&#39;s wrong with a single private strings and two getters (like <code>getResultText()</code> and <code>getErrorText()</code>)? You could even add a debug-only flag to make sure you&#39;re getting the correct text."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1462981787, "post_id": 37167417, "comment_id": 61870257, "body": "You could also have a simple struct with a <code>std::string</code> and a <code>bool</code> (or even enum) to indicate the result is an error or an actual result. I have to agree with @VittorioRomeo, it&#39;s a very weird idea to use a union for such."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462982427, "post_id": 37167417, "comment_id": 61870717, "body": "BTW, your struct actually misses a discriminator what to use from the union actually."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1462986514, "post_id": 37167417, "comment_id": 61873168, "body": "As c++ doesn&#39;t have strong <code>typedef</code>, you may wrap your <code>std::string</code> in classes (<code>struct Ok {std::string text;}; struct Error {std::string text;};</code>), and then use some variant class (<code>using Result = boost::variant&lt;Ok, Error&gt;</code>)."}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 0, "creation_date": 1462992369, "post_id": 37167417, "comment_id": 61876602, "body": "Is there usually ever a good use case for a union in c++ code? This is, I admit, an exercise in doing something stupid that I would never want to see in production code. But its interesting in that for most of my c++ career I just never even considered that a union with non trivial members would be supported by the language at all."}], "answers": [{"comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1462983148, "post_id": 37167961, "comment_id": 61871203, "body": "You may want to mention that <code>std::optional</code> does not yet exist in the latest c++ standard."}], "tags": [], "owner": {"reputation": 46, "user_id": 6321384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d28acda6dc3f44e209b1b11ff04f972?s=128&d=identicon&r=PG&f=1", "display_name": "user6321384", "link": "https://stackoverflow.com/users/6321384/user6321384"}, "is_accepted": false, "score": 1, "last_activity_date": 1462983253, "last_edit_date": 1462983253, "creation_date": 1462982815, "answer_id": 37167961, "question_id": 37167417, "link": "https://stackoverflow.com/questions/37167417/union-in-c-with-a-single-non-trivial-type/37167961#37167961", "title": "union in c++ with a single non trivial type", "body": "<p>A union is just going to decrease readability of your code. And depending on how you use it will increase maintenance too. Actually the fact that you mentioned \"implementing the rule of 5\" despite having a <code>std::string</code> member suggests that your class is going to be a nightmare to maintain.</p>\n\n<p>I would look at these options (not enough detail in the question to determine what would be best):</p>\n\n<ul>\n<li><p>Use an exception. You can make a custom exception by deriving from <code>std::exception</code></p></li>\n<li><p>Use <code>Boost.Optional</code>. </p>\n\n<pre><code>boost::optional&lt;std::string&gt; do_something() { ... };\n\nstd::string result = do_something().value_or(\"error!\");\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462983253, "creation_date": 1462981343, "last_edit_date": 1462981556, "question_id": 37167417, "link": "https://stackoverflow.com/questions/37167417/union-in-c-with-a-single-non-trivial-type", "title": "union in c++ with a single non trivial type", "body": "<p>I have a simple struct that can carry either a result, or error, never both.\nBoth are the same type, but I want two members just for clarity.\nFrom reading <a href=\"http://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow\">cppreference.com</a> it looks like the following code snippet would be valid c++?\nWith a placement delete in the union destructor to tidy up the <code>non trivial</code> class (std::string in this instance).</p>\n\n<pre><code>struct Result {\n  union {\n    std::string resultText;\n    std::string errorText;\n    ~(){ resultText.~string();}\n  };\n};\n</code></pre>\n\n<p>It looks like, to use this, the containing struct would need to implement the rule-of-5 members to explicitly copy/move resultText.</p>\n"}, {"tags": ["c++", "decltype", "lvalue", "rvalue"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 3, "creation_date": 1462981472, "post_id": 37167398, "comment_id": 61870021, "body": "See <a href=\"http://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/decltype</a>."}], "answers": [{"tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 9, "last_activity_date": 1462981560, "creation_date": 1462981560, "answer_id": 37167505, "question_id": 37167398, "link": "https://stackoverflow.com/questions/37167398/c-arrow-type-yields-lvalue/37167505#37167505", "title": "C++ arrow type yields lvalue", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/decltype\">cppreference</a></p>\n\n<blockquote>\n  <p>If the argument is an unparenthesized id-expression or an <b>unparenthesized class member access, then decltype yields the type of the entity named by this expression.</b> If there is no such entity, or if the argument names a set of overloaded functions, the program is ill-formed.</p>\n</blockquote>\n\n<p>This is the case in your example, so it will return the underlying type of the member, which is a <code>std::string</code>.</p>\n\n<p>If you want, you can add parenthesis so that <code>decltype</code> results in a reference:</p>\n\n<pre><code>//'str' is a std::string&amp;\ndecltype((p-&gt;name)) str = s.name;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 5, "last_activity_date": 1462982031, "last_edit_date": 1462982031, "creation_date": 1462981601, "answer_id": 37167521, "question_id": 37167398, "link": "https://stackoverflow.com/questions/37167398/c-arrow-type-yields-lvalue/37167521#37167521", "title": "C++ arrow type yields lvalue", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/decltype\" rel=\"nofollow\"><code>decltype</code></a> (which is from <em>&sect;7.1.6.2/4 [dcl.type.simple]</em>):</p>\n\n<blockquote>\n  <p>If the argument is an unparenthesized id-expression or an <strong>unparenthesized class member access</strong>, then decltype yields the type of the entity named by this expression.</p>\n</blockquote>\n\n<p><code>p-&gt;name</code> falls in the above case, so the type of <code>decltype(p-&gt;name)</code> is the type of <code>p-&gt;name</code> which is <code>std::string</code> not <code>std::string&amp;</code>.</p>\n\n<p>On the other hand, <code>decltype((p-&gt;name))</code> is <code>std::string&amp;</code> because <code>(p-&gt;name)</code> is an lvalue expression.</p>\n"}], "owner": {"reputation": 1190, "user_id": 493473, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/96c6048697f7b1d3ace64322b45056dc?s=128&d=identicon&r=PG", "display_name": "Nami", "link": "https://stackoverflow.com/users/493473/nami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 37167521, "answer_count": 2, "score": 7, "last_activity_date": 1462982031, "creation_date": 1462981303, "question_id": 37167398, "link": "https://stackoverflow.com/questions/37167398/c-arrow-type-yields-lvalue", "title": "C++ arrow type yields lvalue", "body": "<p>According to the C++ Primer, C++ arrow operator yields an lvalue. Additionally <code> decltype </code> of an expression which yields an lvalue will result in a reference type. So why the following decltype does <strong>not</strong> result in a reference type.</p>\n\n<pre><code>struct MyStruct {\n   string name\n};\nMyStruct s;\ns.name = \"aname\";\nMyStruct* p = &amp;s;\ndecltype (p -&gt; name) str = s.name; //type of str will be string and not &amp;string although p -&gt; name yields an lvalue\n</code></pre>\n"}, {"tags": ["c++", "qt", "crash"], "answers": [{"tags": [], "owner": {"reputation": 1382, "user_id": 4855159, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/Qs0Mv.jpg?s=128&g=1", "display_name": "Mara Black", "link": "https://stackoverflow.com/users/4855159/mara-black"}, "is_accepted": false, "score": -1, "last_activity_date": 1462993704, "creation_date": 1462993704, "answer_id": 37171362, "question_id": 37167253, "link": "https://stackoverflow.com/questions/37167253/qt-crashes-when-i-try-to-execute-any-program/37171362#37171362", "title": "Qt crashes when I try to execute any program", "body": "<p>It is necessary to use QtCreator? I use QtDesigner snd VS2013 and things go very well. :)</p>\n\n<p>check this thread <a href=\"http://Qt%20Creator%20Plain%20C++%20Project%20won&#39;t%20run/debug...\" rel=\"nofollow\">Qt Creator Plain C++ Project won't run/debug...</a> and this <a href=\"http://C++%20-%20QtCreator%20doesn&#39;t%20show%20any%20output\">C++ - QtCreator doesn't show any output</a></p>\n"}, {"tags": [], "owner": {"reputation": 116, "user_id": 2904821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79629bbfdb7c14f126cbc768b84db0dc?s=128&d=identicon&r=PG&f=1", "display_name": "Funmungus", "link": "https://stackoverflow.com/users/2904821/funmungus"}, "is_accepted": false, "score": 0, "last_activity_date": 1463004187, "creation_date": 1463004187, "answer_id": 37174024, "question_id": 37167253, "link": "https://stackoverflow.com/questions/37167253/qt-crashes-when-i-try-to-execute-any-program/37174024#37174024", "title": "Qt crashes when I try to execute any program", "body": "<p>Use dependency walker, <a href=\"http://www.dependencywalker.com/\" rel=\"nofollow\">http://www.dependencywalker.com/</a></p>\n\n<p>and post any missing dependencies.  It is possible some install targets or options are missing from when you installed QtCreator, which can be resolved with the maintenance tool in the same directory you installed Qt.</p>\n\n<p>Also, are you using the Visual Studio compiler(must have Visual Studio installed separately, and mark the option during install), or the Ming compiler(2 options checked during install or maintenance)?</p>\n"}, {"tags": [], "owner": {"reputation": 505, "user_id": 6350374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd132b176abca00f8443a74c169d1d6?s=128&d=identicon&r=PG&f=1", "display_name": "DYangu", "link": "https://stackoverflow.com/users/6350374/dyangu"}, "is_accepted": false, "score": 0, "last_activity_date": 1464034927, "creation_date": 1464034927, "answer_id": 37399861, "question_id": 37167253, "link": "https://stackoverflow.com/questions/37167253/qt-crashes-when-i-try-to-execute-any-program/37399861#37399861", "title": "Qt crashes when I try to execute any program", "body": "<p>Check if your antivirus is locking it, I had a similar issue time ago and it was due to antivirus (Avast specifically). Disable antivirus' realtime shields and try to execute a basic app.</p>\n"}], "owner": {"reputation": 11, "user_id": 6321195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d05b4dee4e58571b37f6a6e1ec8c8df0?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/6321195/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1464034927, "creation_date": 1462980907, "question_id": 37167253, "link": "https://stackoverflow.com/questions/37167253/qt-crashes-when-i-try-to-execute-any-program", "title": "Qt crashes when I try to execute any program", "body": "<p>I've looked for an answer during a few days and I haven't found anything similar anywhere;</p>\n\n<p>I downloaded Qt from the official website, installed it and apparently compiling is fine. But whenever I try to execute (Ctrl+R) any app, even the basic one which only displays a window or widget, QtCreator itself crashes. No error message, nothing, just crashing.</p>\n\n<p>I've tried to redownload and reinstall it a few times with different settings, but nothing will do.</p>\n\n<p>I'm running QtCreator on Windows 7 64 bits. I'll try on my laptop which is also running windows and will update if I find anything.</p>\n\n<p>Any help would be appreciated, I need to start a project as soon as possible. I'm relatively new to QT and if you need info on anything just ask me. Thanks :)</p>\n"}, {"tags": ["c++", "memory", "cuda", "gpu", "nvidia"], "answers": [{"comments": [{"owner": {"reputation": 402, "user_id": 4811003, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/01bc5834f8809e67d8a6d72ef20de22f?s=128&d=identicon&r=PG&f=1", "display_name": "fois", "link": "https://stackoverflow.com/users/4811003/fois"}, "edited": false, "score": 0, "creation_date": 1462995478, "post_id": 37168521, "comment_id": 61878322, "body": "Thanks for your answer. But I don&#39;t get the second point, if there are 4 float4 in a class foo, then those 32 banks still can only serve two instance of class foo simultaneously (in a warp), meaning there will be 16 way bank conflict?"}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "reply_to_user": {"reputation": 402, "user_id": 4811003, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/01bc5834f8809e67d8a6d72ef20de22f?s=128&d=identicon&r=PG&f=1", "display_name": "fois", "link": "https://stackoverflow.com/users/4811003/fois"}, "edited": false, "score": 0, "creation_date": 1462997745, "post_id": 37168521, "comment_id": 61879550, "body": "I&#39;ve added an explanation of what I had in mind to my answer.  This second approach only <i>reduces</i> bank conflicts, it does not eliminate them.  Using the first approach may allow you to <i>eliminate</i> bank conflicts through data reorganization.  The second approach assumes we can &quot;coax&quot; the compiler into the desired <code>float4</code> load pattern.  With sufficient effort, it should be possible.  Finally, you can use the profiler to immediately report bank conflicts, eg. via the <code>shared_replay_overhead</code> <a href=\"http://docs.nvidia.com/cuda/profiler-users-guide/index.html#metrics-reference\" rel=\"nofollow noreferrer\">metric</a>."}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 1, "last_activity_date": 1462997847, "last_edit_date": 1462997847, "creation_date": 1462984441, "answer_id": 37168521, "question_id": 37167061, "link": "https://stackoverflow.com/questions/37167061/cuda-minimize-bank-conflict-for-large-data-type/37168521#37168521", "title": "CUDA: minimize bank conflict for large data type", "body": "<ol>\n<li><p>You effectively have an array of structures (AoS).  This is canonically bad for GPU programming.  You could use the standard AoS->SoA data reorganization methodology to fix the access, so that adjacent threads are accessing adjacent elements (which will prevent bank conflicts).</p></li>\n<li><p>Load the data in larger chunks, e.g. reorganize your structure so that it can represent 4 <code>float4</code> quantities rather than <code>16</code> <code>float</code> quantities.  The compiler may be able to organize the load into <code>float4</code> loads, which will reduce bank conflicts.   You could even use a union in the structure if you really need both access methods.</p></li>\n</ol>\n\n<p>Based on the question in the comments, let's diagram this second case out.  For 16 <code>float</code> quantities per structure, whether stored as an array of <code>float</code> or an array of <code>float4</code>, the storage pattern would be like this:</p>\n\n<pre><code>(key: SXY  = float[Y] in Structure S[X], BX == Bank X)\nB00 B01 B02 B03 B04 B05 B06 B07 B08 B09 B10 B11 B12 B13 B14 B15 B16 B17 B18 B19 B20 B21 B22 B23 B24 B25 B26 B27 B28 B29 B30 B31\nS00 S01 S02 S03 S04 S05 S06 S07 S08 S09 S0A S0B S0C S0D S0E S0F S10 S11 S12 S13 S14 S15 S16 S17 S18 S19 S1A S1B S1C S1D S1E S1F\nS20 S21 S22 S23 S24 S25 S26 S27 S28 S29 S2A S2B S2C S2D S2E S2F S30 S31 S32 S33 S34 S35 S36 S37 S38 S39 S3A S3B S3C S3D S3E S3F\nS40 S41 S24 S43 S44 S45 S46 S47 S48 S49 S4A S4B S4C S4D S4E S4F S50 S51 S52 S53 S54 S55 S56 S57 S58 S59 S5A S5B S5C S5D S5E S5F\n...\n</code></pre>\n\n<p>Now, suppose our storage per thread is like this:</p>\n\n<pre><code>const int n = 16;\nstruct foo{\n    float data[n];\n};\n</code></pre>\n\n<p>And our \"load\" operation looks like this:</p>\n\n<pre><code>sh_data[tid] = ...\n</code></pre>\n\n<p>The compiler <a href=\"http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#device-memory-accesses\" rel=\"nofollow\">cannot load 16x4 bytes in a single instruction per thread</a> so it will break the above load operation into a sequence of requests.  <em>I think</em> this sequence will either be a loop loading <code>float</code> quantities or a loop loading bytes (i.e. a <code>memcpy</code>).  Let's assume it loads <code>float</code> quantities.  Therefore the first iteration of said loop will request <code>S00</code>, <code>S10</code>, <code>S20</code>, <code>S30</code> ... across the warp.  This is only 1 <code>float</code> per thread, so across the warp it is 128 bytes, so in theory it could be serviced in a single transaction.  But <code>S00</code>, <code>S20</code>, <code>S40</code>, ... are in the same bank, and likewise <code>S10</code>, <code>S30</code>, <code>S50</code>, ... are all in the same bank, so we will have a 16-way bank conflict, just as you predicted in your question. </p>\n\n<p>Now, suppose our storage per thread is like this:</p>\n\n<pre><code>const int n = 16;\nstruct foo{\n    float4 data[n/4];\n};\n</code></pre>\n\n<p>And our \"load\" operation looks like this:</p>\n\n<pre><code>sh_data[tid] = ...\n</code></pre>\n\n<p>Once again, the compiler cannot load 16x4 bytes in a single instruction per thread.  So it must break up the transfer.  If, in this case, we can coax the compiler into loading a <code>float4</code> per thread, then the first loop iteration will attempt to load S00-S03 for thread 0, S10-S13 for thread 1, etc.  This load is now 512 bytes instead of 128 bytes.  So the single warp read instruction for that loop iteration will be broken up into 4 shared memory transactions.  The first transaction will consist of a load request for S00-S03, S10-S13, S20-S23, S30-S33, S40-S43, S50-S53, S60-S63, S70-S73.  If we inspect this on the above diagram, we see that we have converted the previous sequence involving 16-way bank conflicts per loop iteration/transaction to a new sequence involving 4-way bank conflicts per loop iteration/transaction.  We have the same number of 128-byte transactions going to shared memory, but each transaction is now burdened with a 4-way bank conflict instead of a 16-way bank conflict.</p>\n"}], "owner": {"reputation": 402, "user_id": 4811003, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/01bc5834f8809e67d8a6d72ef20de22f?s=128&d=identicon&r=PG&f=1", "display_name": "fois", "link": "https://stackoverflow.com/users/4811003/fois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "accepted_answer_id": 37168521, "answer_count": 1, "score": 0, "last_activity_date": 1462997847, "creation_date": 1462980306, "question_id": 37167061, "link": "https://stackoverflow.com/questions/37167061/cuda-minimize-bank-conflict-for-large-data-type", "title": "CUDA: minimize bank conflict for large data type", "body": "<p>32 banks are mapped to 32 consecutive words. I wonder if a data type is large, say</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct foo{\n    float data[n];\n};\n\n__global__\nvoid kernel(foo* d_ptr){\n    __shared__ foo sh_data[number_threads_block];\n    int tid = threadIdx.x;\n    sh_data[tid] = d_ptr[tid + blockDim.x * blockIdx.x];\n    __syncthreads();\n\n    sh_data[tid] = ...\n}\n</code></pre>\n\n<p>where n are chosen to be 8 (or 16, 32). Then when we access sh_data[tid], if I get it right, there will be 8 (or 16, 32) bank conflictions.</p>\n\n<p>If this is the case, are there any techniques which can minimise the bank conflictions?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "class"], "comments": [{"owner": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1462979411, "post_id": 37166663, "comment_id": 61868556, "body": "inheritance ? or maybe you want instances of A and B to be different (in this case pass A by reference and make a geter function for the array)"}, {"owner": {"reputation": 225, "user_id": 5615653, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dd7320ed0d639a25da3db1de99a25ff3?s=128&d=identicon&r=PG&f=1", "display_name": "magalenyo", "link": "https://stackoverflow.com/users/5615653/magalenyo"}, "reply_to_user": {"reputation": 5508, "user_id": 498424, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ig1qY.jpg?s=128&g=1", "display_name": "Raxvan", "link": "https://stackoverflow.com/users/498424/raxvan"}, "edited": false, "score": 0, "creation_date": 1462980257, "post_id": 37166663, "comment_id": 61869213, "body": "@Raxvan I just edited so you can get to understand what I want my two classes to do!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462981068, "post_id": 37166663, "comment_id": 61869768, "body": "The solution to part of your problem is to implement <code>int &amp; operator[](int index){return a_array[index]}</code>. Then you can <code>a_array[0] = a[5];</code>. The rest of your problem I&#39;m not quite understanding."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1462981142, "post_id": 37166663, "comment_id": 61869817, "body": "You can declare the <code>createNewDecka</code> function a <code>friend</code> of class <code>A</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462981301, "post_id": 37166663, "comment_id": 61869915, "body": "You should probably better use a <code>std::vector&lt;int&gt; a_array;</code> and provide a function that returns a reference of <code>a_array</code>."}], "answers": [{"comments": [{"owner": {"reputation": 225, "user_id": 5615653, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dd7320ed0d639a25da3db1de99a25ff3?s=128&d=identicon&r=PG&f=1", "display_name": "magalenyo", "link": "https://stackoverflow.com/users/5615653/magalenyo"}, "edited": false, "score": 0, "creation_date": 1462980347, "post_id": 37166736, "comment_id": 61869270, "body": "I&#39;ve just edited the post! But I&#39;d like to keep my class A array to remain private, but still get to get the values from the A array."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1462981369, "post_id": 37166736, "comment_id": 61869958, "body": "<i>@JoshK</i> The problem with returning a pointer is, that the size information is lost."}, {"owner": {"reputation": 307, "user_id": 2925417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132cb22bf9015e64a7e97958d9199a77?s=128&d=identicon&r=PG&f=1", "display_name": "JoshK", "link": "https://stackoverflow.com/users/2925417/joshk"}, "edited": false, "score": 0, "creation_date": 1462981784, "post_id": 37166736, "comment_id": 61870255, "body": "Agreed, but if he knows what he is accessing then he is fine.  I think the real problem here is that are too many possible ways to do it.  The requirement needs to be refined a bit more."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1462982314, "post_id": 37166736, "comment_id": 61870649, "body": "Other problem with returning a pointer is it wrecks the encapsulation. You can do anything you want with a pointer, so that private is now public in all but name. Returning a pointer to const can help, but still allows some stupid behaviour."}, {"owner": {"reputation": 307, "user_id": 2925417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132cb22bf9015e64a7e97958d9199a77?s=128&d=identicon&r=PG&f=1", "display_name": "JoshK", "link": "https://stackoverflow.com/users/2925417/joshk"}, "edited": false, "score": 0, "creation_date": 1462986721, "post_id": 37166736, "comment_id": 61873291, "body": "Agreed with that too.  But the op isn&#39;t asking about &quot;the right way&quot; to do it.  Or the more elegant way.  IMHO for a kid learning C++ he needs at first to figure out that the array is just a pointer , the pointer can be passed around, the data isn&#39;t coppied in any way, etc.  Then he can move on to all kinds of idioms including stl vectors..."}], "tags": [], "owner": {"reputation": 307, "user_id": 2925417, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/132cb22bf9015e64a7e97958d9199a77?s=128&d=identicon&r=PG&f=1", "display_name": "JoshK", "link": "https://stackoverflow.com/users/2925417/joshk"}, "is_accepted": false, "score": 1, "last_activity_date": 1462979390, "creation_date": 1462979390, "answer_id": 37166736, "question_id": 37166663, "link": "https://stackoverflow.com/questions/37166663/in-c-how-to-use-an-atribute-from-another-class/37166736#37166736", "title": "In C++ How to use an atribute from another class", "body": "<p>The array is just a pointer to a piece of data.  But you need to be very clear on what you want.  Do you want to copy the data and have a separate copy to play with?  Or do you want the second class to have full access to the original?</p>\n\n<p>You can return the pointer in a function or make the member variable accessible as either public or via a friend.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 6311055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zybXYpU5_WU/AAAAAAAAAAI/AAAAAAAAAHc/mKR7VDNN7uM/photo.jpg?sz=128", "display_name": "Ravendra", "link": "https://stackoverflow.com/users/6311055/ravendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1462981668, "creation_date": 1462981668, "answer_id": 37167552, "question_id": 37166663, "link": "https://stackoverflow.com/questions/37166663/in-c-how-to-use-an-atribute-from-another-class/37167552#37167552", "title": "In C++ How to use an atribute from another class", "body": "<pre><code>create a method in public int Array(int index) and return the value to your desired\n\nlike:\n\n\nclass B\n{\n    public:\n\n        void createNewDeck(\"here would be the array, or the object I'd like to input to use the array inside\");\n    private:\n\n        static const int min = 5;\n\n\n        int a_array[min]\n\n// Method to return value outside\n\npublic:\n        int Array(int Index)\n{\n  return Index&gt;min ?-1:a_array[Index-1];\n}\n\n}; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 225, "user_id": 5615653, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dd7320ed0d639a25da3db1de99a25ff3?s=128&d=identicon&r=PG&f=1", "display_name": "magalenyo", "link": "https://stackoverflow.com/users/5615653/magalenyo"}, "edited": false, "score": 0, "creation_date": 1462983147, "post_id": 37167789, "comment_id": 61871201, "body": "Oh! I&#39;m doing this for academy purposes, and we&#39;re supposed to implement only what we&#39;ve &quot;learned&quot;, so I&#39;m basically not allowed to use that. We haven&#39;t done anything with friends this year! Even though I will look some info about friends for self-knowledge!"}], "tags": [], "owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "is_accepted": false, "score": 0, "last_activity_date": 1462982349, "creation_date": 1462982349, "answer_id": 37167789, "question_id": 37166663, "link": "https://stackoverflow.com/questions/37166663/in-c-how-to-use-an-atribute-from-another-class/37167789#37167789", "title": "In C++ How to use an atribute from another class", "body": "<p>Easiest way is to make <code>B</code> a friend of <code>A</code>. That way <code>B</code> will have access to <code>A</code>'s <code>private</code> member.</p>\n\n<pre><code>class B; // forward declare B to make it visible in A's scope. Important\n\nclass A\n{\n    private:\n        static const int MAX = 52;\n\n        int a_array[MAX];\n\n        friend class B; // !!\n        //friend B; // if you have C++11\n};\n</code></pre>\n"}], "owner": {"reputation": 225, "user_id": 5615653, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/dd7320ed0d639a25da3db1de99a25ff3?s=128&d=identicon&r=PG&f=1", "display_name": "magalenyo", "link": "https://stackoverflow.com/users/5615653/magalenyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1462982349, "creation_date": 1462979236, "last_edit_date": 1462982258, "question_id": 37166663, "link": "https://stackoverflow.com/questions/37166663/in-c-how-to-use-an-atribute-from-another-class", "title": "In C++ How to use an atribute from another class", "body": "<p>So I've got two different classes in C++, </p>\n\n<pre><code>#ifndef A_H\n#define A_H\n\nclass A\n{\n    public:\n        ...\n    private:\n\n        static const int MAX = 52;\n\n        int a_array[MAX];\n\n};\n\n#endif // A_H\n</code></pre>\n\n<p>And I'd like to use that array into another class... But I was wondering if I can't just return an array, how should I do it? Am I forced to create another array in the class B and copy it? </p>\n\n<p>THis would be the second class...</p>\n\n<pre><code>#include \"A.h\"\n#ifndef B_H\n#define B_H\n\nclass B\n{\n    public:\n        ...\n        void createNewDeck(\"here would be the array, or the object I'd like to input to use the array inside\");\n    private:\n\n        static const int min = 5;\n\n\n        int a_array[min]\n\n};\n\n#endif // B_H\n</code></pre>\n\n<p>EDIT: I want them to be different, I'd like to have a B method that works with the A class array. I would have a B method that takes some values from that array; something like this so you guys can get my idea.</p>\n\n<pre><code>void B::createNewDeck(const A &amp;a){\n    a_array[0] = a.a_array[5];\n    a_array[3] = a.a_array[48];\n}\n</code></pre>\n\n<p>Appreciate your help! </p>\n"}, {"tags": ["c++", "pascal"], "comments": [{"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 4, "creation_date": 1462978967, "post_id": 37166486, "comment_id": 61868229, "body": "It&#39;s an empty else statement, see the last snippet <a href=\"http://wiki.freepascal.org/Else\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 2, "creation_date": 1462979464, "post_id": 37166486, "comment_id": 61868595, "body": "Line up each <code>else</code> with an <code>if</code> you will see there is no magic."}, {"owner": {"reputation": 43, "user_id": 6321058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb13338eee7b7a0dbc1725a1edd7066?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0420\u0443\u043c\u044f\u043d\u0446\u0435\u0432", "link": "https://stackoverflow.com/users/6321058/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a0%d1%83%d0%bc%d1%8f%d0%bd%d1%86%d0%b5%d0%b2"}, "edited": false, "score": 0, "creation_date": 1462980139, "post_id": 37166486, "comment_id": 61869134, "body": "I see, thank you very much. I can&#39;t believe I overlooked something like that, though."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1462984136, "post_id": 37168060, "comment_id": 61871795, "body": "Each <code>else</code> matches the nearest possible <code>if</code>. I would have used <code>begin</code> and <code>end</code> to make the code clearer."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 1, "creation_date": 1462987762, "post_id": 37168060, "comment_id": 61873926, "body": "You replaced horrible indentation with even more horrible indentation!!"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 2, "creation_date": 1463042595, "post_id": 37168060, "comment_id": 61896589, "body": "@sergiol: it may not be your choice, but the indentation in the original question is the worst. It does not convey the structure of the code. The indentation in this answer is pretty standard, except for the 4 spaces (or 3) which is rather C-ish."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1463088730, "post_id": 37168060, "comment_id": 61927941, "body": "What? An else having nothing? I don&#39;t want to learn indentation in the same schools as you all!"}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 2, "creation_date": 1463089779, "post_id": 37168060, "comment_id": 61928399, "body": "@sergiol: An <code>else</code> with no statement (or rather with an empty statement) is not an indentation issue. It&#39;s added here so that the <i>second</i> <code>else</code> binds to the first <code>if</code> rather than to the second one. Given that decision, the indentation is correct. (As I mentioned, an arguably better solution would be to use <code>begin</code> and <code>end</code>.)"}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1463090418, "post_id": 37168060, "comment_id": 61928682, "body": "Oh! You pointed a thing a didn&#39;t remember from the Pascal language! An empty <code>else</code> after a line without a <code>;</code> is like the termination of a &quot;non <code>begin</code>...<code>end</code>&quot; <code>if</code> block!"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "reply_to_user": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 1, "creation_date": 1463130460, "post_id": 37168060, "comment_id": 61943058, "body": "@sergiol: what Keith Thompson said. That is not an indentation issue. I even agree with Keith that here, I would use begin and end and not a double else, but that latter is valid too. For that situation, this answer shows proper indentation."}], "tags": [], "owner": {"reputation": 46, "user_id": 6321384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d28acda6dc3f44e209b1b11ff04f972?s=128&d=identicon&r=PG&f=1", "display_name": "user6321384", "link": "https://stackoverflow.com/users/6321384/user6321384"}, "is_accepted": false, "score": 0, "last_activity_date": 1462983123, "creation_date": 1462983123, "answer_id": 37168060, "question_id": 37166486, "link": "https://stackoverflow.com/questions/37166486/double-else-statement-in-pascal/37168060#37168060", "title": "Double &#39;else&#39; statement in pascal", "body": "<p>That is some horrible indentation. If we indent it better we can see what's going on:</p>\n\n<pre><code>if K&lt;=0 then\n    if (Q&gt;=A)and(Q Mod KK =0)and(V&gt;=S)and(V&lt;=F) then \n        Out:=Out+1 \n    else \nelse\n   For i:=0 to 9 do\n</code></pre>\n\n<p>Here, the first else applies to the <code>if (Q&gt;=A)</code>, but it's empty.</p>\n"}, {"comments": [{"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1463130667, "post_id": 37197912, "comment_id": 61943203, "body": "This is correct, but I would have changed <code>if A then if B and C and D then</code> into <code>if A and B and C and D then</code>.(the two ifs that start with <code>if D[</code>)."}], "tags": [], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "is_accepted": true, "score": 3, "last_activity_date": 1468410184, "last_edit_date": 1468410184, "creation_date": 1463089302, "answer_id": 37197912, "question_id": 37166486, "link": "https://stackoverflow.com/questions/37166486/double-else-statement-in-pascal/37197912#37197912", "title": "Double &#39;else&#39; statement in pascal", "body": "<p>I've just copied to an editor (for instance Komodo, where you can select Pascal as language for syntax color highlighting) and reformatted the text you've wrote in a way I can read it myself.</p>\n\n<pre><code>procedure Force(Q:Int64;V,K:Integer);\nvar \n  i,j,t:Integer;\nbegin\n  if K&lt;=0 then\n    if (Q&gt;=A) and (Q Mod KK =0) and (V&gt;=S) and (V&lt;=F) then\n      Out:=Out+1\n    else\n  else\n    for i:=0 to 9 do begin\n      if (Q+(i+1)*h[k-1]&gt;=A) and (Q+i*h[k-1] &lt;= B) then\n        if (Q+(i+1)*h[K-1]&lt;B) and (Q+i*h[k-1] &gt;= A) then begin\n          M := (Q+i*h[k-1]) Mod KK;\n          for j:=0 to 9*(K-1) do begin\n            for t:=0 to KK-1 do begin\n              if D[K-1,j,t] &gt; 0 then\n                if (V+i+j &gt;= S) and (V+i+j &lt;= F) and ((t+M) mod KK = 0) then\n                  Out:=Out+D[K-1,j,t];\n            end; {for t}\n          end; {for j}\n        end else\n          if Odd(N-K+1) then\n            Force(Q+i*h[k-1],V+i,K-1)\n          else\n            Force(Q+i*h[k-1],V+i,K-1);\n      end;\n    end;\nend;\n</code></pre>\n\n<p>Don't you think it is more understandable now?</p>\n"}, {"comments": [{"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 1, "creation_date": 1463130783, "post_id": 37198374, "comment_id": 61943278, "body": "I personally find that less readable. Too much <code>begin-end</code> noise."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "reply_to_user": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1463131207, "post_id": 37198374, "comment_id": 61943568, "body": "@RudyVelthuis: He is passing the algorithm to C++, so he will have less <code>begin-end</code> noise! XD"}, {"owner": {"reputation": 27437, "user_id": 95954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/iD0qO.png?s=128&g=1", "display_name": "Rudy Velthuis", "link": "https://stackoverflow.com/users/95954/rudy-velthuis"}, "edited": false, "score": 0, "creation_date": 1463322316, "post_id": 37198374, "comment_id": 62007833, "body": "@I personally find the execution flow just as clear if there is not so much begin-end noise (or, in some other languages, {-} noise)."}], "tags": [], "owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "is_accepted": false, "score": 1, "last_activity_date": 1463091440, "creation_date": 1463091440, "answer_id": 37198374, "question_id": 37166486, "link": "https://stackoverflow.com/questions/37166486/double-else-statement-in-pascal/37198374#37198374", "title": "Double &#39;else&#39; statement in pascal", "body": "<p>It's quite often useful to use <code>begin</code> and <code>end</code> pairs even when they're not required by the syntax, just to make the code more readable and understandable. (Think of <code>begin</code> being the equivalent of <code>{</code> and <code>end</code> being the equivalent of <code>}</code>; while you can write <code>for(int i = 0; i &lt; 10; i++) SomeCode();</code>, it's usually more clear to use <code>for(int i = 0; i &lt; 10; i++) { SomeCode(); }</code>.</p>\n\n<p>So the code you've posted, with <code>begin</code> and <code>end</code> pairs added where appropriate, a no-op <code>else</code> or two removed, and more appropriate formatting seems much more readable to me.</p>\n\n<pre><code>Procedure Force(Q: Int64; V, K: Integer);\nVar\n  i, j, t: Integer;\nbegin\n  if K &lt;= 0 then\n  begin\n    if (Q &gt;= A) and (Q Mod KK = 0) and (V &gt;= S) and (V &lt;= F) then\n      Out := Out + 1;\n  end\n  else\n  begin\n    For i := 0 to 9 do\n    begin\n      if (Q + (i + 1) * h[K - 1] &gt;= A) and (Q + i * h[K - 1] &lt;= B) then\n      begin\n        if (Q + (i + 1) * h[K - 1] &lt; B) and (Q + i * h[K - 1] &gt;= A) then\n        begin\n          M := (Q + i * h[K - 1]) Mod KK;\n          For j := 0 to 9 * (K - 1) do\n          begin\n            For t := 0 to KK - 1 do\n            begin\n              if D[K - 1, j, t] &gt; 0 then\n              begin\n                if (V + i + j &gt;= S) and (V + i + j &lt;= F) and\n                   ((t + M) Mod KK = 0) then\n                  Out := Out + D[K - 1, j, t];\n              end;\n            end;\n          end;\n        end\n        else if Odd(N - K + 1) then\n          Force(Q + i * h[K - 1], V + i, K - 1)\n        else\n          Force(Q + i * h[K - 1], V + i, K - 1);\n      end;\n    end;\n  end;\nend;\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6321058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/beb13338eee7b7a0dbc1725a1edd7066?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0420\u0443\u043c\u044f\u043d\u0446\u0435\u0432", "link": "https://stackoverflow.com/users/6321058/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%a0%d1%83%d0%bc%d1%8f%d0%bd%d1%86%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 37197912, "answer_count": 3, "score": 4, "last_activity_date": 1468410184, "creation_date": 1462978856, "last_edit_date": 1462978879, "question_id": 37166486, "link": "https://stackoverflow.com/questions/37166486/double-else-statement-in-pascal", "title": "Double &#39;else&#39; statement in pascal", "body": "<p>I was trying to translate the following Pascal code to C++, when I stumbled upon the \"else else\" construction in question. I've never seen this before, so could anybody tell me what it does and what are it's C++ (or maybe C) equivalents?</p>\n\n<pre><code>  Procedure Force(Q:Int64;V,K:Integer);\n   Var i,j,t:Integer;\n    begin\n     if K&lt;=0 then\n      if (Q&gt;=A)and(Q Mod KK =0)and(V&gt;=S)and(V&lt;=F)then Out:=Out+1 else else\n       For i:=0 to 9 do\n        if (Q+(i+1)*h[k-1]&gt;=A)and(Q+i*h[k-1]&lt;=B) then\n         if (Q+(i+1)*h[K-1]&lt;B)and(Q+i*h[k-1]&gt;=A) then\n          Begin\n           M:=(Q+i*h[k-1]) Mod KK;\n           For j:=0 to 9*(K-1) do\n            For t:=0 to KK-1 do\n             if D[K-1,j,t]&gt;0 then\n              if (V+i+j&gt;=S)and(V+i+j&lt;=F)and((t+M) Mod KK=0) then\n                 Out:=Out+D[K-1,j,t];\n           end else\n            if Odd(N-K+1) then Force(Q+i*h[k-1],V+i,K-1) else\n                               Force(Q+i*h[k-1],V+i,K-1);\n    end;\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1462978709, "post_id": 37166386, "comment_id": 61868050, "body": "IIRC it resizes when the count goes over a power of 2."}, {"owner": {"reputation": 448, "user_id": 6271671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d181593f8c690c09eccc6b002416c7?s=128&d=identicon&r=PG&f=1", "display_name": "george_ptr", "link": "https://stackoverflow.com/users/6271671/george-ptr"}, "edited": false, "score": 3, "creation_date": 1462978839, "post_id": 37166386, "comment_id": 61868137, "body": "You can use <code>std::array</code> if you know the size of elements you want. Or even better use and <code>std::deque</code> which is optimized for front/back insertion/removal and always check the <code>size()</code> before anything you do."}, {"owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "reply_to_user": {"reputation": 5645, "user_id": 233076, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/489a0a450e5172afe13e5dd3c24423e0?s=128&d=identicon&r=PG", "display_name": "Carlos", "link": "https://stackoverflow.com/users/233076/carlos"}, "edited": false, "score": 0, "creation_date": 1462978919, "post_id": 37166386, "comment_id": 61868193, "body": "@Carlos Because in my case I have 100s of those vectors even if half is resizing it is taking significant number of time."}, {"owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "reply_to_user": {"reputation": 448, "user_id": 6271671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1d181593f8c690c09eccc6b002416c7?s=128&d=identicon&r=PG&f=1", "display_name": "george_ptr", "link": "https://stackoverflow.com/users/6271671/george-ptr"}, "edited": false, "score": 0, "creation_date": 1462979108, "post_id": 37166386, "comment_id": 61868324, "body": "@GeorgeAl <code>std::array</code> is not best here, because I know how many elements I want to have, but not how many I&#39;ll have. As for <code>std::deque</code> I might try this, now when I think about it. If I remember it correctly if I&#39;ll remove first element it will start next time reading from second - is that correct?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1462979255, "post_id": 37166386, "comment_id": 61868432, "body": "You can keep your vector a constant size and when you reach your size limit just swap the value for that position e.g.: <code>my_vector[299] = new_element</code> you wouldn&#39;t need to <code>pop</code>, also <code>pop</code>ing doesn&#39;t cause a reallocation"}, {"owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1462979357, "post_id": 37166386, "comment_id": 61868511, "body": "@EdChum in this case I am swapping n-th element, but when I am reading it in order, then I have mess, so I cannot do it like that."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1462980651, "post_id": 37166386, "comment_id": 61869496, "body": "Take a look at <a href=\"http://www.boost.org/doc/libs/1_60_0/doc/html/circular_buffer.html\" rel=\"nofollow noreferrer\">boost::circular</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1462982001, "post_id": 37166386, "comment_id": 61870420, "body": "Reopened. This question is <b>not</b> about FIFO, but about <b>fixed size</b>. That&#39;s a completely different animal."}], "answers": [{"comments": [{"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1462982659, "post_id": 37167092, "comment_id": 61870875, "body": "It&#39;s worth emphasizing that <code>pop_front</code> is the really slow operation in a <code>vector</code>. We need a structure with good <code>pop_front()</code> performance."}], "tags": [], "owner": {"reputation": 21, "user_id": 6321193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a7ae3b8ef89926915e61892f78a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "user6321193", "link": "https://stackoverflow.com/users/6321193/user6321193"}, "is_accepted": false, "score": 2, "last_activity_date": 1462980435, "creation_date": 1462980435, "answer_id": 37167092, "question_id": 37166386, "link": "https://stackoverflow.com/questions/37166386/keeping-constant-number-of-elements-in-vector/37167092#37167092", "title": "Keeping constant number of elements in vector", "body": "<p>Use a <code>std::queue</code>. Its underlying container is a <code>std::deque</code>, but like a stack a queue's interface is specifically for FIFO operations (push_back, pop_front), which is exactly what you're doing in your situation. Here's why a deque is better for this situation:</p>\n\n<blockquote>\n  <p>The storage of a deque is automatically expanded and contracted as\n  needed. Expansion of a deque is cheaper than the expansion of a\n  std::vector because it does not involve copying of the existing\n  elements to a new memory location.</p>\n  \n  <p>The complexity (efficiency) of common operations on deques is as\n  follows:</p>\n  \n  <ul>\n  <li>Random access - constant O(1)</li>\n  <li>Insertion or removal of elements at the end or beginning - constant O(1)</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1463039716, "last_edit_date": 1495539847, "creation_date": 1462981090, "answer_id": 37167325, "question_id": 37166386, "link": "https://stackoverflow.com/questions/37166386/keeping-constant-number-of-elements-in-vector/37167325#37167325", "title": "Keeping constant number of elements in vector", "body": "<p>You just need to <code>reserve</code> the capacity to a reasonable number. The vector will not automatically <a href=\"https://stackoverflow.com/q/1536753/3344612\">shrink</a>. So it only will grow and, possibly, stop at some point. </p>\n\n<p>You might be also interested in the resize policies. For example Facebook made a substantial research and created own implementation of the vector - <a href=\"https://github.com/facebook/folly/blob/master/folly/docs/FBVector.md\" rel=\"nofollow noreferrer\"><code>folly::fbvector</code></a> which has better performance than <code>std::vector</code></p>\n"}, {"comments": [{"owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "edited": false, "score": 0, "creation_date": 1462982717, "post_id": 37167814, "comment_id": 61870922, "body": "Your idea really makes sense. Thank you."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 1, "last_activity_date": 1462982430, "creation_date": 1462982430, "answer_id": 37167814, "question_id": 37166386, "link": "https://stackoverflow.com/questions/37166386/keeping-constant-number-of-elements-in-vector/37167814#37167814", "title": "Keeping constant number of elements in vector", "body": "<p>To implement a fixed-size container with push_back and pop_front and <strong>minimal</strong> memory shuffling, use a <code>std::array</code> of the appropriate size. To keep track of things you'll need a front index for pushing elements and a back index for popping things. To push, store the element at the location given by <code>front_index</code>, then increment <code>front_index</code> and take the remainder modulo the container size. To pop, read the element at the location given by <code>back_index</code>, and adjust that index the same way you did <code>front_index</code>. With that in place, the code in the question will do what you need.</p>\n"}], "owner": {"reputation": 2159, "user_id": 1080517, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2716302deba4765ec00122e0b0da833d?s=128&d=identicon&r=PG", "display_name": "sebap123", "link": "https://stackoverflow.com/users/1080517/sebap123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 37167814, "answer_count": 3, "score": 1, "last_activity_date": 1463039716, "creation_date": 1462978616, "question_id": 37166386, "link": "https://stackoverflow.com/questions/37166386/keeping-constant-number-of-elements-in-vector", "title": "Keeping constant number of elements in vector", "body": "<p>I am trying to figure out the fastest way to keep constant number of elements in vector (or maybe there is some ready-made structure that do it automatically).</p>\n\n<p>In my app I am adding multiple elements to the vector and I need to do it fast. Because of vector's self resizing at some point it is significantly decreasing overall application speed. What I was thinking about is to do something like this:</p>\n\n<pre><code>if(my_vector.size() &lt; 300)\n    my_vector.push_back(new_element);\nelse\n{\n    my_vector.pop_front();\n    my_vector.push_back(new_element);\n}\n</code></pre>\n\n<p>but after first few tests I've realized that it might not be the best solution, because I am not sure if <code>pop_front()</code> and later <code>push_back()</code> doesn't still need to resize at some point.</p>\n\n<p>Is there any other solution for this?</p>\n"}, {"tags": ["c++", "loops", "for-loop"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462978574, "post_id": 37166324, "comment_id": 61867955, "body": "can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that replicates the behavior?"}, {"owner": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462979220, "post_id": 37166324, "comment_id": 61868407, "body": "It doesn&#39;t get any clearer without me pasting my self-made Class and files."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1462979481, "post_id": 37166324, "comment_id": 61868605, "body": "That is why I asked for that.  The for loops you have should not stop.  More than likely it is code that you have not shown that is the issue.  keep cutting and trimming unneeded code out of you project until you get the minimal amount of code that produces the same problem and post it here.  Then we might be able to tell you what is wrong."}, {"owner": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462980484, "post_id": 37166324, "comment_id": 61869373, "body": "Added a link to the description, hope that&#39;ll help."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1462980573, "post_id": 37166324, "comment_id": 61869438, "body": "No it doesn&#39;t.  We are not a debugging service.  You need to make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem and include the code in the question."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "edited": false, "score": 0, "creation_date": 1462978987, "post_id": 37166396, "comment_id": 61868245, "body": "That was sadly just a typo I happened to make whilst making this post. It&#39;s initialized as you wrote it in the code and everything compiles nicely."}, {"owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "reply_to_user": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "edited": false, "score": 0, "creation_date": 1462979259, "post_id": 37166396, "comment_id": 61868436, "body": "@HannesKnutsson Then, please see comment from NathanOliver above and make a minimal, complete and verifiable example, since it works perfectly for me using the code <i>as is</i>: <a href=\"http://ideone.com/Ul4fql\" rel=\"nofollow noreferrer\">ideone.com/Ul4fql</a>."}, {"owner": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "edited": false, "score": 0, "creation_date": 1462980477, "post_id": 37166396, "comment_id": 61869363, "body": "Added a link to the description, hope that&#39;ll help."}, {"owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "reply_to_user": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "edited": false, "score": 1, "creation_date": 1462980865, "post_id": 37166396, "comment_id": 61869630, "body": "I won&#39;t go through your whole code; most likely, something is broken in your disjoint-set implementation. I advice you to get the return code from your program (something like <code>.&#47;my_program; echo $?</code>) and check if it&#39;s not zero. If it&#39;s not, good luck with your favourite debugger."}], "tags": [], "owner": {"reputation": 6023, "user_id": 4236078, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9959d878feda9f2bab4b43b554e09847?s=128&d=identicon&r=PG&f=1", "display_name": "ale64bit", "link": "https://stackoverflow.com/users/4236078/ale64bit"}, "is_accepted": false, "score": 6, "last_activity_date": 1462978635, "creation_date": 1462978635, "answer_id": 37166396, "question_id": 37166324, "link": "https://stackoverflow.com/questions/37166324/c-big-for-loop-stopping-randomly-long-before-it-should/37166396#37166396", "title": "C++ Big for-loop stopping randomly long before it should", "body": "<p>In the first line:</p>\n\n<pre><code>for(int i; i &lt; 100; i++)\n</code></pre>\n\n<p>the variable <code>i</code> is not initialized. So it contains an arbitrary value that gets incremented every iteration and eventually it stops. Try initializing it: <code>for(int i = 0; i &lt; 100; i++)</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 6320946, "user_type": "registered", "profile_image": "https://graph.facebook.com/1066026656799525/picture?type=large", "display_name": "Hannes Knutsson", "link": "https://stackoverflow.com/users/6320946/hannes-knutsson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1463071357, "answer_count": 1, "score": 0, "last_activity_date": 1462980431, "creation_date": 1462978464, "last_edit_date": 1462980431, "question_id": 37166324, "link": "https://stackoverflow.com/questions/37166324/c-big-for-loop-stopping-randomly-long-before-it-should", "closed_reason": "Not suitable for this site", "title": "C++ Big for-loop stopping randomly long before it should", "body": "<p>I am working on an assignment where I am supposed to try out a class I made in four different ways.\nThis shall be done 100 times in every way, and every single of those 100 iterations contains another for-loop wich runs 5000 iterations.</p>\n\n<p>My problem is that. whilst running, the program randomly stops. It just stops.\nNo exception. No breakpoint. No crash. No nothing.\nIt just stops computing.</p>\n\n<p>I've written down a couple of the places it stops\nSimplifyed code:</p>\n\n<pre><code>for(int i = 0; i &lt; 100; i++)\n{\n    //Some stuff\n    for(int j = 0; j &lt; 5000; j++)\n    {\n        //Some other stuff\n        cout &lt;&lt; i &lt;&lt; \"\\t\" &lt;&lt; j &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Som of the places it has stopped computing at are:</p>\n\n<pre><code>3    3564\n1    2273\n1    4999\n2    4999\n0    3430\n7    4566\n1    4916\n0    4999\n</code></pre>\n\n<p>So the only pattern I see is that it quite often stops at 4999 of the \"j-loop\" and very early in the \"i-loop\".</p>\n\n<p>I am really confused about this since I'm sure that what I'm doing in the loops should not be a problem.</p>\n\n<p>Please help!</p>\n\n<p><a href=\"http://pastebin.com/D99C19wS\" rel=\"nofollow\">Complete code Link</a></p>\n"}, {"tags": ["c++", "boost", "apply", "visitor"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 5265351, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/aa351ab1c8105cd7b8557ff682f98053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael EstrinOne", "link": "https://stackoverflow.com/users/5265351/michael-estrinone"}, "edited": false, "score": 0, "creation_date": 1462986936, "post_id": 37168343, "comment_id": 61873427, "body": "Many thanks! Question pertaining to your comment:you changed the return paramenter of lst() to std::vector&lt;std::shared_ptr&lt;base&gt; &gt; Class B in the example has this list return vectors of shared pointers to A. I don&#39;t see how can I determine the type of the elements in the container if it returns pointer to the base class."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 233, "user_id": 5265351, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/aa351ab1c8105cd7b8557ff682f98053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael EstrinOne", "link": "https://stackoverflow.com/users/5265351/michael-estrinone"}, "edited": false, "score": 0, "creation_date": 1462992356, "post_id": 37168343, "comment_id": 61876595, "body": "Huh. <code>operator()</code> clearly already returns that. If you insist, you can only convert and return a copy...: <a href=\"http://coliru.stacked-crooked.com/a/2611392cee514d8e\" rel=\"nofollow noreferrer\">demo</a>. By now I think you need to make up your mind: what do you need static polymorphism for, and why do you want dynamic polymorphism."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 233, "user_id": 5265351, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/aa351ab1c8105cd7b8557ff682f98053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael EstrinOne", "link": "https://stackoverflow.com/users/5265351/michael-estrinone"}, "edited": false, "score": 0, "creation_date": 1462992494, "post_id": 37168343, "comment_id": 61876670, "body": "The latter has nothing to do with variant: see <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow noreferrer\"><code>dynamic_cast</code></a> and <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/pointer_cast\" rel=\"nofollow noreferrer\"><code>dynamic_pointer_cast</code></a>. Also, if you need different return types, that means you cannot have a single visitor. You can of course return... another variant (uhoh): <b><a href=\"http://coliru.stacked-crooked.com/a/5e87a1b585a59fab\" rel=\"nofollow noreferrer\">like so</a></b> but that seems like a reasonably large <a href=\"https://en.wikipedia.org/wiki/Code_smell\" rel=\"nofollow noreferrer\">code smell</a> to me."}, {"owner": {"reputation": 233, "user_id": 5265351, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/aa351ab1c8105cd7b8557ff682f98053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael EstrinOne", "link": "https://stackoverflow.com/users/5265351/michael-estrinone"}, "edited": false, "score": 0, "creation_date": 1463080669, "post_id": 37168343, "comment_id": 61923718, "body": "I am trying to create a tree structure to replace my Qt code for treeview.&lt;br /&gt;"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1462983943, "creation_date": 1462983943, "answer_id": 37168343, "question_id": 37166181, "link": "https://stackoverflow.com/questions/37166181/boostvariant-get-vector-property-of-members/37168343#37168343", "title": "boost::variant - get vector property of members", "body": "<p>Your visitor has an implicit return type of <code>void</code> (the template argument is missing).</p>\n\n<p>Here's taking the opportunity to remove the base class as it's no longer needed in most c++11 code bases:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/d855e12782bb5391\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/variant.hpp&gt;\n\nclass base {};\n\nusing base_vec = std::vector&lt;std::shared_ptr&lt;base&gt; &gt;;\n\nclass A : public base {\n  public:\n    base_vec &amp;lst() { return _lst; }\n\n  private:\n    base_vec _lst;\n};\n\nclass B : public base {\n  public:\n    base_vec &amp;lst() { return _lst; }\n\n  private:\n    base_vec _lst;\n};\n\nusing bstvar = boost::variant&lt;A, B&gt;;\n\nstruct lstVisitor {\n    using result_type = base_vec&amp;;\n    template &lt;typename T&gt; result_type operator()(T &amp;t) const { return t.lst(); }\n};\n\nint main(int argc, char *argv[]) {\n    bstvar test { B{} };\n    base_vec&amp; lst = boost::apply_visitor(lstVisitor{}, test);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 5265351, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/aa351ab1c8105cd7b8557ff682f98053?s=128&d=identicon&r=PG&f=1", "display_name": "Michael EstrinOne", "link": "https://stackoverflow.com/users/5265351/michael-estrinone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462983943, "creation_date": 1462978132, "question_id": 37166181, "link": "https://stackoverflow.com/questions/37166181/boostvariant-get-vector-property-of-members", "title": "boost::variant - get vector property of members", "body": "<p>I am stuck :). I have two-level hierarchy, each level has child nodes.\nThe goal is to use this structure to populate gui tree. I am trying to access child nodes of variant members in a generic manner. Following code does not compile, using vs2013. I'll appreciate the helping hand and/or advise\non the design changes.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;memory&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/variant.hpp&gt;\n\nclass base {};\n\nclass A : public base\n{\npublic:\n    std::vector&lt;std::shared_ptr&lt;base&gt;&gt; &amp; lst(){ return _lst; }\nprivate:\n    std::vector&lt;std::shared_ptr&lt;base&gt;&gt; _lst;\n};\n\nclass B : public base\n{\npublic:\n    std::vector&lt;std::shared_ptr&lt;A&gt;&gt;&amp; lst() { return _lst; }\nprivate:\n    std::vector&lt;std::shared_ptr&lt;A&gt;&gt; _lst;\n};\n\nusing bstvar = boost::variant&lt;A, B&gt;;\n\nclass lstVisitor : public boost::static_visitor&lt;&gt;\n{\npublic:\n    template &lt;typename T&gt; std::vector&lt;std::shared_ptr&lt;base&gt;&gt;&amp; operator()  (T&amp; t) const\n    {\n        return t.lst();\n    }\n};\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    bstvar test;\n    auto&amp; lst= boost::apply_visitor(lstVisitor{}, test);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "type-conversion", "overloading", "language-lawyer"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1462978301, "post_id": 37166131, "comment_id": 61867759, "body": "Is there a problem you&#39;re trying to solve or is this just pure curiousity?"}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 4, "creation_date": 1462979943, "post_id": 37166131, "comment_id": 61868998, "body": "The <i>(a bit dubious)</i> rationale, for not having a short promotion, is that <code>int</code> is considered the optimal processor/register size, <code>short</code> just a packed memory layout. Hence an int (&quot;register&quot;) is used to process a <code>char</code>. It is assumed that an short subtraction would not be more efficient than an int subtraction."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "edited": false, "score": 4, "creation_date": 1462982629, "post_id": 37166131, "comment_id": 61870855, "body": "@JoopEggen - that&#39;s not a rationale (dubious or otherwise), it&#39;s a design decision: in C and C++, <code>int</code> is supposed to be the natural size for the architecture, so it&#39;s what should be used when there isn&#39;t a good reason to prefer something else."}, {"owner": {"reputation": 95690, "user_id": 984823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2KYN.jpg?s=128&g=1", "display_name": "Joop Eggen", "link": "https://stackoverflow.com/users/984823/joop-eggen"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 4, "creation_date": 1462988784, "post_id": 37166131, "comment_id": 61874557, "body": "@PeteBecker I wanted to formulate the <i>reason</i> for that design decision. As there were already answers citing references I did not want a legalistic statement."}, {"owner": {"reputation": 13195, "user_id": 3777958, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/Cjiij.jpg?s=128&g=1", "display_name": "Destructor", "link": "https://stackoverflow.com/users/3777958/destructor"}, "edited": false, "score": 1, "creation_date": 1463058285, "post_id": 37166131, "comment_id": 61908216, "body": "excellent question +1 !!!"}], "answers": [{"comments": [{"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 1, "creation_date": 1462996293, "post_id": 37166537, "comment_id": 61878779, "body": "Why did they use the word &quot;converted&quot; in the list itself when establishing a difference between integer promotion and conversion? That seems like a potential source of ambiguity/confusion, especially when quoted."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 0, "creation_date": 1462996527, "post_id": 37166537, "comment_id": 61878925, "body": "@JAB good question :) I think what they mean is that promotion is a special type of conversion. But because it&#39;s still a conversion, they partly call it like that"}, {"owner": {"reputation": 19090, "user_id": 138772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32504cb73cc05b26335a43219fff3a79?s=128&d=identicon&r=PG", "display_name": "JAB", "link": "https://stackoverflow.com/users/138772/jab"}, "edited": false, "score": 0, "creation_date": 1462996936, "post_id": 37166537, "comment_id": 61879154, "body": "They do establish that integral promotions fall under the category of implicit conversions at the start of your quote, so that makes sense."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 23, "last_activity_date": 1462978961, "last_edit_date": 1592644375, "creation_date": 1462978961, "answer_id": 37166537, "question_id": 37166131, "link": "https://stackoverflow.com/questions/37166131/why-does-the-compiler-match-char-to-int-but-not-short/37166537#37166537", "title": "Why does the compiler match &quot;char&quot; to &quot;int&quot; but not &quot;short&quot;?", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion\" rel=\"noreferrer\">Implicit conversion</a> (cppreference):</p>\n<blockquote>\n<p>The following implicit conversions are classified as integral promotions:</p>\n<ul>\n<li>[...]</li>\n<li><code>char</code> can be converted to <code>int</code> or <code>unsigned int</code> depending on the underlying type: <code>signed char</code> or <code>unsigned char</code> (see above);</li>\n<li>[...]</li>\n</ul>\n</blockquote>\n<p>So, if there is a function <code>f(int)</code> and <code>f(short)</code>, the compiler will try to do an <b>integer promotion</b> first, if it is not possible, it will fallback to a <b>integer conversion</b>.</p>\n<p><code>char</code> to <code>int</code> is an <b>integer promotion</b> (see above), so the compiler will choose it.</p>\n<p>If there isn't any <code>f(int)</code>, the compiler will fail to find a function where it can do integer promotion, and will fallback to integer conversion. It finds a <code>f(short)</code>, and a <code>char</code> can be converted into a <code>short</code>, so it will choose it.</p>\n"}, {"comments": [{"owner": {"reputation": 150, "user_id": 3273365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pdD5h.jpg?s=128&g=1", "display_name": "shasan", "link": "https://stackoverflow.com/users/3273365/shasan"}, "edited": false, "score": 0, "creation_date": 1572905356, "post_id": 37166556, "comment_id": 103699382, "body": "Why is the literal 0 perceived as a char instead of an integral type?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 150, "user_id": 3273365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pdD5h.jpg?s=128&g=1", "display_name": "shasan", "link": "https://stackoverflow.com/users/3273365/shasan"}, "edited": false, "score": 0, "creation_date": 1572909355, "post_id": 37166556, "comment_id": 103700578, "body": "@shasan Literal 0 is not perceived as a char. It is (usually) &quot;perceived&quot; as int. Also, char <i>is</i> an integral type."}, {"owner": {"reputation": 150, "user_id": 3273365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pdD5h.jpg?s=128&g=1", "display_name": "shasan", "link": "https://stackoverflow.com/users/3273365/shasan"}, "edited": false, "score": 0, "creation_date": 1572913538, "post_id": 37166556, "comment_id": 103701446, "body": "See my question again in the context of the original question and answer. The question asks why the function call with <code>0</code> calls the int overload. The answer explains how &quot;the promotion from char to int is preferred over conversion from char to short&quot;."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 150, "user_id": 3273365, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/pdD5h.jpg?s=128&g=1", "display_name": "shasan", "link": "https://stackoverflow.com/users/3273365/shasan"}, "edited": false, "score": 0, "creation_date": 1572914561, "post_id": 37166556, "comment_id": 103701609, "body": "<code>The question asks why the function call with 0 calls the int overload.</code> No it doesn&#39;t. It asks why calling the overloaded function with <code>c</code> chooses the <code>int</code> overload rather than <code>short</code>. <code>c</code> is not literal 0; it is a <code>char</code> lvalue. And the reason is that one conversion (promotion) is preferred to the other conversion (not promotion.)"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 67, "last_activity_date": 1542497201, "last_edit_date": 1542497201, "creation_date": 1462979005, "answer_id": 37166556, "question_id": 37166131, "link": "https://stackoverflow.com/questions/37166131/why-does-the-compiler-match-char-to-int-but-not-short/37166556#37166556", "title": "Why does the compiler match &quot;char&quot; to &quot;int&quot; but not &quot;short&quot;?", "body": "<p>(Integral) Promotion is preferred to other (integral) conversions by <a href=\"http://en.cppreference.com/w/cpp/language/overload_resolution\" rel=\"nofollow noreferrer\">overload resolution</a></p>\n\n<blockquote>\n  <p><strong>Ranking of implicit conversion sequences</strong></p>\n  \n  <p>1) Exact match: no conversion required, lvalue-to-rvalue conversion, qualification conversion, function pointer conversion, (since C++17) user-defined conversion of class type to the same class</p>\n  \n  <p><strong>2) Promotion</strong>: integral promotion, floating-point promotion</p>\n  \n  <p><strong>3) Conversion</strong>: integral conversion, floating-point conversion, floating-integral conversion, pointer conversion, pointer-to-member conversion, boolean conversion, user-defined conversion of a derived class to its base</p>\n</blockquote>\n\n<p>So, the promotion from <code>char</code> to <code>int</code> is preferred over conversion from <code>char</code> to <code>short</code>.</p>\n\n<hr>\n\n<p><em>What is promotion?</em> you may ask. It is a special kind of conversion described by the standard.</p>\n\n<p><em>Why is <code>char</code> to <code>short</code> not a promotion?</em>, you may continue. <a href=\"http://en.cppreference.com/w/cpp/language/implicit_conversion#Integral_promotion\" rel=\"nofollow noreferrer\">Integral promotion</a> is always to <code>int</code> or a larger type. There are no promotions to <code>short</code>.</p>\n\n<blockquote>\n  <p>The following implicit conversions are classified as integral promotions:</p>\n  \n  <ul>\n  <li><p>signed char or signed short can be converted to int;</p></li>\n  <li><p>unsigned char or unsigned short can be converted to int if it can hold its entire value range, and unsigned int otherwise;</p></li>\n  <li><p><strong>char can be converted to int or unsigned int</strong> depending on the underlying type: signed char or unsigned char (see above);</p></li>\n  <li><p>wchar_t, char16_t, and char32_t can be converted to the first type from the following list able to hold their entire value range: int, unsigned int, long, unsigned long, long long, unsigned long long;\n      an unscoped enumeration type whose underlying type is not fixed can be converted to the first type from the following list able to hold their entire value range: int, unsigned int, long, unsigned long, long long, or unsigned long long. If the value range is greater, no integral promotions apply; </p></li>\n  <li><p>an unscoped enumeration type whose underlying type is fixed can be converted to its promoted underlying type; </p>\n  \n  <p>(since C++11)</p></li>\n  <li><p>a bit field type can be converted to int if it can represent entire value range of the bit field, otherwise to unsigned int if it can represent entire value range of the bit field, otherwise no integral promotions apply;\n      the type bool can be converted to int with the value false becoming \u200b0\u200b and true becoming 1. </p></li>\n  </ul>\n</blockquote>\n\n<hr>\n\n<p>Standard references (current standard draft):</p>\n\n<p><a href=\"http://eel.is/c++draft/over.best.ics#over.ics.scs-3\" rel=\"nofollow noreferrer\">[over.ics.scs] \u00a7 3</a></p>\n\n<p><a href=\"http://eel.is/c++draft/conv.prom#1\" rel=\"nofollow noreferrer\">[conv.prom] \u00a7 1</a></p>\n"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3535, "favorite_count": 13, "accepted_answer_id": 37166556, "answer_count": 2, "score": 71, "last_activity_date": 1617202842, "creation_date": 1462978034, "last_edit_date": 1617202842, "question_id": 37166131, "link": "https://stackoverflow.com/questions/37166131/why-does-the-compiler-match-char-to-int-but-not-short", "title": "Why does the compiler match &quot;char&quot; to &quot;int&quot; but not &quot;short&quot;?", "body": "<p>I've got a small program:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nvoid f(int)   { cout &lt;&lt; \"int\\n\";   }\nvoid f(short) { cout &lt;&lt; \"short\\n\"; }\n\nint main(void){\n    char c = 0;\n    f(c);\n    return 0;\n}\n</code></pre>\n\n<p>It prints <code>int</code>. I felt that, if this is because of \"Integer promotion\", why  is not <code>short</code> preferred? </p>\n\n<p>I also know that integer promotion happens in an expression (like A=B). But I don't have expression in call to <code>f(),</code> right?</p>\n\n<p>If this is related to overload resolution rule, why passing <code>char</code> to f will result into compilers preferring <code>int</code> to <code>short</code>?</p>\n\n<p>If I delete <code>f(int)</code>, then <code>f(c)</code> will call <code>f(short)</code>!</p>\n\n<p>So in summary, my question is, is it related to \"Integer promotion\" or just \"overload resolution rule\"? And why?</p>\n"}, {"tags": ["c++", "visual-studio", "itk"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "edited": false, "score": 0, "creation_date": 1463036688, "post_id": 37167996, "comment_id": 61892787, "body": "same error. I&#39;m new to VS and Microsoft in general: if I include a directory, say ITK/Module/Core/ shouldn&#39;t be be sub directories automatically included?"}], "tags": [], "owner": {"reputation": 9, "user_id": 6311055, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zybXYpU5_WU/AAAAAAAAAAI/AAAAAAAAAHc/mKR7VDNN7uM/photo.jpg?sz=128", "display_name": "Ravendra", "link": "https://stackoverflow.com/users/6311055/ravendra"}, "is_accepted": false, "score": 0, "last_activity_date": 1462985045, "last_edit_date": 1462985045, "creation_date": 1462982943, "answer_id": 37167996, "question_id": 37165923, "link": "https://stackoverflow.com/questions/37165923/itk-4-9-error-lnk2019-for-itksyssysteminformationimplementation/37167996#37167996", "title": "ITK 4.9 error LNK2019 for itksys::SystemInformationImplementation", "body": "<p>Include the folder :</p>\n\n<pre><code>/ITK/Module/Core/Common/include/\n</code></pre>\n\n<p>Above directory contains all the itksys references.</p>\n"}, {"tags": [], "owner": {"reputation": 339, "user_id": 5366391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b1dfbbc39b94bc359ce14c950d7b895?s=128&d=identicon&r=PG", "display_name": "aspo", "link": "https://stackoverflow.com/users/5366391/aspo"}, "is_accepted": false, "score": 0, "last_activity_date": 1547127301, "last_edit_date": 1592644375, "creation_date": 1547127301, "answer_id": 54129894, "question_id": 37165923, "link": "https://stackoverflow.com/questions/37165923/itk-4-9-error-lnk2019-for-itksyssysteminformationimplementation/54129894#54129894", "title": "ITK 4.9 error LNK2019 for itksys::SystemInformationImplementation", "body": "<p>I hope this solution helps someone because I had the same error when using itk v4.13. The issues comes not from not including all the itk libs but the itk libs calling a function that is defined in another external lib, in this case the sdk version being used in the project. To fix this you can read about the following:</p>\n<ol>\n<li>Read about this in <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/psapi/nf-psapi-getprocessmemoryinfo\" rel=\"nofollow noreferrer\">Windows Dev Center</a></li>\n<li>See the following thread <a href=\"http://forums.codeguru.com/showthread.php?394011-RESOLVED-error-in-program-compilation-header-file\" rel=\"nofollow noreferrer\">CodeGuru</a></li>\n</ol>\n<p>Or you can include the following missing lib under the Project properties&gt;Linker&gt;Input&gt;Additonal Dependies: Psapi.lib</p>\n"}], "owner": {"reputation": 353, "user_id": 1384636, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/81277ca5462a19c3bd8a32778a3d42f0?s=128&d=identicon&r=PG", "display_name": "user1384636", "link": "https://stackoverflow.com/users/1384636/user1384636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547127301, "creation_date": 1462977444, "question_id": 37165923, "link": "https://stackoverflow.com/questions/37165923/itk-4-9-error-lnk2019-for-itksyssysteminformationimplementation", "title": "ITK 4.9 error LNK2019 for itksys::SystemInformationImplementation", "body": "<p>I've seen so far lots of posts which suggested to resolve this problem by including the missing library. Which does not work in my case.</p>\n\n<p>I'm trying to link my project to ITK (v4.9).\nThe compilation of ITK went just fine, both in debug and release mode. Then I built the project INSTALL and BAM, all the libraries and .h files were in one location. </p>\n\n<p>The project is compiled in Visual Studio 2012. </p>\n\n<p>I included the folder /ITK/include/ in the include field, the /ITK/lib/ as directory of the additional dependencies and the list of .lib(s) in the additional dependencies. </p>\n\n<p>Results? Doesn't work.  </p>\n\n<pre><code>  Error 1   error LNK2019: unresolved external symbol gethostbyname \n  referenced in function \"public: int __cdecl     \n  itksys::SystemInformationImplementation::GetFullyQualifiedDomainName\n           (class std::basic_string&lt;char,struct std::char_traits&lt;char&gt;,class std::allocator&lt;char&gt; &gt; &amp;)\" (?GetFullyQualifiedDomainName@SystemInformationImplementation@itksys@@QEAAHAEAV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z)\n</code></pre>\n\n<p>same error for GetHostname, GetProcessMemoryInfo, GetProcMemoryUsed</p>\n\n<p>what should I do know?</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1462977516, "post_id": 37165919, "comment_id": 61867175, "body": "Maybe you want bit-fields?"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 1, "creation_date": 1462977662, "post_id": 37165919, "comment_id": 61867283, "body": "@SouravGhosh AFAIK bit-fields won&#39;t work for opaque types...? If (in C++) I have a class with private members, I can&#39;t see how bit-fields can be used."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1462977705, "post_id": 37165919, "comment_id": 61867315, "body": "Implement a getter/setter..."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1462977741, "post_id": 37165919, "comment_id": 61867345, "body": "@EugeneSh. Can you elaborate?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 3, "creation_date": 1462977774, "post_id": 37165919, "comment_id": 61867375, "body": "Your comment is wrong anyway. No type can use less than 1 byte."}, {"owner": {"reputation": 15295, "user_id": 3436922, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Y8KQX.jpg?s=128&g=1", "display_name": "LPs", "link": "https://stackoverflow.com/users/3436922/lps"}, "edited": false, "score": 1, "creation_date": 1462977776, "post_id": 37165919, "comment_id": 61867379, "body": "Where <code>bool</code> is a single bit?"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1462977955, "post_id": 37165919, "comment_id": 61867519, "body": "Getter/setter refers to providing member functions (aka methods) to read (get) and write (set) fields in (private) members."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462977968, "post_id": 37165919, "comment_id": 61867525, "body": "Why use a distinct <code>struct</code> for a single <code>bool</code> anway? Either you want to add more members, then the problem becomes less relevant. Or you don&#39;t, then a <code>bool []</code> would make more sense (and probably not to use these <code>struct</code>s at all)."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462977978, "post_id": 37165919, "comment_id": 61867537, "body": "@Olaf You&#39;re right. I was asking the wrong question; I&#39;ll update the question."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462977978, "post_id": 37165919, "comment_id": 61867538, "body": "@Olaf In his code, I think the OP is aware that <code>val</code> will hold 1 byte, he just means that on 8 bits, only 1 is useful/needed."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462978034, "post_id": 37165919, "comment_id": 61867572, "body": "@Olaf <i>&quot;If enough space remains, a bit-field that immediately follows another bit-field in a structure shall be packed into adjacent bits of the same unit.&quot;</i> ??"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462978193, "post_id": 37165919, "comment_id": 61867692, "body": "@Olaf - as I know you&#39;re aware <code>bool[]</code> doesn&#39;t have the 1-bit/element property the OP is apparently seeking - but <code>std::bitset</code> and <code>std::vector&lt;bool&gt;</code> do ..."}, {"owner": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1462978555, "post_id": 37165919, "comment_id": 61867943, "body": "@ZizhengTai Then you should not have tagged this C, :)"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 127623, "user_id": 2173917, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4dwoM.jpg?s=128&g=1", "display_name": "Sourav Ghosh", "link": "https://stackoverflow.com/users/2173917/sourav-ghosh"}, "edited": false, "score": 0, "creation_date": 1462978612, "post_id": 37165919, "comment_id": 61867990, "body": "@SouravGhosh Is my updated example not applicable to C?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1462978649, "post_id": 37165919, "comment_id": 61868024, "body": "@kebs: That is unclear, as, depending on the OS/architecture, <code>struct</code> very well can be padded to 8 byte or even larger boundaries for perfomance reasons."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1462978650, "post_id": 37165919, "comment_id": 61868026, "body": "An obvious counter question would be: Why would you like to avoid padding? I fear it has something to do with serialization. Please write a proper serialization and deserialization."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1462978730, "post_id": 37165919, "comment_id": 61868067, "body": "@davidbak: I am, but I suspect a typo/confusion between bit and byte. It should be read in context of the other comments, including my preceeding one."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1462978836, "post_id": 37165919, "comment_id": 61868135, "body": "Re your last edit: C and C++ are different languages. C+ might have other requirements than C. So pick one language and stick to that. Note that the first snippets are not valid C, nor does C support classes. Also note that your edit changed the question completely."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462978891, "post_id": 37165919, "comment_id": 61868172, "body": "@Olaf Then I&#39;ll stick to C++ ;)"}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462979065, "post_id": 37165919, "comment_id": 61868299, "body": "@Olaf Yes, but I think the original question just wasn&#39;t asking what the title suggests at all. I&#39;m aware that what happens to a <code>bool</code> isn&#39;t padding (it&#39;s minimum addressing unit), what I wanted to ask (as the title suggests) is padding a &gt;= 1 byte type to more than its &quot;true&quot; size. I just wasn&#39;t thinking clearly when I ask the question in the first place. Sorry!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462979416, "post_id": 37165919, "comment_id": 61868561, "body": "You just confirmed my suspection. As I did not answer, I don&#39;t mind much. But you should ask whoever posted an answer to update it."}], "answers": [{"comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462978940, "post_id": 37166081, "comment_id": 61868210, "body": "There very well is padding."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1462979060, "post_id": 37166081, "comment_id": 61868294, "body": "For the original or updated example? Because I address only the question and it examples."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462979342, "post_id": 37166081, "comment_id": 61868504, "body": "Hmm, I guess <code>#pragma pack</code> is the closest to what I&#39;m looking for."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462979644, "post_id": 37166081, "comment_id": 61868748, "body": "@ZizhengTai: Before you use such non-standard extension, you should think <b>why</b> you want that. If you are up to serialisation/marshalling of data to store/transfer through a serial link: there are better and standard ways using shifts. Or at least use tools like nanopb, etc. which are well augmented against platform-dependencies. Note that you run into other trouble with your way (endianess)."}, {"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1462979919, "post_id": 37166081, "comment_id": 61868972, "body": "@Olaf I asked this question entirely because I was curious ;-) Thank you for the reminder though. Seems the pragma is not only non-standard, but also possibly unsafe even where it is recognized by the compiler. On my MacBook even though Clang recognized the pragma and successfully compile the code, the program ran into an immediate segmentation fault upon starting (while gcc does work)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462980187, "post_id": 37166081, "comment_id": 61869161, "body": "@ZizhengTai: As I commented below: If this is about serialisation, serach for it. There are better ways with shift&amp;bitops. In general relying on packing is a very bad idea. If you have a memory-restricted system, start not using C++, but C and optimize the code/data manually (e.g. like you did in the second <code>struct</code>s). Note that packet <code>struct</code>s on many systems can have massive performance penalties (some have to manually pack the bytes to words)."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "reply_to_user": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462983912, "post_id": 37166081, "comment_id": 61871660, "body": "@ZizhengTai - your seg fault depends on the machine architecture - some architectures (e.g., x86) allow unaligned access (though possibly with a performance hit) and some do not.  It is the programmer&#39;s responsibility to deal with it (when choosing non-standard packings)."}], "tags": [], "owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "is_accepted": true, "score": 0, "last_activity_date": 1462979026, "last_edit_date": 1462979026, "creation_date": 1462977922, "answer_id": 37166081, "question_id": 37165919, "link": "https://stackoverflow.com/questions/37165919/compress-paddings-of-class-members/37166081#37166081", "title": "Compress paddings of class members", "body": "<p>There is no padding. The smallest addressable memory unit is one (1) byte. If you have two distinct addressable entities then you must use at least two (2) byte. The <code>sizeof</code> operator will return the size in bytes not in bits.</p>\n\n<p>For your update: No, it is not avoidable within standard C++ (different memory alignment requirements for certain types on different platforms). It is avoidable for specific platforms with <code>#pragma pack</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462978564, "post_id": 37166339, "comment_id": 61867948, "body": "Thank you, but my question is mostly about custom (opaque) types. I have updated the question."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "edited": false, "score": 0, "creation_date": 1462978831, "post_id": 37166339, "comment_id": 61868131, "body": "The rule of padding also applies when the data members are custom types (classes or structures or unions).  If you machine likes 16-bit alignment and you have a structure of 3 bytes, the compiler will append 1 byte so that the next variable will align to a 16-bit boundary."}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1462983813, "post_id": 37166339, "comment_id": 61871598, "body": "Some compilers may also have command line switches that control padding - but the pragmas are preferred (though there is no standard gcc does support the Microsoft pragmas)."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1462978486, "creation_date": 1462978486, "answer_id": 37166339, "question_id": 37165919, "link": "https://stackoverflow.com/questions/37165919/compress-paddings-of-class-members/37166339#37166339", "title": "Compress paddings of class members", "body": "<p>The compiler is allowed to insert <em>padding</em> bytes, for alignment, between variables in a structure.  </p>\n\n<p>As far as Boolean variables go, there is a rule about the minimal addressable unit, which on many platform is one byte.  </p>\n\n<p>Some compilers may have <em>pragmas</em> that allow structures to be packed.  </p>\n\n<p>If you want to pack Boolean types, you may want to use bits instead.  </p>\n"}], "owner": {"reputation": 4849, "user_id": 3234803, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/FEjsw.png?s=128&g=1", "display_name": "Zizheng Tai", "link": "https://stackoverflow.com/users/3234803/zizheng-tai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 37166081, "answer_count": 2, "score": 0, "last_activity_date": 1462979026, "creation_date": 1462977437, "last_edit_date": 1462978865, "question_id": 37165919, "link": "https://stackoverflow.com/questions/37165919/compress-paddings-of-class-members", "title": "Compress paddings of class members", "body": "<p>Suppose I have two structs:</p>\n\n<pre><code>// sizeof (Bool) == 1\nstruct Bool {\n    bool val;  // 1 bit\n               // 7 bits of padding\n};\n\n// sizeof (TwoBools) == 2\nstruct TwoBools {\n    Bool b1, b2;  // 16 bits -- 14 of which are paddings!\n};\n</code></pre>\n\n<p>As shown in the previous example, although <code>TwoBools</code> could've taken up only 1 byte (2 bits of <code>bool</code>s and 6 bits of padding), the fact that each member <code>Bool</code> has its own padding causes greater space waste. Is it possible in any way to avoid this?</p>\n\n<p><strong>UPDATE:</strong> As @Olaf pointed out in the comment, my comments in the original code snippets are incorrect. This should be a correct example (on a specific computer, specific OS, with a specific compiler):</p>\n\n<pre><code>// sizeof (IntChar) == 8\nstruct IntChar {\n    uint32_t i;  // 4 bytes\n    char c;      // 1 byte\n                 // 3 bytes of padding\n};\n\n// sizeof (TwoIntChars) == 16\nstruct TwoIntChars {\n    struct IntChar a, b;  // 6 bytes of padding\n};\n\n// sizeof (CompactTwoIntChars) == 12\nstruct CompactTwoIntChars {\n    uint32_t a, b;  // 8 bytes of ints\n    char c, d;      // 2 bytes of chars\n                    // 2 bytes of padding\n};\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "stl", "std"], "comments": [{"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1462977412, "post_id": 37165826, "comment_id": 61867091, "body": "this <code>std::map&lt;key1,std::map&lt;key2,std::map&lt;key3,value&gt;&gt;&gt;</code> does not compile. Have you think of <code>using key1=EMPIDl;</code>?"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 6, "creation_date": 1462977434, "post_id": 37165826, "comment_id": 61867109, "body": "<code>std::map&lt;std::tuple&lt;key1, key2, key3&gt;, result&gt;</code>"}, {"owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "reply_to_user": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 0, "creation_date": 1462977763, "post_id": 37165826, "comment_id": 61867366, "body": "@PiotrNycz edited the post"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1462978660, "post_id": 37165826, "comment_id": 61868027, "body": "Change your table.  Your tables should be set up for a 1:1 relationship between key and value(s).  See <a href=\"https://en.wikipedia.org/wiki/Database_normalization\" rel=\"nofollow noreferrer\">Database Normalization</a> on how to change tables."}, {"owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1462988994, "post_id": 37165826, "comment_id": 61874720, "body": "@ThomasMatthews Denormalized for performance.. Lol.."}], "answers": [{"tags": [], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": true, "score": 1, "last_activity_date": 1462979601, "creation_date": 1462979601, "answer_id": 37166804, "question_id": 37165826, "link": "https://stackoverflow.com/questions/37165826/what-is-most-likely-used-method-to-handle-multiple-keys-to-fetch-an-value-using/37166804#37166804", "title": "what is most likely used method to handle multiple keys to fetch an value using STL container?", "body": "<p>First of all - first create class that defines what you need from such container. I believe it would be something like this:</p>\n\n<pre><code>class ResultTable\n{\npublic:\n   void addResult(int key1, int key2, int key3, std::string value);\n   void removeResult(int key1, int key2, int key3);\n   std::string getResult(int key1, int key2, int key3) const;\n   bool isPresent(int key1, int key2, int key3) const;\nprivate:\n  ... m_table; // real container here   \n};\n</code></pre>\n\n<p>So, it is not so much important what you have behind <code>ResultsTable</code> in its private part. With such approach, you are free to change it when you find one method better than other...</p>\n\n<p>So lets discuss what to put in private parts:</p>\n\n<blockquote>\n  <p><strong>Method1: Key as string</strong> </p>\n\n<pre><code>std::map&lt;std::string,std::string&gt; m_table;\n</code></pre>\n</blockquote>\n\n<p>That would work - but I really discourage you to use it. That is unnecessary complicated and you would for sure see performance degradation in case of big number of results...</p>\n\n<blockquote>\n  <p><strong>Method2: Using nested maps</strong></p>\n\n<pre><code>std::map&lt;int,std::map&lt;int,std::map&lt;int,std::string&gt;&gt;&gt; l_container;\n</code></pre>\n</blockquote>\n\n<p>This method has disadvantage when comes to remove keys from map. It might happen that you left nested maps empty after removing last element...</p>\n\n<p><strong>Method3: Using combined keys maps</strong></p>\n\n<pre><code>std::map&lt;std::tuple&lt;int,int,int&gt;, std::string&gt; m_data;\n// or\nstd::map&lt;std::array&lt;int,3&gt;, std::string&gt; m_data;\n</code></pre>\n\n<p>This method (already mentioned in comments) should be the best. I personally  prefer the version with <code>std::array</code> for key consisting of elements of the same type (<code>int</code> here).</p>\n"}], "owner": {"reputation": 1563, "user_id": 2530921, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/WPszy.jpg?s=128&g=1", "display_name": "VINOTH ENERGETIC", "link": "https://stackoverflow.com/users/2530921/vinoth-energetic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 37166804, "answer_count": 1, "score": 1, "last_activity_date": 1516265574, "creation_date": 1462977228, "last_edit_date": 1516265574, "question_id": 37165826, "link": "https://stackoverflow.com/questions/37165826/what-is-most-likely-used-method-to-handle-multiple-keys-to-fetch-an-value-using", "title": "what is most likely used method to handle multiple keys to fetch an value using STL container?", "body": "<p>I have three keys and one associated value with that keys.\nAll the keys are integer value.</p>\n\n<p>consider the following table</p>\n\n<pre><code>+-------+--------+------------+--------+\n| EMPID | DEPTID | COLLEGE ID | RESULT |\n| 1     | 1      | 1          | A      |\n| 1     | 2      | 2          | B      |\n| 1     | 3      | 3          | C      |\n| 2     | 1      | 1          | D      |\n| 2     | 2      | 2          | E      |\n| 2     | 3      | 3          | F      |\n+-------+--------+------------+--------+\n</code></pre>\n\n<p>which among the following method is best?</p>\n\n<p><strong>Method1: Key as string</strong> </p>\n\n<pre><code>string key; /* EMPID:DEPTID:COLLEGE ID */\nstd::map&lt;int,string&gt; l_container;\n</code></pre>\n\n<p><strong>Method2: Using nested maps</strong></p>\n\n<pre><code>int key1 ; /* =EMPID */\nint key2; /* =DEPTID */\nint key3; /* =COLLEGE ID */\nstd::map&lt;int,std::map&lt;int,std::map&lt;int,string&gt;&gt;&gt; l_container;\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 2, "creation_date": 1462988930, "post_id": 37165782, "comment_id": 61874668, "body": "can&#39;t you use: <code>input_image.setTo(Scalar(128,128,128));</code> ?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1462989016, "post_id": 37165782, "comment_id": 61874738, "body": "Also, see <a href=\"http://stackoverflow.com/a/37040982/5008845\">here</a> how to access each value in a 3 channel image."}], "answers": [{"tags": [], "owner": {"reputation": 1524, "user_id": 6095189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b2bf1f3967f7560a1d3b2f73b9522af?s=128&d=identicon&r=PG&f=1", "display_name": "Aenimated1", "link": "https://stackoverflow.com/users/6095189/aenimated1"}, "is_accepted": true, "score": 2, "last_activity_date": 1462979163, "creation_date": 1462979163, "answer_id": 37166633, "question_id": 37165782, "link": "https://stackoverflow.com/questions/37165782/opencv-bgr-value-modification/37166633#37166633", "title": "OpenCV BGR value modification", "body": "<p>The behavior you're seeing is because you're not taking into account that BGR images have 3 channels.  So for each pixel, there are actually 3 bytes that you would need to set to 128.  One way to correct it would be to modify your inner loop to the following:</p>\n\n<pre><code>for (j = 0; j &lt; (nCol * input_image.channels()); ++j)\n</code></pre>\n\n<p>Hope that helps.</p>\n"}, {"comments": [{"owner": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 3, "creation_date": 1462991774, "post_id": 37168471, "comment_id": 61876271, "body": "please delete this answer."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "edited": false, "score": 0, "creation_date": 1463023363, "post_id": 37168471, "comment_id": 61887820, "body": "The most important part of this question is to initialize all values of the image to 128. You have all filler except for what really matters, which you tell the OP to use Google. This isn&#39;t really an answer at all. Please do us a favour and throw this answer in the bin. Thanks."}, {"owner": {"reputation": 96306, "user_id": 3250829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e2e07c34e170453eeea9e937a98f19b?s=128&d=identicon&r=PG", "display_name": "rayryeng", "link": "https://stackoverflow.com/users/3250829/rayryeng"}, "reply_to_user": {"reputation": 3225, "user_id": 5294258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5270296f9c4ec3fae89195328e9bc7?s=128&d=identicon&r=PG&f=1", "display_name": "sturkmen", "link": "https://stackoverflow.com/users/5294258/sturkmen"}, "edited": false, "score": 0, "creation_date": 1463023512, "post_id": 37168471, "comment_id": 61887860, "body": "@sturkmen I couldn&#39;t have said it better."}], "tags": [], "owner": {"reputation": 36, "user_id": 6319963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e183df3efda68d6f370a44ae2f1654d?s=128&d=identicon&r=PG&f=1", "display_name": "John Wiggles", "link": "https://stackoverflow.com/users/6319963/john-wiggles"}, "is_accepted": false, "score": -4, "last_activity_date": 1462984626, "last_edit_date": 1462984626, "creation_date": 1462984281, "answer_id": 37168471, "question_id": 37165782, "link": "https://stackoverflow.com/questions/37165782/opencv-bgr-value-modification/37168471#37168471", "title": "OpenCV BGR value modification", "body": "<p>Wait... you want to simply fill/replace all values with 128? Why use the original image at all? If I am understanding you correctly, then simply do this:</p>\n\n<p>1.) Create an empty Mat image with same size as the image. </p>\n\n<pre><code>      (Mat Mat_object = Mat(image.rows,image.cols,IMAGE_TYPE) )\n</code></pre>\n\n<p>2.) Initialize all values of the Mat object to 128. (Google is your friend)</p>\n\n<p>3.) Create two more copies of that image (if you want multiple layers of such a structure) </p>\n\n<pre><code>               (  Mat_object.clone() helps here  )\n</code></pre>\n\n<p>4.) Create a: </p>\n\n<pre><code>         vector&lt;Mat&gt; object, then use object.push_back(image/copy1/copy2)\n</code></pre>\n\n<p>5.) Use merge(object,final_image)</p>\n\n<p>6.) Enjoy your blank grey image</p>\n\n<p>7.) Print your blank grey image</p>\n\n<p>8.) Frame your blank grey image</p>\n\n<p>9.) It is a blank grey image</p>\n\n<p>wow</p>\n"}, {"tags": [], "owner": {"reputation": 480, "user_id": 6326164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82df0db7c599499a5f4abe4ce70531c5?s=128&d=identicon&r=PG&f=1", "display_name": "ELRG", "link": "https://stackoverflow.com/users/6326164/elrg"}, "is_accepted": false, "score": 0, "last_activity_date": 1463067036, "creation_date": 1463067036, "answer_id": 37191416, "question_id": 37165782, "link": "https://stackoverflow.com/questions/37165782/opencv-bgr-value-modification/37191416#37191416", "title": "OpenCV BGR value modification", "body": "<p>Given only the top 35% or so gets changed, I'd say there's something wrong with your for loops which means you don't access the latter 65%. (Your image having multiple channels isn't the issue here, as changing only one of the channels would simply affect the colour balance, not only colour a certain portion of the image). However, there's really no need to recolour the image row by row.</p>\n\n<p>Miki's suggestion in the comments of using setTo to change the values is good. Here's <a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat-setto\" rel=\"nofollow\">the documentation</a> for more information. Repeating the code snippet anyway:</p>\n\n<pre><code>input_image.setTo(Scalar(128,128,128))\n</code></pre>\n\n<p>If you don't want to lose the original image, because loading an image just to make it grey does seem kinda strange, make a new grey matrix of the same size, using something similar to the following (John Wiggles did have a point):</p>\n\n<pre><code>Mat grey(input_image.size(), CV_8UC3, Scalar(128,128,128));\n</code></pre>\n\n<p>See <a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#mat-mat\" rel=\"nofollow\">the documentation</a> for more ways to declare Mat types.</p>\n"}], "owner": {"reputation": 5, "user_id": 5660950, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mFL54iUHaPY/AAAAAAAAAAI/AAAAAAAAAwo/rToqTtwBtzA/photo.jpg?sz=128", "display_name": "Observer", "link": "https://stackoverflow.com/users/5660950/observer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 37166633, "answer_count": 3, "score": 0, "last_activity_date": 1463067036, "creation_date": 1462977124, "question_id": 37165782, "link": "https://stackoverflow.com/questions/37165782/opencv-bgr-value-modification", "title": "OpenCV BGR value modification", "body": "<p>The following code is supposed to change all the values of BGR to 128.</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;opencv2/opencv.hpp&gt;\n#include&lt;iostream&gt;\nusing namespace std;\nusing namespace cv;\nint main(int argc,char** argv)\n{\n\n    Mat input_image=imread(argv[1],1);\n    if(!input_image.data)\n    {\n        printf(\"No image data\\n\");\n        return -1;\n    }\n    long nRow = input_image.rows;\n    long nCol = input_image.cols;\n\n    if(input_image.isContinuous())\n    {\n        nCol *= nRow;\n        nRow = 1;\n    }\n\n    long i,j;\n    uchar* p;\n    for(i=0;i&lt;nRow;i++)\n    {\n        p=input_image.ptr&lt;uchar&gt;(i);\n        for(j=0;j&lt;nCol;j++)\n        {\n            p[j]=128;\n        }\n    }\n    namedWindow(\"Changed color\",CV_WINDOW_AUTOSIZE);\n    imshow(\"Changed color\",input_image);\n\n    waitKey(0);\n\n    return 0;\n}\n</code></pre>\n\n<p>The image name is given as a command line argument. This code is compiled using openCV 3.0. When the input image is supplied, only near to 35%(top half) of the image is colored gray(128,128,128). The rest of the image pixels still contain the original values. I tried various pictures of various resolutions, all yield the same result.</p>\n\n<p>Only the top part of the image has been edited. The rest is still the original image.Resolution:1280x768\n<a href=\"http://i.stack.imgur.com/XCZo0.jpg\" rel=\"nofollow\">A sample output image</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 3, "creation_date": 1462976817, "post_id": 37165627, "comment_id": 61866618, "body": "<a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Integer_overflow</a>"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 1, "creation_date": 1462976883, "post_id": 37165627, "comment_id": 61866674, "body": "Try <code>i + 1 &lt; myVect.size()</code>..."}, {"owner": {"reputation": 858, "user_id": 4267929, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/98885eca3b83031612bef15ed5b21abc?s=128&d=identicon&r=PG&f=1", "display_name": "Henricus V.", "link": "https://stackoverflow.com/users/4267929/henricus-v"}, "edited": false, "score": 9, "creation_date": 1462976890, "post_id": 37165627, "comment_id": 61866685, "body": "Try printing <code>myVect.size() - 1</code>"}, {"owner": {"reputation": 12286, "user_id": 1607442, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/18451ad16ed8ad45b0a18bf70b2aa002?s=128&d=identicon&r=PG", "display_name": "Ivan Aksamentov - Drop", "link": "https://stackoverflow.com/users/1607442/ivan-aksamentov-drop"}, "edited": false, "score": 0, "creation_date": 1462976913, "post_id": 37165627, "comment_id": 61866701, "body": "<a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a>"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1462976930, "post_id": 37165627, "comment_id": 61866712, "body": "modulo arithmetic strikes again!"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 6, "last_activity_date": 1462977850, "last_edit_date": 1462977850, "creation_date": 1462977132, "answer_id": 37165786, "question_id": 37165627, "link": "https://stackoverflow.com/questions/37165627/how-come-the-condition-of-this-for-loop-is-still-satisfied/37165786#37165786", "title": "How come the condition of this for loop is still satisfied?", "body": "<p><code>myVect.size()</code> returns an unsigned integer.  Since the vector is empty it will be 0.  When you subtract 1 from that it wraps around and becomes the largest value that <code>std::vector::size_type</code>(generally <code>std::size_t</code>) can hold.  </p>\n\n<p>Since <code>i</code> which is 0 is less than that you satisfy the condition and enter the for loop.</p>\n\n<p>Do note that starting in C++11 <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow\">ranged based for loops</a> were introduced.  If you want to loop through a container and use its values you can use</p>\n\n<pre><code>for (const auto &amp; e : container_name)\n    // use e here in a read only manner.\n</code></pre>\n\n<p>If you need to modify the elements then you can use</p>\n\n<pre><code>for (auto &amp; e : container_name)\n    // use e here however you want.\n</code></pre>\n\n<p>This guarantees that you loop through all of the elements of the container and is generally less error prone.</p>\n"}, {"tags": [], "owner": {"reputation": 9156, "user_id": 6255513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a62b448d7fe8e472368e4cd4e2615a3?s=128&d=identicon&r=PG&f=1", "display_name": "Smeeheey", "link": "https://stackoverflow.com/users/6255513/smeeheey"}, "is_accepted": false, "score": 3, "last_activity_date": 1462977148, "creation_date": 1462977148, "answer_id": 37165797, "question_id": 37165627, "link": "https://stackoverflow.com/questions/37165627/how-come-the-condition-of-this-for-loop-is-still-satisfied/37165797#37165797", "title": "How come the condition of this for loop is still satisfied?", "body": "<p>The return type of veccot::size() is <code>size_t</code>, which is an unsigned type. If you subtract from 0 (unsigned), the number is 'wrapped around' back to the maximum possible value for a <code>size_t</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462977631, "post_id": 37165881, "comment_id": 61867260, "body": "Why not just start <code>i</code> at 1?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462977861, "post_id": 37165881, "comment_id": 61867446, "body": "Because <code>i</code> may be used inside loop as array index and starting from 1 will require to verify/modify that code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462977888, "post_id": 37165881, "comment_id": 61867472, "body": "Ah yes.  There is that to consider."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1462977359, "creation_date": 1462977359, "answer_id": 37165881, "question_id": 37165627, "link": "https://stackoverflow.com/questions/37165627/how-come-the-condition-of-this-for-loop-is-still-satisfied/37165881#37165881", "title": "How come the condition of this for loop is still satisfied?", "body": "<p>It is already answered that the reason you subtract 1 from unsigned 0, solution to fix your issue is to change condition to:</p>\n\n<pre><code>for( int i =0; i + 1 &lt; myVect.size(); i++)\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 5885207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11c2255aa132eaf0c0ac9fb4602c561a?s=128&d=identicon&r=PG&f=1", "display_name": "rudky martin", "link": "https://stackoverflow.com/users/5885207/rudky-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1462977850, "creation_date": 1462976757, "question_id": 37165627, "link": "https://stackoverflow.com/questions/37165627/how-come-the-condition-of-this-for-loop-is-still-satisfied", "title": "How come the condition of this for loop is still satisfied?", "body": "<p>I have a strange bug in my code:</p>\n\n<pre><code>vector&lt;int&gt; myVect;\nfor( int i =0; i&lt; myVect.size() -1; i++)\n{\n    cout&lt;&lt; \"how come I can reach this point?\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The ouput will be \"how come I can reach this point?\"</p>\n\n<p>I still do not understand it. MyVect.size() is 0 as this vector is empty. Why is the condition in for loop still satisfied?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 8, "creation_date": 1462975656, "post_id": 37165126, "comment_id": 61865741, "body": "&quot; if using std::string use .append() and .assign() instead of + and = <b>for clarity</b>&quot; ...That&#39;s so messed up... accept our sympathy"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 3, "creation_date": 1462976484, "post_id": 37165126, "comment_id": 61866366, "body": "There&#39;s a massive shortage of good C++ programmers in the world. You could work somewhere that&#39;s less annoying?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1462976749, "post_id": 37165126, "comment_id": 61866575, "body": "It sounds like your peer reviewer comes from a java background and was taught to hate operator overloading."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1462977831, "post_id": 37165126, "comment_id": 61867426, "body": "All of these are advised by the <i>older</i> Google C++ Style Guide.  It is a document based in C++03 where it tells you to then program in the intersection of Java and C coding practices.  Not surprisingly, a good chunk of it was bad advice.  The <a href=\"https://google.github.io/styleguide/cppguide.html\" rel=\"nofollow noreferrer\">current Style Guide</a> is better.  It is still very conservative, which may make sense at a large organization.  Passing by pointer is worse than value, but there are solid arguments why by-pointer is better than by non-const reference (not unassailable, but worth considering)."}, {"owner": {"reputation": 2663, "user_id": 6301420, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9f4693f2fcba86b5f59737b94120acc2?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Schepler", "link": "https://stackoverflow.com/users/6301420/daniel-schepler"}, "edited": false, "score": 0, "creation_date": 1462980560, "post_id": 37165126, "comment_id": 61869428, "body": "Would this be more on topic on workplace.stackexchange.com?  It seems like the main point of the question is more about navigating office politics than about the technical contents of the reviews."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 3, "creation_date": 1462983907, "post_id": 37165126, "comment_id": 61871655, "body": "<i>Avoid passing by value or reference...</i> Please accept my two weeks notice."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 6320913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a5661a4c32a2e810d2da0d7f14df21?s=128&d=identicon&r=PG&f=1", "display_name": "user6320913", "link": "https://stackoverflow.com/users/6320913/user6320913"}, "is_accepted": false, "score": 1, "last_activity_date": 1462977597, "creation_date": 1462977597, "answer_id": 37165977, "question_id": 37165126, "link": "https://stackoverflow.com/questions/37165126/c-style-operator-overload-pass-by-flavor/37165977#37165977", "title": "C++ style: operator overload, pass by &lt;flavor&gt;", "body": "<p>Luckily for you, the entire draft standard is available in HTML format with direct links to every single section. It'll be trivial to show that <code>std::string::assign</code> and <code>std::string::operator=</code> are identical.</p>\n\n<p><a href=\"http://eel.is/c++draft/string::assign\" rel=\"nofollow\">21.3.1.6.3 string::assign</a></p>\n\n<pre><code>basic_string& assign(const basic_string& str);</code>\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Effects:</em> Equivalent to <code>*this = str</code>\n</pre>\n\n<p><a href=\"http://eel.is/c++draft/string.cons#19\" rel=\"nofollow\">21.3.1.2/19 string.cons</a></p>\n\n<pre><code>basic_string& operator=(const basic_string& str);</code>\n\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Effects:</em> If <code>*this</code> and <code>str</code> are not the same object, modifies <code>*this</code></pre>\n\n<p>If we implemented this to the letter, it would look like this:</p>\n\n<pre><code>basic_string&amp; operator=(const value_type* __s) {return assign(__s);}\n</code></pre>\n\n<p>Where <code>value_type</code> is <code>Traits::char_type</code>, aka <code>char</code> for <code>std::string</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 707, "user_id": 3425723, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/18b392dce0249796001b247dadf61e6d?s=128&d=identicon&r=PG&f=1", "display_name": "TFM", "link": "https://stackoverflow.com/users/3425723/tfm"}, "edited": false, "score": 0, "creation_date": 1462990048, "post_id": 37165978, "comment_id": 61875353, "body": "I wouldn&#39;t call <code>T*</code> the worst way. It&#39;s all a question of semantics. If you want to pass an object to be modified by the function, pass it as <code>T&amp;</code>. If you want the function to somehow work with the address of the object, pass it as <code>T*</code> to signal that is actually the address you are interested in."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1463027763, "post_id": 37165978, "comment_id": 61888915, "body": "&quot;<i>In short, the C++ standard itself assumes you will use operator overloading.</i>&quot; I assume a company that would endorse coding policies like the OP is describing would be avoiding the standard library like the plague. Just a hunch..."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 3, "last_activity_date": 1462977601, "creation_date": 1462977601, "answer_id": 37165978, "question_id": 37165126, "link": "https://stackoverflow.com/questions/37165126/c-style-operator-overload-pass-by-flavor/37165978#37165978", "title": "C++ style: operator overload, pass by &lt;flavor&gt;", "body": "<p>There are actually objective reasons for both parts of the question, so I'm disagreeing with the close votes.</p>\n\n<p>With respect to the first, <code>std::sort</code> (via <code>std::less</code>) assumes you have overloaded <code>operator&lt;</code>. <code>std::ostream</code> assumes you overloaded a free function <code>operator&lt;&lt;(std::ostream&amp;, Foo)</code>. <code>std::accumulate</code> assumes <code>operator+</code> etc. In short, the C++ standard itself assumes you will use operator overloading.</p>\n\n<p>Of the 4 ways to pass a value (<code>T, T&amp;, T&amp;&amp; and T*</code>), the last is the worst. It breaks move semantics, temporaries, increases the risk of memory leaks (ambiguous semantics) and again is incompatible with assumptions in the C++ standard. E.g. the copy constructor <em>cannot</em> take a <code>T*</code>. </p>\n"}], "owner": {"reputation": 1, "user_id": 6320728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deade542f554634a01f567786f4ab15c?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo Chavez", "link": "https://stackoverflow.com/users/6320728/hugo-chavez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1462998928, "answer_count": 2, "score": -1, "last_activity_date": 1462977601, "creation_date": 1462975595, "question_id": 37165126, "link": "https://stackoverflow.com/questions/37165126/c-style-operator-overload-pass-by-flavor", "closed_reason": "Opinion-based", "title": "C++ style: operator overload, pass by &lt;flavor&gt;", "body": "<p>I received the following comments from a recent code review:</p>\n\n<blockquote>\n  <p>Avoid the use of operator overloading wherever possible: if using\n  std::string use .append() and .assign() instead of + and = for clarity</p>\n  \n  <p>Avoid passing by value or reference, use [C style] pointers instead</p>\n</blockquote>\n\n<p>This is not my first run in with this sort of nonsense from this particular reviewer.</p>\n\n<p>As in Animal Farm, some are more equal than others. How to let the boss know his pet provides no value doing peer reviews? </p>\n\n<p>Citing chapter and verse from best practices are part of that answer, but I need more than just technical reasons (with out resorting to ad hominem attacks, satisfying as that might be). Advice appreciated.</p>\n"}, {"tags": ["c++", "cmake", "shared-libraries", "rpath"], "comments": [{"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462975717, "post_id": 37165116, "comment_id": 61865793, "body": "CMake <a href=\"https://cmake.org/Wiki/CMake_RPATH_handling#CMake_and_the_RPATH\" rel=\"nofollow noreferrer\">rewrites the RPATH</a> when you call <code>make install</code> to become portable. Did you do this?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462975864, "post_id": 37165116, "comment_id": 61865918, "body": "@ComicSansMS: I don&#39;t have an install target at all since I&#39;m using cmake only as a build tool, not as a redistribution script (source code is closed), so my main interest is to be able to compile it and make it work with shared libraries shipped together with the executable, nothing more."}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462976190, "post_id": 37165116, "comment_id": 61866163, "body": "You probably will need to add an install step then. IIRC the rpath that is generated on build is specific to the build tree and is prone to breaking if you start copying stuff around. Installing should typically clean this up (and might even work without changing any of the rpath-related default settings). Unfortunately, this is a fiddly issue and I don&#39;t touch this part of CMake too often, so my knowledge here is a bit rusty."}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462976958, "post_id": 37165116, "comment_id": 61866735, "body": "Turns out you don&#39;t need an install step. By setting the <a href=\"https://cmake.org/cmake/help/v3.5/variable/CMAKE_BUILD_WITH_INSTALL_RPATH.html\" rel=\"nofollow noreferrer\"><code>CMAKE_BUILD_WITH_INSTALL_RPATH</code></a> variable to true, you will get the cleaned-up version in the build tree."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462978700, "post_id": 37165116, "comment_id": 61868046, "body": "@ComicSansMS: that settings fixes the exported <code>RPATH</code> indeed, but foo.so is still linked with its full path (not like bar.so) even if they have the same commands in the <code>CMakeLists.txt</code>, which seems weird, I&#39;ll try to investigate the issue further but I&#39;m not so practical with CMake unfortunately."}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 0, "creation_date": 1462981408, "post_id": 37165116, "comment_id": 61869980, "body": "@Antonio: because I changed the names manually to focus on the problem. Actually I&#39;ve been able to use <code>set(CMAKE_INSTALL_RPATH &quot;$ORIGIN&#47;lib&quot;)</code> so that now <code>libbar.so</code> is correctly found by <code>ldd</code> when placed in lib subdirectory of where the executable is but <code>libfoo.so</code> is still searched through a relative path to where I invoke <code>cmake</code> and <code>make</code> but I can&#39;t figure why."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1462981788, "post_id": 37165116, "comment_id": 61870258, "body": "Difficult to see what could be the cause of the problem. It might have something to do with the way those libraries are built, or with their own dependencies. What happens if you switch order?"}, {"owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 2, "creation_date": 1462981870, "post_id": 37165116, "comment_id": 61870325, "body": "@Antonio: I&#39;m randomly testing properties and it looks like <code>IMPORTED_NO_SONAME TRUE</code> removes the absolute path but I&#39;ve no idea why it, I&#39;m really groping around."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1462981952, "post_id": 37165116, "comment_id": 61870379, "body": "@Jack Maybe a bogus duplicate of one of the libraries laying around?"}], "owner": {"reputation": 124806, "user_id": 121747, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9fcebb68b105446c0d9eebbce1146044?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/121747/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 868, "favorite_count": 1, "answer_count": 0, "score": 4, "last_activity_date": 1462981277, "creation_date": 1462975580, "last_edit_date": 1462981277, "question_id": 37165116, "link": "https://stackoverflow.com/questions/37165116/properly-manage-shared-libraries-with-cmake", "title": "Properly manage shared libraries with CMake", "body": "<p>I'm trying to link a cmake build with two shared libraries, linking occurs but <code>RPATH</code> is pointing to an absolute path of one of the two libraries while <code>readelf</code> output is incorrect for the other.</p>\n\n<p>What I did is the following:</p>\n\n<pre><code>add_library(foo SHARED IMPORTED)\nset_target_properties(foo \n  PROPERTIES IMPORTED_LOCATION ${LIBS_DIRECTORY}/foo/libfoo.so\n)\n\nadd_library(bar SHARED IMPORTED)\nset_target_properties(bar\n  PROPERTIES IMPORTED_LOCATION ${LIBS_DIRECTORY}/foo/libbar.so\n)\n\ntarget_link_libraries(myprogram foo bar)\n</code></pre>\n\n<p>This works and linking occurs but readelf prints the following:</p>\n\n<pre><code>0x0000000000000001 (NEEDED)             Shared library: [../../../libs/foo/libfoo.so]\n0x0000000000000001 (NEEDED)             Shared library: [libbar.so]\n0x000000000000000f (RPATH)              Library rpath: [/home/user/test/trunk/libs/foo:/home/user/test/trunk/libs/bar]\n</code></pre>\n\n<p>So basically one of the two libs (but just one, and it makes no sense) has an absolute path while rpath contains both the full paths (which is not what I want to do, since I want to ship the executable with the two libraries in the same folder of the exectuable (or a subfolder at most).</p>\n\n<p>Am I missing something trivial?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462976225, "post_id": 37165073, "comment_id": 61866194, "body": "in C++14 the non-type template parameter <code>const a &amp;</code> can only bind directly to a named lvalue with linkage. So you&#39;re out of luck. In C++17 this will be allowed to bind to some more things, <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters\" rel=\"nofollow noreferrer\">see here</a>"}, {"owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462976304, "post_id": 37165073, "comment_id": 61866243, "body": "Thanks M.M - sorry for initial &#39;The_A = c&#39; typo - corrected now."}, {"owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462976351, "post_id": 37165073, "comment_id": 61866274, "body": "OK, thanks for confirming what I suspected ."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462976478, "post_id": 37165073, "comment_id": 61866362, "body": "actually I am not so sure, I do not see in the C++14  standard why <code>default_a</code> should not be accepted. it&#39;s a named lvalue with linkage and its address is a constant expression"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462976966, "post_id": 37165073, "comment_id": 61866742, "body": "maybe [temp.arg.nontype]/5.3: &quot;For a non-type template-parameter of type reference to object, no conversions apply.&quot;  (so it is not allowed to perform conversion from derived to base reference)"}], "answers": [{"tags": [], "owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "is_accepted": false, "score": 1, "last_activity_date": 1462977857, "creation_date": 1462977857, "answer_id": 37166057, "question_id": 37165073, "link": "https://stackoverflow.com/questions/37165073/non-type-template-parameter-how-to-pass-reference-to-base-class-object/37166057#37166057", "title": "non-type template parameter : how to pass reference to base class object?", "body": "<p>A gcc specific workaround:</p>\n\n<pre><code>struct a\n{ int _v;\n  constexpr a():_v(0){}\n  constexpr a(int v): _v(v){} \n};\n\nstruct c: public a\n{ constexpr c():a(){}\n  constexpr c(int v):a(v){} \n};\n\nextern const c _default_c;\n\nconstexpr const c _default_c { 1 };\n\nextern const a default_a;\n\nconst a default_a __attribute__((alias(\"_default_c\")));\n\ntemplate &lt; const a &amp; The_A = default_a &gt;\nstruct b\n{ constexpr static const a &amp;the_a = The_A;\n};\n\nb&lt;&gt; a_b;\n</code></pre>\n\n<p>The above compiles OK .</p>\n\n<p>Happily, we know that the name of '_default_c' is not mangled.</p>\n"}, {"comments": [{"owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "edited": false, "score": 0, "creation_date": 1462978975, "post_id": 37166407, "comment_id": 61868234, "body": "Aha! Thanks for the standard document reference quotes - I will study further. I look forward to C++-17 solving this cleanly - for now my gcc hack will do."}, {"owner": {"reputation": 19, "user_id": 6320913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a5661a4c32a2e810d2da0d7f14df21?s=128&d=identicon&r=PG&f=1", "display_name": "user6320913", "link": "https://stackoverflow.com/users/6320913/user6320913"}, "reply_to_user": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "edited": false, "score": 0, "creation_date": 1462979302, "post_id": 37166407, "comment_id": 61868474, "body": "@JVD I can&#39;t find the language where it specifically says &quot;binds directly&quot; in N4140 but it&#39;s in the <a href=\"http://eel.is/c++draft/expr.const#4\" rel=\"nofollow noreferrer\">latest draft</a>. Will update answer later."}, {"owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "edited": false, "score": 0, "creation_date": 1462979555, "post_id": 37166407, "comment_id": 61868665, "body": "Unfortunately, all it takes to break is to place the above fragment in an enclosing namespace - then the &#39;_default_c&#39; name is mangled."}, {"owner": {"reputation": 19, "user_id": 6320913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a5661a4c32a2e810d2da0d7f14df21?s=128&d=identicon&r=PG&f=1", "display_name": "user6320913", "link": "https://stackoverflow.com/users/6320913/user6320913"}, "reply_to_user": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "edited": false, "score": 0, "creation_date": 1462979623, "post_id": 37166407, "comment_id": 61868726, "body": "@JVD Read <a href=\"https://stackoverflow.com/questions/33301552/non-type-reference-parameter-argument\">this</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1463009921, "post_id": 37166407, "comment_id": 61884525, "body": "A temporary is not created when binding a reference to <code>T</code> to an object of type <code>T</code> or derived from <code>T</code>. You quoted the case for non-class type, but <code>a</code> is a class type"}], "tags": [], "owner": {"reputation": 19, "user_id": 6320913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38a5661a4c32a2e810d2da0d7f14df21?s=128&d=identicon&r=PG&f=1", "display_name": "user6320913", "link": "https://stackoverflow.com/users/6320913/user6320913"}, "is_accepted": false, "score": 0, "last_activity_date": 1462978663, "creation_date": 1462978663, "answer_id": 37166407, "question_id": 37165073, "link": "https://stackoverflow.com/questions/37165073/non-type-template-parameter-how-to-pass-reference-to-base-class-object/37166407#37166407", "title": "non-type template parameter : how to pass reference to base class object?", "body": "<p>The problem is when initializing a <code>const</code> reference a temporary is created, and temporaries are not allowed with reference initialization in this context (converted constant expression).</p>\n\n<p>N4140 8.5.3 (5.2.2.1)</p>\n\n<blockquote>\n  <p>...</p>\n  \n  <ul>\n  <li>If <code>T1</code> is a non-class type, a temporary of type \"<em>cv1</em> <code>T1</code>\" is created and copy-initialized (8.5) from the initializer expression.\n  The reference is then bound to the temporary.</li>\n  </ul>\n  \n  <p>In all cases except the last (i.e., creating and initializing a\n  temporary from the initializer expression), the reference is said to\n  <em>bind directly</em> to the initializer expression.</p>\n</blockquote>\n\n<p>Then in 5.19:</p>\n\n<blockquote>\n  <p>A <em>conditional-expression</em> <code>e</code> is a <em>core constant expression</em> unless\n  the evaluation of <code>e</code>, following the rules of the abstract machine\n  (1.9), would evaluate one of the following expressions:</p>\n  \n  <p>(2.9)\n  -  an <em>id-expression</em> that refers to a variable or data member of reference type unless the reference has a preceding initialization and\n  either</p>\n  \n  <ul>\n  <li>it is initialized with a constant expression or ...</li>\n  </ul>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "is_accepted": false, "score": 0, "last_activity_date": 1462979589, "creation_date": 1462979589, "answer_id": 37166801, "question_id": 37165073, "link": "https://stackoverflow.com/questions/37165073/non-type-template-parameter-how-to-pass-reference-to-base-class-object/37166801#37166801", "title": "non-type template parameter : how to pass reference to base class object?", "body": "<p>Fix that works in namespace:</p>\n\n<pre><code>namespace U {\n    struct a\n    { int _v;\n      constexpr a():_v(0){}\n      constexpr a(int v): _v(v){} \n    };\n\n    struct c: public a\n    { constexpr c():a(){}\n      constexpr c(int v):a(v){} \n    };\n    extern \"C\" {\n    extern const c _default_c;\n\n    constexpr const c _default_c { 1 };\n    }\n\n    extern const a default_a;\n\n    const a default_a __attribute__((alias(\"_default_c\")));\n\n    template &lt; const a &amp; The_A = default_a &gt;\n    struct b\n    { constexpr static const a &amp;the_a = The_A;\n    };\n\n    b&lt;&gt; a_b;\n}\n</code></pre>\n"}], "owner": {"reputation": 611, "user_id": 690051, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d39729069b0cf04b150b3b6e697925bd?s=128&d=identicon&r=PG", "display_name": "JVD", "link": "https://stackoverflow.com/users/690051/jvd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 601, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1462979589, "creation_date": 1462975489, "last_edit_date": 1462976168, "question_id": 37165073, "link": "https://stackoverflow.com/questions/37165073/non-type-template-parameter-how-to-pass-reference-to-base-class-object", "title": "non-type template parameter : how to pass reference to base class object?", "body": "<p>It does not seem to be possible to pass a reference to \nthe base class object of a derived object as a template parameter,\nas I try to do here: </p>\n\n<pre><code>struct a\n{ int _v;\n  constexpr a():_v(0){}\n  constexpr a(int v): _v(v){} \n};\n\nstruct c: public a\n{ constexpr c():a(){}\n  constexpr c(int v):a(v){} \n};\n\nextern const c default_a;\n\nconstexpr const c default_a { 1 };\n\nconst a&amp; c_as_a = default_a;\n//    ^-- this line (16) causes no error - c can be converted to a\n\ntemplate &lt; const a &amp; The_A = default_a &gt;\nstruct b\n{ constexpr static const a &amp;the_a = The_A;\n};\n\nb&lt;&gt; a_b;\n\n// Template instantiation causes error:\n// t.C:24:7: error: could not convert template argument 'default_a' to 'const a&amp;'\n// b&lt;&gt; a_b;\n//   ^\n</code></pre>\n\n<p>I would have expected the 'c' object 'default_a', since it is derived from\n'a', to be acceptable as a 'const a&amp;', as it is on the line 16.</p>\n\n<p>Why isn't this OK as a template parameter ?</p>\n\n<p>What section of specification actually mandates this behaviour ?</p>\n\n<p>Maybe my build of gcc-5.3.0 is somehow defective ?</p>\n\n<p>Anyone found a good workaround / way of passing a derived object as a base class object reference template parameter ?</p>\n\n<p>I cannot just substitute the reference variable 'c_as_a' for 'default_a' in\ntemplate argument list:</p>\n\n<pre><code>template &lt; const a &amp; The_A = c_as_a &gt;\n</code></pre>\n\n<p>t.C:24:7: error: 'const a&amp; c_as_a' is not a valid template argument for type 'const a&amp;' because a reference variable does not have a constant address\n     b&lt;> a_b;</p>\n\n<p>Nor can I substitute any constexpr function call which does something like:</p>\n\n<pre><code> constexpr const a&amp; c_as_a( const c &amp;c ){ return *reinterpret_cast&lt;const a*&gt;(&amp;c);}\n ...\n template &lt; const a &amp; The_A = c_as_a( default_a ) &gt;\n</code></pre>\n\n<p>since this call is not an 'object with external linkage'. </p>\n\n<p>Any suggestions how to achieve passing a reference to a base class of a derived object as a template parameter would be much appreciated - it's\ngot to be possible, I just can't see how ATM.</p>\n\n<p>There must be a way of specifying a reference to an object's base class object as a template parameter.</p>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 5, "creation_date": 1462975372, "post_id": 37164964, "comment_id": 61865516, "body": "You probably want <code>*b = 5</code> instead of <code>b = 5</code>. And no these are not equivalent because the first one is allocated on the stack while the second one allocates on the heap."}, {"owner": {"reputation": 8756, "user_id": 416274, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/fa38a4e372afb202e6ab7eb1619372a8?s=128&d=identicon&r=PG", "display_name": "Robinson", "link": "https://stackoverflow.com/users/416274/robinson"}, "edited": false, "score": 1, "creation_date": 1462975428, "post_id": 37164964, "comment_id": 61865557, "body": "As well as what Holt says, note that stack allocation is far faster than heap allocation."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 2, "creation_date": 1462975436, "post_id": 37164964, "comment_id": 61865567, "body": "Well, the first one may not be allocated anywhere at all or (if it is) it&#39;s just a fixed memory location in your <b>data segment</b> (not on stack, btw) but it&#39;s really a compiler thing, it will do what it prefers- assuming there aren&#39;t special storage modifiers (I also assume missing * is just a typo...)"}, {"owner": {"reputation": 908, "user_id": 4148092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KwmJC.jpg?s=128&g=1", "display_name": "Retro Gamer", "link": "https://stackoverflow.com/users/4148092/retro-gamer"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1462975474, "post_id": 37164964, "comment_id": 61865605, "body": "I imagine you could use a sizeof() function to determine this yourself. That&#39;s the first step I would take. And @Holt is correct, you your b = 5 is not doing what you are expecting it to."}, {"owner": {"reputation": 8073, "user_id": 2852624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/682806d261e4f00f77aa8633689a9558?s=128&d=identicon&r=PG&f=1", "display_name": "Matthias247", "link": "https://stackoverflow.com/users/2852624/matthias247"}, "edited": false, "score": 0, "creation_date": 1462975499, "post_id": 37164964, "comment_id": 61865618, "body": "The second one as it is would even be a segfault, since it would try to delete memory at address 5 (where it wasn&#39;t allocated)."}, {"owner": {"reputation": 6824, "user_id": 3202093, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/100004496564514/picture?type=large", "display_name": "sp2danny", "link": "https://stackoverflow.com/users/3202093/sp2danny"}, "edited": false, "score": 1, "creation_date": 1462976314, "post_id": 37164964, "comment_id": 61866252, "body": "the biggest difference is that <code>1</code> is idiomatic, and <code>2</code> is an anti-pattern. use value semantics wherever possible. use smart-pointers for the rest. <a href=\"http://stackoverflow.com/questions/20848411/about-the-usage-of-new-and-delete-and-stroustrups-advice\">no naked new</a>"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1462976731, "post_id": 37164964, "comment_id": 61866560, "body": "@AdrianoRepetti: Data segment? Unlikely, since it&#39;s a function-local variable. Each call has its own copy of <code>a</code>. Now since <code>fun1</code> isn&#39;t recursive, this means it could be in thread-local memory, but it can&#39;t be in a (shared) data segment."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1462977672, "post_id": 37164964, "comment_id": 61867291, "body": "@MSalters in this example it won&#39;t probably be anywhere but...where to allocate it depends on compiler (AFAIK). It (compiler) may always put it in the stack (and load with offset) or decide it&#39;s better to use a shared memory location (why not? I&#39;m thinking about read-only brace initialized struct) AFAIK it has freedom to do what is better for its optimization scheme"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "edited": false, "score": 0, "creation_date": 1462978449, "post_id": 37164964, "comment_id": 61867864, "body": "@AdrianoRepetti: The reason why it can&#39;t be in a shared location is because two threads must be able to call <code>fun1</code> and have two different values of <code>a</code>. A shared location can hold only a single value. (Ignoring for a moment that <code>a</code> can be optimized away in this trivial example)."}, {"owner": {"reputation": 59891, "user_id": 1207195, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Q3P4g.jpg?s=128&g=1", "display_name": "Adriano Repetti", "link": "https://stackoverflow.com/users/1207195/adriano-repetti"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1462981685, "post_id": 37164964, "comment_id": 61870188, "body": "@MSalters you&#39;re right for general case, I was just thinking about a read-only case but it&#39;s even more corner case than this example"}], "answers": [{"tags": [], "owner": {"reputation": 5052, "user_id": 479574, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/11f025f0f74ee6557e479a0ba2215223?s=128&d=identicon&r=PG", "display_name": "mark", "link": "https://stackoverflow.com/users/479574/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1462975895, "creation_date": 1462975895, "answer_id": 37165251, "question_id": 37164964, "link": "https://stackoverflow.com/questions/37164964/memory-managment-in-c/37165251#37165251", "title": "Memory managment in c++", "body": "<p>They are not equivalent.  In <code>fun1</code> <code>a</code> would either be a register or possibly a location on the stack depending on compiler optimizations.  Either way, it goes out of scope after the if \"block.\"  In <code>fun2</code> your storage would be on the heap.  In general and for small and short-lived objects, <code>fun1</code> will far out-perform <code>fun2</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1462980700, "post_id": 37165284, "comment_id": 61869528, "body": "C++ does not have the concept of stack or heap. These are implementation details of the compiler.Variables are defined in terms of storage duration automatic/static/dynamic."}], "tags": [], "owner": {"reputation": 194, "user_id": 5758838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JqJa9.gif?s=128&g=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/5758838/ryan"}, "is_accepted": true, "score": 0, "last_activity_date": 1462975970, "creation_date": 1462975970, "answer_id": 37165284, "question_id": 37164964, "link": "https://stackoverflow.com/questions/37164964/memory-managment-in-c/37165284#37165284", "title": "Memory managment in c++", "body": "<p>When the functions complete, both 'a' and 'b' will be freed from memory.  'a' will be deallocated because it left scope, 'b' will be deallocated because you explicitly called delete.  </p>\n\n<p>They are not equivalent in terms of memory.  In fun1() you allocate one int to your stack.  In fun2() you allocate one int pointer on your stack and one int in your heap.  This means fun2() is slightly slower and uses more memory.</p>\n"}, {"tags": [], "owner": {"reputation": 4506, "user_id": 3344612, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/jwgap.jpg?s=128&g=1", "display_name": "Teivaz", "link": "https://stackoverflow.com/users/3344612/teivaz"}, "is_accepted": false, "score": 0, "last_activity_date": 1462976163, "creation_date": 1462976163, "answer_id": 37165365, "question_id": 37164964, "link": "https://stackoverflow.com/questions/37164964/memory-managment-in-c/37165365#37165365", "title": "Memory managment in c++", "body": "<p>Assuming you have a typo in the second function.</p>\n\n<blockquote>\n  <p>Are they equivalent?</p>\n</blockquote>\n\n<p>First function will do virtually nothing meanwhile second function will invoke operator <code>new</code> which might be overloaded and operator <code>delete</code> which also might be overloaded. This will allocate dynamic memory and free it eventually.\nAnd what is more important, second function can throw an exception.</p>\n\n<blockquote>\n  <p>Is the memory allocated for the a variable freed after program leaves the if block?</p>\n</blockquote>\n\n<p>In the first function memory will be freed after leaving the scope if it were allocated. In the second example memory will be freed after execution of <code>delete</code> operator, but keep in mind that you have a pointer as a local variable which will perform like in first case.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 6320840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bfa6ceb1955421fc217f9715535b5e0?s=128&d=identicon&r=PG&f=1", "display_name": "user6320840", "link": "https://stackoverflow.com/users/6320840/user6320840"}, "is_accepted": false, "score": 0, "last_activity_date": 1462976427, "creation_date": 1462976427, "answer_id": 37165472, "question_id": 37164964, "link": "https://stackoverflow.com/questions/37164964/memory-managment-in-c/37165472#37165472", "title": "Memory managment in c++", "body": "<p>The <code>{ ... }</code> is known as a <em>compound statement</em>. If the braces are omitted in an <code>if</code> statement the enclosed statement is still a compound statement. Compound statements have <em>block scope</em>. This means variables with <em>automatic storage</em> are destroyed at the end of <em>block scope</em>. </p>\n\n<pre><code>void fun1()\n{\n    if(1)\n        int a=5; // a destroyed at semi-colon\n}\n\nvoid fun2()\n{\n    if(1)\n        {\n            int *b = new int;\n            b = 5;\n            delete b;\n        } // b destroyed at brace\n}\n</code></pre>\n\n<p>The life time of the memory allocated with <code>new int</code> has nothing to do with the storage duration of <code>b</code>. This is one of the reasons why using a smart pointer is recommend, so you don't have to worry about destroying the memory managed by <code>b</code>.</p>\n"}], "owner": {"reputation": 162, "user_id": 4746861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b02d093c0e7e10074b7d572396022657?s=128&d=identicon&r=PG&f=1", "display_name": "mmichal10", "link": "https://stackoverflow.com/users/4746861/mmichal10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 37165284, "answer_count": 4, "score": 0, "last_activity_date": 1462976427, "creation_date": 1462975232, "last_edit_date": 1462975728, "question_id": 37164964, "link": "https://stackoverflow.com/questions/37164964/memory-managment-in-c", "title": "Memory managment in c++", "body": "<p>Assume we have two fragments of C++ code:</p>\n\n<p>1:</p>\n\n<pre><code>void fun1()\n{\n    if(1)\n        int a=5;\n}\n</code></pre>\n\n<p>2:</p>\n\n<pre><code>void fun2()\n{\n    if(1)\n        {\n            int *b = new int;\n            b = 5;\n            delete b;\n        }\n}\n</code></pre>\n\n<p>Are they equivalent? Is the memory allocated for the <code>a</code> variable freed after program leaves the <code>if</code> block? If not, when it is freed?</p>\n"}, {"tags": ["c++", "debugging", "visual-studio-2013", "release"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462974834, "post_id": 37164770, "comment_id": 61865029, "body": "It sounds like you have undefined behavior in your code.  Can you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> the exhibits the same behavior?"}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 2, "creation_date": 1462974900, "post_id": 37164770, "comment_id": 61865093, "body": "Either you or one of your dependencies links in msvcp120d.dll (the debug version of the runtime) into the release build. Mixing the runtimes can lead to issues like this. To track down who, you can use Dependency Walker to list the tree of dependencies."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1462974937, "post_id": 37164770, "comment_id": 61865132, "body": "msvcp120d.dll is part of the Visual Studio 2013 debug crt. If it is used in release I would expect  UB since Debug and Release runtimes are incompatible with each other. Make sure your application and all of your dependent dlls  are built in the same configuration. It is also not safe to mix compiler versions."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1462976417, "post_id": 37164770, "comment_id": 61866325, "body": "Your program is corrupting the heap.  Seeing msvcp120d.dll loaded in your process is practically a guarantee that this will happen.  Basic C++ template class objects like std::string do not have the same layout in the debug and the release build.  This is not Java or C# that runs with a VM to ensure everybody agrees what an object looks like.  In C++ you <b>must</b> build everything you link, including libraries that you did not build yourself, with the exact same compiler using the exact same settings."}, {"owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "edited": false, "score": 0, "creation_date": 1462978575, "post_id": 37164770, "comment_id": 61867956, "body": "I don&#39;t recognize that graph off hand, but this is the tool I was talking about. <a href=\"http://www.dependencywalker.com\" rel=\"nofollow noreferrer\">dependencywalker.com</a>"}], "answers": [{"tags": [], "owner": {"reputation": 563, "user_id": 5745605, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/900b03b6b350c78dfda25efc0baf3f60?s=128&d=identicon&r=PG&f=1", "display_name": "gboy", "link": "https://stackoverflow.com/users/5745605/gboy"}, "is_accepted": false, "score": 2, "last_activity_date": 1463003077, "creation_date": 1463003077, "answer_id": 37173814, "question_id": 37164770, "link": "https://stackoverflow.com/questions/37164770/release-version-crashing-due-to-msvcp120d-dll/37173814#37173814", "title": "Release version crashing due to msvcp120d.dll", "body": "<p>@Niall  Thank you! The software at Dependencywalker.com was fantastic.  I was able to use it to determine the library causing the problem and track down the error. It turns out that I had previously (months ago, dumbly) set a system path to the debug version of that library.  So even though my project was properly directed to link to the release version of the library, at runtime, my executable was linking to the debug version of the *.dll file!  </p>\n\n<p>I deleted the path variable and now make sure a copy of the proper *.dll file is in my Release or Debug directory. Then it all runs and shuts down fine.</p>\n\n<p>Thanks to all who provided assistance.</p>\n"}], "owner": {"reputation": 563, "user_id": 5745605, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/900b03b6b350c78dfda25efc0baf3f60?s=128&d=identicon&r=PG&f=1", "display_name": "gboy", "link": "https://stackoverflow.com/users/5745605/gboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1463003077, "creation_date": 1462974741, "last_edit_date": 1462977454, "question_id": 37164770, "link": "https://stackoverflow.com/questions/37164770/release-version-crashing-due-to-msvcp120d-dll", "title": "Release version crashing due to msvcp120d.dll", "body": "<p>My code is crashing in the Release configuration but not the Debug configuration.  It's only doing this as I exit the program as the very last line 'return(0);' executes.  I'm working in the Visual Studio development environment and when it crashes, VS studio offers me the option to 'Debug' the code.  When I select that, it leads to an error dialog that pops up saying:</p>\n\n<blockquote>\n  <p>Unhandled exception at 0x00007FF851A0512D (msvcp120d.dll) in myapp.exe: 0xC0000005: Access violation reading location 0xFFFFFFFFFFFFFFFF.</p>\n</blockquote>\n\n<p>When I select to 'break' when this exception occurs, it highlights the following function in the xstring file:</p>\n\n<pre><code>void _Free_proxy()\n    {   // destroy proxy\n    typename _Alloc::template rebind&lt;_Container_proxy&gt;::other\n        _Alproxy;\n    this-&gt;_Orphan_all();\n    _Alproxy.destroy(this-&gt;_Myproxy);\n    _Alproxy.deallocate(this-&gt;_Myproxy, 1);\n    this-&gt;_Myproxy = 0;\n    }\n</code></pre>\n\n<p>And, especially, the line '_Alproxy.destroy(this->_Myproxy);' is highlighted as the culprit.</p>\n\n<p>I thought the issue might be that my 'release' code is somehow linking to the 'debug' msvcp120d.dll library since that's highlighted in the 1st dialog that pops up - but that may be just because I start using the VS debugger to ID this problem.  But even if that is the problem, I'm uncertain how to tell VS to compile with msvcp120.dll for the Release configuration and msvcp120d.dll for the Debug configuration.  </p>\n\n<p>(For the record, I'm generating all my code using the 'Multi-threaded DLL (/MD)' flag in the Release configuration and the 'Multi-threaded Debug DLL (/MDd)' in the Debug configuration)</p>\n\n<p>The kicker is that when the Release version crashes, the process enters a 'suspended' state and I'm unable to fully kill it via task manager.  And then I can't even recompile a new Release version without restarting my computer!</p>\n\n<p>I don't know how to isolate this problem.  Can anyone advise me on how I might fix this?</p>\n\n<hr>\n\n<p>Update</p>\n\n<p>The code for this project is quite large - so distilling it to a minimal version that exhibits the same behavior, while usually a valid way to track a bug, would be a pretty big task.  I was hoping that there was some method to log the processes and figure out which one is calling msvcp120d.dll @Niall, I generated the dependency graph and it is huge. Without giving away anything proprietary, attached is a global view of the graph.<br>\n<a href=\"http://i.stack.imgur.com/F4vq7.png\" rel=\"nofollow\">Dependency graph of entire solution</a>\nIs there any tool to track which is calling msvcp120d.dll?</p>\n"}, {"tags": ["c++", "opengl", "sdl", "glew", "glu"], "comments": [{"owner": {"reputation": 841, "user_id": 992530, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6527ad996a8cd5e0901f6c68a943bd4b?s=128&d=identicon&r=PG&f=1", "display_name": "DeathByTensors", "link": "https://stackoverflow.com/users/992530/deathbytensors"}, "edited": false, "score": 2, "creation_date": 1462974766, "post_id": 37164634, "comment_id": 61864963, "body": "Learning C++ and OpenGL at the same time? That&#39;s quite ambitious!"}, {"owner": {"reputation": 708, "user_id": 1592645, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a3801b6ad459a6271d047ef65ceb179b?s=128&d=identicon&r=PG", "display_name": "Mariano Ruggiero", "link": "https://stackoverflow.com/users/1592645/mariano-ruggiero"}, "edited": false, "score": 1, "creation_date": 1462975719, "post_id": 37164634, "comment_id": 61865797, "body": "I agree with Drew. This is quite a simple issue and you&#39;ll be hitting lots of those on both C++ and OpenGL if you&#39;re approaching both for the first time. Your problem is the instance variable is declared as Mesh mesh which requires a default constructor to work. You&#39;ll need to declare it as Mesh* mesh and use mesh = new Mesh(...parameters...) to create it"}, {"owner": {"reputation": 75, "user_id": 6320645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1680f6eeb2d39cf20894cd7dedb259b?s=128&d=identicon&r=PG&f=1", "display_name": "Nuno B&#225;rtolo", "link": "https://stackoverflow.com/users/6320645/nuno-b%c3%a1rtolo"}, "reply_to_user": {"reputation": 708, "user_id": 1592645, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a3801b6ad459a6271d047ef65ceb179b?s=128&d=identicon&r=PG", "display_name": "Mariano Ruggiero", "link": "https://stackoverflow.com/users/1592645/mariano-ruggiero"}, "edited": false, "score": 0, "creation_date": 1462992534, "post_id": 37164634, "comment_id": 61876695, "body": "@MarianoRuggiero Thanks for your help Mariano, the instance is now being saved as Room&#39;s private mesh; However I&#39;ve added a method drawRoom() and in this method I can&#39;t get the mesh object to use the Draw() method in the Mesh Class. in Room.h under public I&#39;ve protoyped void drawRoom(); and in Room.cpp I have defined void drawRoom() { mesh.Draw()} but it won&#39;t compile? \u2013"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6320645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1680f6eeb2d39cf20894cd7dedb259b?s=128&d=identicon&r=PG&f=1", "display_name": "Nuno B&#225;rtolo", "link": "https://stackoverflow.com/users/6320645/nuno-b%c3%a1rtolo"}, "edited": false, "score": 0, "creation_date": 1462995518, "post_id": 37165109, "comment_id": 61878348, "body": "Thank you very much for your help."}], "tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": false, "score": -1, "last_activity_date": 1462977599, "last_edit_date": 1462977599, "creation_date": 1462975567, "answer_id": 37165109, "question_id": 37164634, "link": "https://stackoverflow.com/questions/37164634/c-opengl-how-do-you-create-a-mesh-object-instance-from-within-a-class/37165109#37165109", "title": "c++ &amp; OpenGl: How do you create a mesh object instance from within a class", "body": "<p>Mesh doesn't have a default constructor (one which takes no parameters) because the following constructor is defined:</p>\n\n<p><code>Mesh(Vertex* vertices, unsigned int numVertices, unsigned int* indices, unsigned int numIndices);</code></p>\n\n<p>You are not constructing <code>Room::mesh</code> in Room's constructor, instead you are declaring a local variable that will be destroyed after the constructor finishes. To properly construct <code>Room::mesh</code>, you must do something like this:</p>\n\n<pre><code>Room::Room() : mesh( /*insert arguments here*/ )\n{ \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 6320645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1680f6eeb2d39cf20894cd7dedb259b?s=128&d=identicon&r=PG&f=1", "display_name": "Nuno B&#225;rtolo", "link": "https://stackoverflow.com/users/6320645/nuno-b%c3%a1rtolo"}, "edited": false, "score": 0, "creation_date": 1462995523, "post_id": 37171505, "comment_id": 61878351, "body": "Thank you very much for your help."}], "tags": [], "owner": {"reputation": 11225, "user_id": 241013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0825ba5ec12464a2b8176642830e6a7?s=128&d=identicon&r=PG", "display_name": "Sorin", "link": "https://stackoverflow.com/users/241013/sorin"}, "is_accepted": true, "score": 1, "last_activity_date": 1462994228, "creation_date": 1462994228, "answer_id": 37171505, "question_id": 37164634, "link": "https://stackoverflow.com/questions/37164634/c-opengl-how-do-you-create-a-mesh-object-instance-from-within-a-class/37171505#37171505", "title": "c++ &amp; OpenGl: How do you create a mesh object instance from within a class", "body": "<p>mesh is a pointer (<code>Mesh* mesh;</code>). To call Draw you must use the arrow notation: <code>mesh-&gt;Draw();</code>.</p>\n\n<p>If you don't want to have problems later, you should also check that <code>mesh != nullptr</code> before calling Draw (you can simply log that you are trying to draw an uninitialized room or something like that, much easier to debug than memory corruption or segfaults).</p>\n\n<p>Finally in the destructor you should have a line <code>delete mesh;</code> to release the memory associated and other resources a Mesh instance might be using (Or even better declare mesh using unique_ptr, like this: <code>std::unique_ptr&lt;Mesh&gt;</code>, so that it behaves like a pointer but it will be deleted automatically when you destroy your room instance.</p>\n"}], "owner": {"reputation": 75, "user_id": 6320645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1680f6eeb2d39cf20894cd7dedb259b?s=128&d=identicon&r=PG&f=1", "display_name": "Nuno B&#225;rtolo", "link": "https://stackoverflow.com/users/6320645/nuno-b%c3%a1rtolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1931, "favorite_count": 0, "accepted_answer_id": 37171505, "answer_count": 2, "score": 0, "last_activity_date": 1462994228, "creation_date": 1462974446, "last_edit_date": 1462993808, "question_id": 37164634, "link": "https://stackoverflow.com/questions/37164634/c-opengl-how-do-you-create-a-mesh-object-instance-from-within-a-class", "title": "c++ &amp; OpenGl: How do you create a mesh object instance from within a class", "body": "<p>I'm a <code>c++</code> beginner , trying to build my first application with <code>openGL</code>. </p>\n\n<p>I'm trying to create a Room class that will take parameters like width, length and height to create a mesh object which I then want to draw from the main function.</p>\n\n<p>At the moments I'm not trying to initialize Room with any parameters, just trying to create a basic mesh from within room, CPP rather than from main.</p>\n\n<p>I'm having trouble creating a mesh object as a private variable within the class room, and then defining a method to draw it by calling it from main.</p>\n\n<p>I'm using Benny's awesome tutorial and have his exact GitHub files on my visual studio solution.</p>\n\n<p>Im posting it here, they include the mesh.h and mesh. CPP which are probably where the problem is coming from <a href=\"https://github.com/BennyQBD/ModernOpenGLTutorial\" rel=\"nofollow\">this link</a>.</p>\n\n<p>Here is the current code (I've included everything I include in main, just to make sure)</p>\n\n<p><strong>----Room.h ---------------</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;iostream&gt;\n#include &lt;SDL2/SDL.h&gt;\n#include \"display.h\"\n#include \"mesh.h\"\n#include \"shader.h\"\n#include \"texture.h\"\n#include \"transform.h\"\n#include \"camera.h\"\n\n\nclass Room\n{\npublic:\n Room();\n ~Room();\n void drawRoom();\n\nprivate:\n Mesh* mesh;\n\n};\n</code></pre>\n\n<p>----Room.cpp ---------------</p>\n\n<pre><code>#include \"Room.h\"\n#include &lt;iostream&gt;\n#include &lt;SDL2/SDL.h&gt;\n#include \"display.h\"\n#include \"mesh.h\"\n#include \"shader.h\"\n#include \"texture.h\"\n#include \"transform.h\"\n#include \"camera.h\"\n\n\nRoom::Room()\n{ \n Vertex vertices[] =\n {\n  Vertex(glm::vec3(-1, -1, -1), glm::vec2(1, 0), glm::vec3(0, 0, -1)),\n  Vertex(glm::vec3(-1, 1, -1), glm::vec2(0, 0), glm::vec3(0, 0, -1)),\n  Vertex(glm::vec3(1, 1, -1), glm::vec2(0, 1), glm::vec3(0, 0, -1)),\n  Vertex(glm::vec3(1, -1, -1), glm::vec2(1, 1), glm::vec3(0, 0, -1)),\n\n  Vertex(glm::vec3(-1, -1, 1), glm::vec2(1, 0), glm::vec3(0, 0, 1)),\n  Vertex(glm::vec3(-1, 1, 1), glm::vec2(0, 0), glm::vec3(0, 0, 1)),\n  Vertex(glm::vec3(1, 1, 1), glm::vec2(0, 1), glm::vec3(0, 0, 1)),\n  Vertex(glm::vec3(1, -1, 1), glm::vec2(1, 1), glm::vec3(0, 0, 1)),\n\n  Vertex(glm::vec3(-1, -1, -1), glm::vec2(0, 1), glm::vec3(0, -1, 0)),\n  Vertex(glm::vec3(-1, -1, 1), glm::vec2(1, 1), glm::vec3(0, -1, 0)),\n  Vertex(glm::vec3(1, -1, 1), glm::vec2(1, 0), glm::vec3(0, -1, 0)),\n  Vertex(glm::vec3(1, -1, -1), glm::vec2(0, 0), glm::vec3(0, -1, 0)),\n\n  Vertex(glm::vec3(-1, 1, -1), glm::vec2(0, 1), glm::vec3(0, 1, 0)),\n  Vertex(glm::vec3(-1, 1, 1), glm::vec2(1, 1), glm::vec3(0, 1, 0)),\n  Vertex(glm::vec3(1, 1, 1), glm::vec2(1, 0), glm::vec3(0, 1, 0)),\n  Vertex(glm::vec3(1, 1, -1), glm::vec2(0, 0), glm::vec3(0, 1, 0)),\n\n  Vertex(glm::vec3(-1, -1, -1), glm::vec2(1, 1), glm::vec3(-1, 0, 0)),\n  Vertex(glm::vec3(-1, -1, 1), glm::vec2(1, 0), glm::vec3(-1, 0, 0)),\n  Vertex(glm::vec3(-1, 1, 1), glm::vec2(0, 0), glm::vec3(-1, 0, 0)),\n  Vertex(glm::vec3(-1, 1, -1), glm::vec2(0, 1), glm::vec3(-1, 0, 0)),\n\n  Vertex(glm::vec3(1, -1, -1), glm::vec2(1, 1), glm::vec3(1, 0, 0)),\n  Vertex(glm::vec3(1, -1, 1), glm::vec2(1, 0), glm::vec3(1, 0, 0)),\n  Vertex(glm::vec3(1, 1, 1), glm::vec2(0, 0), glm::vec3(1, 0, 0)),\n  Vertex(glm::vec3(1, 1, -1), glm::vec2(0, 1), glm::vec3(1, 0, 0)),\n };\n\n unsigned int indices[] = { 0, 1, 2,\n  0, 2, 3,\n\n  6, 5, 4,\n  7, 6, 4,\n\n  10, 9, 8,\n  11, 10, 8,\n\n  12, 13, 14,\n  12, 14, 15,\n\n  16, 17, 18,\n  16, 18, 19,\n\n  22, 21, 20,\n  23, 22, 20\n };\n\n mesh = new Mesh(vertices, sizeof(vertices) / sizeof(vertices[0]), indices, sizeof(indices) / sizeof(indices[0]));\n\n}\n\nRoom::~Room()\n{\n}\n\nvoid Room::drawRoom()\n{\n    mesh.Draw();\n}\n</code></pre>\n\n<p>I'm getting the following error:</p>\n\n<p>Error   C2228   left of '.Draw' must have class/struct/union    ArchProgramer   c:\\users\\nuno b\u00e1rtolo\\documents\\visual studio 2015\\projects\\archprogramer\\archprogramer\\room.cpp    78  </p>\n\n<p>Thank very much you for your help!</p>\n"}, {"tags": ["android", "c++", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": true, "score": 2, "last_activity_date": 1462978972, "creation_date": 1462978972, "answer_id": 37166543, "question_id": 37164616, "link": "https://stackoverflow.com/questions/37164616/android-native-global-object-destructor-never-called/37166543#37166543", "title": "Android - native global object destructor never called", "body": "<p>Android never unloads native libraries; usually the app process dies spontaneously when the system decides that it needs its resources - and it does an equivalent of <code>kill -9</code>, never calling destructors or Java <code>finalize()</code>.</p>\n"}], "owner": {"reputation": 808, "user_id": 1048226, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/57e7184a1ba6d0f0379a40f74d9661c8?s=128&d=identicon&r=PG", "display_name": "Marco Masci", "link": "https://stackoverflow.com/users/1048226/marco-masci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 37166543, "answer_count": 1, "score": 2, "last_activity_date": 1462978972, "creation_date": 1462974418, "question_id": 37164616, "link": "https://stackoverflow.com/questions/37164616/android-native-global-object-destructor-never-called", "title": "Android - native global object destructor never called", "body": "<p>I load a shared library, with the classic System.loadLibrary() method, from a static java block. The library has global object allocated statically:</p>\n\n<pre><code>class Foo\n{\npublic:\n   Foo()\n   {\n   }\n\n   ~Foo()\n   {\n      logtofile( \"Foo::~Foo() called\" );\n   }\n}\n\n\nFoo dummy;\n</code></pre>\n\n<p>The global function logtofile writes a log file on the sdcard. While the constructor gets called when the library is loaded, it seems to me that the destructor is never called. I expected that between two constructors calls there should be a destructor call. So the question is: when the Foo destructor gets called?</p>\n"}, {"tags": ["c++", "class", "vector", "range", "subscript"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1462974450, "post_id": 37164566, "comment_id": 61864674, "body": "did you debug your program statement by statement?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6320653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S-IynjE08ME/AAAAAAAAAAI/AAAAAAAAAE0/Vp80LxqYu2k/photo.jpg?sz=128", "display_name": "Fergus Frank", "link": "https://stackoverflow.com/users/6320653/fergus-frank"}, "edited": false, "score": 0, "creation_date": 1462974885, "post_id": 37164678, "comment_id": 61865070, "body": "Thank you so much... I knew it would be something simple."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 11, "user_id": 6320653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S-IynjE08ME/AAAAAAAAAAI/AAAAAAAAAE0/Vp80LxqYu2k/photo.jpg?sz=128", "display_name": "Fergus Frank", "link": "https://stackoverflow.com/users/6320653/fergus-frank"}, "edited": false, "score": 0, "creation_date": 1462974953, "post_id": 37164678, "comment_id": 61865152, "body": "@FergusFrank Coffee time. Good luck. :)"}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 3, "last_activity_date": 1462975061, "last_edit_date": 1462975061, "creation_date": 1462974538, "answer_id": 37164678, "question_id": 37164566, "link": "https://stackoverflow.com/questions/37164566/vector-subscript-out-of-range-2d-vector-within-class-constructor-initialisatio/37164678#37164678", "title": "Vector subscript out of range - 2D vector within class constructor initialisation", "body": "<p><code>vector&lt;vector&lt;double&gt; &gt; vertex{ 3 };</code>, is declaring a new local variable named <code>vertex</code>, which has nothing to do with the member variable <code>vertex</code>. It remains empty. You could:</p>\n\n<pre><code>isoTri(double base_in, double side_in) : base(base_in), side(side_in)\n{\n    coordA.push_back(0); coordA.push_back(0); //bottom left corner at origin\n    coordB.push_back(base2); coordB.push_back(height); //top corner\n    coordC.push_back(base); coordC.push_back(0); //bottom right corner\n    vertex.push_back(coordA); \n    vertex.push_back(coordB); \n    vertex.push_back(coordC);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6320653, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S-IynjE08ME/AAAAAAAAAAI/AAAAAAAAAE0/Vp80LxqYu2k/photo.jpg?sz=128", "display_name": "Fergus Frank", "link": "https://stackoverflow.com/users/6320653/fergus-frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462975061, "creation_date": 1462974285, "question_id": 37164566, "link": "https://stackoverflow.com/questions/37164566/vector-subscript-out-of-range-2d-vector-within-class-constructor-initialisatio", "title": "Vector subscript out of range - 2D vector within class constructor initialisation", "body": "<p>I am doing a project which creates an isosceles triangle from base and side inputs. I then need to calculate the coordinates and store them in some use-able way. What I have tried to do is create a 2D vector of vertices - so an array of 3 coords each with an array of two dimensions (x and y values). When I try to access the values (eg. for translation) I get a runtime error:  vector subscript out of range... </p>\n\n<p>code: </p>\n\n<p>private:</p>\n\n<pre><code>double base, side;\nvector&lt;double&gt; coordA, coordB, coordC;\nvector&lt;vector&lt;double&gt; &gt; vertex;\n</code></pre>\n\n<p>public:</p>\n\n<pre><code>isoTri() : base(0), side(0), coordA(0), coordB(0), coordC(0) {}\nisoTri(double base_in, double side_in) : base(base_in), side(side_in)\n{\n    coordA.push_back(0); coordA.push_back(0); //bottom left corner at origin\n    coordB.push_back(base2); coordB.push_back(height); //top corner\n    coordC.push_back(base); coordC.push_back(0); //bottom right corner\n    vector&lt;vector&lt;double&gt; &gt; vertex{ 3 };\n    vertex[0] = { coordA }; vertex[1] = { coordB }; vertex[2] = { coordC }; //vector of coordinates\n    }\n~isoTri() {}\n\nvoid translate(double dx, double dy){\n\n    for (int i = 0; i &lt; 2; i++){\n        for (int j = 0; j &lt; 2; j++){\n            vertex[i][0] = vertex[i][0] + dx;\n            vertex[j][1] = vertex[j][1] + dy;\n        }\n    }\n}; `\n</code></pre>\n"}, {"tags": ["c++", "xml", "xsd", "xml-parsing", "libxml2"], "answers": [{"tags": [], "owner": {"reputation": 28131, "user_id": 1956010, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bfdcb4596e9da98cccbf9a0069fdff6c?s=128&d=identicon&r=PG", "display_name": "nwellnhof", "link": "https://stackoverflow.com/users/1956010/nwellnhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1463142337, "creation_date": 1463142337, "answer_id": 37210032, "question_id": 37164353, "link": "https://stackoverflow.com/questions/37164353/libxml-returning-line-column-number-upon-validity-errors/37210032#37210032", "title": "Libxml++: Returning Line/Column number upon validity errors", "body": "<p>As far as I know, this is not possible with <em>libxml++</em>, but you can use the underlying <em>libxml2</em> functions directly. The key is to register a structured error handler with <a href=\"http://www.xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaSetParserStructuredErrors\" rel=\"nofollow\">xmlSchemaSetValidStructuredErrors</a>. The error handler receives an <a href=\"http://www.xmlsoft.org/html/libxml-xmlerror.html#xmlError\" rel=\"nofollow\">xmlError</a> which contains a field for the line and column number. The column is stored in <code>int2</code>. See the following example program:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>#include &lt;stdio.h&gt;\n#include &lt;libxml/xmlschemas.h&gt;\n\nvoid errorHandler(void *userData, xmlErrorPtr error) {\n    printf(\"Error at line %d, column %d\\n%s\",\n           error-&gt;line, error-&gt;int2, error-&gt;message);\n}\n\nint main() {\n    xmlSchemaParserCtxtPtr pctxt = xmlSchemaNewParserCtxt(\"so.xsd\");\n    xmlSchemaPtr schema = xmlSchemaParse(pctxt);\n    xmlSchemaValidCtxtPtr vctxt = xmlSchemaNewValidCtxt(schema);\n    xmlSchemaSetValidStructuredErrors(vctxt, errorHandler, NULL);\n    xmlSchemaValidateFile(vctxt, \"so.xml\", 0);\n    return 0;\n}\n</code></pre>\n\n<p>Given a schema <code>so.xsd</code></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\"&gt;\n\n&lt;xs:element name=\"doc\"&gt;\n    &lt;xs:complexType&gt;\n        &lt;xs:sequence&gt;\n            &lt;xs:element name=\"item\" minOccurs=\"0\" maxOccurs=\"unbounded\"&gt;\n                &lt;xs:complexType&gt;\n                    &lt;xs:attribute name=\"attr\" type=\"xs:string\"/&gt;\n                &lt;/xs:complexType&gt;\n            &lt;/xs:element&gt;\n        &lt;/xs:sequence&gt;\n    &lt;/xs:complexType&gt;\n    &lt;xs:unique name=\"uniq\"&gt;\n        &lt;xs:selector xpath=\"item\"/&gt;\n        &lt;xs:field xpath=\"@attr\"/&gt;\n    &lt;/xs:unique&gt;\n&lt;/xs:element&gt;\n\n&lt;/xs:schema&gt;\n</code></pre>\n\n<p>and a document <code>so.xml</code></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;doc&gt;\n    &lt;item attr=\"one\"/&gt;\n    &lt;item attr=\"two\"/&gt;\n    &lt;item attr=\"three\"/&gt;\n    &lt;item attr=\"one\"/&gt;\n&lt;/doc&gt;\n</code></pre>\n\n<p>the program prints</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Error at line 5, column 23\nElement 'item': Duplicate key-sequence ['one'] in unique identity-constraint 'uniq'.\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4121755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d0d946d1a50374b364f10aa7a1e4cf6?s=128&d=identicon&r=PG", "display_name": "Friday", "link": "https://stackoverflow.com/users/4121755/friday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 37210032, "answer_count": 1, "score": 2, "last_activity_date": 1463142337, "creation_date": 1462973763, "last_edit_date": 1462974094, "question_id": 37164353, "link": "https://stackoverflow.com/questions/37164353/libxml-returning-line-column-number-upon-validity-errors", "title": "Libxml++: Returning Line/Column number upon validity errors", "body": "<p>I'm writing a simple C++ program to parse a XML file to check if it is well formatted, and if it is valid against a schema supplied. I'm restricted to using Libxml++ as per software lead's constraints. </p>\n\n<p>I got everything working and now trying to work on error handling such that it returns a more meaningful error message. In parsing errors this is already done for me as it returns the line and column number where the parsing issue occurred. However on Validity exceptions, it just states the element the validity error was caught and a short message regarding what's wrong.</p>\n\n<p><strong>Is it possible to modify this such that it also returns the line and column number this was encountered</strong>? Problem is that if validity error was caught against an element that is NOT UNIQUE, it will be rather extraneous to find it if the XML file is thousands of lines long.</p>\n\n<p>I'm using a DomParser to parse the XML, and using the SchemaValidator class as seen in libxml++</p>\n"}, {"tags": ["python", "c++", "qt", "user-interface", "qt-designer"], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 6008256, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xurIEXa_-F8/AAAAAAAAAAI/AAAAAAACIAE/LuiX0JmVpGE/photo.jpg?sz=128", "display_name": "bluegreen", "link": "https://stackoverflow.com/users/6008256/bluegreen"}, "is_accepted": false, "score": 0, "last_activity_date": 1462982116, "creation_date": 1462982116, "answer_id": 37167718, "question_id": 37164302, "link": "https://stackoverflow.com/questions/37164302/how-to-create-a-pop-up-window-link-a-mainwindow-with-a-dialog-in-qt-designer/37167718#37167718", "title": "How to create a pop-up window (link a MainWindow with a Dialog) in Qt Designer (Python)?", "body": "<p>QMessageBox has some built in about box functionality.   Look at </p>\n\n<pre><code>QMessageBox.about (QWidget parent, QString caption, QString text)\n</code></pre>\n\n<p>So you would call it something like:</p>\n\n<pre><code>QMessageBox.about (self, \"About whatever....\", \"The text you want to display in the box\")\n</code></pre>\n\n<p>You can look at the QMessageBox documentation here:</p>\n\n<p><a href=\"http://pyqt.sourceforge.net/Docs/PyQt4/qmessagebox.html\" rel=\"nofollow\">http://pyqt.sourceforge.net/Docs/PyQt4/qmessagebox.html</a></p>\n"}], "owner": {"reputation": 781, "user_id": 5852648, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/c38839e4a0550b2bac7263a2b792b9ad?s=128&d=identicon&r=PG", "display_name": "kaycee", "link": "https://stackoverflow.com/users/5852648/kaycee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 417, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462982116, "creation_date": 1462973649, "question_id": 37164302, "link": "https://stackoverflow.com/questions/37164302/how-to-create-a-pop-up-window-link-a-mainwindow-with-a-dialog-in-qt-designer", "title": "How to create a pop-up window (link a MainWindow with a Dialog) in Qt Designer (Python)?", "body": "<p>I'm trying to build an \"About\" dialog window for my app. My main window is a \"MainWindow\" type and the \"About\" window is a Dialog, both created with QT Designer and transformed to \".py\" files with pyuic4 --> gui_v1.py and about_v1.py</p>\n\n<p>In my the main file of my app, I built this second class for the about dialog:</p>\n\n<pre><code>import gui_v1\nimport about_v1\n\nclass AboutDialog(QtGui.QDialog, about_v1.Ui_Dialog):\n    def __init__(self, parent=None):\n        super(AboutDialog, self).__init__(parent)\n        self.setupUi(self)\n</code></pre>\n\n<p>I added the open_about() function to my main class in the main file, and linked this function to the menu button responsible for opening the about window:</p>\n\n<pre><code>class MainDialog(QtGui.QMainWindow, gui_v1.Ui_MainWindow):\n    def __init__(self, parent=None):\n        super(MainDialog, self).__init__(parent)\n        self.setupUi(self)\n        QtCore.pyqtRemoveInputHook()\n\n        [...]\n\n        def open_about(self):\n           app = QtGui.QApplication(sys.argv)\n           form = AboutDialog()\n           form.show()\n           app.exec_()\n</code></pre>\n\n<p>My main app is running from this last function:</p>\n\n<pre><code>if __name__ == '__main__':\n    def main():\n        app=QtGui.QApplication(sys.argv)\n        form=MainDialog()\n        form.show()\n        app.exec_()\n\n    main()\n</code></pre>\n\n<p>When clicking on the About menu item, nothing happens. I'm guessing the problem is in the open_about() function, but I can't seem to find what it is. Thanks for your help!</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1462973726, "post_id": 37164244, "comment_id": 61864016, "body": "will the fd returned by inotify_add_watch() work with <code>select()</code>?"}, {"owner": {"reputation": 31004, "user_id": 391104, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ec5ada4e8208a8fa410847ae421bf229?s=128&d=identicon&r=PG", "display_name": "q0987", "link": "https://stackoverflow.com/users/391104/q0987"}, "reply_to_user": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1462975044, "post_id": 37164244, "comment_id": 61865232, "body": "@RichardHodges, check this one <a href=\"http://stackoverflow.com/questions/37125002/why-perform-selective-read-on-the-inotify-instance-using-select-call\" title=\"why perform selective read on the inotify instance using select call\">stackoverflow.com/questions/37125002/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3598, "user_id": 4822941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/06bJl.jpg?s=128&g=1", "display_name": "employee of the month", "link": "https://stackoverflow.com/users/4822941/employee-of-the-month"}, "is_accepted": false, "score": 0, "last_activity_date": 1462980382, "creation_date": 1462980382, "answer_id": 37167080, "question_id": 37164244, "link": "https://stackoverflow.com/questions/37164244/do-we-need-a-second-thread-to-process-time-consuming-jobs-with-inotify/37167080#37167080", "title": "Do we need a second thread to process time-consuming jobs with inotify?", "body": "<p>Let's do a thought experiment. Clearly, there is some sort of a queue with events for you to read. But let's say you don't read them. If the queue is unbound in size, you will run out of memory, so that's a non-starter. If the queue is bound, you either have to start dropping events at some point or BLOCK operations which would generate said events. The latter is obviously a non-starter - you don't want your fs operations to block because a process with inotify watchers is waiting on some crap and not reading anything.</p>\n\n<p>But most importantly, you very likely don't want to use inotify in the first place. The entire business here looks misdesigned. What you likely want is one directory, right, which gets files renamed into. So that when a file appears, it is safe to read. Then, depending on what this is about, you may want to just get SIGUSR1 or something to trigger dir processing or get a request over a unix socket with exact file name.</p>\n\n<p>The dir in question must only contain unprocessed files.</p>\n"}], "owner": {"reputation": 31004, "user_id": 391104, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ec5ada4e8208a8fa410847ae421bf229?s=128&d=identicon&r=PG", "display_name": "q0987", "link": "https://stackoverflow.com/users/391104/q0987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462980382, "creation_date": 1462973487, "last_edit_date": 1495541275, "question_id": 37164244, "link": "https://stackoverflow.com/questions/37164244/do-we-need-a-second-thread-to-process-time-consuming-jobs-with-inotify", "title": "Do we need a second thread to process time-consuming jobs with inotify?", "body": "<p>Referenc:\n<a href=\"https://stackoverflow.com/questions/9067175/how-to-monitor-a-folder-with-all-subfolders-and-files-inside\">How to monitor a folder with all subfolders and files inside?</a></p>\n\n<p>I need to monitor a directory for any file with extension of *.log. If a new file is created or is moved in, I will process the file. it takes variable time to process each file.</p>\n\n<p>Question> Do I need to create one thread to listen the inotify event and push the new file name into queue and use another thread to process the queue? My concern is that if I don't use separate threads, then the inotify may fail to track changes caused by some large files.</p>\n\n<p>I have simulated the problem with <code>sleep</code> while processing each log file without any multi-thread code. It seems to me that inotify always corrects get all created/moved files in the directory.</p>\n\n<p>Here is my simulation.</p>\n\n<p><strong>Terminate 1</strong>:\nI run the app and listen the inotify event within the main. Whenever processing one log file, I will sleep for 10 second then print the file name to console.</p>\n\n<p><strong>Terminte 2</strong>:\nI will copy multiple files at time T1 to the monitored directory.\nBefore the app finishing processing all previous files, I will move multiple files at time T2.\nThen again time T3, I will copy multiple files to the directory before the app finishes.</p>\n\n<p>Observation:\nThe app processed all log files as I expected.</p>\n\n<p>Question> Is this expected behavior of inotify or I just run lucky this morning?\nIn other words, will inotify cache unprocessed events in case of simulation as above?</p>\n\n<p>FYI: the code snippet I used:</p>\n\n<pre><code>#define EVENT_SIZE    ( sizeof (struct inotify_event) )\n#define BUFFER_LEN  ( 1024 * ( EVENT_SIZE + NAME_MAX + 1) )\n\nwd = inotify_add_watch( fd, root.string().c_str(), IN_CREATE | IN_MOVED_TO );\n\nwhile ( true )\n{\n    length = read( fd, buffer, BUFFER_LEN );\n\n    for ( int i = 0; i &lt; length; )\n    {\n        const inotify_event *ptrEvent = reinterpret_cast&lt;inotify_event *&gt;(&amp;buffer[i]);\n        ... // processing the event\n        sleep(10); // to simulate the long work\n        i += INO_EVENT_SIZE + ptrEvent-&gt;len;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "pointers", "destructor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1462973284, "post_id": 37164108, "comment_id": 61863683, "body": "is there any reason why you mix c and c++ memory managing?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1462973326, "post_id": 37164108, "comment_id": 61863712, "body": "You need to create a copy constructor that prints as well to see what is going on.  Do that and then check the results."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1462973410, "post_id": 37164108, "comment_id": 61863781, "body": "You&#39;re violating the Rule of Three."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1462973490, "post_id": 37164108, "comment_id": 61863841, "body": "take out the line <code>m_test_class = Test_Class();</code>, it is unnecessary and it causes your problem.  You should also disable (or implement) Test_Class&#39;s copy-constructor and copy-assignment operator so that if you do make this mistake then the compiler catches it."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1462973676, "post_id": 37164108, "comment_id": 61863975, "body": "@Kerrek SB did you meant the rule of five?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1462973736, "post_id": 37164108, "comment_id": 61864025, "body": "Btw this is not C++, it&#39;s C++CLI. They are not the same language."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1462976695, "post_id": 37164108, "comment_id": 61866534, "body": "@GuillaumeRacicot for the purposes of this question it could as well be plain C++ - only the <code>main</code> function signature gives you a clue here."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1462977064, "post_id": 37164108, "comment_id": 61866825, "body": "I think this is important to make a distinction between the two. They are fundamentally not the same language and it can have implication on the posted answer, even if the syntax is really similar. I won&#39;t post a question with a C tag when it&#39;s C++. Even if I did, the community would have corrected it, just like I did for this question."}], "answers": [{"comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1462976125, "post_id": 37164209, "comment_id": 61866118, "body": "An object cannot be an lvalue. Value categories are properties of <i>expressions</i>, not objects."}], "tags": [], "owner": {"reputation": 2162, "user_id": 2534472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d8dce53c214aa63495ff868b09a1a4?s=128&d=identicon&r=PG", "display_name": "UniversE", "link": "https://stackoverflow.com/users/2534472/universe"}, "is_accepted": false, "score": 7, "last_activity_date": 1462973393, "creation_date": 1462973393, "answer_id": 37164209, "question_id": 37164108, "link": "https://stackoverflow.com/questions/37164108/c-destructor-for-same-instance-of-an-object-called-twice/37164209#37164209", "title": "C+: Destructor for same instance of an object called twice", "body": "<p>The reason is, that your compiler is not able to eliminate the copy assignment <code>Game game = Game();</code>.</p>\n\n<p>The correct code would be <code>Game game;</code>.</p>\n\n<p>What your code does is to construct an object as rvalue, assign it to a new object <code>game</code> that is a lvalue. So in this line <code>Game game = Game();</code> two objects are constructed and one of them is immediately destructed after assignment.</p>\n\n<p><strong>Edit</strong>:</p>\n\n<p>The same holds for m_Holder and so on - of course.</p>\n"}, {"tags": [], "owner": {"reputation": 6248, "user_id": 3191481, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lbaOV.png?s=128&g=1", "display_name": "Edward", "link": "https://stackoverflow.com/users/3191481/edward"}, "is_accepted": false, "score": 1, "last_activity_date": 1462973997, "last_edit_date": 1492087237, "creation_date": 1462973997, "answer_id": 37164456, "question_id": 37164108, "link": "https://stackoverflow.com/questions/37164108/c-destructor-for-same-instance-of-an-object-called-twice/37164456#37164456", "title": "C+: Destructor for same instance of an object called twice", "body": "<p>You might benefit from instrumenting your class to see what's happening.  A technique I often use is to create a specific instrumentation class with static counters for each significant event.  Here's an example that is little more than a wrapper around a numeric type (specifically <code>double</code> in this case), but it illustrates the idea:</p>\n\n<pre><code>class Goofy\n{\nprivate:\n    double num;\npublic:\n    Goofy(double n = 0) : num(n) { ++constructions; }\n    Goofy(const Goofy &amp;g2) : num(g2.num) { ++copyconstructions; }\n    Goofy(const Goofy &amp;&amp;g2) : num(g2.num) { ++moves; }\n    ~Goofy() { ++destructions; }\n    Goofy &amp;operator=(const Goofy &amp;g2) { num = g2.num; return *this; }\n    Goofy &amp;operator-=(const Goofy &amp;g2) { num -= g2.num; return *this; }\n    Goofy &amp;operator+=(const Goofy &amp;g2) { num += g2.num; return *this; }\n    // none of the code below is needed by the new version of the function\n    Goofy &amp;operator*=(const Goofy &amp;g2) { num *= g2.num; return *this; }\n    friend std::ostream &amp;operator&lt;&lt;(std::ostream &amp;out, const Goofy &amp;g2) {\n        return out &lt;&lt; g2.num;\n    }\n    static void report(int line) {\n        std::cout &lt;&lt; \"At line \" &lt;&lt; line\n              &lt;&lt; \"\\nconstructions = \" &lt;&lt; Goofy::constructions\n              &lt;&lt; \"\\n       copies = \" &lt;&lt; Goofy::copyconstructions\n              &lt;&lt; \"\\n        moves = \" &lt;&lt; Goofy::moves \n              &lt;&lt; \"\\n destructions = \" &lt;&lt; Goofy::destructions \n              &lt;&lt; \"\\n     existing = \" &lt;&lt; Goofy::constructions + \n                    Goofy::copyconstructions + Goofy::moves - \n                    Goofy::destructions\n              &lt;&lt; '\\n';\n    }\n    static long constructions;\n    static long copyconstructions;\n    static long moves;\n    static long destructions;\n};\n\nlong Goofy::constructions = 0;\nlong Goofy::copyconstructions = 0;\nlong Goofy::moves = 0;\nlong Goofy::destructions = 0;\n</code></pre>\n\n<p>Here's an example of how it was used: <a href=\"https://codereview.stackexchange.com/questions/56532/kahan-summation/56592#56592\">https://codereview.stackexchange.com/questions/56532/kahan-summation/56592#56592</a></p>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6320439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353676250be1cf26d226904c75e1c59b?s=128&d=identicon&r=PG&f=1", "display_name": "user6320439", "link": "https://stackoverflow.com/users/6320439/user6320439"}, "is_accepted": false, "score": 0, "last_activity_date": 1462974557, "creation_date": 1462974557, "answer_id": 37164689, "question_id": 37164108, "link": "https://stackoverflow.com/questions/37164108/c-destructor-for-same-instance-of-an-object-called-twice/37164689#37164689", "title": "C+: Destructor for same instance of an object called twice", "body": "<p>There's a lot wrong with your code, but I'm going to go with it anyways. You need to (at a minimum) implement the copy constructor and copy assignment operator. I would use <code>new</code>, <code>delete</code> and <code>swap</code> since this is C++ and not C. Something like this:</p>\n\n<pre><code>Test_Class() {\n    allocated_array = new int[64];\n}\n\n~Test_Class() {\n    delete[] allocated_array;\n}\n\nTest_Class(const Test_Class&amp; rhs)\n{\n    allocated_array = new int[64];\n    std::copy(&amp;rhs.allocated_array[0], &amp;rhs.allocated_array[0] + 64, &amp;allocated_array[0]);\n}\n\nTest_Class&amp; operator=(const Test_Class rhs)\n{\n    if (this != &amp;rhs)\n    {\n        Test_Class(rhs).swap(*this);\n    }\n\n    return *this;\n}\n\nvoid swap(Test_Class &amp; s) throw()\n{\n    std::swap(this-&gt;allocated_array, s.allocated_array);\n}  \n</code></pre>\n"}], "owner": {"reputation": 173, "user_id": 4567996, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ea314351b3c3da727dd05be7cadbde71?s=128&d=identicon&r=PG&f=1", "display_name": "Goldboa", "link": "https://stackoverflow.com/users/4567996/goldboa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1463049959, "creation_date": 1462973144, "last_edit_date": 1463049959, "question_id": 37164108, "link": "https://stackoverflow.com/questions/37164108/c-destructor-for-same-instance-of-an-object-called-twice", "title": "C+: Destructor for same instance of an object called twice", "body": "<p>so basically I have some c++ code in VS2013 that looks like this</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;malloc.h&gt;\n#include &lt;stdio.h&gt;\n\nclass Test_Class {\npublic:\n    Test_Class() {\n        printf(\"In Test_Class()\\n\");\n        allocated_array = (int*)malloc(sizeof(int) * 64);\n        printf(\"Allocated %p\\n\", allocated_array);\n    }\n\n    ~Test_Class() {\n        printf(\"In ~Test_Class()\\n\");\n        printf(\"Freeing %p\\n\", allocated_array);\n        free(allocated_array);\n        printf(\"Freed %p\\n\", allocated_array);\n    }\nprivate:\n    int* allocated_array;\n};\n\nclass Holder {\npublic:\n    Holder() {\n        printf(\"In Holder()\\n\");\n        m_test_class = Test_Class();\n    }\n\n    ~Holder() {\n        printf(\"In ~Holder()\\n\");\n    }\nprivate:\n    Test_Class m_test_class;\n};\n\nclass Game {\npublic:\n    Game() {\n        printf(\"In Game()\\n\");\n        m_holder = Holder();\n    }\n\n    ~Game() {\n        printf(\"In ~Game()\");\n    }\nprivate:\n    Holder m_holder;\n};\n\nint main()\n{\n    printf(\"In main()\\n\");\n    Game game = Game();\n    return 0;\n}\n</code></pre>\n\n<p>That when ran, gives me this output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZxsUZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZxsUZ.png\" alt=\"http://i.imgur.com/g8vCdIo.png\"></a></p>\n\n<p>What I'm wondering is, why is the destructor of the same Test_Class  object getting called twice before it crashes (due to trying to free the same pointer twice). I went through with the debugger, to make sure it wasn't just a new instance of the class that had been given the same pointer as the other object, and sure enough it was the exact same object. </p>\n\n<p>I understand that since the Test_Class object is a member of Holder, that it would create a Test_Class object, then create another one and destroy the old one (which it seems to do), but this weird behaviour of calling the destructor on the same seems to occur when I make a member of type Holder in the Game class. Obviously there's something I'm missing. </p>\n"}, {"tags": ["android", "c++", "crash", "protocol-buffers"], "answers": [{"tags": [], "owner": {"reputation": 2225, "user_id": 580908, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16becb4d846f0036238eec17ab34c37?s=128&d=identicon&r=PG", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/580908/swapnil"}, "is_accepted": true, "score": 1, "last_activity_date": 1463049103, "last_edit_date": 1495542807, "creation_date": 1463037804, "answer_id": 37179971, "question_id": 37163821, "link": "https://stackoverflow.com/questions/37163821/google-protobuf-crashes-in-android-while-parsing-the-string-data/37179971#37179971", "title": "Google protobuf crashes in Android while parsing the string data", "body": "<p>I resolved above problem by following next steps </p>\n\n<p><strong>Step 1:</strong> Building both JNI source code and Google Protobuf C++ source code using same NDK runtime <strong>stlport_shared</strong> or <strong>gnustl_shared</strong>,we can define it in Application.mk file as</p>\n\n<blockquote>\n  <p>APP_STL := gnustl_shared</p>\n</blockquote>\n\n<p>I was using <code>gnustl-static</code> to build my JNI source code which was causing issue. Issue may come if you are using different runtime while building Google Protobuf source code. You may get more information about android NDK Runtime at <a href=\"http://developer.android.com/ndk/guides/cpp-support.html\" rel=\"nofollow noreferrer\">Android CPP support guide</a></p>\n\n<p><strong>Step 2:</strong> Be sure that your JNI code and Shared library (<code>libprotobuf.so</code>) referring to same version of the Google Protobuf library. It may cause undefined behavior in different android versions.</p>\n\n<p>You can download latest source code from <a href=\"https://github.com/google/protobuf\" rel=\"nofollow noreferrer\">Google Protobuf Git Repo</a></p>\n\n<p>You can follow the building steps at <a href=\"https://android.googlesource.com/platform/external/protobuf/\" rel=\"nofollow noreferrer\">Android Platform external protobuf link</a> or for simplicity can use bellow \"Andoid.mk\" file</p>\n\n<pre><code>LOCAL_PATH := $(call my-dir)\ninclude $(CLEAR_VARS)\nc_includes := $(LOCAL_PATH)\nLOCAL_MODULE := libprotobuf       \nLOCAL_SRC_FILES := \\\n        google/protobuf/arena.cc \\\n        google/protobuf/arenastring.cc \\\n        google/protobuf/extension_set.cc \\    \n        google/protobuf/generated_message_util.cc \\\n        google/protobuf/io/coded_stream.cc \\\n        google/protobuf/io/zero_copy_stream.cc \\\n        google/protobuf/io/zero_copy_stream_impl_lite.cc \\\n        google/protobuf/message_lite.cc \\\n        google/protobuf/repeated_field.cc \\\n        google/protobuf/stubs/atomicops_internals_x86_gcc.cc \\\n        google/protobuf/stubs/atomicops_internals_x86_msvc.cc \\\n        google/protobuf/stubs/bytestream.cc \\\n        google/protobuf/stubs/common.cc \\\n        google/protobuf/stubs/int128.cc \\\n        google/protobuf/stubs/once.cc \\\n        google/protobuf/stubs/status.cc \\\n        google/protobuf/stubs/statusor.cc \\\n        google/protobuf/stubs/stringpiece.cc \\\n        google/protobuf/stubs/stringprintf.cc \\\n        google/protobuf/stubs/structurally_valid.cc \\\n        google/protobuf/stubs/strutil.cc \\\n        google/protobuf/stubs/time.cc \\\n        google/protobuf/wire_format_lite.cc \\\n        google/protobuf/any.cc \\\n        google/protobuf/any.pb.cc \\\n        google/protobuf/api.pb.cc \\\n        google/protobuf/compiler/importer.cc \\\n        google/protobuf/compiler/parser.cc \\\n        google/protobuf/descriptor.cc \\\n        google/protobuf/descriptor.pb.cc \\\n        google/protobuf/descriptor_database.cc \\\n        google/protobuf/duration.pb.cc \\\n        google/protobuf/dynamic_message.cc \\\n        google/protobuf/empty.pb.cc \\\n        google/protobuf/extension_set_heavy.cc \\\n        google/protobuf/field_mask.pb.cc \\\n        google/protobuf/generated_message_reflection.cc \\\n        google/protobuf/io/gzip_stream.cc \\\n        google/protobuf/io/printer.cc \\\n        google/protobuf/io/strtod.cc \\\n        google/protobuf/io/tokenizer.cc \\\n        google/protobuf/io/zero_copy_stream_impl.cc \\\n        google/protobuf/map_field.cc \\\n        google/protobuf/message.cc \\\n        google/protobuf/reflection_ops.cc \\\n        google/protobuf/service.cc \\\n        google/protobuf/source_context.pb.cc \\\n        google/protobuf/struct.pb.cc \\\n        google/protobuf/stubs/mathlimits.cc \\\n        google/protobuf/stubs/substitute.cc \\\n        google/protobuf/text_format.cc \\\n        google/protobuf/timestamp.pb.cc \\\n        google/protobuf/type.pb.cc \\\n        google/protobuf/unknown_field_set.cc \\\n        google/protobuf/util/field_comparator.cc \\\n        google/protobuf/util/field_mask_util.cc \\\n        google/protobuf/util/internal/datapiece.cc \\\n        google/protobuf/util/internal/default_value_objectwriter.cc \\\n        google/protobuf/util/internal/error_listener.cc \\\n        google/protobuf/util/internal/field_mask_utility.cc \\\n        google/protobuf/util/internal/json_escaping.cc \\\n        google/protobuf/util/internal/json_objectwriter.cc \\\n        google/protobuf/util/internal/json_stream_parser.cc \\\n        google/protobuf/util/internal/object_writer.cc \\\n        google/protobuf/util/internal/proto_writer.cc \\\n        google/protobuf/util/internal/protostream_objectsource.cc \\\n        google/protobuf/util/internal/protostream_objectwriter.cc \\\n        google/protobuf/util/internal/type_info.cc \\\n        google/protobuf/util/internal/type_info_test_helper.cc \\\n        google/protobuf/util/internal/utility.cc \\\n        google/protobuf/util/json_util.cc \\\n        google/protobuf/util/message_differencer.cc \\\n        google/protobuf/util/time_util.cc \\\n        google/protobuf/util/type_resolver_util.cc \\\n        google/protobuf/wire_format.cc \\\n        google/protobuf/wrappers.pb.cc \\\n        google/protobuf/compiler/code_generator.cc      \\\n        google/protobuf/compiler/command_line_interface.cc      \\\n        google/protobuf/compiler/cpp/cpp_enum.cc      \\\n        google/protobuf/compiler/cpp/cpp_enum_field.cc      \\\n        google/protobuf/compiler/cpp/cpp_extension.cc      \\\n        google/protobuf/compiler/cpp/cpp_field.cc      \\\n        google/protobuf/compiler/cpp/cpp_file.cc      \\\n        google/protobuf/compiler/cpp/cpp_generator.cc      \\\n        google/protobuf/compiler/cpp/cpp_helpers.cc      \\\n        google/protobuf/compiler/cpp/cpp_map_field.cc      \\\n        google/protobuf/compiler/cpp/cpp_message.cc      \\\n        google/protobuf/compiler/cpp/cpp_message_field.cc      \\\n        google/protobuf/compiler/cpp/cpp_primitive_field.cc      \\\n        google/protobuf/compiler/cpp/cpp_service.cc      \\\n        google/protobuf/compiler/cpp/cpp_string_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_doc_comment.cc      \\\n        google/protobuf/compiler/csharp/csharp_enum.cc      \\\n        google/protobuf/compiler/csharp/csharp_enum_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_field_base.cc      \\\n        google/protobuf/compiler/csharp/csharp_generator.cc      \\\n        google/protobuf/compiler/csharp/csharp_helpers.cc      \\\n        google/protobuf/compiler/csharp/csharp_map_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_message.cc      \\\n        google/protobuf/compiler/csharp/csharp_message_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_primitive_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_reflection_class.cc      \\\n        google/protobuf/compiler/csharp    /csharp_repeated_enum_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_repeated_message_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_repeated_primitive_field.cc      \\\n        google/protobuf/compiler/csharp/csharp_source_generator_base.cc      \\\n        google/protobuf/compiler/csharp/csharp_wrapper_field.cc      \\\n        google/protobuf/compiler/java/java_context.cc      \\\n        google/protobuf/compiler/java/java_doc_comment.cc      \\\n        google/protobuf/compiler/java/java_enum.cc      \\\n        google/protobuf/compiler/java/java_enum_field.cc      \\\n        google/protobuf/compiler/java/java_enum_field_lite.cc      \\\n        google/protobuf/compiler/java/java_enum_lite.cc      \\\n        google/protobuf/compiler/java/java_extension.cc      \\\n        google/protobuf/compiler/java/java_field.cc      \\\n        google/protobuf/compiler/java/java_file.cc      \\\n        google/protobuf/compiler/java/java_generator.cc      \\\n        google/protobuf/compiler/java/java_generator_factory.cc      \\\n        google/protobuf/compiler/java/java_helpers.cc      \\\n        google/protobuf/compiler/java/java_lazy_message_field.cc      \\\n        google/protobuf/compiler/java/java_lazy_message_field_lite.cc      \\\n        google/protobuf/compiler/java/java_map_field.cc      \\\n        google/protobuf/compiler/java/java_map_field_lite.cc      \\\n        google/protobuf/compiler/java/java_message.cc      \\\n        google/protobuf/compiler/java/java_message_builder.cc      \\\n        google/protobuf/compiler/java/java_message_builder_lite.cc      \\\n        google/protobuf/compiler/java/java_message_field.cc      \\\n        google/protobuf/compiler/java/java_message_field_lite.cc      \\\n        google/protobuf/compiler/java/java_message_lite.cc      \\\n        google/protobuf/compiler/java/java_name_resolver.cc      \\\n        google/protobuf/compiler/java/java_primitive_field.cc      \\\n        google/protobuf/compiler/java/java_primitive_field_lite.cc      \\\n        google/protobuf/compiler/java/java_service.cc      \\\n        google/protobuf/compiler/java/java_shared_code_generator.cc      \\\n        google/protobuf/compiler/java/java_string_field.cc      \\\n        google/protobuf/compiler/java/java_string_field_lite.cc      \\\n        google/protobuf/compiler/javanano/javanano_enum.cc      \\\n        google/protobuf/compiler/javanano/javanano_enum_field.cc      \\\n        google/protobuf/compiler/javanano/javanano_extension.cc      \\\n        google/protobuf/compiler/javanano/javanano_field.cc      \\\n        google/protobuf/compiler/javanano/javanano_file.cc      \\\n        google/protobuf/compiler/javanano/javanano_generator.cc      \\\n        google/protobuf/compiler/javanano/javanano_helpers.cc      \\\n        google/protobuf/compiler/javanano/javanano_map_field.cc      \\\n        google/protobuf/compiler/javanano/javanano_message.cc      \\\n        google/protobuf/compiler/javanano/javanano_message_field.cc      \\\n        google/protobuf/compiler/javanano/javanano_primitive_field.cc      \\\n        google/protobuf/compiler/js/js_generator.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_enum.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_enum_field.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_extension.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_field.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_file.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_generator.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_helpers.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_map_field.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_message.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_message_field.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_oneof.cc      \\\n        google/protobuf/compiler/objectivec/objectivec_primitive_field.cc      \\\n        google/protobuf/compiler/plugin.cc      \\\n        google/protobuf/compiler/plugin.pb.cc      \\\n        google/protobuf/compiler/python/python_generator.cc      \\\n        google/protobuf/compiler/ruby/ruby_generator.cc      \\\n        google/protobuf/compiler/subprocess.cc      \\\n        google/protobuf/compiler/zip_writer.cc      \\\n\nLOCAL_CFLAGS := -D GOOGLE_PROTOBUF_NO_RTTI=1\nLOCAL_CPPFLAGS := -std=c++11\nLOCAL_C_INCLUDES = $(LOCAL_PATH)/android \nLOCAL_C_INCLUDES += ${ANDROID_NDK}/sources/cxx-stl/gnu-libstdc++/4.8/include\nLOCAL_LDLIBS += -lz\nLOCAL_EXPORT_LDLIBS += -lz\nLOCAL_EXPORT_CFLAGS := $(LOCAL_CFLAGS)\nLOCAL_EXPORT_CPPFLAGS := $(LOCAL_CPPFLAGS)\nLOCAL_EXPORT_C_INCLUDES := $(LOCAL_C_INCLUDES)\ninclude $(BUILD_SHARED_LIBRARY)\n</code></pre>\n\n<p><strong>Step 3 :</strong> You need to add bellow flag to Android.mk</p>\n\n<blockquote>\n  <p>LOCAL_CFLAGS += $(cf_includes) -DGOOGLE_PROTOBUF_NO_RTTI</p>\n</blockquote>\n\n<p>refering to link <a href=\"https://stackoverflow.com/questions/10366389/building-protocol-buffers-with-standalone-ndk-toolchain\">Android NDK Standalone toolchain</a></p>\n\n<p>Using above steps may resolve this problem.</p>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1109, "favorite_count": 1, "accepted_answer_id": 37179971, "answer_count": 1, "score": 1, "last_activity_date": 1463049103, "creation_date": 1462972496, "last_edit_date": 1495541348, "question_id": 37163821, "link": "https://stackoverflow.com/questions/37163821/google-protobuf-crashes-in-android-while-parsing-the-string-data", "title": "Google protobuf crashes in Android while parsing the string data", "body": "<p>The protobuf version is 3.0.0. In some device (say Android 6), this issue happens always; While in some devices (say Android 5.x), this issue happens when the app is put into the background mode.</p>\n\n<p>I am calling following method:</p>\n\n<pre><code>bool ParseFromString(const string&amp; data);\n</code></pre>\n\n<p>Which probably internally calls <code>bool ParseFromArray(const void* data, int size)</code>. Stacktrace:</p>\n\n<pre><code>Build fingerprint: 'lge/b2lds_global_com/b2lds:5.0.2/LRX22G/152532131cf4c:user/release-keys'\n Revision: '1.0'\n ABI: 'arm'\n pid: 9946, tid: 9970, name: ahlaad.saarathy  &gt;&gt;&gt; com.org.aahlaad.saarathy &lt;&lt;&lt; \n signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0xdeadbaad\n Abort message: 'invalid address or address of corrupt block 0xa19fca5c passed to dlfree'\n     r0 ffffffff  r1 deadbaad  r2 73797300  r3 2e6d6f63\n     r4 b6f2bfd8  r5 a19fca5c  r6 a19469e4  r7 b6f310fc\n     r8 a19fca64  r9 a1c417b0  sl 00000000  fp a1946a64\n     ip 00000000  sp a19469a8  lr b6efe031  pc b6efe034  cpsr 800f0030\n backtrace:\n     #00 pc 00027034  /system/lib/libc.so (__bionic_heap_usage_error+35)\n     #01 pc 00029853  /system/lib/libc.so (dlfree+1354)\n     #02 pc 0000f0e7  /system/lib/libc.so (free+10)\n     #03 pc 001bc24d  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libprotobuf.so\n     #04 pc 001bc4d7  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libprotobuf.so\n===&gt; #05 pc 000dde37  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libprotobuf.so (google::protobuf::internal::WireFormatLite::ReadBytes(google::protobuf::io::CodedInputStream*, std::string*)+50)  \n     #06 pc 00060944  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libsaarathyclient.so (Saarathy::Messaging::Convey::MergePartialFromCodedStream(google::protobuf::io::CodedInputStream*)+480)\n     #07 pc 000d7bdd  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libprotobuf.so (google::protobuf::MessageLite::ParseFromString(std::string const&amp;)+48)\n     #08 pc 00022d84  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libsaarathyclient.so (Connection::CloudSSL::DecodeProtoBuffer(unsigned int, std::string const&amp;)+580)\n     #09 pc 00024f0c  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libsaarathyclient.so (Connection::CloudSSL::Receive()+308)\n     #10 pc 0002af68  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libsaarathyclient.so (Util::Synchronized_&lt;Connection::CloudSSL&gt;::Start()::{lambda()#1}::operator()() const+72)\n     #11 pc 00091207  /data/app/com.org.aahlaad.saarathy-1/lib/arm/libgnustl_shared.so (execute_native_thread_routine+14)\n     #12 pc 00012f57  /system/lib/libc.so (__pthread_start(void*)+30)\n     #13 pc 00011017  /system/lib/libc.so (__start_thread+6)\n</code></pre>\n\n<p>Apparently as shown with arrow, it crashes at <code>google::protobuf::internal::WireFormatLite::ReadBytes(...)</code>. This problem has been discussed in <a href=\"https://groups.google.com/forum/#!msg/protobuf/ykFvjKaXNCo/0q-F1566ZQYJ\" rel=\"nofollow noreferrer\">this thread</a>, where the user fixed it by upgrading VS2005 to VS2008. However we are running this in Android.</p>\n\n<p>I have also referred below posts to no avail:  </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/12420850/android-application-crashes-because-of-protobuf\">Android application crashes because of protobuf</a></li>\n<li><a href=\"https://stackoverflow.com/questions/7608318/crash-when-parsing-protobuf-message-containing-a-string-using-c-and-android-nd\">Crash when parsing protobuf message containing a string using C++ and Android NDK</a></li>\n<li><a href=\"https://stackoverflow.com/questions/24455770/zeromq-with-protobuf-segmentation-fault-while-parsing-in-c\">zeromq with protobuf segmentation fault while parsing in c++</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13000290/generated-protobuf-code-crashes-application\">Generated Protobuf code crashes application</a></li>\n</ul>\n\n<p>Any detailed help is appreciated as I am novice in building protobuf library with Android.</p>\n"}, {"tags": ["c++", "gcc", "dependencies", "gmp"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1462977628, "post_id": 37163525, "comment_id": 61867257, "body": "It would be simpler if you replaced &quot;a machine&quot;, &quot;a version&quot;, etc by actual information... No, the numbers in libsmurf.X.Y.Z are not supposed to have any relation to the package version. You should check config.log. The error message is the same if compilation fails for whatever reason or if the version is wrong."}], "answers": [{"comments": [{"owner": {"reputation": 3500, "user_id": 1403020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qkRan.jpg?s=128&g=1", "display_name": "jam", "link": "https://stackoverflow.com/users/1403020/jam"}, "edited": false, "score": 0, "creation_date": 1462975273, "post_id": 37164792, "comment_id": 61865434, "body": "I can&#39;t run download_prerequisites on this machine because it&#39;s not networked. I have looked at the Installing GCC page, it says <code>For RPM-based systems, including Fedora and SUSE, you should install gmp-devel, mpfr-devel and libmpc-devel (or mpc-devel on SUSE) packages. The packages will install the libraries and headers in standard system directories so they can be found automatically when building GCC</code>, which I would think applies to my situation and thus I wouldn&#39;t need the &quot;difficult way&quot;. Only it&#39;s apparently not picking up the gmp version correctly.."}], "tags": [], "owner": {"reputation": 86, "user_id": 6320439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/353676250be1cf26d226904c75e1c59b?s=128&d=identicon&r=PG&f=1", "display_name": "user6320439", "link": "https://stackoverflow.com/users/6320439/user6320439"}, "is_accepted": false, "score": 1, "last_activity_date": 1462974823, "creation_date": 1462974823, "answer_id": 37164792, "question_id": 37163525, "link": "https://stackoverflow.com/questions/37163525/gcc-upgrade-gmp-version-causing-issues/37164792#37164792", "title": "GCC upgrade - GMP version causing issues", "body": "<p>Please read <a href=\"https://gcc.gnu.org/wiki/InstallingGCC\" rel=\"nofollow\">Installing GCC</a>:</p>\n\n<blockquote>\n  <p>The difficult way, which is not recommended, is to download the sources for GMP, MPFR and MPC, then configure and install each of them in non-standard locations, then configure GCC with --with-gmp=/some/silly/path/gmp --with-mpfr=/some/silly/path/mpfr --with-mpc=/some/silly/path/mpc, then be forced to set LD_LIBRARY_PATH=/some/silly/path/gmp:/some/silly/path/mpfr:/some/silly/path/mpc/lib in your environment forever. This is silly and causes major problems for anyone who doesn't understand how dynamic linkers find libraries at runtime. Do not do this. If building GCC fails when using any of the --with-gmp or --with-mpfr or --with-mpc options then you probably shouldn't be using them. </p>\n</blockquote>\n\n<p>Just run <code>./contrib/download_prerequisites</code> and save yourself a lot of time and pain.</p>\n"}, {"tags": [], "owner": {"reputation": 3500, "user_id": 1403020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qkRan.jpg?s=128&g=1", "display_name": "jam", "link": "https://stackoverflow.com/users/1403020/jam"}, "is_accepted": true, "score": 0, "last_activity_date": 1462977719, "creation_date": 1462977719, "answer_id": 37166013, "question_id": 37163525, "link": "https://stackoverflow.com/questions/37163525/gcc-upgrade-gmp-version-causing-issues/37166013#37166013", "title": "GCC upgrade - GMP version causing issues", "body": "<p>Turns out that \"Building GCC requires GMP 4.2+\" is insufficiently detailed. Digging into configure, it's actually checking:</p>\n\n<pre><code>  #if GCC_GMP_VERSION &lt; GCC_GMP_VERSION_NUM(4,2,3)\n  choke me\n  #endif\n</code></pre>\n\n<p>i.e. GMP 4.2 <strong>.3</strong> or greater, so my 4.2.1 wasn't cutting it.</p>\n"}], "owner": {"reputation": 3500, "user_id": 1403020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qkRan.jpg?s=128&g=1", "display_name": "jam", "link": "https://stackoverflow.com/users/1403020/jam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 0, "accepted_answer_id": 37166013, "answer_count": 2, "score": 0, "last_activity_date": 1462977719, "creation_date": 1462971718, "question_id": 37163525, "link": "https://stackoverflow.com/questions/37163525/gcc-upgrade-gmp-version-causing-issues", "title": "GCC upgrade - GMP version causing issues", "body": "<p>I'm trying to update GCC on a particular linux machine I have, to a version for which there is no package available. </p>\n\n<p>I run the configure script and it complains about the version of GMP:</p>\n\n<pre><code># ../gcc/configure\nchecking build system type... i686-pc-linux-gnu\n[snip]\nchecking for the correct version of gmp.h... no\nconfigure: error: Building GCC requires GMP 4.2+, MPFR 2.4.0+ and MPC 0.8.0+.\nTry the --with-gmp, --with-mpfr and/or --with-mpc options to specify\ntheir locations.  Source code for these libraries can be found at\ntheir respective hosting sites as well as at\nftp://gcc.gnu.org/pub/gcc/infrastructure/.  See also\nhttp://gcc.gnu.org/install/prerequisites.html for additional info.  If\nyou obtained GMP, MPFR and/or MPC from a vendor distribution package,\nmake sure that you have installed both the libraries and the header\nfiles.  They may be located in separate packages.\n</code></pre>\n\n<p>However, when I check gmp.h it shows:</p>\n\n<pre><code>/* Major version number is the value of __GNU_MP__ too, above and in mp.h. */\n#define __GNU_MP_VERSION 4\n#define __GNU_MP_VERSION_MINOR 2\n#define __GNU_MP_VERSION_PATCHLEVEL 1\n</code></pre>\n\n<p>and RPM reports the following:</p>\n\n<pre><code># rpm -q --qf \"%{VERSION}\\n\" gmp\n4.2.1\n# rpm -q --qf \"%{VERSION}\\n\" gmp-devel\n4.2.1\n</code></pre>\n\n<p>so both library and headers seem to be of a correct version to me  (confusingly, the numbering of the .so file for libgmp seems to have exactly nothing to do with the version number... that is showing as </p>\n\n<pre><code>libgmp.so -&gt; libgmp.so.3.4.1\n</code></pre>\n\n<p>Does anyone know why this might be failing? Those are the only two gmp packages installed on this machine and they are in standard /usr/include and /usr/lib locations, so they should be on the search path already.</p>\n"}, {"tags": ["c++", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1462972223, "post_id": 37163594, "comment_id": 61862802, "body": "I know, <code>OBJS = $(SRCS:.cpp=.o)</code> rule defines <code>OBJS</code> from <code>SRCS</code> by replacing the suffixes., but my questions is: why would anyone add both <code>SRCS</code> and <code>OBJS</code> if any of them is enough?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1462972309, "post_id": 37163594, "comment_id": 61862882, "body": "@Felics: Well you wouldn&#39;t explicitly list everything twice I hope.  One of them is used to implicitly define the other.  It doesn&#39;t matter which direction you go: SRCS-&gt;OBJS or OBJS-&gt;SRCS."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1462972504, "post_id": 37163594, "comment_id": 61863026, "body": "How does OBJS-&gt;SRCS works? For example if I have in the same folder src1.cpp and src1.cc and src1.c and I list OBJS=src1.o which of the files is compiled? Are the conversions rules for SRCS-&gt;OBJS and OBJS-&gt;SRCS listed anywhere?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1462972647, "post_id": 37163594, "comment_id": 61863142, "body": "@Felics: If you have <code>src1.cpp</code> and <code>src1.cc</code> and <code>src1.c</code> in the same folder you are Doing It Wrong and simply need to stop doing that.  The rule for SRCS-&gt;OBJS is listed right in your question and in my answer.  For the other direction, it&#39;s built in to Make."}, {"owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 0, "creation_date": 1462972829, "post_id": 37163594, "comment_id": 61863311, "body": "I know the rules are built into Make, otherwise it won&#39;t work. Are they documented anywhere? I hope there is another way of finding the rules than reading Make source code."}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "edited": false, "score": 2, "creation_date": 1462972863, "post_id": 37163594, "comment_id": 61863342, "body": "For GNU Make the catalog of implicit rules is here: <a href=\"https://www.gnu.org/software/make/manual/html_node/Catalogue-of-Rules.html#Catalogue-of-Rules\" rel=\"nofollow noreferrer\">gnu.org/software/make/manual/html_node/&hellip;</a>"}], "tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": true, "score": 2, "last_activity_date": 1462971903, "creation_date": 1462971903, "answer_id": 37163594, "question_id": 37163481, "link": "https://stackoverflow.com/questions/37163481/listing-cpp-or-o-in-makefile/37163594#37163594", "title": "listing .cpp or .o in makefile", "body": "<p>If you define <code>SRCS</code>, then the <code>OBJS = $(SRCS:.cpp=.o)</code> rule defines <code>OBJS</code> from it by replacing the suffixes.</p>\n\n<p>If you define <code>OBJS</code>, then Make knows that a <code>.o</code> file may be created by compiling a <code>.cpp</code> file.</p>\n\n<p>Either way is OK.  It'd be nice to consolidate and use one style in a given project.</p>\n"}], "owner": {"reputation": 18468, "user_id": 336578, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/02875c01303f56c0c9c72dfcd49aac05?s=128&d=identicon&r=PG", "display_name": "Mircea Ispas", "link": "https://stackoverflow.com/users/336578/mircea-ispas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 37163594, "answer_count": 1, "score": 0, "last_activity_date": 1462971903, "creation_date": 1462971614, "question_id": 37163481, "link": "https://stackoverflow.com/questions/37163481/listing-cpp-or-o-in-makefile", "title": "listing .cpp or .o in makefile", "body": "<p>I see in my current code base 2 patterns in makefiles:</p>\n\n<ol>\n<li>list all cpp files</li>\n<li>list all cpp files, but with the extension changed into <code>.o</code></li>\n</ol>\n\n<p>Example:</p>\n\n<p>ex1.mk</p>\n\n<pre><code>...\nSRCS=src1.cpp src2.cpp ...\n...\n</code></pre>\n\n<p>ex2.mk</p>\n\n<pre><code>...\nOBJS=src1.o src2.o ...\n...\n</code></pre>\n\n<p>From my novice understanding on makefiles the 2 approaches seem to be interchangeable and any of them sufficient. Looking on tutorials about makefiles I can see both of them in the same file, sometimes like:</p>\n\n<pre><code>OBJS = $(SRCS:.cpp=.o)\n</code></pre>\n\n<p>What is the difference between <code>SRCS</code> and <code>OBJS</code>? Do I need to define both <code>SRCS</code> and <code>OBJS</code>? If yes, why does it work by defining only <code>SRCS</code> or <code>OBJS</code>? If no, how do I choose between defining <code>SRCS</code> and <code>OBJS</code>?</p>\n"}, {"tags": ["c++", "function", "optimization", "compilation", "inline"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1462972959, "post_id": 37163466, "comment_id": 61863422, "body": "There is no &quot;corresponding cpp file&quot; - the function definition can be in any source file, or in any object file or library that&#39;s going to be linked to the program later. In other words, the case is not given at all."}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1462973968, "post_id": 37163466, "comment_id": 61864216, "body": "@molbdnilo I see, sorry, I was wrong to say &quot;corresponding cpp file&quot;.  I&#39;m still wondering how the compiler can inline functions as it sees fit without having the inline keyword.  For example MSDN says:  &quot;/Ob2. The default value. Allows expansion of functions marked as inline, __inline, or __forceinline, and any other function that the compiler chooses. &quot;  This is at compiling stage I&#39;m guessing, not at linker stage."}], "answers": [{"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1462973699, "post_id": 37163630, "comment_id": 61863993, "body": "I see.  The default optimisation for Release mode in Visual studio is documented as: &quot;/Ob2. The default value. Allows expansion of functions marked as inline, __inline, or __forceinline, and any other function that the compiler chooses. &quot;  So it doesn&#39;t do its own inlining?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1462974766, "post_id": 37163630, "comment_id": 61864964, "body": "@TitoneMaurice, I am not familiar with MSVC toolchain, sorry."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1462974738, "last_edit_date": 1462974738, "creation_date": 1462971992, "answer_id": 37163630, "question_id": 37163466, "link": "https://stackoverflow.com/questions/37163466/why-must-an-inline-function-be-defined-in-a-header-if-the-compiler-can-just-in/37163630#37163630", "title": "Why must an inline function be &quot;defined&quot; in a header if the compiler can just inline functions on its own accord", "body": "<p>No, compilers traditionally can't do this. In classic model, compiler 'sees' only one cpp file at a time, and can't go to any other cpp files. Out of this cpp file compiler so-called object file in platofirm native format, which is than linked using effectively linker from 1970s, which is as dumb as a hammer.</p>\n\n<p>This model is slowly evolving. With more and more effective link-time optimizations (LTO) linkers become aware of what cpp code is, and can perform their own inlining. However, even with link-time optimization model compiler-done inlining and optimization are still way more efficient than link-time - a lot of important context is lost when cpp code is converted to intermediate format suitable for linking.</p>\n"}, {"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1462974278, "post_id": 37164255, "comment_id": 61864507, "body": "Thanks. Quoting from the answer from the second link you gave: &quot;The inline keyword has approximately nothing to do with inlining. It&#39;s about whether multiple identical definitions of the function are permitted in different TUs.&quot;"}], "tags": [], "owner": {"reputation": 141, "user_id": 5418044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/25PGn.png?s=128&g=1", "display_name": "Aaron Baumbach", "link": "https://stackoverflow.com/users/5418044/aaron-baumbach"}, "is_accepted": false, "score": 2, "last_activity_date": 1462973533, "last_edit_date": 1495540373, "creation_date": 1462973533, "answer_id": 37164255, "question_id": 37163466, "link": "https://stackoverflow.com/questions/37163466/why-must-an-inline-function-be-defined-in-a-header-if-the-compiler-can-just-in/37164255#37164255", "title": "Why must an inline function be &quot;defined&quot; in a header if the compiler can just inline functions on its own accord", "body": "<p>The inline keyword isn't just about expanding the implementation at the point it was called, but in fact primarily about declaring that multiple definitions of a function may exist in a given translation unit.</p>\n\n<p>This has been covered in other questions before, which can it explain much better than I :)</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9734175/why-are-class-member-functions-inlined\">Why are class member functions inlined?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9192077/is-inline-implicit-in-c-member-functions-defined-in-class-definition\">Is &quot;inline&quot; implicit in C++ member functions defined in class definition</a></p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1462976834, "creation_date": 1462976834, "answer_id": 37165654, "question_id": 37163466, "link": "https://stackoverflow.com/questions/37163466/why-must-an-inline-function-be-defined-in-a-header-if-the-compiler-can-just-in/37165654#37165654", "title": "Why must an inline function be &quot;defined&quot; in a header if the compiler can just inline functions on its own accord", "body": "<p>It's much easier for the compiler to expand a function inline if it has seen the definition of that function. The easiest way to let the compiler see the definition of a function in every translation unit that uses that function is to put the definition in a header and <code>#include</code> that header wherever the function will be used. When you do that you have to mark the definition as <code>inline</code> so that the compiler (actually the linker) won't complain about seeing the definition of that function in more than one translation unit.</p>\n"}, {"comments": [{"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "edited": false, "score": 0, "creation_date": 1462980282, "post_id": 37165718, "comment_id": 61869236, "body": "Excellent answer and very educational.  The way I understand it is that a compiler and linker may go extra steps even if C++ language standard hasn&#39;t been met, in this case providing a FULL definition in a header.  So inlining optimisations can be done, using your language, by &quot;peeking&quot; into compilation units either by the compiler or linker.  It&#39;s funny though, because best practices say declarations in header, and definitions in CPP, but inlining goes against this, and it&#39;s a practice I&#39;ve gotten used to.  Thanks."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1463010376, "post_id": 37165718, "comment_id": 61884664, "body": "inlining at link time requires the full smarts of the compiler.  It&#39;s not something a normal linker can just do.  Link-time optimization exists, but it works by storing the compiler&#39;s intermediate representation into object files, not by reading the final asm and inlining based on that.  (This is the case for gcc and clang at least, and I assume other compilers that can do LTO.)"}], "tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": true, "score": 4, "last_activity_date": 1462976977, "creation_date": 1462976977, "answer_id": 37165718, "question_id": 37163466, "link": "https://stackoverflow.com/questions/37163466/why-must-an-inline-function-be-defined-in-a-header-if-the-compiler-can-just-in/37165718#37165718", "title": "Why must an inline function be &quot;defined&quot; in a header if the compiler can just inline functions on its own accord", "body": "<p>The reason we're forced to provide definitions of inline function in header files (or at least, in some form that is visible to the implementation when inlining a function in a given compilation unit) is requirements of the C++ standard.</p>\n\n<p>However, the standard does not go out of its way to prevent implementations (e.g. the toolchain or parts of it, such as the preprocessor, compiler proper, linker, etc) from doing things a little smarter.</p>\n\n<p>Some particular implementations do things a little smarter, so can actually inline functions even in circumstances where they are not visible to the compiler.   For example, in a basic \"compile all the source files then link\" toolchain, a smart linker may realise that a function is small and only called a few times, and elect to (in effect) inline it, even if the points where inlining occurs were not visible to the compiler (e.g. because the statements that called the functions were in separate compilation units, the function itself is in another compilation unit) so the compiler would not do inlining.</p>\n\n<p>The thing is, the standard does not prevent an implementation from doing that.   It simply states the minimum set of requirements for behaviour of ALL implementations.</p>\n\n<p>Essentially, the requirement that the compiler have visibility of a function to be inlined is the minimum requirement from the standard.   If a program is written in that way (e.g. all functions to be inlined are defined in their header file) then the standard guarantees that it will work with every (standard compliant) implementation.</p>\n\n<p>But what does this mean for our smarter tool-chain?   The smarter tool-chain must produce correct results from a program that is well-formed - including one that defines inlined functions in every compilation unit which uses those functions.    Our toolchain is permitted to do things smarter (e.g. peeking between compilation units) but, if code is written in a way that REQUIRES such smarter behaviour (e.g. that a compiler peek between compilation units) that code may be rejected by another toolchain.</p>\n\n<p>In the end, every C++ implementation (the toolchain, standard library, etc) is required to comply with requirements of the C++ standard.    The reverse is not true - one implementation may do things smarter than the standard requires, but that doesn't generate a requirement that some other implementation do things in a compatible way.</p>\n\n<p>Technically, inlining is not limited to being a function of the compiler.  It may happen in the compiler or the linker.   It may also happen at run time - for example \"Just In Time\" technology can, in effect, restructure executable code after it has been run a few times in order to enhance subsequent performance  [this typically occurs in a virtual machine environment, which permits the benefits of such techniques while avoiding problems associated with self-modifying executables].</p>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 756, "favorite_count": 0, "accepted_answer_id": 37165718, "answer_count": 4, "score": 1, "last_activity_date": 1462976977, "creation_date": 1462971568, "last_edit_date": 1462974533, "question_id": 37163466, "link": "https://stackoverflow.com/questions/37163466/why-must-an-inline-function-be-defined-in-a-header-if-the-compiler-can-just-in", "title": "Why must an inline function be &quot;defined&quot; in a header if the compiler can just inline functions on its own accord", "body": "<p>The reason we have to define inline functions in the header is that each compilation unit where that function is called must have the entire definition in order to replace the call, or substitute it.  My question is why are we forced to put a definition in a header file if the compiler can and does do its own optimisations of inlining, which would require it to dig into the cpp files where the functions are defined anyway.</p>\n\n<p>In other words, the compiler seems to me to have the ability to see the function \"declaration\" in a header file, go to the corresponding cpp file and pull the definition from it and paste it in the appropriate spot in the other cpp.  Given that this is the case, why the insistence of defining the function in the header, implying as if the compiler can't \"see\" into other cpp files.</p>\n\n<p>The MSDN says about Ob2/ optimisation setting: </p>\n\n<blockquote>\n  <p>Ob2/ The default value. Allows expansion of functions marked as inline, __inline, or __forceinline, <strong>and any other function that the compiler chooses</strong> (My emphasis). </p>\n</blockquote>\n"}, {"tags": ["c++", "ios", "uiview", "opengl-es"], "answers": [{"tags": [], "owner": {"reputation": 1175, "user_id": 379594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/880b472aaafb09d09658b1ec05c4fe77?s=128&d=identicon&r=PG", "display_name": "stefos", "link": "https://stackoverflow.com/users/379594/stefos"}, "is_accepted": false, "score": 1, "last_activity_date": 1463150479, "creation_date": 1463150479, "answer_id": 37212951, "question_id": 37163417, "link": "https://stackoverflow.com/questions/37163417/capture-uiview-to-texture-continously/37212951#37212951", "title": "Capture UIView to texture continously", "body": "<p>Take a look at <a href=\"https://developer.apple.com/library/ios/samplecode/RosyWriter/Introduction/Intro.html\" rel=\"nofollow\">RosyWriter</a> sample project form Apple. </p>\n\n<p>It uses <strong>CVOpenGLESTextureCache</strong> to improve performance of rendering camera frames as opengl textures.</p>\n"}], "owner": {"reputation": 510, "user_id": 886002, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2615d234788ed7101a28bd003d08684b?s=128&d=identicon&r=PG", "display_name": "Alexp", "link": "https://stackoverflow.com/users/886002/alexp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463150479, "creation_date": 1462971461, "last_edit_date": 1495540951, "question_id": 37163417, "link": "https://stackoverflow.com/questions/37163417/capture-uiview-to-texture-continously", "title": "Capture UIView to texture continously", "body": "<p>I am looking for a way to create an updating texture from iOS to an OpenGL Context. I have seen <a href=\"https://stackoverflow.com/questions/4118778/render-contents-of-uiview-as-an-opengl-texture\">Render contents of UIView as an OpenGL texture</a> but this is quite slow, as it requires the whole view to be rerendered every time it changes. This means webviews in particular are hit very hard as the whole page needs blitting around. This breaks animations in web views, and makes everything very static. I was wondering if there is a technique using some other APIs in iOS that would enable a link to be created between view to texture (much like video textures do).</p>\n\n<p>This seems to be a fundamental requirement of OS display composition, but it feels like it always happens under the covers and is not exposed to developers. Perhaps I am wrong!</p>\n\n<p>Bonus points for anyone that can tell me if any other OSes support this feature.</p>\n"}, {"tags": ["c++", "c++11", "vector", "lambda"], "comments": [{"owner": {"reputation": 4295, "user_id": 1916893, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/XTlc8.png?s=128&g=1", "display_name": "TobiMcNamobi", "link": "https://stackoverflow.com/users/1916893/tobimcnamobi"}, "edited": false, "score": 0, "creation_date": 1462971514, "post_id": 37163328, "comment_id": 61862203, "body": "Please show us a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a> of your problem. (And remember minimal AND complete)."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1462971615, "post_id": 37163328, "comment_id": 61862300, "body": "Do you have C++14?"}], "answers": [{"comments": [{"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "edited": false, "score": 0, "creation_date": 1463008635, "post_id": 37163522, "comment_id": 61884174, "body": "I really wish the answer using <code>&lt;algorithm&gt;</code> would&#39;ve been checkmarked as &quot;the&quot; answer."}], "tags": [], "owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "is_accepted": false, "score": 14, "last_activity_date": 1607762662, "last_edit_date": 1607762662, "creation_date": 1462971705, "answer_id": 37163522, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c/37163522#37163522", "title": "How to filter object in c++", "body": "<p>Try something like this using <a href=\"http://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy_if</code></a> :</p>\n<pre><code>std::vector&lt;Cell&gt; resultCells;\nstd::copy_if(myCells.begin(), myCells.end(),\n             std::back_inserter(resultCells),\n             [](const Cell&amp; c) { return c.valueX &gt; 5; });\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 3, "last_activity_date": 1462973659, "last_edit_date": 1462973659, "creation_date": 1462971786, "answer_id": 37163551, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c/37163551#37163551", "title": "How to filter object in c++", "body": "<p>Keep it simple:</p>\n\n<pre><code>for (auto&amp; c : myCells)\n    if (c.valueX &gt; 5)\n        resultCells.push_back(c);\n</code></pre>\n\n<hr>\n\n<p>For your specific requirement (<em>\"write a function that gets vector of Cells, operator (gt - greater than, le - less or equal, and so on), name of a variable and an integer, and returns vector of Cells\"</em>), assuming \"get\" means \"take as parameter\":</p>\n\n<pre><code>vector&lt;Cell&gt; filter(vector&lt;Cell&gt; const&amp; cells,\n                    function&lt;bool(int,int)&gt; const&amp; op,\n                    int Cell::* var,\n                    int i) {\n    vector&lt;Cell&gt; results;\n    for (auto&amp; c : cells)\n        if (op(c.*var, i))\n            results.push_back(c);\n    return results;\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>resultCells = filter(myCells, greater&lt;int&gt;(),  &amp;Cell::valueX, 5);\nresultCells = filter(myCells, less&lt;int&gt;(),     &amp;Cell::valueY, 5);\nresultCells = filter(myCells, equal_to&lt;int&gt;(), &amp;Cell::ID,     5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1462972535, "last_edit_date": 1462972535, "creation_date": 1462971819, "answer_id": 37163563, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c/37163563#37163563", "title": "How to filter object in c++", "body": "<p>In C++14:</p>\n\n<pre><code>template&lt;class T, class A, class F&gt;\nstd::vector&lt;T,A&gt; keep_only( std::vector&lt;T,A&gt; input, F&amp;&amp; filter ) {\n  auto it = std::remove_if( begin(input), end(input), [&amp;](T const&amp; t)-&gt;bool {\n    return !filter(t);\n  });\n  input.erase(it, end(input));\n  return input;\n}\n\nauto v2 = keep_only(v1, [](auto&amp;&amp; x){return x.valueX&gt;5;}\n</code></pre>\n\n<p>in C++11 replace <code>auto&amp;&amp;</code> with <code>Cell const&amp;</code>.</p>\n\n<p>This version modifies a copy of the vector it takes.  This means it copies every element, then discards some, and in that discarding moves elements.  This is more optimal in the case where you are already getting the incoming vector via copy, as it can be elided/moved into.  If your objects are expensive to copy and you throw away most of them, this isn't optimal.</p>\n\n<hr>\n\n<p>We can make <code>keep_only</code> not be restricted to input vectors via:</p>\n\n<pre><code>namespace details {\n  template&lt;class C, class F&gt;\n  auto keep_only( C&amp;&amp; input, F&amp;&amp; filter ) {\n    using std::begin; using std::end;\n    using T = std::decay_t&lt;decltype(*begin(input))&gt;;\n\n    std::vector&lt;T&gt; retval;\n    std::copy_if(\n      begin(input), end(input),\n      std::back_inserter(retval),\n      std::forward&lt;F&gt;(filter)\n    );\n    return retval;\n  }\n}\ntemplate&lt;class C, class F&gt;\nauto keep_only( C&amp;&amp; input, F&amp;&amp; filter ) {\n  return details::keep_only(std::forward&lt;C&gt;(input), std::forward&lt;F&gt;(filter));\n}\n</code></pre>\n\n<p>and add initializer list support:</p>\n\n<pre><code>template&lt;class T, class F&gt;\nstd::vector&lt;T&gt; keep_only( std::initializer_list&lt;T&gt; input, F&amp;&amp; filter ) {\n  return details::keep_only(input, std::forward&lt;F&gt;(filter));\n}\n</code></pre>\n\n<p>so you can type <code>keep_only( {1,2,3,4,5,6}, [](int x){return x&gt;1;} )</code></p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b28e717d1b56a9a0\" rel=\"nofollow\">live example</a></p>\n\n<p>This version only copies the ones you tell it to keep.  It also moves the elements you keep on average once during vector resizing.  Regardless of the input, it always returns a vector.  Writing this in C++11 is probably not worth it, because properly deducing <code>T</code> takes a bit of boilerplate outside of the function context.</p>\n\n<p>You can get the best of both worlds by taking the first implementation, and changing the signature to:</p>\n\n<pre><code>template&lt;class T, class A, class F&gt;\nstd::vector&lt;T,A&gt; keep_only( std::vector&lt;T,A&gt;&amp;&amp; input, F&amp;&amp; filter ) {\n</code></pre>\n\n<p>and making the return be <code>return std::move(input);</code>: now, for anything except for a temporary vector, we construct a vector and copy stuff into it.  For a temporary vector, we instead filter the parts we don't want out of it.</p>\n"}, {"tags": [], "owner": {"reputation": 14999, "user_id": 8999, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZD5Uo.jpg?s=128&g=1", "display_name": "Fabio Ceconello", "link": "https://stackoverflow.com/users/8999/fabio-ceconello"}, "is_accepted": false, "score": 1, "last_activity_date": 1462971836, "creation_date": 1462971836, "answer_id": 37163573, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c/37163573#37163573", "title": "How to filter object in c++", "body": "<p>There is more than one way to do this, depending on whether you want to keep the original vector or not. </p>\n\n<p>In your example, one form would be to use <a href=\"http://www.cplusplus.com/reference/algorithm/copy_if/\" rel=\"nofollow\">copy_if</a> to  transfer the elements from myCells to resultCells. This may be expensive if you have a big container and don't need to use myCells afterwards. In that case, it would be better to use <a href=\"http://www.cplusplus.com/reference/algorithm/remove_if/\" rel=\"nofollow\">remove_if</a> on myCells itself. </p>\n\n<p>A third option would be to use <a href=\"http://www.cplusplus.com/reference/algorithm/remove_copy_if/\" rel=\"nofollow\">remove_copy_if</a> to remove from myCells while simultaneously adding to resultCells.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1462974938, "creation_date": 1462974938, "answer_id": 37164850, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c/37164850#37164850", "title": "How to filter object in c++", "body": "<p>Answering the OP's requirement explicitly, here is the required signature:</p>\n\n<p><code>vector&lt;Cells&gt; resultCells = filter(myCells, gt, valueX, 5)</code></p>\n\n<p>And here is how it's achieved:</p>\n\n<pre><code>template&lt;class T, class Pred, class ValueType&gt;\nstd::vector&lt;T&gt; filter(std::vector&lt;T&gt; result, Pred pred, ValueType T::* member, ValueType model)\n{\n    result.erase(std::remove_if(std::begin(result),\n                                std::end(result),\n                                [&amp;] (const auto&amp; elem) {\n                                    !return pred(elem.*member, model);\n                                }),\n                 std::end(result));\n    return result;\n}\n</code></pre>\n\n<p>Full working example (c++14 - c++11 will require a little more plumbing):</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;algorithm&gt;\n\nstruct Cell {\n    int ID;\n    int valueX;\n    int valueY;\n};\n\ntemplate&lt;class T, class Pred, class ValueType&gt;\nstd::vector&lt;T&gt; filter(std::vector&lt;T&gt; result, Pred pred, ValueType T::* member, ValueType model)\n{\n    result.erase(std::remove_if(std::begin(result),\n                                std::end(result),\n                                [&amp;] (const auto&amp; elem) {\n                                    return !pred(elem.*member, model);\n                                }),\n                 std::end(result));\n    return result;\n}\n\nint main()\n{\n    auto myCells = std::vector&lt;Cell&gt; {\n        { 0, 1, 2 },\n        { 1, 2, 2 },\n        { 2, 4, 2 },\n        { 3, 6, 2 }\n    };\n    auto resultCells = filter(myCells, std::greater&lt;&gt;(), &amp;Cell::valueX, 5);\n    std::cout &lt;&lt; resultCells.size() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>expected output:</p>\n\n<pre><code>1\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 6320378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dffdbff1326602c371e9e360105c61b?s=128&d=identicon&r=PG&f=1", "display_name": "user6320378", "link": "https://stackoverflow.com/users/6320378/user6320378"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15396, "favorite_count": 1, "closed_date": 1462991976, "accepted_answer_id": 37163551, "answer_count": 5, "score": 4, "last_activity_date": 1607762662, "creation_date": 1462971256, "question_id": 37163328, "link": "https://stackoverflow.com/questions/37163328/how-to-filter-object-in-c", "closed_reason": "Duplicate", "title": "How to filter object in c++", "body": "<p>Let's say I have a class:</p>\n\n<pre><code>class Cell {\n  int ID;\n  int valueX;\n  int valueY;\n};\n</code></pre>\n\n<p>and in main() I declared vector of Cells:</p>\n\n<pre><code>vector&lt;Cell&gt; myCells;\n</code></pre>\n\n<p>My problem is to write a function that gets vector of Cells, operator (gt - greater than, le - less or equal, and so on), name of a variable and an integer, and returns vector of Cells that meets the requirement?\nFor example:</p>\n\n<pre><code>vector&lt;Cells&gt; resultCells = filter(myCells, gt, valueX, 5)\n</code></pre>\n\n<p>is vector of Cells where each cell has valueX greater than 5.</p>\n\n<p>My first attempts required a lot of ifs and switches and I'm sure it's not proper solution.\nThen I asked a friend for a tip, he told me about things like functors, lambdas, std::function, std::map, std::bind, that can help me to do this and I've read about it but I am unable to use in in practise.</p>\n\n<p>One of examples that I've seen on the Internet is <a href=\"http://www.cprogramming.com/c++11/c++11-lambda-closures.html\" rel=\"nofollow\"><em>this</em></a> one, but it's less complex and hard to reuse (for me).</p>\n"}]