[{"tags": ["c++", "c++17", "structured-bindings"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1518651749, "post_id": 48797973, "comment_id": 84598651, "body": "Thats a fairly recent c++17 feature - structured bindings. Make sure you&#39;re running a c++17 compiler and that its in c++17 mode."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1518651759, "post_id": 48797973, "comment_id": 84598653, "body": "That syntax is supported in C++17. Q1. Does your compiler support the C++17 standard? Q2. Did you use the appropriate compiler settings to instruct your compiler to use the C++17 standard for compiling?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1518651853, "post_id": 48797973, "comment_id": 84598682, "body": "It looks like you&#39;re using VS from the error style. Make sure you&#39;re running at least VS2017 Update 3 (compiler v19.11.25503)"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 8, "creation_date": 1518651853, "post_id": 48797973, "comment_id": 84598683, "body": "&quot;used namespace std instead of std::&quot; - Bad change! The book is trying to show you good habits. <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1518653850, "post_id": 48797973, "comment_id": 84599214, "body": "Yup, the code works with <a href=\"https://wandbox.org/permlink/tOQQZGGxfEyphiyG\" rel=\"nofollow noreferrer\">GCC 7.2</a>."}, {"owner": {"reputation": 5010, "user_id": 3150445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfca2588483eadf6695a120cbcef1f8?s=128&d=identicon&r=PG&f=1", "display_name": "jwdonahue", "link": "https://stackoverflow.com/users/3150445/jwdonahue"}, "edited": false, "score": 0, "creation_date": 1518654159, "post_id": 48797973, "comment_id": 84599292, "body": "You need compiler flag <code>&#47;std:c++17</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1961, "user_id": 7022459, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/646lY.png?s=128&g=1", "display_name": "Apollys supports Monica", "link": "https://stackoverflow.com/users/7022459/apollys-supports-monica"}, "edited": false, "score": 0, "creation_date": 1549407791, "post_id": 53686001, "comment_id": 95889691, "body": "Good to know, I have also been having this error message while compiling code with the c++17 flag."}], "tags": [], "owner": {"reputation": 81656, "user_id": 8446, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8f9c683775bfbe76ed4855a19b73dc81?s=128&d=identicon&r=PG", "display_name": "Roger Lipscombe", "link": "https://stackoverflow.com/users/8446/roger-lipscombe"}, "is_accepted": false, "score": 2, "last_activity_date": 1544296362, "creation_date": 1544296362, "answer_id": 53686001, "question_id": 48797973, "link": "https://stackoverflow.com/questions/48797973/c-error-expected-unqualified-id-before-token-when-using-structured-bindin/53686001#53686001", "title": "C++ error: expected unqualified-id before &#39;[&#39; token when using structured bindings", "body": "<p>To take advantage of C++17 features in GCC, you need to pass <code>-std=c++17</code> on the compiler command line (e.g. by setting <code>CXXFLAGS</code> in your Makefile).</p>\n\n<p><em>However</em>, not all versions of GCC support all of the C++17 standard.</p>\n\n<p>According to <a href=\"https://gcc.gnu.org/projects/cxx-status.html\" rel=\"nofollow noreferrer\">C++ Standards Support in GCC</a>, you need at least <strong>g++ 7</strong> to take advantage of <em>structured bindings</em>, and <strong>g++ 8</strong> to take advantage of <em>structured bindings to accessible members</em> (e.g. private members from friend functions, rather than only public members).</p>\n\n<p>Ubuntu 16.04 has g++ 5.4, Ubuntu 18.04 has g++ 7.3. To install a newer version of g++ on Ubuntu, see <a href=\"https://askubuntu.com/q/1028601/158095\">Install gcc-8 only on Ubuntu 18.04?</a> (which applies to Ubuntu 16.04 as well) on Ask Ubuntu, particularly <a href=\"https://askubuntu.com/a/1087116/158095\">this answer</a>.</p>\n\n<p>I just installed <code>gcc-8</code> and <code>g++-8</code> packages on my Ubuntu 16.04 system, and structured bindings are now working fine.</p>\n"}], "owner": {"reputation": 23, "user_id": 6445309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9059f92a41795faa548fe8cfcc5594f?s=128&d=identicon&r=PG&f=1", "display_name": "antimatter", "link": "https://stackoverflow.com/users/6445309/antimatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2721, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1608326830, "creation_date": 1518651422, "last_edit_date": 1608326830, "question_id": 48797973, "link": "https://stackoverflow.com/questions/48797973/c-error-expected-unqualified-id-before-token-when-using-structured-bindin", "title": "C++ error: expected unqualified-id before &#39;[&#39; token when using structured bindings", "body": "<p>Preamble:<br />\nI know that there are quite some topics with the same or a similar title. Keep reading and you will understand my case.</p>\n<hr />\n<p>New to C++ I'm currently reading a book that quite obviously has a corrupt example excercise.<br />\nMy code</p>\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstruct Point {\n    int x;\n    int y;\n};\n\nint main(int argc, char const* argv[]) {\n\n    Point p1{100, 200};\n\n    auto [a, b] = p1;\n\n    cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;\n    cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;\n\n    auto&amp; [c, d] = p1;\n\n    c += 50;\n    d += 50;\n\n    cout &lt;&lt; &quot;p1.x = &quot; &lt;&lt; p1.x &lt;&lt; endl;\n    cout &lt;&lt; &quot;p1.y = &quot; &lt;&lt; p1.y &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n<p>is almost an exact copy of the book. I only splitted the original one line cout into two lines and used namespace std instead of std::. Other than that the code is exactly like the example in the book.</p>\n<p>Just to be 100% sure I'm not just having a typo, I donwloaded the example file from the books website.<br />\nWe both get the same errors:</p>\n<pre><code>structuredBinding.cpp: In function \u2018int main(int, const char**)\u2019:\nstructuredBinding.cpp:14:7: error: expected unqualified-id before \u2018[\u2019 token\n  auto [a, b] = p1;\n       ^\nstructuredBinding.cpp:16:20: error: \u2018a\u2019 was not declared in this scope\n  cout &lt;&lt; &quot;a = &quot; &lt;&lt; a &lt;&lt; endl;\n                    ^\nstructuredBinding.cpp:17:20: error: \u2018b\u2019 was not declared in this scope\n  cout &lt;&lt; &quot;b = &quot; &lt;&lt; b &lt;&lt; endl;\n                    ^\nstructuredBinding.cpp:19:8: error: expected unqualified-id before \u2018[\u2019 token\n  auto&amp; [c, d] = p1;\n        ^\nstructuredBinding.cpp:19:8: error: expected initializer before \u2018[\u2019 token\nstructuredBinding.cpp:21:2: error: \u2018c\u2019 was not declared in this scope\n  c += 50;\n  ^\nstructuredBinding.cpp:22:2: error: \u2018d\u2019 was not declared in this scope\n  d += 50;\n  ^\n</code></pre>\n<p>The book assumes its example exercise to work, but it doesn't.<br />\nI found some other topics regarding this or similar errors but none of them seem to work for me.</p>\n<p>I also looked up the errata but there is no error registered for that part of the book.</p>\n<p>I'm on Linux (Xubuntu) and I compile with <code>g++ -std=c++17 -o &lt;outputname&gt; &lt;inputname.cpp&gt;</code></p>\n<p>Can someone tell me what is wrong here? I would then report that error to the author.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518651740, "post_id": 48797929, "comment_id": 84598649, "body": "1) One could just step through the code with a debugger, to figure out how any piece of code works. 2) What caveats, or workarounds are you asking about? This code, wouldn&#39;t even compile, since it lacks <code>main</code>, but regardless of that, the function <code>mglBegin</code> just assigns parameter passed in to it, to itself, with no observable side effects from the function-callers side of view. 3) Consider learning from a good book, instead of coding randomly (I am unsure whether you are coding in C, or C++, due to tags, so I can&#39;t recommend specific book list)."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1518651745, "post_id": 48797929, "comment_id": 84598650, "body": "<i>Does this code set &quot;mode 1&quot; equal to the input parameter called mode?</i>  No, it sets the parameter <code>mode</code> to itself."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 1, "creation_date": 1518652083, "post_id": 48797929, "comment_id": 84598731, "body": "Questions should not be tagged both [c] and [c++], unless the question is specifically about a difference between them. They are different incompatible languages, so please just use the tag for the language you&#39;re actually using."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518652599, "post_id": 48797929, "comment_id": 84598859, "body": "How could the compiler magically know that, on <i>the same line</i>, you wanted the same word to mean two different things?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518652622, "post_id": 48797929, "comment_id": 84598868, "body": "@AlgirdasPreid\u017eius: The code does not require <code>main</code> to compile."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518655947, "post_id": 48797929, "comment_id": 84599775, "body": "@LightnessRacesinOrbit Yes, I stand corrected. Probably I just got too used to people asking mostly about executable applications here (opposed to libraries), that I forgot about those (and the question didn&#39;t show any signs of being compiled into library).."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518656189, "post_id": 48797929, "comment_id": 84599864, "body": "@AlgirdasPreid\u017eius: It doesn&#39;t matter whether your target deliverable is an executable or a library. At the compilation phase you do not need to define an entrypoint (indeed, you will only do so for <i>one</i> of your compilation targets!). It is only later, during linking, that this becomes a consideration."}, {"owner": {"reputation": 5362, "user_id": 2430669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2656586be6c90ef0666a391f1114628b?s=128&d=identicon&r=PG", "display_name": "Micha&#235;l Roy", "link": "https://stackoverflow.com/users/2430669/micha%c3%abl-roy"}, "edited": false, "score": 0, "creation_date": 1518657201, "post_id": 48797929, "comment_id": 84600109, "body": "That&#39;s a terrible way to code!!  Use a different name for the parameter.  The parameter name in the definition (in the .c file) does not have to match the parameter name declared in the function declaration in the corresponding .h file."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518659410, "post_id": 48797929, "comment_id": 84600621, "body": "@LightnessRacesinOrbit The thought of adding a note regarding this, had crossed my mind, but I omitted it for brevity. One, typically might think of &quot;compilation&quot; as an act of producing an usable binary (i.e. library, executable, etc.). That&#39;s why I used in my initial comment, even if it is not &quot;technically&quot; correct. Could you suggest, other word, or phrase that conveys the meaning described above, and reads nicely?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518659473, "post_id": 48797929, "comment_id": 84600636, "body": "@AlgirdasPreid\u017eius: I believe you&#39;re referring to the &quot;build&quot; process (&quot;building&quot;)."}, {"owner": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "edited": false, "score": 0, "creation_date": 1519793378, "post_id": 48797929, "comment_id": 85049389, "body": "Am I getting downvoted because people think this is a bad way to write code? I asked this question for educational purposed."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1518651835, "post_id": 48798008, "comment_id": 84598677, "body": "This question is tagged with C, in addition to C++, so it is unclear, with what compiler the OP is compiling the code, and C doesn&#39;t have scope resolution operator."}, {"owner": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "edited": false, "score": 0, "creation_date": 1518651909, "post_id": 48798008, "comment_id": 84598693, "body": "so Sanchit Anand&#39;s answer only works in C++? Is there a way to do this in C?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "edited": false, "score": 1, "creation_date": 1518652029, "post_id": 48798008, "comment_id": 84598719, "body": "@TariqueShams \u2022 Use a different parameter name than the global variable name.  Works both in C and in C++."}, {"owner": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "edited": false, "score": 0, "creation_date": 1518652098, "post_id": 48798008, "comment_id": 84598736, "body": "@Elijay That is the easy fix. I believe I should follow that structure too. Im just curious if there is a cool work around?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "edited": false, "score": 1, "creation_date": 1518652478, "post_id": 48798008, "comment_id": 84598827, "body": "@TariqueShams Nope. You&#39;ll find some C coding standards require you to modify the name of a variable depending on its scope and storage type. For example, that global <code>mode</code> could be <code>gmode</code> and parameter mode is <code>pmode</code>. Others require more decoration such as prefixing the variable with a module identifier, roughly (very roughly) emulating namespaces and preventing name collisions across translation units. Also makes plaintext searching a lot easier."}], "tags": [], "owner": {"reputation": 175, "user_id": 9325713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b644eb25e8365ef79f80f6a9173debc?s=128&d=identicon&r=PG&f=1", "display_name": "Sanchit Anand", "link": "https://stackoverflow.com/users/9325713/sanchit-anand"}, "is_accepted": true, "score": 3, "last_activity_date": 1518651920, "last_edit_date": 1518651920, "creation_date": 1518651741, "answer_id": 48798008, "question_id": 48797929, "link": "https://stackoverflow.com/questions/48797929/variable-and-parameter-names/48798008#48798008", "title": "Variable and parameter names", "body": "<p>The local variable <code>mode</code> defined as an input parameter will always have precedence over the global variable, hence the statement you have written will accomplish nothing.\n[EDIT] Assuming you are using c++, you can use the scope resolution operator to refer to the global variable</p>\n\n<pre><code>::mode = mode;  //mode 1 = input parameter mode\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 3116077, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8e0aab84e97aafddd6784b58aceab7d9?s=128&d=identicon&r=PG&f=1", "display_name": "Aleka", "link": "https://stackoverflow.com/users/3116077/aleka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 48798008, "answer_count": 1, "score": -3, "last_activity_date": 1518652208, "creation_date": 1518651063, "last_edit_date": 1518652208, "question_id": 48797929, "link": "https://stackoverflow.com/questions/48797929/variable-and-parameter-names", "title": "Variable and parameter names", "body": "<pre><code>typedef enum {\nMGL_TRIANGLES,\nMGL_QUADS\n} MGLpoly_mode;\n\nMGLpoly_mode mode; //mode 1\n\nvoid mglBegin(MGLpoly_mode mode)\n{\nmode = mode;  //mode 1 = input parameter mode\n}\n</code></pre>\n\n<p>Does this code set \"mode 1\" equal to the input parameter called mode? If anyone could explain what happens here and other interesting caveats and workarounds that would be great! I'm just curious how this snippet of code works.</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 3561, "user_id": 935330, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/eCMDk.jpg?s=128&g=1", "display_name": "danilo", "link": "https://stackoverflow.com/users/935330/danilo"}, "edited": false, "score": 5, "creation_date": 1518650813, "post_id": 48797864, "comment_id": 84598394, "body": "<code>val - 1</code> doesn&#39;t affect the variable <code>val</code>, but with <code>--val</code> you have a decrement on <code>val</code>"}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 1, "creation_date": 1518650831, "post_id": 48797864, "comment_id": 84598399, "body": "Get familiar with the concept of a &quot;stack frame&quot;."}, {"owner": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1518650923, "post_id": 48797864, "comment_id": 84598425, "body": "This is the type of problem that&#39;s pretty easy to check when you step through it in your debugger."}, {"owner": {"reputation": 93509, "user_id": 4086, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e4a1b4bf6865eddd0edfe8cb90361c84?s=128&d=identicon&r=PG", "display_name": "Ferruccio", "link": "https://stackoverflow.com/users/4086/ferruccio"}, "edited": false, "score": 2, "creation_date": 1518651011, "post_id": 48797864, "comment_id": 84598448, "body": "Using a variable whose value is auto incremented/decremented in the same expression results in undefined behavior."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 7466, "user_id": 2146682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7120fc7548c43237662da906e3c84f43?s=128&d=identicon&r=PG", "display_name": "MrEricSir", "link": "https://stackoverflow.com/users/2146682/mrericsir"}, "edited": false, "score": 1, "creation_date": 1518651964, "post_id": 48797864, "comment_id": 84598703, "body": "@MrEricSir: Not really. The debugger doesn&#39;t tell you when your program has undefined behaviour."}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518653096, "post_id": 48797864, "comment_id": 84599008, "body": "@Lightness Yes the debugger won&#39;t flag UB. But since the UB in this case does behave consistently on OP&#39;s compiler. If OP had stepped through the code with a debugger, OP should see that <code>factorial(1)</code> is evaluated as <code>factorial(0) * 0</code> ... Which is the point MrEricSir was making."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1518653156, "post_id": 48797864, "comment_id": 84599024, "body": "@CraigYoung: <i>&quot;the UB in this case does behave consistently on OP&#39;s compiler&quot;</i> You do not know that until you have tested it on the OP&#39;s compiler infinite times."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1518653186, "post_id": 48797864, "comment_id": 84599031, "body": "@CraigYoung: <i>&quot;Which is the point MrEricSir was making.&quot;</i> Yes I understood the point, which was to foster an incorrect understanding both of this program and of the constructions at play here."}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518660745, "post_id": 48797864, "comment_id": 84600924, "body": "@Lightness I often see 2 extreme misinterpretations of UB, at opposite ends of the spectrum. 1) Too optimistic: &quot;I observed x behaviour in a few simple cases, I can assume UB behaves as x&quot; (<i>obviously not</i>) 2) Too pessimistic: &quot;UB means the compiler might eat your cat&quot; (<i>again, obviously not</i>). The point is, barring actual bugs in the compiler: the compiler may generate machine code that exhibits UB, but the compiler itself does not exhibit UB. Therefore given particular input the compiler will always output the <i>same binaries</i>."}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1518660974, "post_id": 48797864, "comment_id": 84600972, "body": "OP&#39;s compiler evidently decrements <code>val</code> <b><i>before</i></b> performing the multiplication given OP&#39;s source code. Obviously a change to <i>input</i> (such as optimisation settings) may change the compiler&#39;s output. But the simple fact is that this <b><i>most certainly is</i></b> something OP could have debugged to observe <b><i>why</i></b> his program was behaving unexpectedly. (Though obviously that wouldn&#39;t help OP understand that his code would exhibit UB.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1518697551, "post_id": 48797864, "comment_id": 84617195, "body": "@CraigYoung: <i>&quot;Therefore given particular input the compiler will always output the same binaries.&quot;</i> That&#39;s an unfounded assumption, and it&#39;s not extreme to say so. The rest makes sense."}], "answers": [{"tags": [], "owner": {"reputation": 1347, "user_id": 877610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec1dfc28e713560dae7bfad166d5e994?s=128&d=identicon&r=PG", "display_name": "AaronHolland", "link": "https://stackoverflow.com/users/877610/aaronholland"}, "is_accepted": false, "score": 4, "last_activity_date": 1518650797, "creation_date": 1518650797, "answer_id": 48797890, "question_id": 48797864, "link": "https://stackoverflow.com/questions/48797864/need-a-fresh-perspective-on-recursion/48797890#48797890", "title": "Need a fresh perspective on recursion", "body": "<p>Version 2 changes the value of val via the <code>--val</code>, where version 1 only subtracts 1 from val but doesn't update the value of val when doing so.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 0, "creation_date": 1518651069, "post_id": 48797907, "comment_id": 84598473, "body": "I downvoted for the original answer,<code>They only seem identical if you don&#39;t read them - one says val - 1 and the other says --val</code>, as this was quite obvious that it was being asked about the functional difference between the two. With the edit, I have removed my downvote."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518651139, "post_id": 48797907, "comment_id": 84598492, "body": "@Thebluefish: You must be on 56k, with the answer trickling through really slowly like loading a full-screen GIF in the 1990s... ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user820304"}, "edited": false, "score": 0, "creation_date": 1518651208, "post_id": 48797907, "comment_id": 84598515, "body": "It would appear to be so ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518651382, "post_id": 48797907, "comment_id": 84598566, "body": "To reaffirm - the radically different results come because the second program has undefined behaviour. Any further analysis is mathematically impossible."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 1, "creation_date": 1518651418, "post_id": 48797907, "comment_id": 84598578, "body": "Plus one for mentioning UB"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518652173, "post_id": 48797907, "comment_id": 84598749, "body": "<i>If</i> this weren&#39;t UB, and <i>if</i> the compiler chose to evaluate the decrement first then you end up with a string of multiplications ending in 0 (<code>var == 1</code>, <code>--var</code>, <code>return factorial(0) * 0</code>) which will then get passed up to the top level. In an alternate universe somewhere, that&#39;s why the OP observed the result 0. In this universe, though, it&#39;s just because the program has undefined behaviour."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1518655292, "post_id": 48797907, "comment_id": 84599584, "body": "You don&#39;t need to invoke UB to see what the difference is between <code>--var</code> and <code>var - 1</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1518655422, "post_id": 48797907, "comment_id": 84599624, "body": "@immibis: No, you don&#39;t, but the OP is invoking it regardless, in <i>this</i> program that is being asked about."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1518650913, "creation_date": 1518650913, "answer_id": 48797907, "question_id": 48797864, "link": "https://stackoverflow.com/questions/48797864/need-a-fresh-perspective-on-recursion/48797907#48797907", "title": "Need a fresh perspective on recursion", "body": "<p>They only seem identical if you don't read them - one says <code>val - 1</code> and the other says <code>--val</code>.</p>\n\n<ul>\n<li><code>val - 1</code>: Subtraction. Evaluates to the value of <code>val</code>, minus one</li>\n<li><code>--val</code>: Decrement. Reduces <code>val</code> by one, and evaluates to the new value</li>\n</ul>\n\n<p>The latter example has undefined behaviour because you try to read <code>val</code> again on the same line.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518653219, "post_id": 48798141, "comment_id": 84599048, "body": "It is free to fry some fish then atomise it and spread the molecules in an uneven distribution about the Pleiades constellation."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518653301, "post_id": 48798141, "comment_id": 84599071, "body": "@LightnessRacesinOrbit, among other things."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518653406, "post_id": 48798141, "comment_id": 84599094, "body": "Indeed. Seriously, don&#39;t underestimate <a href=\"https://stackoverflow.com/q/48731306/560648\">the bizarre potential that UB has</a>; there are <i>way</i> more than two possible results here."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518653587, "post_id": 48798141, "comment_id": 84599141, "body": "@LightnessRacesinOrbit, no kidding. The crap that optimizers can spring on you is something I am nowhere near familiar with."}, {"owner": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518661331, "post_id": 48798141, "comment_id": 84601035, "body": "@Lightness &quot;<i>It is free to fry some fish then atomise it and spread the molecules in an uneven distribution about the Pleiades constellation.</i>&quot; Utter rubbish. Stop being alarmist. Incredulous claims just reduce credibility. Yes you&#39;re emphasising that you have absolutely no guarantees about what might or might not happen, but that&#39;s not going to make the compiler violate the laws of physics! This blinkered view seems to have made you lose sight of the <b><i>fact</i></b> that OP <i>could have</i> debugged his program to observe what his compiler <i>actually <b>did do</b></i> with his code."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 13760, "user_id": 224704, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c94b60d81fde0361f2daa910a0f9a77?s=128&d=identicon&r=PG", "display_name": "Disillusioned", "link": "https://stackoverflow.com/users/224704/disillusioned"}, "edited": false, "score": 0, "creation_date": 1518697745, "post_id": 48798141, "comment_id": 84617332, "body": "@CraigYoung: It&#39;s not a &quot;blinkered view&quot;, it is a robust and rigourous view that will lead to robust and rigourous code. Lern2abstract"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1518653420, "last_edit_date": 1518653420, "creation_date": 1518652537, "answer_id": 48798141, "question_id": 48797864, "link": "https://stackoverflow.com/questions/48797864/need-a-fresh-perspective-on-recursion/48798141#48798141", "title": "Need a fresh perspective on recursion", "body": "<p>Use of </p>\n\n<pre><code>return factorial(--val) * val;\n</code></pre>\n\n<p>is cause for undefined behavior. Don't use it.</p>\n\n<p>For evaluating the expression, the compiler is free to evaluate <code>factorial(--val)</code> first, then evaluate <code>val</code>, and then perform the multiplication. It is also free to evaluate <code>val</code> first, then evaluate <code>factorial(--val)</code>, and then perform the multiplication.</p>\n\n<p>If the compiler chooses the first strategy, that statement is equivalent to:</p>\n\n<pre><code>--val;\nreturn factorial(val)*val;\n</code></pre>\n\n<p>As you can see, that is incorrect.</p>\n\n<p>If the compiler chooses the second strategy, that statement is equivalent to:</p>\n\n<pre><code>int res = factorial(val-1)*val;\n--val\nreturn res;\n</code></pre>\n\n<p>Had the compiler followed this strategy, you'd have gotten the correct answer.</p>\n\n<hr>\n\n<p>OTOH, the statment</p>\n\n<pre><code>return factorial(val-1)*val;\n</code></pre>\n\n<p>does not suffer from that problem and always returns the correct value.</p>\n"}], "owner": {"reputation": 471, "user_id": 4351661, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/368077cc8818d54c0d3bb30fde57c7a3?s=128&d=identicon&r=PG&f=1", "display_name": "John DeBord", "link": "https://stackoverflow.com/users/4351661/john-debord"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 48797907, "answer_count": 3, "score": 0, "last_activity_date": 1518653420, "creation_date": 1518650651, "question_id": 48797864, "link": "https://stackoverflow.com/questions/48797864/need-a-fresh-perspective-on-recursion", "title": "Need a fresh perspective on recursion", "body": "<p>I just can't wrap my head around this.\n<br>\nWhy do these two functions produce radically different results,\n<br>\nwhen line 4 seems identical?\n<br>\n<br>\n<strong>Version I</strong></p>\n\n<pre><code>int factorial(int val) // input=5; output=120\n{\n    if (val != 0)\n        return factorial(val - 1) * val;\n    return 1;\n}\n</code></pre>\n\n<p><strong>Version II</strong></p>\n\n<pre><code>int factorial(int val) // input=5; output=0\n{\n    if (val != 0)\n        return factorial(--val) * val;\n    return 1;\n}\n</code></pre>\n"}, {"tags": ["c++", "plot", "real-time", "wxwidgets"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 2, "creation_date": 1518649658, "post_id": 48797717, "comment_id": 84598015, "body": "Don&#39;t use eof as a stream condition, ever."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 1, "creation_date": 1518649765, "post_id": 48797717, "comment_id": 84598053, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 3797, "user_id": 2874856, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kWxOm.jpg?s=128&g=1", "display_name": "Raindrop7", "link": "https://stackoverflow.com/users/2874856/raindrop7"}, "edited": false, "score": 0, "creation_date": 1518649839, "post_id": 48797717, "comment_id": 84598085, "body": "The file stream you use to open a file close it before using it again on another file."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518650033, "post_id": 48797717, "comment_id": 84598160, "body": "<code>while(!infile.eof()){ infile &gt;&gt; i; }</code> Who taught you to do this? Shoot them in the face."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518650081, "post_id": 48797717, "comment_id": 84598178, "body": "<i>(Disclaimer: Please do not shoot anybody on any part of their anatomy. The above comment is not a serious recommendation to cause bodily harm, violate weapons laws, or cause any damage to any person or property. Cheddar is better than brie.)</i>"}, {"owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518650335, "post_id": 48797717, "comment_id": 84598243, "body": "@LightnessRacesinOrbit I guess college profs are not the best example to follow.."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518650401, "post_id": 48797717, "comment_id": 84598268, "body": "You could monitor the length of the file and only read it if the length increases.  Another idea is to use an OS API that allows you to read the file without locking it."}, {"owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "edited": false, "score": 0, "creation_date": 1518650484, "post_id": 48797717, "comment_id": 84598304, "body": "Thanks guys I changed it now to the proper way mentioned on the possible duplicate question mentioned by @TheDude. However, it is still giving me a problem freezing my app. It seems to be able to read ONLY if I put a wxMessageBox right before opening the file to inform the user that a new file will be open. However, if I remove that or try to replace it with a pause of any kind it goes back to freezing the app.."}, {"owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518650550, "post_id": 48797717, "comment_id": 84598318, "body": "@ThomasMatthews I will look into that right away thanks for the idea, cuz honestly it is not working."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518650605, "post_id": 48797717, "comment_id": 84598338, "body": "Concurrent file access is a messy business. Avoid it. Since it reads like you control both the writer and the reader, consider having the writer send a message to the reader when the file is complete and consumable."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518650745, "post_id": 48797717, "comment_id": 84598372, "body": "@Galvar: Sadly they&#39;re not."}], "owner": {"reputation": 57, "user_id": 8050628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fde08ecf785806d2a4d8f0a13e30263?s=128&d=identicon&r=PG&f=1", "display_name": "Galvar", "link": "https://stackoverflow.com/users/8050628/galvar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 75, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518651112, "creation_date": 1518649593, "last_edit_date": 1518651112, "question_id": 48797717, "link": "https://stackoverflow.com/questions/48797717/how-to-read-files-as-you-generate-them-in-c", "title": "How to read files as you generate them in C++?", "body": "<p>Hi everyone sorry for the title of the question, I know there are a lot of questions regarding reading files in C++ but I wanted to check with you if it has a different approach if the files that I am reading are being generated at run-time.</p>\n\n<p>So far I can read files no problem as long as the file exists. However, if I were to run the code and the files are being generated, it doesnt matter if I do the checking of the existence of the file, it just freezes my app. I am receiving the files from another process within my application.</p>\n\n<p>Not sure what am I doing wrong so I apologize if the question is too vague. (The loop for reading the next file is in my main process)</p>\n\n<pre><code>std::ifstream infile;\n\nwhile(1){\n    infile.open(createFile(test, fileIndex), std::ios::in);\n    if(infile.good())\n        break;\n}\n\nif (infile.is_open()){\n\n    int i = 0;\n    while(infile &gt;&gt; i){\n        //Here I am actually plotting i in a wxWidgets App\n        //Using mpFXYVectors\n    }\n\n    Mathplot-&gt;SetData(AVG_X, AVG_Y);\n    Mathplot-&gt;AddLayer(AVG);\n    Mathplot-&gt;UpdateAll();\n    Mathplot-&gt;Fit();\n    infile.close();\n\n}else{\n   //Inform the user something went wrong\n}\n</code></pre>\n\n<p>The loop is in another class and it is a simple</p>\n\n<pre><code> while(1){\n\n    readProcess-&gt;keepItGoing(fileIndex);\n    fileIndex++;\n    if(stop==1)\n       break;\n }\n</code></pre>\n\n<p>Again my apologies if it is a foolish question but I have been stuck for a while now in a reading task that it is supposed to be simple. </p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518648620, "post_id": 48797496, "comment_id": 84597604, "body": "Can you post the actual error message? Also, your code is not complete. As it is, this question has no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518648808, "post_id": 48797496, "comment_id": 84597677, "body": "@Justin That is the exact error message I am getting. &quot;Invalid operands to binary expression (&#39;Person&#39; and &#39;Person&#39;).&quot; Its not all of my code but the main method will not effect this result."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "edited": false, "score": 0, "creation_date": 1518648883, "post_id": 48797559, "comment_id": 84597716, "body": "Yes! This worked! Can you explain to me what the difference is between -&gt; and . pointers? I am coming from Java and when I transferred had to learn C++. I cannot understand when to use which."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "edited": false, "score": 2, "creation_date": 1518648998, "post_id": 48797559, "comment_id": 84597758, "body": "@Fall0ut Normally you use <code>.</code> when the left side is not a pointer and <code>-&gt;</code> when the left side is a pointer."}, {"owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518649054, "post_id": 48797559, "comment_id": 84597776, "body": "@HolyBlackCat okay thank you. Much appreciation everyone!"}, {"owner": {"reputation": 113, "user_id": 7869944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1244aac4cdc6dce09963b9bd82aef182?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Neal", "link": "https://stackoverflow.com/users/7869944/ian-neal"}, "edited": false, "score": 1, "creation_date": 1518649087, "post_id": 48797559, "comment_id": 84597788, "body": "Yes: To access a member of an object, you use &#39;.&#39; like pivot.age. &quot;pivot&quot; is not a pointer, since pivot is type &quot;Person&quot;. However, if you were to define &quot;Person *ptr&quot;, ptr would be a pointer. You can access pointers by 1) dereferencing them (example: pivot = *ptr) then 2) accessing their members (pivot.age). &#39;-&gt;&#39; is a shorthand for this (ptr-&gt;age)."}, {"owner": {"reputation": 113, "user_id": 7869944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1244aac4cdc6dce09963b9bd82aef182?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Neal", "link": "https://stackoverflow.com/users/7869944/ian-neal"}, "edited": false, "score": 1, "creation_date": 1518649109, "post_id": 48797559, "comment_id": 84597796, "body": "Also check out <a href=\"https://stackoverflow.com/questions/1238613/what-is-the-difference-between-the-dot-operator-and-in-c\" title=\"what is the difference between the dot operator and in c\">stackoverflow.com/questions/1238613/&hellip;</a>"}, {"owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "edited": false, "score": 0, "creation_date": 1518650624, "post_id": 48797559, "comment_id": 84598341, "body": "thanks everyone. One more question. I need setter/getter for age since it is private. This is not required and I did get my program to work, but I know it is better practice, and as a student I want to do the best I can. I would obviously just do Person.setAge(foo) &lt;= pivot.setAge(foo). What would be in place of foo in order to get it to work?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1518651048, "post_id": 48797559, "comment_id": 84598464, "body": "A side comment: A good setter does more than just set a value. It provides some value-added behaviour like protecting your object from some fool trying to set a bad value. If you have a setter that does no checking and blindly sets, all it is really good for is a place to hang a breakpoint when debugging. If you have a <code>public</code> getter and a stupid, trusting <code>public</code> setter, your member is just as exposed as if it is <code>public</code>."}, {"owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "edited": false, "score": 0, "creation_date": 1518651206, "post_id": 48797559, "comment_id": 84598513, "body": "my god the C++ community is a hell of a lot more helpful. Usually in Java i ridiculed and here everyone is giving great info. I really appreciate it guys and Im loving this language a lot"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1518651471, "post_id": 48797559, "comment_id": 84598592, "body": "No, we&#39;re often just as bad. You caught us at a good time. Take the advice and look into overloading <code>&lt;=</code>. Good reading on the topic: <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518651600, "post_id": 48797559, "comment_id": 84598620, "body": "Another note: Most sort algorithms are based around <code>&lt;</code> rather than <code>&lt;=</code> because this solves the sorts of problems you can get into (like infinite loops)  when you do have two equal items. Do a web search for &quot;strict weak ordering&quot; for more on this topic."}], "tags": [], "owner": {"reputation": 113, "user_id": 7869944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1244aac4cdc6dce09963b9bd82aef182?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Neal", "link": "https://stackoverflow.com/users/7869944/ian-neal"}, "is_accepted": true, "score": 5, "last_activity_date": 1518648747, "creation_date": 1518648747, "answer_id": 48797559, "question_id": 48797496, "link": "https://stackoverflow.com/questions/48797496/invalid-operands-to-binary-expression-person-and-person/48797559#48797559", "title": "Invalid Operands to Binary Expression Person and Person", "body": "<p>C++ doesn't automatically know how to perform a comparison on class Person.</p>\n\n<p>If you just want to sort by age, try</p>\n\n<pre><code>if(A[i].age &lt;= pivot.age)\n</code></pre>\n\n<p>If you want to learn about defining special operators so that \"Person &lt;= Person\" will work automatically, check out cppreference.com: <a href=\"http://en.cppreference.com/w/cpp/language/operators\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/language/operators</a></p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1518648752, "creation_date": 1518648752, "answer_id": 48797562, "question_id": 48797496, "link": "https://stackoverflow.com/questions/48797496/invalid-operands-to-binary-expression-person-and-person/48797562#48797562", "title": "Invalid Operands to Binary Expression Person and Person", "body": "<p>You said you want to sort by age, so you need to compare their ages:</p>\n\n<pre><code>if (A[i].age &lt;= pivot.age)\n</code></pre>\n\n<p>Your code gets an error because you haven't defined a <code>&lt;=</code> operator for your <code>Person</code> class.</p>\n"}], "owner": {"reputation": 75, "user_id": 7908362, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/vYsfe.jpg?s=128&g=1", "display_name": "Fall0ut", "link": "https://stackoverflow.com/users/7908362/fall0ut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 48797559, "answer_count": 2, "score": 2, "last_activity_date": 1518648911, "creation_date": 1518648429, "question_id": 48797496, "link": "https://stackoverflow.com/questions/48797496/invalid-operands-to-binary-expression-person-and-person", "title": "Invalid Operands to Binary Expression Person and Person", "body": "<p>I know this question has been asked before in similar circumstances, however I am new to C++ and cannot figure out what needs to be done or why it has to be done. Basically I am using a Person object that I created which has the variables name, age, height, and weight. I need to run a Quick Sort on the Person objects that I have created and sort them by age. </p>\n\n<p>Person Class:</p>\n\n<pre><code>class Person{\nprivate:\n    string name;\n    int age, height, weight;\npublic:\nPerson(string name = \"empty\", int age = 0, int height = 0, int weight = 0)\n{\n    this-&gt;name = name;\n    this-&gt;age = age;\n    this-&gt;height = height;\n    this-&gt;weight = weight;\n};\n</code></pre>\n\n<p>Quick Sort Method: </p>\n\n<pre><code>// Quick Sort\nvoid QuickSort(Person *A, int start, int end){\n    if(start &lt; end){\n        int p = partition(A, start, end);\n        QuickSort(A, start, p - 1);\n        QuickSort(A, p + 1, end);\n    }\n}\nint partition(Person *A, int start, int end){\n    Person pivot = A[end];\n    int p = start;\n    for(int i = start; i &lt;= end - 1; i++){\n        if(A[i] &lt;= pivot){\n            Person temp = A[i]; A[i] = A[p]; A[p] = temp;\n            p++;\n        }\n    }\n    Person temp = A[end]; A[end] = A[p]; A[p] = temp;\n    return p;\n}\n</code></pre>\n\n<p>I am getting the error \"Invalid operands to binary expression ('Person' and 'Person) on the line:</p>\n\n<pre><code>if(A[i] &lt;= pivot)\n</code></pre>\n\n<p>Any help would be appreciated because I have tried multiple things and I have looked it up but cannot get other suggestions to work in this situation. I would appreciate an explanation as to why I was getting this error too if possible. Thanks!</p>\n"}, {"tags": ["c++", "image"], "comments": [{"owner": {"reputation": 1569, "user_id": 2328447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0de19095009cfa136440130a79b73b0e?s=128&d=identicon&r=PG", "display_name": "user2328447", "link": "https://stackoverflow.com/users/2328447/user2328447"}, "edited": false, "score": 0, "creation_date": 1518648963, "post_id": 48797490, "comment_id": 84597748, "body": "What kind of image is it? At first glance I suppose it could work for a monochrome image, but for the usual rgb(a) images (or argb, or rgb... there&#39;s a wide variety) simply taking every 2nd char won&#39;t work, since in an rgba image you will get a result of rbrbrbrb, and for a rgb image you will get rbgrbgrbg etc... The step width has to be the width of one color element, not simply one char. Btw, for dealing with images I usually use a specialized lib, like Freeimage. Saves a lot of hassle."}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 0, "creation_date": 1518649234, "post_id": 48797490, "comment_id": 84597846, "body": "I hope your program only calls <code>downgrade</code> once and then exits."}], "answers": [{"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1518708660, "post_id": 48798004, "comment_id": 84624948, "body": "This is not an answer to the question, it&#39;s completely irrelevant - the input image is stated to already be in memory."}], "tags": [], "owner": {"reputation": 100, "user_id": 7863842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aecfd9f39d1563ed855f39219101856?s=128&d=identicon&r=PG&f=1", "display_name": "MEHM-", "link": "https://stackoverflow.com/users/7863842/mehm"}, "is_accepted": false, "score": -1, "last_activity_date": 1518651736, "creation_date": 1518651736, "answer_id": 48798004, "question_id": 48797490, "link": "https://stackoverflow.com/questions/48797490/downgrade-image-by-factor-of2/48798004#48798004", "title": "downgrade image by factor of2", "body": "<p>Most image formats use data compression to reduce the size of the image. If the image data is valid, it should contain a header that has information about the type of image, and it's format. You need to determine the image format from the header or you will corrupt the data.</p>\n\n<p>Here is an example of .tga file format (Partial) You can look it up easily.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dLaIP.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dLaIP.jpg\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 181, "user_id": 8372328, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/414bcc906915eaac6850c52106e4e5fc?s=128&d=identicon&r=PG&f=1", "display_name": "chinmay", "link": "https://stackoverflow.com/users/8372328/chinmay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1518670459, "creation_date": 1518648409, "last_edit_date": 1518670459, "question_id": 48797490, "link": "https://stackoverflow.com/questions/48797490/downgrade-image-by-factor-of2", "title": "downgrade image by factor of2", "body": "<p>I am given a stub to implement. This would downgrade an image by factor of 2.input is the image array of input image. output is the output array of output image. output_height and output_width are height and width of output image. While downgrading each 2X2 block is replaced by a single pixel where pixel value is the maximum value in the2X2 block. The arrays are in row major format. My code is as follows-</p>\n\n<pre><code>int input_index_row=0;\nint output_index_row=0;\nint input_index_column=0;\nint output_index_column=0;\n//unsigned char max(unsigned char* a,int width)\n\nvoid print_input(unsigned char*input,int input_width,int input_height)\n{\n    cout&lt;&lt;\"input-&gt;\"&lt;&lt;endl;\n    for(int i=0;i&lt;input_width*input_height;i++)\n    {\n        if(i%input_width==0)\n        {\n            cout&lt;&lt;\"::::\";\n        }\n        cout&lt;&lt;(int)input[i]&lt;&lt;\"-\";\n    }\n    cout&lt;&lt;endl;\n}\nvoid print_output(unsigned char*output,int output_width,int output_height)\n{\n    cout&lt;&lt;\"output-&gt;\"&lt;&lt;endl;\n    for(int i=0;i&lt;output_height*output_width;i++)\n    {\n        cout&lt;&lt;(int)output[i]&lt;&lt;\"-\";\n    }\n    cout&lt;&lt;endl;\n\n}\n\n\nunsigned char* loc(unsigned char*a,int i,int j,int width)\n{\n    return a+width*i+j;\n}\n\n\nunsigned char max_loc(unsigned char*a,int i,int j,int width)\n{\n    unsigned char* res=0;\n    res=loc(a,i,j,width);\n    unsigned char max= *res;\n    res=loc(a,i,j+1,width);\n    if(max&lt;*res)\n    {\n        max = *res;\n    }\n    res= loc(a,i+1,j,width);\n    if(max&lt;*res)\n    {\n        max = *res;\n    }\n    res= loc(a,i+1,j+1,width);\n    if(max&lt;*res)\n    {\n        max = *res;\n    }\n    cout&lt;&lt;\"max=\"&lt;&lt;(int)max&lt;&lt;endl;\n    return max;\n}\n\n\n\nvoid downgrade(unsigned char *input,unsigned char* output,int output_width,int output_height)\n{\n    /*int output_width=4;\n    int output_height= 4;*/\n\n    int input_width=output_width*2;\n    int input_height=output_height*2;\n\n    /*unsigned char *input= new unsigned char[input_width*input_height];\n    for(unsigned char i=0;i&lt;input_width*input_height;i++) input[i]=i;\n    print_input(input,input_width,input_height);\n\n    unsigned char* output = new unsigned char[output_width*output_height];*/\n    unsigned char* result;\n    while(input_index_row&lt;input_height)\n    {\n        while(input_index_column&lt;input_width)\n        {\n            result = loc(output,output_index_row,output_index_column,output_width);\n            *result = max_loc(input,input_index_row,input_index_column,input_width);\n            input_index_column+=2;\n            output_index_column++;\n        }\n        input_index_row+=2;\n        output_index_row++;\n        input_index_column=0;\n        output_index_column=0;\n    }\n    cout&lt;&lt;endl;\n    print_input(input,input_width,input_height);\n    print_output(output, output_width,output_height);\n}\n</code></pre>\n\n<p>But I am getting corrupted output image\nIt is a jpeg image.I need to convert to greyscale.</p>\n"}, {"tags": ["c++", "atl"], "answers": [{"tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": false, "score": 7, "last_activity_date": 1518683137, "creation_date": 1518683137, "answer_id": 48802805, "question_id": 48797402, "link": "https://stackoverflow.com/questions/48797402/error-c4839-non-standard-use-of-class-atlcw2aex520-as-an-argument-to-a-va/48802805#48802805", "title": "error C4839: non-standard use of class &#39;ATL::CW2AEX&lt;520&gt;&#39; as an argument to a variadic function", "body": "<p>The error message gives you a hint: for a variadic function argument you have to resolve the type ambiguity and cast the helper class to acceptable type:</p>\n\n<pre><code>function(curl, CURLOPT_URL, (LPCSTR) CW2AEX&lt; sizeof( url ) &gt;( url ) );\n</code></pre>\n\n<p>You can also make it simpler at minimal cost (using <a href=\"https://social.msdn.microsoft.com/Forums/en-US/840af012-a402-4659-87ce-2bb029d2f300/cstring-to-cstringa-in-unicode-character-set?forum=vcgeneral\" rel=\"noreferrer\"><code>CStringA</code></a>):</p>\n\n<pre><code>function(curl, CURLOPT_URL, (LPCSTR) CStringA(url));\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8105581, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/baba6a4f055675cf57cfe8e6d9597c62?s=128&d=identicon&r=PG&f=1", "display_name": "Sunfluxgames", "link": "https://stackoverflow.com/users/8105581/sunfluxgames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3006, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1518683137, "creation_date": 1518647967, "question_id": 48797402, "link": "https://stackoverflow.com/questions/48797402/error-c4839-non-standard-use-of-class-atlcw2aex520-as-an-argument-to-a-va", "title": "error C4839: non-standard use of class &#39;ATL::CW2AEX&lt;520&gt;&#39; as an argument to a variadic function", "body": "<p>I'm using Curl in a project and my function is returning a error about CW2AEX..</p>\n\n<pre><code>    const TCHAR* path; \n    const TCHAR* fileName;\n\n    TCHAR url[ MAX_PATH ] = { 0 };\n    _stprintf( url, _T( \"%s%s\" ), path, fileName );\n\n    char errorCode[ CURL_ERROR_SIZE ] = { 0 };\n    function( curl, CURLOPT_ERRORBUFFER,        errorCode );    \n    function( curl, CURLOPT_HEADER,             0 );\n    function( curl, CURLOPT_FOLLOWLOCATION,     1 );\n    function( curl, CURLOPT_NOPROGRESS,         0 );\n    function( curl, CURLOPT_WRITEDATA,          isMemoryDownload ? ( void* )( &amp;memoryFile ) : ( void* )( &amp;diskFile ) );\n    function( curl, CURLOPT_WRITEFUNCTION,      isMemoryDownload ? CNetwork::WriteToMemory : CNetwork::WriteToDisk );\n    function( curl, CURLOPT_PROGRESSDATA,       0 );\n    function( curl, CURLOPT_PROGRESSFUNCTION,   CNetwork::Pursuit );\n    function( curl, CURLOPT_URL,                CW2AEX&lt; sizeof( url ) &gt;( url ) );\n</code></pre>\n\n<p>My guess is that it should load the value explicitly in order to compile it.\nNot quiet sure?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6385115"}, "edited": false, "score": 1, "creation_date": 1518647696, "post_id": 48797310, "comment_id": 84597242, "body": "Read this <a href=\"https://doc.qt.io/qt-5.10/gpl.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5.10/gpl.html</a>"}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 0, "creation_date": 1518648440, "post_id": 48797310, "comment_id": 84597543, "body": "Where did you find the fees required for a GPL QT project?"}], "answers": [{"tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": false, "score": 1, "last_activity_date": 1518688082, "last_edit_date": 1518688082, "creation_date": 1518647944, "answer_id": 48797392, "question_id": 48797310, "link": "https://stackoverflow.com/questions/48797310/publishing-the-qt-project/48797392#48797392", "title": "Publishing the QT Project", "body": "<blockquote>\n  <p>I'm writing a project and want to publish it under the GPL license. In this case, do I have to pay a fee for my QT?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>Qt is <a href=\"https://www1.qt.io/faq/#_Toc_1_2\" rel=\"nofollow noreferrer\">triply-licensed</a> (<a href=\"https://www1.qt.io/licensing-comparison/\" rel=\"nofollow noreferrer\">details</a>) under GPLv2/GPLv3, LGPLv3 (free) and a commercial license (paid); as long as you use the GPL version, you are in the clear even if you distribute your application as a \"derived work\". </p>\n\n<p>That being said, you can always use the LGPLv3 version of Qt for free in an application with pretty much any other license (including commercial ones) <a href=\"https://www.gnu.org/licenses/gpl-faq.en.html#LGPLStaticVsDynamic\" rel=\"nofollow noreferrer\">as long as you link dynamically against it or provide the means to the user to re-link your application with his own version of Qt</a> and your application's license doesn't place requirements incompatible with the LGPLv3 (<a href=\"https://www.gnu.org/licenses/gpl-faq.en.html#AllCompatibility\" rel=\"nofollow noreferrer\">which apparently is the case for GPLv2</a>).</p>\n"}], "owner": {"reputation": 7, "user_id": 9362356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee4de336f00a8daee8d9fd24a0164ce2?s=128&d=identicon&r=PG&f=1", "display_name": "isrgannr", "link": "https://stackoverflow.com/users/9362356/isrgannr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1518688082, "creation_date": 1518647529, "question_id": 48797310, "link": "https://stackoverflow.com/questions/48797310/publishing-the-qt-project", "title": "Publishing the QT Project", "body": "<p>My question is interesting. I'm learning QT Framework with C++ but I wonder a topic. I'm writing a project and want to publish it under the GPL license. In this case, do I have to pay a fee for my QT?</p>\n\n<p>Please answer me. Thanks..</p>\n"}, {"tags": ["c++", "cmd", "server", "printf", "curses"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1518647832, "post_id": 48797269, "comment_id": 84597293, "body": "Think about where <code>showStatus()</code> leaves the cursor.  Since the program is multi-threaded, you need someway to keep the 2 threads from printing to the console at the same and a way to ensure the cursor is where it should be before printing. Also, what&#39;s going to happen when you need to start scrolling the window?"}, {"owner": {"reputation": 549, "user_id": 7520070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJrTs.jpg?s=128&g=1", "display_name": "Omarito", "link": "https://stackoverflow.com/users/7520070/omarito"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1518678657, "post_id": 48797269, "comment_id": 84605871, "body": "I was thinking about that too, I tried setxy(); and bunch of other things they all fail I don&#39;t know how can i keep it at the end of the text which is in the terminal everytime.. My next idea is to use subwindows what do you think about that (like a window for the status and the other for data output)."}, {"owner": {"reputation": 42737, "user_id": 4518274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UPurS.png?s=128&g=1", "display_name": "Thomas Dickey", "link": "https://stackoverflow.com/users/4518274/thomas-dickey"}, "edited": false, "score": 0, "creation_date": 1518687954, "post_id": 48797269, "comment_id": 84610833, "body": "no - curses won&#39;t handle multithreads.  you&#39;ll have to rethink how your program is organized."}], "answers": [{"tags": [], "owner": {"reputation": 549, "user_id": 7520070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJrTs.jpg?s=128&g=1", "display_name": "Omarito", "link": "https://stackoverflow.com/users/7520070/omarito"}, "is_accepted": true, "score": 0, "last_activity_date": 1518696239, "creation_date": 1518696239, "answer_id": 48806838, "question_id": 48797269, "link": "https://stackoverflow.com/questions/48797269/curses-printing-and-updating-bug/48806838#48806838", "title": "Curses printing and updating bug", "body": "<p>Well, it actually works, my idea, was to draw a window for the status and update it whenver we need to, and output logs in the main window and its working like charm.</p>\n"}], "owner": {"reputation": 549, "user_id": 7520070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DJrTs.jpg?s=128&g=1", "display_name": "Omarito", "link": "https://stackoverflow.com/users/7520070/omarito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 48806838, "answer_count": 1, "score": -1, "last_activity_date": 1518696239, "creation_date": 1518647224, "last_edit_date": 1592644375, "question_id": 48797269, "link": "https://stackoverflow.com/questions/48797269/curses-printing-and-updating-bug", "title": "Curses printing and updating bug", "body": "<p>So I'm trying to program a server for my game. I want the server to look beautiful and organised and cross-platfrom too so I decided to you ncurses..</p>\n<p>I'm trying to show at the top a loading the classical <code>{ '-', '\\\\', '|', '/' }</code> thing</p>\n<p>but the problem when I try to print player connected or data it write on the loading bar and its annoying.</p>\n<p>Some picture here gonna explain the situation</p>\n<p>What I want</p>\n<p><a href=\"https://i.stack.imgur.com/J24BT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J24BT.png\" alt=\"What I want\" /></a></p>\n<p>What it's actually doing</p>\n<p><a href=\"https://i.stack.imgur.com/tXk0d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tXk0d.png\" alt=\"What it's actually doing\" /></a></p>\n<p>and this is my code:</p>\n<pre><code>//INCLUDEs\nint clients = 0;\nchar chars[] = { '-', '\\\\', '|', '/' };\nunsigned int i;\nvoid showStatus(char a)\n{\n    attron(COLOR_PAIR(1));\n    mvprintw(2, 101 - 25, &quot;%c\\r&quot;, a);\n    mvprintw(2, 59, &quot;%d\\r&quot;, clients);\n    refresh();\n}\n\n\n    void caller()\n    {   \n        for (i = 0; ; ++i) {\n            showStatus(chars[i % sizeof(chars)]);\n            //fflush(stdout);\n            std::this_thread::sleep_for(std::chrono::milliseconds(1000));\n        }\n    }\n\nint main(int argc, char ** argv){\n//init everything..\nprintw(&quot;-------------- ~~ BS SERVER PRE-ALPHA (v0.0.1) | Clients: (%d/32) | Running (%c) ~~ ---------------\\n\\r&quot;, 0, '|');\n//more code....\nstd::thread thr(caller);\n    while (1) {\n//check for connections...\n}\nthr.join();\n\n    endwin();\n}\n</code></pre>\n<p><strong>PS:</strong> I tried removing the thread repacing it with for, I want the thread so the char can rotate and the server can keep receiving data in the same time.</p>\n<p>Thanks</p>\n"}, {"tags": ["c++", "operator-overloading", "constants", "pass-by-reference"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1518647270, "post_id": 48797258, "comment_id": 84597047, "body": "<code>Fraction Fraction::operator* (const Fraction &amp;rightOperand) const </code>"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518647410, "post_id": 48797258, "comment_id": 84597119, "body": "<code>const</code> <i>after</i> the parameter list?! Wow, that looks odd, don&#39;t think I would ever have figured that by myself XD"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1518647417, "post_id": 48797258, "comment_id": 84597123, "body": "<a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#c168-define-overloaded-operators-in-the-namespace-of-their-operands\" rel=\"nofollow noreferrer\">C.168 from CppCoreGuidelines</a>. You want to overload operators as (possibly <code>friend</code>) free functions most of the time"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518647641, "post_id": 48797258, "comment_id": 84597219, "body": "@Justin AFAICT the linked item says that overloaded operators should be defined in the same namespace as their operands... that can be the case for free or non-free functions though, no?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1518647762, "post_id": 48797258, "comment_id": 84597264, "body": "@Toby You may be right. I guess maybe there isn&#39;t a core guideline on that. At any rate, only a few of the operators should be overloaded as member functions. The idiom is for most binary operators to be overloaded as free functions. It helps in avoiding errors"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518647832, "post_id": 48797258, "comment_id": 84597294, "body": "@Toby: Which C++ book are you using? Function <code>const</code>ness is pretty fundamental."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1518648023, "post_id": 48797258, "comment_id": 84597374, "body": "@Toby one way of thinking about is that the binary operators create a new object, they don&#39;t modify an existing one, so there is no need for them to be member functions."}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518648109, "post_id": 48797258, "comment_id": 84597415, "body": "Thanks @RichardCritten, very helpful info! It could make an answer?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518648111, "post_id": 48797258, "comment_id": 84597416, "body": "@Toby: mmmmm yeah you&#39;re going to need to get a book Toby. I think it&#39;s clear that our free time is not supposed to be used as a substitute for you learning the language you have agreed to work in."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518648132, "post_id": 48797258, "comment_id": 84597426, "body": "Good luck though - sounds like fun!"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518648151, "post_id": 48797258, "comment_id": 84597433, "body": "Would rather this was closed referencing the duplicate."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518648161, "post_id": 48797258, "comment_id": 84597439, "body": "@RichardCritten: While factually accurate on the surface, that logic would suggest that no <code>const</code> member function should exist, which is clearly false. As such I&#39;m not sure that this is the best way to teach it"}, {"owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "edited": false, "score": 0, "creation_date": 1518648182, "post_id": 48797258, "comment_id": 84597448, "body": "OK, , I&#39;ll close so :)"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518648226, "post_id": 48797258, "comment_id": 84597469, "body": "@LightnessRacesinOrbit was only rough guidance and I said &quot;no need&quot; not &quot;must&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518648249, "post_id": 48797258, "comment_id": 84597475, "body": "@RichardCritten: was only a rough debunking :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518648316, "post_id": 48797258, "comment_id": 84597501, "body": "Seriously though granularity doesn&#39;t affect whether your students will heed your words - they will - so it&#39;s important not to misteach. I know you didn&#39;t mean to. You may still agree with your earlier comment even. YMMV :)"}], "owner": {"reputation": 8510, "user_id": 1292918, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/44cdb725bf1a393149554bae7f5f9d46?s=128&d=identicon&r=PG", "display_name": "Toby", "link": "https://stackoverflow.com/users/1292918/toby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1518648188, "answer_count": 0, "score": 1, "last_activity_date": 1518647186, "creation_date": 1518647186, "question_id": 48797258, "link": "https://stackoverflow.com/questions/48797258/how-can-i-overload-operators-with-const-operands-correctly", "closed_reason": "Duplicate", "title": "How can I overload operators with const operands correctly?", "body": "<p>I'm learning C++ recently and have some basic Fraction class to implement operator overloads on. One of the operators to be overloaded is <code>*</code>.</p>\n\n<p>A quick implementation for multiplying two Fraction types:</p>\n\n<pre><code>Fraction Fraction::operator* (const Fraction &amp;rightOperand)\n{\n    return Fraction(numerator * rightOperand.numerator, denominator * rightOperand.denominator);\n}\n</code></pre>\n\n<p>And one for multiplying where the right hand operand is an <code>int</code>:</p>\n\n<pre><code>Fraction Fraction::operator* (int rightOperand)\n{\n    return Fraction(numerator * rightOperand, denominator);\n}\n</code></pre>\n\n<p>Then, because multiplication is commutative, multiplying where the <em>left</em> hand operator should be simply:</p>\n\n<pre><code>// declared as friend\nFraction operator* (int leftOperand, const Fraction &amp;rightOperand)\n{\n    return rightOperand * leftOperand; // should use the overload above, right?\n}\n</code></pre>\n\n<p>However, in the last function, the '*' gives an error:</p>\n\n<blockquote>\n  <p>no operator \"*\" matches these operands -- operand types are: const Fraction * int</p>\n</blockquote>\n\n<p>I set the parameters to be const references because they are not written to... is this incorrect in this case or is there some way around this? Surely I don't have to define a whole load of duplications of the member functions as global free functions with two arguments just to add <code>const</code> to the parameters?</p>\n"}, {"tags": ["c++", "algorithm", "loops"], "comments": [{"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1518647260, "post_id": 48797240, "comment_id": 84597043, "body": "Why not express it as <code>(i-1)*4 - 3</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518647266, "post_id": 48797240, "comment_id": 84597044, "body": "You don&#39;t need a loop at all.  This is just a math problem.  If you figure out the formula you can just solve for the number you want"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1518647379, "post_id": 48797240, "comment_id": 84597100, "body": "@Ron I don&#39;t need map I was only using the 2 vectors as illustrations as for the expected input and outputs of the function. Sorry about the confusion."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "edited": false, "score": 0, "creation_date": 1518647720, "post_id": 48797240, "comment_id": 84597247, "body": "@Nelfeal When I tried your expression it was giving me the values: {-7, -3, 1, 5, 9, 13, 17} which is not correct."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1518647825, "post_id": 48797240, "comment_id": 84597291, "body": "why do you have the <code>if</code> in the loop? it doesn&#39;t depend on the iteration and can be moved before the loop"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1518647889, "post_id": 48797240, "comment_id": 84597315, "body": "@vu1p3n0x If I have it before the loop yes it will return from the function first but I don&#39;t think that matters if it is within or outside the loop."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1518648050, "post_id": 48797240, "comment_id": 84597389, "body": "@vu1p3n0x actually when I moved the if outside of the loop it was giving me a result of {1,1,5,13, 25,41, 61} which is not correct."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1518648448, "post_id": 48797240, "comment_id": 84597549, "body": "@vu1p3n0x my apologies: moving the if outside of the for loop does work; it was in my main when going through a for loop to test values is where I had my error: I was indexing from <code>[0,7)</code> instead of <code>[1,7]</code>."}, {"owner": {"reputation": 296, "user_id": 5758722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f07bf49208446f643f870b4cf6d93401?s=128&d=identicon&r=PG&f=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/5758722/sean"}, "edited": false, "score": 0, "creation_date": 1518648946, "post_id": 48797240, "comment_id": 84597737, "body": "I think the expression you want is pow(i, 2) + pow(i-1, 2)."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1518648900, "creation_date": 1518648900, "answer_id": 48797588, "question_id": 48797240, "link": "https://stackoverflow.com/questions/48797240/trying-to-automate-a-specific-sequence-in-c/48797588#48797588", "title": "Trying to automate a specific sequence in c++", "body": "<p>The trick here is to reconize the regular pattern and get a formula for it.  If you plot the points that you have you see that they look like they form a nice quadratic curve.  If you use a online Quadratic regression Calculator like <a href=\"http://keisan.casio.com/exec/system/14059932254941\" rel=\"nofollow noreferrer\">this one</a> you can enter in the data and find the formula.  In this case you get </p>\n\n<pre><code>y = 1 - 2x + 2x^2\n</code></pre>\n\n<p>So, all you need to do is take the number they want into x and solve and you get your result.  That would look like</p>\n\n<pre><code>int index;\n// get index from user\nint result = 1 - (2 * index) + (2 * index * index);\n// display result\n</code></pre>\n"}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518648900, "creation_date": 1518647104, "last_edit_date": 1518648540, "question_id": 48797240, "link": "https://stackoverflow.com/questions/48797240/trying-to-automate-a-specific-sequence-in-c", "title": "Trying to automate a specific sequence in c++", "body": "<p>Below I will list 2 sets of vectors one being index values the other being solutions to the corresponding index value: The two vectors below are not used in code; they are here only to represent the input &amp; output relationship of the function below.</p>\n\n<pre><code>std::vector&lt;int&gt; index { 1, 2, 3, 4, 5, 6, 7, ... };\nstd::vector&lt;int&gt; result { 1, 5, 13, 25, 41, 61, 85, ... };\n</code></pre>\n\n<hr>\n\n<p>I'm trying to write either a for loop or a while loop that will calculate the result based on the index value above for example I have a function that accepts an integer as the index, and returns an int the result:</p>\n\n<pre><code>int calculate( int index ) {\n    int result = 0;\n    for ( int i = 0; i &lt;= index; i++ ) {\n        // calculate here.\n    }\n\n    return result;\n}\n</code></pre>\n\n<p>So if someone enters 1 into the function it will return 1; 2 will return 5, 3 will return 13, etc.</p>\n\n<p>I notice that there is a common multiple of 4 added to each addition step in the calculate, but I'm having trouble expressing that within a for loop.</p>\n\n<p>For example iteration 1 = 1; next iteration is 1 + 4 = 5, then the next is 5 + (2*4) = 13, then 13 + (3*4) = 25, etc.</p>\n\n<p>My current attempt is as follows:</p>\n\n<pre><code>int calculate( int n ) {\n    int total = 1;\n\n    if ( n == 1 )\n        return n;\n\n    for ( int i = 1; i &lt; n; i++ )\n        total += i * 4;\n\n    return total;\n}\n</code></pre>\n\n<p>Which appears to be giving me the correct values.</p>\n\n<p>I would like to know if this is a good solution to this or if there is a better approach.</p>\n"}, {"tags": ["c++", "typedef"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1518646613, "post_id": 48797137, "comment_id": 84596752, "body": "Look and the definition of <code>object_detector</code>, <code>scan_fhog_pyramid</code>, and <code>pyramid_down</code>.  These are all templates"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1518646708, "post_id": 48797137, "comment_id": 84596795, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/templates\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/templates</a>."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1518646708, "creation_date": 1518646708, "answer_id": 48797164, "question_id": 48797137, "link": "https://stackoverflow.com/questions/48797137/what-do-angled-brackets-in-a-typedef-statement-mean/48797164#48797164", "title": "What do angled brackets in a typedef statement mean?", "body": "<p>Yes, they are like the angled brackets of <code>std::vector&lt;int&gt;</code>.</p>\n\n<p>No, they have nothing to do with lists/arrays.</p>\n\n<p>6 is a number.</p>\n\n<p>Look up \"templates\" in your C++ book.</p>\n"}], "owner": {"reputation": 14758, "user_id": 654789, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/44ca44bc65f36895abb2ad8f577139e7?s=128&d=identicon&r=PG", "display_name": "puk", "link": "https://stackoverflow.com/users/654789/puk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": -9, "last_activity_date": 1518646708, "creation_date": 1518646548, "question_id": 48797137, "link": "https://stackoverflow.com/questions/48797137/what-do-angled-brackets-in-a-typedef-statement-mean", "title": "What do angled brackets in a typedef statement mean?", "body": "<p>Can someone explain to me what is going on in this line (from dlib library)</p>\n\n<pre><code>typedef object_detector &lt;scan_fhog_pyramid&lt;pyramid_down&lt;6&gt;&gt;&gt; simple_object_detector\n</code></pre>\n\n<p>Are the angled brackets here like the angled brackets of <code>std::vector&lt;int&gt;</code> (ie. specifying a list/array)? Also, what is the <code>6</code>, I have no idea what that is.</p>\n"}, {"tags": ["c++", "objective-c", "objective-c-blocks", "objective-c++", "objective-c-runtime"], "comments": [{"owner": {"reputation": 53155, "user_id": 427309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/JYj7w.png?s=128&g=1", "display_name": "Richard J. Ross III", "link": "https://stackoverflow.com/users/427309/richard-j-ross-iii"}, "edited": false, "score": 0, "creation_date": 1518808585, "post_id": 48797078, "comment_id": 84671268, "body": "The problem here is that your runtime-generated class doesn&#39;t have a destructor that releases the ivar! There&#39;s no ivar in the parent <code>StoreBridge</code> class, so it doesn&#39;t know to call <code>release</code> on it.  You&#39;ll need to have a smarter <code>dealloc</code> method that can iterate through those ivars and release them (probably by setting to <code>nil</code>, because that sounds safe)."}], "answers": [{"comments": [{"owner": {"reputation": 4624, "user_id": 48321, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/672a4302a3da9f559a4e8e3b508dce89?s=128&d=identicon&r=PG", "display_name": "kennyc", "link": "https://stackoverflow.com/users/48321/kennyc"}, "edited": false, "score": 0, "creation_date": 1518821801, "post_id": 48833536, "comment_id": 84676844, "body": "Excellent answer, thank you. I had overlooked the compiler&#39;s contribution to an object&#39;s dealloc method when ARC is enabled. Naively, I had just assumed that when the ObjC instance was deallocated, its ivars would &quot;just go away&quot; and that that, in turn, would be enough to release the shared_ptr. Modifying the dealloc method, as you suggested, was enough to release the shared_ptr."}], "tags": [], "owner": {"reputation": 53155, "user_id": 427309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/JYj7w.png?s=128&g=1", "display_name": "Richard J. Ross III", "link": "https://stackoverflow.com/users/427309/richard-j-ross-iii"}, "is_accepted": true, "score": 2, "last_activity_date": 1518809012, "creation_date": 1518809012, "answer_id": 48833536, "question_id": 48797078, "link": "https://stackoverflow.com/questions/48797078/leaking-c-shared-ptr-in-objective-c-block/48833536#48833536", "title": "Leaking C++ shared_ptr in Objective-C Block", "body": "<p>Let's jump in a time machine real quick, C.A. 2010. It's a simpler time, before having to deal with multi-architecture slices, 64 bits, and other fancy things, like importantly ARC.</p>\n\n<p>In this seemingly distant world to today, when you had memory, you had to release it yourself <em>gasp</em>. This meant, that if you had an iVar on your class, you had to explicitly, inside <code>dealloc</code> call <code>release</code> on it.</p>\n\n<p>Well, this doesn't actually change with ARC. The only thing that changes is that the <strong>compiler</strong> generates all of those nice <code>release</code> calls for you inside of <code>dealloc</code>, even if you don't define the method. How nice.</p>\n\n<p>The problem here, however, is that the compiler doesn't actually know about your iVar containing the block - it's completely defined at runtime. So how could the compiler release the memory?</p>\n\n<p>The answer is it doesn't. You'll need to do some magic to make sure that you release this stuff at run-time. My suggestion would be to iterate over the iVars of the class, and set them to <code>nil</code>, rather than call objc_release directly (as it causes much weeping and gnashing of teeth if you're using ARC).</p>\n\n<p>Something like this:</p>\n\n<pre><code>for (ivar in class) {\n   if ivar_type == @encode(id) {\n       objc_setIvar(self, ivar, nil)\n   }\n}\n</code></pre>\n\n<p>Now, if you ever go in and add an intentionally __unsafe_unretained ivar to this class you'll possibly have more issues. But you really shouldn't be inheriting from classes like this, mmkay?</p>\n"}], "owner": {"reputation": 4624, "user_id": 48321, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/672a4302a3da9f559a4e8e3b508dce89?s=128&d=identicon&r=PG", "display_name": "kennyc", "link": "https://stackoverflow.com/users/48321/kennyc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 744, "favorite_count": 0, "accepted_answer_id": 48833536, "answer_count": 1, "score": 3, "last_activity_date": 1518809012, "creation_date": 1518646235, "last_edit_date": 1518650306, "question_id": 48797078, "link": "https://stackoverflow.com/questions/48797078/leaking-c-shared-ptr-in-objective-c-block", "title": "Leaking C++ shared_ptr in Objective-C Block", "body": "<p><strong>Summary:</strong></p>\n\n<p>In the example application below, a <code>shared_ptr</code> is being captured in an Objective-C block. The Objective-C block is being assigned to an <code>ivar</code> of a dynamically created class using the Objective-C runtime API <code>object_setIvarWithStrongDefault</code>. When the Objective-C object is deallocated, the <code>shared_ptr</code> is leaking and the C++ object that it is retaining is not deleted. Why is that? </p>\n\n<p>When <code>object_setIvar</code> is used instead, then the leak is prevented but the <code>ivar</code> points to garbage once the block goes out of scope as <code>object_setIvar</code> assumes an assignment of <code>unsafe_unretained</code>.</p>\n\n<p>I <em>assume</em> this has to do with how Objective-C captures C++ objects, copies blocks and how <code>shared_ptr</code> handles being copied, but I was hoping someone could shed some light on this more than the documentation listed below.</p>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><p><a href=\"https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Blocks/Articles/bxVariables.html\" rel=\"nofollow noreferrer\">Apple's Blocks and Variables Documentation</a> contains a brief section on C++ objects but it's not entirely clear to me how it affects shared pointers.</p></li>\n<li><p><a href=\"https://clang.llvm.org/docs/Block-ABI-Apple.html#c-support\" rel=\"nofollow noreferrer\">LLVM's Documentation on Blocks &amp; C++ Support</a> is a bit more detailed than Apple's...</p></li>\n<li><p><a href=\"https://opensource.apple.com/source/objc4/objc4-709/runtime/objc-class.mm.auto.html\" rel=\"nofollow noreferrer\">objc-class.mm</a> contains the implementation for <code>object_setIvarWithStrongDefault</code></p></li>\n</ul>\n\n<p><strong>Backstory:</strong></p>\n\n<p>This sample code is extracted from a much larger project and has been significantly reduced to the minimum required to show the issue. The project is an Objective-C macOS application. The application contains several monolithic C++ objects that are glorified key/value stores. Each object is an instance of the same class, but templated on the key type. I want to dynamically create an Objective-C class that contains typed property getters which are backed by the C++ class. </p>\n\n<p><em>(Yes, this could all be done manually by just writing lots-and-lots of getters myself, but I'd prefer not to. The C++ class has enough information to know the names of the properties and their types, thus I'd like to use some meta-programming techniques to \"solve\" this.)</em> </p>\n\n<p><strong>Notes:</strong></p>\n\n<p>In an ideal world, I'd just be able to define an <code>iVar</code> on an Objective-C class of the appropriate <code>shared_ptr</code> type but I can't figure out how to do that using the Objective-C runtime APIs. </p>\n\n<p>Given this:</p>\n\n<p><code>std::shared_ptr&lt;BackingStore&lt;T&gt;&gt; backingStore</code></p>\n\n<p>How do you use this:</p>\n\n<p><code>class_addIvar</code> and <code>object_setIvar</code></p>\n\n<p>Since I couldn't figure that out, I decided to just wrap the shared_ptr into an Objective-C block since blocks are first-class objects and can be passed around where an <code>id</code> is expected. </p>\n\n<p><strong>Sample Application:</strong></p>\n\n<p><em>(Copy/paste into something like <code>CodeRunner</code> to see output)</em></p>\n\n<pre><code>#import &lt;Foundation/Foundation.h&gt;\n#import &lt;objc/runtime.h&gt;\n#import &lt;memory&gt;\n\ntypedef NSString* (^stringBlock)();\n\n/**\n  *  StoreBridge\n  *\n  *  Objective-C class that exposes Objective-C properties\n  *  which are \"backed\" by a C++ object (Store). The implementations\n  *  for each property on this class are dynamically added.\n  */\n@interface StoreBridge : NSObject\n\n@property(nonatomic, strong, readonly) NSString *storeName;\n\n@end\n\n@implementation StoreBridge\n\n@dynamic storeName;\n\n- (void)dealloc {\n  NSLog(@\"StoreBridge DEALLOC\");\n}\n\n@end\n\n/**\n  *  BackingStore\n  *\n  *  C++ class that for this example just exposes a single,\n  *  hard-coded getter function. In reality this class is\n  *  much larger.\n  */\nclass BackingStore {\n  public:\n    BackingStore()  { \n      NSLog(@\"BackingStore constructor.\"); \n    }\n\n    ~BackingStore() { \n      NSLog(@\"BackingStore destructor.\");  \n    }\n\n    NSString *name() const { \n      return @\"Amazon\"; \n    }\n\n    // Given a shared_ptr to a BackingStore instance, this method\n    // will dynamically create a new Objective-C class. The new\n    // class will contain Objective-C properties that are backed\n    // by the given BackingStore. \n    //\n    // Much of this code is hard-coded for this example. In reality,\n    // a much larger number of properties are dynamically created\n    // with different return types and a new class pair is\n    // only created if necessary.\n\n    static id makeBridge(std::shared_ptr&lt;BackingStore&gt; storePtr) {\n\n      // For this example, just create a new class pair each time.\n\n      NSString *klassName = NSUUID.UUID.UUIDString;\n      Class klass = objc_allocateClassPair(StoreBridge.class, klassName.UTF8String, 0);\n\n      // For this example, use hard-coded values and a single iVar definition. The\n      // iVar will store an Objective-C block as an 'id'.\n\n      size_t ivarSize = sizeof(id);\n      NSString *ivarName = @\"_storeNameIvar\";\n      NSString *encoding = [NSString stringWithFormat:@\"%s@\", @encode(id)];\n      SEL selector = @selector(storeName);\n\n      // Implementation for @property.storeName on StoreBridge. This \n      // implementation will read the block stored in the instances \n      // iVar named \"_storeNameIvar\" and call it. Fixed casting to \n      // type 'stringBlock' is used for this example only.\n\n      IMP implementation = imp_implementationWithBlock((id) ^id(id _self) { \n        Ivar iv = class_getInstanceVariable([_self class], ivarName.UTF8String);\n        id obj = object_getIvar(_self, iv);\n\n        return ((stringBlock)obj)();\n      });\n\n      // Add iVar definition and property implementation to newly created class pair.\n\n      class_addIvar(klass, ivarName.UTF8String, ivarSize, rint(log2(ivarSize)), @encode(id));\n      class_addMethod(klass, selector, implementation, encoding.UTF8String);\n\n      objc_registerClassPair(klass);\n\n      // Create instance of the newly defined class.\n\n      id bridge = [[klass alloc] init];\n\n      // Capture storePtr in an Objective-C block. This is the block that\n      // will be stored in the instance's iVar. Each bridge instance has\n      // its own backingStore, therefore the storePtr must be set on the\n      // instance's iVar and not captured in the implementation above.\n\n      id block = ^NSString* { return storePtr-&gt;name(); };\n      Ivar iva = class_getInstanceVariable(klass, ivarName.UTF8String);\n\n      // Assign block to previously declared iVar. When the strongDefault\n      // method is used, the shared_ptr will leak and the BackingStore\n      // will never get deallocated. When object_setIvar() is used,\n      // the BackingStore will get deallocated but crashes at\n      // runtime as 'block' is not retained anywhere. \n      //\n      // The documentation for object_setIvar() says that if 'strong'\n      // or 'weak' is not used, then 'unretained' is used. It might\n      // \"work\" in this example, but in a larger program it crashes\n      // as 'block' goes out of scope.\n\n      #define USE_STRONG_SETTER 1\n\n      #if USE_STRONG_SETTER\n        object_setIvarWithStrongDefault(bridge, iva, block);\n      #else \n        object_setIvar(bridge, iva, block);\n      #endif\n\n      return bridge;\n    }\n};\n\nint main(int argc, char *argv[]) {\n  @autoreleasepool {\n    std::shared_ptr&lt;BackingStore&gt; storePtr = std::make_shared&lt;BackingStore&gt;();\n    StoreBridge *bridge = BackingStore::makeBridge(storePtr);\n\n    NSLog(@\"bridge.storeName: %@\", bridge.storeName);\n\n    // When USE_STRONG_SETTER is 1, output is:\n    //\n    //   &gt; BackingStore constructor.\n    //   &gt; bridge.storeName: Amazon\n    //   &gt; StoreBridge DEALLOC\n\n    // When USE_STRONG_SETTER is 0, output is:\n    //\n    //  &gt; BackingStore constructor.\n    //  &gt; bridge.storeName: Amazon\n    //  &gt; BackingStore destructor.\n    //  &gt; StoreBridge DEALLOC\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "uri", "boost-filesystem"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1518646326, "post_id": 48797024, "comment_id": 84596631, "body": "You could either start with <code>&quot;file:&#47;&#47;localhost&#47;&quot;</code> and strip off a leading <code>&#39;&#47;&#39;</code> from the <code>test_file.generic_string()</code> string if one is present, or you can start with <code>&quot;file:&#47;&#47;localhost&quot;</code> and prepend a leading <code>&#39;&#47;&#39;</code> to the <code>test_file.generic_string()</code> string if not present. Both are pretty trivial to do with <code>std::string</code>"}], "owner": {"reputation": 21118, "user_id": 157971, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8cbf41a630b52f45e9b54e0ee1445f76?s=128&d=identicon&r=PG", "display_name": "void.pointer", "link": "https://stackoverflow.com/users/157971/void-pointer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 638, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518645942, "creation_date": 1518645942, "question_id": 48797024, "link": "https://stackoverflow.com/questions/48797024/convert-absolute-filesystem-path-to-a-file-uri-in-a-platform-agnostic-way", "title": "Convert absolute filesystem path to a file URI in a platform-agnostic way", "body": "<p>In C++, I'm using <code>boost::filesystem::path</code> to represent a path to an asset. I have logic to build a file URI from this absolute path. I run this code on both Windows and Linux, which has made this a non-trivial task because on the Windows file URI, there's an extra slash character I need to insert explicitly whereas the root path slash in the Linux case doubles as the host/path separator:</p>\n\n<p>Windows:</p>\n\n<pre><code>file://localhost/C:/my/data/foo.txt\n</code></pre>\n\n<p>Linux:</p>\n\n<pre><code>file://localhost/my/data/foo.txt\n</code></pre>\n\n<p>And the code:</p>\n\n<pre><code>#ifdef WINDOWS\n#define BASE_DIRECTORY \"C:\\\\my\\\\data\"\n#elseif // assume LINUX\n#define BASE_DIRECTORY \"/my/data\"\n#endif\n\nauto test_file = boost::filesystem::canonical(BASE_DIRECTORY) / \"foo.txt\";\nstd::string file_uri = \"file://localhost/\" + test_file.generic_string();\n</code></pre>\n\n<p>This doesn't quite work on the linux side, because I end up with:</p>\n\n<pre><code>file://localhost//my/data/foo.txt\n</code></pre>\n\n<p>Is it valid to have a double-slash after the host? If so, then this will work great as a solution I think. But I've assumed double slash after host is not valid. Is there a simple, portable solution here?</p>\n"}, {"tags": ["c++", "qt", "text", "qml", "qt-quick"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1518678718, "post_id": 48796947, "comment_id": 84605894, "body": "I guess the easiest way is to split the string by spaces and so wrap all token to <code>Text</code> or <code>Button</code> or whatever ant put that into <code>Flow</code>. Yes, in this case you lose all text alignments, space rules etc."}], "answers": [{"comments": [{"owner": {"reputation": 527, "user_id": 1293282, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7efd83eed6af5f64c17d22a1f6519ad7?s=128&d=identicon&r=PG", "display_name": "\u0152lrim", "link": "https://stackoverflow.com/users/1293282/%c5%92lrim"}, "edited": false, "score": 0, "creation_date": 1518682929, "post_id": 48801366, "comment_id": 84608006, "body": "OK, I guess I need to write a little text parser which can break lines and apply the styles from the previous line to the wrapped portion"}], "tags": [], "owner": {"reputation": 1447, "user_id": 2656799, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iShHw.jpg?s=128&g=1", "display_name": "ephemerr", "link": "https://stackoverflow.com/users/2656799/ephemerr"}, "is_accepted": false, "score": 1, "last_activity_date": 1518677282, "creation_date": 1518677282, "answer_id": 48801366, "question_id": 48796947, "link": "https://stackoverflow.com/questions/48796947/qt-qml-text-with-inline-qml-elements/48801366#48801366", "title": "Qt/QML: Text with inline QML elements", "body": "<p>You can create custom widgets and embed them into QML: \n<a href=\"http://doc.qt.io/qt-5/qtqml-tutorials-extending-qml-example.html\" rel=\"nofollow noreferrer\">Writing QML Extensions with C++</a> </p>\n"}, {"tags": [], "owner": {"reputation": 634, "user_id": 947742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39276404bb14a8fb41adf4f98f66ee77?s=128&d=identicon&r=PG", "display_name": "Zren", "link": "https://stackoverflow.com/users/947742/zren"}, "is_accepted": false, "score": 0, "last_activity_date": 1541728271, "creation_date": 1541728271, "answer_id": 53218732, "question_id": 48796947, "link": "https://stackoverflow.com/questions/48796947/qt-qml-text-with-inline-qml-elements/53218732#53218732", "title": "Qt/QML: Text with inline QML elements", "body": "<p>I haven't tried placing something in the middle, but I did try adding a tag to the beginning (and I might try adding a tag at the end).</p>\n\n<p>QML's Text has a <code>lineLaidOut</code> signal that let's you indent the first line of text.</p>\n\n<p><a href=\"http://doc.qt.io/qt-5/qml-qtquick-text.html#lineLaidOut-signal\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qml-qtquick-text.html#lineLaidOut-signal</a></p>\n\n<p>Here's what I did:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bVqRi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bVqRi.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>Text {      \n    text: issue.summary\n\n    onLineLaidOut: {\n        if (line.number == 0) {\n            var indent = tagRect.width + tagRect.rightMargin\n            line.x += indent\n            line.width -= indent\n        }\n    }\n\n    Rectangle {\n        id: tagRect\n        implicitWidth: padding + tagText.implicitWidth + padding\n        implicitHeight: padding + tagText.implicitHeight + padding\n        color: \"#400\"\n        property int padding: 2\n        property int rightMargin: 8\n        radius: 3\n\n        Text {\n            id: tagText\n            anchors.centerIn: parent\n            text: issue.product\n            color: \"#fff\"\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 527, "user_id": 1293282, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7efd83eed6af5f64c17d22a1f6519ad7?s=128&d=identicon&r=PG", "display_name": "\u0152lrim", "link": "https://stackoverflow.com/users/1293282/%c5%92lrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1541728271, "creation_date": 1518645547, "question_id": 48796947, "link": "https://stackoverflow.com/questions/48796947/qt-qml-text-with-inline-qml-elements", "title": "Qt/QML: Text with inline QML elements", "body": "<p>We are building a graphical user interface with QtQuick/QML. We have some dynamic, multi-line text coming from a database, which should be displayed in the application. Currently, we are using the <code>Text</code> element to display the text. However, we need some QML components inline embedded into the text. For this, the text coming from the database contains placeholders such as <code>::checkbox|1::</code> which should then be replaced and displayed by the program.</p>\n\n<p>In HTML, this is easy, you can simply mix inline elements with text to produce a result like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xh9zm.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Xh9zm.png\" alt=\"enter image description here\"></a></p>\n\n<p>but in QML, this seems to be more difficult, as <code>Text</code> elements cannot be word-wrapped into two halves if there is not enough space (both the text and the container size should be dynamic).</p>\n\n<p>The best solution we could come up with, is creating a <code>Flow</code> layout with one <code>Text</code> element for each word, but this seems too hacky.\nUsing <code>RichText</code> with HTML is not enogh, since we really need our custom QML elements in the text.\nAlso, we want to avoid using a <code>WebView</code> due to performance reasons. </p>\n\n<p>Is there a sophisticated way to implement this with QML/C++ only?</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1518645736, "post_id": 48796854, "comment_id": 84596399, "body": "Case4:  <code>if (t1 == static_cast&lt;T1&amp;&amp;&gt;(t2))</code>  creating a temporary of type <code>T1</code> from <code>t2</code>.  Case3 is straight forward UB."}, {"owner": {"reputation": 572, "user_id": 1243333, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a82685522447fffacac3fde99cec46af?s=128&d=identicon&r=PG", "display_name": "Supervisor", "link": "https://stackoverflow.com/users/1243333/supervisor"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518646044, "post_id": 48796854, "comment_id": 84596531, "body": "How do you know it creates a temporary of type <code>T1</code>? Is this in the standard, and if so, could you point where?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518646207, "post_id": 48796854, "comment_id": 84596588, "body": "order of casts tried: <a href=\"http://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/explicit_cast</a> and then (1) in <a href=\"http://en.cppreference.com/w/cpp/language/static_cast\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/static_cast</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1518649640, "post_id": 48796854, "comment_id": 84598003, "body": "You could compare also <code>t1 == static_cast&lt;const T1&amp;&gt;(t2)</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1518656349, "post_id": 48796854, "comment_id": 84599909, "body": "This seems unspecified. It sure seems like <code>const_cast&lt;T1&amp;&gt;(static_cast&lt;T1 const&amp;&gt;(t2))</code> is a valid interpretation of <a href=\"http://eel.is/c++draft/expr.cast#4.3\" rel=\"nofollow noreferrer\">this</a>, but that&#39;s not what the compiler is doing, and I&#39;m not sure how it would know how to do that."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1518679007, "post_id": 48796854, "comment_id": 84606030, "body": "@ Barry all four variants kind of are in unspecified territory, we don&#39;t know length of long (can be equal or long-er than int), format of signed value... I&#39;m not sure what  ISO C++ says now about signed to unsigned cast, but C99 states it being dependent of internal representation."}], "answers": [{"comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518687070, "post_id": 48801533, "comment_id": 84610304, "body": "Comparing reference has no difference from comparing the object it refers to."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518704674, "post_id": 48801533, "comment_id": 84622223, "body": "Does not answer the question in any way."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518708631, "post_id": 48801533, "comment_id": 84624926, "body": "@xskxzr t2 is int with value 1,  t1 is long and (T1&amp;)t2 is a reference to storage of size of long with same address  as t2. If long is different from int, you&#39;ll have undefined behaviour, it is an another way of type punning. My example intentionally arranged to have cance to get same result in all four cases, including reference reading part of a. On some platforms long is identical to int, so you&#39;ll have same result."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518750277, "post_id": 48801533, "comment_id": 84642817, "body": "@Swift Why does the reference refer to original <code>t1</code> object? As Barry pointed out in the <a href=\"https://stackoverflow.com/questions/48796854/c-r-value-reference-casting-and-temporary-materialization/48801533?noredirect=1#comment84599909_48796854\">comment</a>, the reference should refer to a temporary of type <code>unsigned long</code>."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1518753076, "post_id": 48801533, "comment_id": 84643369, "body": "@xskxzr none of compilers I tried do not generate same code in this case. gcc\\clang would refer to original object, a temporary like you offer  is created by vc2010-vc2015 with part of the <code>long long</code> (instead of <code>long</code> to make it match  wider int) uninitialized , intel would initialize that temporary properly. <code>static_cast&lt;T1&amp;&gt;(t2)</code> for gcc is invalid, and it doesn&#39;t do Barry&#39;s const trick, so it would do <code>reinterpret_cast</code>?. vc doesn&#39;t do <code>const_cast&lt;T1&amp;&gt;(static_cast&lt;T1 const&amp;&gt;(t2))</code> exactly either, generated code is something weird. It must be a defect though."}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": false, "score": -2, "last_activity_date": 1518708470, "last_edit_date": 1518708470, "creation_date": 1518678083, "answer_id": 48801533, "question_id": 48796854, "link": "https://stackoverflow.com/questions/48796854/r-value-reference-casting-and-temporary-materialization/48801533#48801533", "title": "r-value Reference Casting and Temporary Materialization", "body": "<p>Technically all four variants are platform dependent</p>\n\n<p><code>t1 == t2</code></p>\n\n<p>t2 gets promoted to 'long', the casted to <code>unsigned long</code>.</p>\n\n<p><code>t1 == (T1)t2</code></p>\n\n<p><code>signed int</code> gets converted to its representation as <code>unsigned long</code>, in order being casted to <code>long</code> first. There were debates if this must be considered an UB or not, because result is depending on platform, I honestly not sure how it is defined now, aside from clause in C99 standard. Result of comparison would be same as <code>t1 == t2</code>.</p>\n\n<p><code>t1 == (T1&amp;)t2</code></p>\n\n<p>The cast result is a reference, you compare reference ( essentially a pointer) to T1, which operation yields unknown result. Why? Reference js pointing to a different type.</p>\n\n<p><code>t1 == (T1&amp;&amp;)t2</code></p>\n\n<p>The cast expression yields an rvalue, so you <em>do</em> compare values, but its type is rvalue reference. Result of comparison would be same as <code>t1 == t2</code>.</p>\n\n<p>PS.\nFunny thing happen (depends on platform, essentially an UB) if if you use such values:</p>\n\n<pre><code>  const unsigned long a = 0xFFFFFFFFFFFFFFFF;\n  const int b = -1;  \n</code></pre>\n\n<p>Output might be:</p>\n\n<pre><code>t1 == t2\nt1 == (T1)t2\nt1 == (T1&amp;)t2  \nt1 == (T1&amp;&amp;)t2\n</code></pre>\n\n<p>This is one of reasons why you should be careful in comparing unsigned to signed values, especially with &lt; or >. You'll be surprised by -1 being greater than 1.</p>\n\n<p>if <code>unsigned long</code> is 64bit int and pointer is equal to 64-bit int. -1 if casted to unsigned, becomes its binary representation. Essentially b would become a pointer with address 0xFFFFFFFFFFFFFFFF. </p>\n"}, {"comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519357833, "post_id": 48939852, "comment_id": 84888610, "body": "What&#39;s the difference from Swift&#39;s answer? And again, why does static_cast followed by const_cast not work for <code>(T1&amp;)t2</code>?"}, {"owner": {"reputation": 887, "user_id": 2521390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d99a9bb74e1cb52413b1b3c4ed571d6?s=128&d=identicon&r=PG", "display_name": "Jay West", "link": "https://stackoverflow.com/users/2521390/jay-west"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519403814, "post_id": 48939852, "comment_id": 84911503, "body": "Ignoring const for clarity, static_cast does not work for <code>(T1&amp;)t2</code> because t2 is treated as <code>int&amp;</code>, and there is no valid conversion from <code>int&amp;</code> to <code>unsigned long&amp;</code>.  You are attempting to cast a specific memory address from one type to another, similar to pointer conversion.  static_cast allows this only for limited situations where it makes sense to do so (unions and inheritance hierarchies).  Swift&#39;s answer pointed out the undefined behavior, but didn&#39;t explain the underlying type conversion, which was the original question."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1519462537, "post_id": 48939852, "comment_id": 84928372, "body": "You can&#39;t ignore const. There is a valid conversion from <code>int</code> to <code>const unsigned long&amp;</code>."}, {"owner": {"reputation": 887, "user_id": 2521390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d99a9bb74e1cb52413b1b3c4ed571d6?s=128&d=identicon&r=PG", "display_name": "Jay West", "link": "https://stackoverflow.com/users/2521390/jay-west"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1519514492, "post_id": 48939852, "comment_id": 84942846, "body": "You are correct, xskxzr.  Things are very different with and without const.  I&#39;ve added an edit."}], "tags": [], "owner": {"reputation": 887, "user_id": 2521390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d99a9bb74e1cb52413b1b3c4ed571d6?s=128&d=identicon&r=PG", "display_name": "Jay West", "link": "https://stackoverflow.com/users/2521390/jay-west"}, "is_accepted": false, "score": 1, "last_activity_date": 1519514396, "last_edit_date": 1519514396, "creation_date": 1519349595, "answer_id": 48939852, "question_id": 48796854, "link": "https://stackoverflow.com/questions/48796854/r-value-reference-casting-and-temporary-materialization/48939852#48939852", "title": "r-value Reference Casting and Temporary Materialization", "body": "<p>The compiler attempts to interpret c-style casts as c++-style casts, in the following order (see <a href=\"http://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">cppreference</a> for full details):</p>\n\n<ol>\n<li>const_cast</li>\n<li>static_cast</li>\n<li>static_cast followed by const_cast</li>\n<li>reinterpret_cast</li>\n<li>reinterpret_cast followed by const_cast</li>\n</ol>\n\n<p>Interpretation of <code>(T1)t2</code> is pretty straightforward.  <code>const_cast</code> fails, but <code>static_cast</code> works, so it's interpreted as <code>static_cast&lt;T1&gt;(t2)</code> (#2 above).</p>\n\n<p>For <code>(T1&amp;)t2</code>, it's impossible to convert an <code>int&amp;</code> to <code>unsigned long&amp;</code> via <code>static_cast</code>.  Both <code>const_cast</code> and <code>static_cast</code> fail, so <code>reinterpret_cast</code> is ultimately used, giving <code>reinterpret_cast&lt;T1&amp;&gt;(t2)</code>.  To be precise, #5 above, since t2 is const: <code>const_cast&lt;T1&amp;&gt;(reinterpret_cast&lt;const T1&amp;&gt;(t2))</code>.</p>\n\n<p>EDIT: The <code>static_cast</code> for <code>(T1&amp;)t2</code> fails due to a key line in <a href=\"http://en.cppreference.com/w/cpp/language/explicit_cast\" rel=\"nofollow noreferrer\">cppreference</a>:  <strong>\"If the cast can be interpreted in more than one way as static_cast followed by a const_cast, it cannot be compiled.\"</strong>.  Implicit conversions are involved, and all of the following are valid (I assume the following overloads exist, at a minimum):</p>\n\n<ul>\n<li><code>T1 c1 = t2; const_cast&lt;T1&amp;&gt;(static_cast&lt;const T1&amp;&gt;(c1))</code></li>\n<li><code>const T1&amp; c1 = t2; const_cast&lt;T1&amp;&gt;(static_cast&lt;const T1&amp;&gt;(c1))</code></li>\n<li><code>T1&amp;&amp; c1 = t2; const_cast&lt;T1&amp;&gt;(static_cast&lt;const T1&amp;&gt;(std::move(c1)))</code></li>\n</ul>\n\n<p>Note that the actual expression, <code>t1 == (T1&amp;)t2</code>, leads to undefined behavior, as Swift pointed out (assuming <code>sizeof(int) != sizeof(unsigned long)</code>).  An address that holds an <code>int</code> is being treated (reinterpreted) as holding an <code>unsigned long</code>.  Swap the order of definition of <code>a</code> and <code>b</code> in <code>main()</code>, and the result will change to be equal (on x86 systems with gcc).  This is the only case that has undefined behavior, due to a bad <code>reinterpret_cast</code>.  Other cases are well defined, with results that are platform specific.</p>\n\n<p>For <code>(T1&amp;&amp;)t2</code>, the conversion is from an <code>int (lvalue)</code> to an <code>unsigned long (xvalue)</code>.  An <code>xvalue</code> is essentially an <code>lvalue</code> that is \"moveable;\" it is not a reference.  The conversion is <code>static_cast&lt;T1&amp;&amp;&gt;(t2)</code> (#2 above).  The conversion is equivalent to <code>std::move((T1)t2)</code>, or <code>std:move(static_cast&lt;T1&gt;(t2))</code>.  When writing code, use <code>std:move(static_cast&lt;T1&gt;(t2))</code> instead of <code>static_cast&lt;T1&amp;&amp;&gt;(t2)</code>, as the intent is much more clear.</p>\n\n<p>This example shows why c++-style casts should be used instead of c-style casts. Code intent is clear with c++-style casts, as the correct cast is explicitly specified by the developer.  With c-style casts, the actual cast is selected by the compiler, and may lead to surprising results.</p>\n"}], "owner": {"reputation": 572, "user_id": 1243333, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/a82685522447fffacac3fde99cec46af?s=128&d=identicon&r=PG", "display_name": "Supervisor", "link": "https://stackoverflow.com/users/1243333/supervisor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 597, "favorite_count": 4, "answer_count": 2, "score": 11, "last_activity_date": 1520718099, "creation_date": 1518645117, "last_edit_date": 1520718099, "question_id": 48796854, "link": "https://stackoverflow.com/questions/48796854/r-value-reference-casting-and-temporary-materialization", "title": "r-value Reference Casting and Temporary Materialization", "body": "<p>The output for the code below produces:</p>\n\n<pre><code>void doit(const T1 &amp;, const T2 &amp;) [T1 = unsigned long, T2 = int]\nt1 == t2\nt1 == (T1)t2\nt1 != (T1&amp;)t2\nt1 == (T1&amp;&amp;)t2\n</code></pre>\n\n<p>I understand that the <code>t1 == t2</code> case is simply an integral promotion.</p>\n\n<p>The second case <code>t1 == (T1)t2</code> is the same thing, just explicit.</p>\n\n<p>The third case <code>t1 == (T1&amp;)t2</code> must be a <code>reinterpret_cast</code> of some sort... Though, further explanation would be helpful.</p>\n\n<p>The fourth case <code>t1 == (T1&amp;&amp;)t2</code> is what I am stuck on. I put in the term 'Temporary Materialization' in the question's title as this is the closest I could come to some sort of answer.</p>\n\n<p>Could someone go over these four cases?</p>\n\n<p>Code:</p>\n\n<pre><code>#include &lt;iostream&gt;    \n\ntemplate &lt;typename T1, typename T2&gt;\nvoid doit(const T1&amp; t1, const T2&amp; t2) {\n  std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; '\\n';\n\n  if (t1 == t2) {\n    std::cout &lt;&lt; \"t1 == t2\" &lt;&lt; '\\n';\n  }\n  else {\n    std::cout &lt;&lt; \"t1 != t2\" &lt;&lt; '\\n';\n  }    \n\n  if (t1 == (T1)t2) {\n    std::cout &lt;&lt; \"t1 == (T1)t2\" &lt;&lt; '\\n';\n  }\n  else {\n    std::cout &lt;&lt; \"t1 != (T1)t2\" &lt;&lt; '\\n';\n  }    \n\n  if (t1 == (T1&amp;)t2) {\n    std::cout &lt;&lt; \"t1 == (T1&amp;)t2\" &lt;&lt; '\\n';\n  }\n  else {\n    std::cout &lt;&lt; \"t1 != (T1&amp;)t2\" &lt;&lt; '\\n';\n  }    \n\n  if (t1 == (T1&amp;&amp;)t2) {\n    std::cout &lt;&lt; \"t1 == (T1&amp;&amp;)t2\" &lt;&lt; '\\n';\n  }\n  else {\n    std::cout &lt;&lt; \"t1 != (T1&amp;&amp;)t2\" &lt;&lt; '\\n';\n  }\n}    \n\nint main() {\n  const unsigned long a = 1;\n  const int b = 1;    \n\n  doit(a, b);    \n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "offset"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1518644408, "post_id": 48796597, "comment_id": 84595820, "body": "Build yourself a really stupid bogus image with all of the &quot;pixels&quot; containing a number generated from their position and run it through your function in a debugger. When you see the code grabbing the wrong pixel backtrack to where the coordinates were computed and look at the inputs to the formula. If that doesn&#39;t solve the problem, work back further until you see where you are getting the wrong outputs."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518644421, "post_id": 48796597, "comment_id": 84595828, "body": "What did you observe when <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">debugging</a> your code? Ah, and what actually went wrong? Mind to <a href=\"https://stackoverflow.com/posts/48796597/edit\">elaborate</a> please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518644485, "post_id": 48796597, "comment_id": 84595849, "body": "@user4581301 That&#39;s borderline <i>&quot;rude&quot;</i>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518644824, "post_id": 48796597, "comment_id": 84595992, "body": "@TheDude Might be. I just outlined what I would do: Set up an experiment and the walk through the code until I found the math error or bad assumption I&#39;d made."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518645222, "post_id": 48796597, "comment_id": 84596180, "body": "@user4581301 Lead me down the <i>rabbit&#39;s hole</i> to pop up at the <i>mad hatter&#39;s teaparty</i>?"}, {"owner": {"reputation": 179, "user_id": 4825252, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/I0e3J.png?s=128&g=1", "display_name": "GDN9", "link": "https://stackoverflow.com/users/4825252/gdn9"}, "edited": false, "score": 0, "creation_date": 1518645247, "post_id": 48796597, "comment_id": 84596189, "body": "Don&#39;t worry I understood what you meant, I was thinking of doing that as I went to grab a bite :P I&#39;ll do it now an come back to you guys, thanks in advance!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518645336, "post_id": 48796597, "comment_id": 84596224, "body": "@GDN9 Don&#39;t get lost in <i>loopholes</i>!"}], "owner": {"reputation": 179, "user_id": 4825252, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/I0e3J.png?s=128&g=1", "display_name": "GDN9", "link": "https://stackoverflow.com/users/4825252/gdn9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518643961, "creation_date": 1518643961, "question_id": 48796597, "link": "https://stackoverflow.com/questions/48796597/pixel-data-unpacking-to-smaller-sections", "title": "Pixel data unpacking to smaller sections", "body": "<p>I'm trying to write a function that unpacks an image into separate quads. But for some reason the results are distorted (kinda stretched 45 degrees), so I must be reading the pixel array incorrectly, though I can't see the problem with my function...</p>\n\n<p>The function takes 2 unsigned char arrays, \"<strong>source</strong>\" and \"<strong>target</strong>\" and two unsigned int values, the \"<strong>width</strong>\" and \"<strong>height</strong>\" of the source image. Width is dividable by 4, and height is dividable by 3 (both return the same value, because the texture is 600 * 450) so each face is 150*150 px. So the w/h values are correct. Then it also takes in 2 ints, \"<strong>xIt</strong>\" and \"<strong>yIt</strong>\" which determine the offset - which 150*150 block should be read.</p>\n\n<p>Here's the function:</p>\n\n<pre><code>    const unsigned int trgImgWidth  = width  / 4;\n    const unsigned int trgImgHeight = height / 3;\n\n    unsigned int trgBufferOffset = 0;\n\n    // Compute pixel offset to start reading from\n    unsigned int Yoffset = yIt * trgImgHeight * width * 3;\n    unsigned int Xoffset = xIt * trgImgWidth  * 3;\n\n    for (unsigned int y = 0; y &lt; trgImgHeight; y++)\n    {\n        unsigned int o = Yoffset + Xoffset;                // Offset of current line of pixels\n\n        for (unsigned int x = 0; x &lt; trgImgWidth * 3; x++) // for each pixel component (rgb) in the line\n        {\n            target[trgBufferOffset] = source[o + x];\n\n            trgBufferOffset++;\n        }\n        Yoffset += width * 3;\n    }\n</code></pre>\n\n<p>Anyone see where I might be going wrong here?</p>\n"}, {"tags": ["c++", "dll", "build", "hyperlink"], "comments": [{"owner": {"reputation": 942, "user_id": 2012809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IF0o7.png?s=128&g=1", "display_name": "Omni", "link": "https://stackoverflow.com/users/2012809/omni"}, "edited": false, "score": 5, "creation_date": 1518642357, "post_id": 48796146, "comment_id": 84594814, "body": "I wouldn&#39;t claim that this is an incorrect approach but it certainly is odd that you have a cyclic dependency between libs. Why is this the case?"}, {"owner": {"reputation": 1609, "user_id": 9335240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b57f721280fb0c39d46f6d3d3955d?s=128&d=identicon&r=PG", "display_name": "user9335240", "link": "https://stackoverflow.com/users/9335240/user9335240"}, "edited": false, "score": 2, "creation_date": 1518642372, "post_id": 48796146, "comment_id": 84594823, "body": "I think it is illogical to have two libraries that call each other directly. But, you can use Callbacks, where the &quot;caller&quot; passes a &quot;callback&quot; to its callee."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518643109, "post_id": 48796146, "comment_id": 84595235, "body": "why are they two libs and not one, when one cannot work without the other?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518643137, "post_id": 48796146, "comment_id": 84595248, "body": "Use <i>interfaces</i> instead of direct dependencies!"}, {"owner": {"reputation": 1, "user_id": 9361931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDKCg.jpg?s=128&g=1", "display_name": "Frithu Sama", "link": "https://stackoverflow.com/users/9361931/frithu-sama"}, "edited": false, "score": 0, "creation_date": 1518645270, "post_id": 48796146, "comment_id": 84596199, "body": "I have updated the question :3 Thank for your help guys!"}], "owner": {"reputation": 1, "user_id": 9361931, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDKCg.jpg?s=128&g=1", "display_name": "Frithu Sama", "link": "https://stackoverflow.com/users/9361931/frithu-sama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518645243, "creation_date": 1518642119, "last_edit_date": 1518645243, "question_id": 48796146, "link": "https://stackoverflow.com/questions/48796146/c-library-cross-calling", "title": "C++ Library Cross-Calling", "body": "<p>I'm not really sure if that is the actual name of what I mean, but you'll get it.</p>\n\n<p>Supose I have 3 projects, 2 of them builds as libraries, and the other one as an executable. For my scenario I'll use <em>MSVC++</em> and the libraries will be <em>dynamic</em> (DLLs), and of course executable .exe, but I also want to if static libraries are also included.</p>\n\n<p>And please, if I'm wrong on any of my assumptions, please correct me.</p>\n\n<p>In the first library project, FirstLib.h:</p>\n\n<pre><code>#pragma once\n#include &lt;SecondLib.h&gt;\n\n#ifdef DLLONE_BUILD\n     #define DLLONE_API __declspec(dllexport)\n#else\n     #define DLLONE_API __declspec(dllimport)\n#endif\n\nint DLLONE_API MainOne();\nint DLLONE_API InternalOne();\n</code></pre>\n\n<p>and FirstLib.cpp:</p>\n\n<pre><code>#include &lt;FirstLib.h&gt;\n\nint MainOne() { return InternalTwo(); }\nint InternalOne() { return 100; }\n</code></pre>\n\n<p>Similarly, in the first project, SecondLib.h:</p>\n\n<pre><code>#pragma once\n#include &lt;FirstLib.h&gt;\n\n#ifdef DLLTWO_BUILD\n     #define DLLTWO_API __declspec(dllexport)\n#else\n     #define DLLTWO_API __declspec(dllimport)\n#endif\n\nint DLLTWO_API MainTwo();\nint DLLTWO_API InternalTwo();\n</code></pre>\n\n<p>SecondLib.cpp:</p>\n\n<pre><code>#include &lt;SecondLib.h&gt;\n\nint MainTwo() { return InternalOne(); }\nint InternalTwo() { return 200; }\n</code></pre>\n\n<p>Finally, in the executable project, main.cpp:</p>\n\n<pre><code>#include &lt;FirstLib.h&gt;\n#include &lt;SecondLib.h&gt;\n\nint main() { return MainOne() + MainTwo(); }\n</code></pre>\n\n<p>So when compiling the two libraries, I obtain the two .dll files, and two .lib files. Each library must have the other library .lib to link.</p>\n\n<p>Then, the executable must be linked with the two .lib, and when executed, .dll should be in a known path for the exe, be the same path or some PATH.</p>\n\n<p>Now for the questions:</p>\n\n<ol>\n<li>Is doing this a correct aproach, or should be avoided?</li>\n<li>Exe needs the two dlls, but each dll needs the other dll. Does each dll loads the other one again, or uses the same loaded version from .exe?</li>\n<li>If they were static libraries, would each library be loaded two times, or just one? Or none of them? </li>\n</ol>\n\n<p>And if you have a good resource where I can find more about this, it will be really apreciated. </p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>UPDATE as why would I do this</strong> : Imagine creating an engine. </p>\n\n<p>I have (just to be consistent with the previous scenario) a library called <strong>Kernel</strong>, and a library called <strong>System</strong>. Also a binary project.</p>\n\n<p><strong>Kernel</strong> has the code regarding program execution (main loop), handling, base clases and other high level things.</p>\n\n<p><strong>System</strong> has the code regarding HAL and low level code. OpenGL things, file IO things, etc.</p>\n\n<p><strong>Binary</strong> has the main function, and program specific implementation of the engine.</p>\n\n<p>Why do I need that cross-linking:</p>\n\n<ol>\n<li><em>Kernel in Binary</em>: <code>main()</code> (<em>Binary</em>) calls <code>Kernel.Initialize()</code> (<em>Kernel</em>).</li>\n<li><em>System in Binary</em>: <code>CreateActor()</code>(<em>Binary</em>) calls <code>System.OpenGl.MeshCreate()</code> (<em>System</em>)</li>\n<li><em>System in Kernel</em>: <code>Kernel.Initialize()</code>(<em>Kernel</em>) Initializes the Kernel, but also the System by calling <code>System.Initialize()</code>(<em>System</em>).</li>\n<li><em>Kernel in System</em>: <code>class System</code>(<em>System</em>) inherits from <code>class Object</code>(<em>Kernel</em>)</li>\n</ol>\n\n<p><strong>I know</strong> i could avoid this circular dependency by, say, Initializing System from binary calling <code>System.Initialize()</code>after <code>Kernel.Initialize()</code>.</p>\n\n<p>But then, <em>Kernel</em> will depend on no one, <em>System</em> would depend on <em>Kernel</em>, and <em>Binary</em> on both <em>Kernel</em> and <em>System</em>.</p>\n\n<p>So my question remains in this case too</p>\n\n<ol start=\"4\">\n<li>Is removing the cross dependency but to have this scheme a better aproach?</li>\n<li>Same as question two: Does <em>Binary</em> and <em>System</em> both depending on <em>Kernel</em> as well as<em>Binary</em> in <em>System</em> represents double code, double loading or a performance or size downgrade or some kind of undesirable effect?</li>\n</ol>\n"}, {"tags": ["c++", "r", "rstudio"], "comments": [{"owner": {"reputation": 3634, "user_id": 9153525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd3f85ced0a618c40bf37c5e65c7391?s=128&d=identicon&r=PG&f=1", "display_name": "RolandASc", "link": "https://stackoverflow.com/users/9153525/rolandasc"}, "edited": false, "score": 0, "creation_date": 1518645859, "post_id": 48796089, "comment_id": 84596457, "body": "Have you tried setting <code>CXX11=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++</code>?"}, {"owner": {"reputation": 97, "user_id": 1264643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbb1feca69c495c8a7977af0408c4fc?s=128&d=identicon&r=PG", "display_name": "jearl", "link": "https://stackoverflow.com/users/1264643/jearl"}, "reply_to_user": {"reputation": 3634, "user_id": 9153525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd3f85ced0a618c40bf37c5e65c7391?s=128&d=identicon&r=PG&f=1", "display_name": "RolandASc", "link": "https://stackoverflow.com/users/9153525/rolandasc"}, "edited": false, "score": 0, "creation_date": 1518646601, "post_id": 48796089, "comment_id": 84596749, "body": "Just tried, still the same results.  However that is interesting, is there a different CXX for -std=c++0x?"}, {"owner": {"reputation": 3634, "user_id": 9153525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd3f85ced0a618c40bf37c5e65c7391?s=128&d=identicon&r=PG&f=1", "display_name": "RolandASc", "link": "https://stackoverflow.com/users/9153525/rolandasc"}, "edited": false, "score": 0, "creation_date": 1518649100, "post_id": 48796089, "comment_id": 84597790, "body": "I just saw the latest <code>lubridate</code> has <code>CXX_STD = CXX11</code>. There is a <code>CXX98</code> as well"}, {"owner": {"reputation": 97, "user_id": 1264643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbb1feca69c495c8a7977af0408c4fc?s=128&d=identicon&r=PG", "display_name": "jearl", "link": "https://stackoverflow.com/users/1264643/jearl"}, "reply_to_user": {"reputation": 3634, "user_id": 9153525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd3f85ced0a618c40bf37c5e65c7391?s=128&d=identicon&r=PG&f=1", "display_name": "RolandASc", "link": "https://stackoverflow.com/users/9153525/rolandasc"}, "edited": false, "score": 0, "creation_date": 1518650028, "post_id": 48796089, "comment_id": 84598159, "body": "Tried setting: <code>CXX=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++ CC=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;gcc -std=gnu99 CXX11STD=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++ CXX11=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++ CXX98=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++ CXX14=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++ CXX17=&#47;opt&#47;gcc_4.9.1&#47;rtf&#47;bin&#47;g++</code> (because i don&#39;t really know what I&#39;m doing here) but none of them change which g++ is being used :-("}], "answers": [{"comments": [{"owner": {"reputation": 456, "user_id": 4072427, "user_type": "registered", "profile_image": "https://graph.facebook.com/542103473/picture?type=large", "display_name": "Bryan Linton", "link": "https://stackoverflow.com/users/4072427/bryan-linton"}, "edited": false, "score": 0, "creation_date": 1581547849, "post_id": 48811872, "comment_id": 106476199, "body": "Any word on fixing this error: unable to load shared object &#39;/opt/R/R-3.3.3/library/lubridate/libs/lubridate.so&#39;?  I&#39;m getting the same error"}], "tags": [], "owner": {"reputation": 97, "user_id": 1264643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbb1feca69c495c8a7977af0408c4fc?s=128&d=identicon&r=PG", "display_name": "jearl", "link": "https://stackoverflow.com/users/1264643/jearl"}, "is_accepted": true, "score": 0, "last_activity_date": 1518711904, "creation_date": 1518711904, "answer_id": 48811872, "question_id": 48796089, "link": "https://stackoverflow.com/questions/48796089/r-makevars-file-not-correctly-overriding-g/48811872#48811872", "title": "R Makevars file not correctly overriding g++", "body": "<p>It appears that I needed to set <code>CXX1X=/opt/gcc_4.9.1/rtf/bin/g++</code> in the ~/.R/Makevars file, after that the lubridate package used the intended g++, and successfully compiled.  Unfortunately, that hasn't completely solved my problem as R can't load the library:</p>\n\n<pre><code>** testing if installed package can be loaded\nError in dyn.load(file, DLLpath = DLLpath, ...) :\n  unable to load shared object '/opt/R/R-3.3.3/library/lubridate/libs/lubridate.so':\n  /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.18' not found (required by /opt/R/R-3.3.3/library/lubridate/libs/lubridate.so)\nError: loading failed\nExecution halted\nERROR: loading failed\n* removing \u2018/opt/R/R-3.3.3/library/lubridate\u2019\n</code></pre>\n\n<p>Looks like R is using the <code>/usr/lib64/libstdc++.so.6</code>, instead of (probably?) using <code>/opt/gcc_4.9.1/rtf/lib64/libstdc++.so.6</code>. But it does resolve the question I was asking here.  If I can figure out how to get it to load, I'll post back here, in case anyone else is trying to do the same thing. Thanks to RolandASc for pointing me in the right direction.</p>\n"}], "owner": {"reputation": 97, "user_id": 1264643, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1fbb1feca69c495c8a7977af0408c4fc?s=128&d=identicon&r=PG", "display_name": "jearl", "link": "https://stackoverflow.com/users/1264643/jearl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1004, "favorite_count": 0, "accepted_answer_id": 48811872, "answer_count": 1, "score": 2, "last_activity_date": 1518711904, "creation_date": 1518641940, "question_id": 48796089, "link": "https://stackoverflow.com/questions/48796089/r-makevars-file-not-correctly-overriding-g", "title": "R Makevars file not correctly overriding g++", "body": "<p>I'm trying to install the R package 'lubridate' on Centos 6.  Because lubridate requires a more recent version of g++ than the standard compiler on Centos 6 I downloaded and compiled version gcc 4.9 (from what I've been reading, lubridate requires >v4.8)</p>\n\n<p>I've then added the lines:</p>\n\n<pre><code>CXX=/opt/gcc_4.9.1/rtf/bin/g++\nCC=/opt/gcc_4.9.1/rtf/bin/gcc -std=gnu99\n</code></pre>\n\n<p>to the ~/.R/Makevars file, to try and force it to use the newer compiler, but when I try installing lubridate I get this error:</p>\n\n<pre><code>&gt; install.packages(\"lubridate\")\ntrying URL 'https://cran.rstudio.com/src/contrib/lubridate_1.7.2.tar.gz'\nContent type 'application/x-gzip' length 450988 bytes (440 KB)\n==================================================\ndownloaded 440 KB\n\n* installing *source* package \u2018lubridate\u2019 ...\n** package \u2018lubridate\u2019 successfully unpacked and MD5 sums checked\n** libs\ng++ -std=c++0x -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"   -fpic  -g -O2 -c RcppExports.cpp -o RcppExports.o\n/opt/gcc_4.9.1/rtf/bin/gcc -std=gnu99 -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -fpic  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -c datetime.c -o datetime.o\n/opt/gcc_4.9.1/rtf/bin/gcc -std=gnu99 -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -fpic  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -c period.c -o period.o\n/opt/gcc_4.9.1/rtf/bin/gcc -std=gnu99 -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -fpic  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -c tparse.c -o tparse.o\ntparse.c: In function \u2018C_parse_dt\u2019:\ntparse.c:338:26: warning: \u2018oMIN\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         INTEGER(oMIN)[i] = M;\n                          ^\ntparse.c:337:27: warning: \u2018oHOUR\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         INTEGER(oHOUR)[i] = H;\n                           ^\ntparse.c:336:26: warning: \u2018oDAY\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         INTEGER(oDAY)[i] = d;\n                          ^\ntparse.c:335:28: warning: \u2018oMONTH\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         INTEGER(oMONTH)[i] = m - 1;\n                            ^\ntparse.c:334:27: warning: \u2018oYEAR\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\n         INTEGER(oYEAR)[i] = y - 1900;\n                           ^\ng++ -std=c++0x -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"   -fpic  -g -O2 -c update.cpp -o update.o\nIn file included from ./cctz/include/civil_time.h:18,\n                 from update.cpp:3:\n./cctz/include/civil_time_detail.h:37: error: expected nested-name-specifier before \u2018year_t\u2019\n./cctz/include/civil_time_detail.h:37: error: \u2018year_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:37: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:37: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:41: error: expected nested-name-specifier before \u2018diff_t\u2019\n./cctz/include/civil_time_detail.h:41: error: \u2018diff_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:41: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:41: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:46: error: expected nested-name-specifier before \u2018month_t\u2019\n./cctz/include/civil_time_detail.h:46: error: \u2018month_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:46: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:46: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:47: error: expected nested-name-specifier before \u2018day_t\u2019\n./cctz/include/civil_time_detail.h:47: error: \u2018day_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:47: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:47: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:48: error: expected nested-name-specifier before \u2018hour_t\u2019\n./cctz/include/civil_time_detail.h:48: error: \u2018hour_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:48: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:48: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:49: error: expected nested-name-specifier before \u2018minute_t\u2019\n./cctz/include/civil_time_detail.h:49: error: \u2018minute_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:49: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:49: error: expected unqualified-id before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:50: error: expected nested-name-specifier before \u2018second_t\u2019\n./cctz/include/civil_time_detail.h:50: error: \u2018second_t\u2019 has not been declared\n./cctz/include/civil_time_detail.h:50: error: expected \u2018;\u2019 before \u2018=\u2019 token\n./cctz/include/civil_time_detail.h:50: error: expected unqualified-id before \u2018=\ufffd\ufffd\ufffd token\n./cctz/include/civil_time_detail.h:54: error: expected \u2018)\u2019 before \u2018year\u2019\n./cctz/include/civil_time_detail.h:78: error: \u2018cctz::detail::impl::is_leap_year\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:78: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:78: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\n./cctz/include/civil_time_detail.h:81: error: \u2018cctz::detail::impl::year_index\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:81: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:81: error: \u2018month_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:81: error: initializer expression list treated as compound expression\n./cctz/include/civil_time_detail.h:81: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\n./cctz/include/civil_time_detail.h:84: error: \u2018cctz::detail::impl::days_per_century\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:84: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:84: error: \u2018month_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:84: error: initializer expression list treated as compound expression\n./cctz/include/civil_time_detail.h:84: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\n./cctz/include/civil_time_detail.h:88: error: \u2018cctz::detail::impl::days_per_4years\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:88: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:88: error: \u2018month_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:88: error: initializer expression list treated as compound expression\n./cctz/include/civil_time_detail.h:88: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\n./cctz/include/civil_time_detail.h:92: error: \u2018cctz::detail::impl::days_per_year\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:92: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:92: error: \u2018month_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:92: error: initializer expression list treated as compound expression\n./cctz/include/civil_time_detail.h:92: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\n./cctz/include/civil_time_detail.h:95: error: \u2018cctz::detail::impl::days_per_month\u2019 declared as an \u2018inline\u2019 variable\n./cctz/include/civil_time_detail.h:95: error: \u2018year_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:95: error: \u2018month_t\u2019 was not declared in this scope\n./cctz/include/civil_time_detail.h:95: error: initializer expression list treated as compound expression\n./cctz/include/civil_time_detail.h:95: error: expected \u2018,\u2019 or \u2018;\u2019 before \u2018noexcept\u2019\nupdate.cpp:452: error: expected \u2018}\u2019 at end of input\nupdate.cpp:452: error: expected \u2018}\u2019 at end of input\nupdate.cpp:452: error: expected \u2018}\u2019 at end of input\nmake: *** [update.o] Error 1\nERROR: compilation failed for package \u2018lubridate\u2019\n* removing \u2018/opt/R/R-3.3.3/library/lubridate\u2019\nWarning in install.packages :\n  installation of package \u2018lubridate\u2019 had non-zero exit status\n\nThe downloaded source packages are in\n    \u2018/tmp/RtmpRwMbsZ/downloaded_packages\u2019\nUpdating HTML index of packages in '.Library'\nMaking 'packages.html' ... done\n</code></pre>\n\n<p>What is interesting is that it looks like it is trying to correctly use the right gcc:</p>\n\n<pre><code>/opt/gcc_4.9.1/rtf/bin/gcc -std=gnu99 -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -fpic  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -c datetime.c -o datetime.o\n</code></pre>\n\n<p>but not the right g++ (not listing the full path I defined in the ~/.R/Makevars file):</p>\n\n<pre><code>g++ -std=c++0x -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"   -fpic  -g -O2 -c RcppExports.cpp -o RcppExports.o\n</code></pre>\n\n<p>If I change the lines in the ~/.R/Makevars file to instead be:</p>\n\n<pre><code>CXX=g++\nCC=gcc\n</code></pre>\n\n<p>Then it looks like both executables become the normal system ones:</p>\n\n<pre><code>g++ -std=c++0x -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"   -fpic  -g -O2 -c RcppExports.cpp -o RcppExports.o\ngcc -I/opt/R/R-3.3.3/include -DNDEBUG -I. -I./cctz/include/ -I./cctz/src/ -I/usr/local/include -I\"/opt/R/R-3.3.3/library/Rcpp/include\"  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -fpic  -O3 -Wall -pipe -pedantic -std=gnu99 -fopenmp -c datetime.c -o datetime.o\n</code></pre>\n\n<p>Is there another file that is taking priority over my defined g++ location in the ~/.R/Makevars file somewhere?  The real question is how do I get R to use /opt/gcc_4.9.1/rtf/bin/g++ here?</p>\n"}, {"tags": ["c++", "makefile", "makefile-project", "makefile-errors"], "comments": [{"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1518643927, "post_id": 48796047, "comment_id": 84595605, "body": "You have (at least) two targets, <code>target1</code> and <code>target2</code> that build the file <code>libdemo.so</code> with different contents. Are you sure you want it that way?"}, {"owner": {"reputation": 65, "user_id": 7490134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15009653e879d36fc63eff2b04d59aa7?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Belotti", "link": "https://stackoverflow.com/users/7490134/michele-belotti"}, "reply_to_user": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1518679955, "post_id": 48796047, "comment_id": 84606487, "body": "Yes I&#39;m pretty sure. The example is kept simple to show the problematic behaviour, the real one is much more articulate with also change in compilation flags, but these is not the point. The final scope is to use different implementation of some part of the code if we want i.e. real time / not real time behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "is_accepted": true, "score": 1, "last_activity_date": 1518720382, "creation_date": 1518720382, "answer_id": 48814274, "question_id": 48796047, "link": "https://stackoverflow.com/questions/48796047/how-to-add-target-file-depending-of-called-tag-in-makefile/48814274#48814274", "title": "How to add target file depending of called tag in makefile", "body": "<p>The trouble is here:</p>\n\n<pre><code>target1: CPP_SRCS += src/main1.cpp\n</code></pre>\n\n<p>This is a <a href=\"https://www.gnu.org/software/make/manual/make.html#Target_002dspecific\" rel=\"nofollow noreferrer\">target-specific variable assignment</a>, so it is available in the <em>body</em> of the rule (and of the rules of prerequisites), but not in the <em>prerequisite list</em> of the rule (or of the prerequisites). So this:</p>\n\n<pre><code>OBJECTS=$(CPP_SRCS:%.cpp=$(OBJECTDIR)%.o)\n\n$(TARGET): $(OBJECTS)\n    ...\n</code></pre>\n\n<p>will not put <code>main1.o</code> in the prerequisite list. If that isn't clear, try this:</p>\n\n<pre><code>$(TARGET): $(OBJECTS)\n    @echo the variable OBJECTS contains $(OBJECTS)\n    @echo but the prerequisite list is $^\n</code></pre>\n\n<p>There are a couple of ways to approach the solution, but be aware that since <strong><code>target1</code> and <code>target2</code> both build <code>libdemo.so</code>,</strong> there will be no perfect solution.</p>\n\n<p>One way is to give the libraries different names:</p>\n\n<pre><code>libdemo1.so: main1.o\n\nlibdemo2.so: main2.o\n\nlibdemo1.so libdemo2.so: $(OBJECTS)\n    @echo Building target: $@ from objects: $^\n    $(LD) $(LIBS) $(LINKER_FLAG) -o $@ $^\n</code></pre>\n\n<p>Another is to use recursion:</p>\n\n<pre><code>target1: main1.o\n    @$(MAKE) $(TARGET) CFLAGS=$(CFLAGS) LINKER_FLAG=$(LINKER_FLAG)\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7490134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15009653e879d36fc63eff2b04d59aa7?s=128&d=identicon&r=PG&f=1", "display_name": "Michele Belotti", "link": "https://stackoverflow.com/users/7490134/michele-belotti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1007, "favorite_count": 0, "accepted_answer_id": 48814274, "answer_count": 1, "score": 0, "last_activity_date": 1518720382, "creation_date": 1518641808, "last_edit_date": 1518680150, "question_id": 48796047, "link": "https://stackoverflow.com/questions/48796047/how-to-add-target-file-depending-of-called-tag-in-makefile", "title": "How to add target file depending of called tag in makefile", "body": "<p>I'm using these Makefile basically for all my projects, adapting it for the different type of libraries or executable that I need to generate. \nThese times I need to compile different targets that have several common files and a single file that depends of the different targets.</p>\n\n<p>I try something like that </p>\n\n<pre><code># Add inputs and outputs from these tool invocations to the build variables \n\n# All Target\n\nRM := rm -rf\nCXX:= g++\nLD := g++\nCC := gcc\n\nTARGET = ../../Libs/libdemo.so\n\n# definition of additional libraries for linking\nLIBS := -L/data/somelib_lib/ -lsomelib1 -lsomelib2 \n# definition of include directories\n# for each you need to add -I\nINCLUDE :=  -I../../include \n\n#compiler definition \n\nCFLAGS= -std=c++11 -Wall -Wextra -c -fmessage-length=0 -fPIC -MMD -MP   -D __GXX_EXPERIMENTAL_CXX0X__ -D_GLIBCXX_USE_NANOSLEEP\n\n\n# All of the sources participating in the build are defined here\n\n# Add inputs and outputs from these tool invocations to the build variables \n\n\n\nLINKER_FLAG= -shared\n\ntarget1: CPP_SRCS += \\\n        src/main1.cpp\n\ntarget1: CPP_DEPS += \\\n        src/main1.d\n\ntarget1: CFLAGS += -O0 -g3\ntarget1: LINKER_FLAG += -g   \ntarget1: $(TARGET)\n    @echo \"main1 called\"\n\ntarget2: CPP_SRCS += \\\n        src/main2.cpp\n\ntarget2: CPP_DEPS += \\\n        src/main2.d\n\ntarget2: CFLAGS += -O0 -g3\ntarget2: LINKER_FLAG += -g   \ntarget2: $(TARGET)\n    @echo \"main2 called\"\n\n\nprofile: CFLAGS += -pg \nprofile: $(TARGET)\n    @echo \"profile called\"\n\nvalgrind: CFLAGS += -g -O1  \nvalgrind: LINKER_FLAG += -g   \nvalgrind: $(TARGET)\n\nall: CFLAGS += -O3\nall: $(TARGET)\n    @echo \"all called\"\n\nCPP_SRCS += \\\n    ../src/file1.cpp \\\n    ../src/file2.cpp \\\n    ../src/LoadParams.cpp \\\n    ../src/file3.cpp  \\\n\n\nCPP_DEPS += \\\n    ./src/file1.d \\\n    ./src/file2.d \\\n    ./src/LoadParams.d \\\n    ./src/file3.d  \\\n\nOBJECTDIR = ./\nOBJECTS=$(CPP_SRCS:%.cpp=$(OBJECTDIR)%.o)\n\n\n# Tool invocations\n$(TARGET): $(OBJECTS)\n    @echo 'Building target: $@'\n    @echo 'Invoking: GCC C++ Linker'\n    $(LD) $(LIBS) $(LINKER_FLAG) -o \"$@\" $(OBJECTS) \n    $(RM) $(OBJECTS)\n    $(RM) $(CPP_DEPS)\n    @echo 'Finished building target: $@'\n    @echo ' '\n\nclean:\n    @echo \"clean called\"\n    $(RM) $(TARGET)\n    $(RM) $(OBJECTS)\n    $(RM) $(CPP_DEPS)\n\n#echo \"$@ and $^\"\n\n$(OBJECTDIR)/%.o: %.cpp\n    @echo 'Building file: $&lt;'\n    @echo 'Invoking: GCC C++ Compiler'\n    $(CXX) $(CFLAGS) $(INCLUDE) -MF\"$(@:%.o=%.d)\" -MT\"$(@:%.o=%.d)\" -o \"$@\" \"$&lt;\"\n    @echo 'Finished building: $&lt;'\n    @echo ' '\n</code></pre>\n\n<p>The problem now is that if I call make target1 the compiler compiles only 4 files without including the file main1.cpp, while during the linking the command includes 5 .o files and of course the main1.o file is missing. \nThese means that the $(OBJECTS) is generated correctly but after the variable CPP_SRC does not contain the main1.cpp file. \nCould some one explaining this strange behaviour and give me some hints on how to solve properly the issues (or suggested a better way to perform the same task) ?\nThanks in advance</p>\n"}, {"tags": ["c++", "class", "object", "sdl"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1518641809, "post_id": 48795990, "comment_id": 84594545, "body": "There&#39;s no question here. It&#39;s not completely clear what&#39;s being asked."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1518641832, "post_id": 48795990, "comment_id": 84594557, "body": "Just add <code>extern World* world;</code> to <code>Engine.hpp</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518641853, "post_id": 48795990, "comment_id": 84594562, "body": "Making an object global and accessible from other classes <i>is</i> breaking coding practices."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518641869, "post_id": 48795990, "comment_id": 84594577, "body": "Looks like your question is <i>&quot;my program was unable to access the object&quot;</i> and nothing else"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 1, "creation_date": 1518642043, "post_id": 48795990, "comment_id": 84594651, "body": "You usually don&#39;t make objects (instances) <i>&quot;global&quot;</i> but pass interfaces around as needed. That could be done at <a href=\"https://stackoverflow.com/questions/4557141/static-polymorphism-definition-and-implementation\">compile time</a> or <a href=\"https://stackoverflow.com/questions/5854581/polymorphism-in-c\">runtime</a>. If you&#39;re really sure you need a <a href=\"https://sourcemaking.com/design_patterns/singleton\" rel=\"nofollow noreferrer\"><i>Singleton Pattern</i></a>, go for the <a href=\"https://stackoverflow.com/questions/1661529/is-meyers-implementation-of-the-singleton-pattern-thread-safe\"><i>Scott Meyer&#39;s idiom</i></a>."}, {"owner": {"reputation": 13, "user_id": 5569523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a9ffac3ae5466c5147c6362a7e5725?s=128&d=identicon&r=PG&f=1", "display_name": "BSB", "link": "https://stackoverflow.com/users/5569523/bsb"}, "edited": false, "score": 0, "creation_date": 1518642172, "post_id": 48795990, "comment_id": 84594720, "body": "Sorry for the mess, i always am really bad at using stack overflow, but my question was more asking what would be the best way to do it without breaking programming practices, I messed around with passing the world through to the draw functions and then into the the texture handler, but I felt like this messed with the simplicity of the code"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518642375, "post_id": 48795990, "comment_id": 84594825, "body": "@BSB I believe there are enough pointers in my above comment now. You might also be interested to lookup the <i>Abstract Factory</i> pattern regarding <i>dynamic polymorphism</i>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518642864, "post_id": 48795990, "comment_id": 84595101, "body": "@BSB <i>&quot;... but my question was more asking what would be the best way to do it without breaking programming practices ...&quot;</i> Pro tip: That kind of questions might end up being <i>off-topic</i> as <i>too broad</i> or <i>opinion based</i>. Since such always depends on your particular use case or requirement restrictions, you should rather clarify these, and how you&#39;re stuck to meet these with your code."}, {"owner": {"reputation": 13, "user_id": 5569523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a9ffac3ae5466c5147c6362a7e5725?s=128&d=identicon&r=PG&f=1", "display_name": "BSB", "link": "https://stackoverflow.com/users/5569523/bsb"}, "edited": false, "score": 0, "creation_date": 1518642949, "post_id": 48795990, "comment_id": 84595149, "body": "Alright I understand"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 5569523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a9ffac3ae5466c5147c6362a7e5725?s=128&d=identicon&r=PG&f=1", "display_name": "BSB", "link": "https://stackoverflow.com/users/5569523/bsb"}, "is_accepted": true, "score": 0, "last_activity_date": 1519663423, "last_edit_date": 1519663423, "creation_date": 1518646573, "answer_id": 48797139, "question_id": 48795990, "link": "https://stackoverflow.com/questions/48795990/c-making-a-object-global-and-accessible-from-other-classes-without-breaking-c/48797139#48797139", "title": "C++ Making a object global and accessible from other classes, without breaking coding practices", "body": "<p>Thanks for the help and advice everyone gave me, I ended up changing the code to just pass the object through the draw functions adding a parameter to the function texture drawing thing rather than just make the object global.</p>\n\n<hr>\n\n<p><strong>Update:</strong>\nAfter gaining a better understanding of pointers I realized I could just pass a pointer during the initialization of the class.</p>\n"}], "owner": {"reputation": 13, "user_id": 5569523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a9ffac3ae5466c5147c6362a7e5725?s=128&d=identicon&r=PG&f=1", "display_name": "BSB", "link": "https://stackoverflow.com/users/5569523/bsb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 48797139, "answer_count": 1, "score": -1, "last_activity_date": 1519663423, "creation_date": 1518641626, "question_id": 48795990, "link": "https://stackoverflow.com/questions/48795990/c-making-a-object-global-and-accessible-from-other-classes-without-breaking-c", "title": "C++ Making a object global and accessible from other classes, without breaking coding practices", "body": "<p>While trying to make a basic game engine with SDL2, I created a system where a object from the class world is created. When trying to use the object later from the class Texture Manager, However my program was unable to access the object.\n<br><br>I'm sorry because I feel like this question has either been asked before or has a really easy answer I'm not realizing. I tried search this website and other forums but, I either didn't ask the question correctly or couldn't find a working answer without having to init the object in the texture class. \n<br><br>Thank You for helping, I'm sorry if I asked this question poorly.</p>\n\n<h1>Engine.cpp</h1>\n\n<pre><code>#include \"Engine.hpp\"\n#include \"TextureManager.hpp\"\n#include \"World.hpp\"\n\nWorld* world = new World(0,0);\n\nvoid Engine::init(const char *title, int xPos, int yPos, int width, int height, bool fullScreen) {\n\n    world = new World(0,0); \n}\n</code></pre>\n\n<h1>World.cpp</h1>\n\n<pre><code>#include \"World.hpp\"\n#include \"TextureManager.hpp\"\n#include &lt;SDL2/SDL.h&gt;\n\nclass World {\npublic:\n    World(int x, int y);\n    ~World();\n\n\n    SDL_Rect CalculateToWorld( SDL_Rect dest);\n\nprivate:\n\n    int xPos;\n    int yPos;\n};\n\nWorld::World(int x, int y) {\n\n    xPos = x;\n    yPos = y;\n}\nWorld::~World() {\n\n}\n\nSDL_Rect World::CalculateToWorld( SDL_Rect dest) {\n\n    dest.x += xPos;\n    dest.y += yPos;\n    return dest;\n}\n</code></pre>\n\n<h1>TextureManager.cpp</h1>\n\n<pre><code>#include \"Engine.hpp\"\n\nclass TextureManager {\n\npublic:\n    static void Draw(SDL_Texture* tex, SDL_Rect src, SDL_Rect dest);\n\n};\nvoid TextureManager::Draw(SDL_Texture* tex, SDL_Rect src, SDL_Rect dest) {\n    dest = world -&gt; CalculateToWorld(dest);\n    SDL_RenderCopy(Engine::renderer, tex, &amp;src, &amp;dest);\n}\n</code></pre>\n"}, {"tags": ["c++", "unit-testing", "datetime"], "answers": [{"comments": [{"owner": {"reputation": 3681, "user_id": 4670, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f7297ca8367b01906989298eafd20e7?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/4670/steve"}, "edited": false, "score": 0, "creation_date": 1518641956, "post_id": 48796020, "comment_id": 84594608, "body": "This is a great suggestion in general; unfortunately the setup here is simplified and the structure of the actual system is such that the functionality being testing requires a <code>localtime</code> call buried inside it."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 3681, "user_id": 4670, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f7297ca8367b01906989298eafd20e7?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/4670/steve"}, "edited": false, "score": 0, "creation_date": 1518642241, "post_id": 48796020, "comment_id": 84594752, "body": "@Steve \u2022 that&#39;s tightly binding two things tightly together.  Makes for highly difficult unit testing.  Separate them, and it will be much easier to unit test."}, {"owner": {"reputation": 3681, "user_id": 4670, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f7297ca8367b01906989298eafd20e7?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/4670/steve"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1518646676, "post_id": 48796020, "comment_id": 84596772, "body": "@Eljay I agree, but the structure is set for me so the test must be as it is."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1518648895, "post_id": 48796020, "comment_id": 84597719, "body": "So the answers are:  <i>Is there a way to programmatically set the value returned by localtime before two adjacent calls?</i>  Yes, set the actual system time.  <i>Is it possible to do without mucking around with the actual system time?</i>  Without extricating the localtime from the implementation, no."}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": true, "score": 3, "last_activity_date": 1518641730, "creation_date": 1518641730, "answer_id": 48796020, "question_id": 48795960, "link": "https://stackoverflow.com/questions/48795960/c-setting-the-date-for-localtime/48796020#48796020", "title": "C++ Setting the Date for localtime", "body": "<p>You could make <code>getDailyMessage</code> take the time by parameter. This makes unit testing a breeze and adds the flexibility of being able to use it in other contexts. For instance you could use it to print the yesterday's message.</p>\n"}], "owner": {"reputation": 3681, "user_id": 4670, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/1f7297ca8367b01906989298eafd20e7?s=128&d=identicon&r=PG", "display_name": "Steve", "link": "https://stackoverflow.com/users/4670/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 48796020, "answer_count": 1, "score": 1, "last_activity_date": 1518641730, "creation_date": 1518641497, "question_id": 48795960, "link": "https://stackoverflow.com/questions/48795960/c-setting-the-date-for-localtime", "title": "C++ Setting the Date for localtime", "body": "<p>I have a piece of C++ code in C++11 that uses <code>localtime</code> function (<a href=\"http://www.cplusplus.com/reference/ctime/localtime/\" rel=\"nofollow noreferrer\">doc</a>) to get the time. If the day is my birthday, it returns a birthday message. </p>\n\n<pre><code>std::string message = getDailyMessage();\n</code></pre>\n\n<p>I would now like to make a unit test that determines if the code outputs the right value on my birthday and not on my birthday. Is there a way to programmatically set the value returned by <code>localtime</code> before two adjacent calls? Is it possible to do without mucking around with the actual system time?</p>\n\n<pre><code>setTime(NOT_BIRTHDAY);\nEXPECT_STREQ(NOT_BIRTHDAY_MESSAGE, getDailyMessage());\nsetTime(BIRTHDAY);\nEXPECT_STREQ(BIRTDAY_MESSAGE, getDailyMessage());\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "iterator"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 4, "creation_date": 1518641494, "post_id": 48795916, "comment_id": 84594408, "body": "You can use <code>std::map::find</code> to find an element and start there.  The <code>find</code> method returns an iterator."}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "edited": false, "score": 0, "creation_date": 1518641495, "post_id": 48795916, "comment_id": 84594409, "body": "doesn&#39;t <code>it2 = it</code> work?"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1518641668, "post_id": 48795916, "comment_id": 84594487, "body": "If you are not returning anything, why your function return type is <code>map&lt;string, map&lt;string, double&gt;&gt;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 2, "last_activity_date": 1518642927, "last_edit_date": 1518642927, "creation_date": 1518642005, "answer_id": 48796106, "question_id": 48795916, "link": "https://stackoverflow.com/questions/48795916/starting-a-map-iterator-not-at-city-begin/48796106#48796106", "title": "Starting a map iterator not at city.begin()", "body": "<p>First of all this statment:</p>\n\n<pre><code>c[it-&gt;first]\n</code></pre>\n\n<p>is a slow and convoluted way to simply say:</p>\n\n<pre><code>it-&gt;second\n</code></pre>\n\n<p>and as you use that 8 times in your loop there is no surprise it is slow indeed.</p>\n\n<p>And for your loop, looks like you want to change second loop to:</p>\n\n<pre><code>for (map&lt;string, City&gt;::iterator it2 = std::next(it); it2 != c.end(); ++it2)\n</code></pre>\n\n<p>Note: if you do not have intention to change values in the map it is cleaner to use <code>std::map::const_iterator</code> instead.</p>\n\n<p>Note2: I assumed that calculating distance btw a city and itself is meaningless. If it is not the case in your geometry then remove <code>std::next()</code> in above code and just assign <code>it</code> to <code>it2</code> in the second loop initialization.</p>\n"}], "owner": {"reputation": 7, "user_id": 2634219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85cdf20d5f632ba9b1c6b83b242c1e6?s=128&d=identicon&r=PG", "display_name": "Grogie", "link": "https://stackoverflow.com/users/2634219/grogie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 48796106, "answer_count": 1, "score": 0, "last_activity_date": 1518642927, "creation_date": 1518641266, "question_id": 48795916, "link": "https://stackoverflow.com/questions/48795916/starting-a-map-iterator-not-at-city-begin", "title": "Starting a map iterator not at city.begin()", "body": "<p>In short, when trying to iterate through a map, is it possible to start the iterator at an index/key that isn't *.begin()?</p>\n\n<p>I have a <code>map</code> of cities with a class \"<code>City</code>\". (City has coordinates for the city, and in the following code, calc_dist(c1, c2) will calculate the distance between the coordinates).  What I am trying to do is create a \"2D Map\" (i.e. <code>map&lt;string, map&lt;string, double&gt;&gt; dist</code>) that can access the distance between the city by using <code>dist[city1][city2]</code>.  </p>\n\n<p>to compute the distances I basically create a nested iterator over the cities, and it works, but it's slow when using many cities.  since the distance between cities are symmetric, i can cut the loops in half by storing the distance in the reverse of the map.</p>\n\n<p>what i was hoping to do was start the second iterator at the current city from the first iterator.  <a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/map/map/</a> tells me that the order is preserved so I feel like I should be able to do this.  </p>\n\n<p>Sample code:</p>\n\n<pre><code>// Function create_distance_chart(...)\nmap&lt;string, map&lt;string, double&gt;&gt; create_distance_chart(map&lt;string, City&gt; c){\n\n    map&lt;string, map&lt;string, double&gt;&gt; dist;\n\n    for (map&lt;string, City&gt;::iterator it = c.begin(); it != c.end(); ++it){\n\n        for (map&lt;string, City&gt;::iterator it2 = c.begin(); it2 != c.end(); ++it2) { // here i can make improvements, i hope\n\n            //calculate distance\n\n            dist[c[it-&gt;first]][c[it2-&gt;first]] = calc_dist(c[it-&gt;first],c[it2-&gt;first])// store in map\n            dist[c[it2-&gt;first]][c[it-&gt;first]] = calc_dist(c[it-&gt;first],c[it2-&gt;first])// store in map in the other direction.  \n        }\n    }\n}\n</code></pre>\n\n<p>in the line </p>\n\n<pre><code>for (map&lt;string, City&gt;::iterator it2 = c.begin(); it2 != c.end(); ++it2) {\n</code></pre>\n\n<p>i tried to change <code>c.begin</code> to <code>c[it-&gt;first]</code>, <code>c.at(it-&gt;first)</code>, just <code>it-&gt;first</code>, and a dummy variable that pulls the index for <code>it-&gt;first</code>.  </p>\n\n<p>the only other method i'm considering is doing a reverse iterator for the second iterator and having a termination condition that might cause the second loop to end before <code>it2 != c.end()</code> (i.e. at the first iterator's city), but i'm not making headway in that domain right now.  </p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "c++11", "vector"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1518641224, "post_id": 48795858, "comment_id": 84594277, "body": "The largest index that can be used to access a vector&#39;s elements is <code>size() - 1</code>. <code>i &lt;= words.size()</code> implies you will access one element beyond that."}, {"owner": {"reputation": 1029, "user_id": 7878485, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15dabd902549f21699b86daa04ecaeed?s=128&d=identicon&r=PG&f=1", "display_name": "nitronoid", "link": "https://stackoverflow.com/users/7878485/nitronoid"}, "edited": false, "score": 0, "creation_date": 1518641232, "post_id": 48795858, "comment_id": 84594281, "body": "change <code>i &lt;= words.size()</code> to <code>i &lt; words.size()</code>"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1518641308, "post_id": 48795858, "comment_id": 84594319, "body": "Use <code>std::size_t</code>, not <code>int</code>, for your loop index. Better yet, use an iterator loop and <code>std::next()</code> instead of an index loop. Check against <code>words.end()</code> before you use the next iterator."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1518642128, "post_id": 48795858, "comment_id": 84594696, "body": "Why are you mixing <code>cout</code> with <code>printf</code>?  Try using <code>cout &lt;&lt; &quot;\\n&quot;;</code> to replace the <code>printf</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518642542, "post_id": 48795858, "comment_id": 84594927, "body": "If you want to build a histogram (count occurrences) see this: <a href=\"https://stackoverflow.com/questions/21682716/create-a-histogram-using-c-with-map-unordered-map-the-default-value-for-a-non\" title=\"create a histogram using c with map unordered map the default value for a non\">stackoverflow.com/questions/21682716/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1518642237, "post_id": 48796110, "comment_id": 84594751, "body": "why are you casting <code>words.size()</code> to <code>int</code>?"}, {"owner": {"reputation": 176, "user_id": 3838215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1942f82515d96fbbfab07aeacd727182?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3838215/ray"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518642540, "post_id": 48796110, "comment_id": 84594926, "body": "@NathanOliver Thanks for the comments. I have updated."}, {"owner": {"reputation": 176, "user_id": 3838215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1942f82515d96fbbfab07aeacd727182?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3838215/ray"}, "reply_to_user": {"reputation": 3, "user_id": 9361835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLSV6.jpg?s=128&g=1", "display_name": "Mrr TaQi", "link": "https://stackoverflow.com/users/9361835/mrr-taqi"}, "edited": false, "score": 0, "creation_date": 1518755092, "post_id": 48796110, "comment_id": 84643748, "body": "@MrrTaQi I&#39;m glad you find it helpful. I encountered the exactly same problem when I was learning programming. You have to make all the mistakes to get better :D This image inspires me all the time: <a href=\"http://i.imgur.com/BFfcsPd.jpg\" rel=\"nofollow noreferrer\">i.imgur.com/BFfcsPd.jpg</a>"}], "tags": [], "owner": {"reputation": 176, "user_id": 3838215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1942f82515d96fbbfab07aeacd727182?s=128&d=identicon&r=PG&f=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/3838215/ray"}, "is_accepted": true, "score": 0, "last_activity_date": 1518643083, "last_edit_date": 1518643083, "creation_date": 1518642013, "answer_id": 48796110, "question_id": 48795858, "link": "https://stackoverflow.com/questions/48795858/vector-element-compare-c/48796110#48796110", "title": "vector element compare c++", "body": "<p>You need to pay more attention on the initial conditions and bounds when you do iteration and comparing at the same time. It is usually a good idea to execute your code using pen and paper at first.</p>\n\n<pre><code>sort(words.begin(), words.end()); // make sure !words.empty()\nint cc = 0; // index of the word we need to compare.\nint compte = 1; // counting of the number of occurrence.\nfor( size_t i = 1; i &lt; words.size(); ++i ){\n    // since you already count the first word, now we are at i=1\n    if( words[i] == words[cc] ){\n        compte += 1;\n    }else{\n        // words[i] is going to be different from words[cc].\n        cout &lt;&lt; words[cc] &lt;&lt; \" Repeated :  \" &lt;&lt; compte &lt;&lt; '\\n';\n        compte = 1;\n        cc = i;\n    }\n}\n // to output the last word with its repeat \ncout &lt;&lt; words[cc] &lt;&lt; \" Repeated :  \" &lt;&lt; compte &lt;&lt; '\\n';\n</code></pre>\n\n<p>Just for some additional information.\nThere are better ways to count the number of word appearances.\nFor example, one can use <code>unordered_map&lt;string,int&gt;</code>.</p>\n\n<p>Hope this help.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9361835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLSV6.jpg?s=128&g=1", "display_name": "Mrr TaQi", "link": "https://stackoverflow.com/users/9361835/mrr-taqi"}, "edited": false, "score": 0, "creation_date": 1518650020, "post_id": 48796702, "comment_id": 84598157, "body": "yes but this one cuz me problem with huge file i want to compare while im reading table not to store it in another one and show the other one need just one loop cuz the loop over will take too much time and thanks for ur idiea and sorry for my bad eng :)"}, {"owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "reply_to_user": {"reputation": 3, "user_id": 9361835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLSV6.jpg?s=128&g=1", "display_name": "Mrr TaQi", "link": "https://stackoverflow.com/users/9361835/mrr-taqi"}, "edited": false, "score": 0, "creation_date": 1518707572, "post_id": 48796702, "comment_id": 84624246, "body": "@MrrTaQi &quot;problem with huge file&quot;.  How big is your file?  If it is really too big to store in memory ( &gt;&gt; 1Gigabyte ) then you have a whole different problem!  First get your code working properly for reasonably sized files, then look into breaking the file up into sections.  Ask a question something like &quot;How to sort large file that cannot fit in memory&quot;"}], "tags": [], "owner": {"reputation": 15008, "user_id": 16582, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/febff21383acf755f8b375c322e36f2b?s=128&d=identicon&r=PG", "display_name": "ravenspoint", "link": "https://stackoverflow.com/users/16582/ravenspoint"}, "is_accepted": false, "score": 0, "last_activity_date": 1518646942, "last_edit_date": 1518646942, "creation_date": 1518644473, "answer_id": 48796702, "question_id": 48795858, "link": "https://stackoverflow.com/questions/48795858/vector-element-compare-c/48796702#48796702", "title": "vector element compare c++", "body": "<blockquote>\n  <p>My problem in the bounds: i+1 may exceed the vector borders. How to I\n  handle this case?</p>\n</blockquote>\n\n<p>In modern C++ coding, the problem of an index going past vector bounds can be avoided.  Use the STL containers and avoid using indices.  With a little effort devoted to learning how to use containers this way, you should never see these kind of 'off-by-one' errors again!  As a benefit, the code becomes more easily understood and maintained.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\nusing namespace std;\n\nint main() {\n\n    // a test vector of words\n    vector&lt; string &gt; words { \"alpha\", \"gamma\", \"beta\", \"gamma\" };\n\n    // map unique words to their appearance count\n    map&lt; string, int &gt; mapwordcount;\n\n    // loop over words\n    for( auto&amp; w : words )\n    {\n        // insert word into map\n        auto ret = mapwordcount.insert( pair&lt;string,int&gt;( w, 1 ) );\n        if( ! ret.second )\n        {\n            // word already present\n            // so increment count\n            ret.first-&gt;second++;\n        }\n    }\n\n    // loop over map\n    for( auto&amp; m : mapwordcount )\n    {\n        cout &lt;&lt; \"word '\" &lt;&lt; m.first &lt;&lt; \"' appears \" &lt;&lt; m.second &lt;&lt; \" times\\n\";\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Produces</p>\n\n<pre><code>word 'alpha' appears 1 times\nword 'beta' appears 1 times\nword 'gamma' appears 2 times\n</code></pre>\n\n<p><a href=\"https://ideone.com/L9VZt6\" rel=\"nofollow noreferrer\">https://ideone.com/L9VZt6</a></p>\n\n<p>If some book or person is teaching you to write code full of</p>\n\n<pre><code>for (i = 0; i &lt; ...\n</code></pre>\n\n<p>then you should run away quickly and learn modern coding elsewhere.</p>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": false, "score": 0, "last_activity_date": 1518646323, "creation_date": 1518646323, "answer_id": 48797093, "question_id": 48795858, "link": "https://stackoverflow.com/questions/48795858/vector-element-compare-c/48797093#48797093", "title": "vector element compare c++", "body": "<p>C++ uses <strong>zero-based indexing</strong>, <em>e.g.</em>, an array of length 5 has indices: <code>{0, 1, 2, 3, 4}</code>. This means that index 5 is outside of the range.</p>\n\n<p>Similarly, given an array <code>arr</code> of characters:</p>\n\n<pre><code> char arr[] = {'a', 'b', 'c', 'd', 'e'};\n</code></pre>\n\n<p>The loop <code>for (int i = 0; i &lt;= std::size(arr); ++i) { arr[i]; }</code> will cause a read from outside of the range when <code>i</code> is equal to the length of <code>arr</code>, which causes undefined behaviour. To avoid this the loop must stop before <code>i</code> is equal to the length of the array.</p>\n\n<pre><code>for (std::size_t i = 0; i &lt; std::size(arr); ++i) { arr[i]; }\n</code></pre>\n\n<p>Also note the use of <code>std::size_t</code> as type of the index counter. This is common practice in C++.</p>\n\n<hr>\n\n<p>Now, let's finish with an example of how much easier this can be done using the <a href=\"http://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">standard library</a>.</p>\n\n<pre><code>std::sort(std::begin(words), std::end(words));\nstd::map&lt;std::string, std::size_t&gt; counts;\nstd::for_each(std::begin(words), std::end(words), [&amp;] (const auto&amp; w) { ++counts[w]; });\n</code></pre>\n\n<p>Output using:</p>\n\n<pre><code>for (auto&amp;&amp; [word, count] : counts) {\n    std::cout &lt;&lt; word &lt;&lt; \": \" &lt;&lt; count &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "is_accepted": false, "score": 0, "last_activity_date": 1518647532, "last_edit_date": 1518647532, "creation_date": 1518646979, "answer_id": 48797214, "question_id": 48795858, "link": "https://stackoverflow.com/questions/48795858/vector-element-compare-c/48797214#48797214", "title": "vector element compare c++", "body": "<p>Same repeated words counting using some C++ STL goodies via <code>multiset</code> and <code>upper_bound</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\n\nint main()\n{\n    std::vector&lt;std::string&gt; words{ \"one\", \"two\", \"three\", \"two\", \"one\" };\n    std::multiset&lt;std::string&gt; ms(words.begin(), words.end());\n    for (auto it = ms.begin(), end = ms.end(); it != end; it = ms.upper_bound(*it))\n        std::cout &lt;&lt; *it &lt;&lt; \" is repeated: \" &lt;&lt; ms.count(*it) &lt;&lt; \" times\" &lt;&lt; std::endl;\n\n    return 0;\n} \n</code></pre>\n\n<p><a href=\"https://ideone.com/tPYw4a\" rel=\"nofollow noreferrer\">https://ideone.com/tPYw4a</a></p>\n"}], "owner": {"reputation": 3, "user_id": 9361835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JLSV6.jpg?s=128&g=1", "display_name": "Mrr TaQi", "link": "https://stackoverflow.com/users/9361835/mrr-taqi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 48796110, "answer_count": 4, "score": 0, "last_activity_date": 1518647532, "creation_date": 1518641006, "last_edit_date": 1518645131, "question_id": 48795858, "link": "https://stackoverflow.com/questions/48795858/vector-element-compare-c", "title": "vector element compare c++", "body": "<p>This program takes a word from text and puts it in a vector; after this it compares every element with the next one.</p>\n\n<p>So I'm trying to compare element of a vector like this:</p>\n\n<pre><code>sort(words.begin(), words.end());\nint cc = 1;\nint compte = 1;\nint i;\n//browse the vector\nfor (i = 0; i &lt;= words.size(); i++) {     // comparison\n    if (words[i] == words[cc]) { \n        compte = compte + 1; \n    }\n\n    else {     // displaying the word with comparison\n        cout &lt;&lt; words[i] &lt;&lt; \" Repeated :  \" &lt;&lt; compte; printf(\"\\n\");\n        compte = 1; cc = i;\n    }\n}\n</code></pre>\n\n<p>My problem in the bounds: <code>i+1</code> may exceed the vector borders. How to I handle this case?</p>\n"}, {"tags": ["c++", "arrays", "loops", "for-loop", "int"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 3, "creation_date": 1518639761, "post_id": 48795564, "comment_id": 84593477, "body": "Use strings instead of char arrays. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1518639833, "post_id": 48795564, "comment_id": 84593525, "body": "This looks iffy <code>j &lt;= max_name_length</code>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518639988, "post_id": 48795564, "comment_id": 84593612, "body": "You should use <code>std::string</code> instead of <code>char array</code>, if you are required to use array, then use <code>strncpy()</code> instead of loop."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 1, "creation_date": 1518640040, "post_id": 48795564, "comment_id": 84593646, "body": "<a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debug</a> and <a href=\"https://stackoverflow.com/help/mcve\">minimze to relevant code</a> before posting a question please!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518640625, "post_id": 48795564, "comment_id": 84593972, "body": "<a href=\"https://stackoverflow.com/questions/48793373/having-trouble-initiating-an-array-in-a-structure\">You&#39;re not the only person working on their taxes today</a>. You should consider teaming up."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518640703, "post_id": 48795564, "comment_id": 84594025, "body": "@user4581301: lol..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518640709, "post_id": 48795564, "comment_id": 84594029, "body": "Warning: <code>cin &gt;&gt; familyName;</code> cannot handle names like Von Doom, and trust me. You don&#39;t want to piss that guy off."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518640758, "post_id": 48795564, "comment_id": 84594048, "body": "Or names like &quot;in Orbit&quot;"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518640994, "post_id": 48795564, "comment_id": 84594162, "body": "With the <code>cin.ignore();</code>s I think you&#39;re trying to avoid this problem: <a href=\"https://stackoverflow.com/questions/21567291/why-does-stdgetline-skip-input-after-a-formatted-extraction\">Why does std::getline() skip input after a formatted extraction?</a>, but without <code>getline</code> in play (even though it should be) there is no need for the ignore. <code>&gt;&gt;</code> automatically discards preceding whitespace."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518641582, "post_id": 48795564, "comment_id": 84594441, "body": "And same advice I gave the other dude, <code>socialInsuranceNumber</code>  is a number, but it&#39;s not used like a number. It is always and exactly 9 digits and 0 is a valid leading digit so, <code>static int min_sin = 100000000;</code> is not true and printing <code>socialInsuranceNumber</code> needs to prepend any leading 0s. If you really want to get fancy, there is a simple formula for validating SINs: multiply each digit by its corresponding digit in 121212121, sum the result, and if the numbers not divisible by 10, it&#39;s not valid."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518640795, "post_id": 48795731, "comment_id": 84594065, "body": "Is it really we have to answer <i>simple typo</i> (well extended conception) questions like that over and over again? What about a comment and a close vote (or even better a dupe hammer)?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518640934, "post_id": 48795731, "comment_id": 84594134, "body": "If you find dupe I will delete my answer, I swear"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 1, "creation_date": 1518641072, "post_id": 48795731, "comment_id": 84594199, "body": "It&#39;s probably <i>too basic</i> to find a better dupe than <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a> :-P ... But regarding my initial comment: You&#39;re getting in the way of <i>roomba</i> (I don&#39;t really want to go into <a href=\"https://www.today.com/home/when-roomba-met-dog-poop-man-s-poopocalypse-goes-viral-t101883\" rel=\"nofollow noreferrer\">depth about that matter</a> further)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518641536, "post_id": 48795731, "comment_id": 84594418, "body": "@Andrew Sure <code>strncpy()</code> requires another argument specifying the maximum size of your target buffer."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1518640745, "last_edit_date": 1518640745, "creation_date": 1518640419, "answer_id": 48795731, "question_id": 48795564, "link": "https://stackoverflow.com/questions/48795564/int-value-is-changing-by-itself-after-a-for-loop/48795731#48795731", "title": "Int value is changing by itself after a for loop", "body": "<p>In C++ and C arrays indexes are 0 based, which means index is valid in [0,n-1] range inclusive. Common pattern to iterate is:</p>\n\n<pre><code>for( size_t i = 0; i &lt; array_size; ++i )\n</code></pre>\n\n<p>some even prefer to write:</p>\n\n<pre><code>for( size_t i = 0; i != array_size; ++i )\n</code></pre>\n\n<p>so your loop:</p>\n\n<pre><code>for (j = 0; j &lt;= max_name_length; j++) {\n</code></pre>\n\n<p>is wrong as it iterates over range [0,n] inclusive and leads to UB by accessing array with wrong index. In your case you copy part of memory where <code>socialInsuranceNumber</code> resides. So fix your loop and problem should disappear.</p>\n\n<p>Note: you should use <code>std::string</code> instead of char array, this will not only simplify your code but make it less error prone. If you are required to use <code>char</code> array, then you should use <code>strncpy()</code> function from standard C library, not manual loop.</p>\n"}], "owner": {"reputation": 1, "user_id": 9048827, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5c198ca09297252a4f111675c1896dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/9048827/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 48795731, "answer_count": 1, "score": -2, "last_activity_date": 1518640745, "creation_date": 1518639713, "question_id": 48795564, "link": "https://stackoverflow.com/questions/48795564/int-value-is-changing-by-itself-after-a-for-loop", "title": "Int value is changing by itself after a for loop", "body": "<p>In my CRA_Account.cpp file my socialInsuranceNumber gets changed after  for </p>\n\n<pre><code>(j = 0; j &lt;= max_name_length; j++) {\n                given_name[j] = givenName[j];\n            }\n</code></pre>\n\n<p>occurs.\nexample: If i enter 123123123 as my SIN, it gets changed to 123123148. The previous for loop that has </p>\n\n<pre><code>for (j = 0; j &lt;= max_name_length; j++) {\n                family_name[j] = familyName[j];\n            }\n</code></pre>\n\n<p>doesnt change my socialInsuranceNumber value.</p>\n\n<p>My code is:</p>\n\n<p>w3_in_lab.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"CRA_Account.h\"\n\nusing namespace std;\nusing namespace sict;\n\nint main() {\n    const int size = 1000;\n    char familyName[size];\n    char givenName[size];\n    sict::CRA_Account myCRA;\n    int sin;\n    bool quit = false;\n    if (sict::max_name_length + 1 &gt; size) {\n        cerr &lt;&lt; \"Increase size to value greater than \" \n            &lt;&lt; sict::max_name_length + 1 &lt;&lt; endl;\n        return 1;\n    }\n\n    cout &lt;&lt; \"Canada Revenue Agency Account App\" &lt;&lt; endl\n         &lt;&lt; \"=================================\" &lt;&lt; endl &lt;&lt; endl;\n    cout &lt;&lt; \"Please enter your family name: \";\n    cin &gt;&gt; familyName;\n    cin.ignore();\n    cout &lt;&lt; \"Please enter your given name: \";\n    cin &gt;&gt; givenName;\n    cin.ignore();\n\n    do {\n        cout &lt;&lt; \"Please enter your social insurance number (0 to quit): \";\n        cin &gt;&gt; sin;\n        cin.ignore();\n        if (sin != 0)\n        {\n            myCRA.set(familyName, givenName, sin);\n            if (myCRA.isEmpty()) {\n                cout &lt;&lt; \"Invalid input! Try again.\" &lt;&lt; endl;\n            }\n            else {\n                quit = true;\n            }\n        }\n        else {\n            quit = true;\n        }\n    } while (!quit);\n    cout &lt;&lt; \"----------------------------------------\" &lt;&lt; endl;\n    cout &lt;&lt; \"Testing the display function\" &lt;&lt; endl;\n    cout &lt;&lt; \"----------------------------------------\" &lt;&lt; endl;\n    myCRA.display();\n    cout &lt;&lt; \"----------------------------------------\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>CRA_Account.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"CRA_Account.h\"\n#include &lt;cstring&gt;\n\nusing namespace std;\nusing namespace sict;\n    void CRA_Account::set(const char* familyName, const char* givenName, int sin) {\n        int j;\n        if (sin &gt;= min_sin &amp;&amp; sin &lt;= max_sin) {\n            socialInsuranceNumber = sin;\n            for (j = 0; j &lt;= max_name_length; j++) {\n                family_name[j] = familyName[j];\n            }\n            for (j = 0; j &lt;= max_name_length; j++) {\n                given_name[j] = givenName[j];\n            }\n        }\n        else {\n            socialInsuranceNumber = 0;\n        }\n    }\n\n    bool CRA_Account::isEmpty() const {\n        bool empty = false;\n        if (socialInsuranceNumber &lt;= 0) {\n            empty = true;\n        }\n        return empty;\n    }\n    void CRA_Account::display() const {\n\n        if (isEmpty()) {\n            cout &lt;&lt; \"Account object is empty!\" &lt;&lt; endl;\n        }\n        else {\n\n            cout &lt;&lt; \"Family Name: \" &lt;&lt; family_name &lt;&lt; endl;\n            cout &lt;&lt; \"Given Name: \" &lt;&lt; given_name &lt;&lt; endl;\n            cout &lt;&lt; \"CRA Account: \" &lt;&lt; socialInsuranceNumber &lt;&lt; endl;\n\n        }\n    }\n</code></pre>\n\n<p>CRA_Account.h</p>\n\n<pre><code>#ifndef CRA_ACCOUNT_H\n#define CRA_ACCOUNT_H\n\nnamespace sict {\n    static int max_name_length = 40;\n    static int min_sin = 100000000;\n    static int max_sin = 999999999;\n\n    class CRA_Account {\n    public:\n    void set(const char* familyName, const char* givenName, int sin);\n    bool isEmpty() const;\n    void display() const;\n\n    private:\n        char family_name[40];\n        char given_name[40];\n        int socialInsuranceNumber = 0;\n\n    };\n\n}\n#endif\n</code></pre>\n"}, {"tags": ["c++", "arduino", "c-preprocessor"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1518639132, "post_id": 48795429, "comment_id": 84593178, "body": "<code>sizeof(TYPE)</code> is evaluated at compile time. Use static assertion together with it. <a href=\"https://stackoverflow.com/questions/3385515/static-assert-in-c\">stackoverflow.com/questions/3385515/static-assert-in-c</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1518639394, "post_id": 48795429, "comment_id": 84593294, "body": "why you cant use <code>sizeof</code> in a macro? and why is this a problem? just dont use macros"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1518639437, "post_id": 48795429, "comment_id": 84593307, "body": "Since you tagged C++, you can use <code>if constexpr</code>, or template specializations, or tag dispatch, or something else."}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "edited": false, "score": 0, "creation_date": 1518639536, "post_id": 48795429, "comment_id": 84593344, "body": "i&#39;m using the arduino ide so i&#39;m stuck with the version of gcc it comes with which does not support c11"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518639570, "post_id": 48795429, "comment_id": 84593360, "body": "@HolyBlackCat I&#39;m still not so sure, what of the c++ standard can be applied in that weird <i>arduino world</i>. Never tried myself. STM32 works all well with an appropriate cross compiler."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518639576, "post_id": 48795429, "comment_id": 84593364, "body": "what version is it ? If you are using a 10 year old compiler you should consider upgrading anyhow"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "edited": false, "score": 0, "creation_date": 1518639577, "post_id": 48795429, "comment_id": 84593365, "body": "and i need to conditionally define a type as either a hardware floating point type or the software emulation, i don&#39;t see how i can do that without a macro"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1518639591, "post_id": 48795429, "comment_id": 84593373, "body": "The linked question has a poor-man version of the static assert"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "edited": false, "score": 1, "creation_date": 1518639631, "post_id": 48795429, "comment_id": 84593393, "body": "and a static assert would make compilation fail, it doesn&#39;t let me fall back on the soft float type"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1518639708, "post_id": 48795429, "comment_id": 84593438, "body": "I think I understand the question now. Yes, the assertion is not the answer"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518639716, "post_id": 48795429, "comment_id": 84593447, "body": "@JamesKent: The Arduino IDE has supported C++11 for <i>years</i>; <a href=\"https://stackoverflow.com/a/26175586/560648\">it&#39;s even been the default for almost four</a>. I don&#39;t understand why people keep making the Arduino platform out to be some kind of puritan medieval footnote."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518639733, "post_id": 48795429, "comment_id": 84593455, "body": "@TheDude same standard. avrgcc fully supports all the core language features of C++17"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518639734, "post_id": 48795429, "comment_id": 84593456, "body": "@JamesKent Well, instead of a failing <i>static assertion</i>, you could employ SFINAE and a default specialization."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518639839, "post_id": 48795429, "comment_id": 84593528, "body": "<i>&quot;and i need to conditionally define a type as either a hardware floating point type or the software emulation, i don&#39;t see how i can do that without a macro&quot;</i> How about <code>using float64_t = std::conditional_t&lt;sizeof(double) == 4, double, my_soft_float&gt;;</code> or something similar?"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518639884, "post_id": 48795429, "comment_id": 84593550, "body": "@LightnessRacesinOrbit my apologies, last time i looked into using a newer language feature it wasn&#39;t available, i must have been mistaken what version"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518640001, "post_id": 48795429, "comment_id": 84593624, "body": "@HolyBlackCat i get an error: <code>&#39;conditional_t&#39; in namespace &#39;std&#39; does not name a template type</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518640706, "post_id": 48795429, "comment_id": 84594026, "body": "Did you include <code>&lt;type_traits&gt;</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518641649, "post_id": 48795429, "comment_id": 84594476, "body": "To be clear a 4 byte (32-bit) <code>double</code> is <b>not compliant</b> with the C spec.  At least 40-bits are needed."}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518642419, "post_id": 48795429, "comment_id": 84594850, "body": "@chux i know its not, thats why the workarounds with the soft float are necessary"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518642716, "post_id": 48795429, "comment_id": 84595031, "body": "(My comment should&#39;ve said <code>sizeof(double) == 8</code>, can&#39;t fix it now.) So, does it work if you <code>#include &lt;type_traits&gt;</code>?"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518643415, "post_id": 48795429, "comment_id": 84595394, "body": "@HolyBlackCat added that include, same error message"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518643493, "post_id": 48795429, "comment_id": 84595431, "body": "That means it lacks C++14 support... Then maybe <code>using float64_t = typename std::conditional&lt;sizeof(double) == 4, double, my_soft_float&gt;::type;</code>?"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "edited": false, "score": 0, "creation_date": 1518644130, "post_id": 48795429, "comment_id": 84595700, "body": "targeting an arduino board type_traits doesn&#39;t exist and without it: <code>&#39;conditional&#39; in namespace &#39;std&#39; does not name a template type</code>"}, {"owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "edited": false, "score": 0, "creation_date": 1518644148, "post_id": 48795429, "comment_id": 84595709, "body": "however when targeting the esp32 this does work"}], "answers": [{"tags": [], "owner": {"reputation": 61555, "user_id": 648658, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/75ee864ee3bef78f2a144398789fed25?s=128&d=identicon&r=PG", "display_name": "Jens", "link": "https://stackoverflow.com/users/648658/jens"}, "is_accepted": false, "score": 0, "last_activity_date": 1519846101, "creation_date": 1519846101, "answer_id": 49037170, "question_id": 48795429, "link": "https://stackoverflow.com/questions/48795429/compare-size-of-types-at-compile-time/49037170#49037170", "title": "Compare size of types at compile time", "body": "<p>This is for C, but probably works for C++ as well.</p>\n\n<p>The idea is to test one or more of the <code>FLT_*</code> macros against their <code>DBL_*</code> brethren. If they are the same, you are likely on the system that does not distinguish between float32 and float64. What about</p>\n\n<pre><code>#include &lt;float.h&gt; /* or &lt;cfloat&gt;?  */\n\n#if FLT_MANT_DIG == DBL_MANT_DIG\n  /* Funny system */\n#else\n  /* Sane system */\n#endif\n</code></pre>\n\n<p>Check your float.h contents for a suitable pair.</p>\n"}], "owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1519846101, "creation_date": 1518639090, "last_edit_date": 1518642410, "question_id": 48795429, "link": "https://stackoverflow.com/questions/48795429/compare-size-of-types-at-compile-time", "title": "Compare size of types at compile time", "body": "<p>I am working on some code that requires 64 bit floating point calculations, but on some of the platforms where it's being deployed there isn't a 64 bit float type.<br>\nI have a version of code that uses a software emulated 64-bit type, but I want to be able to combine the hard and soft versions as a single include the switches type definition between hardware and software float.<br>\nBoth float and double are available, but on the one platform they are both 4 bytes in size and on the other they are 4 and 8. </p>\n\n<p>I know I can't use <code>sizeof()</code> in a preprocessor macro so I looked at comparing the max value for both, but in the Arduino framework <code>FLT_MAX</code> and <code>DBL_MAX</code> don't seem to be defined?</p>\n\n<p>How can I perform this check at compile time?</p>\n"}, {"tags": ["c++", "encryption", "cryptography", "xor"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518638834, "post_id": 48795314, "comment_id": 84593048, "body": "where did you find it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518638966, "post_id": 48795314, "comment_id": 84593114, "body": "<i>&quot;Cesar cipher&quot;</i> effectively? An ole one ..."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1518639645, "post_id": 48795314, "comment_id": 84593404, "body": "I doubt it has a name by itself. It&#39;s just a Caesar cipher + XOR cipher."}, {"owner": {"reputation": 1, "user_id": 9361855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gilles Brunet", "link": "https://stackoverflow.com/users/9361855/gilles-brunet"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518641136, "post_id": 48795314, "comment_id": 84594231, "body": "@user463035818, I found this algorithm it in one of my customer\u2019s source code. Unfortunately, they lose any reference about it.  I looked at <a href=\"https://en.wikipedia.org/wiki/Vigen%C3%A8re_cipher\" rel=\"nofollow noreferrer\">Vigen&#232;re cipher</a> with a calculated table of keys. This is the closer I could find."}, {"owner": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1518647440, "post_id": 48795314, "comment_id": 84597134, "body": "I&#39;m voting to close this question as off-topic because seriously."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1518668616, "post_id": 48795314, "comment_id": 84602573, "body": "It sort of looks like a linear feedback mechanism to generate a keystream. Also see <a href=\"https://www.rocq.inria.fr/secret/Anne.Canteaut/MPRI/chapter3.pdf\" rel=\"nofollow noreferrer\">LFSR-based Stream Ciphers</a>. You might consider asking <a href=\"http://security.stackexchange.com/\">Information Security Stack Exchange</a> or maybe <a href=\"http://crypto.stackexchange.com/\">Cryptography Stack Exchange</a>."}, {"owner": {"reputation": 1, "user_id": 9361855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gilles Brunet", "link": "https://stackoverflow.com/users/9361855/gilles-brunet"}, "reply_to_user": {"reputation": 62421, "user_id": 216164, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/786f224adbe0784cdf7d0f15476061fe?s=128&d=identicon&r=PG", "display_name": "Thomas M. DuBuisson", "link": "https://stackoverflow.com/users/216164/thomas-m-dubuisson"}, "edited": false, "score": 0, "creation_date": 1518746255, "post_id": 48795314, "comment_id": 84641996, "body": "@Thomas, how the question appear off-topic?"}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1518641445, "creation_date": 1518641445, "answer_id": 48795955, "question_id": 48795314, "link": "https://stackoverflow.com/questions/48795314/what-is-the-name-of-this-cryptography-algorithm/48795955#48795955", "title": "What is the name of this cryptography algorithm?", "body": "<p>The cipher itself (combining the key stream with the plain text via an XOR) is called a Vernam Cipher (named after its inventor, Gilbert Vernam).</p>\n\n<p>I don't know of a name for this particular method of creating a key stream, though the group to which it belongs has a number of well known names, like \"bad\", \"awful\", and \"broken\".</p>\n\n<p>This example looks particularly problematic. If (for example) <code>mod</code> and <code>incr</code> were both primes, you'd at least increase the number of characters in the key stream before it repeated. As is, it repeats after a very short time (which lets an attacker find the key stream using less cipher text).</p>\n"}], "owner": {"reputation": 1, "user_id": 9361855, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gilles Brunet", "link": "https://stackoverflow.com/users/9361855/gilles-brunet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1518668312, "creation_date": 1518638592, "last_edit_date": 1518668312, "question_id": 48795314, "link": "https://stackoverflow.com/questions/48795314/what-is-the-name-of-this-cryptography-algorithm", "title": "What is the name of this cryptography algorithm?", "body": "<p>I found the cryptographic algorithm implemented in \u201cthe_cipher_decipher_func\u201d below:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n\nstd::string cipher_decipher(const std::string&amp; src, char mask, const char incr, const char mod)\n{\n    const auto the_cipher_decipher_func = [&amp;](const char c)\n    {\n        mask = (mask + incr) % mod;\n        return static_cast&lt;char&gt;(c ^ mask);\n    };\n\n    auto tgt = std::string{};\n    std::transform(src.cbegin(), src.cend(), std::back_inserter(tgt), the_cipher_decipher_func);\n    return tgt;\n}\n\nint main(int argc, char* argv[])\n{\n    if (argc &lt; 2)\n        return 1;\n\n    auto source = std::string{argv[1]};\n\n    const char incr = 12;   // arbitrary\n    const char mod = 50;    // arbitrary\n    const char initial_mask = mod / incr;   // arbitrary, but lower than \"mod\".\n\n    auto mask_cipher = initial_mask;\n    auto ciphered = cipher_decipher(source, mask_cipher, incr, mod);\n\n    auto mask_decipher = initial_mask;\n    auto deciphered = cipher_decipher(ciphered, mask_decipher, incr, mod);\n\n    std::cout\n        &lt;&lt; \"source: \" &lt;&lt; source &lt;&lt; std::endl\n        &lt;&lt; \"ciphered: \" &lt;&lt; ciphered &lt;&lt; std::endl\n        &lt;&lt; \"deciphered: \" &lt;&lt; deciphered &lt;&lt; std::endl\n        ;\n    return 0;\n}\n</code></pre>\n\n<p>It seems a mix of XOR and incremental key. However, does somebody may identify the precise origin of this cryptographic algorithm?</p>\n"}, {"tags": ["c++", "c", "windows", "console-application"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518638624, "post_id": 48795246, "comment_id": 84592957, "body": "Your application is either written in C, or written in C++. Which is it?"}, {"owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518638703, "post_id": 48795246, "comment_id": 84593002, "body": "@LightnessRacesinOrbit - It&#39;s C++, but I&#39;d accept either c or c++ answers. I&#39;d prefer C++, but I don&#39;t have issues calling C APIs."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518638811, "post_id": 48795246, "comment_id": 84593038, "body": "Being that they are two different languages, we would prefer you focus on one at a time (and only tag one at a time unless the question is specifically about the differences/similarities between them)."}, {"owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518638950, "post_id": 48795246, "comment_id": 84593106, "body": "@LightnessRacesinOrbit - This question is basically a &quot;where&#39;s the right API&quot; thing, and I don&#39;t really care whether the answer is c or c++. Anyways, the dupe answers my question, so I guess it&#39;s irrelevant."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518639182, "post_id": 48795246, "comment_id": 84593204, "body": "We care, as I have stated."}], "answers": [{"tags": [], "owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "is_accepted": false, "score": 0, "last_activity_date": 1518638673, "creation_date": 1518638673, "answer_id": 48795333, "question_id": 48795246, "link": "https://stackoverflow.com/questions/48795246/gracefully-shut-down-command-line-application-on-console-window-closure-on-wind/48795333#48795333", "title": "Gracefully shut-down command-line application on console window closure (on windows)", "body": "<p>And as soon as I ask the question, I find <a href=\"https://stackoverflow.com/questions/26404907/gracefully-terminate-a-boost-asio-based-windows-console-application\">Gracefully terminate a Boost Asio based Windows console application</a>, which exactly answers it (I'm even using boost-asio!).</p>\n"}], "owner": {"reputation": 4535, "user_id": 268006, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbd9d461a54696a1e51d697e38b3b96e?s=128&d=identicon&r=PG", "display_name": "Fake Name", "link": "https://stackoverflow.com/users/268006/fake-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 506, "favorite_count": 0, "closed_date": 1518638490, "answer_count": 1, "score": 0, "last_activity_date": 1518639278, "creation_date": 1518638333, "question_id": 48795246, "link": "https://stackoverflow.com/questions/48795246/gracefully-shut-down-command-line-application-on-console-window-closure-on-wind", "closed_reason": "Duplicate", "title": "Gracefully shut-down command-line application on console window closure (on windows)", "body": "<p>I have a small(ish) command-line application that talks to some custom hardware.</p>\n\n<p>Right now, you run the executable, and it pops up a console window, and does it's thing. I'm handling <code>SIGINT</code> and <code>SIGTERM</code> so if you hit <kbd>ctrl</kbd>+<kbd>c</kbd> <em>in</em> the console window, it shuts down gracefully, and releases the custom hardware.</p>\n\n<p>However, if kill the application by simply closing the console window (click the \"x\" in the corner), it seems to basically be immediately killed, with no time to do <em>any</em> cleanup.</p>\n\n<p>I'd like to be able to do my shutdown procedures if the console is closed. I've not had much luck trying to find out what, exactly, is even happening to my process when it's console is closed.</p>\n"}, {"tags": ["c++", "templates", "operator-overloading", "implicit-conversion"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1518638328, "post_id": 48795160, "comment_id": 84592816, "body": "You have <code>friend Vec&lt;T, N&gt; operator*(Vec&lt;T, N&gt; a, const S&amp; b)</code>, also write <code>friend Vec&lt;T, N&gt; operator*(const S&amp; b, Vec&lt;T, N&gt; a)</code> and that should fix your problem."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1518638351, "post_id": 48795160, "comment_id": 84592828, "body": "You should make multiplication operator non-template, <code>operator*(Vec&lt;T, N&gt; a, const T&amp; b)</code> and provide variant taking a scalar as a first argument, <code>operator*(const T&amp; b, Vec&lt;T, N&gt; a)</code>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1518638395, "post_id": 48795160, "comment_id": 84592852, "body": "OT: I strongly recommend you don&#39;t inherit from <code>std::array</code>, but instead use it as a member variable. Prefer <i>Composition over Inheritance</i>"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1518638429, "post_id": 48795160, "comment_id": 84592871, "body": "&quot;Do I really have to implement all of the templated operator functions once for Vec2 op S and once for S op Vec2?&quot; Is what I asked at the bottom. So there is no other way? I thought implementing these operators as friend functions or outside the class were ways of avoiding that extra code."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518638470, "post_id": 48795160, "comment_id": 84592888, "body": "@eike Yes, you do."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518638619, "post_id": 48795160, "comment_id": 84592953, "body": "@Justin Would you mind elaborating on the suggestion to not inherit from std::array?"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518638779, "post_id": 48795160, "comment_id": 84593030, "body": "You don&#39;t get conversion for template matching, other than derived to base. Please post a <b>complete example</b> that shows the issue."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518638973, "post_id": 48795160, "comment_id": 84593117, "body": "is there any reason you dont use <code>std::valarray</code> ?"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518639072, "post_id": 48795160, "comment_id": 84593156, "body": "@user463035818 std::valarray is dynamically allocated and not fixed size."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518639112, "post_id": 48795160, "comment_id": 84593168, "body": "<b>\u22121</b> Not the real code (e.g. lacks constructor definitions)."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518639271, "post_id": 48795160, "comment_id": 84593243, "body": "I would vote to <b>close this question</b> as lacking reproducible example except that I clicked the wrong reason first, and now SO won&#39;t let me but instead revels in showing number of seconds since I did that. Argh. Anyway."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518639299, "post_id": 48795160, "comment_id": 84593254, "body": "@eike See <a href=\"https://stackoverflow.com/q/49002/1896169\">Prefer composition over inheritance?</a>"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518639374, "post_id": 48795160, "comment_id": 84593283, "body": "@Cheersandhth.-Alf Yes, and that is apparently the problem. I&#39;m sorry for not including the constructor, I was too short sighted to expect a problem coming from there, but it in fact did. I will update the question shortly and include the answer."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518639871, "post_id": 48795160, "comment_id": 84593543, "body": "@Justin Since I want to expose all of the std::array interface, inheritance seems to be the superior option to me."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518639893, "post_id": 48795160, "comment_id": 84593556, "body": "The added constructor is better, but it&#39;s currently <code>private</code>, so this is still not the <b>real code</b>."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518639959, "post_id": 48795160, "comment_id": 84593597, "body": "@eike In almost all cases, it&#39;s still wrong. If your <code>Vec</code> isn&#39;t supposed to be thought of as a <code>std::array</code>, even if you want the same interface, just rewrite the interface in <code>Vec</code>. Especially for <code>std::array</code>, there aren&#39;t that many functions to write out."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518640099, "post_id": 48795160, "comment_id": 84593676, "body": "@Cheersandhth.-Alf Copy&amp;Paste error. In the compiler explorer link it is public. I did not use my actual code because there is added complexity that (unlike the constructor) does not have any impact on the problem. I rushed the edits because I didn&#39;t want anyone to be mislead by the incorrect example I originally gave."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518640444, "post_id": 48795160, "comment_id": 84593884, "body": "OK. Currently the constructor specifies an implicit conversion from single <code>T</code> to array. You can make the argument a <code>std::initializer_list</code> to avoid that implicit conversion. Then fix the rest."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518640582, "post_id": 48795160, "comment_id": 84593954, "body": "@Cheersandhth.-Alf My original ctor used std::initializer_list, but I replaced it because of the overhead std::initializer_list brings."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518640651, "post_id": 48795160, "comment_id": 84593999, "body": "Make things correct first. Only then optimize. If measurements tell you that optimization is really necessary."}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1518640915, "post_id": 48795160, "comment_id": 84594130, "body": "@Cheersandhth.-Alf Solid advice. Would +1, if I could."}], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1518640728, "post_id": 48795725, "comment_id": 84594038, "body": "As Justing pointed out in the comments, this should work. With the original problem being the ctor, is it still correct to accept this answer or would it be better to delete the question?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1518641009, "post_id": 48795725, "comment_id": 84594169, "body": "@eike, That&#39;s your call."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1518640400, "creation_date": 1518640400, "answer_id": 48795725, "question_id": 48795160, "link": "https://stackoverflow.com/questions/48795160/avoid-implicit-argument-conversion-of-templated-operator-overload/48795725#48795725", "title": "Avoid implicit argument conversion of templated operator overload", "body": "<p>Add another <code>operator*</code> overload function where the LHS can be a number.</p>\n\n<pre><code>template&lt;class S&gt;\n   friend Vec&lt;T, N&gt; operator*(S b, Vec&lt;T, N&gt; a)\n   {\n      return a *= b;\n   }\n</code></pre>\n"}], "owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 48795725, "answer_count": 1, "score": -1, "last_activity_date": 1518640400, "creation_date": 1518638044, "last_edit_date": 1518639962, "question_id": 48795160, "link": "https://stackoverflow.com/questions/48795160/avoid-implicit-argument-conversion-of-templated-operator-overload", "title": "Avoid implicit argument conversion of templated operator overload", "body": "<p>My question was, how the displayed behaviour could be prevented, but as Cheersandhth.-Alf pointed out, I failed to include my constructor which caused this problem.\nThe constructor is now included and it is obvious, that forwarding the float (aswell as anything else) to the std::array ctor caused this problem.</p>\n\n<p>I would still like to be able to use this kind of initialization <code>Vec2 a = {1.f, 2.f}</code>, but the forwarding ctor is pretty dangerous, so I will avoid that.</p>\n\n<p>I have a Vec class derived from std::array which is supposed to implement the usual component-wise arithmetic operations via operator overloads. The operators should be implemented both for other Vecs of the same type and size (in that case operating on the corresponding vector components), aswell as integral and floating point types.</p>\n\n<p>e.g.</p>\n\n<pre><code>{1.f, 2.f, 3.f} * 2.f = {2.f, 4.f, 6.f}\n{1.f, 0.f} + {0.f, 1.f} = {1.f, 1.f}\n</code></pre>\n\n<p>Here is what I did (only shown for operator*) <a href=\"https://godbolt.org/g/PtCkzR\" rel=\"nofollow noreferrer\">https://godbolt.org/g/PtCkzR</a>:</p>\n\n<pre><code>template&lt;class T, size_t N&gt;\nclass Vec : public std::array&lt;T, N&gt;\n{\npublic:\n  template&lt;typename... S&gt;\n  Vec(S&amp;&amp;... params) : std::array&lt;T, N&gt;{std::forward&lt;S&gt;(params)...} { };\n\n  friend Vec&lt;T, N&gt;&amp; operator*=(Vec&lt;T, N&gt;&amp; a, const Vec&lt;T, N&gt;&amp; b)\n  {\n    std::transform(a.begin(), a.end(), b.begin(), a.begin(), std::multiplies&lt;&gt;());\n    return a;\n  }\n\n  template&lt;class S&gt;\n  friend Vec&lt;T, N&gt;&amp; operator*=(Vec&lt;T, N&gt;&amp; a, const S&amp; b)\n  {\n    std::transform(a.begin(), a.end(), a.begin(), [&amp;] (T x) { return x*b; });\n    return a;\n  }\n\n  template&lt;class S&gt;\n  friend Vec&lt;T, N&gt; operator*(Vec&lt;T, N&gt; a, const S&amp; b)\n  {\n    return a *= b;\n  }\n};\nusing Vec2 = Vec&lt;float, 2&gt;;\n</code></pre>\n\n<p>Now, when I want to multiply a vector with a float this happens:</p>\n\n<pre><code>Vec2 a{1.f, 1.f};\nauto b = a * 0.5f; // b = {.5f, .5f} &lt;- as expected\nauto c = 0.5f * a; // c = {.5f, 0.f} &lt;- what happened here?\n</code></pre>\n\n<p>This happens because the <code>0.5f</code> in the third line is implicitly converted to a Vec2 <code>{0.5f, 0.f}</code> and is then passed to the <code>operator*(Vec2, const Vec2&amp;)</code> overload.</p>\n"}, {"tags": ["c++", "compilation", "libcurl"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1518637149, "post_id": 48794904, "comment_id": 84592170, "body": "This is a compile not a link error, it&#39;s expecting the directory above <code>curl&#47;curl.h</code> to be on the include path."}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518637238, "post_id": 48794904, "comment_id": 84592216, "body": "Ahh ok, this is my first time compiling C++ with third party libraries. How do I fix that?"}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518637404, "post_id": 48794904, "comment_id": 84592299, "body": "Actually I did manage to google this--for anyone else looking, you can use -I (capital I) to link to C:\\curl-7.58.0-win32-mingw\\include  Thank you @RichardCritten!"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518637488, "post_id": 48794904, "comment_id": 84592344, "body": "You should now answer your own question"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "is_accepted": false, "score": 1, "last_activity_date": 1518643295, "creation_date": 1518643295, "answer_id": 48796438, "question_id": 48794904, "link": "https://stackoverflow.com/questions/48794904/using-libcurl-on-32bit-windows/48796438#48796438", "title": "Using libcurl on 32bit Windows", "body": "<p>This is a compile error. It's expecting the directory above curl/curl.h to be on the include path. </p>\n\n<p>For anyone else looking, you can use -I (capital I) to link to C:\\curl-7.58.0-win32-mingw\\include. Thank you @RichardCritten!</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518747237, "post_id": 48796773, "comment_id": 84642229, "body": "Ahhh, okay. I did read this, but I was under the impression curl-config was a command line tool that I had to run, and I couldn&#39;t figure out how to run it on windows. I don&#39;t have curl installed on the windows machine, I just have the items included in the zip file I downloaded from the link above."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518747338, "post_id": 48796773, "comment_id": 84642250, "body": "@E.Browning: It <i>is</i> a command-line tool that you have to run, just like <code>g++</code>. You should perform the installation properly. If really desperate you can stick to the hardcoded flags, but among them must be the include path."}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518747580, "post_id": 48796773, "comment_id": 84642302, "body": "How? There are no directions on the site for how to get curl-config installed--I was under the impression I just needed to use the items from the zip file and tell the compiler and linker where it all is. Am I wrong?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518747849, "post_id": 48796773, "comment_id": 84642367, "body": "You didn&#39;t tell the compiler where it all is. You did not provide the include path."}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518748028, "post_id": 48796773, "comment_id": 84642406, "body": "The specific page you linked does not contain installation instructions for libcurl. It contains usage instructions for libcurl assuming it&#39;s already on a system. Their download page doesn&#39;t, either, and when I&#39;ve downloaded the correct zip files that are precompiled for my system, it doesn&#39;t come with curl-config as far as I can see. Could you please provide more guidance if you are familiar with using libcurl on win32? I&#39;d be happy to get it installed properly if this way is incorrect."}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518748762, "post_id": 48796773, "comment_id": 84642564, "body": "Actually, I double checked because I knew I had read this somewhere. curl-config is not available on windows:  &quot;On unix-like machines, there&#39;s a tool named curl-config that gets installed with the rest of the curl stuff when &#39;make install&#39; is performed.&quot;  <a href=\"https://curl.haxx.se/libcurl/c/libcurl.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/libcurl.html</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518780949, "post_id": 48796773, "comment_id": 84655331, "body": "You have it if you&#39;re using MinGW (effectively producing a UNIX-like machine for your purposes here). Note that GCC is also for Unix-like machines yet you&#39;re already using that."}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1518800220, "post_id": 48796773, "comment_id": 84667102, "body": "Do I need to compile libcurl from scratch then? I&#39;m not sure what you mean by &quot;properly install&quot;."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1518644781, "creation_date": 1518644781, "answer_id": 48796773, "question_id": 48794904, "link": "https://stackoverflow.com/questions/48794904/using-libcurl-on-32bit-windows/48796773#48796773", "title": "Using libcurl on 32bit Windows", "body": "<p>As always, you should <strong>read <a href=\"https://curl.haxx.se/libcurl/c/libcurl-tutorial.html\" rel=\"nofollow noreferrer\">the documentation</a></strong>:</p>\n\n<blockquote>\n  <p><strong>Compiling the Program</strong></p>\n  \n  <p>Your compiler needs to know where the libcurl headers are located. Therefore you must set your compiler's include path to point to the directory where you installed them. The 'curl-config'[3] tool can be used to get this information:</p>\n  \n  <p>$ curl-config --cflags</p>\n</blockquote>\n\n<p>I haven't used libcurl but, based on this page, I think what you <em>should</em> be executing is this:</p>\n\n<pre><code>g++ -o test.exe -g \\\n   just_get_output.cpp http_requests.cpp \\\n   `curl-config --cflags` \\\n   `curl-config --libs`\n</code></pre>\n\n<p>Now the required parameters will be emplaced properly for you.</p>\n"}], "owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518644781, "creation_date": 1518636982, "last_edit_date": 1518637198, "question_id": 48794904, "link": "https://stackoverflow.com/questions/48794904/using-libcurl-on-32bit-windows", "title": "Using libcurl on 32bit Windows", "body": "<p>I'm trying to compile with libcurl on a 32bit windows install. I'm using mingw as a compiler. I downloaded libcurl from <a href=\"https://bintray.com/artifact/download/vszakats/generic/curl-7.58.0-win32-mingw.7z\" rel=\"nofollow noreferrer\">https://bintray.com/artifact/download/vszakats/generic/curl-7.58.0-win32-mingw.7z</a> and am using this to compile my project:</p>\n\n<pre><code>g++ -o test.exe -g just_get_output.cpp http_requests.cpp -L C:\\curl-7.58.0-win32-mingw\\lib -lcurl -lpsapi\n</code></pre>\n\n<p>All the libcurl code is in http_requests.cpp:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#define CURL_STATICLIB\n#include &lt;curl/curl.h&gt;\n\n// https://kukuruku.co/post/a-cheat-sheet-for-http-libraries-in-c/\n\nint http_post(char* url, char* data)\n{\n    CURL *curl;\n    CURLcode res;\n\n    curl_global_init(CURL_GLOBAL_ALL);\n\n    curl = curl_easy_init();\n    if(curl) \n    {\n        curl_easy_setopt(curl, CURLOPT_URL, url);\n        curl_easy_setopt(curl, CURLOPT_POSTFIELDS, data);\n        res = curl_easy_perform(curl);\n        if(res != CURLE_OK)\n        {\n            fprintf(stderr, \"curl_easy_perform() failed: %s\\n\", curl_easy_strerror(res));\n        }\n        curl_easy_cleanup(curl);\n    }\n    curl_global_cleanup();\n    return 0;\n}\n</code></pre>\n\n<p>My main body of code, heavily redacted:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;windows.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;psapi.h&gt;\n#include \"http_requests.cpp\"\n\nint main( void ) {\n    std::string info = \"test\";\n    std::string url = \"192.168.30.1:8080\";\n    http_post(url, info)\n    return 0;\n}\n</code></pre>\n\n<p>The error I'm getting:</p>\n\n<pre><code>Z:\\&gt;g++ -o test.exe -g just_get_output.cpp http_requests.cpp -L C:\\curl-7.58.0-win32-mingw\\lib\\libcurl.a -lcurl -lpsapi\nIn file included from just_get_output.cpp:11:0:\nhttp_requests.cpp:3:23: fatal error: curl/curl.h: No such file or directory\n #include &lt;curl/curl.h&gt;\n                       ^\ncompilation terminated.\nhttp_requests.cpp:3:23: fatal error: curl/curl.h: No such file or directory\n #include &lt;curl/curl.h&gt;\n                       ^\ncompilation terminated.\n</code></pre>\n\n<p>What is going on? My precompiled libcurl.a is in the right directory, I'm linking it properly using -L and -l, and I'm not sure what I'm missing.</p>\n"}, {"tags": ["c++", "ios", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 10632, "user_id": 3695849, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6328596740b816249439503ae5d9c032?s=128&d=identicon&r=PG&f=1", "display_name": "Teja Nandamuri", "link": "https://stackoverflow.com/users/3695849/teja-nandamuri"}, "edited": false, "score": 0, "creation_date": 1518640649, "post_id": 48795548, "comment_id": 84593996, "body": "I posted a question of what I&#39;m trying to do <a href=\"https://stackoverflow.com/questions/48792790/calculating-skew-angle-using-opencv-in-ios\" title=\"calculating skew angle using opencv in ios\">stackoverflow.com/questions/48792790/&hellip;</a>. In process of doing it, I encountered this error."}, {"owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "reply_to_user": {"reputation": 10632, "user_id": 3695849, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6328596740b816249439503ae5d9c032?s=128&d=identicon&r=PG&f=1", "display_name": "Teja Nandamuri", "link": "https://stackoverflow.com/users/3695849/teja-nandamuri"}, "edited": false, "score": 1, "creation_date": 1518644314, "post_id": 48795548, "comment_id": 84595777, "body": "hmmm, still I do not see why you need to go from BGR to greyscale and then to 4 channel image?"}], "tags": [], "owner": {"reputation": 9770, "user_id": 888688, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e1a439c266dcf5015373dbeae410ff5?s=128&d=identicon&r=PG", "display_name": "api55", "link": "https://stackoverflow.com/users/888688/api55"}, "is_accepted": false, "score": 1, "last_activity_date": 1518639627, "creation_date": 1518639627, "answer_id": 48795548, "question_id": 48794837, "link": "https://stackoverflow.com/questions/48794837/unable-to-change-the-mat-type-in-opencv/48795548#48795548", "title": "Unable to change the mat type in opencv", "body": "<p>It is written in the <a href=\"https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a3f356665bb0ca452e7d7723ccac9a810\" rel=\"nofollow noreferrer\">documentation of <code>convertTo</code></a></p>\n\n<p>Which states:</p>\n\n<blockquote>\n  <p>rtype desired output matrix type or, rather, the depth since the\n  number of channels are the same as the input has; if rtype is\n  negative, the output matrix will have the same type as the input.</p>\n</blockquote>\n\n<p>as you can see the number of channels WILL be the same.</p>\n\n<p>Not sure what exactly you want to achieve... but OpenCV does not know what data to put in the other channels extra and as far as I know there is no direct method.... if you want to duplicate the data you can use <code>cvtColor</code> with the <code>GRAY2RGBA</code> flag or something similar it will create the extra channels with the same values.... you can try also to use the <code>merge</code>or <code>mixChannels</code>... you should avoid resize + reshape, since the data must be:</p>\n\n<pre><code> C1 C2 C3 C4, C1 C2 C3 C4....\n</code></pre>\n\n<p>This means that the data is organize with the 4 values per pixel, thus the C1 should be from each of them. I think if you tell what are trying to do, the answer could be a little more accurate.</p>\n"}, {"tags": [], "owner": {"reputation": 5989, "user_id": 2283946, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/wvjew.png?s=128&g=1", "display_name": "GPPK", "link": "https://stackoverflow.com/users/2283946/gppk"}, "is_accepted": false, "score": 0, "last_activity_date": 1518639645, "creation_date": 1518639645, "answer_id": 48795551, "question_id": 48794837, "link": "https://stackoverflow.com/questions/48794837/unable-to-change-the-mat-type-in-opencv/48795551#48795551", "title": "Unable to change the mat type in opencv", "body": "<p>You could try using <a href=\"https://docs.opencv.org/2.4/modules/core/doc/operations_on_arrays.html?highlight=convertscaleabs#cv.ConvertScaleAbs\" rel=\"nofollow noreferrer\">convertScaleAbs</a></p>\n\n<pre><code>convertScaleAbs(image);\n</code></pre>\n"}], "owner": {"reputation": 10632, "user_id": 3695849, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6328596740b816249439503ae5d9c032?s=128&d=identicon&r=PG&f=1", "display_name": "Teja Nandamuri", "link": "https://stackoverflow.com/users/3695849/teja-nandamuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1518639645, "creation_date": 1518636750, "question_id": 48794837, "link": "https://stackoverflow.com/questions/48794837/unable-to-change-the-mat-type-in-opencv", "title": "Unable to change the mat type in opencv", "body": "<p>I'm trying to change the type of Mat to CV_8UC4 from CV_8UC1.</p>\n\n<pre><code>cv::Mat tempCVImg2;\ncv::Mat tempMat3;\ncvImage2.convertTo(tempCVImg2, CV_8UC4);\ntempMat2.convertTo(tempMat3, CV_8UC4);\n\nNSString *strType1 = [NSString stringWithCString:type2str(tempCVImg2.type()).c_str()\n                                        encoding:[NSString defaultCStringEncoding]];\nNSString *strType = [NSString stringWithCString:type2str(tempMat3.type()).c_str()\n                                       encoding:[NSString defaultCStringEncoding]];\n\ncv::cvtColor(cvImage2, tempMat2, cv::COLOR_BGR2GRAY);\n</code></pre>\n\n<p>It crashes at cvtColor as it is expecting CV_8UC4 but received CV_8UC1. </p>\n\n<p>Why cvImage2.convertTo(tempCVImg2, CV_8UC4); is not changing the type of mat cvImage2 ?</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "winapi", "heap-memory"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1518637316, "post_id": 48794836, "comment_id": 84592253, "body": "How about <code>HANDLE hndl = HeapCreate(0, 0, 0);</code>? Here is a MSDN example on <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee175819(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Enumerating Heap</a>. That being said I doubt it will be useful as-is."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1518637473, "post_id": 48794836, "comment_id": 84592336, "body": "i would like to get the handle to p"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1518637522, "post_id": 48794836, "comment_id": 84592373, "body": "Seems like a pretty reasonable question why the downvotes ?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518637541, "post_id": 48794836, "comment_id": 84592384, "body": "@MistyD Why not use a <a href=\"https://stackoverflow.com/questions/19053351/how-do-i-use-a-custom-deleter-with-a-stdunique-ptr-member\">smart pointer with a custom deleter</a>.  Then there is no need to remember the handle."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1518637560, "post_id": 48794836, "comment_id": 84592392, "body": "@MistyD I didn&#39;t downvote so I wouldn&#39;t know. It could be that what you are trying to achieve is somewhat questionable. WinAPI != C++."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518637580, "post_id": 48794836, "comment_id": 84592405, "body": "I do not understand where you are coming from. You should know your own heap, shouldn&#39;t you?"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518637699, "post_id": 48794836, "comment_id": 84592475, "body": "yes @SergeyA initially i did not overload new or delete operator now i have overloaded the new operator and now i would like to overload the delete operator."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518637962, "post_id": 48794836, "comment_id": 84592620, "body": "@MistyD with your overloaded operator <code>new</code>, how do you know which heap to allocate from?"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518637984, "post_id": 48794836, "comment_id": 84592636, "body": "@sergey let me add how my new works"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518637992, "post_id": 48794836, "comment_id": 84592641, "body": "You should keep track of the <code>HANDLE</code> and use <code>HeapAlloc</code> to get chunks of the heap as memory. See: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366599(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518638109, "post_id": 48794836, "comment_id": 84592713, "body": "@RichardCritten yeah that would be my last option"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1518638129, "post_id": 48794836, "comment_id": 84592721, "body": "@MistyD You are creating new heap for every allocation???? This is terrible!!!"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518638209, "post_id": 48794836, "comment_id": 84592761, "body": "@SergeyA are you suggesting use HeapCreate only when HeapAlloc is out heapSpace ?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518638268, "post_id": 48794836, "comment_id": 84592785, "body": "@MistyD from my link above <i>&quot;...The <code>HeapCreate</code> function creates a private heap object from which the calling process can allocate memory <b>blocks</b> by using the <code>HeapAlloc</code> function. ...&quot;</i> So 1 heap giving you lots of blocks."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1518639603, "post_id": 48794836, "comment_id": 84593378, "body": "@MistyD from what I learned so far, there is no need for you to even think about the <code>HeapCreate</code> and friends, or override new. Use library-provided <code>new</code> and <code>delete</code> and keep cool."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518686973, "post_id": 48794836, "comment_id": 84610255, "body": "What is the motivation for this? You are using Visual Studio, and Visual Studio&#39;s C++ Library implementation does exactly what you are trying to accomplish already. <code>operator new</code> and <code>operator delete</code> call into <code>malloc</code> and <code>free</code>, where the latter call <code>HeapAlloc</code> and <code>HeapFree</code>, respectively. What are you trying to accomplish by essentially re-inventing the wheel?"}], "answers": [{"comments": [{"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1518638530, "post_id": 48795256, "comment_id": 84592912, "body": "Thanks for explaining that Chris . What if HeapAlloc does not have anymore memory to allocate will I have to call HeapCreate again ?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 2, "creation_date": 1518638631, "post_id": 48795256, "comment_id": 84592960, "body": "@MistyD from the link <i>&quot;... If <code>dwMaximumSize</code> is 0, the heap can grow in size. The heap&#39;s size is limited only by the available memory....&quot;</i>"}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1518638671, "post_id": 48795256, "comment_id": 84592982, "body": "Ah that makes sense"}, {"owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "edited": false, "score": 2, "creation_date": 1518638691, "post_id": 48795256, "comment_id": 84592996, "body": "Unless you limit the heap, the heaps created will grow to consume &quot;all available memory&quot;. So if HeapAlloc fails, the process will probably have so little memory that you could not allocate an additional heap anyway."}, {"owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "edited": false, "score": 0, "creation_date": 1518639140, "post_id": 48795256, "comment_id": 84593182, "body": "Thanks for mentioning that. I fixed my new method and Ill remove my old code. Also I think ill probably have to keep a track of the handles probably in a map"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1518683435, "post_id": 48795256, "comment_id": 84608275, "body": "You don&#39;t need to do any of this. If HeapAlloc fails with out of memory, HeapCreate won&#39;t save you. You&#39;ll get out of memory too with the new heap. You should remove all of this code and use the standard allocator."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518688408, "post_id": 48795256, "comment_id": 84611130, "body": "<i>&quot;a user heap configured for no serialization, and/or low fragmentation&quot;</i> - An LFH and a non-serialized heap are mutually exclusive. You cannot create an LFH that doesn&#39;t serialize access, as <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366599.aspx\" rel=\"nofollow noreferrer\">documented</a>."}], "tags": [], "owner": {"reputation": 30603, "user_id": 27491, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/48cc12ad73f816bc5b115a9ca6965328?s=128&d=identicon&r=PG", "display_name": "Chris Becke", "link": "https://stackoverflow.com/users/27491/chris-becke"}, "is_accepted": true, "score": 4, "last_activity_date": 1518639414, "last_edit_date": 1518639414, "creation_date": 1518638371, "answer_id": 48795256, "question_id": 48794836, "link": "https://stackoverflow.com/questions/48794836/is-it-possible-to-obtain-a-handle-to-heap-memory-which-was-created-by-heapcreate/48795256#48795256", "title": "Is it possible to obtain a handle to heap memory which was created by HeapCreate so I can use HeapDestroy", "body": "<p>The normal use of Heap functions is to use <code>HeapCreate</code> when your app starts up, and to store the <code>HANDLE</code> in a global place.</p>\n\n<p>Or just use the process default heap by using <code>GetProcessHeap()</code></p>\n\n<p><code>HeapAlloc</code> and <code>HeapFree</code> are used to actually allocate and deallocate memory from that heap.</p>\n\n<p>And, finally, assuming you created a heap and arn't using the process heap, <code>HeapDestroy</code> on app shutdown to delete the whole heap and release any remaining leaked allocations.</p>\n\n<hr>\n\n<p>As the process heap that exists by default is unlimited, there is no real benefit to creating your own heap over just using the <code>GetProcessHeap</code> heap.</p>\n\n<p>If you have some specific allocation intensive task, then you could use a user heap configured for no serialization, and/or low fragmentation by overriding new and delete operators for that specific class (rather than generally).</p>\n\n<p>The possibilities are, well, the opposite of endless. </p>\n"}], "owner": {"reputation": 13049, "user_id": 990502, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a146d5cbd39e3d21fce1631a35767043?s=128&d=identicon&r=PG", "display_name": "MistyD", "link": "https://stackoverflow.com/users/990502/mistyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 1, "accepted_answer_id": 48795256, "answer_count": 1, "score": -1, "last_activity_date": 1518639414, "creation_date": 1518636746, "last_edit_date": 1518639158, "question_id": 48794836, "link": "https://stackoverflow.com/questions/48794836/is-it-possible-to-obtain-a-handle-to-heap-memory-which-was-created-by-heapcreate", "title": "Is it possible to obtain a handle to heap memory which was created by HeapCreate so I can use HeapDestroy", "body": "<p>I am trying to overload the operator delete. The signature of this delete is \nas follows. Now the memory p is basically a heap spot that was created using HeapCreate/HeapAlloc</p>\n\n<pre><code>void operator delete(void* p)\n{\n   HANDLE hndl =//How to get handle of p ?\n   HeapDestroy(hndl); \n}\n</code></pre>\n\n<p>Is there a better way that I can approach this ? Will I need to keep a track of the handle every time I use <code>HeapCreate</code> so I can use it in <code>HeapDestroy</code></p>\n"}, {"tags": ["c++", "strlen", "strcat"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518635262, "post_id": 48794486, "comment_id": 84591185, "body": "<i>&quot;So should I be returning i + 1 or is 6 correct?&quot;</i> Totally depends on how to use <code>i</code> or <code>i + 1</code> further."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1518635265, "post_id": 48794486, "comment_id": 84591187, "body": "What is your expectation for <code>myStrLen(&quot;&quot;)</code> ? 0 or 1 ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 5, "creation_date": 1518635279, "post_id": 48794486, "comment_id": 84591202, "body": "<code>strlen()</code> doesn&#39;t count the null terminator."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1518635296, "post_id": 48794486, "comment_id": 84591215, "body": "Tell your professor he should be teaching <code>std::string</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 0, "creation_date": 1518635439, "post_id": 48794486, "comment_id": 84591290, "body": "@Ron I&#39;d support that!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1518635473, "post_id": 48794486, "comment_id": 84591312, "body": "Disagree. The instructor should be honest about teaching C."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 2, "creation_date": 1518635473, "post_id": 48794486, "comment_id": 84591311, "body": "No need to ask us. You could simply compare your results against the value returned by the actual <code>strlen()</code>.  Or, even better, <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow noreferrer\">read the manual for <code>strlen</code></a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518635544, "post_id": 48794486, "comment_id": 84591343, "body": "@user4581301 Well, if they claim to teach c++ (and most of them seem to do) :-P ..."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1518635589, "post_id": 48794486, "comment_id": 84591360, "body": "@TheDude They&#39;re teaching computer science <i>using</i> C++. Are you claiming that you can&#39;t use a high-level language when teaching low-level concepts?"}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "edited": false, "score": 0, "creation_date": 1518635617, "post_id": 48794486, "comment_id": 84591379, "body": "@TheDude I am just passing a word through the function and having it return it&#39;s size as strlen would if you used it as a function."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518635622, "post_id": 48794486, "comment_id": 84591384, "body": "@user4581301 Haha, nice one. So true."}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1518635649, "post_id": 48794486, "comment_id": 84591401, "body": "@Jarod42 I would expect 0 since it is empty, but I could potentially see 1 as it still holds null?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1518635697, "post_id": 48794486, "comment_id": 84591431, "body": "@Barmar <i>&quot;Are you claiming that you can&#39;t use a high-level language when teaching low-level concepts?&quot;</i> No, but <i>&quot;low level concepts&quot;</i> belong to the <i>advanced classes&#39; stuff</i>, not the <i>beginner class</i> ones."}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518635831, "post_id": 48794486, "comment_id": 84591510, "body": "@Barmar AHH, I understand. So when I declared my word size as a const int, it accounts for the null; however, thats just for the size and not for strlen"}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 1, "creation_date": 1518635857, "post_id": 48794486, "comment_id": 84591526, "body": "Are you learning about C++ or &quot;C with classes&quot;?"}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "edited": false, "score": 0, "creation_date": 1518635926, "post_id": 48794486, "comment_id": 84591554, "body": "The official answer, according to the syllabus is C++. I am in my second semester, so the class above intro"}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 3, "creation_date": 1518636029, "post_id": 48794486, "comment_id": 84591604, "body": "Supplement your formal education with these <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">C++ books</a>. C++ is a world of joy. It&#39;s just the academia didn&#39;t get the memo yet."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1518636076, "post_id": 48794486, "comment_id": 84591627, "body": "I think these C++ courses taught in this manner are designed for students to turn to Java or Python instead of C++."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1518636317, "post_id": 48794486, "comment_id": 84591737, "body": "@Vincent I&#39;m not sure what you mean by word size. If you&#39;re talking about the <code>sizeof</code> operator, it doesn&#39;t tell you the string length, it tells you how much memory is used for the whole variable or array. That includes the null terminaor, and padding bytes in other data types."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518636321, "post_id": 48794486, "comment_id": 84591742, "body": "@Vincent Well, if you insist using raw arrays/c-style character literals as it&#39;s a requirement not to fail that class: What are you considering a <i>&quot;word&quot;</i>? Should that word include the whitespace character or not. Should the determined string length be <code>0</code> if there are only whitespaces? Should the <code>&#39;\\0&#39;</code> counted? How will you use the result of your function?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1518636345, "post_id": 48794486, "comment_id": 84591751, "body": "Sounds to me like a decent time to teach C++&#39;s C-like underbelly. You need to know this stuff in order to survive the coming Algorithms and Data Structures course.  Assuming this isn&#39;t the Algorithms and Data Structures course. If it is, draw the linked list before you start coding. Seriously. Pencil and paper. Save you tonnes of debugging."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "edited": false, "score": 0, "creation_date": 1518636500, "post_id": 48794486, "comment_id": 84591832, "body": "You should make the signature of your version the same as <code>strlen</code> (at least that would be IMO a good start). i.e. <code>size_t myStrlen(const char* str);</code>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1518636526, "post_id": 48794486, "comment_id": 84591847, "body": "@user4581301 I bet a cup of coffee that one of the next requirements will be &quot;you cannot use std::string&quot;."}, {"owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "edited": false, "score": 0, "creation_date": 1518636564, "post_id": 48794486, "comment_id": 84591862, "body": "So what I did was just run it against the function I am trying to recreate with my own code as the assignment states and it seems to match. If you guys are confused on my word, im sorry. Thanks for the help! Here is the source code I was referring to. <a href=\"https://pastebin.com/sTBzmFjY\" rel=\"nofollow noreferrer\">pastebin.com/sTBzmFjY</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518636859, "post_id": 48794486, "comment_id": 84592015, "body": "@PaulMcKenzie I&#39;m not going to take that bet, but if the goal of the assignment is to teach how to make a <code>std::string</code> the restriction makes sense. Otherwise... Meh. But I try to save my disrespect for &quot;Welcome to CS101. First class, so let&#39;s do POINTERS!&quot; I&#39;m a teach logic first kinda guy."}, {"owner": {"reputation": 8101, "user_id": 9199167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BqdLV.jpg?s=128&g=1", "display_name": "Max Vollmer", "link": "https://stackoverflow.com/users/9199167/max-vollmer"}, "edited": false, "score": 0, "creation_date": 1518636922, "post_id": 48794486, "comment_id": 84592046, "body": "@Vincent I got confused first when you mentioned words. I&#39;d recommend not to call strings of characters in a programming context &quot;word&quot;, since &quot;word&quot; refers to the natural unit of data in a particular processor architecture. The word size is what is refered to by 32bit or 64bit architecture. On a 32-bit system a word is 4 bytes. It has nothing to do with strings. Just say &quot;string&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": true, "score": 4, "last_activity_date": 1518635986, "creation_date": 1518635986, "answer_id": 48794672, "question_id": 48794486, "link": "https://stackoverflow.com/questions/48794486/byte-of-word-returns-one-less-than-what-it-should-be/48794672#48794672", "title": "Byte of word returns one less than what it should be", "body": "<p>If your professor tells you to write a function that behaves exactly as <a href=\"http://en.cppreference.com/w/cpp/string/byte/strlen\" rel=\"nofollow noreferrer\"><code>strlen</code></a>, then it shall not count the string termination character:</p>\n\n<blockquote>\n  <p><strong>std::size_t strlen( const char* str );</strong></p>\n  \n  <p>Returns the length of the given byte string, that is, the number of\n  characters in a character array whose first element is pointed to by\n  str up to and not including the first null character. ...</p>\n</blockquote>\n\n<p>So returning <code>i</code> is correct, besides the fact that the \"original\" <code>strlen</code> takes a const input parameter and returns a <code>size_t</code>...</p>\n"}], "owner": {"reputation": 91, "user_id": 8291702, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e1255920f13f73e6f123e7624b9200c6?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent", "link": "https://stackoverflow.com/users/8291702/vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 48794672, "answer_count": 1, "score": 1, "last_activity_date": 1518649090, "creation_date": 1518635149, "last_edit_date": 1518649090, "question_id": 48794486, "link": "https://stackoverflow.com/questions/48794486/byte-of-word-returns-one-less-than-what-it-should-be", "title": "Byte of word returns one less than what it should be", "body": "<p>My professor is having us make our own version of the functions mystrcat, mystrlen and mystrcopy. I have a problem where the word is returning the wrong amount of bytes. Or, rather, I think it is. </p>\n\n<p>The phrase: <code>\"HELLO WORLD!\"</code> , if I am not wrong, should return 13 bytes? Like in: </p>\n\n<pre><code>const char char_literal[] =\n   { 'H', 'E', 'L', 'L', 'O', ' ', 'W', 'O', 'R', 'L', 'D', '!', '\\0' };\n  //  1    2    3    4    5    6    7    8    9    10   11   12   13 \n</code></pre>\n\n<p>I wrote the function <code>myStrLen()</code> that returns (<code>{ 'H', 'E', 'L', 'L', 'O', ' '}</code>) as <code>6</code>, but because it is alone, there should be a <code>'\\0'</code> at the end right?<br>\nSo should I be returning <code>i + 1</code> or is <code>6</code> correct?</p>\n\n<pre><code>int myStrLen(char stringInput[]){\n    for(int i = 0; ; i++){\n        if(stringInput[i] == '\\0'){\n            return i;\n</code></pre>\n"}, {"tags": ["c++", "templates", "type-deduction", "c++17"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1518634946, "post_id": 48794393, "comment_id": 84591021, "body": "What problem? If you don&#39;t like it, don&#39;t use it. You can still spell out the template arguments. Nobody took it away."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1518634999, "post_id": 48794393, "comment_id": 84591045, "body": "@StoryTeller: You still have to read other people&#39;s code. I don&#39;t agree with his notion that this is bad &quot;UX&quot;, but you can&#39;t merely say &quot;don&#39;t like, don&#39;t use&quot; when you have to deal with people who <i>do</i> like it."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1518635117, "post_id": 48794393, "comment_id": 84591112, "body": "@NicolBolas - I don&#39;t recall ever working on a project that didn&#39;t have some style guidelines. If it means so much to the OP, they should speak out. And anyway, nothing they propose here will ever make code already written this way unwrite itself."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1518635295, "post_id": 48794393, "comment_id": 84591213, "body": "I&#39;m not sure what the &quot;user experience&quot; problem refers.  The <code>t1 == t2;</code> is a compiler error, as it ought to be.  The <code>t2 == t3;</code> is not a compiler error, also working correctly."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1518635298, "post_id": 48794393, "comment_id": 84591217, "body": "If you write variable declarations in the <code>auto varname = ...;</code> form, this isn&#39;t as much of a problem, as <code>auto varname = std::tuple{1, 2};</code> looks like <code>auto varname = std::make_tuple(1, 2);</code> if you squint your eyes right"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1518635472, "post_id": 48794393, "comment_id": 84591310, "body": "I dont really understand what is specific to being able to write <code>Myple t1(1);</code>. Isnt it the same with any <code>auto</code>? If you see in code <code>auto x = foo();</code> and <code>auto y = bar();</code> then either you know of what types <code>x</code> and <code>y</code> are or the compiler will tell you latest when you try <code>x= y;</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518635850, "post_id": 48794393, "comment_id": 84591523, "body": "btw that comment was really a question (and not aiming to suggest that your question is moot). I guess you are concerned about coders being used to have variables of same type when they see declarations like <code>T x; T y;</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1518637797, "post_id": 48794393, "comment_id": 84592531, "body": "I do not see this a problem, I see it is a benefit. For me, <code>std::tuple x</code> is much better than <code>std::tuple&lt;auto..&gt; x</code>. Less typing, better signal to noise."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1518638688, "post_id": 48794393, "comment_id": 84592993, "body": "Fyi, if you&#39;re interesting in writing such a proposal, just having <code>tuple&lt;...&gt; a(1);</code> be the same thing as <code>tuple a(1);</code> doesn&#39;t have much merit. But having <code>tuple&lt;int, ...&gt; b(2.0, 3, 4)</code> be a <code>tuple&lt;int, int, int&gt;</code> might have potential. This would end up allowing the <code>tuple&lt;...&gt;</code> syntax you want, but in a way that adds new functionality."}], "answers": [{"comments": [{"owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "edited": false, "score": 0, "creation_date": 1518636506, "post_id": 48794626, "comment_id": 84591837, "body": "The point of the idea was to make it unnecessary to enumerate template parameters. But I think it created a different (readability) problem, when 2 vars look like they have same type and actually they don&#39;t. That&#39;s why I would prefer to see Myple&lt;auto...&gt;. It would tell me that the type I see here is not what it looks like."}, {"owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "edited": false, "score": 0, "creation_date": 1518636847, "post_id": 48794626, "comment_id": 84592010, "body": "And I realize that you cannot revert C++17 standard because it&#39;s out. But it&#39;s not impossible to add a new way to use this feature."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "edited": false, "score": 0, "creation_date": 1518639448, "post_id": 48794626, "comment_id": 84593313, "body": "@Alek86: &quot;<i>The point of the idea was to make it unnecessary to enumerate template parameters.</i>&quot; I gave you a <i>direct quote</i> from the proposal as to what the &quot;point of the idea was&quot;. You may have had a different idea, but not the people who actually made this proposal and got it standardized. &quot;<i>it&#39;s not impossible to add a new way to use this feature.</i>&quot; Which will change <i>nothing</i> about code that uses it the old way, so the UX &quot;problem&quot; you feel exists will still exist. C++ does not need more ways to do the same thing."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 5, "last_activity_date": 1518635801, "creation_date": 1518635801, "answer_id": 48794626, "question_id": 48794393, "link": "https://stackoverflow.com/questions/48794393/c-17-class-template-argument-type-deduction-readability/48794626#48794626", "title": "C++ 17 class template argument type deduction - readability", "body": "<blockquote>\n  <p>Are there any proposals how to eliminate this \"user experience\" problem?</p>\n</blockquote>\n\n<p>As of this writing, there have been <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/\" rel=\"noreferrer\">no proposal written suggesting that this be changed</a>. C++17 is done, finished, and out the door. Any such proposals removing this feature would therefore be backwards-incompatible with C++17.</p>\n\n<p>And therefore, such proposals would need to justify themselves with more than merely calling it a \"'user experience' problem\".</p>\n\n<p>It is clear from the <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2013/n3602.html\" rel=\"noreferrer\">earliest revisions of the class template deduction proposal</a> that the <em>goal</em> was to create the UX which you consider bad, to allow class template arguments to be deduced \"exactly\" like function template arguments. Even when <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2015/n4471.html\" rel=\"noreferrer\">\"challenges\" with the proposal were addressed</a>, there did not seem to be any suggestion that explicit syntax beyond the template name be required to invoke class template argument deduction.</p>\n\n<p>In short, the goal of the proposal is to <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2015/p0091r0.html\" rel=\"noreferrer\">allow constructors to \"deduce their template parameters 'like we expect from other functions and methods,'\"</a>.</p>\n\n<p>So it is not merely that there have been no proposals to eliminate this \"'user experience' problem\"; it's that this \"'user experience' problem\" <em>is the whole point</em> of the idea.</p>\n"}], "owner": {"reputation": 1377, "user_id": 616363, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ba52fe6209405eee462a3f059316b5ba?s=128&d=identicon&r=PG", "display_name": "Alek86", "link": "https://stackoverflow.com/users/616363/alek86"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1518640445, "answer_count": 1, "score": 0, "last_activity_date": 1518636732, "creation_date": 1518634794, "last_edit_date": 1518636732, "question_id": 48794393, "link": "https://stackoverflow.com/questions/48794393/c-17-class-template-argument-type-deduction-readability", "closed_reason": "Opinion-based", "title": "C++ 17 class template argument type deduction - readability", "body": "<p>For compilers that support this feature you can write</p>\n\n<pre><code>std::tuple t1(1);\n</code></pre>\n\n<p>but in my opinion in this case the readability of this program is hurt.</p>\n\n<p>For instance if you have own class that behaves similarly to std::tuple, readers don't see that different instances of this template class could be of different type</p>\n\n<pre><code>Myple t1(1);\nMyple t2(1, 2);\nMyple t3(1, 3);\n...\nt1 == t2; // compiler error, t1 and t2 are actually of different types\nt2 == t3; // no error\n</code></pre>\n\n<p><strong>Are there any proposals how to eliminate this \"readability\" problem?</strong></p>\n\n<p>My suggestion would be to make programmers write something like this</p>\n\n<pre><code>Myple&lt;auto...&gt; t1(1);\n</code></pre>\n\n<p>( or even Myple&lt;...> t1(1); )</p>\n\n<p>so the program readers will be at least aware, cause they know that 2 different auto's can be of different types.</p>\n\n<p>But I'm sure there could be smarter solutions.</p>\n\n<p><strong>Edit</strong></p>\n\n<p>Changed \"user experience\" to \"readability\".</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 5668, "user_id": 712526, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/06e3c4065e9d08da698b4f4de3959294?s=128&d=identicon&r=PG", "display_name": "jpaugh", "link": "https://stackoverflow.com/users/712526/jpaugh"}, "edited": false, "score": 0, "creation_date": 1518634822, "post_id": 48794325, "comment_id": 84590960, "body": "Related: <a href=\"https://stackoverflow.com/q/6496545/712526\">trivial vs. standard layout vs. POD</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1518634933, "post_id": 48794325, "comment_id": 84591010, "body": "I was under the impression that a trivial type had to be trivially copyable, while <code>std::atomic</code> types are not copyable."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518634994, "post_id": 48794325, "comment_id": 84591044, "body": "I&#39;m curious -- did you put in the <code>static_assert</code>, or did the library authors do this?  If it&#39;s the authors, then they must have had some knowledge that <code>std::atomic</code> is not guaranteed to pass the <code>std::is_trivial</code> test."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 8, "creation_date": 1518635041, "post_id": 48794325, "comment_id": 84591070, "body": "<code>std::atomic</code> used to be trivial, but isn&#39;t anymore. See <a href=\"https://stackoverflow.com/a/29759556/3002139\">stackoverflow.com/a/29759556/3002139</a> for a great and detailed explanation."}, {"owner": {"reputation": 5683, "user_id": 61505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6a78b84ea1ae9d44348db664828c800?s=128&d=identicon&r=PG", "display_name": "KindDragon", "link": "https://stackoverflow.com/users/61505/kinddragon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1518635107, "post_id": 48794325, "comment_id": 84591106, "body": "@PaulMcKenzie <a href=\"https://github.com/facebook/folly/blob/8635022f0c4005dc218dd74cdee768126c954763/folly/experimental/hazptr/hazptr-impl.h#L316-L318\" rel=\"nofollow noreferrer\">github.com/facebook/folly/blob/&hellip;</a>"}, {"owner": {"reputation": 5683, "user_id": 61505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6a78b84ea1ae9d44348db664828c800?s=128&d=identicon&r=PG", "display_name": "KindDragon", "link": "https://stackoverflow.com/users/61505/kinddragon"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518635172, "post_id": 48794325, "comment_id": 84591137, "body": "@BaummitAugen Thanks. You can post it as answer. Good enough for me"}], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 12, "last_activity_date": 1518636288, "last_edit_date": 1518636288, "creation_date": 1518635333, "answer_id": 48794533, "question_id": 48794325, "link": "https://stackoverflow.com/questions/48794325/why-stdatomic-is-not-trivial-type-in-only-visual-c/48794533#48794533", "title": "Why std::atomic is not trivial type in only Visual C++?", "body": "<p><code>std::atomic</code> used to be trivial (which requires Trivially Copyable), but isn't anymore. See <a href=\"http://stackoverflow.com/a/29759556/3002139\">this answer</a> for a great and detailed explanation for how and why that changed.</p>\n\n<p>This makes VC compliant and gcc and clang non-compliant at least in C++17. As this was considered a defect by the committee, VC shows the desired behavior for C++11 and C++14, too.</p>\n\n<p>For future reference, the relevant defect is <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1734\" rel=\"noreferrer\">DR #1734</a>, you can see the implementation status for clang <a href=\"https://clang.llvm.org/cxx_dr_status.html\" rel=\"noreferrer\">here</a>. I'm not aware of an equivalent status page for gcc.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1518989056, "post_id": 48856395, "comment_id": 84716995, "body": "I know absolutely nothing about the Folly library, but having the assertion for some compilers but not all seems obviously wrong.  Either the library depends on triviality, in which case the assertion should stay and prevent building on corrected toolchains until the library is changed to work right with the new behavior (although it should move so it doesn&#39;t affect users who merely include the file), or the library doesn&#39;t require triviality, in which case the assertion is wrong on all compilers.  Am I missing something?"}], "tags": [], "owner": {"reputation": 21, "user_id": 2509976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6765c2750c8558cd0d213c3728d93afb?s=128&d=identicon&r=PG", "display_name": "Andrew Steven Krieger", "link": "https://stackoverflow.com/users/2509976/andrew-steven-krieger"}, "is_accepted": false, "score": 1, "last_activity_date": 1518986703, "creation_date": 1518986703, "answer_id": 48856395, "question_id": 48794325, "link": "https://stackoverflow.com/questions/48794325/why-stdatomic-is-not-trivial-type-in-only-visual-c/48856395#48856395", "title": "Why std::atomic is not trivial type in only Visual C++?", "body": "<p>The assert in <code>folly</code> was disabled for MSVC in <a href=\"https://github.com/facebook/folly/commit/a47a5531edcb95a27f987e810272ba94a9b51162\" rel=\"nofollow noreferrer\">https://github.com/facebook/folly/commit/a47a5531edcb95a27f987e810272ba94a9b51162</a></p>\n"}], "owner": {"reputation": 5683, "user_id": 61505, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f6a78b84ea1ae9d44348db664828c800?s=128&d=identicon&r=PG", "display_name": "KindDragon", "link": "https://stackoverflow.com/users/61505/kinddragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "accepted_answer_id": 48794533, "answer_count": 2, "score": 7, "last_activity_date": 1518986703, "creation_date": 1518634582, "question_id": 48794325, "link": "https://stackoverflow.com/questions/48794325/why-stdatomic-is-not-trivial-type-in-only-visual-c", "title": "Why std::atomic is not trivial type in only Visual C++?", "body": "<p>The Folly library requires that <code>std::atomic&lt;hazptr_obj*&gt;</code> should be a trivial type. This works with gcc and clang, but failing for Visual C++ even for <code>std::atomic&lt;int&gt;</code>. Why does <code>std::is_trivial</code> return <code>false</code>?</p>\n\n<pre><code>#include &lt;type_traits&gt;\n#include &lt;atomic&gt;\n\nstatic_assert(\n    std::is_trivial&lt;std::atomic&lt;int&gt;&gt;::value,\n    \"std::atomic&lt;int&gt; not trivial\");\n</code></pre>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1518709005, "last_edit_date": 1518709005, "creation_date": 1518705242, "answer_id": 48809684, "question_id": 48794303, "link": "https://stackoverflow.com/questions/48794303/qscriptengine-evaluate-square-or-cube-of-number-c/48809684#48809684", "title": "QScriptEngine evaluate square or cube of number c++", "body": "<p>If you're OK with using the <code>Math.pow</code> function directly, then you should just use it: <code>auto expression = QStringLiteral(\"Math.pow(2, 3)\")</code>.</p>\n\n<p>If you want to rewrite an expression like <code>2^3</code> to be valid javascript, you need a parser. You'd be rewriting the infix syntax <code>expr1^expr2</code> to prefix syntax <code>Math::pow(expr1, expr2)</code>. This <em>cannot</em> be done by a simple regexp.</p>\n\n<p>The parser could be written in JavaScript itself. Perhaps you could reuse <a href=\"http://jsep.from.so/annotated_source/jsep.html\" rel=\"nofollow noreferrer\">jsep</a>, modified to take the exponentiation operator, and use it to create an AST of the expression, and then you can either rewrite it to become valid javascript with <code>Math.pow</code> <em>or</em> evaluate it based on the AST.</p>\n\n<p>jsep makes it trivial to add custom operators - this example is straight from their README:</p>\n\n<pre><code>jsep.addBinaryOp(\"^\", 10);\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7612384, "user_type": "registered", "profile_image": "https://graph.facebook.com/1230514767046955/picture?type=large", "display_name": "Artyom ", "link": "https://stackoverflow.com/users/7612384/artyom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518709005, "creation_date": 1518634500, "question_id": 48794303, "link": "https://stackoverflow.com/questions/48794303/qscriptengine-evaluate-square-or-cube-of-number-c", "title": "QScriptEngine evaluate square or cube of number c++", "body": "<p>I need to evaluate cube or square of number in QScriptEngine </p>\n\n<pre><code>QString expression_string(\"2 * 2 * 2\"); // not like this but 2^3 \nQScriptEngine expression;\ndouble my_val=expression.evaluate(expression_string).toNumber();\n</code></pre>\n\n<p>how to implement 2 * 2 like 2 ^ 2 in this way ?</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 3, "creation_date": 1518640541, "post_id": 48794126, "comment_id": 84593935, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/20000255/calling-a-qml-function-from-c\">Calling a QML function from C++</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1518641392, "post_id": 48794126, "comment_id": 84594356, "body": "Where is your main function? I think the QQmlEngine that you use in MySlot is different from the one you use in the main"}, {"owner": {"reputation": 4406, "user_id": 4911665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f4f3ec7f68e33af504b9055abed79b7?s=128&d=identicon&r=PG&f=1", "display_name": "talamaki", "link": "https://stackoverflow.com/users/4911665/talamaki"}, "edited": false, "score": 0, "creation_date": 1518675131, "post_id": 48794126, "comment_id": 84604488, "body": "Your timer is creating a new engine and speedometer everytime it time outs. You can pass the engine that loaded your UI to your timer as reference and then find the root object and then find child object from root object&#39;s children using object name."}], "owner": {"reputation": 11, "user_id": 9361611, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UiI8V7mOjMY/AAAAAAAAAAI/AAAAAAAAAcU/dt35XvMHruE/photo.jpg?sz=128", "display_name": "Serkan", "link": "https://stackoverflow.com/users/9361611/serkan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1032, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518643246, "creation_date": 1518633727, "last_edit_date": 1518643246, "question_id": 48794126, "link": "https://stackoverflow.com/questions/48794126/invoke-a-qml-function-from-c", "title": "Invoke a QML function from C++", "body": "<p>I am using Qt on my RPI3. \nI found a QML example which is Tesla Car instrument cluster. You can access full code from <a href=\"https://www.youtube.com/watch?v=h8Iwe4iJXOc\" rel=\"nofollow noreferrer\">here</a> or <a href=\"https://github.com/alex-adam/Tesla\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>I successfully created a project and debugged it. Now I am trying to change a value in the QML code from C++ side. There is a timer in my C++ code every 30 seconds I am trying to change speed value in the QML code with using <code>QMetaObject::inokeMethod():</code> function. I read all examples in <a href=\"http://doc.qt.io/qt-5/qtqml-cppintegration-interactqmlfromcpp.html#invoking-qml-methods\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Here is my C ++ code</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#ifndef MYTIMER_H\n#define MYTIMER_H\n#include &lt;QGuiApplication&gt;\n#include &lt;QQmlApplicationEngine&gt;\n#include &lt;QQmlComponent&gt;\n#include &lt;QTimer&gt;\n#include &lt;QtDebug&gt;\nclass MyTimer : public QObject\n{\n    Q_OBJECT\npublic:\n    MyTimer();\n    QTimer *timer;\n    int i=0;\npublic slots:\n    void MySlot();\n};\n#endif // MYTIMER_H\n</code></pre>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"mytimer.h\"\nMyTimer::MyTimer()\n{\n    timer = new QTimer(this);\n    connect(timer,SIGNAL(timeout()),this,SLOT(MySlot()));\n    timer-&gt;start(10000);\n}\n\nvoid MyTimer::MySlot()\n{\n    i++;\n    if(i==3)\n    {\n        i=0;\n        QQmlEngine engine;\n        QQmlComponent     component(&amp;engine,QUrl(QStringLiteral(\"qrc:/Speedometer.qml\")));\n        QObject *object = component.create();\n        QVariant speeds=100;\n        QVariant returnedValue;\n        QMetaObject::invokeMethod(object,\"speedNeedleValue\",\n                                   Q_RETURN_ARG(QVariant, returnedValue),\n                                   Q_ARG(QVariant, speeds));\n         qDebug() &lt;&lt; \"From QML\"&lt;&lt; returnedValue.toString();\n         delete object;\n    }\n}\n</code></pre>\n\n<p>Here is QML code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>import QtQuick 2.4\nimport QtGraphicalEffects 1.0\nRectangle {\n    color: \"transparent\"\n              SpeedNeedle {\n                  id: speedoNeedle\n                       anchors.verticalCenterOffset: 0\n                       anchors.centerIn: parent\n                       focus: true\n                       Keys.onPressed: {\n                                if (event.key == Qt.Key_A) {\n                                    speedNeedleValue(100)\n                                    drive()\n                               }\n              }\n\n              function speedNeedleValue(speeds) {\n                  speedoNeedle.value = speeds\n                  return \": I am here\"\n              }\n }\n</code></pre>\n\n<p>If I press the \"A\" button my <code>speedNeedleValue();</code> function is working. And in debug page I can get the return data <code>return \": I am here\"</code>. \nProblem is I can't set the <code>speeds</code> argument with invoke function.\nHere is the debug page:\n\"<a href=\"https://preview.ibb.co/kqpvWS/rpi.png\" rel=\"nofollow noreferrer\">https://preview.ibb.co/kqpvWS/rpi.png</a>\"\nEvery time interrupt I can get \"I am here\". but I also get \" JIT is disabled.... \" warning too.\nThank you for your answers.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1518632510, "post_id": 48793806, "comment_id": 84589745, "body": "You have 3 pairs of <code>[]</code> in your declaration, but only 2 when you try to print - that can&#39;t give you what you want"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1518632544, "post_id": 48793806, "comment_id": 84589765, "body": "The string data you pass to initialize that array does not match the declared size for it. You have a 3D array (6x3x6) but you only pass in 15 strings (6 + 3 + 6). Are you sure you understand that syntax correctly?"}, {"owner": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "edited": false, "score": 0, "creation_date": 1518632545, "post_id": 48793806, "comment_id": 84589766, "body": "what are you getting as output?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 2, "creation_date": 1518632569, "post_id": 48793806, "comment_id": 84589787, "body": "Don&#39;t use raw arrays in c++. Your <code>Champions</code> variable should be declared as <code>std::array&lt;std::array&lt;std::array&lt;std::string,6&gt;,3&gt;,6&gt; Champions;</code> (supposed you really want a 3d array)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1518632753, "post_id": 48793806, "comment_id": 84589881, "body": "@TheDude Close, but I think it&#39;s just <code>std::vector&lt;std::vector&lt;std::string&gt;&gt;&gt;</code> as the internals have different lengths and the fixed length aspect isn&#39;t especially relevant here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1518632947, "post_id": 48793806, "comment_id": 84589973, "body": "@tadman TBH. I&#39;d write a small wrapper class using a 1 dimensional <code>std::vector&lt;string&gt;</code> internally, and handle the variable length of dimensions mapped to indices internally."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1518632957, "post_id": 48793806, "comment_id": 84589975, "body": "<code>string [6][3][6]</code> does not mean &quot;an array with three string arrays of size 6, 3, and 6, respectively&quot;. It&#39;s an array of arrays of arrays of strings. <code>Champions[choice1][choice2]</code> is not a string but an array with six strings."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518633030, "post_id": 48793806, "comment_id": 84590006, "body": "@TheDude That sounds like a pretty tidy solution to this."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1518632689, "post_id": 48793860, "comment_id": 84589853, "body": "The <code>[6][3][6]</code> notation was an attempt to make an array with length 6, 3, and 6 sub-arrays. This is still wildly off base and would benefit from <code>std::vector</code>."}], "tags": [], "owner": {"reputation": 558, "user_id": 9334588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/50ed88baf3c381b39061f116b808c050?s=128&d=identicon&r=PG&f=1", "display_name": "J K", "link": "https://stackoverflow.com/users/9334588/j-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1518632808, "last_edit_date": 1518632808, "creation_date": 1518632608, "answer_id": 48793860, "question_id": 48793806, "link": "https://stackoverflow.com/questions/48793806/when-calling-for-an-array-my-array-names-do-not-print-out-rather-a-shamble-of/48793860#48793860", "title": "When calling for an array my array names do not print out, rather, a shamble of numbers and letters take their place", "body": "<p>try change:</p>\n\n<pre><code>string Champions[6][3][6] = { { \"Varus\", \"Jinx\", \"Caitlyn\", \"Kogmaw\", \n\"Twitch\", \"Kalista\" },\n{ \"Jax\", \"Kindred\", \"Tryndamere\" }, \n{\"Ekko\", \"Vladimir\", \"Veigar\", \"Cassiopeia\", \"Anivia\", \"Fizz\"} };\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>string Champions[3][6] = { { \"Varus\", \"Jinx\", \"Caitlyn\", \"Kogmaw\", \n\"Twitch\", \"Kalista\" },\n{ \"Jax\", \"Kindred\", \"Tryndamere\" }, \n{\"Ekko\", \"Vladimir\", \"Veigar\", \"Cassiopeia\", \"Anivia\", \"Fizz\"} };\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": true, "score": 0, "last_activity_date": 1518632695, "creation_date": 1518632695, "answer_id": 48793884, "question_id": 48793806, "link": "https://stackoverflow.com/questions/48793806/when-calling-for-an-array-my-array-names-do-not-print-out-rather-a-shamble-of/48793884#48793884", "title": "When calling for an array my array names do not print out, rather, a shamble of numbers and letters take their place", "body": "<p>It seems that your array should be declared as:</p>\n\n<pre><code>std::string Champions[3][6] = { { \"Varus\", \"Jinx\", \"Caitlyn\", \"Kogmaw\", \n\"Twitch\", \"Kalista\" },\n{ \"Jax\", \"Kindred\", \"Tryndamere\" }, \n{\"Ekko\", \"Vladimir\", \"Veigar\", \"Cassiopeia\", \"Anivia\", \"Fizz\"} };\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9289595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996afc7736af8703c42b782de2de8641?s=128&d=identicon&r=PG&f=1", "display_name": "Kasaya Hikaru", "link": "https://stackoverflow.com/users/9289595/kasaya-hikaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 48793884, "answer_count": 2, "score": -1, "last_activity_date": 1518632808, "creation_date": 1518632391, "question_id": 48793806, "link": "https://stackoverflow.com/questions/48793806/when-calling-for-an-array-my-array-names-do-not-print-out-rather-a-shamble-of", "title": "When calling for an array my array names do not print out, rather, a shamble of numbers and letters take their place", "body": "<p>I am new to coding so I've created a little program as practice, however, one issue I'm having is that when I try to cout a specific part of my Array, Instead of the string inside the array, i get numbers and letters as the output.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main() {\n\nint choice1;\nint choice2;\n\nstring Champions[6][3][6] = { { \"Varus\", \"Jinx\", \"Caitlyn\", \"Kogmaw\", \n\"Twitch\", \"Kalista\" },\n{ \"Jax\", \"Kindred\", \"Tryndamere\" }, \n{\"Ekko\", \"Vladimir\", \"Veigar\", \"Cassiopeia\", \"Anivia\", \"Fizz\"} };\n\ncout &lt;&lt; \"Pick a number, between 0 and 2: \" &lt;&lt; endl;\n\ncin &gt;&gt; choice1;\n\nif (choice1 == 1) cout &lt;&lt; \"Pick a number between 0 and 2:\" &lt;&lt; endl;\n\nelse cout &lt;&lt; \"Pick a number between 0 and 5:\" &lt;&lt; endl;\n\ncin &gt;&gt; choice2;\n\ncout &lt;&lt; \"You chose:\" &lt;&lt; Champions[choice1][choice2] &lt;&lt; endl;\n\nsystem(\"pause\");\nreturn 0;\n\n}\n</code></pre>\n\n<p>Many thanks!</p>\n"}, {"tags": ["java", "c++", "multithreading", "semaphore", "thread-synchronization"], "answers": [{"comments": [{"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 1, "creation_date": 1518640367, "post_id": 48794755, "comment_id": 84593838, "body": "This is wrong, at least with <a href=\"http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_mutex_lock.html\" rel=\"nofollow noreferrer\">pthread under the hood</a> (which I believe applies to Java as well): <code>If a thread attempts to unlock a mutex that it has not locked or a mutex which is unlocked, undefined behavior results.</code> And busy loops may or may not be wrong depending on how memory barriers and other optimizations work (in Java or C++). Anyway the correct answer is conditional variables."}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1518641045, "post_id": 48794755, "comment_id": 84594184, "body": "@freakish AFAIK both Java and <code>pthread</code> <i>Semaphores</i> (as opposed to <i>mutexes</i>) can be &quot;released&quot; and &quot;acquired&quot; by different threads. The busy loop code (which obviously is only for the sake of example, and no one should use) uses <code>volatile</code> booleans and <code>x</code>, which created a &quot;happens-before&quot; relationship in Java (<a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/atomic.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency/&hellip;</a>)"}, {"owner": {"reputation": 363, "user_id": 9355495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9c4977df1d74f6ff6d2009e30561740?s=128&d=identicon&r=PG", "display_name": "arkham knight", "link": "https://stackoverflow.com/users/9355495/arkham-knight"}, "edited": false, "score": 0, "creation_date": 1519112527, "post_id": 48794755, "comment_id": 84764137, "body": "Shouldn&#39;t the incrementLock.release() be after the print statement in thread 2"}, {"owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "reply_to_user": {"reputation": 363, "user_id": 9355495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9c4977df1d74f6ff6d2009e30561740?s=128&d=identicon&r=PG", "display_name": "arkham knight", "link": "https://stackoverflow.com/users/9355495/arkham-knight"}, "edited": false, "score": 0, "creation_date": 1519120728, "post_id": 48794755, "comment_id": 84768988, "body": "@user9355495 If both semaphores start with 0, and both threads start by acquiring a permit, they&#39;ll both wait indefinitely. You could move the <code>acquire</code> after the print, but you&#39;d have to initialize the semaphore to 1."}, {"owner": {"reputation": 363, "user_id": 9355495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9c4977df1d74f6ff6d2009e30561740?s=128&d=identicon&r=PG", "display_name": "arkham knight", "link": "https://stackoverflow.com/users/9355495/arkham-knight"}, "edited": false, "score": 0, "creation_date": 1519283576, "post_id": 48794755, "comment_id": 84849358, "body": "Thank you man, this question was asked again in Intel. I answered it this time :)"}], "tags": [], "owner": {"reputation": 25103, "user_id": 3199595, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/TwK8q.png?s=128&g=1", "display_name": "Malt", "link": "https://stackoverflow.com/users/3199595/malt"}, "is_accepted": true, "score": 1, "last_activity_date": 1518641884, "last_edit_date": 1518641884, "creation_date": 1518636397, "answer_id": 48794755, "question_id": 48793791, "link": "https://stackoverflow.com/questions/48793791/thread-synchronisation-using-semaphores/48794755#48794755", "title": "Thread synchronisation using semaphores", "body": "<p>Nice exercise.</p>\n\n<p>You haven't specified the <code>c++</code> tag in the question, but the question itself contains <code>cout&lt;&lt;x</code>, so you were probably interviewing for a C++ position. Despite that, I'm going to answer in Java since this is an interview question and language shouldn't matter much as long as I avoid using anything too specific to Java.</p>\n\n<p>As your interviewer pointed out, the synchronization has to happen in both directions:</p>\n\n<ul>\n<li>The printing thread must wait for the incrementing thread to finish its job</li>\n<li>The incrementing thread must wait for the printing thread to finish its job</li>\n</ul>\n\n<p>So we need something to let us know that the printer is done (so the incrementer can run), and another to let us know that the incrementer is done. I used two semaphores for that:</p>\n\n<p><a href=\"https://ideone.com/CPXDXY\" rel=\"nofollow noreferrer\">Working version on Ideone</a></p>\n\n<pre><code>import java.util.concurrent.Semaphore;\n\nclass IncrementDemo {\n    static int x = 0;\n\n    public static void main(String[] args) {\n        Semaphore incrementLock = new Semaphore(0);\n        Semaphore printLock = new Semaphore(0);\n\n        Thread incrementer = new Thread(() -&gt; {\n            for(;;) {\n                incrementLock.acquire(); //Wait to be allowed to increment\n                x++;\n                printLock.release(); //Allow the printer to print\n            }\n        });\n\n        Thread printer = new Thread(() -&gt; {\n            for (;;) {\n                incrementLock.release(); //Let the incrementer to its job\n                printLock.acquire(); //Wait to be allowed to print\n                System.out.println(x);\n            }\n        });\n\n        incrementer.setDaemon(false); //Keep the program alive after main() exits\n        printer.setDaemon(false);\n\n        incrementer.start(); //Start both threads\n        printer.start();\n    }\n\n}\n</code></pre>\n\n<p>(I removed the try/catch blocks around <code>acquire</code> for readability).</p>\n\n<p>Output:</p>\n\n<pre><code>1\n2\n3\n4\n5\n6\n7\n...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1583, "user_id": 2103736, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/vIuk3.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/2103736/andy"}, "is_accepted": false, "score": 3, "last_activity_date": 1518640858, "last_edit_date": 1518640858, "creation_date": 1518639717, "answer_id": 48795567, "question_id": 48793791, "link": "https://stackoverflow.com/questions/48793791/thread-synchronisation-using-semaphores/48795567#48795567", "title": "Thread synchronisation using semaphores", "body": "<p>This is a classic use case for a <em>condition variable</em> with the slight hitch that the value can easily update more than once in thread 1 before thread 2 runs to handle it:</p>\n\n<pre><code>// In some scope common to both threads\nint c_ = 0; // variable\nstd::mutex mutex_();\nstd::condition_variable cond_();\n\n// Thread 1\n{ \n    std::lock_guard&lt;std::mutex&gt; lock(mutex_);\n    ++c_;\n}\ncond_.notify_one();\n\n// Thread 2\n{ \n    std::lock_guard&lt;std::mutex&gt; lock( mutex_ );\n    int cLocal = c_;\n    while ( !done ) { \n        cond_.wait( lock, [] { return c_ != cLocal; } );\n        while ( cLocal++ &lt; c_ ) \n            ... // Display new *local* value\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 918, "user_id": 4936507, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36df2f476a2ed16bb905fc814370f720?s=128&d=identicon&r=PG&f=1", "display_name": "Domso", "link": "https://stackoverflow.com/users/4936507/domso"}, "is_accepted": false, "score": 0, "last_activity_date": 1518640842, "creation_date": 1518640842, "answer_id": 48795810, "question_id": 48793791, "link": "https://stackoverflow.com/questions/48793791/thread-synchronisation-using-semaphores/48795810#48795810", "title": "Thread synchronisation using semaphores", "body": "<h2>Problems:</h2>\n\n<p>There are 2 main problems with parallel code in general.</p>\n\n<p><strong>1. Atomicity</strong></p>\n\n<p>The smallest granularity in code are in fact not the single operations like <code>i++</code>, but the underlying assembly-instructions. Therefore every operation, which involves a write, may not be called from multiple threads. (this differs heavily on your target architecture, but x86 is in contrast to arm64 very restrictive)</p>\n\n<p>But luckily c++ provides the <code>std::atomic</code> operations, which give you a nice plattform independent way to modify variables from multiple threads.</p>\n\n<p><strong>2. Consistency</strong></p>\n\n<p>Both the compiler and the processor are allowed to reorder any instruction as long the consistency of the <strong>local</strong> thread is preserved. So what does this mean?</p>\n\n<p>Take a look at your first thread</p>\n\n<pre><code>if( c = 0 )\n{\n   c++;\n   x++; // value that is incremented\n}\n</code></pre>\n\n<p>You have 3 operations <code>c == 0</code>, <code>c++</code> and <code>x++</code>. Both increments do not depend from each other, hence the compiler would be allowed to swap them. At runtime the core may reorder them too, leaving you in very vague situation. In a sequential world this is perfectly fine and improves the overall performance (unless it leads to security holes like meltdown). Unfortunately neither the compiler or the cpu recognize parallel code, therefore any optimization may break your parallel program.</p>\n\n<p>But once again, c++ provides a built-in solution for this problem called <code>std::memory_order</code>, which enforces are specific consistency-model.</p>\n\n<h2>Solutions:</h2>\n\n<p><strong>Simple mutex:</strong> \nA mutex is a simple, but powerfull tool. It solves the problems with Atomicity and Consistency by providing so called critical sections, which prevent parallel execution. This means, that in the given example the if-clause in both threads are sequential and will never be executed in parallel.\nThe implementation works, but has a flaw. If one of the threads is very slow, the other one will waste a lot of cpu-time by continous checking the <code>newValue</code> flag. </p>\n\n<pre><code>#include &lt;mutex&gt;\n\nstd::mutex mutex;\nint value = true;\nbool newValue = false;\n\nvoid producer_thread() {\n   while(true) {\n       std::lock_guard&lt;std::mutex&gt; lg(mutex);\n        if (newValue == false) {\n            value++;\n            newValue = true;\n        }\n   }\n}\n\nvoid consumer_thread() {\n   while(true) {\n       std::lock_guard&lt;std::mutex&gt; lg(mutex);\n        if (newValue == true) {\n            std::cout &lt;&lt; value;\n            newValue = false;\n        }\n   }\n}\n</code></pre>\n\n<p><strong>Condition Variable</strong>:</p>\n\n<p>A condition variable is basically just a \"wait-for-notify\"-construct. You can block the current execution by calling <code>wait</code> until an other thread calls <code>notify</code>. This implementation would be the go-to scenario.</p>\n\n<pre><code>#include &lt;mutex&gt;\n#include &lt;condition_variable&gt;\n\nstd::mutex mutex;\nstd::condition_variable cond;\nint value = true;\nbool newValue = false;\n\nvoid producer() {\n   while(true) {\n       std::unique_lock&lt;std::mutex&gt; ul(mutex);\n\n        while (newValue == true) {\n            cond.wait(ul);\n        }\n\n        value++;\n        newValue = true;\n        cond.notify_all();\n   }\n}\n\nvoid consumer() {\n   while(true) {\n       std::unique_lock&lt;std::mutex&gt; ul(mutex);\n\n        while (newValue == false) {\n            cond.wait(ul);\n        }\n\n        std::cout &lt;&lt; value;\n        newValue = false;\n        cond.notify_all();\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 363, "user_id": 9355495, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9c4977df1d74f6ff6d2009e30561740?s=128&d=identicon&r=PG", "display_name": "arkham knight", "link": "https://stackoverflow.com/users/9355495/arkham-knight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2404, "favorite_count": 1, "accepted_answer_id": 48794755, "answer_count": 3, "score": 3, "last_activity_date": 1589867438, "creation_date": 1518632335, "last_edit_date": 1589867438, "question_id": 48793791, "link": "https://stackoverflow.com/questions/48793791/thread-synchronisation-using-semaphores", "title": "Thread synchronisation using semaphores", "body": "<p>This was an interview question , any help would be appreciated</p>\n\n<p>How do you synchronize two threads, out of which one increments a value and the the other displays it ( P.S. the thread which displays the value must only display a value when its a new value )</p>\n\n<p>Ex : <code>int x = 5;</code> </p>\n\n<p><code>T1</code> : increments it to 6 </p>\n\n<p><code>T2</code> : must display 6 ( only once ) and must display it again when it becomes 7</p>\n\n<p>I answered that I would use a semaphore something like:</p>\n\n<pre><code>int c=0; // variable that I used to synchronize\n\n// In T1\nif( c = 0 )\n{\n   c++;\n   x++; // value that is incremented\n}\n\n// in T2\nif( c == 1 )\n{\n   cout&lt;&lt;x;\n   c--;\n}\n</code></pre>\n\n<p>He then asked what would you do if there's a context switch from thread <code>T1</code> to <code>T2</code> after setting c to 1 but before incrementing x ( As in that case it would enter P2 before incrementing x )</p>\n\n<p>I couldn't answer this part. Any help would be appreciated.</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 5, "creation_date": 1518631854, "post_id": 48793655, "comment_id": 84589404, "body": "Googling hint: &quot;Undefined behaviour.&quot;"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1518631931, "post_id": 48793655, "comment_id": 84589440, "body": "That wasn&#39;t particularly hard to find btw. Please do more research the next time."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1518631962, "post_id": 48793655, "comment_id": 84589457, "body": "It&#39;s also helpful to read the documentation for <a href=\"http://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow noreferrer\"><code>operator[]</code></a> (and the method <a href=\"http://en.cppreference.com/w/cpp/container/vector/at\" rel=\"nofollow noreferrer\"><code>.at()</code></a>)"}, {"owner": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632241, "post_id": 48793655, "comment_id": 84589614, "body": "Got it. Thank you everyone."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1518632275, "post_id": 48793655, "comment_id": 84589634, "body": "If you compile your program in debug mode, you usually get a diagnostic message if you access an out of bounds vector element."}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 3, "creation_date": 1518632099, "post_id": 48793707, "comment_id": 84589524, "body": "OP is well aware there <code>v1[10]</code> is out of bounds and is <i>not</i> seeing an error. That&#39;s legal, but hardly <i>&quot;what is supposed to happen&quot;</i>."}, {"owner": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632117, "post_id": 48793707, "comment_id": 84589542, "body": "I understand that there is no index v1[10] but shouldn&#39;t the program crash instead of returning 0 for non-exist index?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632151, "post_id": 48793707, "comment_id": 84589557, "body": "@ChrisN &quot;<i>shouldn&#39;t the program crash instead of returning 0</i>&quot; No, it shouldn&#39;t (it can, but that is not required), who told you, that it should?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 2, "creation_date": 1518632161, "post_id": 48793707, "comment_id": 84589563, "body": "@ChrisN no, it&#39;s not supposed to crash. The word &quot;crash&quot; doesn&#39;t even appear in the C++ standard"}, {"owner": {"reputation": 86, "user_id": 4759636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eb33p.jpg?s=128&g=1", "display_name": "Sajid Hasan Apon", "link": "https://stackoverflow.com/users/4759636/sajid-hasan-apon"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518632530, "post_id": 48793707, "comment_id": 84589756, "body": "@Baum mit Augen, I clarified and edited. Thanks."}, {"owner": {"reputation": 86, "user_id": 4759636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eb33p.jpg?s=128&g=1", "display_name": "Sajid Hasan Apon", "link": "https://stackoverflow.com/users/4759636/sajid-hasan-apon"}, "reply_to_user": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632551, "post_id": 48793707, "comment_id": 84589774, "body": "@Chris, please see the edited answer."}, {"owner": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632575, "post_id": 48793707, "comment_id": 84589792, "body": "Thank you for your insights. However, if I define a vector&lt;int&gt; v1 without initializing it and try to access a non-exist index, the program will core dumped. I guess this has to do with &#39;Undefined behavior&quot; vs something?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632654, "post_id": 48793707, "comment_id": 84589836, "body": "@ChrisN <i>undefined behavior</i> means that <i>anything</i> can happen. From core dumps to random values to demons jumping out of your nose - all of that is legal according to the language standard"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "edited": false, "score": 0, "creation_date": 1518632697, "post_id": 48793707, "comment_id": 84589857, "body": "@ChrisN &quot;<i>I guess this has to do with &#39;Undefined behavior&quot; vs something</i>&quot; It is undefined behavior, as is the previous case. It may crash, or it may not - it&#39;s undefined."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 2, "creation_date": 1518632700, "post_id": 48793707, "comment_id": 84589860, "body": "That&#39;s still not particularly precise in terminology. If you choose to answer fairly obvious duplicates like that one, you better be prepared for your answers being held to the same standard as the common dupe target, which is often not trivial to meet."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9212993"}, "edited": false, "score": 0, "creation_date": 1518633505, "post_id": 48793707, "comment_id": 84590251, "body": "@SajidHasanApon I&#39;d recommend you take that answer off. You&#39;ll might even gain a badge for doing so."}, {"owner": {"reputation": 86, "user_id": 4759636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eb33p.jpg?s=128&g=1", "display_name": "Sajid Hasan Apon", "link": "https://stackoverflow.com/users/4759636/sajid-hasan-apon"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518633872, "post_id": 48793707, "comment_id": 84590434, "body": "@Baum mit Augen, I understand, and will be careful. Thanks. Also, I was not aware that the behavior is undefined because when I started learning STL, I too, experimented this way with various indices and did not get core dumped a single time. So, I just assumed that the value I got was from &amp;the_vector+index*dataSize and will not get an error unless I point out of RAM."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518634257, "post_id": 48793707, "comment_id": 84590655, "body": "Experiments are generally not a good way to learn C++."}], "tags": [], "owner": {"reputation": 86, "user_id": 4759636, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eb33p.jpg?s=128&g=1", "display_name": "Sajid Hasan Apon", "link": "https://stackoverflow.com/users/4759636/sajid-hasan-apon"}, "is_accepted": false, "score": -3, "last_activity_date": 1518632463, "last_edit_date": 1518632463, "creation_date": 1518632000, "answer_id": 48793707, "question_id": 48793655, "link": "https://stackoverflow.com/questions/48793655/vector-subscript-out-of-range-error-strange-behavior-in-c/48793707#48793707", "title": "vector subscript out of range error strange behavior in C++", "body": "<p>There are 3 elements in v1, meaning there is NO v1[10], only v1[0] through v1[2].</p>\n\n<p>The behavior is not, strange. That\u2019s what is supposed to happen, because std:: vector does not perform size checking for '[]'.</p>\n\n<p>So, you are basically getting a garbage from v1[10].</p>\n"}], "owner": {"reputation": 7, "user_id": 3874919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07a24edb45952a8afca702da22270957?s=128&d=identicon&r=PG&f=1", "display_name": "Chris N", "link": "https://stackoverflow.com/users/3874919/chris-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "closed_date": 1518631865, "answer_count": 1, "score": -2, "last_activity_date": 1518632463, "creation_date": 1518631776, "question_id": 48793655, "link": "https://stackoverflow.com/questions/48793655/vector-subscript-out-of-range-error-strange-behavior-in-c", "closed_reason": "Duplicate", "title": "vector subscript out of range error strange behavior in C++", "body": "<p>I'm starting to learn C++ so the answer to my question might be obvious to you but I am really puzzled. I expect the program would crash when accessing a out of range index but instead, the program runs just fine. Here is the code.</p>\n\n<pre><code>    #include &lt;iostream&gt;\n    #include &lt;typeinfo&gt;\n    #include &lt;string&gt;\n    #include &lt;vector&gt;\n\n    using namespace std;\n\n    int main() {\n        int x;\n        vector&lt;int&gt; v1;\n\n        while (cin &gt;&gt; x) {\n            v1.push_back(x);\n        }\n\n        cout &lt;&lt; \"out of bound: \" &lt;&lt; v1[10] &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>1 2 3\nout of bound: 0\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "function", "intervals"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518631390, "post_id": 48793504, "comment_id": 84589166, "body": "Please <i>always</i> provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that other people can test for themselves."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1518631509, "post_id": 48793504, "comment_id": 84589232, "body": "Does this code actually compile?"}, {"owner": {"reputation": 23, "user_id": 7976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/883118555160346/picture?type=large", "display_name": "S&#243;tanyi B&#225;lint", "link": "https://stackoverflow.com/users/7976388/s%c3%b3tanyi-b%c3%a1lint"}, "edited": false, "score": 0, "creation_date": 1518631716, "post_id": 48793504, "comment_id": 84589338, "body": "My code does not"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1518631800, "post_id": 48793504, "comment_id": 84589369, "body": "Well, what are the compiler errors you are getting then?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518631841, "post_id": 48793504, "comment_id": 84589393, "body": "@S&#243;tanyiB&#225;lint What is the meaning of <code>*b</code>, when the type of <code>b</code> is <code>bool&amp;</code>? It is <b>not</b> a pointer, so why are you trying to dereference it?"}, {"owner": {"reputation": 23, "user_id": 7976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/883118555160346/picture?type=large", "display_name": "S&#243;tanyi B&#225;lint", "link": "https://stackoverflow.com/users/7976388/s%c3%b3tanyi-b%c3%a1lint"}, "edited": false, "score": 0, "creation_date": 1518631950, "post_id": 48793504, "comment_id": 84589453, "body": "I thought it is a pointer actually"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1518632025, "post_id": 48793504, "comment_id": 84589487, "body": "@S&#243;tanyiB&#225;lint Why would you think so? Consider learning from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. References are covered in those."}, {"owner": {"reputation": 23, "user_id": 7976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/883118555160346/picture?type=large", "display_name": "S&#243;tanyi B&#225;lint", "link": "https://stackoverflow.com/users/7976388/s%c3%b3tanyi-b%c3%a1lint"}, "edited": false, "score": 0, "creation_date": 1518632149, "post_id": 48793504, "comment_id": 84589556, "body": "I am learning now from Accelerated C++, but sometimes i get confused. Maybe because I used JS until now and I am still thinking in that way"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518632536, "post_id": 48793504, "comment_id": 84589759, "body": "@S&#243;tanyi B&#225;lint C++ is <i>not</i> like JS (even if the syntax may sometimes seem similar). Forget <i>all</i> you know about JS when writing C++ code - they are <i>very</i> different languages."}, {"owner": {"reputation": 23, "user_id": 7976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/883118555160346/picture?type=large", "display_name": "S&#243;tanyi B&#225;lint", "link": "https://stackoverflow.com/users/7976388/s%c3%b3tanyi-b%c3%a1lint"}, "edited": false, "score": 0, "creation_date": 1518632719, "post_id": 48793504, "comment_id": 84589864, "body": "Do you have any ideas regarding my question? Or a different way to solve this problem?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518632809, "post_id": 48793504, "comment_id": 84589905, "body": "@S&#243;tanyiB&#225;lint &quot;<i>Do you have any ideas regarding my question?</i>&quot; Please re-read my initial comment (reading the compilation errors, would be a great place to start, as well), and act accordingly: don&#39;t try to dereference something, that is not a pointer."}, {"owner": {"reputation": 126499, "user_id": 1531124, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/zw18i.png?s=128&g=1", "display_name": "GhostCat", "link": "https://stackoverflow.com/users/1531124/ghostcat"}, "edited": false, "score": 0, "creation_date": 1518632923, "post_id": 48793504, "comment_id": 84589959, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Use the <a href=\"https://stackoverflow.com/posts/48793504/edit\">edit</a> link to improve your <i>question</i> - do not add more information via comments. Thanks!"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1518632962, "post_id": 48793504, "comment_id": 84589977, "body": "Use <code>&amp;b</code> to capture by reference, though <code>bool</code> requires synchronization and can&#39;t safely be accessed synchronously. <code>std::atomic_bool</code> would work. You should also consider rather <code>detach</code> really is what you want to do. Using <code>detach</code> is often a sign of poor design is may cause you problems in the future. You will usually want to keep a handle on your thread and <code>join</code> it to know when it&#39;s finished stopping."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518642092, "post_id": 48793504, "comment_id": 84594677, "body": "You can do it really expressively if you&#39;re already using a framework or engine with an event loop and timer mechanism (which, in the case of JavaScript, is done for you). If you aren&#39;t, then you can&#39;t. Shrug."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518642321, "post_id": 48795895, "comment_id": 84594791, "body": "The trouble is that this code must also take on the responsibility covered by part of the JavaScript runtime engine, making the &quot;user-space&quot; end result necessarily more verbose than the JS code equivalent. In short, it&#39;s not a fair test."}], "tags": [], "owner": {"reputation": 1609, "user_id": 9335240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/374b57f721280fb0c39d46f6d3d3955d?s=128&d=identicon&r=PG", "display_name": "user9335240", "link": "https://stackoverflow.com/users/9335240/user9335240"}, "is_accepted": true, "score": 0, "last_activity_date": 1518641188, "creation_date": 1518641188, "answer_id": 48795895, "question_id": 48793504, "link": "https://stackoverflow.com/questions/48793504/stopping-a-periodic-thread-thing-in-c/48795895#48795895", "title": "Stopping a periodic thread-thing in c++", "body": "<p>Sorry, but I didn't find a design simpler than that.</p>\n\n<p>You could, make a class that owns both a thread, and a <code>weak_ptr</code> to itself,\nto be a \"holder\" that the callable can see it safely, because the callable\nwill still exists even if the object is destructed. You don't want a dangling pointer.</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct IntervalRepeater {\n    using CallableCopyable = T;\nprivate:\n    weak_ptr&lt;IntervalRepeater&lt;CallableCopyable&gt;&gt; holder;\n    std::thread theThread;\n\n    IntervalRepeater(unsigned int interval,\n            CallableCopyable callable): callable(callable), interval(interval) {}\n\n    void thread() {\n        weak_ptr&lt;IntervalRepeater&lt;CallableCopyable&gt;&gt; holder = this-&gt;holder;\n        theThread = std::thread([holder](){\n            // Try to strongify the pointer, to make it survive this loop iteration,\n            //    and ensure that this pointer is valid, if not valid, end the loop.\n            while (shared_ptr&lt;IntervalRepeater&lt;CallableCopyable&gt;&gt; ptr = holder.lock()) {\n                auto x = chrono::steady_clock::now() + chrono::milliseconds(ptr-&gt;interval);\n                ptr-&gt;callable();\n                this_thread::sleep_until(x);\n            }\n        });\n    }\n\npublic:\n    const CallableCopyable callable;\n    const unsigned int interval;\n\n    static shared_ptr&lt;IntervalRepeater&lt;T&gt;&gt; createIntervalRepeater(unsigned int interval,\n            CallableCopyable callable) {\n        std::shared_ptr&lt;IntervalRepeater&lt;CallableCopyable&gt;&gt; ret =\n                shared_ptr&lt;IntervalRepeater&lt;CallableCopyable&gt;&gt;(\n                        new IntervalRepeater&lt;CallableCopyable&gt;(interval, callable));\n        ret-&gt;holder = ret;\n        ret-&gt;thread();\n\n        return ret;\n    }\n\n    ~IntervalRepeater() {\n        // Detach the thread before it is released.\n        theThread.detach();\n    }\n\n};\n\nvoid beginItWaitThenDestruct() {\n    auto repeater = IntervalRepeater&lt;function&lt;void()&gt;&gt;::createIntervalRepeater(\n            1000, [](){ cout &lt;&lt; \"A second\\n\"; });\n    std::this_thread::sleep_for(std::chrono::milliseconds(3700));\n}\n\nint main() {\n    beginItWaitThenDestruct();\n    // Wait for another 2.5 seconds, to test whether there is still an effect of the object\n    //   or no.\n    std::this_thread::sleep_for(std::chrono::milliseconds(2500));\n    return 0;\n}\n</code></pre>\n\n<p>C++ is not JavaScript, but C++ can apply most programming paradigms in different languages.</p>\n"}], "owner": {"reputation": 23, "user_id": 7976388, "user_type": "registered", "profile_image": "https://graph.facebook.com/883118555160346/picture?type=large", "display_name": "S&#243;tanyi B&#225;lint", "link": "https://stackoverflow.com/users/7976388/s%c3%b3tanyi-b%c3%a1lint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 48795895, "answer_count": 1, "score": -4, "last_activity_date": 1518641188, "creation_date": 1518631221, "last_edit_date": 1518631762, "question_id": 48793504, "link": "https://stackoverflow.com/questions/48793504/stopping-a-periodic-thread-thing-in-c", "title": "Stopping a periodic thread-thing in c++", "body": "<p>So I have this function which is behaving like the setInterval function in JS. I found it <a href=\"https://stackoverflow.com/a/43373364/7976388\">here</a>.\nI am currently trying to change it so it can be stopped. I do not fully understand the behavior of this code.</p>\n\n<pre><code>void setInterval(function&lt;void(void)&gt; func, unsigned int interval) {\n  thread([func, interval]() {\n    while (1) {\n      auto x = chrono::steady_clock::now() + chrono::milliseconds(interval);\n      func();\n      this_thread::sleep_until(x);\n    }\n  }).detach();\n}\n</code></pre>\n\n<p>I tried it like this:</p>\n\n<pre><code>void setInterval(function&lt;void(void)&gt; func, unsigned int interval, bool &amp;b) {\n  thread([func, interval, *b]() {\n    while (*b) {\n      auto x = chrono::steady_clock::now() + chrono::milliseconds(interval);\n      func();\n      this_thread::sleep_until(x);\n    }\n  }).detach();\n}\n</code></pre>\n\n<p>(this won't compile), and in main calling it like this:</p>\n\n<pre><code>bool B;\nsetInterval(myFunction,1000,B);\n</code></pre>\n\n<p>I was expecting that if I change the B variable to false, then the thread in setInterval function stops, but I haven't managed to reach my goal like this. Any idead/suggestions? Thank you in advance.</p>\n"}, {"tags": ["c++", "csv", "join", "hash", "hashtable"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1518631272, "post_id": 48793400, "comment_id": 84589119, "body": "You may use <code>std::variant</code> to store the data."}, {"owner": {"reputation": 38, "user_id": 4416292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5daf06aa4f82fe004136daea442f575?s=128&d=identicon&r=PG", "display_name": "fzsombor", "link": "https://stackoverflow.com/users/4416292/fzsombor"}, "reply_to_user": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1518641878, "post_id": 48793400, "comment_id": 84594584, "body": "As far as I know it is implemented only in C++14. I have to use C++89 and 11."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1518682638, "post_id": 48793400, "comment_id": 84607849, "body": "then use <code>boost::variant</code>"}], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 4416292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5daf06aa4f82fe004136daea442f575?s=128&d=identicon&r=PG", "display_name": "fzsombor", "link": "https://stackoverflow.com/users/4416292/fzsombor"}, "edited": false, "score": 0, "creation_date": 1518641709, "post_id": 48793559, "comment_id": 84594506, "body": "Thanks the answer! As I said the type and the number of the columns are not fix. The other table could ben string,int,string,string. So I can not asign a static struct like the one you wrote."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 38, "user_id": 4416292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5daf06aa4f82fe004136daea442f575?s=128&d=identicon&r=PG", "display_name": "fzsombor", "link": "https://stackoverflow.com/users/4416292/fzsombor"}, "edited": false, "score": 0, "creation_date": 1518642710, "post_id": 48793559, "comment_id": 84595027, "body": "@fzsombor: In my experience, creating a generic table is difficult.  You could create a <code>Record</code> structure and a <code>Field</code> parent class.  A <code>Record</code> would be a container of <code>Field</code> pointers.  You would use inheritance for the <code>Field</code> class, but <code>Field</code> should have common methods for fields."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": true, "score": 0, "last_activity_date": 1518631432, "creation_date": 1518631432, "answer_id": 48793559, "question_id": 48793400, "link": "https://stackoverflow.com/questions/48793400/what-data-structure-to-use-for-reading-csv-like-files-in-c/48793559#48793559", "title": "What data structure to use for reading CSV like files in C++?", "body": "<p>IMO, you should model a row as a structure:  </p>\n\n<pre><code>struct Row\n{\n  int column1;\n  int column2;\n  std::string name;\n  int column3;\n};\n</code></pre>\n\n<p>Next step would be to overload <code>operator&gt;&gt;</code> to read in the structure.  </p>\n\n<pre><code>std::istream&amp; operator&gt;&gt;(std::istream&amp; inp, Row&amp; r)\n{\n  char comma;\n  inp &gt;&gt; r.column1;\n  inp &gt;&gt; comma;\n  inp &gt;&gt; r.column2;\n  inp &gt;&gt; comma;\n  std::getline(inp, r.name, ',');\n  inp &gt;&gt; r.column3;\n  inp.ignore(100000, '\\n');\n  return inp;\n}\n</code></pre>\n\n<p>Then you could read the records:  </p>\n\n<pre><code>std::vector&lt;Row&gt; database;\nRow r;\nwhile (input_file &gt;&gt; r)\n{\n  database.push_back(r);\n}\n</code></pre>\n\n<p>Maybe your next step would be to create index tables.  This would allow faster searches of your database:</p>\n\n<pre><code>std::map&lt;int, int&gt; index_by_column1;\nstd::map&lt;std::string, int&gt; index_by_name;\n</code></pre>\n\n<p>The second value of the pair is an index into the database of the associated record.  </p>\n\n<p>To find a record containing the <code>name</code> \"Fred\":  </p>\n\n<pre><code>std::map&lt;std::string, int&gt;::const_iterator iter;\niter = index_by_name.find(\"Fred\");\nRecord r;\nif (iter != index_by_name.end())\n{\n  int database_index = (*iter).second;\n  r = database[database_index];\n}\n</code></pre>\n\n<p>Rather than using a <code>std::map</code>, you could use a hash table that returns an index into the database.</p>\n"}], "owner": {"reputation": 38, "user_id": 4416292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5daf06aa4f82fe004136daea442f575?s=128&d=identicon&r=PG", "display_name": "fzsombor", "link": "https://stackoverflow.com/users/4416292/fzsombor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "accepted_answer_id": 48793559, "answer_count": 1, "score": -1, "last_activity_date": 1518631432, "creation_date": 1518630782, "question_id": 48793400, "link": "https://stackoverflow.com/questions/48793400/what-data-structure-to-use-for-reading-csv-like-files-in-c", "title": "What data structure to use for reading CSV like files in C++?", "body": "<p>My task is to implement a hash join algorithm with tables (.txt files) provided in the program arguments.</p>\n\n<p>A table files could look like this:</p>\n\n<pre><code>c1:int,c2:int,c3:string,c4:long\n1,1,asd,11\n2,3,asdqwe,11\n</code></pre>\n\n<p>A header row, with the name of the column and type of the column, and then the rows delimited by \",\".\nThe number of columns and the type of the columns are variable.</p>\n\n<p>So the column name and type should be stored, and I must store these in a 2D array or matrix. </p>\n\n<p>I have to read the type and make a container for the column of the specified type. \nI also have to store all the columns together in a heterogeneous array or struct.</p>\n\n<p>I don't know any of the STL containers below C++11 what is heterogenous.</p>\n\n<p>How can I determinate the type of a column, create a container from its type and store all the column arrays in a heterogeneous way?</p>\n\n<p>My try-hards:</p>\n\n<pre><code> class Table {\npublic:\n    struct Column {\n        std::string name;\n        std::string type;\n\n        Column(std::string name, std::string type) : name(name), type(type) {}\n    };\n\n    //enum for switch-case\n    static enum typeValue {\n        INT,\n        STRING,\n        LONG,\n        CHAR,\n        DOUBLE,\n        SHORT\n    };\n\n\nprivate:\n    std::string filePath;\n    std::ifstream file;\n    std::vector&lt;Column&gt; columns;\n    int rowNumber;\n    std::vector&lt;std::array&gt; tableData;\n\npublic:\n    Table(std::string filePath) {\n        this-&gt;filePath = filePath;\n        rowNumber = 0;\n        open();\n        loadTableData();\n\n\n    }\n\n\n    bool open() {\n\n        file.open(filePath);\n        std::string line;\n        std::string delimiter = \",\";\n        size_t pos = 0;\n        std::string token;\n        getline(file, line);\n        while ((pos = line.find(delimiter)) != std::string::npos) {     //parse the columns\n            token = line.substr(0, pos);\n            size_t posT = 0;\n            posT = token.find(\":\");\n            columns.push_back(Column(token.substr(0, posT), token.substr(posT + delimiter.length())));\n            line.erase(0, pos + delimiter.length());\n        }\n        size_t posT = 0;\n        posT = line.find(\":\");\n        columns.push_back(Column(line.substr(0, posT), line.substr(posT + delimiter.length())));\n\n        while (std::getline(file, line))    //count the rows\n            ++rowNumber;\n\n        for (int i = 0; i &lt; columns.size(); ++i) {\n\n            switch (hashIt(columns[i].type)) {\n                case INT:\n                    std::vector&lt;int&gt; *tempI = new std::vector&lt;int&gt;();\n                    tableData[i] = tempI;\n                    break;\n                case STRING:\n                    std::vector&lt;std::string&gt; *tempS = new std::vector&lt;std::string&gt;();\n                    tableData[i] = tempS;\n                    break;\n                case LONG:\n                    std::vector&lt;long&gt; *tempL = new std::vector&lt;long&gt;();\n                    tableData[i] = tempL;\n                    break;\n                case CHAR:\n                    std::vector&lt;char&gt; *tempC = new std::vector&lt;char&gt;();\n                    tableData[i] = tempC;\n                    break;\n                case DOUBLE:\n                    std::vector&lt;double&gt; *tempD = new std::vector&lt;double&gt;();\n                    tableData[i] = tempD;\n                    break;\n                case SHORT:\n                    std::vector&lt;short&gt; *tempSh = new std::vector&lt;short&gt;();\n                    tableData[i] = tempSh;\n                    break;\n                default:\n                    std::cerr &lt;&lt; \"Error: Unsupported column type.\";\n            }\n\n\n        }\n\n        //file.close();\n\n        std::cout &lt;&lt; \"Table \" &lt;&lt; filePath &lt;&lt; \" has \" &lt;&lt; columns.size() &lt;&lt; \" columns.\" &lt;&lt; std::endl;\n\n        return true;\n\n\n    }\n\n    bool loadTableData() {\n        file.seekg(0, file.beg);\n        std::string line;\n        getline(file, line); //discarding the column headers\n\n        while (std::getline(file, line)) {\n            ++rowNumber;        //count the rows\n\n            for (int i = 0; i &lt; columns.size(); ++i) {\n\n                std::string delimiter = \",\";\n                size_t pos = line.find(delimiter);\n                std::string token = line.substr(0, pos);\n                tableData[i].push_back(token);\n\n\n            }\n        }\n\n    }\n\n    template&lt;typename T&gt;\n\n    T **createColumnData(int colNum) {\n        T *data = new T[rowNumber]();\n        tableData.insert(colNum, data);\n    }\n\n\n    typeValue hashIt(std::string const &amp;inString) {\n        if (inString == \"int\") return INT;\n        if (inString == \"string\") return STRING;\n        if (inString == \"long\") return LONG;\n        if (inString == \"char\") return CHAR;\n        if (inString == \"double\") return DOUBLE;\n        if (inString == \"short\") return SHORT;\n        std::cerr &lt;&lt; \"Error: Unsupported column type.\";\n\n\n        return NULL;\n\n    }\n\n\n};\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1518630800, "post_id": 48793373, "comment_id": 84588860, "body": "Arrays are not assignable."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518630803, "post_id": 48793373, "comment_id": 84588863, "body": "Use the initializer list to construct attributes. What you&#39;re doing here is an assignment and that doesn&#39;t work with arrays."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518630970, "post_id": 48793373, "comment_id": 84588955, "body": "Here <a href=\"https://ideone.com/CQBvR8\" rel=\"nofollow noreferrer\">ideone.com/CQBvR8</a> the part starting with the colon before the constructor body is called a <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1518631554, "post_id": 48793373, "comment_id": 84589255, "body": "1) use the initializer list. 2) there&#39;s <code>std::fill</code>. 3) why not a <code>std::array</code>?"}, {"owner": {"reputation": 59, "user_id": 8598836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97d544e291c78428267056b34c580019?s=128&d=identicon&r=PG&f=1", "display_name": "Bot", "link": "https://stackoverflow.com/users/8598836/bot"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518631592, "post_id": 48793373, "comment_id": 84589272, "body": "@Caninonos That worked. Thanks!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1518632409, "post_id": 48793373, "comment_id": 84589691, "body": "The Canadian Revenue Agency. Haven&#39;t done any work for them since they were the CCRA. I strongly recommend against storing the SIN as an integer. It&#39;s a string of digits, but not used as a number. You need all the digits so 000777888 getting chopped to 777888 because integers don&#39;t store preceding 0s can be a bit of a pain."}], "answers": [{"tags": [], "owner": {"reputation": 17676, "user_id": 4523099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh5.googleusercontent.com/-p3t1IDsNokk/AAAAAAAAAAI/AAAAAAAAABE/EsrSYS8ok2Y/photo.jpg?sz=128", "display_name": "Humam Helfawi", "link": "https://stackoverflow.com/users/4523099/humam-helfawi"}, "is_accepted": true, "score": 2, "last_activity_date": 1518631570, "creation_date": 1518631570, "answer_id": 48793598, "question_id": 48793373, "link": "https://stackoverflow.com/questions/48793373/having-trouble-initiating-an-array-in-a-structure/48793598#48793598", "title": "Having trouble initiating an array in a structure", "body": "<p><code>tax[4] = { 0 };</code> is wrong at many levels..\nOne way to initlizie your class:</p>\n\n<pre><code>CRA_Account::CRA_Account():\n   tax{0,0,0,0},\n   refund{0,0,0,0},\n   SIN{0}{\n}\n</code></pre>\n\n<p><a href=\"http://cpp.sh/7b5k4\" rel=\"nofollow noreferrer\">Online</a></p>\n\n<p>Try to have a look at <a href=\"http://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\">std::array</a></p>\n"}], "owner": {"reputation": 59, "user_id": 8598836, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/97d544e291c78428267056b34c580019?s=128&d=identicon&r=PG&f=1", "display_name": "Bot", "link": "https://stackoverflow.com/users/8598836/bot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 48793598, "answer_count": 1, "score": 2, "last_activity_date": 1518631570, "creation_date": 1518630666, "question_id": 48793373, "link": "https://stackoverflow.com/questions/48793373/having-trouble-initiating-an-array-in-a-structure", "title": "Having trouble initiating an array in a structure", "body": "<pre><code>class CRA_Account {\n    int tax[4];\n    double refund[4];\n    int SIN;\n public:\n    CRA_Account();\n }\n\n CRA_Account::CRA_Account() {\n     SIN = 0;\n     tax[4] = { 0 };\n     refund[4] = { 0 };\n }\n</code></pre>\n\n<p>When I create a object in main it'll set the SIN to 0 but won't do the same to the arrays. Can someone help why?</p>\n"}, {"tags": ["c++", "c++-winrt"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518658963, "post_id": 48793101, "comment_id": 84600521, "body": "<code>typeid()</code> is guaranteed to be unique; the string it returns (via <code>name()</code>) can be literally anything. Don&#39;t rely on it for anything."}], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "edited": false, "score": 0, "creation_date": 1518689368, "post_id": 48800470, "comment_id": 84611824, "body": "I was on the previous SDK, so I thought there must be a way to do it without <code>xaml_typename</code>. But as Ryan pointed out there are some odd caveats. I&#39;ll just get the new SDK and be done with it."}, {"owner": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "edited": false, "score": 0, "creation_date": 1518730773, "post_id": 48800470, "comment_id": 84637342, "body": "Just to confirm, which SDK is this added? I&#39;m on 17095 now, but I can&#39;t seem to find winrt::xaml_typename."}, {"owner": {"reputation": 2724, "user_id": 500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d4efa35b3d11457c35543f9f55fba3?s=128&d=identicon&r=PG", "display_name": "Kenny Kerr", "link": "https://stackoverflow.com/users/500701/kenny-kerr"}, "reply_to_user": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "edited": false, "score": 1, "creation_date": 1518813556, "post_id": 48800470, "comment_id": 84673592, "body": "You need to include the winrt/Windows.UI.Xaml.Interop.h header."}], "tags": [], "owner": {"reputation": 2724, "user_id": 500701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71d4efa35b3d11457c35543f9f55fba3?s=128&d=identicon&r=PG", "display_name": "Kenny Kerr", "link": "https://stackoverflow.com/users/500701/kenny-kerr"}, "is_accepted": true, "score": 3, "last_activity_date": 1518672527, "creation_date": 1518672527, "answer_id": 48800470, "question_id": 48793101, "link": "https://stackoverflow.com/questions/48793101/how-to-get-typename-of-underlying-type-in-in-c-winrt/48800470#48800470", "title": "How to get TypeName of underlying type in in C++/WinRT?", "body": "<p>The <code>winrt::xaml_typename&lt;Type&gt;()</code> function template is what you're after.</p>\n"}], "owner": {"reputation": 189, "user_id": 1891866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/49f36b6ae676b6c52dfd2125d5f64e17?s=128&d=identicon&r=PG", "display_name": "jvdh", "link": "https://stackoverflow.com/users/1891866/jvdh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 1, "accepted_answer_id": 48800470, "answer_count": 1, "score": 2, "last_activity_date": 1518672527, "creation_date": 1518629646, "last_edit_date": 1518657471, "question_id": 48793101, "link": "https://stackoverflow.com/questions/48793101/how-to-get-typename-of-underlying-type-in-in-c-winrt", "title": "How to get TypeName of underlying type in in C++/WinRT?", "body": "<p>I'm trying to implement the <code>ICustomPropertyProvider::Type()</code> method, however I can't find a way to get <code>TypeName</code> of a C++/WinRT type. Apparently you have <code>Object::GetType</code> and <code>T::typeid</code> in C++/CX, but not in C++/WinRT.</p>\n\n<p>I tried the following code, but that was just a wild guess as it was the only thing I could find that has remotely to do with types. I presume <code>typeid()</code> has nothing to do with XAML  however, since the only guarantee it gives is that the string it returns is uniquely identifying.</p>\n\n<pre><code>using namespace Windows::Devices::Enumeration;\nusing namespace Windows::UI::Xaml::Interop;\n\nTypeName name;\nname.Name = typeid(DeviceInformation).name();\nname.Kind = TypeKind::Metadata;\n</code></pre>\n"}, {"tags": ["c++", "linux", "atomicity"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1518629275, "post_id": 48792968, "comment_id": 84588121, "body": "You&#39;ve overly simplified your problem. Whatever the issue is, it&#39;s probably outside of the code snippets you&#39;ve shown, or in the code you&#39;ve removed and marked with comments."}, {"owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1518629574, "post_id": 48792968, "comment_id": 84588257, "body": "The comments were to give a bigger picture understanding of what&#39;s happening. But the simpler question is why would adding __sync_synchronize() immediately after a load() in the receiving thread and adding __sync_synchronize() immediately before an exchange in the publishing thread fix the problem when it seems like those lines are redundant?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518629774, "post_id": 48792968, "comment_id": 84588353, "body": "Are &quot;various shared variables&quot; std::atomic as well?"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1518629786, "post_id": 48792968, "comment_id": 84588366, "body": "The short answer is that it doesn&#39;t/shouldn&#39;t. <code>std::atomic</code> already makes memory model guarantees, and shouldn&#39;t require any additional synchronization. So if you&#39;re still observing Race Conditions, that probably means there&#39;s a problem with how you&#39;ve ordered the other code with respect to these synchronization points."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1518630044, "post_id": 48792968, "comment_id": 84588493, "body": "You do not provide enough information (what are &quot;shared variable&quot; and how you access it) not to mention <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518630128, "post_id": 48793212, "comment_id": 84588542, "body": "&quot;Whilst it is impossible to say from your simplified code&quot; maybe it is better to make OP to edit question rather than rush with an answer?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518630535, "post_id": 48793212, "comment_id": 84588737, "body": "It&#39;s a pretty strong chance that the problem is &quot;other data being written&quot; tho&#39;."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518630717, "post_id": 48793212, "comment_id": 84588824, "body": "Is that a good reason to promote creating of badly formulated questions?"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1518630853, "post_id": 48793212, "comment_id": 84588889, "body": "@Slava But if the questioner doesn&#39;t know where the question falls short, this answer will help.  And it&#39;s certainly too much for a comment..."}, {"owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "edited": false, "score": 0, "creation_date": 1518631424, "post_id": 48793212, "comment_id": 84589185, "body": "Yes, the problem is with the other data being written to. I thought std::atomic was sufficient to use as a synchronization method between different threads (ensuring loads/stores to other variables were in sync), but your examples and explanation (which are similar to what&#39;s happening) would explain the problem."}, {"owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "edited": false, "score": 0, "creation_date": 1518632015, "post_id": 48793212, "comment_id": 84589478, "body": "Also, this seems to be different from cppreference which states &quot;In addition, accesses to atomic objects may establish inter-thread synchronization and order non-atomic memory accesses as specified by std::memory_order.&quot; and inconsistent with Slava&#39;s earlier comment that &quot;std::atomic already makes memory model guarantees, and shouldn&#39;t require any additional synchronization&quot;"}, {"owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "edited": false, "score": 0, "creation_date": 1518632054, "post_id": 48793212, "comment_id": 84589502, "body": "So if we have something like: uint64_t data[100];  // initialize all to 0 std::atomic&lt;uint64_t&gt; my_flag;  // initialize to 0  thread 1: data[5] = 10; my_flag.exchange(1);  thread 2: while (my_flag.load() != 1); x = data[5];  It&#39;s possible that x would not read 10?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518632492, "post_id": 48793212, "comment_id": 84589732, "body": "Yes, very much possible."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "edited": false, "score": 0, "creation_date": 1518632576, "post_id": 48793212, "comment_id": 84589793, "body": "@Switch: You would make a much better question if you added that bit of code to the question itself."}, {"owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "edited": false, "score": 0, "creation_date": 1518634121, "post_id": 48793212, "comment_id": 84590567, "body": "@MatsPetersson: Okay thanks. I added more detail to the original question. I will say, this seems quite different from other answers to somewhat related questions like: <a href=\"https://stackoverflow.com/a/8793476/205938\">stackoverflow.com/a/8793476/205938</a> <a href=\"https://stackoverflow.com/a/45692735/205938\">stackoverflow.com/a/45692735/205938</a> and <a href=\"https://stackoverflow.com/a/30540127/205938\">stackoverflow.com/a/30540127/205938</a> (are those answers incorrect? Doesn&#39;t memory_order_seq_cst mean the race condition shouldn&#39;t happen?). Also, is __sync_synchronize() the preferred approach to dealing with this?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518683307, "post_id": 48793212, "comment_id": 84608209, "body": "I&#39;m not 100% certain, it seems like it ought to work without __sync_synchronize(), so it may be a bug in that version of the compiler. If you have access to a newer compiler [or different, e.g. clang], you may want to try that [even if it&#39;s just to prove that it is compiler-dependent]. I&#39;ve not got much time to look into this right now, and I haven&#39;t got a 4.6.2 compiler on any of my machines."}], "tags": [], "owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "is_accepted": true, "score": 4, "last_activity_date": 1518630439, "last_edit_date": 1518630439, "creation_date": 1518630051, "answer_id": 48793212, "question_id": 48792968, "link": "https://stackoverflow.com/questions/48792968/c-sync-synchronize-still-needed-with-stdatomic/48793212#48793212", "title": "C++: __sync_synchronize() still needed with std::atomic?", "body": "<p>Whilst it is impossible to say from your simplified code what actually goes on in your actual application, the fact that <code>__sync_synchronize</code> helps, and the fact that this function is a memory barrier tells me that you are writing things in the one thread that the other thread is reading, in a way that isn't atomic. </p>\n\n<p>An example:</p>\n\n<pre><code>thread_1:\n\n    object *p = new object;\n    p-&gt;x = 1;\n    b.exchange(p);   /* give pointer p to other thread */\n\nthread_2:\n\n    object *p = b.load();\n    if (p-&gt;x == 1) do_stuff();\n    else error(\"Huh?\");\n</code></pre>\n\n<p>This may very well trigger the error-path in thread2, because the write to <code>p-&gt;x</code> has not actually been completed when thread 2 reads the new pointer value p.</p>\n\n<p>Adding memory barrier, in this case, in the thread_1 code should fix this. Note that for THIS case, a memory barrier in thread_2 will not do anything - it may alter the timing and appear to fix the problem, but it won't be the right thing. You may need memory barriers on both sides still, if you are reading/writing memory that is shared between two threads.</p>\n\n<p>I understand that this may not be precisely what your code is doing, but the concept is the same - <code>__sync_synchronize</code> ensures that memory reads and memory writes have completed for ALL of the instructions before that function call [which isn't a real function call, it will inline a single instruction that waits for any pending memory operations to comlete].</p>\n\n<p>Noteworthy is that operations on <code>std::atomic</code> ONLY affect the actual data stored in the atomic object. Not reads/writes of other data.</p>\n\n<p>Sometimes you also need a \"compiler barrier\" to avoid the compiler moving stuff from one side of an operation to another:</p>\n\n<pre><code>  std::atomic&lt;bool&gt; flag(false);\n  value = 42;\n  flag.store(true);\n\n  ....\n</code></pre>\n\n<p>another thread:</p>\n\n<pre><code>  while(!flag.load());\n  print(value); \n</code></pre>\n\n<p>Now, there is a chance that the compiler generates the first form as:</p>\n\n<pre><code>  flag.store(true);\n  value = 42;\n</code></pre>\n\n<p>Now, that wouldn't be good, would it? std::atomic is guaranteed to be a \"compiler barrier\", but in other cases, the compiler may well shuffle stuff around in a similar way.</p>\n"}], "owner": {"reputation": 4536, "user_id": 205938, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2a32b3e71723a5c5f960b04e68d2dd69?s=128&d=identicon&r=PG", "display_name": "Switch", "link": "https://stackoverflow.com/users/205938/switch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1494, "favorite_count": 1, "accepted_answer_id": 48793212, "answer_count": 1, "score": 1, "last_activity_date": 1518633522, "creation_date": 1518629103, "last_edit_date": 1518633522, "question_id": 48792968, "link": "https://stackoverflow.com/questions/48792968/c-sync-synchronize-still-needed-with-stdatomic", "title": "C++: __sync_synchronize() still needed with std::atomic?", "body": "<p>I've been running into an infrequent but re-occurring race condition.\nThe program has two threads and uses std::atomic. I'll simplify the critical parts of the code to look like:</p>\n\n<pre><code>std::atomic&lt;uint64_t&gt; b;  // flag, initialized to 0\nuint64_t data[100];  // shared data, initialized to 0\n</code></pre>\n\n<p><strong>thread 1 (publishing):</strong></p>\n\n<pre><code>// set various shared variables here, for example\ndata[5] = 10;\n\nuint64_t a = b.exchange(1);  // signal to thread 2 that data is ready\n</code></pre>\n\n<p><strong>thread 2 (receiving):</strong></p>\n\n<pre><code>if (b.load() != 0) {  // signal that data is ready\n  // read various shared variables here, for example:\n  uint64_t x = data[5];\n  // race condition sometimes (x sometimes not consistent)\n}\n</code></pre>\n\n<p>The odd thing is that when I add __sync_synchronize() to each thread, then the race condition goes away. I've seen this happen on two different servers.</p>\n\n<p>i.e. when I change the code to look like the following, then the problem goes away:</p>\n\n<p><strong>thread 1 (publishing):</strong></p>\n\n<pre><code>// set various shared variables here, for example\ndata[5] = 10;\n\n__sync_synchronize();\nuint64_t a = b.exchange(1);  // signal to thread 2 that data is ready\n</code></pre>\n\n<p><strong>thread 2 (receiving):</strong></p>\n\n<pre><code>if (b.load() != 0) {  // signal that data is ready\n  __sync_synchronize();\n  // read various shared variables here, for example:\n  uint64_t x = data[5];\n}\n</code></pre>\n\n<p>Why is __sync_synchronize() necessary? It seems redundant as I thought both exchange and load ensured the correct sequential ordering of logic.</p>\n\n<p>Architecture is x86_64 processors, linux, g++ 4.6.2</p>\n"}, {"tags": ["c++", "file", "multidimensional-array", "ifstream", "cout"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629369, "post_id": 48792928, "comment_id": 84588168, "body": "Off-topic:  You should use a different name the <code>file</code> to avoid reader confusion with <code>FILE *</code>.  Maybe something like <code>source_file</code>."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 4, "creation_date": 1518629400, "post_id": 48792928, "comment_id": 84588186, "body": "Unless your file is exactly 800 characters long you&#39;re going to either leave part of your <code>text</code> array uninitialized or write past the end of it."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1518629473, "post_id": 48792928, "comment_id": 84588214, "body": "Do you <i>need</i> to read in the entire file before parsing?  In my compiler I wrote, I would input a line at a time and not store the input into a vector."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1518629537, "post_id": 48792928, "comment_id": 84588242, "body": "Welcome to C++. It&#39;s time to use <code>std::string</code> plus <code>std::vector</code> and abandon C-style character buffers and arrays. One serious problem here is you don&#39;t zero out the original array so it could contain junk data."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1518631928, "post_id": 48793416, "comment_id": 84589435, "body": "Basically; write C++ rather than (bad) C. Agreed."}], "tags": [], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "is_accepted": true, "score": 5, "last_activity_date": 1518632089, "last_edit_date": 1518632089, "creation_date": 1518630864, "answer_id": 48793416, "question_id": 48792928, "link": "https://stackoverflow.com/questions/48792928/instead-normal-text-from-file/48793416#48793416", "title": "&#39;\ufffd&#39; instead normal text from file", "body": "<p>The size of <code>text</code> does not correspond to the size of the file. That's not only wasteful, but in this case it's causing you to read off the end of the file. A better design would be to instead define <code>vector&lt;string&gt; text</code>. Using a valid <code>ifstream File</code> you could populate this <code>text</code> in the body of your constructor like this:</p>\n\n<pre><code>for(string i; getline(File, i); text.push_back(i));\n</code></pre>\n\n<p>From there, you'd also need to adapt <code>write</code> to:</p>\n\n<pre><code>copy(cbegin(text), cend(text), ostream_iterator&lt;string&gt;(cout, \"\\n\"));\n</code></pre>\n\n<p>You'd also need to put in safeguard checks that the indices passed into <code>no_zero</code> and <code>ret_char</code> were valid, but the rest of the code should work as is.</p>\n\n<p><a href=\"https://ideone.com/Dngc8E\" rel=\"nofollow noreferrer\"><kbd>Live Example</kbd></a></p>\n"}], "owner": {"reputation": 66, "user_id": 9176468, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cLduP0Y-nLY/AAAAAAAAAAI/AAAAAAAAADw/VGFY7duC_84/photo.jpg?sz=128", "display_name": "\u0427\u0435\u0440\u043d\u044b\u0439 \u041a\u0430\u043c\u0435\u043d\u044c", "link": "https://stackoverflow.com/users/9176468/%d0%a7%d0%b5%d1%80%d0%bd%d1%8b%d0%b9-%d0%9a%d0%b0%d0%bc%d0%b5%d0%bd%d1%8c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 48793416, "answer_count": 1, "score": 1, "last_activity_date": 1552227824, "creation_date": 1518628939, "last_edit_date": 1552227824, "question_id": 48792928, "link": "https://stackoverflow.com/questions/48792928/instead-normal-text-from-file", "title": "&#39;\ufffd&#39; instead normal text from file", "body": "<p>I have file with this code:</p>\n\n<pre><code>start:\n    var: a , b , c;\n    a = 4;\n    b = 2;\n    c = a + b;\n    wuw c;\n    end;/\n</code></pre>\n\n<p>I created a class that contains an array of characters in which my code resides:</p>\n\n<pre><code>class file{               //class of program file\n    private:\n    ifstream File;        //file\n    char text[X][Y];      //code from file\n</code></pre>\n\n<p>Information from file I load to array using constructor of class:</p>\n\n<pre><code>   file(string path)\n    {\n         File.open(path); //open file\n\n         for(int x = 0 ; x &lt; X ; x++)\n         {  \n              for (int y = 0; y &lt; Y ; y++) text[x][y] = File.get();     \n         }\n    }\n</code></pre>\n\n<p>In class I have function that write to console text from array:</p>\n\n<pre><code>void write()\n{                        \n    for (int x = 0 ; x &lt; X ; x++)\n    {\n         for (int y = 0 ; y &lt; Y ; y++) cout &lt;&lt; text[x][y];\n\n    }\n}\n</code></pre>\n\n<p>But after calling write() function I have this text:</p>\n\n<pre><code>start:\n    var: a , b , c;\n    a = 4;\n    b = 2;\n\n    c = a + b;\n    wuw c;\n    end;/\n\n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd \n</code></pre>\n"}, {"tags": ["c++", "operator-overloading", "operands"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518628705, "post_id": 48792796, "comment_id": 84587845, "body": "<i>&quot;Doable?&quot;</i> Sure. Have you read the relevant part of your C++ book, or at least a relevant FAQ post like <a href=\"https://stackoverflow.com/q/4421706/3002139\">stackoverflow.com/q/4421706/3002139</a> ? If so, what exactly is still unclear?"}, {"owner": {"reputation": 1, "user_id": 3329892, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003370144831/picture?type=large", "display_name": "user3329892", "link": "https://stackoverflow.com/users/3329892/user3329892"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1518633967, "post_id": 48792796, "comment_id": 84590484, "body": "I want &quot;MyClass&quot; Type data on the right side of &#39;+&#39; operator while the builtin type(&#39;float&#39; here) is on the left side. Like this: MyClass other = xf + vec;"}], "owner": {"reputation": 1, "user_id": 3329892, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003370144831/picture?type=large", "display_name": "user3329892", "link": "https://stackoverflow.com/users/3329892/user3329892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1518628691, "answer_count": 0, "score": 0, "last_activity_date": 1518628485, "creation_date": 1518628485, "question_id": 48792796, "link": "https://stackoverflow.com/questions/48792796/c-operator-overloading-for-builtin-type-and-class-both-are-on-operand", "closed_reason": "Duplicate", "title": "C++ Operator &#39;+&#39; overloading for builtin type and class both are on operand", "body": "<pre><code>#include \"iostream\"\n\nclass MyClass\n{\npublic:\n    float x, y, z;\n    MyClass()\n    {\n        x = y = z = 0;\n    }\n\n    MyClass operator +(float a)\n    {\n        MyClass r = MyClass();\n        r.x = this-&gt;x + a;\n        r.y = this-&gt;y + a;\n        r.z = this-&gt;z + a;\n        return r;\n    }\n};\n\nint Main()\n{\n    float xf = 0;\n    MyClass vec = MyClass();\n    vec.x = 10;\n    MyClass other = vec + xf;\n}\n</code></pre>\n\n<p>So everything is working fine for the code above. But I want to write like the code shown below:</p>\n\n<pre><code>MyClass other = xf + vec;\n</code></pre>\n\n<p>How to do that?</p>\n\n<p>Basically, I want to add builtin types, lets say 'float' with my class type. Now that I can do that, as show in the first snap. But I do not want the directional behavior that \"MyClass\" type data has to be on the left side of '+' operator always.</p>\n\n<p><strong>I want \"MyClass\" Type data on the right side of '+' operator while the builtin type('float' here) is on the left side.</strong></p>\n\n<p>Doable?</p>\n"}, {"tags": ["c++", "ios", "opencv"], "owner": {"reputation": 10632, "user_id": 3695849, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6328596740b816249439503ae5d9c032?s=128&d=identicon&r=PG&f=1", "display_name": "Teja Nandamuri", "link": "https://stackoverflow.com/users/3695849/teja-nandamuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518632791, "creation_date": 1518628478, "last_edit_date": 1518632791, "question_id": 48792790, "link": "https://stackoverflow.com/questions/48792790/calculating-skew-angle-using-opencv-in-ios", "title": "calculating skew angle using openCV in iOS", "body": "<p>I'm trying to perform OCR for business cards, and I am trying to pre-process the image, and Image rotation/Deskewing is one of the step. </p>\n\n<p>I'm using openCV to do this.</p>\n\n<p>Here is the image with some angled text:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dfcsN.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dfcsN.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>output: </p>\n\n<p><a href=\"https://i.stack.imgur.com/RpI6B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RpI6B.png\" alt=\"enter image description here\"></a></p>\n\n<p>I did some research and found that , calculating skew angle can be improved by calculating contours and creating a flood filled image. </p>\n\n<p>I did try that one as well, and here is the image resulted by flood filling:</p>\n\n<p><a href=\"https://i.stack.imgur.com/LQtQp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LQtQp.png\" alt=\"enter image description here\"></a></p>\n\n<p>floodfill_threshold:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QZPnW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QZPnW.png\" alt=\"enter image description here\"></a></p>\n\n<p>flood fill_inverse:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hiVPO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hiVPO.png\" alt=\"enter image description here\"></a></p>\n\n<p>grayscale pic of floodfill_threshold:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xYItb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xYItb.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Code to calculate skew angle:</strong></p>\n\n<pre><code>cv::Mat tempMat2 = im_floodfill.clone();//Tried with all three image results\ncv::cvtColor(cvImage2, tempMat2, cv::COLOR_BGR2GRAY);\ncv::bitwise_not(tempMat2, tempMat2);\n\nUIImage *invertImg5 = [self UIImageFromCVMat:tempMat2];//just to see the image\n\n//Calculating Skew angle\nstd::vector&lt;cv::Vec4i&gt; lines;\ncv::HoughLinesP(tempMat2, lines, 1, CV_PI/180, 100, size.width / 2.f, 30);\ncv::Mat disp_lines(size, CV_8UC1, cv::Scalar(0, 0, 0));\ndouble angle = 0.;\nunsigned nb_lines = lines.size();\nfor (unsigned i = 0; i &lt; nb_lines; ++i)\n{\n    cv::line(disp_lines, cv::Point(lines[i][0], lines[i][1]),\n             cv::Point(lines[i][2], lines[i][3]), cv::Scalar(255, 0 ,0));\n    angle += atan2((double)lines[i][3] - lines[i][1],\n                   (double)lines[i][2] - lines[i][0]);\n}\nangle /= nb_lines; // mean angle, in radians.\n\nUIImage *newImg = [self UIImageFromCVMat:disp_lines];\n\nreturn angle;\n</code></pre>\n\n<p><strong>Code to rotate:</strong></p>\n\n<pre><code>//Got the angle and now rotate the image as per the angle\nstd::vector&lt;cv::Point&gt; points;\ncv::Mat_&lt;uchar&gt;::iterator it = cvImage.begin&lt;uchar&gt;();\ncv::Mat_&lt;uchar&gt;::iterator end = cvImage.end&lt;uchar&gt;();\nfor (; it != end; ++it)\n    if (*it)\n        points.push_back(it.pos());\n\ncv::RotatedRect box = cv::minAreaRect(cv::Mat(points));\n\ncv::Mat rot_mat = cv::getRotationMatrix2D(box.center, angle, 1); //angle\n\ncv::Mat rotated;\ncv::warpAffine(cvImage, rotated, rot_mat, cvImage.size(), cv::INTER_CUBIC);\n</code></pre>\n\n<p>The number of lines are 575 and the output image is still same:</p>\n\n<p><a href=\"https://i.stack.imgur.com/8GaEs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8GaEs.png\" alt=\"enter image description here\"></a></p>\n\n<p>For a moment I ignored this output image, and cared about skew angle which is 21 degrees,</p>\n\n<p>The resulting image is :</p>\n\n<p><a href=\"https://i.stack.imgur.com/0dhId.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0dhId.png\" alt=\"enter image description here\"></a></p>\n\n<p>and when I try to rotate the negative 21, result is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/xjkRl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xjkRl.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is not what I hoping for. I'm not sure why the calculated skew angle is wrong.</p>\n\n<p>One thing I have no idea is the line height parameter in </p>\n\n<pre><code>cv::HoughLinesP(tempMat2, lines, 1, CV_PI/180, 100, size.width / 2.f, 30);\n</code></pre>\n\n<p>I have used 30 here, but i'm not sure how to calculate that number based on the image(business card image). </p>\n\n<p>What am I missing here ?</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 2, "creation_date": 1518628649, "post_id": 48792737, "comment_id": 84587813, "body": "I didn&#39;t execute your code, but from what I read, you update the enemy&#39;s level in <code>levelMatch</code> but don&#39;t update the health accordingly (this is only done in the constructor, not in <code>levelMatch</code>)"}, {"owner": {"reputation": 1624, "user_id": 1816149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ef0c1c5f57ec8705986fc3a646ac08?s=128&d=identicon&r=PG", "display_name": "Flopp", "link": "https://stackoverflow.com/users/1816149/flopp"}, "edited": false, "score": 0, "creation_date": 1518629121, "post_id": 48792737, "comment_id": 84588042, "body": "A remark about the coding style: in member functions, you don&#39;t have to use <code>this-&gt;</code>; instead you can directly access member variables."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629568, "post_id": 48792737, "comment_id": 84588255, "body": "Coding style:  search the internet for &quot;StackOverflow c++ leading underscore&quot;.  To avoid conflicts, use underscores at the end of identifiers."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629680, "post_id": 48792737, "comment_id": 84588301, "body": "Debugger.  Use a debugger.  A debugger will allow you to single step through your code <i>watching</i> values of variables.  Often, using a debugger is faster than posting correctly to StackOverflow and <i>waiting</i> for somebody to inspect your code or debug your code for you."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629696, "post_id": 48792737, "comment_id": 84588315, "body": "When you used the debugger, which statement is causing the issue?"}, {"owner": {"reputation": 11, "user_id": 9361070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FytFc.jpg?s=128&g=1", "display_name": "JusticeForMarth", "link": "https://stackoverflow.com/users/9361070/justiceformarth"}, "reply_to_user": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518639011, "post_id": 48792737, "comment_id": 84593130, "body": "@Caninonos Okay, I followed your tip and it worked. I will now update the rest of my code to meet the criteria. Thank you, good sir."}, {"owner": {"reputation": 11, "user_id": 9361070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FytFc.jpg?s=128&g=1", "display_name": "JusticeForMarth", "link": "https://stackoverflow.com/users/9361070/justiceformarth"}, "reply_to_user": {"reputation": 1624, "user_id": 1816149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ef0c1c5f57ec8705986fc3a646ac08?s=128&d=identicon&r=PG", "display_name": "Flopp", "link": "https://stackoverflow.com/users/1816149/flopp"}, "edited": false, "score": 0, "creation_date": 1518639079, "post_id": 48792737, "comment_id": 84593159, "body": "@Flopp Thanks for the tips, I will certainly apply this from now on."}, {"owner": {"reputation": 11, "user_id": 9361070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FytFc.jpg?s=128&g=1", "display_name": "JusticeForMarth", "link": "https://stackoverflow.com/users/9361070/justiceformarth"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518639203, "post_id": 48792737, "comment_id": 84593212, "body": "@ThomasMatthews Thanks for the comments, Thomas. I hadn&#39;t debugged it because my University wants me to use this god-awful online IDE and the debugger is still in beta, so I didn&#39;t try my chances. I managed to find a solution, but thank you anyway."}], "owner": {"reputation": 11, "user_id": 9361070, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FytFc.jpg?s=128&g=1", "display_name": "JusticeForMarth", "link": "https://stackoverflow.com/users/9361070/justiceformarth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518628748, "creation_date": 1518628311, "last_edit_date": 1518628748, "question_id": 48792737, "link": "https://stackoverflow.com/questions/48792737/how-can-i-fix-this-logic-error-within-a-class-function", "title": "How can I fix this Logic Error within a Class Function?", "body": "<p>I'm making a Text Based RPG game for a university project and I have come across a logic error -- I believe it's a logic error because it doesn't produce the results I'm expecting.</p>\n\n<p>I was designing a Turn-Based System and I wanted an automated function to match the Enemies' level with the Player's level and make it higher by 2. So, independently of whatever level the player is, this function will match the enemy's level and be 2 levels above.  </p>\n\n<p>This code looks like the following:</p>\n\n<pre><code>#ifndef ADD_H\n#define ADD_H\n#include &lt;string&gt;\n#include &lt;locale&gt;\n#include &lt;ctype.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;unistd.h&gt;\n\n\nunsigned int sleep(unsigned int seconds);\n\nusing namespace std;\n\n\n\n\nclass Character\n   {\nprivate:\n/*\n * The UNDERSCORE is mainly so you know it's private!\n*/\nstring _name;\n\nint _level;\nint _health;\nint _hpThres;\nint _exp;\nint _expThres;\nint _bonusDEF; // UNUSED\nint _bonusATK; // UNUSED\nint _totalATK; // UNUSED\nint _attack;\nint _damageMin;\nint _damageMax;\nint _defense;\n\npublic:\n    Character();\n    Character(const string name);\n    virtual ~Character();\n\n//Functions\n\nvoid init (const string name);\nstring getAsString();\n\n\n// THIS THE FUNCTION I'M CURRENTLY HAVING TROUBLES WITH\nvoid levelMatch(int lvl)\n{\n    this-&gt;_level = lvl + _level;\n}\n\n//The functions below have the same format and they work, but the one above simply doesn't\nvoid setBonus(int n, int m)\n    {\n    this-&gt;_attack = _attack + n;\n    this-&gt;_defense = _defense + m;\n    }\n\nvoid levelUp(int exp)\n    {\n    while (this-&gt;_exp &gt;= this-&gt;_expThres)\n        {\n        this-&gt;_exp -= this-&gt;_expThres;\n        this-&gt;_level++;\n        this-&gt;_expThres = (_level*100) - 50;\n        }\n    }\n\nvoid damage(int dmg)\n    {\n     this-&gt;_health = _health -= dmg;\n    }\n\n\n\n//Accessors\ninline const string&amp; getName() const {return this-&gt;_name;}\ninline const int&amp; getLevel() const {return this-&gt;_level;}\ninline const int&amp; getHealth() const {return this-&gt;_health;}\ninline const int&amp; getHPThres() const {return this-&gt;_hpThres;}\ninline const int&amp; getEXP() const {return this-&gt;_exp;}\ninline const int&amp; getEXPThres() const {return this-&gt;_expThres;}\ninline const int&amp; getAttack() const {return this-&gt;_attack;}\ninline const int&amp; getDamageMin() const {return this-&gt;_damageMin;}\ninline const int&amp; getDamageMax() const {return this-&gt;_damageMax;}\ninline const int&amp; getDefense() const {return this-&gt;_defense;}\n\n\n//Modifiers\n\n\n\n};\n\n#endif\n</code></pre>\n\n<p>This is where I use the function in the Main file: bellow there's the top half which is fine, it's the bottom half that I have an issue with.</p>\n\n<pre><code>#include \"add.h\"\n#include &lt;climits&gt;\n\n///TOP HALF OF MY CODE\nvoid setName()\n{\n\n    // In case you forget, which you will, to print something from a class\n    // Make an object class, using &lt;CLASS NAME&gt; OBJECT (INITIALIZE VARIBLE);\n    // Now, since this is not yet optimized, other stats need to be initialized independently,\n    // So, &lt;CLASS OBJECT&gt; SET FUNCTION (THE VARIABLE) will give that object that value,\n    // To print it use: &lt;CLASS OBJECT&gt;.GET FUNCTION(); \n    // IMPORTANT NOTE: The GET FUNCTION is the value you need here. If you need to calculate something,\n    // use the the GET FUNCTION by calling the Class Object (dot) GET FUNCTION.\n\n    string name;\n\n    cout &lt;&lt; \"Enter the name of your character: \";\n    cin &gt;&gt; name;\n    Character user (name);\n\n\n}\n\nvoid pressAnyKey(void)\n    {\n    cout &lt;&lt; \"\\nPress ENTER to continue...\";\n    cin.ignore();\n    }\n\n\n//Above you can find amazing functions that you needed for future reference\n\n\n\nint main()\n{ \n\n    string YN;  // Sigh...\n\n    cout &lt;&lt; \" \\n\";\n    cout &lt;&lt; \"*****************************************\" &lt;&lt; endl;\n    cout &lt;&lt; \"*                                       *\" &lt;&lt; endl;\n    cout &lt;&lt; \"*   SECOND BRAVES: THE WAR BELL TOLLS   *\" &lt;&lt; endl;\n    cout &lt;&lt; \"*                                       *\" &lt;&lt; endl;\n    cout &lt;&lt; \"*****************************************\\n\";\n    pressAnyKey();\n\n    string name;\n\n    cout &lt;&lt; \"Enter the name of your character: \";\n    cin &gt;&gt; name;\n    Character user (name);\n\n    //cout &lt;&lt; print the story \n    sleep(1);\n\n    //Right so the section below may look intimidating, but let me explain\n    //The Do-While Switch Loop is to increment two loops,\n    //The main loop is the first you see, while has the option to choose the weapons,\n    //The second is morer about whether you want said-weapon. \n    //The second loop will break when you respond Yes or No.\n    //Saying Yes will break both loops as I have instructed,\n    //Saying No will sent the user back to the main loop (with the \"goto\" command).\n    //The Cin.fail doesn't seem to work as I wanted to, but it does the important bit,\n    //which is to prevent the loop from going beserk if the user is stupid\n    do\n    {\n    again:   \n    int weapon;\n    cout &lt;&lt; \"\\nChoose your weapon: \" &lt;&lt; endl;\n    cout &lt;&lt; \"************\" &lt;&lt; endl;\n    cout &lt;&lt; \"*          *\" &lt;&lt; endl;\n    cout &lt;&lt; \"* 1. Sword *\" &lt;&lt; endl;\n    cout &lt;&lt; \"* 2. Axe   *\" &lt;&lt; endl;\n    cout &lt;&lt; \"* 3. Lance *\" &lt;&lt; endl;\n    cout &lt;&lt; \"*          *\" &lt;&lt; endl;\n    cout &lt;&lt; \"************\" &lt;&lt; endl;\n\n    cin &gt;&gt; weapon;\n\n    while (cin.fail()) //Meant to catch the wrong type and ignore it\n        {\n        cin.clear();\n        cin.ignore(INT_MAX, 1);\n        cin.get();\n        }\n\n    switch(weapon)\n      {\n\n        case 1:\n        {   \n           cout &lt;&lt; \"This is the Hero Sword,\" &lt;&lt; endl;\n           cout &lt;&lt; \"Very high on Attack, but low on Defense!\\n\";\n           cout &lt;&lt; \"Do you want to choose this weapon? (Y/N)\" &lt;&lt; endl;\n           cin &gt;&gt; YN;\n\n           if (YN == \"Y\")\n               {\n                int A = 3;\n                int D = 1; \n                user.setBonus(A,D);\n\n                cout &lt;&lt; \"You chose the Hero Sword!\" &lt;&lt; endl;\n\n                break;\n               }\n           else\n               {\n                goto again;\n               }\n\n         }\n\n        case 2:\n            {\n            cout &lt;&lt; \"This is the Hero Axe,\" &lt;&lt; endl;\n            cout &lt;&lt; \"It has balanced Attack and Defense!\\n\";\n            cout &lt;&lt; \"Do you want to choose this weapon? (Y/N)\" &lt;&lt; endl;\n            cin &gt;&gt; YN;\n\n           if (YN == \"Y\")\n               {\n               int A = 2;\n               int D = 2; \n               user.setBonus(A,D);\n\n               cout &lt;&lt; \"You chose the Hero Axe!\" &lt;&lt; endl;\n\n                break;\n               }\n           else\n               {\n                goto again;\n               }\n            }\n            break;\n        case 3:\n            {\n            cout &lt;&lt; \"This is the Hero Lance,\" &lt;&lt; endl;\n            cout &lt;&lt; \"Very high Defense, but low on Attack!\\n\";\n            cout &lt;&lt; \"Do you want to choose this weapon? (Y/N)\" &lt;&lt; endl;\n            cin &gt;&gt; YN;\n\n           if (YN == \"Y\")\n               {\n               int A = 2;\n               int D = 2; \n               user.setBonus(A,D);\n\n               cout &lt;&lt; \"You chose the Hero Lance!\" &lt;&lt; endl;\n\n                break;\n               }\n           else\n               {\n                goto again;\n               }\n\n            }\n\n        default:\n            {\n             cout &lt;&lt; \"\\nChoose a weapon, BASED ON THE NUMBERS AVAILABLE!\" &lt;&lt; endl;\n             goto again;\n            }\n        } \n    } while (YN != \"Y\");\n</code></pre>\n\n<p>/// BOTTOM HALF of the code where my issue resides</p>\n\n<pre><code>        string N1;\n        N1 = \"Shadow Armour\";\n        Character Enemy1 (N1);\n        Enemy1.levelMatch(user.getLevel() + 2); // Doesn't work.\n        sleep(1);\n\n        do\n        {\n        back:\n        int choice;\n        cout &lt;&lt; \"A wild \" &lt;&lt; Enemy1.getName() &lt;&lt; \" is challenging you to battle!\" &lt;&lt; endl;\n        sleep(1);\n        cout &lt;&lt; \"What do you want to do?\" &lt;&lt; endl;\n        cout &lt;&lt; \"*      1. Attack      *\" &lt;&lt; endl;\n        cout &lt;&lt; \"*      2. Guard       *\" &lt;&lt; endl;\n        cout &lt;&lt; \"*      3. Brave       *\" &lt;&lt; endl;\n        cout &lt;&lt; \"*      4. Run         *\" &lt;&lt; endl;\n        cout &lt;&lt; \"***********************\" &lt;&lt; endl;\n        cout &lt;&lt; \"* \" &lt;&lt; user.getName() &lt;&lt; \": \" &lt;&lt; user.getHealth() &lt;&lt; \" Hit Points left!\" &lt;&lt; endl;\n        cout &lt;&lt; \"***********************\" &lt;&lt; endl;\n        cout &lt;&lt; \"* \" &lt;&lt; Enemy1.getName() &lt;&lt; \": \" &lt;&lt; Enemy1.getHealth() &lt;&lt; \" Hit Points left!\" &lt;&lt; endl;\n        cout &lt;&lt; \"***********************\" &lt;&lt; endl;\n\n        cin &gt;&gt; choice;\n\n        switch (choice)\n            {\n\n            case 1:\n                {\n                int BattleDamage;\n                int RandomDamage = rand() % (user.getDamageMin() - user.getDamageMax() + 1) + user.getDamageMin();\n                BattleDamage = Enemy1.getHealth() + Enemy1.getDefense() - RandomDamage;\n                Enemy1.damage(BattleDamage);\n                cout &lt;&lt; \"You attacked the monster! You did \" &lt;&lt; BattleDamage &lt;&lt; \" of damage!\" &lt;&lt; endl;\n\n                break;\n                }\n            case 2:\n                cout &lt;&lt; \"ye\" &lt;&lt; endl;\n                break;\n            case 3:\n                cout &lt;&lt; \"ye\" &lt;&lt; endl;\n                break;\n            case 4:\n                cout &lt;&lt; \"ye\" &lt;&lt; endl;\n                break;\n            default:\n                {\n                cout &lt;&lt; \"\\nChoose an option, BASED ON THE NUMBERS AVAILABLE!\" &lt;&lt; endl;\n                goto back;\n                }\n\n            }\n        } while (user.getHealth() &gt; 0);\n\n\n}\n</code></pre>\n\n<p>The add.cpp file:</p>\n\n<pre><code>#include \"add.h\"\n#include &lt;string&gt;\n#include &lt;math.h&gt;\nusing namespace std;\n\nCharacter::Character() \n{\n\n}\n\nCharacter::Character(const string name)\n{\n    this-&gt;_name = name;\n\n    this-&gt;_level = 1;\n    this-&gt;_health = this-&gt;_level+16;\n    this-&gt;_hpThres = this-&gt;_level+16;\n    this-&gt;_exp = (this-&gt;_level*100)-50;\n    this-&gt;_expThres = (this-&gt;_level*100)-50;\n    this-&gt;_attack = (this-&gt;_level+3);\n    this-&gt;_defense = round((_level+2)*1.5);\n    this-&gt;_damageMin = this-&gt;_attack-2;\n    this-&gt;_damageMax = this-&gt;_attack+2;\n\n}\n\nCharacter::~Character() \n{\n\n}\n\n\n\n\n//Functions\n//void Character::init(const string name){ }\n\nstring Character::getAsString()\n    {\n\n    }\n</code></pre>\n\n<p>I know it doesn't work because the calculation should make the Enemy Hit Points higher by 2, but when it's compiled and it runs, the Enemy's Hit Points are same as the Player, meaning the function never worked in the first place.</p>\n\n<p>Output from running the code:</p>\n\n<pre><code>A wild Shadow Armour is challenging you to battle!\nWhat do you want to do?\n*      1. Attack      *\n*      2. Guard       *\n*      3. Brave       *\n*      4. Run         *\n***********************\n* a: 17 Hit Points left!\n***********************\n* Shadow Armour: 17 Hit Points left! &lt;-- This should have been 19, not 17. \n</code></pre>\n\n<p>Being 17 means the function was ignored and never worked.</p>\n\n<p>I'm new to C++, so I understand if my code looks bad.\nThanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 3, "creation_date": 1518628249, "post_id": 48792686, "comment_id": 84587597, "body": "Might be a precedence issue. And what&#39;s the full error? It won&#39;t be that vague."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1518628354, "post_id": 48792686, "comment_id": 84587654, "body": "Consider writing <code>cout &lt;&lt; p = pow(2,n)*n!</code> as <i>two</i> statements."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1518628420, "post_id": 48792686, "comment_id": 84587688, "body": "Additionally, you do not want to use <code>pow</code> to calculate integer powers."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1518628456, "post_id": 48792686, "comment_id": 84587702, "body": "What is that <code>!</code> doing there? C++ doesn&#39;t have a factorial operator."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1518628850, "post_id": 48792686, "comment_id": 84587918, "body": "Stop putting assignments in the middle of expressions like this. You&#39;re sacrificing readability, even if that code were correct."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629817, "post_id": 48792686, "comment_id": 84588381, "body": "Prefer not to call functions in a <code>cout</code> statement.  Use a constant temporary variable instead."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518629861, "post_id": 48792686, "comment_id": 84588406, "body": "If you used a temporary, you could use bit shifting instead of calling the <code>pow</code> function.  Bit shifting is more efficient (no function calls required)."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1518633813, "post_id": 48792686, "comment_id": 84590405, "body": "@ThomasMatthews: I think using <code>std::pow(2, n)</code> is <i>exactly</i> how to <i>express</i> the code! You should tell the compiler <i>what</i> to do where possible rather than <i>how</i> to do it. It is the job of the compiler (and its standard library) to make it efficient. Here is a <a href=\"https://godbolt.org/g/28CJeo\" rel=\"nofollow noreferrer\">demo implementation</a> abstracting the optimization away."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 0, "creation_date": 1518641740, "post_id": 48792686, "comment_id": 84594520, "body": "@DietmarK&#252;hl: Although the compiler&#39;s job is to make it efficient, one can always provide more information to help the compiler.  Unless compilers can detect the pattern, I&#39;m still going with bit shifting (bit shifting requires less work for the compiler)."}], "answers": [{"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1518628547, "post_id": 48792753, "comment_id": 84587753, "body": "Finally, there are quite a few errors in your code snippet, some of them pointed by comments on your question. Try and fix them."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 8, "last_activity_date": 1518628368, "creation_date": 1518628368, "answer_id": 48792753, "question_id": 48792686, "link": "https://stackoverflow.com/questions/48792686/no-viable-overloaded-c/48792753#48792753", "title": "No viable overloaded &#39;=&#39; c++", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"noreferrer\">C++ Operator Precedence</a>, operator <code>&lt;&lt;</code> has precedence over operator <code>=</code>.</p>\n\n<p>This means</p>\n\n<pre><code>cout &lt;&lt; p=pow(2,n)*n! &lt;&lt; endl;\n</code></pre>\n\n<p>is read as</p>\n\n<pre><code>(cout &lt;&lt; p)=(pow(2,n)*n! &lt;&lt; endl);\n</code></pre>\n\n<p>which has no sense. Protect you assignment with parenthesis:</p>\n\n<pre><code>cout &lt;&lt; (p=pow(2,n)*n!) &lt;&lt; endl;\n</code></pre>\n\n<p>or better yet, split it in two statements:</p>\n\n<pre><code>p=pow(2,n)*factorial(n); // n! does not exist in C++.\ncout &lt;&lt; p &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 9269858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759522884edc35a7eaf1e002761e3b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Jane", "link": "https://stackoverflow.com/users/9269858/jane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 793, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1518628491, "creation_date": 1518628136, "question_id": 48792686, "link": "https://stackoverflow.com/questions/48792686/no-viable-overloaded-c", "title": "No viable overloaded &#39;=&#39; c++", "body": "<p>I'm getting the error message \"no viable overloaded '='\".\nThis is the code as I have it now </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\nint main() {\n    auto n=0;\n    int p=0;\n    cout &lt;&lt; \"enter number n:\"&lt;&lt; endl;\n    cin &gt;&gt; n ;\n    cout &lt;&lt; p=pow(2,n)*n! &lt;&lt; endl; //this is where I get the error message\n    cout &lt;&lt; \"the product is:\" &lt;&lt; endl;\n    cout &lt;&lt; p &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Can anyone tell me what I have wrong?</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1518628524, "post_id": 48792676, "comment_id": 84587743, "body": "I don&#39;t see it <a href=\"http://www.dictionary.com/browse/jittering\" rel=\"nofollow noreferrer\">jittering</a> in the traditional sense of the word.  What is &quot;jittery&quot;?  What is your actual question?"}, {"owner": {"reputation": 1996, "user_id": 5161718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448f457d74b98db25dd6bcccfa73a32c?s=128&d=identicon&r=PG&f=1", "display_name": "Bojan Petkovic", "link": "https://stackoverflow.com/users/5161718/bojan-petkovic"}, "edited": false, "score": 1, "creation_date": 1518629691, "post_id": 48792676, "comment_id": 84588310, "body": "likely the mouse keeps moving slightly.  it might not be perfectly stable.  or you might be calling the function way too frequently, so it keeps re-drawing it all the time."}, {"owner": {"reputation": 138, "user_id": 4446638, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eAie8.jpg?s=128&g=1", "display_name": "cheekybanana", "link": "https://stackoverflow.com/users/4446638/cheekybanana"}, "edited": false, "score": 0, "creation_date": 1518659770, "post_id": 48792676, "comment_id": 84600695, "body": "Looks to me like it is somehow being drawn multiple times before being displayed to the window. Something appears to be wrong about the clear-draw-display cycle.I feel like you need to show us more of your code. Maybe the tiles in the back are also &quot;jittering&quot; but we can&#39;t tell because they&#39;re static? My two cents."}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 7089132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-5JPQQaOtLyw/AAAAAAAAAAI/AAAAAAAAFoQ/eW56aFvLb2c/photo.jpg?sz=128", "display_name": "Guy Sudai", "link": "https://stackoverflow.com/users/7089132/guy-sudai"}, "edited": false, "score": 0, "creation_date": 1518725544, "post_id": 48807061, "comment_id": 84634797, "body": "btw, I have a function that updates the game, it just isnt there. I&#39;m trying out the position of the piece when I use it"}, {"owner": {"reputation": 207, "user_id": 7089132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-5JPQQaOtLyw/AAAAAAAAAAI/AAAAAAAAFoQ/eW56aFvLb2c/photo.jpg?sz=128", "display_name": "Guy Sudai", "link": "https://stackoverflow.com/users/7089132/guy-sudai"}, "edited": false, "score": 0, "creation_date": 1518725945, "post_id": 48807061, "comment_id": 84634986, "body": "thanks, making the game wait for a couple of seconds worked! kudos for the solution"}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1518696901, "creation_date": 1518696901, "answer_id": 48807061, "question_id": 48792676, "link": "https://stackoverflow.com/questions/48792676/moving-sprite-at-mouse-location-jittery/48807061#48807061", "title": "moving sprite at mouse location jittery", "body": "<p>This is a very general answer, but you will have to change a lot of your code anyway to fix your problem: <strong>do not mix render and update code</strong>. </p>\n\n<p>Create one method to draw the current state of your game. Create <em>another</em> method to update the current state of your game. </p>\n\n<p>For example, your <code>Render()</code> method renders a chesspiece. Your <code>Update()</code> method changes the position of the chesspiece.</p>\n\n<p>Why not have both in the same method? You want to draw as many times as possible to make your game look smooth. You want high FPS (frames drawn per second). <strong>But</strong> you want to update your game state not at the speed of drawing, but at a constant speed. For example your chesspieces takes 2 seconds to move. You don't want sombody with a slower graphics card to wait longer, or somebody with a faster computer to not see it at all because the animation took only 20 milliseconds. You want it to take 2 seconds on <em>both</em> systems. </p>\n\n<p>Your jittering is most likely an effect of mixing up drawing and gamestate. Fix that first.</p>\n"}], "owner": {"reputation": 207, "user_id": 7089132, "user_type": "registered", "accept_rate": 25, "profile_image": "https://lh5.googleusercontent.com/-5JPQQaOtLyw/AAAAAAAAAAI/AAAAAAAAFoQ/eW56aFvLb2c/photo.jpg?sz=128", "display_name": "Guy Sudai", "link": "https://stackoverflow.com/users/7089132/guy-sudai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 48807061, "answer_count": 1, "score": 0, "last_activity_date": 1518696901, "creation_date": 1518628114, "question_id": 48792676, "link": "https://stackoverflow.com/questions/48792676/moving-sprite-at-mouse-location-jittery", "title": "moving sprite at mouse location jittery", "body": "<p>I am trying to move the sprite to the mouse's location, and what I get works, but it is pretty jittery <a href=\"https://gyazo.com/e5e34c641de0602ab498714ec9f7ec7c\" rel=\"nofollow noreferrer\">the result</a></p>\n\n<p>Here is my main:</p>\n\n<pre><code>int main() {\nGame chessGame;\nRenderWindow wnd(VideoMode(400, 400), \"Chess Game\");\n\nwhile (wnd.isOpen()) {\n    Event event;\n    while (wnd.pollEvent(event))\n    {\n        if (event.type == Event::Closed) {\n            wnd.close();\n        }\n\n    }\n    wnd.clear();\n    chessGame.printGame(&amp;wnd);\n    wnd.display();\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>The important part of <code>printGame()</code>:</p>\n\n<pre><code>// more stuff up there but it's not neccessary\n\n// txt is the texture of the chess piece\nSprite tool(txt);\n        FloatRect toolRec = tool.getGlobalBounds();\n\n        tool.setScale(window-&gt;getSize().x / 8 / toolRec.width  , window-&gt;getSize().y / 8 / toolRec.height);\n        Mouse m;\n        Vector2i pos =  m.getPosition(*window);\n        tool.setPosition(pos.x, pos.y);\n        window-&gt;draw(tool); // drawing the sprite\n</code></pre>\n"}, {"tags": ["c++", "eclipse-cdt", "linker-errors"], "comments": [{"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1518628250, "post_id": 48792670, "comment_id": 84587598, "body": "What do you intend <code>static</code> and <code>inline</code> to achieve here?"}, {"owner": {"reputation": 51, "user_id": 9281475, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5bf23fc45ab465f738ab471cded44069?s=128&d=identicon&r=PG", "display_name": "user184868", "link": "https://stackoverflow.com/users/9281475/user184868"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1518628324, "post_id": 48792670, "comment_id": 84587644, "body": "obvious, static because it is outside of a class and inline cause i want compiler to inline it"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 1, "creation_date": 1518628531, "post_id": 48792670, "comment_id": 84587745, "body": "Not obvious, that&#39;s not what <code>static</code> means (see <a href=\"https://stackoverflow.com/q/31305717/212858\">this question</a>), and that&#39;s also not really what <code>inline</code> does (see <a href=\"https://stackoverflow.com/q/1759300/212858\">this question</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9281475, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5bf23fc45ab465f738ab471cded44069?s=128&d=identicon&r=PG", "display_name": "user184868", "link": "https://stackoverflow.com/users/9281475/user184868"}, "edited": false, "score": 0, "creation_date": 1518630482, "post_id": 48793055, "comment_id": 84588708, "body": "ok i removed both modifiers now it works. If you know good the stuff, probably you can tell how to fix CDT false error reports?"}], "tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 0, "last_activity_date": 1518629479, "creation_date": 1518629479, "answer_id": 48793055, "question_id": 48792670, "link": "https://stackoverflow.com/questions/48792670/eclipse-cdt-does-not-understands-of-method-definitions-what-are-tthere/48793055#48793055", "title": "Eclipse CDT does not understands of method definitions what are tthere", "body": "<blockquote>\n  <p>Eclipse CDT somehow does not understand the definition of methods</p>\n</blockquote>\n\n<p>Eclipse is an IDE, which is to say, a text editor with delusions of grandeur. The error you're getting is from the compiler the CDT plugin is running for you. I only mention this to explain why the <code>eclipse-cdt</code> tag isn't relevant and because I'm a terrible pedant.</p>\n\n<pre><code>extern \"C\" {\n#include &lt;stdint.h&gt;\n}\n</code></pre>\n\n<p>last bit of pedantry, I promise: you should just use</p>\n\n<pre><code>#include &lt;cstdint&gt;\n</code></pre>\n\n<p>if you have a vaguely recent conforming compiler.</p>\n\n<hr>\n\n<p>Now, consider these two very similar looking declarations where <code>static</code> means two <em>completely</em> different things:</p>\n\n<pre><code>struct S {\n  static void func();\n};\nnamespace N {\n  static void func();\n};\n</code></pre>\n\n<p>The first declares a type <code>S</code>, and a <em>static method</em> <code>S::func</code> which does not operate on a specific instance of <code>S</code>. It doesn't say anything about the linkage of the symbol <code>S::func</code>.</p>\n\n<p>In the second, there is no class for <code>N::func</code> to be a static member of (namespaces are not like classes in this respect because you can't have an <em>instance</em> of a namespace). Here, <code>static</code> describes the linkage of <code>N::func</code>, and means \"not exported to other translation units\".</p>\n\n<p>Now consider your cpp file: you define your two functions with static linkage. That means the symbols aren't exported to other translation units, like your test program, which means your test program doesn't have access to <em>any</em> definition for those functions.</p>\n\n<p>tl;dr - just remove the <code>static</code> keyword, it doesn't mean what you think it does (at file/namespace scope, anyway).</p>\n"}], "owner": {"reputation": 51, "user_id": 9281475, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/5bf23fc45ab465f738ab471cded44069?s=128&d=identicon&r=PG", "display_name": "user184868", "link": "https://stackoverflow.com/users/9281475/user184868"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518629479, "creation_date": 1518628098, "question_id": 48792670, "link": "https://stackoverflow.com/questions/48792670/eclipse-cdt-does-not-understands-of-method-definitions-what-are-tthere", "title": "Eclipse CDT does not understands of method definitions what are tthere", "body": "<p>I have the problem that Eclipse CDT somehow does not understand the definition of methods, declared in header file, like:\nexample of header y_sort_network.hpp:</p>\n\n<pre><code>    #pragma once\nextern \"C\" {\n#include &lt;stdint.h&gt;\n}\n\nnamespace y_my{\nstatic inline void ySortSingleUpto16(uint32_t * arr, uint32_t * to);\nstatic inline void yMergex16(uint32_t * arr, uint32_t *to);\n\n}\n</code></pre>\n\n<p>example of source y_sort_network.cpp:</p>\n\n<pre><code>#include \"y_sort_network.hpp\"\nnamespace y_my{\n\nstatic inline void yMergex16(uint32_t * arr, uint32_t *to) {\n// body ...\n}\nstatic inline void ySortSingleUpto16(uint32_t * arr, uint32_t * to) {\n// body ...\n}\n\n}\n</code></pre>\n\n<p>then , this mwthod will not be found im main method, means they are declared but not linked :</p>\n\n<pre><code> `sort_network_test.cpp:19:` undefined reference to `y_my::yMergex16(unsigned int*, unsigned int*)'\n</code></pre>\n\n<p>all files lies in the same folder, what is a source folder in properties</p>\n"}, {"tags": ["c++", "inheritance", "heap", "smart-pointers"], "comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 3, "creation_date": 1518627165, "post_id": 48792331, "comment_id": 84586929, "body": "You should probably have a virtual destructor in the parent classes"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1518627166, "post_id": 48792331, "comment_id": 84586930, "body": "You forgot to add a virtual destructor to <code>Animal</code> and <code>Stupid</code>."}, {"owner": {"reputation": 43, "user_id": 9361089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70351cc217e0eb0160150b5a29a1ac99?s=128&d=identicon&r=PG&f=1", "display_name": "someone", "link": "https://stackoverflow.com/users/9361089/someone"}, "edited": false, "score": 0, "creation_date": 1518627337, "post_id": 48792331, "comment_id": 84587046, "body": "Thanks it works now. It&#39;s weird that with stack values I did not have heap corruption but pointer does."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1518627843, "post_id": 48792331, "comment_id": 84587353, "body": "That&#39;s kind of funny to expect heap corruption from stack variables :)"}, {"owner": {"reputation": 43, "user_id": 9361089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70351cc217e0eb0160150b5a29a1ac99?s=128&d=identicon&r=PG&f=1", "display_name": "someone", "link": "https://stackoverflow.com/users/9361089/someone"}, "edited": false, "score": 0, "creation_date": 1518627919, "post_id": 48792331, "comment_id": 84587397, "body": "Yeah I should have said stack corruption in that case ^^"}], "answers": [{"comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1518628288, "post_id": 48792493, "comment_id": 84587623, "body": "The virtual destructor works because it jumps into the most-derived class destructor, which knows how to re-adjust the <code>this</code> pointer as necessary for the different base classes."}], "tags": [], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": true, "score": 7, "last_activity_date": 1518628198, "last_edit_date": 1518628198, "creation_date": 1518627565, "answer_id": 48792493, "question_id": 48792331, "link": "https://stackoverflow.com/questions/48792331/c-multiple-inheritance-and-upcasted-smart-pointer-destruction-causes-heap-corr/48792493#48792493", "title": "C++ multiple inheritance and upcasted smart pointer destruction causes heap corruption in VS 2017", "body": "<p>This breaks because the pointer you pass to <code>delete</code> is not the same that you got back from <code>new</code>.</p>\n\n<p>Up-casting basically means you take a pointer-to-derived and pretend it is a pointer-to-base. For single inheritance, this just works, as the base-part is always the first thing that is stored in a derived object.\nBut with multiple inheritance, you have two bases!</p>\n\n<p>Hence, when you up-cast to the second base, you actuall need to <em>change</em> the value of your pointer to make sure that what it's pointing to will actually be the respective base part of your object. You can verify that by examining the values of the pointers in the debugger:</p>\n\n<pre><code>Dog* d = new Dog;\nAnimal* a = d;\n</code></pre>\n\n<p>The <code>a</code> pointer will point one byte behind the <code>d</code> pointer.</p>\n\n<p>As was already mentioned, this can be fixed by adding a virtual destructor to the base class type that you are using in the delete call (<code>Animal</code> in your example). This will cause the compiler to generate additional code to re-adjust the pointer correctly before passing it to <code>delete</code>.</p>\n\n<p>Note that gcc actually implements the empty-base class optimization here, so this example will work there. Both bases will live at the same offset. It will start breaking there as well as soon as you start adding non-static data members to the base classes.</p>\n"}], "owner": {"reputation": 43, "user_id": 9361089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70351cc217e0eb0160150b5a29a1ac99?s=128&d=identicon&r=PG&f=1", "display_name": "someone", "link": "https://stackoverflow.com/users/9361089/someone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 48792493, "answer_count": 1, "score": 4, "last_activity_date": 1518628198, "creation_date": 1518627053, "question_id": 48792331, "link": "https://stackoverflow.com/questions/48792331/c-multiple-inheritance-and-upcasted-smart-pointer-destruction-causes-heap-corr", "title": "C++ multiple inheritance and upcasted smart pointer destruction causes heap corruption in VS 2017", "body": "<p>I have encountered an issue with VS debugger with the code above:</p>\n\n<pre><code>class Animal {\npublic:\n\n\n};\n\n\nclass Stupid {\npublic:\n\n};\n\n\nclass Dog : public Stupid, public Animal {\npublic:\n\n\n};\n\nint main() {\n    std::unique_ptr&lt;Animal&gt; animal = std::unique_ptr&lt;Dog&gt;(new Dog());\n    animal.reset();\n    return 0;\n}\n</code></pre>\n\n<p>This code throws an error after executing \"animal.reset()\" involving \"ntdl.dll\" and \"wntdll.pdb\".</p>\n\n<p>Here are the expressions that generated assertion failures by MSVC Runtime library if I hit on \"ignore\" multiple(3) times:</p>\n\n<pre><code>1- _CrtIsValidHeapPointer(block)\n2- is_block_type_valid(header-&gt;_block_use)\n3- HEAP CORRUPTION DETECTED: before Free block (#-50331640) at 0x03737E21. CRT detected that the application wrote to memory before start of heap buffer.\n</code></pre>\n\n<p>But if I change the inheritance order of Dog, like this:</p>\n\n<pre><code>class Dog : public Animal, public Stupid {\npublic:\n\n\n};\n</code></pre>\n\n<p>The code runs fine.</p>\n\n<p>I have this error only in visual studio 2017, I have tried with <a href=\"https://ideone.com/56TmW6\" rel=\"nofollow noreferrer\">Ideone</a>, Android Studio and it runs fine no matter the inheritance order.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1518626948, "post_id": 48792252, "comment_id": 84586770, "body": "I think there has been some <i>interpreter</i> of some <i>subset</i> of C++. Look into <a href=\"http://www.softintegration.com/\" rel=\"nofollow noreferrer\">Ch</a> and <a href=\"https://root.cern.ch/cling\" rel=\"nofollow noreferrer\">Cling</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1518626978, "post_id": 48792252, "comment_id": 84586789, "body": "eg the ROOT framework has a <a href=\"https://root.cern.ch/cint\" rel=\"nofollow noreferrer\">c++ interpreter</a>"}, {"owner": {"reputation": 6469, "user_id": 45581, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/eb238726ab7c37281deb582f24afe3d5?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/45581/alex"}, "edited": false, "score": 1, "creation_date": 1518627013, "post_id": 48792252, "comment_id": 84586816, "body": "I&#39;m guessing the prevalence of LLVM and clang.  Though that&#39;s a compiler too."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 1, "creation_date": 1518627029, "post_id": 48792252, "comment_id": 84586824, "body": "Read: <a href=\"https://stackoverflow.com/q/69539/6525260\">stackoverflow.com/q/69539/6525260</a>. Here is <a href=\"https://github.com/vgvassilev/cling\" rel=\"nofollow noreferrer\">one interpreter called Cling</a>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 4, "creation_date": 1518627331, "post_id": 48792252, "comment_id": 84587042, "body": "Note: cplusplus.com is generally a poor reference site full of errors. Prefer cppreference.com"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 2, "creation_date": 1518627441, "post_id": 48792252, "comment_id": 84587117, "body": "At last,<b>the difference between a compiler and an interpreter is very blurry.</b> <a href=\"http://sbcl.org/\" rel=\"nofollow noreferrer\">SBCL</a> looks and smells like an interpreter, but it actually compiles to machine code <i>every</i> <a href=\"https://en.wikipedia.org/wiki/REPL\" rel=\"nofollow noreferrer\">REPL</a> interaction."}], "answers": [{"tags": [], "owner": {"reputation": 943, "user_id": 433534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5dabfa8e61ed66c86cd30de3e3727e8?s=128&d=identicon&r=PG", "display_name": "user433534", "link": "https://stackoverflow.com/users/433534/user433534"}, "is_accepted": false, "score": 2, "last_activity_date": 1518627554, "last_edit_date": 1518627554, "creation_date": 1518627011, "answer_id": 48792316, "question_id": 48792252, "link": "https://stackoverflow.com/questions/48792252/why-was-c-mentioned-as-a-usually-compiled-language/48792316#48792316", "title": "Why was C++ mentioned as a &#39;usually&#39; compiled language?", "body": "<p>There are some interpreters for subsets of C++ (<a href=\"https://stackoverflow.com/questions/69539/have-you-used-any-of-the-c-interpreters-not-compilers\">related question</a>), but the overwhelming majority of C++ work is done using compilers.  Using interpreters is so rare that no C++ literature or sizeable C++ library or program not explicitly about/for those interpreters will restrict itself to the subset of C++ that can be used on an interpreter.</p>\n\n<p>With C++, it's actually more common to compile further C++ on the fly than interpret any.</p>\n\n<p>For whatever it's worth, the most recent related news I've read (on <a href=\"https://news.ycombinator.com/\" rel=\"nofollow noreferrer\">Hacker News</a>) was about a <a href=\"https://github.com/inspector-repl/inspector\" rel=\"nofollow noreferrer\">C++17 REPL</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 1, "creation_date": 1518632614, "post_id": 48792356, "comment_id": 84589811, "body": "Indeed, there was even a commercial product beginning of the ninetees, called Rational Instant C."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 7, "last_activity_date": 1518627129, "creation_date": 1518627129, "answer_id": 48792356, "question_id": 48792252, "link": "https://stackoverflow.com/questions/48792252/why-was-c-mentioned-as-a-usually-compiled-language/48792356#48792356", "title": "Why was C++ mentioned as a &#39;usually&#39; compiled language?", "body": "<p>There is no technical reason why you can't write a <em>C++ interpreter</em> rather than a compiler and I believe some have been written in the past.</p>\n\n<p>C is also a (usually) compiled language, but I myself wrote a (slow, recursive decent) C89 interpreter some 20 years ago. C++ is just a (<em>much</em>) harder version of the same problem.</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 10, "last_activity_date": 1518627367, "creation_date": 1518627367, "answer_id": 48792449, "question_id": 48792252, "link": "https://stackoverflow.com/questions/48792252/why-was-c-mentioned-as-a-usually-compiled-language/48792449#48792449", "title": "Why was C++ mentioned as a &#39;usually&#39; compiled language?", "body": "<p>Because \"C++\" as defined by the C++ Standard is only a programming language, operating in an abstract machine. Implementations are free to do whatever they want to emulate the behaviour of that abstract machine.</p>\n\n<p>Therefore, regardless of whether someone actually makes a C++ interpreter, saying that C++ is always compiled would be an unfounded assumption.</p>\n"}, {"tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": false, "score": 1, "last_activity_date": 1518627379, "creation_date": 1518627379, "answer_id": 48792450, "question_id": 48792252, "link": "https://stackoverflow.com/questions/48792252/why-was-c-mentioned-as-a-usually-compiled-language/48792450#48792450", "title": "Why was C++ mentioned as a &#39;usually&#39; compiled language?", "body": "<p>In most cases C++ is compiled but, e.g., <a href=\"https://github.com/root-project/cling\" rel=\"nofollow noreferrer\">cling</a> is a C++ interpreter. I haven't tried it much but it seems to be a fairly complete C++ implementation.</p>\n"}], "owner": {"reputation": 1606, "user_id": 3393574, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3aa5a506f0d7b13973169e8c5c722b54?s=128&d=identicon&r=PG", "display_name": "Herpes Free Engineer", "link": "https://stackoverflow.com/users/3393574/herpes-free-engineer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 1, "accepted_answer_id": 48792449, "answer_count": 4, "score": 7, "last_activity_date": 1523544978, "creation_date": 1518626860, "last_edit_date": 1523544978, "question_id": 48792252, "link": "https://stackoverflow.com/questions/48792252/why-was-c-mentioned-as-a-usually-compiled-language", "title": "Why was C++ mentioned as a &#39;usually&#39; compiled language?", "body": "<p>In the <a href=\"https://stackoverflow.com/tags/c%2B%2B/info\">C++ tag wiki</a>, it is stated that</p>\n\n<blockquote>\n  <p>C++ is a ... (usually) compiled ... programming language ...</p>\n</blockquote>\n\n<p>Yet <a href=\"https://en.wikipedia.org/wiki/C%2B%2B\" rel=\"nofollow noreferrer\">Wikipedia</a> and <a href=\"http://www.cplusplus.com/info/description/\" rel=\"nofollow noreferrer\">cplusplus.com</a> assert that C++ is a compiled language without mentioning any exceptions.</p>\n\n<p>Could you please tell us the reason why C++ is <strong>usually</strong>, yet not <strong>always</strong>, a compiled language? When can C++ be deemed a non-compiled language?</p>\n\n<hr>\n\n<p>Wikipedia:</p>\n\n<blockquote>\n  <p>C++ is a compiled language, with implementations of it available on many platforms.</p>\n</blockquote>\n\n<p>cplusplus.com:</p>\n\n<blockquote>\n  <p>... is a compiled language. \n  C++ compiles directly to a machine's native code, allowing</p>\n</blockquote>\n\n<p>This may suggest that there are non-compiled forms of C++. What makes the wiki to state 'usually'?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "edited": false, "score": 1, "creation_date": 1518625346, "post_id": 48791653, "comment_id": 84585618, "body": "Are you using C or C++? <code>using namespace std;</code> is an invalid statement in C, and the <code>iostream</code> header is not usable in C."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1518626597, "post_id": 48791653, "comment_id": 84586478, "body": "I have a small side bet here that the posted error &quot;Cannot convert parameter 1 from double to float&quot; is really &quot;Cannot convert parameter 1 from double to float *&quot;  (note added <code>*</code>)"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518630971, "post_id": 48791653, "comment_id": 84588956, "body": "I&#39;m pretty sure the <code>stdafx.h</code> header isn&#39;t in either C or C++..."}, {"owner": {"reputation": 1101, "user_id": 7021836, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/299fc62810116e741333419b8e6cfd24?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Quilliam", "link": "https://stackoverflow.com/users/7021836/alex-quilliam"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518648485, "post_id": 48791653, "comment_id": 84597559, "body": "@TobySpeight It is a header commonly used in VC++. It&#39;s not part of any standard library."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518626749, "post_id": 48791705, "comment_id": 84586598, "body": "Hmmm, with this idea I get &quot;error: incompatible type for argument 1 of &#39;sinhyp&#39;&quot;. Neither <code>15.0</code> not <code>15.0f</code> are valid <code>float *</code>."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1518629231, "post_id": 48791705, "comment_id": 84588100, "body": "yep. float * is something different.  Break open a book, and study pointers in c."}], "tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": false, "score": 1, "last_activity_date": 1518625080, "creation_date": 1518625080, "answer_id": 48791705, "question_id": 48791653, "link": "https://stackoverflow.com/questions/48791653/cannot-convert-parameter-1-from-double-to-float-although-didnt-change-paramet/48791705#48791705", "title": "&quot;Cannot convert parameter 1 from double to float&quot; although didn&#39;t change parameters", "body": "<p>15.0 is a double constant.</p>\n\n<p>Try making it a float constant instead</p>\n\n<p><strong>15.0f</strong></p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9360949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac07a59d52e0b0841f59500ea63bf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sansa Stark", "link": "https://stackoverflow.com/users/9360949/sansa-stark"}, "edited": false, "score": 0, "creation_date": 1518635668, "post_id": 48791825, "comment_id": 84591409, "body": "Thanks for the idea, still the code wasn&#39;t accepted"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2404501"}, "is_accepted": false, "score": 6, "last_activity_date": 1518625470, "creation_date": 1518625470, "answer_id": 48791825, "question_id": 48791653, "link": "https://stackoverflow.com/questions/48791653/cannot-convert-parameter-1-from-double-to-float-although-didnt-change-paramet/48791825#48791825", "title": "&quot;Cannot convert parameter 1 from double to float&quot; although didn&#39;t change parameters", "body": "<p>C doesn't have call by reference. When you change a function parameter's type from <code>float</code> to <code>float *</code>, you must change the caller to match. Your function now requires a pointer, so you must provide a pointer. For example, this call would work:</p>\n\n<pre><code>float fifteen = 15.0;\nfloat erg=sinhyp(&amp;fifteen);\n</code></pre>\n\n<p>The <code>&amp;</code> operator is the key. It produces a pointer value, pointing to the variable that contains the value <code>15.0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9360949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac07a59d52e0b0841f59500ea63bf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sansa Stark", "link": "https://stackoverflow.com/users/9360949/sansa-stark"}, "edited": false, "score": 0, "creation_date": 1518635262, "post_id": 48791909, "comment_id": 84591184, "body": "Okay :) Thank you very much .... It was strange cause one of the excercises expected me to change it so I wasn&#39;t sure :) Will try it out now :)"}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1518625723, "creation_date": 1518625723, "answer_id": 48791909, "question_id": 48791653, "link": "https://stackoverflow.com/questions/48791653/cannot-convert-parameter-1-from-double-to-float-although-didnt-change-paramet/48791909#48791909", "title": "&quot;Cannot convert parameter 1 from double to float&quot; although didn&#39;t change parameters", "body": "<p>Your function is expecting a <code>float *</code>, but you're passing it a <code>double</code>.  You can't convert between pointers and values that way.</p>\n\n<p>Since your function doesn't actually change the value that's passed in, you don't need a pointer.  Then the value <code>15.0</code>, which is a <code>double</code>, can be safely converted to a <code>float</code>:</p>\n\n<pre><code>float sinhyp (float x)\n{\n    return (0.5*(pow(e,x)-pow(e,(-1)*(x))));\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 9360949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac07a59d52e0b0841f59500ea63bf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sansa Stark", "link": "https://stackoverflow.com/users/9360949/sansa-stark"}, "edited": false, "score": 0, "creation_date": 1518635501, "post_id": 48792373, "comment_id": 84591324, "body": "When I changed it that way got the error: cannot convert parameter 1 from &#39;double&#39; to &#39;float &amp;&#39;"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 21, "user_id": 9360949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac07a59d52e0b0841f59500ea63bf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sansa Stark", "link": "https://stackoverflow.com/users/9360949/sansa-stark"}, "edited": false, "score": 1, "creation_date": 1518636305, "post_id": 48792373, "comment_id": 84591732, "body": "@SansaStark Did you code <code>sinhyp(15.0);</code> or <code>sinhyp(15.0f);</code> as per this answer?  (Notice the <code>f</code>)"}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1518627183, "creation_date": 1518627183, "answer_id": 48792373, "question_id": 48791653, "link": "https://stackoverflow.com/questions/48791653/cannot-convert-parameter-1-from-double-to-float-although-didnt-change-paramet/48792373#48792373", "title": "&quot;Cannot convert parameter 1 from double to float&quot; although didn&#39;t change parameters", "body": "<p><code>float sinhyp (float *x)</code> is not a pass by <em>reference</em>.  It is passing by <em>value</em> a <code>float *</code> or <a href=\"https://cdecl.org/?q=float+*x\" rel=\"nofollow noreferrer\">pointer to float</a>.</p>\n\n<p>To pass by <em>reference</em> use <code>&amp;</code>.</p>\n\n<pre><code>// float sinhyp (float *x) {\nfloat sinhyp (float &amp;x) {\n    // return (0.5*(pow(e,*x)-pow(e,(-1)*(*x))));\n    return (0.5*(pow(e,x)-pow(e,(-1)*(x))));\n}\n</code></pre>\n\n<p>Call with the matching type</p>\n\n<pre><code>    // float erg=sinhyp(15.0);\n    float erg=sinhyp(15.0f);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9360949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac07a59d52e0b0841f59500ea63bf70?s=128&d=identicon&r=PG&f=1", "display_name": "Sansa Stark", "link": "https://stackoverflow.com/users/9360949/sansa-stark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1518644267, "creation_date": 1518624896, "last_edit_date": 1518644267, "question_id": 48791653, "link": "https://stackoverflow.com/questions/48791653/cannot-convert-parameter-1-from-double-to-float-although-didnt-change-paramet", "title": "&quot;Cannot convert parameter 1 from double to float&quot; although didn&#39;t change parameters", "body": "<p>As a beginner in coding I am preparating for my C exam and was doing one excercise where I had to write a programm which should calculate sinh x... When I wrote in a normal way it worked properly and calculated the right answers, but when I changed my function from Call by value to Call by reference, I got a mistake \"Cannot convert parameter 1 from double to float\"... Why did I got it and what shall I consider when I use that value? \nHere you can see my code :)</p>\n\n<pre><code>    #include \"stdafx.h\"\n#include \"math.h\"\n#include \"iostream\"\nfloat e=2.71828;\nusing namespace std;\n\n\nfloat sinhyp (float *x)\n{\n\n    return (0.5*(pow(e,*x)-pow(e,(-1)*(*x))));\n\n\n}\n\n\n\nint _tmain(void)\n{\n\n        float erg=sinhyp(15.0);\n        printf(\"%f \\n\", erg);\n\n\n    system (\"Pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for the advices / help ;)</p>\n"}, {"tags": ["c++", "c++03", "boost-preprocessor"], "answers": [{"comments": [{"owner": {"reputation": 794, "user_id": 7454863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84ccc3a8ed6869eb2970a258a5427f54?s=128&d=identicon&r=PG&f=1", "display_name": "Khurshid Normuradov", "link": "https://stackoverflow.com/users/7454863/khurshid-normuradov"}, "edited": false, "score": 0, "creation_date": 1518624988, "post_id": 48791624, "comment_id": 84585364, "body": "Thanks, but I use c++03 only. [c++03] added."}, {"owner": {"reputation": 794, "user_id": 7454863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84ccc3a8ed6869eb2970a258a5427f54?s=128&d=identicon&r=PG&f=1", "display_name": "Khurshid Normuradov", "link": "https://stackoverflow.com/users/7454863/khurshid-normuradov"}, "edited": false, "score": 0, "creation_date": 1518625493, "post_id": 48791624, "comment_id": 84585716, "body": "I thought that c++ tag means old c++03 )), sorry."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "reply_to_user": {"reputation": 794, "user_id": 7454863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84ccc3a8ed6869eb2970a258a5427f54?s=128&d=identicon&r=PG&f=1", "display_name": "Khurshid Normuradov", "link": "https://stackoverflow.com/users/7454863/khurshid-normuradov"}, "edited": false, "score": 1, "creation_date": 1518625549, "post_id": 48791624, "comment_id": 84585764, "body": "It&#39;s 2018 @KhurshidNormuradov, you shouldn&#39;t even be using C++03. At the minimum you should be using C++11."}, {"owner": {"reputation": 794, "user_id": 7454863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84ccc3a8ed6869eb2970a258a5427f54?s=128&d=identicon&r=PG&f=1", "display_name": "Khurshid Normuradov", "link": "https://stackoverflow.com/users/7454863/khurshid-normuradov"}, "edited": false, "score": 0, "creation_date": 1518625694, "post_id": 48791624, "comment_id": 84585877, "body": "I write code for old server. I   like c++11, c++14, sure."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 0, "last_activity_date": 1518624804, "creation_date": 1518624804, "answer_id": 48791624, "question_id": 48791590, "link": "https://stackoverflow.com/questions/48791590/macro-parameter-pack-with-boost-preprocessor/48791624#48791624", "title": "macro parameter pack with boost preprocessor", "body": "<p>There's no need to use the preprocessor here. A <em>variadic template</em> will do just fine. Here's an example using a C++17 <em>fold expression</em>:</p>\n\n<pre><code>template &lt;typename Needle, typename... Haystack&gt;\nbool my_check(const Needle&amp; needle, const Haystack&amp;... haystack)\n{\n    return ((needle == haystack) || ...);\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/ZdBHI6XDKsEBoQ2l\" rel=\"nofollow noreferrer\"><strong>live example on wandbox</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 0, "last_activity_date": 1518626270, "creation_date": 1518626270, "answer_id": 48792068, "question_id": 48791590, "link": "https://stackoverflow.com/questions/48791590/macro-parameter-pack-with-boost-preprocessor/48792068#48792068", "title": "macro parameter pack with boost preprocessor", "body": "<p>I couldn't find better than a transform followed by a fold, since <code>BOOST_PP_SEQ_FOLD_LEFT</code> does not carry a <code>data</code> parameter around. Still:</p>\n\n<pre><code>#define MY_CHECK_FOLD_OR(s, a, b) a || b\n#define MY_CHECK_FOLD_EQ(s, var, elem) (var) == (elem)\n\n#define MY_CHECK(var, values)             \\\n    (BOOST_PP_SEQ_FOLD_LEFT(              \\\n        MY_CHECK_FOLD_OR, false,          \\\n        BOOST_PP_SEQ_TRANSFORM(           \\\n            MY_CHECK_FOLD_EQ, var,        \\\n            BOOST_PP_TUPLE_TO_SEQ(values) \\\n        )                                 \\\n    ))\n</code></pre>\n\n<p>... which expands:</p>\n\n<pre><code>if (MY_CHECK(a, (1, 2, 3)))\n</code></pre>\n\n<p>... into:</p>\n\n<pre><code>if ((false || (a) == (1) || (a) == (2) || (a) == (3)))\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/77018f7cda6d4f55\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n"}], "owner": {"reputation": 794, "user_id": 7454863, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/84ccc3a8ed6869eb2970a258a5427f54?s=128&d=identicon&r=PG&f=1", "display_name": "Khurshid Normuradov", "link": "https://stackoverflow.com/users/7454863/khurshid-normuradov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 48792068, "answer_count": 2, "score": -1, "last_activity_date": 1518626270, "creation_date": 1518624720, "last_edit_date": 1518624877, "question_id": 48791590, "link": "https://stackoverflow.com/questions/48791590/macro-parameter-pack-with-boost-preprocessor", "title": "macro parameter pack with boost preprocessor", "body": "<p>I don't know there similar question, or not.</p>\n\n<p>How to simplify</p>\n\n<pre><code>(a == 78 || a == 98 || a == 73 || a == 11 || a == 90 || a==103 || a==45 )\n</code></pre>\n\n<p>expression to</p>\n\n<pre><code>MY_CHECK(a, (78, 98, 73, 11, 90, 103, 45) )\n</code></pre>\n\n<p>With boost preprocessor ??<br>\nIs there any ready solution in boost preprocessor.</p>\n"}, {"tags": ["c++", "winapi", "functional-programming"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1518624822, "post_id": 48791454, "comment_id": 84585230, "body": "Member functions require a object to call them on.  You either need to make the static to get around this or use a lambda or <code>std::bind</code> to bind a object to the function."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518624855, "post_id": 48791454, "comment_id": 84585258, "body": "@NathanOliver: answer section..."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518624923, "post_id": 48791454, "comment_id": 84585324, "body": "@LightnessRacesinOrbit Yeah, I figured there was a dupe so I commented and then went dupe hunting"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518624945, "post_id": 48791454, "comment_id": 84585336, "body": "Standard response about not providing an answer at all if you think there&#39;s a dupe, let alone doing so in the wrong place"}], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625032, "post_id": 48791618, "comment_id": 84585397, "body": "Thank you very much for depth explaination. The methods fun_64 and fun_32 are required to be member functions, so I guess I&#39;ll stick with the lambdas."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625157, "post_id": 48791618, "comment_id": 84585481, "body": "@glf4k: Have you considered just calling the functions directly? I don&#39;t really understand why you need the roundtrip through <code>std::function</code>, but I guess we can&#39;t see all of your code."}, {"owner": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625323, "post_id": 48791618, "comment_id": 84585596, "body": "Yes I have considered, making if statements for each case (32 or 64) makes the code more unreadable. There is pretty long code going directly after the myReference declaration :}"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625427, "post_id": 48791618, "comment_id": 84585673, "body": "@glf4k There&#39;s only one point of branching, though? <code>if (use64) return fun_64(a); else return fun_32(a);</code> or, if you need the value later, <code>const DWORD64 val = (use64 ? fun_64(a) : fun_32(a));</code>. Struggling to see how much more complex it can be unless even the <code>std::function</code> solution is not quite as shown here"}, {"owner": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625633, "post_id": 48791618, "comment_id": 84585833, "body": "I&#39;ve invoking the myReference function for different &#39;a&#39; parameters (DWORD64) in the function. the first one (which comes from fun method argument is just an first step. I&#39;ll think about it now when its more clear to me. Please, dont waste your time and consider my question as very well answered :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 0, "creation_date": 1518625920, "post_id": 48791618, "comment_id": 84586057, "body": "@glf4k: Okay, then that makes sense. Good luck!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "edited": false, "score": 1, "creation_date": 1518625984, "post_id": 48791618, "comment_id": 84586100, "body": "@glf4k: Actually one final note, if the function is staying local, then write <code>auto myReference = [=](...) { ... };&#39;</code> instead of storing it in a <code>std::function&lt;&gt;</code> \u2014 it&#39;ll be as performant as if the code were inline."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518628267, "post_id": 48791618, "comment_id": 84587611, "body": "&quot;<i>you are trying to take the address of a member function, then shove it in a type that doesn&#39;t expect a pointer-to-member-function</i>&quot; - <code>std::function</code> does support pointer-to-member-functions in general, eg: <code>std::function&lt;DWORD64(const MyClass&amp;,DWORD64)&gt; myReference; myReference = &amp;MyClass::fun_64; myReference(SomeMyClassObj, 12345);</code> Or: <code>std::function&lt;DWORD64(DWORD64)&gt; myReference; myReference = std::bind(&amp;MyClass::fun_64, SomeMyClassObj, std::placeholders::_1); myReference(12345);</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1518632430, "post_id": 48791618, "comment_id": 84589703, "body": "@RemyLebeau: Right, so now you&#39;re using a type that <i>does</i> expect a pointer-to-member-function (or, okay, more strictly is compatible with one). Interesting approach, though. The solution with <code>bind</code> I already mentioned."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 6, "last_activity_date": 1518624790, "creation_date": 1518624790, "answer_id": 48791618, "question_id": 48791454, "link": "https://stackoverflow.com/questions/48791454/stdfunction-method-reference-unable-to-cast-dword-to-dword64/48791618#48791618", "title": "std::function method reference unable to cast DWORD to DWORD64?", "body": "<blockquote>\n  <p>The example won't compile as 'operand types are incompatible'. Somehow the program is not able to cast DWORD to an DWORD64.</p>\n</blockquote>\n\n<p>No, that is not what is going on.</p>\n\n<p>The problem is that you are trying to take the address of a member function, then shove it in a type that doesn't expect a pointer-to-member-function.</p>\n\n<p>Pointers-to-member-functions are strange beasts, due to the need to bind a <code>this</code> pointer when you invoke them. In your attempt, invoking <code>myReference()</code> (if it were possible) would not make any sense. Which <code>MyClass</code> object would it be invoked on?</p>\n\n<p>You'd be better off using a lambda (as you already showed), or <code>std::bind</code> if you must.</p>\n\n<p>Alternatively, consider whether those functions actually require object state; if not, they could be <code>static</code> (and then they are basically the same as non-member functions, for our purposes here).</p>\n"}], "owner": {"reputation": 409, "user_id": 6362185, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e19667df7e602b19e4facaac2bacbb60?s=128&d=identicon&r=PG&f=1", "display_name": "glf4k", "link": "https://stackoverflow.com/users/6362185/glf4k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 48791618, "answer_count": 1, "score": 0, "last_activity_date": 1518624790, "creation_date": 1518624330, "question_id": 48791454, "link": "https://stackoverflow.com/questions/48791454/stdfunction-method-reference-unable-to-cast-dword-to-dword64", "title": "std::function method reference unable to cast DWORD to DWORD64?", "body": "<p>I am having trouble referencing a member function of my <code>MyClass</code> class. Please, consider this abstraction as my problem.</p>\n\n<pre><code>class MyClass {\n   public:\n\n   DWORD fun_32(_In_ DWORD64 a64bitparam); //wants DWORD64 returns DWORD\n   DWORD64 fun_64(_In_ DWORD64 a64bitparam); //wants DWORD64 returns DWORD64\n\n   DWORD64 fun(_In_ DWORD64 a64bitparam);\n\n   private:\n   BOOLEAN use64;\n};\n</code></pre>\n\n<p>An <code>fun(DWORD64)</code> implementation:</p>\n\n<pre><code>DWORD64 MyClass::fun(DWORD64 a64bitparam) {\n\n   std::function&lt;DWORD64(DWORD64)&gt; myReference;\n   myReference = this-&gt;use64 ? &amp;MyClass::fun_64 : &amp;MyClass::fun_32;\n\n}\n</code></pre>\n\n<p>The example won't compile as 'operand types are incompatible'. Somehow the program is not able to cast <code>DWORD</code> to an <code>DWORD64</code>.</p>\n\n<p>However, this one does, but looks ugly. (IMO)</p>\n\n<pre><code>std::function&lt;DWORD64(DWORD64)&gt; myReference;\nmyReference = [this](DWORD64 a) -&gt; DWORD64 { return use64 ? fun_64(a) : fun_32(a);};\n</code></pre>\n\n<p>Could someone briefly explain me what I am doing wrong with the method reference?</p>\n"}, {"tags": ["c++", "c++11", "eigen"], "comments": [{"owner": {"reputation": 3506, "user_id": 1826217, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/95c20e60f3864d66fe469e98389f3a68?s=128&d=identicon&r=PG", "display_name": "const_ref", "link": "https://stackoverflow.com/users/1826217/const-ref"}, "edited": false, "score": 0, "creation_date": 1518624372, "post_id": 48791395, "comment_id": 84584895, "body": "what is the return type of .sum()?"}, {"owner": {"reputation": 137, "user_id": 5716568, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92b97d2c28d34af6c23021a4db52f9af?s=128&d=identicon&r=PG&f=1", "display_name": "Junior hpc", "link": "https://stackoverflow.com/users/5716568/junior-hpc"}, "reply_to_user": {"reputation": 3506, "user_id": 1826217, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/95c20e60f3864d66fe469e98389f3a68?s=128&d=identicon&r=PG", "display_name": "const_ref", "link": "https://stackoverflow.com/users/1826217/const-ref"}, "edited": false, "score": 0, "creation_date": 1518624660, "post_id": 48791395, "comment_id": 84585114, "body": "I cannot figure it out from the documentation <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#addd7080d5c202795820e361768d0140c\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/&hellip;</a> but if I print for example <code>sum_a</code>, I can see its value on the Terminal (e.g: -0.0268941)"}, {"owner": {"reputation": 3506, "user_id": 1826217, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/95c20e60f3864d66fe469e98389f3a68?s=128&d=identicon&r=PG", "display_name": "const_ref", "link": "https://stackoverflow.com/users/1826217/const-ref"}, "edited": false, "score": 0, "creation_date": 1518624840, "post_id": 48791395, "comment_id": 84585246, "body": "Looks like you want to use the isApprox() function. <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#ae8443357b808cd393be1b51974213f9c\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/&hellip;</a>"}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518627721, "post_id": 48791395, "comment_id": 84587291, "body": "Ha, I think you got bitten by auto + expression templates. Try changing those <code>auto sum_a</code> and <code>auto sum_b</code> into e.g. floats or doubles."}, {"owner": {"reputation": 137, "user_id": 5716568, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92b97d2c28d34af6c23021a4db52f9af?s=128&d=identicon&r=PG&f=1", "display_name": "Junior hpc", "link": "https://stackoverflow.com/users/5716568/junior-hpc"}, "edited": false, "score": 0, "creation_date": 1518628261, "post_id": 48791395, "comment_id": 84587606, "body": "with <code>float sum_a = (v_1-v_3-v_2_a).sum();</code> I get the error <code>error: cannot convert to &#39;float&#39; in initialization</code>. I get the same error with <code>double</code>."}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "edited": false, "score": 0, "creation_date": 1518655641, "post_id": 48791395, "comment_id": 84599699, "body": "Does <code>((sum_a+1.f)&gt;sum_b)).all()</code> work?"}, {"owner": {"reputation": 966, "user_id": 2174310, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b4c4e2ee9c480966e8bb145aef963632?s=128&d=identicon&r=PG", "display_name": "Smarty77", "link": "https://stackoverflow.com/users/2174310/smarty77"}, "edited": false, "score": 0, "creation_date": 1519987190, "post_id": 48791395, "comment_id": 85139852, "body": "Did you found the solution? I am facing the same problem..."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5716568, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92b97d2c28d34af6c23021a4db52f9af?s=128&d=identicon&r=PG&f=1", "display_name": "Junior hpc", "link": "https://stackoverflow.com/users/5716568/junior-hpc"}, "edited": false, "score": 0, "creation_date": 1518625454, "post_id": 48791674, "comment_id": 84585684, "body": "<code>bool r = sum_a.isApprox(sum_b);</code> says that <code>has no member named &#39;isApprox&#39;</code>. Where am I wrong?"}, {"owner": {"reputation": 3506, "user_id": 1826217, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/95c20e60f3864d66fe469e98389f3a68?s=128&d=identicon&r=PG", "display_name": "const_ref", "link": "https://stackoverflow.com/users/1826217/const-ref"}, "reply_to_user": {"reputation": 137, "user_id": 5716568, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92b97d2c28d34af6c23021a4db52f9af?s=128&d=identicon&r=PG&f=1", "display_name": "Junior hpc", "link": "https://stackoverflow.com/users/5716568/junior-hpc"}, "edited": false, "score": 0, "creation_date": 1518625865, "post_id": 48791674, "comment_id": 84586017, "body": "Apologies it looks like it returns a Scalar object. This scalar type can vary, might be worth seeing if you can specify the type of the result which should allow you to use the semantics you previously tried."}], "tags": [], "owner": {"reputation": 3506, "user_id": 1826217, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/95c20e60f3864d66fe469e98389f3a68?s=128&d=identicon&r=PG", "display_name": "const_ref", "link": "https://stackoverflow.com/users/1826217/const-ref"}, "is_accepted": false, "score": 0, "last_activity_date": 1518624941, "creation_date": 1518624941, "answer_id": 48791674, "question_id": 48791395, "link": "https://stackoverflow.com/questions/48791395/compare-the-value-of-two-eigen/48791674#48791674", "title": "Compare the value of two Eigen", "body": "<p>From reading the documentation the return type of <code>.sum()</code> is a <code>DenseBase</code> object. We can compare two <code>DenseBase</code> objects with a specified precision by using the <code>isApprox</code> function</p>\n\n<p>See <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#ae8443357b808cd393be1b51974213f9c\" rel=\"nofollow noreferrer\">https://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#ae8443357b808cd393be1b51974213f9c</a></p>\n"}], "owner": {"reputation": 137, "user_id": 5716568, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/92b97d2c28d34af6c23021a4db52f9af?s=128&d=identicon&r=PG&f=1", "display_name": "Junior hpc", "link": "https://stackoverflow.com/users/5716568/junior-hpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 564, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518637617, "creation_date": 1518624136, "last_edit_date": 1518637617, "question_id": 48791395, "link": "https://stackoverflow.com/questions/48791395/compare-the-value-of-two-eigen", "title": "Compare the value of two Eigen", "body": "<p>I have implemented a function that subtracts three vectors, and then sum up their coefficients. After that, I want to compare the coefficient but the compiler shows an error. The following is my code:</p>\n\n<pre><code>void update_embedding_test(Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt;* matrix_a, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt;* matrix_b, const int32 index_1, const int32 index_2, const int32 index_3, const int32 index_4, const int32 index_5, float* rate) {\n\nauto v_1 = matrix_a-&gt;chip&lt;0&gt;(index_1); //get the first vector\nauto v_2_a = matrix_b-&gt;chip&lt;0&gt;(index_2); //get the second vector\nauto v_2_b = matrix_b-&gt;chip&lt;0&gt;(index_2); //get the third vector\nauto v_3 = matrix_a-&gt;chip&lt;0&gt;(index_3); //get the fourth vector\nauto v_4 = matrix_a-&gt;chip&lt;0&gt;(index_4); //get the fifth vector\nauto v_5 = matrix_a-&gt;chip&lt;0&gt;(index_5); //get the sixth vector\n\nauto sum_a = (v_1-v_3-v_2_a).sum(); //subtract the vectors and then sum the coefficients\nauto sum_b = (v_4-v_5-v_2_b).sum(); //subtract the vectors and then sum the coefficients\n\nstd::cout &lt;&lt; \"sum_a: \" &lt;&lt; sum_a &lt;&lt; \"\\n\"; //e.g: -0.0268941\nstd::cout &lt;&lt; \"sum_b: \" &lt;&lt; sum_b &lt;&lt; \"\\n\\n\"; //e.g: 0.0502871\n\nif ((sum_a+1.f)&gt;sum_b) { //compare the values\n  std::cout &lt;&lt; \"sum_a&gt;sum_b\\n\";\n}\n}\n</code></pre>\n\n<p>The error that the compiler shows is the following:</p>\n\n<pre><code>In member function 'void tensorflow::NegTrainWord2vecOp::update_embedding_test(Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt;*, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt;*, tensorflow::int32, tensorflow::int32, tensorflow::int32, tensorflow::int32, tensorflow::int32, float*)':\nword2vec_kernels.cc:725:20: error: could not convert 'Eigen::TensorBase&lt;Derived, 0&gt;::operator&gt;(const OtherDerived&amp;) const [with OtherDerived = Eigen::TensorReductionOp&lt;Eigen::internal::SumReducer&lt;float&gt;, const Eigen::DimensionList&lt;long int, 1ul&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, Eigen::MakePointer&gt;; Derived = Eigen::TensorCwiseUnaryOp&lt;Eigen::internal::bind2nd_op&lt;Eigen::internal::scalar_sum_op&lt;float, float&gt; &gt;, const Eigen::TensorReductionOp&lt;Eigen::internal::SumReducer&lt;float&gt;, const Eigen::DimensionList&lt;long int, 1ul&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, Eigen::MakePointer&gt; &gt;; typename Eigen::internal::traits&lt;T&gt;::Scalar = float](sum_b)' from 'const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_cmp_op&lt;float, float, (Eigen::internal::ComparisonName)5u&gt;, const Eigen::TensorCwiseUnaryOp&lt;Eigen::internal::bind2nd_op&lt;Eigen::internal::scalar_sum_op&lt;float, float&gt; &gt;, const Eigen::TensorReductionOp&lt;Eigen::internal::SumReducer&lt;float&gt;, const Eigen::DimensionList&lt;long int, 1ul&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, Eigen::MakePointer&gt; &gt;, const Eigen::TensorReductionOp&lt;Eigen::internal::SumReducer&lt;float&gt;, const Eigen::DimensionList&lt;long int, 1ul&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorCwiseBinaryOp&lt;Eigen::internal::scalar_difference_op&lt;float, float&gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, const Eigen::TensorChippingOp&lt;0l, Eigen::TensorMap&lt;Eigen::Tensor&lt;float, 2, 1, long int&gt;, 16, Eigen::MakePointer&gt; &gt; &gt;, Eigen::MakePointer&gt; &gt;' to 'bool'\n if ((sum_a+1.f)&gt;sum_b) {\n</code></pre>\n\n<p>How can I compare <code>sum_a</code> and <code>sum_b</code>?</p>\n\n<p><strong>UPDATE:</strong> the problem is not computing <code>(sum_a+1.f)&gt;sum_b</code>, but is to put it into the if (<code>if((sum_a+1.f)&gt;sum_b)</code>). The <a href=\"https://eigen.tuxfamily.org/dox/classEigen_1_1ArrayBase.html#title64\" rel=\"nofollow noreferrer\">link</a> says that <code>operator&gt;()</code> returns an expression of the coefficient-wise == operator of *this and other. However, the question still remain... How can I put <code>(sum_a+1.f)&gt;sum_b</code> into an <code>if</code> statement?</p>\n"}, {"tags": ["c++", "windows", "security", "backup", "ntfs"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518625392, "post_id": 48791248, "comment_id": 84585645, "body": "you can call <code>ReadDirectoryChangesW</code> on (share and any) folder with <i>dwNotifyFilter</i> which include <code>FILE_NOTIFY_CHANGE_SECURITY</code>. as result you got <code>FILE_ACTION_MODIFIED</code> action with relative (folder) file name."}, {"owner": {"reputation": 53, "user_id": 2338788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a25af6f395d1ad90dc65eb0e0e45106?s=128&d=identicon&r=PG", "display_name": "Zoellick", "link": "https://stackoverflow.com/users/2338788/zoellick"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518625609, "post_id": 48791248, "comment_id": 84585814, "body": "as I understand it will track changes only while the app is running, and it&#39;s not the case: the app is scheduled to run from time to time."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518625935, "post_id": 48791248, "comment_id": 84586067, "body": "in this case you need <code>FSCTL_READ_USN_JOURNAL</code> with <code>USN_REASON_SECURITY_CHANGE</code> in <code>ReasonMask</code> (how minimum)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518626656, "post_id": 48791248, "comment_id": 84586524, "body": "but this is worked only for local volumes"}, {"owner": {"reputation": 53, "user_id": 2338788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a25af6f395d1ad90dc65eb0e0e45106?s=128&d=identicon&r=PG", "display_name": "Zoellick", "link": "https://stackoverflow.com/users/2338788/zoellick"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518692393, "post_id": 48791248, "comment_id": 84613885, "body": "Thank you for pointing it out. Looks like journal is what I need."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1518702452, "post_id": 48791248, "comment_id": 84620585, "body": "Meta-data changes to a file&#39;s attributes and security descriptor update its <code>ChangeTime</code>, if that field is supported (it&#39;s always 0 for FAT). Starting with Vista, you can call <a href=\"https://msdn.microsoft.com/en-us/library/aa364953\" rel=\"nofollow noreferrer\"><code>GetFileInformationByHandleEx</code></a> on a handle for the directory to query its <a href=\"https://msdn.microsoft.com/en-us/library/aa364226\" rel=\"nofollow noreferrer\"><code>FileIdBothDirectoryInfo</code></a> entries."}, {"owner": {"reputation": 53, "user_id": 2338788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a25af6f395d1ad90dc65eb0e0e45106?s=128&d=identicon&r=PG", "display_name": "Zoellick", "link": "https://stackoverflow.com/users/2338788/zoellick"}, "edited": false, "score": 0, "creation_date": 1518781948, "post_id": 48791248, "comment_id": 84655871, "body": "Yes, you are right. But you have to open a file or directory handle to acquire that info. I think, I will make some experiments with GetFileInformationByHandleEx also. Thanks a lot!"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1518790049, "post_id": 48791248, "comment_id": 84660764, "body": "You can open a directory handle with <code>CreateFile</code> if you specify <code>FILE_FLAG_BACKUP_SEMANTICS</code>. As to the file listing, allocate a large buffer (e.g. 4 KB) and use two while loops. The outer loop calls <code>GetFileInformationByHandleEx</code> to read into the buffer. The inner loop processes the entries, advancing each iteration by <code>NextEntryOffset</code> until it&#39;s 0."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1518791505, "post_id": 48791248, "comment_id": 84661654, "body": "I forgot to mention that <code>GetFileInformationByHandleEx</code> will fail with <code>ERROR_NO_MORE_FILES</code> at the end of successfully reading the directory. Any other error code is really a failure."}], "owner": {"reputation": 53, "user_id": 2338788, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a25af6f395d1ad90dc65eb0e0e45106?s=128&d=identicon&r=PG", "display_name": "Zoellick", "link": "https://stackoverflow.com/users/2338788/zoellick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518623694, "creation_date": 1518623694, "question_id": 48791248, "link": "https://stackoverflow.com/questions/48791248/how-to-determine-that-security-descriptor-changed-without-opening-handle", "title": "How to determine that security descriptor changed without opening handle?", "body": "<p>Imagine you have a large file share and you want to backup it when it's changed.\nChanging a folder or a file security descriptor is also a change, but how can you determine one without opening a handle for every item on a share?</p>\n\n<p>I thought that modifying the security descriptor (adding new user to access list, for ex) changes <a href=\"https://msdn.microsoft.com/ru-ru/library/windows/desktop/aa365739(v=vs.85).aspx\" rel=\"nofollow noreferrer\" title=\"ftLastWriteTime\">ftLastWriteTime</a> attribute, but it doesn't.</p>\n\n<p>The question is: is it possible to track a security info modification without reopening all files and retrieving security descriptor data?</p>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 7, "creation_date": 1518623495, "post_id": 48791149, "comment_id": 84584286, "body": "They are the same function to C++.  typedef(s) do not make a new type and therefore the 2 functions have identical signatures.  doxygen has done you a big favour by pointing this out."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1518623577, "post_id": 48791149, "comment_id": 84584342, "body": "You cannot overload based on typedefs alone. You&#39;d need tag dispatching or something like that."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518623778, "post_id": 48791149, "comment_id": 84584462, "body": "Or, don&#39;t pass a pointer to int to the &quot;individual&quot; function?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518631198, "post_id": 48791149, "comment_id": 84589076, "body": "@Richard - pedantically &quot;<i>the 2 functions have identical signatures</i>&quot; is a little misleading.  There&#39;s only one function there; the header happens to have declared it twice (which is allowed)."}, {"owner": {"reputation": 25, "user_id": 3891569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40d3ed8982e5dc5e3ef18cf35fc40b1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark S", "link": "https://stackoverflow.com/users/3891569/mark-s"}, "edited": false, "score": 0, "creation_date": 1518634331, "post_id": 48791149, "comment_id": 84590696, "body": "Thanks for your timely responses. I&#39;m aware they&#39;re effectively the same function, but the code&#39;s not mine to alter, just the documentation, hence the question. Looks like I&#39;ll have to ask the coders tomorrow."}], "answers": [{"tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": true, "score": 0, "last_activity_date": 1518626568, "creation_date": 1518626568, "answer_id": 48792164, "question_id": 48791149, "link": "https://stackoverflow.com/questions/48791149/doxygen-how-to-split-function-documentation-when-parameter-typedef-makes-signat/48792164#48792164", "title": "Doxygen, how to split function documentation when parameter typedef makes signatures identical?", "body": "<p>Doxygen follows the rules of C++, and the rules of C++ say that those are the same function. There's no way to make Doxygen pretend that these declarations are for different functions, just as there's no way to get C++ to pretend that these declarations are for different functions.</p>\n\n<p>Doxygen, generally speaking, does not allow you to <em>lie</em> to the reader of the documentation.</p>\n\n<p>The correct way to handle this is to actually follow C++'s overloading rules:</p>\n\n<pre><code>struct process_individual{};\nstruct process_group{};\n\nvoid function(process_individual, int *p_int);\nvoid function(process_group, group *p_group);\n</code></pre>\n\n<p>Or better yet, just give them different names, since they're not really overloads of one another. Or even better yet, don't use a pointer for the individual one:</p>\n\n<pre><code>void function(int &amp;integer);\nvoid function(group *p_group);\n</code></pre>\n\n<p>There are numerous ways to handle this, and they all boil down to not trying to use enumerators to differentiate between functions with the same signature.</p>\n"}], "owner": {"reputation": 25, "user_id": 3891569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b40d3ed8982e5dc5e3ef18cf35fc40b1?s=128&d=identicon&r=PG&f=1", "display_name": "Mark S", "link": "https://stackoverflow.com/users/3891569/mark-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 48792164, "answer_count": 1, "score": 1, "last_activity_date": 1518626568, "creation_date": 1518623384, "question_id": 48791149, "link": "https://stackoverflow.com/questions/48791149/doxygen-how-to-split-function-documentation-when-parameter-typedef-makes-signat", "title": "Doxygen, how to split function documentation when parameter typedef makes signatures identical?", "body": "<p>I have to document two separate functions which, due to a typedef, seem to be interpreted as the same function, so the docs for both are combined.</p>\n\n<p>Here's a very simplified example: </p>\n\n<pre><code>typedef int group;\n\ntypedef enum { INDIVIDUAL = 0, GROUP = 1, } type_to_process;    \n\n/**************************************************************************//**\n *\n * @brief Individual function.\n *\n * @param[in] type     type to process\n * @param[in] p_int    individual number to process\n *\n *****************************************************************************/\nvoid function(type_to_process type, int *p_int);\n\n/****************************************************************************//**\n *\n * @brief Group function.\n *\n * @param[in] type      type to process\n * @param[in] p_group   group number to process\n *\n *****************************************************************************/\nvoid function(type_to_process type, group *p_group);\n</code></pre>\n\n<p>As group is <code>typedef</code>'ed to an <code>int</code>, doxygen sees the two functions as identical. </p>\n\n<p>Is there any way to have doxygen document them as separate functions?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "c++", "tensorflow"], "comments": [{"owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "edited": false, "score": 0, "creation_date": 1518646304, "post_id": 48791136, "comment_id": 84596626, "body": "Are you sure the &quot;Tensor tensor&quot; will survive. This looks like being only function scope. I would try <code>allocate(void ** ptr_address, int num_elements, Tensor **tensor)</code>"}, {"owner": {"reputation": 369, "user_id": 4232178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c66f39a3b8eb0f4c77285107de895f?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Monteiro", "link": "https://stackoverflow.com/users/4232178/miguel-monteiro"}, "reply_to_user": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "edited": false, "score": 0, "creation_date": 1518701559, "post_id": 48791136, "comment_id": 84619962, "body": "Thanks again, I will try that. I know that <code>Tensor tensor</code> does not survive but I thought it shouldn&#39;t matter since the memory would remain allocated until the end of Compute."}, {"owner": {"reputation": 3947, "user_id": 7443104, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/599eeedbaf5a966b46ef5b5784741b8c?s=128&d=identicon&r=PG", "display_name": "Patwie", "link": "https://stackoverflow.com/users/7443104/patwie"}, "edited": false, "score": 1, "creation_date": 1519156821, "post_id": 48791136, "comment_id": 84792127, "body": "cross-ref to issue: <a href=\"https://github.com/tensorflow/tensorflow/issues/17064\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues/17064</a>"}], "owner": {"reputation": 369, "user_id": 4232178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52c66f39a3b8eb0f4c77285107de895f?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Monteiro", "link": "https://stackoverflow.com/users/4232178/miguel-monteiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 608, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518623348, "creation_date": 1518623348, "question_id": 48791136, "link": "https://stackoverflow.com/questions/48791136/allocating-c-cuda-memory-within-tensorflow-op", "title": "Allocating C++/CUDA memory within TensorFlow Op", "body": "<p>This question is a follow-up to my previous <a href=\"https://stackoverflow.com/questions/48580580/tensorflow-new-op-cuda-kernel-memory-managment\">question</a> where I asked how to allocate GPU or CPU memory in a TensorFlow Op.</p>\n\n<p>I wish to be able to allocate memory for any C++ type in GPU/CPU in a TensorFlow Op. Using <code>context</code> one can allocate new tensors (in CPU or GPU) and if they are of a \"regular\" C++ type one can get a C++ pointer. Example:</p>\n\n<pre><code>    Tensor tensor;\n    OP_REQUIRES_OK(context, context-&gt;allocate_temp(DT_FLOAT, TensorShape({n_elements}), &amp;tensor));\n    float * ptr = tensor.flat&lt;float&gt;().data();\n</code></pre>\n\n<p>My problem is when trying to allocate user-defined types for instance:</p>\n\n<pre><code>struct A{\n    float a;\n    int b;\n};\n</code></pre>\n\n<p>Then there is no correspondent Tensorflow type to allocate as. I know that in this case, I could just allocate a <code>float</code> tensor and an <code>int</code> tensor, but for more complex data-structures this makes the code quite messy.</p>\n\n<p>I tried to work around it by allocating bytes (<code>DT_UINT8</code>) and using <code>reinterpret_cast</code> to cast to the desired pointer type (as one of the comments from an answer in my previous question suggested). Here is my implementation: </p>\n\n<pre><code>template&lt;typename t&gt; void allocate(void ** ptr_address, int num_elements){\n    Tensor tensor;\n    int number_of_bytes = num_elements * sizeof(t);\n    OP_REQUIRES_OK(context, context-&gt;allocate_temp(DT_UINT8, TensorShape({number_of_bytes}), &amp;tensor));\n    *ptr_address = reinterpret_cast&lt;t*&gt;(tensor.flat&lt;unsigned char&gt;().data());\n}\n</code></pre>\n\n<p>In theory, I would be able to use <code>A* a; allocate&lt;A&gt;(&amp;a, 5);</code> for the class defined above instead of auto <code>a = new A[5];</code> or <code>cudaMalloc((void**)&amp;a, 5*sizeof(A))</code>.</p>\n\n<p>The problem is that after the Op runs it freezes and TensorFlow does not return to python (I have made sure it runs through <code>printf</code> debugging). I am sure it is because of this method of allocation because when I use regular C++/CUDA allocation I don't have this problem.</p>\n\n<p>Is there something wrong with this method of allocation or is something else the issue?</p>\n"}, {"tags": ["c++", "std", "stl-algorithm"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 6, "creation_date": 1518623422, "post_id": 48791126, "comment_id": 84584242, "body": "What&#39;s the ultimate goal of the exercise? The things you say you want to do in <code>comp</code> don&#39;t make much sense to me. Sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1518624425, "post_id": 48791126, "comment_id": 84584940, "body": "Mm, this <i>would</i> be kind of useful. I&#39;d check in Boost but otherwise yeah roll your own."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1518625330, "post_id": 48791126, "comment_id": 84585606, "body": "@YSC &quot;Are your iterators ContiguousIterator?&quot; - For now, they are. I&#39;m ready to go with <code>std::vector</code> as a container here. Does it help anything?"}], "answers": [{"comments": [{"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518624035, "post_id": 48791275, "comment_id": 84584632, "body": "I won&#39;t modify any input. Solemn promise. Let&#39;s say that container is a vector and I just want to log the indices for debugging purposes."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1518624055, "post_id": 48791275, "comment_id": 84584644, "body": "When OP writes they want to &quot;shift the iterators&quot;, I&#39;m not sure they wants to actually bitshift values here."}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518624653, "post_id": 48791275, "comment_id": 84585102, "body": "@sigil If it&#39;s all about indices, it can be done under certain conditions, see update."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1518624808, "post_id": 48791275, "comment_id": 84585222, "body": "I thought about it and wrote an answer with this idea, but I fear <code>comp</code> must be called at some point with <code>key</code> as a parameter. Taking the address of <code>key</code> and treating it as an array is undefined behaviour."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1518625212, "post_id": 48791275, "comment_id": 84585528, "body": "@YSC &quot;When OP writes they want to &quot;shift the iterators&quot;, I&#39;m not sure they wants to actually bitshift values here.&quot; - Not a bit shift. To tell the truth, it&#39;s a sorted vector with rotation applied to it. Something like {4, 5, 1, 2, 3}. My plan is to compensate for the rotation by shifting the indices back into place inside <code>comp()</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1518625950, "post_id": 48791275, "comment_id": 84586079, "body": "&quot;The type <code>Type1</code> must be such that an object of type <code>ForwardIt</code> can be dereferenced and then implicitly converted to <code>Type1</code>. The type <code>Type2</code> must be such that an object of type <code>T</code> can be implicitly converted to <code>Type2</code>.&quot; <code>&amp;right</code> is <i>always</i> <code>&amp;key</code>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1518626761, "post_id": 48791275, "comment_id": 84586605, "body": "@Caleth thank you. I&#39;ve updated my answer from your &quot;intel&quot;."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518627105, "post_id": 48791275, "comment_id": 84586878, "body": "So, the <code>size_t leftIndex = &amp;left - firstElemPtr;</code> part hinges on the assumption that references are implemented as pointers and taking one&#39;s address would get us into the right place of the container. I guess it should work as of now, but with no guarantees."}, {"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518633948, "post_id": 48791275, "comment_id": 84590475, "body": "Okay, put it into my code and it works. Actually, I used the form YSC offered but marking your answer anyway because you were the first with this idea."}], "tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 0, "last_activity_date": 1518629662, "last_edit_date": 1518629662, "creation_date": 1518623771, "answer_id": 48791275, "question_id": 48791126, "link": "https://stackoverflow.com/questions/48791126/how-to-to-pass-iterators-to-the-stdlower-bound-comparison-function/48791275#48791275", "title": "How to to pass iterators to the std::lower_bound() comparison function?", "body": "<p>From <a href=\"http://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\">the doc</a>:</p>\n\n<blockquote>\n  <p>The signature of the predicate function should be equivalent to the\n  following:</p>\n  \n  <p><code>bool pred(const Type1 &amp;a, const Type2 &amp;b);</code></p>\n  \n  <p>The signature does not need to have <code>const &amp;</code>, but the function must not\n  modify the objects passed to it.</p>\n</blockquote>\n\n<p>So you can not, and should not, do this. <code>std::lower_bound</code> has specific purpose and it should not modify the input in any way. Write your own function for this purpose.</p>\n\n<hr>\n\n<p>If you need indices only, and your container stores its elements in linear, continuous block of memory, you could do this (example with <code>std::vector</code>):</p>\n\n<pre><code>std::vector&lt;...&gt; vec;\n...\nconst auto* firstElemPtr = &amp;vec[0];\nstd::lower_bound(vec.begin(), vec.end(), key, [firstElemPtr](const auto&amp; left, const auto&amp; right) -&gt; bool {\n  size_t index = &amp;left - firstElemPtr;\n  // now do the comparison\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518626036, "post_id": 48791727, "comment_id": 84586134, "body": "Man, it&#39;s sort of obvious that <code>lower_bound()</code> won&#39;t accept iterators directly - it&#39;s, like, in its prototype. What I&#39;m asking for is a workaround. Maybe there&#39;s another function that does what I want. Or maybe there&#39;s a trick like the one Mateusz Grzejek has suggested. Gonna try that one in the meanwhile."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518626195, "post_id": 48791727, "comment_id": 84586235, "body": "@sigil you cannot devise an iterator from <code>value</code>; <a href=\"http://coliru.stacked-crooked.com/a/5c270c6b40f3f6ce\" rel=\"nofollow noreferrer\">see for yourself</a>. This is UB. like SIGSEGV UB. It would only kind of work if you were guaranteed <code>value</code> is always the right hand side argument of <code>comp</code>. But I would not advise taking this implementation detail into account."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "edited": false, "score": 0, "creation_date": 1518626725, "post_id": 48791727, "comment_id": 84586584, "body": "@sigil my bad, it <i>is</i> guaranteed. Updated."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 1, "last_activity_date": 1518626713, "last_edit_date": 1518626713, "creation_date": 1518625178, "answer_id": 48791727, "question_id": 48791126, "link": "https://stackoverflow.com/questions/48791126/how-to-to-pass-iterators-to-the-stdlower-bound-comparison-function/48791727#48791727", "title": "How to to pass iterators to the std::lower_bound() comparison function?", "body": "<p>From the <a href=\"http://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\"><code>std::lower_bound</code> doc</a>, one can read for <code>bool comp(const Type1 &amp;a, const Type2 &amp;b);</code>:</p>\n\n<blockquote>\n  <p>The type <code>Type1</code> must be such that an object of type <code>ForwardIt</code> can be dereferenced and then implicitly converted to <code>Type1</code>. The type <code>Type2</code> must be such that an object of type <code>T</code> can be implicitly converted to <code>Type2</code>. \u200b </p>\n</blockquote>\n\n<p>This means, <code>std::lower_bound</code> will always call <code>comp</code> with an element from the range as the left hand side argument, and <code>value</code> as the right hand side argument. If your search range is a contiguous range (meaning you're dealing with <code>std::vector</code>, <code>std::array</code>, <code>std::valarray</code>, <code>std::string</code>, ..., or C-style arrays), you can devise an iterator from the distance between the range's start and <code>comp</code>'s left hand side argument:</p>\n\n<pre><code>auto v = std::vector&lt;int&gt;{0, 1, 2, 3, 4, 5};\n\nauto comp = [&amp;v](const int &amp;lhs, const int &amp;rhs)\n{\n    auto it_lhs = cbegin(v) + std::distance(std::addressof(*cbegin(v)), &amp;lhs);\n    return *it_lhs &lt; rhs;\n};\n\nstd::cout &lt;&lt; *std::lower_bound(begin(v), end(v), 2, comp) &lt;&lt; \"\\n\";\n</code></pre>\n"}], "owner": {"reputation": 745, "user_id": 6885358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/7f9459379567b3aedadf3306dafc83b2?s=128&d=identicon&r=PG", "display_name": "sigil", "link": "https://stackoverflow.com/users/6885358/sigil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 48791275, "answer_count": 2, "score": 2, "last_activity_date": 1518629662, "creation_date": 1518623311, "last_edit_date": 1518624684, "question_id": 48791126, "link": "https://stackoverflow.com/questions/48791126/how-to-to-pass-iterators-to-the-stdlower-bound-comparison-function", "title": "How to to pass iterators to the std::lower_bound() comparison function?", "body": "<p>In the following declaration borrowed from <a href=\"http://www.cplusplus.com/reference/algorithm/lower_bound/\" rel=\"nofollow noreferrer\">cplusplus.com</a></p>\n\n<pre><code>template&lt;class ForwardIterator, class T, class Compare&gt;\nForwardIterator lower_bound(ForwardIterator first, ForwardIterator last, const T&amp; val, Compare comp);\n</code></pre>\n\n<p><code>comp()</code> should resemble something like this:</p>\n\n<pre><code>template&lt;class T&gt;\nbool comp(const T&amp; v1, const T&amp; v2);\n</code></pre>\n\n<p>The problem is that I don't want to pass the value type there. I want to pass iterators to it and then <s>shift them</s> okay, just stare at them silently inside <code>comp()</code> before dereferencing. (Not to mention - log them.) Is there any workaround for this?</p>\n\n<p>Of course, I can write my own container class with its own iterators, and of course I can write my own implementation of <code>std::lower_bound()</code>. Both options are rather unpleasant.</p>\n"}, {"tags": ["c++", "qt", "include", "qmake"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1518623190, "post_id": 48790953, "comment_id": 84584073, "body": "Are you sure that <code>firstheader.h</code> and <code>firstHeader.h</code> are the same file in <code>directoryA1</code>?"}, {"owner": {"reputation": 541, "user_id": 3599381, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5bf6b2842709d67b8f1d479bfd7decb1?s=128&d=identicon&r=PG&f=1", "display_name": "OnurA", "link": "https://stackoverflow.com/users/3599381/onura"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1518623364, "post_id": 48790953, "comment_id": 84584196, "body": "I think you made a typing error in your question @S.M."}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 0, "creation_date": 1518623384, "post_id": 48790953, "comment_id": 84584213, "body": "If it would be an header files problem, compiler would be complain that it cannot find a header to include. But it looks like the problem is somewhere else."}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 662593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e745cd82e8f6f2832568ee8a67e61661?s=128&d=identicon&r=PG", "display_name": "StahlRat", "link": "https://stackoverflow.com/users/662593/stahlrat"}, "is_accepted": false, "score": 0, "last_activity_date": 1518625948, "creation_date": 1518625948, "answer_id": 48791985, "question_id": 48790953, "link": "https://stackoverflow.com/questions/48790953/issues-with-includes-in-qt/48791985#48791985", "title": "Issues with includes in QT", "body": "<p>you forgot: <strong>./</strong> </p>\n\n<p>try something like this:</p>\n\n<pre><code>#include \"./firstheader.h\"\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 3599381, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5bf6b2842709d67b8f1d479bfd7decb1?s=128&d=identicon&r=PG&f=1", "display_name": "OnurA", "link": "https://stackoverflow.com/users/3599381/onura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518625948, "creation_date": 1518622782, "question_id": 48790953, "link": "https://stackoverflow.com/questions/48790953/issues-with-includes-in-qt", "title": "Issues with includes in QT", "body": "<p>I have a basic issue with includes. My project structure looks like this:</p>\n\n<pre><code>myProject.pro\n---directoryA\n   directoryA.pri\n   ---directoryA1\n      firstHeader.h\n      secondHeader.h\n      secondHeader.cpp\nmain.cpp\n</code></pre>\n\n<p>This is how myProject.pro looks like (I have ony written lines which I though to be relevant)</p>\n\n<p><strong>myProject.pro:</strong></p>\n\n<pre><code>include(directoryA/directoryA.pri)\nSOURCES += main.cpp\n</code></pre>\n\n<p><strong>directoryA.pri:</strong></p>\n\n<pre><code>INCLUDEPATH += $$PWD\nDEPENDPATH += $$PWD\n\nHEADERS += \\\n$$PWD/directoryA/firstHeader.h \\\n$$PWD/directoryA/secondHeader.h\n\nSOURCES+= \\\n$$PWD/directoryA/secondHeader.cpp\n</code></pre>\n\n<p>Given this structure, a simple include that I want to do in secondHeader.h from firstHeader.h does not work:</p>\n\n<p>firstHeader.h:</p>\n\n<pre><code>#define firstheaderVar 4\n</code></pre>\n\n<p>secondHeader.h:</p>\n\n<pre><code>#include \"firstheader.h\"\nint secondHeaderVar = firstheaderVar;\n</code></pre>\n\n<p>Simply I can not include anything from the first one within second one. It always gives the '...' was not declared in this scope error.</p>\n\n<p>I suspect this to be an error caused by my project directory structure but can not find an elegant way to solve it. </p>\n\n<p>Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["c++", "ffmpeg", "libavcodec", "libav", "mpeg-dash"], "owner": {"reputation": 487, "user_id": 3376063, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EUr98.jpg?s=128&g=1", "display_name": "Yuriy Pryyma", "link": "https://stackoverflow.com/users/3376063/yuriy-pryyma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1519034246, "creation_date": 1518621553, "last_edit_date": 1519034246, "question_id": 48790550, "link": "https://stackoverflow.com/questions/48790550/create-one-mpeg-dash-segment", "title": "Create one mpeg-dash segment", "body": "<p>I have video encoded in mpeg-dash(*.mpd, init segments, video segments)\nTask is to replace one of video segments with segment generated by me. And so video is still can be played.</p>\n\n<p>I read properties of one segment(combining init segment and video segment) using </p>\n\n<pre><code>avformat_open_input\navformat_find_stream_info\n</code></pre>\n\n<p>1) I have tried to use <a href=\"https://www.ffmpeg.org/ffmpeg-formats.html#dash-2\" rel=\"noreferrer\">dash muxer</a> to generate new segment. </p>\n\n<pre><code>avformat_alloc_output_context2(&amp;avFormatContext, NULL, \"dash\", filename)\n</code></pre>\n\n<p>But the problem is it creates mpd manifest, and other segments. So how to force it to create one segment?</p>\n\n<p>2) When I parsed segment I noticed that it had format \"QuickTime / MOV\". </p>\n\n<pre><code>avformat_alloc_output_context2(&amp;avFormatContext, NULL, \"mov\", filename);\n</code></pre>\n\n<p>So my another idea was to use \"mov\" encoder. And set properties same as in initial segment(start time, duration, resolution). \nBut here the question is how to remove init header? Because I already have init segment.</p>\n\n<p>Are there any other approaches to generate one mpeg-dash segment and how to solve my problems?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 3, "creation_date": 1518621094, "post_id": 48790240, "comment_id": 84582709, "body": "<code>&gt;&gt;</code> leaves the line feed in the stream. It is then picked up by the <code>getline</code> on the next iteration, straddling the input."}, {"owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1518621271, "post_id": 48790240, "comment_id": 84582825, "body": "clearBuffer doesn&#39;t take care of that?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1518621460, "post_id": 48790240, "comment_id": 84582969, "body": "According to the theory of &quot;I need more coffee&quot;, it should indeed."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518622789, "post_id": 48790240, "comment_id": 84583816, "body": "You really ought to avoid <code>using namespace std</code> - it is a bad habit to get into, and <a href=\"/q/1452721\">can silently change the meaning of your program</a> when you&#39;re not expecting it.  Get used to using the namespace prefix (<code>std</code> is intentionally very short), or importing <i>just the names you need</i> into the <i>smallest reasonable scope</i>."}, {"owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518623302, "post_id": 48790240, "comment_id": 84584149, "body": "@TobySpeight I have edited my post. I am still using namespace, but the undesired behavior is there"}, {"owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "edited": false, "score": 0, "creation_date": 1518623451, "post_id": 48790240, "comment_id": 84584266, "body": "yes, if I have it in there it just hangs forever."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518623887, "post_id": 48790240, "comment_id": 84584535, "body": "Thanks for editing your question to an MCVE - that enabled me to reproduce and diagnose the problem."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518624182, "post_id": 48790240, "comment_id": 84584736, "body": "@JohnHamlettIV: <i>&quot;clearBuffer doesn&#39;t take care of that?&quot;</i> It might, if it were ever called."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1518624634, "post_id": 48790240, "comment_id": 84585089, "body": "BTW, take care with <code>danger</code> (appropriately enough).  Because it&#39;s a <code>char</code>, reading into it will read a <i>character</i>, not a <i>number</i>.  IOW, you&#39;ll get <code>&#39;0&#39;</code> and <code>&#39;1&#39;</code> for the creatures from that file, which might be a surprise if you expected <code>0</code> and <code>1</code> (which are <code>&#39;\\0&#39;</code> and <code>&#39;\\1&#39;</code> respectively)."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518624233, "post_id": 48791212, "comment_id": 84584787, "body": "Or, better yet, call the <code>clearBuffer()</code> function that you&#39;ve already defined"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518624371, "post_id": 48791212, "comment_id": 84584894, "body": "@Lightness - after adapting it to work on streams other than <code>std::cin</code>."}], "tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": true, "score": 0, "last_activity_date": 1518623604, "creation_date": 1518623604, "answer_id": 48791212, "question_id": 48790240, "link": "https://stackoverflow.com/questions/48790240/wont-read-full-file-c/48791212#48791212", "title": "Won&#39;t read full file c++", "body": "<p>After reading the double <code>cost</code>, there's a newline waiting in the  <code>creatureFile</code> stream.</p>\n\n<p>We need to advance past that with <code>ignore()</code> before reading the next creature:</p>\n\n<pre><code>while (std::getline(creatureFile, name)\n       &amp;&amp; std::getline(creatureFile, description)\n       &amp;&amp; creatureFile &gt;&gt; danger\n       &amp;&amp; creatureFile &gt;&gt; cost)\n{\n    std::cout &lt;&lt; \"name: \" &lt;&lt; name\n              &lt;&lt; \" desc: \" &lt;&lt; description\n              &lt;&lt; \" danger: \" &lt;&lt; danger\n              &lt;&lt; \" cost: \" &lt;&lt; cost\n              &lt;&lt; std::endl;\n    ++numCreated;\n    creatureFile.ignore(100, '\\n');\n}\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 5684848, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/45ad4ca07923b97c2b66c1a76a8820df?s=128&d=identicon&r=PG&f=1", "display_name": "John Hamlett IV", "link": "https://stackoverflow.com/users/5684848/john-hamlett-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 48791212, "answer_count": 1, "score": -1, "last_activity_date": 1518623604, "creation_date": 1518620568, "last_edit_date": 1518623400, "question_id": 48790240, "link": "https://stackoverflow.com/questions/48790240/wont-read-full-file-c", "title": "Won&#39;t read full file c++", "body": "<p>I am trying to populate a linked list with creatures from a file. However, when I do it reads the first one but no other creatures. I cannot pass an int to get the number of creatures because it is not static. </p>\n\n<p>I have the following code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nvoid clearBuffer() {\n    cin.clear();\n    cin.ignore(100, '\\n');\n}\n\nvoid enterMagicalCreatureFromFile() {\n    string filepath = \"test.txt\";\n    ifstream creatureFile;\n    creatureFile.open(filepath);\n    if (!creatureFile) {\n        cerr &lt;&lt; \"Unable to open file \" &lt;&lt; filepath &lt;&lt; endl;\n        return;\n    }\n    string name, description;\n    float cost;\n    char danger;\n    int numCreated = 0;\n    while (getline(creatureFile, name) &amp;&amp; getline(creatureFile, description) &amp;&amp; creatureFile &gt;&gt; danger &amp;&amp; creatureFile &gt;&gt; cost) {\n        cout &lt;&lt; \"name: \" &lt;&lt; name &lt;&lt; \" desc: \" &lt;&lt; description &lt;&lt; \" danger: \" &lt;&lt; danger &lt;&lt; \" cost: \" &lt;&lt; cost &lt;&lt; endl;\n        numCreated++;\n    }\n    cout &lt;&lt; numCreated &lt;&lt; \" creatures from \" &lt;&lt; filepath &lt;&lt; \" have been added to the zoo\" &lt;&lt; endl;\n}\n\nint main() {\n    enterMagicalCreatureFromFile();\n}\n</code></pre>\n\n<p>The file test.txt looks like </p>\n\n<pre><code>Beholder\nGiant center eye and twelve eye stalks above it.  It is a flying eyeball.  Mouth full of razor sharp teeth.  Eye stalks shoot various beams of magical death-dealing energy.\n1\n750.85\nBanshee\nThe English Banshee is a fairy woman who wails when death is approaching.They do not cause death, only mourn it.  Banshees are almost always female, and are usually seen with long, dark, black hair and pale chees.  Their eyes also are usually red from crying.\n0\n15.5\nTroll\nUgly and big.  Sometimes smell bad.\n1\n85648.34\nMike Wazowski\nOne-eyed, funny green monster.  A scare assistant to James P. Sullivan at Monsters, Inc.  Mike doesn't want any interruptions in his life.\n0\n455.32\nUnicorn\nThe unicorn is a legendary creature that has been described since antiquity as a beast with a single large, pointed, spiraling horn projecting from its forehead. \n0\n24.32\nSasquatch\nThe sasquatch is also called Big Food.  Bigfoot is a cryptid in American folklore, supposedly a simian-like creature that inhabits forests, especially those of the Pacific Northwest. Bigfoot is usually described as a large, hairy, bipedal humanoid.\n1\n39475.93\n</code></pre>\n\n<p>As I said the first creature \"Beholder\" loads and get added to the list perfectly, so I don't think my logic is in the list or the creature file.</p>\n\n<p>I am stuck, any pointers?</p>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 9360484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c30ef65c1a7410eaa938f14093bc0c?s=128&d=identicon&r=PG&f=1", "display_name": "ConstVoidPtr", "link": "https://stackoverflow.com/users/9360484/constvoidptr"}, "edited": false, "score": 0, "creation_date": 1518676405, "post_id": 48791940, "comment_id": 84604976, "body": "Thank you a lot. For some reason last time I tried that it did not work. This time I placed the call in <code>CMyFrame::InitInstance()</code> just before the <code>Frame-&gt;ShowWindow(SW_NORMAL)</code> and it worked!"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": true, "score": 3, "last_activity_date": 1518626736, "last_edit_date": 1518626736, "creation_date": 1518625815, "answer_id": 48791940, "question_id": 48790150, "link": "https://stackoverflow.com/questions/48790150/mfc-why-is-the-accelerator-not-working/48791940#48791940", "title": "MFC: Why is the Accelerator not working?", "body": "<p><code>CFrameWnd</code> has its own <a href=\"https://msdn.microsoft.com/en-us/library/0kba7ctw.aspx\" rel=\"nofollow noreferrer\"><code>CFrameWnd::LoadAccelTable</code></a> method. Add this line:</p>\n\n<pre><code>Frame-&gt;LoadAccelTable(MAKEINTRESOURCE(IDR_ACCELERATOR1));\n</code></pre>\n\n<p><code>CWinThread::ProcessMessageFilter</code> will process accelerator messages if MFC dialog box is active. But the way it is set up in your code, it will pass the accelerator to the main frame, not dialog box.</p>\n"}], "owner": {"reputation": 43, "user_id": 9360484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c30ef65c1a7410eaa938f14093bc0c?s=128&d=identicon&r=PG&f=1", "display_name": "ConstVoidPtr", "link": "https://stackoverflow.com/users/9360484/constvoidptr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 48791940, "answer_count": 1, "score": 2, "last_activity_date": 1518626736, "creation_date": 1518620272, "last_edit_date": 1518621655, "question_id": 48790150, "link": "https://stackoverflow.com/questions/48790150/mfc-why-is-the-accelerator-not-working", "title": "MFC: Why is the Accelerator not working?", "body": "<p>I am trying to use an accelerator in a class that inherits from <code>CFrameWnd</code>, which itself is used in a class that inherits from <code>CWinApp</code>. For some reason the shortcuts I defined in the accelerator just don't want to work.</p>\n\n<p>There are two classes: <code>CMyFrame</code> (inherits from <code>CFrameWnd</code>) and <code>CMyApp</code> (inherits from <code>CWinApp</code>).</p>\n\n<p>Relevant functions:</p>\n\n<pre><code>BOOL CMyApp::InitInstance() {\n    m_hAccel = LoadAccelerators(AfxGetInstanceHandle(), MAKEINTRESOURCE(IDR_ACCELERATOR1));\n\n    CMyFrame *Frame = new CMyFrame();\n    m_pMainWnd = Frame;\n\n    Frame-&gt;ShowWindow(SW_NORMAL);\n    Frame-&gt;UpdateWindow();\n\n    return TRUE;\n}\n\nBOOL CMyApp::ProcessMessageFilter(int code, LPMSG Msg) {\n    if (m_hAccel) {\n        if (::TranslateAccelerator(m_pMainWnd-&gt;m_hWnd, m_hAccel, Msg)) {\n            return TRUE;\n        }\n    }\n    return CWinApp::ProcessMessageFilter(code, Msg);\n}\n\nBEGIN_MESSAGE_MAP(CMyFrame, CFrameWnd)\n    ON_COMMAND(ID_FILE_NEW, &amp;CMyFrame::OnFileNew)\n    ON_COMMAND(ID_FILE_SAVE, &amp;CMyFrame::OnFileSave)\n    ON_COMMAND(ID_EDIT_CUT, &amp;CMyFrame::OnEditCut)\n    ON_COMMAND(ID_EDIT_COPY, &amp;CMyFrame::OnEditCopy)\n    ON_COMMAND(ID_EDIT_PASTE, &amp;CMyFrame::OnEditPaste)\nEND_MESSAGE_MAP()\n\nvoid CMyFrame::OnFileNew() {\n    MessageBox(L\"OnFileNew\", L\"Event\", MB_OK);\n}\n\nvoid CMyFrame::OnFileSave() {\n    MessageBox(L\"OnFileSave\", L\"Event\", MB_OK);\n}\n\nvoid CMyFrame::OnEditCut() {\n    MessageBox(L\"OnEditCut\", L\"Event\", MB_OK);\n}\n\nvoid CMyFrame::OnEditCopy() {\n    MessageBox(L\"OnEditCopy\", L\"Event\", MB_OK);\n}\n\nvoid CMyFrame::OnEditPaste() {\n    MessageBox(L\"OnEditPaste\", L\"Event\", MB_OK);\n}\n</code></pre>\n\n<p>I  included <code>afxwin.h</code> and <code>resource.h</code>.\nThe accelerator itself is loaded correctly (I checked the return value using another messagebox. It was always 1 and MSDN states that every value except for 0 means success). Also when I do not load the accelerator the menu items are greyed out.\nThe items themselves are also working correctly. When I click them the corresponding messagebox pops up.\nThe header of <code>CMyFrame</code> contains the <code>DECLARE_MESSAGE_MAP()</code>.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 3, "creation_date": 1518620610, "post_id": 48790111, "comment_id": 84582392, "body": "This: <i>&quot;If two union members are standard-layout types, it&#39;s well-defined to examine their common subsequence on any compiler.&quot;</i>  but I think we need more info to be sure; from: <a href=\"http://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/union</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518621160, "post_id": 48790111, "comment_id": 84582762, "body": "My gut feel is that it is probably UB.  @RichardCritten The quoted section means that it is legal to look at <code>big.b.h.type</code> (or <code>big.h.type</code>) even though the active member is <code>big.c</code>.  I don&#39;t think it is legal to reinterpret cast to <code>Little</code>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518621239, "post_id": 48790111, "comment_id": 84582808, "body": "A simpler question:  Given <code>union Big2 {     Hdr h;      A a;     B b;     C c;     D d;     E e;     F f; };</code> would it be legal to <code>reinterpet_cast</code> from <code>Big</code> to <code>Big2</code>?  My gut feel is &quot;no&quot; (but I can&#39;t prove it)."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518621444, "post_id": 48790111, "comment_id": 84582955, "body": "@MartinBonner was thinking if types <code>B</code> and <code>C</code> had a common initial sub-sequence, then possibly..."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518621572, "post_id": 48790111, "comment_id": 84583044, "body": "if based on the fact that all union members start at the same address this code is correct, if on formal documentation - <i>The details of that allocation are implementation-defined</i> - if <code>Big</code> have large size compare <code>Little</code> (due some extra members have lage size) - the layout of <code>Big</code> can be already another (say <code>a</code> and <code>b</code> can be placed not at begin of <code>Big</code> address ) - convert to <code>Lttle</code> via <code>reinterpret_cast</code> will be already incorrect. however i not believe that some member can start not at union begin."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1518621637, "post_id": 48790111, "comment_id": 84583085, "body": "What is the very point of this design? If the types <code>A</code>, <code>B</code> etc. all share a <code>Hdr</code> as their first member, then why not simply use polymorphism? Alternatively, why not use a layout where the types <code>A</code>, <code>B</code> etc. don&#39;t contain a <code>Hdr</code>, which is kept outside of the <code>union</code>: <code>struct Big { Hdr h; union {A a; B b; &#47;* etc *&#47; }; };</code>"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 1, "creation_date": 1518621711, "post_id": 48790111, "comment_id": 84583133, "body": "and anyway you just use <code>big.h.type</code> which already UB by formal documentation :)"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 5, "creation_date": 1518622067, "post_id": 48790111, "comment_id": 84583374, "body": "@RbMm Use of <code>big.h.type</code> is legal.  The &quot;common initial subsequence rule&quot; that the OP referred to forces it."}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518622110, "post_id": 48790111, "comment_id": 84583399, "body": "answer is based on question - are by given union address - we know address of some it member ? if address of all members of union is the same and equal to address of union itself - this cast pointer is correct. if admit that different members of union can have different addresses ( not start of union begin) - cast incorrect. anyway when you use <code>big.h.type</code> you already implicit assume and use that all members start at the same address"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518622340, "post_id": 48790111, "comment_id": 84583527, "body": "@MartinBonner - i absolute sure that use <code>big.h.type</code> is legal (if all other union members begin exactly from <code>Hdr</code>) but from formal reference i not view why this is legal, if this is &quot;inactive member&quot;"}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 3, "creation_date": 1518622427, "post_id": 48790111, "comment_id": 84583582, "body": "@RbMm see <a href=\"http://en.cppreference.com/w/cpp/language/data_members#Standard_layout\" rel=\"nofollow noreferrer\">here</a>, in particular the special properties of standard-layout types."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 0, "creation_date": 1518622523, "post_id": 48790111, "comment_id": 84583654, "body": "@RbMm : Or, if you want to get nearer the source, check 9.2 [class.mem] para 19 in N4296:  &quot;In a standard-layout union with an active member (9.5) of struct type T1, it is permitted to read a non-static data member m of another union member of struct type T2 provided m is part of the common initial sequence of T1 and T2.&quot;"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1518623645, "post_id": 48790111, "comment_id": 84584392, "body": "@MartinBonner - but from your note follow that all members of <code>Big</code> have the same address (same as <code>h</code> address) - only in this case we can read <code>Hdr</code> via different members with same result. and address of some member is equal to union address itself (<i>The union is only as big as necessary to hold its largest data member</i>). so address of <code>h</code> is same as <code>Big</code> and <code>Little</code>. so we can reinterpret cast pointer"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 2, "creation_date": 1518626814, "post_id": 48790111, "comment_id": 84586664, "body": "RbMm : You are doing this wrong.  Where do you find the wording in the standard that if two objects have the same address then you can reinterpret cast the pointer?  Don&#39;t just think about a naive implementation of the compiler, but a heavily optimizing one which assumes your code invokes no undefined behaviour.  (The OP is not asking &quot;will it probably work&quot;, but &quot;<i>must</i> it work on any conforming compiler.)"}, {"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1518647271, "post_id": 48790111, "comment_id": 84597049, "body": "@MartinBonner - same address and same memory layout of members. this of course always will be work on all compilers. we reference the same binary data at the same address."}], "answers": [{"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 2, "creation_date": 1518631827, "post_id": 48790777, "comment_id": 84589387, "body": "In [basic.lval]/10.6 it is said that the a reference of type <code>Big2</code> or <code>Little</code> can be used to access an object of type <code>Big</code>, see my answer."}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": false, "score": 4, "last_activity_date": 1518622265, "creation_date": 1518622265, "answer_id": 48790777, "question_id": 48790111, "link": "https://stackoverflow.com/questions/48790111/reinterpreting-a-union-to-a-different-union/48790777#48790777", "title": "Reinterpreting a union to a different union", "body": "<p>I can find no wording in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"noreferrer\">n4296</a> (draft C++14 standard) which would make this legal.  What is more, I cannot <em>even</em> find any wording that given:</p>\n\n<pre><code>union Big2 {\n    Hdr h;\n\n    A a;\n    B b;\n    C c;\n    D d;\n    E e;\n    F f;\n};\n</code></pre>\n\n<p>we can <code>reinterpret_cast</code> a reference to <code>Big</code> into a reference to <code>Big2</code> and then use the reference.  (Note that <code>Big</code> and <code>Big2</code> are <em>layout-compatible</em>.)</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 6, "creation_date": 1518626476, "post_id": 48791206, "comment_id": 84586402, "body": "Where is the <code>Little</code> object here?  The actual object.  Pointer-interconvertible is about <i>objects</i>, not <i>types</i>."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 1, "creation_date": 1518626941, "post_id": 48791206, "comment_id": 84586764, "body": "I also think there&#39;s a confusion between classes and objects. Otherwise, using the same reasoning and that relation being reflexive (at least, the wording suggests it&#39;s reflexive), that would imply you could <code>reinterpret_cast</code> a <code>Little&amp;</code> into a <code>Big&amp;</code> (instead of the opposite) even if <code>Big</code> had stricter alignment requirements than <code>Little</code>."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1518626999, "post_id": 48791206, "comment_id": 84586807, "body": "@Yakk : I was going to ask what is the point of the last bullet?  The answer is that it allows to pointer interconvert from the base of the first member of the base to the outer object."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518627316, "post_id": 48791206, "comment_id": 84587029, "body": "Regarding my earlier comment, I meant &quot;symmetric&quot; instead of &quot;reflexive&quot;"}], "tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": false, "score": -1, "last_activity_date": 1518628888, "last_edit_date": 1518628888, "creation_date": 1518623582, "answer_id": 48791206, "question_id": 48790111, "link": "https://stackoverflow.com/questions/48790111/reinterpreting-a-union-to-a-different-union/48791206#48791206", "title": "Reinterpreting a union to a different union", "body": "<p>I'm not sure, if this really applies here. In the <a href=\"http://en.cppreference.com/w/cpp/language/reinterpret_cast#Notes\" rel=\"nofollow noreferrer\"><code>reinterpret_cast</code> - Notes</a> section they talk about pointer-interconvertible objects.</p>\n\n<p>And from <a href=\"http://eel.is/c++draft/basic#compound-4\" rel=\"nofollow noreferrer\">[basic.compound]/4</a>:</p>\n\n<blockquote>\n  <p>Two objects <em>a</em> and <em>b</em> are <em>pointer-interconvertible</em> if:</p>\n  \n  <ul>\n  <li>they are the same object, or</li>\n  <li>one is a union object and the other is a non-static data member of that object, or</li>\n  <li>one is a standard-layout class object and the other is the first non-static data member of that object, or, if the object has no non-static data members, the first base class subobject of that object, or</li>\n  <li>there exists an object <em>c</em> such that <em>a</em> and <em>c</em> are pointer-interconvertible, and <em>c</em> and <em>b</em> are pointer-interconvertible.</li>\n  </ul>\n  \n  <p>If two objects are pointer-interconvertible, then they have the same address, and it is possible to obtain a pointer to one from a pointer to the other via a <code>reinterpret_\u00adcast</code>.</p>\n</blockquote>\n\n<p>In this case, we have <code>Hdr h;</code> (c) as a non-static data member in both unions, which should allow to (because of the second and last bullet point)</p>\n\n<pre><code>Big* (a) -&gt; Hdr* (c) -&gt; Little* (b)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1518635422, "post_id": 48793659, "comment_id": 84591280, "body": "Why this would not be UB <code>delctype(std::declval&lt;Little&amp;&gt;().h) x;</code>? I do not believe that this statement imposes the need for the object to exist. Whatsoever the concept of existence is not defined but life time is."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1518635518, "post_id": 48793659, "comment_id": 84591333, "body": "@Oliv why is <code>1&#47;0</code> UB but not <code>decltype(1&#47;0)</code>?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1518636015, "post_id": 48793659, "comment_id": 84591597, "body": "The problem is the access to the value or the fact it is evaluated, not the expression in itself."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1518683964, "post_id": 48793659, "comment_id": 84608554, "body": "Your reading is too litteral. This paragraph of the standard just deffines the semantic. Not the evaluation (the meaning). <code>decltype</code> says to the compiler to just check the grammar, not the evaluability (the meaning). If the standard paragraph defining the semantic where interpreted litteraly as you do, to specify the evaluability, <code>decltype</code> would not be usefull, and probably that one can show that C++ program can not produce significant code."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1553187300, "post_id": 48793659, "comment_id": 97300861, "body": "In the absence of anything in the Standard that would imply otherwise, an access to a member of a standard-layout struct or union would be equivalent to forming the address of that member and then reading or writing the object in question from that address.  Other parts of the Standard may give a compiler permission to behave in some other fashion in cases where either the compiler writer judges that such behavior would benefit customers, or where the compiler writer values other things ahead of customers&#39; interests, but the behavior would not be &quot;undefined <i>by omission</i>&quot; in any case."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 2, "last_activity_date": 1518636867, "last_edit_date": 1518636867, "creation_date": 1518631787, "answer_id": 48793659, "question_id": 48790111, "link": "https://stackoverflow.com/questions/48790111/reinterpreting-a-union-to-a-different-union/48793659#48793659", "title": "Reinterpreting a union to a different union", "body": "<p>This is UB by omission. [expr.ref]/4.2:</p>\n\n<blockquote>\n  <p>If E2 is a non-static data member and the type of E1 is \u201c<code>cq1 vq1 X</code>\u201d,\n  and the type of E2 is \u201c<code>cq2 vq2 T</code>\u201d, the expression [<code>E1.E2</code>] designates the\n  named member of the object designated by the first expression.</p>\n</blockquote>\n\n<p>During the evaluation of the <code>given_b_or_c</code> call in <code>given_big</code>, the object expression in <code>little.h</code> does not actually designate a <code>Little</code> object, and ergo there's no such member. Because the standard \"omits any explicit definition of behavior\" for this case, the behavior is undefined.</p>\n"}, {"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1518684915, "post_id": 48793660, "comment_id": 84609079, "body": "In <code>laundry_pod</code> the expression <code>new (data) T;</code> just ends the lifetime of the object which was at <code>data</code>, which is the object refered by the parameter <code>Big const&amp; big</code> of the function <code>given_big</code>. This is realy bad, because any caller of the function <code>given_big</code> will not expect that the object passed as const parameter is terminated inside this function. Any use of this object after the call would be UB."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1518696653, "post_id": 48793660, "comment_id": 84616569, "body": "@oliv yes, that reference is invalidated.  It can be reinvigorated by laundering the pod <i>back</i>, so long as you get the (full) type correct, and there is no const or reference data members.  Notice I call <code>inplace_to_big</code> in my sample code; that revives the <code>Big</code> object there.  Exception safety not guaranteed."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 18, "last_activity_date": 1518699658, "last_edit_date": 1518699658, "creation_date": 1518631790, "answer_id": 48793660, "question_id": 48790111, "link": "https://stackoverflow.com/questions/48790111/reinterpreting-a-union-to-a-different-union/48793660#48793660", "title": "Reinterpreting a union to a different union", "body": "<p>To be able to take a pointer to A, and reinterpret it as a pointer to B, they must be <em>pointer-interconvertible</em>.</p>\n\n<p>Pointer-interconvertible is about <em>objects</em>, not <em>types of objects</em>.</p>\n\n<p>In C++, there are objects at places.  If you have a <code>Big</code> at a particular spot with at least one member existing, there is also a <code>Hdr</code> at that same spot due to pointer interconvertability.</p>\n\n<p>However there is no <code>Little</code> object at that spot.  If there is no <code>Little</code> object there, it cannot be pointer-interconvertible with a <code>Little</code> object that isn't there.</p>\n\n<p>They appear to be <em>layout-compatible</em>, assuming they are flat data (plain old data, trivially copyable, etc).</p>\n\n<p>This means you can copy their <em>byte representation</em> and it works.  In fact, optimizers seem to understand that a memcpy to a stack local buffer, a placement new (with trivial constructor), then a memcpy back is actually a noop.</p>\n\n<pre><code>template&lt;class T&gt;\nT* laundry_pod( void* data ) {\n  static_assert( std::is_pod&lt;Data&gt;{}, \"POD only\" ); // could be relaxed a bit\n  char buff[sizeof(T)];\n  std::memcpy( buff, data, sizeof(T) );\n  T* r = ::new( data ) T;\n  std::memcpy( data, buff, sizeof(T) );\n  return r;\n}\n</code></pre>\n\n<p>the above function is a noop at runtime (in an optimized build), yet it converts T-layout-compatible data at <code>data</code> to an actual <code>T</code>.</p>\n\n<p>So, if I am right and <code>Big</code> and <code>Little</code> are layout-compatible when <code>Big</code> is a subtype of the types in <code>Little</code>, you can do this:</p>\n\n<pre><code>Little* inplace_to_little( Big* big ) {\n  return laundry_pod&lt;Little&gt;(big);\n}\nBig* inplace_to_big( Little* big ) {\n  return laundry_pod&lt;Big&gt;(big);\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>void given_big(Big&amp; big) { // cannot be const\n  switch(big.h.type) {\n  case B::type: // fallthrough\n  case C::type:\n    auto* little = inplace_to_little(&amp;big); // replace Big object with Little inplace\n    given_b_or_c(*little); \n    inplace_to_big(little); // revive Big object.  Old references are valid, barring const data or inheritance\n    break;\n  // ... other cases here ...\n  }\n}\n</code></pre>\n\n<p>if <code>Big</code> has non-flat data (like references or <code>const</code> data), the above breaks horribly.</p>\n\n<p>Note that <code>laundry_pod</code> doesn't do any memory allocation; it uses placement new that constructs a <code>T</code> in the place where <code>data</code> points using the bytes at <code>data</code>.  And while it looks like it is doing lots of stuff (copying memory around), it optimizes to a noop.</p>\n\n<hr>\n\n<p><a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> has a concept of \"an object exists\".  The existence of an object has almost nothing to do with what bits or bytes are written in the physical or abstract machine.  There is no instruction on your binary that corresponds to \"now an object exists\".</p>\n\n<p>But the language has this concept.</p>\n\n<p>Objects that don't exist cannot be interacted with.  If you do so, the C++ standard does not define the behavior of your program.</p>\n\n<p>This permits the optimizer to make assumptions about what your code does and what it doesn't do and which branches cannot be reached and which can be reached.  It lets the compiler make no-aliasing assumptions; modifying data through a pointer or reference to A <em>cannot</em> change data reached through a pointer or reference to B unless somehow both A and B exist in the same spot.</p>\n\n<p>The compiler can prove that <code>Big</code> and <code>Little</code> objects cannot both exist in the same spot.  So no modification of any data through a pointer or reference to <code>Little</code> could modify anything existing in a variable of type <code>Big</code>.  And vice versa.</p>\n\n<p>Imagine if <code>given_b_or_c</code> modifies a field.  Well the compiler could inline <code>given_big</code> and <code>given_b_or_c</code> and <code>use_a_b</code>, notice that no instance of <code>Big</code> is modified (just an instance of <code>Little</code>), and prove that fields of data from <code>Big</code> it cached prior to calling your code could not be modified.</p>\n\n<p>This saves it a load instruction, and the optimizer is quite happy.  But now you have code that reads:</p>\n\n<pre><code>Big b = whatever;\nb.foo = 7;\n((Little&amp;)b).foo = 4;\nif (b.foo!=4) exit(-1);\n</code></pre>\n\n<p>that is optimzied to</p>\n\n<pre><code>Big b = whatever;\nb.foo = 7;\n((Little&amp;)b).foo = 4;\nexit(-1);\n</code></pre>\n\n<p>because it can prove that <code>b.foo</code> must be <code>7</code> it was set once and never modified.  The access through <code>Little</code> could not modify the <code>Big</code> due to aliasing rules.</p>\n\n<p>Now do this:</p>\n\n<pre><code>Big b = whatever;\nb.foo = 7;\n(*laundry_pod&lt;Little&gt;(&amp;b)).foo = 4;\nBig&amp; b2 = *laundry_pod&lt;Big&gt;(&amp;b);\nif (b2.foo!=4) exit(-1);\n</code></pre>\n\n<p>and it the assume that the big there was unchanged, because there is a memcpy and a <code>::new</code> that could legally change the state of the data.  No strict aliasing violation.</p>\n\n<p>It can still follow the <code>memcpy</code> and eliminate it.</p>\n\n<p><a href=\"https://godbolt.org/g/QZAk7S\" rel=\"nofollow noreferrer\">Live example</a> of <code>laundry_pod</code> being optimized away.  Note that if it wasn't optimized away, the code would have to have a conditional and a printf.  But because it was, it was optimized into the empty program.</p>\n"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 8, "answer_count": 4, "score": 35, "last_activity_date": 1518699658, "creation_date": 1518620142, "question_id": 48790111, "link": "https://stackoverflow.com/questions/48790111/reinterpreting-a-union-to-a-different-union", "title": "Reinterpreting a union to a different union", "body": "<p>I have a standard-layout union that has a whole bunch of types in it:</p>\n\n<pre><code>union Big {\n    Hdr h;\n\n    A a;\n    B b;\n    C c;\n    D d;\n    E e;\n    F f;\n};\n</code></pre>\n\n<p>Each of the types <code>A</code> thru <code>F</code> is standard-layout and has as its first member an object of type <code>Hdr</code>. The <code>Hdr</code> identifies what the active member of the union is, so this is variant-like. Now, I'm in a situation where I know for certain (because I checked) that the active member is either a <code>B</code> or a <code>C</code>. Effectively, I've reduced the space to:</p>\n\n<pre><code>union Little {\n    Hdr h;\n\n    B b;\n    C c;\n};\n</code></pre>\n\n<p>Now, is the following well-defined or undefined behavior?</p>\n\n<pre><code>void given_big(Big const&amp; big) {\n    switch(big.h.type) {\n    case B::type: // fallthrough\n    case C::type:\n        given_b_or_c(reinterpret_cast&lt;Little const&amp;&gt;(big));\n        break;\n    // ... other cases here ...\n    }\n}\n\nvoid given_b_or_c(Little const&amp; little) {\n    if (little.h.type == B::type) {\n        use_a_b(little.b);\n    } else {\n        use_a_c(little.c);\n    }\n}\n</code></pre>\n\n<p>The goal of <code>Little</code> is to effectively serve as documentation, that I've already checked that it's a <code>B</code> or <code>C</code> so in the future nobody adds code to check that it's an <code>A</code> or something. </p>\n\n<p>Is the fact that I am reading the <code>B</code> subobject as a <code>B</code> enough to make this well-formed? Can the common initial sequence rule meaningfully be used here?</p>\n"}, {"tags": ["c++", "class", "namespaces", "forward-declaration"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518620529, "post_id": 48790086, "comment_id": 84582337, "body": "imho forward-declarations are already a code-smell, but playing tricks just to make it even less obvious what a header depends on is really bad"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1518620651, "post_id": 48790086, "comment_id": 84582426, "body": "@user463035818 Forward declarations can be extremely powerful in reducing compile time for large projects. It can be used to limit how much needs to be recompiled when changing a header."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1518620963, "post_id": 48790086, "comment_id": 84582634, "body": "@user463035818: <i>Not</i> having forward declarations is the code smell."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518621050, "post_id": 48790086, "comment_id": 84582681, "body": "Not really sure how to answer this question. We can discuss the different kinds of lookup and the constraints of each one. We can discuss whether you can forward declare with an elaborated type specifier, but you&#39;ve already done that in the question. So what are you after here, really?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518621167, "post_id": 48790086, "comment_id": 84582765, "body": "@Lightness Races in Orbit  1), Is this inadvisable instead of forward declarations? 2) Out of curiosity is there a way to do this with namespaces?"}, {"owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518621284, "post_id": 48790086, "comment_id": 84582834, "body": "@Lightness Races in Orbit, basically because I&#39;ve only ever used forward declarations, this is new to me and don&#39;t know if some time in the future doing it this newly discovered way will end up failing for some cases. I already know I can&#39;t do it where the type needs to be a &quot;complete type&quot;, you know, but I&#39;m not sure if it&#39;s safe."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518621497, "post_id": 48790086, "comment_id": 84582990, "body": "1 is mostly subjective and thus off-topic (could try garnering opinion in a chatroom though); I can&#39;t think of a serious <i>objective</i> reason not to do it this way, except that you will run into 2, the answer to which is &quot;no&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518621566, "post_id": 48790086, "comment_id": 84583039, "body": "Personally I think having to sprinkle the keyword everywhere is really ugly."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1518632894, "post_id": 48790086, "comment_id": 84589946, "body": "<i>&quot;if I specify a struct inside a struct it simply expects any struct by that name&quot;</i> - Try putting the outer class in some custom namespace. Then ponder how there&#39;s a global namespace, and finally it will start making sense."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1518621715, "creation_date": 1518621715, "answer_id": 48790600, "question_id": 48790086, "link": "https://stackoverflow.com/questions/48790086/can-i-avoid-forward-declarations-by-specifying-struct-or-class/48790600#48790600", "title": "Can I avoid forward declarations by specifying struct or class", "body": "<p>An elaborated type specifier declares the class just like a separate declaration does. There is no technical reason to avoid declaring a class with an elaborate type specifier - they are part of the language, their use is well defined and they are not deprecated.</p>\n\n<p>Of course, one has to be aware - as you are - that the elaborated type specifier declares the class into the current namespace, and if that is not desired then the class has to be declared separately outside of current namespace. There's no trick to avoid that that that I'm aware of. As such, not all forward declarations can be done using elaborated type specifiers.</p>\n\n<p>For cases that can be implemented either with a separate declaration, or an elaborated type specifier, the choice between one over the other is a matter of personal preference.</p>\n"}], "owner": {"reputation": 8834, "user_id": 4696802, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/AkVoc.jpg?s=128&g=1", "display_name": "Zebrafish", "link": "https://stackoverflow.com/users/4696802/zebrafish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 48790600, "answer_count": 1, "score": 0, "last_activity_date": 1518621715, "creation_date": 1518620073, "question_id": 48790086, "link": "https://stackoverflow.com/questions/48790086/can-i-avoid-forward-declarations-by-specifying-struct-or-class", "title": "Can I avoid forward declarations by specifying struct or class", "body": "<p>Up until now I thought that you had to forward declare types before using them in class definitions until I found out about elaborated type specifier. So instead of forward declaring everything like:</p>\n\n<pre><code>struct Banana;\nstruct Apple;\nstruct Kiwi;\nstruct Orange;\nstruct Mango;\nstruct Lemon;\nstruct Plum;\n</code></pre>\n\n<p>I can do:</p>\n\n<pre><code>struct FruitStuff\n{\n    struct Banana* banana;\n    struct Apple returnApple();\n    void eatKiwi(const struct Kiwi&amp; kiwi);\n    void peelOrange(struct Orange orange);\n    std::vector&lt;struct Mango&gt; mangos;\n    static struct Lemon* lemons[10];\n    void pickPlum(const struct Plum *const plum);\n};\n</code></pre>\n\n<p>Define these in the appropriate cpp or whatever, and not have to forward declare anything. I think I prefer this way, but is this inadvisable or a bad idea in any way?</p>\n\n<p>Also, I've noticed this trick doesn't work for namespaces, because:</p>\n\n<pre><code>namespace FruitNamespace\n{\n    void pickPlum(struct Plum * plum) {}; // The compiler thinks that the Plum argument \n                                           // here is FruitStuff::Plum*\n}\n// so\nstruct Plum {int a;}\n\nint main()\n{\n    Plum plum;\n    FruitNamespace::pickPlum(&amp;plum); // argument of type \"Plum *\" is incompatible\n                                     // with parameter of type \"FruitNamespace::Plum *\" \n\n}\n</code></pre>\n\n<p>It's funny how if I specify a struct inside a struct it simply expects any struct by that name, but in a namespace it expects a struct within that namespace. It's not important, but out of curiosity I'm wondering if there's a way around this.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1518619967, "post_id": 48789981, "comment_id": 84581930, "body": "Before you can define a specialization, you need to at least declare the primary template. Otherwise there&#39;s nothing to specialize."}, {"owner": {"reputation": 944, "user_id": 1701840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a57516ac828923c839742c2a804d7762?s=128&d=identicon&r=PG", "display_name": "user1701840", "link": "https://stackoverflow.com/users/1701840/user1701840"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1518620033, "post_id": 48789981, "comment_id": 84581977, "body": "is this the same for full specialization?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1518620123, "post_id": 48789981, "comment_id": 84582033, "body": "Yes it is. You can try it and see for yourself."}], "answers": [{"tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": true, "score": 1, "last_activity_date": 1518623653, "last_edit_date": 1518623653, "creation_date": 1518620102, "answer_id": 48790096, "question_id": 48789981, "link": "https://stackoverflow.com/questions/48789981/trying-to-put-partial-in-different-header/48790096#48790096", "title": "Trying to put partial in different header", "body": "<p>This is because </p>\n\n<pre><code>template&lt;typename T&gt;\nstruct IsBar&lt;Bar&lt;T&gt;&gt; {\n    static const bool value = true;\n};\n</code></pre>\n\n<p>is a <a href=\"http://en.cppreference.com/w/cpp/language/templates\" rel=\"nofollow noreferrer\">template specialization</a> of the template <code>IsBar&lt;U&gt;</code> for <code>U</code>=<code>Bar&lt;T&gt;</code>. In order to specialize a <code>template</code>, you must first declare the general un-specialized template.</p>\n\n<p>Moreover, for this to work properly (for example in SFINAE), you want the general version to contain the <code>value=false</code>:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct IsBar\n: std::integral_constant&lt;bool,false&gt;\n{};\n\ntemplate&lt;typename T&gt;\nstruct IsBar&lt;Bar&lt;T&gt;&gt;\n: std::integral_constant&lt;bool,true&gt;\n{};\n</code></pre>\n\n<p>As this functionality is closely related to <code>struct Bar&lt;&gt;</code>, it should be defined within the same header file as <code>struct Bar&lt;&gt;</code>, i.e. bar.h in your case.</p>\n"}], "owner": {"reputation": 944, "user_id": 1701840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a57516ac828923c839742c2a804d7762?s=128&d=identicon&r=PG", "display_name": "user1701840", "link": "https://stackoverflow.com/users/1701840/user1701840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 48790096, "answer_count": 1, "score": 0, "last_activity_date": 1518623653, "creation_date": 1518619760, "question_id": 48789981, "link": "https://stackoverflow.com/questions/48789981/trying-to-put-partial-in-different-header", "title": "Trying to put partial in different header", "body": "<p>I have the following program working fine. But once I get rid of the forward declaration of the primary specialization in bar.h. I got compilation error saying the specialization is not a class template. Why?</p>\n\n<pre><code>bar.h:\ntemplate&lt;typename T&gt;\nstruct Bar{\n    void bar()\n    {\n        std::cout&lt;&lt; \"bar\" &lt;&lt; std::endl;\n    };\n};\n\n//template&lt;typename T&gt; // Looks like I need to forward declare this in order to have it compile and work, why?\n//struct IsBar;\n\ntemplate&lt;typename T&gt;\nstruct IsBar&lt;Bar&lt;T&gt;&gt; {\n    static const bool value = true;\n};\n\nmain.cpp:\n#include \"bar.h\"\n\nstruct Raw{\n};\ntemplate&lt;typename T&gt;\nstruct IsBar{\n    static const bool value = false;\n};\n\ntemplate&lt;typename Obj, bool&gt;\nstruct function{\n    static void callbar(Obj obj){ \n        obj.bar();\n    }; \n};\n\ntemplate&lt;typename Obj&gt;\nstruct function&lt;Obj, false&gt;{\n    static void callbar(Obj obj){ \n        std::cout&lt;&lt; \"no bar()\" &lt;&lt; std::endl;\n    }; \n};\n\nint main()\n{\n    typedef Bar&lt;Raw&gt; Obj;\n    Obj obj;\n\n    function&lt;Obj, IsBar&lt;Obj&gt;::value&gt; f;\n    f.callbar(obj); \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 5, "creation_date": 1518619761, "post_id": 48789963, "comment_id": 84581767, "body": "first choose a language, second use <code>std::string</code> if you chose c++"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518619977, "post_id": 48789963, "comment_id": 84581932, "body": "I&#39;m assuming @user463035818 meant that you should choose a programming language. c and c++ are very different languages, despite the apparent similarities. I don&#39;t think he meant you should choose a single speaking language. Since the question is about multilingual support, I thought it might be important to make that distinction."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518620105, "post_id": 48789963, "comment_id": 84582026, "body": "... uff yes of course, missed that possible misunderstanding. I appreciate your efforts to support multiple languages, but when it comes to code you better pick one programming lanuage"}, {"owner": {"reputation": 308, "user_id": 8945252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd86e72a7d12c9b1a15e47da7e864bf2?s=128&d=identicon&r=PG&f=1", "display_name": "Light", "link": "https://stackoverflow.com/users/8945252/light"}, "edited": false, "score": 0, "creation_date": 1518620644, "post_id": 48789963, "comment_id": 84582424, "body": "It may be simpler to use a std::vector&lt;std::string&gt;&gt; then when you will need to access the data the only thing changing is the vector. (each vector corresponding to a language)"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518710525, "post_id": 48789963, "comment_id": 84626250, "body": "Thanks for the comments, I am working on code that was written by someone else so I am tied down to using the char strings &amp; char string pointers, the char strings and their pointers, as well as some other arrays of pointers to those pointers are tied into the code in so many places (classes, methods, display/printing functions etc) that I cannot change how this works. I am simply trying to use what is there and implement the example above. Has anyone any idea on how I attack my issues with the idea above?, how to declare the langPtrs array correctly and how to write my single statement above?"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1518625240, "post_id": 48790152, "comment_id": 84585543, "body": "If C++, and you really want the pointers to refer to string literals directly, then you&#39;re going to have to put <code>const</code> in there. Probably not a terrible idea in C, either?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1518625459, "post_id": 48790152, "comment_id": 84585686, "body": "@LightnessRacesinOrbit Good catch.  Fixed."}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 0, "creation_date": 1518679507, "post_id": 48790152, "comment_id": 84606246, "body": "Nice. However I tend to start such kind of enums like this: <code>enum langs {INVALID_LANGUAGE = -1,      LANG_ENGLISH, ...</code>"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518710427, "post_id": 48790152, "comment_id": 84626174, "body": "Hi dbush , Thanks for the comment, I am actually already using enums for the indexs as you suggested in a lot of other places in my code, love the idea of the 2D array, it was actually something I was going to look into as the start and it completely slipped my mind, also thank you for the sample code I will 100% try to use implement it . My main issue is that I am working on code that was written by someone else so I am tied down to using the char strings and char string pointers, the char strings and their pointers, as well as some other arrays of pointers to those pointers (1 of 2)"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518710432, "post_id": 48790152, "comment_id": 84626179, "body": "are tied into the code in so many places (classes, methods, display/printing functions etc) that it would be a nightmare to change how this works (although I will definitely try after reading your answer). In case I cannot manage to change the code due to the large amount of dependencies on how the strings are currently stored would you have any idea on how I attack my issues with my idea above?, how to declare the langPtrs array correctly and how to write my single statement above? (2 of 2)"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518710640, "post_id": 48790152, "comment_id": 84626341, "body": "@user1649972 You can keep the format of 2D array, but instead of string constants you would put the names of each specific string, i.e. <code>const char *langPtrs[NUMBER_OF_LANGS][NUMBER_OF_STRINGS]= { { helloAr, timeAr, dogAr }, { helloArFr, timeArFr, dogArFr } };</code>"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518822861, "post_id": 48790152, "comment_id": 84677144, "body": "@dbush, thanks again. The printing is already handled elsewhere in various screen/menu/display classes so I don\u2019t want to change that. Those classes use the pointers to the char arrays (char* helloPtr etc.) to print so my plan is to simply point the char pointers to the character arrays of the newly selected language.  That way all the classes, methods etc. operate in the same way using the contents of the character pointers, but the character pointers now simply point at different arrays (the character arrays of the newly language selected). (1 of 3)"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518822872, "post_id": 48790152, "comment_id": 84677147, "body": "If I create a 2D array as you suggested  i.e.  <code>const char *langPtrs[NUMBER_OF_LANGS][NUMBER_OF_STRINGS]= { { helloAr, timeAr, dogAr }, { helloArFr, timeArFr, dogArFr } }; </code> I will still have the old char pointers and still need to point these char pointers (char* helloPtr etc.) to the arrays stored in my new 2D array based on the language selected. To do this I will need all my original char pointers in an array so that I can reference them in a for loop using an index. (2 of 3)"}, {"owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518822883, "post_id": 48790152, "comment_id": 84677148, "body": "So again I need help to understand how to correctly write this so that my for loop assigns the address of the char array in my 2D array to the char pointer in my array of character pointers to character pointers. Would below work? <code>char ** usedInClassesPtrs[NUMBER_OF_CHAR_POINTERS]= {     helloPtr,     timePtr,     dogPtr, };</code> And then write <code>for(i = 0; i&lt;NUMBER_OF_CHAR_POINTERS; i++) {     usedInClassesPtrs [i]= charArrAddresses [selectedLang][i]; }</code> (3 of 3)"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "reply_to_user": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "edited": false, "score": 0, "creation_date": 1518897742, "post_id": 48790152, "comment_id": 84694979, "body": "@user1649972 See my edit.  It should address what you&#39;re looking to do."}], "tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 9, "last_activity_date": 1518897719, "last_edit_date": 1518897719, "creation_date": 1518620286, "answer_id": 48790152, "question_id": 48789963, "link": "https://stackoverflow.com/questions/48789963/array-of-pointers-to-pointers-managing-strings-for-different-languages/48790152#48790152", "title": "Array of pointers to pointers: managing strings for different languages", "body": "<p>Rather than placing the strings for all languages in a single array, make a 2D array of strings and languages.  If you don't plan on modifying any of these strings, you can make them string literals instead of arrays.</p>\n\n<pre><code>enum langs {\n    LANG_ENGLISH,\n    LANG_FRENCH,\n    NUMBER_OF_LANGS\n};\n\nenum strings{\n    STR_HELLO,\n    STR_TIME,\n    STR_DOG,\n    NUMBER_OF_STRINGS\n};\n\nconst char *langPtrs[NUMBER_OF_LANGS][NUMBER_OF_STRINGS]=\n{\n    { \"Hello\", \"Time\", \"Dog\" }\n    { \"Bonjour\", \"temps\", \"chien\" }\n};\n</code></pre>\n\n<p>Since the values of the symbols in an <code>enum</code> start at 0 and increment by 1 for each subsequent symbol, you can use them an array indexes.  The last member of each <code>enum</code>, which does not correspond to an actual element in the array, can be used as the size of the array.</p>\n\n<p>So if you want to, for example, print the string for \"time\" in French, you would use:</p>\n\n<pre><code>printf(\"%s\\n\", langPtrs[LANG_FRENCH][STR_TIME]);\n</code></pre>\n\n<p>If you want to always print string from whatever the \"current\" language is, you can create a pointer to the subarray for the current language:</p>\n\n<pre><code>const char **currentLang = langPtrs[LANG_FRENCH];\n</code></pre>\n\n<p>Then you can use that:</p>\n\n<pre><code>printf(\"%s\\n\", currentLang[STR_TIME]);\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>If you want to keep <code>helloPtr</code>, <code>timePtr</code>, and <code>dogPtr</code>, and you want to set them based on the current language, you can put their addresses in another array:</p>\n\n<pre><code>const char **usedInClassesPtrs[NUMBER_OF_STRINGS] = {\n    &amp;helloPtr,\n    &amp;timePtr,\n    &amp;dogPtr\n}\n</code></pre>\n\n<p>Then loop through the array, dereferencing each element to give you the actual pointers you want to change, and assign them a string from the 2D language array based on the current language as follows:</p>\n\n<pre><code>for (i=0; i&lt;NUMBER_OF_STRINGS; i++) {\n    *usedInClassesPtrs[i] = langPtrs[currentLang][i];\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6624534, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5dLyK3Q_f70/AAAAAAAAAAI/AAAAAAAAAMQ/IsLEiGgGS-4/photo.jpg?sz=128", "display_name": "Arman Imani", "link": "https://stackoverflow.com/users/6624534/arman-imani"}, "is_accepted": false, "score": 0, "last_activity_date": 1518624760, "creation_date": 1518624760, "answer_id": 48791607, "question_id": 48789963, "link": "https://stackoverflow.com/questions/48789963/array-of-pointers-to-pointers-managing-strings-for-different-languages/48791607#48791607", "title": "Array of pointers to pointers: managing strings for different languages", "body": "<p>The @debush answer should work quite well. \nFrom your example i assume that only 1 language is active at a time in your code. For that, i suggest to use a resource approach to manage your multi-language support. You can basically load the corresponding resource file of a language and store it in <code>std::vector&lt;std::string&gt;</code>, <code>std::map&lt;const enum/id/etc., std::string&gt;</code> or any similar data structure. This can be done either on the fly or at initialization stage depending on your need. In your code you save a pointer to this data structure <code>std::vector&lt;std::string&gt;* ptr</code> to refer to currently loaded language by invoking <code>(*ptr)[index]</code>.  </p>\n"}], "owner": {"reputation": 359, "user_id": 1649972, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c73d3d11edb3caaa260a408af949d6c7?s=128&d=identicon&r=PG", "display_name": "user1649972", "link": "https://stackoverflow.com/users/1649972/user1649972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1518897719, "creation_date": 1518619696, "last_edit_date": 1518626027, "question_id": 48789963, "link": "https://stackoverflow.com/questions/48789963/array-of-pointers-to-pointers-managing-strings-for-different-languages", "title": "Array of pointers to pointers: managing strings for different languages", "body": "<p>I currently have a lot of character arrays that store simple character strings in English for display. I also have pointers to these character arrays.</p>\n\n<pre><code>char helloAr[20] = \"Hello\";\nchar timeAr[20] = \"Time\";\nchar dogAr[20] = \"Dog\";\n\nchar* helloPtr = helloAr;\nchar* timePtr = timeAr;\nchar* dogPtr = dogAr;\n</code></pre>\n\n<p>I am adding more character arrays in a different language, French to begin with. </p>\n\n<pre><code>char helloArFr[20] = \"Bonjour\";\nchar timeArFr[20] = \"temps\";\nchar dogArFr[20] = \"chien\";\n</code></pre>\n\n<p>If the user selects French I plan to change the address that all my pointers (currently pointing at the English character arrays) point to, so they now point to the French character arrays. I assume I can simply assign a new values to these pointers to do this,</p>\n\n<pre><code>helloPtr = helloArFr;\ntimePtr = timeArFr;\ndogPtr = dogArFr; \n</code></pre>\n\n<p>however my actual code will have a lot of arrays so I wanted to use a loop to do this rather than lots of statements like the one above.   </p>\n\n<p>To do this I plan to create an array of character pointers to the addresses of my character arrays.</p>\n\n<pre><code>char* charArrAddresses [NUMBER_OF_TEXT_ARRAYS]=\n{\n    &amp;helloAr,\n    &amp;timeAr,\n    &amp;dogAr,\n    &amp;helloArFr,\n    &amp;timeArFr,\n    &amp;dogArFr,\n};\n</code></pre>\n\n<p>I also plan to store all the pointers in an array so that I can reference them by their location in the array in my single statement, but this is where I need some help as I am unsure on how to do this. Something like this maybe?</p>\n\n<pre><code>char ** langPtrs[NUMBER_OF_LANG_POINTERS]=\n{\n    helloPtr,\n    timePtr,\n    dogPtr,\n};\n</code></pre>\n\n<p>In the single statement inside the loop I will use the selected language and the number of char arrays to calculate the correct index for <code>charArrAddresses</code>, lets call this <code>X</code> for now. I will use the value of my loop (say <code>i</code>) to index my <code>langPtrs</code> array.  So in my single want to say something like, </p>\n\n<pre><code>for(i = 0; i&lt;NUMBER_OF_LANG_POINTERS; i++)\n{\n    langPtrs[i]= charArrAddresses[X];\n}\n</code></pre>\n\n<p>I am trying to assign the address of the character array stored in index <code>X</code> of <code>charArrAddresses</code> to the pointer in index <code>i</code> in the <code>langPtrs</code> array. I just need help on exactly how to declare the <code>langPtrs</code> array and on how to write my single statement above.</p>\n"}, {"tags": ["c++", "boost", "locale", "utf", "utf-32"], "answers": [{"comments": [{"owner": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518622597, "post_id": 48790843, "comment_id": 84583691, "body": "Now I am getting linker error <code>Undefined symbols for architecture x86_64:   &quot;boost::locale::boundary::boundary_indexing&lt;char32_t&gt;::id&quot;, referenced</code>. I have locale added in <code>FIND_PACKAGE(Boost COMPONENTS filesystem regex locale REQUIRED)</code>"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "reply_to_user": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518622698, "post_id": 48790843, "comment_id": 84583751, "body": "@NeelBasu define is not enough, you have to compile it with the define"}, {"owner": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518622738, "post_id": 48790843, "comment_id": 84583781, "body": "But I installed it through brew. How can I reinstall it with brew with utf32 support ?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518623399, "post_id": 48790843, "comment_id": 84584225, "body": "@NeelBasu That&#39;s a new question. Likely, more on-topic on another site"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1518624136, "post_id": 48790843, "comment_id": 84584705, "body": "Not sure but you could try to export the define to <code>cxxflags=-DBOOST_LOCALE_ENABLE_CHAR32_T</code> before installing boost. Or maybe you&#39;ll need to modify the Boost.rb and add the define to <code>args &lt;&lt; &quot;cxxflags=</code>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1518626925, "post_id": 48790843, "comment_id": 84586752, "body": "It&#39;s a command line option, as the documentation says. But, as I report in the comments on my answer, it is truly experimental, which is reflected in the fact that it doesn&#39;t actually build on distro standard versions of the standard library. I don&#39;t think <code>Boost.rb</code> is ever to be modified, unless that is a new feature replacing the user/project configs"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1518629498, "post_id": 48790843, "comment_id": 84588227, "body": "@sehe i have no experience with <i>brew</i>, i also wouldn&#39;t modify it."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1518634049, "post_id": 48790843, "comment_id": 84590530, "body": "Oh aha. The .rb is part of Brew. That explains that I didn&#39;t recognize it. No, obviously you shouldn&#39;t hack that (unless you want to make your own Brew packages). Regardless, chances are that the support is not going to compile on the platform"}], "tags": [], "owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "is_accepted": true, "score": 1, "last_activity_date": 1518625138, "last_edit_date": 1518625138, "creation_date": 1518622452, "answer_id": 48790843, "question_id": 48789953, "link": "https://stackoverflow.com/questions/48789953/boost-locale-incomplete-type-boundary-indexingchar32-t/48790843#48790843", "title": "boost locale incomplete type boundary_indexing&lt;char32_t&gt;", "body": "<p>You need to compile boost with <code>BOOST_LOCALE_ENABLE_CHAR32_T</code> to include the <code>boundary_indexing&lt;char32_t&gt;</code> but ...</p>\n\n<blockquote>\n  <h3><a href=\"http://www.boost.org/doc/libs/1_66_0/libs/locale/doc/html/status_of_cpp0x_characters_support.html\" rel=\"nofollow noreferrer\">Status of C++11 char16_t/char32_t support</a></h3>\n  \n  <p>The support of C++11 <code>char16_t</code> and <code>char32_t</code> is experimental, <strong><em>mostly does not work and not intended to be used in production</em></strong> with current latest compilers: GCC-4.5, MSVC10 till major compiler's flaws would be fixed.</p>\n  \n  <p>[....]</p>\n  \n  <p>If you want to build or test Boost.Locale with C++11 char16_t and char32_t support you should pass <code>cxxflags=\"-DBOOST_LOCALE_ENABLE_CHAR32_T -DBOOST_LOCALE_ENABLE_CHAR16_T\"</code> to b2 during build and define <code>BOOST_LOCALE_ENABLE_CHAR32_T</code> and <code>BOOST_LOCALE_ENABLE_CHAR32_T</code> when using Boost.Locale </p>\n</blockquote>\n\n<p>[emphasis mine]</p>\n\n<p><a href=\"http://www.boost.org/doc/libs/1_66_0/libs/locale/doc/html/facets_8hpp_source.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_66_0/libs/locale/doc/html/facets_8hpp_source.html</a></p>\n\n<pre><code>#ifdef BOOST_LOCALE_ENABLE_CHAR32_T\ntemplate&lt;&gt;\nclass BOOST_LOCALE_DECL boundary_indexing&lt;char32_t&gt; : public std::locale::facet {\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518622587, "post_id": 48790846, "comment_id": 84583680, "body": "Now I am getting linker Error <code>Undefined symbols for architecture x86_64:   &quot;boost::locale::boundary::boundary_indexing&lt;char32_t&gt;::id&quot;, referenced</code> But In my CMakeLists.txt file I have <code>FIND_PACKAGE(Boost COMPONENTS filesystem regex locale REQUIRED)</code>. locale is there."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518623193, "post_id": 48790846, "comment_id": 84584076, "body": "Didn&#39;t I just put that in my answer? The library <i>needs</i> to be built with those flags."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518625022, "post_id": 48790846, "comment_id": 84585389, "body": "Headsup: on my box the standard library support for char32_t (most likely locale facets) is not sufficient to build the experimental support (that&#39;s Ubuntu 16.04 with gcc 5.x or gcc 7.x with and the corresponding libstdc++ (also with Clang5)). E.g.: <a href=\"https://paste.ubuntu.com/p/MpW5jwcfPh/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/p/MpW5jwcfPh</a>"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "edited": false, "score": 0, "creation_date": 1518625805, "post_id": 48790846, "comment_id": 84585974, "body": "Just encountered the same on Ubuntu 18.04 (gcc 7.3, <a href=\"https://paste.ubuntu.com/p/6TmyHwHNNh/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/p/6TmyHwHNNh</a>)"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1518622459, "creation_date": 1518622459, "answer_id": 48790846, "question_id": 48789953, "link": "https://stackoverflow.com/questions/48789953/boost-locale-incomplete-type-boundary-indexingchar32-t/48790846#48790846", "title": "boost locale incomplete type boundary_indexing&lt;char32_t&gt;", "body": "<blockquote>\n  <p>It complains invalid use of incomplete type \u2018const class boost::locale::boundary::boundary_indexing\u2019 What's wrong?</p>\n</blockquote>\n\n<p><code>char32_t</code> is not supported. Use</p>\n\n<pre><code>#define BOOST_LOCALE_ENABLE_CHAR32_T\n</code></pre>\n\n<p>But you need to <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/locale/doc/html/index.html\" rel=\"nofollow noreferrer\">enable it</a> during building the library, as well:</p>\n\n<blockquote>\n  <p>Experimental support for C++0x char16_t and char32_t strings and streams.</p>\n</blockquote>\n\n<p>Further looking: <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/locale/doc/html/status_of_cpp0x_characters_support.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_64_0/libs/locale/doc/html/status_of_cpp0x_characters_support.html</a></p>\n\n<blockquote>\n  <p>If you want to build or test Boost.Locale with C++11 char16_t and char32_t support you should pass cxxflags=\"-DBOOST_LOCALE_ENABLE_CHAR32_T -DBOOST_LOCALE_ENABLE_CHAR16_T\" to b2 during build and define BOOST_LOCALE_ENABLE_CHAR32_T and BOOST_LOCALE_ENABLE_CHAR32_T when using Boost.Locale</p>\n</blockquote>\n"}], "owner": {"reputation": 11788, "user_id": 256007, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c87544eaefca8d34fa7373a4b98b6a03?s=128&d=identicon&r=PG", "display_name": "Neel Basu", "link": "https://stackoverflow.com/users/256007/neel-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 48790843, "answer_count": 2, "score": 1, "last_activity_date": 1518625138, "creation_date": 1518619665, "question_id": 48789953, "link": "https://stackoverflow.com/questions/48789953/boost-locale-incomplete-type-boundary-indexingchar32-t", "title": "boost locale incomplete type boundary_indexing&lt;char32_t&gt;", "body": "<p>I am first converting an utf-8 string to utf-32 and then I want unique words to be mapped with their positions. I started with boost locale.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;chrono&gt;\n#include &lt;boost/shared_ptr.hpp&gt;\n#include &lt;map&gt;\n#include &lt;list&gt;\n#include &lt;boost/locale.hpp&gt;\n\ntypedef std::u32string string_type;\ntypedef std::pair&lt;unsigned long, unsigned long&gt; range_type;\ntypedef std::map&lt;std::string, std::list&lt;range_type&gt;&gt; wordref_type;\n\nstruct parser{\n    /**\n     * returns a map of \"words\" with its positions list\n     */\n    static wordref_type parse(string_type::const_iterator b, string_type::const_iterator e){\n        wordref_type wordrefs;\n        range_type sentence;\n\n        boost::locale::boundary::segment_index&lt;string_type::const_iterator&gt; index(boost::locale::boundary::word, b, e);\n        //TODO: iterate index\n        return wordrefs;\n    }\n};\n\nint main(int argc, char** argv){\n    std::string input_str = \"Some UTF-8 texts\";\n    string_type buffer = boost::locale::conv::utf_to_utf&lt;string_type::value_type&gt;(input_str); // convert utf-8 to utf-32\n    wordref_type wordrefs = parser::parse(buffer.cbegin(), buffer.cend());\n    return 0;\n}\n</code></pre>\n\n<p>It complains <code>invalid use of incomplete type \u2018const class boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019</code>. What is wrong ? I have <a href=\"https://ideone.com/1zmXJE\" rel=\"nofollow noreferrer\">Ideone</a>'ed it</p>\n\n<pre><code>In file included from /usr/include/boost/locale/boundary.hpp:15:0,\n                 from /usr/include/boost/locale.hpp:11,\n                 from prog.cpp:7:\n/usr/include/boost/locale/boundary/index.hpp: In instantiation of \u2018static boost::locale::boundary::index_type boost::locale::boundary::details::mapping_traits&lt;IteratorType, std::random_access_iterator_tag&gt;::map(boost::locale::boundary::boundary_type, IteratorType, IteratorType, const std::locale&amp;) [with IteratorType = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::index_type = std::vector&lt;boost::locale::boundary::break_info&gt;]\u2019:\n/usr/include/boost/locale/boundary/index.hpp:126:83:   required from \u2018boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::mapping(boost::locale::boundary::boundary_type, boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator, boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator, const std::locale&amp;) [with BaseIterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;]\u2019\n/usr/include/boost/locale/boundary/index.hpp:631:43:   required from \u2018boost::locale::boundary::segment_index&lt;BaseIterator&gt;::segment_index(boost::locale::boundary::boundary_type, boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator, boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator, const std::locale&amp;) [with BaseIterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;]\u2019\nprog.cpp:21:118:   required from here\n/usr/include/boost/locale/boundary/index.hpp:98:93: error: invalid use of incomplete type \u2018const class boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019\n                             index_type tmp=std::use_facet&lt;boundary_indexing&lt;char_type&gt; &gt;(l).map(t,begin,end);\n                                            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~\nIn file included from /usr/include/boost/locale/boundary.hpp:12:0,\n                 from /usr/include/boost/locale.hpp:11,\n                 from prog.cpp:7:\n/usr/include/boost/locale/boundary/facets.hpp:90:19: note: declaration of \u2018class boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019\n             class boundary_indexing;\n                   ^~~~~~~~~~~~~~~~~\nIn file included from /usr/include/boost/locale/boundary.hpp:15:0,\n                 from /usr/include/boost/locale.hpp:11,\n                 from prog.cpp:7:\n/usr/include/boost/locale/boundary/index.hpp:103:95: error: invalid use of incomplete type \u2018const class boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019\n                             index_type tmp = std::use_facet&lt;boundary_indexing&lt;char_type&gt; &gt;(l).map(t,str.c_str(),str.c_str()+str.size());\n                                              ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~\nIn file included from /usr/include/boost/locale/boundary.hpp:12:0,\n                 from /usr/include/boost/locale.hpp:11,\n                 from prog.cpp:7:\n/usr/include/boost/locale/boundary/facets.hpp:90:19: note: declaration of \u2018class boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019\n             class boundary_indexing;\n                   ^~~~~~~~~~~~~~~~~\nIn file included from /usr/include/c++/6/bits/locale_classes.h:850:0,\n                 from /usr/include/c++/6/bits/ios_base.h:41,\n                 from /usr/include/c++/6/ios:42,\n                 from /usr/include/c++/6/ostream:38,\n                 from /usr/include/c++/6/iostream:39,\n                 from prog.cpp:1:\n/usr/include/c++/6/bits/locale_classes.tcc: In instantiation of \u2018const _Facet&amp; std::use_facet(const std::locale&amp;) [with _Facet = boost::locale::boundary::boundary_indexing&lt;char32_t&gt;]\u2019:\n/usr/include/boost/locale/boundary/index.hpp:98:89:   required from \u2018static boost::locale::boundary::index_type boost::locale::boundary::details::mapping_traits&lt;IteratorType, std::random_access_iterator_tag&gt;::map(boost::locale::boundary::boundary_type, IteratorType, IteratorType, const std::locale&amp;) [with IteratorType = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::index_type = std::vector&lt;boost::locale::boundary::break_info&gt;]\u2019\n/usr/include/boost/locale/boundary/index.hpp:126:83:   required from \u2018boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::mapping(boost::locale::boundary::boundary_type, boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator, boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator, const std::locale&amp;) [with BaseIterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::details::mapping&lt;BaseIterator&gt;::base_iterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;]\u2019\n/usr/include/boost/locale/boundary/index.hpp:631:43:   required from \u2018boost::locale::boundary::segment_index&lt;BaseIterator&gt;::segment_index(boost::locale::boundary::boundary_type, boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator, boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator, const std::locale&amp;) [with BaseIterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;; boost::locale::boundary::segment_index&lt;BaseIterator&gt;::base_iterator = __gnu_cxx::__normal_iterator&lt;const char32_t*, std::__cxx11::basic_string&lt;char32_t&gt; &gt;]\u2019\nprog.cpp:21:118:   required from here\n/usr/include/c++/6/bits/locale_classes.tcc:134:37: error: incomplete type \u2018boost::locale::boundary::boundary_indexing&lt;char32_t&gt;\u2019 used in nested name specifier\n       const size_t __i = _Facet::id._M_id();\n\n\n                ~~~~~~~~~~~^~~~~\n</code></pre>\n"}, {"tags": ["c++", "encoding", "compression", "lossless-compression"], "comments": [{"owner": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "edited": false, "score": 1, "creation_date": 1518619747, "post_id": 48789807, "comment_id": 84581755, "body": "Hi Asif, are you asking for someone to give you an algorithm here? Or something else? It&#39;s a little unclear."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1518619758, "post_id": 48789807, "comment_id": 84581762, "body": "Are you asking for code, do you want an algorithm, or are you asking for a library?"}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 1, "creation_date": 1518619926, "post_id": 48789807, "comment_id": 84581899, "body": "Why not expand your 9-bit data to 16-bit? you&#39;ll get a lot of <code>0x00</code> and <code>0x01</code> &#39;s which wouldn&#39;t impact the compression (very much.... i think... maybe).... please tell if this makes no sense XD"}, {"owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1518620180, "post_id": 48789807, "comment_id": 84582074, "body": "@Stefan, I have already mentioned that I tested this hypothesis with Huffman encoding and the results were drastic For eg. splitting the short in two bytes increases the size of overall data-to-be-compressed hence the compression ratio is significantly affected."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1518620187, "post_id": 48789807, "comment_id": 84582082, "body": "Sorry to say but....: Questions asking us to recommend or find a book, tool, software library, tutorial or other off-site resource are off-topic for Stack Overflow as they tend to attract opinionated answers and spam."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1518620345, "post_id": 48789807, "comment_id": 84582206, "body": "Ah, I totally overlooked that part.. my bad sry"}, {"owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1518620386, "post_id": 48789807, "comment_id": 84582234, "body": "@Stefan, sorry if this might seem like asking for a recommendation. In my defense, I believe that question is more about finding the solution of problem than a recommendation (as recommendation implies that there exists some possible solutions)."}, {"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 0, "creation_date": 1518620837, "post_id": 48789807, "comment_id": 84582542, "body": "I agree it is a valid question (maybe you could finetune the form a bit). Lets see what happens."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1518642717, "post_id": 48789807, "comment_id": 84595035, "body": "@AsifAli Maybe zig-zag encoding to get unsigned values with nice distribution (0 = 0, -1 = 1, 1 = 2, -2 = 3, 2 = 4 ...) and then an order-1 model with 3 probability tables (one for MSB, one for LSB following a 0, one for LSB following a 1). | IIRC FastAC can handle more than 256 symbols."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1518647740, "post_id": 48789807, "comment_id": 84597256, "body": "@AsifAli A <a href=\"https://pastebin.com/Unap8Vbz\" rel=\"nofollow noreferrer\">quick draft</a> of using FastAC either directly coding zig-zag mapped 9-bit values or a split approach mentioned above. Both approaches seem to result in similar compression ratio. Given that, it seems you can do well enough with just a &lt;= 256 symbol alphabets. Maybe rephrase the question so it&#39;s not asking for a library and I can write up an answer."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1518649892, "post_id": 48789807, "comment_id": 84598105, "body": "@AsifAli <a href=\"https://pastebin.com/D0PLGmGu\" rel=\"nofollow noreferrer\">Update</a> with an approach coding 2 symbol sign and 2x 256 symbol abs value."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 1, "creation_date": 1518662453, "post_id": 48789807, "comment_id": 84601285, "body": "Nothing about the dlib entropy encoder restricts the set of symbols to 8bit numbers. See the interface: <a href=\"http://dlib.net/dlib/entropy_encoder/entropy_encoder_kernel_abstract.h.html\" rel=\"nofollow noreferrer\">dlib.net/dlib/entropy_encoder/&hellip;</a>. There is no commitment to any particular symbol set size."}, {"owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 0, "creation_date": 1518690304, "post_id": 48789807, "comment_id": 84612480, "body": "Thanks @DanMa\u0161ek for extensive answer, I will test the provided code. Furthermore, I have edited the question to a specific problem and hoping that the flag of &quot;on-hold&quot; will be removed soon. Looking forward to the further explanation of quick draft in answer."}, {"owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "reply_to_user": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 0, "creation_date": 1518691384, "post_id": 48789807, "comment_id": 84613231, "body": "@DavisKing, I have already tried to use 16-bit compressor from DLIB. In theory, the library is capable of handling both 9-bit and 16-bit compression mode but the implementation of both cases is left un-tested/un-implemented (see <a href=\"https://github.com/davisking/dlib/blob/master/dlib/compress_stream.h\" rel=\"nofollow noreferrer\">github.com/davisking/dlib/blob/master/dlib/compress_stream.h</a> line 65 onwards). I already tried to define my own kernel_type (to utilize either 9-bit or 16-bit symbols) but failed miserably (i believe my programming skills are to blame)."}, {"owner": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 2, "creation_date": 1518694827, "post_id": 48789807, "comment_id": 84615391, "body": "It&#39;s not untested and unimplemented. Even that file you linked to uses multiple alphabet sizes, including 513, 65534, and 65537. All these modes are regularly unit tested. Read the documentation."}, {"owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "reply_to_user": {"reputation": 4528, "user_id": 310086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e71a8c95cf10d5a07bdc7c4d51828c16?s=128&d=identicon&r=PG", "display_name": "Davis King", "link": "https://stackoverflow.com/users/310086/davis-king"}, "edited": false, "score": 0, "creation_date": 1518705942, "post_id": 48789807, "comment_id": 84623073, "body": "Dear @DavisKing, my apologies if it seemed like I didn&#39;t read the documentation but I did. If you look at the <a href=\"http://dlib.net/compression.html\" rel=\"nofollow noreferrer\">dlib.net/compression.html</a> various kernels have been benchmarked but none of them used <i>fcX_length</i>, <i>fcX_length_2 or _fcX_index</i> (for 9, 16 and 15 bits respectively)  Could you kindly point me to the file in which test and/or implementation of such bits data are presented, thanks in advance."}], "owner": {"reputation": 71, "user_id": 9274779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6VV39ROr6pA/AAAAAAAAAAI/AAAAAAAAAg0/Dy3OTIlhC1w/photo.jpg?sz=128", "display_name": "Asif Ali", "link": "https://stackoverflow.com/users/9274779/asif-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 391, "favorite_count": 4, "closed_date": 1518624618, "answer_count": 0, "score": 6, "last_activity_date": 1518690131, "creation_date": 1518619192, "last_edit_date": 1518690131, "question_id": 48789807, "link": "https://stackoverflow.com/questions/48789807/encoding-more-than-256-symbols-with-arithmetic-coding", "closed_reason": "Not suitable for this site", "title": "Encoding more than 256 symbols with Arithmetic Coding", "body": "<p>I am trying to encode signed values ranging from -256 &lt;-> 255 (i.e. 9 bit data represented by <em>short</em>) with arithmetic encoder, however I have discovered that existing implementations of Arithmetic coding (such as <a href=\"http://dlib.net/\" rel=\"nofollow noreferrer\">dlib</a>, <a href=\"https://github.com/rygorous/ryg_rans\" rel=\"nofollow noreferrer\">rANS</a>) usually reads the file in the form of a string and treat the data as 8-bit.</p>\n\n<p>The problem with this technique is that this splitting of signed data (shown in <a href=\"https://i.stack.imgur.com/vFRVC.png\" rel=\"nofollow noreferrer\">3</a>) in the form of string destroys the underlying histogram (shown in <a href=\"https://i.stack.imgur.com/OVVmk.png\" rel=\"nofollow noreferrer\">4</a>). I believe that such splitting may also be degrading the compression ratios (but I may be wrong).</p>\n\n<p>I tested my hypothesis by implementing a Huffman encoding with 8-bit and 16-bit data and found that I was right, this maybe due to Huffman's dependence on making the tree by using probabilities.</p>\n\n<p><strong>(EDITED)My question is: How to encode/model symbols (which cannot be contained in a conventional 8-bit container) so that resulting symbols can be easily compressed with traditional arithmetic compressor implementations without affecting compression ratios.</strong></p>\n\n<p>Signed histogram:</p>\n\n<p><img src=\"https://i.stack.imgur.com/vFRVC.png\" alt=\"Signed histogram\"></p>\n\n<p>Splitted histogram:</p>\n\n<p><img src=\"https://i.stack.imgur.com/OVVmk.png\" alt=\"Splitted histogram\"></p>\n"}, {"tags": ["c++", "data-oriented-design"], "comments": [{"owner": {"reputation": 3047, "user_id": 446303, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0223ff085aabfc2db1422d5341f28dad?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/446303/max"}, "edited": false, "score": 0, "creation_date": 1518619316, "post_id": 48789788, "comment_id": 84581460, "body": "I don&#39;t think it is possible, C++ needs to know the types at compile time; There are answers around here that says you could use boost variant and other meta-programming tricks."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1518619377, "post_id": 48789788, "comment_id": 84581513, "body": "You need some way represent each type of data and a container to hold it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1518619562, "post_id": 48789788, "comment_id": 84581632, "body": "What have you tried, and how did it fail?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518620493, "post_id": 48789788, "comment_id": 84582311, "body": "Search the internet for &quot;c++ factory design pattern&quot;."}, {"owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1518622217, "post_id": 48789788, "comment_id": 84583456, "body": "@ThomasMatthews: Thanks yes I am looking for that answer actually. I am working on that. Direct me if you have any good examples that can solve my problem."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1518655129, "post_id": 48789788, "comment_id": 84599546, "body": "You can&#39;t copy <code>std::string</code> the way you are."}, {"owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1518704547, "post_id": 48789788, "comment_id": 84622138, "body": "@RetiredNinja: But it works. at least in Windows machine and in Visual Studio"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1518707960, "post_id": 48789788, "comment_id": 84624497, "body": "Lots of things that are incorrect may seem to work fine, but someday they won&#39;t. Like assuming the size of those variables will never change and hardcoding them rather than using <code>sizeof</code>. Those strings contain pointers to data. If you&#39;re saving and reloading them, so you think just copying the pointers is going to bring that data back? It isn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "edited": false, "score": 0, "creation_date": 1518622098, "post_id": 48789996, "comment_id": 84583390, "body": "The key value pair idea was coming to my mind too. Thanks for the direction. Thanks. I have updated my Question a bit with my code that I am currently doing"}], "tags": [], "owner": {"reputation": 1750, "user_id": 530714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/489c3fdabc5df1116d627e0f10474b01?s=128&d=identicon&r=PG", "display_name": "Grigory Rechistov", "link": "https://stackoverflow.com/users/530714/grigory-rechistov"}, "is_accepted": false, "score": 0, "last_activity_date": 1518619818, "creation_date": 1518619818, "answer_id": 48789996, "question_id": 48789788, "link": "https://stackoverflow.com/questions/48789788/how-to-read-a-file-and-build-a-data-structure-based-on-the-input-file-using-c/48789996#48789996", "title": "How to read a file and build a Data Structure based on the input file using C++?", "body": "<p>It is unlikely to be possible to build C++ data types at runtime because C++ is a statically typed language. You'd better use Python or another dynamically typed language. However, if you think about the problem as about a task of finding a value associated with a key, it is doable, but the resulting \"structures\" will be nowhere close as fast as statically defined C++ types.</p>\n\n<p>For single-level structures (no sub-structures) you can use a whatever sort of key->value class you would want something along these lines: <code>std::map&lt;std::string, std::pair&lt;type, std::uniq_ptr&lt;...&gt;&gt;&gt;</code>. That is, keys as strings are mapped to pairs where the first pair member identifies the value's type, and the second holds a generic pointer to value itself. Provided that there is limited number of types you want to support, you can write a dynamic dispatcher that casts references to actual data types for stored values.</p>\n\n<p>If the input types are allowed to contain sub-structures, things become more complicated. But given that languages for semi-structured data exist (see XML, JSON etc.), you can find a ready solution for arbitrarily complex structured data.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "edited": false, "score": 0, "creation_date": 1518621960, "post_id": 48790068, "comment_id": 84583303, "body": "yes I have done it in python. but currently in my project I need to do it in C++. :("}], "tags": [], "owner": {"reputation": 1, "user_id": 5682351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08892ecc272b6cdaf685414781a90c51?s=128&d=identicon&r=PG&f=1", "display_name": "crtreedude", "link": "https://stackoverflow.com/users/5682351/crtreedude"}, "is_accepted": false, "score": 0, "last_activity_date": 1518619997, "creation_date": 1518619997, "answer_id": 48790068, "question_id": 48789788, "link": "https://stackoverflow.com/questions/48789788/how-to-read-a-file-and-build-a-data-structure-based-on-the-input-file-using-c/48790068#48790068", "title": "How to read a file and build a Data Structure based on the input file using C++?", "body": "<p>Well, you can almost always do something - but you might be using the wrong language. C++ is strongly typed, as Max is pointing out - other languages, for example, PHP are not - and can actually change type.  What you could do, which is like rolling your own language, is to override your math operators like +, -, etc so that you have a base class which takes data - and determines if it is float,string, integer, etc and then you use the object like it was a number.  They will all be objects in your structure, but overrides for math, etc.  A lot of work to do this - but there are examples out there regarding overriding math operators, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "edited": false, "score": 0, "creation_date": 1518622728, "post_id": 48790796, "comment_id": 84583770, "body": "Thanks. Yes, I have got an idea now. I will take the datatype name and number of bytes from a file and handle it in the way everybody suggested. Thanks alot."}], "tags": [], "owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "is_accepted": false, "score": 0, "last_activity_date": 1518622314, "creation_date": 1518622314, "answer_id": 48790796, "question_id": 48789788, "link": "https://stackoverflow.com/questions/48789788/how-to-read-a-file-and-build-a-data-structure-based-on-the-input-file-using-c/48790796#48790796", "title": "How to read a file and build a Data Structure based on the input file using C++?", "body": "<p>As the others said, it cannot be done, at least not in the way that you end up with a structure or class with the member variables with the correct types.</p>\n\n<p>What you can do is parse the file and guess the data type from the format of the value, then create the corresponding type (you have to implement that for all the types you want to support), and finally define a data structure that stores all values with their different types (e.g. a vector with the position as index and using boost::any for the values).</p>\n\n<p>As a side note:<br>\nBe aware that you can end up with different types for values at the same position, e.g. if a value is once written as '123' and once as '83.45'. The first value would probably stored as some kind of integer, while the second would result in a float or double.</p>\n"}], "owner": {"reputation": 11, "user_id": 9360503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Saroj Kumar Dash", "link": "https://stackoverflow.com/users/9360503/saroj-kumar-dash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1518622314, "creation_date": 1518619127, "last_edit_date": 1518621886, "question_id": 48789788, "link": "https://stackoverflow.com/questions/48789788/how-to-read-a-file-and-build-a-data-structure-based-on-the-input-file-using-c", "title": "How to read a file and build a Data Structure based on the input file using C++?", "body": "<p>I guess this should be possible. I tried but could not find a good answer. I basically want to make a dynamic structure. I want to read a file which tells me the datatypes that my structure will contain. Based on that values I want to build a structure. I want to use C++ for this. We can think of oracle as an example for this where we give a csv file and it recognizes what type they should be and makes columns of that particular datatype.</p>\n\n<p>Can anyone please help me with this problem ?</p>\n\n<p>An Update: I guess I should have added little bit of code to explain my problem statement. So here we go:</p>\n\n<pre><code>//PLC Data Block Sturcture.\n//Todo: try to construct this structure from a file or something\nstruct MMSDataHeader{\n    bool          bHeader_Trigger;      //2\n    unsigned char MachineTimeStamp[8];  //8\n    std::string   Header_MachineID;     //12\n    std::string   Header_Station;       //12\n    int           Header_MessageID;     //2\n    int           Header_MessageSequenceNo; //2\n    int           Header_NumberOfProperties; //2\n    int           MeasurementType;          //2\n    bool          Response_Acknowledge;     //2\n};\ntypedef struct MMSDataHeader MMSDataHeader;\n\nint PLCBox::GetHeader(){\n\n   MMSDataHeader local_PLCData = { 0 };\n  int res = -1;\n\n  std::cout &lt;&lt; \"Reading Head :\";\n  if ((p_s7Client_ == NULL))  {\n    std::cerr &lt;&lt; \"TSnap7Client is not connected.\\n\";\n  }\n\n  res = p_s7Client_-&gt;DBRead(nb_db_num_, 0, k_header_size, (void *)(&amp;buffer_));    \n  //synchronous mode: default mode\n  //inFile.read(buffer_, sizeof(buffer_));\n  memcpy(&amp;local_PLCData.bHeader_Trigger, buffer_, 1);\n  memcpy(local_PLCData.MachineTimeStamp, buffer_ + 2, 8);\n  memcpy(&amp;local_PLCData.Header_MachineID, buffer_ + 10, 12);\n  memcpy(&amp;local_PLCData.Header_Station, buffer_ + 22, 12);\n  memcpy(&amp;local_PLCData.Header_MessageID, buffer_ + 34, 2);\n  memcpy(&amp;local_PLCData.Header_MessageSequenceNo, buffer_ + 36, 2);\n  memcpy(&amp;local_PLCData.Header_NumberOfProperties, buffer_ + 39, 2);\n  memcpy(&amp;local_PLCData.MeasurementType, buffer_ + 40, 2);\n  memcpy(&amp;local_PLCData.Response_Acknowledge, buffer_ + 42, 1);\n\n  nb_props = local_PLCData.Header_NumberOfProperties;\n  _b_read_trigger = local_PLCData.bHeader_Trigger;\n\n  return local_PLCData.Header_NumberOfProperties;\n}\n</code></pre>\n\n<p>This code works for me now and solves my purpose when I call GetHeader . As you all can see it is looking for exact bytes and structure from the PLCs. I want to make a system such that the structure can be made from a file such that onle a file should be replaced and then the system should work on its own. I think I can explore some things about factory Design pattern to do this. Right now I can determine the type of file and content of the file for my Data structure Construction. Has anyone done something similar on there side.</p>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1518619192, "post_id": 48789779, "comment_id": 84581368, "body": "There is no built-in mechanism for addressing members by their name at run-time."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1518619203, "post_id": 48789779, "comment_id": 84581376, "body": "No, you&#39;ll have to write the code for that yourself. Also it sounds like a strange scenario, why do you need this?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 3, "creation_date": 1518619402, "post_id": 48789779, "comment_id": 84581526, "body": "Wow. I was about to say this question sounds curiously similar to <a href=\"https://stackoverflow.com/questions/48781581/find-in-which-structure-that-particular-member-is-defined\" title=\"find in which structure that particular member is defined\">stackoverflow.com/questions/48781581/&hellip;</a> but now that other question has gained actual code samples, and it seems to be identical. Is this some weird homework exercise?"}, {"owner": {"reputation": 29, "user_id": 8735306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/edc2da2ea3d0c72972467dab4e0666e3?s=128&d=identicon&r=PG&f=1", "display_name": "Sundeep Kumar Gorantla", "link": "https://stackoverflow.com/users/8735306/sundeep-kumar-gorantla"}, "edited": false, "score": 0, "creation_date": 1518622702, "post_id": 48789779, "comment_id": 84583754, "body": "My actual problem is to get value for certain key in JSON response. The value for that key is defined in one of many structures defined as shown in question. I should implement a function, which should take that key as input and give corresponding value of key output by searching all available structures. This is actual requirement. Now please help in solving this"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1518667314, "post_id": 48789779, "comment_id": 84602312, "body": "C++ doesn&#39;t support dynamic typing, so knowing the name is useless"}, {"owner": {"reputation": 29, "user_id": 8735306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/edc2da2ea3d0c72972467dab4e0666e3?s=128&d=identicon&r=PG&f=1", "display_name": "Sundeep Kumar Gorantla", "link": "https://stackoverflow.com/users/8735306/sundeep-kumar-gorantla"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1518668516, "post_id": 48789779, "comment_id": 84602557, "body": "@L\u01b0uV\u0129nhPh&#250;c please look into my previous comment.. that is the actual problem. can you suggest any idea to get this"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8735306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/edc2da2ea3d0c72972467dab4e0666e3?s=128&d=identicon&r=PG&f=1", "display_name": "Sundeep Kumar Gorantla", "link": "https://stackoverflow.com/users/8735306/sundeep-kumar-gorantla"}, "edited": false, "score": 0, "creation_date": 1518622233, "post_id": 48790128, "comment_id": 84583463, "body": "My actual problem is to get value for certain key in JSON response. The value for that key is defined in one of many structures defined as shown in question. I should implement a function, which should take that key as input and give corresponding value of key output by searching all available structures. This is actual requirement. Now please help in solving this."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "reply_to_user": {"reputation": 29, "user_id": 8735306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/edc2da2ea3d0c72972467dab4e0666e3?s=128&d=identicon&r=PG&f=1", "display_name": "Sundeep Kumar Gorantla", "link": "https://stackoverflow.com/users/8735306/sundeep-kumar-gorantla"}, "edited": false, "score": 1, "creation_date": 1518622418, "post_id": 48790128, "comment_id": 84583575, "body": "@SundeepKumarGorantla That description makes no sense. It also has nothing to do with getting the name of a class in a string. We might be in XYZ territory here."}], "tags": [], "owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "is_accepted": false, "score": 1, "last_activity_date": 1518620185, "creation_date": 1518620185, "answer_id": 48790128, "question_id": 48789779, "link": "https://stackoverflow.com/questions/48789779/get-structure-name-for-that-member/48790128#48790128", "title": "get structure name for that member", "body": "<p>No, C++ doesn't provide this kind of built-in reflection. If you want this functionality, you need to code it yourself. Besides, your problem is underspecified: What if the same member name appears in several different structures (possibly even structures of the same name but in different namespaces)?</p>\n\n<p>But this whole question smells like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>: Even if you could get <code>\"Chassis2\"</code> at runtime, what would you do with it? Having a class name in a string doesn't seem directly useful. In the absence of more context, the direct answer to your question is simply \"no\".</p>\n"}], "owner": {"reputation": 29, "user_id": 8735306, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/edc2da2ea3d0c72972467dab4e0666e3?s=128&d=identicon&r=PG&f=1", "display_name": "Sundeep Kumar Gorantla", "link": "https://stackoverflow.com/users/8735306/sundeep-kumar-gorantla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1518662706, "creation_date": 1518619095, "last_edit_date": 1518662706, "question_id": 48789779, "link": "https://stackoverflow.com/questions/48789779/get-structure-name-for-that-member", "title": "get structure name for that member", "body": "<p>Is there any method or solution in achieving this?\nI have structures defined like</p>\n\n<pre><code>struct Chassis1\n{ string IndicatorLED;\n  string AssetTag;\n};\n\nstruct Chassis2\n{ string HostName;\n  string PowerState;\n};\n\nstruct Chassis3\n{ string ChassisType;\n  int IntrusionNumber;\n};\n</code></pre>\n\n<p>I want code that gives the structure name under which that member is defined.\nFor example if HostName is input, then it should give Chassis2 as output.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 10, "creation_date": 1518618423, "post_id": 48789514, "comment_id": 84580779, "body": "Look at <i><code>const</code></i>, or at the missing one."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518618726, "post_id": 48789514, "comment_id": 84581010, "body": "your <code>ostream::operator&lt;&lt;</code> pretends that it modifies the passed <code>MaszynaStanow</code> thus it rejects a <code>const</code> instance. Btw the question is rather unclear, because if you simply remove the cast the error should be gone"}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "reply_to_user": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "edited": false, "score": 0, "creation_date": 1518618730, "post_id": 48789514, "comment_id": 84581011, "body": "@OlafDietsche I knew it must have been something stupidly obvious. Thank you very much- spotted the error straight away!!"}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518618909, "post_id": 48789514, "comment_id": 84581161, "body": "@user463035818, I know but the way our programming classes are being handled is that we are being given only a main.cpp file with already written code. We have to make it compile by adding .h and .cpp files. We are not allowed to edit the main.cpp file, therefore I couldn&#39;t have deleted that line of code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518619217, "post_id": 48789514, "comment_id": 84581388, "body": "@Mike.e87 yes, got it, just took me a while to understand that it isnt your code. The code you are given isnt nice at all btw, but maybe thats part of the exercise"}, {"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518619352, "post_id": 48789514, "comment_id": 84581494, "body": "@user463035818 exactly, that&#39;s the point. I hate that approach but there&#39;s nothing I can really do about it."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 0, "creation_date": 1518619036, "post_id": 48789638, "comment_id": 84581251, "body": "Totally agreed. I just missed it... Thanks!"}], "tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": true, "score": 4, "last_activity_date": 1518618683, "creation_date": 1518618683, "answer_id": 48789638, "question_id": 48789514, "link": "https://stackoverflow.com/questions/48789514/how-does-that-casting-work/48789638#48789638", "title": "How does that casting work?", "body": "<p>You cast explicitly to a <code>const</code>, but your operator is only able to work with non-const instances of <code>MaszynaStanow</code>. Your operator should have the following form:</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; stream, const MaszynaStanow &amp; obj)\n                                       ^^^^^\n                                       you missed this\n</code></pre>\n\n<p>If you need the object to be modifiable, keep the current version and do not cast the object to a const one. Although I would not expect <code>operator&lt;&lt;</code> to modify its right-handled operand, so the const should be probably there.</p>\n"}, {"comments": [{"owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "edited": false, "score": 1, "creation_date": 1518619234, "post_id": 48789660, "comment_id": 84581396, "body": "Thank you! it did help me out. I must have missed this const when copying the first line of the function from a different file..."}], "tags": [], "owner": {"reputation": 11186, "user_id": 266978, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/936f8c28b401a914224af1e0e9891633?s=128&d=identicon&r=PG", "display_name": "Baltasarq", "link": "https://stackoverflow.com/users/266978/baltasarq"}, "is_accepted": false, "score": 1, "last_activity_date": 1518618736, "creation_date": 1518618736, "answer_id": 48789660, "question_id": 48789514, "link": "https://stackoverflow.com/questions/48789514/how-does-that-casting-work/48789660#48789660", "title": "How does that casting work?", "body": "<p>It seems that the programmer is trying to simulate a pass-by-const-reference by doing a previous cast to the object. However, the true place to do any modification is here:</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; stream, MaszynaStanow &amp; obj){\n    cout&lt;&lt;\"MaszynaStanow:\"&lt;&lt;endl;\n    for (int i = 0; i &lt; obj.size; ++i){\n        stream &lt;&lt;i&lt;&lt;\" \"&lt;&lt;obj.Next[i]-&gt;returnName();\n        if (i == obj.chosenMode) cout &lt;&lt;\" &lt;\";\n        cout&lt;&lt;endl;\n    }\n    return stream;\n}\n</code></pre>\n\n<p>While you are going to dump <em>obj</em> to the stream <em>stream</em>, which presumably does not require any modification of <em>obj</em>, you are passing a non-constant reference. Fix the code this way:</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; stream, const MaszynaStanow &amp; obj){\n    cout&lt;&lt;\"MaszynaStanow:\"&lt;&lt;endl;\n    for (int i = 0; i &lt; obj.size; ++i){\n        stream &lt;&lt;i&lt;&lt;\" \"&lt;&lt;obj.Next[i]-&gt;returnName();\n        if (i == obj.chosenMode) cout &lt;&lt;\" &lt;\";\n        cout&lt;&lt;endl;\n    }\n    return stream;\n}\n</code></pre>\n\n<p>Now you are passing <em>obj</em> by reference, but this reference is special: while it s very efficient, it is equivalent (because of the use of <code>const</code>) to a pass-by-value.</p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 95, "user_id": 8227881, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rtr2U.png?s=128&g=1", "display_name": "Static.Mike", "link": "https://stackoverflow.com/users/8227881/static-mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 48789638, "answer_count": 2, "score": 2, "last_activity_date": 1518618736, "creation_date": 1518618330, "last_edit_date": 1518618712, "question_id": 48789514, "link": "https://stackoverflow.com/questions/48789514/how-does-that-casting-work", "title": "How does that casting work?", "body": "<p>I'm doing an exercise for my uni class. I've stumbled upon a following line of code:</p>\n\n<pre><code>std::cout &lt;&lt; (const MaszynaStanow&amp;)m &lt;&lt; std::endl;\n</code></pre>\n\n<p><i>where m is an object of a class.</i></p>\n\n<p>It doesn't compile. I assume it's some kind of a casting of an object to a constant reference, right?</p>\n\n<p>I've also written an operator function for \"&lt;&lt;\" overloading so that I could print out the values held by an object like so:</p>\n\n<pre><code>std::cout &lt;&lt; m;\n</code></pre>\n\n<p>I'm getting the following error upon compilation:</p>\n\n<pre><code>.main.cpp:41:13: error: invalid operands to binary expression('ostream'(aka 'basic_ostream&lt;char&gt;') and 'const MaszynaStanow')\nstd::cout &lt;&lt; (const MaszynaStanow&amp;)m &lt;&lt; std::endl;\n~~~~~~~~~ ^  ~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>Which makes me think that my operator overloading function is not suitable in this case(?)</p>\n\n<pre><code>ostream &amp; operator&lt;&lt;(ostream &amp; stream, MaszynaStanow &amp; obj){\n    cout&lt;&lt;\"MaszynaStanow:\"&lt;&lt;endl;\n    for (int i = 0; i &lt; obj.size; ++i){\n        stream &lt;&lt;i&lt;&lt;\" \"&lt;&lt;obj.Next[i]-&gt;returnName();\n        if (i == obj.chosenMode) cout &lt;&lt;\" &lt;\";\n        cout&lt;&lt;endl;\n    }\n    return stream;\n}\n</code></pre>\n\n<p>I would appreciate any kind of help- even a small hint.</p>\n"}, {"tags": ["c++", "multithreading", "concurrency", "tbb"], "comments": [{"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1518618383, "post_id": 48789472, "comment_id": 84580751, "body": "Show us the code."}, {"owner": {"reputation": 11603, "user_id": 654891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156c04def2a7958f8254305ecffc9822?s=128&d=identicon&r=PG", "display_name": "Alexey Kukanov", "link": "https://stackoverflow.com/users/654891/alexey-kukanov"}, "edited": false, "score": 2, "creation_date": 1518618609, "post_id": 48789472, "comment_id": 84580918, "body": "Yes, increment (++) causes a race condition. In order to avoid it, declare the variable atomic. And it&#39;s not <code>parallel_for</code> causing the issue but the race in your code."}, {"owner": {"reputation": 37, "user_id": 5884953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c81fbec888365799a3ee648f8c1eb15?s=128&d=identicon&r=PG&f=1", "display_name": "Darision", "link": "https://stackoverflow.com/users/5884953/darision"}, "edited": false, "score": 0, "creation_date": 1518618742, "post_id": 48789472, "comment_id": 84581025, "body": "Its more of a theory question so I didn&#39;t think the code was relevant"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 5884953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c81fbec888365799a3ee648f8c1eb15?s=128&d=identicon&r=PG&f=1", "display_name": "Darision", "link": "https://stackoverflow.com/users/5884953/darision"}, "edited": false, "score": 0, "creation_date": 1518619931, "post_id": 48789961, "comment_id": 84581904, "body": "Is this better or worse than using a mutex?"}, {"owner": {"reputation": 11603, "user_id": 654891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156c04def2a7958f8254305ecffc9822?s=128&d=identicon&r=PG", "display_name": "Alexey Kukanov", "link": "https://stackoverflow.com/users/654891/alexey-kukanov"}, "reply_to_user": {"reputation": 37, "user_id": 5884953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c81fbec888365799a3ee648f8c1eb15?s=128&d=identicon&r=PG&f=1", "display_name": "Darision", "link": "https://stackoverflow.com/users/5884953/darision"}, "edited": false, "score": 2, "creation_date": 1518622725, "post_id": 48789961, "comment_id": 84583767, "body": "Acquiring a mutex typically means one atomic operation, as threads need to modify the mutex state atomically. So for a single increment, atomic operation is likely more efficient than using a mutex. But generally, do not make assumptions about performance; measure and make decisions based on data."}], "tags": [], "owner": {"reputation": 11603, "user_id": 654891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/156c04def2a7958f8254305ecffc9822?s=128&d=identicon&r=PG", "display_name": "Alexey Kukanov", "link": "https://stackoverflow.com/users/654891/alexey-kukanov"}, "is_accepted": true, "score": 3, "last_activity_date": 1518619693, "creation_date": 1518619693, "answer_id": 48789961, "question_id": 48789472, "link": "https://stackoverflow.com/questions/48789472/tbb-parallel-for-count-increment-variable-inaccurate/48789961#48789961", "title": "TBB Parallel_for count, increment variable inaccurate", "body": "<p><code>tbb::parallel_for</code> assumes that the body of the loop is thread-safe, i.e. does not have races. In this case, it does have a race, as it modifies a global variable without synchronization. The fact that modification is a mere increment of \"whatever the current value is\" does not matter, it is still a race (for example, some hardware might implement ++ as reading a value from memory to register, changing the register, writing new value back to memory).</p>\n\n<p>In order to fix this code, declare <code>count</code> as an atomic variable: <code>std::atomic&lt;int&gt;</code> if you use C++11, or <code>tbb::atomic&lt;int&gt;</code> for earlier versions of the language.</p>\n"}], "owner": {"reputation": 37, "user_id": 5884953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2c81fbec888365799a3ee648f8c1eb15?s=128&d=identicon&r=PG&f=1", "display_name": "Darision", "link": "https://stackoverflow.com/users/5884953/darision"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 48789961, "answer_count": 1, "score": 0, "last_activity_date": 1518619693, "creation_date": 1518618217, "last_edit_date": 1518618691, "question_id": 48789472, "link": "https://stackoverflow.com/questions/48789472/tbb-parallel-for-count-increment-variable-inaccurate", "title": "TBB Parallel_for count, increment variable inaccurate", "body": "<p>I am aware that with parallel processes, without proper care you can get race conditions where one thread modifies a variable that another is accessing, causing various errors and such. </p>\n\n<p>I am trying to write code that makes use of a 'parallel_for', a global variable 'count' and a condition to increment 'count'. </p>\n\n<p>once the condition is met, I call count++ from inside the parallel for. </p>\n\n<p>for data validation I setup a parallel_reduce that also checks for the same condition and I receive a different result, which is higher than what I get with the parallel_for, which is why I know that the parallel_for is causing the issue. </p>\n\n<p>Am I right in thinking that using 'count++' is still causing a race condition, as my original assumption was that count++ would work as i'm never storing a value, just at the point in time, saying just add 1 to whatever 'count' is.\nI want to try and avoid using mutex or locks if possible. </p>\n\n<pre><code>int count = 0;\n\nparallel_for(blocked_range2d&lt;int, int&gt;(0, smallestHeight, 0, smallestWidth), [&amp;](const blocked_range2d&lt;int, int&gt;&amp;r) {\n        auto y1 = r.rows().begin();\n        auto y2 = r.rows().end();\n        auto x1 = r.cols().begin();\n        auto x2 = r.cols().end();\n\n        for (auto y = y1; y &lt; y2; y++) {\n            for (auto x = x1; x &lt; x2; x++) {\n\n                int pixelValue = rgbDiffVal[y][x].rgbRed + rgbDiffVal[y][x].rgbGreen + rgbDiffVal[y][x].rgbBlue;\n\n                if (pixelValue &gt; bThreshold) {\n                    count++;\n                }\n            }\n        }\n    });\n</code></pre>\n"}, {"tags": ["c++", "cimg"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1518617309, "post_id": 48789163, "comment_id": 84579997, "body": "Google Search: &quot;MSDN SetDIBitsToDevice&quot;, click on the 1st link, go to the table at the bottom of the page and include the library in your linker settings.  All of the Win32API functions are listed on the MSDN site with required headers and libraries."}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1518648114, "post_id": 48789163, "comment_id": 84597418, "body": "I added the line: #include &lt;windows.h&gt;  And I downloaded Gdi32.lib and added it to Linker Settings in my compiler settings. Now there&#39;s no error in running the program, but afterwards, it gives this error instead: CImg&lt;unsigned char&gt;::load(): Failed to recognize format of file &#39;twittericon.png&#39;  Now what should I do? Doesn&#39;t it work with png file?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1518651165, "post_id": 48789163, "comment_id": 84598497, "body": "You have to install <code>libpng</code> to read/write PNG files. I suspect you would be better off installing <b>ImageMagick</b> instead though, because CImg can use that to read most file formats for you. Remember to tick the option <i>&quot;Install Legacy tools&quot;</i> when installing <b>ImageMagick</b>."}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518706107, "post_id": 48789163, "comment_id": 84623188, "body": "Could you please help me with which one to download? I&#39;m using windows 10, C++, and Code::Blocks in case you need. <a href=\"https://www.imagemagick.org/script/install-source.php\" rel=\"nofollow noreferrer\">imagemagick.org/script/install-source.php</a>"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518709071, "post_id": 48789163, "comment_id": 84625223, "body": "You don&#39;t need to install the source. You can use the ready-built binaries, it&#39;s easier."}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518723829, "post_id": 48789163, "comment_id": 84633919, "body": "Okay so I need to download and install this : ImageMagick-7.0.7-22-Q16-x64-dll.exe ? Sorry for asking a lot of questions I&#39;m just so beginner in this... I&#39;d be really grateful if you enlightened me a little bit more about it"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518726843, "post_id": 48789163, "comment_id": 84635437, "body": "What is it you are actually trying to do overall? Do you want to just read the RGB values of one single PNG file once? Or are you writing a large, general purpose image processing system that you will use for years and needs to be able to read many file formats? What sort of processing do you need to do?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1518778252, "post_id": 48789163, "comment_id": 84653792, "body": "Could you please have a try at answering the question above before asking any more - else I have to keep answering 3 times over to cover all eventualities :-)"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518736997, "post_id": 48816262, "comment_id": 84639751, "body": "Sorry again for asking endless questions, as I already said, I&#39;m just a beginner (who&#39;s so grateful for your guide though:) ) So here goes the first question, what exactly is this line in the Option 1 section about? : <code>convert xc:red xc:lime xc:blue +append \\( xc:cyan xc:magenta xc:yellow +append \\) -append image.png</code> and the 2nd question would be the same as first question, but about this line: <code>convert image.png -compress none image.pnm</code> As it seems, these are not commands, so what are they? Better say, how should the code look like (it may seem too stupid, but I just don&#39;t get it:( )"}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518739006, "post_id": 48816262, "comment_id": 84640301, "body": "And is there anything else I need to do rather than installing ImageMagick and copying Include folder contents from its installation directory, to the Include folder in Code::Blocks installation directory, and then adding the line <code>#include &lt;Magick++.h&gt;</code> to the beginning of my code? Because that&#39;s all I did (all I knew I was supposed to do) And about the Option 2 part, in which CImg uses ImageMagick for conversions, what do you mean by <code>convert&#47;magick</code> ? Is it going to be a part of the code I mentioned at first? (GOD IM SO SO SORRY IF IM CAUSING YOU A HEADACHE!:( )"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518765007, "post_id": 48816262, "comment_id": 84646710, "body": "No problems, we are all learning. Q1) You just type that command into a Terminal, or Command Prompt, or DOS Box, or whatever Windows calls it when you type in commands like <code>DIR</code>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518766065, "post_id": 48816262, "comment_id": 84647140, "body": "Q3) No, do not <code>#include Magick++.h</code> that is experimental and unnecessary."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518766358, "post_id": 48816262, "comment_id": 84647245, "body": "Q4) At version 7 of <b>ImageMagick</b>, the command you type to run it in the Command Prompt changed from <code>convert</code> (v6) to <code>magick</code> (v7). If, when you install v7, you check the box labelled <code>Install legacy tools</code>, you will be able to use <code>magick</code> or <code>convert</code> at the commandline. If you do not check that box, you will only be able to use <code>magick</code>."}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518777487, "post_id": 48816262, "comment_id": 84653304, "body": "And one more question, how can I save the color codes in a 2D array?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518777686, "post_id": 48816262, "comment_id": 84653425, "body": "Not sure what you mean by a 2-D array. Your image has 3 dimensions, height, width and colour channel surely? It is already in an array if you use <code>CImg</code> - what do you think <code>src(c,r,0,0)</code> in your program is?"}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518784760, "post_id": 48816262, "comment_id": 84657529, "body": "First of all, as I&#39;ve said twice, I&#39;m so much of a beginner in this, and that it&#39;s the very first time I&#39;m working with &#39;files&#39; (at school !)  So about that code, I do have some questions, and yes one of them would be: what is <code>src(int,int,int,int)</code>? All I can guess is it&#39;s just an abbreviation for &#39;Source&#39; or something? And even if it is so, what&#39;s the usage of it? Because we&#39;ve recently just learned about files and done a bit of a coding with <b>fstream</b> , so this question just pops into my mind that why can&#39;t we just use <code>ifstream</code> to get the png file, and what exactly is <code>src</code> doing?"}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518784775, "post_id": 48816262, "comment_id": 84657542, "body": "And about the 2D array, I meant a height&#215;width array, having the hex color codes saved in, e.g. I want FF0000 to be saved for the Red color instead of saving all 3 codes of 255,0,0. How can I do that?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518785768, "post_id": 48816262, "comment_id": 84658116, "body": "<code>src()</code> is effectively an array already. You access the red pixel with <code>src(c,r,0,0)</code>, and the green one with <code>src(c,r,0,1)</code>. There is no need to store everything twice. If you want to see hex, just do <code>std::cout &lt;&lt; std::hex &lt;&lt; src(c,r,0,0) &lt;&lt; std::endl;</code>"}, {"owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518799526, "post_id": 48816262, "comment_id": 84666646, "body": "Thanks and one more question... what is that third 0 in src(c,r,<b>0*</b>,0) ?"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "edited": false, "score": 0, "creation_date": 1518801757, "post_id": 48816262, "comment_id": 84667922, "body": "Leave it at zero. <code>CImg</code> is able to deal with 3-D volumetric shapes, like CT (Computed Tomography) scans, and that zero is the index for the Z-axis."}], "tags": [], "owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 1, "last_activity_date": 1518770395, "last_edit_date": 1518770395, "creation_date": 1518728757, "answer_id": 48816262, "question_id": 48789163, "link": "https://stackoverflow.com/questions/48789163/cimg-error-failed-to-recognize-format-of-file-xxx-png/48816262#48816262", "title": "CImg error : Failed to recognize format of file &quot;xxx.png&quot;", "body": "<p>There are many ways to get the RGB pixel values in a <code>PNG</code> file, and the best one depends what your actual usage scenario is.</p>\n\n<hr>\n\n<p><strong>Option 1</strong></p>\n\n<p>If you have one or two <code>PNG</code> files and you just want to get the RGB pixels easily one time, then I would suggest you install any of the ready-built <strong>ImageMagick</strong> binaries you have already given links for. Then we can make a test <code>PNG</code> file like this at the command line in Terminal or Command Prompt:</p>\n\n<pre><code>convert xc:red xc:lime xc:blue +append \\( xc:cyan xc:magenta xc:yellow +append \\) -append image.png\n</code></pre>\n\n<p>and it will look like this (just smaller):</p>\n\n<p><a href=\"https://i.stack.imgur.com/q5qK6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q5qK6.png\" alt=\"enter image description here\"></a></p>\n\n<p>(I think you omit the backslashes under Windows in the above command)</p>\n\n<p>Ok, now you want to see the RGB values, so you can either dump the file as text:</p>\n\n<pre><code>convert image.png -depth 8 txt:\n</code></pre>\n\n<p><strong>Sample Output</strong></p>\n\n<pre><code># ImageMagick pixel enumeration: 3,2,65535,srgb\n0,0: (65535,0,0)  #FF0000  red\n1,0: (0,65535,0)  #00FF00  lime\n2,0: (0,0,65535)  #0000FF  blue\n0,1: (0,65535,65535)  #00FFFF  cyan\n1,1: (65535,0,65535)  #FF00FF  magenta\n2,1: (65535,65535,0)  #FFFF00  yellow\n</code></pre>\n\n<p>Or, you can convert the file to the venerable (but superb) NetPBM format <a href=\"https://en.wikipedia.org/wiki/Netpbm_format\" rel=\"nofollow noreferrer\">Wikipedia description of NetPBM</a>in ASCII mode:</p>\n\n<pre><code>convert image.png -compress none image.pnm\n</code></pre>\n\n<p>Now you get a file like this that you can easily read:</p>\n\n<pre><code>P3                              # PPM in ASCII mode\n3 2                             # width=3 height=2\n255                             # 8-bit\n255 0 0 0 255 0 0 0 255 \n0 255 255 255 0 255 255 255 0 \n</code></pre>\n\n<p>If you omit the <code>-compress none</code> you will get the same file but the RGB data will be in 8-bit unsigned binary and then the whole file is very easy to read in C/C++. In fact, <strong>CImg</strong> knows how to read/write these anyway.</p>\n\n<p>So, you could feasibly, convert any images (TIF, BMP, JPEG, GIF) you want to access into NetBM <code>PPM</code> files in advance and just read and write <code>PPM</code> files using the built-in routines in <strong>CImg</strong>. Job done!</p>\n\n<hr>\n\n<p><strong>Option 2</strong></p>\n\n<p>At the next level, you could install <strong>ImageMagick</strong> from the pre-built binaries on the <strong>ImageMagick</strong> website and then use <strong>CImg</strong>. <strong>CImg</strong> will then locate <strong>ImageMagick</strong>'s <code>convert/magick</code> program use that to convert anything it can't read itself on its behalf. That way you get instant access to around 200+ formats that <strong>ImageMagick</strong> knows about - for free.</p>\n\n<hr>\n\n<p><strong>Option 3</strong></p>\n\n<p>Alternatively, you could build and install <code>libpng</code> and then when you write code with <strong>CImg</strong> you define a macro <strong>before</strong> including <code>CImg.h</code> and it uses <code>libpng</code> to read and write PNG files.</p>\n\n<p>That is quite a lot of trouble to go to when you could just let <strong>ImageMagick</strong> do all the work, and at the end of it you only get <code>PNG</code> support not 200+ formats for all that work.</p>\n\n<p>This scenario looks like this:</p>\n\n<pre><code>#define cimg_use_png 1\n#include \"CImg.h\"\n...\n...\n</code></pre>\n\n<p>You would compile with:</p>\n\n<pre><code>c++ -I CIMG_DIRECTORY -L LIBPNG_DIRECTORY -lpng -lz\n</code></pre>\n\n<p>I did another answer, using this option for <code>libjpeg</code> and getting <strong>CIMg</strong> to read and write JPEGs. I can only say it was a total pain - that answer is <a href=\"https://stackoverflow.com/a/46058914/2836621\">here</a>.</p>\n"}], "owner": {"reputation": 51, "user_id": 9360108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb197ef33e93dd851add1dd46fb070e8?s=128&d=identicon&r=PG&f=1", "display_name": "mitrafrz", "link": "https://stackoverflow.com/users/9360108/mitrafrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1572, "favorite_count": 0, "accepted_answer_id": 48816262, "answer_count": 1, "score": 2, "last_activity_date": 1518770395, "creation_date": 1518617200, "last_edit_date": 1518723856, "question_id": 48789163, "link": "https://stackoverflow.com/questions/48789163/cimg-error-failed-to-recognize-format-of-file-xxx-png", "title": "CImg error : Failed to recognize format of file &quot;xxx.png&quot;", "body": "<p>I've been looking for a code in C++ which gets me the RGB values of all pixels of a png file.</p>\n\n<p>So I searched a lot through the internet and found different ways of doing such a thing, like using libpng , OpenCV, Magick++, CImg , etc. and I just decided to go with the CImg one (mostly because I don't know how to use OpenCV although I searched a lot about how to install and use it in Code::Blocks and it just has something to do with mingw64 which the installer I downloaded from Sorceforge, keeps giving me errors in the middle of downloading some files, and about the rest of them I just can't find the appropriate header file (like Magick++.h) which's compatible with Code::Blocks... So if you think some of these would be better and simpler than CImg.h, then I'd appreciate if you provided me a download link of the header or any other necessary thing)</p>\n\n<p>So here is the code I found with Cimg :</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\n#include &lt;CImg.h&gt;\nusing namespace cimg_library;\n\nint main()\n{\nCImg&lt;unsigned char&gt;src(\"twittericon.png\");\nint width = src.width();\nint height = src.height();\ncout &lt;&lt; width &lt;&lt; \"x\" &lt;&lt; height &lt;&lt; endl;\nfor (int r = 0; r &lt; height; r++)\nfor (int c = 0; c &lt; width; c++)\n   cout &lt;&lt; \"(\" &lt;&lt; r &lt;&lt; \",\" &lt;&lt; c &lt;&lt; \") =\"\n        &lt;&lt; \" R\" &lt;&lt; (int)src(c,r,0,0)\n        &lt;&lt; \" G\" &lt;&lt; (int)src(c,r,0,1)\n        &lt;&lt; \" B\" &lt;&lt; (int)src(c,r,0,2) &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>\n\n<p>But the problem is after running the program, it gives me the error :\nCImg::load(): Failed to recognize format of file 'twittericon.png'\u00a0</p>\n\n<p>What should I do with the error?</p>\n\n<p>And by the way, do you know any better way to read these RGB values of a png file? If you do, could you please also provide me a little bit of an instruction for it? Thanks.</p>\n"}, {"tags": ["c++", "templates", "boost", "enable-if", "asio"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1518617273, "post_id": 48789090, "comment_id": 84579963, "body": "How are you calling <code>doSomething()</code>?"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1518617494, "post_id": 48789090, "comment_id": 84580135, "body": "You can&#39;t explicit specialize a template in class scope. Move those explicit specialization out to the namespace scope."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1518617562, "post_id": 48789090, "comment_id": 84580189, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3052579/explicit-specialization-in-non-namespace-scope\">Explicit specialization in non-namespace scope</a>"}, {"owner": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518617992, "post_id": 48789090, "comment_id": 84580476, "body": "I have the same problem by using a namespace"}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1518618392, "post_id": 48789090, "comment_id": 84580758, "body": "@werner Compiles fine: <a href=\"https://wandbox.org/permlink/kq40FRS2rOmo98Sv\" rel=\"nofollow noreferrer\">wandbox.org/permlink/kq40FRS2rOmo98Sv</a>"}, {"owner": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518619253, "post_id": 48789090, "comment_id": 84581410, "body": "@ liliscent: yes, you&#39;r right. In wandbox.org it compiles fine without boost::asio and with boost::asio. In MSVC it doesn&#39;t."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 0, "creation_date": 1518619735, "post_id": 48789090, "comment_id": 84581741, "body": "@werner Maybe you need to re-tag your question, since it&#39;s MSVC specific, it compiles fine both for clang and gcc."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518619053, "post_id": 48789495, "comment_id": 84581264, "body": "Thank you for your answer, but it&#39;s still the same problem. It doesn&#39;t matter if it is outside the class or outside the namespace."}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "reply_to_user": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518619166, "post_id": 48789495, "comment_id": 84581350, "body": "@werner Rename <code>OUT</code> to <code>T</code> or something"}, {"owner": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518619710, "post_id": 48789495, "comment_id": 84581726, "body": "THANKS! The problem is OUT. If i change to T or another character it works fine. OUT and IN doesn&#39;t work. What&#39;s the reason?"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "reply_to_user": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "edited": false, "score": 0, "creation_date": 1518619739, "post_id": 48789495, "comment_id": 84581745, "body": "@werner I suppose it comes from some Windows.h header"}], "tags": [], "owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "is_accepted": false, "score": 1, "last_activity_date": 1518619770, "last_edit_date": 1518619770, "creation_date": 1518618275, "answer_id": 48789495, "question_id": 48789090, "link": "https://stackoverflow.com/questions/48789090/compilation-error-c2976-with-boostasio-by-using-template-with-stdenable-if/48789495#48789495", "title": "Compilation error C2976 with boost::asio by using template with std::enable_if", "body": "<p>This caused by some bad <code>#define OUT ...</code> (see <kbd><a href=\"https://godbolt.org/g/63nSqo\" rel=\"nofollow noreferrer\">Live Repro</a></kbd>). </p>\n\n<p>Rename your <code>OUT</code> type parameter to something else and move the explicit specializations outside the class.</p>\n\n<pre><code>class Dummy {\npublic:\n    // ...\n    template&lt;typename T, typename std::enable_if&lt;isValidType&lt;T&gt;::value&gt;::type* dummy = nullptr&gt;\n    T doSomething() {  T out{}; return out; }\n}:\n\ntemplate&lt;&gt; struct Dummy::_isValidType&lt;bool&gt; : std::true_type {};\ntemplate&lt;&gt; struct Dummy::_isValidType&lt;int&gt; : std::true_type {};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9140983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f389bda357a02fe1438b0f52a4e7c1de?s=128&d=identicon&r=PG&f=1", "display_name": "werner", "link": "https://stackoverflow.com/users/9140983/werner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518619770, "creation_date": 1518616994, "last_edit_date": 1518618797, "question_id": 48789090, "link": "https://stackoverflow.com/questions/48789090/compilation-error-c2976-with-boostasio-by-using-template-with-stdenable-if", "title": "Compilation error C2976 with boost::asio by using template with std::enable_if", "body": "<p>I've written a c++ class that work's fine by using it in a test program. By using it in my project, there is a compilation error C2976. So i reduced the code to show the problem:</p>\n\n<p>source.h</p>\n\n<pre><code>#include &lt;type_traits&gt;\n//#include &lt;boost/asio.hpp&gt;\n\nnamespace myNS {\n\nclass Dummy {\npublic:\n   Dummy() {}\n   ~Dummy() {}\n\n   template&lt;class T&gt; struct _isValidType : std::false_type {};\n   template&lt;&gt; struct _isValidType&lt;bool&gt; : std::true_type {};\n   template&lt;&gt; struct _isValidType&lt;int&gt; : std::true_type {};\n   template&lt;class T&gt; struct isValidType : _isValidType&lt;std::remove_cv_t&lt;T&gt;&gt;::type {};\n\n   template&lt;typename OUT, typename std::enable_if&lt;isValidType&lt;OUT&gt;::value&gt;::type* dummy = nullptr&gt;\n   OUT doSomething() {  OUT out{}; return out; }\n};\n\n} /* namespace myNS */\n</code></pre>\n\n<p>source.cpp</p>\n\n<pre><code>#include \"source.h\"\n\nint main() {\n   myNS::Dummy d;\n   bool b = d.doSomething&lt;bool&gt;();\n}\n</code></pre>\n\n<p>There is no compilation error when boost::asio is not included. By including boost::asio the compiler runs in error on the last template definition:</p>\n\n<pre><code>source.h(14): error C2976: \"Dummy::isValidType\": Nicht gen\u00fcgend Vorlage-Argumente.\nsource.h(12): note: Siehe Deklaration von \"Dummy::isValidType\"\nsource.h(14): error C2955: \"Dummy::isValidType\" : F\u00fcr die Verwendung von Klasse Vorlage ist eine Vorlage-Argumentliste erforderlich\nsource.h(12): note: Siehe Deklaration von \"Dummy::isValidType\"\nsource.h(15): error C4430: Fehlender Typspezifizierer - int wird angenommen. Hinweis: \"default-int\" wird von C++ nicht unterst\u00fctzt.\n</code></pre>\n\n<p>Does anyone know this problem? Is it the fault of boost::asio, of MSVC, or is it my fault? In this example boost::asio is not necessary to be included, but in my project i have to include it.<br>\nI'm working with MS Visual Studio Community 2017 V 15.5.5 and use the boost library v1.66.0.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "objective-c++"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 4, "creation_date": 1518616830, "post_id": 48788978, "comment_id": 84579664, "body": "<code>__declspec</code> is a MSVC extension does Objective-C++ understand this ?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518616995, "post_id": 48788978, "comment_id": 84579767, "body": "There are probably no Microsoft-specific extensions in Objective C++."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518617044, "post_id": 48788978, "comment_id": 84579798, "body": "Alghouth several of hte __declspec and related are supported by GCC and Clang. Probably not in Objective C++ mode tho&#39;."}, {"owner": {"reputation": 395, "user_id": 4733625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8cac13c7f4ec54a01fbf7669ef24ded?s=128&d=identicon&r=PG&f=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/4733625/mykola"}, "edited": false, "score": 1, "creation_date": 1518617696, "post_id": 48788978, "comment_id": 84580271, "body": "Indeed - clang on OSX does not know about the __declspec."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1518618493, "post_id": 48788978, "comment_id": 84580818, "body": "It is the kind of code that is common when writing COM code.  It declares an interface, novtable tells the compiler to not generate the C++ class runtime overhead.  Not necessary because an interface always needs to be implemented by a concrete class.  COM is very strongly tied to Windows, the odds that this can come to a good end on an Apple OS are pretty low.  First basic obstacle is that your compiler does not understand what the declspec means.  Only the first."}], "owner": {"reputation": 395, "user_id": 4733625, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b8cac13c7f4ec54a01fbf7669ef24ded?s=128&d=identicon&r=PG&f=1", "display_name": "Mykola", "link": "https://stackoverflow.com/users/4733625/mykola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 631, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1518617890, "creation_date": 1518616687, "last_edit_date": 1518617890, "question_id": 48788978, "link": "https://stackoverflow.com/questions/48788978/variable-has-incomplete-type-class-declspec", "title": "Variable has incomplete type &#39;class __declspec&#39;", "body": "<p>I'm writing in Objective-C++ and one of my .mm files imports a cpp header with a class that implements abstract class.\nAbstract class looks like this:</p>\n\n<pre><code>class __declspec(novtable) IBase\n{\npublic:\n    virtual ~IBase() {}\n};\n</code></pre>\n\n<p>While compiling the sources I get this error: </p>\n\n<pre><code>error: variable has incomplete type 'class __declspec'\n</code></pre>\n\n<p>What is the reason of this error?</p>\n\n<p>UPD: It's worth to mention that I'm dealing with a crossplatform code that I'm refactoring.</p>\n\n<p>UPD1: Defining on a top of .mm</p>\n\n<pre><code>#define __declspec\n</code></pre>\n\n<p>didn't help.</p>\n"}, {"tags": ["c++", "multithreading", "compiler-optimization"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1518616724, "post_id": 48788974, "comment_id": 84579589, "body": "Probably waiting for IO requests."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1518617107, "post_id": 48788974, "comment_id": 84579843, "body": "What makes you think your program runs in parallel on multiple cores?"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "reply_to_user": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 1, "creation_date": 1518617424, "post_id": 48788974, "comment_id": 84580086, "body": "@Ron: That the total user/sys are significantly higher than &quot;real&quot; (aka &quot;wall clock time&quot;) is a pretty good sign that the process is running multiple threads. A single threaded application will have real &gt;= user + sys (give or take some measurement errors)"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518617491, "post_id": 48788974, "comment_id": 84580133, "body": "Of course, since <code>my_script</code> isn&#39;t shown to us, it&#39;s impossible to say WHAT happens inside that script, and what part of it takes what time."}, {"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1518617577, "post_id": 48788974, "comment_id": 84580202, "body": "@MatsPetersson I see. That explains it for me. Appreciate it."}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 1, "creation_date": 1518617906, "post_id": 48788974, "comment_id": 84580409, "body": "It&#39;s impossible to answer WHY your application is using multiple threads, without understanding what your code looks like (and plausibly not then either!). Maybe you&#39;re calling on a library that splits the work into multiple cores. Generally, the compiler will not do this, but there are plenty of libraries that automatically detect multiple cores and spread the work over these. Compiler options probably don&#39;t make any difference here."}, {"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 0, "creation_date": 1518627974, "post_id": 48788974, "comment_id": 84587433, "body": "My first guess would be that you have started the same application multiple times. Are you sure that you are only running one instance of the program?"}, {"owner": {"reputation": 15, "user_id": 9033760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92391045e24c994e01b186afa3fa49dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9033760/stefan"}, "edited": false, "score": 0, "creation_date": 1518698269, "post_id": 48788974, "comment_id": 84617693, "body": "Thanks for the comments, it really helped me find the answer. How can I mark this question as answered/remove it (since it has no real value to anyone else)?"}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "edited": false, "score": 0, "creation_date": 1518818704, "post_id": 48788974, "comment_id": 84675743, "body": "@Stefan You can post the answer yourself."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 9033760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92391045e24c994e01b186afa3fa49dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9033760/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1519046874, "creation_date": 1519046874, "answer_id": 48867280, "question_id": 48788974, "link": "https://stackoverflow.com/questions/48788974/htop-displays-multiple-cores-in-use-for-one-process-without-use-of-multithreadin/48867280#48867280", "title": "htop displays multiple cores in use for one process without use of multithreading", "body": "<p>Thanks for the comments on possible reasons for the multi core use of my program. I found the following to be the cause:</p>\n\n<p>I used Armadillo (linear algebra library for c++) in my program, which parallelizes some of its functions without the use of MPI, but LAPACK and BLAS (as stated in <a href=\"https://stackoverflow.com/questions/22389117/parallelisation-in-armadillo\">this question</a>).</p>\n"}], "owner": {"reputation": 15, "user_id": 9033760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92391045e24c994e01b186afa3fa49dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/9033760/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "accepted_answer_id": 48867280, "answer_count": 1, "score": 0, "last_activity_date": 1519046874, "creation_date": 1518616671, "last_edit_date": 1518618757, "question_id": 48788974, "link": "https://stackoverflow.com/questions/48788974/htop-displays-multiple-cores-in-use-for-one-process-without-use-of-multithreadin", "title": "htop displays multiple cores in use for one process without use of multithreading", "body": "<p>I wrote a C++ program, which does not use multi-threading, but is compiled with either <code>-O2</code>, <code>-O3</code> or -Ofast flag to optimize speed.</p>\n\n<p>The program is named <code>mir.out</code> and run from the bash script <code>my_script</code>. Run time is determined with:</p>\n\n<pre><code>time bash my_script\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>real    18m26.001s\nuser    56m4.507s\nsys     91m14.536s\n</code></pre>\n\n<p>From this I concluded that multiple cores run in parallel (I have 8 cores) since user and sys time is much larger than real time. Is this correct?</p>\n\n<p>With htop I tested this and find the following </p>\n\n<p><img src=\"https://i.stack.imgur.com/Oeulu.png\" alt=\"htop with filter output\"> </p>\n\n<p>which indicates that all cores are used by the program. When the program is finished the </p>\n\n<p><img src=\"https://i.stack.imgur.com/CFEC4.png\" alt=\"htop output\"> </p>\n\n<p>shows only minor use of the cores.</p>\n\n<p>I did not use any function from STL which can be parallelized (see <a href=\"https://gcc.gnu.org/onlinedocs/libstdc++/manual/parallel_mode.html\" rel=\"nofollow noreferrer\">Parallelization in STL</a>) nor did I find any flags hidden in -O2, -O3 or -Ofast, that would automate parallelization (see <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">compiler flgas for optimization</a>).</p>\n\n<p>So my question is, why is my program using multiple cores?</p>\n\n<p>Edit: Thanks to the comments I found the answer:</p>\n\n<p>I used the armadillo library for linear algebra. I thought it needs OpenMPI for multi-threading but some research showed that with BLAS and LAPACK this is already possible.</p>\n"}, {"tags": ["c++", "int", "cmath"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1518615524, "post_id": 48788564, "comment_id": 84578730, "body": "On a normal PC, the <code>int</code> type is a signed <b><i>32-bit</i></b> type, which means it can have values from around minus two billion to plus two billion. <code>99999999999999999999</code> is not within that range."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 2, "creation_date": 1518615529, "post_id": 48788564, "comment_id": 84578731, "body": "Do you think <code>99999999999999999999</code> could be stored in an <code>int</code> without overflow? You probably need <code>long long int</code>, or <code>long int</code>. (But these may have the same size as <code>int</code>)."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1518615531, "post_id": 48788564, "comment_id": 84578735, "body": "See related: <a href=\"https://stackoverflow.com/questions/1855459/maximum-value-of-int\">stackoverflow.com/questions/1855459/maximum-value-of-int</a> basically you&#39;re overflowing the max value of <code>int</code> so it wraps around"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1518615559, "post_id": 48788564, "comment_id": 84578749, "body": "check what is the value of <code>std::numeric_limits&lt;int&gt;::max()</code> and compare that to the result you expect to get"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1518615605, "post_id": 48788564, "comment_id": 84578786, "body": "Furthermore, overflowing a signed integer type leads to <i>undefined behavior</i>. What most likely will happen is that it becomes negative as that&#39;s how <a href=\"https://en.wikipedia.org/wiki/Two&#39;s_complement\" rel=\"nofollow noreferrer\">two&#39;s complement</a> (the most common way to represent negative numbers) works."}, {"owner": {"reputation": 130, "user_id": 8781554, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t9Cm8.png?s=128&g=1", "display_name": "Xam", "link": "https://stackoverflow.com/users/8781554/xam"}, "reply_to_user": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1518615759, "post_id": 48788564, "comment_id": 84578905, "body": "@Arnav Borborah isn&#39;t the size of <code>long long int</code> twice the size of <code>int</code>?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1518615848, "post_id": 48788564, "comment_id": 84578958, "body": "<code>long long int</code> can be the same as <code>int</code> if the CPU does not have support for larger integers. There is no requirement that it has to be bigger just that it is at least as big."}, {"owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "edited": false, "score": 0, "creation_date": 1518615979, "post_id": 48788564, "comment_id": 84579045, "body": "std::numeric_limits&lt;int&gt;::max()    worked :). Thank you!"}, {"owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "edited": false, "score": 0, "creation_date": 1518616172, "post_id": 48788564, "comment_id": 84579197, "body": "I also needed to make other <code>int</code> to be <code>long int</code>"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1518616188, "post_id": 48788564, "comment_id": 84579208, "body": "std::numeric_limits&lt;int&gt;::max():  2,147,483,647; std::numeric_limits&lt;int32_t&gt;::max():  2,147,483,647;  std::numeric_limits&lt;int&gt;::digits (Non-sign bits in int): 31 std::numeric_limits&lt;int64_t&gt;::min(): -9,223,372,036,854,775,808, std::numeric_limits&lt;uintptr_t&gt;::max(): 18,446,744,073,709,551,615;      std::numeric_limits&lt;int64_t&gt;::digits (Non-sign bits in int): 63 std::numeric_limits&lt;uint64_t&gt;::digits (Non-sign bits in int): 64"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1518615855, "post_id": 48788671, "comment_id": 84578965, "body": "the maximum value for int could be 2147483647-5 as well, <code>std::numeric_limits&lt;int&gt;::max()</code> may return different values"}, {"owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "edited": false, "score": 0, "creation_date": 1518615909, "post_id": 48788671, "comment_id": 84579005, "body": "Thanks, it worked! :)"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518616274, "post_id": 48788671, "comment_id": 84579285, "body": "@user463035818: yep, with probability 10^-128."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1518616819, "post_id": 48788671, "comment_id": 84579657, "body": "@YvesDaoust why risking UB in 10^-128 of all cases when you can make it 0."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518619343, "post_id": 48788671, "comment_id": 84581486, "body": "@user463035818: because of the base-3 computers, such as the Setun. A full ports of C++ to these machines is unlikely."}], "tags": [], "owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "is_accepted": true, "score": 2, "last_activity_date": 1518616039, "last_edit_date": 1518616039, "creation_date": 1518615770, "answer_id": 48788671, "question_id": 48788564, "link": "https://stackoverflow.com/questions/48788564/c-getting-a-negative-value-when-adding-two-absolute-positive-values/48788671#48788671", "title": "c++ getting a negative value when adding two absolute (positive) values", "body": "<p>The maximum value for <code>int</code> is 2147483647 (which is 2^31-1, assuming <code>int</code> has 32 bits width). You can check it with </p>\n\n<pre><code>std::numeric_limits&lt;int&gt;::max();\n</code></pre>\n\n<p>You might want to <code>min</code> with this value here. And also use <code>long long</code> as your type for calculations here.</p>\n"}], "owner": {"reputation": 45, "user_id": 7936952, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b700b269914fb5143d505513d0079ec0?s=128&d=identicon&r=PG&f=1", "display_name": "slicebattle", "link": "https://stackoverflow.com/users/7936952/slicebattle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "closed_date": 1518616135, "accepted_answer_id": 48788671, "answer_count": 1, "score": 1, "last_activity_date": 1518616039, "creation_date": 1518615443, "question_id": 48788564, "link": "https://stackoverflow.com/questions/48788564/c-getting-a-negative-value-when-adding-two-absolute-positive-values", "closed_reason": "Duplicate", "title": "c++ getting a negative value when adding two absolute (positive) values", "body": "<p>I am getting a strange problem. I am getting a negative value when adding two absolute (positive) values. I am trying to solve this exercise from codingame (link: <a href=\"https://www.codingame.com/ide/puzzle/network-cabling\" rel=\"nofollow noreferrer\">https://www.codingame.com/ide/puzzle/network-cabling</a>).</p>\n\n<p>I tried debugging and I got this:</p>\n\n<pre><code>X[i]: 19715507  X[j]: 938059973   // This one is good\ntemp: 918344466   \n\nY[i]: 470868309  Y[j]: -816049599 //Something is wrong here\ntemp: -2089704922\n</code></pre>\n\n<p>This code is probably not a good solution to the exercise and I will need to improve it, but I still can't figure it out why the value is negative. </p>\n\n<p>Please help.</p>\n\n<p>Thank you.</p>\n\n<p>Code:</p>\n\n<pre><code>int main()\n{\n\n    int N;\n    int X[100000];\n    int Y[100000];\n\n    cin &gt;&gt; N; cin.ignore();\n    for (int i = 0; i &lt; N; i++) {   //reading all input\n\n        cin &gt;&gt; X[i] &gt;&gt; Y[i]; cin.ignore();\n    }\n\n    int ilgis=0;   //ilgis means length\n\n    for(int i=0; i&lt;N-1; i++){       //\"min\" is set to a very high value \n                                    //so it could find a lower value later\n                                    // \"not the best solution\"\n\n        int min=99999999999999999999;   //shortest distance between houses\n        for(int j=0; j&lt;N; j++){    // here I am trying to find the shortest \n                                   // distance from one house to another\n\n            if(j!=i){     //I can't count distance from the same house because \n                          // it would be 0\n\n                int temp=0;\n                                    //counting the distance differently if the \n                                    //value is negative or positive\n\n                if(X[i]&lt;=0&amp;&amp;X[j]&lt;=0) temp+=abs(abs(X[i])-abs(X[j]));\n                else if(X[i]&lt;=0&amp;&amp;X[j]&gt;=0) temp+=abs(X[i])+abs(X[j]);\n                else if(X[i]&gt;=0&amp;&amp;X[j]&gt;=0) temp+=abs(X[i]-X[j]);\n                else if(X[i]&gt;=0&amp;&amp;X[j]&lt;=0) temp+=(X[i])+abs(X[j]);\n\n                                       //same with y axis\n\n                if(Y[i]&lt;=0&amp;&amp;Y[j]&lt;=0) temp+=abs(abs(Y[i])-abs(Y[j]));\n                else if(Y[i]&lt;=0&amp;&amp;Y[j]&gt;=0) temp+=abs(Y[i])+abs(Y[j]);\n                else if(Y[i]&gt;=0&amp;&amp;Y[j]&gt;=0) temp+=abs(Y[i]-Y[j]);\n                else if(Y[i]&gt;=0&amp;&amp;Y[j]&lt;=0) temp+=(Y[i])+abs(Y[j]); \n\n                if(min&gt;temp) min=temp;  \n                }\n            }                   //if i found the shortesst distance between \n                                //houses I add that value to overall distance\n                                // and continue until all houses are checked\n        ilgis+=min;\n\n        }\n    cout&lt;&lt;ilgis&lt;&lt;endl;\n}\n</code></pre>\n\n<p>Input of the exercise:</p>\n\n<pre><code> 8\n-28189131 593661218\n102460950 1038903636\n938059973 -816049599\n-334087877 -290840615\n842560881 -116496866\n-416604701 690825290\n19715507 470868309\n846505116 -694479954\n</code></pre>\n"}, {"tags": ["c++", "const-correctness"], "comments": [{"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 7, "creation_date": 1518615363, "post_id": 48788503, "comment_id": 84578630, "body": "Why would you pass something by const reference if you plan on modifying it? I would suggest you make a copy of the element gained by const reference, such as how the STL containers manage their data, and store the address of this data."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1518615736, "post_id": 48788503, "comment_id": 84578892, "body": "So you want that the value <code>data</code> is pointing to cannot be changed, but that the pointer <code>data</code> can be changed?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1518615880, "post_id": 48788503, "comment_id": 84578982, "body": "Change <code>T* data;</code> to <code>T const* data;</code>.  But I advise against holding a pointer to an object that is not owned by the important_structure."}], "answers": [{"comments": [{"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518620838, "post_id": 48788596, "comment_id": 84582544, "body": "I agree that casting const away is indeed a bad practice. That&#39;s why I asked the question :) Maybe it&#39;s a noob question, but I though that const in function parameters meant that the reference didn&#39;t change within the function. Isn&#39;t that the reason why the overloading of operator == (or +,- and so on) have all const references?"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "reply_to_user": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 1, "creation_date": 1518623205, "post_id": 48788596, "comment_id": 84584087, "body": "@Koldar Such a narrow definition is not consistent with the rest of the language, otherwise you would not be getting the compiler error in the first place (i.e. that assigning a <code>const int *</code> to an <code>int *</code> variable is forbidden, even though it does not change the pointee). Also, you are inviting UB when an unsuspecting caller gives you a reference to a <code>const</code> object and unwittingly calls <code>change()</code> later. If you need to put a documentation note that the <code>const int &amp;</code> cannot safely refer to a <code>const</code> object, you know that your design is troubled. Also, trust your language elders. ;-)"}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518633093, "post_id": 48788596, "comment_id": 84590031, "body": "I&#39;m trying to change my mindset: with the sentence &quot;passing el as a const reference doesn&#39;t just mean the function will not change el during the run of the function, it means because of this function call, el won&#39;t be changed at all&quot; are you saying that with such function prototype I&#39;m forced to inject to function always constants? I come from C and I know const in C++ is pretty different from C, thus my doubts"}], "tags": [], "owner": {"reputation": 1395, "user_id": 3808426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6388b9d4ea9d6e02525fa212aa9d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Demosthenes", "link": "https://stackoverflow.com/users/3808426/demosthenes"}, "is_accepted": false, "score": 3, "last_activity_date": 1518615537, "creation_date": 1518615537, "answer_id": 48788596, "question_id": 48788503, "link": "https://stackoverflow.com/questions/48788503/const-correctness-in-struct-initialization/48788596#48788596", "title": "Const correctness in struct initialization", "body": "<p>passing <code>el</code> as a <code>const</code> reference doesn't just mean the function will not change <code>el</code> during the run of the function, it means because of this function call, <code>el</code> won't be changed at all. And by putting the address of <code>el</code> into non-const <code>data</code>, you violate that promise.</p>\n\n<p>So, the clean solution, if you indeed want to change data, is removing the <code>const</code>. since it is not informative to future developers, but misleading. Casting away the <code>const</code> would be very bad here.</p>\n"}, {"comments": [{"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "edited": false, "score": 0, "creation_date": 1518618552, "post_id": 48788744, "comment_id": 84580872, "body": "Yet it can&#39;t <i>alter data field in some way</i>. Or not?"}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "edited": false, "score": 0, "creation_date": 1518619403, "post_id": 48788744, "comment_id": 84581527, "body": "@p-a-o-l-o in the question there is this sentence <code>[...]it clearly says that el won&#39;t be modified by the function. Still the field data may be modified by some other function in important_structure.[...].</code> With the given code the object <code>data</code> is pointing to cannot be modified, but <code>data</code> itself can be changed. In <code>change</code> you could write <code>data = nullptr</code>, but not <code>*data = 2</code>"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "edited": false, "score": 0, "creation_date": 1518619900, "post_id": 48788744, "comment_id": 84581883, "body": "If the OP only wants to <b>assign</b> something else to <code>data</code> in the <code>change</code> method, yours should be the correct answer, then."}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518620358, "post_id": 48788744, "comment_id": 84582215, "body": "Ok, I think I wrote the question in a vague way, my fault. Generally, <code>change</code> method may alter data not only via assignment, but changing data fields as well. The idea is that <code>important_structure</code> is just a container of an instance of <code>T</code> type. By the sentence &quot; it clearly says that el won&#39;t be modified by the function&quot; I meant the constructor (indeed the constructor doesn&#39;t change anything in the first function parameter given [<code>el</code>]). However, I don&#39;t want to transfer such &quot;constness&quot; to the data structure as well, hence my question."}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518620511, "post_id": 48788744, "comment_id": 84582330, "body": "@t.niese by using <code>const</code> in the data structure I&#39;m saying that <code>important_structure</code> <code>data</code> field is readonly. But If <code>important_structure</code> is the only access point to the particular <code>T</code> instance, I prevent anhy changes to the <code>T</code> instance, which I don&#39;t want to. This is why I&#39;m not inclined to add constness to the data structure itself. Maybe I&#39;m trying to solve the issue in the wrong way..."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518620630, "post_id": 48788744, "comment_id": 84582410, "body": "@Koldar the const in an parameter says that it is save to pass a data to it, without it being  changed directly or anytime in the function as result of passing it there. So in this case <code>const</code> must not be in the costructor, because, the element might be changed."}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518621102, "post_id": 48788744, "comment_id": 84582715, "body": "ok, I think the constructor of <code>important_structure</code> perfectly fit in the situation you&#39;ve described. My point is that the field in data structure does not fit: if <code>data</code> is the only pointer to said structure, and if I want to change such <code>data</code> field, the solution of putting <code>const</code> into the data structure prevents any changes. That would lead to the removal of <code>const</code> in the costructor for sake of const correctness but.... why should I sacrifice useful information for the maintainer?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 2, "creation_date": 1518623036, "post_id": 48788744, "comment_id": 84583979, "body": "@Koldar \u2022 I am having difficulty following your explanation.  The <code>const</code> would be part of the API contract.  If you don&#39;t want it to be <code>const</code> (for whatever reason), don&#39;t put <code>const</code> in the API.  If the API lies, then that would be terribly misleading information to the lament of the maintainer."}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518633896, "post_id": 48788744, "comment_id": 84590446, "body": "But it&#39;s indeed true that the constructor of <code>important_structure</code> doesn&#39;t alter in any way <code>el</code>. Is there no way to tell this information to future developers in the constructor prototype?"}], "tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": false, "score": 0, "last_activity_date": 1518616383, "last_edit_date": 1518616383, "creation_date": 1518615991, "answer_id": 48788744, "question_id": 48788503, "link": "https://stackoverflow.com/questions/48788503/const-correctness-in-struct-initialization/48788744#48788744", "title": "Const correctness in struct initialization", "body": "<p>Using <code>const T&amp; el</code> and <code>data(&amp;el)</code> is a really bad idea, because it implies that you could write:</p>\n\n<pre><code>new important_structure&lt;int&gt;{5, 3};\n</code></pre>\n\n<p>But to write <code>new important_structure&lt;int&gt;{5, 3};</code> would result in data holding an address that would no longer be valid immediately after calling the constructor.</p>\n\n<p>If you want that the point <code>data</code> can be changed, but that the <code>value</code> where the pointer points to cannot be changed, then you want to write it that way:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct important_structure {\n    public:\n    T const * data;\n    int a;\n    important_structure(T const * el, int a);\n    void change();\n};\n\ntemplate &lt;typename T&gt;\nvoid important_structure&lt;T&gt;::change() {\n    //alter data field in some way\n}\n\ntemplate &lt;typename T&gt;\nimportant_structure &lt;T&gt;::important_structure( T const * el, int a) : data(el), a(a) { //error line \n};\n\n\nint main() {\n    int i = 5;\n    important_structure&lt;int&gt;* s = new important_structure&lt;int&gt;{&amp;i, 3};\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518766875, "post_id": 48792453, "comment_id": 84647457, "body": "ok, can you please explain how do you define the field &quot;data&quot; within the structure? const or not? And how do you initialize it? I feel I&#39;m missing something very important. BTW nice for the move operations... I didn&#39;t know those"}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518767576, "post_id": 48792453, "comment_id": 84647788, "body": "I think you wanted to wrap an instance of <code>T</code> (<code>data</code>) inside an instance of <code>important_structure</code>, but many details are missing. Where is this instance  constructed/initialized? What happens after assigning it to an <code>important_structure</code> instance? Is <code>important_structure</code> the only one who can access it? If yes, we can say the <code>data</code> resource is <i>owned by</i> <code>important_structure</code>. Is this what you want? In my example I suggest to <b>not</b> hold the instance, but have methods that accepts one and explicitly say if they&#39;re only reading it or modifying it."}, {"owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518769632, "post_id": 48792453, "comment_id": 84648812, "body": "You&#39;re right: I definitevely missed lots of details. In this case <code>important_structure</code> is initialized on the heap and so does the field <code>data</code>; I prefer <code>important_structure</code> to be the main entry access of the field <code>data</code>, hence I wish to be modifiable. In this sense we can say that <code>data</code> is <i>owned</i> by <code>important_structure</code> (but access to the field <code>data</code> is not private). I feel like <code>important_structure</code> behave like a container. Hope I replied to all your questions."}, {"owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "reply_to_user": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "edited": false, "score": 0, "creation_date": 1518793486, "post_id": 48792453, "comment_id": 84662868, "body": "Edited again, sorry."}], "tags": [], "owner": {"reputation": 8919, "user_id": 8873508, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2uDHi.png?s=128&g=1", "display_name": "p-a-o-l-o", "link": "https://stackoverflow.com/users/8873508/p-a-o-l-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1518793314, "last_edit_date": 1518793314, "creation_date": 1518627386, "answer_id": 48792453, "question_id": 48788503, "link": "https://stackoverflow.com/questions/48788503/const-correctness-in-struct-initialization/48792453#48792453", "title": "Const correctness in struct initialization", "body": "<p>Let's use a simple class as <code>T</code> type of <code>important_struct</code>:</p>\n\n<pre><code>class Data\n{\npublic:\n    Data() : something(0){}\n    Data(int i) : something(i){}\n    Data(const Data &amp; d) : something(d.something){}\n\n    //non-const method: something can be modified\n    void changeSomething(int s){ something += s; }\n\n    //const method: something is read-only\n    int readSomething() const { return something; } \n\nprivate:\n    int something;\n};\n</code></pre>\n\n<p>This class has a very simple, yet well encapsulated, status, i.e. the <code>int something</code> field, which is accessed through methods in a very controlled way.</p>\n\n<p>Let (a simplified version of) <code>important_structure</code> hold an instance of <code>Data</code> as a <strong>private</strong> field:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct important_structure\n{\npublic:\n    important_structure(T * el);\n    void change();\n    int read() const;\nprivate:\n    T* data;\n};\n</code></pre>\n\n<p>We can assign a <code>Data</code> instance to an <code>important_structure</code> instance this way:</p>\n\n<pre><code>important_structure&lt;Data&gt; s(new Data());\n</code></pre>\n\n<p>The instance is assigned in construction:</p>\n\n<pre><code>template &lt;typename T&gt;\nimportant_structure &lt;T&gt;::important_structure(T * el) : data(el) {}\n</code></pre>\n\n<p>Now the great question: do <code>important_structure</code> <strong>take ownership</strong> of the <code>Data</code> instances it holds? The answer must be made clear in <strong>documentation</strong>.</p>\n\n<p>If it is <em>yes</em>, <code>important_structure</code> must take care of memory cleanup, e.g.  a destructor like this one is required:</p>\n\n<pre><code>template&lt;typename T&gt;\nimportant_structure&lt;T&gt;::~important_structure()\n{\n    delete data;\n}\n</code></pre>\n\n<p>Notice that, in this case: </p>\n\n<pre><code>  Data * p = new Data()\n\n  // ...\n\n  important_structure&lt;Data&gt; s(p);\n\n  //p is left around ...\n</code></pre>\n\n<p>another pointer to the <code>Data</code> istance is left around. What if someone mistakenly call <code>delete</code> on it? Or, even worse:</p>\n\n<pre><code>  Data d;\n\n  // ...\n\n  important_structure&lt;Data&gt; s(&amp;p); //ouch\n</code></pre>\n\n<p>A much better design would let <code>important_structure</code> own <strong>its own</strong> <code>Data</code> instance :</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct important_structure\n{\npublic:\n    important_structure();\n    void change();\n    // etc ...\nprivate:\n    T data; //the instance\n};\n</code></pre>\n\n<p>but this is maybe simplistic or just unwanted.</p>\n\n<p>One could let <code>important_structure</code> <strong>copy</strong> the instance it will own:</p>\n\n<pre><code>template&lt;typename T&gt;\nimportant_structure&lt;T&gt;::important_structure(const T &amp;el)\n{\n    data = el;\n}\n</code></pre>\n\n<p>the latter being the constructor provided in the question: the object passed won't be touched, but copied. Obviously, there are two identical <code>Data</code> objects around, now. Again, the result could not be what we needed in the first place.</p>\n\n<p>There is a third way, in the middle: the object is instantiated outside the owner, and <strong>moved</strong> to it, using <a href=\"https://stackoverflow.com/questions/3106110/what-are-move-semantics\">move semantics</a>.</p>\n\n<p>As an example, let's give <code>Data</code> a move assignment operator:</p>\n\n<pre><code>Data &amp; operator=(Data &amp;&amp; d)\n{\n    this-&gt;something = d.something;\n    d.something = 0;\n    return *this;\n}\n</code></pre>\n\n<p>and let <code>important_structure</code> provide a constructor which accepts an rvalue reference of <code>T</code>:</p>\n\n<pre><code>important_structure(T &amp;&amp; el)\n{\n    data = std::move(el);\n}\n</code></pre>\n\n<p>One can still pass a <code>Data</code> instance using a temporary as the required rvalue:</p>\n\n<pre><code>important_structure&lt;Data&gt; s(Data(42));\n</code></pre>\n\n<p>or an existing one, providing the required reference from an lvalue, thanks to   <a href=\"http://en.cppreference.com/w/cpp/utility/move\" rel=\"nofollow noreferrer\">std::move</a>:</p>\n\n<pre><code>Data d(42);\n\n// ...\n\nimportant_structure&lt;Data&gt; x(std::move(d));\nstd::cout &lt;&lt; \"X: \" &lt;&lt; x.read() &lt;&lt; std::endl;\nstd::cout &lt;&lt; \"D: \" &lt;&lt; d.readSomething() &lt;&lt; std::endl;\n</code></pre>\n\n<p>In this second example, the copy held by <code>important_structure</code> is considered <em>the good one</em> while the other is left <strong>in a valid but unspecified state</strong>, just to follow the standard library habits. </p>\n\n<p>This pattern is, IMHO, more clearly stated right in code, expecially if considered that this code will not compile:</p>\n\n<pre><code>Data d(42);\nimportant_structure&lt;Data&gt; x (d);\n</code></pre>\n\n<p>Whoever wants an instance of <code>important_structure</code> must provide a temporary  <code>Data</code> instance or explicitly move an existing one with <code>std::move</code>.</p>\n\n<p>Now, let the <code>important_structure</code> class be a <em>container</em>, as you asked in comment, so that <code>data</code> is somehow accessible from outside. Let's give a method like this to the <code>important_structure</code> class:</p>\n\n<pre><code>const T &amp; owneddata() { return data; }\n</code></pre>\n\n<p>Now, we can use <code>data</code> const methods like this:</p>\n\n<pre><code>important_structure&lt;Data&gt; s(Data(42));\n\nstd::cout &lt;&lt; s.owneddata().readSomething() &lt;&lt; std::endl;\n</code></pre>\n\n<p>but calls to `Data' non-const methods will not compile:</p>\n\n<pre><code>s.owneddata().changeSomething(1000); //not compiling ...\n</code></pre>\n\n<p>If in need of it (hope not), expose a non-const reference:</p>\n\n<pre><code>T &amp; writablereference() { return data; }\n</code></pre>\n\n<p>Now the <code>data</code> field is at full disposal:</p>\n\n<pre><code>s.writablereference().changeSomething(1000); //non-const method called\nstd::cout &lt;&lt; s.owneddata().readSomething() &lt;&lt; std::endl;\n</code></pre>\n"}], "owner": {"reputation": 1109, "user_id": 1887602, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5520b4adf006e9c93ccbcca0036b4e94?s=128&d=identicon&r=PG&f=1", "display_name": "Koldar", "link": "https://stackoverflow.com/users/1887602/koldar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "answer_count": 3, "score": 7, "last_activity_date": 1518793314, "creation_date": 1518615197, "question_id": 48788503, "link": "https://stackoverflow.com/questions/48788503/const-correctness-in-struct-initialization", "title": "Const correctness in struct initialization", "body": "<p>I'm playing with C++ and const-correctness right now.\nAssume you have the following structure</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct important_structure {\n    public:\n    T* data;\n    int a;\n    important_structure(const T&amp; el, int a);\n    void change();\n};\n\ntemplate &lt;typename T&gt;\nvoid important_structure&lt;T&gt;::change() {\n    //alter data field in some way\n}\n\ntemplate &lt;typename T&gt;\nimportant_structure &lt;T&gt;::important_structure(const T&amp; el, int a) : data(&amp;el), a(a) //error line {\n};\n\n\nint main() {\n    important_structure&lt;int&gt;* s = new important_structure&lt;int&gt;{5, 3};\n}\n</code></pre>\n\n<p>When compiling with <code>std=c++11</code>, the compiler returns the following error:</p>\n\n<blockquote>\n  <p>invalid conversion from \u2018const int*\u2019 to \u2018int*\u2019</p>\n</blockquote>\n\n<p>Now, I know it's unsafe to cast a <code>const int*</code> to <code>int*</code>. The problem is that I have a data structure and I don't want to put the field <code>data</code> as a constant.</p>\n\n<p>However, I don't want to remove  the <code>const</code> qualifier in the constructor since, I think, it's informative for future developers: it clearly says that <code>el</code> won't be modified by the function. Still the field <code>data</code> may be modified by some other function in <code>important_structure</code>.</p>\n\n<p>My question is: How can I deal with fields which are initialized in the costructor and altered in some other function?\nMost of const correctness deals with simple answers, but no question (I think) deals with scenarios where a const parameter is passed to a data structure and then such data structure is altered by someone else.</p>\n\n<p>Thanks for any kind reply</p>\n"}, {"tags": ["c++", "return-value"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1518614942, "post_id": 48788405, "comment_id": 84578354, "body": "<b><i>what does abnormal termination have to do with the destructors</i></b> Nothing at all."}, {"owner": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1518615109, "post_id": 48788405, "comment_id": 84578459, "body": "@drescherjm, you are correct, but surely <a href=\"http://en.cppreference.com/w/cpp/utility/program/exit\" rel=\"nofollow noreferrer\"><code>std::exit(-45)</code></a> may not call destructors of objects with <i>automatic storage duration</i>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1518615121, "post_id": 48788405, "comment_id": 84578468, "body": "<b><i>What is the difference between return 0 (normal termination) and return 1 (abnormal termination) ?</i></b> When a program fails for whatever reason it is supposed to tell the calling process that it failed. Returning 0 means the program ran successfully. Returning any other number indicates a failure."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 19910, "user_id": 1621391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ec331963e9d60347c1e80e294b14940c?s=128&d=identicon&r=PG", "display_name": "WhiZTiM", "link": "https://stackoverflow.com/users/1621391/whiztim"}, "edited": false, "score": 0, "creation_date": 1518615188, "post_id": 48788405, "comment_id": 84578514, "body": "@WhiZTiM agreed."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1518617485, "post_id": 48788405, "comment_id": 84580128, "body": "Formally, <code>return 1</code> has no portable meaning. You can <code>return EXIT_SUCCESS</code>, <code>return EXIT_FAILURE</code>, or <code>return 0</code>. That last one is equivalent to <code>return EXIT_SUCCESS</code>. The meaning of any other value depends on your compiler and OS."}], "answers": [{"tags": [], "owner": {"reputation": 5000, "user_id": 8405835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sN3eq.png?s=128&g=1", "display_name": "Abhijit Pritam Dutta", "link": "https://stackoverflow.com/users/8405835/abhijit-pritam-dutta"}, "is_accepted": false, "score": 1, "last_activity_date": 1518616216, "last_edit_date": 1518616216, "creation_date": 1518615876, "answer_id": 48788699, "question_id": 48788405, "link": "https://stackoverflow.com/questions/48788405/difference-between-normal-and-abnormal-termination-c/48788699#48788699", "title": "Difference between normal and abnormal termination C++", "body": "<p>In every operating system exit with a return value. Most of the cases it is either <code>0</code> successful completion and <code>1</code> or any larger or smaller value for  unsuccessful completion. Destructor nothing to do with return with <code>0</code> or <code>1</code>. Destructor is to release memory inside a programed to avoid memory leak or proper memory management. Hence destructor is nothing to do with exit status of a program. To know whether a program executed successfully or not we can check like below:-</p>\n\n<p>In UNIX you can check the value of <code>$?</code> whether process successful or not. It will return <code>0</code> if successful and <code>1</code> or a larger value to indicate that process failed.</p>\n\n<p>To check a exit status of a process in Windows o/s we use <code>%errorlevel%</code></p>\n"}, {"tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": true, "score": 2, "last_activity_date": 1518615879, "creation_date": 1518615879, "answer_id": 48788700, "question_id": 48788405, "link": "https://stackoverflow.com/questions/48788405/difference-between-normal-and-abnormal-termination-c/48788700#48788700", "title": "Difference between normal and abnormal termination C++", "body": "<p>The app can be started by a script rather than by a user manually. So, returning a error indicator may help the script to alter execution flow according to exact error code returned (so the script can retry the call again after a timeout, or terminate the script with error code for outer script if any, or call an alternative code as a fallback plan, etc.)</p>\n"}], "owner": {"reputation": 27, "user_id": 9360176, "user_type": "registered", "profile_image": "https://graph.facebook.com/1962956020400610/picture?type=large", "display_name": "Zextro", "link": "https://stackoverflow.com/users/9360176/zextro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1677, "favorite_count": 0, "accepted_answer_id": 48788700, "answer_count": 2, "score": 0, "last_activity_date": 1518616216, "creation_date": 1518614883, "question_id": 48788405, "link": "https://stackoverflow.com/questions/48788405/difference-between-normal-and-abnormal-termination-c", "title": "Difference between normal and abnormal termination C++", "body": "<p><strong>C++</strong> <strong>:</strong>\nWhat is the difference between return 0 (normal termination) and return 1 (abnormal termination) ? what does abnormal termination have to do with the destructors </p>\n"}, {"tags": ["c++", "mingw", "cross-compiling", "32bit-64bit", "winsock"], "comments": [{"owner": {"reputation": 282, "user_id": 9015013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3d083e8707051e81ed4e7a3830a418?s=128&d=identicon&r=PG&f=1", "display_name": "Karol T.", "link": "https://stackoverflow.com/users/9015013/karol-t"}, "edited": false, "score": 0, "creation_date": 1518614947, "post_id": 48788386, "comment_id": 84578355, "body": "I think you should paste some example how you use the sockets. Without code it is hard to say what you do wrong."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 8648676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDXx6ACdGi0/AAAAAAAAAAI/AAAAAAAAAAc/9WvK7RZTcIw/photo.jpg?sz=128", "display_name": "Georgios Leventis", "link": "https://stackoverflow.com/users/8648676/georgios-leventis"}, "is_accepted": false, "score": 0, "last_activity_date": 1518617562, "creation_date": 1518617562, "answer_id": 48789272, "question_id": 48788386, "link": "https://stackoverflow.com/questions/48788386/mingw-compiled-executable-with-networking-wont-run-on-x64-systems/48789272#48789272", "title": "MinGW compiled executable with networking won&#39;t run on x64 systems", "body": "<p>Eventually I solved my problem. The problem was that the VMs had npcap installed with Wireshark which created a loopback virtual nic. For some reason the program did not work while this interface was connected. </p>\n\n<p>The packet sent was a UDP broadcast packet.</p>\n"}], "owner": {"reputation": 25, "user_id": 8648676, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-rDXx6ACdGi0/AAAAAAAAAAI/AAAAAAAAAAc/9WvK7RZTcIw/photo.jpg?sz=128", "display_name": "Georgios Leventis", "link": "https://stackoverflow.com/users/8648676/georgios-leventis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1518617562, "creation_date": 1518614841, "question_id": 48788386, "link": "https://stackoverflow.com/questions/48788386/mingw-compiled-executable-with-networking-wont-run-on-x64-systems", "title": "MinGW compiled executable with networking won&#39;t run on x64 systems", "body": "<p>I have written an application in C/C++ using windows sockets and I link it with -lws2_32 while compiling with MinGW. I compile on Windows (I have tried both x32 and x64 VMs). The problem is that while the executable runs if I run it on a x32 machine (I tried a Windows XP machine) it gets stuck in networking if run from a x64 VM without the MinGW installation. </p>\n\n<p>I tried to compile witch static, static g++ and static libc and nothing really works. It's a program with a UDP client and a TCP server. Windows ask for firewall permissions but the packets are never sent (I run wireshark just to be sure). </p>\n\n<p>Am I doing something wrong with the compilation? I am new to windows programming and cross compiling. </p>\n"}, {"tags": ["c++", "pipe"], "comments": [{"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1518618873, "post_id": 48788344, "comment_id": 84581135, "body": "The term pipe refers to the programmatic concept of a pipe, as well as the <code>|</code> operator when working on the CLI (both of which are closely related, but not the exact same). The CLI pipe takes the output of the first command and &quot;pipes&quot; it into the second command. This is assuming that the first command outputs something to <code>stdout</code> and the second accepts input on <code>stdin</code>. If the second program also outputs something, you can continue to pipe that into a third program. So I assume what you want is this: <code>cat input | program1 | program2</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1518619118, "post_id": 48788344, "comment_id": 84581313, "body": "In order to use pipes all you do is read from <code>std::cin</code> and write to <code>std::cout</code>. You don&#39;t need to <code>fork()</code> a new process for that."}, {"owner": {"reputation": 3618, "user_id": 3316645, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bootU.png?s=128&g=1", "display_name": "domsson", "link": "https://stackoverflow.com/users/3316645/domsson"}, "edited": false, "score": 0, "creation_date": 1518619449, "post_id": 48788344, "comment_id": 84581567, "body": "In any case, some general SO advice: your question, as is, is somewhat <b>too broad</b> (<i>&quot; if somebody could write me some example code&quot;</i>). Try reading up on the concepts involved, then narrow down your issue to a very <i>specific</i> problem. Then look that up - if you can&#39;t find info on it, ask a <i>specific question</i> on it. I know that all the info is out there as I&#39;ve been through the same task (more or less) just a week ago. :)"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6420620, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/3aae0ee492102f5ffd870ed7968aaed1?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6420620/jonathan"}, "edited": false, "score": 0, "creation_date": 1518617537, "post_id": 48788653, "comment_id": 84580168, "body": "I added some code to my original question. Can you please tell me how would I &quot;pass&quot; the standard input to the program01 for modification? Should I pass it to program01 line by line? What I&#39;ve understood, the examples show how to combine two strings, not how to modify a file that can have thousands of rows."}, {"owner": {"reputation": 155, "user_id": 6045183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc9a536a9e46866ee44295a00a76b85?s=128&d=identicon&r=PG&f=1", "display_name": "mirkomorati", "link": "https://stackoverflow.com/users/6045183/mirkomorati"}, "reply_to_user": {"reputation": 315, "user_id": 6420620, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/3aae0ee492102f5ffd870ed7968aaed1?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6420620/jonathan"}, "edited": false, "score": 2, "creation_date": 1518617707, "post_id": 48788653, "comment_id": 84580277, "body": "Sorry, I misunderstood your intentions. I think you&#39;re confusing the bash pipe command with the pipes to communicate between processes inside a program."}], "tags": [], "owner": {"reputation": 155, "user_id": 6045183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bc9a536a9e46866ee44295a00a76b85?s=128&d=identicon&r=PG&f=1", "display_name": "mirkomorati", "link": "https://stackoverflow.com/users/6045183/mirkomorati"}, "is_accepted": false, "score": 2, "last_activity_date": 1518618598, "last_edit_date": 1518618598, "creation_date": 1518615718, "answer_id": 48788653, "question_id": 48788344, "link": "https://stackoverflow.com/questions/48788344/c-pipe-to-modify-input-file-with-multiple-programs/48788653#48788653", "title": "C++ pipe to modify input file with multiple programs", "body": "<p>I think you're confusing the bash pipe command with the pipes to obtain IPC.\nIn bash the pipe doesn't pass the arguments, but redirect the stdout of a command to the next command as stdin. So in your c++ program you should read from stdin and write to stdout (<a href=\"https://stackoverflow.com/questions/20538982/piping-and-command-line-arguments\">relevant stackoverflow question</a>).\nYou can do something like</p>\n\n<pre><code>cat file | ./program1 &gt; file\n</code></pre>\n\n<p>to chain programs</p>\n\n<pre><code>cat file | ./program1 | ./program2 &gt; file\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 2, "last_activity_date": 1518619626, "creation_date": 1518619626, "answer_id": 48789937, "question_id": 48788344, "link": "https://stackoverflow.com/questions/48788344/c-pipe-to-modify-input-file-with-multiple-programs/48789937#48789937", "title": "C++ pipe to modify input file with multiple programs", "body": "<p>To process data from the shell's pipe all you have to do is read in data from <code>std::cin</code> and output the results to <code>std::cout</code>. The shell manages the actual pipes.</p>\n\n<p>Here is a program that does nothing. It simple passes the data from the incoming \"pipe\" to the outgoing \"pipe\":</p>\n\n<p>Do nothing using \"pipes\":</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    char c;\n    while(std::cin.get(c))\n        std::cout.put(c);\n}\n</code></pre>\n\n<p>A program to remove every blank line:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    std::string line;\n    while(std::getline(std::cin, line))\n    {\n        if(line.empty()) // skip empty lines\n            continue;\n\n        // otherwise send them out    \n        std::cout &lt;&lt; line &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 6420620, "user_type": "registered", "accept_rate": 19, "profile_image": "https://www.gravatar.com/avatar/3aae0ee492102f5ffd870ed7968aaed1?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/6420620/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1518619626, "creation_date": 1518614711, "last_edit_date": 1518617212, "question_id": 48788344, "link": "https://stackoverflow.com/questions/48788344/c-pipe-to-modify-input-file-with-multiple-programs", "title": "C++ pipe to modify input file with multiple programs", "body": "<p>I've been doing this task for +3 weeks now and I'm sure it's a piece of cake to somebody out there, so I'm just going to ask if somebody could write me some example code with these requirements:</p>\n\n<ol>\n<li>Task is in <strong>C++</strong> and the main point is to become familiar with <strong>pipes</strong></li>\n<li>It should be called like this (I think) from cmd: <code>cat inputfile.cpp | ./program01 ./program02</code>. What I'm trying to say is (I think): <em>\"Do modifications to file inputfile.cpp using programs program01 and program02\"</em>.</li>\n<li>Using pipes, firstly program01 removes all occurances of something in the inputfile.cpp (for example all empty rows). After all empty rows are removed, program02 should remove all occurances of something else (comments for example).</li>\n</ol>\n\n<p>Does my ask make any sense? I mean, are pipes even meant to be used that way (first run other program then another)? </p>\n\n<p>Can I possibly run multiple files through multiple programs for example like <code>cat input1.cpp input2.cpp input3.cpp | ./program01 ./program02 ./program03</code>.</p>\n\n<p>I've written a bunch of programs that does various things to a file, but that is not the main point of the task. The main point is the \"piping\" part but I really, really just don't get it.</p>\n\n<p>Any guidance is appreciated (some code below).</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include \"programs.h\"\n\nint main(int argc, char** argv)\n{\n    int fd[2];\n    pid_t pid;\n    int result;\n\n    result = pipe(fd);\n    if(result &lt; 0)\n    {\n        perror(\"pipe error\");\n        exit(1);\n    }\n\n    pid = fork();\n    if(pid &lt; 0)\n    {\n        perror(\"fork error\");\n        exit(2);\n    }\n\n    // Child\n    if(pid == 0)\n    {\n        while(1)\n        {\n            // I guess I should do some piping-magic here?\n        }\n        exit(0);\n    }\n    // Parent\n    else\n    {\n        while(1)\n        {\n\n        }\n        exit(0);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "string", "iterator", "string-view"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1518614247, "post_id": 48788162, "comment_id": 84577910, "body": "<code>vector</code>, <code>array</code> and <code>T[N]</code> are covered by <code>gsl::span</code>, I think. And it&#39;s kinda debatable if <code>string_view</code> is really such a great idea."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1518614599, "post_id": 48788162, "comment_id": 84578117, "body": "@StoryTeller I&#39;d actually just been looking at <code>gsl</code>! But tell me, why do you question the value of <code>string_view</code>?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1518614603, "post_id": 48788162, "comment_id": 84578121, "body": "If Ranges TS ever makes it to the Standard, it will provide a general and uniform convenient syntax to represent a shallow view into a piece of any container..."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1518614660, "post_id": 48788162, "comment_id": 84578157, "body": "@aschepler Looks like probably as good of an answer. If you feel like typing it up I can accept."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1518614683, "post_id": 48788162, "comment_id": 84578173, "body": "@JonathanMee - There was great work done to add support types to the standard library, which would make dangling pointers and references that much rarer. And here comes a type which just... well... it feels like a step back in that regard."}], "answers": [{"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 1, "last_activity_date": 1525766360, "creation_date": 1525766360, "answer_id": 50228749, "question_id": 48788162, "link": "https://stackoverflow.com/questions/48788162/is-there-a-string-view-equivalent-for-other-container-types/50228749#50228749", "title": "Is there a string_view equivalent for other container types?", "body": "<p>A <code>std::string_view</code> is to a pair of iterators as a <code>std::string</code> is to a standard container of <code>char</code>.</p>\n\n<p>In other words, we can use pairs of iterators (or in future, a standard <em>range</em> object) to represent views into standard containers.</p>\n\n<p>The string-view provides extra, string-like functions that mostly parallel the extra, string-like functions that are part of <code>std::string</code>.  For other containers, the equivalent operations are generally constructed from standard <code>&lt;algorithm&gt;</code> functions.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 2, "answer_count": 1, "score": 6, "last_activity_date": 1525766470, "creation_date": 1518614157, "last_edit_date": 1592644375, "question_id": 48788162, "link": "https://stackoverflow.com/questions/48788162/is-there-a-string-view-equivalent-for-other-container-types", "title": "Is there a string_view equivalent for other container types?", "body": "<p>A <a href=\"http://en.cppreference.com/w/cpp/string/basic_string_view\" rel=\"noreferrer\"><code>string_view</code></a> is:</p>\n<blockquote>\n<p>An object that can refer to a constant contiguous sequence of <code>char</code>-like objects with the first element of the sequence at position zero.</p>\n<p>A typical implementation holds only two members: a pointer to constant <code>CharT</code> and a size.</p>\n</blockquote>\n<p>This allows for robust but lightweight inspection of a <code>string</code>. It's perfect for recursive functions that would otherwise be forced to work with <code>char*</code>s or <code>string::iterator</code>s to pare down a string.</p>\n<p>My question is what about other containers? Why provide this only for <code>string</code>? What about other contiguous containers, such as <code>vector</code>, <code>map</code>, <code>queue</code>, etc?</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1518613271, "post_id": 48787853, "comment_id": 84577297, "body": "your <code>myinstance</code> isnt valid code"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 3, "creation_date": 1518613703, "post_id": 48787853, "comment_id": 84577554, "body": "Could you tell what you are trying to do? Seems like an XY problem to me."}, {"owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "reply_to_user": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 0, "creation_date": 1518624746, "post_id": 48787853, "comment_id": 84585176, "body": "@MateuszGrzejek Im trying to create a template that lets me define a struct at compile time with fixed size arrays defined by the template&#39;s parameters"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1518625949, "post_id": 48787853, "comment_id": 84586077, "body": "@&#201;merickPoulin - what about if some integer coincide? I mean: <code>myTemplate&lt;1,2,1&gt;</code> should contain one or two arrays of size <code>1</code>?"}, {"owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "edited": false, "score": 0, "creation_date": 1518626960, "post_id": 48787853, "comment_id": 84586776, "body": "two arrays since each object in the array will be a polymorphic class instance, im using int for the sake of the underlying problem currently facced"}], "answers": [{"tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": true, "score": 10, "last_activity_date": 1518613697, "creation_date": 1518613697, "answer_id": 48788031, "question_id": 48787853, "link": "https://stackoverflow.com/questions/48787853/how-to-make-a-recursive-compile-time-variadic-struct-template/48788031#48788031", "title": "How to make a recursive compile time variadic struct template", "body": "<p>You can use <code>std::tuple</code>:</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;array&gt;\n\ntemplate&lt;std::size_t... ns&gt;\nstruct foo {\n    std::tuple&lt;std::array&lt;int, ns&gt;...&gt; contents;\n};\n\nfoo&lt;1, 5, 2, 8&gt; my_foo;\n\nint main() {\n    std::get&lt;1&gt;(my_foo.contents)[3] = 4;\n}\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 8629453, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh3.googleusercontent.com/-2EJGEgRar1w/AAAAAAAAAAI/AAAAAAAAABM/rtOoGxJXJw0/photo.jpg?sz=128", "display_name": "&#201;merick Poulin", "link": "https://stackoverflow.com/users/8629453/%c3%89merick-poulin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 48788031, "answer_count": 1, "score": 1, "last_activity_date": 1520117675, "creation_date": 1518613156, "last_edit_date": 1520117675, "question_id": 48787853, "link": "https://stackoverflow.com/questions/48787853/how-to-make-a-recursive-compile-time-variadic-struct-template", "title": "How to make a recursive compile time variadic struct template", "body": "<p>Im trying to make a variadic template in c++ to create a static(non-dynamic allocation) struct defined by arguments of a template.</p>\n\n<p>I tried to google that during 3 days but I think the documentation and my ability to formulate my queries ends here.</p>\n\n<p>This what im trying to go for:</p>\n\n<pre><code>myTemplate&lt;1,5,2,8&gt; myinstance;\n</code></pre>\n\n<p>myInstance would give me this:</p>\n\n<p><code>myinstance { int[1], int[5], int[2], int[8] };</code></p>\n\n<p>So how can you achive this, using variadic template in c++ ?\nI know already about partial specialisation and that kind of stuff but the documentation is lacking in term of recursion.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "c++11", "templates", "casting", "boost-signals2"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1518618016, "post_id": 48787697, "comment_id": 84580494, "body": "If you have a function <code>void f()</code> and you&#39;re calling it from a function that returns <code>void</code>, <code>return f()</code> is legal and well-defined. That&#39;s for generic code like this: you don&#39;t have to provide a separate specialization for functions that return <code>void</code>."}, {"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1518618231, "post_id": 48787697, "comment_id": 84580648, "body": "@PeteBecker, okay so it should work? but it does not. If I read boost manual here <a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/signals2/tutorial.html#idp204811928\" rel=\"nofollow noreferrer\">link</a> it seems signal_(argument) returns a boost::optional&lt;Group&gt; and I should get the value when dereferencing it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1518618496, "post_id": 48787697, "comment_id": 84580820, "body": "That seems like a problem to be solved by specialization. Does C++ let you specialize just one method of a class template?"}, {"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518618810, "post_id": 48787697, "comment_id": 84581085, "body": "@melpomene Do I understand you correct that you would suggest that I create a  template&lt;T&gt; class Event&lt;T&gt; deriving from public Event&lt;T, void&gt; ?  I have tried that, but I don&#39;t know how to force that specialized class to be used over the Event&lt;T,R&gt; class. If it is possible, I assume it could be a solution but I don&#39;t know how to do it."}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518619191, "post_id": 48787697, "comment_id": 84581367, "body": "I was thinking something like <code>template&lt;typename T&gt; void Event&lt;T, void&gt;::fire(const T &amp;argument) { signal_(argument); }</code>."}, {"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "edited": false, "score": 0, "creation_date": 1518619578, "post_id": 48787697, "comment_id": 84581639, "body": "Okay, I am sorry but I don&#39;t see how to use it properly? How /where should I do the check and how should I make this call?"}, {"owner": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518619791, "post_id": 48787697, "comment_id": 84581788, "body": "What check / call? My code is a function definition."}, {"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 0, "creation_date": 1518624188, "post_id": 48787697, "comment_id": 84584749, "body": "@melpomene Where would I put it. Inside or outside of the class?"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "reply_to_user": {"reputation": 78982, "user_id": 1848654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84180c0f3c9c04f8b8f0613fc0129dac?s=128&d=identicon&r=PG", "display_name": "melpomene", "link": "https://stackoverflow.com/users/1848654/melpomene"}, "edited": false, "score": 1, "creation_date": 1518625911, "post_id": 48787697, "comment_id": 84586051, "body": "@melpomene: No, C++ doesn&#39;t let you specialize a member function: <a href=\"https://stackoverflow.com/questions/15374841/c-template-partial-specialization-member-function\" title=\"c template partial specialization member function\">stackoverflow.com/questions/15374841/&hellip;</a>"}, {"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "edited": false, "score": 0, "creation_date": 1518777254, "post_id": 48787697, "comment_id": 84653162, "body": "Thanks all, I got it working now. When specialilzing a template one must do  template&lt;typename A, typename B&gt; class Event&lt;A,B&gt;.  It was the lack of &lt;A,B&gt; that made it not work."}], "answers": [{"comments": [{"owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "edited": false, "score": 0, "creation_date": 1518777258, "post_id": 48792522, "comment_id": 84653166, "body": "Thanks all, I got it working now. When specialilzing a template one must do  template&lt;typename A, typename B&gt; class Event&lt;A,B&gt;.  It was the lack of &lt;A,B&gt; that made it not work."}], "tags": [], "owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": true, "score": 1, "last_activity_date": 1518627643, "creation_date": 1518627643, "answer_id": 48792522, "question_id": 48787697, "link": "https://stackoverflow.com/questions/48787697/cast-return-value-to-templated-type/48792522#48792522", "title": "Cast return value to templated type", "body": "<p>You can try to specialize the template something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Event&lt;T,void&gt;\n{\n  typedef boost::signals2::signal&lt;void (const T&amp;)&gt; signal_t;\n  virtual void fire(const T&amp; argument)   \n  {\n    signal_(argument);   \n  }    \nprivate:\n  signal_t signal_;\n\n   ...    \n};\n</code></pre>\n\n<p>So, we replaced R with explicit \"void\" value thus we can see the places that are ridiculous or redundant from the C++ compiler viewpoint. In your case, it's just a signal call without returning a value. In more sophisticated scenarios, you may need to re-compose bigger part of the code dependent on \"R\".</p>\n"}], "owner": {"reputation": 462, "user_id": 5272185, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c19a0dbde5767679f37b4c315400a361?s=128&d=identicon&r=PG&f=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/5272185/johan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 48792522, "answer_count": 1, "score": 0, "last_activity_date": 1518627643, "creation_date": 1518612627, "last_edit_date": 1518617603, "question_id": 48787697, "link": "https://stackoverflow.com/questions/48787697/cast-return-value-to-templated-type", "title": "Cast return value to templated type", "body": "<p>I have the following template class.</p>\n\n<pre><code>template&lt;typename T, typename R = void&gt; \nclass Event \n{ \n public:  \n  typedef boost::signals2::signal&lt;R (const T&amp;)&gt; signal_t;\n\n  virtual R fire(const T&amp; argument)   \n  {\n    return static_cast&lt;R&gt;(*signal_(argument));   \n  }    \n\nprivate:\n  signal_t signal_;\n\n   ...    \n};\n</code></pre>\n\n<p>Since R can be void I get an invalid indirection compile error on line</p>\n\n<pre><code>return static_cast&lt;R&gt;(*signal_(argument));   \n</code></pre>\n\n<p>It seems it cannot be solved by a run-time check, since it is a template class.\nOne cannot return \"type\" void.\nHow can I resolve this?</p>\n"}, {"tags": ["java", "c++", "exception", "java-native-interface"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1518672698, "post_id": 48787627, "comment_id": 84603665, "body": "What does <code>SendEventToJDKPUSH()</code> do exactly? And specifically is there a path from it back to <code>evetsubscribepush()</code>?"}, {"owner": {"reputation": 1, "user_id": 9359699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2521585b0d5d10a5ae83ed46321e517?s=128&d=identicon&r=PG&f=1", "display_name": "Sathis", "link": "https://stackoverflow.com/users/9359699/sathis"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1518676082, "post_id": 48787627, "comment_id": 84604840, "body": "It just use EvtRender to extracts the event data and send necessary details to java cache memory in form of Hashtable using JNI. In java events are processed by a seaperate thread."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1518691660, "post_id": 48787627, "comment_id": 84613396, "body": "Do you get a stack trace from the ` java.lang.StackOverflowError<code>?  If so, post that.  And post the actual code from </code>SendEventToJDKPUSH()`."}, {"owner": {"reputation": 1, "user_id": 9359699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2521585b0d5d10a5ae83ed46321e517?s=128&d=identicon&r=PG&f=1", "display_name": "Sathis", "link": "https://stackoverflow.com/users/9359699/sathis"}, "edited": false, "score": 0, "creation_date": 1518695582, "post_id": 48787627, "comment_id": 84615889, "body": "Edited the code with code in SendEventToJDKPUSH() and i&#39;m using log method instead of wprinf()"}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1518706032, "post_id": 48787627, "comment_id": 84623126, "body": "Are you getting an exception from an earlier call to a Java method?  You&#39;re making a lot of calls to Java from your C++ code and not checking for exceptions.  Even Java methods that don&#39;t explicitly list an exception as being thrown can throw a <code>NullPointerException</code>, for example."}, {"owner": {"reputation": 1, "user_id": 9359699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2521585b0d5d10a5ae83ed46321e517?s=128&d=identicon&r=PG&f=1", "display_name": "Sathis", "link": "https://stackoverflow.com/users/9359699/sathis"}, "edited": false, "score": 0, "creation_date": 1518757079, "post_id": 48787627, "comment_id": 84644177, "body": "There is no exception at the earlier stage. Even i tried too many calls to java from c++ by log method for each and every event i receive. It works fine for all those calls to java. Exception received only at exit of code (ex. if had an error, closing subscription and returning to java)."}, {"owner": {"reputation": 1, "user_id": 9359699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2521585b0d5d10a5ae83ed46321e517?s=128&d=identicon&r=PG&f=1", "display_name": "Sathis", "link": "https://stackoverflow.com/users/9359699/sathis"}, "edited": false, "score": 0, "creation_date": 1518773466, "post_id": 48787627, "comment_id": 84650763, "body": "One more thing...StackOverflowError occurs only when subscription initiated and having events. Not if had any connection issues before subscription."}], "owner": {"reputation": 1, "user_id": 9359699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2521585b0d5d10a5ae83ed46321e517?s=128&d=identicon&r=PG&f=1", "display_name": "Sathis", "link": "https://stackoverflow.com/users/9359699/sathis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 366, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1518695849, "creation_date": 1518612432, "last_edit_date": 1518695849, "question_id": 48787627, "link": "https://stackoverflow.com/questions/48787627/java-lang-stackoverflowerror-at-exit-of-jni-method", "title": "java.lang.StackOverflowError at exit of JNI method", "body": "<p>I'm using windows <strong>EvtSubscribe(push)</strong> to get event and send it to java for processing. On returning from method <code>Java_evetsubscribepush</code> , i'm receiving <strong>java.lang.StackOverflowError</strong> in java. Here is my sample code. No matter it runs for few second or for hours <strong>java.lang.StackOverflowError</strong> occurs only at exit of code not in between java usage for sending event. Is anything i'm missing? .</p>\n\n<pre><code>JNIEXPORT jobject JNICALL Java_evetsubscribepush(JNIEnv *env, jobject obj){\n    wprintf( L\"\\n Java_evetsubscribepush starts\");\n    CoInitialize(NULL);\n    DWORD res = ERROR_SUCCESS;\n    EventSubscribeLog * handler = new EventSubscribeLog();\n    res = handler-&gt;EventSubscribePush ( handler ,env);\n    CoUninitialize();\n    wprintf( L\"\\n Java_evetsubscribepush ends\" );\n    return NULL;\n}\n\nDWORD EventSubscribeLog::EventSubscribePush ( EventSubscribeLog * handler , JNIEnv *javaEnv)\n{\n    DWORD status = ERROR_SUCCESS;\n    LPWSTR Path = L\"Security\";\n    LPWSTR Query =  L\"&lt;QueryList&gt;\" \\\n                    L\"  &lt;Query Id='0' Path='Security'&gt;\" \\\n                    L\"    &lt;Select Path='Security'&gt;*&lt;/Select&gt;\" \\\n                    L\"  &lt;/Query&gt;\" \\\n                    L\"&lt;/QueryList&gt;\";\n    EVT_HANDLE hSubscription = NULL;\n    EVT_HANDLE sessionHndl = OpenRemoteSession ();\n    if (sessionHndl == NULL) {\n        log ( javaEnv, L\"\\n EvtSubscribe open remote session failed in %lu\", status );\n        goto exit;\n    }\n\n    DWORD callBACKstatus = ERROR_SUCCESS;\n    USER_CONTEXT UserContext;\n    UserContext.handler = handler;\n    UserContext.callBACKstatus = &amp;callBACKstatus;\n    UserContext.env = javaEnv;\n\n    hSubscription = EvtSubscribe ( sessionHndl, NULL, Path, Query, NULL, &amp;UserContext,\n        (EVT_SUBSCRIBE_CALLBACK) EventSubscribeLog::SubscriptionCallback, EvtSubscribeToFutureEvents );\n\n    if (NULL == hSubscription) {\n        status = GetLastError ( );\n        log ( javaEnv, L\"\\n EvtSubscribe failed  %lu. \", status );\n        goto exit;\n    }\n    while (true) {\n        if (ERROR_SUCCESS != callBACKstatus) {\n            status = callBACKstatus;\n            log ( javaEnv, L\"\\n EvtSubscribe call Back failed with error code %lu. \", status );\n            goto exit;\n        }\n        Sleep ( 5000 );\n    }\n    log ( javaEnv, L\"\\n EvtSubscribe PUSH ends. \" );\nexit:\n    if (hSubscription) {\n        EvtClose ( hSubscription );\n    }\n    if (sessionHndl) {\n        EvtClose ( sessionHndl );\n    }\n    if (Query != NULL) {\n        free ( Query );\n        Query = NULL;\n    }\n    return status;\n}\n\n// The callback that receives the events.(static method)\nDWORD  WINAPI EventSubscribeLog::SubscriptionCallback ( EVT_SUBSCRIBE_NOTIFY_ACTION action, PVOID pContext, EVT_HANDLE hEvent )\n{\n    DWORD status = ERROR_SUCCESS;\n    PUSER_CONTEXT Callbackcontext = (PUSER_CONTEXT) pContext;\n    EventSubscribeLog *handler = Callbackcontext-&gt;handler;\n    DWORD *callBACKstatus = Callbackcontext-&gt;callBACKstatus;\n    JNIEnv *temp_env = Callbackcontext-&gt;env;\n    bool isEnvAttached = FALSE;\n    JavaVM *callBackJVM;\n    JNIEnv *callBackEnv;\n    if (temp_env-&gt;GetJavaVM ( &amp;callBackJVM ) &lt; 0)\n    {\n        goto exit;\n    }\n    if (callBackJVM-&gt;AttachCurrentThread ( (void **) &amp;callBackEnv, NULL ) &lt; 0)\n    {\n        goto exit;\n    }\n    isEnvAttached = TRUE;\n    if (action == EvtSubscribeActionError) {\n        status = (DWORD) hEvent;\n        handler-&gt;log ( javaEnv, L\"\\n The subscription callback received the following Win32 error: %lu\", status );\n        goto exit;\n    }\n    if (action == EvtSubscribeActionDeliver) {\n        handler-&gt;SendEventToJDKPUSH ( hEvent, handler, callBackEnv );\n\n    }\nexit:\n    if (isEnvAttached) {\n        callBackJVM-&gt;DetachCurrentThread ( );\n    }\n    if (ERROR_SUCCESS != status) {\n        *callBACKstatus = status;\n    }\n    return status; \n}\n\nvoid EventSubscribeLog::SendEventToJDKPUSH ( EVT_HANDLE hEvent, EventSubscribeLog *handle, JNIEnv *watcherJNIEnv )\n{\n    PEVT_VARIANT RenderedValues = EventRender ( watcherJNIEnv, hEvent, 1 );\n    if (RenderedValues != NULL) {\n        __try {\n            WORD EvtId = RenderedValues[EvtSystemEventID].UInt16Val;\n            LPCWSTR EvtProviderName = RenderedValues[EvtSystemProviderName].StringVal;\n            ULONGLONG I64Time = RenderedValues[EvtSystemTimeCreated].FileTimeVal;\n            unsigned long EvtTimeCreated = FileTimeToUnixTime ( I64Time );\n            unsigned long EvtTimeWritten = EvtTimeCreated;\n            unsigned __int64 EvtRecordNumber = RenderedValues[EvtSystemEventRecordId].UInt64Val;\n            WORD EvtCategory = RenderedValues[EvtSystemTask].UInt16Val;\n            jobject\n                eventHash = watcherJNIEnv-&gt;NewObject ( jClHashtable, jConHashtable ),\n                jEvtCategory = watcherJNIEnv-&gt;NewObject ( intClass, intConID, EvtCategory ),\n                jEvtCode = watcherJNIEnv-&gt;NewObject ( intClass, intConID, EvtId ),\n                jEvtTimeGenerated = watcherJNIEnv-&gt;NewObject ( intClass, intConID, EvtTimeCreated ),\n                jEvtTimeWritten = watcherJNIEnv-&gt;NewObject ( intClass, intConID, EvtTimeWritten ),\n                jEvtRecordNumber = watcherJNIEnv-&gt;NewObject ( longClass, longConID, EvtRecordNumber ),\n\n            watcherJNIEnv-&gt;CallObjectMethod ( eventHash, jMtdPutHashtable, jEvtCategoryKey, jEvtCategory );\n            watcherJNIEnv-&gt;CallObjectMethod ( eventHash, jMtdPutHashtable, jEvtCodeKey, jEvtCode );\n            watcherJNIEnv-&gt;CallObjectMethod ( eventHash, jMtdPutHashtable, jEvtTimeGeneratedKey, jEvtTimeGenerated );\n            watcherJNIEnv-&gt;CallObjectMethod ( eventHash, jMtdPutHashtable, jEvtTimeWrittenKey, jEvtTimeWritten );\n            watcherJNIEnv-&gt;CallObjectMethod ( eventHash, jMtdPutHashtable, jEvtRecordNumberKey, jEvtRecordNumber );\n\n            watcherJNIEnv-&gt;CallStaticVoidMethod ( AppServerClass, evtNotify, eventHash ); //send event to java cache\n            if (watcherJNIEnv-&gt;ExceptionOccurred ( ) != NULL) {\n                log ( watcherJNIEnv, L\"Exception occurred here in SendEventToJDKPUSH ...!\" );\n                watcherJNIEnv-&gt;ExceptionDescribe ( );\n                watcherJNIEnv-&gt;ExceptionCheck ( );\n                watcherJNIEnv-&gt;ExceptionClear ( );\n            }\n            watcherJNIEnv-&gt;DeleteLocalRef ( jEvtCategory );\n            watcherJNIEnv-&gt;DeleteLocalRef ( jEvtCode );\n            watcherJNIEnv-&gt;DeleteLocalRef ( jEvtTimeGenerated );\n            watcherJNIEnv-&gt;DeleteLocalRef ( jEvtTimeWritten );\n            watcherJNIEnv-&gt;DeleteLocalRef ( jEvtRecordNumber );\n            watcherJNIEnv-&gt;DeleteLocalRef ( eventHash );\n        } __except (EXCEPTION_EXECUTE_HANDLER) {\n            log (  watcherJNIEnv,  L\"Exception Caught in SendEventToJDKPUSH  %lu\", GetExceptionCode ( ) );\n        }\n        goto exit;\n    } else {\n        log (  watcherJNIEnv,  L\"Rendering Failed in SendEventToJDKPUSH\" );\n        goto exit;\n    }\nexit:\n    free ( RenderedValues );\n    RenderedValues = NULL;\n}\nPEVT_VARIANT EventSubscribeLog::EventRender(JNIEnv *javaEnv, EVT_HANDLE hEvent, int renderContextFlag)\n{\n    DWORD error = ERROR_SUCCESS;\n    EVT_HANDLE hContext = NULL;\n    DWORD dwBufferSize = 0;\n    DWORD dwBufferUsed = 0;\n    DWORD dwPropertyCount = 0;\n    PEVT_VARIANT RenderedValues = NULL;\n    BOOL ret = false;\n    if (renderContextFlag == 1){\n        hContext = EvtCreateRenderContext(0, NULL, EvtRenderContextSystem);\n    }else{\n        hContext = EvtCreateRenderContext(0, NULL, EvtRenderContextUser);\n    }\n    if (NULL == hContext){\n        error = GetLastError();\n        log( javaEnv, L\"EventRender:EvtCreateRenderContext failed with %lu\", error);\n        goto exit;\n    }\n    ret = EvtRender(hContext, hEvent, EvtRenderEventValues, dwBufferSize, RenderedValues, &amp;dwBufferUsed, &amp;dwPropertyCount);\n    if (!ret){\n        error = GetLastError();\n        if (error == ERROR_INSUFFICIENT_BUFFER){\n            dwBufferSize = dwBufferUsed;\n            RenderedValues = (PEVT_VARIANT)malloc(dwBufferSize);\n            if (RenderedValues){\n                ret = EvtRender(hContext, hEvent, EvtRenderEventValues, dwBufferSize, RenderedValues, &amp;dwBufferUsed, &amp;dwPropertyCount);\n                if (!ret){\n                    log( javaEnv, L\"EventRender:EvtRender failed with %lu\", error);\n                }\n            }else{\n                log( javaEnv, L\"EventRender:malloc failed\");\n                error = E_OUTOFMEMORY;\n                goto exit;\n            }\n        }else{\n            log( javaEnv, L\"EventRender:EvtRender failed with %lu\", error);\n            goto exit;\n        }\n    }\nexit:\n    if (hContext) {EvtClose(hContext);}\n    return RenderedValues;\n}\nvoid log ( JNIEnv *javaEnv, const wchar_t* message, ... ) //For JAVA Log method\n{\n    va_list args;\n    int len;\n    wchar_t * buffer;\n    va_start ( args, message );\n    len = _vscwprintf ( message, args ) + 1;\n    buffer = (wchar_t*) malloc ( len * sizeof ( wchar_t ) );\n    vswprintf ( buffer, message, args );\n    jstring jsMessage = javaEnv-&gt;NewString ( (jchar*) buffer, wcslen ( buffer ) );\n    javaEnv-&gt;CallStaticVoidMethod ( LogClass, LogMethod,  jsMessage );\n    free ( buffer );\n    javaEnv-&gt;DeleteLocalRef ( jsMessage );\n}\n</code></pre>\n\n<p>In Java</p>\n\n<pre><code>public static void log( String message) {\n    nativeLogger.log(Level.WARNING, message);\n}\n</code></pre>\n\n<p>Exception trace :</p>\n\n<pre><code>java.lang.StackOverflowError\n    at evetsubscribepush.log(evetsubscribepush.java:XX)\n</code></pre>\n\n<p>That's all i got as Exception trace.</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 13016, "user_id": 8751754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7k6Li.png?s=128&g=1", "display_name": "Ron", "link": "https://stackoverflow.com/users/8751754/ron"}, "edited": false, "score": 2, "creation_date": 1518611881, "post_id": 48787409, "comment_id": 84576344, "body": "Please take <a href=\"https://stackoverflow.com/tour\">the tour</a>, read <a href=\"https://stackoverflow.com/help\">the help page</a> and have a look at this <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">C++ books</a> list. Welcome to SO."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1518611897, "post_id": 48787409, "comment_id": 84576353, "body": "The evaluation order of function arguments is unspecified. I am sure, that there is a duplicate somewhere.."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1518611927, "post_id": 48787409, "comment_id": 84576382, "body": "The order is unspecified, see in this <a href=\"https://repl.it/repls/AngelicTremendousScientificcomputing\" rel=\"nofollow noreferrer\">example</a>, I get the string you expect printed first."}, {"owner": {"reputation": 1062, "user_id": 5170077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/562ca4e4e460d7a1c9e7caa105b8ebb1?s=128&d=identicon&r=PG", "display_name": "Caninonos", "link": "https://stackoverflow.com/users/5170077/caninonos"}, "edited": false, "score": 0, "creation_date": 1518612197, "post_id": 48787409, "comment_id": 84576565, "body": "<code>std::cout &lt;&lt; x &lt;&lt; y;</code> is syntactic sugar for <code>operator&lt;&lt;(operator&lt;&lt;(std::cout, x), y)</code> and as mentioned before evaluation order of the arguments of a function is unspecified. So <code>y</code> may be evaluated before <code>std::cout &lt;&lt; x</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1518612600, "post_id": 48787409, "comment_id": 84576848, "body": "Yet another good reason to keep user interaction and data processing separate."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4052440, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Qhjkvu9ucgs/AAAAAAAAAAI/AAAAAAAAAQo/-wyy785T-YY/photo.jpg?sz=128", "display_name": "Isaac Attuah", "link": "https://stackoverflow.com/users/4052440/isaac-attuah"}, "edited": false, "score": 0, "creation_date": 1518612253, "post_id": 48787493, "comment_id": 84576608, "body": "Thanks, Arnav. I did the same thing in Dev C++ and it asked for input first. Thanks again for clarifying"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1518629076, "post_id": 48787493, "comment_id": 84588026, "body": "IIRC, C++17 forces on order for some things such as the <code>&lt;&lt;</code> operator. Do you know if I&#39;m remembering right?"}], "tags": [], "owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "is_accepted": true, "score": 3, "last_activity_date": 1518612977, "last_edit_date": 1592644375, "creation_date": 1518612027, "answer_id": 48787493, "question_id": 48787409, "link": "https://stackoverflow.com/questions/48787409/why-does-my-program-work-despite-wrong-placement-of-my-function-and-cout-stateme/48787493#48787493", "title": "Why does my program work despite wrong placement of my function and cout statements?", "body": "<p>According to <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf\" rel=\"nofollow noreferrer\">N4296</a>:</p>\n<blockquote>\n<p><strong>1.9 Program Execution [intro.execution]</strong></p>\n<p>[...] Except where noted, <strong>evaluations of operands of individual operators and of subexpressions of individual\nexpressions are unsequenced.</strong> [ <em>Note</em>: In an expression that is evaluated more than once during the execution\nof a program, unsequenced and indeterminately sequenced evaluations of its subexpressions <strong>need not be\nperformed consistently in different evaluations.</strong> \u2014 <em>end note</em> ] [...]</p>\n</blockquote>\n<p>So you can't really expect any particular order, unless for really specific cases such as logical operators and the ternary operator, which introduce sequence points.</p>\n"}], "owner": {"reputation": 127, "user_id": 4052440, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Qhjkvu9ucgs/AAAAAAAAAAI/AAAAAAAAAQo/-wyy785T-YY/photo.jpg?sz=128", "display_name": "Isaac Attuah", "link": "https://stackoverflow.com/users/4052440/isaac-attuah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "closed_date": 1518616796, "accepted_answer_id": 48787493, "answer_count": 1, "score": 2, "last_activity_date": 1518616806, "creation_date": 1518611802, "last_edit_date": 1518616418, "question_id": 48787409, "link": "https://stackoverflow.com/questions/48787409/why-does-my-program-work-despite-wrong-placement-of-my-function-and-cout-stateme", "closed_reason": "Duplicate", "title": "Why does my program work despite wrong placement of my function and cout statements?", "body": "<p>Ideally, some of the content of my Fahrenheit function should be placed in the main function but wanted to try something out. I asked for the user input in the Fahrenheit function and after this, I called the Fahrenheit function after the <code>cout</code> statement. I expected the \"Your temperature...\" string to display first nevertheless it asked for the input before proceeding to print the string. Why is this so?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint FahrenheitConv();\nint main ()\n{\n    cout &lt;&lt; \"Your temperature in Fahrenheit is \"&lt;&lt; FahrenheitConv();\n    return 0;\n}\n\nint FahrenheitConv()\n{\n    double centigrade;\n    cout &lt;&lt; \"What is your temperature in centigrade: \";\n    cin &gt;&gt; centigrade;\n\n    double fahrenheit = (1.8) * (centigrade ) + 32;\n    return fahrenheit;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "winapi", "setupapi"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518615229, "post_id": 48787349, "comment_id": 84578549, "body": "The error code <code>3758096943</code> does not match <code>ERROR_NO_CATALOG_FOR_OEM_INF</code>. Please show the code you use to determine the error code."}, {"owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518615778, "post_id": 48787349, "comment_id": 84578916, "body": "@IInspectable Added code, and how do you tell the error code does not match, I used err.exe to find it."}, {"owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518617911, "post_id": 48787349, "comment_id": 84580415, "body": "Interesting, when I build the exe in x64, I do not get the error, Everything works as it should. But should it not throw ERROR_IN_WOW64 instead of ERROR_NO_CATALOG_FOR_OEM_INF ????"}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1518638189, "post_id": 48787349, "comment_id": 84592748, "body": "@IInspectable actually it does: <code>ERROR_NO_CATALOG_FOR_OEM_INF</code> is defined as <code>(APPLICATION_ERROR_MASK|ERROR_SEVERITY_ERROR|0x22F)</code>, <code>APPLICATION_ERROR_MASK</code> is <code>0x20000000</code>, and <code>ERROR_SEVERITY_ERROR</code> is <code>0xC0000000</code>, which gives us <code>0x20000000|0xC0000000|0x22F</code> == <code>0xE000022F</code> == <code>3758096943</code>. (Yes, I know; I&#39;m surprised it&#39;s not a standard Windows error code too.)"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1518650920, "post_id": 48787349, "comment_id": 84598423, "body": "@andlabs: Actually, that&#39;s <code>-536870353</code>. <code>NTSTATUS</code> values are signed."}], "owner": {"reputation": 959, "user_id": 6751556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PbVfI.png?s=128&g=1", "display_name": "Suraj S", "link": "https://stackoverflow.com/users/6751556/suraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1518615767, "creation_date": 1518611613, "last_edit_date": 1518615767, "question_id": 48787349, "link": "https://stackoverflow.com/questions/48787349/error-in-diinstalldevice-installselecteddriver-error-no-catalog-for-oem-inf", "title": "Error in DiInstallDevice, InstallSelectedDriver - ERROR_NO_CATALOG_FOR_OEM_INF", "body": "<p>Okay, So I am getting this weird error stating \"<strong>ERROR_NO_CATALOG_FOR_OEM_INF</strong>\" whenever I call DiInstallDevice, InstallSelectedDriver. The error code returned is\n<strong>3758096943</strong>. When I look it up in err.exe, it says</p>\n\n<pre><code># for decimal -536870353 / hex 0xe000022f :\n  ERROR_NO_CATALOG_FOR_OEM_INF                                  setupapi.h\n# for hex 0xffffffff / decimal -1 :\n  NO_TITLE                                                      ftsiface.h\n  USE_DEFAULT                                                   ftsiface.h\n  JET_wrnNyi                                                    esent98.h\n# /* Function Not Yet Implemented */\n  LZERROR_BADINHANDLE                                           lzexpand.h\n# /* invalid input handle */\n  MAPI_DIAG_NO_DIAGNOSTIC                                       mapidefs.h\n  MSIDBERROR_FUNCTIONERROR                                      msiquery.h\n# function error\n  ERROR_UNHANDLED_ERROR                                         ntddchgr.h\n# Unknown error condition\n  PDR_ERROR                                                     penwin.h\n# parameter or unspecified error\n  ICERR_UNSUPPORTED                                             vfw.h\n  ERROR_UNHANDLED_ERROR                                         winioctl.h\n# Unknown error condition\n# 11 matches found for \"3758096943\"\n</code></pre>\n\n<p>I am using setupapi, therefore the error, Internet searches reveal nothing whatsoever apart from the error being associated with the \"<strong>SetupCopyOEMInf()</strong>\" Which I have no relation to. The Driver in Question is an Intel HD 520 Signed Driver. I have verified it and downloaded it via Microsoft update catalog. </p>\n\n<p>The driver is Selected using <strong>SetupDiSetSelectedDriver()</strong> and the correct device is selected using <strong>SetupDiSetSelectedDevice()</strong>. If anyone can point me in the right direction itwould be great!.</p>\n\n<p>Code :</p>\n\n<pre><code>PopulateDeviceInstaceIds(L\"PCI\\\\VEN_8086&amp;DEV_1916\");\n            SP_DRVINFO_DATA drvData;\n            SP_DRVINFO_DETAIL_DATA drvDetailData;\n            SP_DEVINFO_DATA LocDevData;\n            MakeDevClassHandles(handle,instancesOfDevice.at(0).c_str());\n            SetDRVINFO(&amp;LocDevData,&amp;drvDetailData,&amp;drvData,L\"Intel Corporation\",L\"22.20.16.4836\",TRUE);\n            std::cout&lt;&lt;SetupDiSetSelectedDevice(handle,&amp;LocDevData)&lt;&lt;endl;\n            std::cout&lt;&lt;SetupDiSetSelectedDriver(handle,&amp;LocDevData,&amp;drvData)&lt;&lt;endl;\n            if(&amp;drvData!=NULL)\n            {\n                HMODULE libHandle = LoadLibraryW(L\"newdev.dll\");\n                lpfnInstallSelectedDriver addr;\n                DWORD rebootRec;\n                addr = (lpfnInstallSelectedDriver)GetProcAddress(libHandle,\"InstallSelectedDriver\");\n                if(addr!=NULL &amp;&amp; addr(NULL,handle,NULL,TRUE,&amp;rebootRec))\n                {\n\n                }\n                else\n                    cout&lt;&lt;\"InstallSelectedDriver ERR : \"&lt;&lt;GetLastError();\n                 if(DiInstallDevice(NULL,handle,&amp;LocDevData,&amp;drvData,0,&amp;nRebo))\n                {\n\n                }\n                else\n                {\n                    cout&lt;&lt;\"DiInstall Device error : \"&lt;&lt;GetLastError();\n                    std::cout&lt;&lt;\"\\n\\nWaiting for upto 10 seconds for changes to reflect..\";\n                    Sleep(10000);\n</code></pre>\n\n<p>I guess this code will be enough, if not please let me know. The entire code is a few hundred lines, so. </p>\n\n<p>The <strong>SetDRVINFO()</strong> function just sets the correct device and driver in the structures, i have verified them while debugging. Both the else cases throw the same error.</p>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1518611376, "post_id": 48787221, "comment_id": 84575976, "body": "1) This error doesn&#39;t seem to be originating from a compiler. 2) This doesn&#39;t seem to be as minimal example as possible. Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518611683, "post_id": 48787221, "comment_id": 84576201, "body": "<code>ld</code> is the linker, meaning that your code compiles fine, but you have a problem during linking."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 3, "creation_date": 1518611761, "post_id": 48787221, "comment_id": 84576255, "body": "why do you include <code>TimerOne.h</code> 4 times? If the header has no include guards, this might be related to the error"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1518611832, "post_id": 48787221, "comment_id": 84576304, "body": "what is <code>boolean</code> ?"}, {"owner": {"reputation": 3503, "user_id": 8918119, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WBTsrNZGTro/AAAAAAAAAAI/AAAAAAAAAAA/TyVQT8y8hbc/photo.jpg?sz=128", "display_name": "Mihayl", "link": "https://stackoverflow.com/users/8918119/mihayl"}, "edited": false, "score": 0, "creation_date": 1518612018, "post_id": 48787221, "comment_id": 84576442, "body": "<a href=\"https://stackoverflow.com/q/27272525/8918119\">What does \u201ccollect2: error: ld returned 1 exit status\u201d mean?</a> Any other compile errors?"}], "owner": {"reputation": 11, "user_id": 9095103, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ljpiH.png?s=128&g=1", "display_name": "Hamed Tavakoli", "link": "https://stackoverflow.com/users/9095103/hamed-tavakoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1579, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1518612092, "creation_date": 1518611231, "last_edit_date": 1518612092, "question_id": 48787221, "link": "https://stackoverflow.com/questions/48787221/collect2-exe-error-ld-returned-1-exit-status-arduino-uno", "title": "collect2.exe*: error: ld returned 1 exit status Arduino Uno", "body": "<p>this is my code for arduino uno to make a line follower bot but compiler returns this error:</p>\n\n<blockquote>\n  <p>collect2.exe*: error: ld returned 1 exit status </p>\n</blockquote>\n\n<p>This is my code:</p>\n\n<pre><code>#include \"known_16bit_timers.h\"\n#include \"TimerOne.h\"\n#include \"TimerOne.h\"\n#include \"TimerOne.h\"\n#include &lt;TimerOne.h&gt;\n\n#define dW digitalWrite\n#define dR digitalRead\n\n#define _TIMERONE_h\n#define BOT1  7\n#define BOT2  6\n#define LEDG  13\n\n#define MOT1  2\n#define MOT2  3\n#define MOT3  4\n#define MOT4  5\n\n#define T_GENERAL         0\n#define T_LEDS            (T_GENERAL+1)\n#define T_CALIBRACION     (T_LEDS+1)\n#define T_CANT            (T_CALIBRACION+1)\n\n#define WHITE  1\n#define BLACK  0\n\n#define COLOR BLACK\n\n#define RECTA   0\n#define CURVA   1\n#define FRENO   2\n\n#define CANT_SENS     5\n#define CANT_SENS_MAX 6\n\nint ms[T_CANT];\n\nconst int CNY[CANT_SENS_MAX] = { A0, A1, A2, A3, A4, A5 };              //pines\nint CNYmax[CANT_SENS_MAX] = { 0, 0, 0, 0, 0, 0 };                     //valor maximo que puede tomar (se calibra)\nint CNYmin[CANT_SENS_MAX] = { 1023, 1023, 1023, 1023, 1023, 1023 };   //valor minimo que puede tomar (se calibra)\nconst int peso[CANT_SENS_MAX] = { 0, 1000, 2000, 3000, 4000, 5000 };    //peso para el promedio ponderado\nint linea = 0;                                                        //posicion de la linea de -1000 a 1000\nboolean last_dir = 1;                                                //ultima direccion, 0 izq, 1 der\nboolean hay_linea = 0;\nint settle_time = 200;\n\n#define POR_MIN   50      \n#define GIRO_MAX  1.25   \n\nint maxVel = 600;         //velocidad maxima\nint calVel = 200;         //velocidad de calibracion\nfloat KP = 0.4;\nfloat KD = 12;\nfloat KI = 0;\nfloat correccion = 0;\nint proporcional = 0;\nint derivada = 0;\nint integral = 0;\nint last_linea = 0;\n\nint tramo = RECTA;\nint last_mark = 0;\n//                        RECTA CURVA FRENO\nconst int tramoVel[] = { 800,  600,  100 };\nconst float tramoKp[] = { 0.5,  0.4,  0.1 };\nconst float tramoKd[] = { 15,   12,   5 };\nconst float tramoKi[] = { 0,    0,    0 };\n\nint start = 0;\nTimerOne Timer1;\n// the setup function runs once when you press reset or power the board\nvoid setup() {\n    Serial.begin(9600);\n    Timer1.initialize(1000);\n    Timer1.attachInterrupt(contador);\n\n    pinMode(BOT1, INPUT_PULLUP);\n    pinMode(BOT2, INPUT_PULLUP);\n\n    pinMode(LEDG, OUTPUT);\n\n    pinMode(MOT1, OUTPUT);\n    pinMode(MOT2, OUTPUT);\n    pinMode(MOT3, OUTPUT);\n    pinMode(MOT4, OUTPUT);\n\n    for (int x = 0; x &lt;= CANT_SENS_MAX; x++) {\n        pinMode(CNY[x], INPUT);\n    }\n}\nvoid contador() {\n    for (int x = 0; x &lt; T_CANT; x++) {\n        ms[x]++;\n    }\n}\nvoid calcularLinea(boolean color) {    //1 para WHITE 0 para BLACK\n    long CNYesc[CANT_SENS_MAX];         //para ponerlo en una escala de 1000\n    hay_linea = 0;                      //por si se me fue de la linea //TIENE QUE EMPEZAR EN 0\n    long numerador = 0;\n    long denominador = 0;\n    for (int x = 0; x &lt;= CANT_SENS - 1; x++) {\n        CNYesc[x] = analogRead(CNY[x]) - CNYmin[x];\n        CNYesc[x] = CNYesc[x] * 1000;\n        CNYesc[x] = CNYesc[x] / (CNYmax[x] - CNYmin[x]);\n        if (color == 1) {\n            CNYesc[x] = 1000 - CNYesc[x];     //lo doy vuelta si busco el BLACK\n        }\n        if (CNYesc[x] &gt; 10 * POR_MIN) {       //detecta si hay una linea\n            hay_linea = 1;\n        }\n        numerador += CNYesc[x] * peso[x];   //para el promedio ponderado\n        denominador += CNYesc[x];         //para el promedio ponderado\n    }\n    if (hay_linea == 1) {\n        linea = numerador / denominador;    //promedio ponderado\n        linea = linea - (CANT_SENS - 1) / 2 * 1000;         //cambiar de 0 - 4000 a error\n        last_dir = (linea &gt;= 0) ? 1 : 0;    //acutaliza la ultima direccion\n    }\n    else {\n        linea = 0 + (CANT_SENS - 1) * 1000 * last_dir;    //utiliza la info de la ultima direccion\n        linea = linea - (CANT_SENS - 1) / 2 * 1000;         //cambiar de 0 - 4000 a error\n\n                                                            //tramo = (start==1)? CURVA : RECTA;        //seguro\n    }\n\n    //dW(LEDG, hay_linea);\n}\nint cambiaTramo(boolean color) {\n    color = !color;                   //en la plaquita individual el valor es inverso\n    long CNYesc;\n    int x = CANT_SENS_MAX - 1;\n    CNYesc = analogRead(CNY[x]);/* - CNYmin[x];\n                                CNYesc = CNYesc * 1000;\n                                CNYesc = CNYesc / (CNYmax[x]-CNYmin[x]);*/\n    if (color == 1) {\n        CNYesc = 1000 - CNYesc;           //lo doy vuelta si busco el BLACK\n    }\n    if (CNYesc &gt; 10 * POR_MIN) {          //detecta si hay una linea\n        last_mark = 1;\n    }\n    else {\n        if (last_mark == 1) {\n            motorSpeed(-300, -300);\n            delay(50);\n            if (tramo == RECTA) {\n                tramo = CURVA;\n            }\n            else {\n                if (tramo == CURVA) {\n                    tramo = RECTA;\n                }\n            }\n        }\n        last_mark = 0;\n    }\n    Serial.println(CNYesc);\n    dW(LEDG, (CNYesc &gt; 10 * POR_MIN));\n    return tramo;\n}void updatePID(int t) {\n    maxVel = tramoVel[t];\n    KP = tramoKp[t];\n    KD = tramoKd[t];\n    KI = tramoKi[t];\n}\n\nfloat calcCorreccion(void) {\n    proporcional = linea;\n    derivada = linea - last_linea;\n    integral = linea + last_linea;\n    last_linea = linea;\n    correccion = (KP*proporcional + KD*derivada + KI*integral);\n    if (correccion &gt; 0) {\n        correccion = (correccion &gt; maxVel*GIRO_MAX) ? maxVel*GIRO_MAX : correccion;\n    }\n    if (correccion &lt; 0) {\n        correccion = (correccion &lt; -maxVel*GIRO_MAX) ? -maxVel*GIRO_MAX : correccion;\n    }\n\n    return (float)(KP*proporcional + KD*derivada + KI*integral);\n}\n\nvoid motorSpeed(int m1, int m2) { //entre 1000 y -1000\n    int en1 = map(abs(m1), 0, 1000, 0, 255);\n    int en2 = map(abs(m2), 0, 1000, 0, 255);\n    en1 = (m1&gt;0) ? 255 - en1 : en1;\n    en2 = (m2 &gt;= 0) ? en2 : 255 - en2;\n    analogWrite(MOT2, en1);\n    analogWrite(MOT4, en2);\n    digitalWrite(MOT1, (m1 &gt; 0) ? HIGH : LOW);\n    digitalWrite(MOT3, (m2 &gt;= 0) ? LOW : HIGH);\n}\n\n\n// the loop function runs over and over again until power down or reset\nvoid loop() {\n    calcularLinea(\"BLACK\");\n    correccion = calcCorreccion();\n\n\n    updatePID(cambiaTramo(COLOR));\n\n    if (dR(BOT1) == 0) {\n        delay(500);\n        calibrar(calVel, -calVel, 300);\n        calibrar(-calVel, calVel, 400);\n        calibrar(calVel, -calVel, 500);\n        calibrar(-calVel, calVel, 400);\n    }\n    if (dR(BOT2) == 0) {\n        while (dR(BOT2) == 0) {}\n        start = 1;\n        tramo = RECTA;\n        last_mark = 0;\n        ms[T_GENERAL] = 0;\n    }\n    if (start) {\n        updatePID(cambiaTramo(COLOR));\n\n        if (correccion &gt; 0) {\n            motorSpeed(maxVel, maxVel - correccion);\n        }\n        else {\n            motorSpeed(maxVel + correccion, maxVel);\n        }\n    }\n}\nvoid calibrar(int m1, int m2, int timeCal) {         //velocidad de los motores y timepo de calibracion\n    ms[T_CALIBRACION] = 0;\n    while (ms[T_CALIBRACION] &lt; timeCal) {\n        if (ms[T_CALIBRACION] % 100 &gt;= 50) {                //Titilar los leds\n            dW(LEDG, 1);\n        }\n        else {\n            dW(LEDG, 0);\n        }\n        motorSpeed(m1, m2);\n        int CNYread[CANT_SENS_MAX];\n        for (int x = 0; x &lt;= CANT_SENS_MAX - 1; x++) {\n            CNYread[x] = analogRead(CNY[x]);\n            CNYmin[x] = (CNYread[x] &lt; CNYmin[x]) ? CNYread[x] : CNYmin[x];\n            CNYmax[x] = (CNYread[x] &gt; CNYmax[x]) ? CNYread[x] : CNYmax[x];\n        }\n    }\n    motorSpeed(0, 0);\n    dW(LEDG, 1);\n}\n</code></pre>\n\n<p>Can anyone help me please?\nI also test my code in Visual Studio 2015 and arduino app.\nExcuse me for my bad English.</p>\n"}, {"tags": ["c++", "windows", "com", "hresult"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1518614422, "post_id": 48786874, "comment_id": 84578020, "body": "See <a href=\"https://msdn.microsoft.com/en-us/library/cc231198\" rel=\"nofollow noreferrer\">HRESULT</a>, the docs for <a href=\"https://msdn.microsoft.com/en-us/library/aa385638\" rel=\"nofollow noreferrer\">mc.exe</a>, and the spec for <a href=\"https://msdn.microsoft.com/en-us/library/dd996906\" rel=\"nofollow noreferrer\">message text files</a>. For creating an <code>HRESULT</code> header, use the <code>-o</code> command-line option. To set the customer bit, use the <code>-c</code> command-line option. You may want some symbolic names defined at the top, e.g. <code>SeverityNames=(Success=0 Fail=2)</code> and  <code>FacilityNames=(FACILITY_ITF=4)</code>."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 1, "creation_date": 1518616143, "post_id": 48786874, "comment_id": 84579180, "body": "There&#39;s no technical way to distinguish. You&#39;re supposed to use FACILITY_ITF like all non-Microsoft developers on the planet, who can define colliding error codes happily, so it&#39;s just a plain nonsense. Note that to add to the confusion, there are some Microsoft components that use FACILITY_ITF ..."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "reply_to_user": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1518616984, "post_id": 48786874, "comment_id": 84579757, "body": "@SimonMourier, you can also set the customer bit in the generated codes via <code>-c</code>, but really that&#39;s non-standard for <code>HRESULT</code> codes. It&#39;s reserved for <code>NTSTATUS</code> codes."}, {"owner": {"reputation": 116623, "user_id": 403671, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/454HU.jpg?s=128&g=1", "display_name": "Simon Mourier", "link": "https://stackoverflow.com/users/403671/simon-mourier"}, "edited": false, "score": 0, "creation_date": 1518617855, "post_id": 48786874, "comment_id": 84580375, "body": "When working with my own code (if it&#39;s not something distributed worldwide, say), I use custom a facility number of mine, one that does not collide with Microsoft ones (like a high number), although I know it&#39;s bad :-)"}, {"owner": {"reputation": 1841, "user_id": 324137, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61decf2582f3c02548c886f0be35e738?s=128&d=identicon&r=PG", "display_name": "fogbit", "link": "https://stackoverflow.com/users/324137/fogbit"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1518686333, "post_id": 48786874, "comment_id": 84609840, "body": "@eryksun what&#39;s the point to set the customer bit if there is the an agreement that custom HRESULTs must use FACILITY_ITF?"}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1518691136, "post_id": 48786874, "comment_id": 84613060, "body": "@fogbit, I suggested it to Simon in response to the claim that &quot;there are some Microsoft components that use FACILITY_ITF&quot;, though I don&#39;t typically see the customer bit set for <code>HRESULT</code> values, and winerror.h states that it&#39;s reserved for use with kernel <code>NTSTATUS</code> values. Really I wouldn&#39;t worry about it."}], "answers": [{"comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1518611938, "post_id": 48787307, "comment_id": 84576390, "body": "Also there is an internal structure to the HRESULT.  (Wikipedia) <a href=\"https://en.wikipedia.org/wiki/HRESULT\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/HRESULT</a> and (MSDN) <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms690088(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1274, "user_id": 3742925, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d85fd96f8f44758ba76f7a793c8e70c7?s=128&d=identicon&r=PG&f=1", "display_name": "Aurora", "link": "https://stackoverflow.com/users/3742925/aurora"}, "is_accepted": true, "score": 4, "last_activity_date": 1518611935, "last_edit_date": 1518611935, "creation_date": 1518611486, "answer_id": 48787307, "question_id": 48786874, "link": "https://stackoverflow.com/questions/48786874/hresult-distinguish-custom-code-from-system-one/48787307#48787307", "title": "HRESULT: distinguish custom code from system one", "body": "<p>A HRESULT, which describes an interface-specific return code, should contain the <code>FACILTY_ITF</code> facility code. Note however that return values between 0x0000 and 0x01FF are reserved for COM-defined <code>FACILITY_ITF</code> codes.</p>\n\n<p>See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms679751(v=vs.85).aspx\" rel=\"nofollow noreferrer\">this</a> link for further details.</p>\n"}], "owner": {"reputation": 1841, "user_id": 324137, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/61decf2582f3c02548c886f0be35e738?s=128&d=identicon&r=PG", "display_name": "fogbit", "link": "https://stackoverflow.com/users/324137/fogbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 704, "favorite_count": 0, "accepted_answer_id": 48787307, "answer_count": 1, "score": 1, "last_activity_date": 1518611935, "creation_date": 1518610051, "question_id": 48786874, "link": "https://stackoverflow.com/questions/48786874/hresult-distinguish-custom-code-from-system-one", "title": "HRESULT: distinguish custom code from system one", "body": "<p>Similar question <a href=\"https://stackoverflow.com/questions/1522853/creating-your-own-hresult\">was asked before</a>, but i haven't found some answers there.</p>\n\n<p>As i understand, for making custom HRESULT codes i create an <code>.mc</code> file where i describe the codes, then compile it and get an <code>.h</code> file. But i can't get it how to prevent possible overlapping with the system ones.</p>\n\n<p>Example:</p>\n\n<pre><code>LanguageNames=(English=0x409:MSG00409)\nMessageId = 0x0\nSeverity = Success\nFacility = Application\nSymbolicName = CUSTOME_CODE\nLanguage=English\nCusome message\n.\n</code></pre>\n\n<p>produces </p>\n\n<pre><code>#define CUSTOME_CODE                     0x00000000L\n</code></pre>\n\n<p>which is actually the same with <code>S_OK</code>.</p>\n\n<p>If i return <code>CUSTOME_CODE</code> from my method, a caller can't distinguish it from <code>S_OK</code>;</p>\n\n<p>Wiki says HRESULT contains a bit for distinguishing Microsoft / User defined code properties, but i don't understand how to set it. Also MSDN says that the bit is just \"reserved\".</p>\n\n<p>How do i make code which can't overlap the system ones? </p>\n"}, {"tags": ["c++", "stringstream"], "comments": [{"owner": {"reputation": 59, "user_id": 6121572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbc2896cc1b69fc5a94e95407cc209a?s=128&d=identicon&r=PG&f=1", "display_name": "Runedog48", "link": "https://stackoverflow.com/users/6121572/runedog48"}, "edited": false, "score": 0, "creation_date": 1518611697, "post_id": 48786844, "comment_id": 84576212, "body": "Sorry, I added the writeMemData function."}, {"owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "edited": false, "score": 1, "creation_date": 1518611955, "post_id": 48786844, "comment_id": 84576401, "body": "The resulting data looks OK. Those <code>\\x00</code> are high bytes of wide characters - you are using <b>w</b>stringstream, don&#39;t you?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1518611964, "post_id": 48786844, "comment_id": 84576410, "body": "<code>wchar</code>s are twice as big as <code>char</code>s, and they represent latin characters as 1 byte identical to the <code>char</code> representation, and 1 byte that is <code>0</code>. You are displaying your file&#39;s <i>bytes</i>, not it&#39;s <i><code>wchar</code>s</i>"}], "answers": [{"tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": true, "score": 3, "last_activity_date": 1518613172, "last_edit_date": 1518613172, "creation_date": 1518612266, "answer_id": 48787570, "question_id": 48786844, "link": "https://stackoverflow.com/questions/48786844/prevent-operators-from-being-inserted-into-stringstream/48787570#48787570", "title": "Prevent operators from being inserted into stringstream", "body": "<p>You are writing to <code>std::wstringstream</code> that is stream of <em>wide</em> (16-bit, or 2-byte in your case*) characters. So for each 1-byte <code>char</code> put into that stream, 2-byte <code>wchar_t</code> comes out:</p>\n\n<pre><code>ss &lt;&lt; \"{\" &lt;&lt; p.x &lt;&lt; \",\" &lt;&lt; p.y &lt;&lt; \",\" &lt;&lt; p.r &lt;&lt; \",\" &lt;&lt; p.g &lt;&lt; \",\" &lt;&lt; p.b &lt;&lt; \"}\";\n//     |     |       |     |       |     |       |     |       |     |       |\n//     {\\x00 0\\x00   ,\\x00 0\\x00   ,\\x00 0\\x00   ,\\x00 0\\x00   ,\\x00 0\\x00   }\\x00\n</code></pre>\n\n<p>Those NUL bytes are high bytes of 2 byte pairs.</p>\n\n<p>If you want your data encoded in 8-bit encoding, use <code>std::stringstream</code> instead of <code>std::wstringstream</code>.</p>\n\n<p>* - standard does not define exact <code>wchar_t</code> size.</p>\n"}], "owner": {"reputation": 59, "user_id": 6121572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bbc2896cc1b69fc5a94e95407cc209a?s=128&d=identicon&r=PG&f=1", "display_name": "Runedog48", "link": "https://stackoverflow.com/users/6121572/runedog48"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 48787570, "answer_count": 1, "score": 1, "last_activity_date": 1518613172, "creation_date": 1518609926, "last_edit_date": 1518611666, "question_id": 48786844, "link": "https://stackoverflow.com/questions/48786844/prevent-operators-from-being-inserted-into-stringstream", "title": "Prevent operators from being inserted into stringstream", "body": "<p>Disclaimer: I'm terrible with C++;</p>\n\n<p>I'm using a <code>wstringstream</code> to take objects from a vector and format their values into a string that can be stored in a 'file map' ( for IPC ).</p>\n\n<pre><code>std::wstringstream ss;\nSDLWrap::frame obs = SDLWrap::getObs();\nfor (int i = 0; i &lt; obs.pixels.size(); i++ )\n{\n    SDLWrap::pixel p = obs.pixels[i];\n    ss &lt;&lt; \"{\" &lt;&lt; p.x &lt;&lt; \",\" &lt;&lt; p.y &lt;&lt; \",\" &lt;&lt; p.r &lt;&lt; \",\" &lt;&lt; p.g &lt;&lt; \",\" &lt;&lt; p.b &lt;&lt; \"}\";\n}\nMemFile::writeMemData(TEXT(\"Local\\\\ReflexAIOut\"), ss.str(), ss.str().length()*2);\n</code></pre>\n\n<p>The string is converted into an array of characters (<code>WCHAR</code>) and then put into memory. It seems the operators are also included in the string because the final result includes 3 NUL char's in place of the operators. </p>\n\n<pre><code>&lt;mmap.mmap object at 0x00000185F9A8CF30&gt;\nb'{\\x000\\x00,\\x000\\x00,\\x000\\x00,\\x000\\x00,\\x000\\x00}\\x00{\\x000\\x00,\\x001\\x00,\\x000\\x00,\\x000\\x00,\\x000\\x00}\\x00{\\x000\\x00,\\x002\\x00,\\x000\\x00,\\x000\\x00,\\x000\\x00}...\n</code></pre>\n\n<p>Is there an easy way to concatenate these values without including the operator? I would like to avoid having to make another loop to remove the extra NUL characters.</p>\n\n<p>Edit: Here's the writeMemData function</p>\n\n<pre><code>bool MemFile::writeMemData(std::wstring memName, std::wstring data, int size)\n{\n    HANDLE mapFile;\n    LPCTSTR buff;\n\n    mapFile = CreateFileMapping(\n        INVALID_HANDLE_VALUE,\n        NULL,\n        PAGE_READWRITE,\n        0,\n        size,\n        memName.c_str());\n\n    if (mapFile == NULL)\n    {\n        return false;\n    }\n\n    buff = (LPTSTR)MapViewOfFile(mapFile,\n        FILE_MAP_ALL_ACCESS,\n        0,\n        0,\n        size);\n\n    if (buff == NULL)\n    {\n        return false;\n    }\n\n    CopyMemory((PVOID)buff, data.c_str(), (_tcslen(data.c_str()) * sizeof(TCHAR)));\n\n    UnmapViewOfFile(buff);\n    openMem_.push_back(mapFile);\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "python-3.x", "word-wrap"], "comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1518609783, "post_id": 48786693, "comment_id": 84574889, "body": "You won&#39;t be able to do that well unless you read and understand <a href=\"https://docs.python.org/3.6/c-api/index.html\" rel=\"nofollow noreferrer\">docs.python.org/3.6/c-api/index.html</a>"}, {"owner": {"reputation": 2262, "user_id": 1619521, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a54821d500ac089427ffe6bfec3d0e5c?s=128&d=identicon&r=PG", "display_name": "doom", "link": "https://stackoverflow.com/users/1619521/doom"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1518610322, "post_id": 48786693, "comment_id": 84575251, "body": "OK. But maybe you have a link to an example. Examples are often more understandable than official docs (even if it is usefull when you want to go deep inside). I haven&#39;t found anything."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1518610861, "post_id": 48786693, "comment_id": 84575616, "body": "Use python modules source code as examples: <a href=\"https://github.com/python/cpython/tree/master/Modules\" rel=\"nofollow noreferrer\">github.com/python/cpython/tree/master/Modules</a>"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 2, "creation_date": 1518611005, "post_id": 48786693, "comment_id": 84575720, "body": "The value provided by Boost.Python, SWIG, etc, is that you do not have to know/understand all the low level details."}, {"owner": {"reputation": 2262, "user_id": 1619521, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a54821d500ac089427ffe6bfec3d0e5c?s=128&d=identicon&r=PG", "display_name": "doom", "link": "https://stackoverflow.com/users/1619521/doom"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1518615618, "post_id": 48786693, "comment_id": 84578804, "body": "I can&#39;t believe that Python designers have not provided a simple way to do that."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1518616540, "creation_date": 1518616540, "answer_id": 48788930, "question_id": 48786693, "link": "https://stackoverflow.com/questions/48786693/how-to-wrap-a-c-object-using-pure-python-extension-api-python3/48788930#48788930", "title": "How to wrap a C++ object using pure Python Extension API (python3)?", "body": "<p>You may like to start with <a href=\"https://docs.python.org/3.6/extending/extending.html\" rel=\"nofollow noreferrer\">Extending Python with C or C++</a>.</p>\n\n<p>You can use <a href=\"https://github.com/python/cpython/tree/master/Modules\" rel=\"nofollow noreferrer\">standard Python modules source code</a> as examples.</p>\n\n<p>The value provided by Boost.Python, SWIG, etc, is that you do not have to know/understand all the low level details because they handle them for you. This is why people use them.</p>\n"}, {"tags": [], "owner": {"reputation": 2262, "user_id": 1619521, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a54821d500ac089427ffe6bfec3d0e5c?s=128&d=identicon&r=PG", "display_name": "doom", "link": "https://stackoverflow.com/users/1619521/doom"}, "is_accepted": true, "score": 16, "last_activity_date": 1519233140, "last_edit_date": 1519233140, "creation_date": 1518618268, "answer_id": 48789494, "question_id": 48786693, "link": "https://stackoverflow.com/questions/48786693/how-to-wrap-a-c-object-using-pure-python-extension-api-python3/48789494#48789494", "title": "How to wrap a C++ object using pure Python Extension API (python3)?", "body": "<p>Seems that the answer was in fact here : <a href=\"https://docs.python.org/3.6/extending/newtypes.html\" rel=\"noreferrer\">https://docs.python.org/3.6/extending/newtypes.html</a></p>\n\n<p>With examples, but not really easy.</p>\n\n<p>EDIT 1 :</p>\n\n<p>In fact, it is not really for wrapping a C++ object in a Python object, but rather to create a Python object with C code. (edit2 : and so you can wrap C++ object!)</p>\n\n<p>EDIT 2 :</p>\n\n<p>Here is a solution using the <a href=\"https://docs.python.org/3.6/extending/newtypes.html\" rel=\"noreferrer\">Python newtypes</a></p>\n\n<p>.</p>\n\n<p>Original C++ file : <code>Voice.cpp</code></p>\n\n<pre><code>#include &lt;cstdio&gt;\n\n#include \"Voice.h\"\n\nnamespace transformation\n{ \n    Voice::Voice(int fftSize) {\n        printf(\"c++ constructor of voice\\n\");\n        this-&gt;fftSize=fftSize;\n        mem=new double[fftSize];\n        } \n\n    Voice::~Voice() { delete [] mem; } \n\n    int Voice::filter(int freq) {\n        printf(\"c++ voice filter method\\n\");\n        return (doubleIt(3));\n    }\n    int Voice::doubleIt(int i) { return 2*i; }\n}\n</code></pre>\n\n<p>.</p>\n\n<p>Original h file : <code>Voice.h</code></p>\n\n<pre><code>namespace transformation {\n\n    class Voice {\n    public:\n        double *mem;\n        int fftSize;\n\n        Voice(int fftSize);\n        ~Voice();\n\n        int filter(int freq);\n        int doubleIt(int i);\n    };\n\n}\n</code></pre>\n\n<p>.</p>\n\n<p>C++ Python wrapper file : voiceWrapper.cpp</p>\n\n<pre><code>#include &lt;Python.h&gt;\n\n#include &lt;cstdio&gt;\n//~ #include \"structmember.h\"\n\n#include \"Voice.h\"\n\nusing transformation::Voice;\n\ntypedef struct {\n    PyObject_HEAD\n    Voice * ptrObj;\n} PyVoice;\n\n\n\n\nstatic PyModuleDef voicemodule = {\n    PyModuleDef_HEAD_INIT,\n    \"voice\",\n    \"Example module that wrapped a C++ object\",\n    -1,\n    NULL, NULL, NULL, NULL, NULL\n};\n\nstatic int PyVoice_init(PyVoice *self, PyObject *args, PyObject *kwds)\n// initialize PyVoice Object\n{\n    int fftSize;\n\n    if (! PyArg_ParseTuple(args, \"i\", &amp;fftSize))\n        return -1;\n\n    self-&gt;ptrObj=new Voice(fftSize);\n\n    return 0;\n}\n\nstatic void PyVoice_dealloc(PyVoice * self)\n// destruct the object\n{\n    delete self-&gt;ptrObj;\n    Py_TYPE(self)-&gt;tp_free(self);\n}\n\n\nstatic PyObject * PyVoice_filter(PyVoice* self, PyObject* args)\n{\n    int freq;\n    int retval;\n\n    if (! PyArg_ParseTuple(args, \"i\", &amp;freq))\n        return Py_False;\n\n    retval = (self-&gt;ptrObj)-&gt;filter(freq);\n\n    return Py_BuildValue(\"i\",retval);\n}\n\n\nstatic PyMethodDef PyVoice_methods[] = {\n    { \"filter\", (PyCFunction)PyVoice_filter,    METH_VARARGS,       \"filter the mem voice\" },\n    {NULL}  /* Sentinel */\n};\n\nstatic PyTypeObject PyVoiceType = { PyVarObject_HEAD_INIT(NULL, 0)\n                                    \"voice.Voice\"   /* tp_name */\n                                };\n\n\nPyMODINIT_FUNC PyInit_voice(void)\n// create the module\n{\n    PyObject* m;\n\n    PyVoiceType.tp_new = PyType_GenericNew;\n    PyVoiceType.tp_basicsize=sizeof(PyVoice);\n    PyVoiceType.tp_dealloc=(destructor) PyVoice_dealloc;\n    PyVoiceType.tp_flags=Py_TPFLAGS_DEFAULT;\n    PyVoiceType.tp_doc=\"Voice objects\";\n    PyVoiceType.tp_methods=PyVoice_methods;\n    //~ PyVoiceType.tp_members=Noddy_members;\n    PyVoiceType.tp_init=(initproc)PyVoice_init;\n\n    if (PyType_Ready(&amp;PyVoiceType) &lt; 0)\n        return NULL;\n\n    m = PyModule_Create(&amp;voicemodule);\n    if (m == NULL)\n        return NULL;\n\n    Py_INCREF(&amp;PyVoiceType);\n    PyModule_AddObject(m, \"Voice\", (PyObject *)&amp;PyVoiceType); // Add Voice object to the module\n    return m;\n}\n</code></pre>\n\n<p>.</p>\n\n<p>distutils file : <code>setup.py</code></p>\n\n<pre><code>from distutils.core import setup, Extension\n\nsetup(name='voicePkg', version='1.0',  \\\n      ext_modules=[Extension('voice', ['voiceWrapper.cpp','Voice.cpp'])])\n</code></pre>\n\n<p>.</p>\n\n<p>python test file : <code>test.py</code></p>\n\n<pre><code>import voice\n\nv=voice.Voice(512)\nresult=v.filter(5)\nprint('result='+str(result))\n</code></pre>\n\n<p>.</p>\n\n<p>and magic :</p>\n\n<pre><code>sudo python3 setup.py install\npython3 test.py\n</code></pre>\n\n<p>Output is :</p>\n\n<pre><code>c++ constructor of voice\nc++ voice filter method\nresult=6\n</code></pre>\n\n<p>Enjoy !</p>\n\n<p>Doom</p>\n"}], "owner": {"reputation": 2262, "user_id": 1619521, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a54821d500ac089427ffe6bfec3d0e5c?s=128&d=identicon&r=PG", "display_name": "doom", "link": "https://stackoverflow.com/users/1619521/doom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3306, "favorite_count": 6, "accepted_answer_id": 48789494, "answer_count": 2, "score": 9, "last_activity_date": 1519233140, "creation_date": 1518609512, "last_edit_date": 1518615634, "question_id": 48786693, "link": "https://stackoverflow.com/questions/48786693/how-to-wrap-a-c-object-using-pure-python-extension-api-python3", "title": "How to wrap a C++ object using pure Python Extension API (python3)?", "body": "<p>I want to know how to wrap a C++ object with <a href=\"https://docs.python.org/3/extending/extending.html\" rel=\"noreferrer\">Python Extension API</a> (and distutils) without external tools (like Cython, Boost, SWIG, ...). Just in pure Python way without creating a dll.</p>\n\n<p>Note that my C++ object has memory allocations so destructor has to be called to avoid memory leaks.</p>\n\n<pre><code>#include \"Voice.h\"\n\nnamespace transformation\n{ \n  Voice::Voice(int fftSize) { mem=new double[fftSize]; } \n\n  Voice::~Voice() { delete [] mem; } \n\n  int Voice::method1() { /*do stuff*/ return (1); } \n}\n</code></pre>\n\n<p>I just want to do somethings like that in Python :</p>\n\n<pre><code>import voice\n\nv=voice.Voice(512)\nresult=v.method1()\n</code></pre>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1518618535, "post_id": 48786523, "comment_id": 84580856, "body": "I suspect the issue comes from the potential asymmetry between send and receive calls. A given process always expects receiving from a process it sends to. But this remote process might not plan to send to the current process in the first place... Just check that carefully."}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1518619845, "post_id": 48786523, "comment_id": 84581830, "body": "I don&#39;t think I understand exactly what you mean. My calls are: I send to all the ids greater than 2 and I receive from all the  ids greater than 2. Where is the asymmetry? Note that id 0 and id 1 shouldn&#39;t execute this code.. (this is only a small part of code...)"}, {"owner": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1518629448, "post_id": 48786523, "comment_id": 84588207, "body": "Actually, your <code>%np</code> is dangerous: it might hide a fundamental issue. Indeed, if ever it ends up truncating the <code>dest</code>, then you&#39;ll try to communicate with process id 0 which won&#39;t have initiate the corresponding send and receive calls. That&#39;s what I&#39;m afraid of. But it&#39;s impossible to say since your code isn&#39;t a <a href=\"https://stackoverflow.com/help/mcve\">proper mcve</a>"}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1518630796, "post_id": 48786523, "comment_id": 84588859, "body": "i also tried to remove the % and the problem continues to exist..."}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "reply_to_user": {"reputation": 8381, "user_id": 5239503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MqgeX.jpg?s=128&g=1", "display_name": "Gilles", "link": "https://stackoverflow.com/users/5239503/gilles"}, "edited": false, "score": 0, "creation_date": 1518633269, "post_id": 48786523, "comment_id": 84590122, "body": "In other, on single machine it works correctly. The error arises when i launch it on a cluster..."}, {"owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "edited": false, "score": 1, "creation_date": 1518668674, "post_id": 48786523, "comment_id": 84602583, "body": "can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> ?"}, {"owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "edited": false, "score": 0, "creation_date": 1518684663, "post_id": 48786523, "comment_id": 84608930, "body": "of course, i also add a note that i&#39;ve just discovered.."}], "owner": {"reputation": 31, "user_id": 7779060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abe54564764f650acebc825e98fe913a?s=128&d=identicon&r=PG&f=1", "display_name": "dang92", "link": "https://stackoverflow.com/users/7779060/dang92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1518700671, "creation_date": 1518608966, "last_edit_date": 1518700671, "question_id": 48786523, "link": "https://stackoverflow.com/questions/48786523/pmpi-waitall-error", "title": "PMPI_Waitall error", "body": "<p>i've some problems with this piece of code. </p>\n\n<pre><code>NEIGHBOORDHOOD_FLAG = 1234;\nint number_of_nodes=90;\nMPI_Request neig_request[2*number_of_nodes];\nMPI_Status neig_status[2*number_of_nodes];\nint neig_counter=0;\nint is_neighbour_send[number_of_nodes];\nint is_neighbour_receive[number_of_nodes];\nfor(int v=2;v&lt;number_of_nodes+2;++v){\n    is_neighbour_send[v-2] = (util.check_targets(neighbours,v)==true)?1:0;\n    this-&gt;communicate_neighborhood(&amp;(is_neighbour_send[v-2]),v,&amp;(neig_request[neig_counter]));\n    ++neig_counter;\n}\n//ricevo la comunicazione dai nodi per sapere di chi sono vicino\nfor(int v=2;v&lt;number_of_nodes+2;++v){\n    this-&gt;receive_neighborhood(&amp;(is_neighbour_receive[v-2]),v,&amp;(neig_request[neig_counter]));\n    ++neig_counter;\n}\n\nMPI_Waitall(neig_counter,neig_request,neig_status); \n</code></pre>\n\n<p>The two methods above are essentially two wrapped versions of the MPI send and receive:</p>\n\n<pre><code>void NodeAgent::communicate_neighborhood(int *neigh,int dest_node,MPI_Request *req){\n    MPI_Class::send_message(neigh,MPI_INT,1,dest_node,NEIGHBOORDHOOD_FLAG,req);\n}   \n\nvoid NodeAgent::receive_neighborhood(int *is_neighbour,int node_mitt,MPI_Request *req){\n   MPI_Class::receive_message(is_neighbour,MPI_INT,1,node_mitt,NEIGHBOORDHOOD_FLAG,req);\n}\n</code></pre>\n\n<p>with send and receive <strong>static</strong> methods:</p>\n\n<pre><code>void MPI_Class::send_message(void *content,MPI_Datatype datatype,int length,int dest,int tag,MPI_Request *request){\n   int np = MPI_Class::count();\n   MPI_Isend(content, length, datatype, (dest % np), tag, MPI_COMM_WORLD, request);\n}\n\nvoid MPI_Class::receive_message(void *buffer,MPI_Datatype datatype,int length,int dest,int tag,MPI_Request *request){\n   int np = MPI_Class::count();\n   MPI_Irecv(buffer,length,datatype,(dest % np),tag,MPI_COMM_WORLD,request);\n}\n</code></pre>\n\n<p>The number of nodes is the number of processes - 2 (there are two processes that i use for others operations) and i've used the \" % \" in send and receive to ensure that the sender and the recipient are always in the range that i want.\nThe interesting thing is that this code executes properly also with large number of process (100). The problem arises when i launch the program on <strong>two machine</strong>s or more... \nIt gives me: <strong>Fatal error in PMPI_Waitall: See the MPI_ERROR field in MPI_Status for the error code</strong>\nI tried to print the MPI_ERROR of each status, but are all zeroes...</p>\n\n<p>Can someone help me?\nmany thanks in advance  </p>\n\n<p>Edit, here the <strong>MCVE</strong>:</p>\n\n<pre><code>  #include &lt;mpi.h&gt;\n  #include &lt;stdlib.h&gt;\n  int main(int argc,char **argv){\n     MPI_Init(&amp;argc,&amp;argv);\n     int my_id;\n     MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_id);\n     int world_size;\n     MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n     MPI_Status * statuses = (MPI_Status *)malloc(2*world_size * sizeof(MPI_Status));\n     MPI_Request * requestes = (MPI_Request *)malloc(2*world_size * sizeof(MPI_Request));\n     int counter =0;\n     int *tosend = (int *) malloc((world_size - 2) * sizeof(int));\n     int *toreceive = (int *) malloc((world_size - 2) * sizeof(int));\n     for(int i=0;i&lt;world_size-2;++i){\n        tosend[i]=0;\n     }\n    if(my_id&gt;1){\n     for(int i=2;i&lt;world_size;++i){\n        MPI_Isend(&amp;tosend[i-2],1,MPI_INT,i,0,MPI_COMM_WORLD,&amp;requestes[counter]);\n        ++counter;\n      }\n    }\n    if(my_id&gt;1){\n       for(int i=2;i&lt;world_size;++i){\n         MPI_Irecv(&amp;(toreceive[i-2]),1,MPI_INT,i,0,MPI_COMM_WORLD,&amp;(requestes[counter]));\n         ++counter;     \n       }\n   }\n    MPI_Waitall(counter,requestes,statuses);\n    free(statuses);\n    free(requestes);\n    free(tosend);\n    free(toreceive);\n    MPI_Finalize();\n\n}\n</code></pre>\n\n<p>Also this code executes correctly on a single machine. The problem arises when i launch it on 2 machines mutual authenticated (ssh). I just discovered that after the MPI_Waitall fatal error, if i try to connect via ssh from a machine to other, it ask me the password....\nWhy? At this point i think the problem is the communication via ssh and not the code.. </p>\n\n<p>Edit2: solved! it was a ssh problem that i solved in some way (i don't know how honestly, i  redid the authentication procedures ten times as long as it worked....</p>\n"}, {"tags": ["java", "android", "c++", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 65820, "user_id": 1741542, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/QdVqh.jpg?s=128&g=1", "display_name": "Olaf Dietsche", "link": "https://stackoverflow.com/users/1741542/olaf-dietsche"}, "is_accepted": true, "score": 1, "last_activity_date": 1518611357, "creation_date": 1518611357, "answer_id": 48787259, "question_id": 48786491, "link": "https://stackoverflow.com/questions/48786491/jni-pass-a-string-from-java-to-c-and-then-pass-c-string-to-string-array/48787259#48787259", "title": "JNI Pass a String from java to c++ and then pass c++ string to string Array", "body": "<p>One simple solution is a temporary string object</p>\n\n<pre><code>extern \"C\" JNIEXPORT jstring JNICALL\nJava_com_example_rsolver_Solver_string(JNIEnv *env, jobject object,jstring string) {\n    // Converting Java String into C++ String and \n    // calling a \"solution\" method and passing c++ string\n    std::string tmp{jstring2string(env,string)};\n    return solution(&amp;tmp);\n}\n</code></pre>\n\n<p>This gives an array of 1 element to <code>solution</code>. But <code>solution()</code> does not know how many elements this array has, so you must add the array size too</p>\n\n<pre><code>std::string solution (int size, std::string argv[]) {\n    // this will return a string\n}\n\n// ...\nstd::string tmp{jstring2string(env, string)};\nreturn solution(1, &amp;tmp);\n</code></pre>\n\n<hr>\n\n<p>Better yet, skip raw arrays, and pass a <code>std::vector</code> of <code>std::string</code>s</p>\n\n<pre><code>std::string solution (const std::vector&lt;std::string&gt; &amp;argv) {\n    // this will return a string\n}\n\n// ...\nstd::vector&lt;std::string&gt; tmp = { jstring2string(env, string) };\nreturn solution(tmp);\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 6025718, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-e0F180vo8kA/AAAAAAAAAAI/AAAAAAAAHmE/ipfi_Fqk9f0/photo.jpg?sz=128", "display_name": "Avi Patel", "link": "https://stackoverflow.com/users/6025718/avi-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1218, "favorite_count": 0, "accepted_answer_id": 48787259, "answer_count": 1, "score": 1, "last_activity_date": 1518611357, "creation_date": 1518608882, "last_edit_date": 1518610441, "question_id": 48786491, "link": "https://stackoverflow.com/questions/48786491/jni-pass-a-string-from-java-to-c-and-then-pass-c-string-to-string-array", "title": "JNI Pass a String from java to c++ and then pass c++ string to string Array", "body": "<p>I declared native method in java.</p>\n\n<pre><code>static\n{\n    // Replace \"Myfile\" with the name of your Native File\n    System.loadLibrary(\"JohnnyX\");\n}\n\n// Declare your native methods here\npublic static native String string(StringBuffer sb);\n</code></pre>\n\n<p>and pass a string buffer to it.</p>\n\n<pre><code>System.out.println(string(sb));\n</code></pre>\n\n<p>and in my JohnnyX.cpp, I am using following method to convert java string into c++ string.</p>\n\n<pre><code>std::string jstring2string(JNIEnv *env, jstring jStr) \n{\n    if (!jStr)\n        return \"\";\n\n    const jclass stringClass = env-&gt;GetObjectClass(jStr);\n    const jmethodID getBytes = env-&gt;GetMethodID(stringClass, \"getBytes\", \"(Ljava/lang/String;)[B\");\n    const jbyteArray stringJbytes = (jbyteArray) env-&gt;CallObjectMethod(jStr, getBytes,\n                                                                       env-&gt;NewStringUTF(\"UTF-8\"));\n\n    size_t length = (size_t) env-&gt;GetArrayLength(stringJbytes);\n    jbyte *pBytes = env-&gt;GetByteArrayElements(stringJbytes, NULL);\n\n    std::string ret = std::string((char *) pBytes, length);\n    env-&gt;ReleaseByteArrayElements(stringJbytes, pBytes, JNI_ABORT);\n\n    env-&gt;DeleteLocalRef(stringJbytes);\n    env-&gt;DeleteLocalRef(stringClass);\n    return ret;\n}\n\nextern \"C\" JNIEXPORT jstring JNICALL Java_com_example_rsolver_Solver_string(JNIEnv *env, jobject object,jstring string) {\n    // Converting Java String into C++ String and calling a \"solution\" method and passing c++ string\n    return solution(jstring2string(env,string));\n}\n</code></pre>\n\n<p>My solution Method is : </p>\n\n<pre><code>string solution (string argv[]) {\n    // this will return a string\n}\n</code></pre>\n\n<p>My problem is that How can i pass c++ string to string array in solution(string argv[])? </p>\n"}, {"tags": ["c++", "scope", "initializer-list"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 14, "creation_date": 1518608862, "post_id": 48786451, "comment_id": 84574241, "body": "The scope of temporary object lasts until the end of the full expression. In your case the function call. Which means the code you show is okay."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1518621154, "post_id": 48786451, "comment_id": 84582757, "body": "Off-topic:  You should consider a coding standard where the parameter names are different than member names."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 2, "creation_date": 1518626523, "post_id": 48786451, "comment_id": 84586428, "body": "@ThomasMatthews: Meh, I like it this way."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 2, "creation_date": 1518653918, "post_id": 48786451, "comment_id": 84599231, "body": "Note: this is the exact same situation that arises when you pass a string literal to a function that takes a <code>const std::string&amp;</code>, so if it <i>didn&#39;t</i> work there would be a lot of broken code out there."}, {"owner": {"reputation": 121, "user_id": 2860935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab11982d9dc5bcb4ad4f79707cd9e079?s=128&d=identicon&r=PG&f=1", "display_name": "HunkyMinik", "link": "https://stackoverflow.com/users/2860935/hunkyminik"}, "reply_to_user": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "edited": false, "score": 0, "creation_date": 1589999351, "post_id": 48786451, "comment_id": 109518485, "body": "@MilesBudnek Well, isn&#39;t that because string literals are permanently stored in the static memory location of the program until main function returns?"}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 121, "user_id": 2860935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab11982d9dc5bcb4ad4f79707cd9e079?s=128&d=identicon&r=PG&f=1", "display_name": "HunkyMinik", "link": "https://stackoverflow.com/users/2860935/hunkyminik"}, "edited": false, "score": 0, "creation_date": 1590027036, "post_id": 48786451, "comment_id": 109528146, "body": "@HunkyMinik The array of <code>char</code>s has static lifetime, but the temporary <code>std::string</code> object would have the same lifetime in that situation as the temporary <code>S</code> object in this question."}], "answers": [{"tags": [], "owner": {"reputation": 16438, "user_id": 312896, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/57c5b6cdd1a94aef510d5dce28992494?s=128&d=identicon&r=PG", "display_name": "Yola", "link": "https://stackoverflow.com/users/312896/yola"}, "is_accepted": false, "score": 7, "last_activity_date": 1518610414, "last_edit_date": 1518610414, "creation_date": 1518609235, "answer_id": 48786603, "question_id": 48786451, "link": "https://stackoverflow.com/questions/48786451/scope-of-a-variable-initialized-in-the-parameter-list-of-a-function/48786603#48786603", "title": "Scope of a variable initialized in the parameter list of a function", "body": "<p>Here prvalue materialized to create temporary object of type <code>S</code> from the braced-init-list <code>{4,5}</code>, which is destroyed at the end of the full-expression. In your case <code>foo({4,5});</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1474, "user_id": 7409397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-I8vfqALJ4XE/AAAAAAAAAAI/AAAAAAAAABc/jD-0oeT5-0k/photo.jpg?sz=128", "display_name": "amc176", "link": "https://stackoverflow.com/users/7409397/amc176"}, "is_accepted": true, "score": 37, "last_activity_date": 1518609262, "creation_date": 1518609262, "answer_id": 48786610, "question_id": 48786451, "link": "https://stackoverflow.com/questions/48786451/scope-of-a-variable-initialized-in-the-parameter-list-of-a-function/48786610#48786610", "title": "Scope of a variable initialized in the parameter list of a function", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/language/lifetime\" rel=\"noreferrer\">cppreference [lifetime]</a>:</p>\n\n<blockquote>\n  <p>All temporary objects are <strong>destroyed as the last step in evaluating the\n  full-expression</strong> that (lexically) contains the point where they were\n  created, and if multiple temporary objects were created, they are\n  destroyed in the order opposite to the order of creation. This is true\n  even if that evaluation ends in throwing an exception.</p>\n</blockquote>\n\n<p>That means that the temporary object will be destroyed <em>after</em> the function has returned, so it's perfectly safe.</p>\n"}], "owner": {"reputation": 1128, "user_id": 4010950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/baHFy.jpg?s=128&g=1", "display_name": "Wololo", "link": "https://stackoverflow.com/users/4010950/wololo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2452, "favorite_count": 5, "accepted_answer_id": 48786610, "answer_count": 2, "score": 28, "last_activity_date": 1519734201, "creation_date": 1518608774, "last_edit_date": 1519734201, "question_id": 48786451, "link": "https://stackoverflow.com/questions/48786451/scope-of-a-variable-initialized-in-the-parameter-list-of-a-function", "title": "Scope of a variable initialized in the parameter list of a function", "body": "<p>The following code builds, compiles and runs (C++, mingw) seemingly without any problems. However, <strong>am I guaranteed that objects constructed with initializer-lists inside a function's parameter list, lives through the scope of that function, even though the function takes the argument by reference?</strong></p>\n\n<p>If not, is it true that when creating an object using its initializer-list in a function's parameter list (which takes the argument by reference) may be dangerous because it will immediately be destructed: In this case, the function doesn't have a copy, but a reference to memory which may, or may not be reallocated by another process?</p>\n\n<pre><code>struct S\n{\n  S() : a(0), b(0) {}\n  S(int a, int b) : a(a), b(b) {}\n  int a;\n  int b;\n};\n\nvoid foo(const S&amp; s)\n{\n  std::cout &lt;&lt; \"s.a = \" &lt;&lt; s.a &lt;&lt; std::endl;\n  std::cout &lt;&lt; \"s.b = \" &lt;&lt; s.b &lt;&lt; std::endl;\n}\n\nint main()\n{\n  foo({4,5}); // &lt;-- What is the scope of the struct initialized here?\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "sockets", "networking"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 6, "creation_date": 1518609652, "post_id": 48786450, "comment_id": 84574790, "body": "Your run time is less than a second. With such a short sampling interval, these statistics are mostly  meaningless. Things like preemptive multitasking, and paging, come into play. And I would seriously question that the system clock resolution is sufficient enough to establish a meaningful result. Furthermore, even though you have two physical ports, if they&#39;re all connected to the same switch, you shouldn&#39;t expect much."}, {"owner": {"reputation": 2336, "user_id": 31152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BozWc.jpg?s=128&g=1", "display_name": "Malkocoglu", "link": "https://stackoverflow.com/users/31152/malkocoglu"}, "edited": false, "score": 1, "creation_date": 1518609969, "post_id": 48786450, "comment_id": 84575014, "body": "You did not config your SO_SNDBUF socket option. Set it to something BIG like 1MB or so, then try again..."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 2336, "user_id": 31152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BozWc.jpg?s=128&g=1", "display_name": "Malkocoglu", "link": "https://stackoverflow.com/users/31152/malkocoglu"}, "edited": false, "score": 0, "creation_date": 1518612050, "post_id": 48786450, "comment_id": 84576459, "body": "@Malkocoglu. I set SO_SNDBUF to 4 MB. The trouble remains."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1518612400, "post_id": 48786450, "comment_id": 84576713, "body": "@Sam Varshavchik. I increased number of packets to send. New output: Time 50.218029 s. Total bytes sent 1215752192. Total throughput 15.930534 Gbit/s. Much better but not enough."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1518613150, "post_id": 48786450, "comment_id": 84577214, "body": "Congratulations, you&#39;ve pretty much reached the max bandwidth one can reasonably expect. You&#39;ll never get 20 gbps from dual bonded link, like that. I would expect around 15-18gbps to be the most that can be obtained. That, pretty much, is the ceiling for all but 16 channel PCI Express 4.0, according to a brief Google search. Are you NICs 16 channel PCIE 4.0 cards?"}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1518614357, "post_id": 48786450, "comment_id": 84577974, "body": "@Sam Varshavchik. My NIC is PCIe v2.0 x8 lanes. In according to specifications it gives 32 Gbit/s. I agree I will never get 20 Gbps but 18 Gbps I suppose is reachable."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 2, "creation_date": 1518614886, "post_id": 48786450, "comment_id": 84578312, "body": "Not according to public documentation. For PCIe 2, you <a href=\"https://en.wikipedia.org/wiki/PCI_Express#History_and_revisions\" rel=\"nofollow noreferrer\">need 32 lanes to reach 16gbps</a>."}, {"owner": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1518615081, "post_id": 48786450, "comment_id": 84578442, "body": "@SamVarshavchik I think your comments deserve to be posted as an answer."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 3004, "user_id": 4166517, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/667edb95b14a0c7d1a8c7307491bf438?s=128&d=identicon&r=PG&f=1", "display_name": "u354356007", "link": "https://stackoverflow.com/users/4166517/u354356007"}, "edited": false, "score": 0, "creation_date": 1518616118, "post_id": 48786450, "comment_id": 84579150, "body": "@Vovanrock2002 +1"}, {"owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1518616921, "post_id": 48786450, "comment_id": 84579724, "body": "What if you run two copies of the program with INTERFACES=1?  You&#39;d want to set CPU affinity to two different cores."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1518617505, "post_id": 48786450, "comment_id": 84580141, "body": "@John Zwinck I&#39;m working on that right now. I don&#39;t like this way very much because of I need my cores for other calculations and spend 2 of them just for networking is wasteful. Anyway I&#39;ll report on results here."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518617535, "post_id": 48786450, "comment_id": 84580164, "body": "Non-blocking and asynchronous are two totally different things. You want either truly asynchronous IO or two independent threads."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "edited": false, "score": 0, "creation_date": 1518617702, "post_id": 48786450, "comment_id": 84580274, "body": "@John Zwinck Thanks for new name of the topic. It&#39;s much better than mine."}, {"owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1518617768, "post_id": 48786450, "comment_id": 84580315, "body": "@n.m. I&#39;ll try 2 threads on 1 core and 2 cores."}, {"owner": {"reputation": 1907, "user_id": 7988287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/43klG.jpg?s=128&g=1", "display_name": "Zac67", "link": "https://stackoverflow.com/users/7988287/zac67"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1518635145, "post_id": 48786450, "comment_id": 84591128, "body": "@SamVarshavchik PCIe 2.0 x8 is completely sufficient for 20 Gbit/s - it seems, you were looking at GB/s. ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "is_accepted": true, "score": 0, "last_activity_date": 1518773149, "creation_date": 1518773149, "answer_id": 48823605, "question_id": 48786450, "link": "https://stackoverflow.com/questions/48786450/cant-reach-full-line-rate-on-two-10gbps-interfaces-simultaneously/48823605#48823605", "title": "Can&#39;t reach full line rate on two 10Gbps interfaces simultaneously", "body": "<p>Well, I got 19 Gbit/s.</p>\n\n<p>I made 2 threads - each sends data independently. It looks simple but there are few shades. If I bind threads to the same virtual core - the problem remains - it gives 14-15 Gbit/s. It works well only if I bind threads to different virtual cores. Even these cores are on the same physical core. This is the best I could wish. I can use 1 physical core for system maintaining and networking.</p>\n\n<p>Thank you all guys who commented.</p>\n"}], "owner": {"reputation": 73, "user_id": 8357378, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d641416f323ffdeb5747625a965f304?s=128&d=identicon&r=PG&f=1", "display_name": "floatJoe", "link": "https://stackoverflow.com/users/8357378/floatjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 48823605, "answer_count": 1, "score": 3, "last_activity_date": 1518773149, "creation_date": 1518608768, "last_edit_date": 1518616820, "question_id": 48786450, "link": "https://stackoverflow.com/questions/48786450/cant-reach-full-line-rate-on-two-10gbps-interfaces-simultaneously", "title": "Can&#39;t reach full line rate on two 10Gbps interfaces simultaneously", "body": "<p>I'm working on application which generates real time data flow with throughput of tens Gbit/s. I don't need any response so I use UDP. I send packets to multicast address. My system (Centos 7) has 2 network ports of 10 Gbit/s per each.</p>\n\n<p>I faced a trouble when I try to send data over both ports at the same time. I expected something a little bit less 20 Gbit/s but actually I got 11-12 Gbit. If use 1 port only I get 9.5 Gbit/s as it should be.</p>\n\n<p>I use select() and non-blocking sockets. Here is executable demo:</p>\n\n<pre><code>#include &lt;string.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;string&gt;\n#include &lt;stdio.h&gt;\n#include &lt;cerrno&gt;\n#include &lt;cstring&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;malloc.h&gt;\n#include &lt;ctime&gt;\n#include &lt;sys/time.h&gt;\n#include &lt;sys/fcntl.h&gt;\n// #include &lt;sys/resource.h&gt;\n\n\n\n#define GROUP_PORT 3490\n#define GROUP_ADDR \"225.0.0.37\"\n#define INTERFACES 2\n#define LOCAL_INTERFACE_IP0 \"192.168.2.3\"\n#define LOCAL_INTERFACE_IP1 \"192.168.2.4\"\n\n\n\ninline long duration_mcs(timespec t1, timespec t2) {\n    return ((t2.tv_sec - t1.tv_sec)*1000000+(t2.tv_nsec - t1.tv_nsec)/1000);\n}\n\n\n\nint main(int argc, char* argv[])\n{\n\n    // if (setpriority(PRIO_PROCESS, 0, -15) == -1) {\n    //     printf(\"PRIO failed: %s.\\n\", std::strerror(errno));\n    //     return -1;\n    // }\n\n    //bind thread to specific core\n    cpu_set_t set;\n    CPU_ZERO(&amp;set); //clear cpu set\n    int cpuId = 5;\n    CPU_SET(cpuId, &amp;set); //dedicate cpu for current thread (add cpuId to set)\n    //bind current thread (pId=0) to dedicated cpu\n    if (sched_setaffinity(0, sizeof(set), &amp;set) == -1) {\n        printf(\"sched_setaffinity failed: %s.\\n\", std::strerror(errno));\n        return -1;\n    }\n\n\n    // SETUP INTERFACES ADDRESSES ----------------------------------\n    // -------------------------------------------------------------\n    in_addr localInterface[INTERFACES];\n    localInterface[0].s_addr = inet_addr(LOCAL_INTERFACE_IP0);\n    localInterface[1].s_addr = inet_addr(LOCAL_INTERFACE_IP1);\n\n\n    // SETUP SOCKETS -----------------------------------------------\n    // -------------------------------------------------------------\n    int fdmax = 0;\n    int fds[INTERFACES];\n    int flags;\n\n    for (int i=0; i&lt;INTERFACES; ++i) {\n        fds[i] = socket(AF_INET, SOCK_DGRAM, 0);\n        if (fds[i] == -1) {\n            printf(\"Socket %d failed: %s.\\n\", i, std::strerror(errno));\n            return -1;\n        }\n\n        //make sockets NONBLOCK\n        if ((flags = fcntl(fds[i], F_GETFL, 0)) &lt; 0) \n        {\n            printf(\"F_GETFL on socket %d failed: %s.\\n\", i, std::strerror(errno));\n        }\n\n        if (fcntl(fds[i], F_SETFL, flags | O_NONBLOCK) &lt; 0) \n        {\n            printf(\"O_NONBLOCK on socket %d failed: %s.\\n\", i, std::strerror(errno));\n        }\n\n        if (fds[i] &gt; fdmax) fdmax = fds[i];\n        printf(\"Socket %d success.\\n\", i);\n    }\n\n\n\n    // SETUP SOCKET OPTIONS ----------------------------------------\n    // -------------------------------------------------------------\n    // send packets through particular interface\n    for (int i=0; i&lt;INTERFACES; ++i) {\n        if (setsockopt(fds[i], IPPROTO_IP, IP_MULTICAST_IF, (char*) &amp;localInterface[i], sizeof(localInterface[i])) == -1) {\n            printf(\"IP_MULTICAST_IF on interface %s failed: %s.\\n\", inet_ntoa(localInterface[i]),  std::strerror(errno));\n            return -1;\n        }\n    }\n\n    // disable multicast loop\n    char loopch=0;\n    for (int i=0; i&lt;INTERFACES; ++i) {\n        if (setsockopt(fds[i], IPPROTO_IP, IP_MULTICAST_LOOP, (char*) &amp;loopch, sizeof(loopch)) == -1) {\n            printf(\"IP_MULTICAST_LOOP on interface %s failed: %s.\\n\", inet_ntoa(localInterface[i]), std::strerror(errno));\n            return -1;\n        }\n    }\n\n\n    // SETUP ADDRESS STRUCTURE FOR SENDING PACKETS TO --------------\n    // -------------------------------------------------------------\n    sockaddr_in address;\n    address.sin_family = AF_INET;\n    address.sin_port = htons(GROUP_PORT);\n    address.sin_addr.s_addr = inet_addr(GROUP_ADDR);\n\n\n    // SETUP DATA BUFFER -------------------------------------------\n    // -------------------------------------------------------------\n    size_t buf_size = 50000;\n    char* buffer = (char*) memalign(256, buf_size);\n\n\n    // SETUP SELECT() STRUCTURES -----------------------------------\n    // -------------------------------------------------------------\n    fd_set master, writefds;\n    FD_ZERO(&amp;master);\n    FD_ZERO(&amp;writefds);\n    for (int i=0; i&lt;INTERFACES; ++i) {\n        FD_SET(fds[i], &amp;master);\n    }\n\n\n    // SENDING PACKETS ---------------------------------------------\n    // -------------------------------------------------------------\n    size_t packets = 10000; //number of packets to send\n    size_t nbytes = 0;\n    int snt;\n\n    bool pckt_flag = false; //flag for all packets are sent\n\n    size_t cnt[INTERFACES]; //counter for sent packets per each interface\n    for (int ifs=0; ifs&lt;INTERFACES; ++ifs) cnt[ifs] = 0;\n\n    timespec t1, t2;\n    timespec t1_sel, t2_sel;\n    timespec t1_proc, t2_proc;\n    timespec t1_snd, t2_snd;\n    long tsum_sel = 0, tsum_proc = 0, tsum_snd = 0;\n\n    clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t1);\n\n    while (!pckt_flag) {\n        writefds = master;\n\n        clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t1_sel);\n        if (select(fdmax+1, NULL, &amp;writefds, NULL, NULL) == -1) {\n            printf(\"select() failed: %s.\\n\", std::strerror(errno));\n            return -1;\n        }\n        clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t2_sel);\n        tsum_sel += duration_mcs(t1_sel, t2_sel);\n\n        clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t1_proc);\n        for (int ifs=0; ifs&lt;INTERFACES; ++ifs) {\n            if (FD_ISSET(fds[ifs], &amp;writefds)) {\n                //check for how many packets were sent over the interface\n                if (cnt[ifs] &lt; packets) {\n\n                    clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t1_snd);\n                    snt = sendto(fds[ifs], buffer, buf_size, 0, (sockaddr*) &amp;address, sizeof(address));\n                    clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t2_snd);\n                    tsum_snd += duration_mcs(t1_snd, t2_snd);\n\n                    if (snt &lt; buf_size) {\n                        printf(\"Sending error: sent %d of %d bytes\\n\", snt, buf_size);\n                    } else {\n                        nbytes += snt;\n                        ++cnt[ifs];\n                    }\n                }\n            }\n        }\n        //renew flag\n        pckt_flag = true;\n        for (int ifs=0; ifs&lt;INTERFACES; ++ifs) {\n            pckt_flag = (pckt_flag &amp;&amp; (cnt[ifs] == packets));\n        }\n        clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t2_proc);\n        tsum_proc += duration_mcs(t1_proc, t2_proc);\n    }\n    clock_gettime(CLOCK_MONOTONIC_RAW, &amp;t2);\n\n    size_t traf_tot_bytes = nbytes;\n    double duration_sec = (double) duration_mcs(t1, t2)/1000000;\n\n    printf(\"Time %f s.\\n\", duration_sec);\n    printf(\"Total bytes sent %d.\\n\", traf_tot_bytes);\n    printf(\"Total throughput %f Gbit/s.\\n\", 8*(traf_tot_bytes/duration_sec)/1000000000);\n    printf(\"Packets sent by interfaces %d/%d\\n\", cnt[0], cnt[1]);\n    printf(\"tsum_sel = %d\\n\", tsum_sel);\n    printf(\"tsum_proc = %d\\n\", tsum_proc);\n    printf(\"tsum_snd = %d\\n\", tsum_snd);\n\n\n    free(buffer);\n\n    return 0;\n\n}\n</code></pre>\n\n<p>In this demo I inserted timers for total time spent on waiting for <strong>select()</strong> (tsum_sel), packets processing (tsum_proc) and sending by <strong>sendto()</strong> itself (tsum_snd).</p>\n\n<p>Output on my system with INTERFACE = 1:</p>\n\n<pre><code>Socket 0 success.\nTime 0.429122 s.\nTotal bytes sent 500000000.\nTotal throughput 9.321358 Gbit/s.\nPackets sent by interfaces 10000/0\ntsum_sel = 51086\ntsum_proc = 362756\ntsum_snd = 358939\n</code></pre>\n\n<p>and for INTERFACE = 2:</p>\n\n<pre><code>Socket 0 success.\nSocket 1 success.\nTime 0.697962 s.\nTotal bytes sent 1000000000.\nTotal throughput 11.461942 Gbit/s.\nPackets sent by interfaces 10000/10000\ntsum_sel = 2383\ntsum_proc = 662971\ntsum_snd = 652629\n</code></pre>\n\n<p>I see that almost all time is consumed by <strong>sendto()</strong> function. So it looks like I send packet over 1st interface, wait for sendto returns and then send to 2nd interface. To avoid that I made my sockets non-blocking. I do not understand what is going on.</p>\n\n<p>My questions are:</p>\n\n<p>1) Why this code doesn't send data with 20 Gbit/s rate?</p>\n\n<p>2) Why non-blocking sendto() takes so much time?</p>\n\n<p>3) How to get 20 Gbit/s here?</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1518608548, "post_id": 48786334, "comment_id": 84574023, "body": "Different standard library implementations do different things. As long as the implementations follow the rules of the C++ standard, the implementations can do basically whatever they want."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1518608717, "post_id": 48786334, "comment_id": 84574147, "body": "The generators or &quot;engines&quot; are specified to give reproducible, portable bit sequences. But the distributions aren&#39;t. Try printing the output of the engines w/o distributions to see if your implementations are standards compliant."}], "owner": {"reputation": 31, "user_id": 9359275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5416a731650c7380b3b5db33eb5bda0?s=128&d=identicon&r=PG&f=1", "display_name": "gibbs", "link": "https://stackoverflow.com/users/9359275/gibbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "closed_date": 1518611007, "answer_count": 0, "score": 3, "last_activity_date": 1518608367, "creation_date": 1518608367, "question_id": 48786334, "link": "https://stackoverflow.com/questions/48786334/deterministic-random-numbers-from-stl", "closed_reason": "Duplicate", "title": "Deterministic random numbers from STL", "body": "<p>I'm trying to write a small program i C++ using the  header in C++11. I use the built-in distributions to generate uniform integer and double distributions. I wrote a very small test: </p>\n\n<pre><code>#include &lt;random&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n  std::mt19937 rng(1234567890);\n  std::uniform_int_distribution&lt;long int&gt; uniformInt(1,10000);\n  std::uniform_real_distribution&lt;double&gt; uniformDouble(0.0, 1.0);\n  std::cout.setf(std::ios_base::fixed, std::ios_base::floatfield);\n  std::cout.precision(16);\n\n  std::cout &lt;&lt; rng() &lt;&lt; std::endl;\n  std::cout &lt;&lt; uniformInt(rng) &lt;&lt; std::endl;\n  std::cout &lt;&lt; uniformDouble(rng) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>I seed the Marsenne Twister PRNG, with a constant seed, and generate two distributions, one to give a random number between 1 and 10000 and one in the interval 0.0, 1.0, in long int and double respectively. I end the sample by printing a random number directly from the Marsenne Twister, one integer and one double. </p>\n\n<p>My problem comes when I compile this and run it. Using the Clang (clang-900.0.39.2) I get the following output: </p>\n\n<pre><code>2657703298\n6144\n0.1490309349241722\n</code></pre>\n\n<p>While if I compile it with g++-7 (Homebrew GCC 7.3.0) I get:</p>\n\n<pre><code>2657703298\n3406\n0.1490309349241722\n</code></pre>\n\n<p>The first and last output is the same, while the integer on the interval (1,10000) is not the same.</p>\n\n<p>I'm happy to see the MT produce deterministic random numbers, but at the same time I'm a bit worried that the integer on a uniform distribution is clearly not the same between these two compilers. Is there a small detail I'm missing how these distributions are supposed to work, or is this to be expected? </p>\n\n<p>I think the inclusion of these in C++ is great, but I find this worrisome, as I would like my data to be reproducible between systems/compilers. </p>\n"}]