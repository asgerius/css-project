[{"tags": ["c++", "assembly", "xor"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 3, "creation_date": 1515628772, "post_id": 48197958, "comment_id": 83377049, "body": "The code section is read only. You need to make it writable, e.g. using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366898.aspx\" rel=\"nofollow noreferrer\">VirtualProtect</a>. PS: you don&#39;t need assembly to xor a block of memory."}, {"owner": {"reputation": 61, "user_id": 7360485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0115ed4609987b66a7a81b343a760ce?s=128&d=identicon&r=PG&f=1", "display_name": "slauko", "link": "https://stackoverflow.com/users/7360485/slauko"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1515643882, "post_id": 48197958, "comment_id": 83380372, "body": "thank you , helped me to get this to work :)"}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 2, "creation_date": 1515672901, "post_id": 48197958, "comment_id": 83394524, "body": "There is also no guarantee about the order the linker will place the functions in memory. Or that the it will not discard a function that is never called, like <code>functionStub</code>."}, {"owner": {"reputation": 61, "user_id": 7360485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0115ed4609987b66a7a81b343a760ce?s=128&d=identicon&r=PG&f=1", "display_name": "slauko", "link": "https://stackoverflow.com/users/7360485/slauko"}, "edited": false, "score": 0, "creation_date": 1515861089, "post_id": 48197958, "comment_id": 83466070, "body": "i have disabled optimization at linker , so it should be fine"}], "owner": {"reputation": 61, "user_id": 7360485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0115ed4609987b66a7a81b343a760ce?s=128&d=identicon&r=PG&f=1", "display_name": "slauko", "link": "https://stackoverflow.com/users/7360485/slauko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515628583, "creation_date": 1515628583, "question_id": 48197958, "link": "https://stackoverflow.com/questions/48197958/access-violation-while-writing-to-position-in-an-asm-xorblock-function", "title": "Access violation while writing to position in an __asm XorBlock function?", "body": "<p>0xC0000005: Access violation while writing to position 0x00A85E00 , thats the exception i get while trying to run following code :</p>\n\n<pre><code>static class ClassName {\npublic:\n static void function() {\n\n    //doSomething       \n\n\n }\n static void functionStub() {\n    __asm _emit 0xCC\n    __asm _emit 0xCC\n    __asm _emit 0xCC\n    __asm _emit 0xCC\n }\n};\n\n\nDWORD randomDWORD() {  \n random_device generator;  \n uniform_int_distribution&lt;int&gt; distribution(0, 255);  \n return DWORD(distribution(generator));  \n}\n\nvoid XorBlock(DWORD dwStartAddress, DWORD dwSize , DWORD key){  \n__asm {  \n    push eax  \n    push ecx  \n    mov ecx, dwStartAddress            \n    add ecx, dwSize                   \n    mov eax, dwStartAddress          \n    mov ebx, key  \n    crypt_loop :                           \n    xor byte ptr ds : [eax], bl    &lt;------exeption*  \n        inc eax                          \n        cmp eax, ecx                       \n        jl crypt_loop;                       \n    pop ecx  \n    pop eax  \n }  \n}  \n\nint GetFuncSize(void *funcaddress){  \n int length = 0;  \n for (length = 0; *((UINT32 *)(&amp;((unsigned char *)funcaddress)[length])) != 0xCCCCCCCC; ++length);  \n return length;  \n}\nint main(){  \n DWORD dwKey = randomDWORD();  \n auto functionstart = ClassName::function;  \n DWORD dwFunctionSize = GetFuncSize(&amp;ClassName::function);  \n XorBlock((DWORD)functionstart, dwFunctionSize, dwKey); &lt;---exception  \n}  \n</code></pre>\n\n<p>0x00A85E00 is dwStartAddress btw .. how can i fix this ? :/  would apreciate if someone can help me with my existing code or can show me an better alternative , maybe with already existing functions to xor a function at runtime.</p>\n\n<p>thank u for your help.</p>\n\n<p>greetings </p>\n\n<p>slauko</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1515628226, "post_id": 48197891, "comment_id": 83376906, "body": "What&#39;s your compilation error and what&#39;s your code using both classes? Can you edit your question to include that?"}, {"owner": {"reputation": 728, "user_id": 4628444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S_tKKQ1s_PY/AAAAAAAAAAI/AAAAAAAAHU8/ph4sOcIgi0w/photo.jpg?sz=128", "display_name": "JoshKisb", "link": "https://stackoverflow.com/users/4628444/joshkisb"}, "edited": false, "score": 0, "creation_date": 1515628595, "post_id": 48197891, "comment_id": 83377006, "body": "what are you trying to achieve because DisplayAdapter is a class you can use it like Dispalyadapter&lt;whatever&gt; and template taking a template doesnt make much sense"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1515629136, "post_id": 48197891, "comment_id": 83377161, "body": "It&#39;s not clear whether you want to use it like <code>Painter&lt;DisplayAdapter&gt;</code> or <code>Painter&lt;DisplayAdapter&lt;A_Type&gt;&gt;</code>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515631592, "post_id": 48197891, "comment_id": 83377813, "body": "Could you explain more in depth what you&#39;re trying to do?"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1515651184, "post_id": 48197891, "comment_id": 83382573, "body": "@O&#39;Neil: neither, because, as the question stresses, <code>DisplayAdapter</code> is an object, not a type. An already-constructed object."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515651390, "post_id": 48197891, "comment_id": 83382646, "body": "@GuillaumeRacicot: GCC compiler. I&#39;ve included the snippet. I don&#39;t think discussing the specific error is meaningful at this point, as the syntax is incorrect and I can&#39;t find the correct one. You can see for yourself via the Ideone link I&#39;ve included in the question."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 728, "user_id": 4628444, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-S_tKKQ1s_PY/AAAAAAAAAAI/AAAAAAAAHU8/ph4sOcIgi0w/photo.jpg?sz=128", "display_name": "JoshKisb", "link": "https://stackoverflow.com/users/4628444/joshkisb"}, "edited": false, "score": 0, "creation_date": 1515651426, "post_id": 48197891, "comment_id": 83382654, "body": "@JoshKisb: hopefully, my addition to the question shows what I&#39;m trying ot achieve."}], "answers": [{"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515628870, "post_id": 48197982, "comment_id": 83377068, "body": "Doesn&#39;t that make <code>DisplayAdapter</code>a type?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515629042, "post_id": 48197982, "comment_id": 83377133, "body": "No, <code>DisplayAdapter</code> is a template inside the scope of <code>Painter</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515652191, "post_id": 48197982, "comment_id": 83382948, "body": "@VioletGiraffe &#224; template is still not a type. With this code, it expects you to pass the <code>DisplayAdapter</code> template."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515653433, "post_id": 48197982, "comment_id": 83383452, "body": "@GuillaumeRacicot: I&#39;m not sure what you mean by &quot;a template is still not a type&quot;."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515653442, "post_id": 48197982, "comment_id": 83383454, "body": "Nope. Here&#39;s the Ideone link for the code from this answer specifically, showing it doesn&#39;t work: <a href=\"https://ideone.com/SvWinL\" rel=\"nofollow noreferrer\">ideone.com/SvWinL</a>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515654080, "post_id": 48197982, "comment_id": 83383754, "body": "@VioletGiraffe a template is not a type. It&#39;s a template. A template template parameter is used to pass templates around, but I can assure the code in this answer is not passing types around."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515669339, "post_id": 48197982, "comment_id": 83392506, "body": "@GuillaumeRacicot: I&#39;m having a bit of a difficulty understanding your last comment. How do you tell it&#39;s not a type? Is it because <code>DisplayAdapter</code> has already been declared as a class template? If I change <code>template&lt;template &lt;typename&gt; class DisplayAdapter&gt; class Painter{};</code> to <code>template&lt;template &lt;typename&gt; class S&gt; class Painter{};</code>, will <code>S</code> here be a type?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515678042, "post_id": 48197982, "comment_id": 83397709, "body": "@VioletGiraffe <code>template&lt;typename&gt; class S</code> I read a template here, so yes, <code>S</code> is a template name in the scope of the template class <code>Painter</code>. To use <code>S</code> you will have to do <code>S&lt;int&gt;</code> or something similar."}], "tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 0, "last_activity_date": 1515628768, "creation_date": 1515628768, "answer_id": 48197982, "question_id": 48197891, "link": "https://stackoverflow.com/questions/48197891/syntax-for-an-instance-of-a-class-template-as-a-non-type-template-parameter/48197982#48197982", "title": "Syntax for an instance of a class template as a non-type template parameter", "body": "<p>You need to add <code>class</code> before <code>DisplayAdater</code></p>\n\n<pre><code>template &lt;class DisplayType&gt;\nclass DisplayAdapter : public DisplayType\n{\n\n};\n\ntemplate&lt;template &lt;typename&gt; class DisplayAdapter&gt;\nclass Painter // Takes an instance of DisplayAdapter, not a type!\n{\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/g/mV7YRC\" rel=\"nofollow noreferrer\">https://godbolt.org/g/mV7YRC</a></p>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515653806, "post_id": 48201010, "comment_id": 83383617, "body": "Okay, thanks, I didn&#39;t realize. It can&#39;t take a non-<code>constexpr</code> object. But it can take a reference to such object, according to the top answer from your link? I can&#39;t seem to invent the right syntax for that, either."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515653913, "post_id": 48201010, "comment_id": 83383671, "body": "<code>template&lt;template &lt;typename&gt; class DisplayAdapter&amp; adapter&gt; class Painter {};</code> doesn&#39;t work, seems to be the logical way to write this down... <a href=\"https://ideone.com/W6xM7y\" rel=\"nofollow noreferrer\">ideone.com/W6xM7y</a>"}, {"owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515656275, "post_id": 48201010, "comment_id": 83384762, "body": "<code>template &lt;typename&gt; class</code> syntax is completely separate and needed to pass things like <code>std::vector</code> (without template parameters, so that they are added later). You need \t <code>template&lt;DisplayAdapter&lt;X&gt;&amp; adapter&gt;</code> with fixed <code>X</code> or <code>template&lt;typename X, DisplayAdapter&lt;X&gt;&amp; adapter&gt;</code> (and give X explicitely) or you may try <code>auto&amp;</code> in c++17 but I&#39;ve never used it (and not sure if it should work)"}], "tags": [], "owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "is_accepted": false, "score": 1, "last_activity_date": 1515652484, "last_edit_date": 1515652484, "creation_date": 1515652176, "answer_id": 48201010, "question_id": 48197891, "link": "https://stackoverflow.com/questions/48197891/syntax-for-an-instance-of-a-class-template-as-a-non-type-template-parameter/48201010#48201010", "title": "Syntax for an instance of a class template as a non-type template parameter", "body": "<p>If it was some simple type like int you would just use type instead of typename keyword e.g</p>\n\n<pre><code>template &lt;int x&gt;\n</code></pre>\n\n<p>or </p>\n\n<pre><code>template &lt;std::vector&lt;int&gt;::value_type x&gt;\n</code></pre>\n\n<p>But <strong>you can't</strong> put object of arbitrary type here.</p>\n\n<p>More about non-type template parameters can be found in <a href=\"https://stackoverflow.com/a/5687553/768110\">another Q&amp;A</a></p>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515654163, "post_id": 48201397, "comment_id": 83383779, "body": "Thank you! I have tried your last suggestion before posting this, but I didn&#39;t realize it must be a reference, so it didn&#39;t work."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515654246, "post_id": 48201397, "comment_id": 83383811, "body": "Still, specifying the <code>DT</code> type seems to be superfluous. Say I don&#39;t have C++ 17. Isn&#39;t there any way to at least infer <code>DT</code> automatically and only pass the object (<code>da</code>) when instantiating the template?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515654251, "post_id": 48201397, "comment_id": 83383815, "body": "@VioletGiraffe yeah, C++ still prohibits passing value of arbitrary types as template parameter, so they must be references or pointer."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1515654472, "post_id": 48201397, "comment_id": 83383913, "body": "@VioletGiraffe not in C++14 sadly. If you want, you can still duplicate the name of your instance with decltype to infer the tyle: <code>template&lt;typename T, T&amp; t&gt;</code> and use <code>Painter&lt;decltype (da), da&gt;</code> but it&#39;s still not perfect I know."}], "tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": true, "score": 3, "last_activity_date": 1515653951, "creation_date": 1515653951, "answer_id": 48201397, "question_id": 48197891, "link": "https://stackoverflow.com/questions/48197891/syntax-for-an-instance-of-a-class-template-as-a-non-type-template-parameter/48201397#48201397", "title": "Syntax for an instance of a class template as a non-type template parameter", "body": "<p>What you're wanting is not a template template parameter. </p>\n\n<p>A template template parameter is used to pass templates around, like this:</p>\n\n<pre><code>template&lt;template&lt;typename&gt; typename Container&gt;\nstruct foo {\n    Container&lt;int&gt; container;\n};\n\nint main() {\n    foo&lt;std::vector&gt; f;\n}\n</code></pre>\n\n<p>As you can see, you can pass template names around with that. Remember that templates are not types, but a blueprint for type, and the language (and the standard) is not treating templates the same way as types.</p>\n\n<hr>\n\n<p>I assume with your examples your trying to use non-type template parameters?</p>\n\n<p>A non-type template parameter is a template parameter that is a value instead of a type. It can be of any integral types, reference type and pointer type.</p>\n\n<p>For example, look at <code>std::array</code>:</p>\n\n<pre><code>std::array&lt;int, 10&gt; tenInts;\n</code></pre>\n\n<p>Notice the second parameter is a number. This is because <code>std::array</code> look something like this:</p>\n\n<pre><code>template&lt;typename T, std::size_t N&gt;\nstruct array { /* ... */ };\n</code></pre>\n\n<p>The second parameter is an unsigned long int. </p>\n\n<p>You can also pass references and pointers as template parameter:</p>\n\n<pre><code>template&lt;int&amp; i&gt; struct foo {};\ntemplate&lt;int* i&gt; struct bar {};\n\nint main() {\n    // Need at least internal linkage in C++14 and older\n    // No linkage required since C++17, only static needed.\n    static int num = 0;\n\n    foo&lt;num&gt; f;\n    bar&lt;&amp;num&gt; b;\n}\n</code></pre>\n\n<p>You can even pass a pointer to any type as reference template parameter:</p>\n\n<pre><code>struct stuff {};\ntemplate&lt;stuff&amp; s&gt; struct foo;\n\nint main() {\n    static stuff s{};\n    foo&lt;s&gt; f; // works!\n}\n</code></pre>\n\n<p>This seem to be closer to what you wanted. However, you seem to have many many different type you want to send as template parameter, as the type of the instances you want to pass around are templated. For that you'll need C++17 template auto feature:</p>\n\n<pre><code>template&lt;auto&amp; da&gt;\nstruct Painter {\n    // ...\n};\n\nint main() {\n    static DisplayAdapter&lt;S&gt; concreteAdapter;\n    Painter&lt;concreteAdapter&gt; p;\n}\n</code></pre>\n\n<p>And done!</p>\n\n<p>If you don't have C++17 with you don't worry, and simply pass the display type along with your instance (C++14 example):</p>\n\n<pre><code>template&lt;typename DT, DisplayAdapter&lt;DT&gt;&amp; da&gt;\nstruct Painter {};\n\n// Internal linkage\nDisplayAdapter&lt;S&gt; da;\n\nint main() {\n    Painter&lt;S, da&gt; painter;\n}\n</code></pre>\n"}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "accepted_answer_id": 48201397, "answer_count": 3, "score": 1, "last_activity_date": 1515661818, "creation_date": 1515628046, "last_edit_date": 1515661818, "question_id": 48197891, "link": "https://stackoverflow.com/questions/48197891/syntax-for-an-instance-of-a-class-template-as-a-non-type-template-parameter", "title": "Syntax for an instance of a class template as a non-type template parameter", "body": "<p>I can't find the right syntax even after reading cppreference on template params. The following doesn't compile, but hopefully describes what I want to do. What's the correct syntax?</p>\n\n<pre><code>template &lt;class DisplayType&gt;\nclass DisplayAdapter : public DisplayType\n{\n\n};\n\ntemplate&lt;template &lt;typename&gt; DisplayAdapter&gt;\nclass Painter // Takes an instance of DisplayAdapter, not a type!\n{\n}\n</code></pre>\n\n<p>Here is how it's supposed to be used:</p>\n\n<pre><code>struct S{};\n\nint main()\n{\n    DisplayAdapter&lt;S&gt; concreteAdapter;\n    Painter&lt;concreteAdapter&gt; p;\n\n    return 0;\n}\n</code></pre>\n\n<p>Here's Ideone snippet for the whole thing: <a href=\"https://ideone.com/dvbYt8\" rel=\"nofollow noreferrer\">https://ideone.com/dvbYt8</a></p>\n"}, {"tags": ["c++", "windows", "visual-studio"], "comments": [{"owner": {"reputation": 19955, "user_id": 101087, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/646f0fa3075659904242cf6f576ed2e9?s=128&d=identicon&r=PG", "display_name": "NineBerry", "link": "https://stackoverflow.com/users/101087/nineberry"}, "edited": false, "score": 0, "creation_date": 1515627665, "post_id": 48197819, "comment_id": 83376767, "body": "That cannot be the full text of the exception message"}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1515627748, "post_id": 48197819, "comment_id": 83376789, "body": "Contact the author of the 3rd party library for support with their product."}, {"owner": {"reputation": 83, "user_id": 7789649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faaf5091f1ed791374a632d60640ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7789649/luke"}, "edited": false, "score": 0, "creation_date": 1515627765, "post_id": 48197819, "comment_id": 83376794, "body": "I cant step through. it throws from the 3rd party library! nothing to step in to. no debugging symbols on the provided .lib files."}, {"owner": {"reputation": 19955, "user_id": 101087, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/646f0fa3075659904242cf6f576ed2e9?s=128&d=identicon&r=PG", "display_name": "NineBerry", "link": "https://stackoverflow.com/users/101087/nineberry"}, "edited": false, "score": 0, "creation_date": 1515627837, "post_id": 48197819, "comment_id": 83376809, "body": "Depending on how visual studio is configured, the debugger will also stop on exceptions that don&#39;t cause a problem, because they are inside a try catch block. In this case, when the debugger had stopped, you can just continue execution to ignore the exception"}, {"owner": {"reputation": 83, "user_id": 7789649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faaf5091f1ed791374a632d60640ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7789649/luke"}, "edited": false, "score": 0, "creation_date": 1515628362, "post_id": 48197819, "comment_id": 83376946, "body": "thanks i added more detail. i tried skipping the exceptions but the library does not initialise properly because of this debug error."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 7789649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faaf5091f1ed791374a632d60640ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7789649/luke"}, "is_accepted": false, "score": 0, "last_activity_date": 1515646283, "creation_date": 1515646283, "answer_id": 48199963, "question_id": 48197819, "link": "https://stackoverflow.com/questions/48197819/error-during-vs-debugging-but-no-error-when-run-exe-file-directly/48199963#48199963", "title": "error during VS Debugging but no error when run exe file directly", "body": "<p>The solution was to change the working directory as specified in Debugging from $(ProjectDir)</p>\n\n<p>to $(TargetPath), where the exe was sitting!</p>\n\n<p>isn't C++ a wonderful artifact of history!</p>\n"}], "owner": {"reputation": 83, "user_id": 7789649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faaf5091f1ed791374a632d60640ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/7789649/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515646283, "creation_date": 1515627505, "last_edit_date": 1515628014, "question_id": 48197819, "link": "https://stackoverflow.com/questions/48197819/error-during-vs-debugging-but-no-error-when-run-exe-file-directly", "title": "error during VS Debugging but no error when run exe file directly", "body": "<p>I have a very simple c++ sample project that basically just logs in to a 3rd party library (collection of .lib files) </p>\n\n<p>There are 4 provided configurations md,mdd,mt,mtd. All x64.</p>\n\n<p>I can build in mdd mode and run the Exe file directly, and the program works fine.</p>\n\n<p>But if I run the debugger in VS, the 3rd party library throws a runtime Exception \"vector deleting destructor\".</p>\n\n<pre><code> try\n {\n    engine = new Engine(&amp;params);   \n }\n    catch (XxxException&amp; Ex)\n {\n    return (ERROR);\n }\n\n\nException thrown at 0x00007FFA52003FB8 in Sample.exe: Microsoft C++ exception: XxxException at memory location 0x000000224C53F190.\nException thrown at 0x00007FFA52003FB8 in Sample.exe: Microsoft C++ exception: XxxException at memory location 0x000000224C53F690.\n\n0x00007ff75d5ab3e0 {Sample.exe!const XxxException::`vftable'} {0x00007ff75d2d8a50 {Sample.exe!XxxException::`vector deleting destructor'(unsigned int)}}\n</code></pre>\n\n<p>So I am unable to debug.</p>\n\n<p>What is this error, and why does it only occur in VS Debugger?</p>\n"}, {"tags": ["java", "c++", "linux", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 8763138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-o600xPm18Bo/AAAAAAAAAAI/AAAAAAAAAAo/QXDwn_CZ5BY/photo.jpg?sz=128", "display_name": "Enjal Parajuli", "link": "https://stackoverflow.com/users/8763138/enjal-parajuli"}, "edited": false, "score": 0, "creation_date": 1515650951, "post_id": 48199405, "comment_id": 83382484, "body": "Just an additional question. What it I had a jar version of this Sample2.java? I tried to give location to the jar file and then called the FindClass(&quot;cversion/xeger/Sample2&quot;); but it didnot work."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 183, "user_id": 8763138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-o600xPm18Bo/AAAAAAAAAAI/AAAAAAAAAAo/QXDwn_CZ5BY/photo.jpg?sz=128", "display_name": "Enjal Parajuli", "link": "https://stackoverflow.com/users/8763138/enjal-parajuli"}, "edited": false, "score": 0, "creation_date": 1515709067, "post_id": 48199405, "comment_id": 83415371, "body": "As long as the Jar file is on the class path and contains the class correctly it should work. Can&#39;t comment on code I haven&#39;t seen."}], "tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 0, "last_activity_date": 1515641818, "creation_date": 1515641818, "answer_id": 48199405, "question_id": 48197799, "link": "https://stackoverflow.com/questions/48197799/could-not-find-the-class-while-using-the-java-class-inside-the-c/48199405#48199405", "title": "Could not find the class while using the java class inside the c++", "body": "<pre><code>FindClass(\"cversion.xeger.Sample2\");\n</code></pre>\n\n<p>This call is not correct. See the documentation. It should be</p>\n\n<pre><code>FindClass(\"cversion/xeger/Sample2\");\n</code></pre>\n"}], "owner": {"reputation": 183, "user_id": 8763138, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-o600xPm18Bo/AAAAAAAAAAI/AAAAAAAAAAo/QXDwn_CZ5BY/photo.jpg?sz=128", "display_name": "Enjal Parajuli", "link": "https://stackoverflow.com/users/8763138/enjal-parajuli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 48199405, "answer_count": 1, "score": 1, "last_activity_date": 1515651025, "creation_date": 1515627381, "last_edit_date": 1515651025, "question_id": 48197799, "link": "https://stackoverflow.com/questions/48197799/could-not-find-the-class-while-using-the-java-class-inside-the-c", "title": "Could not find the class while using the java class inside the c++", "body": "<p>I was following the <a href=\"https://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html</a> to use java class functions inside the c++ code.I am using the same code that they are using for Sample2.java. I did it in two different ways.</p>\n\n<p><strong>First way</strong> : I copied and pasted the same code in 'sublime text editor', and saved it under the name Sample2.java in <strong>Desktop</strong>. The code looks like :</p>\n\n<pre><code> public class Sample2\n     {\n       public static int intMethod(int n) \n       {\n           return n*n;\n       }\n\n     public static boolean booleanMethod(boolean bool) \n     {\n          return !bool;\n     }\n    }\n</code></pre>\n\n<p>Then I compiled it using the following code :\n    javac Sample2.java</p>\n\n<p>My C++ code looks as follows :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"jni.h\"\n#include &lt;string.h&gt;\n#include &lt;typeinfo&gt;\nint main()\n{\n      JavaVMOption options[1];\n      JNIEnv *env;\n      JavaVM *jvm;\n      JavaVMInitArgs vm_args;\n      long status;\n      jclass cls;\n      jmethodID mid;\n      jint square;\n      jboolean answer;\n\n options[0].optionString = const_cast&lt;char *&gt;(\"-Djava.class.path=/home/aaa/Desktop/\");\n\n   memset(&amp;vm_args, 0, sizeof(vm_args));\n   vm_args.version = JNI_VERSION_1_8;\n   vm_args.nOptions = 1;\n   vm_args.options = options;\n   status = JNI_CreateJavaVM(&amp;jvm, (void**)&amp;env, &amp;vm_args); //If JVM creation is successful then status value is zero\n   std::cout&lt;&lt;\"Status of JNI creation is : \"&lt;&lt;status&lt;&lt;std::endl;\n\n   if (status != JNI_OK)\n   {\n     std::cout&lt;&lt;\"JNI creation Failed : \"&lt;&lt;std::endl;\n     return 1;\n   }\n   std::cout&lt;&lt;\"JNI creation Passed : \"&lt;&lt;std::endl;\n   cls = env-&gt;FindClass(\"Sample2\");  // If the class cannot be found, cls will be zero.\n   std::cout&lt;&lt;\"The class of cls is : \"&lt;&lt;typeid(cls).name()&lt;&lt;std::endl;\n   // cls = env-&gt;FindClass(\"Sample2\"); \n   std::cout&lt;&lt;\"The value of cls is : \"&lt;&lt;cls&lt;&lt;std::endl;\n     if(cls !=0)\n     {   mid = env-&gt;GetStaticMethodID(cls, \"intMethod\", \"(I)I\");\n         if(mid !=0)\n         {  square = env-&gt;CallStaticIntMethod(cls, mid, 5);\n            printf(\"Result of intMethod: %d\\n\", square);\n         }\n     }\n     jvm-&gt;DestroyJavaVM();\n    return 0;\n }\n</code></pre>\n\n<p>Now when I use the following command in the 'Ubuntu' terminal, the C++ code successfully executes the java function.</p>\n\n<p>Simple text editor and using an eclipse. The JNI works perfectly with the Sample2.java code, which is written using a simple text editor. But, when I use the same Sample2.java code inside package cversion.xeger then it somehow does not finds the class Sample2.java and the function intMethod of the Sample2.java class from the c++ code.</p>\n\n<pre><code>g++ -g -I/usr/lib/jvm/java-8-oracle/include/ -I/usr/lib/jvm/java-8-oracle/include/linux/ -L/usr/bin/java -L/usr/lib/jvm/java-8-oracle/jre/lib/amd64/server/ intMethod.cpp -ljvm\n</code></pre>\n\n<p><strong>Problem :</strong>\nThe problem occurs when I write the same Sample2.java code in ecllipse under the package cversion.xeger. The Sample2.java code in ecllipse is same as previous except that it has package name on the top. It looks like :\npackage cversion.xeger;</p>\n\n<pre><code>public class Sample2\n{\n    public static void main(String args[]) {\n        System.out.println(\"Helloworld\");\n    }\n  public static int intMethod(int n) \n  {\n      return n*n;\n  }\n\n    public static boolean booleanMethod(boolean bool) \n    {\n          return !bool;\n    }\n}\n</code></pre>\n\n<p>I change the classpath in the Cpp file to :</p>\n\n<pre><code> options[0].optionString = const_cast&lt;char *&gt;(\"-Djava.class.path=/home/aaa/eclipse-workspace/xeger/target/classes/\");\n</code></pre>\n\n<p>and cls value to </p>\n\n<p>cls=env->FindClass(\"cversion.xeger.Sample2\");</p>\n\n<p>but cls value is zero.This means it was not able to find the class.</p>\n\n<p>I have provided the classpath upto classes inside the ecllipse workspace and I am calling the Sample2 class using the 'packagename.Sample2' inside FindClass() method. </p>\n\n<p>Why is it not finding the class when I use the Sample2.java class in ecllipse? I am stuck on this one.</p>\n"}, {"tags": ["python", "c++", "memory-leaks", "cython", "valgrind"], "comments": [{"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515648832, "post_id": 48197797, "comment_id": 83381705, "body": "I am not sure to look at with that option. I have updated Valgrind log in the problem description above."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515649458, "post_id": 48197797, "comment_id": 83381918, "body": "It looks like something inside of the python\u2019s shared library (possibly when loading?). But this is not the only leak, isn\u2019t it? Did you build your stuff in debug?"}, {"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515652058, "post_id": 48197797, "comment_id": 83382893, "body": "On further debugging, I realized that leak is due to  &quot;import_array1(-1)&quot; call? Not sure how to fix it. This call is necessary to use numpy array in C."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515652419, "post_id": 48197797, "comment_id": 83383044, "body": "Then this is probably <code>PyArray_API</code>, don&#39;t think you could (or should) do something about it."}, {"owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1515697718, "post_id": 48197797, "comment_id": 83410110, "body": "Looks like it is not a leak. Rather, the leak is reported due to a statically located block by import_array()"}], "owner": {"reputation": 327, "user_id": 4080565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d08349884869fffbcc80d21097f31688?s=128&d=identicon&r=PG&f=1", "display_name": "Ashutosh Pandey", "link": "https://stackoverflow.com/users/4080565/ashutosh-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515648908, "creation_date": 1515627361, "last_edit_date": 1515648908, "question_id": 48197797, "link": "https://stackoverflow.com/questions/48197797/memory-leak-in-using-python-api-pyarray-simplenewfromdata", "title": "Memory Leak in Using Python API PyArray_SimpleNewFromData", "body": "<p>I am not able to figure out cause of memory leak in the following code; Valgrind is reporting memory in on executing the following function. This might be happening due to my lack of understanding of Py_INCREF and Py_DECREF macros.</p>\n\n<p>Here the c++ code</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;Python.h&gt;\n#include \"numpy/arrayobject.h\"\n#include &lt;ctime&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    PyObject *pName = NULL;\n    PyObject *pModule = NULL;\n    PyObject *pFunc = NULL;\n    PyObject *pArgs = NULL;\n    PyObject *pValue = NULL;\n    PyObject *vec = NULL;\n    PyObject *vec1 = NULL;\n\n    const char* script = \"TestScript\";\n    const char* function = \"test\";\n\n    Py_Initialize();\n    pName = PyUnicode_FromString(script);\n    pModule = PyImport_Import(pName);\n\n    // Deleting memory for object pName\n    Py_DECREF(pName);\n\n    import_array1(-1);\n\n    if (pModule != NULL) {\n        pFunc = PyObject_GetAttrString(pModule, function);\n\n        if (pFunc &amp;&amp; PyCallable_Check(pFunc)) {\n            // define a vector\n            double* v = new double[5];\n            v[0] = 1.0;\n            v[1] = 2.0;\n            v[2] = 3.0;             \n            v[3] = 4.0;             \n            v[4] = 5.0;\n\n            double* v1 = new double[5];\n            v1[0] = 1.0;\n            v1[1] = 2.0;\n            v1[2] = 3.0;                \n            v1[3] = 4.0;                \n            v1[4] = 5.0;\n\n            npy_intp vdim[] = { 5 };\n\n            vec = PyArray_SimpleNewFromData(1, vdim, (int)PyArray_DOUBLE, (void*)v);\n            vec1 = PyArray_SimpleNewFromData(1, vdim, (int)PyArray_DOUBLE, (void*)v1);\n\n            pArgs = PyTuple_New(2);\n            Py_INCREF(vec); // If I don't do this, I get segfault in Py_Finalize**\n            Py_INCREF(vec1); // If I don't do this, I get segfault in Py_Finalize**\n\n            PyTuple_SetItem(pArgs, 0, vec);\n            PyTuple_SetItem(pArgs, 1, vec1);\n\n\n            pValue = PyObject_CallObject(pFunc, pArgs);\n\n            Py_DECREF(pArgs);\n            Py_XDECREF(vec);\n            Py_XDECREF(vec1);\n\n            delete [] v;\n            delete [] v1;\n\n            if (pValue != NULL) {\n                printf(\"Result of call: %f\\n\", PyFloat_AsDouble(pValue));\n                Py_DECREF(pValue);\n            }\n\n            Py_DECREF(pFunc);\n        } else {\n            if (PyErr_Occurred()) {\n                PyErr_Print();\n                fprintf(stderr, \"Cannot find function \\\"%s\\\"\\n\", function);\n            }\n        }\n        Py_DECREF(pModule);\n    } else {\n        PyErr_Print();\n        return 1;\n    }\n\n    Py_Finalize();\n\n    return 0;\n}\n</code></pre>\n\n<p>Here the the Python function</p>\n\n<pre><code>def test(a, b):\n    print(\"Python::test\")\n    print(a)\n    print(b)\n\n    return 1\n</code></pre>\n\n<p>Here the summary of Valgrind report.</p>\n\n<pre><code>==81480== 154,839 bytes in 81 blocks are definitely lost in loss record 1,258 of 1,259\n==81480==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==81480==    by 0x4ED9777: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EA81D8: PyUnicode_New (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EABFDC: _PyUnicode_FromASCII (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FA073C: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4EE8038: PyCFunction_Call (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF41B4: PyEval_EvalFrameEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF4638: PyEval_EvalFrameEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x5084CAB: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x5084D82: PyEval_EvalCodeEx (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FEC9CA: PyEval_EvalCode (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==    by 0x4FF967C: ??? (in /usr/lib/x86_64-linux-gnu/libpython3.5m.so.1.0)\n==81480==\n\n\n&gt; ==55233== \n&gt; ==55233== \n&gt; ==55233== HEAP SUMMARY:\n&gt; ==55233==     in use at exit: 2,642,149 bytes in 4,750 blocks\n&gt; ==55233==   total heap usage: 42,001 allocs, 37,251 frees, 34,675,848 bytes allocated\n&gt; ==55233== \n&gt; ==55233== LEAK SUMMARY:\n&gt; ==55233==    definitely lost: 157,656 bytes in 85 blocks\n&gt; ==55233==    indirectly lost: 0 bytes in 0 blocks\n&gt; ==55233==      possibly lost: 158,663 bytes in 90 blocks\n&gt; ==55233==    still reachable: 2,325,830 bytes in 4,575 blocks\n&gt; ==55233==         suppressed: 0 bytes in 0 blocks\n&gt; ==55233== Rerun with --leak-check=full to see details of leaked memory\n&gt; ==55233== \n&gt; ==55233== For counts of detected and suppressed errors, rerun with: -v\n&gt; ==55233== Use --track-origins=yes to see where uninitialised values come from\n&gt; ==55233== ERROR SUMMARY: 3460 errors from 123 contexts (suppressed: 0 from 0)\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1515627345, "post_id": 48197735, "comment_id": 83376680, "body": "Where you have <code>string calcArray[0][i] = ...</code> (at the bottom of your code) are you sure you want the declaration instead of just <code>calcArray[0][i] = ...</code>?"}, {"owner": {"reputation": 15, "user_id": 9153953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t1TC0.png?s=128&g=1", "display_name": "Fr1nge", "link": "https://stackoverflow.com/users/9153953/fr1nge"}, "reply_to_user": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1515627548, "post_id": 48197735, "comment_id": 83376733, "body": "what do you mean?"}, {"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1515627836, "post_id": 48197735, "comment_id": 83376808, "body": "I don&#39;t understand why you are redeclaring calcArray in your last line of posted code, although I guess it&#39;s kind of a moot point."}, {"owner": {"reputation": 15, "user_id": 9153953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t1TC0.png?s=128&g=1", "display_name": "Fr1nge", "link": "https://stackoverflow.com/users/9153953/fr1nge"}, "reply_to_user": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1515628002, "post_id": 48197735, "comment_id": 83376847, "body": "So, since this is a dinamic array, at start I used string **calcArray = 0; so will it work if I just say string **calcArray at the beggining of the count function"}, {"owner": {"reputation": 1497, "user_id": 5504922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15bc22b2096bef7bf39b68e241b81efb?s=128&d=identicon&r=PG&f=1", "display_name": "EdmCoff", "link": "https://stackoverflow.com/users/5504922/edmcoff"}, "edited": false, "score": 0, "creation_date": 1515628801, "post_id": 48197735, "comment_id": 83377056, "body": "No, sorry for the confusion. I am pointing out what I think is a second error in your posted code. For your actual question, I recommend looking at <a href=\"https://stackoverflow.com/questions/8767166/passing-a-2d-array-to-a-c-function\" title=\"passing a 2d array to a c function\">stackoverflow.com/questions/8767166/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1515627277, "creation_date": 1515627277, "answer_id": 48197785, "question_id": 48197735, "link": "https://stackoverflow.com/questions/48197735/error-using-dynamic-2d-array/48197785#48197785", "title": "Error using dynamic 2D array", "body": "<pre><code>string calcArray[][]\n</code></pre>\n\n<p>is not a valid declaration for a function parameter. When you use a multi-dimensional array, all dimensions except the first one must be specified. E.g.</p>\n\n<pre><code>string calcArray[][10]\n\n\nstring anotherArray[][10][2]\n</code></pre>\n\n<p>If the arrays are dynamic, you can use <code>std::vector&lt;std::vector&lt;std::string&gt;&gt;</code>.</p>\n\n<pre><code>std::vector&lt;std::vector&lt;std::string&gt;&gt;&amp; calcArray\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9153953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t1TC0.png?s=128&g=1", "display_name": "Fr1nge", "link": "https://stackoverflow.com/users/9153953/fr1nge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515627277, "creation_date": 1515626932, "question_id": 48197735, "link": "https://stackoverflow.com/questions/48197735/error-using-dynamic-2d-array", "title": "Error using dynamic 2D array", "body": "<p>so recently I have been working on a truth table generator which generates an equation for a logic statement. So, I decided to use a 2D array to make things seem more clean and neat. However, as I run this code(Don't worry, int main and other functions exist too, I am posting only this part since it is the one that causes an error):</p>\n\n<pre><code>int calculate(size_t length) {\n\n    int dimensionX = length + 2;\n    int dimensionY = 5;\n    calcArray = new string *[dimensionX];\n    for (int i = 0; i &lt; dimensionX; i++) {\n        calcArray[i] = new string[dimensionY];\n    }\n\n\n    for (int i = 0; i &lt; dimensionX; i++) {\n        delete[] calcArray[i];\n        delete[] calcArray;\n    }\n\n    return 0;\n}\n\nint count(string phrase, string calcArray[][]) {\n    string statement(phrase);\n    size_t ve = count(statement.begin(), statement.end(), 'A');\n    size_t yada = count(statement.begin(), statement.end(), 'V');\n    size_t ozel_yada = count(statement.begin(), statement.end(), 'XV');\n    size_t ok = count(statement.begin(), statement.end(), '-&gt;');\n    size_t cift_ok = count(statement.begin(), statement.end(), '&lt;-&gt;');\n    size_t complete = ve + yada + ozel_yada + ok + cift_ok;\n    size_t column_number = complete;\n    return complete;\n\n    for (int i = 3; i &lt; complete; i++) {\n    int andNum = phrase.find('A');\n    if (count (phrase.substr(andNum-3,6).begin(), phrase.substr(andNum - 3, 6).end(),'(') == 0){\n        string calcArray[0][i] = phrase.substr(andNum - 1, 4);\n    }\n}\n</code></pre>\n\n<p>}</p>\n\n<p>I get errors saying that:</p>\n\n<blockquote>\n  <blockquote>\n    <p>An array may not have elements of this type(   int count(string phrase, string calcArray[][])</p>\n    \n    <p>cannot allocate an array of constant size 0 (string calcArray[0][i] = phrase.substr(andNum - 1, 4);)</p>\n    \n    <p>An expression did not evaluate a constant (string calcArray[0][i] = phrase.substr(andNum - 1, 4);)</p>\n  </blockquote>\n</blockquote>\n\n<p>I would appreciate any help or explanation. Thanks</p>\n"}, {"tags": ["c++", "oop", "memory-leaks", "valgrind"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1515624957, "post_id": 48197362, "comment_id": 83375921, "body": "Looks like you bare trying to reinvent <code>std::shared_ptr</code>. Why not just use <code>shared_ptr</code>? If that&#39;s off the table, start with <code>shared_ptr</code>, make sure all of your other logic is correct, and then replace the <code>shared_ptr</code> with your home brew. Less to have to debug all at once."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1515625196, "post_id": 48197362, "comment_id": 83376008, "body": "You can also steal a bit from <code>shared_ptr</code>. Build all of the destruction logic into <code>CountingReference</code> so that all <code>Matrix</code> has is a <code>CountingReference</code> that goes out of scope and either <code>delete</code>s the contained memory or doesn&#39;t  depending on the reference count. Right now you are forcing <code>Matrix</code> to make decisions about another object based on that other object&#39;s data, and that smells bad."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515625640, "post_id": 48197362, "comment_id": 83376172, "body": "To complete the question and have build-able code, could you add Matrix.h or a subset of it that provides the compilable definitions of <code>Matrix</code> and <code>CountingReference</code>?"}, {"owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515626321, "post_id": 48197362, "comment_id": 83376397, "body": "I add my Matrix.h file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515626880, "post_id": 48197362, "comment_id": 83376553, "body": "Thank you for the header. I see only one <code>countingReference--;</code> in the code, in <code>CountingReference::detach</code>. I would expect one in the <code>Matrix</code> destructor as well. Likely this is the problem. Nothing decrements the reference counter when a containing object is destroyed."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1515630565, "post_id": 48197362, "comment_id": 83377567, "body": "@BartekDettlaff -- You could eliminate more than half that code.  The operators <code>+</code>, <code>-</code>, <code>*</code>, are one liners.  Just use the <code>+=</code>, <code>-=</code>, etc. as helper functions.  Example: <code>Matrix Matrix::operator+(const Matrix&amp; Object) { return Matrix(*this) += Object; }</code>.  Yes -- that&#39;s all you need to do -- no need for the code duplication.  Of course, your <code>+=</code>, <code>-=</code>, etc. have to work correctly."}, {"owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515660073, "post_id": 48197362, "comment_id": 83386525, "body": "@user4581301 I add this line of code in my &#39;Matrix&#39; at the end of destructor , but there is still the same problem. 22 allocs and 11 frees."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1515674586, "post_id": 48197362, "comment_id": 83395604, "body": "A useful hint when using Valgrind: compile with debugging symbols (e.g. <code>g++ -g</code>) so that it can report the line numbers for you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1515703212, "post_id": 48197362, "comment_id": 83412761, "body": "@PaulMcKenzie we can ALMOST do that. Unfortunately because the copy construction will result in the copy having a reference-counted pointer to the same array as the original and change the original. Something more like <code>return Matrix::clone(*this) += Object;</code> is required. This is a pretty complicated assignment. Think I might write an answer."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "edited": false, "score": 0, "creation_date": 1515626483, "post_id": 48197590, "comment_id": 83376451, "body": "This term i made, because my lecturer said that i have to do something like that: If there is no reference or reference to itself, the counter is 0, so 0 means &quot;Object exist&quot; so I decide that if this counter is -1 - it means that it has to delete the object."}, {"owner": {"reputation": 106, "user_id": 9186882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc742293d40546b2b03cfa98139403c6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9186882/daniel"}, "reply_to_user": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "edited": false, "score": 0, "creation_date": 1515662742, "post_id": 48197590, "comment_id": 83388030, "body": "correct me if im wrong , what you said is that counter!=-1 means that there is an object , and -1 means that there isnt . so you delete it ony if there is no object pointing to it but delete it via the other object that supposed to point to it ?  and i saw you only reducing the counter in deattach , youll probably need to do it in the destructor as well"}, {"owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "edited": false, "score": 0, "creation_date": 1515667265, "post_id": 48197590, "comment_id": 83391155, "body": "I have already added line in Destructor, but it is still not enough."}], "tags": [], "owner": {"reputation": 106, "user_id": 9186882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc742293d40546b2b03cfa98139403c6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9186882/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1515625801, "creation_date": 1515625801, "answer_id": 48197590, "question_id": 48197362, "link": "https://stackoverflow.com/questions/48197362/directly-lost-or-indirectly-lost-valgrind-issue/48197590#48197590", "title": "Directly lost or indirectly lost - Valgrind issue", "body": "<p>based on this page in Valgrind's site :\n<a href=\"http://valgrind.org/docs/manual/faq.html#faq.deflost\" rel=\"nofollow noreferrer\">http://valgrind.org/docs/manual/faq.html#faq.deflost</a>\nusually \"indirectly lost \" comes as a result of a \"definitly lost\" error .</p>\n\n<p>seems like there are cases that your constructor does not delete all of the fields of your class \nwhat happens when dane->countingReference!=-1 ? \nhow do you delete the inside fields at this case ? \nvalgrind seems to dislike mostly what happens regarding the data allocated after the Counting reference constructor </p>\n\n<p>and at operator+ : you create a new Matrix object and return it by value ,which means you created 2 of them and in some cases (again , because of the term :dane->countingReference==-1 )you do not free them .</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "edited": false, "score": 0, "creation_date": 1515835249, "post_id": 48215955, "comment_id": 83459322, "body": "Thanks! Your post was very helpful. :)"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1515705536, "creation_date": 1515705536, "answer_id": 48215955, "question_id": 48197362, "link": "https://stackoverflow.com/questions/48197362/directly-lost-or-indirectly-lost-valgrind-issue/48215955#48215955", "title": "Directly lost or indirectly lost - Valgrind issue", "body": "<p>The crux of the problem: The <code>Matrix</code> destructor tests <code>dane-&gt;countingReference</code> but does not decrement it, so <code>dane-&gt;countingReference</code> never reaches the point at which is is destroyed. A <code>dane-&gt;countingReference--;</code> and a walk through with a debugger to pick off any off-by-one errors will fix that, but the coupling between <code>Matrix</code> and  <code>CountingReference</code> is troubling and making the book keeping much more difficult than it needs to be.</p>\n\n<p>A class should have as few responsibilities as possible and preferably one. This usually makes it easier to write, maintain, and debug. <code>Matrix</code> is responsible for matrix manipulation AND the reference counting AND the memory management, relegating <code>CountingReference</code> to a mere container. </p>\n\n<p>If <code>Matrix</code>, sticks to just doing matrix manipulation, all you need to write and test is matrix manipulation.</p>\n\n<p>If <code>CountingReference</code> is spun off to an equal class responsible for keeping track of the tightly related responsibilities of reference counting and memory management, <code>Matrix</code> can get on with its real job: doing math. Let's take a look at how we can make a smarter <code>CountingReference</code>. First, we take advantage of the fundamental C++ concept Resource Allocation is Initialization  or RAII (<a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">What is meant by Resource Acquisition is Initialization (RAII)?</a>) to help manage our memory.</p>\n\n<pre><code>class CountingReference\n{\nprivate:\n    int * countingReference;\npublic:\n    int wiersz;\n    int kolumna;\n    double **wsk;\n    CountingReference();\n    CountingReference(int, int);\n    CountingReference(const CountingReference &amp;);\n    ~CountingReference();\n    CountingReference&amp; operator=(CountingReference rhs);\n};\n</code></pre>\n\n<p>Similar to the original, but note that the <code>countingReference</code> member is a pointer and the copy and assignment operators to observe another fundamental C++ concept, The Rule of Three (<a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">What is The Rule of Three?</a>). <code>countingReference</code> observing The Rule of Three allows <code>Matrix</code> to take advantage of <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">The Rule of Zero</a>. For now we will ignore the Rule of Five.</p>\n\n<p>There is no need for <code>CountingReference* detach();</code></p>\n\n<p>Note this is not thread safe. Making this thread safe is really, really nasty if you try to write this without <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">using <code>&lt;atomic&gt;</code></a> and if you are using <code>&lt;atomic&gt;</code> you might as well <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">use <code>std::shared_ptr</code></a> and make the whole problem go away.</p>\n\n<p>Implementations: </p>\n\n<pre><code>CountingReference::CountingReference() :\n        countingReference(new int(1)), wiersz(0), kolumna(0), wsk(NULL)\n\n{\n}\n\nCountingReference::CountingReference(int wier, int kol) :\n        countingReference(new int(1)), wiersz(wier), kolumna(kol), wsk(new double*[wier])\n{\n    for (int i = 0; i &lt; wier; i++)\n    {\n        wsk[i] = new double[kol];\n    }\n    cout &lt;&lt; countingReference &lt;&lt; \" was created \\n\";\n}\n</code></pre>\n\n<p>These constructors are similar to the originals other than using the <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">member initializer list</a>, <code>countingReference</code> being a pointer, and <code>countingReference</code> starting at 1 because it's more intuitive if the reference count matches the number of instances and destroys the shared data on 0.</p>\n\n<p><code>countingReference</code> is a pointer because all of the instances of <code>CountingReference</code> sharing the data must have the same reference counter. Basically instead of the <code>Matrix</code> instances sharing the pointer to the <code>CountingReference</code>, they will now all have their own <code>CountingReference</code> that share the same <code>countingReference</code>. This is where RAII kicks in and save us a lot of work.</p>\n\n<p>Also note a few debug statements so I'd know if I was handing you bad code. I might still be offering bad code, but if it is, at least the mistake isn't something silly.</p>\n\n<pre><code>CountingReference::CountingReference(const CountingReference &amp; src) :\n        countingReference(src.countingReference), wiersz(src.wiersz), kolumna(src.kolumna), wsk(src.wsk)\n\n{\n    ++(*countingReference);\n    cout &lt;&lt; countingReference &lt;&lt; \" was copied (\" &lt;&lt; *countingReference &lt;&lt; \")\\n\";\n}\n</code></pre>\n\n<p>Copy constructor. Stores the same array and <code>countingReference</code> as the source and increments <code>countingReference</code> to keep track of the number of references. Part 1 of the Rule of Three.</p>\n\n<pre><code>CountingReference::~CountingReference()\n{\n    --(*countingReference);\n    cout &lt;&lt; countingReference &lt;&lt; \" was decremented (\" &lt;&lt; *countingReference &lt;&lt; \")\\n\";\n    if (!*countingReference)\n    {\n        cout &lt;&lt; countingReference &lt;&lt; \" was destroyed\\n\";\n        for (int i = 0; i &lt; wiersz; i++)\n        {\n            delete[] wsk[i];\n        }\n        delete[] wsk;\n        delete countingReference;\n    }\n}\n</code></pre>\n\n<p>Destructor. When any <code>CountingReference</code> goes out of scope if decrements the reference count and if the count is now 0, releases the array and <code>countingReference</code>. This automates all of the clean-up so that you cannot leak memory. Part 2 of The Rule of Three.</p>\n\n<pre><code>CountingReference &amp; Matrix::CountingReference::operator=(CountingReference rhs)\n{\n    cout &lt;&lt; countingReference &lt;&lt; \" was replaced by \" &lt;&lt; rhs.countingReference &lt;&lt; \"\\n\";\n    swap(countingReference, rhs.countingReference);\n    swap(wsk, rhs.wsk);\n    swap(wiersz, rhs.wiersz);\n    swap(kolumna, rhs.kolumna);\n    return *this;\n}\n</code></pre>\n\n<p>Assignment operator. Using the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">Copy and Swap Idiom</a>. This isn't the most efficient way to perform the assignment, but it is foolproof. Part 3 of The Rule of Three.</p>\n\n<p><code>Matrix</code> winds up looking like</p>\n\n<pre><code>class Matrix\n{\nprivate:\n    class CountingReference\n    {\n    private:\n        int * countingReference;\n    public:\n        int wiersz;\n        int kolumna;\n        double **wsk;\n        CountingReference();\n        CountingReference(int, int);\n        CountingReference(const CountingReference &amp;);\n        ~CountingReference();\n        CountingReference&amp; operator=(CountingReference rhs);\n    };\n    CountingReference dane;\n\npublic:\n\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; o, const Matrix&amp;);\n    friend ostream&amp; operator&lt;&lt;(const Matrix&amp;, ostream&amp; o);\n    Matrix();\n    Matrix(int, int);\n    static Matrix clone(const Matrix &amp;);\n    Matrix operator+(const Matrix &amp;) const;\n    Matrix operator-(const Matrix &amp;) const;\n    Matrix operator*(const Matrix &amp;) const;\n    Matrix operator+=(const Matrix&amp;);\n    Matrix&amp; operator-=(const Matrix&amp;);\n    Matrix&amp; operator*=(const Matrix&amp;);\n    bool operator ==(const Matrix &amp;);\n    friend Matrix&amp; Random(Matrix&amp;);\n};\n</code></pre>\n\n<p>There is no need for a custom destructor, copy constructor or assignment operator because Matrix has no resources that it needs to manage (The Rule of Zero) so they are left to the compiler to generate.</p>\n\n<p>I have discarded all of the exception specifiers (<code>throw(string)</code>) because in my experience they cause much pain for very little benefit. But don't just trust me, <a href=\"http://www.gotw.ca/publications/mill22.htm\" rel=\"nofollow noreferrer\">read what Herb Sutter has to say on the topic</a>. He generally knows what he's talking about.</p>\n\n<p>The function implementations are greatly simplified as they no longer need to worry about <code>detach</code> and applying the lessons learned from sbi's excellent <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">What are the basic rules and idioms for operator overloading?</a> and another hint described by Paul Mackenzie in the comments above we wind up with functions that look like:</p>\n\n<pre><code>Matrix Matrix::operator+=(const Matrix&amp; Object)\n{\n    if (dane.wiersz != Object.dane.wiersz\n            || dane.kolumna != Object.dane.kolumna)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;\n    }\n    else\n    {\n        for (int i = 0; i &lt; dane.wiersz; i++)\n        {\n            for (int j = 0; j &lt; dane.kolumna; j++)\n            {\n                dane.wsk[i][j] += Object.dane.wsk[i][j];\n            }\n        }\n    }\n\n    return *this;\n}\n\nMatrix Matrix::operator+(const Matrix &amp;Object) const\n{\n    return Matrix.clone(*this) +=Object;\n}\n</code></pre>\n\n<p>We deviate slightly from the norm (<code>return Matrix(*this) +=Object;</code>) here because <code>operator+</code> should not modify the source parameters. <code>Matrix</code>'s copy constructor results in two <code>Matrix</code>s with the same reference counted array, and this will allow cause the <code>+=</code> to change the original along with the copy. This would be Bad. No one expects x = 10 + 2 to turn 10 into 12.</p>\n\n<p><code>clone</code> looks something like</p>\n\n<pre><code>Matrix Matrix::clone(const Matrix &amp;Object)\n{\n    Matrix result(Object.dane.wiersz,\n                  Object.dane.kolumna);\n    for (int i = 0; i &lt; result.dane.wiersz; i++)\n    {\n        for (int j = 0; j &lt; result.dane.kolumna; j++)\n        {\n            result.dane.wsk[i][j] = Object.dane.wsk[i][j];\n        }\n    }\n    return result;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/xyrJOo\" rel=\"nofollow noreferrer\">Link to complete code and test case.</a></p>\n\n<p>I did not check any of the program logic that didn't pertain to proper management of the reference counted array. All of the matrix manipulation logic is unchecked and may be bogus.</p>\n\n<p>Don't use this for production code. There is a perfectly good <code>std::shared_ptr</code> in the standard library.</p>\n"}], "owner": {"reputation": 41, "user_id": 9201088, "user_type": "registered", "profile_image": "https://graph.facebook.com/1631485403578503/picture?type=large", "display_name": "Bartek Dettlaff", "link": "https://stackoverflow.com/users/9201088/bartek-dettlaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 671, "favorite_count": 0, "accepted_answer_id": 48215955, "answer_count": 2, "score": 1, "last_activity_date": 1515705536, "creation_date": 1515624577, "last_edit_date": 1515626134, "question_id": 48197362, "link": "https://stackoverflow.com/questions/48197362/directly-lost-or-indirectly-lost-valgrind-issue", "title": "Directly lost or indirectly lost - Valgrind issue", "body": "<p>I've got problem with my Matrix program. </p>\n\n<p>There are my errors:</p>\n\n<pre><code>24 bytes in 1 blocks are indirectly lost in loss record 1 of 7\n==5334==    at 0x4C2E80F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x402B26: Matrix::CountingReference::CountingReference(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401725: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401305: main (in /home/detek/Pulpit/Matrix/main)\n==5334== \n==5334== 24 bytes in 1 blocks are indirectly lost in loss record 2 of 7\n==5334==    at 0x4C2E80F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x402B26: Matrix::CountingReference::CountingReference(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401725: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40187D: Matrix::operator+(Matrix const&amp;) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40144E: main (in /home/detek/Pulpit/Matrix/main)\n==5334== \n==5334== 72 bytes in 3 blocks are indirectly lost in loss record 3 of 7\n==5334==    at 0x4C2E80F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x402B7D: Matrix::CountingReference::CountingReference(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401725: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401305: main (in /home/detek/Pulpit/Matrix/main)\n==5334== \n==5334== 72 bytes in 3 blocks are indirectly lost in loss record 4 of 7\n==5334==    at 0x4C2E80F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x402B7D: Matrix::CountingReference::CountingReference(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401725: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40187D: Matrix::operator+(Matrix const&amp;) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40144E: main (in /home/detek/Pulpit/Matrix/main)\n==5334== \n==5334== 120 (24 direct, 96 indirect) bytes in 1 blocks are definitely lost in loss record 5 of 7\n==5334==    at 0x4C2E0EF: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x401712: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x401305: main (in /home/detek/Pulpit/Matrix/main)\n==5334== \n==5334== 120 (24 direct, 96 indirect) bytes in 1 blocks are definitely lost in loss record 6 of 7\n==5334==    at 0x4C2E0EF: operator new(unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5334==    by 0x401712: Matrix::Matrix(int, int) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40187D: Matrix::operator+(Matrix const&amp;) (in /home/detek/Pulpit/Matrix/main)\n==5334==    by 0x40144E: main (in /home/detek/Pulpit/Matrix/main)\n</code></pre>\n\n<p>And my code is here: </p>\n\n<p>It's  Matrix.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;fstream&gt;\n#include &lt;ctime&gt;\n#include \"Matrix.h\"\nusing namespace std;\n\nostream&amp; operator&lt;&lt;(ostream&amp; o,const Matrix&amp; Object)\n{\n    for(int i=0;i&lt;Object.dane-&gt;wiersz;i++)\n    {\n        for(int j=0;j&lt;Object.dane-&gt;kolumna;j++)\n        {\n            o&lt;&lt;Object.dane-&gt;wsk[i][j]&lt;&lt;\" \";\n        }\n        o&lt;&lt;endl;\n    }\n    return o;\n}\n\nMatrix::Matrix()\n{\n    dane=new CountingReference();\n}\n\nMatrix::Matrix(int wiersz, int col)\n{\n    dane=new CountingReference(wiersz,col);\n}\n\nMatrix::Matrix(const Matrix&amp; Object)\n{\n    Object.dane-&gt;countingReference++;\n    dane=Object.dane;\n}\n\nMatrix::~Matrix()\n{\n    if(dane-&gt;countingReference==-1)\n    {\n        delete dane;\n    }\n}\n\nint Matrix::readref()\n{\n    return this-&gt;dane-&gt;countingReference;\n}\n\nMatrix&amp; Matrix::operator=(const Matrix&amp; Object)\n{\n    Object.dane-&gt;countingReference++;\n    if(dane-&gt;countingReference==0)\n    {\n        delete dane;\n    }\n    dane=Object.dane;\n    return *this;\n}\n\nMatrix Matrix::operator+(const Matrix&amp; Object) throw(string)\n{\n    Matrix A(dane-&gt;wiersz,dane-&gt;kolumna);\n    if(dane-&gt;wiersz!=Object.dane-&gt;wiersz || dane-&gt;kolumna!=Object.dane-&gt;kolumna)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;\n    }\n    else{\n        int i,j;\n        for(i=0; i&lt;dane-&gt;wiersz;i++)\n        {\n            for(j=0; j&lt;dane-&gt;kolumna; j++)\n            {  \n                A.dane-&gt;wsk[i][j]=dane-&gt;wsk[i][j]+Object.dane-&gt;wsk[i][j];\n            }\n        }\n    }\n    return A;\n}\n\nMatrix Matrix::operator-(const Matrix&amp; Object) throw(string)\n{\n    Matrix A(dane-&gt;wiersz,dane-&gt;kolumna);\n    if(dane-&gt;wiersz!=Object.dane-&gt;wiersz || dane-&gt;kolumna!=Object.dane-&gt;kolumna)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;  \n    }\n    else{\n        for(int i=0;i&lt;dane-&gt;wiersz;i++)\n        {\n            for(int j=0;j&lt;dane-&gt;kolumna;j++)\n            {\n                A.dane-&gt;wsk[i][j]=dane-&gt;wsk[i][j]-Object.dane-&gt;wsk[i][j];\n            }\n        }\n    }\n    return A;\n}\n\nMatrix Matrix::operator*(const Matrix&amp; Object) throw(string)\n{\n    double temp=0;\n    Matrix A(dane-&gt;wiersz,dane-&gt;kolumna);\n    if(dane-&gt;kolumna!=Object.dane-&gt;wiersz)\n    {\n        string wyjatek = \"Nie sa rowne\";\n        throw wyjatek;\n    }\n    else{\n        for(int i=0;i&lt;dane-&gt;wiersz;i++)\n        {\n            for(int j=0;j&lt;Object.dane-&gt;kolumna;j++)\n            {\n                for(int k=0;k&lt;dane-&gt;kolumna;k++)\n                {\n                    temp+=dane-&gt;wsk[i][j]*Object.dane-&gt;wsk[j][k];\n                }\n\n                A.dane-&gt;wsk[i][j]=temp;\n            }\n        }\n    }\n\n    return A;\n}\n\nMatrix Matrix::operator+=(const Matrix&amp; Object) throw(string)\n{\n    if(dane-&gt;wiersz!=Object.dane-&gt;wiersz || dane-&gt;kolumna!=Object.dane-&gt;kolumna)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;  \n    }\n    else{\n        dane=dane-&gt;detach();\n        for(int i=0;i&lt;dane-&gt;wiersz;i++)\n        {\n            for(int j=0;j&lt;dane-&gt;kolumna;j++)\n            {\n                dane-&gt;wsk[i][j]+=Object.dane-&gt;wsk[i][j];\n            }\n        }\n    }\n\n    return *this;\n}\n\nMatrix&amp; Matrix::operator-=(const Matrix&amp; Object) throw(string)\n{\n    if(dane-&gt;wiersz!=Object.dane-&gt;wiersz || dane-&gt;kolumna!=Object.dane-&gt;kolumna)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;  \n    }\n    else{\n        dane=dane-&gt;detach();\n        for(int i=0;i&lt;dane-&gt;wiersz;i++)\n        {\n            for(int j=0;j&lt;dane-&gt;kolumna;j++)\n            {\n                dane-&gt;wsk[i][j]-=Object.dane-&gt;wsk[i][j];\n            }\n        }\n    }\n    return *this;\n}\n\nMatrix&amp; Matrix::operator*=(const Matrix&amp; Object) throw(string)\n{\n    if(dane-&gt;kolumna!=Object.dane-&gt;wiersz)\n    {\n        string wyjatek = \"Nie sa rowne.\";\n        throw wyjatek;\n    }\n    else\n    {\n        int m=0,n=0;\n        double temp=0;\n        m=dane-&gt;wiersz;\n        n=Object.dane-&gt;kolumna;\n        Matrix A(m,n);\n        for(int i=0;i&lt;dane-&gt;wiersz;i++)\n        {\n            for(int j=0;j&lt;Object.dane-&gt;kolumna;j++)\n            {\n                for(int k=0;k&lt;dane-&gt;kolumna;k++)\n                {\n                    temp+=dane-&gt;wsk[i][k]*Object.dane-&gt;wsk[k][j];\n                }\n\n                A.dane-&gt;wsk[i][j] = temp;\n                temp=0;\n            }\n        }\n\n        dane=dane-&gt;detach();\n        for(int i=0;i&lt;m;i++)\n        {\n            for(int j=0;j&lt;n;j++)\n            {\n                dane-&gt;wsk[i][j]=A.dane-&gt;wsk[i][j];\n            }\n        }       \n    }\n    return *this;\n}\n\nMatrix&amp; Matrix::LoadFromFile(const char *string)\n{\n    int m=0,n=0;\n    ifstream inFile;\n    inFile.open(string);\n    if(inFile.good())\n    {\n        inFile&gt;&gt;m;\n        inFile&gt;&gt;n;\n        dane=dane-&gt;detach();\n\n        for(int i=0;i&lt;m;i++)\n        {\n            for(int j=0;j&lt;n;j++)\n            {\n                inFile&gt;&gt;dane-&gt;wsk[i][j];\n            }\n        }\n        inFile.close();\n    }\n    return *this;\n}\n\ndouble Matrix::read( int i, int j) const\n{\n    return dane-&gt;wsk[i-1][j-1];\n}\n\nvoid Matrix::write(int i, int j, const double x)\n{\n    dane = dane-&gt;detach();\n    dane-&gt;wsk[i-1][j-1] = x;    \n}\n\nbool Matrix::operator == (const Matrix&amp; Object)\n{   \n    int i,j;\n    for(i=0;i&lt;dane-&gt;wiersz;i++)\n    {\n        for(j=0;j&lt;dane-&gt;kolumna;j++)\n        {\n            if(dane-&gt;wsk[i][j]!=Object.dane-&gt;wsk[i][j])\n            {\n                return false;\n            }   \n        }\n    }\n    return true;\n}\n\nMatrix&amp; Random(Matrix&amp; Object)\n{\n    for(int i=0;i&lt;Object.dane-&gt;wiersz;i++)\n    {\n        for(int j=0;j&lt;Object.dane-&gt;kolumna;j++)\n        {\n            Object.dane-&gt;wsk[i][j]=rand()%100+1;\n        }\n    }\n\n    return Object;\n}\n\nMatrix::Mref Matrix::operator()(int i, int j)\n{\n    return Mref(*this,i,j);\n}\n\nMatrix::CountingReference::CountingReference()\n{\n    wiersz=0;\n    kolumna=0;\n    wsk=NULL;\n    countingReference=0;\n}\n\nMatrix::CountingReference::CountingReference(int wier, int kol)\n{\n    countingReference=0;    \n    wiersz=wier;\n    kolumna=kol;\n    wsk=new double*[wier];\n    for(int i=0;i&lt;wier;i++)\n    {\n        wsk[i]=new double[kol];\n    }\n}\n\nMatrix::CountingReference::~CountingReference()\n{\n    for(int i=0;i&lt;wiersz;i++)\n    {\n        delete [] wsk[i];\n    }\n\n    delete [] wsk;\n    wsk=NULL;\n}\n\nMatrix::CountingReference *Matrix::CountingReference::detach()\n{\n    CountingReference *pointer;\n\n    if(countingReference==0)\n    {\n        return this;\n    }\n\n    pointer=new CountingReference(wiersz,kolumna);\n\n    for(int i=0;i&lt;wiersz;i++)\n    {\n        for(int j=0;j&lt;kolumna;j++)\n    {\n            pointer-&gt;wsk[i][j]=wsk[i][j];\n        }\n    }\n    countingReference--;\n    return pointer;\n}\n\nMatrix::Mref::operator double() const\n{\n    return s.read(i,k);       \n}\n\nMatrix::Mref &amp;Matrix::Mref::operator = (double c)\n{\n    s.write(i,k,c); \n    return *this;\n}\n\nMatrix::Mref &amp;Matrix::Mref::operator = (const Mref&amp; ref)\n{\n    return operator= ((double)ref);   \n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;ctime&gt;\n#include &lt;fstream&gt;\n#include \"Matrix.h\"\n\nusing namespace std;\n\nint main()\n{\n\n    Matrix A(3,3);\n    Matrix B(3,3); \n    Matrix C(3,3);\n    Matrix D(3,3);\n    Matrix F();\n\n    Random(B);\n    Random(C);\n    Random(D);\n\n    cout&lt;&lt;\"B: \"&lt;&lt;endl&lt;&lt;B&lt;&lt;endl;\n    cout&lt;&lt;\"C: \"&lt;&lt;endl&lt;&lt;C&lt;&lt;endl;\n    cout&lt;&lt;\"D: \"&lt;&lt;endl&lt;&lt;D&lt;&lt;endl;\n    cout&lt;&lt;A.readref()&lt;&lt;endl;\n    A=B+C;\n    cout&lt;&lt;A.readref()&lt;&lt;endl;\n    A=B=C=D;\n    cout&lt;&lt;A.readref()&lt;&lt;endl;\nreturn 0;\n}\n</code></pre>\n\n<p>I know, that somewhere in my destructors I don't release memory. But I already checked everything and still didn't find the problem... I don't even know which of my pointers i should release. Could you help me?</p>\n\n<p>EDIT</p>\n\n<p>Here is my Matrix.h</p>\n\n<pre><code> #include &lt;iostream&gt;\n#include &lt;cassert&gt;\n\nusing namespace std;\n\nclass Matrix{\n    private:\n        class CountingReference\n        {\n            friend class Matrix; \n            public:\n                double **wsk;\n                int wiersz;\n                int kolumna;\n                int countingReference;\n                CountingReference();\n                CountingReference(int, int);\n                ~CountingReference();\n                CountingReference* detach();\n        };\n        CountingReference *dane;\n\n    public:\n\n        class Mref\n        {   \n            friend class Matrix;\n            Matrix&amp; s;\n            int i,k;\n            Mref (Matrix&amp; m, int r, int c): s(m), i(r), k(c) {}   \n\n            public:\n                operator double() const;\n                Mref&amp; operator = (double c);\n                Mref&amp; operator = (const Mref&amp; ref);\n        };\n\n        friend ostream&amp; operator&lt;&lt;(ostream&amp; o,const Matrix&amp;);\n        friend ostream&amp; operator&lt;&lt;(const Matrix&amp;, ostream&amp; o);\n        Matrix();\n        Matrix(int, int);\n        Matrix(const Matrix&amp;);\n        ~Matrix();\n        Matrix&amp; operator=(const Matrix&amp;);\n        Matrix operator+(const Matrix&amp;) throw(string);\n        Matrix operator-(const Matrix&amp;) throw(string);\n        Matrix operator*(const Matrix&amp;) throw(string);\n        Matrix operator+=(const Matrix&amp;) throw(string);\n        Matrix&amp; operator-=(const Matrix&amp;) throw(string);\n        Matrix&amp; operator*=(const Matrix&amp;) throw(string);\n        bool operator == (const Matrix &amp;);\n        Matrix&amp; LoadFromFile(const char*);\n        friend Matrix&amp; Random(Matrix&amp;);\n        double read(int, int) const;\n        int readref();  \n        void write(int, int, const double);\n        Mref operator()(int, int);\n        friend class CountingReference;\n};\n</code></pre>\n"}, {"tags": ["c++", "tuples", "metaprogramming", "c++17", "template-meta-programming"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1515624047, "post_id": 48197165, "comment_id": 83375583, "body": "You <i>have</i> to use type parameter pack. You can later <code>static_assert</code> to make sure each argument can be converted to an integer."}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1515629251, "post_id": 48197165, "comment_id": 83377193, "body": "<a href=\"https://stackoverflow.com/questions/39659127/restrict-variadic-template-arguments/39659128#39659128\" title=\"restrict variadic template arguments\">stackoverflow.com/questions/39659127/&hellip;</a>"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1515632285, "post_id": 48197165, "comment_id": 83378008, "body": "Examples here: <a href=\"https://godbolt.org/g/7kEWzy\" rel=\"nofollow noreferrer\">godbolt.org/g/7kEWzy</a>"}], "answers": [{"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 0, "last_activity_date": 1515629822, "last_edit_date": 1515629822, "creation_date": 1515629506, "answer_id": 48198069, "question_id": 48197165, "link": "https://stackoverflow.com/questions/48197165/c17-make-tuple-from-an-argument-pack/48198069#48198069", "title": "C++17 make_tuple from an argument pack", "body": "<blockquote>\n  <p>I would like to do the following but didn't know why it didn't compile in C++17.</p>\n</blockquote>\n\n<p>Simply because </p>\n\n<pre><code>auto funcs(int... as) {\n  return make_tuple(func(as)...);\n}\n</code></pre>\n\n<p>isn't C++ syntax.</p>\n\n<p>I think that </p>\n\n<pre><code>template &lt;typename Args&gt;\nauto funcs (Args ... as)\n { return std::make_tuple(func(as)...); }\n</code></pre>\n\n<p>taking in count that every <code>as...</code> call <code>func()</code> that return an <code>int</code>, is a reasonable solution.</p>\n\n<p>But if you really want somethig that is like a variadic function that accept a variadic number of <code>int</code> (and if you can set an upper limit for the number of arguments), I propose the following solution.</p>\n\n<p>First of all, you need a template that receive a type and a <code>std::size_t</code> and return the type; something like</p>\n\n<pre><code>template &lt;typename T, std::size_t&gt;\nusing typer = T;\n</code></pre>\n\n<p>Now an helper recursive <code>struct</code> with self-inheritance </p>\n\n<pre><code>template &lt;typename&gt;\nstruct bar;\n\ntemplate &lt;&gt;\nstruct bar&lt;std::index_sequence&lt;&gt;&gt;\n { \n   static void f () {}\n };\n\ntemplate &lt;std::size_t ... Is&gt;\nstruct bar&lt;std::index_sequence&lt;Is...&gt;&gt;\n   : public bar&lt;std::make_index_sequence&lt;sizeof...(Is)-1U&gt;&gt;\n {\n   using bar&lt;std::make_index_sequence&lt;sizeof...(Is)-1U&gt;&gt;::f;\n\n   static auto f (typer&lt;int, Is&gt;... as)\n    { return std::make_tuple(func(as)...); }\n };\n</code></pre>\n\n<p>that define a sequence of <code>bar</code> <code>struct</code>s with a <code>static</code> method <code>f</code> that receive some <code>int</code> (<code>typer&lt;int, Is&gt;</code> is <code>int</code>).</p>\n\n<p>Now a <code>struct foo</code></p>\n\n<pre><code>template &lt;std::size_t N = 64U&gt;\nstruct foo : public bar&lt;std::make_index_sequence&lt;N&gt;&gt;\n { };\n</code></pre>\n\n<p>that inherit from a sequence of <code>bar</code> <code>struct</code>s and inherit a sequence of <code>f()</code> that receive zero, 1, 2, ..., N-1 <code>int</code>s.</p>\n\n<p>Now you can call</p>\n\n<pre><code>auto [v1, v2, v3] = foo&lt;&gt;::f(1, 2, 3);\n</code></pre>\n\n<p>because in <code>foo</code> <code>struct</code> there is (also) a <code>f()</code> method that receive exactly three <code>int</code>s.</p>\n\n<p>The following is a full working example</p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\nint func(int a)\n { return a+1; }\n\ntemplate &lt;typename T, std::size_t&gt;\nusing typer = T;\n\ntemplate &lt;typename&gt;\nstruct bar;\n\ntemplate &lt;&gt;\nstruct bar&lt;std::index_sequence&lt;&gt;&gt;\n { \n   static void f () {}\n };\n\ntemplate &lt;std::size_t ... Is&gt;\nstruct bar&lt;std::index_sequence&lt;Is...&gt;&gt;\n   : public bar&lt;std::make_index_sequence&lt;sizeof...(Is)-1U&gt;&gt;\n {\n   using bar&lt;std::make_index_sequence&lt;sizeof...(Is)-1U&gt;&gt;::f;\n\n   static auto f (typer&lt;int, Is&gt;... as)\n    { return std::make_tuple(func(as)...); }\n };\n\ntemplate &lt;std::size_t N = 64U&gt;\nstruct foo : public bar&lt;std::make_index_sequence&lt;N&gt;&gt;\n { };\n\nint main ()\n {    \n   auto [v1, v2, v3] = foo&lt;&gt;::f(1, 2, 3);\n\n   std::cout &lt;&lt; v1 &lt;&lt; \", \" &lt;&lt; v2 &lt;&lt; \", \" &lt;&lt; v3 &lt;&lt; std::endl;\n }\n</code></pre>\n"}], "owner": {"reputation": 2102, "user_id": 2828925, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/18abe23c6b1123371f171f55be659ef5?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/2828925/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1636, "favorite_count": 1, "closed_date": 1515629591, "answer_count": 1, "score": 0, "last_activity_date": 1515629822, "creation_date": 1515623428, "last_edit_date": 1515629796, "question_id": 48197165, "link": "https://stackoverflow.com/questions/48197165/c17-make-tuple-from-an-argument-pack", "closed_reason": "Duplicate", "title": "C++17 make_tuple from an argument pack", "body": "<p>I would like to do the following but didn't know why it didn't compile in C++17.</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>int func(int a) {\n  // do some operations on a\n  int res = operation_on_a(a);\n  return res;\n}\n\nauto funcs(int... as) {\n  return make_tuple(func(as)...);\n}\n\nauto v1 = func(1);\nauto [v1, v2, v3] = funcs(1, 2, 3);  // Why this doesn't compile?\n</code></pre>\n\n<p>Basically, the idea is to have a base function called <code>func()</code> and another function taking variadic arguments applying each item to the <code>func()</code> and return a <code>std::tuple</code> of the results. However, it doesn't get compiled unless I replaced <code>int...</code> with a template type. In this case I know arguments are all integers.</p>\n"}, {"tags": ["c++", "visual-studio", "compiler-errors"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1515623211, "post_id": 48197092, "comment_id": 83375262, "body": "Did you, at least, try to search for the error you are getting? This is pretty commonly asked question.."}, {"owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1515623733, "post_id": 48197092, "comment_id": 83375454, "body": "Yeah apparently too superficial (I read something about pointers in a similar question, and that didn&#39;t seem to fit my problem or I didn&#39;t understand it correctly.)"}], "answers": [{"comments": [{"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 1, "creation_date": 1515623750, "post_id": 48197192, "comment_id": 83375463, "body": "&quot;To call it you write &#39;one() ;&#39;&quot; It can&#39;t be called, and even if it could why would that be relevant?"}, {"owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "reply_to_user": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 0, "creation_date": 1515746359, "post_id": 48197192, "comment_id": 83426077, "body": "It&#39;s relevant to answering the question, why doesn&#39;t it compile. With the code in question it will compile, but won&#39;t link (undefined reference to `one()&#39;). This might demonstrate it better: #include&lt;iosgtream&gt; struct SkatGame{}; int main(){ SkatGame one(); one(); } SkatGame one(){ std::cout &lt;&lt; &quot;This is the one\\n&quot;;}"}], "tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": -2, "last_activity_date": 1515623600, "creation_date": 1515623600, "answer_id": 48197192, "question_id": 48197092, "link": "https://stackoverflow.com/questions/48197092/getting-error-left-of-tostring-must-have-class-struct-union-even-though-th/48197192#48197192", "title": "Getting error &quot;left of &#39;.toString&#39; must have class/struct/union&quot;, even though there should be a fitting object left of toString", "body": "<p>You are declaring a function 'one' that takes no arguments and returns a 'SkatGame'. To call it you write 'one() ;' </p>\n"}], "owner": {"reputation": 21, "user_id": 5313633, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea8d80f9ccd451e1fa25b696be87ab9?s=128&d=identicon&r=PG&f=1", "display_name": "someonesomewhere", "link": "https://stackoverflow.com/users/5313633/someonesomewhere"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 427, "favorite_count": 0, "closed_date": 1515623439, "answer_count": 1, "score": 0, "last_activity_date": 1515623626, "creation_date": 1515623047, "last_edit_date": 1515623626, "question_id": 48197092, "link": "https://stackoverflow.com/questions/48197092/getting-error-left-of-tostring-must-have-class-struct-union-even-though-th", "closed_reason": "Duplicate", "title": "Getting error &quot;left of &#39;.toString&#39; must have class/struct/union&quot;, even though there should be a fitting object left of toString", "body": "<p>I have to programm some aspects of the game Skat for class. Knowing the game/the game's rules isn't important for task though. (I don't know it either.)</p>\n\n<p>I haven't finished the programm and just wanted to run a simple test, but am already getting an error, that I can't seem to fix. Basically I create a new object of the class \"SkatGame\" called \"one\", and then I want to output all cards in the \"deck\" of \"one\" to the console. However that doesn't work and the error seems to indicate that \"one\" is no object of a class, i don't know why though.</p>\n\n<p>I copied my whole code, but highlighted the important parts i though to be important (for lack of knowledge of a better tool) via the comments at the side. Any help would be appreciated.</p>\n\n<p>main.cpp-File</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\n#include &lt;vector&gt; \n#include \"Header.h\"\n\nint main() {\n    SkatGame one();\n    one.toString();  //error in this line\n\n}\n</code></pre>\n\n<p>Header.h-File</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;array&gt;\n\n\nenum Suit { KARO = 0, HERZ, PIK, KREUZ };                                           \nenum Face { SIEBEN = 0, ACHT, NEUN, ZEHN, BUBE, DAME, KOENIG, ASS };\nint const skatSize = 2;\nint const deckSize = 32;\nint const playerSize = 10;\n\nclass Card {                                                    \npublic:\n    Card();\n    Card(Suit, Face);\n    Suit getSuit();\n    Face getFace();\n    std::string toString();\nprivate:\n    Suit suit;\n    Face face;\n};\n\n\nclass SkatGame {\npublic:\n    SkatGame();                             //!important line\n    void shuffle();\n    void deal();\n    std::string toString();\n    std::array &lt;Card, skatSize&gt; getSkat();                  \nprivate:\n    std::array &lt;Card, deckSize&gt; deck;\n    std::array &lt;Card, playerSize&gt; player1;\n    std::array &lt;Card, playerSize&gt; player2;\n    std::array &lt;Card, playerSize&gt; player3;\n    std::array &lt;Card, skatSize&gt; skat;\n};\n</code></pre>\n\n<p>detailed class-definitions file (.cpp)</p>\n\n<pre><code>#include \"Header.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;array&gt;\n//#include &lt;stdlib.h&gt;\n\n\nCard::Card() {};                                                    \nCard::Card(Suit gesinnung, Face Zahl)\n    : suit(gesinnung), face(Zahl)\n{};\nSuit Card::getSuit() {                                              \n    return Card::suit;\n}\nFace Card::getFace() {\n    return Card::face;\n}\nstd::string Card::toString() {                                 //!important part begin\n    std::string zurueck;\n    zurueck = std::to_string(Card::suit) + \" \" + std::to_string(Card::face);\n    return zurueck;\n}                             //!important part end\n\n\n\nSkatGame::SkatGame()\n{\nint a, b, e = 0;\n\nfor (a = 0; a &lt;= 3; a++) {\n    for (b = 0; b &lt;= 7; b++) {\n            SkatGame::deck[e] = Card(static_cast&lt;Suit&gt;(a), static_cast&lt;Face&gt;(b));\n            e++;\n    }\n}\n}\nvoid SkatGame::shuffle() {\n    int a, card1, card2;\n    Card hold;\n    for (a = 0; a &lt; 1000; a++){\n        card1 = rand() %32;\n        card2 = rand() %32;\n        hold = SkatGame::deck[card1];\n        SkatGame::deck[card1] = SkatGame::deck[card2];\n        SkatGame::deck[card2] = hold;\n    }\n}\nstd::string SkatGame::toString() {                      //!important part begin\n    int i;\n    for (i = 0; i &lt;= 31; i++) {\n        std::cout &lt;&lt; (SkatGame::deck[i]).toString() &lt;&lt; std::endl;\n    };\n    return \"justatest\";\n}                                                          //!important part end\n</code></pre>\n\n<p>EDIT: Removing the brackets behind one during the declaration worked.\nSo \"SkatGame one;\" instead of \"SkatGame one();\".</p>\n"}, {"tags": ["c++", "sockets", "vector"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1515622376, "post_id": 48196915, "comment_id": 83374919, "body": "1) &quot;<i>I see that the socket doesn&#39;t allow such object to pass through directly, but need to serialize it.</i>&quot; <code>(char*) &amp;result;</code> is <b>not</b> a serialization of <code>std::vector</code>. 2) <code>sizeof(a)</code> in <code>send(newsockfd, a, sizeof(a), 0);</code> is equivalent to <code>sizeof(char*)</code>, and I doubt you had this in mind. 3) Consider learning from <a href=\"http://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ books</a> instead of coding randomly. There are many fundamental misunderstandings of the language, and its concepts, in your example."}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515622531, "post_id": 48196915, "comment_id": 83374977, "body": "You could pass every element from that vector over the network then reconstruct it if you want an quick and dirty solution"}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1515622538, "post_id": 48196915, "comment_id": 83374980, "body": "@AlgirdasPreid\u017eius thanks, then how should I correctly serialize it?"}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515622643, "post_id": 48196915, "comment_id": 83375029, "body": "Is that all the vector will hold: 7 and 8? You could use a char array and then pass its pointer to the write function."}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515622916, "post_id": 48196915, "comment_id": 83375144, "body": "@sergiureznicencu so should i do a memcpy of vector to char array?"}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515623015, "post_id": 48196915, "comment_id": 83375179, "body": "You don&#39;t quite want to do that. Do you really need a vector in the first place? Can you use an array instead? Because an array can be passed very easily over wire while a vector object can not(that easily)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1515623030, "post_id": 48196915, "comment_id": 83375187, "body": "One way to serialize is to format to a <code>std::stringstream</code>. You could also find a library for writing JSON or XML."}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515624538, "post_id": 48196915, "comment_id": 83375765, "body": "@sergiureznicencu sure i don&#39;t neccesarily need a vector float. But when i do: char* result [] = {&quot;7&quot;,&quot;8&quot;}; then send(newsockfd, result, sizeof(result), 0); and curl response is not readable: h\ufffd6j\ufffd6. In this case, you know how to interpret the response?"}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515624793, "post_id": 48196915, "comment_id": 83375862, "body": "char *result[] is a two dimensional array(kind of). In your code 7 and 8 were numbers not strings. You must pass the array to the send.  e.g: char numbers[]={7,8}; send(newsockfd, result, sizeof(result), 0);"}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515624960, "post_id": 48196915, "comment_id": 83375924, "body": "@sergiureznicencu the socket won&#39;t send the char array in this case. curl response is empty.. it has to be char*."}, {"owner": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515625030, "post_id": 48196915, "comment_id": 83375941, "body": "char* is called pointer. num ,where char num[]={}, is a pointer. It should work. You are passing an array to the send function which reads the memory pointed to by &quot;num&quot; and reads some specified number of bytes"}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 1025, "user_id": 3971417, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8de1f3c62ed8673871bcc6b770f5346c?s=128&d=identicon&r=PG&f=1", "display_name": "sergiu reznicencu", "link": "https://stackoverflow.com/users/3971417/sergiu-reznicencu"}, "edited": false, "score": 0, "creation_date": 1515625164, "post_id": 48196915, "comment_id": 83375995, "body": "@sergiureznicencu ok, but curl response is empty.."}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515625193, "post_id": 48196915, "comment_id": 83376006, "body": "@Barmar thanks, is there any example code you know? i only find documentation.."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515625776, "post_id": 48196915, "comment_id": 83376217, "body": "<a href=\"https://stackoverflow.com/questions/23132621/create-a-json-array-in-c\" title=\"create a json array in c\">stackoverflow.com/questions/23132621/create-a-json-array-in-&zwnj;&#8203;c</a>"}, {"owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515628057, "post_id": 48196915, "comment_id": 83376863, "body": "@Barmar this is about json. i meant to ask how to send the json?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515628815, "post_id": 48196915, "comment_id": 83377059, "body": "I assume the <code>json</code> class provides a method to convert to a <code>std::string</code>"}], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "is_accepted": false, "score": 0, "last_activity_date": 1515904670, "creation_date": 1515904670, "answer_id": 48246744, "question_id": 48196915, "link": "https://stackoverflow.com/questions/48196915/how-to-sendserialize-vector-of-float-over-server-c/48246744#48246744", "title": "how to send(serialize?) vector of float over server c++?", "body": "<p>i figure it out, by simply send raw data:</p>\n\n<pre><code>send(newsockfd, result.data(), sizeof(result[0])*result.size(), 0);\n</code></pre>\n\n<p>On the client side, i used python struck.unpack to receive the result. It works pretty well.</p>\n\n<p>But still thanks for all the tips above!</p>\n"}], "owner": {"reputation": 139, "user_id": 6884594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16d60265de2b4d9b954298eef9291473?s=128&d=identicon&r=PG&f=1", "display_name": "ayy", "link": "https://stackoverflow.com/users/6884594/ayy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 590, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1515904670, "creation_date": 1515622159, "last_edit_date": 1515624217, "question_id": 48196915, "link": "https://stackoverflow.com/questions/48196915/how-to-sendserialize-vector-of-float-over-server-c", "title": "how to send(serialize?) vector of float over server c++?", "body": "<p>i am setting up a web server in c++. I need to return from server a feature vector in the form of vector. I see that the socket doesn't allow such object to pass through directly, but need to serialize it. I am trying to serialize it by converting my vector result to a char* a. but when i do curl request, it still get back nothing.\nWould anyone let me know the trick here?</p>\n\n<pre><code>/* A simple server in the internet domain using TCP\nThe port number is passed as an argument */\n// server.cpp\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt; \n#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nvoid error(const char *msg)\n{\n    perror(msg);\n    exit(1);\n}\n\nint main(int argc, char *argv[])\n{\n     int sockfd, newsockfd, portno;\n socklen_t clilen;\n char buffer[256];\n struct sockaddr_in serv_addr, cli_addr;\n int n;\n if (argc &lt; 2) {\n     fprintf(stderr,\"ERROR, no port provided\\n\");\n     exit(1);\n }\n sockfd = socket(AF_INET, SOCK_STREAM, 0);\n if (sockfd &lt; 0) \n    error(\"ERROR opening socket\");\n bzero((char *) &amp;serv_addr, sizeof(serv_addr));\n portno = atoi(argv[1]);\n serv_addr.sin_family = AF_INET;\n serv_addr.sin_addr.s_addr = INADDR_ANY;\n serv_addr.sin_port = htons(portno);\n if (bind(sockfd, (struct sockaddr *) &amp;serv_addr,\n          sizeof(serv_addr)) &lt; 0) \n          error(\"ERROR on binding\");\n listen(sockfd,5);\n while (1 == 1) {\n     clilen = sizeof(cli_addr);\n     newsockfd = accept(sockfd, \n                 (struct sockaddr *) &amp;cli_addr, \n                 &amp;clilen);\n     if (newsockfd &lt; 0) \n          error(\"ERROR on accept\");\n     bzero(buffer,256);\n     n = read(newsockfd,buffer,255);\n     if (n &lt; 0) error(\"ERROR reading from socket\");\n     printf(\"before result: %s\\n\",buffer);\n\n     std::vector&lt;float&gt; fv;\n     fv.push_back(7);\n     fv.push_back(8); \n     char* result = reinterpret_cast&lt;char*&gt;(&amp;fv);\n     send(newsockfd, result, sizeof(result), 0);\n\n     //n = write(newsockfd,\"I got your message\",18);\n     //if (n &lt; 0) error(\"ERROR writing to socket\");\n     printf(\"message sent. \\n\");\n     close(newsockfd);\n     //close(sockfd);\n }\n return 0; \n}\n</code></pre>\n\n<p>To compile the code:</p>\n\n<pre><code>g++ -o server server.cpp\n</code></pre>\n\n<p>And run:</p>\n\n<pre><code> ./server 8080\n</code></pre>\n\n<p>For curl request:</p>\n\n<pre><code>curl http://localhost:8080\n</code></pre>\n\n<p>And i get:</p>\n\n<pre><code>alliey:socket alliey$ curl http://localhost:8080\n`N\ufffd.\n</code></pre>\n\n<p>How should i interpret the response?</p>\n"}, {"tags": ["c++", "c++11", "constants"], "comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 1, "creation_date": 1515624273, "post_id": 48196861, "comment_id": 83375664, "body": "This design has so many red sirens going off...."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 0, "creation_date": 1515624436, "post_id": 48196861, "comment_id": 83375721, "body": "Throw the asker a bone, @ChristopherPisz , and outline a few."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 2, "creation_date": 1515624709, "post_id": 48196861, "comment_id": 83375835, "body": "Well, for one, DataView is not an &quot;Interface&quot; to it, it is another class that has now become tightly coupled to Foo. More than that you&#39;ve now got a friend relationship just to make it work. In fact, the data, that  DataView is acting on, lives in Foo. A class should contain, manage, and act on, and own, its own data, in my book.  If you&#39;ve got some class doing things with some other class&#39; data, usually something is wrong."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 3, "creation_date": 1515624873, "post_id": 48196861, "comment_id": 83375888, "body": "It&#39;s not clear what the author is trying to accomplish big picture, beyond creating a collection of something and serializing it, but I&#39;d bet a dollar there is a better design for the big picture problem."}, {"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 2, "creation_date": 1515625060, "post_id": 48196861, "comment_id": 83375954, "body": "Since we are wrapping an std::vector, usually the pattern I see, is that the wrapper implements a begin and end iterator, perhaps a size method, and those just call vector&#39;s methods. This way your collection class can be used just like any STL collection and with the STL algorithms."}, {"owner": {"reputation": 41, "user_id": 2148004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571be31c6d43aa01864cf7a1b3f1c645?s=128&d=identicon&r=PG", "display_name": "longstar", "link": "https://stackoverflow.com/users/2148004/longstar"}, "edited": false, "score": 0, "creation_date": 1515753367, "post_id": 48196861, "comment_id": 83430328, "body": "This is not a simple wrapping. The real Foo class is far more complex, and this std::vector is just one of its internal collections. I reduced it to make a clear example."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 4, "last_activity_date": 1515623867, "last_edit_date": 1515623867, "creation_date": 1515622475, "answer_id": 48196979, "question_id": 48196861, "link": "https://stackoverflow.com/questions/48196861/c-how-to-create-a-temporary-object-containing-a-pointer-const-or-non-const/48196979#48196979", "title": "C++: How to create a temporary object, containing a pointer - const or non-const, depending on context?", "body": "<p>If a method is <code>const</code>, then nothing it does or provides can be be allowed to change the instance. This includes any functions or other methods the method calls, and references to any members that the method returns must be <code>const</code> so they can't be used to modify the object in the future. </p>\n\n<p>So if <code>write_cycle</code> is <code>const</code> then <code>dataview</code> must be <code>const</code> and <code>DataView</code> must have a constructor that accepts <code>const Foo *</code>. And this means <code>DataView::foo</code> must also be <code>const</code> to accept assignment of a <code>const Foo *</code>. This could be a problem if <code>DataView</code>'s clients expect to manipulate the stored <code>Foo</code>. </p>\n\n<p>End result, <code>write_cycle</code> can't be <code>const</code> without a bunch of extra work. </p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 2148004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571be31c6d43aa01864cf7a1b3f1c645?s=128&d=identicon&r=PG", "display_name": "longstar", "link": "https://stackoverflow.com/users/2148004/longstar"}, "edited": false, "score": 0, "creation_date": 1515753421, "post_id": 48197111, "comment_id": 83430367, "body": "But I need DataView also to write the data. So basically I need it both const and non-const."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 41, "user_id": 2148004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571be31c6d43aa01864cf7a1b3f1c645?s=128&d=identicon&r=PG", "display_name": "longstar", "link": "https://stackoverflow.com/users/2148004/longstar"}, "edited": false, "score": 0, "creation_date": 1515775395, "post_id": 48197111, "comment_id": 83443219, "body": "@longstar, yes. That&#39;s analogous to containers supporting <code>iterator</code> and <code>const_iterator</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 5, "last_activity_date": 1515623139, "creation_date": 1515623139, "answer_id": 48197111, "question_id": 48196861, "link": "https://stackoverflow.com/questions/48196861/c-how-to-create-a-temporary-object-containing-a-pointer-const-or-non-const/48197111#48197111", "title": "C++: How to create a temporary object, containing a pointer - const or non-const, depending on context?", "body": "<p>You said:</p>\n\n<blockquote>\n  <p>These structures reference other ones by indices (instead of pointers), to conserve memory and make serialization easier. To follow these indices, I created a class <code>DataView</code>, which provides a comfortable interface for it.</p>\n</blockquote>\n\n<p>That indicates to me that you should not need to support:</p>\n\n<pre><code>foo.dataview( 2 ).value() = 11;\n</code></pre>\n\n<p>Use <code>DataView</code> to only <em>read</em> the data. If you agree with that, you can change <code>DataView</code> to store a <code>Foo const*</code>. You can then get rid of  the non-<code>const</code> version of <code>DataView::value()</code>.</p>\n\n<pre><code>class DataView\n{\n    Foo const* foo;\n    int index;\npublic:\n    DataView( Foo const* foo_, int index_ )\n        : foo( foo_ ), index( index_ )\n    {\n    }\n    DataView next() const;\n    DataView prev() const;\n    int value() const;\n\n    // Don't need this.\n    // int &amp; value();\n\n    int id() const\n    {\n        return index;\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "is_accepted": false, "score": 0, "last_activity_date": 1515630066, "creation_date": 1515630066, "answer_id": 48198147, "question_id": 48196861, "link": "https://stackoverflow.com/questions/48196861/c-how-to-create-a-temporary-object-containing-a-pointer-const-or-non-const/48198147#48198147", "title": "C++: How to create a temporary object, containing a pointer - const or non-const, depending on context?", "body": "<p>To add to user <code>R Sahu's</code> answer about leaving <code>Foo</code> within <code>Dataview</code> as <code>const</code> since it will act as a <code>read only</code> class and shouldn't modify <code>Foo</code>; you can add this function into <code>Foo's</code> class to update its values:</p>\n\n<pre><code>void Foo::updateValue( int index, const int&amp; value ) {\n    if ( index &lt; 0 || index &gt;= data.size() ) {\n        return;\n    }\n\n    data[index].value = value;\n}\n</code></pre>\n\n<p>Then inside of your main.cpp file would look like this:</p>\n\n<pre><code>Foo foo;\nstd::cout &lt;&lt; \"writing cycle of 3\" &lt;&lt; std::endl;\nfoo.write_cycle( 3 );\nstd::cout &lt;&lt; \"updating index 2 with value of 11\" &lt;&lt; std::endl;\nfoo.updateValue( 2, 11 );\nstd::cout &lt;&lt; \"writing cycle of 3\" &lt;&lt; std::endl;\nfoo.write_cycle( 3 );\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2148004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/571be31c6d43aa01864cf7a1b3f1c645?s=128&d=identicon&r=PG", "display_name": "longstar", "link": "https://stackoverflow.com/users/2148004/longstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1515630066, "creation_date": 1515621864, "question_id": 48196861, "link": "https://stackoverflow.com/questions/48196861/c-how-to-create-a-temporary-object-containing-a-pointer-const-or-non-const", "title": "C++: How to create a temporary object, containing a pointer - const or non-const, depending on context?", "body": "<p>I want to hold some structures <code>Data</code> in a vector. These structures reference other ones by indices (instead of pointers), to conserve memory and make serialization easier. To follow these indices, I created a class <code>DataView</code>, which provides a comfortable interface for it. It looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nstruct Data\n{\n    int id_next;\n    int id_prev;\n    int value;\n};\n\nclass Foo;\n\nclass DataView\n{\n    Foo * foo;\n    int index;\npublic:\n    DataView( Foo * foo_, int index_ )\n        : foo( foo_ ), index( index_ )\n    {\n    }\n    DataView next() const;\n    DataView prev() const;\n    int value() const;\n    int &amp; value();\n    int id() const\n    {\n        return index;\n    }\n};\n\nclass Foo\n{\n    std::vector&lt;Data&gt; data;\npublic:\n    friend class DataView;\n\n    DataView dataview( int index )\n    {\n        return DataView( this, index );\n    }\n\n    Foo()\n    {\n        data.resize( 5 );\n        for ( int i = 0; i &lt; (int)data.size(); i++ )\n        {\n            data[i].id_next = (i + 1) % data.size();\n            data[i].id_prev = (i + 4) % data.size();\n            data[i].value = i * i;\n        }\n    }\n\n    void write_cycle( int start_index ) // const\n    {\n        DataView seek = dataview( start_index );\n        do\n        {\n            std::cout &lt;&lt; \"index \" &lt;&lt; seek.id() &lt;&lt; \" value \" &lt;&lt; seek.value() &lt;&lt; std::endl;\n            seek = seek.next();\n        } while ( seek.id() != start_index );\n    }\n};\n\nDataView DataView::next() const\n{\n    return DataView( foo, foo-&gt;data[index].id_next );\n}\nDataView DataView::prev() const\n{\n    return DataView( foo, foo-&gt;data[index].id_prev );\n}\nint DataView::value() const\n{\n    return foo-&gt;data[index].value;\n}\nint &amp; DataView::value()\n{\n    return foo-&gt;data[index].value;\n}\n\nint main()\n{\n    Foo foo;\n    foo.write_cycle( 3 );\n    foo.dataview( 2 ).value() = 11;\n    foo.write_cycle( 3 );\n    return 0;\n}\n</code></pre>\n\n<p>The problem arises if I have to differentiate between const and non-const variations of <code>dataview</code> method. In fact, <code>write_cycle</code> should be const, as it doesn't change anything. However, I get compiler error if I uncomment <code>const</code> qualifier.</p>\n\n<p>error: passing \u2018const Foo\u2019 as \u2018this\u2019 argument discards qualifiers [-fpermissive]</p>\n\n<p>How to write <code>DataView</code> containing const or non-const <code>foo</code> pointer, depending on whether its constructor was called with const or non-const pointer?</p>\n"}, {"tags": ["c++", "opengl", "graphics", "3d", "textures"], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 13, "last_activity_date": 1546453079, "last_edit_date": 1546453079, "creation_date": 1515621273, "answer_id": 48196727, "question_id": 48196668, "link": "https://stackoverflow.com/questions/48196668/glteximage2d-target-is-not-valid/48196727#48196727", "title": "glTexImage2D &#39;target is not valid&#39;", "body": "<p>The fist parameter of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml\" rel=\"nofollow noreferrer\"><code>glTexImage2D</code></a> is the <code>target</code>, which must be <code>GL_TEXTURE_2D</code>, <code>GL_PROXY_TEXTURE_2D</code>, <code>GL_TEXTURE_1D_ARRAY</code> ...</p>\n\n<p>Change your code to:</p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, format, width, height, 0, format, GL_UNSIGNED_BYTE, data);\n</code></pre>\n\n<p>Note <code>glTexImage2D</code> specifies the two-dimensional texture for texture object that is bound to the current <a href=\"https://www.khronos.org/opengl/wiki/Texture#Texture_image_units\" rel=\"nofollow noreferrer\">Texture unit</a>.</p>\n\n<p><br/>\nSee <a href=\"https://www.khronos.org/registry/OpenGL/specs/gl/glspec46.core.pdf\" rel=\"nofollow noreferrer\">OpenGL 4.6 core profile specification - 8.5. TEXTURE IMAGE SPECIFICATION, page 212</a>:</p>\n\n<blockquote>\n  <p>The command</p>\n\n<pre><code>void TexImage2D( enum target, int level, int internalformat, sizei width, sizei height, int border, enum format, enum type, const void *data );\n</code></pre>\n  \n  <p>is used to specify a two-dimensional texture image. target must be one of <code>TEXTURE_2D</code> for a two-dimensional texture, <code>TEXTURE_1D_ARRAY</code> for a onedimensional array texture, <code>TEXTURE_RECTANGLE</code> for a rectangle texture, or one of the cube map face targets from table ...</p>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 3181489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38b05984a92a879bacc603690219257e?s=128&d=identicon&r=PG", "display_name": "Jack3311", "link": "https://stackoverflow.com/users/3181489/jack3311"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 48196727, "answer_count": 1, "score": 1, "last_activity_date": 1576950119, "creation_date": 1515621021, "last_edit_date": 1576950119, "question_id": 48196668, "link": "https://stackoverflow.com/questions/48196668/glteximage2d-target-is-not-valid", "title": "glTexImage2D &#39;target is not valid&#39;", "body": "<p>I am writing a game engine, but I'm having a puzzling issue when loading textures.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>//Load to GL\nglGenTextures(1, &amp;glTextureID);\nglBindTexture(GL_TEXTURE_2D, glTextureID);\nglTexImage2D(glTextureID, 0, format, width, height, 0, format, GL_UNSIGNED_BYTE, data);\n</code></pre>\n\n<p>Stepping through with GL debug output enabled shows that the <code>glTexImage2D</code> line gives the error:</p>\n\n<blockquote>\n  <p>Error has been generated. GL error GL_INVALID_ENUM in (null): (ID: 1938861751)  1 is not valid.</p>\n</blockquote>\n\n<p>Where format is dependent on the image being loaded, and is determined using <code>FreeImage</code>. (Breaks with both <code>GL_RGBA</code> and <code>GL_RED</code> for respective image types). <code>width</code>/<code>height</code> is also determined with <code>FreeImage</code>, both values being 512 in the <code>GL_RGBA</code> case. It is my understanding that these values are valid for both format parameters.</p>\n\n<p>The full code using <code>FreeImage</code> is a bit lengthy to include here, and uses multiple threads (I am sure that this code is run on the main thread, and I assert so prior to these lines).</p>\n\n<p>The following also does not work:</p>\n\n<pre><code>glTexImage2D(glTextureID, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, data);\n</code></pre>\n\n<p>I have not been able to find any other people who have had this error. I have researched how <code>GL_INVALID_ENUM</code> can be thrown, but none of the documented ways seem applicable, certainly not with the message I received.</p>\n\n<p>The value of <code>glTextureID</code> is not modified between these lines, remaining at '1'.</p>\n\n<p>The same error is also thrown when trying to load additional textures, with the 'target' being different.</p>\n\n<p>My GL context is correctly initialized, since I am able to use other GL functions, and successfully draw untextured polygons.</p>\n\n<p>What could be causing this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1515620209, "post_id": 48196416, "comment_id": 83373945, "body": "I suspect <code>Q_OBJECT</code> imposes some of those limitations."}, {"owner": {"reputation": 11, "user_id": 5726915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMhrUo325g0/AAAAAAAAAAI/AAAAAAAABm8/LNx-LROu6GY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/5726915/mark"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1515620261, "post_id": 48196416, "comment_id": 83373982, "body": "Do you have some suggestion?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1515620517, "post_id": 48196416, "comment_id": 83374103, "body": "Look at the section &quot;No Copy Constructor or Assignment Operator&quot; at <a href=\"http://doc.qt.io/qt-5/qobject.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qobject.html</a>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5726915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMhrUo325g0/AAAAAAAAAAI/AAAAAAAABm8/LNx-LROu6GY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/5726915/mark"}, "edited": false, "score": 0, "creation_date": 1515620466, "post_id": 48196479, "comment_id": 83374077, "body": "Wel now my programm crased"}, {"owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "reply_to_user": {"reputation": 11, "user_id": 5726915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMhrUo325g0/AAAAAAAAAAI/AAAAAAAABm8/LNx-LROu6GY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/5726915/mark"}, "edited": false, "score": 0, "creation_date": 1515620647, "post_id": 48196479, "comment_id": 83374177, "body": "Well than there are some other errors too within your classes. If it compiles doesn&#39;t mean that it also runs"}, {"owner": {"reputation": 11, "user_id": 5726915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMhrUo325g0/AAAAAAAAAAI/AAAAAAAABm8/LNx-LROu6GY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/5726915/mark"}, "edited": false, "score": 0, "creation_date": 1515621789, "post_id": 48196479, "comment_id": 83374702, "body": "Okay that&#39;s too bad, but I&#39;m very thankful for the tips. Thank you all."}], "tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": false, "score": 1, "last_activity_date": 1515620870, "last_edit_date": 1515620870, "creation_date": 1515620235, "answer_id": 48196479, "question_id": 48196416, "link": "https://stackoverflow.com/questions/48196416/error-extra-qualification-after-error-use-of-deleted-function/48196479#48196479", "title": "error extra qualification after error use of deleted function", "body": "<p>this line in the declaration</p>\n\n<pre><code> HexPolygon&amp; HexPolygon::operator =(const HexPolygon&amp;); // final error\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>   HexPolygon&amp; operator=(const HexPolygon&amp;); \n</code></pre>\n\n<p>Just omit \"HexPolygon::\" in the declaration within HexPolygon class itself.</p>\n\n<p>In the method definition outside the HexPolygon class you would bring HexPolygon:: namespace back:</p>\n\n<pre><code>HexPolygon&amp; HexPolygon::operator =(const HexPolygon&amp;)\n{\n// the implementation \n}\n</code></pre>\n\n<p>I also don't think making that HexPolygon inherit from QObject and QGraphics... is good idea. There are probably some general design issues.\nTry too keep it rather simple and maybe using more composition than inheritance.</p>\n\n<p>Like @R Sahu wrote above: those Q_OBJECT within QGraphicsxxx is very suspicious.</p>\n"}], "owner": {"reputation": 11, "user_id": 5726915, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zMhrUo325g0/AAAAAAAAAAI/AAAAAAAABm8/LNx-LROu6GY/photo.jpg?sz=128", "display_name": "Mark", "link": "https://stackoverflow.com/users/5726915/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1515620870, "creation_date": 1515619946, "question_id": 48196416, "link": "https://stackoverflow.com/questions/48196416/error-extra-qualification-after-error-use-of-deleted-function", "title": "error extra qualification after error use of deleted function", "body": "<p>When implementing a list of hexdirections. I get a couple of errors that says \"use of deleted function ...'. After implementing a deleted function </p>\n\n<pre><code>HexPolygon&amp; HexPolygon::operator =(const HexPolygon&amp;);\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>extra qualification 'HexPolygon::' on member 'operator=' [-fpermissive]\n     HexPolygon&amp; HexPolygon::operator =(const HexPolygon&amp;);\n</code></pre>\n\n<p>Well I don't understand this error and it keeps me going around. Could someone help me?</p>\n\n<p>cpp file:</p>\n\n<pre><code>QList&lt;HexPolygon&gt; HexDirections =\n{\n    //[0]NorthEast         //[1] East             //[2]SouthEast\n    HexPolygon(1, 0, -1),  HexPolygon(1, -1, 0),  HexPolygon(0, -1, 1),\n    //[3]SouthWest         //[4]West              //[5]NorthWest\n    HexPolygon(-1, 0, 1),  HexPolygon(-1, 1, 0),  HexPolygon(0, 1, -1)\n};\n\nHexPolygon::HexPolygon(int _x, int _y, int _z) :\n    cordX(_x), cordY(_y), cordZ(_z)\n{\n    hexPoints &lt;&lt; QPointF(1,0)\n              &lt;&lt; QPointF(1.5,0.25)\n              &lt;&lt; QPointF(1.5,0.75)\n              &lt;&lt; QPointF(1,1)\n              &lt;&lt; QPointF(0.5,0.75)\n              &lt;&lt; QPointF(0.5,0.25);\n}\n\nHexPolygon::HexPolygon(HexPolygon &amp;&amp;)\n{\n\n}\n\nHexPolygon::HexPolygon(const HexPolygon &amp;)\n{\n\n}\n</code></pre>\n\n<p>header file:</p>\n\n<pre><code>class HexPolygon : public QObject, public QGraphicsPolygonItem\n{\n    Q_OBJECT\npublic:\n    explicit HexPolygon(int, int, int);\n    HexPolygon(HexPolygon&amp;&amp;); // error use of deleted funciton\n    HexPolygon(const HexPolygon&amp;); // error use of deleted function\n    HexPolygon&amp; HexPolygon::operator =(const HexPolygon&amp;); // final error\n}\n</code></pre>\n"}, {"tags": ["c++", "csv"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1515619877, "post_id": 48196382, "comment_id": 83373792, "body": "The last field ends with <code>\\n</code> not <code>\\t</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1515619985, "post_id": 48196382, "comment_id": 83373840, "body": "Apart from anything else, that data file is not CSV."}, {"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 0, "creation_date": 1515620003, "post_id": 48196382, "comment_id": 83373847, "body": "Perhaps: <code>getline(ip,fund,&#39;\\t&#39;);</code> --&gt; <code>getline(ip,fund,&#39;\\n&#39;);</code>"}, {"owner": {"reputation": 4206, "user_id": 724088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/996fd114365a7ce3bd11ad695eb66d75?s=128&d=identicon&r=PG", "display_name": "pseudocoder", "link": "https://stackoverflow.com/users/724088/pseudocoder"}, "edited": false, "score": 0, "creation_date": 1515620118, "post_id": 48196382, "comment_id": 83373902, "body": "This is not a duplicate; OP is not writing a CSV parser; instead they are writing a custom text file parser for this particular format."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1515620223, "post_id": 48196382, "comment_id": 83373959, "body": "Also, for why not to use <code>while(ip.good()){</code> see <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 4206, "user_id": 724088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/996fd114365a7ce3bd11ad695eb66d75?s=128&d=identicon&r=PG", "display_name": "pseudocoder", "link": "https://stackoverflow.com/users/724088/pseudocoder"}, "edited": false, "score": 0, "creation_date": 1515620241, "post_id": 48196382, "comment_id": 83373965, "body": "Indeed @NeilButterworth it appears to be tab delimited.  Maybe it&#39;s appropriate to edit the question title?"}, {"owner": {"reputation": 4206, "user_id": 724088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/996fd114365a7ce3bd11ad695eb66d75?s=128&d=identicon&r=PG", "display_name": "pseudocoder", "link": "https://stackoverflow.com/users/724088/pseudocoder"}, "edited": false, "score": 0, "creation_date": 1515620298, "post_id": 48196382, "comment_id": 83373996, "body": "Not sure we want to go down the road of suggesting random things that could be done to improve this project."}], "answers": [{"comments": [{"owner": {"reputation": 1337, "user_id": 5729613, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/9XuOT.jpg?s=128&g=1", "display_name": "I Like", "link": "https://stackoverflow.com/users/5729613/i-like"}, "edited": false, "score": 0, "creation_date": 1515620757, "post_id": 48196432, "comment_id": 83374232, "body": "Thanks. Your approach worked for the first row, but the rest of the rows lost all their formatting and were printed as is: eg <code>z,97991,POLICE PROPERTY AND EVIDENCE UNCLAIMED,12&#47;1&#47;16,$27.00 ,PPEU-031C-149,,3689905552,Enterprise</code>"}, {"owner": {"reputation": 4206, "user_id": 724088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/996fd114365a7ce3bd11ad695eb66d75?s=128&d=identicon&r=PG", "display_name": "pseudocoder", "link": "https://stackoverflow.com/users/724088/pseudocoder"}, "reply_to_user": {"reputation": 1337, "user_id": 5729613, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/9XuOT.jpg?s=128&g=1", "display_name": "I Like", "link": "https://stackoverflow.com/users/5729613/i-like"}, "edited": false, "score": 0, "creation_date": 1516396168, "post_id": 48196432, "comment_id": 83685465, "body": "Sounds like a new problem and a new question.  Considering the downvotes, I suggest you try a new question and don&#39;t say you want to &quot;parse CSV&quot; since you are parsing a tab delimited text file in a specifically formatted way."}], "tags": [], "owner": {"reputation": 4206, "user_id": 724088, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/996fd114365a7ce3bd11ad695eb66d75?s=128&d=identicon&r=PG", "display_name": "pseudocoder", "link": "https://stackoverflow.com/users/724088/pseudocoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1515620042, "creation_date": 1515620042, "answer_id": 48196432, "question_id": 48196382, "link": "https://stackoverflow.com/questions/48196382/csv-file-how-to-break-lines/48196432#48196432", "title": "CSV file how to break lines?", "body": "<p>I think the fix is:</p>\n\n<p><code>getline(ip,fund,'\\n');</code></p>\n\n<p>You are reading the Fund field until it reaches the next tab character (\\t), when in actuality you want to read to the next newline.</p>\n"}], "owner": {"reputation": 1337, "user_id": 5729613, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/9XuOT.jpg?s=128&g=1", "display_name": "I Like", "link": "https://stackoverflow.com/users/5729613/i-like"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "closed_date": 1515621419, "answer_count": 1, "score": -3, "last_activity_date": 1515620042, "creation_date": 1515619766, "question_id": 48196382, "link": "https://stackoverflow.com/questions/48196382/csv-file-how-to-break-lines", "closed_reason": "Duplicate", "title": "CSV file how to break lines?", "body": "<p>I've been struggling with parsing a csv file so that every new line is read as a new row. Unfortunately, I couldn't find an answer in the SO forums that addressed my problem. I opened the csv file with textEdit and saw this: </p>\n\n<p><a href=\"https://i.stack.imgur.com/k484Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k484Y.png\" alt=\"enter image description here\"></a></p>\n\n<p>I think the problem is how to tell the compiler when to break off a new line. For example, right now, it will read z (row 2) as being on the previous row. Please take a look at my code and output below (i am using Xcode v 9.2).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;vector&gt;\n#include &lt;fstream&gt;\nusing namespace std;\n\nint main()\n{\n    ifstream ip(\"ebid2016.csv\");\n    if (!ip.is_open()) {\n        cout &lt;&lt; \"can't open file\" &lt;&lt; '\\n';\n    }\n    string title;\n    string articleId;\n    string department;\n    string closeDate;\n    string bid;\n    string inventoryId;\n    string vehicleId;\n    string receiptNum;\n    string fund;\n    string nothing;\n\n\n    while(ip.good()){\n\n        getline(ip,title,'\\t');\n        getline(ip,articleId,'\\t');\n        getline(ip,department,'\\t');\n        getline(ip,closeDate,'\\t');\n        getline(ip,bid,'\\t');\n        getline(ip,inventoryId,'\\t');\n        getline(ip,vehicleId,'\\t');\n        getline(ip,receiptNum,'\\t');\n        getline(ip,fund,'\\t');\n\n        cout &lt;&lt; \"Article Title:\" &lt;&lt; title &lt;&lt; '\\n';\n        cout &lt;&lt; \"Article ID:\" &lt;&lt; articleId &lt;&lt; '\\n';\n        cout &lt;&lt; \"Department:\" &lt;&lt; department &lt;&lt; '\\n';\n        cout &lt;&lt; \"Close Date:\" &lt;&lt; closeDate &lt;&lt; '\\n';\n        cout &lt;&lt; \"Bid:\" &lt;&lt; bid &lt;&lt; '\\n';\n        cout &lt;&lt; \"Inventory ID:\" &lt;&lt; inventoryId &lt;&lt; '\\n';\n        cout &lt;&lt; \"Vehicle ID:\" &lt;&lt; vehicleId &lt;&lt; '\\n';\n        cout &lt;&lt; \"Receipt Number:\" &lt;&lt; receiptNum &lt;&lt; '\\n';\n        cout &lt;&lt; \"Fund:\" &lt;&lt; fund &lt;&lt; '\\n';\n\n        cout &lt;&lt; \"------------------\" &lt;&lt; '\\n';\n    }\n    ip.close();\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>Article Title:ArticleTitle\nArticle ID:ArticleID\nDepartment:Department \nClose Date:CloseDate \nBid:WinningBid \nInventory ID:InventoryID\nVehicle ID:VehicleID\nReceipt Number:ReceiptNumber \nFund:Fund\nz &lt;------------why does z show up here?\n------------------\nArticle Title:97991\nArticle ID:POLICE PROPERTY AND EVIDENCE UNCLAIMED\nDepartment:12/1/16\nClose Date:$27.00 \nBid:PPEU-031C-149\nInventory ID:\nVehicle ID:3689905552\nReceipt Number:Enterprise\nTable\nFund:97990\n------------------ etc.\n</code></pre>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515619803, "post_id": 48196355, "comment_id": 83373760, "body": "Show us the  calls as well as the definitions please."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515619897, "post_id": 48196355, "comment_id": 83373804, "body": "Note that C++ (currently) does not have the equivalent of extension functions.  You have to call as <code>FindIf(mylist, 1, 3, mypredicate)</code>"}, {"owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "edited": false, "score": 0, "creation_date": 1515620045, "post_id": 48196355, "comment_id": 83373864, "body": "I think there are some other errors  too: for ex. in int index = range.IndexOf(list.Front(method));  the variable name should be probably List and not list."}, {"owner": {"reputation": 41, "user_id": 8909841, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5c6b7f419f00aa02f95bcf648c56cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aarifboy", "link": "https://stackoverflow.com/users/8909841/aarifboy"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515630941, "post_id": 48196355, "comment_id": 83377650, "body": "@MartinBonner yes I am calling like you said which shows error mentioned"}, {"owner": {"reputation": 41, "user_id": 8909841, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5c6b7f419f00aa02f95bcf648c56cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aarifboy", "link": "https://stackoverflow.com/users/8909841/aarifboy"}, "reply_to_user": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "edited": false, "score": 0, "creation_date": 1515631681, "post_id": 48196355, "comment_id": 83377840, "body": "@StPiere edited and corrected that"}], "answers": [{"tags": [], "owner": {"reputation": 10571, "user_id": 122687, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9b4e0447e8d049ba853fe368765f6f76?s=128&d=identicon&r=PG", "display_name": "Stefan Monov", "link": "https://stackoverflow.com/users/122687/stefan-monov"}, "is_accepted": false, "score": 1, "last_activity_date": 1515619953, "creation_date": 1515619953, "answer_id": 48196417, "question_id": 48196355, "link": "https://stackoverflow.com/questions/48196355/how-to-create-and-use-own-c-functions-instead-of-library-built-in-ones/48196417#48196417", "title": "how to create and use own c++ functions instead of library built in ones", "body": "<p>There are 2 primary ways.</p>\n\n<p>The traditional way is to call your functions (like you have defined them) like nonmember functions.</p>\n\n<p>The avant-garde way introduced by boost is to overload an operator such as <code>|</code> for syntax such as <code>myList | FindIf(...) | Unique() | Reversed()</code>. You can see how this was done in the <a href=\"http://www.boost.org/doc/libs/1_65_1/libs/range/doc/html/range/reference/adaptors/introduction.html\" rel=\"nofollow noreferrer\">Boost.Range</a> library.</p>\n"}], "owner": {"reputation": 41, "user_id": 8909841, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5c6b7f419f00aa02f95bcf648c56cb2?s=128&d=identicon&r=PG&f=1", "display_name": "aarifboy", "link": "https://stackoverflow.com/users/8909841/aarifboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1515620022, "answer_count": 1, "score": 0, "last_activity_date": 1517793211, "creation_date": 1515619673, "last_edit_date": 1517793211, "question_id": 48196355, "link": "https://stackoverflow.com/questions/48196355/how-to-create-and-use-own-c-functions-instead-of-library-built-in-ones", "closed_reason": "Duplicate", "title": "how to create and use own c++ functions instead of library built in ones", "body": "<p>I have a csharp code which defines two functions Splice and FindIf for lists (already available in C++ for lists). I am trying create both functions for c++ to use without c++ built-in functions. Both csharp and c++ functions are given below</p>\n\n<pre><code>static class ListExtensions\n{\n\n    public static void Splice&lt;T&gt;(this List&lt;T&gt; list, int insertAtIndex, List&lt;T&gt; items,\n        int first, int last)\n    {\n        if (items == null) return;\n        insertAtIndex = Math.Min(list.Count, Math.Max(0, insertAtIndex));\n        first = Math.Min(items.Count - 1, Math.Max(0, first));\n        last = Math.Min(items.Count, Math.Max(1, last));\n        if (first &gt;= last) return;\n\n        list.InsertRange(insertAtIndex, items.GetRange(first, last - first));\n        items.RemoveRange(first, last - first);\n    }\n\n    public static int FindIf&lt;T&gt;(this List&lt;T&gt; list, int start, int end, Func&lt;T, bool&gt; method)\n    {\n        if (method == null) return end;\n        if (!list.Any(method)) return end;\n        start = Math.Min(list.Count - 1, Math.Max(0, start));\n        end = Math.Min(list.Count, Math.Max(1, end));\n        if (start &gt;= end) return end;\n\n        List&lt;T&gt; range = list.GetRange(start, end - start);\n        int index = range.IndexOf(list.First(method));\n        if (index &lt; start) return end;\n        return index;\n    }\n}\n</code></pre>\n\n<p>Csharp functions are called like below</p>\n\n<pre><code>static bool Move_tokens_to_statement(List&lt;Evl_token&gt; statementTokens, List&lt;Evl_token&gt; tokens)\n    {\n        Debug.Assert(tokens != null);\n\n        int next_sc = tokens.FindIf(0, tokens.Count, TokenIsSemicolon);\n\n        if (next_sc == tokens.Count)\n        {\n            Console.WriteLine(\"Looked for ';' but reached the end of the file.\");\n            return false;\n        }\n\n        ++next_sc;\n        statementTokens.Splice(0, tokens, 0, next_sc);\n        return true;\n    }\n</code></pre>\n\n<p>C++ code I have written to date is given below</p>\n\n<pre><code>template&lt;typename T&gt;\nvoid Splice(std::list&lt;T&gt; &amp;List, int insertAtIndex, std::list&lt;T&gt; items,\nint first, int last)\n{\n    if (items == null) return;\n    insertAtIndex = std::min(List.size(), (int)std::max(0, insertAtIndex));\n    first = std::min(items.size() - 1, std::max(0, first));\n    last = std::min(items.size(), std::max(1, last));\n    if (first &gt;= last) return;\n    std::copy(first, last-first, std::back_inserter(items));\n    List.insert(insertAtIndex, items);\n    items.erase(first, last - first);\n};\n\ntemplate&lt;typename T&gt;\nint FindIf(std::list&lt;T&gt; &amp;List, int start, int end, bool(*method)(T))\n{\n    if (method == null) return end;\n    if (!(std::any_of(List.begin(),List.end(),return method))) return end;\n    start = std::min(List.size() - 1, std::max(0, start));;\n    end = std::min(List.size(), std::max(1, end));\n    if (start &gt;= end) return end;\n    list&lt;T&gt; range = std::copy(start, end - start, std::back_inserter(List));    \n    int index = range.IndexOf(List.Front(method));\n    if (index &lt; start) return end;\n    return index;\n};\n</code></pre>\n\n<p>Errors which I see for both c++ defined Splice and FindIf functions are as below</p>\n\n<p>FindIf called on list has error \"no instance of FindIf matches the argument list. argument types are ....\"</p>\n\n<p>Splice called on list has error \"Class std::list .... has no member Splice\"</p>\n\n<p>What is best way to define own functions for my code in c++ and what will be solution?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1922, "user_id": 8868108, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNHxq.png?s=128&g=1", "display_name": "Green", "link": "https://stackoverflow.com/users/8868108/green"}, "edited": false, "score": 5, "creation_date": 1515618392, "post_id": 48196038, "comment_id": 83373139, "body": "Why don&#39;t you just debug it?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515619076, "post_id": 48196038, "comment_id": 83373460, "body": "Remove <code>unsigned</code> and watch everything magically work :-) It&#39;s because you&#39;re making <code>M</code> go past 0"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6465283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1d4a2e62c35d34bc1ab497ba3935bd?s=128&d=identicon&r=PG&f=1", "display_name": "user6465283", "link": "https://stackoverflow.com/users/6465283/user6465283"}, "edited": false, "score": 0, "creation_date": 1515620623, "post_id": 48196339, "comment_id": 83374163, "body": "you&#39;re right it gives the appropriate solution when i remove &#39;unsigned&#39; but i dont understand why (M - v[0].second) matters , i mean M is still &gt;=0 and the third output should be M=0 ! so it compares 0 to 1 and exits"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13, "user_id": 6465283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1d4a2e62c35d34bc1ab497ba3935bd?s=128&d=identicon&r=PG&f=1", "display_name": "user6465283", "link": "https://stackoverflow.com/users/6465283/user6465283"}, "edited": false, "score": 0, "creation_date": 1515621534, "post_id": 48196339, "comment_id": 83374583, "body": "@user6465283, that&#39;s when stepping through a debugger might be useful."}, {"owner": {"reputation": 13, "user_id": 6465283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1d4a2e62c35d34bc1ab497ba3935bd?s=128&d=identicon&r=PG&f=1", "display_name": "user6465283", "link": "https://stackoverflow.com/users/6465283/user6465283"}, "edited": false, "score": 0, "creation_date": 1515622552, "post_id": 48196339, "comment_id": 83374987, "body": "well , when i debug it just shows that M takes 18446744073709551613 instead of 0 and what i asked is why it takes such a value because an unsigned can take 0 ."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 13, "user_id": 6465283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1d4a2e62c35d34bc1ab497ba3935bd?s=128&d=identicon&r=PG&f=1", "display_name": "user6465283", "link": "https://stackoverflow.com/users/6465283/user6465283"}, "edited": false, "score": 0, "creation_date": 1515622683, "post_id": 48196339, "comment_id": 83375051, "body": "Add a line to print <code>M</code> and <code>v[0].second</code> just before the line <code>M-=v[0].second;</code>. That will be helpful."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 0, "last_activity_date": 1515619615, "creation_date": 1515619615, "answer_id": 48196339, "question_id": 48196038, "link": "https://stackoverflow.com/questions/48196038/infinite-loop-c-with-while-and-vector-of-pairs/48196339#48196339", "title": "infinite loop c++ with while and vector of pairs", "body": "<p>One way to track down the problem without stepping through the debugger is to write values of the key data in important lines.</p>\n\n<p>Also, since you know that you have an infinite loop, add code to limit the number of times the loop gets executed.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\n\n//ADDED: Function to print the contents of the vector.\nvoid print(vector &lt;pair&lt;unsigned long long, unsigned long long &gt; &gt; const&amp; v)\n{\n   for (auto const&amp; p : v )\n   {\n      cout &lt;&lt; p.first &lt;&lt; \" \" &lt;&lt; p.second &lt;&lt; \" \";\n   }\n   cout &lt;&lt; endl;\n}\n\nint main()\n{\n   unsigned long long T,N , M ,p , m ;\n   vector &lt;pair&lt;unsigned long long, unsigned long long &gt; &gt; v;\n   cin&gt;&gt;T ;\n   for  (unsigned long long i=0 ; i&lt;T;i++)\n   {\n      v={};\n      cin&gt;&gt;N&gt;&gt;M ;\n      for (unsigned long long j=0 ; j&lt; N ; j++)\n      {\n         cin&gt;&gt;p&gt;&gt;m ;\n         v.push_back({p,m});\n      }\n      sort(v.begin(),v.end());\n\n      //ADDED: Limit the number iterations of the loop.\n      int count = 0;\n      while (M&gt;=v[0].second &amp;&amp; count &lt; 20)\n      {\n         //ADDED: Print the key pieces that control the loop.\n         cout &lt;&lt; \"M: \" &lt;&lt; M &lt;&lt; \" v[0].second: \" &lt;&lt; v[0].second &lt;&lt; endl;\n\n         while (v[0].first&lt;=v[1].first)\n         {\n            v[0].first+=1 ;\n            M-=v[0].second;\n\n         }\n         sort(v.begin(),v.end());\n\n         //ADDED: Print the vector\n         print(v);\n         ++count;\n      }\n   }\n   cout&lt;&lt;\"ans\"&lt;&lt;v[0].first ;\n}\n</code></pre>\n\n<p>Here's the output given your input:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>M: 7 v[0].second: 2\n2 3 3 1 3 2 \nM: 3 v[0].second: 3\n3 1 3 2 4 3 \nM: 18446744073709551613 v[0].second: 1\n3 2 4 1 4 3 \nM: 18446744073709551612 v[0].second: 2\n4 1 4 3 5 2 \nM: 18446744073709551608 v[0].second: 1\n4 3 5 1 5 2 \nM: 18446744073709551607 v[0].second: 3\n5 1 5 2 6 3 \nM: 18446744073709551601 v[0].second: 1\n5 2 6 1 6 3 \nM: 18446744073709551600 v[0].second: 2\n6 1 6 3 7 2 \nM: 18446744073709551596 v[0].second: 1\n6 3 7 1 7 2 \nM: 18446744073709551595 v[0].second: 3\n7 1 7 2 8 3 \nM: 18446744073709551589 v[0].second: 1\n7 2 8 1 8 3 \nM: 18446744073709551588 v[0].second: 2\n8 1 8 3 9 2 \nM: 18446744073709551584 v[0].second: 1\n8 3 9 1 9 2 \nM: 18446744073709551583 v[0].second: 3\n9 1 9 2 10 3 \nM: 18446744073709551577 v[0].second: 1\n9 2 10 1 10 3 \nM: 18446744073709551576 v[0].second: 2\n10 1 10 3 11 2 \nM: 18446744073709551572 v[0].second: 1\n10 3 11 1 11 2 \nM: 18446744073709551571 v[0].second: 3\n11 1 11 2 12 3 \nM: 18446744073709551565 v[0].second: 1\n11 2 12 1 12 3 \nM: 18446744073709551564 v[0].second: 2\n12 1 12 3 13 2 \nans12\n</code></pre>\n\n<p>As you can see, the value of M becomes very large. That happens when <code>(M -\n v[0].second)</code> is a negative value.</p>\n\n<p>You can fix it by making <code>M</code> a signed type. Whether that is the appropriate solution for you is difficult to tell from your post. I trust that you will be able to resolve the issue one way or another.</p>\n"}], "owner": {"reputation": 13, "user_id": 6465283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1d4a2e62c35d34bc1ab497ba3935bd?s=128&d=identicon&r=PG&f=1", "display_name": "user6465283", "link": "https://stackoverflow.com/users/6465283/user6465283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1516728367, "accepted_answer_id": 48196339, "answer_count": 1, "score": -6, "last_activity_date": 1515619615, "creation_date": 1515618209, "question_id": 48196038, "link": "https://stackoverflow.com/questions/48196038/infinite-loop-c-with-while-and-vector-of-pairs", "closed_reason": "Not suitable for this site", "title": "infinite loop c++ with while and vector of pairs", "body": "<p>this program gives infinit loop when i try the input \n1\n3 7\n1 2\n2 3\n3 1\ni run it manually and it seemed to me that it works , i can't understand why the while gives infinite loop (at least in this case of input)</p>\n\n<pre><code>    #include &lt;iostream&gt;\n\n    #include &lt;vector&gt;\n\n#include &lt;algorithm&gt;\nusing namespace std;\n\nint main()\n{\n    unsigned long long T,N , M ,p , m ;\n    vector &lt;pair&lt;unsigned long long, unsigned long long &gt; &gt; v;\n    cin&gt;&gt;T ;\n    for  (unsigned long long i=0 ; i&lt;T;i++)\n    {\n        v={};\n        cin&gt;&gt;N&gt;&gt;M ;\n        for (unsigned long long j=0 ; j&lt; N ; j++)\n        {\n            cin&gt;&gt;p&gt;&gt;m ;\n            v.push_back({p,m});\n\n        }\n        sort(v.begin(),v.end());\n\n        while (M&gt;=v[0].second)\n        {\n            while (v[0].first&lt;=v[1].first)\n            {\n                v[0].first+=1 ;\n                M-=v[0].second;\n\n            }\n            sort(v.begin(),v.end());\n\n        }\n\n\n    }\n cout&lt;&lt;\"ans\"&lt;&lt;v[0].first ;\n}\n</code></pre>\n\n<p>can you please tell me what's wrong ??</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1515618243, "post_id": 48196003, "comment_id": 83373057, "body": "Note that (3) takes more than just temporaries. Those are universal references; they can accept both lvalue and rvalue references (independently of one another)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1515618245, "post_id": 48196003, "comment_id": 83373058, "body": "Duplicate? <a href=\"https://stackoverflow.com/questions/39552272/is-there-a-difference-between-universal-references-and-forwarding-references\" title=\"is there a difference between universal references and forwarding references\">stackoverflow.com/questions/39552272/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": true, "score": 1, "last_activity_date": 1515624093, "last_edit_date": 1515624093, "creation_date": 1515618550, "answer_id": 48196116, "question_id": 48196003, "link": "https://stackoverflow.com/questions/48196003/which-constructor-is-invoked-by-stdpair-when-given-these-value-categories/48196116#48196116", "title": "Which constructor is invoked by std::pair when given these value categories?", "body": "<p>You are calling the 3.th constructor</p>\n\n<pre><code>template&lt; class U1, class U2 &gt;\npair( U1&amp;&amp; x, U2&amp;&amp; y );\n</code></pre>\n\n<p>U&amp;&amp; is forwarding reference and can bind to both: lvalues and rvalues.</p>\n\n<p><code>my_str_ref</code> is the lvalue</p>\n\n<p><code>std::move(my_smartp)</code> is the rvalue.</p>\n\n<p>The U1 is deduced to std::string&amp;.\nx is a lvalue reference:  std::string&amp; - so here the copy construct get's called.</p>\n\n<p>The U2 is deduced to <code>std::unique_ptr&lt;const std::string&gt;.</code> y is a rvalue ref: <code>std::unqiue_ptr&lt;const std::string&gt;&amp;&amp;</code>.</p>\n\n<p>So pair.first gets copy-constructed from my_str_ref, pair.second gets move constrycted from my_smarp</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8585867"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 48196116, "answer_count": 1, "score": 0, "last_activity_date": 1515624093, "creation_date": 1515618096, "question_id": 48196003, "link": "https://stackoverflow.com/questions/48196003/which-constructor-is-invoked-by-stdpair-when-given-these-value-categories", "title": "Which constructor is invoked by std::pair when given these value categories?", "body": "<p>I am looking over the <a href=\"http://en.cppreference.com/w/cpp/utility/pair/pair\" rel=\"nofollow noreferrer\"><code>std::pair</code> constructors</a> and noticed that when I pass in the following example, the move on the <code>std::unique_ptr</code> works but the <code>std::string</code> does not get moved.</p>\n\n<pre><code>std::string my_str = std::string(\"Hello World!\");\nauto my_smartp = std::make_unique&lt;const std::string&gt;();\n\nconst std::string &amp;my_str_ref = my_str;\n\n// my_str_ref is fine, no move\n// my_smartp is fine, no move\n\nauto pair = std::pair&lt;std::string, std::unique_ptr&lt;const std::string&gt;&gt;(my_str_ref, std::move(my_smartp));\n\n// my_str_ref is fine and was not moved\n// my_smartp is has been moved to the std::pair\n</code></pre>\n\n<p>This makes no sense to me as the only constructor I can see valid for this example is <code>(2)</code>, passing in two const references which, as far as I know, shouldn't trigger any move. Either they are both passed as temporary <code>U1&amp;&amp;</code> and <code>U2&amp;&amp;</code> or they are both passed as const references <code>const T1&amp;</code> and <code>const T2&amp;</code>.</p>\n\n<p>I am using the latest clang if the implementation makes any difference.</p>\n"}, {"tags": ["c++", "sockets", "tcp"], "answers": [{"comments": [{"owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "edited": false, "score": 0, "creation_date": 1515617903, "post_id": 48195879, "comment_id": 83372886, "body": "Thanks, that solved my problem perfectly! That also makes some more sense, thank you for your pointers and tips - very helpful."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1515617558, "creation_date": 1515617558, "answer_id": 48195879, "question_id": 48195750, "link": "https://stackoverflow.com/questions/48195750/tcp-c-no-matching-function-for-call-to/48195879#48195879", "title": "TCP - C++ - No matching function for call to", "body": "<blockquote>\n  <p>inet_pton(AF_INET, INADDR_ANY, &amp;saiServerAddress.sin_addr);</p>\n</blockquote>\n\n<p>You can't pass <code>INADDR_ANY</code> to <code>inet_pton()</code> like that.  It is expecting a <code>char*</code> string instead, eg:</p>\n\n<pre><code>inet_pton(AF_INET, \"an IP address here\", &amp;saiServerAddress.sin_addr);\n</code></pre>\n\n<p>And BTW, you can't <code>connect()</code> a TCP socket to <code>INADDR_ANY</code> (0.0.0.0) anyway.  You need to specify the actual IP address of the listening server.</p>\n\n<blockquote>\n  <p>connect(iSocket, (struct saiAddress *)&amp;saiServerAddress, sizeof(saiServerAddress));</p>\n</blockquote>\n\n<p>You can't pass a <code>saiAddress*</code> to <code>connect()</code>, it is expecting a <code>sockaddr*</code> instead, eg:</p>\n\n<pre><code>connect(iSocket, (struct sockaddr *)&amp;saiServerAddress, sizeof(saiServerAddress));\n</code></pre>\n\n<p>Make sure <code>saiServerAddress</code> is declared as <code>sockaddr_in</code> or <code>sockaddr_storage</code> (or at least make sure that <code>saiAddress</code> is binary-compatible with them).</p>\n\n<blockquote>\n  <p>send(iSocket, sVal, strlen(sVal.c_str()), 0);</p>\n</blockquote>\n\n<p>You can't pass a <code>std::string</code> to <code>send()</code> like that. It is expecting a <code>void*</code> instead (and you shouldn't be using <code>strlen(sVal.c_str())</code>, use <code>sVal.size()</code> instead), eg:</p>\n\n<pre><code>send(iSocket, sVal.c_str(), sVal.size(), 0);\n</code></pre>\n"}], "owner": {"reputation": 3788, "user_id": 7112888, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-P-jq3DoZPqI/AAAAAAAAAAI/AAAAAAAAS3Y/jpjvZZxoVQY/photo.jpg?sz=128", "display_name": "zoecarver", "link": "https://stackoverflow.com/users/7112888/zoecarver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1277, "favorite_count": 0, "accepted_answer_id": 48195879, "answer_count": 1, "score": 1, "last_activity_date": 1515617799, "creation_date": 1515617031, "last_edit_date": 1515617799, "question_id": 48195750, "link": "https://stackoverflow.com/questions/48195750/tcp-c-no-matching-function-for-call-to", "title": "TCP - C++ - No matching function for call to", "body": "<p>I am trying to make a basic program that transfer data via TCP.</p>\n\n<p>Here is the client file:</p>\n\n<h1>Header</h1>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/select.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string&gt;\n#include &lt;arpa/inet.h&gt;\n</code></pre>\n\n<h1>Code</h1>\n\n<pre><code>#include \"socketclient.hpp\"\n#include &lt;arpa/inet.h&gt;\n\nsocketclient::socketclient () {\n    iSocket = socket(AF_INET, SOCK_STREAM, 0);\n\n    memset(&amp;saiAddress, '0', sizeof(saiAddress));\n\n    saiAddress.sin_family = AF_INET;\n    saiAddress.sin_port = htons(3000);\n    saiAddress.sin_addr.s_addr = INADDR_ANY;\n\n    inet_pton(AF_INET, INADDR_ANY, &amp;saiServerAddress.sin_addr);\n\n    connect(iSocket, (struct saiAddress *)&amp;saiServerAddress, sizeof(saiServerAddress));\n\n    send(iSocket, sVal, strlen(sVal.c_str()), 0);\n}\n</code></pre>\n\n<p>However, for some reason the compiler says <code>No matching function</code> for <code>inet_pton</code>, <code>connect</code>, and <code>send</code>.</p>\n"}, {"tags": ["c++", "class", "oop", "vector", "destructor"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 5, "creation_date": 1515617017, "post_id": 48195732, "comment_id": 83372432, "body": "Use a vector of <code>std::unique_ptr</code> it will do the job for you."}, {"owner": {"reputation": 18433, "user_id": 826983, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/8fc679891e6c3cf3aec3b353f3fb9bd6?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Falk", "link": "https://stackoverflow.com/users/826983/stefan-falk"}, "edited": false, "score": 0, "creation_date": 1515617061, "post_id": 48195732, "comment_id": 83372449, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4298314/correct-allocate-and-free-memory-for-arrays-in-c\">Correct allocate and free memory for arrays in C++</a>"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1515617065, "post_id": 48195732, "comment_id": 83372454, "body": "Do you have to erase the elements of a <code>vector&lt;int&gt;</code>?"}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1515617133, "post_id": 48195732, "comment_id": 83372487, "body": "If you are dealing with compiler without C++11 support then you can check <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/ptr_container/doc/ptr_vector.html\" rel=\"nofollow noreferrer\"><code>::boost::ptr_vector</code></a>"}, {"owner": {"reputation": 74, "user_id": 5634037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3de77de5b2351f340adaf4bf0fa40ac?s=128&d=identicon&r=PG&f=1", "display_name": "Kfirka", "link": "https://stackoverflow.com/users/5634037/kfirka"}, "edited": false, "score": 0, "creation_date": 1515617351, "post_id": 48195732, "comment_id": 83372606, "body": "i think that the first approach will be better because you do not need to erase the elements in the vector, the destructor of the vector will do it for you"}, {"owner": {"reputation": 59, "user_id": 8049454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3296127daf7f6bc67d802997120f6b54?s=128&d=identicon&r=PG&f=1", "display_name": "Ayaka", "link": "https://stackoverflow.com/users/8049454/ayaka"}, "edited": false, "score": 0, "creation_date": 1515617441, "post_id": 48195732, "comment_id": 83372660, "body": "I know that I could use unique_ptr but I&#39;d like to ask about new and delete. No I don&#39;t have ot erase the elements of vector but I have read that I should use erase after deleting"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 4, "last_activity_date": 1515617732, "last_edit_date": 1515617732, "creation_date": 1515617412, "answer_id": 48195848, "question_id": 48195732, "link": "https://stackoverflow.com/questions/48195732/how-to-implement-class-destructor-with-vector-of-pointers-c/48195848#48195848", "title": "How to implement class destructor with vector of pointers C++", "body": "<blockquote>\n  <p>If I have class and vector of pointers in class how should I write destructor to properly free memory? Is it correct?</p>\n</blockquote>\n\n<p>It depends.</p>\n\n<p>Do the pointers point to objects that were allocated with <code>new</code> and is this class the owner of those dynamic objects (i.e. is this class responsible for their destruction)? If not, then it's not correct.</p>\n\n<blockquote>\n  <p>Or should I also erase elements from vector?</p>\n</blockquote>\n\n<p>Your example for erasing elements of the vector is wrong. It will skip half of the elements and thus will not call delete all pointers. After first iteration, first element will have been erased, so the next element has been shifted to the index 0, but next loop deletes and erases the element in index 1.</p>\n\n<p>There's no point in erasing elements of the vector, because it is immediately about to be destroyed.</p>\n\n<blockquote>\n  <p>Or any other solutions?</p>\n</blockquote>\n\n<p>If you intend for the class to own dynamically allocated objects, prefer using a vector of objects instead of pointers. If you need a vector of pointers for example to allow run time polymorphism, then use a vector of <code>std::unique_ptr</code>. That way you don't need to implement a destructor as the automatically generated would be just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": false, "score": 0, "last_activity_date": 1515621495, "last_edit_date": 1515621495, "creation_date": 1515617743, "answer_id": 48195926, "question_id": 48195732, "link": "https://stackoverflow.com/questions/48195732/how-to-implement-class-destructor-with-vector-of-pointers-c/48195926#48195926", "title": "How to implement class destructor with vector of pointers C++", "body": "<p>If your class is to supposed to own the objects pointed to, then its sufficient to do:</p>\n\n<pre><code>for (auto p : v) delete p;\n</code></pre>\n\n<p>If the vector itself is the member of the class then its elements are getting deleted when the class instance object is destroyed, you dont need to do this manually.\nAnd in your example you are also doing it wrong. If its a std::vector you could just call vector's clear() method. Otherwise you would call delete[] p; where p is the pointer to the vector elements itself.</p>\n"}], "owner": {"reputation": 59, "user_id": 8049454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3296127daf7f6bc67d802997120f6b54?s=128&d=identicon&r=PG&f=1", "display_name": "Ayaka", "link": "https://stackoverflow.com/users/8049454/ayaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1515621495, "creation_date": 1515616938, "question_id": 48195732, "link": "https://stackoverflow.com/questions/48195732/how-to-implement-class-destructor-with-vector-of-pointers-c", "title": "How to implement class destructor with vector of pointers C++", "body": "<p>If I have class and vector of pointers in class how should I write destructor to properly free memory?\nIs it correct?</p>\n\n<pre><code>~Class()\n{\n  for(int i = 0; i&lt;v.size(); i++)\n  {\n    delete v[i];\n  }\n}\n</code></pre>\n\n<p>Or should I also erase elements from vector? Or any other solutions?</p>\n\n<pre><code>~Class()\n{\n  for(int i = 0; i&lt;v.size(); i++)\n  {\n    delete v[i];\n    v.erase(e.begin() + i);\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 2, "creation_date": 1515616225, "post_id": 48195551, "comment_id": 83372078, "body": "There is no output in that snippet to actually reproduce your problem."}, {"owner": {"reputation": 1, "user_id": 5942764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64fb9829a0f61414fa9971ef288d12?s=128&d=identicon&r=PG&f=1", "display_name": "jarbeme", "link": "https://stackoverflow.com/users/5942764/jarbeme"}, "reply_to_user": {"reputation": 94713, "user_id": 1139697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5f136ddb684f39aaee1c028ee1950f6f?s=128&d=identicon&r=PG", "display_name": "Zeta", "link": "https://stackoverflow.com/users/1139697/zeta"}, "edited": false, "score": 0, "creation_date": 1515616361, "post_id": 48195551, "comment_id": 83372134, "body": "I have edited it for output."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1515616396, "post_id": 48195551, "comment_id": 83372151, "body": "Why do you check <code>file.eof()</code> in the display loop?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1515616642, "post_id": 48195551, "comment_id": 83372260, "body": "Why do you check <code>file.eof()</code> in the outer loop? See <a href=\"https://stackoverflow.com/questions/5431941/why-is-while-feof-file-always-wrong\" title=\"why is while feof file always wrong\">stackoverflow.com/questions/5431941/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5942764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64fb9829a0f61414fa9971ef288d12?s=128&d=identicon&r=PG&f=1", "display_name": "jarbeme", "link": "https://stackoverflow.com/users/5942764/jarbeme"}, "edited": false, "score": 0, "creation_date": 1515616953, "post_id": 48195551, "comment_id": 83372411, "body": "No, I can remove the sort call or put it there and either way I end up with the same results. Just either sorted or not sorted."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515617006, "post_id": 48195551, "comment_id": 83372428, "body": "Give <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> a read. <code>while (n &lt; size &amp;&amp; file &gt;&gt; myVector[n])</code> is correct, but <code>while (!file.eof())</code> leaves <code>file &gt;&gt; size;</code> unprotected."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1515617242, "creation_date": 1515617242, "answer_id": 48195804, "question_id": 48195551, "link": "https://stackoverflow.com/questions/48195551/vector-is-not-acting-as-expected/48195804#48195804", "title": "Vector is not acting as expected", "body": "<p>The problem is this line:</p>\n\n<pre><code>if (file.eof()) break; \n</code></pre>\n\n<p>Once you've read the last line of the file, <code>file.eof()</code> will be true. So the first time through the loop that's supposed to print the sorted vector, you break out of the loop and don't print anything. It has nothing do with whether the vector is larger than the previous vector, it's just a problem with the last line of the file. The fix is to get rid of that unnecessary line.</p>\n\n<p>You also need to change the main loop. <code>while (!file.eof())</code> is the wrong way to loop over a file's contents (see the linked questions for full explanations). Use:</p>\n\n<pre><code>int size;\nwhile (file &gt;&gt; size) {\n    ...\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 9186882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc742293d40546b2b03cfa98139403c6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9186882/daniel"}, "is_accepted": false, "score": 1, "last_activity_date": 1515618114, "creation_date": 1515618114, "answer_id": 48196012, "question_id": 48195551, "link": "https://stackoverflow.com/questions/48195551/vector-is-not-acting-as-expected/48196012#48196012", "title": "Vector is not acting as expected", "body": "<p>because of the line :</p>\n\n<pre><code>if(file.eof()) break;\n</code></pre>\n\n<p>if you get to eof your program wont print anything since you break the printing loop on its first iteration \nfor instance - if there are no chars after 8 in your example - you wont get output ,but even a single space can change that </p>\n\n<p>besides that - is there any chance or cases that your sorting function clears a vector ? or changes it ?</p>\n"}], "owner": {"reputation": 1, "user_id": 5942764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c64fb9829a0f61414fa9971ef288d12?s=128&d=identicon&r=PG&f=1", "display_name": "jarbeme", "link": "https://stackoverflow.com/users/5942764/jarbeme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 48195804, "answer_count": 2, "score": -3, "last_activity_date": 1515618114, "creation_date": 1515616128, "last_edit_date": 1515617075, "question_id": 48195551, "link": "https://stackoverflow.com/questions/48195551/vector-is-not-acting-as-expected", "title": "Vector is not acting as expected", "body": "<p>I am trying to open a text file and pass the lines of the text file to a vector. The first digit in each line is the size of the vector and since I do not know the end point of the text file I am using a while loop to find the end. The idea is that I can take a text file and run a merge sort on it. So, for example: </p>\n\n<pre><code>3 5 4 9\n5 0 2 6 8 1\n</code></pre>\n\n<p>sorted it would be become: </p>\n\n<pre><code>4 5 9\n0 1 2 6 8 \n</code></pre>\n\n<p>The problem I am having is that when I sort a vector that is larger than the prior vector (as in the example) I do not get output. It is probably something simple that I just have over looked. I am pretty sure the issue is in the code below. Thanks for any pointers. </p>\n\n<pre><code>while (!file.eof())\n{\n    int size;\n    file &gt;&gt; size;\n    vector&lt;int&gt; myVector(size); \n\n    int n = 0; \n    while (n &lt; size &amp;&amp; file &gt;&gt; myVector[n])\n    {\n        ++n;\n    }\n\n    sort(myVector);\n\n    for (int j = 0; j &lt; size; ++j)\n    {\n        if (file.eof()) break; \n\n        cout &lt;&lt; myVector[j] &lt;&lt; ' ';\n    }\n\n    cout &lt;&lt; '\\n'; \n}\n</code></pre>\n"}, {"tags": ["c++", "ios", "c++11", "openfst"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "edited": false, "score": 0, "creation_date": 1515780261, "post_id": 48228891, "comment_id": 83445769, "body": "Thanks that was very helpful. if I remove the manual -I everything compiles fine. Any idea why the make file is using those and how to force it not to? <code>-I {$SDK_PATH}&#47;iPhoneOS.sdk&#47;usr&#47;include&#47;c++&#47;4.2.1&#47;</code>"}, {"owner": {"reputation": 53, "user_id": 3578937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb830cfe9e63236b09ca42d2938cddab?s=128&d=identicon&r=PG&f=1", "display_name": "structural ambiguity", "link": "https://stackoverflow.com/users/3578937/structural-ambiguity"}, "reply_to_user": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "edited": false, "score": 0, "creation_date": 1515885074, "post_id": 48228891, "comment_id": 83473012, "body": "No, sorry, I sorta know how to use autotools to build stuff, but how <i>it</i> goes about generating the Makefiles is an absolute mystery to me."}], "tags": [], "owner": {"reputation": 53, "user_id": 3578937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb830cfe9e63236b09ca42d2938cddab?s=128&d=identicon&r=PG&f=1", "display_name": "structural ambiguity", "link": "https://stackoverflow.com/users/3578937/structural-ambiguity"}, "is_accepted": false, "score": 0, "last_activity_date": 1515769466, "creation_date": 1515769466, "answer_id": 48228891, "question_id": 48195533, "link": "https://stackoverflow.com/questions/48195533/compiling-openfst-for-ios-giving-casting-errors/48228891#48228891", "title": "Compiling OpenFST for iOS giving casting errors", "body": "<p>If <code>c++/4.2.1</code> in your traceback means GCC 4.2.1, this is a positively ancient compiler suite (11 years old). The OpenFst README says it requires GCC 4.7 or greater. (This is presumably for C++11 and C99 support.) I don't know how to map XCode versions onto Clang compiler versions (and which Clang versions have substantial support for C++11) but I imagine that's documented somewhere.</p>\n\n<p>FWIW I am running OpenFst on Linux + armv7 + GCC 5.4.0 (a cheapo Chromebook + Crouton) as we speak, so I doubt ARM support is the issue.</p>\n"}], "owner": {"reputation": 13, "user_id": 9200537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62d9396372860987f631676c77c685df?s=128&d=identicon&r=PG&f=1", "display_name": "Anx8", "link": "https://stackoverflow.com/users/9200537/anx8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515769466, "creation_date": 1515616041, "last_edit_date": 1515730816, "question_id": 48195533, "link": "https://stackoverflow.com/questions/48195533/compiling-openfst-for-ios-giving-casting-errors", "title": "Compiling OpenFST for iOS giving casting errors", "body": "<p>I am trying to compile <a href=\"http://www.openfst.org\" rel=\"nofollow noreferrer\">OpenFST</a> for iOS, here is where make is failing:</p>\n\n<pre><code>cd openfst-1.6.5/src/lib\n/Applications/Xcode.app/Contents/Developer/usr/bin/g++ \n  -DHAVE_CONFIG_H \n  -I./../include \n  -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/c++/4.2.1/ \n  -I/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/include/ \n  -miphoneos-version-min=8.1 \n  -arch armv7 \n  -fno-exceptions \n  -funsigned-char \n  -pipe \n  -no-cpp-precomp \n  -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk \n  -std=c++11 \n  -MT compat.lo -MD -MP -MF .deps/compat.Tpo -c compat.cc -o compat.o\n</code></pre>\n\n<p>Its throwing many similar errors, like these</p>\n\n<pre><code>/../iPhoneOS.sdk/usr/include/c++/4.2.1/cwchar:212:12: \n  error: cannot initialize return object of type\n  'wchar_t *' with an rvalue of type 'const wchar_t *'\n{ return wcschr(const_cast&lt;const wchar_t*&gt;(__p), __c); }\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n/../iPhoneOS.sdk/usr/include/c++/4.2.1/cwchar:218:12: \n  error: cannot initialize return object of type\n  'wchar_t *' with an rvalue of type 'const wchar_t *'\n{ return wcspbrk(const_cast&lt;const wchar_t*&gt;(__s1), __s2); }\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n\n/../usr/include/c++/v1/tuple:1352:22: \nerror: C++ requires a type specifier for all declarations\npair&lt;_T1, _T2&gt;::pair(piecewise_construct_t,\n                     ^\n/../usr/include/c++/v1/tuple:1351:1: \nerror: declarator requires an identifier\ninline _LIBCPP_INLINE_VISIBILITY\n^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n</code></pre>\n\n<p>I feel I am using the wrong c++ version here or something?</p>\n"}, {"tags": ["c++", "templates", "metaprogramming"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 9, "creation_date": 1515615841, "post_id": 48195471, "comment_id": 83371870, "body": "<code>constexpr int</code> is not a type"}, {"owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "edited": false, "score": 1, "creation_date": 1515615942, "post_id": 48195471, "comment_id": 83371925, "body": "&quot;const int&quot; would be a type. &quot;constexpr int&quot; is not a type."}, {"owner": {"reputation": 332, "user_id": 8137872, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10213146126271038/picture?type=large", "display_name": "Joseph Franciscus", "link": "https://stackoverflow.com/users/8137872/joseph-franciscus"}, "edited": false, "score": 0, "creation_date": 1515615959, "post_id": 48195471, "comment_id": 83371932, "body": "I see, I thought it was comparable to <code>const</code> Do you know if their is any way to emulate this? (Other than class specialization)"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1515616007, "post_id": 48195471, "comment_id": 83371965, "body": "@JosephFranciscus In what kind of code would you need something to be conditionally constexpr? Maybe we could help you with that."}, {"owner": {"reputation": 332, "user_id": 8137872, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10213146126271038/picture?type=large", "display_name": "Joseph Franciscus", "link": "https://stackoverflow.com/users/8137872/joseph-franciscus"}, "edited": false, "score": 0, "creation_date": 1515616375, "post_id": 48195471, "comment_id": 83372141, "body": "I&#39;m writing a library like <code>Eigen</code>  So an object will be like <code>Vector&lt;class T, int Rows&gt;</code> if <code>Rows == 0</code> than I want a dynamic Row value (IE regular <code>int</code>)  else I want it to be <code>constexpr</code> (as it will be known at compile time)"}, {"owner": {"reputation": 332, "user_id": 8137872, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10213146126271038/picture?type=large", "display_name": "Joseph Franciscus", "link": "https://stackoverflow.com/users/8137872/joseph-franciscus"}, "edited": false, "score": 0, "creation_date": 1515616478, "post_id": 48195471, "comment_id": 83372185, "body": "I can just use specialization so its not too big of a deal though, this may just be easier to write than a specialization."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1515617170, "post_id": 48195471, "comment_id": 83372501, "body": "@JosephFranciscus Specialization is the right answer"}], "answers": [{"tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": true, "score": 1, "last_activity_date": 1515616612, "creation_date": 1515616612, "answer_id": 48195656, "question_id": 48195471, "link": "https://stackoverflow.com/questions/48195471/using-constexpr-in-a-type-dependent-context/48195656#48195656", "title": "Using constexpr in a type dependent context", "body": "<p>From the standard:</p>\n\n<blockquote>\n  <p>The constexpr specifier shall be applied only to the definition of a\n  variable or variable template or the\n      declaration of a function or function template. A function or static data member declared with the constexpr\n      specifier is implicitly an inline function or variable (10.1.6). If any declaration of a function or function\n      template has a constexpr specifier, then all its declarations shall contain the constexpr specifier. [ Note:\n      An explicit specialization can differ from the template declaration with respect to the constexpr specifier.\n      \u2014 end note ] [ Note: Function parameters cannot be declared constexpr. \u2014 end note ]</p>\n</blockquote>\n\n<p>So constexpr is not supposed to be within the template parameter.</p>\n\n<p>In your case you could create the type specialization alias with:</p>\n\n<pre><code>template&lt;typename T&gt;\nusing MyVec0 = Vector&lt;T,0&gt;;\n</code></pre>\n"}], "owner": {"reputation": 332, "user_id": 8137872, "user_type": "registered", "accept_rate": 79, "profile_image": "https://graph.facebook.com/10213146126271038/picture?type=large", "display_name": "Joseph Franciscus", "link": "https://stackoverflow.com/users/8137872/joseph-franciscus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 48195656, "answer_count": 1, "score": 1, "last_activity_date": 1515616612, "creation_date": 1515615761, "question_id": 48195471, "link": "https://stackoverflow.com/questions/48195471/using-constexpr-in-a-type-dependent-context", "title": "Using constexpr in a type dependent context", "body": "<p>Easy question, is this legal?</p>\n\n<pre><code>template&lt;class T&gt;\nstruct foo {\n\nusing type = std::conditional&lt;IF_CONDITION&lt;T&gt;::value, constexpr int, int&gt;::type;\n\n};\n</code></pre>\n\n<p>Compiler error: \"error: \"constexpr\" is not valid here\"\nHaven't been able to find any documentation on this. Because its a compile time condition it seems like this should be able to do in theory at least.</p>\n"}, {"tags": ["c++", "file", "directory", "file-handling"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515614247, "post_id": 48195114, "comment_id": 83371043, "body": "Pathnames are interpreted relative to your current directory, not the directory containing the program."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1515614248, "post_id": 48195114, "comment_id": 83371044, "body": "Where your cpp file is has nothing to do with where the search starts. The current directory of your executable is where the seach begins."}, {"owner": {"reputation": 91, "user_id": 5334056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-5FC4aekRtP8/AAAAAAAAAAI/AAAAAAAAEWQ/svuv8TFhglA/photo.jpg?sz=128", "display_name": "Vedant Kashyap", "link": "https://stackoverflow.com/users/5334056/vedant-kashyap"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1515614357, "post_id": 48195114, "comment_id": 83371102, "body": "Got it... turns out my executable was located in a different folder in the project directory itself... Thanks! @Barmar and Mike"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1515614938, "post_id": 48195114, "comment_id": 83371379, "body": "Regarding <code>for (int i = 0; !data.eof(); ++i)</code>, give <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a> a read. It can save you some future debugging."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8530307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8074c69e0c028d4b78d020fc695faedb?s=128&d=identicon&r=PG&f=1", "display_name": "Nischal", "link": "https://stackoverflow.com/users/8530307/nischal"}, "is_accepted": false, "score": 0, "last_activity_date": 1515615075, "creation_date": 1515615075, "answer_id": 48195325, "question_id": 48195114, "link": "https://stackoverflow.com/questions/48195114/errors-in-relative-path/48195325#48195325", "title": "Errors in relative path", "body": "<p>Looking at your directory structure, I see that both your program1.cpp and data.txt are in the same \"Data\" folder. Since you are already inside the Data folder, \"Data/data.txt\" looks for another Data folder. In UNIX \"..\" means the previous directory. So when you use \"..\" you go to \"Project Directory\", which contains a \"Data\" folder. That is why data.open(\"../Data/data.txt\",ios::out | ios::in) is working. You can also try using the following:\n<code>data.open(\"data.txt\",ios::out | ios::in);</code></p>\n"}], "owner": {"reputation": 91, "user_id": 5334056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-5FC4aekRtP8/AAAAAAAAAAI/AAAAAAAAEWQ/svuv8TFhglA/photo.jpg?sz=128", "display_name": "Vedant Kashyap", "link": "https://stackoverflow.com/users/5334056/vedant-kashyap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515615075, "creation_date": 1515614110, "question_id": 48195114, "link": "https://stackoverflow.com/questions/48195114/errors-in-relative-path", "title": "Errors in relative path", "body": "<p>So this is a simple C++ program for reading a file and displaying its contents.\nMy directory structure is as follows</p>\n\n<pre>\nProject Directory\n|\nData___\n|      |\n|      data.txt\n|\nprogram1.cpp\n</pre>\n\n<p>and The program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main () {\n    char char1;\n\n    fstream data; // Because I wanna to write to this file later.\n    data.open(\"../Data/data.txt\",ios::out | ios::in);\n\n    if (data.is_open()) {\n        for (int i = 0; !data.eof(); ++i) {\n            data.get(char1);\n            cout &lt;&lt; char1 &lt;&lt; endl;\n        }\n        data.close();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>So currently my program works fine... However when I use:</p>\n\n<pre><code>data.open(\"Data/data.txt\",ios::out | ios::in);\n</code></pre>\n\n<p>The program doesn't work. Why is this so? Ideally the above mentioned code piece should work since the <strong>Data</strong> folder is in the same directory as my cpp file. </p>\n\n<pre><code>data.open(\"../Data/data.txt\",ios::out | ios::in);\n</code></pre>\n\n<p>By using 2 dots we are going back a directory and the Data folder isn't there.</p>\n\n<p>Then why is the program working using the 2 dots?</p>\n"}, {"tags": ["c++", "arrays", "algorithm", "sum", "bitset"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1515614015, "post_id": 48195050, "comment_id": 83370921, "body": "Welcome to Stack Overflow! StackOverflow expects you to <a href=\"http://meta.stackoverflow.com/questions/261592\">try to solve your own problem first</a>, and we also <a href=\"https://softwareengineering.meta.stackexchange.com/questions/6166\">don&#39;t answer homework questions</a>. Please update your question to show what you have already tried in a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, and verifiable example</a>. For further information, please see <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, and take the <a href=\"http://stackoverflow.com/tour\">tour of the site</a> :)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1515616858, "post_id": 48195050, "comment_id": 83372366, "body": "You will need a loop to add more than one bit.  How complex the loop is depend on your implementation.  There is no binary operation for what you want. <i>Correction:  you may not need a loop, but the operation needs to be repeated.</i>"}, {"owner": {"reputation": 35, "user_id": 9200446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fa280347416dbd89d48a94731802fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jie Xue", "link": "https://stackoverflow.com/users/9200446/jie-xue"}, "edited": false, "score": 0, "creation_date": 1515618484, "post_id": 48195050, "comment_id": 83373184, "body": "Hi, Thomas, Thank you for your answer. However, I am still confused. What do you mean by &quot;operation needs to be repeated&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1515623275, "post_id": 48196242, "comment_id": 83375284, "body": "Possible worth mentioning that we needn\u2019t necessarily mutate <code>b</code>; in this example the bitset and the array have the same size, so we could check the corresponding bit using the <code>i</code> iterate (along with some simple index mapping logic)."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 2, "last_activity_date": 1515856989, "last_edit_date": 1592644375, "creation_date": 1515619150, "answer_id": 48196242, "question_id": 48195050, "link": "https://stackoverflow.com/questions/48195050/using-a-bitset-to-get-a-conditional-sum-of-array-items-without-using-loop/48196242#48196242", "title": "Using a bitset to get a conditional sum of array items without using loop", "body": "<p>The fastest way would probably to iterate through a loop and add depending if the current bit is set.</p>\n<p>Perhaps the use of bit shifting instead of accessing directly to bit n could avoid some hidden gymnastics by the standard library to extract a specific bit, but this is yet to be proven by benchmarking.:</p>\n<pre><code>int sum=0;\nfor (size_t i=b.size(); i; i--, b&gt;&gt;=1) \n    if (b[0])\n        sum+=arr[i-1];\n</code></pre>\n<p>For the completeness and the fun,  if you could live with a <code>vector&lt;bool&gt;</code> instead of a <code>bitset&lt;&gt;</code>, you could just use the standard library:</p>\n<pre><code>vector&lt;bool&gt; b{1,0,0,1}; \nint arr[4] = {5,4,3,1};\nint test=inner_product(begin(arr), end(arr), b.begin(), 0); \n</code></pre>\n<p><a href=\"https://ideone.com/ccYslS\" rel=\"nofollow noreferrer\">Online demo</a></p>\n<hr />\n<h3>Edit: additional infos - trust your optimizing compiler</h3>\n<p>I experimented on godbolt online compiler with gcc 7.2 for x86-64 platform to look at the assembly produced by the different variants above.</p>\n<p>The simplest solution, iterating trough the loop and conditionally adding the items is extremely fast:</p>\n<ul>\n<li>With constant values as in your example, the compiler is able via constant propagation and determine the result of <code>6</code> immediately (see <a href=\"https://godbolt.org/g/tyTHnS\" rel=\"nofollow noreferrer\">here</a>).</li>\n<li>If you have small size data structures, the compiler will automatically unroll the loop, making it lightening fast (<a href=\"https://godbolt.org/g/p2r9qA\" rel=\"nofollow noreferrer\">14 sequential assembler instruction for 4 elements</a>), without any loop index to maintain.</li>\n<li>However the optimizer may choose not to unroll the loop for larger sizes.  In my experiment, up to up to a size of 17 items the loop is unrolled, with 18 elements it's a <a href=\"https://godbolt.org/g/jJhYws\" rel=\"nofollow noreferrer\">real loop</a>)</li>\n</ul>\n<p>The bit shifting alternative is very close:</p>\n<ul>\n<li>Up to 17 items, the loop is unrolled and the code generated is exacly the same as with the simple loop.</li>\n<li>From 18 elements onwards, a loop is generated, which has <a href=\"https://godbolt.org/g/ve5pEi\" rel=\"nofollow noreferrer\">one assembly instruction less</a> per iteration. It seems a little fastern but only a benchmark could really make the difference which might be in the nanosecond range.</li>\n</ul>\n<p>Of course, the <code>inner_product</code> is much heavier, because it really makes a multiplication which require to convert the bools to ints, and it has to cope with a dynamic size for the bool vector.</p>\n"}, {"comments": [{"owner": {"reputation": 56338, "user_id": 4573247, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JHd9a.png?s=128&g=1", "display_name": "dfrib", "link": "https://stackoverflow.com/users/4573247/dfrib"}, "edited": false, "score": 0, "creation_date": 1515622931, "post_id": 48196987, "comment_id": 83375150, "body": "Many modern compilers allow use of pushing and popping pragma directives to e.g. specifically specify a given (simple) loop to be unrolled, in case on would like to resort to such an optimization."}], "tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 0, "last_activity_date": 1515622515, "creation_date": 1515622515, "answer_id": 48196987, "question_id": 48195050, "link": "https://stackoverflow.com/questions/48195050/using-a-bitset-to-get-a-conditional-sum-of-array-items-without-using-loop/48196987#48196987", "title": "Using a bitset to get a conditional sum of array items without using loop", "body": "<blockquote>\n  <p>Is there a more effective way without a loop ?</p>\n</blockquote>\n\n<p>The common for-loop always has three inefficiencies that can easily be side-stepped: the stride increment, the end-of-loop test, and end-of-loop jump.  However, these are each VERY small, so don't get your hopes up.</p>\n\n<p>You can easily \"unroll\" the loop for that very small gain, at the cost of more lines of code (trade space for performance).  This scheme gets tedious as the size of bitset and the array grow ...</p>\n\n<pre><code>std::bitset&lt;4&gt; b     (std::string(\"1001\"));\nstd::array&lt;int, 4&gt; a {{5,4,3,1}};\n\n// loop form\nint sum = 0;               \nfor (uint i=0; i &lt; 4; ++i) // stride increment, test end-of-loop\n{\n   if (b[i]) sum += a[i];\n}                          // end-of-loop jump\nstd::cout &lt;&lt; \"\\n  sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n\n\n// unrolled loop form -- no stride increment, \n//                       no end-of-loop test, and\n//                       no end-of-loop jump\nsum = 0;\nif (b[0]) sum += a[0];    \nif (b[1]) sum += a[1];\nif (b[2]) sum += a[2];\nif (b[3]) sum += a[3];\n// bigger array, more lines ...\n\nstd::cout &lt;&lt; \"\\n  sum: \" &lt;&lt; sum &lt;&lt; std::endl;\n</code></pre>\n\n<p>Note - A similar approach supports big loops.  In this example, each 'line' performs 1 sum.  For big loops, each line can invoke a function that performs 10 (or 100 or 1000, etc.) of these lines.  I can not remember the last time I saw another programmers unrolled-loop code.  The gain is very small.</p>\n"}], "owner": {"reputation": 35, "user_id": 9200446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07fa280347416dbd89d48a94731802fc?s=128&d=identicon&r=PG&f=1", "display_name": "Jie Xue", "link": "https://stackoverflow.com/users/9200446/jie-xue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 48196242, "answer_count": 2, "score": 2, "last_activity_date": 1515856989, "creation_date": 1515613872, "last_edit_date": 1515620343, "question_id": 48195050, "link": "https://stackoverflow.com/questions/48195050/using-a-bitset-to-get-a-conditional-sum-of-array-items-without-using-loop", "title": "Using a bitset to get a conditional sum of array items without using loop", "body": "<p>There are a bitset <code>b</code> and an array <code>arr</code>. I would like to get the sum of the array by using the bitset, so that <code>arr[i]</code> is summed only if <code>b[i]</code> is set.    </p>\n\n<p>Example: </p>\n\n<pre><code>bitset&lt;4&gt; b(\"1001\"); \narr[4] = {5,4,3,1};\n\n===&gt; the sum would be 1+5 = 6. \n</code></pre>\n\n<p>Obviously, I could use a loop. But this kind of computation is repeated multiple times. Is there a more effective way without a loop ?   </p>\n"}, {"tags": ["c++", "templates", "middleware"], "comments": [{"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 6, "creation_date": 1515613938, "post_id": 48194929, "comment_id": 83370873, "body": "Define your <code>operator&lt;&lt;</code> template in the same namespace as that of the types generated by your middleware compiler."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 2, "creation_date": 1515614074, "post_id": 48194929, "comment_id": 83370953, "body": "@Praetorian That would make a nice answer"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1515614112, "post_id": 48194929, "comment_id": 83370977, "body": "Another option is an empty interface/base class, used only for &quot;tagging&quot;.  The compiler will apply empty base optimization so the extra base class has no runtime effect.  And then you can use SFINAE to activate <code>operator&lt;&lt;</code> only for classes derived from the tag type."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1515614369, "post_id": 48194929, "comment_id": 83371108, "body": "@Praetorian unfortunately those types are generated in different namespaces"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1515614496, "post_id": 48194929, "comment_id": 83371175, "body": "@PasserBy I was pretty much certain a restriction like the comment above would pop up for that answer :) Slava, you claim you can modify the compiler, so maybe you can get it to generate these types in one, or just a handful of namespaces."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1515614637, "post_id": 48194929, "comment_id": 83371242, "body": "@Praetorian I am trying to use for already defined types that already use multiple namespaces intentionally and there is code that depends on tha, so I cannot change it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515614675, "post_id": 48194929, "comment_id": 83371260, "body": "@BenVoigt yes tagging would be a perfect solution but I am not sure how to implement it properly in this case"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1515614723, "post_id": 48194929, "comment_id": 83371291, "body": "One way of achieving it would be to derive your structs from something like Visitable in CRTP fashion, call derived visit in Visitable visit and make your <code>ostream&lt;&lt; </code> operator accept reference to Visitable. It doesn&#39;t agree with non-changing of the structs, though."}, {"owner": {"reputation": 1721, "user_id": 5034140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H4LtHEu4ABU/AAAAAAAAAAI/AAAAAAAABfc/vgbjnSLypvo/photo.jpg?sz=128", "display_name": "Guillaume Gris", "link": "https://stackoverflow.com/users/5034140/guillaume-gris"}, "edited": false, "score": 0, "creation_date": 1515617225, "post_id": 48194929, "comment_id": 83372529, "body": "Since you have a generator to create these types. Can&#39;t you use this generator to write <code>operator&lt;&lt;</code> for each of your structs ? It&#39;s more verbose but you don&#39;t have to write this code."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1721, "user_id": 5034140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H4LtHEu4ABU/AAAAAAAAAAI/AAAAAAAABfc/vgbjnSLypvo/photo.jpg?sz=128", "display_name": "Guillaume Gris", "link": "https://stackoverflow.com/users/5034140/guillaume-gris"}, "edited": false, "score": 0, "creation_date": 1515617805, "post_id": 48194929, "comment_id": 83372838, "body": "@GuillaumeGris the problem is <code>operator&lt;&lt;</code> is only one case, I would need more, for example convert such struct to json etc, I do not want to change generator for every conversion I add later"}, {"owner": {"reputation": 662, "user_id": 1119105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIieO.png?s=128&g=1", "display_name": "Parakram Majumdar", "link": "https://stackoverflow.com/users/1119105/parakram-majumdar"}, "edited": false, "score": 0, "creation_date": 1515623696, "post_id": 48194929, "comment_id": 83375438, "body": "I had a similar situation generating automated classes from an xsd (xml schema document). We ultimately decided to make our middleware compiler generate the <code>operator &lt;&lt;</code> for all types. It&#39;s equally performant, and the code bloat relatively wasn&#39;t too bad in our case. Biggest advantage though I&#39;d say was code readability, admittedly a very personal opinion."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 662, "user_id": 1119105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RIieO.png?s=128&g=1", "display_name": "Parakram Majumdar", "link": "https://stackoverflow.com/users/1119105/parakram-majumdar"}, "edited": false, "score": 0, "creation_date": 1515623821, "post_id": 48194929, "comment_id": 83375484, "body": "@ParakramMajumdar unfortunately generating operator&lt;&lt; is not flexible, I need multiple different conversion generated and want it to be extendable for even more later"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515623881, "post_id": 48197151, "comment_id": 83375515, "body": "Yea macro would work but I&#39;d like to avoid it, but if it is not possible will probably use it"}], "tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": false, "score": 0, "last_activity_date": 1515624171, "last_edit_date": 1515624171, "creation_date": 1515623364, "answer_id": 48197151, "question_id": 48194929, "link": "https://stackoverflow.com/questions/48194929/c-generic-way-to-provide-operator-for-middleware-generated-types/48197151#48197151", "title": "C++ Generic way to provide `operator&lt;&lt;` for middleware generated types", "body": "<p>You could use combination of Macro's and SFINAE. Or take a look at Boost Hana:</p>\n\n<p><a href=\"http://boostorg.github.io/hana/index.html#tutorial-introspection-adapting\" rel=\"nofollow noreferrer\">http://boostorg.github.io/hana/index.html#tutorial-introspection-adapting</a></p>\n\n<p>You can keep the macro stuff low level and buil your higher level code upon that</p>\n"}, {"tags": [], "owner": {"reputation": 3890, "user_id": 1201701, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/VCVHT.jpg?s=128&g=1", "display_name": "StPiere", "link": "https://stackoverflow.com/users/1201701/stpiere"}, "is_accepted": false, "score": 0, "last_activity_date": 1515625302, "creation_date": 1515625302, "answer_id": 48197505, "question_id": 48194929, "link": "https://stackoverflow.com/questions/48194929/c-generic-way-to-provide-operator-for-middleware-generated-types/48197505#48197505", "title": "C++ Generic way to provide `operator&lt;&lt;` for middleware generated types", "body": "<p>another approach could be using clang lib to autogenerate the output code from your structs. in that case your main code would stay clean. i'm not expert on this, but it may be worth a try</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1515681193, "creation_date": 1515681193, "answer_id": 48209482, "question_id": 48194929, "link": "https://stackoverflow.com/questions/48194929/c-generic-way-to-provide-operator-for-middleware-generated-types/48209482#48209482", "title": "C++ Generic way to provide `operator&lt;&lt;` for middleware generated types", "body": "<p>Here is what I implemented:</p>\n\n<pre><code>// header before generated types\nnamespace visitor_details {\ntemplate&lt;typename T&gt;\nstruct visitor_caller : std::false_type {};\n}\n\n// generated header\n// types in various namespace\nnamespace foobar {\n\nstruct Foo { // this struct has generated helper\n    int a = 1;\n    double d = 2;\n};\n\nstruct NotFoo { // this one does not, for testing\n    int c;\n};\n\n}\n// injected code generation\nnamespace visitor_details {\ntemplate&lt;&gt;\nstruct visitor_caller&lt;foobar::Foo&gt; : std::true_type {\n    template&lt;typename Visitor, typename T&gt;\n    static void visit( Visitor &amp;v, T &amp;&amp;f )\n    {\n        v.visit( \"a\", f.a );\n        v.visit( \"d\", f.d );\n    }\n};\n}\n\n// usage\nstruct OstreamVisitor {\n    OstreamVisitor( std::ostream &amp;os ) : m_os( os ) {}\n\n    void visit( const char *name, int i ) { m_os &lt;&lt; name &lt;&lt; \"=\" &lt;&lt; i &lt;&lt; std::endl; }\n    void visit( const char *name, double d ) { m_os &lt;&lt; name &lt;&lt; \"=\" &lt;&lt; d &lt;&lt; std::endl; }\n\n    std::ostream &amp;m_os;\n};\n\ntemplate&lt;typename T, typename EN = typename std::enable_if&lt;visitor_details::visitor_caller&lt;T&gt;::value&gt;::type &gt;\nstd::ostream &amp;operator&lt;&lt;( std::ostream &amp;out, const T &amp;data )\n{\n    OstreamVisitor v( out );\n    visitor_details::visitor_caller&lt;T&gt;::visit( v, data );\n    return out;\n}\n\nint main()\n{\n    foobar::Foo f;\n    std::cout &lt;&lt; f;\n    foobar::NotFoo n;\n    //std::cout &lt;&lt; n;\n}\n</code></pre>\n\n<p>now if I uncomment last line in <code>main</code> error says:</p>\n\n<blockquote>\n  <p>error: no match for \u2018operator&lt;&lt;\u2019 (operand types are \u2018std::ostream {aka std::basic_ostream}\u2019 and \u2018foobar::NotFoo\u2019)</p>\n</blockquote>\n\n<p>so looks like this is what I need</p>\n\n<p><a href=\"https://ideone.com/yI5scT\" rel=\"nofollow noreferrer\">live example</a></p>\n"}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 1, "answer_count": 3, "score": 6, "last_activity_date": 1515681193, "creation_date": 1515613378, "last_edit_date": 1515618673, "question_id": 48194929, "link": "https://stackoverflow.com/questions/48194929/c-generic-way-to-provide-operator-for-middleware-generated-types", "title": "C++ Generic way to provide `operator&lt;&lt;` for middleware generated types", "body": "<p>We use a middleware that generates types for us for various programming languages, including C++. For structures generated for C++ I want to inject code that can be used for various data conversion, for example output to <code>std::ostream</code>. Let's say we have following structure generated:</p>\n\n<pre><code>struct Foo {\n    int a;\n    double d;\n};\n</code></pre>\n\n<p>Let's say I change middleware compiler to produce following template function:</p>\n\n<pre><code>template&lt;typename Visitor&gt;\nvoid visit( Visitor &amp;v, const Foo &amp;data )\n{\n    v.visit( \"a\", data.a );\n    v.visit( \"d\", data.d );\n}\n</code></pre>\n\n<p>now I can use this code for various ways and it should not affect anything if not used, for example make <code>std::ostream::operator&lt;&lt;</code>:</p>\n\n<pre><code>struct OstreamVisitor {\n    OstreamVisitor( std::ostream &amp;os ) : m_os( os ) {}\n\n    void visit( const char *name, int i ) { m_os &lt;&lt; name &lt;&lt; \"=\" &lt;&lt; i &lt;&lt; std::endl; }\n    void visit( const char *name, double d ) { m_os &lt;&lt; name &lt;&lt; \"=\" &lt;&lt; d &lt;&lt; std::endl; }\n\n    std::ostream &amp;m_os;\n};\n\nstd::ostream &amp;operator&lt;&lt;( std::ostream &amp;out, const Foo &amp;data )\n{\n    OstreamVisitor v( out );\n    visit( v, data );\n    return out;\n}\n</code></pre>\n\n<p>it works <a href=\"https://ideone.com/GiSpso\" rel=\"nofollow noreferrer\">live example</a> but problem is I do not want to write <code>std::ostream &amp;operator&lt;&lt;</code> for every structure manually so naive solution would be to write:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::ostream &amp;operator&lt;&lt;( std::ostream &amp;os, const T &amp;t );\n</code></pre>\n\n<p>and use visitor, but that would interfere with other types, that not generated. So is there way to make such generic function that limited only for structures, that generated? I would like not to inject anything to generated structures if possible but having template class instead of template function is fine.</p>\n\n<p>Note: I cannot restrict generated structs to belong to particular namespace unfortunately. What I am thinking is something like:</p>\n\n<pre><code>// system header\ntemplate&lt;typename T&gt;\nstruct visitable_tag;\n\n// generated header\nnamespace FooNamespace {\nstruct Foo { ... };\n\ntemplate&lt;&gt;\nstruct visitable_tag&lt;Foo&gt; {};\n}\n\n // or maybe have tag in special namespace\n namespace visitable_tag_namespace {\n template&lt;&gt;\n struct visitable_tag&lt;FooNamespace::Foo&gt; {};\n }\n</code></pre>\n\n<p>and then make template output function only instantiate when such specialization exits. Of course this is just idea of possible tagging and I open to other ways, but would prefer to have original structures untouched.      </p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1515613054, "post_id": 48194781, "comment_id": 83370431, "body": "Don&#39;t &quot;transfer&quot; the code. Instead try to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>, and then just use plain and simple copy-pasting."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515613183, "post_id": 48194781, "comment_id": 83370488, "body": "<code>typedef ParksNode* ParksPtr;</code> pretty useless. Doesn\u2019t make the code more readable."}, {"owner": {"reputation": 1, "user_id": 9200341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmWAGI4xYWc/AAAAAAAAAAI/AAAAAAAAGAg/UJzDj7lOOHo/photo.jpg?sz=128", "display_name": "Bruce Demonrage", "link": "https://stackoverflow.com/users/9200341/bruce-demonrage"}, "edited": false, "score": 0, "creation_date": 1515613381, "post_id": 48194781, "comment_id": 83370589, "body": "Thank you for your comments, however I am a student learning C++. I am trying to figure out what is causing my issue. I appreciate your comments, but could someone give me a little more detail on how to fix my error?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515613478, "post_id": 48194781, "comment_id": 83370639, "body": "Use a debugger. That\u2019s what everyone has to do."}, {"owner": {"reputation": 1, "user_id": 9200341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmWAGI4xYWc/AAAAAAAAAAI/AAAAAAAAGAg/UJzDj7lOOHo/photo.jpg?sz=128", "display_name": "Bruce Demonrage", "link": "https://stackoverflow.com/users/9200341/bruce-demonrage"}, "edited": false, "score": 0, "creation_date": 1515613689, "post_id": 48194781, "comment_id": 83370738, "body": "I have debugged the program in its entirety, I am just unsure how to fill the currentNode variable from the linked list that is created for my class. I have attempted to use getters previously, but that gave me a segmentation fault. Do you have any suggestions as to how to transfer the data from my class into currentNode?"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1515615791, "post_id": 48194781, "comment_id": 83371835, "body": "OT, but... 1) don&#39;t start your functions (main in this case) with a long list of variable declarations, try to declare (and possibly initialize) those variables just before their use and limit as much as possible their scopes. 2) Split the code in shorter (and with only one purpose) functions which are easier to think about, test and debug. 3) Since C++11 <code>std::ifstream</code> has a constructor accepting <code>std::string</code>. Moreover, its destructor is called when the end of its scope is reached (RAII): <code>{ std::ifstream file(FileName); if (!file) { &#47;*Error opening*&#47; } &#47;*else do something...*&#47; }</code>."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1515617341, "post_id": 48194781, "comment_id": 83372598, "body": "4) <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> has a return value that should be checked."}, {"owner": {"reputation": 1, "user_id": 9200341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmWAGI4xYWc/AAAAAAAAAAI/AAAAAAAAGAg/UJzDj7lOOHo/photo.jpg?sz=128", "display_name": "Bruce Demonrage", "link": "https://stackoverflow.com/users/9200341/bruce-demonrage"}, "edited": false, "score": 0, "creation_date": 1515622626, "post_id": 48194781, "comment_id": 83375021, "body": "The value of the getline function is checked, the problem comes in during the file output. The currentNode variable is empty, and I am unsure as to how to fill it. I have tried several methods to no avail. When the output file is created, it has statements with blank data entries where data should be. For example, &quot;__ established in __&quot; is all I see. It should have data before and after &quot;established in&quot;."}], "owner": {"reputation": 1, "user_id": 9200341, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-RmWAGI4xYWc/AAAAAAAAAAI/AAAAAAAAGAg/UJzDj7lOOHo/photo.jpg?sz=128", "display_name": "Bruce Demonrage", "link": "https://stackoverflow.com/users/9200341/bruce-demonrage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515612723, "creation_date": 1515612723, "question_id": 48194781, "link": "https://stackoverflow.com/questions/48194781/passing-data-to-currentnode-pointer-from-a-class", "title": "Passing data to currentNode pointer from a class", "body": "<p>I am currently having trouble with outputting from my program correctly. The currentNode pointer is empty, and I am unsure how to get it to not be empty. This program deals with linked lists, and I have tried using getters to no avail (I get a segmentation fault when I try). The program is supposed to take state parks, insert them into a linked list, search for pertinent data from the state parks, and output the summary to a file. All I get is output statements in the file, with no data where it should be. Here is all pertinent code to the program:</p>\n\n<p>parkLL.h:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nstruct ParksNode;\ntypedef ParksNode* ParksPtr;\nstruct ParksNode\n{\n    string parkName;\n    string parkLocation;\n    string parkOpeningYear;\n    string parkDescription;\n    int noTimesReferenced;\n    ParksPtr parkLink;\n};\n\n\n\n\nclass Parks\n{\npublic:\n    Parks();\n    ~Parks();\n    void Delete(string pName);\n    int GetLength() const;\n    ParksNode GetNextPark();\n    bool HasNext() const;\n    void Insert(string&amp; pName, string&amp; pLocation, string&amp; pOpeningYear, \nstring&amp; pDescription, int&amp; numberTimesReferenced);\n    bool IsEmpty() const;\n    bool IsFull() const;\n    bool IsThere(string pName) const;\n\nprivate:\nParksNode* parkDataPtr; //Points to the first node in the list\nint length;\nParksNode* parkCurrentPos; //Points to the current position in the list\nParksNode* parkLastPtr; //Point to the last node in the list\n\n};\n</code></pre>\n\n<p>parkLL.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n#include &lt;cstring&gt;\n#include \"parkLL.h\"\nusing namespace std;\n\n\n\nParks::Parks()\n//The parkDataPtr will be set to NULL\n{\n    parkDataPtr = NULL;\n    parkCurrentPos = parkDataPtr;\n    length = 0;\n}\n\nParks::~Parks()\n//The destructor for the Parks Linked List class\n{\n    ParksPtr parkTempPtr;\n    ParksPtr parkCurrPtr = parkDataPtr;\n    while(parkCurrPtr != NULL)\n    {\n        parkTempPtr = parkCurrPtr;\n        parkCurrPtr = parkCurrPtr-&gt;parkLink;\n        delete parkTempPtr;\n    }\n}\n\nvoid Parks::Delete(string pName)\n//The delete method for the Parks Linked List class\n{\n    ParksPtr parkPrevPtr = NULL; //The trailing pointer for the list\n    ParksPtr parkCurrPtr = parkDataPtr; //The loop control pointer\n\n    while(parkCurrPtr != NULL &amp;&amp; parkCurrPtr-&gt;parkName != pName &amp;&amp; \nparkCurrPtr-&gt;parkName &lt; pName)\n    {\n        parkPrevPtr = parkCurrPtr;\n        parkCurrPtr = parkCurrPtr-&gt;parkLink;\n    }\n    if(parkCurrPtr != NULL &amp;&amp; parkCurrPtr-&gt;parkName == pName) //the item has \nbeen found\n    {\n        if(parkCurrPtr == parkDataPtr)\n        {\n            parkDataPtr = parkCurrPtr-&gt;parkLink;\n        }\n        else\n        {\n            parkPrevPtr-&gt;parkLink = parkCurrPtr-&gt;parkLink;\n        }\n        if(parkCurrPtr == parkLastPtr)\n        {\n            parkLastPtr = parkPrevPtr;\n        }\n        delete parkCurrPtr;\n        length--;\n    }\n}\n\nint Parks::GetLength() const\n//Returns the length of the current list\n{\n    return(length);\n}\n\nParksNode Parks::GetNextPark()\n//Gets the next park in the linked list\n{\n    ParksNode currentPark;\n    currentPark.parkName = parkCurrentPos-&gt;parkName;\n    currentPark.parkLocation = parkCurrentPos-&gt;parkLocation;\n    currentPark.parkOpeningYear = parkCurrentPos-&gt;parkOpeningYear;\n    currentPark.parkDescription = parkCurrentPos-&gt;parkDescription;\n    currentPark.noTimesReferenced = parkCurrentPos-&gt;noTimesReferenced;\n    parkCurrentPos = parkCurrentPos-&gt;parkLink;\n    return(currentPark);\n}\n\n\nbool Parks::HasNext() const\n//Checks to see if there is another park in the list\n{\n    return(parkCurrentPos!=NULL);\n}\n\nvoid Parks::Insert(string&amp; pName, string&amp; pLocation, string&amp; pOpeningYear, \nstring&amp; pDescription, int&amp; numberTimesReferenced)\n//The insert method for the Parks Linked List class\n{\n    ParksPtr parkCurrPtr; //moving pointer\n    ParksPtr parkPrevPtr; //trailing pointer\n    ParksPtr parkNewNodePtr; //pointer to a new node\n\n    parkNewNodePtr = new ParksNode;\n    parkNewNodePtr-&gt;parkName = pName;\n    parkNewNodePtr-&gt;parkLocation = pLocation;\n    parkNewNodePtr-&gt;parkOpeningYear = pOpeningYear;\n    parkNewNodePtr-&gt;parkDescription = pDescription;\n    parkNewNodePtr-&gt;noTimesReferenced = numberTimesReferenced;\n\n        parkCurrPtr = parkDataPtr;\n        parkPrevPtr = NULL;\n        while(parkCurrPtr != NULL &amp;&amp; parkCurrPtr-&gt;parkName &lt; pName)\n        {\n            parkPrevPtr = parkCurrPtr;\n            parkCurrPtr = parkCurrPtr-&gt;parkLink;\n        }\n        //Inserting the new node\n        parkNewNodePtr-&gt;parkLink = parkCurrPtr;\n        if(parkPrevPtr == NULL)\n        {\n            parkDataPtr = parkNewNodePtr;\n        }\n        else\n        {\n            parkPrevPtr-&gt;parkLink = parkNewNodePtr;\n        }\n        if(parkCurrPtr == NULL)\n        {\n            parkLastPtr = parkNewNodePtr;\n        }\n    length++;\n}\n\nbool Parks::IsEmpty() const\n//Checks to see if the list is empty\n{\n    return(parkDataPtr == NULL);\n}\n\nbool Parks::IsFull() const\n//Checks to see if the list is full, will always return false because this \nis a linked list\n{\n    return(false);\n}\n\nbool Parks::IsThere(string pName) const\n//Checks to see if an item is in the linked list\n{\n    ParksPtr parkCurrPtr = parkDataPtr; //Loop control pointer\n\n    while(parkCurrPtr != NULL &amp;&amp; parkCurrPtr-&gt;parkName != pName)\n    {\n        parkCurrPtr = parkCurrPtr-&gt;parkLink;\n    }\n    if(parkCurrPtr != NULL)\n    {\n        return(true);\n    }\n    else\n    {\n        return(false);\n    }\n}\n</code></pre>\n\n<p>updateLL.cpp</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;cstddef&gt;\n#include \"parkLL.h\"\n\nvoid CloseFiles(ifstream&amp; parkDataFile, ifstream&amp; parkLookupFile, ofstream&amp; \nparkOutputFile);\n//This function closes all data files\n\nvoid OpenFiles(string&amp; parkDataFileName, string&amp; parkLookupFileName, string&amp; \nparkOutputFileName, ifstream&amp; parkDataFile, ifstream&amp; parkLookupFile, \nofstream&amp; parkOutputFile);\n//This function opens all data files\n\nint main()\n{\n    string parkDataFileName; //The variable for the data file for park info\n    string parkLookupFileName; //The variable for the lookup file name\n    string parkOutputFileName; //The variable for the output file name\n    ifstream parkDataFile; //The variable for the park data input file\n    ifstream parkLookupFile; //The variable for the park lookup file\n    ofstream parkOutputFile; //The variable for the park output file\n    string parkName2; //The variable for the park name\n    string parkLocation2; //The variable for the park location\n    string parkOpeningYear2; //The variable for the park opening year\n    string parkDescription2; //The variable for the park description\n    int noTimesReferenced2; //The variable for the number of times \nreferenced\n    string lookupChoice; //The variable for the information to look up\n    string option; //The variable for the option of data output\n    Parks currentPark; //The variable for the current park\n    ParksPtr currentNode; //The variable for the current node\n\n    cout &lt;&lt; \"Please enter the data file name: \";\n    cin &gt;&gt; parkDataFileName;\n    cout &lt;&lt; \"Please enter the lookup file name: \";\n    cin &gt;&gt; parkLookupFileName;\n    cout &lt;&lt; \"Please enter the output file name: \";\n    cin &gt;&gt; parkOutputFileName;\n\n    OpenFiles(parkDataFileName, parkLookupFileName, parkOutputFileName, \nparkDataFile, parkLookupFile, parkOutputFile);\n\n    getline(parkDataFile, parkName2, '#'); //priming read for while loop\n    while (parkDataFile)\n    {\n        getline(parkDataFile, parkLocation2, '#');\n        getline(parkDataFile, parkOpeningYear2, '#');\n        getline(parkDataFile, parkDescription2);\n        noTimesReferenced2 = 0;\n        currentPark.Insert(parkName2, parkLocation2, parkOpeningYear2, \nparkDescription2, noTimesReferenced2);\n        getline(parkDataFile, parkName2, '#');\n    }\n\n\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Outputting the info to file\" &lt;&lt; endl;\n\n    getline(parkLookupFile, parkName2, '#');\n    getline(parkLookupFile, lookupChoice);\n\n    currentNode = new ParksNode;\n    while(parkLookupFile)\n    {\n        if(currentPark.IsThere(parkName2))\n        {\n            if (lookupChoice == \"Year\")\n            {   \n                parkOutputFile &lt;&lt; currentNode-&gt;parkName &lt;&lt; \" established in \n\" &lt;&lt; currentNode-&gt;parkOpeningYear &lt;&lt; endl;\n                currentNode-&gt;noTimesReferenced = currentNode-\n&gt;noTimesReferenced + 1;\n            }\n\n            else if (lookupChoice == \"Description\")\n            {\n                parkOutputFile &lt;&lt; currentNode-&gt;parkName &lt;&lt; \" is \" &lt;&lt; \ncurrentNode-&gt;parkDescription &lt;&lt; endl;\n                currentNode-&gt;noTimesReferenced = currentNode-\n&gt;noTimesReferenced + 1;\n            }\n\n            else if (lookupChoice == \"Location\")\n            {\n                parkOutputFile &lt;&lt; currentNode-&gt;parkName &lt;&lt; \" located near \" \n &lt;&lt; currentNode-&gt;parkLocation &lt;&lt; endl;\n                currentNode-&gt;noTimesReferenced = currentNode-\n&gt;noTimesReferenced + 1;\n            }\n            else if (lookupChoice == \"Remove\")\n            {\n                currentPark.Delete(parkName2);\n            }\n        }\n\n        else\n        {\n            parkOutputFile &lt;&lt; \"** \" &lt;&lt; parkName2 &lt;&lt; \" is not an available \nstate park\" &lt;&lt; endl;\n        }\n\n        getline(parkLookupFile, parkName2, '#');\n        getline(parkLookupFile, lookupChoice);\n    }\n    delete currentNode;\n\n    parkOutputFile &lt;&lt; \"Summary (state park/ reference frequency)\" &lt;&lt; endl;\n\n    while(currentPark.HasNext())\n    {\n        parkOutputFile &lt;&lt; currentNode-&gt;parkName &lt;&lt; \" \" &lt;&lt; currentNode-\n&gt;noTimesReferenced;\n    }\n\n\n    CloseFiles(parkDataFile, parkLookupFile, parkOutputFile);\n\n}\n\nvoid CloseFiles(ifstream&amp; parkDataFile, ifstream&amp; parkLookupFile, ofstream&amp; \nparkOutputFile)\n{\n    parkDataFile.close();\n    parkLookupFile.close();\n    parkOutputFile.close();\n}\n\nvoid OpenFiles(string&amp; parkDataFileName, string&amp; parkLookupFileName, string&amp; \nparkOutputFileName, ifstream&amp; parkDataFile, ifstream&amp; parkLookupFile, \nofstream&amp; parkOutputFile)\n{\n    parkDataFile.open(parkDataFileName.c_str());\n    parkLookupFile.open(parkLookupFileName.c_str());\n    parkOutputFile.open(parkOutputFileName.c_str());\n}\n</code></pre>\n\n<p>I apologize in advance for any syntax errors that may occur in the code as transferring the code is difficult. Please help me at your convenience. Thank you very much for any and all assistance with this matter.</p>\n"}, {"tags": ["c++", "linux", "opengl"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 2, "creation_date": 1515612633, "post_id": 48194709, "comment_id": 83370209, "body": "It would help if you used the &quot;C&quot; locale to get non-localized compiler messages that you could throw at a websearch, too. However, I&#39;m guessing that this is missing <code>-ldl</code>. In any case, please read the site guidelines concerning minimal example code, your&#39;s isn&#39;t minimal."}, {"owner": {"reputation": 1131, "user_id": 3448634, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1b5b4e95d700f849977e3c3e99b4ff7?s=128&d=identicon&r=PG&f=1", "display_name": "Makketronix", "link": "https://stackoverflow.com/users/3448634/makketronix"}, "edited": false, "score": 0, "creation_date": 1515612663, "post_id": 48194709, "comment_id": 83370229, "body": "Not an expert, but this may help: <a href=\"https://askubuntu.com/questions/521706/error-adding-symbols-dso-missing-from-command-line-while-compiling-g13-driver\" title=\"error adding symbols dso missing from command line while compiling g13 driver\">askubuntu.com/questions/521706/&hellip;</a>"}, {"owner": {"reputation": 769, "user_id": 9200394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bM4Ra.png?s=128&g=1", "display_name": "congard", "link": "https://stackoverflow.com/users/9200394/congard"}, "edited": false, "score": 0, "creation_date": 1515613330, "post_id": 48194709, "comment_id": 83370563, "body": "I added -ldl, but the problem remained: g ++ main.cpp -o main -lglfw3 -lGL -lm -lXrandr -lXi -ldl /usr/bin/ld: //usr/local/lib/libglfw3.a(x11_window.c.o): Undefined reference to the symbol &quot;XConvertSelection&quot; //usr/lib/x86_64-linux-gnu/libX11.so.6: error adding symbols: DSO missing from command line collect2: error: ld returned 1 exit status"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1515613494, "post_id": 48194709, "comment_id": 83370650, "body": "<code>g++ main.cpp `pkg-config --libs glfw3 glew`</code> works fine for me on  Debian Stretch after installing <code>libglfw3-dev</code> and <code>libglew-dev</code>."}], "answers": [{"comments": [{"owner": {"reputation": 769, "user_id": 9200394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bM4Ra.png?s=128&g=1", "display_name": "congard", "link": "https://stackoverflow.com/users/9200394/congard"}, "edited": false, "score": 1, "creation_date": 1515613974, "post_id": 48195035, "comment_id": 83370898, "body": "Note: <code>pkg-config --static --libs glew glfw3</code> Quite enough"}], "tags": [], "owner": {"reputation": 769, "user_id": 9200394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bM4Ra.png?s=128&g=1", "display_name": "congard", "link": "https://stackoverflow.com/users/9200394/congard"}, "is_accepted": true, "score": 1, "last_activity_date": 1515613812, "creation_date": 1515613812, "answer_id": 48195035, "question_id": 48194709, "link": "https://stackoverflow.com/questions/48194709/opengl-error-during-compilation/48195035#48195035", "title": "OpenGL - error during compilation", "body": "<p>So the solution was</p>\n\n<pre><code>pkg-config --static --libs x11 xrandr xi xxf86vm glew glfw3\n</code></pre>\n\n<p>To get the packages I need for them to run and in the right order.</p>\n\n<p>Then I run </p>\n\n<pre><code>g++ main.cpp -o main -lXi -lGLEW -lGLU -lm -lGL -lm -lpthread -ldl -ldrm -lXdamage -lX11-xcb -lxcb-glx -lxcb-dri2 -lglfw3 -lrt -lm -ldl -lXrandr -lXinerama -lXxf86vm -lXext -lXcursor -lXrender -lXfixes -lX11 -lpthread -lxcb -lXau -lXdmcp\n</code></pre>\n\n<p>and the project successfully compiled</p>\n"}], "owner": {"reputation": 769, "user_id": 9200394, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/bM4Ra.png?s=128&g=1", "display_name": "congard", "link": "https://stackoverflow.com/users/9200394/congard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 48195035, "answer_count": 1, "score": 1, "last_activity_date": 1515613812, "creation_date": 1515612390, "question_id": 48194709, "link": "https://stackoverflow.com/questions/48194709/opengl-error-during-compilation", "title": "OpenGL - error during compilation", "body": "<p>Recently I started trying to work with OpenGL on linux (before writing under android, using OpenGL ES 2.0), but I encountered the impossibility of compiling the project. Here is what the compiler provides:</p>\n\n<pre><code>    g++ main.cpp -o main -lglfw3 -lGL -lm -lXrandr -lXi -lX11 -lXxf86vm -lpthread\n/usr/bin/ld: //usr/local/lib/libglfw3.a(vulkan.c.o): \u043d\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0441\u0438\u043c\u0432\u043e\u043b \u00abdlclose@@GLIBC_2.2.5\u00bb\n//lib/x86_64-linux-gnu/libdl.so.2: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>To compile application on the command line, I use the following linker options:-lglfw3 -lGL -lm -lXrandr -lXi -lX11 -lXxf86vm -lpthread</p>\n\n<p>The OpenGL code (picked up specifically from the source where everything works):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// GLEW\n#define GLEW_STATIC\n#include &lt;GL/glew.h&gt;\n\n// GLFW\n#include &lt;GLFW/glfw3.h&gt;\n\n\n// Function prototypes\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode);\n\n// Window dimensions\nconst GLuint WIDTH = 800, HEIGHT = 600;\n\n// Shaders\nconst GLchar* vertexShaderSource = \"#version 330 core\\n\"\n    \"layout (location = 0) in vec3 position;\\n\"\n    \"void main()\\n\"\n    \"{\\n\"\n    \"gl_Position = vec4(position.x, position.y, position.z, 1.0);\\n\"\n    \"}\\0\";\nconst GLchar* fragmentShaderSource = \"#version 330 core\\n\"\n    \"out vec4 color;\\n\"\n    \"void main()\\n\"\n    \"{\\n\"\n    \"color = vec4(1.0f, 0.5f, 0.2f, 1.0f);\\n\"\n    \"}\\n\\0\";\n\n// The MAIN function, from here we start the application and run the game loop\nint main()\n{\n    std::cout &lt;&lt; \"Starting GLFW context, OpenGL 3.3\" &lt;&lt; std::endl;\n    // Init GLFW\n    glfwInit();\n    // Set all the required options for GLFW\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n    glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);\n\n    // Create a GLFWwindow object that we can use for GLFW's functions\n    GLFWwindow* window = glfwCreateWindow(WIDTH, HEIGHT, \"LearnOpenGL\", nullptr, nullptr);\n    glfwMakeContextCurrent(window);\n\n    // Set the required callback functions\n    glfwSetKeyCallback(window, key_callback);\n\n    // Set this to true so GLEW knows to use a modern approach to retrieving function pointers and extensions\n    glewExperimental = GL_TRUE;\n    // Initialize GLEW to setup the OpenGL Function pointers\n    glewInit();\n\n    // Define the viewport dimensions\n    int width, height;\n    glfwGetFramebufferSize(window, &amp;width, &amp;height);\n    glViewport(0, 0, width, height);\n\n\n    // Build and compile our shader program\n    // Vertex shader\n    GLuint vertexShader = glCreateShader(GL_VERTEX_SHADER);\n    glShaderSource(vertexShader, 1, &amp;vertexShaderSource, NULL);\n    glCompileShader(vertexShader);\n    // Check for compile time errors\n    GLint success;\n    GLchar infoLog[512];\n    glGetShaderiv(vertexShader, GL_COMPILE_STATUS, &amp;success);\n    if (!success)\n    {\n        glGetShaderInfoLog(vertexShader, 512, NULL, infoLog);\n        std::cout &lt;&lt; \"ERROR::SHADER::VERTEX::COMPILATION_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n    }\n    // Fragment shader\n    GLuint fragmentShader = glCreateShader(GL_FRAGMENT_SHADER);\n    glShaderSource(fragmentShader, 1, &amp;fragmentShaderSource, NULL);\n    glCompileShader(fragmentShader);\n    // Check for compile time errors\n    glGetShaderiv(fragmentShader, GL_COMPILE_STATUS, &amp;success);\n    if (!success)\n    {\n        glGetShaderInfoLog(fragmentShader, 512, NULL, infoLog);\n        std::cout &lt;&lt; \"ERROR::SHADER::FRAGMENT::COMPILATION_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n    }\n    // Link shaders\n    GLuint shaderProgram = glCreateProgram();\n    glAttachShader(shaderProgram, vertexShader);\n    glAttachShader(shaderProgram, fragmentShader);\n    glLinkProgram(shaderProgram);\n    // Check for linking errors\n    glGetProgramiv(shaderProgram, GL_LINK_STATUS, &amp;success);\n    if (!success) {\n        glGetProgramInfoLog(shaderProgram, 512, NULL, infoLog);\n        std::cout &lt;&lt; \"ERROR::SHADER::PROGRAM::LINKING_FAILED\\n\" &lt;&lt; infoLog &lt;&lt; std::endl;\n    }\n    glDeleteShader(vertexShader);\n    glDeleteShader(fragmentShader);\n\n\n    // Set up vertex data (and buffer(s)) and attribute pointers\n    //GLfloat vertices[] = {\n    //  // First triangle\n    //   0.5f,  0.5f,  // Top Right\n    //   0.5f, -0.5f,  // Bottom Right\n    //  -0.5f,  0.5f,  // Top Left\n    //  // Second triangle\n    //   0.5f, -0.5f,  // Bottom Right\n    //  -0.5f, -0.5f,  // Bottom Left\n    //  -0.5f,  0.5f   // Top Left\n    //};\n    GLfloat vertices[] = {\n         0.5f,  0.5f, 0.0f,  // Top Right\n         0.5f, -0.5f, 0.0f,  // Bottom Right\n        -0.5f, -0.5f, 0.0f,  // Bottom Left\n        -0.5f,  0.5f, 0.0f   // Top Left\n    };\n    GLuint indices[] = {  // Note that we start from 0!\n        0, 1, 3,  // First Triangle\n        1, 2, 3   // Second Triangle\n    };\n    GLuint VBO, VAO, EBO;\n    glGenVertexArrays(1, &amp;VAO);\n    glGenBuffers(1, &amp;VBO);\n    glGenBuffers(1, &amp;EBO);\n    // Bind the Vertex Array Object first, then bind and set vertex buffer(s) and attribute pointer(s).\n    glBindVertexArray(VAO);\n\n    glBindBuffer(GL_ARRAY_BUFFER, VBO);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);\n\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);\n\n    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 3 * sizeof(GLfloat), (GLvoid*)0);\n    glEnableVertexAttribArray(0);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0); // Note that this is allowed, the call to glVertexAttribPointer registered VBO as the currently bound vertex buffer object so afterwards we can safely unbind\n\n    glBindVertexArray(0); // Unbind VAO (it's always a good thing to unbind any buffer/array to prevent strange bugs), remember: do NOT unbind the EBO, keep it bound to this VAO\n\n\n    // Uncommenting this call will result in wireframe polygons.\n    //glPolygonMode(GL_FRONT_AND_BACK, GL_LINE);\n\n    // Game loop\n    while (!glfwWindowShouldClose(window))\n    {\n        // Check if any events have been activiated (key pressed, mouse moved etc.) and call corresponding response functions\n        glfwPollEvents();\n\n        // Render\n        // Clear the colorbuffer\n        glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        // Draw our first triangle\n        glUseProgram(shaderProgram);\n        glBindVertexArray(VAO);\n        //glDrawArrays(GL_TRIANGLES, 0, 6);\n        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);\n        glBindVertexArray(0);\n\n        // Swap the screen buffers\n        glfwSwapBuffers(window);\n    }\n    // Properly de-allocate all resources once they've outlived their purpose\n    glDeleteVertexArrays(1, &amp;VAO);\n    glDeleteBuffers(1, &amp;VBO);\n    glDeleteBuffers(1, &amp;EBO);\n    // Terminate GLFW, clearing any resources allocated by GLFW.\n    glfwTerminate();\n    return 0;\n}\n\n// Is called whenever a key is pressed/released via GLFW\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode)\n{\n    if (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)\n        glfwSetWindowShouldClose(window, GL_TRUE);\n}\n</code></pre>\n\n<p>How can I solve this problem?</p>\n"}, {"tags": ["c++", "opengl", "distributed-system"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1515666110, "post_id": 48194610, "comment_id": 83390338, "body": "What you describe sounds for me like &quot;software genlock&quot;. In the past, where we had these big Onyx racks there was a H/W genlock feature. We used it to sync. 5 IR2 boards for driving a 5-sided cave. The team at TU Braunschweig used Linux PCs instead and I believe the did sync. using network (UDP) but I&#39;m not sure whether they had a genlock."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 1, "creation_date": 1515666155, "post_id": 48194610, "comment_id": 83390372, "body": "Out of curiosity, I googled &quot;opengl software genlock&quot; and found e.g. <a href=\"https://www.researchgate.net/publication/221357176_WinSGL_Software_Genlocking_for_Cost-Effective_Display_Synchronization_under_Microsoft_Windows\" rel=\"nofollow noreferrer\">WinSGL: Software Genlocking for Cost-Effective Display Synchronization under Microsoft Windows</a>. Not sure whether this helps but may be at least some new key words to google yourself..."}], "answers": [{"tags": [], "owner": {"reputation": 7977, "user_id": 1030527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/goMfp.jpg?s=128&g=1", "display_name": "bernie", "link": "https://stackoverflow.com/users/1030527/bernie"}, "is_accepted": false, "score": 0, "last_activity_date": 1515711564, "creation_date": 1515711564, "answer_id": 48217167, "question_id": 48194610, "link": "https://stackoverflow.com/questions/48194610/two-distributed-rendering-contexts-synchronization/48217167#48217167", "title": "two distributed rendering contexts - synchronization", "body": "<p>This is a non-trivial task. There are many facets to this problem and the solution will vary greatly with your precise timing requirements, and hardware and software environment. I've worked with people who devoted perhaps 40% of their full-time job to handling image synchronization across multiple image generation devices.</p>\n\n<p>Nvidia's Quadro line of graphic cards <a href=\"http://www.nvidia.ca/object/IO_10794.html\" rel=\"nofollow noreferrer\">supports synchronization</a> through a common master signal source. Note that you'll have to pay much more for your graphics cards than you're probably used to if you go with Quadros.</p>\n\n<p>Search terms related to what you want to do are \"frame lock\" and \"genlock\".</p>\n"}], "owner": {"reputation": 7539, "user_id": 1371057, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/8a771bfb70b2d4600cd424585787cd05?s=128&d=identicon&r=PG", "display_name": "Irbis", "link": "https://stackoverflow.com/users/1371057/irbis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515711564, "creation_date": 1515611995, "question_id": 48194610, "link": "https://stackoverflow.com/questions/48194610/two-distributed-rendering-contexts-synchronization", "title": "two distributed rendering contexts - synchronization", "body": "<p>I have a logic application which increment an integer counter. That counter should be rendered by two independent applications. Each graphics application creates a window with the opengl context. A logic application communicates with the graphics applications through a network and there may be a few milliseconds lag between sending an actual counter value:</p>\n\n<pre><code>for(const auto&amp; graphicsAppHandle: graphicsApps)\n{\n    graphicsAppHandle.updateCounter(counter);\n}\n</code></pre>\n\n<p>I want to synchronize a counter rendering. How to achieve that ?</p>\n"}, {"tags": ["c++", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 428, "user_id": 4872043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc3dd2112c32e59a07dc1df23fb9c692?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/4872043/saeid"}, "is_accepted": true, "score": 0, "last_activity_date": 1515613642, "creation_date": 1515613642, "answer_id": 48194991, "question_id": 48194557, "link": "https://stackoverflow.com/questions/48194557/how-to-declare-a-function-with-matrix-type-argument-in-eigen/48194991#48194991", "title": "how to declare a function with Matrix type argument in Eigen?", "body": "<p>I got it myself! I must add namespace <code>Eigen</code> before <code>Dynamic</code> and <code>RowMajor</code> in <code>foo.h</code>:</p>\n\n<pre><code>void func(std::vector&lt;int&gt;, cv::Mat_&lt;float&gt;, Eigen::Matrix&lt;float, Eigen::Dynamic, Eigen::Dynamic, Eigen::RowMajor&gt;&amp;, Eigen::VectorXf&amp;);\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 4872043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc3dd2112c32e59a07dc1df23fb9c692?s=128&d=identicon&r=PG&f=1", "display_name": "Saeid", "link": "https://stackoverflow.com/users/4872043/saeid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 1, "accepted_answer_id": 48194991, "answer_count": 1, "score": 1, "last_activity_date": 1515613642, "creation_date": 1515611734, "last_edit_date": 1515612430, "question_id": 48194557, "link": "https://stackoverflow.com/questions/48194557/how-to-declare-a-function-with-matrix-type-argument-in-eigen", "title": "how to declare a function with Matrix type argument in Eigen?", "body": "<p>I've written following code. In this code, I've declared <code>func</code> in <code>foo.h</code>:</p>\n\n<pre><code>#pragma once\n#include \"stdafx.h\"\n#include &lt;vector&gt;\n#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;Eigen&gt;\n\nvoid func(std::vector&lt;int&gt;, cv::Mat_&lt;float&gt;, Eigen::Matrix&lt;float, Dynamic, Dynamic, RowMajor&gt;&amp;, Eigen::VectorXf&amp;);\n</code></pre>\n\n<p>so, in <code>foo.cpp</code>:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"foo.h\"\n#include &lt;vector&gt;\n#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;Eigen&gt;\n\nusing namespace std;\nusing namespace cv;\nusing namespace Eigen;\n\nvoid func(std::vector&lt;int&gt; gnd, cv::Mat_&lt;float&gt; _data, Eigen::Matrix&lt;float, Dynamic, Dynamic, RowMajor&gt; &amp;A, Eigen::VectorXf &amp;B)\n{\n//some code\n}\n</code></pre>\n\n<p>but i have following error:</p>\n\n<p><code>'Dynamic': undeclared identifier</code></p>\n\n<p><code>'RowMajor': undeclared identifier</code></p>\n\n<p><code>'_Rows': invalid template argument for 'Eigen::Matrix', expected compile-time constant expression</code></p>\n\n<p><code>'_Cols': invalid template argument for 'Eigen::Matrix', expected compile-time constant expression</code></p>\n\n<p><code>'_Options': invalid template argument for 'Eigen::Matrix', expected compile-time constant expression</code></p>\n\n<p>How to fix this code?</p>\n"}, {"tags": ["c++", "boost", "boost-spirit-lex"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1515614541, "post_id": 48194465, "comment_id": 83371203, "body": "<a href=\"https://github.com/boostorg/spirit/blob/develop/example/lex/static_lexer/word_count_lexer_static.cpp#L59\" rel=\"nofollow noreferrer\">github.com/boostorg/spirit/blob/develop/example/lex/&hellip;</a> ?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1515618485, "post_id": 48194465, "comment_id": 83373185, "body": "@llonesmiz nailed it"}, {"owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1515618552, "post_id": 48194465, "comment_id": 83373216, "body": "@llonesmiz YES! this did it. Please make it an answer. (This should really be on the page I linked, though.)"}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1515618914, "post_id": 48194465, "comment_id": 83373390, "body": "@FelixDombek I&#39;m certain you could make a better answer than me(please do), I just looked at the examples and found that."}], "answers": [{"tags": [], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "is_accepted": true, "score": 0, "last_activity_date": 1516811715, "creation_date": 1516811715, "answer_id": 48427414, "question_id": 48194465, "link": "https://stackoverflow.com/questions/48194465/converting-a-boost-actor-lexer-to-static-error-as-if-actor-not-used/48427414#48427414", "title": "Converting a Boost actor_lexer to static: Error as if &quot;actor_&quot; not used", "body": "<p>There is a <code>static_actor_lexer</code> template for use in this case, as seen in <a href=\"https://github.com/boostorg/spirit/blob/develop/example/lex/static_lexer/word_count_lexer_static.cpp#L59\" rel=\"nofollow noreferrer\">this example</a>.</p>\n\n<pre><code>lex::lexertl::static_actor_lexer&lt;\n    token_type, lex::lexertl::static_::lexer_wcl\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 48427414, "answer_count": 1, "score": 0, "last_activity_date": 1516811715, "creation_date": 1515611297, "last_edit_date": 1515612666, "question_id": 48194465, "link": "https://stackoverflow.com/questions/48194465/converting-a-boost-actor-lexer-to-static-error-as-if-actor-not-used", "title": "Converting a Boost actor_lexer to static: Error as if &quot;actor_&quot; not used", "body": "<p>I'm converting a Boost Spirit Lex program to the <a href=\"http://www.boost.org/doc/libs/1_66_0/libs/spirit/doc/html/spirit/lex/abstracts/lexer_static_model.html\" rel=\"nofollow noreferrer\">static lexer model</a>. The lexer has a semantic action, therefore the dynamic lexer is of type <code>actor_lexer</code>:</p>\n\n<pre><code>#ifndef USE_STATIC_SI_LEXER\n    typedef lex::lexertl::actor_lexer&lt;token_type&gt; lexer_type;\n#else\n    typedef lex::lexertl::static_lexer&lt;\n        token_type,\n        lex::lexertl::static_::lexer_si\n    &gt; lexer_type;\n#endif\n</code></pre>\n\n<p>Now when compiling with the static lexer, I get the error</p>\n\n<pre><code>boost/spirit/home/lex/lexer/lexertl/static_lexer.hpp(230): \nerror C2039: 'add_action' : is not a member of 'boost::spirit::unused_type'\n</code></pre>\n\n<p>which is exactly what is expected when one uses a semantic action but forgets to change <code>lexer</code> into <code>actor_lexer</code>. I did use the <code>actor_lexer</code> type in the generator program, which seems to work as far as I can tell. </p>\n\n<p>Is there something else I'm missing? Or is it currently impossible to use semantic actions in a static lexer?</p>\n"}, {"tags": ["c++", "std", "cout", "language-design"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1515610720, "post_id": 48194272, "comment_id": 83369300, "body": "It&#39;s not a side effect. It&#39;s just another stream. The operating system may decide to print the stdout stream to the screen."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1515610771, "post_id": 48194272, "comment_id": 83369332, "body": "The <code>&lt;&lt;</code> operator is not for printing but for streaming. And <code>cout</code> is just one of streams. You don&#39;t see <code>&lt;&lt;</code> operator in other languages but many (e.g. Python) treat <code>cout</code> as a stream as well. Everything else is purely opinion based."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 3, "creation_date": 1515613328, "post_id": 48194272, "comment_id": 83370562, "body": "@freakish: No, the <code>&lt;&lt;</code> operator is for bit-shifting.  The iostreams authors overloaded the operator to work with streams and perform insertion (with all the associated restrictions of operator overloading, such as the fact that its associativity and precedence cannot be changed, so they still match bit shifting).  It&#39;s a very reasonable question to ask why iostreams overloads the bit shift operators instead of compound assignment (<code>+=</code>) which is very common for text accumulation in other languages and even other parts of the C++ standard library (<code>std::string</code> uses <code>+=</code>) or other choices."}, {"owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515614465, "post_id": 48194272, "comment_id": 83371158, "body": "@Ben Voigt Oh yeah. It didn&#39;t occur to me that += might make sense sometimes. Good point."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 1, "creation_date": 1515614547, "post_id": 48194272, "comment_id": 83371208, "body": "A saner alternative probably would have been to use a template function to specialize for each type (similar to <code>std::hash</code>), but at the time probably the language missed half the features needed to make it work."}, {"owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1515615154, "post_id": 48194272, "comment_id": 83371496, "body": "@MatteoItalia That would probably be a really bad idea for C++ since it would make a different template instantiation for each combination of parameters. (That is if I&#39;m understanding you correctly and you&#39;re saying this would be something similar to printf). C++ needs type erasure or an Any type for this kind of thing to work sanely. Oh hey, C++17 has <code>any</code>... Except that cout is <i>much</i> older than that."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1515615312, "post_id": 48194272, "comment_id": 83371574, "body": "@benvoight: <code>+=</code> associates to the right. I&#39;m pretty sure Stroustrup mentions that in his discussion of iostreams in The C++ Programming Language. The problem with function calls is that they don&#39;t chain. Pre-template there was no way to write a type safe variadic function."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515615430, "post_id": 48194272, "comment_id": 83371643, "body": "@BenVoigt <code>the &lt;&lt; operator is for bit-shifting</code> Let&#39;s be honest here: no operator exists for solely one purpose. But fair enough: this proves that even this is opinion based. Yet another reason for the question being unfit for SO."}, {"owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1515616048, "post_id": 48194272, "comment_id": 83371989, "body": "@freakish: Why not use a function for that purpose though? Sure, there&#39;s already printf for that job, but it doesn&#39;t use any of the nice features from C++. On the other hand, it is very nice when operators used for multiple purposes have similar semantics."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1515618579, "post_id": 48194272, "comment_id": 83373237, "body": "@rici: Don&#39;t be so sure.  I can make <code>outconsole(&quot;var1 = &quot;)(var1)(&quot;, var2 = &quot;)(var2)(endl);</code> work in C++98 with no templates.  It&#39;s just the Fluent Syntax pattern (returning a reference to <code>*this</code>) combined with <code>operator()</code> overloading."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1515618742, "post_id": 48194272, "comment_id": 83373318, "body": "@freakish: That&#39;s not &quot;opinion-based&quot; at all, it is section <code>[expr.shift]</code> of the C++ Standard (currently that section is number 8.8).  The grammar production that makes <code>cout &lt;&lt; blah;</code> work is named <i>shift-expression</i>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1515619111, "post_id": 48194272, "comment_id": 83373481, "body": "Duplicate of: <a href=\"https://stackoverflow.com/q/4854248/103167\">stackoverflow.com/q/4854248/103167</a>  Too bad people rushed in with a totally wrong closure reason."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515619121, "post_id": 48194272, "comment_id": 83373485, "body": "@BenVoigt: OK, that&#39;s true. But it is not exactly more readable :) (And my point about the associativity of <code>+=</code> stands.)"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1515619289, "post_id": 48194272, "comment_id": 83373550, "body": "@rici: Yes, the associativity of <code>+=</code> is wrong.  Which is a <i>completely objective</i> reason not to use it.  Nothing &quot;opinion-based&quot; at all; the close reason is ill-considered."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1515619438, "post_id": 48194272, "comment_id": 83373617, "body": "@rici: also, I&#39;m pretty sure chained function calls would be a lot more readable, because now the format control parameters (field width, hex vs decimal vs binary, etc) would go in the same argument list with the variable they affect, instead of the current system of manipulator inserters.  Breaking the limitation of two operands, one of which <i>must</i> be the stream, is a powerful thing."}, {"owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515621111, "post_id": 48194272, "comment_id": 83374387, "body": "@BenVoigt <code>30.7.5.1 Class template basic_ostream</code> and in that chapter operator &lt;&lt; clearly defined as &quot;inserter&quot;, not &quot;shift&quot;. And the whole meaning explained there. There is no amibiguity on this topic in the standard. Plus the discussion is pointless. It&#39;s like asking &quot;why do we use brackets for function calls?&quot;. Such opinion based (or philosophical or perhaps psychological) questions are not for SO."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1515621206, "post_id": 48194272, "comment_id": 83374434, "body": "@ben: if we were to continue the debate on <code>operator&lt;&lt;</code>/<code>operator&gt;&gt;</code> vs. <code>operator()</code>, I fear it would undermine your claim that the answer is not opinion-based. As it happens, I don&#39;t have a strong opinion, but maybe Stroustrup did/does. It doesn&#39;t matter; the die is cast. When you or OP design your own languages, you can make and attempt to justify whateve decisions seem most adequate. I dragged out my copy of the BS text, and see no evidence that he even considered call syntax; from what I know, it would not have appealed to him even if he considered it..."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1515621528, "post_id": 48194272, "comment_id": 83374574, "body": "... and, as a final comment, if you were to put controls in the same function call as the variable they modify, you would force every output override (for a user type) to implement every control, which would massively raise the implementation cost. (ImhO :-) )"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1515631676, "post_id": 48194272, "comment_id": 83377838, "body": "@rici: IMO (and unlike the original question, this is an opinion) &quot;format controls are not supported at all for new types that don&#39;t declare support&quot; is a better state of affairs than &quot;manipulators change the stream state which affects the first operation inside the user implementation but then the succeeding operations still inside the same user-defined <code>operator&lt;&lt;</code> returned to the default settings, unless the user-defined <code>operator&lt;&lt;</code> used a temporary stream which the manipulator didn&#39;t affect at all&quot;"}, {"owner": {"reputation": 3432, "user_id": 604642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48daad611ba387f8473b0c1e5792aa3f?s=128&d=identicon&r=PG", "display_name": "shawnhcorey", "link": "https://stackoverflow.com/users/604642/shawnhcorey"}, "edited": false, "score": 0, "creation_date": 1515852673, "post_id": 48194272, "comment_id": 83463585, "body": "The <code>&lt;&lt;</code> notation comes from the here document of shell scripting. They thought it would be easier to learn. <a href=\"https://en.wikipedia.org/wiki/Here_document\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Here_document</a>"}], "owner": {"reputation": 557, "user_id": 5079779, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/zL7No.jpg?s=128&g=1", "display_name": "Beefster", "link": "https://stackoverflow.com/users/5079779/beefster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "closed_date": 1515610704, "answer_count": 0, "score": 2, "last_activity_date": 1515614380, "creation_date": 1515610431, "last_edit_date": 1515614380, "question_id": 48194272, "link": "https://stackoverflow.com/questions/48194272/why-does-c-cout-use-the-operator-instead-of-a-function-for-printing", "closed_reason": "Opinion-based", "title": "Why does C++ cout use the &lt;&lt; operator instead of a function for printing?", "body": "<p>When I first saw C++ years ago, I thought it was very strange how it used <code>cout</code> and <code>&lt;&lt;</code> to print to the screen. As far as I'm aware, C++ is the only language that uses an operator to print to the screen, so it definitely stands out as unusual.</p>\n\n<p>The operator isn't entirely inconsistent, as there are other streams that accept the &lt;&lt; operator with similar semantics, plus you can usually \"reverse\" the operator to >> for cin and similar. It just seems odd to me (and a little obtuse) that an operator originally used to shift bits gained a very different meaning.</p>\n\n<p>A few languages have operators that have side effects. Some languages use <code>!</code> as a binary operator for passing messages, which may or may not have side effects, depending on the message being passed.</p>\n\n<p>But the thing is: C++ could have used functions to accomplish the same purpose, and depending on who you ask, that would be much clearer in most cases.</p>\n\n<p><strong>What advantage is there in using an operator instead of a function?</strong></p>\n\n<p>I can see a possible rationale with type safety. It is an improvement over printf for that particular issue, at least. It's a lot less verbose than a bunch of calls to an overloaded non-formatted print function. But that's a pretty flimsy use case. You can't exactly look at a C++ source file if you've never seen C++ before and know that the couts print to the screen.</p>\n"}, {"tags": ["c++", "opengl-es", "opengl-es-2.0", "freetype"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1515613701, "post_id": 48193945, "comment_id": 83370748, "body": "I&#39;m really surprised <code>text.v.glsl</code> compiled given that you&#39;re trying to jam int literals into floats in that <code>vec4</code> constructor on line 5 (no automatic type casts in GL&#39;s <code>#version 120</code> or in GLES&#39; <code>#version 100</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1515619741, "creation_date": 1515619741, "answer_id": 48196374, "question_id": 48193945, "link": "https://stackoverflow.com/questions/48193945/opengl-error-combining-renderer-text-from-ttf-and-background-texture/48196374#48196374", "title": "OpenGL error combining renderer text from ttf and background texture", "body": "<ol>\n<li><a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glUniform.xml\" rel=\"nofollow noreferrer\"><code>glUniform</code></a> operates on the program object that was made part of current state by calling <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glUseProgram.xml\" rel=\"nofollow noreferrer\"><code>glUseProgram</code></a>.</li>\n</ol>\n\n<p>Because of that the call of <code>glUniform1i</code> in the function <code>atlas</code> is useless, because at this point there is no current program at all. You can delete this call, because you set the uniform later.</p>\n\n<hr>\n\n<ol start=\"2\">\n<li>The texture <code>glTextures[iTexture]</code>, which you bind in the function <code>vLoadPngToTexture</code> is not generated.</li>\n</ol>\n\n<p>Change your code somehow like this:</p>\n\n<pre><code>glGenTextures(1, glTextures+iTexture);\nglBindTexture(GL_TEXTURE_2D, glTextures[iTexture]);\n</code></pre>\n\n<hr>\n\n<ol start=\"3\">\n<li>You do not use an array buffer when you draw the background, but you use an array buffer when you draw the text. In the function <code>render_text</code> you bind <code>glBindBuffer(GL_ARRAY_BUFFER, vbo);</code> but you never release it. This causes that the array buffer <code>vbo</code>is still bound when the background should be drawn in the next cycle. Becauseof that, <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/es2.0/xhtml/glVertexAttribPointer.xml\" rel=\"nofollow noreferrer\"><code>glVertexAttribPointer</code></a>, in the function <code>display</code>, does not do what you expect it to do.</li>\n</ol>\n\n<p>You can fix this by adding</p>\n\n<pre><code>glBindBuffer(GL_ARRAY_BUFFER, 0)\n</code></pre>\n\n<p>to the end of the function  <code>render_text</code>.</p>\n"}], "owner": {"reputation": 155, "user_id": 4538470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/925c58a4a95e242a2f9febb0f9f60e20?s=128&d=identicon&r=PG&f=1", "display_name": "Redhunt", "link": "https://stackoverflow.com/users/4538470/redhunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 591, "favorite_count": 0, "accepted_answer_id": 48196374, "answer_count": 1, "score": 0, "last_activity_date": 1515619741, "creation_date": 1515608934, "last_edit_date": 1515613498, "question_id": 48193945, "link": "https://stackoverflow.com/questions/48193945/opengl-error-combining-renderer-text-from-ttf-and-background-texture", "title": "OpenGL error combining renderer text from ttf and background texture", "body": "<p>I am having a problem with Opengl and Opengl ES. I want to make squares with png image textures and render text in front of these squares. </p>\n\n<p>I can make squares with textures from png images, and I can render text from ttf like in <a href=\"https://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Text_Rendering_02\" rel=\"nofollow noreferrer\">this example</a>, but it works only if not executing at the same time. I will try to explain better (The example code is too dirty because the code I'm getting from one software is more structured and bigger, and this code is only for an example):</p>\n\n<p>I have one GLProgram with one Vertex Shader and one Fragment Shader for texture squares. I have another GLProgram with another Vertex Shader and another Fragment Shader to make Renderer text.</p>\n\n<p>If I load all the GL programs and only draw each frame only the texture square, I can see it perfectly.</p>\n\n<p>If I draw the renderer text (using his GLprogram) before or after the texture square (doing his glUseProgram before drawing the square) I can only see the texture text on screen and the background color that's created with (glClearColor(x.xf, x.xf, x.xf, x.xf)) and I can't see the texture square.</p>\n\n<p>Does anyone know where the error is in the code?</p>\n\n<p>Now I will post the shaders and the example source code:</p>\n\n<p>back.v.glsl:</p>\n\n<pre><code>attribute vec4 g_vPosition;\nattribute vec3 g_vColor;\nattribute vec2 g_vTexCoord;\n\nvarying   vec3 g_vVSColor;\nvarying   vec2 g_vVSTexCoord;\n\nvoid main()                 \n{                               \n    gl_Position  = g_vPosition; \n    g_vVSColor = g_vColor;              \n    g_vVSTexCoord = g_vTexCoord;            \n}\n</code></pre>\n\n<p>back.f.glsl:</p>\n\n<pre><code>uniform sampler2D s_texture;\nvarying   vec3      g_vVSColor; \nvarying   vec2 g_vVSTexCoord;\n\nvoid main()                     \n{                               \n    gl_FragColor = texture2D(s_texture,g_vVSTexCoord);  \n}\n</code></pre>\n\n<p>text.v.glsl:</p>\n\n<pre><code>attribute vec4 coord;\nvarying vec2 texpos;\n\nvoid main(void) {\n  gl_Position = vec4(coord.xy, 0, 1);\n  texpos = coord.zw;\n}\n</code></pre>\n\n<p>text.f.glsl:</p>\n\n<pre><code>varying vec2 texpos;\nuniform sampler2D tex;\nuniform vec4 color;\n\nvoid main(void) {\n  //gl_FragColor = vec4(1, 1, 1, texture2D(tex, texpos).a) * color;\n  gl_FragColor = vec4(color.rgb, texture2D(tex, texpos).a);\n}\n</code></pre>\n\n<p>Source Code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;assert.h&gt;\n\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;assert.h&gt;\n#include &lt;math.h&gt;\n#include &lt;signal.h&gt;\n\n#include &lt;GLES2/gl2.h&gt;\n#include &lt;EGL/egl.h&gt;\n\n#include &lt;X11/Xlib.h&gt;\n#include &lt;X11/Xatom.h&gt;\n#include &lt;X11/Xutil.h&gt;\n\n#include &lt;unistd.h&gt;\n#include &lt;sys/time.h&gt;\n\n#include &lt;png.h&gt;\n\nEGLDisplay          egldisplay;\nEGLConfig           eglconfig;\nEGLSurface          eglsurface;\nEGLContext          eglcontext;\nEGLNativeWindowType eglNativeWindow;\nEGLNativeDisplayType eglNativeDisplayType;\n\n#include &lt;ft2build.h&gt;\n#include FT_FREETYPE_H\n\nGLuint program;\nGLint attribute_coord;\nGLint uniform_tex;\nGLint uniform_color;\n\nGLuint programBack;\nGLint coordBack = 0;\nGLint texBack = 2;\nGLint colorBack = 1;\n\nstruct point {\n    GLfloat x;\n    GLfloat y;\n    GLfloat s;\n    GLfloat t;\n};\n\nGLuint vbo;\n\nFT_Library ft;\nFT_Face face;\n\n// Maximum texture width\n#define MAXWIDTH 800\n\nconst char *fontfilename;\n\nfloat VertexColors[] = {\n\n    /* Red */\n    1.0f, 0.0f, 0.0f, 1.0f,\n    /* Red */\n    1.0f, 0.0f, 0.0f, 1.0f,\n\n    /* Green */\n    0.0f, 1.0f, 0.0f, 1.0f,\n\n    /* Green */\n    0.0f, 1.0f, 0.0f, 1.0f,\n\n};\n\nfloat VertexTexCoords[] = {\n    /* Front Face */\n    0.0f,0.0f,\n    1.0f,0.0f,\n    0.0f,1.0f,\n    1.0f,1.0f,\n};\n\nfloat fBackgroundPosition[12] = {\n    /* Bottom Left Of The Quad (Front) */\n    -1.0f,-1.0f,1.0f,\n    /* Bottom Right Of The Quad (Front) */\n    1.0f,-1.0f,1.0f,\n    /* Top Left Of The Quad (Front) */\n    -1.0f,1.0f,1.0f,\n    /* Top Right Of The Quad (Front) */\n    1.0f,1.0f,1.0f,\n};\n\nGLuint glTextures[4];\n\n\n/**\n * The atlas struct holds a texture that contains the visible US-ASCII characters\n * of a certain font rendered with a certain character height.\n * It also contains an array that contains all the information necessary to\n * generate the appropriate vertex and texture coordinates for each character.\n *\n * After the constructor is run, you don't need to use any FreeType functions anymore.\n */\nstruct atlas {\n    GLuint tex;     // texture object\n\n    unsigned int w;         // width of texture in pixels\n    unsigned int h;         // height of texture in pixels\n\n    struct {\n        float ax;   // advance.x\n        float ay;   // advance.y\n\n        float bw;   // bitmap.width;\n        float bh;   // bitmap.height;\n\n        float bl;   // bitmap_left;\n        float bt;   // bitmap_top;\n\n        float tx;   // x offset of glyph in texture coordinates\n        float ty;   // y offset of glyph in texture coordinates\n    } c[256];       // character information\n\n    atlas(FT_Face face, int height) {\n        FT_Set_Pixel_Sizes(face, 0, height);\n        FT_GlyphSlot g = face-&gt;glyph;\n\n        unsigned int roww = 0;\n        unsigned int rowh = 0;\n        w = 0;\n        h = 0;\n\n        memset(c, 0, sizeof c);\n\n        /* Find minimum size for a texture holding all visible ASCII characters */\n        //for (int i = 32; i &lt; 128; i++) {\n        for (int i = 32; i &lt; 254; i++) {\n            if (FT_Load_Char(face, i, FT_LOAD_RENDER)) {\n                fprintf(stderr, \"Loading character %c failed!\\n\", i);\n                continue;\n            }\n            if (roww + g-&gt;bitmap.width + 1 &gt;= MAXWIDTH) {\n                w = std::max(w, roww);\n                h += rowh;\n                roww = 0;\n                rowh = 0;\n            }\n            roww += g-&gt;bitmap.width + 1;\n            rowh = std::max(rowh, g-&gt;bitmap.rows);\n        }\n\n        w = std::max(w, roww);\n        h += rowh;\n\n        /* Create a texture that will be used to hold all ASCII glyphs */\n        glActiveTexture(GL_TEXTURE0);\n        glGenTextures(1, &amp;tex);\n        glBindTexture(GL_TEXTURE_2D, tex);\n        glUniform1i(uniform_tex, 0);\n\n        glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, w, h, 0, GL_ALPHA, GL_UNSIGNED_BYTE, 0);\n\n        /* We require 1 byte alignment when uploading texture data */\n        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\n\n        /* Clamping to edges is important to prevent artifacts when scaling */\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\n\n        /* Linear filtering usually looks best for text */\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n        /* Paste all glyph bitmaps into the texture, remembering the offset */\n        int ox = 0;\n        int oy = 0;\n\n        rowh = 0;\n\n        //for (int i = 32; i &lt; 128; i++) {\n        for (int i = 32; i &lt; 254; i++) {\n            if (FT_Load_Char(face, i, FT_LOAD_RENDER)) {\n                fprintf(stderr, \"Loading character %c failed!\\n\", i);\n                continue;\n            }\n\n            if (ox + g-&gt;bitmap.width + 1 &gt;= MAXWIDTH) {\n                oy += rowh;\n                rowh = 0;\n                ox = 0;\n            }\n\n            glTexSubImage2D(GL_TEXTURE_2D, 0, ox, oy, g-&gt;bitmap.width, g-&gt;bitmap.rows, GL_ALPHA, GL_UNSIGNED_BYTE, g-&gt;bitmap.buffer);\n            c[i].ax = g-&gt;advance.x &gt;&gt; 6;\n            c[i].ay = g-&gt;advance.y &gt;&gt; 6;\n\n            c[i].bw = g-&gt;bitmap.width;\n            c[i].bh = g-&gt;bitmap.rows;\n\n            c[i].bl = g-&gt;bitmap_left;\n            c[i].bt = g-&gt;bitmap_top;\n\n            c[i].tx = ox / (float)w;\n            c[i].ty = oy / (float)h;\n\n            rowh = std::max(rowh, g-&gt;bitmap.rows);\n            ox += g-&gt;bitmap.width + 1;\n        }\n\n        fprintf(stderr, \"Generated a %d x %d (%d kb) texture atlas\\n\", w, h, w * h / 1024);\n    }\n\n    ~atlas() {\n        glDeleteTextures(1, &amp;tex);\n    }\n};\n\natlas *a48;\natlas *a24;\natlas *a12;\n\n\n//#define GL_ES_VERSION_2_0\n\n/**\n * Store all the file's contents in memory, useful to pass shaders\n * source code to OpenGL\n */\nchar* file_read(const char* filename)\n{\n    FILE* in = fopen(filename, \"rb\");\n    if (in == NULL) return NULL;\n\n    int res_size = BUFSIZ;\n    char* res = (char*)malloc(res_size);\n    int nb_read_total = 0;\n\n    while (!feof(in) &amp;&amp; !ferror(in)) {\n        if (nb_read_total + BUFSIZ &gt; res_size) {\n            if (res_size &gt; 10 * 1024 * 1024) break;\n            res_size = res_size * 2;\n            res = (char*)realloc(res, res_size);\n        }\n        char* p_res = res + nb_read_total;\n        nb_read_total += fread(p_res, 1, BUFSIZ, in);\n    }\n\n    fclose(in);\n    res = (char*)realloc(res, nb_read_total + 1);\n    res[nb_read_total] = '\\0';\n    return res;\n}\n\n/**\n * Compile the shader from file 'filename', with error handling\n */\nGLuint create_shader(const char* filename, GLenum type)\n{\n    const GLchar* source = file_read(filename);\n    if (source == NULL) {\n        fprintf(stderr, \"Error opening %s: \", filename); perror(\"\");\n        return 0;\n    }\n    else {\n        printf(\"Load shader correctly %s\\n\", filename);\n    }\n    GLuint res = glCreateShader(type);\n    const GLchar* sources[] = {\n        // Define GLSL version\n#ifdef GL_ES_VERSION_2_0\n        \"#version 100\\n\"  // OpenGL ES 2.0\n#else\n        \"#version 120\\n\"  // OpenGL 2.1\n#endif\n        ,\n        // GLES2 precision specifiers\n#ifdef GL_ES_VERSION_2_0\n        // Define default float precision for fragment shaders:\n        (type == GL_FRAGMENT_SHADER) ?\n        \"#ifdef GL_FRAGMENT_PRECISION_HIGH\\n\"\n        \"precision highp float;           \\n\"\n        \"#else                            \\n\"\n        \"precision mediump float;         \\n\"\n        \"#endif                           \\n\"\n        : \"\"\n        // Note: OpenGL ES automatically defines this:\n        // #define GL_ES\n#else\n        // Ignore GLES 2 precision specifiers:\n        \"#define lowp   \\n\"\n        \"#define mediump\\n\"\n        \"#define highp  \\n\"\n#endif\n        ,\n        source };\n    glShaderSource(res, 3, sources, NULL);\n    free((void*)source);\n\n    glCompileShader(res);\n    GLint compile_ok = GL_FALSE;\n    glGetShaderiv(res, GL_COMPILE_STATUS, &amp;compile_ok);\n    if (compile_ok == GL_FALSE) {\n        fprintf(stderr, \"%s:\", filename);\n        //print_log(res);\n        glDeleteShader(res);\n        return 0;\n    }\n\n    return res;\n}\n\nGLuint create_program(const char *vertexfile, const char *fragmentfile) {\n    printf(\"Creating program\\n\");\n\n    GLuint program = glCreateProgram();\n    GLuint shader;\n\n    printf(\"Loading program\\n\");\n\n    if (vertexfile) {\n        shader = create_shader(vertexfile, GL_VERTEX_SHADER);\n        if (!shader)\n            return 0;\n        glAttachShader(program, shader);\n    }\n\n    if (fragmentfile) {\n        shader = create_shader(fragmentfile, GL_FRAGMENT_SHADER);\n        if (!shader)\n            return 0;\n        glAttachShader(program, shader);\n    }\n\n    glLinkProgram(program);\n    GLint link_ok = GL_FALSE;\n    glGetProgramiv(program, GL_LINK_STATUS, &amp;link_ok);\n    if (!link_ok) {\n        fprintf(stderr, \"glLinkProgram:\");\n        //print_log(program);\n        glDeleteProgram(program);\n        return 0;\n    }\n\n    return program;\n}\n\nGLint get_attrib(GLuint program, const char *name) {\n    GLint attribute = glGetAttribLocation(program, name);\n    if (attribute == -1)\n        fprintf(stderr, \"Could not bind attribute %s\\n\", name);\n    return attribute;\n}\n\nGLint get_uniform(GLuint program, const char *name) {\n    GLint uniform = glGetUniformLocation(program, name);\n    if (uniform == -1)\n        fprintf(stderr, \"Could not bind uniform %s\\n\", name);\n    return uniform;\n}\n\nbool bLoadPngImage(char *name, int &amp;outWidth, int &amp;outHeight, bool &amp;outHasAlpha, GLubyte **outData) {\n    png_structp png_ptr;\n    png_infop info_ptr;\n    unsigned int sig_read = 0;\n    int color_type, interlace_type;\n    FILE *fp;\n\n    if ((fp = fopen(name, \"rb\")) == NULL)\n        return false;\n\n    /* Create and initialize the png_struct\n     * with the desired error handler\n     * functions.  If you want to use the\n     * default stderr and longjump method,\n     * you can supply NULL for the last\n     * three parameters.  We also supply the\n     * the compiler header file version, so\n     * that we know if the application\n     * was compiled with a compatible version\n     * of the library.  REQUIRED\n     */\n    png_ptr = png_create_read_struct(PNG_LIBPNG_VER_STRING,\n        NULL, NULL, NULL);\n\n    if (png_ptr == NULL) {\n        fclose(fp);\n        return false;\n    }\n\n    /* Allocate/initialize the memory\n    * for image information.  REQUIRED. */\n    info_ptr = png_create_info_struct(png_ptr);\n    if (info_ptr == NULL) {\n        fclose(fp);\n        png_destroy_read_struct(&amp;png_ptr, NULL, NULL);\n        return false;\n    }\n\n    /* Set error handling if you are\n     * using the setjmp/longjmp method\n     * (this is the normal method of\n     * doing things with libpng).\n     * REQUIRED unless you  set up\n     * your own error handlers in\n     * the png_create_read_struct()\n     * earlier.\n     */\n    if (setjmp(png_jmpbuf(png_ptr))) {\n        /* Free all of the memory associated\n         * with the png_ptr and info_ptr */\n        png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);\n        fclose(fp);\n        /* If we get here, we had a\n         * problem reading the file */\n        return false;\n    }\n\n    /* Set up the output control if\n     * you are using standard C streams */\n    png_init_io(png_ptr, fp);\n\n    /* If we have already\n     * read some of the signature */\n    png_set_sig_bytes(png_ptr, sig_read);\n\n    /*\n     * If you have enough memory to read\n     * in the entire image at once, and\n     * you need to specify only\n     * transforms that can be controlled\n     * with one of the PNG_TRANSFORM_*\n     * bits (this presently excludes\n     * dithering, filling, setting\n     * background, and doing gamma\n     * adjustment), then you can read the\n     * entire image (including pixels)\n     * into the info structure with this\n     * call\n     *\n     * PNG_TRANSFORM_STRIP_16 |\n     * PNG_TRANSFORM_PACKING  forces 8 bit\n     * PNG_TRANSFORM_EXPAND forces to\n     *  expand a palette into RGB\n     */\n    png_read_png(png_ptr, info_ptr, PNG_TRANSFORM_STRIP_16 | PNG_TRANSFORM_PACKING | PNG_TRANSFORM_EXPAND, NULL);\n\n    png_uint_32 width, height;\n    int bit_depth;\n    png_get_IHDR(png_ptr, info_ptr, &amp;width, &amp;height, &amp;bit_depth, &amp;color_type,\n        &amp;interlace_type, NULL, NULL);\n    outWidth = width;\n    outHeight = height;\n\n    unsigned int row_bytes = png_get_rowbytes(png_ptr, info_ptr);\n    *outData = (unsigned char*)malloc(row_bytes * outHeight);\n\n    png_bytepp row_pointers = png_get_rows(png_ptr, info_ptr);\n\n    for (int i = 0; i &lt; outHeight; i++) {\n        // note that png is ordered top to\n        // bottom, but OpenGL expect it bottom to top\n        // so the order or swapped\n        memcpy(*outData + (row_bytes * (outHeight - 1 - i)), row_pointers[i], row_bytes);\n    }\n\n    /* Clean up after the read,\n     * and free any memory allocated */\n    png_destroy_read_struct(&amp;png_ptr, &amp;info_ptr, NULL);\n\n    /* Close the file */\n    fclose(fp);\n\n    /* That's it */\n    return true;\n}\n\nvoid vLoadPngToTexture(std::string sFilename, int iTexture) {\n    GLubyte *glTextureImage;\n    int iWidth, iHeight;\n    bool bHasAlpha;\n    //char filename[] = \"/home/root/res/drawable/disclaimerantamina.png\";\n    //bool success = bLoadPngImage((char *)sFilename.c_str(), iWidth, iHeight, bHasAlpha, &amp;glTextureImage);\n    //if (!success) {\n    if (!bLoadPngImage((char *)sFilename.c_str(), iWidth, iHeight, bHasAlpha, &amp;glTextureImage)) {\n        std::cout &lt;&lt; \"Unable to load png file\" &lt;&lt; std::endl;\n        exit(0);\n    }\n\n    std::cout &lt;&lt; \"Image loaded \" &lt;&lt; sFilename &lt;&lt; \" \" &lt;&lt; iWidth &lt;&lt; \" \" &lt;&lt; iHeight &lt;&lt; \" alpha \" &lt;&lt; bHasAlpha &lt;&lt; std::endl;\n\n    glBindTexture(GL_TEXTURE_2D, glTextures[iTexture]);\n    /* Generate The Texture */\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, iWidth,\n        iHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE,\n        glTextureImage);\n    /* Linear Filtering */\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n\n\n    std::cout &lt;&lt; \"Texture loaded \" &lt;&lt; iTexture &lt;&lt; \" - \" &lt;&lt; sFilename &lt;&lt; std::endl;\n}\n\nint init_resources() {\n    /* Initialize the FreeType2 library */\n    if (FT_Init_FreeType(&amp;ft)) {\n        fprintf(stderr, \"Could not init freetype library\\n\");\n        return 0;\n    }\n\n    /* Load a font */\n    if (FT_New_Face(ft, fontfilename, 0, &amp;face)) {\n        fprintf(stderr, \"Could not open font %s\\n\", fontfilename);\n        return 0;\n    }\n\n    printf(\"Load Font Correctly\\n\");\n\n    program = create_program(\"text.v.glsl\", \"text.f.glsl\");\n    if (program == 0)\n        return 0;\n\n    printf(\"Create program Correctly\\n\");\n\n    attribute_coord = get_attrib(program, \"coord\");\n    uniform_tex = get_uniform(program, \"tex\");\n    uniform_color = get_uniform(program, \"color\");\n\n    if (attribute_coord == -1 || uniform_tex == -1 || uniform_color == -1)\n        return 0;\n\n    printf(\"Create attributes Correctly\\n\");\n\n    programBack = create_program(\"back.v.glsl\", \"back.f.glsl\");\n\n    printf(\"Create program Background Correctly\\n\");\n\n    coordBack = get_attrib(programBack, \"g_vPosition\");\n    //colorBack = get_attrib(programBack, \"g_vColor\");\n    texBack = get_attrib(programBack, \"g_vTexCoord\");\n\n    if (coordBack == -1 || colorBack == -1 || texBack == -1)\n        return 0;\n\n    // Create the vertex buffer object\n    glGenBuffers(1, &amp;vbo);\n\n    ///* Create texture atlasses for several font sizes */\n    a48 = new atlas(face, 48);\n    a24 = new atlas(face, 24);\n    a12 = new atlas(face, 12);\n\n    return 1;\n}\n\n/**\n * Render text using the currently loaded font and currently set font size.\n * Rendering starts at coordinates (x, y), z is always 0.\n * The pixel coordinates that the FreeType2 library uses are scaled by (sx, sy).\n */\nvoid render_text(const char *text, atlas * a, float x, float y, float sx, float sy) {\n    const uint8_t *p;\n\n    /* Use the texture containing the atlas */\n    glBindTexture(GL_TEXTURE_2D, a-&gt;tex);\n    glUniform1i(uniform_tex, 0);\n\n    /* Set up the VBO for our vertex data */\n    glEnableVertexAttribArray(attribute_coord);\n    glBindBuffer(GL_ARRAY_BUFFER, vbo);\n    glVertexAttribPointer(attribute_coord, 4, GL_FLOAT, GL_FALSE, 0, 0);\n\n    point coords[6 * strlen(text)];\n    int c = 0;\n\n    /* Loop through all characters */\n    for (p = (const uint8_t *)text; *p; p++) {\n        /* Calculate the vertex and texture coordinates */\n        float x2 = x + a-&gt;c[*p].bl * sx;\n        float y2 = -y - a-&gt;c[*p].bt * sy;\n        float w = a-&gt;c[*p].bw * sx;\n        float h = a-&gt;c[*p].bh * sy;\n\n        /* Advance the cursor to the start of the next character */\n        x += a-&gt;c[*p].ax * sx;\n        y += a-&gt;c[*p].ay * sy;\n\n        /* Skip glyphs that have no pixels */\n        if (!w || !h)\n            continue;\n\n        coords[c++] = (point) {\n            x2, -y2, a-&gt;c[*p].tx, a-&gt;c[*p].ty\n        };\n        coords[c++] = (point) {\n            x2 + w, -y2, a-&gt;c[*p].tx + a-&gt;c[*p].bw / a-&gt;w, a-&gt;c[*p].ty\n        };\n        coords[c++] = (point) {\n            x2, -y2 - h, a-&gt;c[*p].tx, a-&gt;c[*p].ty + a-&gt;c[*p].bh / a-&gt;h\n        };\n        coords[c++] = (point) {\n            x2 + w, -y2, a-&gt;c[*p].tx + a-&gt;c[*p].bw / a-&gt;w, a-&gt;c[*p].ty\n        };\n        coords[c++] = (point) {\n            x2, -y2 - h, a-&gt;c[*p].tx, a-&gt;c[*p].ty + a-&gt;c[*p].bh / a-&gt;h\n        };\n        coords[c++] = (point) {\n            x2 + w, -y2 - h, a-&gt;c[*p].tx + a-&gt;c[*p].bw / a-&gt;w, a-&gt;c[*p].ty + a-&gt;c[*p].bh / a-&gt;h\n        };\n    }\n\n    /* Draw all the character on the screen in one go */\n    glBufferData(GL_ARRAY_BUFFER, sizeof coords, coords, GL_DYNAMIC_DRAW);\n    glDrawArrays(GL_TRIANGLES, 0, c);\n\n    glDisableVertexAttribArray(attribute_coord);\n}\n\nvoid display() {\n    //float sx = 2.0 / glutGet(GLUT_WINDOW_WIDTH);\n    //float sy = 2.0 / glutGet(GLUT_WINDOW_HEIGHT);\n\n    float sx = 2.0 / 800;\n    float sy = 2.0 / 480;\n\n    glViewport(0, 0, 800, 480);\n\n    glUseProgram(programBack);\n\n    /* White background */\n    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    /* Enable blending, necessary for our alpha texture */\n    glEnable(GL_BLEND);\n    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    glVertexAttribPointer(coordBack, 3, GL_FLOAT, 0, 0, fBackgroundPosition);\n    glEnableVertexAttribArray(coordBack);\n\n    //glVertexAttribPointer(colorBack, 4, GL_FLOAT, 0, 0, VertexColors);\n    //glEnableVertexAttribArray(colorBack);\n\n    glVertexAttribPointer(texBack, 2, GL_FLOAT, 0, 0, VertexTexCoords);\n    glEnableVertexAttribArray(texBack);\n\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, glTextures[0]);\n\n    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);\n\n    // Cleanup\n    glDisableVertexAttribArray(coordBack);\n    glDisableVertexAttribArray(colorBack);\n    glDisableVertexAttribArray(texBack);\n\n    glUseProgram(program);\n\n    GLfloat black[4] = { 0, 0, 0, 1 };\n    GLfloat red[4] = { 1, 0, 0, 1 };\n    GLfloat transparent_green[4] = { 0, 1, 0, 0.5 };\n\n    /* Set color to black */\n    //glUniform4fv(uniform_color, 1, black);\n\n    /* Effects of alignment */\n    render_text(\"The \u00f1 \u00d1 Quick Brown Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 50 * sy, sx, sy);\n    //render_text(\"The , . - + { } &amp; % Misaligned Fox Jumps Over The Lazy Dog\", a48, -1 + 8.5 * sx, 1 - 100.5 * sy, sx, sy);\n\n    ///* Scaling the texture versus changing the font size */\n    //render_text(\"The \u00e7 \u00f3 Small Texture Scaled Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 175 * sy, sx * 0.5, sy * 0.5);\n    //render_text(\"The Small Font Sized Fox Jumps Over The Lazy Dog\", a24, -1 + 8 * sx, 1 - 200 * sy, sx, sy);\n    //render_text(\"The Tiny Texture Scaled Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 235 * sy, sx * 0.25, sy * 0.25);\n    //render_text(\"The Tiny Font Sized Fox Jumps Over The Lazy Dog\", a12, -1 + 8 * sx, 1 - 250 * sy, sx, sy);\n\n    ///* Colors and transparency */\n    //render_text(\"The Solid Black Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 430 * sy, sx, sy);\n\n    //glUniform4fv(uniform_color, 1, red);\n    //render_text(\"The Solid Red Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 330 * sy, sx, sy);\n    //render_text(\"The Solid Red Fox Jumps Over The Lazy Dog\", a48, -1 + 28 * sx, 1 - 450 * sy, sx, sy);\n\n    //glUniform4fv(uniform_color, 1, transparent_green);\n    //render_text(\"The Transparent Green Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 380 * sy, sx, sy);\n    //render_text(\"The Transparent Green Fox Jumps Over The Lazy Dog\", a48, -1 + 18 * sx, 1 - 440 * sy, sx, sy);\n\n    eglSwapBuffers(egldisplay, eglsurface);\n}\n\nvoid free_resources() {\n    glDeleteProgram(program);\n}\n\nint init(void)\n{\n    Display    *x_display;\n    Window      win;\n\n    x_display = XOpenDisplay(\":0\");   // open the standard display (the primary screen)\n    if (x_display == NULL) {\n        std::cout &lt;&lt; \"cannot connect to X server\" &lt;&lt; std::endl;\n        return 1;\n    }\n\n    Window root = DefaultRootWindow(x_display);   // get the root window (usually the whole screen)\n\n    XSetWindowAttributes  swa;\n    swa.event_mask = ExposureMask | PointerMotionMask | KeyPressMask;\n\n    win = XCreateWindow(   // create a window with the provided parameters\n        x_display, root,\n        0, 0, 800, 480, 0,\n        CopyFromParent, InputOutput,\n        CopyFromParent, CWEventMask,\n        &amp;swa);\n\n    XMapWindow(x_display, win);             // make the window visible on the screen\n    XStoreName(x_display, win, \"GL test\"); // give the window a name\n\n    static const EGLint s_configAttribs[] =\n    {\n        EGL_RENDERABLE_TYPE,    4,\n        EGL_RED_SIZE,           5,\n        EGL_GREEN_SIZE,         6,\n        EGL_BLUE_SIZE,          5,\n        EGL_ALPHA_SIZE,         0,\n        EGL_SAMPLES,            0,\n        EGL_SAMPLE_BUFFERS,     1,\n        EGL_SAMPLES,            4,  // This is for 4x MSAA.\n        EGL_NONE\n    };\n\n\n    EGLint numconfigs;\n\n    egldisplay = eglGetDisplay((EGLNativeDisplayType)x_display);\n    eglInitialize(egldisplay, NULL, NULL);\n    assert(eglGetError() == EGL_SUCCESS);\n    eglBindAPI(EGL_OPENGL_ES_API);\n\n    eglChooseConfig(egldisplay, s_configAttribs, &amp;eglconfig, 1, &amp;numconfigs);\n    assert(eglGetError() == EGL_SUCCESS);\n    assert(numconfigs == 1);\n\n    eglsurface = eglCreateWindowSurface(egldisplay, eglconfig, win, NULL);\n\n    assert(eglGetError() == EGL_SUCCESS);\n    EGLint ContextAttribList[] = { EGL_CONTEXT_CLIENT_VERSION, 2, EGL_NONE };\n    eglcontext = eglCreateContext(egldisplay, eglconfig, EGL_NO_CONTEXT, ContextAttribList);\n    assert(eglGetError() == EGL_SUCCESS);\n    eglMakeCurrent(egldisplay, eglsurface, eglsurface, eglcontext);\n    assert(eglGetError() == EGL_SUCCESS);\n\n    printf(\"VENDOR = %s\\n\", glGetString(GL_VENDOR));\n    printf(\"RENDERER = %s\\n\", glGetString(GL_RENDERER));\n    printf(\"VERSION = %s\\n\", glGetString(GL_VERSION));\n}\n\nint main(int argc, char *argv[]) {\n    if (argc &gt; 1)\n        fontfilename = argv[1];\n    else\n        fontfilename = \"FreeSans.ttf\";\n\n    init();\n\n    init_resources();\n\n    std::string sBackground = \"back2.png\";\n\n    vLoadPngToTexture(sBackground, 0);\n\n    //// this is needed for time measuring  --&gt;  frames per second\n    struct  timezone  tz;\n    timeval  t1, t2;\n    gettimeofday(&amp;t1, &amp;tz);\n    int  num_frames = 0;\n\n    while (1) {\n        display();\n        if (++num_frames % 30 == 0) {\n        //if (++num_frames % 100 == 0) {\n            gettimeofday(&amp;t2, &amp;tz);\n            float dt = t2.tv_sec - t1.tv_sec + (t2.tv_usec - t1.tv_usec) * 1e-6;\n            std::cout &lt;&lt; \"fps: \" &lt;&lt; num_frames / dt &lt;&lt; std::endl;\n            num_frames = 0;\n            t1 = t2;\n        }\n        usleep(32000);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If I comment the line <code>render_text(\"The \u00f1 \u00d1 Quick Brown Fox Jumps Over The Lazy Dog\", a48, -1 + 8 * sx, 1 - 50 * sy, sx, sy);</code>, I can see the textured square perfectly.</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "edited": false, "score": 2, "creation_date": 1515609153, "post_id": 48193931, "comment_id": 83368504, "body": "Why <i>numberOfMeasurements - 2</i>? If numberOfMeasurements is 2 then you&#39;d be diving with a zero. And everyone knows the result is singularity."}, {"owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "edited": false, "score": 1, "creation_date": 1515609275, "post_id": 48193931, "comment_id": 83368566, "body": "But if that&#39;s not the case, just write to serial line by line and you&#39;ll see when the execution dies."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1515609715, "post_id": 48193931, "comment_id": 83368803, "body": "Why the cast <code>(int)</code> in <code>int temperatureMeasurementAverageValue = (int) (temperatureMeasurementValueSum &#47; (numberOfMeasurements - 2));</code>?"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1515609814, "post_id": 48193931, "comment_id": 83368856, "body": "Stuck in a loop?  What is the largest value of <code>numberOfMeasurements</code> in <code>for(int i = 0; i &lt; numberOfMeasurements; ++i) { .... delay(10); ... }</code>?"}, {"owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 0, "creation_date": 1515610567, "post_id": 48193931, "comment_id": 83369216, "body": "How is the function called?  How does the function magically know about <code>analogObjectTempPin</code>?  I assume you have it an object somewhere...but I don&#39;t know for sure."}], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "is_accepted": true, "score": 0, "last_activity_date": 1515610432, "last_edit_date": 1515610432, "creation_date": 1515610128, "answer_id": 48194199, "question_id": 48193931, "link": "https://stackoverflow.com/questions/48193931/arduino-getting-stuck-in-simple-c-function/48194199#48194199", "title": "Arduino getting stuck in simple C++ function", "body": "<p>If <strong>analogRead</strong> and <strong>delay</strong> works as you expected, it should be somewhat ok. One big issue with the function is that it can't be called with argument 2. This would cause zero-division exception and probably also a black hole. Why not something like:</p>\n\n<pre><code>... \n} // the for-loop closes here. \n\nif (numberOfMeasurements == 0)\n  return 0;\n// Must have at least 3 measurements in order to remove 2 of them.\nelse if (numberOfMeasurements &gt; 2) \n{\n  temperatureMeasurementValueSum -= maxMeasuredTempValue;\n  temperatureMeasurementValueSum -= minMeasuredTempValue;\n  numberOfMeasurements -= 2; // Compensate removing two measurements.\n}\n\n// Average is sum divided by measurements.\nint temperatureMeasurementAverageValue = temperatureMeasurementValueSum / numberOfMeasurements;\n\nreturn temperatureMeasurementAverageValue;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9200105, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XzUOu.png?s=128&g=1", "display_name": "Tryops", "link": "https://stackoverflow.com/users/9200105/tryops"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 1, "accepted_answer_id": 48194199, "answer_count": 1, "score": 0, "last_activity_date": 1515682296, "creation_date": 1515608844, "last_edit_date": 1515682296, "question_id": 48193931, "link": "https://stackoverflow.com/questions/48193931/arduino-getting-stuck-in-simple-c-function", "title": "Arduino getting stuck in simple C++ function", "body": "<p>I am currently working on a little Arduino project, which is using an infrared temperature sensor for measuring certain surface temperatures.</p>\n\n<p>The hardware works perfectly and also simply reading analog signals with <code>analogRead()</code> works fine, but using this simple function for filtering the measured analog values to get better results just doesn't get along with the Arduino.</p>\n\n<p>Every time the sketch running this function is uploaded to the Arduino (Pro Micro), the program just gets stuck and disables the Arduino, so that it has to be reset before appearing again in the \"Ports\" Menu as a COM Port.</p>\n\n<p>Here is the simple function in which I cannot find the bug:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int TemperatureDifferenceSensor::measureRawFilteredTemperatureValue(int numberOfMeasurements) {\n  int temperatureMeasurementValueSum = 0;\n  int maxMeasuredTempValue = 0;\n  int minMeasuredTempValue = 0;\n  for (int i = 0; i &lt; numberOfMeasurements; ++i) {\n    int measuredTemperatureValue = analogRead(analogObjectTempPin);\n    temperatureMeasurementValueSum += measuredTemperatureValue;\n    if (measuredTemperatureValue &gt; maxMeasuredTempValue) {\n      maxMeasuredTempValue = measuredTemperatureValue;\n    } else if (measuredTemperatureValue &lt; minMeasuredTempValue) {\n      minMeasuredTempValue = measuredTemperatureValue;\n    }\n    // A small delay, to not measure the same or similar value every time...\n    delay(10);\n  }\n  temperatureMeasurementValueSum -= maxMeasuredTempValue;\n  temperatureMeasurementValueSum -= minMeasuredTempValue;\n  int temperatureMeasurementAverageValue = (int) (temperatureMeasurementValueSum / (numberOfMeasurements - 2));\n  return temperatureMeasurementAverageValue;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "error-handling", "turbo-c++", "dosbox"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1515609172, "post_id": 48193910, "comment_id": 83368512, "body": "<code>Turbo C++</code> -- I seriously suggest using a compiler that was created in this generation."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1515609315, "post_id": 48193910, "comment_id": 83368591, "body": "Does turbo c++ have debug / release builds? I can&#39;t remember the early to mid 1990s that well.."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1515610510, "post_id": 48193910, "comment_id": 83369188, "body": "@drescherjm TurboC++ shipped with TD. It was a fabulous debugger."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1515610659, "post_id": 48193910, "comment_id": 83369266, "body": "@drescherjm Never mind. On re-read I think you knew that. Has the variable been compiled out of TD&#39;s ability to display? This I do not know. Can&#39;t remember either."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1515611535, "post_id": 48193910, "comment_id": 83369682, "body": "<b><i>Has the variable been compiled out of TD&#39;s ability to display?</i></b> Yes, That is what I meant.."}], "owner": {"reputation": 11, "user_id": 9200127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc56fa9d6d132fef4b754a5ff02fc384?s=128&d=identicon&r=PG&f=1", "display_name": "any mous", "link": "https://stackoverflow.com/users/9200127/any-mous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515608761, "creation_date": 1515608761, "question_id": 48193910, "link": "https://stackoverflow.com/questions/48193910/c-debugging-using-dosbox", "title": "C++ debugging using DOSBox", "body": "<p>i was tring to debug the following code in DOSBox. when I tried to inspect the variable \"int a\" present in the while loop, a message pops up indicating \" undefined symbol \" but no such message is shown outside the while loop what can be the reason ????</p>\n\n<pre><code>void main(){\n\n    clrscr();\n    int a=10;\n    int abc=11;\n\n    for(int j=0;j&lt;1;j++){\n\n        cout&lt;&lt;\"loop_1: \"&lt;&lt;j;\n        cout&lt;&lt;\" test \"&lt;&lt;a&lt;&lt;\" ; \"&lt;&lt;abc&lt;&lt;endl;\n\n        for(int p=0;p&lt;2;p++){\n\n            cout&lt;&lt;\"loop_2: \"&lt;&lt;p;\n            cout&lt;&lt;\" test \"&lt;&lt;a&lt;&lt;\" ; \"&lt;&lt;abc&lt;&lt;endl;\n\n            int c=3;\n\n            while(c!=0){\n                cout&lt;&lt;\"loop_3: \"&lt;&lt;c;\n                cout&lt;&lt;\" test \"&lt;&lt;a&lt;&lt;\" ; \"&lt;&lt;abc&lt;&lt;endl;\n                c--;\n            }\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "size", "element"], "comments": [{"owner": {"reputation": 1040, "user_id": 4154993, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Bv8Wx.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/4154993/valentin"}, "edited": false, "score": 1, "creation_date": 1515608415, "post_id": 48193788, "comment_id": 83368053, "body": "Change <code>.size</code> to <code>.size()</code>. Also when <code>i</code> reaches its max value, you will try to access a non-existent element (you need to fix that)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1515608460, "post_id": 48193788, "comment_id": 83368082, "body": "It seems you need a double loop: <code>for (const auto&amp; w1 : myVector) {for (const auto&amp; w2 : myVector) {&#47;*..*&#47;} }</code> or with iterator/index to compare different element."}, {"owner": {"reputation": 1, "user_id": 8686577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1180bb252612b2a7d0aa1c99cf9c34ac?s=128&d=identicon&r=PG&f=1", "display_name": "LondonSquare", "link": "https://stackoverflow.com/users/8686577/londonsquare"}, "reply_to_user": {"reputation": 1040, "user_id": 4154993, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Bv8Wx.jpg?s=128&g=1", "display_name": "Valentin", "link": "https://stackoverflow.com/users/4154993/valentin"}, "edited": false, "score": 0, "creation_date": 1515609168, "post_id": 48193788, "comment_id": 83368511, "body": "Thank you guys, it seems to be working. Also, how do I can even get to the single character?  Say I want to print the first letter of &quot;HELLO&quot;  (H)through the vector, how can I do that syntax wise?  Thank you for your suggestions @Valentin &amp; Jarod42"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8686577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1180bb252612b2a7d0aa1c99cf9c34ac?s=128&d=identicon&r=PG&f=1", "display_name": "LondonSquare", "link": "https://stackoverflow.com/users/8686577/londonsquare"}, "edited": false, "score": 0, "creation_date": 1515610969, "post_id": 48194315, "comment_id": 83369411, "body": "Thank you. But how can I access a single character inside of the string?  @S_Madankar"}, {"owner": {"reputation": 69, "user_id": 9114579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KJaLw.jpg?s=128&g=1", "display_name": "S_Madankar", "link": "https://stackoverflow.com/users/9114579/s-madankar"}, "reply_to_user": {"reputation": 1, "user_id": 8686577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1180bb252612b2a7d0aa1c99cf9c34ac?s=128&d=identicon&r=PG&f=1", "display_name": "LondonSquare", "link": "https://stackoverflow.com/users/8686577/londonsquare"}, "edited": false, "score": 0, "creation_date": 1515611993, "post_id": 48194315, "comment_id": 83369888, "body": "Basically String is nothing but a character array. So u can access the single character of a string stored in vector as myVector[0][0] , myVector[0][1] : It will give you 1st character of 0th string and 2nd character of 0th string respectively. So as per your program input myVector[0][0] gives &#39;H&#39;, myVector[4][5] gives &#39;4&#39;"}], "tags": [], "owner": {"reputation": 69, "user_id": 9114579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KJaLw.jpg?s=128&g=1", "display_name": "S_Madankar", "link": "https://stackoverflow.com/users/9114579/s-madankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1515610572, "creation_date": 1515610572, "answer_id": 48194315, "question_id": 48193788, "link": "https://stackoverflow.com/questions/48193788/how-to-compare-elements-of-a-vector-against-each-other-c/48194315#48194315", "title": "How to compare elements of a vector against each other? C++", "body": "<p>You just have make a simple mistake for size() function and you are trying to access the element which is not present by using i+1 for last iteration.\nSo just change your for loop just as below</p>\n\n<pre><code>for (unsigned int i = 1; i &lt; myVector.size(); i++) \n{\n    if (myVector[i].size() == myVector[i-1].size()) // .size() should be used\n    {\n        cout &lt;&lt; \"SAME SIZE\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 53, "user_id": 8927332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b8b2ed495e98ec369b5e60f8a0b7a5?s=128&d=identicon&r=PG&f=1", "display_name": "Stephane Wamba", "link": "https://stackoverflow.com/users/8927332/stephane-wamba"}, "is_accepted": false, "score": 0, "last_activity_date": 1515772946, "last_edit_date": 1515772946, "creation_date": 1515611534, "answer_id": 48194510, "question_id": 48193788, "link": "https://stackoverflow.com/questions/48193788/how-to-compare-elements-of-a-vector-against-each-other-c/48194510#48194510", "title": "How to compare elements of a vector against each other? C++", "body": "<p>Here's a way of writing it:</p>\n\n<pre><code>// returns true if @param s1 and @param s2 are equal in letters\nbool isEqual(const string&amp; s1, const string&amp; s2) {\n   if(s1.size() != s2.size())\n       return false;\n   bool equal = false;\n    // iterates over all the characters in s1  and s2 and compare them\n    for(auto ch1 = s1.cbegin(), ch2 = s2.cbegin(); ch1 != s1.cend(),ch2!= s2.cend(); ch1++, ch2++) {\n        if(*ch1 == *ch2)\n           equal = true;\n        else\n           return false;\n    }\n    return equal;\n}\n\n// type of iter is vector&lt;string&gt;::const_iterator meaning it can only read the value\n    for (auto iter = myVector.cbegin(); iter != myVector.cend() - 1; iter++){\n       if(isEqual(*iter, *(iter + 1)))\n          std::cout &lt;&lt; *iter &lt;&lt; \" equal \" &lt;&lt; *(iter + 1) &lt;&lt; endl;\n       else\n          std::cout &lt;&lt; *iter &lt;&lt; \" different \" &lt;&lt; *(iter + 1) &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>Here, I used iterators(<em>you should write code in modern C++, avoid using subscript</em>).</p>\n"}], "owner": {"reputation": 1, "user_id": 8686577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1180bb252612b2a7d0aa1c99cf9c34ac?s=128&d=identicon&r=PG&f=1", "display_name": "LondonSquare", "link": "https://stackoverflow.com/users/8686577/londonsquare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4291, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1515772946, "creation_date": 1515608331, "question_id": 48193788, "link": "https://stackoverflow.com/questions/48193788/how-to-compare-elements-of-a-vector-against-each-other-c", "title": "How to compare elements of a vector against each other? C++", "body": "<p>I am supposed to read some data (specifically string datatype) and store each element in a vector. Now I have to check if any of the different strings that were inputted match in size, and if they do I have to see if there are any matching letters. Now my question is how do I compare what's inside the vector (first the size and then the different letters). Is it possible? \nSay I have \nHELLO\nand\nHELLA\nThey have the same size, and 4 letters that match.\nThis is what I am trying to accomplish. \nThe code that I have does not work given my ignorance about the matter.\nThank you in advance.</p>\n\n<pre><code>vector &lt;string&gt; myVector;\n\n//insert data insdide of the vector\n\nmyVector.push_back(\"Hello\");\nmyVector.push_back(\"Hello\");\nmyVector.push_back(\"Hello2\");\nmyVector.push_back(\"Hello3\");\nmyVector.push_back(\"Hello4\");\n\n\n\n//This is wrong \n\nfor (unsigned int i = 0; i &lt; myVector.size(); i++) {\n\n    if (myVector[i].size == myVector[i+1].size()){\n        cout &lt;&lt; \"SAME SIZE\" &lt;&lt; endl;\n}\n\n}\n\n\n\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515608334, "post_id": 48193776, "comment_id": 83368005, "body": "&quot;I get 2 errors&quot; and they are?  Please edit your question to include all inforamtion"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515608384, "post_id": 48193776, "comment_id": 83368037, "body": "Perhaps if you look at the line in question, exactly where the compiler&#39;s telling you to, you&#39;ll see what you&#39;ve forgotten to put in? BTW, <code>&quot; multiplied by &quot;</code> is a string constant."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9200079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179bd4f6a8ee1b6ed5fe5b8b35879b63?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Lee Wietzke", "link": "https://stackoverflow.com/users/9200079/timothy-lee-wietzke"}, "edited": false, "score": 0, "creation_date": 1515609810, "post_id": 48193869, "comment_id": 83368854, "body": "Thanks so much! I wasn&#39;t aware that you need to put the &lt;&lt; in front of every part of the output like that. Thanks for taking your time to help me!"}], "tags": [], "owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "is_accepted": true, "score": 0, "last_activity_date": 1515608596, "creation_date": 1515608596, "answer_id": 48193869, "question_id": 48193776, "link": "https://stackoverflow.com/questions/48193776/semicolon-string-constant-error/48193869#48193869", "title": "Semicolon/String constant error", "body": "<pre><code>cout &lt;&lt;\"Done!\" &lt;&lt;fac1  \" multiplied by \" &lt;&lt;fac2 \" equals \" &lt;&lt;prod &lt;&lt;endl;\n</code></pre>\n\n<p>Should be </p>\n\n<pre><code>cout &lt;&lt;\"Done!\" &lt;&lt;fac1 &lt;&lt; \" multiplied by \" &lt;&lt;fac2 &lt;&lt;\" equals \" &lt;&lt;prod &lt;&lt;endl;\n</code></pre>\n\n<p>And</p>\n\n<pre><code>cout &lt;&lt;\"Done!\" &lt;&lt;divid \" divided by \" &lt;&lt;divis \" equals \" &lt;&lt;quot \" with a remainder of \" &lt;&lt;rem &lt;&lt;endl;\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>cout &lt;&lt;\"Done!\" &lt;&lt;divid &lt;&lt; \" divided by \" &lt;&lt;divis &lt;&lt; \" equals \" &lt;&lt;quot &lt;&lt;\" with a remainder of \" &lt;&lt;rem &lt;&lt;endl;\n</code></pre>\n\n<p>I.e. missing &lt;&lt;</p>\n"}], "owner": {"reputation": 3, "user_id": 9200079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/179bd4f6a8ee1b6ed5fe5b8b35879b63?s=128&d=identicon&r=PG&f=1", "display_name": "Timothy Lee Wietzke", "link": "https://stackoverflow.com/users/9200079/timothy-lee-wietzke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48193869, "answer_count": 1, "score": -4, "last_activity_date": 1515608596, "creation_date": 1515608269, "question_id": 48193776, "link": "https://stackoverflow.com/questions/48193776/semicolon-string-constant-error", "title": "Semicolon/String constant error", "body": "<p>Alright Guys, My question is simple\nWhen I try to build this code I get 2 errors, in lines 45 and 55 and they are both error: expected ; before string constant.\nTo clarify, line 45 and 55 are all the way down in case 3 and 4 at the last cout, and I put stars in front of the lines to make clear which I mean! There are no string constants so im just confused. please help.</p>\n\n<pre><code>#include &lt;iostream&gt; &lt;cmath&gt;\n\nusing namespace std;\n\nint main()\n{\n    bool goOn;\n    do\n    {\n        goOn = false;\n        cout &lt;&lt;\"Press 1 to add\" &lt;&lt;endl;\n        cout &lt;&lt;\"Press 2 to subtract\" &lt;&lt;endl;\n        cout &lt;&lt;\"Press 3 to multiply\" &lt;&lt;endl;\n        cout &lt;&lt;\"Press 4 to divide\" &lt;&lt;endl;\n        cout &lt;&lt;\"Pres 5 to end the program\" &lt;&lt;endl;\n        int num;\n            cin &gt;&gt;num;\n            switch (num)\n            {\n                case 1: //adding\n                    int sum;\n                    int add1;\n                    int add2;\n                        cout &lt;&lt;\"What do you want to add? Type 2 Numbers!\" &lt;&lt;endl;\n                        cin &gt;&gt;add1 &gt;&gt;add2;\n                        sum = add1+add2;\n                        cout &lt;&lt;\"Sum is:\" &lt;&lt;sum &lt;&lt;endl;\n                break;\n                case 2: //subtracting\n                    int dif;\n                    int sub1;\n                    int sub2;\n                        cout &lt;&lt;\"What do you want to subtract? Type 2 Numbers!\" &lt;&lt;endl;\n                        cin &gt;&gt;sub1 &gt;&gt;sub2;\n                        dif = sub1-sub2;\n                        cout &lt;&lt;\"Difference is\" &lt;&lt;dif &lt;&lt;endl;\n                break;\n                case 3: //multiplying\n                    int prod;\n                    int fac1;\n                    int fac2;\n                        cout &lt;&lt;\"What do you want to multiply?\" &lt;&lt;endl;\n                        cin &gt;&gt;fac1 &gt;&gt;fac2;\n                        prod = fac1*fac2;\n                        **cout &lt;&lt;\"Done!\" &lt;&lt;fac1 \" multiplied by \" &lt;&lt;fac2 \" equals \" &lt;&lt;prod &lt;&lt;endl;\n                case 4: //dividing\n                    int quot;\n                    int divid;\n                    int divis;\n                    int rem;\n                        cout &lt;&lt;\"What do you want to divide, and with what? Dividend first, then divisor!\" &lt;&lt;endl;\n                        cin &gt;&gt;divid &gt;&gt;divis;\n                        quot = divid/divis;\n                        rem = divid%divis;\n                        **cout &lt;&lt;\"Done!\" &lt;&lt;divid \" divided by \" &lt;&lt;divis \" equals \" &lt;&lt;quot \" with a remainder of \" &lt;&lt;rem &lt;&lt;endl;\n                break;\n                case 5: //ending the program\n                    cout &lt;&lt;\"Goodbye\" &lt;&lt;endl;\n                return 0;\n                default:\n                    cout &lt;&lt;\"Bad input\" &lt;&lt;endl;\n                break;\n            }\n        } while (goOn == false);\n}\n</code></pre>\n"}, {"tags": ["c++", "object", "memory-management", "dynamic", "copy-constructor"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1515608258, "post_id": 48193749, "comment_id": 83367969, "body": "See <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of 0/3/5</a>."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1515608360, "post_id": 48193749, "comment_id": 83368023, "body": "You may be looking for a move constructor and move assignment operator. You should also read about the <a href=\"http://en.cppreference.com/w/cpp/language/copy_elision\" rel=\"nofollow noreferrer\">Return Value Optimization</a> which can remove the copy of the returned object in some cases."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 4202426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b0c02ebf20087b3e41097d4240d205?s=128&d=identicon&r=PG&f=1", "display_name": "DangerousTim", "link": "https://stackoverflow.com/users/4202426/dangeroustim"}, "edited": false, "score": 0, "creation_date": 1515660041, "post_id": 48194029, "comment_id": 83386505, "body": "Is there any reason to use unique_ptr over vector? If not I think vector is the best choice for me."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 15, "user_id": 4202426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b0c02ebf20087b3e41097d4240d205?s=128&d=identicon&r=PG&f=1", "display_name": "DangerousTim", "link": "https://stackoverflow.com/users/4202426/dangeroustim"}, "edited": false, "score": 0, "creation_date": 1515670677, "post_id": 48194029, "comment_id": 83393261, "body": "@DangerousTim <code>std::vector&lt;&gt;</code> is 3 times the size of <code>std::unique_ptr&lt;&gt;</code>. If you are concerned with CPU cache pressure and do not resize the vector using <code>std::unique_ptr&lt;&gt;</code> may result in faster code."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515671263, "last_edit_date": 1515671263, "creation_date": 1515609391, "answer_id": 48194029, "question_id": 48193749, "link": "https://stackoverflow.com/questions/48193749/how-to-copy-or-return-an-object-containing-dynamically-allocated-memory/48194029#48194029", "title": "How to copy or return an object containing dynamically allocated memory?", "body": "<p>Since you store the matrix efficiently in one large array, it is trivial to implement the copy constructor:</p>\n\n<pre><code>Matrix::Matrix(Matrix const&amp; b) \n    : A(new int[b.m * b.n])\n    , m(b.m), n(b.n)\n{\n    std::copy_n(b.A, b.m * b.n, A);\n}\n</code></pre>\n\n<p>You may also like to store the array in <code>std::unique_ptr&lt;int[]&gt;</code>, so that it never leaks memory and protects you from accidentally copying it.</p>\n\n<p>To implement the copy assignment I would suggest using <code>swap</code>:</p>\n\n<pre><code>void Matrix::swap(Matrix&amp; b) {\n    using std::swap;\n    swap(A, b.A);\n    swap(m, b.m);\n    swap(n, b.n);\n}\n\nMatrix&amp; Matrix::operator=(Matrix const&amp; b) {\n    Matrix(b).swap(*this); // Re-use the copy constructor.\n    return *this;\n}\n</code></pre>\n\n<p>You may also like to implement the move constructor and assignment in the similar fashion:</p>\n\n<pre><code>Matrix::Matrix(Matrix&amp;&amp; b)\n    : A(b.A)\n    , m(b.m), n(b.n)\n{\n    b.A = nullptr;\n}\n\nMatrix::Matrix&amp; operator=(Matrix&amp;&amp; b) {\n    Matrix(std::move(b)).swap(*this); // Re-use the move constructor.\n    return *this;\n}\n</code></pre>\n\n<hr>\n\n<p>Alternatively, store the array as <code>std::vector&lt;int&gt;</code>. This way the compiler generated copy constructor, move constructor, the assignments and the destructor do the right thing for you. This is also known as <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three#Rule_of_zero\" rel=\"nofollow noreferrer\">rule-of-zero</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "is_accepted": true, "score": 1, "last_activity_date": 1515610039, "creation_date": 1515610039, "answer_id": 48194171, "question_id": 48193749, "link": "https://stackoverflow.com/questions/48193749/how-to-copy-or-return-an-object-containing-dynamically-allocated-memory/48194171#48194171", "title": "How to copy or return an object containing dynamically allocated memory?", "body": "<p>For the class <code>Matrix</code> you also have to add a copy constructor and a copy assignment operator in order to work with dynamically allocated memory in the right way.</p>\n\n<p>Let's start with a copy constructor. The basic version might look like this:</p>\n\n<pre><code>Matrix::Matrix(const Matrix&amp; other) {\n    A = new int[other.m * other.n];\n    std::copy(A, A + other.m * other.n, other.A);\n}\n</code></pre>\n\n<p>You just allocate a memory for <code>A</code> and then copy the contents.</p>\n\n<p>Now, copy assignment operator:</p>\n\n<pre><code>Matrix&amp; Matrix::operator=(const Matrix&amp; other) {\n    int* nA = new int[other.m * other.n];\n    std::copy(nA, nA + other.m * other.n, other.A);\n\n    delete[] A;\n    A = nA;\n\n    return *this;\n}\n</code></pre>\n\n<p>It's a bit trickier. The code above allocates a memory for a new matrix, copies the contents into the newly allocated memory and releases the old memory then updating <code>A</code>. It uses a temporary pointer in order to deal with potentially throwing <code>new</code>.</p>\n\n<p>Then, you might add a move constructor and a move assignment operator as well.</p>\n\n<p>And, as it is mentioned, the <em>preferred</em> way is to use <em>STL</em> containers like <code>std::vector</code> which manage their memory on their own.</p>\n"}], "owner": {"reputation": 15, "user_id": 4202426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2b0c02ebf20087b3e41097d4240d205?s=128&d=identicon&r=PG&f=1", "display_name": "DangerousTim", "link": "https://stackoverflow.com/users/4202426/dangeroustim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 48194171, "answer_count": 2, "score": 1, "last_activity_date": 1515671263, "creation_date": 1515608161, "last_edit_date": 1515608559, "question_id": 48193749, "link": "https://stackoverflow.com/questions/48193749/how-to-copy-or-return-an-object-containing-dynamically-allocated-memory", "title": "How to copy or return an object containing dynamically allocated memory?", "body": "<p>I have the following class:</p>\n\n<pre><code>class Matrix {\n    int *A;\n    int m, n;\n...\n};\nMatrix::Matrix(int rows, int cols){\n    m = rows, n = cols;\n    A = new int[m*n];\n}\nMatrix::~Matrix(){\n    delete[] A;\n}\n</code></pre>\n\n<p>I am trying to write a function which returns a Matrix object. In doing so, the default copy constructor is invoked, which means each the new returned object points to the same block of dynamically allocated memory as the one in the function. This causes the program to behave badly because this same memory gets deallocated when the object in the function goes out of scope.</p>\n\n<p>How should I write my copy constructor? Is there a work around for this which doesn't require me to copy int array element-by-element?</p>\n\n<p>Here's the function if it helps:</p>\n\n<pre><code>Matrix Matrix::submatrix(int r, int c){\n    if (m &lt;= 1 || n &lt;= 1)\n        return Matrix(0, 0);    //return null matrix \n\n    Matrix T(m-1, n-1);\n\n    int ti = 0; \n    for (int i = 0; i &lt; m; i++){\n        if (i == r) continue;\n        for (int j = 0; j &lt; n; j++){\n            if (j == c) continue;\n\n            T.A[ti] = this-&gt;valueAt(i, j);\n            ti++;           \n        }\n    }\n    return T;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "opencv", "opencl", "deadlock"], "answers": [{"comments": [{"owner": {"reputation": 817, "user_id": 1458214, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8fbcbee5a048a57912d694dc7dd1970e?s=128&d=identicon&r=PG", "display_name": "robby987", "link": "https://stackoverflow.com/users/1458214/robby987"}, "edited": false, "score": 0, "creation_date": 1515759618, "post_id": 48203121, "comment_id": 83433933, "body": "I&#39;ve posted on OpenCV forum. So this is likely a bug in OpenCV?"}], "tags": [], "owner": {"reputation": 953, "user_id": 5767725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3ddaa139d48d3453eec52417ef76500?s=128&d=identicon&r=PG&f=1", "display_name": "mogu", "link": "https://stackoverflow.com/users/5767725/mogu"}, "is_accepted": false, "score": 1, "last_activity_date": 1515661229, "creation_date": 1515661229, "answer_id": 48203121, "question_id": 48193735, "link": "https://stackoverflow.com/questions/48193735/opencv-opencl-thread-saftey-deadlock-changing-cvmat-to-umat/48203121#48203121", "title": "OpenCV OpenCL Thread Saftey - Deadlock (changing cv::Mat to UMat)", "body": "<p>OpenCL 1.2 PDF, A.2 Multiple Host Threads:</p>\n\n<p><code>All OpenCL API calls are thread-safe except clSetKernelArg</code></p>\n\n<p>...OpenCL is thread-safe, but the deadlock you see is inside OpenCV (cv::ocl::OpenCLAllocator) not OpenCL, AFAICT. So probably you need to ask OpenCV developers.</p>\n"}, {"tags": [], "owner": {"reputation": 817, "user_id": 1458214, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8fbcbee5a048a57912d694dc7dd1970e?s=128&d=identicon&r=PG", "display_name": "robby987", "link": "https://stackoverflow.com/users/1458214/robby987"}, "is_accepted": true, "score": 1, "last_activity_date": 1516228420, "creation_date": 1516228420, "answer_id": 48311098, "question_id": 48193735, "link": "https://stackoverflow.com/questions/48193735/opencv-opencl-thread-saftey-deadlock-changing-cvmat-to-umat/48311098#48311098", "title": "OpenCV OpenCL Thread Saftey - Deadlock (changing cv::Mat to UMat)", "body": "<p>Was a bug in OpenCV, the community responded quickly and resolved it in a pull request. </p>\n\n<p><a href=\"http://answers.opencv.org/question/182280/opencv-opencl-thread-saftey-deadlock-changing-cvmat-to-umat/\" rel=\"nofollow noreferrer\">http://answers.opencv.org/question/182280/opencv-opencl-thread-saftey-deadlock-changing-cvmat-to-umat/</a></p>\n\n<p><a href=\"https://github.com/opencv/opencv/pull/10605\" rel=\"nofollow noreferrer\">https://github.com/opencv/opencv/pull/10605</a></p>\n"}], "owner": {"reputation": 817, "user_id": 1458214, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/8fbcbee5a048a57912d694dc7dd1970e?s=128&d=identicon&r=PG", "display_name": "robby987", "link": "https://stackoverflow.com/users/1458214/robby987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 48311098, "answer_count": 2, "score": 0, "last_activity_date": 1516228420, "creation_date": 1515608113, "question_id": 48193735, "link": "https://stackoverflow.com/questions/48193735/opencv-opencl-thread-saftey-deadlock-changing-cvmat-to-umat", "title": "OpenCV OpenCL Thread Saftey - Deadlock (changing cv::Mat to UMat)", "body": "<p>I've been converting an OpenCV program from using cv::Mat to cv::UMat with the intention of increasing performance (which it does). What I'm experiencing is a deadlock in the OpenCL code:</p>\n\n<pre><code>1  __lll_lock_wait                                                                                                                                                                                    lowlevellock.S                 135  0x7fffeeb6626d \n2  __GI___pthread_mutex_lock                                                                                                                                                                          pthread_mutex_lock.c           115  0x7fffeeb5fe42 \n3  cv::ocl::OpenCLAllocator::copy(cv::UMatData *, cv::UMatData *, int, unsigned long const *, unsigned long const *, unsigned long const *, unsigned long const *, unsigned long const *, bool) const                                     0x7ffff2e9b44f \n4  cv::UMat::copyTo(cv::_OutputArray const&amp;) const                                                                                                                                                                                        0x7ffff2ff13c8 \n5  cv::UMat::clone                                                                                                                                                                                    mat.inl.hpp                    3685 0x7ffff75b78ff \n\n\n1  __lll_lock_wait                                                                                                                                                                                    lowlevellock.S                 135  0x7fffeeb6626d \n2  __GI___pthread_mutex_lock                                                                                                                                                                          pthread_mutex_lock.c           115  0x7fffeeb5fe42 \n3  cv::ocl::OpenCLAllocator::copy(cv::UMatData *, cv::UMatData *, int, unsigned long const *, unsigned long const *, unsigned long const *, unsigned long const *, unsigned long const *, bool) const                                     0x7ffff2e9b44f \n4  cv::UMat::copyTo(cv::_OutputArray const&amp;) const                                                                                                                                                                                        0x7ffff2ff13c8 \n5  cv::UMat::clone                                                                                                                                                                                    mat.inl.hpp                    3685 0x7ffff75b78ff\n</code></pre>\n\n<p>The code I'm using is multi-threaded and had no issues at all before using the cv::Mat structure. </p>\n\n<p>It seems the issue occurs on copying the data. </p>\n\n<p>I'm using OpenCV 3.4 on Linux (Ubuntu 16.04) and have tried with both intel and Nvidia GPU cards, both have the same issue. </p>\n\n<p>Is the OpenCL using UMat meant to be thread safe? At no point to I work on the same data in the same thread at the same time. Data is passed between threads by pointers which worked with the Mat structure. </p>\n\n<p>I'm guessing it is suppose to be thread safe as otherwise no need for the lock at all. </p>\n\n<p>Is this a bug or am I doing something wrong? Is there a workaround? </p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 4, "creation_date": 1515608220, "post_id": 48193700, "comment_id": 83367949, "body": "The <code>strtol</code> function in the standard c library takes a &quot;base&quot; parameter, which in this case would be 2. You could see if you can use that"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515608352, "post_id": 48193700, "comment_id": 83368017, "body": "Not sure what the question is here."}, {"owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515609250, "post_id": 48193700, "comment_id": 83368552, "body": "I have a string that is a binary value of &quot;1000000100000101111101&quot;. I want to convert that string into a decimal value which should look like this 2113917. I used this tool to get the decimal value to make sure my string was indeed a legit binary number <a href=\"http://www.exploringbinary.com/binary-converter/\" rel=\"nofollow noreferrer\">exploringbinary.com/binary-converter</a> @user4581301"}, {"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1515609450, "post_id": 48193700, "comment_id": 83368659, "body": "And the question is? Why doesn&#39;t your code work, whats the problem?"}, {"owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1515609500, "post_id": 48193700, "comment_id": 83368693, "body": "It gives me a -1 returned on my bin2dec function. @tkausl"}, {"owner": {"reputation": 2179, "user_id": 2630666, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VIN5F.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/2630666/matt"}, "edited": false, "score": 0, "creation_date": 1515609936, "post_id": 48193700, "comment_id": 83368906, "body": "What debugging did you try?  Which <code>-1</code> and when it happens matters.  For example did you try printing <code>result</code> or <code>*bin</code> at each iteration of the loop?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515609962, "post_id": 48193700, "comment_id": 83368916, "body": "So the function failed. I don&#39;t see any mistakes in it, so the usual suggestion applies: Step through it with a debugger and see where the function does something you don&#39;t expect."}, {"owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "reply_to_user": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 0, "creation_date": 1515610024, "post_id": 48193700, "comment_id": 83368951, "body": "@mdatsev this is an arduino/avr, that is massive overkill, can you imagine the tens of percent of flash space lost to add that function for something this trivial? assuming there is even enough flash to hold that function and it side effects at all."}, {"owner": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 0, "creation_date": 1515610079, "post_id": 48193700, "comment_id": 83368975, "body": "This is a fair point, I was just stating an option, not posting an answer."}], "answers": [{"tags": [], "owner": {"reputation": 5508, "user_id": 794749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pfE2l.jpg?s=128&g=1", "display_name": "gre_gor", "link": "https://stackoverflow.com/users/794749/gre-gor"}, "is_accepted": true, "score": 4, "last_activity_date": 1515609699, "creation_date": 1515609699, "answer_id": 48194097, "question_id": 48193700, "link": "https://stackoverflow.com/questions/48193700/convert-binary-string-into-decimal/48194097#48194097", "title": "Convert binary string into decimal", "body": "<p><code>1000000100000101111101</code> has 22 bits.</p>\n\n<p><code>int</code> on Arduino is 16-bit.</p>\n\n<p>The solution is to use <code>long</code> (32-bit) instead of <code>int</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 62072, "user_id": 16007, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e859640aaeb4b305e163a990be827cf9?s=128&d=identicon&r=PG&f=1", "display_name": "old_timer", "link": "https://stackoverflow.com/users/16007/old-timer"}, "is_accepted": false, "score": 3, "last_activity_date": 1515609741, "creation_date": 1515609741, "answer_id": 48194107, "question_id": 48193700, "link": "https://stackoverflow.com/questions/48193700/convert-binary-string-into-decimal/48194107#48194107", "title": "Convert binary string into decimal", "body": "<p>since this function is portable did you test it?  did you instrument it to see what was going on?  We are not here for code reviews nor to debug code.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint bin2dec(const char *bin)\n{\n  int result=0;\n  for(;*bin;bin++)\n  {\n    if((*bin!='0')&amp;&amp;(*bin!='1'))\n      return -1;\n    result=result*2+(*bin-'0');\n    if(result&lt;=0) return -1;\n  }\n  return result;\n}\n\n\nint main ( void )\n{\n    printf(\"%d\\n\",bin2dec(\"1000000100000101111101\"));\n    return(0);\n}\n</code></pre>\n\n<p>I get 2113917 as a result.</p>\n\n<p>your code could use a couple of shortcuts but functionally it is sound.  you didnt show us how you called it.</p>\n\n<p>ahh yes, plus one gre_gor's answer that is the problem.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nshort bin2dec(const char *bin)\n{\n  short result=0;\n  for(;*bin;bin++)\n  {\n    if((*bin!='0')&amp;&amp;(*bin!='1'))\n      return -1;\n    result=result*2+(*bin-'0');\n    if(result&lt;=0) return -1;\n  }\n  return result;\n}\n\n\nint main ( void )\n{\n    printf(\"%d\\n\",bin2dec(\"1000000100000101111101\"));\n    return(0);\n}\n</code></pre>\n\n<p>results in -1 because you have this line in it</p>\n\n<pre><code>    if(result&lt;=0) return -1;\n</code></pre>\n\n<p>which limits you to size of int - 1 bits. so 15 for a 16 bit int and 31 for a 32 bit.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nshort bin2dec(const char *bin)\n{\n  short result=0;\n  for(;*bin;bin++)\n  {\n    if((*bin!='0')&amp;&amp;(*bin!='1'))\n    {\n        printf(\"here\\n\");\n        return -1;\n    }\n    result=result*2+(*bin-'0');\n    printf(\"0x%04X\\n\",result);\n    if(result&lt;=0)\n    {\n        printf(\"there\\n\");\n        return -1;\n    }\n  }\n  return result;\n}\n\n\nint main ( void )\n{\n    printf(\"%d\\n\",bin2dec(\"1000000100000101111101\"));\n    return(0);\n}\n\n\n0x0001\n0x0002\n0x0004\n0x0008\n0x0010\n0x0020\n0x0040\n0x0081\n0x0102\n0x0204\n0x0408\n0x0810\n0x1020\n0x2041\n0x4082\n0xFFFF8105\nthere\n-1\n</code></pre>\n\n<p>remember, plus one/accept gre_gor's answer not mine...</p>\n"}], "owner": {"reputation": 435, "user_id": 5998656, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/2Kj8J.jpg?s=128&g=1", "display_name": "Snowman08", "link": "https://stackoverflow.com/users/5998656/snowman08"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1100, "favorite_count": 1, "accepted_answer_id": 48194097, "answer_count": 2, "score": 0, "last_activity_date": 1515609741, "creation_date": 1515607971, "last_edit_date": 1515609354, "question_id": 48193700, "link": "https://stackoverflow.com/questions/48193700/convert-binary-string-into-decimal", "title": "Convert binary string into decimal", "body": "<p>I would like to convert a string that is a binary to a decimal.</p>\n\n<p>Here is what the fullCard value is.</p>\n\n<pre><code>fullCard = \"1000000100000101111101\"\n</code></pre>\n\n<p>Here is what it should look like after being converted to decimal</p>\n\n<pre><code>fullCardInt = 2113917\n</code></pre>\n\n<p>Main.ino</p>\n\n<pre><code>String fullCard;                     // binary value full card number \n\nint fullCardInt = bin2dec(const_cast&lt;char*&gt;(fullCard.c_str()));  \n// I get -1 which is a failure. \n\nserial.print(fullCardInt);\n\nint bin2dec(const char *bin)\n{\n  int result=0;\n  for(;*bin;bin++)\n  {\n    if((*bin!='0')&amp;&amp;(*bin!='1'))\n      return -1;\n    result=result*2+(*bin-'0');\n    if(result&lt;=0) return -1;\n  }\n  return result;\n}\n</code></pre>\n"}, {"tags": ["c++", "unique-ptr"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1515608676, "post_id": 48193684, "comment_id": 83368210, "body": "I might found usage for <code>std::shared_ptr&lt;int&gt;</code> but not for <code>std::unique_ptr&lt;int&gt;</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1515610330, "post_id": 48193684, "comment_id": 83369095, "body": "It might make sense in the context where it was created. There is a lot of code that makes little sense out of context."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515610362, "post_id": 48193684, "comment_id": 83369109, "body": "Programming in general never ceases to surprise me with edge-cases that make conventional wisdom and rules of thumb fail hilariously, so odds are decent that out there in the deep-dark of some really bizarre case there is a use for this. I don&#39;t see one, though. Can you give more context on how this is being used?"}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515721004, "post_id": 48193684, "comment_id": 83418692, "body": "It&#39;s just returning the number, although I thought of a use case. an int64_t can represent all the integer values possible in 64 bits. a pointer to an int64_t can represent all the same integer values as well as null, so you can use it as a flag or something, it gives you an additional value."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1515608577, "post_id": 48193751, "comment_id": 83368151, "body": "The programmer has the exact same control over the plain old <code>int64_t</code> Both go out of scope when the programmer lets them go out of scope."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1515609083, "post_id": 48193751, "comment_id": 83368462, "body": "@user4581301 there are really two questions; why dynamically allocate a primitive (or indeed anything), and why use <code>unique_ptr</code>. <code>unique_ptr</code> is a smart wrapper around a pointer and the reasons for using it are obvious and well covered elsewhere. Reasons for dynamically allocating storage for a primitive type are that you want it to stay in the same spot in memory beyond the current block. Maybe you need to pass a pointer to it to someone who requires that the pointer remain valid later. You can&#39;t do that with an automatic-storage variable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1515609424, "post_id": 48193751, "comment_id": 83368645, "body": "We read the question differently. I see it as &quot;Why would someone got to all the trouble of making a <code>unique_ptr</code> to a data type so small and simple that there is no obvious advantage?&quot;"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 0, "creation_date": 1515616782, "post_id": 48193751, "comment_id": 83372326, "body": "Perhaps it would be useful for a function to attach to a memory-mapped address and return a pointer to it through a unique_ptr, with a custom deleter that cleans up when user is done with it."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515721050, "post_id": 48193751, "comment_id": 83418704, "body": "458 had what I was thinking: why bother going through all the trouble."}], "tags": [], "owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "is_accepted": true, "score": 1, "last_activity_date": 1515608741, "last_edit_date": 1515608741, "creation_date": 1515608162, "answer_id": 48193751, "question_id": 48193684, "link": "https://stackoverflow.com/questions/48193684/why-would-you-ever-make-a-unique-pointer-to-a-primitive-type-in-c/48193751#48193751", "title": "Why would you ever make a unique pointer to a primitive type in c++?", "body": "<p>Declaring a variable of primitive type as</p>\n\n<pre><code>int64_t foo;\n</code></pre>\n\n<p>Means <code>foo</code> is placed on the stack and is <a href=\"http://en.cppreference.com/w/cpp/language/scope#Block_scope\" rel=\"nofollow noreferrer\">block-scoped</a> (i.e., it goes out of scope at the end of the block). More formally using C++ terms it has <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">automatic storage duration</a>:</p>\n\n<blockquote>\n  <p>The object is allocated at the beginning of the enclosing code block and deallocated at the end. All local objects have this storage duration, except those declared static, extern or thread_local.</p>\n</blockquote>\n\n<p>On the other hand, using a <code>unique_ptr</code>...</p>\n\n<pre><code>auto foo = std::make_unique&lt;int64_t&gt;(off);\n</code></pre>\n\n<p>... allocates memory for the <code>int64_t</code> on the heap. Formally, it has <a href=\"http://en.cppreference.com/w/cpp/language/storage_duration\" rel=\"nofollow noreferrer\">dynamic storage duration</a>:</p>\n\n<blockquote>\n  <p>The object is allocated and deallocated per request by using dynamic memory allocation functions.</p>\n</blockquote>\n\n<p>You can do this yourself by declaring a pointer to an <code>int64_t</code> and using <code>new</code>:</p>\n\n<pre><code>int64_t *foo = new int64_t;\n</code></pre>\n\n<p>But then you have to make sure you don't forget to <code>delete</code> that pointer. That's where <code>unique_ptr</code> comes in. It deletes the pointer it owns when it goes out of scope. This is <a href=\"http://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a>. You can also transfer ownership to a different <code>unique_ptr</code> instance.</p>\n"}, {"comments": [{"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515721108, "post_id": 48195336, "comment_id": 83418714, "body": "Anywhere that you can transfer the value of the unique_ptr you can just as easily pass the primitive value as well (and the primitive will be quicker and less resource consuming)"}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515721246, "post_id": 48195336, "comment_id": 83418742, "body": "Everybody always mentions the overhead of shared_ptr vs unique_ptr, but it seems to me the tradeoff is that you have to litter your program with std::move() all over the place just to make unique_ptr work that way, where as if you use shared_ptr you can just mostly treat your variable like a pointer and it all just works. The few cycles it saves will be made up by intel&#39;s latest chip next year. If you&#39;re not a HFT, I think you shouldn&#39;t really be worrying about the overhead of a shared_ptr vs unique_ptr compared to the mess you have to make in your program to make unique_ptr work correctly."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515721557, "post_id": 48195336, "comment_id": 83418808, "body": "@stu First, shared ptr increases contention due to atomic operations; more cores, shared ptr costs more.  So no, it gets worse not better over time.  Second, ownership semantics get messed up with shared; pseduo leaks and lifetime hell follows.  Finally, moving unique is fixed cost, moving objects scale with object size/complexity."}, {"owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515810468, "post_id": 48195336, "comment_id": 83455473, "body": "Well then you&#39;ve really sold me on shared_ptrs then. :-) I think maybe c pointers and references and good old using-destructors-to-free-objects (what the kids now call RAII) really were the better way... If ownership semantics get messed up, then what is the point. The whole purpose of smart pointers is to not have to worry about it. So if you have to worry about it, it obviously failed in its objective. And this was an improvement on auto_ptr...?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "edited": false, "score": 0, "creation_date": 1515812044, "post_id": 48195336, "comment_id": 83455687, "body": "@stu shared ptr doesn&#39;t <i>solve</i> ownership in general, it solves <i>shared ownership</i>.  And shared ownership is only something you should rarely use.  Unique ownership is sane, and <code>unique_ptr</code> solves unique ownership.  I understand you dislike <code>move</code>, but move makes it <i>explicit</i> when ownership passes from one part of code to another, which is sane.  There is no &quot;I don&#39;t have to think about ownership&quot; -- even in full gc languages, you can leak resources if you ignore ownership."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1515769543, "last_edit_date": 1515769543, "creation_date": 1515615112, "answer_id": 48195336, "question_id": 48193684, "link": "https://stackoverflow.com/questions/48193684/why-would-you-ever-make-a-unique-pointer-to-a-primitive-type-in-c/48195336#48195336", "title": "Why would you ever make a unique pointer to a primitive type in c++?", "body": "<p>The lifetime of a <code>unique_ptr</code> pointed-to integer can be extended by moving the <code>unique_ptr</code> to some other spot.</p>\n\n<p>The lifetime of an automatic storage integer ends when it scope or enclosing object does.</p>\n\n<p>In the event that not just the value, but the identity, of the integer matters, then <code>unique_ptr</code> can solve problems a raw integer cannot.</p>\n\n<p>For example, I can pair that <code>unique_ptr</code> with a thread.  The thread can be responsible for writing information to said <code>unique_ptr</code>.</p>\n\n<p>The thread is movable; a raw integer is not.  So the semantics of the two disagree, so you cannot shove a thread and a primitive int into a struct or class and use default move operations.</p>\n\n<p>If you use a thread and a unique ptr to a primitive type, you can toss it into a struct and use default move operations and they work.</p>\n\n<p>You could use a shared ptr, but if we presume the two objects (unique ptr and thread) are bound in a structure where the thread is destroyed first, no other sharing is requried, and shared ptr has overhead costs.  In addition, a shared ptr if exposed leads to ownership tracking hell.  The runtime cost of a shared ptr is a mixture of the second allocation and the atomic increment/decrement leading to concurrency contention costs.  The compiletime cost is that the ownership semantics get more complex than a unique ptr.</p>\n\n<p>It is more likely to be a bad design decision, but there are possible reasons why it wouldn't be.</p>\n"}], "owner": {"reputation": 7395, "user_id": 12386, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d6bf42c0a4a007ad5fd75a01918d1945?s=128&d=identicon&r=PG", "display_name": "stu", "link": "https://stackoverflow.com/users/12386/stu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 48193751, "answer_count": 2, "score": 2, "last_activity_date": 1515769543, "creation_date": 1515607897, "last_edit_date": 1515721347, "question_id": 48193684, "link": "https://stackoverflow.com/questions/48193684/why-would-you-ever-make-a-unique-pointer-to-a-primitive-type-in-c", "title": "Why would you ever make a unique pointer to a primitive type in c++?", "body": "<p>I just found this code and who knows where or when it came from, but it's the end of a function and rather than returning a simple int64_t type, it makes a unique_ptr to it.</p>\n\n<p>I'm just wondering if anybody can explain where this usage has value?</p>\n\n<pre><code>return std::make_unique&lt;int64_t&gt;(off);\n</code></pre>\n\n<p>Update:</p>\n\n<p>It isn't being used this way, but as I commented below, one possible use of a pointer to primitive vs just the primitive is that you can set the pointer to null and thus add a flag to the integer as in error or not available.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515607909, "post_id": 48193667, "comment_id": 83367776, "body": "Does your <code>malloc</code> clear the memory, or just allocate it? This is how you leak sensitive information if you&#39;re not careful. You&#39;re also not checking for errors on your file operations, so you may be missing something there. <code>errno</code> will be set on failures."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515607966, "post_id": 48193667, "comment_id": 83367811, "body": "&quot;What am I doing wrong?&quot; adding wrong tags first. Second -expecting that malloc would zero initialize memory."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1515608012, "post_id": 48193667, "comment_id": 83367829, "body": "<code>&amp;arrayToWrite</code> is the address of the pointer <code>arrayToWrite</code>; the call should be made with the address of the data that it points at."}, {"owner": {"reputation": 13521, "user_id": 654953, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f6453f58b70e93dbfa8998b71a95bb09?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/654953/ryan"}, "edited": false, "score": 0, "creation_date": 1515608034, "post_id": 48193667, "comment_id": 83367839, "body": "remove the <code>&amp;</code> character, arrayToWrite is already a pointer"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1515608137, "post_id": 48193667, "comment_id": 83367895, "body": "For c++ use <code>std::vector</code>"}, {"owner": {"reputation": 1259, "user_id": 5989485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eDRVw.jpg?s=128&g=1", "display_name": "YAHsaves", "link": "https://stackoverflow.com/users/5989485/yahsaves"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515608517, "post_id": 48193667, "comment_id": 83368118, "body": "@tadman Thank you for telling me this! Wow I had no idea malloc didn&#39;t clear the memory. Sorry I&#39;m very new to c++, yes I understand. Do  you suggest I use calloc instead as suggested by Sneftel&#39;s answer?"}], "answers": [{"comments": [{"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1515608676, "post_id": 48193723, "comment_id": 83368207, "body": "I think that the first paragraph is irrelevant to his question because there&#39;s no difference between passing arrayToWrite or &amp; arrayToWrite."}, {"owner": {"reputation": 1259, "user_id": 5989485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eDRVw.jpg?s=128&g=1", "display_name": "YAHsaves", "link": "https://stackoverflow.com/users/5989485/yahsaves"}, "edited": false, "score": 0, "creation_date": 1515608680, "post_id": 48193723, "comment_id": 83368213, "body": "Thank you! That makes perfect sense, sorry I didn&#39;t realize the answer was so easy as I&#39;m very new to c++. That extra bit of info regarding calloc vs malloc though was also very helpful."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1515608742, "post_id": 48193723, "comment_id": 83368246, "body": "@Harald you are wrong in this case passing <code>&amp;arrayToWrite</code> is very different"}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 0, "creation_date": 1515608754, "post_id": 48193723, "comment_id": 83368253, "body": "@Harald There wouldn&#39;t be, if <code>arrayToWrite</code> had array type, but it has pointer type so the two are not equivalent."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1259, "user_id": 5989485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eDRVw.jpg?s=128&g=1", "display_name": "YAHsaves", "link": "https://stackoverflow.com/users/5989485/yahsaves"}, "edited": false, "score": 0, "creation_date": 1515608812, "post_id": 48193723, "comment_id": 83368281, "body": "@YAHsaves you provided not C++ code, if you want to learn C++ do not write C code, it will be more difficult to relearn"}, {"owner": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515608840, "post_id": 48193723, "comment_id": 83368307, "body": "@slava why? These are all pointers pointing at the same data."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 2799, "user_id": 1747493, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Ro2p4.jpg?s=128&g=1", "display_name": "Harald", "link": "https://stackoverflow.com/users/1747493/harald"}, "edited": false, "score": 1, "creation_date": 1515608931, "post_id": 48193723, "comment_id": 83368365, "body": "@Harald adress of a pointer variable is not the same as the pointer itself, even has different type, <code>unsigned char **</code> it works because both can convert to <code>const void *</code> but that is issue of <code>void *</code>"}], "tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": true, "score": 3, "last_activity_date": 1515608047, "creation_date": 1515608047, "answer_id": 48193723, "question_id": 48193667, "link": "https://stackoverflow.com/questions/48193667/save-array-to-binary-file-not-working-c/48193723#48193723", "title": "Save array to binary file not working c++", "body": "<p>The basic issue there is that you're passing the pointer to your <code>arrayToWrite</code> variable, rather than to the array itself. Change <code>fwrite(&amp;arrayToWrite...</code> to <code>fwrite(arrayToWrite...</code>.</p>\n\n<p>BTW, <code>malloc()</code> does NOT promise to give you zeroed memory. For that, use <code>calloc()</code> to allocate and zero memory or <code>memset()</code> to zero already-allocated memory. (Though all that is more a C thing; for C++ you'd be better off using something like <code>std::vector</code> instead of raw C arrays.)</p>\n"}, {"comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515608838, "post_id": 48193850, "comment_id": 83368306, "body": "I agree, but whooof, <code>decltype(vectorToWrite)::value_type</code> is not putting C++&#39;s best foot forward. ;)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515609054, "post_id": 48193850, "comment_id": 83368446, "body": "@Sneftel yea in case of <code>char</code> it can be omitted as <code>sizeof(char)==1</code> by standard but there are so many pedanting downvoters"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 2, "last_activity_date": 1515609230, "last_edit_date": 1515609230, "creation_date": 1515608515, "answer_id": 48193850, "question_id": 48193667, "link": "https://stackoverflow.com/questions/48193667/save-array-to-binary-file-not-working-c/48193850#48193850", "title": "Save array to binary file not working c++", "body": "<p>C++ code is written different way:</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; vectorToWrite = { 0, 1, 2 };\nvectorToWrite.resize( 720 );\nstd::ofstream file( \"filePath.bin\", std::ios::out | std::ios::binary );\nif( !file ) {\n    // error handling\n}\nfile.write( vectorToWrite.data(), vectorToWrite.size() * sizeof( decltype(vectorToWrite)::value_type ) );\n</code></pre>\n\n<p>Note: I put <code>sizeof( decltype(vectorToWrite)::value_type )</code> there so if you later change vector data it will still properly work without further change, but in case of <code>char</code> it can be omitted completely as <code>sizeof(char)</code> is always equal to 1</p>\n"}], "owner": {"reputation": 1259, "user_id": 5989485, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/eDRVw.jpg?s=128&g=1", "display_name": "YAHsaves", "link": "https://stackoverflow.com/users/5989485/yahsaves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 48193723, "answer_count": 2, "score": 0, "last_activity_date": 1515609230, "creation_date": 1515607831, "last_edit_date": 1515608001, "question_id": 48193667, "link": "https://stackoverflow.com/questions/48193667/save-array-to-binary-file-not-working-c", "title": "Save array to binary file not working c++", "body": "<p>I have an unsigned char array in c++, and I want to save it's bits into a file. </p>\n\n<p>So for example if I have the array below</p>\n\n<pre><code>arr[0] = 0;\narr[1] = 1;\narr[2] = 2;\n</code></pre>\n\n<p>I want to save this into the file so that the binary data of the file looks like this (without the spaces).</p>\n\n<pre><code>00000000 00000001 00000010\n</code></pre>\n\n<p>I have tried this code below but it doesn't seem to work. I give the program a blank file that is 0 bytes in size, and after the program runs the file remains 0 bytes in size (nothing gets written to it). </p>\n\n<pre><code>// Create unsigned char array\nunsigned char *arrayToWrite= (unsigned char*)malloc(sizeof(unsigned char)*720);\n\n// Populate it with some test values\narrayToWrite[0] = 0;\narrayToWrite[1] = 1;\narrayToWrite[2] = 2;\n\n// Open the file I want to write to\nFILE *dat;\ndat = fopen(\"filePath.bin\", \"wb\");\n\n// Write array to file\nfwrite(&amp;arrayToWrite, sizeof(char)*720, 1, dat);\nfclose(dat);\n</code></pre>\n\n<p>I would expect after this program runs that the file \"filePath.bin\" would be 720 bytes long filled with mostly 0's except for the first and second position I filled with test data. </p>\n\n<p>What am I doing wrong? Any help would be much appreciated! Thank you!</p>\n"}, {"tags": ["c++", "bit-manipulation"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1515609569, "post_id": 48193661, "comment_id": 83368727, "body": "Try mapping bit 0 to 31 and 31 to 0, then 1 to 30, 30 to 1 and so on, iterating over the range 0..15 and doing two swaps each time."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1515609724, "post_id": 48193661, "comment_id": 83368808, "body": "Look what happens if you try to reverse, say, 8, instead of -1. Your logic is wrong."}, {"owner": {"reputation": 86085, "user_id": 128940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d35101b4060dc3af0d5c1b7c42c4935?s=128&d=identicon&r=PG&f=1", "display_name": "Beta", "link": "https://stackoverflow.com/users/128940/beta"}, "edited": false, "score": 0, "creation_date": 1515610187, "post_id": 48193661, "comment_id": 83369028, "body": "...Wait... <i>Which</i> integer are you trying to reverse?"}], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 5879503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef0b6c75c9ba4dc55d27102bfd7f1f7?s=128&d=identicon&r=PG&f=1", "display_name": "SJL", "link": "https://stackoverflow.com/users/5879503/sjl"}, "is_accepted": false, "score": 0, "last_activity_date": 1515612189, "creation_date": 1515612189, "answer_id": 48194660, "question_id": 48193661, "link": "https://stackoverflow.com/questions/48193661/bit-twiddling-off-by-one-error/48194660#48194660", "title": "Bit twiddling, off by one error", "body": "<p>Here is a way to do it that works for any unsigned integer type. (unsigned because it is undefined behavior to left shift a negative number, so using unsigned forces the caller to be sure the value is non-negative)</p>\n\n<pre><code>#include &lt;limits&gt;\n#include &lt;type_traits&gt;\n\ntemplate &lt;typename T&gt;\nauto reverse_bits(T value) -&gt; T\n{\n    static_assert(std::is_unsigned&lt;T&gt;::value, \"type must be unsigned integer\");\n\n    constexpr auto digits = std::numeric_limits&lt;T&gt;::digits;\n\n    T result = 0;\n    for (int k = 0; k &lt; digits; ++k)\n        result |= ((value &gt;&gt; k) &amp; 0x01) &lt;&lt; (digits - (k + 1));\n    return result;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1515612202, "creation_date": 1515612202, "answer_id": 48194665, "question_id": 48193661, "link": "https://stackoverflow.com/questions/48193661/bit-twiddling-off-by-one-error/48194665#48194665", "title": "Bit twiddling, off by one error", "body": "<p>Apply the shift to r before adding vbit to it.</p>\n\n<p>That way you can shift 32 times.</p>\n"}], "owner": {"reputation": 21, "user_id": 5345427, "user_type": "registered", "profile_image": "https://graph.facebook.com/902347859835816/picture?type=large", "display_name": "Rupank Pahuja", "link": "https://stackoverflow.com/users/5345427/rupank-pahuja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 48194665, "answer_count": 2, "score": 0, "last_activity_date": 1515612202, "creation_date": 1515607815, "last_edit_date": 1515608021, "question_id": 48193661, "link": "https://stackoverflow.com/questions/48193661/bit-twiddling-off-by-one-error", "title": "Bit twiddling, off by one error", "body": "<pre><code>    #include &lt;iostream&gt;\n    #include &lt;bitset&gt;\n    using namespace std;\n\n    int main(){\n        int k = -1;\n        int v = -1;\n        int r = 0;\n        for(int s = 0; s &lt;= 30 ; s++){\n            int vbit = v &amp; 1;\n            v &gt;&gt;= 1;\n            r |= vbit;\n            r &lt;&lt;= 1;\n        }\n        int vbit = v &amp; 1;\n        r |= vbit;\n        cout &lt;&lt; bitset&lt;32&gt;(k) &lt;&lt; \"  \" &lt;&lt; bitset&lt;32&gt;(r) &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>I have written a code to reverse the bits in a integer. I my code works perfectly fine if I run the code as written but I think that I am looping one time less than I should to get to the correct answer. I have to shift 31 times to access all the bits in the int and the last two line of code after for loop is to patch the last bits to their places.\nIs there a conceptual problem or a silly mistake?</p>\n"}, {"tags": ["c++", "random", "clr"], "answers": [{"comments": [{"owner": {"reputation": 663, "user_id": 7932866, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/154343c2dd5db763eafdf08f5a925bbb?s=128&d=identicon&r=PG", "display_name": "Lupos", "link": "https://stackoverflow.com/users/7932866/lupos"}, "edited": false, "score": 0, "creation_date": 1515608028, "post_id": 48193679, "comment_id": 83367836, "body": "yeah i thought that too but where initialize it outside from main i cant initialize it inside from the random function it would be reseted inside the main function the random function have no acess to it."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 663, "user_id": 7932866, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/154343c2dd5db763eafdf08f5a925bbb?s=128&d=identicon&r=PG", "display_name": "Lupos", "link": "https://stackoverflow.com/users/7932866/lupos"}, "edited": false, "score": 0, "creation_date": 1515608289, "post_id": 48193679, "comment_id": 83367982, "body": "@Yuto, I didn&#39;t understand your concern."}, {"owner": {"reputation": 663, "user_id": 7932866, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/154343c2dd5db763eafdf08f5a925bbb?s=128&d=identicon&r=PG", "display_name": "Lupos", "link": "https://stackoverflow.com/users/7932866/lupos"}, "edited": false, "score": 0, "creation_date": 1515608352, "post_id": 48193679, "comment_id": 83368016, "body": "like i said my problem is that i dont know where i should put the srand() function without that the function reset itself."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515608543, "last_edit_date": 1515608543, "creation_date": 1515607884, "answer_id": 48193679, "question_id": 48193637, "link": "https://stackoverflow.com/questions/48193637/c-how-to-make-that-a-function-runs-only-one/48193679#48193679", "title": "C++ How to make that a function runs only one", "body": "<p><strong>Solution 1</strong></p>\n\n<p>You can use a function <code>static</code> variable for that.</p>\n\n<pre><code>static bool firstTime = true;\nif ( firstTime )\n{\n    srand((unsigned)time(0));\n    firstTime = false;\n}\n</code></pre>\n\n<p><strong>Solution 2</strong></p>\n\n<p>If you don't want to pay the price of the check for each call of the function, you can use a helper class/struct.</p>\n\n<pre><code>struct InitRandHelper\n{\n   InitRandHelper() { srand((unsigned)time(0)); }\n};\n\n\nint* randomName()\n{\n   // Initialize the random number generator.\n   static InitRandHelper init;\n\n   int i = 1;\n   static int name[5];\n   for (int i = 1; i &lt; 5; i++)\n   {\n      name[i] = 97 + rand() % 122;\n   }\n   std::cout &lt;&lt; name &lt;&lt; std::endl;\n   return name;\n}\n</code></pre>\n\n<p><strong>Solution 3</strong></p>\n\n<p>Call <code>srand</code> in <code>main</code> before the <code>while</code> loop begins.</p>\n\n<pre><code>int main(array&lt;System::String ^&gt; ^args)\n{\n   srand((unsigned)time(0));\n\n   while (true)\n   {\n      switch (inputCheat)   //check which case match with the user input\n      {\n         case 4:\n            Console::WriteLine(\"test: \");\n            random:: randomName(firstSetRand);\n            //WriteProcessMemory(handle, (LPVOID)localName, &amp;inputNumber, sizeof(), NULL); //Write to the local adress memory and change the value\n            Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n            break;\n      }\n   }\n   Sleep(200);\n}\n</code></pre>\n\n<p>and remove the call from <code>random::randomName</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 663, "user_id": 7932866, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/154343c2dd5db763eafdf08f5a925bbb?s=128&d=identicon&r=PG", "display_name": "Lupos", "link": "https://stackoverflow.com/users/7932866/lupos"}, "is_accepted": true, "score": 0, "last_activity_date": 1575306378, "last_edit_date": 1575306378, "creation_date": 1515763384, "answer_id": 48227186, "question_id": 48193637, "link": "https://stackoverflow.com/questions/48193637/c-how-to-make-that-a-function-runs-only-one/48227186#48227186", "title": "C++ How to make that a function runs only one", "body": "<p>okay here the answer i found. Ther problem is this line:</p>\n\n<pre><code> std::cout &lt;&lt; name &lt;&lt; std::endl;\n</code></pre>\n\n<p>The Ouput in the console is not the value rather its the adress from the array. To do it proper i have to it so:</p>\n\n<pre><code>    int i = 1;\n       static int name[5];\n       for (int i = 1; i &lt; 5; i++)\n       {\n          name[i] = 97 + rand() % 122;\n          std::cout &lt;&lt; name[i] &lt;&lt; std::endl; //this line is the right thing to do it\n       }\n       return name;\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 7932866, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/154343c2dd5db763eafdf08f5a925bbb?s=128&d=identicon&r=PG", "display_name": "Lupos", "link": "https://stackoverflow.com/users/7932866/lupos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 48227186, "answer_count": 2, "score": 0, "last_activity_date": 1575306378, "creation_date": 1515607744, "last_edit_date": 1515856162, "question_id": 48193637, "link": "https://stackoverflow.com/questions/48193637/c-how-to-make-that-a-function-runs-only-one", "title": "C++ How to make that a function runs only one", "body": "<p>I use a C++\\CLR project in Visual Studio 2017.At the time i try to manipulate the memory so i create a hack for a no name game and try to manipulate the game.</p>\n\n<p>My problem is that I try to create a random integer and for that i use the function <code>rand()</code> in combination with firstSetRand <code>srand()</code>.</p>\n\n<pre><code>using namespace System;\n\n    int * randomName()\n        {\n    srand((unsigned)time(0));\n        int i = 1;\n        static int name[5];\n        for (int i = 1; i &lt; 5; i++)\n            {\n                name[i] = 97 + rand() % 122;\n            }\n            std::cout &lt;&lt; name &lt;&lt; std::endl;\n            return name;\n        }\n</code></pre>\n\n<p>This is my function for the random counts and here i call it:</p>\n\n<pre><code>int main(array&lt;System::String ^&gt; ^args)\n{\nwhile (true)\n    {\n      switch (inputCheat)   //check which case match with the user input\n                {\n                    case 4:\n                        Console::WriteLine(\"test: \");\n                        random:: randomName(firstSetRand);\n                        //WriteProcessMemory(handle, (LPVOID)localName, &amp;inputNumber, sizeof(), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n       }\n    }\nSleep(200);\n}\n</code></pre>\n\n<p>The problem is because that\u00b4s a while(true) loop and I call the function multiple times. And I don't know how to make that <code>srand()</code> function is only called once time i get always the same random number.</p>\n\n<p>I am coming from Java. In Java i would do the whole code in a class and than i would write the variable in the constructor but i think that's not possible in C++. Because when i do the whole code in a class i get the error:</p>\n\n<pre><code>Severity Code Description Project File Line Suppression State\nError LNK2019 unresolved external symbol _main referenced in function \"int __cdecl invoke_main(void)\" (?invoke_main@@YAHXZ) AssaultCubeHack C:\\Users\\schup\\source\\repos\\AssaultCubeHack\\AssaultCubeHack\\MSVCRTD.lib(exe_main.obj)   1\n</code></pre>\n\n<p>Here is the full code of my project:</p>\n\n<pre><code>// AssaultCubeWithClr.cpp: Hauptprojektdatei.\n\n\n#include \"stdafx.h\"\n\nusing namespace System;\n\nstruct InitRandHelper\n{\n    InitRandHelper() { srand((unsigned)time(0)); }\n};\n\nint * randomName()\n    {\n    static InitRandHelper init;\n\n    int i = 1;\n    static int name[5];\n    for (int i = 1; i &lt; 5; i++)\n        {\n            name[i] = 97 + rand() % 122;\n        }\n        std::cout &lt;&lt; name &lt;&lt; std::endl;\n        return name;\n    }\n\nvoid StartText()\n{\n    //Text to See in the Console\n    Console::ForegroundColor = System::ConsoleColor::Green;\n    Console::WriteLine(\"Welcome to my Cheat for AssaultCube!\");\n    Console::WriteLine(\"------------------------------------\");\n    Console::WriteLine(\"1. For More Health type in: 1.\");\n    Console::WriteLine(\"2. For More Ammo type in: 2\");\n    Console::WriteLine(\"3. For More Armor type in: 3\");\n    Console::WriteLine(\"4. For Turn on Name changer: 4\");\n}\nint main(array&lt;System::String ^&gt; ^args)\n{\n    DWORD playerBaseAdress = 0x00509b74;\n    DWORD offsePrimaryAmmo = 0x128;\n    DWORD offsetPistolAmmo = 0x13C;\n    DWORD offsetArmor = 0xFC;\n    DWORD offsetHealth = 0xF8;\n    DWORD offsetRoll = 0x0080;\n    DWORD baseforName = 0x005028FC;\n\n    static bool firstSetRand = true;\n\n    int inputCheat;\n    int inputNumber;\n    DWORD processId;\n    DWORD localPlayer;\n    DWORD localName;\n    DWORD primaryAmmo;\n    DWORD pistolAmmo;\n    DWORD health;\n    DWORD armor;\n    DWORD roll;\n\n    bool firstExecute = true;\n\n    HWND hwnd = FindWindowA(NULL, \"AssaultCube\");       //Find Window with Name AssaultCube\n\n    StartText();        //function call\n    while (true)\n    {\n\n        if (hwnd == NULL)   //Check if the game exists\n        {\n            if (firstExecute == true)\n            {\n                Console::ForegroundColor = System::ConsoleColor::Red;\n                Console::WriteLine(\"ERROR: The Game couldn\u00b4t found!\");\n                firstExecute = false;\n            } \n        }\n        else\n        {\n            GetWindowThreadProcessId(hwnd, &amp;processId);     //Get Process id from the Window\n            HANDLE handle = OpenProcess(PROCESS_ALL_ACCESS, false, processId);\n\n            if (handle == NULL) //check if process id exsits\n            {\n                Console::ForegroundColor = System::ConsoleColor::Red;\n                Console::WriteLine(\"ERROR: Wrong Process Id!\");\n                Console::ForegroundColor = System::ConsoleColor::Green;\n            }\n            else\n            {\n                ReadProcessMemory(handle, (LPCVOID)playerBaseAdress, &amp;localPlayer, sizeof(playerBaseAdress), NULL); //Read the local adresse and save it in localPlayer\n                ReadProcessMemory(handle, (LPCVOID)baseforName, &amp;localName, sizeof(playerBaseAdress), NULL);\n\n                primaryAmmo = localPlayer + offsePrimaryAmmo;\n                pistolAmmo = localPlayer + offsetPistolAmmo;\n                health = localPlayer + offsetHealth;\n                armor = localPlayer + offsetArmor;\n                roll = localPlayer + offsetRoll;\n\n                std::cin &gt;&gt; inputCheat;     //wait for user input\n\n                switch (inputCheat)         //check which case match with the user input\n                {\n                    case 1:\n                        Console::WriteLine(\"Write how much Health you want: \");\n                        std::cin &gt;&gt; inputNumber;\n                        WriteProcessMemory(handle, (LPVOID)health, &amp;inputNumber, sizeof(inputNumber), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n\n                    case 2:\n                        Console::WriteLine(\"Write how much Ammo you want: \");\n                        std::cin &gt;&gt; inputNumber;\n                        WriteProcessMemory(handle, (LPVOID)primaryAmmo, &amp;inputNumber, sizeof(inputNumber), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n\n                    case 3:\n                        Console::WriteLine(\"Write how much Armor you want: \");\n                        std::cin &gt;&gt; inputNumber;\n                        WriteProcessMemory(handle, (LPVOID)armor, &amp;inputNumber, sizeof(inputNumber), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n\n                    case 4:\n                        Console::WriteLine(\"Random Number: \");\n                        randomName();\n                        //WriteProcessMemory(handle, (LPVOID)localName, &amp;inputNumber, sizeof(), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n\n                    case 5:\n                        Console::WriteLine(\"test: \");\n                        std::cin &gt;&gt; inputNumber;\n                        WriteProcessMemory(handle, (LPVOID)roll, &amp;inputNumber, sizeof(inputNumber), NULL); //Write to the local adress memory and change the value\n                        Console::WriteLine(\"\\nWhat did you want to cheat up: \");\n                        break;\n\n                    default:\n                        Console::ForegroundColor = System::ConsoleColor::Red;\n                        Console::WriteLine(\"ERROR: Wrong Entry!\");\n                        Console::WriteLine(\"Try a other input :D\");\n                        Console::ForegroundColor = System::ConsoleColor::Green;\n                        break;\n                }\n            }\n        }\n        Sleep(200);\n    } \n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Orxk0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Orxk0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here you can see it doesn't work.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 680, "user_id": 2303176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47107aaff2c656bb305e866155258f1?s=128&d=identicon&r=PG", "display_name": "badola", "link": "https://stackoverflow.com/users/2303176/badola"}, "edited": false, "score": 0, "creation_date": 1515608205, "post_id": 48193629, "comment_id": 83367940, "body": "There are C++ algorithms that do pertain to set operations (<code>std::set_intersection</code>, <code>std::set_difference</code>, etc.). Maybe you should take a look at them and see if they can solve your problem. <a href=\"http://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm</a> On similar notes, maybe you can also use <code>std::is_permutation</code> <a href=\"http://en.cppreference.com/w/cpp/algorithm/is_permutation\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/is_permutation</a>"}, {"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "reply_to_user": {"reputation": 8191, "user_id": 8881141, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/C3ydX.jpg?s=128&g=1", "display_name": "Mr. T", "link": "https://stackoverflow.com/users/8881141/mr-t"}, "edited": false, "score": 1, "creation_date": 1515612007, "post_id": 48193629, "comment_id": 83369894, "body": "@Piinthesky nay"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1515608879, "post_id": 48193860, "comment_id": 83368330, "body": "Note that duplicate entries would give duplicated index (instead of possible permutation)."}, {"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1515612107, "post_id": 48193860, "comment_id": 83369936, "body": "Right, thanks. A simple implementation like this is easy and attractive. The reason I tended toward asking about something offered by a library is because I need this to be highly optimized-- my arrays in question are at least billions or a trillion elements long."}, {"owner": {"reputation": 110, "user_id": 9198801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6617429847b3f45fde84c1a85478bebd?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Diment", "link": "https://stackoverflow.com/users/9198801/daniel-diment"}, "edited": false, "score": 0, "creation_date": 1515612589, "post_id": 48193860, "comment_id": 83370180, "body": "I added a break so it can get out of the finder loop when it finds the first id that is the same, so it will be more quick."}, {"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1515614076, "post_id": 48193860, "comment_id": 83370955, "body": "What is the advantage of declaring the loop counter variable as <code>unsigned</code>?"}, {"owner": {"reputation": 110, "user_id": 9198801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6617429847b3f45fde84c1a85478bebd?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Diment", "link": "https://stackoverflow.com/users/9198801/daniel-diment"}, "edited": false, "score": 0, "creation_date": 1515614397, "post_id": 48193860, "comment_id": 83371130, "body": "Giving that a and b are iterators that are only going to get bigger, is not useful to give them a negative sign, so instead of going from -2,147,483,647 to +2,147,483,647, making it unsigned makes it represent from 0 to 4,294,967,295 numbers, doubling the capacity of the iterator."}], "tags": [], "owner": {"reputation": 110, "user_id": 9198801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6617429847b3f45fde84c1a85478bebd?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Diment", "link": "https://stackoverflow.com/users/9198801/daniel-diment"}, "is_accepted": false, "score": 0, "last_activity_date": 1515612335, "last_edit_date": 1515612335, "creation_date": 1515608546, "answer_id": 48193860, "question_id": 48193629, "link": "https://stackoverflow.com/questions/48193629/find-index-of-all-elements-of-array1-in-array2/48193860#48193860", "title": "Find index of all elements of array1 in array2", "body": "<p>The easiest solution would be this:</p>\n\n<pre><code>const int size=sizeof(arr1)/sizeof(arr1[0]);\nint res [size];\nfor( unsigned int a = 0; a &lt; size; a = a + 1 ){\n    for( unsigned int b = 0; b &lt; size; b = b + 1 ){\n         if(arr1[a]==arr2[b]){\n             res[a]=b;\n             break;\n         }\n    }\n}\n</code></pre>\n\n<p>Mind that this solution expects the two arrays to have the same size.</p>\n\n<p>I think for C++ you wouldn't import a big library just to use a single easy to do function of it, I would create a function in the same file and simply call it.</p>\n"}, {"comments": [{"owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1516042938, "post_id": 48235014, "comment_id": 83521596, "body": "What&#39;s the time complexity on this thing? Would it not be faster to sort both arrays and then do an intersection? Or sort one and then do a binary search?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "edited": false, "score": 0, "creation_date": 1516043797, "post_id": 48235014, "comment_id": 83522022, "body": "Complexity is <code>O(n&#178;)</code>. if we sort both arrays, there should be equal (as we search a permutation)."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1515796847, "creation_date": 1515796847, "answer_id": 48235014, "question_id": 48193629, "link": "https://stackoverflow.com/questions/48193629/find-index-of-all-elements-of-array1-in-array2/48235014#48235014", "title": "Find index of all elements of array1 in array2", "body": "<p>You may use the following:</p>\n\n<pre><code>template &lt;typename T, std::size_t N&gt;\nstd::array&lt;std::size_t, N&gt; getPermutation(const std::array&lt;T, N&gt;&amp; base,\n                                          const std::array&lt;T, N&gt;&amp; arr)\n{\n    std::array&lt;std::size_t, N&gt; res;\n    std::iota(res.begin(), res.end(), 0u);\n\n    for (std::size_t i = 0; i != res.size() + 1; ++i) {\n        for (auto j = i; j != res.size(); ++j) {\n            if (arr[res[j]] == base[i]) {\n                std::swap(res[i], res[j]);\n                break;\n            }\n        }\n    }\n    return res;\n}\n</code></pre>\n\n<p>And that handles duplicates.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/86302858a02d1611\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 2249, "user_id": 5162426, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/87ad09f80bf6b32bbbbdbc4930475607?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5162426/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 116, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1515796847, "creation_date": 1515607707, "last_edit_date": 1515611989, "question_id": 48193629, "link": "https://stackoverflow.com/questions/48193629/find-index-of-all-elements-of-array1-in-array2", "title": "Find index of all elements of array1 in array2", "body": "<p>I have one array that contains a collection of <code>id</code> values:</p>\n\n<p><code>int arr1 [5] = {110, 111, 112, 113, 114};</code></p>\n\n<p>and also have another array that contains the same <code>id</code> values, but in some different order:</p>\n\n<p><code>int arr2 [5] = {111, 113, 110, 114, 112}</code></p>\n\n<p>What is the fastest way to \"match\" the elements of these two arrays? That is, I'd like some kind of function that takes <code>arr1</code> and <code>arr2</code> as arguments, and returns a new array of equal size, that gives each of <code>arr1</code>'s elements a corresponding index in <code>arr2</code>. In this case, the return should be</p>\n\n<p><code>{2, 0, 4, 1, 3}</code>.</p>\n\n<p>Perhaps this is also a question on programming philosophy; I am used to Python, and have always used the Anaconda distribution, which includes functions to perform any kind of statistic, many algorithms, as well as countless what would generally be described as matrix operations, such as the one I describe here, via <code>NumPy</code>. Hence, I have gotten in the habit of finding the package that contains the function I need. </p>\n\n<p>But, in C/C++ development, is it uncommon to take this approach? Should I be just writing this simple task myself? </p>\n"}, {"tags": ["c++", "visual-studio", "google-drive-api", "cloud"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1515607451, "post_id": 48193517, "comment_id": 83367543, "body": "Use one of the web-based source code control systems (eg github).  You are uploading all the binary files, debug databases etc.; these should not be upload but only rebuilt if their source changes."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1515617577, "post_id": 48193517, "comment_id": 83372733, "body": "You really don&#39;t want to compile files over a network or especially over the internet.  Compilation places a large bandwidth over the I/O channel.  Local drives are a better choice.  Use the cloud as a <i>source code repository</i> and use a SCM tool."}, {"owner": {"reputation": 47, "user_id": 6678203, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f78c48cd246dce52e85136730f51890?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/6678203/miguel"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1515623744, "post_id": 48193517, "comment_id": 83375459, "body": "@RichardCritten Thanks for the opinion, is there any free option with private storage? Without publishing the code for everyone?"}, {"owner": {"reputation": 47, "user_id": 6678203, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f78c48cd246dce52e85136730f51890?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/6678203/miguel"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1515623924, "post_id": 48193517, "comment_id": 83375535, "body": "@ThomasMatthews I like that ideia, is there any plugin or something for VS that can help uploading the files?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1515630657, "post_id": 48193517, "comment_id": 83377588, "body": "I have no idea, search the internet for &quot;git visual studio&quot; or &quot;github visual studio&quot;.  I&#39;m using PTC with Visual Studio; I create local sandboxes with PTC, then develop using Visual Studio.  I don&#39;t fetch from the source code repository using Visual Studio."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1515660977, "post_id": 48193517, "comment_id": 83386997, "body": "Modern Visual Studio versions (2017 at least) don&#39;t need a plugin for GitHub. However, GitHub is either free or private, unless you&#39;re a student."}], "answers": [{"tags": [], "owner": {"reputation": 47, "user_id": 6678203, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f78c48cd246dce52e85136730f51890?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/6678203/miguel"}, "is_accepted": true, "score": 0, "last_activity_date": 1515667980, "creation_date": 1515667980, "answer_id": 48205347, "question_id": 48193517, "link": "https://stackoverflow.com/questions/48193517/using-cloud-to-store-vs-projects-source-and-settings-files/48205347#48205347", "title": "Using cloud to store VS projects source and settings files", "body": "<p>I end up using \"visual studio team services\" (included in visual studio), once it was free and feature unlimited private git repos, to make my git available online. Now I can edit across devices.</p>\n"}], "owner": {"reputation": 47, "user_id": 6678203, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/4f78c48cd246dce52e85136730f51890?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/6678203/miguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 48205347, "answer_count": 1, "score": 0, "last_activity_date": 1515667980, "creation_date": 1515607282, "question_id": 48193517, "link": "https://stackoverflow.com/questions/48193517/using-cloud-to-store-vs-projects-source-and-settings-files", "title": "Using cloud to store VS projects source and settings files", "body": "<p>I would like to store Visual studio projects sources and settings on Google drive to be accessed by multiple devices(not at the same time).\nBut one of my problem is my uploud bandwidth (Under 1Mbit/sec) and some projects, even smaller ones, sometimes are 500MB or more in size. And as you probably guess, every time I save my work it takes ages to uploud to the cloud.\nI don't know why the projects folders are so big in size, the project source files are just a few MBs.\nWhat I want is just a way of uploud only the projects sources and settings automatically, as soon as they are created, and leave those have stuff (if possible) on the local machine. In order to sync faster on the cloud</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1515609276, "post_id": 48193455, "comment_id": 83368568, "body": "You could use <a href=\"https://stackoverflow.com/a/19931604/1277769\">this</a> to deduce the type of dereferencing your iterator."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1515607457, "creation_date": 1515607457, "answer_id": 48193567, "question_id": 48193455, "link": "https://stackoverflow.com/questions/48193455/receive-iterators-as-arguments-and-know-class/48193567#48193567", "title": "Receive iterators as arguments and know class", "body": "<p><code>typename list&lt;T&gt;::iterator</code> is <a href=\"http://en.cppreference.com/w/cpp/language/template_argument_deduction#Non-deduced_contexts\" rel=\"nofollow noreferrer\">a non-deduced context</a>. You need to either pass the container itself or specify it as an explicit template argument.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1515608232, "creation_date": 1515608232, "answer_id": 48193766, "question_id": 48193455, "link": "https://stackoverflow.com/questions/48193455/receive-iterators-as-arguments-and-know-class/48193766#48193766", "title": "Receive iterators as arguments and know class", "body": "<p>Iterators designate a <strong>sequence</strong>; they do not have to be associated with a \"collection\". For example, you can create an iterator that reads input from the console.</p>\n\n<p>If you want to restrict a function to only work with containers, then write it that way:</p>\n\n<pre><code>template &lt;class T&gt;\nT f(const T&amp; container) {\n    // whatever; code that uses begin() and end()?\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9718, "user_id": 3294441, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/UwdVL.png?s=128&g=1", "display_name": "QuestionC", "link": "https://stackoverflow.com/users/3294441/questionc"}, "is_accepted": false, "score": 1, "last_activity_date": 1515608337, "creation_date": 1515608337, "answer_id": 48193792, "question_id": 48193455, "link": "https://stackoverflow.com/questions/48193455/receive-iterators-as-arguments-and-know-class/48193792#48193792", "title": "Receive iterators as arguments and know class", "body": "<p>This isn't possible. You can have iterators that don't correspond to any container.  The function that calls method should create an empty list and pass a back_inserter to the list as the third argument to method. Use std:copy as an example of what your method should look like.</p>\n"}, {"comments": [{"owner": {"reputation": 1219, "user_id": 1678659, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3b14643cd59dfaafe7512671057ab93?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer Amir", "link": "https://stackoverflow.com/users/1678659/tomer-amir"}, "edited": false, "score": 0, "creation_date": 1515613141, "post_id": 48193944, "comment_id": 83370466, "body": "Thanks! this is what I was looking for!"}], "tags": [], "owner": {"reputation": 42401, "user_id": 768110, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/UKahT.jpg?s=128&g=1", "display_name": "RiaD", "link": "https://stackoverflow.com/users/768110/riad"}, "is_accepted": true, "score": 2, "last_activity_date": 1515608933, "creation_date": 1515608933, "answer_id": 48193944, "question_id": 48193455, "link": "https://stackoverflow.com/questions/48193455/receive-iterators-as-arguments-and-know-class/48193944#48193944", "title": "Receive iterators as arguments and know class", "body": "<p>In this particular case (if you know that it's <code>std::list</code>) you can get <code>value_type</code> from iterator itself: </p>\n\n<pre><code>template &lt;class T&gt;\nauto method(T begin, T end) {\n    list&lt;typename T::value_type&gt; res; // I need the template class here\n\n    for (; begin != end; begin++) {\n        cout &lt;&lt; *begin; // Whatever...\n    }\n\n    return res;\n}\n</code></pre>\n\n<p><code>value_type = U</code> only for <code>std::list&lt;U&gt;</code></p>\n"}], "owner": {"reputation": 1219, "user_id": 1678659, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d3b14643cd59dfaafe7512671057ab93?s=128&d=identicon&r=PG&f=1", "display_name": "Tomer Amir", "link": "https://stackoverflow.com/users/1678659/tomer-amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 48193944, "answer_count": 4, "score": 0, "last_activity_date": 1515608933, "creation_date": 1515607051, "last_edit_date": 1515607387, "question_id": 48193455, "link": "https://stackoverflow.com/questions/48193455/receive-iterators-as-arguments-and-know-class", "title": "Receive iterators as arguments and know class", "body": "<p>I need to create a method that receives iterators as arguments and return a templated collection of the same type.</p>\n\n<p>I created a minimal example the demonstrates my need:</p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A {\n    int i;\npublic:\n    A(int _i) : i(_i) {}\n\n    operator int() {\n        return i;\n    }\n};\n\nclass B {\n    int i;\npublic:\n    B(int _i) : i(_i) {}\n\n    operator int() {\n        return i;\n    }\n};\n\ntemplate &lt;class T&gt;\nlist&lt;T&gt; method(typename list&lt;T&gt;::iterator begin, typename list&lt;T&gt;::iterator end) {\n    list&lt;T&gt; res; // I need the template class here\n\n    for (; begin != end; begin++) {\n        cout &lt;&lt; *begin; // Whatever...\n    }\n\n    return res;\n}\n\nint main() {\n    list&lt;A&gt; listA = {1, 2, 3};\n    list&lt;B&gt; listB = {4, 5, 6};\n\n    auto res1 = method(listA.begin(), listA.end()); // Cannot change\n    auto res2 = method(listB.begin(), listB.end()); // Cannot change\n}\n</code></pre>\n\n<p>This is not a working example, but I am looking for a way to make this work.</p>\n\n<p>The important part is the <code>method</code> and it's arguments, and that it will return a templated class with <code>T</code>. So I can change the method as much as i want but the <code>auto res1 = method(listA.begin(), listA.end());</code> should stay the same. (not my code)</p>\n\n<p>How can I do something like this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515607555, "post_id": 48193447, "comment_id": 83367602, "body": "If you actually made a wrapper, like you said in the question title, then #1 is answered somewhat"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1515607947, "post_id": 48193447, "comment_id": 83367803, "body": "why use a templated function instead of just named functions?"}, {"owner": {"reputation": 59, "user_id": 7778874, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PQXOL.png?s=128&g=1", "display_name": "Black cowgirl", "link": "https://stackoverflow.com/users/7778874/black-cowgirl"}, "edited": false, "score": 0, "creation_date": 1515608385, "post_id": 48193447, "comment_id": 83368038, "body": "Because I like it and also it is what I don&#39;t know how to create and use."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1515608653, "post_id": 48193447, "comment_id": 83368195, "body": "so something like <code>template &lt;class T, class... Args&gt; T create(Args args...) { return T(args..., &#39;c&#39;); }</code>? called like <code>.create&lt;A&gt;(3)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 0, "last_activity_date": 1564775936, "creation_date": 1564775936, "answer_id": 57332763, "question_id": 48193447, "link": "https://stackoverflow.com/questions/48193447/wrapping-up-factory-methods/57332763#57332763", "title": "Wrapping up factory methods", "body": "<p><code>std::any</code> and variadic templates will be your friend. Yuu can store anything in <code>std::any</code>. The <code>any_cast</code> will be a bit of a problem.</p>\n\n<p>See the following working code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;utility&gt;\n#include &lt;any&gt;\n\n\n// Some demo classes ----------------------------------------------------------------------------------\nstruct Base {\n    Base(int d) : data(d) {};\n    virtual ~Base() { std::cout &lt;&lt; \"Destructor Base\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Base\\n\"; }\n    int data{};\n};\nstruct Child1 : public Base {\n    Child1(int d, std::string s) : Base(d) { std::cout &lt;&lt; \"Constructor Child1 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; s &lt;&lt; \"\\n\"; }\n    virtual ~Child1() { std::cout &lt;&lt; \"Destructor Child1\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child1: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\nstruct Child2 : public Base {\n    Child2(int d, char c, long l) : Base(d) { std::cout &lt;&lt; \"Constructor Child2 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \" \" &lt;&lt; l &lt;&lt; \"\\n\"; }\n    virtual ~Child2() { std::cout &lt;&lt; \"Destructor Child2\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child2: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\nstruct Child3 : public Base {\n    Child3(int d, long l, char c, std::string s) : Base(d) { std::cout &lt;&lt; \"Constructor Child3 \" &lt;&lt; d &lt;&lt; \" \" &lt;&lt; l &lt;&lt; \" \" &lt;&lt; c &lt;&lt; \" \" &lt;&lt; s &lt;&lt; \"\\n\"; }\n    virtual ~Child3() { std::cout &lt;&lt; \"Destructor Child3\\n\"; }\n    virtual void print() { std::cout &lt;&lt; \"Print Child3: \" &lt;&lt; data &lt;&lt; \"\\n\"; }\n};\n\n\n\nusing UPTRB = std::unique_ptr&lt;Base&gt;;\n\n\ntemplate &lt;class Child, typename ...Args&gt;\nUPTRB createClass(Args...args) { return std::make_unique&lt;Child&gt;(args...); }\n\n// The Factory ----------------------------------------------------------------------------------------\ntemplate &lt;class Key, class Object&gt;\nclass Factory\n{\n    std::map&lt;Key, std::any&gt; selector;\npublic:\n    Factory() : selector() {}\n    Factory(std::initializer_list&lt;std::pair&lt;const Key, std::any&gt;&gt; il) : selector(il) {}\n\n    template&lt;typename Function&gt;\n    void add(Key key, Function&amp;&amp; someFunction) { selector[key] = std::any(someFunction); };\n\n    template &lt;typename ... Args&gt;\n    Object create(Key key, Args ... args) {\n        if (selector.find(key) != selector.end()) {\n            return std::any_cast&lt;std::add_pointer_t&lt;Object(Args ...)&gt;&gt;(selector[key])(args...);\n        }\n        else return nullptr;\n    }\n};\n\nint main()\n{\n    Factory&lt;int, UPTRB&gt; factory{\n        {1, createClass&lt;Child1, int, std::string&gt;},\n        {2, createClass&lt;Child2, int, char, long&gt;}\n    };\n    factory.add(3, createClass&lt;Child3, int, long, char, std::string&gt;);\n\n\n    // Some test values\n    std::string s1(\" Hello1 \"); std::string s3(\" Hello3 \");\n    int i = 1;  const int ci = 1;   int&amp; ri = i;    const int&amp; cri = i;   int&amp;&amp; rri = 1;\n\n    UPTRB b1 = factory.create(1, 1, s1);\n    UPTRB b2 = factory.create(2, 2, '2', 2L);\n    UPTRB b3 = factory.create(3, 3, 3L, '3', s3);\n\n    b1-&gt;print();\n    b2-&gt;print();\n    b3-&gt;print();\n    b1 = factory.create(2, 4, '4', 4L);\n    b1-&gt;print();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7778874, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PQXOL.png?s=128&g=1", "display_name": "Black cowgirl", "link": "https://stackoverflow.com/users/7778874/black-cowgirl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564775936, "creation_date": 1515607018, "last_edit_date": 1515607362, "question_id": 48193447, "link": "https://stackoverflow.com/questions/48193447/wrapping-up-factory-methods", "title": "Wrapping up factory methods", "body": "<p>I have 2 <code>structs</code> whose constructors accept different numbers and types of parameters passed in.\nFor example,</p>\n\n<pre><code>struct A:Base\n{\n   A(int i, char c){}\n};\n\nstruct B:Base\n{\n   B(char c){}\n};\n</code></pre>\n\n<p>And I also have a factory method to create these 2 <code>structs</code>'s objects,</p>\n\n<pre><code>struct F\n{\n   Base* Do(int i)\n   {\n      if (i==0)\n      {\n         return new A(i,'c');\n      }\n      else\n      {\n         return new B('c'); \n      }\n   }  \n};\n</code></pre>\n\n<p>Now that I try to improve my <code>Factory F</code> like this</p>\n\n<pre><code>struct F\n{\n   template&lt;int i, class X&gt;\n   Base* Do();\n   template&lt;class X&gt;\n   Base* Do&lt;0&gt;()\n   {\n      return new X(i, 'c');\n   }\n   template&lt;class X&gt;\n   Base* Do&lt;1&gt;()\n   {\n      return new X('c');\n   }\n};\n</code></pre>\n\n<p>The only thing I am not interested in this method is that I have to write a lot of specialized templates in case I have plenty of structs <code>A,B,C,...</code> but I only love templates and I don't like <code>return new X(...)</code>.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li>How can I minimize the long code but still use templates ? </li>\n<li>How can I  stop  returning a pointer to the base class ? Dynamic allocation sux, I prefer slow and tender classic allocators on the stack for my factory.</li>\n<li>I like to use variadic templates for the arguments of my <code>structs</code>' ctors. </li>\n</ol>\n"}, {"tags": ["c++", "segmentation-fault", "set"], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 3, "last_activity_date": 1515606677, "creation_date": 1515606677, "answer_id": 48193347, "question_id": 48193317, "link": "https://stackoverflow.com/questions/48193317/c-segmentation-fault-list-of-structs-with-sets/48193347#48193347", "title": "C++ Segmentation Fault - List of Structs with Sets", "body": "<p>You're dereferencing the <code>end</code> iterator.  You should use reverse iterators</p>\n\n<pre><code>for (auto it = liveness_table.rbegin(); it != liveness_table.rend(); ++it)\n</code></pre>\n\n<p>to traverse the list in reverse order.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 2, "last_activity_date": 1515606691, "creation_date": 1515606691, "answer_id": 48193349, "question_id": 48193317, "link": "https://stackoverflow.com/questions/48193317/c-segmentation-fault-list-of-structs-with-sets/48193349#48193349", "title": "C++ Segmentation Fault - List of Structs with Sets", "body": "<pre><code>for (std::list&lt;liveness_node&gt;::iterator it = liveness_table.end(); it != liveness_table.begin(); --it)\n</code></pre>\n\n<p>You are trying to access <code>liveness_table.end()</code>, <code>end()</code> returns the last element + 1, you're not allowed to dereference and use <code>end()</code>. Instead, use a reverse iterator:</p>\n\n<pre><code>for (std::list&lt;liveness_node&gt;::reverse_iterator it = liveness_table.rbegin(); it != liveness_table.rend(); ++it)\n</code></pre>\n"}], "owner": {"reputation": 4144, "user_id": 4909000, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7814948e917a5a698377e2bac255a9ac?s=128&d=identicon&r=PG&f=1", "display_name": "Alk", "link": "https://stackoverflow.com/users/4909000/alk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 48193347, "answer_count": 2, "score": 0, "last_activity_date": 1515606691, "creation_date": 1515606547, "question_id": 48193317, "link": "https://stackoverflow.com/questions/48193317/c-segmentation-fault-list-of-structs-with-sets", "title": "C++ Segmentation Fault - List of Structs with Sets", "body": "<p>I have a struct defined as follows: </p>\n\n<pre><code>struct node {\nint index;\nstd::set&lt;StringRef&gt; set1;\nstd::set&lt;StringRef&gt; set2;\nstd::set&lt;StringRef&gt; set3;\nstd::set&lt;StringRef&gt; set4;\n\n};  \n</code></pre>\n\n<p>I'm then looping through a <code>List</code> of <code>node</code> defined as follows:</p>\n\n<pre><code> std::list&lt;node&gt; my_table;\n</code></pre>\n\n<p>I am now looping through this list and accessing <code>set1</code> and <code>set2</code>, but this leads to a segmentation fault. </p>\n\n<pre><code>for (std::list&lt;liveness_node&gt;::iterator it = liveness_table.end(); it != liveness_table.begin(); --it) {\n\n            std::set&lt;StringRef&gt; in_temp = it-&gt;set1;\n            std::set&lt;StringRef&gt; out_temp = it-&gt;set2;\n\n}\n</code></pre>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 3, "creation_date": 1515606716, "post_id": 48193225, "comment_id": 83367146, "body": "idioms in one language are not idioms in others. There are MANY differences, from sizeof(char) an many more"}, {"owner": {"reputation": 1791, "user_id": 794606, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9a1d5c337bdddae373bbdcb92fdb7077?s=128&d=identicon&r=PG", "display_name": "Jacek Cz", "link": "https://stackoverflow.com/users/794606/jacek-cz"}, "edited": false, "score": 2, "creation_date": 1515606815, "post_id": 48193225, "comment_id": 83367200, "body": "do not copy code with small changes - write algorithm in &quot;native&quot; style of target language"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4744560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6976def04ac5169ff3d9f9b6fd813874?s=128&d=identicon&r=PG", "display_name": "Karbust", "link": "https://stackoverflow.com/users/4744560/karbust"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515606926, "post_id": 48193292, "comment_id": 83367268, "body": "@maccettura could you explain please?"}, {"owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "edited": false, "score": 0, "creation_date": 1515607057, "post_id": 48193292, "comment_id": 83367331, "body": "Added clarification"}, {"owner": {"reputation": 67, "user_id": 4744560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6976def04ac5169ff3d9f9b6fd813874?s=128&d=identicon&r=PG", "display_name": "Karbust", "link": "https://stackoverflow.com/users/4744560/karbust"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607417, "post_id": 48193292, "comment_id": 83367530, "body": "@maccettura thanks both, the sizeof(char) can be there right?"}, {"owner": {"reputation": 67, "user_id": 4744560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6976def04ac5169ff3d9f9b6fd813874?s=128&d=identicon&r=PG", "display_name": "Karbust", "link": "https://stackoverflow.com/users/4744560/karbust"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607447, "post_id": 48193292, "comment_id": 83367540, "body": "@maccettura the code compiled with Marshal.SizeOf()"}, {"owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607511, "post_id": 48193292, "comment_id": 83367581, "body": "@maccettura please try, it DOES compile."}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607571, "post_id": 48193292, "comment_id": 83367615, "body": "@SimoErkinheimo did not see the object overload.  Apparently I am just dumb today."}, {"owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "reply_to_user": {"reputation": 67, "user_id": 4744560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6976def04ac5169ff3d9f9b6fd813874?s=128&d=identicon&r=PG", "display_name": "Karbust", "link": "https://stackoverflow.com/users/4744560/karbust"}, "edited": false, "score": 0, "creation_date": 1515607576, "post_id": 48193292, "comment_id": 83367618, "body": "@charparodar change <b>(Marshal.SizeOf(Key)) / sizeof(char)</b> to <b>Key.Length</b>. It&#39;s not the same otherwise."}], "tags": [], "owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "is_accepted": true, "score": 1, "last_activity_date": 1515607679, "last_edit_date": 1515607679, "creation_date": 1515606482, "answer_id": 48193292, "question_id": 48193225, "link": "https://stackoverflow.com/questions/48193225/converting-c-function-to-c-string-problems/48193292#48193292", "title": "Converting C++ Function to C# (String problems)", "body": "<p>Close! You are right to use StringBuilder. However, ^ -operator (bitwise XOR) makes C# intepret the result as int. Since you know it's still a char, just add cast:</p>\n\n<pre><code>for (int i = 0; i &lt; Str.Length; i++)\n{\n    sb[i] = (char)(Str[i] ^ Key[i % ((Marshal.SizeOf(Key)) / sizeof(char))]); //line 30\n}\n</code></pre>\n\n<p>Othewise I'm not sure if this does exactly the same as C++ implementation. <code>(sizeof(Key) / sizeof(char)</code> is basically the length of the array. So you should just use Key.length at C# implementation. So a bit more accurate one would be</p>\n\n<pre><code>for (int i = 0; i &lt; Str.Length; i++)\n{\n    sb[i] = (char)(Str[i] ^ Key[i % Key.Length]); //line 30\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607102, "post_id": 48193334, "comment_id": 83367357, "body": "@maccettura care to explain? The C++ code calculates a modulo inside the &quot;key&quot; char array based on the running index <code>i</code> ofer the string to by cyphered. My C# replacement does the same, using the array method Length instead., both essentially Cycle the <code>key</code> array through based on the actual &#39;i&#39;"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607228, "post_id": 48193334, "comment_id": 83367434, "body": "@maccettura  Its not needed. Mashal.SizeOf(Key) is introduced by the Q.  This <code>Key[i % (sizeof(Key) &#47; sizeof(char))];</code> is the c++ way to calculate how many elements are in the array of char that was defined above - not needed at all in C#"}, {"owner": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515607492, "post_id": 48193334, "comment_id": 83367565, "body": "Ok so upon further research it looks like <code>sizeof(char)</code> returns a 1 in c++ so I apologize."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 9603, "user_id": 2457029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9yHWL.jpg?s=128&g=1", "display_name": "maccettura", "link": "https://stackoverflow.com/users/2457029/maccettura"}, "edited": false, "score": 0, "creation_date": 1515610870, "post_id": 48193334, "comment_id": 83369374, "body": "@maccettura if you had a c++ system with sizeof(char) == 3, then <code>(sizeof(Key)</code> with <code>key</code> an array of 5 chars in it would be <code>15</code> , therefore dividing by the charsize of 3 goes back to: <code>5 items in array</code> - your solution was still more complete then the accepted one ;)"}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1515606766, "last_edit_date": 1515606766, "creation_date": 1515606588, "answer_id": 48193334, "question_id": 48193225, "link": "https://stackoverflow.com/questions/48193225/converting-c-function-to-c-string-problems/48193334#48193334", "title": "Converting C++ Function to C# (String problems)", "body": "<p>Replace</p>\n\n<pre><code>Encrypted[i] = Str[i] ^ Key[i % ((Marshal.SizeOf(Key)) / sizeof(char))]; //line 29\n</code></pre>\n\n<p>with </p>\n\n<pre><code>Encrypted[i] = Str[i] ^ Key[i % Key.Lenght]; //line 29\n</code></pre>\n\n<p>And you can replace characters in a string with:</p>\n\n<pre><code>\"1234567890123\".Remove(9,1).Insert(9,\"A\")\n</code></pre>\n\n<p>Using a string builder is a smarter choice though.</p>\n"}], "owner": {"reputation": 67, "user_id": 4744560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6976def04ac5169ff3d9f9b6fd813874?s=128&d=identicon&r=PG", "display_name": "Karbust", "link": "https://stackoverflow.com/users/4744560/karbust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 48193292, "answer_count": 2, "score": 1, "last_activity_date": 1515607679, "creation_date": 1515606251, "question_id": 48193225, "link": "https://stackoverflow.com/questions/48193225/converting-c-function-to-c-string-problems", "title": "Converting C++ Function to C# (String problems)", "body": "<p>I'm trying to convert a code from C++ to C#, but I'm not being able to do it...</p>\n\n<pre><code>std::string Cipher(std::string Str) \n{\n    char Key[5] = { 'H', 'S', 'M', 'K', 'V' };\n    std::string Encrypted = Str;\n    for (unsigned int i = 0; i &lt; Str.size(); i++) \n    {\n        Encrypted[i] = Str[i] ^ Key[i % (sizeof(Key) / sizeof(char))];\n    }\n    return Encrypted;\n}\n</code></pre>\n\n<p>What I got so far in C# is this:</p>\n\n<pre><code>    public string Cipher(string Str)\n    {\n        char[] Key = new char[5] { 'H', 'S', 'M', 'K', 'V' };\n        string Encrypted = Str;\n        for(int i = 0; i &lt; Str.Length; i++)\n        {\n            Encrypted[i] = Str[i] ^ Key[i % ((Marshal.SizeOf(Key)) / sizeof(char))]; //line 29\n        }\n        return Encrypted;\n    }\n</code></pre>\n\n<p>But I keep getting this error:</p>\n\n<pre><code>Property or indexer 'string.this[int]' cannot be assigned to -- it is read only (on line 29)\n</code></pre>\n\n<p>I found out that it has something to do with immutability of strings, so I tried this:</p>\n\n<pre><code>    public string Cipher(string Str)\n    {\n        char[] Key = new char[5] { 'H', 'S', 'M', 'K', 'V' };\n        string Encrypted = Str;\n        StringBuilder sb = new StringBuilder(Encrypted);\n        for (int i = 0; i &lt; Str.Length; i++)\n        {\n            sb[i] = Str[i] ^ Key[i % ((Marshal.SizeOf(Key)) / sizeof(char))]; //line 30\n        }\n        return Encrypted;\n    }\n</code></pre>\n\n<p>But, now I get this error:</p>\n\n<pre><code>Cannot implicitly convert type 'int' to 'char'. An explicit conversion exists (are you missing a cast?) (on line 30)\n</code></pre>\n\n<p>Anyone can help?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "while-loop", "logical-operators"], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515615552, "last_edit_date": 1515615552, "creation_date": 1515606283, "answer_id": 48193237, "question_id": 48193183, "link": "https://stackoverflow.com/questions/48193183/what-is-the-use-of-and-n-in-this-code/48193237#48193237", "title": "What is the use of &quot;and N&quot; in this code?", "body": "<p>It's a cryptic way of writing:</p>\n\n<pre><code>while( (cout&lt;&lt;A[--N]&lt;&lt;' ') and (N != 0) );\n//    output is successful and N is not equal to zero.\n</code></pre>\n\n<p>It could be written more clearly as:</p>\n\n<pre><code>for ( ; N != 0; --N)\n{\n    cout &lt;&lt; A[N-1] &lt;&lt; ' ';\n}\n</code></pre>\n\n<p>Since it's theoretically possible for <code>N</code> to be negative, it will be better to use:</p>\n\n<pre><code>for ( ; N &gt; 0; --N)\n{\n    cout &lt;&lt; A[N-1] &lt;&lt; ' ';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1515606618, "last_edit_date": 1515606618, "creation_date": 1515606317, "answer_id": 48193246, "question_id": 48193183, "link": "https://stackoverflow.com/questions/48193183/what-is-the-use-of-and-n-in-this-code/48193246#48193246", "title": "What is the use of &quot;and N&quot; in this code?", "body": "<p><code>N</code> is an integer variable, value of type <code>int</code> can be implicitly converted to <code>bool</code> (non zero becomes <code>true</code> and zero becomes <code>false</code>). So the expression basically sais execute when result of <code>operator&lt;&lt;</code> converted to <code>bool</code> is true <strong>and</strong> <code>N</code> is not equal to zero. Logically this code</p>\n\n<pre><code>while(cout&lt;&lt;A[--N]&lt;&lt;' ' and N);\n</code></pre>\n\n<p>is equal to:</p>\n\n<pre><code>do {\n   bool b1 = cout&lt;&lt;A[--N]&lt;&lt;' ';\n   bool b2 = N;\n} while( b1 and b2 );\n</code></pre>\n\n<p>actual code is a little different due to short circuit but that differences are unimportant in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1515606867, "last_edit_date": 1515606867, "creation_date": 1515606363, "answer_id": 48193265, "question_id": 48193183, "link": "https://stackoverflow.com/questions/48193183/what-is-the-use-of-and-n-in-this-code/48193265#48193265", "title": "What is the use of &quot;and N&quot; in this code?", "body": "<p>The part <code>and N</code> that can be also written like <code>&amp;&amp; N</code> of the while statement</p>\n\n<pre><code>while(cout&lt;&lt;A[--N]&lt;&lt;' ' and N);\n</code></pre>\n\n<p>that as it has been pointed out can be rewritten like</p>\n\n<pre><code>while(cout&lt;&lt;A[--N]&lt;&lt;' ' &amp;&amp; N != 0);\n</code></pre>\n\n<p>checks that <code>N</code> that is being decreased (<code>A[--N]</code>) in each iteration of the loop is not equal to 0.</p>\n\n<p>So the loop outputs elements okf the array in the reverse order. </p>\n\n<p>The word <code>and</code> is a so-called alternative token for the primary token <code>&amp;&amp;</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 9114579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KJaLw.jpg?s=128&g=1", "display_name": "S_Madankar", "link": "https://stackoverflow.com/users/9114579/s-madankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1515612883, "creation_date": 1515612883, "answer_id": 48194827, "question_id": 48193183, "link": "https://stackoverflow.com/questions/48193183/what-is-the-use-of-and-n-in-this-code/48194827#48194827", "title": "What is the use of &quot;and N&quot; in this code?", "body": "<p>It is just a way of writing the code by some programmers. \nIt is actually written as </p>\n\n<pre><code>while( (cout&lt;&lt;A[--N]&lt;&lt;' ')  and (N != 0) );\n</code></pre>\n\n<p>Basically 'and' operator returns true when both operands are non zero values.\nSo cout will give number of characters it printed which will be non zero in this case and until the value of N becomes zero your loop will be execute. </p>\n"}], "owner": {"reputation": 35, "user_id": 9199867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de09b5d56d1b4d9924155dc21c3c90e2?s=128&d=identicon&r=PG&f=1", "display_name": "Aayush Chachan", "link": "https://stackoverflow.com/users/9199867/aayush-chachan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1515621389, "creation_date": 1515606116, "last_edit_date": 1515621389, "question_id": 48193183, "link": "https://stackoverflow.com/questions/48193183/what-is-the-use-of-and-n-in-this-code", "title": "What is the use of &quot;and N&quot; in this code?", "body": "<p>C++ Code:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    int N;\n    cin&gt;&gt;N;\n    int *A = new int[N];\n    int i=0;\n    for(i=0;i&lt;N;i++)\n        cin&gt;&gt;A[i];\n    while(cout&lt;&lt;A[--N]&lt;&lt;' ' and N);\n    delete[] A;\n    return 0;\n}\n</code></pre>\n\n<p>Print the integers of the array in the reverse order in a single line separated by a space.\nDoes anyone know what is \"and N\" do in cout statement? </p>\n"}, {"tags": ["python", "c++", "multithreading", "scikit-learn"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4842163"}, "edited": false, "score": 0, "creation_date": 1515606639, "post_id": 48193130, "comment_id": 83367098, "body": "OMP is pretty easy. I tend to use it in a wrapper for parallel for loops for the most part which give them a functional-style interface similar to TBB like: <code>pfor(start_index, end_index, chunk_size, func);</code> and <code>pfor_each(c.begin(), c.end(), chunk_size, func);</code> Also makes it easy to swap between different parallel libs to compare their performance characteristics."}, {"owner": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "edited": false, "score": 0, "creation_date": 1515611401, "post_id": 48193130, "comment_id": 83369623, "body": "I&#39;ve used OMP in c++ code that is imported into python without issue.  All the OMP instructions hide behind the c++ function calls so the fact that you&#39;re importing them into python is somewhat irrelevant. You just need to be sure to apply the correct c++ compiler directives to enable OMP when you build your module."}, {"owner": {"reputation": 23, "user_id": 7554193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a144acc575adb6d27d6d2edfa54015c?s=128&d=identicon&r=PG&f=1", "display_name": "PGN", "link": "https://stackoverflow.com/users/7554193/pgn"}, "reply_to_user": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "edited": false, "score": 0, "creation_date": 1515633484, "post_id": 48193130, "comment_id": 83378278, "body": "@bivouac0 I&#39;ve tried with OMP, but got and ImportError python-side (<code>undefined symbol: GOMP_parallel</code>).  I&#39;ve added the -fopenmp flag, but I might be mistaking other compiling options (even the compiler itself!).  Any suggestion?"}, {"owner": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "edited": false, "score": 0, "creation_date": 1516027546, "post_id": 48193130, "comment_id": 83513367, "body": "Without the actual data it&#39;s difficult for someone else to help find an answer, however I&#39;d first try to use <code>omp parallel for</code> on a single loop to see if it will speed up an accumulate.  I&#39;d then look at the <code>omp sections</code> to parallelize the different for loops.  You should be able to get a decent speed-up but it sometimes takes a little experimenting to get the right combo.  Try to write your code as compact as possible.  Sometimes that helps OMP compile a fast solution.  If you want more help than this, you&#39;ll probably need to post a slice of the project with code and data ready to run."}, {"owner": {"reputation": 23, "user_id": 7554193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a144acc575adb6d27d6d2edfa54015c?s=128&d=identicon&r=PG&f=1", "display_name": "PGN", "link": "https://stackoverflow.com/users/7554193/pgn"}, "reply_to_user": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "edited": false, "score": 0, "creation_date": 1516027707, "post_id": 48193130, "comment_id": 83513457, "body": "Hey @bivouac0, thank you for the answer.  I&#39;ve also asked on CodeReview, here&#39;s the <a href=\"https://codereview.stackexchange.com/questions/185042/parallelize-a-for-loop-that-sums-up-different-elements-from-an-array\">full code</a>"}, {"owner": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "edited": false, "score": 0, "creation_date": 1516039355, "post_id": 48193130, "comment_id": 83519948, "body": "I tried a couple of things on your code but wasn&#39;t able to get a speed-up.  I&#39;m thinking that gcc is already compiling with the simd instructions (similar to <code>omp simd</code>) so adding a <code>omp parallel for</code> isn&#39;t going to help.  Note:  you&#39;re allocating a double* inside of your function but I don&#39;t see a delete so you&#39;re creating a memory leak."}], "answers": [{"tags": [], "owner": {"reputation": 1996, "user_id": 4620420, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/f042995922d39078a6c252040748eb6c?s=128&d=identicon&r=PG&f=1", "display_name": "bivouac0", "link": "https://stackoverflow.com/users/4620420/bivouac0"}, "is_accepted": false, "score": 0, "last_activity_date": 1515637597, "last_edit_date": 1515637597, "creation_date": 1515636428, "answer_id": 48198838, "question_id": 48193130, "link": "https://stackoverflow.com/questions/48193130/simplest-way-to-to-write-parallel-c-c-modules-to-be-used-in-python/48198838#48198838", "title": "Simplest way to to write parallel C/C++ modules to be used in Python", "body": "<p>In reference to the above issues with compiling the c++ code with OpenMP, you probably just need to include the <code>gomp</code> library.  Here's a simple setup.py script that works for me...</p>\n\n<pre><code>from distutils.core import setup\nfrom distutils.extension import Extension\nfrom Cython.Build import cythonize, build_ext\n# run as... python setup.py build_ext\n\next = Extension(\"entity_lookup\",    # name of extension\n    [\"src/entity_lookup.pyx\", \"src/EntityLookupImpl.cpp\", \"src/IndexDictImpl.cpp\"],\n    language=\"c++\",     # this causes Pyrex/Cython to create C++ source\n    #include_dirs=[...],                       \n    libraries=['gomp'], # or include explicity with extra_link_args below                         \n    cmdclass = {'build_ext': build_ext},\n    #extra_link_args=['/usr/lib/x86_64-linux-gnu/libgomp.so.1'], # see above\n    extra_compile_args=['-fopenmp', '-std=c++11']\n)\n\nsetup(\n    name = 'EntityLookup',\n    version = 0.4,\n    description = 'Package to match words and phrases to Entity labels',\n    ext_modules = cythonize(ext)\n)\n</code></pre>\n\n<p>Note the inclusion of gomp (aka libgomp.so.1). This is where GOMP_parallel is defined.</p>\n\n<p>To compile do... <code>python setup.py build_ext</code></p>\n\n<p>I always used this code in-place (not installed anywhere) and to do that you need to set a link to the compiled entity_lookup.so that appears deep in the \"build\" directory that the script creates.</p>\n"}], "owner": {"reputation": 23, "user_id": 7554193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a144acc575adb6d27d6d2edfa54015c?s=128&d=identicon&r=PG&f=1", "display_name": "PGN", "link": "https://stackoverflow.com/users/7554193/pgn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516023531, "creation_date": 1515605931, "last_edit_date": 1516023531, "question_id": 48193130, "link": "https://stackoverflow.com/questions/48193130/simplest-way-to-to-write-parallel-c-c-modules-to-be-used-in-python", "title": "Simplest way to to write parallel C/C++ modules to be used in Python", "body": "<h3>Short background (not really necessary)</h3>\n\n<p>I've been working on writing an alternative ( <em>less-resources demanding</em> ?) <a href=\"https://en.wikipedia.org/wiki/Mean_shift\" rel=\"nofollow noreferrer\">mean shift</a> C++ module to the <a href=\"http://scikit-learn.org/stable/modules/generated/sklearn.cluster.MeanShift.html\" rel=\"nofollow noreferrer\">Scikit-Learn</a> one.</p>\n\n<p>I've been using, on the C++ side, the <a href=\"https://github.com/jlblancoc/nanoflann\" rel=\"nofollow noreferrer\">nanoflann</a> library for building and searching the KD-Trees.</p>\n\n<p>Basically I have two numpy arrays that i pass to my C++ MeanShift function via Cython, which then returns the list of cluster centers found.</p>\n\n<p>It turns out to be a little faster, circa 7 times (I'm still actively working on it).</p>\n\n<h3>My question :</h3>\n\n<p>I'd like to parallelize the most expensive portions of my C++ code, like the for loops used for the convergence, but, since this C++ module will be imported into python I'd like to be doing so in the most secure &amp; simple way.</p>\n\n<p>I thought about using OpenMP, do you have any suggestion?</p>\n\n<p>Thank you!\nHave a nice day.</p>\n\n<h3>Edit / Code snippet</h3>\n\n<p>Thank you @bivouac0, i am now able to compile the whole.</p>\n\n<p>Now I'm struggling against the logical / technical side. \nLet me write you a snippet of the code I want to parallelize.</p>\n\n<p>I have a <code>std::vector&lt;std::pair&lt;size_t, double&gt; &gt; &gt; matches</code> vector and a fairly large <code>double samples[N]</code> array.\nI want to use the first element of the pairs stored in the <code>matches</code> vector to calculate the access index to the larger <code>samples</code> array (see code beneath):\nThis is the method that does it:</p>\n\n<pre><code>typedef std::vector&lt;std::pair&lt;size_t, double&gt; &gt; searchResultPair; \ndouble* calcMean(size_t nMatches, searchResultPair matches,\n    double* samples) {\n/*\n*/\ndouble* returnArray = new double[3];\nreturnArray[0] = 0;\nreturnArray[1] = 0;\nreturnArray[2] = 0;\ndouble x = y = z = 0;\nfor (size_t i = 0; i &lt; nMatches; i = i + 1) {\n    x = x + samples[3 * (matches[i].first)];\n    y = y + samples[3 * (matches[i].first) + 1];\n    z = z + samples[3 * (matches[i].first) + 2];\n     }\nreturnArray[0] = x/nMatches;\nreturnArray[1] = y/nMatches;\nreturnArray[2] = z/nMatches;\n\nreturn(returnArray);\n}\n</code></pre>\n\n<p>Is there a way to concurrently access the <code>matches[i].first</code> variable?</p>\n\n<p>I've tried with <code>#pragma omp parallel for reduction(+:x,y,z) num_threads(n_threads)</code> but it downgrades the performance (1 thread > 2 threads > 4 threads > 8 threads and so on...).</p>\n\n<p>Does my question have any sense? Am I mistaken anywhere? \nIt might just be an overhead to manage a parallel <code>n_threads</code> team to calculate the partial sums <code>x,y,z</code>, since the elements in a <code>vector</code> are stored contigously...</p>\n\n<p>I could split the above for-loop in 3 parts and try to parallelize every one of them. <em>Could it be a good idea?</em>\nThat calculation over there is nested inside a <code>while</code> nested in another for loop, and it's the most important method of the whole module.</p>\n"}, {"tags": ["c++", "string", "encryption", "dll"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1515606770, "post_id": 48193103, "comment_id": 83367184, "body": "Probably related to debug information."}, {"owner": {"reputation": 33, "user_id": 2693176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUAZK.jpg?s=128&g=1", "display_name": "Hattrick HKS", "link": "https://stackoverflow.com/users/2693176/hattrick-hks"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1515607319, "post_id": 48193103, "comment_id": 83367483, "body": "More specific please, if you know? I set Linker&#39;s options NOT to generate any Manifest or Database files. Debug Information = None. Strings like I&#39;ve written above are still shown in the DLL&#39;s content."}, {"owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1515753558, "post_id": 48193103, "comment_id": 83430471, "body": "That string may come from the <code>__FILE__</code> macro. Are you sure you don&#39;t use it?"}, {"owner": {"reputation": 33, "user_id": 2693176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUAZK.jpg?s=128&g=1", "display_name": "Hattrick HKS", "link": "https://stackoverflow.com/users/2693176/hattrick-hks"}, "edited": false, "score": 0, "creation_date": 1515757587, "post_id": 48193103, "comment_id": 83432803, "body": "Found it. It was because of some &#39;assert&#39; &amp; &#39;static_assert&#39; calls. Thank you for your answers though!"}], "answers": [{"tags": [], "owner": {"reputation": 5233, "user_id": 414521, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/0ed12f2bb7ec4f26252d3e8328243861?s=128&d=identicon&r=PG", "display_name": "SSpoke", "link": "https://stackoverflow.com/users/414521/sspoke"}, "is_accepted": false, "score": 0, "last_activity_date": 1581329624, "creation_date": 1581329624, "answer_id": 60148138, "question_id": 48193103, "link": "https://stackoverflow.com/questions/48193103/how-to-hide-strings-inside-dll-file-while-compiling/60148138#60148138", "title": "How To Hide Strings Inside DLL File While Compiling?", "body": "<p>Here is what I currently use it has hacks to support sprintf functions which spilled plain-text in compiled binary file. You could now use w_sprintf_s instead of sprintf, like so </p>\n\n<pre><code>char test[256] = { 0 };\nw_sprintf_s(test, 256, XorStr(\"test test :D %d %+d\\n\"), 1, 1337);\n</code></pre>\n\n<p>or use it like this to print stuff on screen for example</p>\n\n<pre><code>w_printf(XorStr(\"test I print this and can't see me inside .dll or .exe\"));\n</code></pre>\n\n<p>works on variables, if you have a custom printf() you could use that as well..</p>\n\n<pre><code>char szGuid[255] = { 0 };\n//generate serial code removed.\nchar finalSerial[512] = { 0 };\nXorCompileTime::w_sprintf(finalSerial, XorStr(\"serial information=%s\"), szGuid);\nmyprintf(XorStr(\"Your Hardware ID: %s\\n\"), szGuid);\n</code></pre>\n\n<p><br>\nMay add support for wchar_t wide strings like arkan did.. but I have no use for them right now as I don't write anything in symbols / unicode.\n<br></p>\n\n<p>Here is a file just rename the code below to a <code>XorString.h</code> file and include it in your project simple as that</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;array&gt;\n#include &lt;cstdarg&gt;\n\n#define BEGIN_NAMESPACE( x ) namespace x {\n#define END_NAMESPACE }\n\nBEGIN_NAMESPACE(XorCompileTime)\n\nconstexpr auto time = __TIME__;\nconstexpr auto seed = static_cast&lt; int &gt;(time[7]) + static_cast&lt; int &gt;(time[6]) * 10 + static_cast&lt; int &gt;(time[4]) * 60 + static_cast&lt; int &gt;(time[3]) * 600 + static_cast&lt; int &gt;(time[1]) * 3600 + static_cast&lt; int &gt;(time[0]) * 36000;\n\n// 1988, Stephen Park and Keith Miller\n// \"Random Number Generators: Good Ones Are Hard To Find\", considered as \"minimal standard\"\n// Park-Miller 31 bit pseudo-random number generator, implemented with G. Carta's optimisation:\n// with 32-bit math and without division\n\ntemplate &lt; int N &gt;\nstruct RandomGenerator\n{\nprivate:\n    static constexpr unsigned a = 16807; // 7^5\n    static constexpr unsigned m = 2147483647; // 2^31 - 1\n\n    static constexpr unsigned s = RandomGenerator&lt; N - 1 &gt;::value;\n    static constexpr unsigned lo = a * (s &amp; 0xFFFF); // Multiply lower 16 bits by 16807\n    static constexpr unsigned hi = a * (s &gt;&gt; 16); // Multiply higher 16 bits by 16807\n    static constexpr unsigned lo2 = lo + ((hi &amp; 0x7FFF) &lt;&lt; 16); // Combine lower 15 bits of hi with lo's upper bits\n    static constexpr unsigned hi2 = hi &gt;&gt; 15; // Discard lower 15 bits of hi\n    static constexpr unsigned lo3 = lo2 + hi;\n\npublic:\n    static constexpr unsigned max = m;\n    static constexpr unsigned value = lo3 &gt; m ? lo3 - m : lo3;\n};\n\ntemplate &lt;&gt;\nstruct RandomGenerator&lt; 0 &gt;\n{\n    static constexpr unsigned value = seed;\n};\n\ntemplate &lt; int N, int M &gt;\nstruct RandomInt\n{\n    static constexpr auto value = RandomGenerator&lt; N + 1 &gt;::value % M;\n};\n\ntemplate &lt; int N &gt;\nstruct RandomChar\n{\n    static const char value = static_cast&lt; char &gt;(1 + RandomInt&lt; N, 0x7F - 1 &gt;::value);\n};\n\ntemplate &lt; size_t N, int K &gt;\nstruct XorString\n{\nprivate:\n    const char _key;\n    std::array&lt; char, N + 1 &gt; _encrypted;\n\n    constexpr char enc(char c) const\n    {\n        return c ^ _key;\n    }\n\n    char dec(char c) const\n    {\n        return c ^ _key;\n    }\n\npublic:\n    template &lt; size_t... Is &gt;\n    constexpr __forceinline XorString(const char* str, std::index_sequence&lt; Is... &gt;) : _key(RandomChar&lt; K &gt;::value), _encrypted{ enc(str[Is])... }\n    {\n    }\n\n    __forceinline decltype(auto) decrypt(void)\n    {\n        for (size_t i = 0; i &lt; N; ++i) {\n            _encrypted[i] = dec(_encrypted[i]);\n        }\n        _encrypted[N] = '\\0';\n        return _encrypted.data();\n    }\n};\n\n//--------------------------------------------------------------------------------\n//-- Note: XorStr will __NOT__ work directly with functions like printf.\n//         To work with them you need a wrapper function that takes a const char*\n//         as parameter and passes it to printf and alike.\n//\n//         The Microsoft Compiler/Linker is not working correctly with variadic \n//         templates!\n//  \n//         Use the functions below or use std::cout (and similar)!\n//--------------------------------------------------------------------------------\n\nstatic auto w_printf = [](const char* fmt, ...) {\n    va_list args;\n    va_start(args, fmt);\n    vprintf_s(fmt, args);\n    va_end(args);\n};\n\nstatic auto w_printf_s = [](const char* fmt, ...) {\n    va_list args;\n    va_start(args, fmt);\n    vprintf_s(fmt, args);\n    va_end(args);\n};\n\nstatic auto w_sprintf = [](char* buf, const char* fmt, ...) {\n    va_list args;\n    va_start(args, fmt);\n    vsprintf(buf, fmt, args);\n    va_end(args);\n};\n\nstatic auto w_sprintf_s = [](char* buf, size_t buf_size, const char* fmt, ...) {\n    va_list args;\n    va_start(args, fmt);\n    vsprintf_s(buf, buf_size, fmt, args);\n    va_end(args);\n};\n\n#define XorStr( s ) ( XorCompileTime::XorString&lt; sizeof( s ) - 1, __COUNTER__ &gt;( s, std::make_index_sequence&lt; sizeof( s ) - 1&gt;() ).decrypt() )\n\nEND_NAMESPACE\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2693176, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jUAZK.jpg?s=128&g=1", "display_name": "Hattrick HKS", "link": "https://stackoverflow.com/users/2693176/hattrick-hks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1581329624, "creation_date": 1515605832, "question_id": 48193103, "link": "https://stackoverflow.com/questions/48193103/how-to-hide-strings-inside-dll-file-while-compiling", "title": "How To Hide Strings Inside DLL File While Compiling?", "body": "<p>I'm using the XorString class (with FORCEINLINE constructor) to hide strings like \"How are you?\" but I can still see strings like</p>\n\n<pre><code>c : \\ u s e r s \\ h a t t r i c k \\ s o u r c e \\ r e p o s \\ h k . s k i n s \\ d e p s \\ j s o n \\ s r c \\ d e t a i l / s e r i a l i z e r . h p p\n</code></pre>\n\n<p>even while they are not declared in any header or source files, inside the DLL. Is there a VS project option (C/ C++ or Linker) that can hide these? Thanks!</p>\n"}, {"tags": ["c++", "scope"], "comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1515609131, "post_id": 48193026, "comment_id": 83368487, "body": "No compiler would produce such output! Which compiler do you use??"}, {"owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1515610701, "post_id": 48193026, "comment_id": 83369290, "body": "g++  -std=c++11 -fno-elide-constructors -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1515614454, "post_id": 48193026, "comment_id": 83371155, "body": "Sorry did not new this -fno-elide-constructors!"}], "answers": [{"tags": [], "owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1515672688, "creation_date": 1515672688, "answer_id": 48206778, "question_id": 48193026, "link": "https://stackoverflow.com/questions/48193026/temporary-object-for-by-value-function-creation-scope/48206778#48206778", "title": "Temporary object for by-value function creation scope", "body": "<p>So after a bit research I have the Answer.<br></p>\n\n<p>Here is the disassembly of the code (changed the move constructor to a copy constructor for readability):<br> </p>\n\n<pre><code>int A::counter = 0;\n\nA f1 (A a) \n{ \n  400a18:   55                      push   %rbp\n  400a19:   48 89 e5                mov    %rsp,%rbp\n  400a1c:   48 83 ec 10             sub    $0x10,%rsp\n  400a20:   48 89 7d f8             mov    %rdi,-0x8(%rbp)\n  400a24:   48 89 75 f0             mov    %rsi,-0x10(%rbp)\n    cout &lt;&lt; __LINE__ &lt;&lt; endl;\n  400a28:   be 1d 00 00 00          mov    $0x1d,%esi\n  400a2d:   bf 80 13 60 00          mov    $0x601380,%edi\n  400a32:   e8 c1 fd ff ff          callq  4007f8 &lt;_ZNSolsEi@plt&gt;\n  400a37:   be 78 08 40 00          mov    $0x400878,%esi\n  400a3c:   48 89 c7                mov    %rax,%rdi\n  400a3f:   e8 24 fe ff ff          callq  400868 &lt;_ZNSolsEPFRSoS_E@plt&gt;\n    a.t = 1;\n  400a44:   48 8b 45 f0             mov    -0x10(%rbp),%rax\n  400a48:   c7 00 01 00 00 00       movl   $0x1,(%rax)\n    std::cout &lt;&lt; \"f1: \" &lt;&lt; endl; \n  400a4e:   be ce 0e 40 00          mov    $0x400ece,%esi\n  400a53:   bf 80 13 60 00          mov    $0x601380,%edi\n  400a58:   e8 fb fd ff ff          callq  400858 &lt;_ZStlsISt11char_traitsIcEERSt13basic_ostreamIcT_ES5_PKc@plt&gt;\n  400a5d:   be 78 08 40 00          mov    $0x400878,%esi\n  400a62:   48 89 c7                mov    %rax,%rdi\n  400a65:   e8 fe fd ff ff          callq  400868 &lt;_ZNSolsEPFRSoS_E@plt&gt;\n    cout &lt;&lt; __LINE__ &lt;&lt; endl;\n  400a6a:   be 20 00 00 00          mov    $0x20,%esi\n  400a6f:   bf 80 13 60 00          mov    $0x601380,%edi\n  400a74:   e8 7f fd ff ff          callq  4007f8 &lt;_ZNSolsEi@plt&gt;\n  400a79:   be 78 08 40 00          mov    $0x400878,%esi\n  400a7e:   48 89 c7                mov    %rax,%rdi\n  400a81:   e8 e2 fd ff ff          callq  400868 &lt;_ZNSolsEPFRSoS_E@plt&gt;\n    return a; \n  400a86:   48 8b 55 f0             mov    -0x10(%rbp),%rdx\n  400a8a:   48 8b 45 f8             mov    -0x8(%rbp),%rax\n  400a8e:   48 89 d6                mov    %rdx,%rsi\n  400a91:   48 89 c7                mov    %rax,%rdi\n  400a94:   e8 dd 01 00 00          callq  400c76 &lt;_ZN1AC1ERKS_&gt;\n}\n  400a99:   48 8b 45 f8             mov    -0x8(%rbp),%rax\n  400a9d:   c9                      leaveq \n  400a9e:   c3                      retq   \n\n0000000000400a9f &lt;main&gt;:\n\nint main() {\n  400a9f:   55                      push   %rbp\n  400aa0:   48 89 e5                mov    %rsp,%rbp\n  400aa3:   53                      push   %rbx\n  400aa4:   48 83 ec 48             sub    $0x48,%rsp\n    A a = f1(A()) ;\n  400aa8:   48 8d 45 e0             lea    -0x20(%rbp),%rax\n  400aac:   48 89 c7                mov    %rax,%rdi\n  400aaf:   e8 2a 01 00 00          callq  400bde &lt;_ZN1AC1Ev&gt;\n  400ab4:   48 8d 55 e0             lea    -0x20(%rbp),%rdx\n  400ab8:   48 8d 45 d0             lea    -0x30(%rbp),%rax\n  400abc:   48 89 d6                mov    %rdx,%rsi\n  400abf:   48 89 c7                mov    %rax,%rdi\n  400ac2:   e8 af 01 00 00          callq  400c76 &lt;_ZN1AC1ERKS_&gt;\n  400ac7:   48 8d 45 c0             lea    -0x40(%rbp),%rax\n  400acb:   48 8d 55 d0             lea    -0x30(%rbp),%rdx\n  400acf:   48 89 d6                mov    %rdx,%rsi\n  400ad2:   48 89 c7                mov    %rax,%rdi\n  400ad5:   e8 3e ff ff ff          callq  400a18 &lt;_Z2f11A&gt;\n  400ada:   48 8d 55 c0             lea    -0x40(%rbp),%rdx\n  400ade:   48 8d 45 b0             lea    -0x50(%rbp),%rax\n  400ae2:   48 89 d6                mov    %rdx,%rsi\n  400ae5:   48 89 c7                mov    %rax,%rdi\n  400ae8:   e8 89 01 00 00          callq  400c76 &lt;_ZN1AC1ERKS_&gt;\n  400aed:   48 8d 45 c0             lea    -0x40(%rbp),%rax\n  400af1:   48 89 c7                mov    %rax,%rdi\n  400af4:   e8 31 02 00 00          callq  400d2a &lt;_ZN1AD1Ev&gt;\n  400af9:   48 8d 45 d0             lea    -0x30(%rbp),%rax\n  400afd:   48 89 c7                mov    %rax,%rdi\n  400b00:   e8 25 02 00 00          callq  400d2a &lt;_ZN1AD1Ev&gt;\n  400b05:   48 8d 45 e0             lea    -0x20(%rbp),%rax\n  400b09:   48 89 c7                mov    %rax,%rdi\n  400b0c:   e8 19 02 00 00          callq  400d2a &lt;_ZN1AD1Ev&gt;\n    printf(\"what is happening\\n\");\n  400b11:   bf d3 0e 40 00          mov    $0x400ed3,%edi\n  400b16:   e8 ed fc ff ff          callq  400808 &lt;puts@plt&gt;\n    cout &lt;&lt; __LINE__ &lt;&lt; endl;\n    return a; \n}\n</code></pre>\n\n<p>The Copy constructor is called \"<em>ZN1AC1ERKS</em>\" after mangling process.<br>\nAs we can see, the temporary object that is being created <strong>for</strong> f1, is being created <strong>before</strong> the function call, in main, and not as i expected, in f1's scope.<br><br>\nThe meaning is as follows:<br>\nTemporary objects being created for functions that are called by value are not created in the functions scope, but rather on the line called the function, thus they will be destroyed before the next line execution, in the ordinary first created last destroyed way.</p>\n"}], "owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 48206778, "answer_count": 1, "score": 0, "last_activity_date": 1515672688, "creation_date": 1515605562, "last_edit_date": 1515605780, "question_id": 48193026, "link": "https://stackoverflow.com/questions/48193026/temporary-object-for-by-value-function-creation-scope", "title": "Temporary object for by-value function creation scope", "body": "<p>I have this following code which i can not understand:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nclass A \n{\n    public: \n        int t = 0;\n    A(){\n      cout &lt;&lt; \"constructed\"  &lt;&lt; t&lt;&lt; endl; \n    } \n A (A&amp;&amp; a) {\n\n    cout &lt;&lt; \"in move ctor, moving\"&lt;&lt; a.t &lt;&lt; endl;\n }\n ~A() { \n\n     cout &lt;&lt; \"deleting\"&lt;&lt; t &lt;&lt; endl;\n    }\n\n};\n\nA f1 (A a) \n{ \n    a.t = 1;\n    std::cout &lt;&lt; \"f1: \" &lt;&lt; endl; \n    return a; \n}\n\nint main() {\n    A a = f1(A()) ;\n    printf(\"what is happening\\n\");\n}\n</code></pre>\n\n<p>and the output is</p>\n\n<pre><code>constructed0\nin move ctor, moving0\nf1: \nin move ctor, moving1\nin move ctor, moving0\ndeleting0\ndeleting1\ndeleting0\nwhat is happening\ndeleting0\n</code></pre>\n\n<p>The thing that I can not understand is the phase where the temporary object created <strong>for</strong> f1 (the one with a.t=1) is being destroyed.</p>\n\n<p>From the output I assume it is being destroyed at the and of the line <code>A a = f1(A()) ;</code> While I thought it was created <strong>inside</strong> f1 and for f1, and therefore will be destroyed when exiting the function, <strong>before</strong> deleting0 is being called.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["c++", "bash", "qt", "sockets", "ipc"], "answers": [{"tags": [], "owner": {"reputation": 75, "user_id": 9156697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f97326ca79bd274220ec03f6deb08018?s=128&d=identicon&r=PG&f=1", "display_name": "Tomek", "link": "https://stackoverflow.com/users/9156697/tomek"}, "is_accepted": false, "score": 3, "last_activity_date": 1515606511, "creation_date": 1515606511, "answer_id": 48193306, "question_id": 48192912, "link": "https://stackoverflow.com/questions/48192912/use-qt-to-read-from-socket/48193306#48193306", "title": "Use QT to read from socket", "body": "<p>You could connect to readyRead signal, and then check received message, like in this example:</p>\n\n<pre><code>connect( this, SIGNAL(readyRead()), SLOT(readClient()) );\n\nvoid readClient()\n{\n    QTextStream ts( this );\n    int line = 0;\n\n    while ( canReadLine() ) {\n        QString str = ts.readLine();\n\n        if(str == \"someSpecialMessage\")\n        {\n           //...\n        }\n\n        line++;\n    }\n}\n</code></pre>\n\n<p>for more informations about this signal, see documentation: <a href=\"http://doc.qt.io/qt-5/qiodevice.html#readyRead\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qiodevice.html#readyRead</a></p>\n\n<p>This is also an example of client and server applications in Qt, using QSocket and QServerSocket: <a href=\"https://doc.qt.io/archives/3.3/clientserver-example.html\" rel=\"nofollow noreferrer\">https://doc.qt.io/archives/3.3/clientserver-example.html</a></p>\n"}], "owner": {"reputation": 77, "user_id": 6249140, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1f9275296a4f5fcd7107b93ef4d80711?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/6249140/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1515606511, "creation_date": 1515605107, "question_id": 48192912, "link": "https://stackoverflow.com/questions/48192912/use-qt-to-read-from-socket", "title": "Use QT to read from socket", "body": "<p>I want to use IPC in order to exchange messages between two separate applications. The first one is a BASH script which is fired when a specific udev rule is activated (in Ubuntu Linux), and the other one is a simple Qt 5.7 console application, which acts as a server.</p>\n\n<p>I already have the Qt server working and printing a message when it accepts a connection to the specified socket. What I'm trying to achieve now, is to make the server do something not when it accepts a connection, but when it receives a certain \"message\". Any ideas on how to do it?</p>\n\n<p>Below is my code:</p>\n\n<p><strong>server.cpp</strong></p>\n\n<pre><code>#include \"server.h\"\n\nServer::Server() : QThread()\n{\n    m_server = new QLocalServer(this);\n    m_server-&gt;listen(\"somesocket.sock\");\n    connect(m_server, &amp;QLocalServer::newConnection, this, &amp;Server::testFunction);\n}\n\nServer::~Server()\n{\n    m_server-&gt;removeServer(\"somesocket.sock\");\n}\n\nvoid Server::run()\n{\n}\n\nvoid Server::testFunction(){\n    qDebug() &lt;&lt; \"Sth happened!\";\n    return;\n}\n</code></pre>\n\n<p><strong>server.h</strong></p>\n\n<pre><code>#ifndef SERVER_H\n#define SERVER_H\n\n#include &lt;QThread&gt;\n#include &lt;QObject&gt;\n#include &lt;QDebug&gt;\n#include &lt;QLocalServer&gt;\n\nclass Server : public QThread\n{\npublic:\n    Server();\n    ~Server();\n    void run();\n    void testFunction();\nprivate:\n     QLocalServer *m_server;\nsignals:\n    void connectionEstablished(bool);\n};\n\n#endif // SERVER_H\n</code></pre>\n"}, {"tags": ["c++", "c++11", "declaration", "definition"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 712, "user_id": 4009370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b92c9a656d5274db5b46d2341ea468?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Sprague", "link": "https://stackoverflow.com/users/4009370/chris-sprague"}, "edited": false, "score": 0, "creation_date": 1515604272, "post_id": 48192615, "comment_id": 83365769, "body": "@ChrisSprague so, &quot;because that&#39;s the same grammar for function parameters and it&#39;s useful there&quot;?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1515604544, "post_id": 48192615, "comment_id": 83365912, "body": "@ChrisSprague That would make sense. But the <i>parameter-declaration-clause</i> already uses a separate grammar altogether (<i>abstract-declarator</i>) together with <i>declator</i>. There is no need for that to be the case for <i>declarator</i>, I gather."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515604623, "post_id": 48192615, "comment_id": 83365962, "body": "A user defined object could do some work in constructor/destructor (eg create a database transaction)."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1515604650, "post_id": 48192615, "comment_id": 83365980, "body": "@manni66 That&#39;s not the case here, no objects are created."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1515604683, "post_id": 48192615, "comment_id": 83366001, "body": "Related: <code>struct {something};</code> counts as a declaration declaring nothing too."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1515604813, "post_id": 48192615, "comment_id": 83366074, "body": "I wonder why the standard still allows this? Maybe so old broken code is thill allowed to compile?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 4, "creation_date": 1515605009, "post_id": 48192615, "comment_id": 83366180, "body": "<code>-pedantic-errors</code> is your friend."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 2, "creation_date": 1515605157, "post_id": 48192615, "comment_id": 83366275, "body": "That demo doesn\u2019t show it\u2019s well-formed. For one thing, I think Clang only claims to be conforming with <code>-pedantic</code>. For another, both GCC and Clang say warnings count as diagnostic messages, and all the standard requires for ill-formed code is a diagnostic (usually); the compiler can still emit a program if it wants."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1515605545, "post_id": 48192615, "comment_id": 83366498, "body": "I believe they are called or referred to as anonymous objects. Also see <a href=\"https://stackoverflow.com/q/5330287/608639\">What is an Anonymous Object?</a>, <a href=\"https://stackoverflow.com/q/3394797/608639\">Is it possible to pass an \u201cunnamed\u201d variable to a function?</a>, <a href=\"https://stackoverflow.com/q/19875697/608639\">Passing an anonymous variable by reference</a>, <a href=\"https://stackoverflow.com/q/461062/608639\">C++ anonymous variables</a>, etc."}], "answers": [{"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 3, "creation_date": 1515605242, "post_id": 48192830, "comment_id": 83366342, "body": "Nice one. It&#39;s funny how most people just believed the OP and didn&#39;t try to compile the code with proper flags."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1515606319, "post_id": 48192830, "comment_id": 83366920, "body": "I was looking in declarators for something like this, did not expect this to be in declarations :) Thanks"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1515608953, "post_id": 48192830, "comment_id": 83368387, "body": "This explanation only goes so far because (what&#39;s supposed to be) the <i>init-declarator-list</i> might not be completely omitted. Rakete1111&#39;s comment to the question applies in this case, instead, a <i>declarator</i> is required (and not an <i>abstract-declarator</i>), which must ultimately contain an <i>id-expression</i>. Example, <code>*</code> is a valid <i>abstract-declarator</i>, but not a valid <i>declarator</i>, so <code>int *;</code> is not a valid <i>simple-declaration</i>."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 14, "last_activity_date": 1515605511, "last_edit_date": 1515605511, "creation_date": 1515604822, "answer_id": 48192830, "question_id": 48192615, "link": "https://stackoverflow.com/questions/48192615/why-is-it-allowed-to-have-a-declaration-without-a-name/48192830#48192830", "title": "Why is it allowed to have a declaration without a name?", "body": "<p>According to the C++ Standard (7 Declarations)</p>\n\n<blockquote>\n  <p>5 In a <em>simple-declaration</em>, the optional <em>init-declarator-list</em> can be\n  omitted only when declaring a class (Clause 9) or enumeration (7.2),\n  that is, when the <em>decl-specifier-seq</em> contains either a\n  <em>class-specifier</em>, an <em>elaborated-type-specifier</em> with a <em>class-key</em> (9.1),\n  or an <em>enum-specifier</em>....</p>\n</blockquote>\n\n<p>Thus this code</p>\n\n<pre><code>int main() {\n  int; // well-formed\n  Magic; // well-formed\n}\n</code></pre>\n\n<p>is ill-formed.</p>\n\n<p>Moreover formally these ill-formed declarations are definitions according to the paragraph #2 of the section <em>3.1 Declarations and definitions</em> and obviously as such do not make sense.</p>\n"}], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "closed_date": 1515616069, "accepted_answer_id": 48192830, "answer_count": 1, "score": 10, "last_activity_date": 1515607403, "creation_date": 1515603986, "last_edit_date": 1515607403, "question_id": 48192615, "link": "https://stackoverflow.com/questions/48192615/why-is-it-allowed-to-have-a-declaration-without-a-name", "closed_reason": "Duplicate", "title": "Why is it allowed to have a declaration without a name?", "body": "<p>While reading the standard, I was really surprised to see that actually, the name is optional in a declaration:</p>\n\n<pre><code>struct Magic {};\nint main() {\n  int; // well-formed\n  Magic; // well-formed\n}\n</code></pre>\n\n<p>For those interested to read the standard, it's because in a <em>simple-declaration</em>, the <em>init-declarator-list</em> is optional. Here's a <a href=\"https://godbolt.org/g/HXdRvM\" rel=\"nofollow noreferrer\">demo</a>.</p>\n\n<p>And so I really want to know why this is allowed. Why would I ever want to do that? It really makes no sense to me. My reasoning is that, because if it makes no sense, why allow it?</p>\n"}, {"tags": ["c++", "ssl", "curl", "https", "libcurl"], "comments": [{"owner": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 1, "creation_date": 1515603971, "post_id": 48192569, "comment_id": 83365623, "body": "GZipped I bet see <a href=\"https://stackoverflow.com/questions/20781856/decompression-gzip-data-with-curl\">decompression gzip data with curl</a>"}, {"owner": {"reputation": 11, "user_id": 9199735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ianoh.jpg?s=128&g=1", "display_name": "LunaCat", "link": "https://stackoverflow.com/users/9199735/lunacat"}, "reply_to_user": {"reputation": 158803, "user_id": 246342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8ba0aea3f521082f18dd7c186e7d4c3?s=128&d=identicon&r=PG", "display_name": "Alex K.", "link": "https://stackoverflow.com/users/246342/alex-k"}, "edited": false, "score": 0, "creation_date": 1515605346, "post_id": 48192569, "comment_id": 83366394, "body": "Seems like that&#39;s correct, but for some reason, I get an error: Unrecognized content encoding type. libcurl understands identity content encodings. Also, I am not sure if this is related, but it seems they banned my IP address although I can see their website."}], "owner": {"reputation": 11, "user_id": 9199735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ianoh.jpg?s=128&g=1", "display_name": "LunaCat", "link": "https://stackoverflow.com/users/9199735/lunacat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515603832, "creation_date": 1515603832, "question_id": 48192569, "link": "https://stackoverflow.com/questions/48192569/libcurl-receives-encrypted-data-from-538", "title": "Libcurl receives encrypted data from 538", "body": "<p>I am using libcurl to get some data online. Specifically, I want to keep updated on the information here</p>\n\n<p><a href=\"https://projects.fivethirtyeight.com/pollster-ratings/?ex_cid=irpromo\" rel=\"nofollow noreferrer\">https://projects.fivethirtyeight.com/pollster-ratings/?ex_cid=irpromo</a></p>\n\n<p>for research purposes. However, when I use libcurl to pull that data, the result looks encrypted:</p>\n\n<p>\u2039      \u00ec\u00bd\u00dbV\u00e3\u00c8\u00ba\u00efy\u00bf\u0178\u00c25\u00d6{\u2030l\u2026\u00ce\u00ca\u0161Uk@f\u2019\u0013   df\u20187:\u201em-\u00b9t \u00cc\u00de=F\u00bfF?</p>\n\n<p>It works okay with other https sites so can you tell me why is it not working here?</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017", "dynamic-library"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1515614700, "post_id": 48192534, "comment_id": 83371276, "body": "For the case when build directory contains spaces, it is better to wrap paths into quotes: <code>&quot;${CMAKE_BINARY_DIR}&#47;exports&#47;PsychoEngineExports.hpp&quot;</code>. If this doesn&#39;t work, show output of command <code>message(STATUS &quot;Binary dir: ${CMAKE_BINARY_DIR}&quot;)</code> inserted just before <code>GENERATE_EXPORT_HEADER</code> call."}, {"owner": {"reputation": 167, "user_id": 9170790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d015354b365c121dc46e1820f098b2a0?s=128&d=identicon&r=PG&f=1", "display_name": "JamieRhys", "link": "https://stackoverflow.com/users/9170790/jamierhys"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1515620425, "post_id": 48192534, "comment_id": 83374057, "body": "Didn&#39;t work so did the second thing you suggested and this is the output      Binary Dir: C:/Users/jamie/CMakeBuilds/a339631e-d6a4-0131-bea0-1b077753e&zwnj;&#8203;93d/build/x86-Debug"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1515625847, "post_id": 48192534, "comment_id": 83376242, "body": "It is not clear from your question - whether the header is actually created (at the place specified by <code>EXPORT_FILE_NAME</code> option) or not?"}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "edited": false, "score": 1, "creation_date": 1515659351, "post_id": 48192534, "comment_id": 83386145, "body": "Note that your executable will now not see the include directory for the export header, as this was set in a different subdirectory. Consider using the modern style of setting include directories through <a href=\"https://cmake.org/cmake/help/v3.10/command/target_include_directories.html\" rel=\"nofollow noreferrer\"><code>target_include_directories</code></a> instead, which does not have this issue.."}], "owner": {"reputation": 167, "user_id": 9170790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d015354b365c121dc46e1820f098b2a0?s=128&d=identicon&r=PG&f=1", "display_name": "JamieRhys", "link": "https://stackoverflow.com/users/9170790/jamierhys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515603725, "creation_date": 1515603725, "question_id": 48192534, "link": "https://stackoverflow.com/questions/48192534/trouble-trying-to-make-a-shared-library-using-cmake", "title": "Trouble trying to make a shared library using CMake", "body": "<p>So I've decided to try learning and using CMake so that I can make a portable API for Windows, Linux and MacOS.</p>\n\n<p>I've got what I want to call a two part directory tree:</p>\n\n<pre><code>/\n PsychoEngine/\n              includes/\n                       Engine/\n                              PsychoEngine.hpp\n          src/\n              PsychoEngine/\n                           Engine/\n                                  PsychoEngine.cpp\n                                  dir_engine.cmake\n                           dir_pe.cmake\n              dir_src.cmake\n          CMakeLists.txt\n Temp_PE_Game/\n          includes/\n          src/\n              Main/\n                   TempPEGameMain.cpp\n                   dir_main.cmake\n              dir_src.cmake\n          CMakeLists.txt\n CMakeLists.txt\n</code></pre>\n\n<p>So Temp_PE_Game is set as an executable so that I can test out everything I write in PsychoEngine. AFAIK, the CMake script for building and running Temp is correct, it runs properly.</p>\n\n<p>However, PsychoEngine, is where I'm struggling. Currently my \"root\" CMakeLists script for it is:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.0)\nproject(PsychoEngine)\n\nmessage(\"Building PsychoEngine Library.\")\n\nset(PROJECT_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR})\nset(PROJECT_SRC_FILES ${PROJECT_SRC_DIR})\n\ninclude_directories(${PROJECT_SRC_DIR}/includes\n                    ${CMAKE_BINARY_DIR}/exports/)\n\ninclude(${PROJECT_SRC_DIR}/src/dir_src.cmake)\n\noption(BUILD_SHARED_LIBS \"Build Shared Libraries\" ON)\n\nset(LIB_TYPE STATIC)\nif(BUILD_SHARED_LIBS)\n    set(LIB_TYPE SHARED)\nendif(BUILD_SHARED_LIBS)\n\ninclude(GenerateExportHeader)\nadd_library(PsychoEngine ${LIB_TYPE} ${PROJECT_SRC_FILES})\n\nGENERATE_EXPORT_HEADER(PsychoEngine\n                        BASE_NAME PsychoEngine\n                        EXPORT_MACRO_NAME PSYCHOENGINE_EXPORT \n                        EXPORT_FILE_NAME ${CMAKE_BINARY_DIR}/exports/PsychoEngineExports.hpp\n                        STATIC_DEFINE PsychoEngine_BUILT_AS_STATIC)\n</code></pre>\n\n<p>This too seems to work. However, when I try to import the PsychoEngineExports.hpp in my PsychoEngine.hpp like this:</p>\n\n<pre><code>#include \"PsychoEngineExports.hpp\" /* PEExports.hpp */\n#include &lt;iostream&gt;\n\nnamespace pe { namespace engine {\n    class PSYCHOENGINE_EXPORT PsychoEngine {\n    public:\n        PsychoEngine();\n        int start();\n    };\n}}\n</code></pre>\n\n<p>Visual Studio's intellisense starts complaining it cannot find PEExports.hpp and class definitions come out in red intermittently.</p>\n\n<p>I thought, oh, might just be that PEExports.hpp hasn't been generated, so I re-ran cmake in my build directory and it still doesn't work.</p>\n\n<p>Here is my Temp_PE_Game CMakeLists.txt:</p>\n\n<pre><code>message(\"Building PE Temp Game.\")\n\nset(PROJECT_SRC_DIR ${CMAKE_CURRENT_SOURCE_DIR})\nset(PROJECT_SRC_FILES ${PROJECT_SRC_DIR})\n\n# Include PsychoEngine's headers\ninclude_directories(${CMAKE_SOURCE_DIR}/PsychoEngine/includes)\ninclude_directories(${PROJECT_SRC_DIR}/includes)\n\nmessage(\"PE Game Binary Dir: \" ${CMAKE_BINARY_DIR})\nmessage(\"PE Game Executable DIR: \" ${EXECUTABLE_OUTPUT_PATH})\n\ninclude(${PROJECT_SRC_DIR}/src/dir_src.cmake)\n\nadd_executable(Temp_PE_Game ${PROJECT_SRC_FILES})\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["c++", "numbers", "partition"], "comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515604059, "post_id": 48192522, "comment_id": 83365667, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/48169568/grouping-of-elements-of-set-with-first-n-natural-numbers-excluding-one-arbitrar\">Grouping of elements of set with first n Natural numbers, excluding one arbitrary element, to give us a Sum equal to S</a>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1515604076, "post_id": 48192522, "comment_id": 83365672, "body": "1.  What does this <code>&#39;0&#39;</code>, <code>&#39;1&#39;</code> and <code>&#39;2&#39;</code> represent?  Would an enum be clearer?  2.  I don&#39;t think this algorithm works.  Do you have any simple worked examples?"}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1515604129, "post_id": 48192522, "comment_id": 83365704, "body": "This is called the <a href=\"https://en.wikipedia.org/wiki/Partition_problem\" rel=\"nofollow noreferrer\"><b>Partition Problem</b></a>. But your code needs you and your debugger."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1515609257, "post_id": 48192522, "comment_id": 83368554, "body": "@KhalilKhalaf This is a special case of the partition problem. In particular, this problem is easy (as in, not NP) and has a solution whenever the sum, <code>((n*(n+1))&#47;2 - x)&#47;2</code>, is an integer."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515651723, "post_id": 48194150, "comment_id": 83382775, "body": "I tried it and it solved 1 more test case but wasn&#39;t enough to solve all of them. I&#39;m not understanding what more possible test cases are there that should be taken care of"}, {"owner": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515652095, "post_id": 48194150, "comment_id": 83382912, "body": "And can you explain me the logic of how you deduced your two sets for the example you&#39;ve taken above. Thanks."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515672301, "post_id": 48194150, "comment_id": 83394173, "body": "@Rilee I just solved the example manually. I assume you do not have access to the problematic test cases. I do have a more complicated solution that works for sure, although I was convinced that adding the condition would suffice. I will look into it and describe that other solution when I have time. Also, where do you test your code? Being able to test mine the same way would make it easier for me."}, {"owner": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515751432, "post_id": 48194150, "comment_id": 83429052, "body": "Codechef.. if you can provide me with some link to the complex idea(if possible ) then I can look into it."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515799183, "post_id": 48194150, "comment_id": 83453232, "body": "There is no link to the more complicated solution since I came up with it. I edited to present it, hopefully clearly enough. Don&#39;t you have a direct link to the problem where I can test things out? I&#39;m not going to search Codechef for it."}, {"owner": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "edited": false, "score": 0, "creation_date": 1515823164, "post_id": 48194150, "comment_id": 83457177, "body": "Yeah I have <a href=\"https://www.codechef.com/JAN18/problems/PRTITION\" rel=\"nofollow noreferrer\">codechef.com/JAN18/problems/PRTITION</a>. Here you go! and thanks for the explanation."}], "tags": [], "owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "is_accepted": false, "score": 0, "last_activity_date": 1515799040, "last_edit_date": 1515799040, "creation_date": 1515609927, "answer_id": 48194150, "question_id": 48192522, "link": "https://stackoverflow.com/questions/48192522/partition-number-from-1-to-n/48194150#48194150", "title": "Partition number from 1 to n", "body": "<p>You algorithm does not work for all cases. Here is a counterexample.<br>\nTake <code>N = 8</code> and <code>x = 2</code>; the set to partition is <code>S = {1, 3, 4, 5, 6, 7, 8}</code>, and the sum of each partition is 17.<br>\nA solution is <code>A = {1, 3, 5, 8}, B = {4, 6, 7}</code>.<br>\nAnd here is how your algorithm will try to work it out:</p>\n\n<pre><code>A = {}, B = {}, sum = 17\nA = {8}, B = {} sum = 9\nA = {8, 7}, B = {} sum = 2\nA = {8, 7}, B = {6} sum = 2\n...\nA = {8, 7}, B = {6, 5, 4, 3} sum = 2\nA = {8, 7, 1}, B = {6, 5, 4, 3} sum = 1\n</code></pre>\n\n<p>As you can see, because S does not contain 2, your algorithm does not come up with a solution where <code>sum = 0</code>. <strike>Simply add the condition <code>(sum-i) != x</code> for the algorithm to work.</strike> Apparently, that does not work either.</p>\n\n<p>Here is a more complicated solution. First let's make a few observations.</p>\n\n<p>Depending on <code>N % 4</code>, <code>x</code> must be either odd or even for a solution to exist. Indeed, if <code>N % 4 = 0</code> or <code>N % 4 = 3</code>, then <code>N*(N+1)/2</code> is even, odd otherwise. Moreover, <code>x</code> must have the same parity, because <code>N*(N+1)/2 - x</code> must be even.</p>\n\n<p>Also, any set of 4 consecutive integers can be partitioned in two sets with equal sum: the first and last integer in one set and the two middle ones in the other.</p>\n\n<p>Let's take <code>N = 4</code>. If <code>x = 2</code>, the solution is <code>A = {1, 3}, B = {4}</code>. If <code>x = 4</code>, the solution is <code>A = {1, 2}, B = {3}</code>. </p>\n\n<p>Taking the previous example with <code>N = 8</code> and <code>x = 2</code>, we can remove <code>{5, 6, 7, 8}</code>, reducing the problem to the previous one with <code>N = 4</code> and <code>x = 2</code>. That gives <code>A = {5, 8, 1, 3}, B = {6, 7, 4}</code>.</p>\n\n<p>We can define two base cases for <code>N % 4 = 0</code> such that any other case can be reduced to a base case by removing sequences of 4 consecutive integers, from <code>x-1</code> descending, and from <code>N</code> descending. The base cases are <code>S = {1, x+1, x+2}</code> and <code>S = {1, 2, 3}</code>.</p>\n\n<p>Using the same process, we can define base cases for <code>N % 4 = 1</code>: base cases are <code>S = {}</code> and <code>S = {1, 2, x+1, x+2}</code>.</p>\n\n<p>For <code>N % 4 = 2</code>, the process is slightly different: the sequences to remove are from <code>2</code> ascending, and from <code>N</code> descending. The base cases are <code>S = {2, 3, 4, 5, 6}</code>, <code>S = {1, x-1, x+1, x+2, x+3}</code> and <code>S = {1, x-3, x-2, x-1, x+1}</code>. For example, with <code>N = 14</code> and <code>x = 7</code>, removing <code>{2, 3, 4, 5}</code> and <code>{11, 12, 13, 14}</code> leaves <code>S = {1, 6, 8, 9, 10}</code> which corresponds to the second base case.</p>\n\n<p>For <code>N % 4 = 3</code>, the process is yet slightly different: the sequences to remove are from <code>1</code> ascending, and from <code>N</code> descending. The base cases are <code>S = {x-1, x+1, x+2, x+3, x+4, x+5}</code>, <code>S = {x-3, x-2, x-1, x+1, x+2, x+3}</code> and <code>S = {x-5, x-4, x-3, x-2, x-1, x+1}</code>.</p>\n\n<p>Here is a quick summary.</p>\n\n<p>For <code>N % 4 = 0</code>:<br>\nremove sequences from <code>x-1</code> descending and <code>N</code> descending until one of the following.<br>\n<code>S = {1, x+1, x+2}</code>; <code>A = {1, x+1}, B = {x+2}</code>.<br>\n<code>S = {1, 2, 3}</code>; <code>A = {1, 2}, B = {3}</code>.</p>\n\n<p>For <code>N % 4 = 1</code>:<br>\nremove sequences from <code>x-1</code> descending and <code>N</code> descending until one of the following.<br>\n<code>S = {}</code>; <code>A = {}, B = {}</code>.<br>\n<code>S = {1, 2, x+1, x+2}</code>; <code>A = {1, x+2}, B = {2, x+1}</code>.</p>\n\n<p>For <code>N % 4 = 2</code>:<br>\nremove sequences from <code>2</code> ascending and <code>N</code> descending until one of the following.<br>\n<code>S = {2, 3, 4, 5, 6}</code>; <code>A = {2, 3, 5}, B = {4, 6}</code>.<br>\n<code>S = {1, x-1, x+1, x+2, x+3}</code>; <code>A = {1, x-1, x+3}, B = {x+1, x+2}</code>.<br>\n<code>S = {1, x-3, x-2, x-1, x+1}</code>; <code>A = {1, x-2, x-1}, B = {x-3, x+1}</code>.</p>\n\n<p>For <code>N % 4 = 3</code>:<br>\nremove sequences from <code>1</code> ascending and <code>N</code> descending until one of the following.<br>\n<code>S = {x-1, x+1, x+2, x+3, x+4, x+5}</code>; <code>A = {x-1, x+3, x+5}, B = {x+1, x+2, x+4}</code>.<br>\n<code>S = {x-3, x-2, x-1, x+1, x+2, x+3}</code>; <code>A = {x-3, x+1, x+2}, B = {x-2, x-1, x+3}</code>.<br>\n<code>S = {x-5, x-4, x-3, x-2, x-1, x+1}</code>; <code>A = {x-5, x-3, x+1}, B = {x-4, x-2, x-1}</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 7353867, "user_type": "registered", "profile_image": "https://graph.facebook.com/574928376050533/picture?type=large", "display_name": "Rilee", "link": "https://stackoverflow.com/users/7353867/rilee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 879, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515875983, "creation_date": 1515603674, "last_edit_date": 1515603810, "question_id": 48192522, "link": "https://stackoverflow.com/questions/48192522/partition-number-from-1-to-n", "title": "Partition number from 1 to n", "body": "<p>The challenge is </p>\n\n<blockquote>\n  <p>You are given two integers x and N. Consider all integers between 1\n  and N inclusive, except x. We want to partition these integers into\n  two disjoint sets (each integer has to appear in exactly one set) such\n  that the sums of numbers in these sets are equal.Find one valid\n  partition or determine that it doesn't exist.</p>\n</blockquote>\n\n<p>This was asked in a coding competition in codechef and I wrote a solution for it in <strong>C++</strong> but that's saying wrong answer. </p>\n\n<p><strong>Here's my code</strong></p>\n\n<pre><code>`#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nmain(){\n    int t;\n    cin&gt;&gt;t;\n    while(t--){\n        int n,x;\n        cin&gt;&gt;x&gt;&gt;n;\n        long long int sum = (n*(n+1))/2;\n        sum = sum - x;\n        if( ( (sum%2)==1 ) || n==2){\n            cout&lt;&lt;\"impossible\";\n        }\n        else{\n            sum /= 2;\n            stack&lt;char&gt; s;\n            for(int i=n;i&gt;=1;i--){\n                if(i!=x){\n                    if( (sum-i) &gt;= 0){\n                        s.push('0');\n                        sum = sum - i;\n                    }else\n                        s.push('1');\n                }else\n                    s.push('2');\n            }\n            if(s.top()=='0'){\n                while(!s.empty()){\n                    cout&lt;&lt;s.top();\n                    s.pop();\n                }\n            }else if(s.top()=='1'){\n                while(!s.empty()){\n                    if(s.top()=='1')\n                        s.top() = '0';\n                    else if(s.top()=='0')\n                        s.top() = '1';\n                    cout&lt;&lt;s.top();\n                    s.pop();\n                }\n            }else{\n                cout&lt;&lt;s.top();\n                s.pop();\n                if(s.top()=='0'){\n                    while(!s.empty()){\n                        cout&lt;&lt;s.top();\n                        s.pop();\n                    }\n                }else{\n                    while(!s.empty()){\n                        if(s.top()=='1')\n                            s.top() = '0';\n                        else if(s.top()=='0')\n                            s.top() = '1';\n                        cout&lt;&lt;s.top();\n                        s.pop();\n                    }\n                }\n            }\n        }\n        cout&lt;&lt;endl;\n    }\n    return 0;\n}`\n</code></pre>\n\n<p>What I did here is that I first found the sum of all numbers from 1 to N then removed x from it, after this if the sum is odd then you can't divide the numbers in 2 disjoint sets so print \"impossible\", if its not odd then you half it in two(each set will sum up to this) and start a loop from N to 1 and start subtracting i from the sum as long as sum-i is >= 0. </p>\n\n<p>For each subtraction you put it in a stack as '0' and '1' so as to distinguish between the two groups. And when i becomes equal to x you insert a '2'. </p>\n\n<p>At the end you print the stack. Printing the stack here may look complex because at first when I tried to print it normally the result showed wrong answer so I assumed it has taken the group where i=1 is there as group '0' and other one as group '1'. </p>\n\n<p>The answer is still not coming. Please anyone tell if I'm wrong anywhere, I'm not asking for a direct code or answer just wanted to know what am I doing wrong. Any help would be appreciated. Thanks!</p>\n"}, {"tags": ["c++", "sockets", "network-programming"], "comments": [{"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515603821, "post_id": 48192465, "comment_id": 83365536, "body": "You haven&#39;t done anything like select text on the terminal have you?"}, {"owner": {"reputation": 21, "user_id": 3282268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a38f0d592fe4093e2675427f4ac11d?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Engel", "link": "https://stackoverflow.com/users/3282268/kevin-engel"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515604619, "post_id": 48192465, "comment_id": 83365960, "body": "Nope.  Ctrl+C usually kills the program as it should.  Only when accept is hanging does it have this weird behavior ..."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1515605409, "post_id": 48192465, "comment_id": 83366423, "body": "Sounds like your server is not blocked in <code>accept</code>, but rather in a <code>system</code> call somewhere.  The ^C kills the program run with <code>system</code> and not the server, which then continues to the accept call.  Perhaps something in dealing with a previous client connection?  In any case, you&#39;re unlikely to get any help without an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> that demonstrates the problem."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 3282268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a38f0d592fe4093e2675427f4ac11d?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Engel", "link": "https://stackoverflow.com/users/3282268/kevin-engel"}, "is_accepted": true, "score": 0, "last_activity_date": 1515653363, "creation_date": 1515653363, "answer_id": 48201281, "question_id": 48192465, "link": "https://stackoverflow.com/questions/48192465/accept-blocks-with-pending-connections-ctrlc-unblocks/48201281#48201281", "title": "accept() blocks (with pending connections); Ctrl+C unblocks?", "body": "<p>It looks like UKMonkey was correct, the issue was with the windows terminal.</p>\n\n<p>It seems that clicking inside the terminal triggers a text selection mode which halts running programs once they try to output to the terminal.  When I hit Ctrl+C, this ended the text selection mode, allowing my program to resume ...</p>\n\n<p>This horrible, horrible feature can be disabled unchecking the QuickEdit Mode option in the terminal's Properties.</p>\n"}], "owner": {"reputation": 21, "user_id": 3282268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a38f0d592fe4093e2675427f4ac11d?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Engel", "link": "https://stackoverflow.com/users/3282268/kevin-engel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 48201281, "answer_count": 1, "score": 1, "last_activity_date": 1515653363, "creation_date": 1515603499, "question_id": 48192465, "link": "https://stackoverflow.com/questions/48192465/accept-blocks-with-pending-connections-ctrlc-unblocks", "title": "accept() blocks (with pending connections); Ctrl+C unblocks?", "body": "<p>I've written a simple C++ server for my Windows desktop which talks to a mobile app I'm developing.  When the two communicate, the client connects, sends some data, receives data back from the server, then the connection is closed.  </p>\n\n<p>However, occasionally, the client will connect, send data, then time out waiting for the server to respond.  In these instances, the server appears to be stuck in the accept() function - despite the client seeing a connection being made (I've also confirmed the successful TCP handshake using Wireshark), accept() continues to block.  Once this has happened, subsequent attempts to connect will meet the same fate - a successful connection, but unresponsive server.</p>\n\n<p>OK, now for the strangest part - when the server is blocked like this and I enter Ctrl+C in the terminal, my server program is not killed, instead it wakes up and processes all the connections which had been made.  What's going on???</p>\n\n<p>Server code (minus some untriggered error checking):</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;winsock2.h&gt;\n\nint main() {\n  WSADATA wsaData;\n  WSAStartup(MAKEWORD(2,2), &amp;wsaData))\n  struct sockaddr_in sockaddr;\n  sockaddr.sin_family = AF_INET;\n  sockaddr.sin_addr.s_addr = INADDR_ANY;\n  sockaddr.sin_port = htons(51119);\n  SOCKET ListenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);\n  bind(ListenSocket, (SOCKADDR *) &amp;sockaddr, sizeof (sockaddr)) == SOCKET_ERROR)\n  listen(ListenSocket, 100)\n  for(;;) {\n    printf(\"Listening ... \");\n    SOCKET ClientSocket = accept(ListenSocket, NULL, NULL);\n    printf(\"connected!\\n\");\n    // Receive data from client, send back response ...\n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "clang", "compiler-warnings"], "answers": [{"tags": [], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": true, "score": 2, "last_activity_date": 1515603433, "creation_date": 1515603433, "answer_id": 48192447, "question_id": 48192418, "link": "https://stackoverflow.com/questions/48192418/good-way-to-fix-warning-field-a-is-not-used-if-field-is-unused-in-configuratio/48192447#48192447", "title": "Good way to fix warning &quot;field a is not used&quot; if field is unused in configuration", "body": "<pre><code>#define  LOG(a) ((void)a)\n</code></pre>\n\n<p>in the <code>#else</code> case should do the trick.</p>\n\n<p>Small caveat: This will always evaluate the argument expression, even when logging is disabled. If the expression is just a variable, that will not matter, but for function calls etc, it might.</p>\n"}, {"tags": [], "owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "is_accepted": false, "score": 4, "last_activity_date": 1515603591, "creation_date": 1515603591, "answer_id": 48192493, "question_id": 48192418, "link": "https://stackoverflow.com/questions/48192418/good-way-to-fix-warning-field-a-is-not-used-if-field-is-unused-in-configuratio/48192493#48192493", "title": "Good way to fix warning &quot;field a is not used&quot; if field is unused in configuration", "body": "<p>In addition to Baum mit Augen's answer, in the case of Clang (or any C++17 or later compiler) you can use the <code>[[maybe_unused]]</code> attribute to silence warnings for specific possibly-unused variables.</p>\n\n<pre><code>class A\n{\npublic:\n    A(int a) : a_(a)\n    {\n        LOG(a_);\n    }\n\nprivate:\n    [[maybe_unused]] int a_;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2024, "user_id": 1268696, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/9vs4D.jpg?s=128&g=1", "display_name": "FrankS101", "link": "https://stackoverflow.com/users/1268696/franks101"}, "is_accepted": false, "score": 1, "last_activity_date": 1515604093, "creation_date": 1515604093, "answer_id": 48192638, "question_id": 48192418, "link": "https://stackoverflow.com/questions/48192418/good-way-to-fix-warning-field-a-is-not-used-if-field-is-unused-in-configuratio/48192638#48192638", "title": "Good way to fix warning &quot;field a is not used&quot; if field is unused in configuration", "body": "<p>An extra solution to the already provided ones would be to #ifdef also the relevant parts.</p>\n\n<p>Definitely not a good solution, which does not scale at all, but can do the trick in certain and limited cases:</p>\n\n<pre><code>class A\n{\npublic:\n\n#ifdef TURNON_LOG\n    A(int a) : a_(a)\n    {\n        LOG(a_);\n    }\n\nprivate:\n    int a_;\n#else\n    A(int) {}\n#endif\n};\n\nint main(int argc, const char * argv[])\n{\n    A a(10);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 644, "user_id": 687389, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0ff2b8408e90b460ebd4f8a97f3ed3e0?s=128&d=identicon&r=PG", "display_name": "Unick", "link": "https://stackoverflow.com/users/687389/unick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1716, "favorite_count": 0, "accepted_answer_id": 48192447, "answer_count": 3, "score": 4, "last_activity_date": 1515604093, "creation_date": 1515603310, "question_id": 48192418, "link": "https://stackoverflow.com/questions/48192418/good-way-to-fix-warning-field-a-is-not-used-if-field-is-unused-in-configuratio", "title": "Good way to fix warning &quot;field a is not used&quot; if field is unused in configuration", "body": "<p>I have a class with field, which i output to log. If log is turned off (For example in Release), i have warning (private field 'a_' is not used), because i use this field only to output to log.</p>\n\n<p>Sample:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n//#define TURNON_LOG\n\n#ifdef TURNON_LOG\n  #define  LOG(a) printf(\"%d\", a)\n#else\n  #define  LOG(a) 0\n#endif\n\nclass A\n{\npublic:\n    A(int a) : a_(a)\n    {\n        LOG(a_);\n    }\n\nprivate:\n    int a_;\n\n};\n\nint main(int argc, const char * argv[])\n{\n    A a(10);\n    return 0;\n}\n</code></pre>\n\n<p>I used clang with -Wall:</p>\n\n<pre><code>clang main.cpp -Wall\n</code></pre>\n\n<p>What is the best way to fix the warning in case, when TURNON_LOG is undefined?</p>\n"}, {"tags": ["c#", "c++", "dictionary", "stl", "stdmap"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1515603361, "post_id": 48192393, "comment_id": 83365249, "body": "I don&#39;t suppose <code>recon</code> is defined as <code>SRecParameters recon();</code>. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is always appreciated."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1515603407, "post_id": 48192393, "comment_id": 83365281, "body": "Related? <a href=\"https://stackoverflow.com/questions/9920933/cpp-cli-convert-stdmap-to-net-dictionary\" title=\"cpp cli convert stdmap to net dictionary\">stackoverflow.com/questions/9920933/&hellip;</a>"}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1515603516, "post_id": 48192393, "comment_id": 83365364, "body": "@chris Sorry, I added some explanation."}, {"owner": {"reputation": 982, "user_id": 5737039, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/6hjdN.jpg?s=128&g=1", "display_name": "John Stritenberger", "link": "https://stackoverflow.com/users/5737039/john-stritenberger"}, "edited": false, "score": 0, "creation_date": 1515622186, "post_id": 48192393, "comment_id": 83374850, "body": "It looks like <code>PrepDumpLoadList</code> is a pointer. Try using <code>-&gt;</code> instead of <code>.</code> to access it&#39;s members, like your doing in the for loop line. Though we need to see some more code to be sure."}, {"owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "edited": false, "score": 0, "creation_date": 1515677460, "post_id": 48192393, "comment_id": 83397352, "body": "I actually tried &quot;-&gt;&quot;, however, it does not show find(), or begin()......Instead, it only shows Count, .... as if it is not a std::map/Dictionary."}], "answers": [{"tags": [], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "is_accepted": true, "score": 0, "last_activity_date": 1516292946, "creation_date": 1516292946, "answer_id": 48326001, "question_id": 48192393, "link": "https://stackoverflow.com/questions/48192393/c-dictionary-to-c-stdmap/48326001#48326001", "title": "C# Dictionary to C++ std::map", "body": "<p>I did a walk around by creating a <code>List</code> in C#, then process (marshal) each item in this <code>List</code>. and put them in a C++ <code>std::map</code>.</p>\n"}], "owner": {"reputation": 2378, "user_id": 1277239, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/42d3dede20a5ce60d6b89149cb0abc08?s=128&d=identicon&r=PG", "display_name": "Nick X Tsui", "link": "https://stackoverflow.com/users/1277239/nick-x-tsui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 0, "accepted_answer_id": 48326001, "answer_count": 1, "score": 1, "last_activity_date": 1516292946, "creation_date": 1515603243, "last_edit_date": 1515603492, "question_id": 48192393, "link": "https://stackoverflow.com/questions/48192393/c-dictionary-to-c-stdmap", "title": "C# Dictionary to C++ std::map", "body": "<p>I have a Dictionary variable in my C# file <strong>Rec.cs</strong> defined as:</p>\n\n<pre><code>Dictionary&lt;string, PrepDumpLoadItem&gt; pPrepDumpLoadList \n</code></pre>\n\n<p>This <code>pPrepDumpLoadList</code> is filled with keys and values like following </p>\n\n<pre><code>foreach (XElement element in root.Elements())\n                {\n                    PrepDumpLoadItem item = new PrepDumpLoadItem();\n                    item.Name = element.Name.ToString();\n\n                    string isDumpMode = GetValueString(element, \"Dump\", \"enabled\");\n                    if (isDumpMode == \"1\")\n                    {\n                        item.PrepDumpLoadMode += PrepDumpLoadModeType.DUMP;\n                        item.HeaderFile = GetValueString(element, \"Dump\", \"header\");\n                        item.DataFile = GetValueString(element, \"Dump\", \"data\");\n                        //pPrepDumpLoadList.Add(item.Name, item);\n                    }\n\n                    string isLoadMode = GetValueString(element, \"Load\", \"enabled\");\n                    if (isLoadMode == \"1\")\n                    {\n                        item.PrepDumpLoadMode += PrepDumpLoadModeType.LOAD;\n                        item.HeaderFile = GetValueString(element, \"Load\", \"header\");\n                        item.DataFile = GetValueString(element, \"Load\", \"data\");\n                        //pPrepDumpLoadList.Add(item.Name, item);\n                    }\n\n                    pPrepDumpLoadList.Add(item.Name, item);\n                }\n</code></pre>\n\n<p>After the code above, the <code>pPrepDumpLoadList</code> has 12 entries, which means its count == 12;</p>\n\n<p>Afterwards it passed to a C++ file <strong>WrapperRec.cpp</strong>, in which each of its entries is supposed to get extracted, and passed/copied to a C++ <code>std::map</code> variable <code>PrepDumpLoadList</code>. This is defined as </p>\n\n<pre><code>std::map&lt;std::string, PrepDumpLoadItem&gt; PrepDumpLoadList;\n</code></pre>\n\n<p>within the structure of <code>SRecParameters</code> in SRecParameters.h</p>\n\n<p>Here is how <code>PrepDumpLoadList</code> looks like under the debug mode (visual studio 2015):</p>\n\n<p><a href=\"https://i.stack.imgur.com/qI7BK.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qI7BK.jpg\" alt=\"enter image description here\"></a>\nwhich looks good. The <code>recon</code> is passed as an argument like </p>\n\n<pre><code>void WrappedRecon::CreateImpl( ScanParameters scan,\n                           ReconParameters recon,\n                           ScannerParameters scanner,\n                           MessageHandler^ msgHandler\n                         )\n</code></pre>\n\n<p>and I believe it is an variable of a structure identical/similar to <code>SRecParameters</code>.</p>\n\n<p>However, I have difficulty extracting the entries from <code>PrepDumpLoadList</code>, the Dictionary variable from the C#.</p>\n\n<p>I have tried </p>\n\n<pre><code>map&lt;std::string, PrepDumpLoadItem&gt;::iterator it = recon.PrepDumpLoadList.begin();\n</code></pre>\n\n<p>but the red wiggle appears underneath the <code>recon</code>, and compiling error says <strong>error C2228: left of '.begin' must have class/struct/union</strong></p>\n\n<p>I am really confused about what is happening here. I am just trying to something like </p>\n\n<pre><code>for (int i = 0; i&lt;recon.PrepDumpLoadList-&gt;Count; ++i) {\n\n    CopyString(item.Name, recon.PrepDumpLoadList[i].Name, sizeof(item.Name));\n\n    item.PrepDumpLoadMode = static_cast&lt;DumpLoadModeType&gt;(recon.PrepDumpLoadList[i].PrepDumpLoadMode);\n\n    CopyString(item.HeaderFile, recon.PrepDumpLoadList[i].HeaderFile, sizeof(item.HeaderFile));\n    CopyString(item.DataFile, recon.PrepDumpLoadList[i].DataFile, sizeof(item.DataFile));\n\n    reconParams.PrepDumpLoadList.push_back(item);\n}\n</code></pre>\n\n<p>extracting information from the Dictionary variable and push it back to a std::map variable. Anyone can give some pointer where the problem is and how to solve it? Thanks a lot.</p>\n"}, {"tags": ["c++", "linux", "multithreading", "boost", "memory-leaks"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1515629777, "post_id": 48192824, "comment_id": 83377351, "body": "Can you distill this into something self-contained? I&#39;m not well versed in reading <code>pmap</code> so maybe you can elaborate a little bit on why you assume these are leaks"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1515643946, "post_id": 48192824, "comment_id": 83380382, "body": "@sehe I assume they&#39;re leaks because of <a href=\"https://stackoverflow.com/a/1483482/4056146\">this answer</a>.  Tomorrow, I plan on trying <code>boost::shared_ptr &lt;boost::thread&gt; thr</code> instead of a thread vector and see if that helps .  I will report back."}], "answers": [{"tags": [], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "is_accepted": true, "score": 1, "last_activity_date": 1515730020, "creation_date": 1515730020, "answer_id": 48219388, "question_id": 48192824, "link": "https://stackoverflow.com/questions/48192824/thread-management-memory-leak/48219388#48219388", "title": "Thread Management Memory Leak", "body": "<p>I now use <code>boost::shared_ptr &lt;boost::thread&gt; thr_ev_21;</code> and </p>\n\n<pre><code>if (thr_ev_21.get()) thr_ev_21-&gt;interrupt();\nthr_ev_21.reset(new boost::thread (boost::bind(&amp;porter::write_units_court_a, this)));\n</code></pre>\n\n<p>Now my memory usage plateaus instead of constantly growing.  The thread object must not be destroyed with this line on the second pass:</p>\n\n<pre><code>tvec.at(21) = boost::thread (boost::bind(&amp;my_class::write_units_court_a, this));\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1515604803, "question_id": 363768}, "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 48219388, "answer_count": 1, "score": 1, "last_activity_date": 1515730020, "creation_date": 1515602841, "last_edit_date": 1515613969, "question_id": 48192824, "link": "https://stackoverflow.com/questions/48192824/thread-management-memory-leak", "title": "Thread Management Memory Leak", "body": "<p>I use the <a href=\"https://en.wikipedia.org/wiki/Reactor_pattern\" rel=\"nofollow noreferrer\">reactor pattern</a> in my C++ application.  I use a thread vector <code>std::vector &lt;boost::thread&gt; tvec {1000};</code> and an event queue <code>boost::lockfree::queue &lt;int&gt; events {1000};</code> to handle events.</p>\n\n<p>My event dispatcher looks like this:</p>\n\n<pre><code>void my_class::event_dispatcher (void)\n{\n    INFO &lt;&lt; \"started\";\n\n    int event_element = 0;\n\n    try\n    {\n        while (true)\n        {\n            // 1. wait for an event\n            for (;;)\n            {\n                if (events.pop (event_element)) break;  // returns true if the queue is not empty\n                boost::this_thread::sleep (boost::posix_time::milliseconds (250));      \n            }\n\n            // 2. handle event\n            switch (event_element)\n            {\n                // 1-20 ...\n                case 21:\n                {\n                    tvec.at(21).interrupt();\n                    tvec.at(21) = boost::thread (boost::bind(&amp;my_class::write_units_court_a, this));\n                    break;\n                }\n                // 21-999...\n                default:\n                {\n                    WARNING &lt;&lt; \"INVALID EVENT = \" &lt;&lt; event_element;\n                    break;\n                }\n            }   \n        }\n    }\n    catch (const std::exception &amp;e)\n    {\n        ERROR &lt;&lt; \"e.what() = \" &lt;&lt; e.what();\n        return;\n    }\n\n    INFO &lt;&lt; \"ended\";\n\n    return;\n}\n</code></pre>\n\n<p>My problem is that when I run <code>pmap -x PROGRAM_PID</code> it shows dozens of these lines:</p>\n\n<pre><code>00007f4063fd9000    8192      12      12 rw---   [ anon ]\n00007f4063fd9000       0       0       0 rw---   [ anon ]\n00007f40647d9000       4       0       0 -----   [ anon ]\n00007f40647d9000       0       0       0 -----   [ anon ]\n00007f40647da000    8192      16      16 rw---   [ anon ]\n00007f40647da000       0       0       0 rw---   [ anon ]\n00007f4064fda000       4       0       0 -----   [ anon ]\n00007f4064fda000       0       0       0 -----   [ anon ]\n00007f4064fdb000    8192      12      12 rw---   [ anon ]\n00007f4064fdb000       0       0       0 rw---   [ anon ]\n00007f40657db000       4       0       0 -----   [ anon ]\n00007f40657db000       0       0       0 -----   [ anon ]\n</code></pre>\n\n<p>which I assume to be a memory leak from my event dispatcher creating and interrupting multiple threads as the program runs.  I use boost logging in these threads and catch the interrupts in the threads properly; example: </p>\n\n<pre><code>void my_class::write_units_court_a (void)\n{\n    INFO &lt;&lt; \"started\";\n\n    try\n    {\n        // working code here ...\n    }\n    catch (const std::exception &amp;e)\n    {\n        ERROR &lt;&lt; \"e.what() = \" &lt;&lt; e.what();     \n        return;\n    }\n    catch (boost::thread_interrupted)\n    {\n        INFO &lt;&lt; \"interrupted\";\n        return;\n    }\n\n    INFO &lt;&lt; \"ended\";\n\n    return;\n}\n</code></pre>\n\n<p>What is causing this seemingly thread memory leak?  Valgrind shows memory lost and I can see the program use more memory as it starts and ends threads.</p>\n"}, {"tags": ["html", "c++"], "comments": [{"owner": {"reputation": 246, "user_id": 9150989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lp0kk.jpg?s=128&g=1", "display_name": "Josh H", "link": "https://stackoverflow.com/users/9150989/josh-h"}, "edited": false, "score": 2, "creation_date": 1515602842, "post_id": 48192149, "comment_id": 83364941, "body": "Is using emscripten an option? <a href=\"https://github.com/kripken/emscripten\" rel=\"nofollow noreferrer\">github.com/kripken/emscripten</a>"}, {"owner": {"reputation": 2191, "user_id": 7070965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qEhQf.png?s=128&g=1", "display_name": "dtell", "link": "https://stackoverflow.com/users/7070965/dtell"}, "edited": false, "score": 0, "creation_date": 1515603590, "post_id": 48192149, "comment_id": 83365405, "body": "The only sane possibilities are to use something like emsscript (compile C++ to native JS) or use C++ server side."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 0, "creation_date": 1515603806, "post_id": 48192149, "comment_id": 83365524, "body": "It would be better to run your cpp application as a CGI (server side) program with an API for the JavaScript to talk to"}], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 1835601, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/j6OWh.jpg?s=128&g=1", "display_name": "Simo Erkinheimo", "link": "https://stackoverflow.com/users/1835601/simo-erkinheimo"}, "is_accepted": false, "score": 1, "last_activity_date": 1515604180, "last_edit_date": 1515604180, "creation_date": 1515602519, "answer_id": 48192186, "question_id": 48192149, "link": "https://stackoverflow.com/questions/48192149/how-to-run-cpp-application-on-htm-file/48192186#48192186", "title": "How to run .cpp application on .htm file?", "body": "<p>The only way to do this is ActiveX, which by default is not supported by anything anymore. Only Internet Explorer supports it, but even that needs to be specifically allowed.</p>\n\n<p>But you'd still have to first compile the cpp-code and do quite a huge amount of programming work before you'd have an valid ActiveX -dll. Then you'd also somehow need to deploy it for all website clients.</p>\n\n<p>TL;DR: No, no no no. Running C/C++ for web clients is no-go.</p>\n\n<p>However, if you are looking for something like that website client should be able to invoke a C++ application at the server, this is very possible. You still need to have that application compiled for the server environment though. For small \"run and get the results\" -tasks I've found it easiest to use ajax to call php -scripts, as php can execute stuff on server.</p>\n"}, {"tags": [], "owner": {"reputation": 4313, "user_id": 2224047, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UZ83S.jpg?s=128&g=1", "display_name": "Nikolai  Shevchenko", "link": "https://stackoverflow.com/users/2224047/nikolai-shevchenko"}, "is_accepted": false, "score": -1, "last_activity_date": 1515603335, "creation_date": 1515603335, "answer_id": 48192422, "question_id": 48192149, "link": "https://stackoverflow.com/questions/48192149/how-to-run-cpp-application-on-htm-file/48192422#48192422", "title": "How to run .cpp application on .htm file?", "body": "<p>Signed Java Applets can run executables from browser, but it's not welcomed nowadays.</p>\n"}], "owner": {"reputation": 11, "user_id": 9173777, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/520762f329f46ca488eec000672bb5e6?s=128&d=identicon&r=PG&f=1", "display_name": "Shourya Pratap Singh", "link": "https://stackoverflow.com/users/9173777/shourya-pratap-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "closed_date": 1516730011, "answer_count": 2, "score": -4, "last_activity_date": 1515604180, "creation_date": 1515602376, "question_id": 48192149, "link": "https://stackoverflow.com/questions/48192149/how-to-run-cpp-application-on-htm-file", "closed_reason": "Needs details or clarity", "title": "How to run .cpp application on .htm file?", "body": "<p>I've made a webpage on HTML and I want to run a .cpp application on it. With the way I've learnt to do it, the code is displayed. </p>\n"}, {"tags": ["c++", "qt", "qcoreapplication"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1576605324, "post_id": 48192091, "comment_id": 104951310, "body": "I am observing similar behavior with keys and <code>sendEvent</code>. For example, <code>Key_Backspace</code> works, but <code>Key_A</code> does not. Also see <a href=\"https://stackoverflow.com/q/8729508/608639\">How to use QCoreApplication::postEvent to inject synthetic input events</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1515605132, "post_id": 48192539, "comment_id": 83366259, "body": "Thanks @king_nak, I was confused cause in some SO threads people reported that it works for them! my perception of &quot;It works&quot; was that text is generated .. but now I have the full picture ..postEvent  works for both cases."}], "tags": [], "owner": {"reputation": 10619, "user_id": 345027, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/de94a2d703fa12904d400de1fc86c251?s=128&d=identicon&r=PG", "display_name": "king_nak", "link": "https://stackoverflow.com/users/345027/king-nak"}, "is_accepted": true, "score": 1, "last_activity_date": 1515603737, "creation_date": 1515603737, "answer_id": 48192539, "question_id": 48192091, "link": "https://stackoverflow.com/questions/48192091/qt-qcoreapplication-postevent-behaviour/48192539#48192539", "title": "QT QcoreApplication postEvent() behaviour", "body": "<p>Not all key-events have a text representation (delete, curser movement, shortcuts, ...). For those who have one, the <code>QKeyEvent</code> class stores it in its text. You have to provide that text, otherwise its a \"textless\" event.</p>\n\n<p><code>QLineEdit</code> will just add the text, and not deduce it from the event type (as can be seen <a href=\"http://code.qt.io/cgit/qt/qtbase.git/tree/src/widgets/widgets/qwidgetlinecontrol.cpp?h=dev#n1936\" rel=\"nofollow noreferrer\">here</a>)</p>\n"}], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 48192539, "answer_count": 1, "score": 0, "last_activity_date": 1515604513, "creation_date": 1515602188, "last_edit_date": 1515604513, "question_id": 48192091, "link": "https://stackoverflow.com/questions/48192091/qt-qcoreapplication-postevent-behaviour", "title": "QT QcoreApplication postEvent() behaviour", "body": "<p>I have written this simple QT mainwindow, only if I pass QString argument to the QKeyEvent, it prints the key, I expect the key to be printed even without QString argument?</p>\n\n<p>section 1 in below code does not seem to work (I don't get the key printed in the QLineEdit field; while section 2 works and \"1\" is printed! is this normal behavior? what happens to the event when its posted in first section of the code?</p>\n\n<pre><code>MainWindow::MainWindow(QWidget *parent) :\nQMainWindow(parent),\nui(new Ui::MainWindow)\n\n{\n    ui-&gt;setupUi(this);\n    this-&gt;ui-&gt;lineEdit-&gt;setFocus();\n\n    Qt::Key key = Qt::Key_1;\n    // 1\n    QKeyEvent *event = new QKeyEvent (QEvent::KeyPress, key ,Qt::NoModifier); \n    QCoreApplication::postEvent(QWidget::focusWidget(), event); // Does not work! No key is set in the widget\n    //\n    //2 \n    QKeyEvent *event2 = new QKeyEvent(QEvent::KeyPress, key, Qt::NoModifier, QKeySequence(key).toString());\n    QCoreApplication::postEvent(QWidget::focusWidget(), event2); // this one works! \n\n}\n</code></pre>\n"}, {"tags": ["c++", "static-cast", "class-template", "static-polymorphism"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1515602570, "post_id": 48192075, "comment_id": 83364777, "body": "You can <code>static_cast</code> to derived classes. You can\u2019t check at compile time what the runtime type will be."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515602596, "post_id": 48192075, "comment_id": 83364793, "body": "@MooingDuck, It&#39;s good, but it doesn&#39;t catch passing the wrong derived type like in the question. But to catch that, I think CRTP would have to be supported in the language anyway (e.g., mixins)."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515602691, "post_id": 48192075, "comment_id": 83364842, "body": "Oh, whoops. You&#39;re right. For some reason I was thinking one of those would be the C, but they&#39;re both A. Maybe if a variant went in the <i>derived</i> class? <code>static_assert(std::is_base_of&lt;CRTP&lt;decltype(this)&gt;,decltype(&zwnj;&#8203;this)&gt;::value)</code>?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515603111, "post_id": 48192075, "comment_id": 83365098, "body": "@MooingDuck, Yeah, I think that&#39;s the best you&#39;re going to get today. With metaclasses, I believe you could at least have some sort of <code>crtp&lt;CRTP&gt; C { ... };</code> and not need to inherit manually at all. That said, I think metaclasses lends itself more to either combining the desired mixins into a new metaclass or some general <code>with_mixins&lt;...&gt; Foo { ... };</code>"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1515609665, "post_id": 48192075, "comment_id": 83368779, "body": "Both <code>A</code> and <code>C</code> are derived from <code>CRTP&lt;A&gt;</code>, so a <code>static_cast</code> is allowed from <code>CRTP&lt;A&gt;</code> to either of them. A cast to an unrelated (or ambiguous) type, e.g. <code>B</code> would require a diagnostic, though."}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515602602, "post_id": 48192163, "comment_id": 83364799, "body": "&quot;How can I have a compile time check that could help from this type of errors?&quot; is really the key part of the question"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515602794, "post_id": 48192163, "comment_id": 83364914, "body": "@MooingDuck, I copied the solution from your comment. Hope you don&#39;t mind."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1515602899, "post_id": 48192163, "comment_id": 83364969, "body": "I wouldn&#39;t mind, but <a href=\"https://stackoverflow.com/users/962089/chris\">chris</a> observed that <a href=\"https://stackoverflow.com/questions/48192075/has-crtp-no-compile-time-check/48192163?noredirect=1#comment83364793_48192075\">it&#39;s wrong</a>"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1515603051, "post_id": 48192163, "comment_id": 83365065, "body": "Where should I write the <code>static_assert</code>? I added it as first line of the <code>do_it()</code> method but it still compiles despite of the typo."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1515603211, "post_id": 48192163, "comment_id": 83365151, "body": "@nyarlathotep108: Try <code>static_assert(std::is_base_of&lt;CRTP&lt;decltype(this)&gt;,decltype(&zwnj;&#8203;\u200c\u200bthis)&gt;::value)</code> in the derived classes"}, {"owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1515603490, "post_id": 48192163, "comment_id": 83365342, "body": "@MooingDuck that line does always fail for every of the three class subtypes."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "edited": false, "score": 0, "creation_date": 1515605128, "post_id": 48192163, "comment_id": 83366255, "body": "@nyarlathotep108, It&#39;ll need <code>remove_reference_t&lt;decltype(*this)&gt;</code>."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1515615611, "last_edit_date": 1515615611, "creation_date": 1515602434, "answer_id": 48192163, "question_id": 48192075, "link": "https://stackoverflow.com/questions/48192075/has-crtp-no-compile-time-check/48192163#48192163", "title": "Has CRTP no compile time check?", "body": "<blockquote>\n  <p><strong>Q1</strong> Why does the cast work with no errors?</p>\n</blockquote>\n\n<p>When none of the sensible things apply ...</p>\n\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/n3337/expr.static.cast#2\" rel=\"nofollow noreferrer\">https://timsong-cpp.github.io/cppwp/n3337/expr.static.cast#2</a>:</p>\n\n<blockquote>\n  <p>Otherwise, the result of the cast is undefined. </p>\n</blockquote>\n\n<hr>\n\n<blockquote>\n  <p><strong>Q2</strong> How can I have a compile time check that could help from this type of errors?</p>\n</blockquote>\n\n<p>I was not able to find a method that can be used in <code>CRTP</code>. The best I could think of is to add <code>static_assert</code> in the derived classes.</p>\n\n<p>For example, if you change <code>C</code> to:</p>\n\n<pre><code>struct C : CRTP&lt; A &gt; // it should be CRTP&lt; C &gt;, but typo mistake\n{\n   static_assert(std::is_base_of&lt;CRTP&lt;C&gt;, C&gt;::value, \"\");\n   void execute( )\n   {\n      cout &lt;&lt; \"C\" &lt;&lt; endl;\n   }\n};\n</code></pre>\n\n<p>You will see the error at compile time.</p>\n\n<p>You can simplify that to </p>\n\n<pre><code>struct C : CRTP&lt; A &gt; // it should be CRTP&lt; C &gt;, but typo mistake\n{\n   using ThisType = C;\n   static_assert(std::is_base_of&lt;CRTP&lt;ThisType&gt;, ThisType&gt;::value, \"\");\n   void execute( )\n   {\n      cout &lt;&lt; \"C\" &lt;&lt; endl;\n   }\n};\n</code></pre>\n\n<p>Similar code needs to be added in each derived type. It's not elegant but it will work.</p>\n\n<p><strong>PS</strong> I wouldn't recommend using the suggested solution. I think it's too much overhead to account for the occasional human error.</p>\n"}, {"comments": [{"owner": {"reputation": 1344, "user_id": 1019990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ae752103140fb371af11b1719a36eaa?s=128&d=identicon&r=PG", "display_name": "Joshua Green", "link": "https://stackoverflow.com/users/1019990/joshua-green"}, "edited": false, "score": 0, "creation_date": 1515636350, "post_id": 48192910, "comment_id": 83378863, "body": "Doesn&#39;t this allow one to do something silly like <code>void MyBadClass::memberFunction() {CRTP&lt;MyBadClass&gt; x; x.do_it();}</code>?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 1344, "user_id": 1019990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ae752103140fb371af11b1719a36eaa?s=128&d=identicon&r=PG", "display_name": "Joshua Green", "link": "https://stackoverflow.com/users/1019990/joshua-green"}, "edited": false, "score": 0, "creation_date": 1515686394, "post_id": 48192910, "comment_id": 83403456, "body": "@JoshuaGreen Well, the constructor was public in the original solution, so if you wanted to construct the CRTP class standalone, nothing was stopping you at all. So, I wouldn&#39;t say it &quot;allows&quot; you to do something silly relative to the original situation."}, {"owner": {"reputation": 1344, "user_id": 1019990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ae752103140fb371af11b1719a36eaa?s=128&d=identicon&r=PG", "display_name": "Joshua Green", "link": "https://stackoverflow.com/users/1019990/joshua-green"}, "edited": false, "score": 0, "creation_date": 1515722839, "post_id": 48192910, "comment_id": 83419093, "body": "That&#39;s fair.  I thought I had a solution to this, but I&#39;m struggling to remember it at the moment."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 1344, "user_id": 1019990, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4ae752103140fb371af11b1719a36eaa?s=128&d=identicon&r=PG", "display_name": "Joshua Green", "link": "https://stackoverflow.com/users/1019990/joshua-green"}, "edited": false, "score": 0, "creation_date": 1515733775, "post_id": 48192910, "comment_id": 83421419, "body": "@Joshua Green you could give it an abstract method. Then it cannot be instantiated alone, only as a base. But then you are adding a vtable, and boilerplate perhaps. Protect against Murphy, not Machiavelli."}, {"owner": {"reputation": 295, "user_id": 2316040, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d78c53244b7e8b67bc5b959504eab198?s=128&d=identicon&r=PG", "display_name": "Fan", "link": "https://stackoverflow.com/users/2316040/fan"}, "edited": false, "score": 0, "creation_date": 1533592998, "post_id": 48192910, "comment_id": 90393714, "body": "It does not compile (even in your link)."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 295, "user_id": 2316040, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d78c53244b7e8b67bc5b959504eab198?s=128&d=identicon&r=PG", "display_name": "Fan", "link": "https://stackoverflow.com/users/2316040/fan"}, "edited": false, "score": 0, "creation_date": 1533607774, "post_id": 48192910, "comment_id": 90396667, "body": "@Fan it&#39;s supposed to not compile, suggest rereading the question and answer."}, {"owner": {"reputation": 295, "user_id": 2316040, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d78c53244b7e8b67bc5b959504eab198?s=128&d=identicon&r=PG", "display_name": "Fan", "link": "https://stackoverflow.com/users/2316040/fan"}, "edited": false, "score": 0, "creation_date": 1533655188, "post_id": 48192910, "comment_id": 90421239, "body": "I know why it does not compile on my side. I have <code>Abstract&lt;T&gt; : CRTP&lt;T&gt;</code> and then <code>Concrete : Abstract&lt;Concrete&gt;</code>. But because Abstract&lt;T&gt; is not a friend of CRTP&lt;T&gt; it does not compile. Is there a way to solve this?"}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "reply_to_user": {"reputation": 295, "user_id": 2316040, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d78c53244b7e8b67bc5b959504eab198?s=128&d=identicon&r=PG", "display_name": "Fan", "link": "https://stackoverflow.com/users/2316040/fan"}, "edited": false, "score": 1, "creation_date": 1533668644, "post_id": 48192910, "comment_id": 90428215, "body": "@Fan yes, use the pattern correctly: <code>Abstract&lt;T&gt; : CRTP&lt;Abstract&lt;T&gt;&gt;</code>. That said, there is no reason to have an &quot;abstract&quot; class in C++ static polymorphism."}], "tags": [], "owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "is_accepted": true, "score": 9, "last_activity_date": 1515605098, "creation_date": 1515605098, "answer_id": 48192910, "question_id": 48192075, "link": "https://stackoverflow.com/questions/48192075/has-crtp-no-compile-time-check/48192910#48192910", "title": "Has CRTP no compile time check?", "body": "<p>The usual way to solve this in CRTP is to make the base class have a private constructor, and declare the type in the template a friend:</p>\n\n<pre><code>template&lt; typename T &gt;\nstruct CRTP\n{\n    void do_it( )\n    {\n        static_cast&lt; T&amp; &gt;( *this ).execute( );\n    }\n    friend T;\nprivate:\n    CRTP() {};\n};\n</code></pre>\n\n<p>In your example, when you accidentally have <code>C</code> inherit from <code>CRTP&lt;A&gt;</code>, since <code>C</code> is not a friend of <code>CRTP&lt;A&gt;</code>, it can't call its constructor, and since <code>C</code> has to construct all its bases to construct itself, you can never construct a <code>C</code>. The only downside is that this doesn't prevent compilation per se; to get a compiler error you either have to try to actually construct a <code>C</code>, or write a user defined constructor for it. In practice, this is still good enough and this way you don't have to add protective code in every derived as the other solution suggests (which IMHO defeats the whole purpose).</p>\n\n<p>Live example: <a href=\"http://coliru.stacked-crooked.com/a/38f50494a12dbb54\" rel=\"noreferrer\">http://coliru.stacked-crooked.com/a/38f50494a12dbb54</a>.</p>\n\n<p>NB: in my experience, the constructor for CRTP must be \"user declared\", which means you cannot use <code>=default</code>. Otherwise in a case like this, you can get aggregate initialization, which will not respect <code>private</code>. Again, this might be an issue if you are trying to keep the <code>trivially_constructible</code> trait (which is not a terribly important trait), but usually it shouldn't matter.</p>\n"}], "owner": {"reputation": 4621, "user_id": 3074280, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/8pIgB.jpg?s=128&g=1", "display_name": "nyarlathotep108", "link": "https://stackoverflow.com/users/3074280/nyarlathotep108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 3, "accepted_answer_id": 48192910, "answer_count": 2, "score": 9, "last_activity_date": 1515615611, "creation_date": 1515602138, "question_id": 48192075, "link": "https://stackoverflow.com/questions/48192075/has-crtp-no-compile-time-check", "title": "Has CRTP no compile time check?", "body": "<p>I was trying to implement static polymorphism using the <strong>Curiously Recurring Template Pattern</strong>, when I noticed that <code>static_cast&lt;&gt;</code>, which usually checks at compile time if a type is actually convertible to another, missed a typo in the base class declaration, allowing the code to downcast the base class to one of its siblings:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\ntemplate&lt; typename T &gt;\nstruct CRTP\n{\n    void do_it( )\n    {\n        static_cast&lt; T&amp; &gt;( *this ).execute( );\n    }\n};\n\nstruct A : CRTP&lt; A &gt;\n{\n    void execute( )\n    {\n        cout &lt;&lt; \"A\" &lt;&lt; endl;\n    }\n};\n\nstruct B : CRTP&lt; B &gt;\n{\n    void execute( )\n    {\n        cout &lt;&lt; \"B\" &lt;&lt; endl;\n\n    }\n};\n\nstruct C : CRTP&lt; A &gt; // it should be CRTP&lt; C &gt;, but typo mistake\n{\n    void execute( )\n    {\n        cout &lt;&lt; \"C\" &lt;&lt; endl;\n    }\n};\n\nint main( )\n{\n    A a;\n    a.do_it( );\n    B b;\n    b.do_it( );\n    C c;\n    c.do_it( );\n    return 0;\n}\n</code></pre>\n\n<p>Output of the program is:</p>\n\n<pre><code>A\nB\nA\n</code></pre>\n\n<p>Why does the cast work with no errors? How can I have a compile time check that could help from this type of errors?</p>\n"}, {"tags": ["c++", "performance", "memory", "memory-management", "memory-leaks"], "comments": [{"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1515601839, "post_id": 48191960, "comment_id": 83364304, "body": "It depends. Which OS? Which compiler?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1515601846, "post_id": 48191960, "comment_id": 83364308, "body": "There are several solutions there, and the question is way too broad in it&#39;s current form."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1515602742, "post_id": 48191960, "comment_id": 83364880, "body": "Do you want to measure the data used by a function, or the code size?"}, {"owner": {"reputation": 47, "user_id": 3478710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac2c35a18bba101d405441344ccb6d3?s=128&d=identicon&r=PG&f=1", "display_name": "user3478710", "link": "https://stackoverflow.com/users/3478710/user3478710"}, "edited": false, "score": 0, "creation_date": 1515613825, "post_id": 48191960, "comment_id": 83370805, "body": "Nope mainly the data."}, {"owner": {"reputation": 50347, "user_id": 1763356, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zGWG9.png?s=128&g=1", "display_name": "Veedrac", "link": "https://stackoverflow.com/users/1763356/veedrac"}, "edited": false, "score": 1, "creation_date": 1515643358, "post_id": 48191960, "comment_id": 83380276, "body": "Add hooks to the allocator. Don&#39;t know why this question is downvoted; it seems perfectly sensible."}], "owner": {"reputation": 47, "user_id": 3478710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ac2c35a18bba101d405441344ccb6d3?s=128&d=identicon&r=PG&f=1", "display_name": "user3478710", "link": "https://stackoverflow.com/users/3478710/user3478710"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515643487, "creation_date": 1515601741, "last_edit_date": 1515643487, "question_id": 48191960, "link": "https://stackoverflow.com/questions/48191960/how-to-measure-consumed-memory-of-a-function-or-a-loop-in-c", "title": "How to measure consumed memory of a function (or a loop) in c++", "body": "<p>I have been working on an optimization program and need to know the exact memory size consumed by a certain loop (or function).</p>\n\n<p>I need to get the exact quantity of memory consumed and keep track of it in an array inside the program for later use.</p>\n\n<p>I'm using GCC on Linux.</p>\n"}, {"tags": ["c++", "linux", "ubuntu", "gcc"], "comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1515602080, "post_id": 48191747, "comment_id": 83364442, "body": "Reading up on where <code>#include</code>s are searched will show that there&#39;s an order of precedence, so the more relative your specified path is, the more potential there is for ambiguity or even error."}], "answers": [{"comments": [{"owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "edited": false, "score": 0, "creation_date": 1515658880, "post_id": 48191862, "comment_id": 83385907, "body": "<code>&lt;ctime&gt;</code> not contains <code>gettimeofday()</code>, but it contains inclusion of <code>time.h</code>, that points to <code>&#47;usr&#47;include&#47;time.h</code> (that according to your description is <code>C</code> library). So, <code>&lt;ctime&gt;</code> points into <code>C</code> lib instead <code>C++</code> ? And where is logic to name files the same name <code>time.h</code>?"}, {"owner": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1515671176, "post_id": 48191862, "comment_id": 83393529, "body": "Why <i>not</i> name them the same? They are in different places so still have completely different include paths, because one is under &#39;sys&#39; and the other is not. If you just include &#39;time.h&#39; it will never include the one under &#39;sys&#39; unless you have added the &#39;sys&#39; directory to your include paths."}, {"owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "reply_to_user": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "edited": false, "score": 0, "creation_date": 1515685503, "post_id": 48191862, "comment_id": 83402849, "body": "@vico your problem boils down to include paths.  You want to make sure your include path is reasonable within your development environment.  I gave you the &quot;best practices&quot; answer for how to include these time APIs into your compilation units.  From there, you just need to make sure your build environment can resolve the correct include paths."}], "tags": [], "owner": {"reputation": 1971, "user_id": 2096824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fzfxa.jpg?s=128&g=1", "display_name": "Justin Randall", "link": "https://stackoverflow.com/users/2096824/justin-randall"}, "is_accepted": false, "score": 1, "last_activity_date": 1515601430, "creation_date": 1515601430, "answer_id": 48191862, "question_id": 48191747, "link": "https://stackoverflow.com/questions/48191747/same-name-headers-with-different-content-in-ubuntu-system/48191862#48191862", "title": "Same name headers with different content in Ubuntu system", "body": "<p>On Linux, the function <code>int gettimeofday(struct timeval *tv, struct timezone *tz);</code> is defined in <code>#include &lt;sys/time.h&gt;</code>.  When using it in your code you should include it exactly like that.  The other time.h is the standard C library that contains time structures and functions such as <code>time_t</code> and <code>mktime</code>. When you are using this file in a C++ program you should include it as <code>#include &lt;ctime&gt;</code> which should help you avoid this type of error in the future.</p>\n"}], "owner": {"reputation": 13579, "user_id": 1501700, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1394f16d55f1c0f4cc4bc5ce4336cf20?s=128&d=identicon&r=PG", "display_name": "vico", "link": "https://stackoverflow.com/users/1501700/vico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1515660265, "creation_date": 1515601009, "last_edit_date": 1515660265, "question_id": 48191747, "link": "https://stackoverflow.com/questions/48191747/same-name-headers-with-different-content-in-ubuntu-system", "title": "Same name headers with different content in Ubuntu system", "body": "<p>I have two c++ projects in my Eclipse that uses same function <code>gettimeofday()</code>. First project compiles fine while other reports error </p>\n\n<pre><code>error: \u2018gettimeofday\u2019 was not declared in this scope\n</code></pre>\n\n<p>By presing F3 on function name I found that in first project case I was navigated to <code>/usr/include/86_64-linux-gnu/sys/time.h</code>. Second project also has <code>#include &lt;time.h&gt;</code>, but F3 navigates to <code>sys/time.h</code>, which has no \u2018gettimeofday\u2019 function.</p>\n\n<p>Why same <code>#include &lt;time.h&gt;</code> navigates to different folders?\nWhy Linux has two same names includes at all?\nWhy both includes <code>#include &lt;time.h&gt;</code> are different?</p>\n\n<p>UPD</p>\n\n<p>I found that <code>/sys/timeb.h</code> has inclusion <code>#include &lt;time.h&gt;</code> which navigates to <code>/usr/lib/time.h</code>. I was expecting <code>/sys/timeb.h</code> will include <code>/sys/timeb.h. How Eclipse and GCC decides to go</code>/usr/lib/time.h<code>or</code>/sys/time.h` ? </p>\n\n<p>Why \"professional\" <code>/sys/timeb.h</code> leaves ambiguity in code just by making <code>#include &lt;time.h&gt;</code> instead defining more exact path? I suppose <code>&lt;time.h&gt;</code> might point to both - <code>&lt;sys/time.h&gt;</code> and <code>C</code> <code>&lt;time.h&gt;</code></p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1515600939, "post_id": 48191660, "comment_id": 83363664, "body": "1) No. 2) As you&#39;ve already noticed, you don&#39;t need them."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1515600959, "post_id": 48191660, "comment_id": 83363674, "body": "It&#39;s not necessary to provide all those copy and move constructors and operators and destructor in this case, since all of <code>Student</code>&#39;s data members have proper value semantics, meaning the implicit versions will behave correctly."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1515601063, "post_id": 48191660, "comment_id": 83363748, "body": "Pointers usually don&#39;t behave as you would want them to with the implicit constructors, assignment operators, and destructor which is one of the many reasons why you should only use them when you need them."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1515601149, "post_id": 48191660, "comment_id": 83363808, "body": "Too broad. Can you avoid pointers in your simple program? Yes you can. Do you want us to review your code? Than the code goes to <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a> . I am voting to close the question."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515602260, "post_id": 48191660, "comment_id": 83364568, "body": "&quot;But it&#39;s hard to understand in which example should I use them and where I can use variables.&quot; You should always avoid pointers unless you have to use them."}, {"owner": {"reputation": 23, "user_id": 8882546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1499fa3e7750b1a157d1f2f47e5f4906?s=128&d=identicon&r=PG&f=1", "display_name": "dan_nek", "link": "https://stackoverflow.com/users/8882546/dan-nek"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515702365, "post_id": 48191660, "comment_id": 83412381, "body": "@Slava In many cases(for novice) it&#39;s really hard to understand in which situations should I use pointers. Theoretically I know when, but in practice..."}], "owner": {"reputation": 23, "user_id": 8882546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1499fa3e7750b1a157d1f2f47e5f4906?s=128&d=identicon&r=PG&f=1", "display_name": "dan_nek", "link": "https://stackoverflow.com/users/8882546/dan-nek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1515600774, "creation_date": 1515600774, "question_id": 48191660, "link": "https://stackoverflow.com/questions/48191660/using-of-pointers-in-specific-example", "title": "Using of pointers in specific example", "body": "<p>I understand the idea of pointers and how they work.\nBut it's hard to understand in which example should I use them and where I can use variables.</p>\n\n<p><strong>Disclaimer:</strong> before creating this post I read a lot of answers on similar questions, but the answers were absctract, without concrete example.</p>\n\n<p>Here is my example: Suppose I want to create a class <code>Course</code>, which constructor has a name and list of the students, that participate in this course. </p>\n\n<p>Methods, which I want to implement: </p>\n\n<p>1)to save the results for both test for each student and calculate the average pro Course and pro Student.</p>\n\n<p>2)Methods to define id_number(matr_num) and name for each student.</p>\n\n<p>In order to implement this class, I decided first of all to create class <code>Student</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;stdexcept&gt;\n#include &lt;algorithm&gt;\n#include &lt;cmath&gt;\n#include &lt;list&gt;\nusing namespace std;\n\n\n\n\nclass Student{\n    private:\n    string name;\n    int matr_num;\n    int test_1;\n    int test_2;\n\n    public:\n    //Constructor:\n    Student(string name,int matr_num,int test_1,int test_2);\n    //Destructor:\n    ~Student();\n    //Copy constructor:\n    Student(const Student&amp; other);\n    //Copy assingment:\n    Student operator=(const Student&amp; other);\n    //Move constructor:\n    Student(Student&amp;&amp; other);\n    //Move assingment:\n    Student operator=(Student&amp;&amp;other);  \n    //Average of two tests:\n    double test_average();\n    //get name,matrikel_number, scores of test:\n    string get_name() const ;\n    double get_matr_num() const;\n    double get_test_1() const ;\n    double get_test_2() const ;\n\n};\n\n//Constructor\nStudent::Student(string name,int matr_num,int test_1,int test_2)\n    :name{name},matr_num{matr_num},test_1{test_1},test_2{test_2}\n        {\n        }\n\n//Destructor\nStudent::~Student(){\n}\n\n//Copy constructor:\nStudent::Student(const Student&amp; other)\n    :name{other.name},matr_num{other.matr_num},test_1{other.test_1},test_2{other.test_2}\n        {\n\n        }\n\n\n//Copy assingment:\nStudent Student::operator=(const Student&amp; other)\n{\n    name = other.name;\n    matr_num = other.matr_num;\n    test_1 = other.test_1;\n    test_2 = other.test_2;\n\n}   \n\n\n//Move Constructor:\nStudent::Student(Student&amp;&amp; other)\n    :name{other.name},matr_num{other.matr_num},test_1{other.test_1},test_2{other.test_2}\n        {\n            other.name = \"\";\n            other.matr_num = 0;\n            other.test_1 = 0;\n            other.test_2 = 0;\n        }       \n\n//Move assingment:\nStudent Student::operator=(Student&amp;&amp; other)\n{\n    name = other.name;\n    matr_num = other.matr_num;\n    test_1 = other.test_1;\n    test_2 = other.test_2;\n    other.name = \"\";\n    other.matr_num = 0;\n    other.test_1 = 0;\n    other.test_2 = 0;\n}   \n\ndouble Student::test_average(){\n    return (test_1 + test_2)/2;\n}\n\n\nstring Student::get_name()const{return name;}\ndouble Student::get_matr_num()const{return matr_num;}\ndouble Student::get_test_1()const{return test_1;}\ndouble Student::get_test_2()const{return test_2;}\n</code></pre>\n\n<p>As you see, I did it without pointers and I will use it in order to create class <code>Course</code></p>\n\n<p>Here are the questions: </p>\n\n<p>1)Should I use pointers instead of variables?</p>\n\n<p>2)If yes/no, why?What are the advanteges of using pointers in this case?</p>\n"}, {"tags": ["c++", "exception", "visual-studio-2017", "unhandled-exception"], "comments": [{"owner": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 2, "creation_date": 1515600797, "post_id": 48191612, "comment_id": 83363562, "body": "Did you mean <code>for (int i = 0; i &lt; NUM_BRANCHES; i++)</code>?"}, {"owner": {"reputation": 49, "user_id": 9199357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e23a961272743ff718d07b9c1db70413?s=128&d=identicon&r=PG&f=1", "display_name": "K.J. Shamberger", "link": "https://stackoverflow.com/users/9199357/k-j-shamberger"}, "reply_to_user": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 0, "creation_date": 1515617272, "post_id": 48191612, "comment_id": 83372562, "body": "When I try that, Visual Studio tells me that it expected an &#39;;&#39;."}, {"owner": {"reputation": 49, "user_id": 9199357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e23a961272743ff718d07b9c1db70413?s=128&d=identicon&r=PG&f=1", "display_name": "K.J. Shamberger", "link": "https://stackoverflow.com/users/9199357/k-j-shamberger"}, "reply_to_user": {"reputation": 2613, "user_id": 9156061, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e69150721b719cef2eb990fc78bc9cc0?s=128&d=identicon&r=PG&f=1", "display_name": "mdatsev", "link": "https://stackoverflow.com/users/9156061/mdatsev"}, "edited": false, "score": 0, "creation_date": 1515622562, "post_id": 48191612, "comment_id": 83374993, "body": "It&#39;s working now, thanks for the help! @mdatsev"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9199357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e23a961272743ff718d07b9c1db70413?s=128&d=identicon&r=PG&f=1", "display_name": "K.J. Shamberger", "link": "https://stackoverflow.com/users/9199357/k-j-shamberger"}, "edited": false, "score": 0, "creation_date": 1515617326, "post_id": 48191790, "comment_id": 83372588, "body": "Thanks for the fix, but now I get a different error: Unhandled exception thrown: write access violation. <b>this</b> was 0xCAAF28. occurred"}, {"owner": {"reputation": 473, "user_id": 9179626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf2e1477fe6adbfd17fe2eeda14ff74?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Lyons", "link": "https://stackoverflow.com/users/9179626/brandon-lyons"}, "reply_to_user": {"reputation": 49, "user_id": 9199357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e23a961272743ff718d07b9c1db70413?s=128&d=identicon&r=PG&f=1", "display_name": "K.J. Shamberger", "link": "https://stackoverflow.com/users/9199357/k-j-shamberger"}, "edited": false, "score": 0, "creation_date": 1515617994, "post_id": 48191790, "comment_id": 83372932, "body": "That&#39;d be from the loop @mdatsev mentioned. I&#39;d suggest double checking that you entered it exactly as he wrote it, since that shouldn&#39;t give any errors."}], "tags": [], "owner": {"reputation": 473, "user_id": 9179626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daf2e1477fe6adbfd17fe2eeda14ff74?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Lyons", "link": "https://stackoverflow.com/users/9179626/brandon-lyons"}, "is_accepted": false, "score": 0, "last_activity_date": 1515601192, "creation_date": 1515601192, "answer_id": 48191790, "question_id": 48191612, "link": "https://stackoverflow.com/questions/48191612/visual-studio-2017-exception-unhandled/48191790#48191790", "title": "Visual Studio 2017 Exception Unhandled", "body": "<p>setPosition() requires an sf::Vector2f. So you could fix your code by changing that line to:</p>\n\n<pre><code>branches[i].setPosition(sf::Vector2f(-2000, -2000))\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9199357, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e23a961272743ff718d07b9c1db70413?s=128&d=identicon&r=PG&f=1", "display_name": "K.J. Shamberger", "link": "https://stackoverflow.com/users/9199357/k-j-shamberger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515601192, "creation_date": 1515600615, "question_id": 48191612, "link": "https://stackoverflow.com/questions/48191612/visual-studio-2017-exception-unhandled", "title": "Visual Studio 2017 Exception Unhandled", "body": "<p>I'm a novice programmer trying to follow a tuturial on recreating a game on Steam called Timber(I believe). The program was working fine and I had almost completed the tutrial, but I ran into trouble when I added the code:</p>\n\n<pre><code>for (int i = 0 &lt; NUM_BRANCHES; i++;)\n{\n    branches[i].setTexture(textureBranch);\n    branches[i].setPosition(-2000, -2000);\n    // Set the sprite's origin to dead center\n    // We can then spin it around without changing its position\n    branches[i].setOrigin(220, 20);\n}\n</code></pre>\n\n<p>Visual Studio says: branches[i].setPosition(-2000, -2000); Unhandled exception thrown: write access violation.\n<strong>this</strong> was 0x59AF28. occurred</p>\n\n<p>I'll also post the full code, apologies that it's a bit messy.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;sstream&gt;\n#include &lt;SFML\\Graphics.hpp&gt;\n\nusing namespace sf;\n\n// Function declaration\nvoid updateBranches(int seed);\nconst int NUM_BRANCHES = 6;\nSprite branches[NUM_BRANCHES];\n// Where is the player/branch?\n// Left or right\nenum class side{ LEFT, RIGHT, NONE };\nside branchPositions[NUM_BRANCHES];\n\nint main()\n{\n    // Creates a video mode object\n    VideoMode vm(1920, 1080);\n\n    // Creates and opens a window for the game\n    RenderWindow window(vm, \"Timber!!!\", Style::Fullscreen);\n\n    // Create a texture to hold a graphic on the GPU\n    Texture textureBackground;\n\n    // Load a graphic into the texture\n    textureBackground.loadFromFile(\"graphics/background.png\");\n\n    // Create a sprite\n    Sprite spriteBackground;\n\n    // Attach the texture to the sprite\n    spriteBackground.setTexture(textureBackground);\n\n    // Set the spriteBackground to cover the screen\n    spriteBackground.setPosition(0, 0);\n\n    // Make a tree sprite\n    Texture textureTree;\n    textureTree.loadFromFile(\"graphics/tree.png\");\n    Sprite spriteTree;\n    spriteTree.setTexture(textureTree);\n    spriteTree.setPosition(810, 0);\n\n    // Prepare the bee\n    Texture textureBee;\n    textureBee.loadFromFile(\"graphics/bee.png\");\n    Sprite spriteBee;\n    spriteBee.setTexture(textureBee);\n    spriteBee.setPosition(0, 450);\n\n    // Is the be currently moving?\n    bool beeActive = false;\n\n    // How fast can the bee fly\n    float beeSpeed = 0.0f;\n\n    // Make 3 cloud sprites from 1 texture\n    Texture textureCloud;\n\n    // Load 1 new texture\n    textureCloud.loadFromFile(\"graphics/cloud.png\");\n\n    // 3 new sprites with the same texture\n    Sprite spriteCloud1;\n    Sprite spriteCloud2;\n    Sprite spriteCloud3;\n    spriteCloud1.setTexture(textureCloud);\n    spriteCloud2.setTexture(textureCloud);\n    spriteCloud3.setTexture(textureCloud);\n\n    // Position the clouds off screen\n    spriteCloud1.setPosition(0, 0);\n    spriteCloud2.setPosition(0, -150);\n    spriteCloud3.setPosition(0, -300);\n\n    // Are the clouds currently on the screen?\n    bool cloud1Active = false;\n    bool cloud2Active = false;\n    bool cloud3Active = false;\n\n    // How fast is each cloud?\n    float cloud1Speed = 0.1f;\n    float cloud2Speed = 0.2f;\n    float cloud3Speed = 0.3f;\n\n    // Variables to control time itself\n    Clock clock;\n\n    // Time bar\n    RectangleShape timeBar;\n    float timeBarStartWidth = 400;\n    float timeBarHeight = 80;\n    timeBar.setSize(Vector2f(timeBarStartWidth, timeBarHeight));\n    timeBar.setFillColor(Color::Red);\n    timeBar.setPosition((1920 / 2) - timeBarStartWidth / 2, 980);\n\n    Time gameTimeTotal;\n    float timeRemaining = 6.0f;\n    float timeBarWidthPerSecond = timeBarStartWidth / timeRemaining;\n\n    // Track whether the game is running\n    bool paused = true;\n\n    // Draw some text\n    int score = 0;\n    sf::Text messageText;\n    sf::Text scoreText;\n\n    // Font\n    Font font;\n    font.loadFromFile(\"fonts/KOMIKAP_.ttf\");\n\n    // Set the font of our message\n    messageText.setFont(font);\n    scoreText.setFont(font);\n\n    // Assign the actual message\n    messageText.setString(\"Press Enter to Start!\");\n    scoreText.setString(\"score = 0\");\n\n    // Make text really big\n    messageText.setCharacterSize(75);\n    scoreText.setCharacterSize(100);\n\n    // Choose a color\n    messageText.setFillColor(Color::White);\n    scoreText.setFillColor(Color::Black);\n\n    // Position the text\n    FloatRect textRect = messageText.getLocalBounds();\n    messageText.setOrigin(textRect.left +\n        textRect.width / 2.0f,\n        textRect.top +\n        textRect.height / 2.0f);\n    messageText.setPosition(1920 / 2.0f, 1080 / 2.0f);\n    scoreText.setPosition(20, 20);\n\n    // Prepare 6 branches\n    Texture textureBranch;\n    textureBranch.loadFromFile(\"graphics/branch.png\");\n    // Set the texture for each branch sprite\n    for (int i = 0 &lt; NUM_BRANCHES; i++;)\n    {\n        branches[i].setTexture(textureBranch);\n        branches[i].setPosition(-2000, -2000);\n        // Set the sprite's origin to dead center\n        // We can then spin it around without changing its position\n        branches[i].setOrigin(220, 20);\n    }\n\n\n    while (window.isOpen())\n    {\n        /*\n        **************\n        Handles the player input\n        **************\n        */\n\n        if (Keyboard::isKeyPressed(Keyboard::Escape))\n        {\n            window.close();\n        }\n\n        // Start the game\n        if (Keyboard::isKeyPressed(Keyboard::Return))\n        {\n            paused = false;\n\n            // Reset the time and the score\n            score = 0;\n            timeRemaining = 5;\n        }\n\n        /*\n        **************\n        Update the scene\n        **************\n        */\n\n        if (!paused)\n        {\n            // Measure time\n            Time dt = clock.restart();\n\n            // Subtract from the amount of time remaining\n            timeRemaining -= dt.asSeconds();\n            // size up the time bar\n            timeBar.setSize(Vector2f(timeBarWidthPerSecond *\n                timeRemaining, timeBarHeight));\n\n            if (timeRemaining &lt;= 0.0f)\n            {\n                // Pause the game\n                paused = true;\n\n                // Change the message shown to the player\n                messageText.setString(\"Out of time\");\n\n                // Reposition the text base on its new size\n                FloatRect textRect = messageText.getLocalBounds();\n                messageText.setOrigin(textRect.left +\n                    textRect.width / 2.0f,\n                    textRect.top +\n                    textRect.height / 2.0f);\n                messageText.setPosition(1920 / 2.0f, 1080 / 2.0f);\n            }\n\n            // Setup the bee\n            if (!beeActive)\n            {\n\n                // How fast is the bee\n                srand((int)time(0) * 10);\n                beeSpeed = (rand() % 400) + 350;\n\n                // How high is the bee\n                srand((int)time(0) * 10);\n                float height = (rand() % 650) + 850;\n                spriteBee.setPosition(1921, height);\n                beeActive = true;\n\n            }\n            else\n                // Move the bee\n            {\n\n                spriteBee.setPosition(\n                    spriteBee.getPosition().x -\n                    (beeSpeed * dt.asSeconds()),\n                    spriteBee.getPosition().y);\n\n                // Has the bee reached the right hand edge of the screen?\n                if (spriteBee.getPosition().x &lt; -100)\n                {\n                    // Set it up ready to be a whole new bee next frame\n                    beeActive = false;\n                }\n\n            }\n\n            // Manage the clouds\n            // Cloud 1\n\n\n            if (!cloud1Active)\n            {\n                // How fast is the cloud\n                srand((int)time(0) * 10);\n                cloud1Speed = (rand() % 150);\n\n                // How high is the cloud\n                srand((int)time(0) * 10);\n                float height = (rand() % 200);\n                spriteCloud1.setPosition(-300, height);\n                cloud1Active = true;\n\n            }\n\n            else\n            {\n                spriteCloud1.setPosition(\n                    spriteCloud1.getPosition().x +\n                    (cloud1Speed * dt.asSeconds()),\n                    spriteCloud1.getPosition().y);\n\n                // Has the cloud reached the right hand edge of the screen?\n                if (spriteCloud1.getPosition().x &gt; 1920)\n                {\n                    // Set it up ready to be a whole new cloud next frame\n                    cloud1Active = false;\n                }\n\n            }\n\n            // Cloud 2 \n\n\n            if (!cloud2Active)\n            {\n                // How fast is the cloud\n                srand((int)time(0) * 20);\n                cloud2Speed = (rand() % 200);\n\n                // How high is the cloud\n                srand((int)time(0) * 20);\n                float height = (rand() % 300);\n                spriteCloud2.setPosition(-200, height);\n                cloud2Active = true;\n\n            }\n\n            else\n            {\n                spriteCloud2.setPosition(\n                    spriteCloud2.getPosition().x +\n                    (cloud1Speed * dt.asSeconds()),\n                    spriteCloud2.getPosition().y);\n\n                // Has the cloud reached the right hand edge of the screen?\n                if (spriteCloud2.getPosition().x &gt; 1920)\n                {\n                    // Set it up ready to be a whole new cloud next frame\n                    cloud2Active = false;\n                }\n            }\n\n            // Cloud 3\n\n\n            if (!cloud3Active)\n            {\n                // How fast is the cloud\n                srand((int)time(0) * 30);\n                cloud3Speed = (rand() % 250);\n\n                // How high is the cloud\n                srand((int)time(0) * 30);\n                float height = (rand() % 150);\n                spriteCloud3.setPosition(-100, height);\n                cloud3Active = true;\n\n            }\n\n            else\n            {\n                spriteCloud3.setPosition(\n                    spriteCloud3.getPosition().x +\n                    (cloud1Speed * dt.asSeconds()),\n                    spriteCloud3.getPosition().y);\n\n                // Has the cloud reached the right hand edge of the     screen?\n                if (spriteCloud3.getPosition().x &gt; 1920)\n                {\n                    // Set it up ready to be a whole new cloud next frame\n                    cloud3Active = false;\n                }\n            }\n\n            // Update the score text\n            std::stringstream ss;\n            ss &lt;&lt; \"Score = \" &lt;&lt; score;\n            scoreText.setString(ss.str());\n\n            // Update the branch sprites\n            for (int i = 0; i &lt; NUM_BRANCHES; i++)\n            {\n                float height = i * 150;\n                if (branchPositions[i] == side::LEFT)\n                {\n                    // Move the sprite to the left side\n                    branches[i].setPosition(610, height);\n                    // Flip the sprite around the other way\n                    branches[i].setRotation(180);\n                }\n                else if (branchPositions[i] == side::RIGHT)\n                {\n                    // Move the sprite to the right side\n                    branches[i].setPosition(1330, height);\n                    // Set the sprite rotation to normal\n                    branches[i].setRotation(0);\n                }\n                else\n                {\n                    // Hide the branch\n                    branches[i].setPosition(3000, height);\n                }\n            }\n\n        } // End if(!paused)\n\n        /*\n        **************\n        Draw the scene\n        **************\n        */\n\n        // Clear everything from the last frame\n        window.clear();\n\n        // Draw our game scene here\n        window.draw(spriteBackground);\n\n        // Draw the clouds\n        window.draw(spriteCloud1);\n        window.draw(spriteCloud2);\n        window.draw(spriteCloud3);\n\n        // Draw the branches\n        for (int i = 0; i &lt; NUM_BRANCHES; i++)\n        {\n            window.draw(branches[i]);\n        }\n\n        // Draw the tree\n        window.draw(spriteTree);\n\n        // Draw the insect\n        window.draw(spriteBee);\n\n        // Draw the score\n        window.draw(scoreText);\n\n        //Draw the timebar\n        window.draw(timeBar);\n\n        if (paused)\n        {\n            // Draw our message\n            window.draw(messageText);\n        }\n\n        // Show everyting we just drew\n        window.display();\n    }\n\n    return 0;\n}\n\n// Function definition\nvoid updateBranches(int seed)\n{\n    // Move all the branches down on place\n    for (int j = NUM_BRANCHES - 1; j &gt; 0; j--)\n    {\n        branchPositions[j] = branchPositions[j - 1];\n    }\n    // Spawn a new branch at postion 0\n    // LEFt, RIGHT, NONE\n    srand((int)time(0) + seed);\n    int r = (rand() % 5);\n    switch (r)\n    {\n    case 0:\n        branchPositions[0] = side::LEFT;\n        break;\n\n    case 1:\n        branchPositions[0] = side::RIGHT;\n        break;\n\n    default:\n        branchPositions[0] = side::NONE;\n        break;\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "macos", "makefile", "g++"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1515600032, "post_id": 48191350, "comment_id": 83363049, "body": "Can you execute after building manually, i.e. with a handwritten commandline instead of via make?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1515600075, "post_id": 48191350, "comment_id": 83363066, "body": "What does <code>file prog</code> tell you?"}, {"owner": {"reputation": 814, "user_id": 5941260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NBrFP.jpg?s=128&g=1", "display_name": "micharaze", "link": "https://stackoverflow.com/users/5941260/micharaze"}, "edited": false, "score": 0, "creation_date": 1515600190, "post_id": 48191350, "comment_id": 83363159, "body": "yes, i can build manually."}, {"owner": {"reputation": 814, "user_id": 5941260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NBrFP.jpg?s=128&g=1", "display_name": "micharaze", "link": "https://stackoverflow.com/users/5941260/micharaze"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1515600302, "post_id": 48191350, "comment_id": 83363240, "body": "@SergeyA do you mean the content? Starts with: ???x__TEXT??__text__TEXT?XS??__stubs__TEXT?c???__stub_helper&zwnj;&#8203;__TEXTth?th?__gcc_ex&zwnj;&#8203;cept_tab__TEXT&lt;l&lt;l__&zwnj;&#8203;cstring__TEXT?ti?t__&zwnj;&#8203;const__TEXT<code>z?</code>z__unwi&zwnj;&#8203;nd_info__TEXT"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1515600326, "post_id": 48191350, "comment_id": 83363256, "body": "@raze92, no, I mean the exact command output"}, {"owner": {"reputation": 814, "user_id": 5941260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NBrFP.jpg?s=128&g=1", "display_name": "micharaze", "link": "https://stackoverflow.com/users/5941260/micharaze"}, "edited": false, "score": 0, "creation_date": 1515600354, "post_id": 48191350, "comment_id": 83363270, "body": "prog: Mach-O 64-bit bundle x86_64"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1515600430, "post_id": 48191350, "comment_id": 83363324, "body": "You should know, then explain, why do you use <code>-undefined dynamic_lookup -bundle</code>. So <b>edit your question</b> to improve it and add more explanation about your <code>Makefile</code>. If you don&#39;t know why you use that you need to remove it from your <code>Makefile</code>. Most programs don&#39;t need such extra linker flags."}, {"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1515600533, "post_id": 48191350, "comment_id": 83363400, "body": "Do you have &quot;execute&quot; permission flag set for your file?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1515601272, "post_id": 48191350, "comment_id": 83363894, "body": "Reacting you your edit: you need specify Python runtime library to the linker as well."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1515603872, "post_id": 48191350, "comment_id": 83365563, "body": "@raze92, please do not update your question in such a way that it fundamentally changes it or adds a completely new dimension, as you did with your update 1.  If you discover a new problem after the question you asked is answered, and if your research on that new problem is unavailing, then the right thing to do is to pose a new, separate question about the new problem."}], "answers": [{"tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": true, "score": 6, "last_activity_date": 1515600809, "creation_date": 1515600809, "answer_id": 48191675, "question_id": 48191350, "link": "https://stackoverflow.com/questions/48191350/makefile-compiles-binary-not-executable/48191675#48191675", "title": "Makefile compiles binary, not executable", "body": "<blockquote>\n  <p>What did i wrong?</p>\n</blockquote>\n\n<p>Since you apparently wanted a program that you can execute directly, what you did wrong was to specify <a href=\"https://gcc.gnu.org/onlinedocs/gcc-7.2.0/gcc/Darwin-Options.html#Darwin-Options\" rel=\"noreferrer\">the <code>-bundle</code> option</a> to g++.  This instructs it that the output should be a Mach-o <em>bundle format</em> file.  Such files are not directly executable.  They can be loaded into another program at runtime via the system's dynamic linking functions, which can be used to implement plugins and similar program features.  Remove this option.</p>\n\n<p>The <code>-undefined dynamic_lookup</code> looks suspicious, too.  I'm guessing that you copied that and the <code>-bundle</code> option from some other Makefile.  If you don't know what it's there for then you ought to drop it, too.</p>\n"}], "owner": {"reputation": 814, "user_id": 5941260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/NBrFP.jpg?s=128&g=1", "display_name": "micharaze", "link": "https://stackoverflow.com/users/5941260/micharaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 1, "accepted_answer_id": 48191675, "answer_count": 1, "score": 1, "last_activity_date": 1515602561, "creation_date": 1515599878, "last_edit_date": 1515602561, "question_id": 48191350, "link": "https://stackoverflow.com/questions/48191350/makefile-compiles-binary-not-executable", "title": "Makefile compiles binary, not executable", "body": "<p>When i run the executable after make, bash raise following error:</p>\n\n<pre><code>$ ./prog \n-bash: ./prog: cannot execute binary file\n</code></pre>\n\n<p>My makefile:</p>\n\n<pre><code>CC = g++ -std=c++11\nLDFLAGS = -undefined dynamic_lookup -bundle\nOBJ = main.o datetime.o logger.o WeatherApi.o tinyxml2.o tflower.o tservo.o\n\n\nprog: $(OBJ)\n    $(CC) -o $@ $(OBJ) $(LDFLAGS)\n\n%.o: %.cpp\n    $(CC) -c $&lt;\n\nclean:\n    rm -r *.o\n</code></pre>\n\n<p>What did i wrong?</p>\n\n<hr>\n\n<p><strong>Update 2:</strong></p>\n\n<p>Thanks for your <a href=\"https://stackoverflow.com/questions/48191350/makefile-compiles-binary-not-executable#comment83363894_48191350\">comment</a> SergayA. After link python with the help of <a href=\"https://stackoverflow.com/questions/3891202/how-to-link-python-static-library-with-my-c-program\">this article</a> it works.</p>\n\n<hr>\n\n<p><strong>Update 1:</strong></p>\n\n<p>I removed the <code>-undefined dynamic_lookup -bundle</code> flag after some comments so i got problems with Python. To use Python.h i set the environment variable to this path:\n<code>CPLUS_INCLUDE_PATH=/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7/</code></p>\n\n<pre><code>2 warnings generated.\ng++ -std=c++11 -c datetime.cpp\ng++ -std=c++11 -c logger.cpp\ng++ -std=c++11 -c WeatherApi.cpp\ng++ -std=c++11 -c tinyxml2.cpp\ng++ -std=c++11 -c tflower.cpp\ng++ -std=c++11 -c tservo.cpp\ng++ -std=c++11 -o prog main.o datetime.o logger.o WeatherApi.o tinyxml2.o tflower.o tservo.o \nUndefined symbols for architecture x86_64:\n  \"_PyDict_GetItemString\", referenced from:\n      WeatherApi::SayHelloWorld() in WeatherApi.o\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyErr_Print\", referenced from:\n      WeatherApi::WeatherApi(char*, char*) in WeatherApi.o\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyImport_Import\", referenced from:\n      WeatherApi::WeatherApi(char*, char*) in WeatherApi.o\n  \"_PyModule_GetDict\", referenced from:\n      WeatherApi::WeatherApi(char*, char*) in WeatherApi.o\n  \"_PyObject_CallObject\", referenced from:\n      WeatherApi::SayHelloWorld() in WeatherApi.o\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyString_AsString\", referenced from:\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyString_FromString\", referenced from:\n      WeatherApi::WeatherApi(char*, char*) in WeatherApi.o\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyTuple_New\", referenced from:\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_PyTuple_SetItem\", referenced from:\n      WeatherApi::GetAirTemperature() in WeatherApi.o\n  \"_Py_Finalize\", referenced from:\n      WeatherApi::~WeatherApi() in WeatherApi.o\n  \"_Py_Initialize\", referenced from:\n      WeatherApi::WeatherApi(char*, char*) in WeatherApi.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [prog] Error 1\n</code></pre>\n"}, {"tags": ["c++", "windows", "boost", "cmake"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1515599517, "post_id": 48191217, "comment_id": 83362669, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13280823/cmake-not-finding-boost\">CMake not finding Boost</a>"}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1515607623, "post_id": 48191217, "comment_id": 83367640, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/42123509/cmake-finds-boost-but-the-imported-targets-not-available-for-boost-version\">CMake finds Boost but the imported targets not available for Boost version</a> Even CMake&#39;s Git master does not support Boobst 1.66."}], "answers": [{"comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1515607691, "post_id": 48191380, "comment_id": 83367680, "body": "It&#39;s hopeless, CMake does not yet support Boost 1.66. <a href=\"https://stackoverflow.com/a/42124857/2799037\">stackoverflow.com/a/42124857/2799037</a>"}], "tags": [], "owner": {"reputation": 182, "user_id": 1118665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z7WEw.png?s=128&g=1", "display_name": "chenjun", "link": "https://stackoverflow.com/users/1118665/chenjun"}, "is_accepted": false, "score": -1, "last_activity_date": 1515599974, "creation_date": 1515599974, "answer_id": 48191380, "question_id": 48191217, "link": "https://stackoverflow.com/questions/48191217/boost-1-66-0-could-not-find-boost-libraries-boost-system-boost-filesystem-bo/48191380#48191380", "title": "Boost 1.66.0 : could not find boost libraries :boost_system, boost_filesystem,boost_thread,boost_date_time", "body": "<p>try set <code>BOOST_INCLUDEDIR</code> and <code>BOOST_LIBRARYDIR</code> manually before run cmake,e.g.</p>\n\n<pre><code>set BOOST_INCLUDEDIR=C:\\boost\\src\\boost_1_59_0\nset BOOST_LIBRARYDIR=C:\\boost\\boost_1_59_0-bin-msvc-all-32-64\\boost_1_59_0\\lib32-msvc-14.0\n</code></pre>\n\n<p>see <a href=\"https://cmake.org/cmake/help/v3.0/module/FindBoost.html\" rel=\"nofollow noreferrer\">FindBoost</a> </p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515601234, "post_id": 48191548, "comment_id": 83363873, "body": "I tried to use version 1.65.1 but I cannot compile boost libraries : unknown compiler version"}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 1, "creation_date": 1515601634, "post_id": 48191548, "comment_id": 83364159, "body": "@Ammoun Try first to use prebuilt binaries from <a href=\"https://sourceforge.net/projects/boost/files/boost-binaries/1.65.1/\" rel=\"nofollow noreferrer\">sourceforge.net/projects/boost/files/boost-binaries/1.65.1</a>"}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515602154, "post_id": 48191548, "comment_id": 83364492, "body": "The compiler version of Visual Studio 2017 is 14.1 so you need to get the file <code>boost_1_65_1-msvc-14.1-64.exe</code>"}, {"owner": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515602284, "post_id": 48191548, "comment_id": 83364587, "body": "but with prebuilt binaries I must enter this command : .\\b2 --build-dir=build toolset=msvc address-model=64 --build-type=complete lib64-msvc-14.1"}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515603026, "post_id": 48191548, "comment_id": 83365048, "body": "@Ammoun No, thats the build step of Boost. You only  need to call find_package in your CMakeLists.txt and set BOOST_ROOT before or on the command line."}, {"owner": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515657531, "post_id": 48191548, "comment_id": 83385316, "body": "sorry this is the first time I use Cmake and boost, I don&#39;t understand how to call package in CMakeLists.txt"}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515659820, "post_id": 48191548, "comment_id": 83386389, "body": "Use <code>set(BOOST_USE_STATIC_LIBS ON) set(Boost_USE_MULTITHREADED ON) find_package(Boost COMPONENTS system filesystem thread locale date_time REQUIRED)</code> and call <code>cmake {YOUR_PATH_TO_CMAKELISTS_TXT} -DBOOST_ROOT={YOUR_PATH_TO_BOOST} -G &quot;Visual Studio 15 2017&quot;</code> from your build directory."}, {"owner": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515662323, "post_id": 48191548, "comment_id": 83387774, "body": "Thank you very much for all your answers. I have used boost_1_65_1-msvc-14.1-64.exe and it works :)  I have put BOOST_INCLUDEDIR and BOOST_ROOT in the cmake command as well."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "reply_to_user": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "edited": false, "score": 0, "creation_date": 1515662712, "post_id": 48191548, "comment_id": 83388009, "body": "Glad to hear :)"}], "tags": [], "owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "is_accepted": true, "score": 6, "last_activity_date": 1515600463, "creation_date": 1515600463, "answer_id": 48191548, "question_id": 48191217, "link": "https://stackoverflow.com/questions/48191217/boost-1-66-0-could-not-find-boost-libraries-boost-system-boost-filesystem-bo/48191548#48191548", "title": "Boost 1.66.0 : could not find boost libraries :boost_system, boost_filesystem,boost_thread,boost_date_time", "body": "<p>The naming scheme of the Boost libraries changed with version 1.66.0. An additional architecture infix has been added which is not known to FindBoost.cmake of the CMake version 3.10 you are using. Try to use version 1.65.1 and set BOOST_ROOT to the path of your Boost installation.</p>\n"}], "owner": {"reputation": 73, "user_id": 7634212, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f296fa7b81bd4fc960e9522e6d015008?s=128&d=identicon&r=PG&f=1", "display_name": "Ammoun", "link": "https://stackoverflow.com/users/7634212/ammoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5637, "favorite_count": 0, "accepted_answer_id": 48191548, "answer_count": 2, "score": 2, "last_activity_date": 1526398600, "creation_date": 1515599376, "last_edit_date": 1515664500, "question_id": 48191217, "link": "https://stackoverflow.com/questions/48191217/boost-1-66-0-could-not-find-boost-libraries-boost-system-boost-filesystem-bo", "title": "Boost 1.66.0 : could not find boost libraries :boost_system, boost_filesystem,boost_thread,boost_date_time", "body": "<p>My configuration is:</p>\n\n<ul>\n<li>OS: Windows 10 x64</li>\n<li>Boost: 1.66.0</li>\n<li>CMake: 3.10</li>\n<li>Visual Studio: 2017</li>\n</ul>\n\n<p>I am compiling boost this way:</p>\n\n<pre><code>bootstrap \n.\\b2 --build-dir=build toolset=msvc address-model=64 --build-type=complete stage\n</code></pre>\n\n<p>When running CMake I get this error:</p>\n\n<pre><code>could not find boost libraries: \nboost_system\nboost_filesystem\nboost_thread\nboost_locale\nboost_date_time\n</code></pre>\n\n<p>I search for these libraries and they are in the stage folder.\nI tried <code>BOOST_USE_STATIC_LIBS=ON</code> but nothing happens.</p>\n"}, {"tags": ["c++", "boost", "exception-handling", "boost-exception"], "answers": [{"tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1515606114, "last_edit_date": 1515606114, "creation_date": 1515604086, "answer_id": 48192636, "question_id": 48191012, "link": "https://stackoverflow.com/questions/48191012/how-to-iterate-over-all-error-infos-in-boostexception/48192636#48192636", "title": "How to iterate over all error_info&#39;s in boost::exception?", "body": "<p>There's always the following information (iff you used <code>BOOST_THROW_EXCEPTION</code>):</p>\n\n<pre><code>char const * const * f=get_error_info&lt;throw_file&gt;(*be);\nint const * l=get_error_info&lt;throw_line&gt;(*be);\nchar const * const * fn=get_error_info&lt;throw_function&gt;(*be);\nif( !f &amp;&amp; !l &amp;&amp; !fn )\n    tmp &lt;&lt; \"Throw location unknown (consider using BOOST_THROW_EXCEPTION)\\n\";\n</code></pre>\n\n<p>Other than that you have use the <code>error_info_container</code>, but the <code>data_</code> member is private\u00b9.</p>\n\n<p>If you are willing to \"force\" past that hurdle, the code to \"duplicate\" would not be so much:</p>\n\n<pre><code>char const *\ndiagnostic_information( char const * header ) const\n    {\n    if( header )\n        {\n        std::ostringstream tmp;\n        tmp &lt;&lt; header;\n        for( error_info_map::const_iterator i=info_.begin(),end=info_.end(); i!=end; ++i )\n            {\n            error_info_base const &amp; x = *i-&gt;second;\n            tmp &lt;&lt; x.name_value_string();\n            }\n        tmp.str().swap(diagnostic_info_str_);\n        }\n    return diagnostic_info_str_.c_str();\n    }\n</code></pre>\n\n<p>Everything there is undocumented, not part of the public API though: it lives in namespace <code>boost::exception_detail</code> and the class <code>boost::exception_detail::exception_info_container_impl</code>.</p>\n\n<p>In short, there be dragons (these interfaces are subject to change without notice and can depend on surprising assumptions).</p>\n\n<hr>\n\n<p>\u00b9 (except on some older compilers).</p>\n"}], "owner": {"reputation": 1658, "user_id": 1364286, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c336fee1bd08aaf7f1d7f8c6f57c3817?s=128&d=identicon&r=PG", "display_name": "Pat", "link": "https://stackoverflow.com/users/1364286/pat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515606114, "creation_date": 1515598724, "question_id": 48191012, "link": "https://stackoverflow.com/questions/48191012/how-to-iterate-over-all-error-infos-in-boostexception", "title": "How to iterate over all error_info&#39;s in boost::exception?", "body": "<p>At the catch site of a boost::exception (or std::exception), I want to iterate over all error_info elements of the exception, without knowing the types. I need to extract all the name-value pairs.</p>\n\n<p>I guess it should possible since the boost::diagnostic_information function does that, but I'd like to avoid duplicating all that code.</p>\n\n<p>Can this be done and how?</p>\n"}, {"tags": ["c++", "opengl", "3d", "quaternions", "glm-math"], "comments": [{"owner": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1515599734, "post_id": 48190411, "comment_id": 83362832, "body": "How did you achieve <code>yaw for 90 degrees</code>? Show the line(s) of code which do this; the problem might lie with them."}, {"owner": {"reputation": 33, "user_id": 8304239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b973c0973d624f0df7139420b6c1d655?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Paukov", "link": "https://stackoverflow.com/users/8304239/nikolai-paukov"}, "reply_to_user": {"reputation": 13335, "user_id": 8204776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e6qyq.jpg?s=128&g=1", "display_name": "meowgoesthedog", "link": "https://stackoverflow.com/users/8204776/meowgoesthedog"}, "edited": false, "score": 0, "creation_date": 1515600160, "post_id": 48190411, "comment_id": 83363135, "body": "I have added code of this. I call code for yaw several times."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1515600386, "post_id": 48190411, "comment_id": 83363295, "body": "You don&#39;t really need a quaternion here, it just makes things harder. Just store pitch and yaw."}, {"owner": {"reputation": 33, "user_id": 8304239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b973c0973d624f0df7139420b6c1d655?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Paukov", "link": "https://stackoverflow.com/users/8304239/nikolai-paukov"}, "edited": false, "score": 0, "creation_date": 1515600838, "post_id": 48190411, "comment_id": 83363594, "body": "But I write multifunctional class for camera. Quaternions seems easier to use. I should have abilities to combine some rotations, to make rotations around different axes and to rotate relative other scene objects..."}], "owner": {"reputation": 33, "user_id": 8304239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b973c0973d624f0df7139420b6c1d655?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolai Paukov", "link": "https://stackoverflow.com/users/8304239/nikolai-paukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1515614826, "creation_date": 1515597007, "last_edit_date": 1515614826, "question_id": 48190411, "link": "https://stackoverflow.com/questions/48190411/how-to-get-pitch-correctly-with-glm", "title": "How to get pitch correctly with GLM?", "body": "<p>I am trying to limit rotation of the camera around X axis by 90 degrees. My camera uses <code>glm::quaternion</code> to store orientation in space. For changing camera pitch angle I use the code:</p>\n\n<pre><code>m_orientation *= glm::quat(vector3(glm::radians(angle), 0.0, 0.0));\n</code></pre>\n\n<p>And later I extract pitch angle I use:</p>\n\n<pre><code>float pitchAngle = glm::degrees(glm::eulerAngles(m_orientation).x);\n</code></pre>\n\n<p>At first time this angle is correct, but when I rotate camera around world Y axis (yaw), at the certain moment pitch angle becomes wrong. For example, after yaw for 90 degrees I get the pitch angle equals to -180 degrees.</p>\n\n<p>UPD. When program starts, I initialize my <code>m_orientation</code> quaternion such way: </p>\n\n<pre><code>m_orientation = glm::quat(vector3(0.0f, 0.0f, 0.0f))\n</code></pre>\n\n<p>For yaw I use this construction:</p>\n\n<pre><code>m_orientation = glm::quat(vector3(0.0, glm::radians(angle), 0.0)) * m_orientation;\n</code></pre>\n\n<p>When I run this code:</p>\n\n<pre><code>void printAngles(quat q) {\n    vector3 angles = eulerAngles(q);\n    std::cout &lt;&lt; degrees(angles.x) &lt;&lt; \" \" &lt;&lt; degrees(angles.y) &lt;&lt; \" \" &lt;&lt; degrees(angles.z) &lt;&lt; std::endl;\n}\n...\nglm::quat q(vector3(0, 0, 0));\nprintAngles(q);\n\nq *= quat(vector3(0, glm::radians(5.0f), 0));\nprintAngles(q);\n\nq *= quat(vector3(0, glm::radians(90.0f), 0));\nprintAngles(q);\n</code></pre>\n\n<p>as a result I have in the output:</p>\n\n<pre><code>0 -0 0 // At the beginning\n0 5 0 // After 5 degrees rotation\n180 85 180 // After another 90 degrees rotation\n</code></pre>\n\n<p>Are there some way to correct this behaviour? How to get correct angle from quaternion?</p>\n"}, {"tags": ["c++", "visual-studio-code", "clang", "std", "c++17"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 3, "creation_date": 1515596637, "post_id": 48190215, "comment_id": 83360607, "body": "Show Code, get help."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1515596643, "post_id": 48190215, "comment_id": 83360609, "body": "According to <a href=\"https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance\" rel=\"nofollow noreferrer\">this page</a>, it&#39;s available in VS 2017.3."}, {"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 4, "creation_date": 1515596688, "post_id": 48190215, "comment_id": 83360638, "body": "std::invoke_result is AFAIK <a href=\"http://libcxx.llvm.org/cxx1z_status.html\" rel=\"nofollow noreferrer\">not yet implemented in clang</a>. Issue <a href=\"https://cplusplus.github.io/LWG/issue2807\" rel=\"nofollow noreferrer\">2087</a>."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515596693, "post_id": 48190215, "comment_id": 83360641, "body": "What&#39;s your code? Also, did you enabled the c++17 flag for clang?"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1515596873, "post_id": 48190215, "comment_id": 83360751, "body": "@GuillaumeRacicot That&#39;s an <code>O</code> not a <code>0</code> ;)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515596876, "post_id": 48190215, "comment_id": 83360754, "body": "@GuillaumeRacicot -- in the question, it&#39;s the <b>letter</b> O, not the <b>number</b> 0. Look carefully... &lt;g&gt;"}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1515597268, "post_id": 48190215, "comment_id": 83361020, "body": "@chris Yes, it is. I used this thing a lot while MSVS was good enough for me. But after switch it stopped working."}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1515597314, "post_id": 48190215, "comment_id": 83361057, "body": "You need to tell Clang that you want C++17 mode; pass <code>-std=c++17</code> or <code>-std=c++1z</code> on the command line."}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1515597334, "post_id": 48190215, "comment_id": 83361067, "body": "@Jaa-c bad news. Do u know, how rarely clang updates?"}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1515597411, "post_id": 48190215, "comment_id": 83361118, "body": "@Casey yes, I did. Other c++17 features, provided by MSVS compile as well."}, {"owner": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1515597663, "post_id": 48190215, "comment_id": 83361297, "body": "@Siborgium: Quite often. Use <code>std::result_of_t</code> in the meantime, the fix should be easy."}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1515597900, "post_id": 48190215, "comment_id": 83361470, "body": "@GuillaumeRacicot  For example, this variant: ``` #include&amp;amp;lt;iostream&amp;amp;gt; #include&amp;amp;lt;type_traits&amp;amp;gt; #include&amp;amp;lt;functional&amp;amp;gt;  template &amp;amp;lt;typename I, typename FTy, typename O = typename std::invoke_result_t&amp;amp;lt;std::function&amp;amp;lt;FTy&amp;amp;gt;&zwnj;&#8203;, I&amp;amp;gt;&amp;amp;gt; const O apply(I i, std::function&amp;amp;lt;FTy&amp;amp;gt; f) {     return f(i) ;}   int main() {     std::function &amp;amp;lt;int(int)&amp;amp;gt; f = [] (int x) { return x * x; } ;     return apply(5, f) ; }  ```  EDIT: posted it using mobile app, for some reasons markup broke. Sorry."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515597977, "post_id": 48190215, "comment_id": 83361536, "body": "<i>code don&#39;t matter</i> help either"}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 4795, "user_id": 683905, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7bc5b9f8f9c6f0e5d25b2d88e2cc1386?s=128&d=identicon&r=PG", "display_name": "Jaa-c", "link": "https://stackoverflow.com/users/683905/jaa-c"}, "edited": false, "score": 0, "creation_date": 1515598191, "post_id": 48190215, "comment_id": 83361692, "body": "@Jaa-c ok, thanks."}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515598211, "post_id": 48190215, "comment_id": 83361705, "body": "@AndyG it&#39;s not Visual Studio."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1515600983, "post_id": 48190215, "comment_id": 83363688, "body": "Show your command line. Clang&#39;s default is still C++98, so you have to do something special to get C++03, C++11, C++14, C++17 or C++20 (and friends). As I understand it Clang 6 uses C++14 by default. Also see <a href=\"https://bugs.llvm.org/show_bug.cgi?id=35853\" rel=\"nofollow noreferrer\">Issue 35853, Clang 4.0 still uses C++98 by default</a>."}, {"owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1515601328, "post_id": 48190215, "comment_id": 83363936, "body": "@jww {path to clang binaries}clang.exe file.cpp -std=c++17 -o app.exe"}], "answers": [{"tags": [], "owner": {"reputation": 770, "user_id": 6314639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e0926de6c943fe98f71a15dbc25905e5?s=128&d=identicon&r=PG", "display_name": "Ivan Sanz-Carasa", "link": "https://stackoverflow.com/users/6314639/ivan-sanz-carasa"}, "is_accepted": false, "score": 2, "last_activity_date": 1517519682, "last_edit_date": 1517519682, "creation_date": 1517514187, "answer_id": 48570555, "question_id": 48190215, "link": "https://stackoverflow.com/questions/48190215/namespace-std-has-no-member-stdinvoke-result-t/48570555#48570555", "title": "namespace std has no member std::invoke_result_t", "body": "<p><code>std::invoke_result</code> is part of C++17, please ensure that the compiler has the <code>-std=c++17</code> option.</p>\n\n<p>Also,</p>\n\n<pre><code>#include &lt;type_traits&gt;\n</code></pre>\n\n<p>If you are using clang or a older version of c++ consider using <code>std::result_of</code></p>\n"}], "owner": {"reputation": 136, "user_id": 8486591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e9c23a7dca2ab59e57978ee7b550ab?s=128&d=identicon&r=PG", "display_name": "Siborgium", "link": "https://stackoverflow.com/users/8486591/siborgium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1876, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1517519682, "creation_date": 1515596405, "last_edit_date": 1515600722, "question_id": 48190215, "link": "https://stackoverflow.com/questions/48190215/namespace-std-has-no-member-stdinvoke-result-t", "title": "namespace std has no member std::invoke_result_t", "body": "<p>I recently switched to VS Code from MSVS due to personal reasons, and my compiler is the latest Clang now. </p>\n\n<p>I had some troubles (for example, I can't write <code>typename O = ...</code>, now I have to write <code>typename O = typename ...</code>), but all of them are small and easy to fix. Except one.</p>\n\n<p>I don't know the reason, but compiler can't find <code>std::invoke_result_t</code> and <code>std::invoke_result&lt;&gt;::type</code>. It's disgusting a lot, especially because IntelliSense finds it easy.</p>\n\n<p>Here's error log:</p>\n\n<pre><code>{\"Workspace\" directory}/Untitled-1.cpp:5:54: error: no template named 'invoke_result_t' in namespace 'std'; did you mean '_Invoke_result_t'?\ntemplate&lt;typename I, typename FTy, typename O = std::invoke_result_t&lt;std::function&lt;FTy&gt;, I&gt;&gt;\n                                                ~~~~~^~~~~~~~~~~~~~~\n                                                     _Invoke_result_t\n{MSVS Installation directory}\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.12.25827\\include\\type_traits:1832:2: note: '_Invoke_result_t' declared here\n        using _Invoke_result_t = typename _Invoke_traits&lt;void, _Callable, _Args...&gt;::type;\n        ^\n1 error generated.\n</code></pre>\n\n<p>If I use offered <code>std::_Invoke_result_t</code> instead of normal one, everything compiles and works as it should.</p>\n\n<p>Also, every time I compile my code, that contains <code>std::cout</code>, compiler write that some locally defined symbols (_CxxThrowException and _std_terminate, to be honest) were imported to functions from .</p>\n\n<p>Is there any way to fix all these troubles? Which of them are bugs and which are features? I heard, VS C++ libraries don't accomplish to ISO standard, does it may be reason of my troubles?</p>\n"}, {"tags": ["c++", "opencv", "motion-detection"], "answers": [{"tags": [], "owner": {"reputation": 14220, "user_id": 3547485, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xGJWo.png?s=128&g=1", "display_name": "Kinght \u91d1", "link": "https://stackoverflow.com/users/3547485/kinght-%e9%87%91"}, "is_accepted": true, "score": 4, "last_activity_date": 1515598922, "last_edit_date": 1592644375, "creation_date": 1515598162, "answer_id": 48190806, "question_id": 48190192, "link": "https://stackoverflow.com/questions/48190192/detect-basic-change-in-video-using-opencv/48190806#48190806", "title": "Detect Basic Change in Video using OpenCV", "body": "<p>Some to be improved:</p>\n<ol>\n<li><p><code>firstFrame = gray</code> =&gt; <code>gray.copyTo(firstFrame)</code></p>\n<p>you define <code>firstFrame</code> and <code>gray</code> at the same line, then after do <code>firstFrame = gray</code>, they share same data memory. So every time they are the same.</p>\n</li>\n<li><p>Skip some frames.</p>\n<p>As the camera just starts, so the first frame is not that stable, you should skip some frames(like 10 frames).</p>\n</li>\n<li><p>cv::Scalar &lt;==&gt; tuple</p>\n<p>In C++:</p>\n<p><code>cv::Scalar(b,g,r) &lt;==&gt; tuple(b,g,r)</code></p>\n<p><code>(b,g,r) ==&gt; r</code></p>\n</li>\n</ol>\n<hr />\n<p>Modified code:</p>\n<pre><code>int cnt = 0;\n\nwhile(true) {\n\n    Mat frame;\n    camera.read(frame);\n    if(frame.empty()) {\n        cout &lt;&lt; &quot;frame was not captured&quot; &lt;&lt; endl;\n        return(2);\n    }\n    //pre processing\n    //resize(frame, frame, Size (1200,900));\n    cvtColor(frame, gray, COLOR_BGR2GRAY);\n    GaussianBlur(gray, gray, Size( 21, 21 ), 0, 0 );\n\n    //initrialize first frame if necessary\n    if(firstFrame.empty()) {\n        if(cnt&lt;10){\n            ++cnt;\n        }else{\n            cout &lt;&lt; &quot;hit&quot; &lt;&lt; endl;\n            gray.copyTo(firstFrame);\n        }\n        continue;\n    }\n\n    // ...\n\n    ///  cv::Scalar(b,g,r) &lt;==&gt; tuple(b,g,r)\n    ///  (b,g,r) ==&gt; r\n    rectangle( frame, boundRect.tl(), boundRect.br(), Scalar(0,255,0), 1, 8, 0 );\n\n    // ...\n\n\n}\n</code></pre>\n<hr />\n<p><a href=\"https://i.stack.imgur.com/nTCQy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nTCQy.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 702, "user_id": 5956151, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/36cbd9873a8a5ca327f20f95974e5f75?s=128&d=identicon&r=PG&f=1", "display_name": "C.Radford", "link": "https://stackoverflow.com/users/5956151/c-radford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2200, "favorite_count": 0, "accepted_answer_id": 48190806, "answer_count": 1, "score": 0, "last_activity_date": 1515632822, "creation_date": 1515596331, "last_edit_date": 1515632822, "question_id": 48190192, "link": "https://stackoverflow.com/questions/48190192/detect-basic-change-in-video-using-opencv", "title": "Detect Basic Change in Video using OpenCV", "body": "<p>Trying to recreate a basic change detection program I got from a great blog done by Adrian Rosebrock (if looking to get into python and OpenCV go here). The code was designed in python and I am trying to convert it to C++. You can find the blog post <a href=\"https://www.pyimagesearch.com/2015/05/25/basic-motion-detection-and-tracking-with-python-and-opencv/\" rel=\"nofollow noreferrer\">here</a>. My struggle is with the <code>absdiff(firsFrame, gray, imageDifference)</code> as every iteration of the loop has firstFrame and gray being equal. I think the problem is either where I initialize <code>firstFrame = gray</code> but I did a <code>cout</code> check to see how many times it is hit so not sure. Here is code:</p>\n\n<pre><code>int min_area = 500; //min area of motion detectable\n\n//get camera operational and make sure working correctly\nVideoCapture camera(0);\nif(!camera.isOpened()){\n    cout &lt;&lt; \"cannot open camera\" &lt;&lt; endl;\n    return(1);\n}\n\nMat firstFrame, gray, imageDifference, thresh;\nvector&lt;vector&lt;Point&gt; &gt; contours;\nvector&lt;Vec4i&gt; hierarchy;\n\n\nwhile(true){\n    Mat frame;\n    camera.read(frame);\n    if(frame.empty()){\n        cout &lt;&lt; \"frame was not captured\" &lt;&lt; endl;\n        return(2);\n    }\n    //pre processing\n    //resize(frame, frame, Size (1200,900));\n    cvtColor(frame, gray, COLOR_BGR2GRAY);\n    GaussianBlur(gray, gray, Size( 21, 21 ), 0, 0 );\n\n    //initrialize first frame if necessary\n    if(firstFrame.empty()){\n        cout &lt;&lt; \"hit\" &lt;&lt; endl;\n        firstFrame = gray;\n        continue;\n    }\n\n    //get difference\n    absdiff(firstFrame, gray, imageDifference);\n    threshold(imageDifference, thresh, 25, 255, THRESH_BINARY);\n    //fill in holes\n    dilate(thresh, thresh, Mat(), Point(-1, -1), 2, 1, 1);\n    findContours(thresh, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);\n\n    //loop over contours\n    for(int i = 0; i &lt; contours.size(); i++){\n        //get the boundboxes and save the ROI as an Image\n        if (contourArea(contours[i]) &lt; min_area){\n            continue;\n        }\n        Rect boundRect = boundingRect( Mat(contours[i]));\n        rectangle( frame, boundRect.tl(), boundRect.br(), (0,255,0), 1, 8, 0 );\n\n    }\n    //draw everything\n    imshow(\"Security feed\", frame);\n    imshow(\"Thresh\", thresh);\n    imshow(\"Difference\", imageDifference);\n    if (waitKey(30) &gt;= 0)\n        break;\n}\n\ncamera.release();\ndestroyAllWindows();\nreturn(0);\n</code></pre>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1515596361, "post_id": 48190070, "comment_id": 83360410, "body": "Read up on <i>function pointers</i> in your favorite C++ reference."}], "answers": [{"comments": [{"owner": {"reputation": 1476, "user_id": 2468620, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fqwBK.jpg?s=128&g=1", "display_name": "Jardo", "link": "https://stackoverflow.com/users/2468620/jardo"}, "edited": false, "score": 0, "creation_date": 1515599684, "post_id": 48190204, "comment_id": 83362791, "body": "Thanks! I edited your answer to add a header file for the used functions (which wasn&#39;t obvious from the example) and also to fix a minor copy-paste error."}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": true, "score": 3, "last_activity_date": 1515599985, "last_edit_date": 1515599985, "creation_date": 1515596359, "answer_id": 48190204, "question_id": 48190070, "link": "https://stackoverflow.com/questions/48190070/c-calling-dll-functions/48190204#48190204", "title": "C++ calling DLL functions", "body": "<p>What you see is pointer to function.\nI guess the DLL meant to be loaded at run time (like a plug-in) using <code>LoadLibrary</code> and <code>GetProcAddress</code> Win APIs, instead of link with it like regular dll.</p>\n\n<pre><code>#include &lt;windows.h&gt;\n\nlpInitLib pInitLib = NULL;\n//you need to load the DLL  \nHINSTANCE dllHandle = LoadLibrary(\"yourdll.dll\");\nif (NULL != dllHandle) \n{  \n  pInitLib = (lpInitLib)GetProcAddress(dllHandle, \"InitLib\");\n}\nif(pInitLib != NULL ) \n    pInitLib ();\n</code></pre>\n\n<p>check the following full sample: <a href=\"https://msdn.microsoft.com/en-us/library/ms810279.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/ms810279.aspx</a></p>\n\n<p>As a matter of fact, <strong>if you know the function prototypes</strong>, <strong>and have the .lib file</strong>, you can create your own header file and link with the DLL instead of load it at runtime.</p>\n\n<p>Then, I guess, your header should look similar to this:</p>\n\n<pre><code>#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n__declspec(dllimport) int __stdcall InitLib();\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n"}], "owner": {"reputation": 1476, "user_id": 2468620, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/fqwBK.jpg?s=128&g=1", "display_name": "Jardo", "link": "https://stackoverflow.com/users/2468620/jardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 48190204, "answer_count": 1, "score": 2, "last_activity_date": 1515599985, "creation_date": 1515595973, "question_id": 48190070, "link": "https://stackoverflow.com/questions/48190070/c-calling-dll-functions", "title": "C++ calling DLL functions", "body": "<p>I have a DLL which I need to call from a C++ program. I received a header file but it contains definitions of the functions in a weird format and I'm not sure how to call them.</p>\n\n<p>For instance, the documentation says the DLL should contain this function:</p>\n\n<pre><code>int InitLib();\n</code></pre>\n\n<p>... but the header file only contains this definition:</p>\n\n<pre><code>typedef int (__stdcall *lpInitLib)();\n</code></pre>\n\n<p>The same thing applies to all of the functions. How can I call them?</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "boost", "inner-classes"], "comments": [{"owner": {"reputation": 31, "user_id": 5520353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2cc647aed14c863207b6e7abf64078?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/5520353/jack"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1515596462, "post_id": 48190048, "comment_id": 83360488, "body": "I was checking out the same answer right now, I believe this clarify my doubt. Thanks!"}], "owner": {"reputation": 31, "user_id": 5520353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef2cc647aed14c863207b6e7abf64078?s=128&d=identicon&r=PG&f=1", "display_name": "jack", "link": "https://stackoverflow.com/users/5520353/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1515599640, "answer_count": 0, "score": 1, "last_activity_date": 1515595929, "creation_date": 1515595929, "question_id": 48190048, "link": "https://stackoverflow.com/questions/48190048/access-to-protected-base-enclosing-class-from-derived-nested-class", "closed_reason": "Duplicate", "title": "Access to protected base enclosing class from derived nested class", "body": "<p>From various sources (<a href=\"https://stackoverflow.com/questions/3537969/nested-classes-access-to-protected-member-of-enclosing-class-from-a-nested-prot\">here</a>, for example) I'm aware nested classes should be able to see all members of enclosing class, according to C++11 standard.</p>\n\n<p>Nonetheless, I came across the following class hierarchy which DOES NOT compile with Clang.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass BaseEnclosing\n{\n  public :\n    BaseEnclosing(double bar) { m_parameters.push_back(bar); }\n    virtual void DoSomething() = 0;\n    virtual ~BaseEnclosing() {}\n\n  protected :\n    std::vector&lt;double&gt; m_parameters;\n\n    template&lt;class T&gt;\n    class BaseNested\n    {\n      public :\n        BaseNested(BaseEnclosing * baseEncPtr) : m_baseEncPtr(baseEncPtr) {}\n        virtual void operator()(T param) const = 0;\n\n        virtual ~BaseNested() {}\n\n      protected:\n        BaseEnclosing * m_baseEncPtr;\n    };\n};\n\nclass DerivedEnclosing : public BaseEnclosing\n{\n  public :\n    DerivedEnclosing(double bar) : BaseEnclosing(bar) {}\n    void DoSomething()\n    {\n      // call some library functions which use the functor of DerivedNested and pass DerivedNested(this)\n    }\n    virtual ~DerivedEnclosing() {}\n\n  protected :\n    class DerivedNested : public BaseNested&lt;std::vector&lt;double&gt;&gt;\n    {\n      public :\n        DerivedNested(BaseEnclosing * baseEncPtr) : BaseNested(baseEncPtr) {}\n\n        void operator()(std::vector&lt;double&gt; myContainer) const override\n        {\n          //error: 'm_parameters' is a protected member of 'BaseEnclosing'\n          //can only access this member on an object of type 'DerivedEnclosing'\n          double retrieved_bar = m_baseEncPtr-&gt;m_parameters.back(); //              &lt;---------- ERROR\n\n          // do something with myContainer and retrieved_bar\n        }\n\n        virtual ~DerivedNested() {}\n      };\n};\n\nint main()\n{\n  DerivedEnclosing test (42.5);\n  test.DoSomething();\n\n  return 0;\n}\n</code></pre>\n\n<p>From what I understand, <code>DerivedEnclosing</code> should inherit <code>m_parameters</code> and thus I would expect <code>DerivedNested</code>'s methods to see it. </p>\n\n<p>To better understand my intent, I'm trying to use Boost Odeint, which requires a right hand side of the equation specified as either function pointer of functor. I decided to go with the second option in <code>DoSomething()</code>.</p>\n\n<p>My design needs <code>BaseEnclosing</code> and <code>DerivedEnclosing</code> for other purposes, the nested classes are not exactly needed but sounded like a good way to go.</p>\n"}, {"tags": ["c++", "c++17", "undefined-behavior", "sequence-points"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1515596441, "post_id": 48190036, "comment_id": 83360471, "body": "New answers (or updates to existing answers) can be posted there, no need to duplicate."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1515596532, "post_id": 48190036, "comment_id": 83360535, "body": "This is not a duplicate, I do not think I can technically encourage people to answer old questions."}, {"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1515596638, "post_id": 48190036, "comment_id": 83360608, "body": "Why? We need that info in one place, and that question is fine for that. It already has some info on C++17."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 0, "creation_date": 1515596759, "post_id": 48190036, "comment_id": 83360670, "body": "Why what? Why I cannot encourage? How? I post comment on the old question saying hey somebody summarize what&#39;s new in C++17? And I think this big enough and important to have question of it&#39;s own"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1515596771, "post_id": 48190036, "comment_id": 83360680, "body": "The concept of a &quot;sequence point&quot; was last seen in C++03; it doesn&#39;t exist since C++11."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1515596836, "post_id": 48190036, "comment_id": 83360709, "body": "@IgorTandetnik is there a new term that I can use instead of &quot;sequenced before&quot;?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1515597059, "post_id": 48190036, "comment_id": 83360853, "body": "@Slava: Things like this is what bounties are for."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1515597107, "post_id": 48190036, "comment_id": 83360881, "body": "@NicolBolas my bounty will not express that I want to cover specific topic"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1515597120, "post_id": 48190036, "comment_id": 83360889, "body": "Sequenced-before relationship. C++17 made the order of evaluation of subexpressions deterministic in certain limited cases, where they were unsequenced before; see <a href=\"http://en.cppreference.com/w/cpp/language/eval_order\" rel=\"nofollow noreferrer\">here</a> the parts marked &quot;since C++17&quot;. That&#39;s the only change I know of related to order of evaluation."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1515597133, "post_id": 48190036, "comment_id": 83360906, "body": "@Slava: Yes, it can. All you have to do is say, &quot;I&#39;m looking for C++17 information.&quot; Bounties have a text box where you can type what you&#39;re looking for."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1515597211, "post_id": 48190036, "comment_id": 83360967, "body": "@NicolBolas I do not quite understand why covering new C++17 features in special question is fine (it can be covered in old question as well) but this one is not. What is the difference?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1515597300, "post_id": 48190036, "comment_id": 83361044, "body": "@Slava: Because your question is the <i>exact same question</i> as the sequence point one, except with &quot;for C++17&quot; tacked onto the end. Most questions covering C++17 features aren&#39;t exactly identical to other questions."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1515597405, "post_id": 48190036, "comment_id": 83361112, "body": "@NicolBolas question - &quot; What are the new features in C++17&quot; what is different in this question except with &quot;C++17&quot;  tacked onto the end?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1515597599, "post_id": 48190036, "comment_id": 83361248, "body": "I&#39;m voting to close this question as off-topic because it belongs on meta."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1515597912, "post_id": 48190036, "comment_id": 83361482, "body": "@NicolBolas here is another reason - old questions with C++17 information based on coming standard and on ongoing discussion (maybe inaccurate and outdated). Determine if it is requires additional reader attention and not simple due to complexity of the topic. Here answers clearly should be based on actual standard."}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515596899, "creation_date": 1515595888, "last_edit_date": 1515596899, "question_id": 48190036, "link": "https://stackoverflow.com/questions/48190036/undefined-behavior-and-sequence-points-in-c17", "title": "Undefined behavior and &quot;sequence points&quot; in C++17", "body": "<p>We have this question very well answered <a href=\"https://stackoverflow.com/questions/38060436/what-are-the-new-features-in-c17\">What are the new features in C++17?</a></p>\n\n<p>But I think this particular topic can be covered specially as it is complicated and such questions (about <code>i = i++;</code>) still asked every day (though it is discouraged to do so by rules) so question is:  what changed in C++17 related to \"sequence points\" (better name for this term?) and which particular expressions became valid in the new standard? </p>\n\n<p>There is some information here <a href=\"https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points\">Undefined behavior and sequence points</a> but answer there was written before C++17 became new standard.</p>\n"}, {"tags": ["c++", "visual-studio", "visual-c++", "capl", "canalyzer"], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 6189685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35125fece4c87f154d9ca95f3c81f2d1?s=128&d=identicon&r=PG&f=1", "display_name": "An Other", "link": "https://stackoverflow.com/users/6189685/an-other"}, "is_accepted": false, "score": 0, "last_activity_date": 1515761654, "creation_date": 1515761654, "answer_id": 48226706, "question_id": 48189967, "link": "https://stackoverflow.com/questions/48189967/using-canalyzer-libraries-in-microsoft-visual-studios/48226706#48226706", "title": "using CANalyzer libraries in Microsoft visual studios", "body": "<p>the <a href=\"https://kb.vector.com/\" rel=\"nofollow noreferrer\">Vector knowledgebase</a> is online</p>\n\n<p>Think the best way to start is to open <em>CANalyzer Sample Configurations</em> Folder in My Documents and to find a lot of samples for specific aspects. </p>\n\n<p>There is also lot of information on CANalyzer help-pages, for example in:</p>\n\n<pre><code>.NET Programming \u00bb Notes for Advanced Users\n</code></pre>\n\n<p>you can find the reference to which assemblies do you need</p>\n\n<p>If you have a specific problem please provide more information: what you trying to do, what is your expectation and what is going wrong.</p>\n"}, {"tags": [], "owner": {"reputation": 144, "user_id": 5682035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7837f4759fc455ccaab1e048fe9b73d6?s=128&d=identicon&r=PG&f=1", "display_name": "PiranhA", "link": "https://stackoverflow.com/users/5682035/piranha"}, "is_accepted": false, "score": 0, "last_activity_date": 1516973468, "creation_date": 1516973468, "answer_id": 48462332, "question_id": 48189967, "link": "https://stackoverflow.com/questions/48189967/using-canalyzer-libraries-in-microsoft-visual-studios/48462332#48462332", "title": "using CANalyzer libraries in Microsoft visual studios", "body": "<p>I don't think that is possible with CANalyzer. You will need CANoe for this.\nTake a look at the <a href=\"https://vector.com/portal/medien/cmc/datasheets/CANoe_CANalyzer_FeatureMatrix_DataSheet_EN.pdf\" rel=\"nofollow noreferrer\">feature matrix</a>. On side 6 it says that .net is only available in CANoe. Additionally I think that calls from .net to CAPL are only available for test modules and test units.</p>\n"}], "owner": {"reputation": 1, "user_id": 8916621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e913321860a32f020c5357f577d98628?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Truby", "link": "https://stackoverflow.com/users/8916621/kyle-truby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 481, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516973468, "creation_date": 1515595708, "question_id": 48189967, "link": "https://stackoverflow.com/questions/48189967/using-canalyzer-libraries-in-microsoft-visual-studios", "title": "using CANalyzer libraries in Microsoft visual studios", "body": "<p>I'm trying to use CAPL/CANalyzer functions in visual studio. I found some information on how to implement it in the CAPL help menu, but when i try I can't seem to get it to work. Is there any online resource on how to do this?</p>\n"}, {"tags": ["c++", "c++-concepts", "c++20"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1515595093, "post_id": 48189572, "comment_id": 83359536, "body": "First I got hyped and wanted to use the CRTP, but then I remembered <code>MyContainer</code> would be incomplete, and so the concept check would likely fail. So I don&#39;t see a better way."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1515595759, "post_id": 48189572, "comment_id": 83359982, "body": "@StoryTeller I tried FWD declaration and static assert before class MyContainer, but then it just silently fails... Could be same underlying problem."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 3, "creation_date": 1515779309, "post_id": 48189572, "comment_id": 83445255, "body": "Why is <code>static_assert</code> not an appropriate way to test this? It seems very clear to me what needs to be checked. And the entirety of a class&#39;s conceptual interface is not bound by its definition, so there&#39;s no reason to expect such checks to be part of the definition."}], "answers": [{"tags": [], "owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "is_accepted": true, "score": 5, "last_activity_date": 1517260744, "last_edit_date": 1517260744, "creation_date": 1515595646, "answer_id": 48189943, "question_id": 48189572, "link": "https://stackoverflow.com/questions/48189572/do-c-concepts-allow-for-my-class-at-declaration-definition-to-specify-it-satis/48189943#48189943", "title": "Do C++ Concepts allow for my class at declaration/definition to specify it satisfies certain concept?", "body": "<p>Currently no, the keyword you would be looking for to do that would be <code>requires</code> \nFrom <a href=\"http://en.cppreference.com/w/cpp/language/constraints\" rel=\"nofollow noreferrer\">cppreference</a> </p>\n\n<blockquote>\n  <p>The keyword <code>requires</code> is used in two ways: 1) To introduce a\n  requires-clause, which specifies constraints on template arguments or\n  on a function declaration.</p>\n</blockquote>\n\n<p>Since you are not dealing with a function declaration, this is irrelevant. \nThe second case is</p>\n\n<blockquote>\n  <p>To begin a requires-expression, which is a prvalue expression of type\n  bool that describes the constraints on some template arguments. Such\n  expression is true if the corresponding concept is satisfied, and\n  false otherwise:</p>\n</blockquote>\n\n<p>Which is not relevent here again because you are not trying to validate a constraint on some template arguments</p>\n"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 2, "accepted_answer_id": 48189943, "answer_count": 1, "score": 11, "last_activity_date": 1517260744, "creation_date": 1515594373, "question_id": 48189572, "link": "https://stackoverflow.com/questions/48189572/do-c-concepts-allow-for-my-class-at-declaration-definition-to-specify-it-satis", "title": "Do C++ Concepts allow for my class at declaration/definition to specify it satisfies certain concept?", "body": "<p>Currently best way I can think of is to use static_assert, but I would prefer nicer way.</p>\n\n<pre><code>#include &lt;set&gt;\n#include &lt;forward_list&gt;\n\nusing namespace std;\n\ntemplate&lt;typename C&gt;\nconcept bool SizedContainer = requires (C c){\n    c.begin();\n    c.end();\n    {c.size()} -&gt; size_t;\n};\n\nstatic_assert(SizedContainer&lt;std::set&lt;int&gt;&gt;);\nstatic_assert(!SizedContainer&lt;std::forward_list&lt;int&gt;&gt;);\nstatic_assert(!SizedContainer&lt;float&gt;);\n\nclass MyContainer{\npublic:\n    void begin(){};\n    void end(){};\n    size_t size(){return 42;}; \n};\n\nstatic_assert(SizedContainer&lt;MyContainer&gt;);\n\n\n\nint main()\n{\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "iterator"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 4, "creation_date": 1515593708, "post_id": 48189327, "comment_id": 83358512, "body": "<code>data_set.end()</code> is &quot;one past the end&quot;. It will be entered."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 7, "creation_date": 1515593715, "post_id": 48189327, "comment_id": 83358522, "body": "You are mistaken <code>data_set.begin()==data_set.end()</code> only for empty set, period"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1515593750, "post_id": 48189327, "comment_id": 83358546, "body": "This is supposed to work as is. Please make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> on for example <a href=\"http://coliru.stacked-crooked.com/\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com</a> to show the error."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1515593832, "post_id": 48189327, "comment_id": 83358608, "body": "Because the above comments are true, the condition of your loop works for any set including the empty one. You don&#39;t need special handling for those cases."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1515593847, "post_id": 48189327, "comment_id": 83358622, "body": "<i>will never be entered</i> -- Why didn&#39;t you write a small test?  You will see it is entered."}, {"owner": {"reputation": 21, "user_id": 6025340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8383baa8293f778a7a2274e20b0feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "\uc790\uc2a4\ubbfc", "link": "https://stackoverflow.com/users/6025340/%ec%9e%90%ec%8a%a4%eb%af%bc"}, "edited": false, "score": 0, "creation_date": 1515593914, "post_id": 48189327, "comment_id": 83358670, "body": "I though it wouldn&#39;t be entered, I&#39;ve never used iterators before! Thank you for your comments. I&#39;ll read a little more on this."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1515594002, "post_id": 48189327, "comment_id": 83358734, "body": "Strange thought, you really think everybody specially handle container of size 1? Huh"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1515594212, "post_id": 48189327, "comment_id": 83358876, "body": "btw your logic is flawed. If your assumption was correct, then for any size one element would be skipped, there is no reason why a set with a single element would be special with respect to where <code>end()</code> and <code>begin()</code> point"}, {"owner": {"reputation": 21, "user_id": 6025340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8383baa8293f778a7a2274e20b0feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "\uc790\uc2a4\ubbfc", "link": "https://stackoverflow.com/users/6025340/%ec%9e%90%ec%8a%a4%eb%af%bc"}, "edited": false, "score": 0, "creation_date": 1515594432, "post_id": 48189327, "comment_id": 83359024, "body": "It&#39;s not that, I thought it may use something different from &quot;!=&quot;. never mind."}, {"owner": {"reputation": 21, "user_id": 6025340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8383baa8293f778a7a2274e20b0feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "\uc790\uc2a4\ubbfc", "link": "https://stackoverflow.com/users/6025340/%ec%9e%90%ec%8a%a4%eb%af%bc"}, "edited": false, "score": 0, "creation_date": 1515594521, "post_id": 48189327, "comment_id": 83359090, "body": "Sorry for asking this strange and not well thought out question!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1515594589, "post_id": 48189327, "comment_id": 83359147, "body": "There is nothing to be sorry about, there are much worse questions asked, you at least work on your code and then ask"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1515594591, "post_id": 48189327, "comment_id": 83359151, "body": "dont worry. We all started somewhere. Btw it is not what you are asking about that can be critized, but how. If you created a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> you maybe would have realized your misunderstanding by yourself ... and if not it would be much easier to resolve it with an answer"}, {"owner": {"reputation": 15169, "user_id": 368599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/66980d1eac668f75552936922491cd82?s=128&d=identicon&r=PG", "display_name": "Samaursa", "link": "https://stackoverflow.com/users/368599/samaursa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515594755, "post_id": 48189327, "comment_id": 83359267, "body": "@Slava even experienced programmers coming to C++ have a hard time with <code>end</code> being <i>1 past the last element</i>. I am not surprised that this question is asked from time to time. It is a strange concept when coming from most other languages.  @\uc790\uc2a4\ubbfc You&#39;ll want to take a look here: <a href=\"https://stackoverflow.com/a/15252207/368599\">stackoverflow.com/a/15252207/368599</a>"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 15169, "user_id": 368599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/66980d1eac668f75552936922491cd82?s=128&d=identicon&r=PG", "display_name": "Samaursa", "link": "https://stackoverflow.com/users/368599/samaursa"}, "edited": false, "score": 0, "creation_date": 1515594868, "post_id": 48189327, "comment_id": 83359363, "body": "@Samaursa how else would you define range?"}, {"owner": {"reputation": 15169, "user_id": 368599, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/66980d1eac668f75552936922491cd82?s=128&d=identicon&r=PG", "display_name": "Samaursa", "link": "https://stackoverflow.com/users/368599/samaursa"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515595918, "post_id": 48189327, "comment_id": 83360082, "body": "@Slava Not arguing that at all. I understand the reasoning behind it. Generally new programmers or programmers not used to STL style iterators, are used to writing <code>index &lt; size</code> in the loop condition, which is not the STL way of using iterators."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6025340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8383baa8293f778a7a2274e20b0feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "\uc790\uc2a4\ubbfc", "link": "https://stackoverflow.com/users/6025340/%ec%9e%90%ec%8a%a4%eb%af%bc"}, "edited": false, "score": 0, "creation_date": 1515594797, "post_id": 48189399, "comment_id": 83359303, "body": "OK. Thanks for your answer."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1515594872, "post_id": 48189399, "comment_id": 83359366, "body": "Is it valid to call <code>std::next</code> on an iterator that&#39;s already at the container&#39;s end?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1515595524, "post_id": 48189399, "comment_id": 83359823, "body": "@GoverNator -- no, the behavior is undefined. The example you link to is wrong."}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1515595894, "post_id": 48189399, "comment_id": 83360066, "body": "@PeteBecker i agree that it&#39;s strange, but what&#39;s wrong with example? It works not like UB."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1515596236, "post_id": 48189399, "comment_id": 83360325, "body": "@GoverNator -- it dereferences the container&#39;s past-the-end iterator. With two elements in the container, <code>std::next(s.begin(),2)</code> gives you the past-the-end iterator. You aren&#39;t allowed to dereference it or increment it."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515596540, "post_id": 48189399, "comment_id": 83360540, "body": "@GoverNator: No, the standard doesn&#39;t say anything about <code>std::next</code> needed to be circular. In fact, the standard says that it&#39;s equivalent to calling <code>std:;advance</code> which specifies that if you increment past the end iterator you enter undefined behavior territory."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515596618, "post_id": 48189399, "comment_id": 83360595, "body": "@GoverNator: And just because &quot;it works&quot; does not mean it is guaranteed to work on all standard-conforming implementations."}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 0, "creation_date": 1515596660, "post_id": 48189399, "comment_id": 83360618, "body": "Ok, agree with both commentators. It&#39;s UB. Looked through StlPort implementation as for example. Dislike for cpp shell(("}], "tags": [], "owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "is_accepted": false, "score": 0, "last_activity_date": 1515594660, "last_edit_date": 1515594660, "creation_date": 1515593817, "answer_id": 48189399, "question_id": 48189327, "link": "https://stackoverflow.com/questions/48189327/using-c-iterator-on-a-set-of-one-only-element/48189399#48189399", "title": "Using C++ Iterator on a set of one only element", "body": "<p>If the set contains only 1 element, then:\n<code>std::next( data_set.begin() ) == data_set.end()</code>, because <code>begin()</code> iterator points at first element of the container, and <code>end()</code> points to the element that is next after the last one.</p>\n"}], "owner": {"reputation": 21, "user_id": 6025340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8383baa8293f778a7a2274e20b0feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "\uc790\uc2a4\ubbfc", "link": "https://stackoverflow.com/users/6025340/%ec%9e%90%ec%8a%a4%eb%af%bc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 342, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515594660, "creation_date": 1515593590, "question_id": 48189327, "link": "https://stackoverflow.com/questions/48189327/using-c-iterator-on-a-set-of-one-only-element", "title": "Using C++ Iterator on a set of one only element", "body": "<p>I'm working with iterators on a set of elements of size greater that three almost all the time, but it happens that the generated set contains only one element, in this case, the following loop:</p>\n\n<pre><code>for(i = data_set.begin(); i != data_set.end(); i++)\n{\n//do something with the data\n}\n</code></pre>\n\n<p>will never be entered even though <code>\"data_set\"</code> is not empty because <code>data_set.begin()==data_set.end()</code>\nI'm doing a test to handle this particular case alone but the code is turning to a mess and is no longer clean.</p>\n\n<p>What should be done to handle this properly? </p>\n\n<p>Thanks,</p>\n\n<p>\uc790\uc2a4\ubbfc </p>\n"}, {"tags": ["android", "c++", "qt", "android-sdk-tools", "qt5.10"], "comments": [{"owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 1, "creation_date": 1515710971, "post_id": 48189272, "comment_id": 83416077, "body": "In your Android SDK manager under &quot;SDK Platforms&quot; do you have API level 25 installed? it seems not, try install it first. and as you show the &quot;Android SDK platform tools&quot; is 27 not 26."}, {"owner": {"reputation": 2225, "user_id": 580908, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16becb4d846f0036238eec17ab34c37?s=128&d=identicon&r=PG", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/580908/swapnil"}, "reply_to_user": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "edited": false, "score": 0, "creation_date": 1516093348, "post_id": 48189272, "comment_id": 83538214, "body": "@MohammadKanan thanks for help,  yes &#39;API Level 25&#39; is already installed, please check updated screen shots for more information. Still i am getting above issue."}], "answers": [{"comments": [{"owner": {"reputation": 1501, "user_id": 3537339, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001674253388/picture?type=large", "display_name": "Bruno Ferreira", "link": "https://stackoverflow.com/users/3537339/bruno-ferreira"}, "edited": false, "score": 2, "creation_date": 1516422876, "post_id": 48236020, "comment_id": 83691988, "body": "I had similar issues with Qt 5.9 and Creator 4.4. Installing JDK 8 solved them."}, {"owner": {"reputation": 1463, "user_id": 7698247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/680de26e4bc7d1010adf8afe18fe2085?s=128&d=identicon&r=PG&f=1", "display_name": "Nimish Bansal", "link": "https://stackoverflow.com/users/7698247/nimish-bansal"}, "edited": false, "score": 0, "creation_date": 1516560487, "post_id": 48236020, "comment_id": 83727539, "body": "is there any way pyqt can be used instead of qt for developing android applications?I heard about pyside,but wasn&#39;t able to link with android"}, {"owner": {"reputation": 301, "user_id": 9210921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/516fe4f1f847afc1bf8aee1a64457c24?s=128&d=identicon&r=PG&f=1", "display_name": "Vesafary", "link": "https://stackoverflow.com/users/9210921/vesafary"}, "reply_to_user": {"reputation": 1463, "user_id": 7698247, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/680de26e4bc7d1010adf8afe18fe2085?s=128&d=identicon&r=PG&f=1", "display_name": "Nimish Bansal", "link": "https://stackoverflow.com/users/7698247/nimish-bansal"}, "edited": false, "score": 0, "creation_date": 1516643553, "post_id": 48236020, "comment_id": 83762456, "body": "@NimishBansal I&#39;m going to let someone else answer that, I&#39;ve got no experience whatsoever with pyqt."}, {"owner": {"reputation": 583, "user_id": 786609, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/b38b4039aa4049dca3524f41a3c3f92b?s=128&d=identicon&r=PG", "display_name": "NeonMan", "link": "https://stackoverflow.com/users/786609/neonman"}, "edited": false, "score": 0, "creation_date": 1519215096, "post_id": 48236020, "comment_id": 84816788, "body": "Had the exact same issue, this solution just works. Thanks!"}, {"owner": {"reputation": 181, "user_id": 4228144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rkeyt.png?s=128&g=1", "display_name": "Peter Ha", "link": "https://stackoverflow.com/users/4228144/peter-ha"}, "edited": false, "score": 0, "creation_date": 1542124797, "post_id": 48236020, "comment_id": 93451703, "body": "Worked for me for Qt Creator 4.7.1"}, {"owner": {"reputation": 245, "user_id": 2229241, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/244f6f523a25d694c488dc68cfcc5e6b?s=128&d=identicon&r=PG", "display_name": "Moohasha", "link": "https://stackoverflow.com/users/2229241/moohasha"}, "edited": false, "score": 0, "creation_date": 1547528756, "post_id": 48236020, "comment_id": 95213436, "body": "Just installed Qt 5.12 and Android SDK API 28 (Pie) and had the same problem.  Installing JDK 8 fixed it.  I think this should be accepted as the answer by now."}, {"owner": {"reputation": 171, "user_id": 1462891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d91f9cbca8215c250ff927841eeef86e?s=128&d=identicon&r=PG", "display_name": "Andy Turfer", "link": "https://stackoverflow.com/users/1462891/andy-turfer"}, "edited": false, "score": 0, "creation_date": 1555102329, "post_id": 48236020, "comment_id": 98007034, "body": "Thank you! Moving back to Java 8 SE worked for me on Kubuntu 19.04 (beta)."}], "tags": [], "owner": {"reputation": 301, "user_id": 9210921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/516fe4f1f847afc1bf8aee1a64457c24?s=128&d=identicon&r=PG&f=1", "display_name": "Vesafary", "link": "https://stackoverflow.com/users/9210921/vesafary"}, "is_accepted": false, "score": 30, "last_activity_date": 1515805553, "creation_date": 1515805553, "answer_id": 48236020, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/48236020#48236020", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>I just found this <a href=\"https://bugreports.qt.io/browse/QTCREATORBUG-18978\" rel=\"noreferrer\">bugreport</a>, where in the comments can be found </p>\n\n<blockquote>\n  <p>The native 'sdkmanager' tool can not update packages on windows and it fails with JDK 9 and these issues cascades to Qt Creator also.</p>\n</blockquote>\n\n<p>I just tried installing JDK 8 and changing the path, and after reopening the settings menu it had worked!</p>\n"}, {"tags": [], "owner": {"reputation": 3876, "user_id": 7478455, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VP5WO.jpg?s=128&g=1", "display_name": "Mohammad Kanan", "link": "https://stackoverflow.com/users/7478455/mohammad-kanan"}, "is_accepted": false, "score": 9, "last_activity_date": 1516403110, "last_edit_date": 1516403110, "creation_date": 1516389965, "answer_id": 48348201, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/48348201#48348201", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>I am using the answer box to show you how it works for me, one last comment: I don't install NDK 16 .. try remove it from Android manager; while (For Qt) install seperately NDK 10e (this was a Qt recommendation already).\n<a href=\"https://i.stack.imgur.com/lqfYG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lqfYG.png\" alt=\"enter image description here\"></a></p>\n\n<p>And Qt configuration side: \n<a href=\"https://i.stack.imgur.com/ijjQj.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ijjQj.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/QMa2C.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QMa2C.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 4958693, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/10205474408433969/picture?type=large", "display_name": "Dennis Beier", "link": "https://stackoverflow.com/users/4958693/dennis-beier"}, "edited": false, "score": 0, "creation_date": 1524675267, "post_id": 48971653, "comment_id": 87071292, "body": "In our SDK Folder is a binary: Sdk/tools/bin/sdkmanager. This does not seem to work with java 9 or greater and qtcreator uses this to detect the platform sdk. Due to sloppy writing it does not discriminate between there is no sdk installed and the sdkmanager is broken."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1539682037, "post_id": 48971653, "comment_id": 92580616, "body": "So, there is probably no solution for somebody who has to work with given versions of QtCreator and the JDK? Have the same problem, but without the option of switching those out."}], "tags": [], "owner": {"reputation": 2225, "user_id": 580908, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16becb4d846f0036238eec17ab34c37?s=128&d=identicon&r=PG", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/580908/swapnil"}, "is_accepted": true, "score": 10, "last_activity_date": 1519547070, "creation_date": 1519547070, "answer_id": 48971653, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/48971653#48971653", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>After lot of effort I am able to fix this issue, thanks to Mohammad Kanan, Vesafary who's answer made me get closer to Answer, Actual issue resolved with the following steps. It may be helpful who are facing the same issue In Ubuntu or may work on other platforms as well.</p>\n\n<ol>\n<li>First Step is (as most of the answers suggest) changed from JDK 9 to JDK 8. I am using Java version <strong>\"1.8.0_152\"</strong>.</li>\n<li>Step 1 didn't help me (Qt creator Persist some Settings), so i removed complete Qt 5.8,5.9,5.10 installation (Using <strong>Qt Maintainace tool</strong>) and following 2 links \n<a href=\"https://askubuntu.com/questions/257822/how-can-i-uninstall-qt5-that-i-installed-from-run\">Uninstall Qt Completely</a>, <a href=\"http://installion.co.uk/ubuntu/xenial/universe/q/qtcreator/uninstall/index.html\" rel=\"noreferrer\">Uninstall Qt Creator</a>.</li>\n</ol>\n\n<p>and did Instalation again. May be your problem get resolved at this step.</p>\n\n<ol start=\"3\">\n<li><p>Step 2 also didn't help in my case, QT Creator still persist few settings and need to reset Qt creator settings. That can be done by deleting data in this folder</p>\n\n<p>~/.config/QtProject ~/.config/Qt  file ~/.config/QtProject.conf</p></li>\n</ol>\n\n<p>path may be different in different System and OS. following links will be helpful in this case.</p>\n\n<p><a href=\"http://doc.qt.io/qtcreator/creator-faq.html\" rel=\"noreferrer\">Creator FAQ</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6742663/where-does-qtcreator-save-its-settings\">Stack Overflow Qt Settings 1</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/48013034/full-complete-uninstall-qt-creator?rq=1\">Stack Overflow Qt Settings 2</a></p>\n\n<p>Now i am able to build and run android application.</p>\n"}, {"comments": [{"owner": {"reputation": 1003, "user_id": 1103760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OInfA.png?s=128&g=1", "display_name": "don bright", "link": "https://stackoverflow.com/users/1103760/don-bright"}, "edited": false, "score": 0, "creation_date": 1549774994, "post_id": 51176881, "comment_id": 96020838, "body": "on ubuntu 18 in Feb 2019 i had to use JDK /usr/lib/jvm/java-1.8.0-openjdk-amd64 with SDK /home/don/Android/Sdk/ and NDK /home/don/Android/Sdk/ndk-bundle and in sdkmanager also add versions 25 and 27. bizarre, flaky issue"}], "tags": [], "owner": {"reputation": 21, "user_id": 10032989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa0937630cd9445209fe6ac92b2fa09?s=128&d=identicon&r=PG", "display_name": "MickG", "link": "https://stackoverflow.com/users/10032989/mickg"}, "is_accepted": false, "score": 2, "last_activity_date": 1530717618, "creation_date": 1530717618, "answer_id": 51176881, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/51176881#51176881", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>Thanks\nI had the same problem, using Debian Buster (sid) with QtCreator 4.6.2 with Qt5.10.1</p>\n\n<p>Go into ~/.config and wipe all the qtcreator settings, then start again specifying jdk.8\nthen the paths to the Android SDK and then the NDK.</p>\n\n<p>It then works and the dumb <strong>SDK platform not installed error</strong> does not occur. :)</p>\n\n<p>Out of interest I tried wiping everything ~/.config/qtcreator* and then specifying jdk10.  Does not work as before.</p>\n\n<p>If you then change to jdk8, it still does not work.\nYou have to close QtCreator, wipe all the configs, reopen and choose it again, whereon it will work.</p>\n"}, {"tags": [], "owner": {"reputation": 644, "user_id": 3928678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gy7ef.jpg?s=128&g=1", "display_name": "cecil merrel aka bringrainfire", "link": "https://stackoverflow.com/users/3928678/cecil-merrel-aka-bringrainfire"}, "is_accepted": false, "score": 1, "last_activity_date": 1536663517, "creation_date": 1536663517, "answer_id": 52274357, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/52274357#52274357", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>you do not need to wipe the configs for qt. simply install the latest of jdk 8 from here -> <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p>\n\n<p>next select the jdk location in the options and then toward the bottom select the sdk manager tab. Click the update installed button and it should show a window with a list of licenses you need to agree to. </p>\n\n<p>The problem lies with jdk 9 and up. For some odd reason it doesn't show the license agreements and doesn't continue beyond that point. The fix is sticking with jdk8</p>\n"}, {"tags": [], "owner": {"reputation": 14988, "user_id": 881441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ktk8b.jpg?s=128&g=1", "display_name": "Stephen Quan", "link": "https://stackoverflow.com/users/881441/stephen-quan"}, "is_accepted": false, "score": 9, "last_activity_date": 1549595729, "last_edit_date": 1549595729, "creation_date": 1538598800, "answer_id": 52635254, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/52635254#52635254", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>\"Platform SDK installed\" requires a working a <code>sdkmanager</code> command.</p>\n\n<p>If you have the Platform SDK installed, try running the <code>sdkmanager</code> command directly.</p>\n\n<p>This is <code>$ANDROID_SDK_ROOT/tools/bin/sdkmanager</code>. On my Linux system this was in  <code>$HOME/Android/Sdk/tools/bin/sdkmanager</code>.</p>\n\n<p>The typically issue is</p>\n\n<ul>\n<li>You need to install JDK 8 properly (note that JDK 9, JDK 10 and JDK 11 will not work!)</li>\n</ul>\n\n<p>If you have installed a newer JDK you will need to downgrade to JDK 8. Either OpenJDK or Oracle will work, but it needs to be JDK 8.</p>\n\n<p>Work thru any remaining issues with the <code>sdkmanager</code> command line, then, once that's done, you should find Qt Creator to be happy again.</p>\n\n<p>References:</p>\n\n<ul>\n<li><a href=\"https://developer.android.com/studio/write/java8-support\" rel=\"noreferrer\">https://developer.android.com/studio/write/java8-support</a></li>\n<li><a href=\"https://issuetracker.google.com/issues/67495440\" rel=\"noreferrer\">https://issuetracker.google.com/issues/67495440</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4259, "user_id": 1074799, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/840606377197bd43b839d0b62f6d6d9a?s=128&d=identicon&r=PG", "display_name": "S.M.Mousavi", "link": "https://stackoverflow.com/users/1074799/s-m-mousavi"}, "is_accepted": false, "score": 0, "last_activity_date": 1539120472, "creation_date": 1539120472, "answer_id": 52729574, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/52729574#52729574", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>OK, after many many hours try-out I finally find out how we can fix it. </p>\n\n<ul>\n<li>Download and use Android NDK r10e separately (don't install it through SDK Manager)</li>\n<li>Download and use Android SDK <strong>without</strong> Android Studio (download android tools from official site)  Qt Preferences will installs all needed packages (build tools , platform tools, sdk tools, platform android-28)</li>\n<li>Install and use Java JDK 8 (not newer)</li>\n</ul>\n\n<p><strong><em>Please note</strong> that installing SDK packages through Android Studio will not be detectable by Qt</em></p>\n"}, {"tags": [], "owner": {"reputation": 1178, "user_id": 6214440, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ee061d17f5830b51a77d94a461555d87?s=128&d=identicon&r=PG&f=1", "display_name": "Bugfinger", "link": "https://stackoverflow.com/users/6214440/bugfinger"}, "is_accepted": false, "score": 1, "last_activity_date": 1597145649, "last_edit_date": 1597145649, "creation_date": 1549381561, "answer_id": 54538113, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/54538113#54538113", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>Linux:</p>\n<p>The proposed solutions did not work for me.</p>\n<p>I already had Java 8 and with Qt 5.12 installed the latest SDK and NDK are supposed to work (should work since Qt 5.9).</p>\n<p>After hours of fiddling, reinstalling Qt and Java, removing configs, downloading older NDKs and all, it still did not work.</p>\n<p>My mistake was that I unpacked SDK and NDK as root into a read-only location for the user. After <code>chown</code>ing the folder to the my normal user, Creator found everything and worked as expected.</p>\n<p>So also check, if the user running Qt Creator owns the folder containing SDK and NDK. It's a quick check that might prevent you from deleting your configs. :)</p>\n<p><strong>Edit</strong>: In August 2019, I added a patch to Qt Creator, checking for this partiicular case and reporting an error accordingly.\n<a href=\"https://code.qt.io/cgit/qt-creator/qt-creator.git/commit/?id=4ca3bd4d0f336f7055080e78849c0607ba99843c\" rel=\"nofollow noreferrer\">https://code.qt.io/cgit/qt-creator/qt-creator.git/commit/?id=4ca3bd4d0f336f7055080e78849c0607ba99843c</a></p>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 957805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7897340d2dab75e85e024ae2758507fa?s=128&d=identicon&r=PG", "display_name": "67hz", "link": "https://stackoverflow.com/users/957805/67hz"}, "is_accepted": false, "score": 0, "last_activity_date": 1586991459, "creation_date": 1586991459, "answer_id": 61239960, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/61239960#61239960", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>To add on to the accepted answer of needing JDK 8 - if you already have a newer version of Java running, you can easily install a standalone version 8 alongside it. Use the installer from <a href=\"https://adoptopenjdk.net/\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/</a> and select v8.0. Make sure to update your preferences to point to the Java 8 and things should work.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6093812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed342505cdbea91c0a9d05393cbcda87?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin Snieg", "link": "https://stackoverflow.com/users/6093812/marcin-snieg"}, "is_accepted": false, "score": 1, "last_activity_date": 1587054937, "creation_date": 1587054937, "answer_id": 61255359, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/61255359#61255359", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>In my case I had red crosses for \n<em>SDK tools installed.</em>\nand for\n<em>Platform SDK installed.</em></p>\n\n<p>To resolve it I needed to download android sdk tools from <a href=\"https://androidsdkoffline.blogspot.com/p/android-sdk-tools.html\" rel=\"nofollow noreferrer\">https://androidsdkoffline.blogspot.com/p/android-sdk-tools.html</a></p>\n\n<p>file was tools_r25.2.5-linux.zip</p>\n\n<p>I placed extracted tools folder in sdk folder.\nMy setup now works only with open-jdk-8\nNow I can deploy qml apps on my S10</p>\n"}, {"tags": [], "owner": {"reputation": 6970, "user_id": 1270008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ae8b0fc66eaeea19cbf9be759db5abf?s=128&d=identicon&r=PG", "display_name": "tanius", "link": "https://stackoverflow.com/users/1270008/tanius"}, "is_accepted": false, "score": 1, "last_activity_date": 1590697606, "last_edit_date": 1590697606, "creation_date": 1590697126, "answer_id": 62073804, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/62073804#62073804", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>I just had the exact same symptoms as the OP. Just that unlike the OP, I was using Qt Creator 4.8.0, as provided in the Ubuntu 19.10 repositories.</p>\n\n<h2>Symptoms</h2>\n\n<p>The relevant part from the Qt Creator self-check list is:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>\u2713  SDK tools installed.\nX  Platform SDK installed.\n</code></pre>\n\n<p>An additional symptom was that the \"SDK Manager\" tab below had this message:</p>\n\n<blockquote>\n  <p>SDK manager is not available with the current version of SDK tools. Use Native SDK Manager.</p>\n</blockquote>\n\n<h2>Cause and Fix</h2>\n\n<p>The reason for this issue was a <strong>wrong version of SDK tools</strong>. That wrong version is recognized (\"SDK tools installed.\") but cannot be utilized by Qt Creator to detect which platform SDK is installed or to install new ones.</p>\n\n<p>In my case, I had simply downloaded the latest version, provided as <code>commandlinetools-linux-*_latest.zip</code> on the <a href=\"https://developer.android.com/studio\" rel=\"nofollow noreferrer\">Android Studio download page</a>. That version introduced changes that are not backwards compatible with the interface of earlier versions that Qt Creator is expecting. That new package is indeed quite different: it has a different name (<code>commandlinetools</code> vs. <code>sdk-tools</code>), <a href=\"https://stackoverflow.com/a/61176718\">expects to be in a different place</a> etc..</p>\n\n<p>To solve this, download and install \"Android SDK Tools 26.1.1\" (rev. 4333796) as follows, supplying your own Android SDK directory of course:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cd /opt/android-sdk/\nwget https://dl.google.com/android/repository/sdk-tools-linux-4333796.zip\nunzip sdk-tools-linux-4333796.zip\n</code></pre>\n\n<p>That fixed all the symptoms described above.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5017572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21e6532331ee6c48620acb6dcccc1c37?s=128&d=identicon&r=PG&f=1", "display_name": "Beacher Harry", "link": "https://stackoverflow.com/users/5017572/beacher-harry"}, "is_accepted": false, "score": 0, "last_activity_date": 1617247639, "creation_date": 1617247639, "answer_id": 66898040, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed/66898040#66898040", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>In my case, I download the separate SDK download tool, android-sdk_r24.4.1-windows, and Installed the SDK again. the Android SDK Platform-tools is a part of Android SDK Manager.and I resolved the problem.</p>\n"}], "owner": {"reputation": 2225, "user_id": 580908, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16becb4d846f0036238eec17ab34c37?s=128&d=identicon&r=PG", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/580908/swapnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28402, "favorite_count": 6, "accepted_answer_id": 48971653, "answer_count": 12, "score": 43, "last_activity_date": 1617247639, "creation_date": 1515593409, "last_edit_date": 1516187813, "question_id": 48189272, "link": "https://stackoverflow.com/questions/48189272/qt-creator-android-error-platform-sdk-installed", "title": "Qt Creator Android error &quot;Platform SDK installed&quot;", "body": "<p>I am developing Qt Cross platform application for Android, recently i have updated Qt creator and Installed new Qt version. I am using <code>'Qt Creator version 4.5.0'</code>. I have updated to <code>'QT version 5.10'</code>. This Set up is done on Ubuntu 16.04. </p>\n\n<p>Followed link <a href=\"http://doc.qt.io/qt-5/androidgs.html\" rel=\"noreferrer\">Getting Started with QT Installation</a>. </p>\n\n<p>I am always getting Error message <em>\"Android Settings have error\"</em> in Qt Creator->Tools->Options->Devices->Android.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HIMHe.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/HIMHe.png\" alt=\"QT Android Installation Issue\"></a></p>\n\n<p>Because of above issue i am not able to build application for Android.</p>\n\n<p>I have recently updated my Android sdk, I am able to build and run Sample application from Android Studio, indicating that SDK instalation is working properly. I am using Android SDK tools 26.1.1. Please check bellow screen shots.</p>\n\n<p><a href=\"https://i.stack.imgur.com/f5sYc.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/f5sYc.png\" alt=\"Android Studio SDK manager\"></a></p>\n\n<p>Android SDK build tools Installed.\n<a href=\"https://i.stack.imgur.com/9OP1K.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9OP1K.png\" alt=\"enter image description here\"></a></p>\n\n<p>Android SDk platforms installed\n<a href=\"https://i.stack.imgur.com/Dx1Hu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Dx1Hu.png\" alt=\"enter image description here\"></a> </p>\n\n<p>Already gone through different links on Stack Overflow and QT forum, All are Suggesting downgrade of Android SDK tools(Due to QT Known bug), but none of the solution is working for me. I know there are few known bugs building Android application with QT 5.9 and Qt Creator version 4.0. I guess It is resolved, as same set up is working fine on Windows 10.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/42754878/qt-creator-wont-list-any-available-android-build-sdks/42811774\">QT Creator wont list any available Android Build SDKs</a> \n<a href=\"https://stackoverflow.com/questions/46537815/qt-with-android-5-9-0-installation-erorr\">QT Android Installation error</a></p>\n\n<p>Please help if anybody here resolved same issue.</p>\n"}, {"tags": ["c++", "makefile"], "comments": [{"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 2, "creation_date": 1515593952, "post_id": 48189251, "comment_id": 83358701, "body": "What do you mean by &quot;an interface&quot;?"}, {"owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "reply_to_user": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1515594801, "post_id": 48189251, "comment_id": 83359305, "body": "That is a good question which also makes me suspicious about what I have told. Since unlike many languages C++ does not have interfaces all we have is Pure Abstract Classes."}, {"owner": {"reputation": 861, "user_id": 743414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4865c7841b624ea4f967e6d1806bbbb0?s=128&d=identicon&r=PG", "display_name": "user743414", "link": "https://stackoverflow.com/users/743414/user743414"}, "edited": false, "score": 0, "creation_date": 1515596002, "post_id": 48189251, "comment_id": 83360152, "body": "For binary compatibility there&#39;s something like COM from MS or iBCS from Intel needed. Because between different compilers (or versions of the same) there&#39;s no gurantee that everything works the same way. Also keep in mind that there could and will be different runtimes and different versions from the STL."}], "answers": [{"tags": [], "owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1515599893, "last_edit_date": 1515599893, "creation_date": 1515598400, "answer_id": 48190905, "question_id": 48189251, "link": "https://stackoverflow.com/questions/48189251/is-library-dependency-problems-can-be-avoided-with-interfaces/48190905#48190905", "title": "Is library dependency problems can be avoided with interfaces", "body": "<p>Basically, order is <em>only</em> important for resolving dependencies in <em>static</em> libraries and objects (well, including \"main\" object too) with GNU <code>ld</code> linker (or similar). That's because <code>ld</code> scans that list only once from left to right \"forgetting\" every symbol which wasn't referenced so far. BTW. Such behaviour may be modified by using <code>-Wl,-u,sym</code> linker option, which forces <code>ld</code> to create a reference to a <code>sym</code> before scanning. (Although it's not of much use if libB.a needs more than a dozen of symbols from libA.a).</p>\n\n<p>However, all said applies to neither (1) some other linkers (if they keep tracking all symbols, no matter what the order is); nor (2) dependencies between shared libraries / DLLs (because it's job for OS loader, not for linker); nor (3) run-time dynamic linking using <code>dlsym()</code>, <code>GetProcAddress()</code>, etc. (well, obviously, linker knows nothing of it); nor (4) libraries exposing \"a flexible interface\", such as Microsoft COM, which is essentially a mix of run-time dynamic linking and <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">\"factory pattern\"</a>.</p>\n"}], "owner": {"reputation": 3342, "user_id": 1745372, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/7Wvvn.jpg?s=128&g=1", "display_name": "Kadir Erdem Demir", "link": "https://stackoverflow.com/users/1745372/kadir-erdem-demir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 48190905, "answer_count": 1, "score": 0, "last_activity_date": 1515599893, "creation_date": 1515593334, "question_id": 48189251, "link": "https://stackoverflow.com/questions/48189251/is-library-dependency-problems-can-be-avoided-with-interfaces", "title": "Is library dependency problems can be avoided with interfaces", "body": "<p>Today I learned something new about library dependencies from one of my collages and I want to be sure it is correct. </p>\n\n<p>So normally if a library depends(libB.a) on the other one(libA.a) \nthan in the make file order should be -lB -lA as far as I know. The lowest level library(the library which other libraries depends on) should be in the end of the -l list. </p>\n\n<p>I have been told today if the dependency of libB to libA is an interface  than the order does not matters. I have been explained since this dependency will be resolved in the run time, in linking stage compiler does not needs any machine code information from libA. Using symbols from header file will be enough. </p>\n\n<p>I wanted to confirm if I understand what I have been told correctly? Is it correct linking library order does not matters in case of usage of interfaces. If correct is it compiler depended or specified in language itself? </p>\n\n<p>Also what have been told makes sense when thinking about dynamic linking but than how come the object inside of libA could be created without the actual machine code? </p>\n\n<p>I hope I explained my point enough if not I can try to make a sample code. </p>\n"}, {"tags": ["javascript", "c++", "webassembly"], "owner": {"reputation": 51, "user_id": 9151088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0344f215e691b89708f7e9ac8c803c76?s=128&d=identicon&r=PG&f=1", "display_name": "cinnamonAsh", "link": "https://stackoverflow.com/users/9151088/cinnamonash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 493, "favorite_count": 1, "closed_date": 1515593413, "answer_count": 0, "score": 3, "last_activity_date": 1515593023, "creation_date": 1515593023, "question_id": 48189157, "link": "https://stackoverflow.com/questions/48189157/how-to-get-current-system-time-in-webassembly", "closed_reason": "Duplicate", "title": "How to get current system time in WebAssembly?", "body": "<p>I am trying to profile WebAssembly functions. \nFor the moment, I use performance.now() in Javascript code to profile them. </p>\n\n<p>Given that you can use <a href=\"https://developer.mozilla.org/en-US/docs/WebAssembly/C_to_wasm\" rel=\"nofollow noreferrer\">Emscripten toolchain</a> to compile C++ code to WebAssembly, I assume you could compile to wasm a C++ program containing a function that gets the current system time in nanoseconds (standard library <a href=\"http://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\">chrono</a>). (Correct me if this is wrong)</p>\n\n<p>Therefore, how to get current system time (nanoseconds) in WebAssembly?\n(Using text format .wat and then compiling it to .wasm to be called in Javascript)</p>\n"}, {"tags": ["c++", "size", "dynamic-arrays", "delete-operator"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1515593016, "post_id": 48189146, "comment_id": 83358121, "body": "Because <code>std::vector</code>. Seriously, that&#39;s what it&#39;s trying to encourage you to use."}, {"owner": {"reputation": 1403, "user_id": 5076707, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tGqWB.jpg?s=128&g=1", "display_name": "Pumkko", "link": "https://stackoverflow.com/users/5076707/pumkko"}, "edited": false, "score": 1, "creation_date": 1515593175, "post_id": 48189146, "comment_id": 83358211, "body": "You could have a look at Doug Mclean comment in this answer <a href=\"https://stackoverflow.com/a/197699/5076707\">stackoverflow.com/a/197699/5076707</a>"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515593209, "post_id": 48189146, "comment_id": 83358235, "body": "so I have a declaration of new [] that always allocates 1024 items.  no matter how many were passed - on attempting to get more, I throw a bad_alloc.  The size just isn&#39;t available anymore.  That&#39;s the implementation detail that breaks your example"}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1515593412, "post_id": 48189146, "comment_id": 83358337, "body": "For example, if I make an app where I know that most of my objects are going to be alive up to the end of execution and I know that the maximum size of memory I&#39;m going to need is going to be relatively small I can just pre-allocate a chunk of memory and pass out pointers in it with overloaded <code>new</code> and <code>new[]</code>, then do a no-op <code>operator delete</code> and <code>operator delete[]</code> because I know I won&#39;t need that memory again. I wouldn&#39;t need to store the size of each allocation, just a <code>next</code> pointer."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515595823, "post_id": 48189146, "comment_id": 83360024, "body": "@UKMonkey -- no; <code>operator new[]</code> doesn&#39;t allocate <b>items</b>; it allocates <b>space for items</b>. <code>new X[whatever]</code> doesn&#39;t care how much space was actually allocated, as long as it&#39;s at least the amount that the compiler requested in the call to <code>operator new[]</code>. The compiler generates code to keep track of the number of objects that were constructed, usually in &quot;extra&quot; memory at the beginning of the allocated block."}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1515596131, "post_id": 48189146, "comment_id": 83360250, "body": "@PeteBecker maybe I didn&#39;t describe it very well... my point was <code>The compiler generates code to keep track of the number of objects that were constructed</code> doesn&#39;t need to be true - it is as a rule of thumb, but it doesn&#39;t have to.  In the case it doesn&#39;t, the size just isn&#39;t available."}], "answers": [{"comments": [{"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 1, "creation_date": 1515593646, "post_id": 48189283, "comment_id": 83358473, "body": "But how does this answer why there can&#39;t be a function <code>sizeofallocation(void *p)</code> that might as well be UB for pointers that didn&#39;t come from <code>new</code> or <code>new[]</code>. Can you elaborate?"}, {"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "reply_to_user": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1515594867, "post_id": 48189283, "comment_id": 83359361, "body": "A good spec should try to eliminate ambiguous keyword. <code>sizeofallocation(void *p)</code> is asking for trouble when programmer pass in ordinary pointers. Even you introduce new keyword that&#39;s paired with <code>new</code>/<code>delete</code> and UD for incompatible pointer, it only provide a feature that is already solved by <code>std::array</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1515595976, "post_id": 48189283, "comment_id": 83360131, "body": "@Non-maskableInterrupt -- <code>delete [] p;</code> is also asking for trouble when the programmer passes a pointer that wasn&#39;t returned by <code>new[]</code>. The possibility that something could be misused is not a reason for not having it."}, {"owner": {"reputation": 2602, "user_id": 4341534, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001c92ef74cb305ff8318eebeaa04ab3?s=128&d=identicon&r=PG&f=1", "display_name": "patatahooligan", "link": "https://stackoverflow.com/users/4341534/patatahooligan"}, "edited": false, "score": 0, "creation_date": 1515595992, "post_id": 48189283, "comment_id": 83360145, "body": "The programmer needs to keep track of what pointers they&#39;ve <code>new</code>ed anyway so I don&#39;t believe that&#39;s an issue here. And <code>std::array</code> doesn&#39;t solve run-time determined sizes. For the record, I don&#39;t think such a function should exist, I was just asking about your answer because I don&#39;t get it."}], "tags": [], "owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "is_accepted": false, "score": 0, "last_activity_date": 1515593867, "last_edit_date": 1515593867, "creation_date": 1515593448, "answer_id": 48189283, "question_id": 48189146, "link": "https://stackoverflow.com/questions/48189146/since-delete-knows-array-sizes-why-is-this-information-not-available/48189283#48189283", "title": "Since delete [] knows array sizes, why is this information not available?", "body": "<p>Because new is not the only source for dynamic array (which share the same signature with pointer to objects), it has to be compatible with C.</p>\n\n<p>Think about this:</p>\n\n<pre><code>void seem_good(MyStruct* d) {\n  mess_with(d[3]);\n}\n</code></pre>\n\n<p>The compiler have no way to perform check if it wanted to be called from other languages.</p>\n\n<hr>\n\n<p>By the way, when inter-operation with other languages is not needed, C++ has its own solution: <code>std::array</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7737, "user_id": 3410396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc26b280cedaa721d90828a80e39706?s=128&d=identicon&r=PG&f=1", "display_name": "Revolver_Ocelot", "link": "https://stackoverflow.com/users/3410396/revolver-ocelot"}, "is_accepted": false, "score": 2, "last_activity_date": 1515593797, "creation_date": 1515593797, "answer_id": 48189394, "question_id": 48189146, "link": "https://stackoverflow.com/questions/48189146/since-delete-knows-array-sizes-why-is-this-information-not-available/48189394#48189394", "title": "Since delete [] knows array sizes, why is this information not available?", "body": "<p>It would inhibit optimisations where knowledge of array size is not nessesary:</p>\n\n<pre><code>int* foo = new int[...];\n. . .\ndelete[] foo;\n</code></pre>\n\n<p>As <code>int</code> is a trivial type and does not have a destructor, compiler do not need to know how many <code>int</code>s are there. Even if it is an array of 1 int in 4 MB memory chunk.</p>\n\n<pre><code>const MyType* const foo = new MyType[. . .];\n. . .\ndelete[] foo;\n</code></pre>\n\n<p>Here compiler knows size of the array, pointed by foo, and it knows, that it cannot change legally. So it just can use that information directly, and do not store amount of items in allocated array.</p>\n"}, {"tags": [], "owner": {"reputation": 592, "user_id": 6672815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee6c8d74588b5dbf028aeed0e33b8ee5?s=128&d=identicon&r=PG&f=1", "display_name": "virgesmith", "link": "https://stackoverflow.com/users/6672815/virgesmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1515594198, "last_edit_date": 1515594198, "creation_date": 1515593823, "answer_id": 48189403, "question_id": 48189146, "link": "https://stackoverflow.com/questions/48189146/since-delete-knows-array-sizes-why-is-this-information-not-available/48189403#48189403", "title": "Since delete [] knows array sizes, why is this information not available?", "body": "<p>It's implementation-specific. One possible way the runtime tracks the size is to store it in memory just before the returned pointer, but its not something you can count on. I was once tasked with tracking (heap) memory usage so I did exactly this - wrote a custom allocator that allocated some extra bytes, stored the size and returned an offset pointer. When you delete you need to \"unoffset\" the pointer, do what you need to with the size, then delete.  </p>\n"}, {"comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 3, "creation_date": 1515595246, "post_id": 48189405, "comment_id": 83359638, "body": "+1. A concrete example <code>new char[7]</code> on almost all modern optimising heaps will go through a low fragmentation/bucketing heap in the 8 byte bucket and have no idea about its size if queried. Storing the size when no one (currently) needs to know isn&#39;t optimal."}, {"owner": {"reputation": 841, "user_id": 2272506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37d910c6f729897b6af6fa867a794001?s=128&d=identicon&r=PG", "display_name": "Jesin", "link": "https://stackoverflow.com/users/2272506/jesin"}, "edited": false, "score": 0, "creation_date": 1515607524, "post_id": 48189405, "comment_id": 83367586, "body": "Is there any chance of <code>sizeof[](p)</code> conflicting with lambda syntax somehow?"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 4, "last_activity_date": 1515595978, "last_edit_date": 1515595978, "creation_date": 1515593825, "answer_id": 48189405, "question_id": 48189146, "link": "https://stackoverflow.com/questions/48189146/since-delete-knows-array-sizes-why-is-this-information-not-available/48189405#48189405", "title": "Since delete [] knows array sizes, why is this information not available?", "body": "<p><code>delete[]</code> might not <em>necessarily</em> know the exact array size. It might over-allocate for example, or do something else entirely bizarre yet conformant with the standard.</p>\n\n<p>Facetiously the answer could also be on the lines that nobody has managed to convince the standards committee of the merits of the idea; perhaps <code>sizeof[](p)</code> could be the proposed syntax? <code>sizeof</code> is already a keyword, already has a runtime-evaluable flavour in C so it's not an enormous leap to envisage an equivalent in C++, and my <code>[]</code> distinguishes from <code>sizeof(pointer type)</code>.</p>\n"}], "owner": {"reputation": 133, "user_id": 2248844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73989bd548d1cfacbab867544421d72f?s=128&d=identicon&r=PG", "display_name": "asbxl", "link": "https://stackoverflow.com/users/2248844/asbxl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 4, "score": 7, "last_activity_date": 1515601565, "creation_date": 1515592987, "last_edit_date": 1515601565, "question_id": 48189146, "link": "https://stackoverflow.com/questions/48189146/since-delete-knows-array-sizes-why-is-this-information-not-available", "title": "Since delete [] knows array sizes, why is this information not available?", "body": "<p>When I allocate a dynamic array in C++ (<code>T * p = new T[n]</code>), I use delete [] p to free the allocated memory. Obviously, the system knows the array size (in order among other things to call n times T's destructor). This is discussed elsewhere. For instance <a href=\"https://stackoverflow.com/questions/197675/how-does-delete-know-the-size-of-the-operand-array\">How does delete[] \u201cknow\u201d the size of the operand array?</a>. This is implemenation details.</p>\n\n<p>But why was it not decided to make this information available?</p>\n\n<p>Thx</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 1, "creation_date": 1515592985, "post_id": 48189081, "comment_id": 83358105, "body": "The error log probably contains more than that"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1515593054, "post_id": 48189081, "comment_id": 83358144, "body": "When looking at compilation logs, always start at the top and work down."}, {"owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1515593164, "post_id": 48189081, "comment_id": 83358206, "body": "@StoryTeller: I added the full compilation output from make. Is there another error log?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1515593379, "post_id": 48189081, "comment_id": 83358319, "body": "Nah, that&#39;s it. The error is while building <code>Amesos2_Details_registerLinearSolverFactory.cpp</code>, it seems. Do you have it in sight?"}, {"owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "edited": false, "score": 0, "creation_date": 1515593627, "post_id": 48189081, "comment_id": 83358462, "body": "Well, it just includes multiple other files, ending at the last one (<code>SuiteSparse_config.h</code>), but I can not see any problems there?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1515593990, "post_id": 48189081, "comment_id": 83358727, "body": "Try to run the prperocessor only (<code>-E</code> option for GCC) on that file. See what comes out the other end."}, {"owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "edited": false, "score": 0, "creation_date": 1515594322, "post_id": 48189081, "comment_id": 83358945, "body": "Running the command shown above without <code>-E</code> gives me the error, with <code>-E</code> it results in no error"}], "owner": {"reputation": 3297, "user_id": 2546099, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/3f7b2455429f817843ab8524d67f37a1?s=128&d=identicon&r=PG&f=1", "display_name": "arc_lupus", "link": "https://stackoverflow.com/users/2546099/arc-lupus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1515594214, "creation_date": 1515592745, "last_edit_date": 1515594214, "question_id": 48189081, "link": "https://stackoverflow.com/questions/48189081/declaration-does-not-declare-anything-in-suitesparse", "title": "Declaration does not declare anything in suitesparse", "body": "<p>I am trying to compile Trilinos, which needs SuiteSparse for some parts. Now the compilation stops with the error</p>\n\n<pre><code>/opt/suitesparse/include/SuiteSparse_config.h:62:26: error: declaration does not declare anything [-fpermissive]\n #define SuiteSparse_long long\n/opt/suitesparse/include/SuiteSparse_config.h:62:26: note: in definition of macro \u2018SuiteSparse_long\u2019\n #define SuiteSparse_long long\n</code></pre>\n\n<p>in the code lines </p>\n\n<pre><code>#ifdef _WIN64\n\n#define SuiteSparse_long __int64\n#define SuiteSparse_long_max _I64_MAX\n#define SuiteSparse_long_idd \"I64d\"\n\n#else\n\n#define SuiteSparse_long long\n#define SuiteSparse_long_max LONG_MAX\n#define SuiteSparse_long_idd \"ld\"\n\n#endif\n</code></pre>\n\n<p>on a linux system with GCC 7.2. I do not understand why I get that error, after <code>long</code> should be declared?</p>\n\n<p>The full compilation log is</p>\n\n<pre><code>[  0%] Built target gtest\n[  0%] Built target tpi\n[  0%] Built target kokkoscore\n[  0%] Built target kokkoscontainers\n[  1%] Built target kokkosalgorithms\n[  2%] Built target teuchoscore\n[  3%] Built target teuchosparser\n[  4%] Built target teuchosparameterlist\n[  4%] Built target teuchoscomm\n[  4%] Built target teuchosnumerics\n[  4%] Built target teuchosremainder\n[  5%] Built target teuchoskokkoscompat\n[  5%] Built target teuchoskokkoscomm\n[ 14%] Built target kokkoskernels\n[ 14%] Built target rtop\n[ 14%] Built target sacado\n[ 14%] Built target minitensor\n[ 16%] Built target epetra\n[ 20%] Built target zoltan\n[ 21%] Built target shards\n[ 21%] Built target globipack\n[ 22%] Built target triutils\n[ 22%] Built target tpetraclassic\n[ 22%] Built target tpetraclassicnodeapi\n[ 22%] Built target tpetraclassiclinalg\n[ 22%] Built target kokkostsqr\n[ 24%] Built target tpetra\n[ 24%] Built target tpetrainout\n[ 24%] Built target tpetraext\n[ 26%] Built target trilinosss\n[ 28%] Built target epetraext\n[ 29%] Built target domi\n[ 31%] Built target thyracore\n[ 31%] Built target thyra_nonlinear_test_models\n[ 32%] Built target thyraepetra\n[ 32%] Built target thyraepetraext\n[ 32%] Built target thyratpetra\n[ 32%] Built target xpetra\n[ 33%] Built target xpetra-sup\n[ 33%] Built target optipack\n[ 33%] Built target isorropia\n[ 33%] Built target isorropia_test_utils\n[ 33%] Built target dpliris\n[ 35%] Built target aztecoo\n[ 35%] Built target galeri-epetra\n[ 35%] Built target galeri-xpetra\n[ 36%] Built target amesos\n[ 36%] Built target pamgen_extras\n[ 37%] Built target pamgen\n[ 38%] Built target zoltan2\n[ 40%] Built target ifpack\n[ 44%] Built target ml\n[ 44%] Built target belos\n[ 44%] Built target belosepetra\n[ 44%] Built target belostpetra\n[ 44%] Built target shylu_nodehts\n[ 44%] Built target shylu_nodetacho\n[ 44%] Building CXX object packages/amesos2/src/CMakeFiles/amesos2.dir/Amesos2_Details_registerLinearSolverFactory.cpp.o\nIn file included from /opt/suitesparse/include/umfpack.h:29:0,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Umfpack_FunctionMap.hpp:56,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Umfpack_decl.hpp:49,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Umfpack.hpp:47,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Factory.hpp:108,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Details_LinearSolverFactory_def.hpp:52,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Details_LinearSolverFactory.hpp:49,\n                 from ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Details_registerLinearSolverFactory.cpp:45:\n/opt/suitesparse/include/SuiteSparse_config.h:62:26: error: declaration does not declare anything [-fpermissive]\n #define SuiteSparse_long long\n                          ^\n/opt/suitesparse/include/SuiteSparse_config.h:62:26: note: in definition of macro \u2018SuiteSparse_long\u2019\n #define SuiteSparse_long long\n                          ^~~~\nmake[2]: *** [packages/amesos2/src/CMakeFiles/amesos2.dir/build.make:111: packages/amesos2/src/CMakeFiles/amesos2.dir/Amesos2_Details_registerLinearSolverFactory.cpp.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:8175: packages/amesos2/src/CMakeFiles/amesos2.dir/all] Error 2\nmake: *** [Makefile:163: all] Error 2\n</code></pre>\n\n<p>Running <code>make VERBOSE=1</code> gives me</p>\n\n<pre><code>/usr/lib64/mpi/gcc/openmpi3/bin/mpic++   -I~/Downloads/Trilinos/build -I~/Downloads/Trilinos -I~/Downloads/Trilinos/build/packages/amesos2/src -I~/Downloads/Trilinos/packages/amesos2/src -I~/Downloads/Trilinos/packages/amesos2/src/KLU2/Include -I~/Downloads/Trilinos/packages/amesos2/src/KLU2/Source -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/AMD/Include -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/COLAMD/Include -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/BTF/Include -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/UFconfig -I~/Downloads/Trilinos/build/packages/shylu/shylu_node/tacho/src -I~/Downloads/Trilinos/packages/shylu/shylu_node/tacho/src -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/CAMD/Include -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/CCOLAMD/Include -I~/Downloads/Trilinos/packages/common/auxiliarySoftware/SuiteSparse/src/KLU/Include -I~/Downloads/Trilinos/build/packages/kokkos/algorithms/src -I~/Downloads/Trilinos/packages/kokkos/algorithms/src -I~/Downloads/Trilinos/build/packages/kokkos/containers/src -I~/Downloads/Trilinos/packages/kokkos/containers/src -I~/Downloads/Trilinos/build/packages/kokkos/core/src -I~/Downloads/Trilinos/packages/kokkos/core/src -I~/Downloads/Trilinos/commonTools/gtest -I/opt/metis/include -I/usr/local/include -I/opt/intel/mkl/include -I~/Downloads/Trilinos/build/packages/epetraext/src -I~/Downloads/Trilinos/packages/epetraext/src -I~/Downloads/Trilinos/packages/epetraext/src/transform -I~/Downloads/Trilinos/packages/epetraext/src/inout -I~/Downloads/Trilinos/packages/epetraext/src/coloring -I~/Downloads/Trilinos/packages/epetraext/src/model_evaluator -I~/Downloads/Trilinos/packages/epetraext/src/block -I~/Downloads/Trilinos/packages/epetraext/src/restrict -I~/Downloads/Trilinos/build/packages/triutils/src -I~/Downloads/Trilinos/packages/triutils/src -I~/Downloads/Trilinos/build/packages/epetra/src -I~/Downloads/Trilinos/packages/epetra/src -I~/Downloads/Trilinos/build/packages/teuchos/kokkoscomm/src -I~/Downloads/Trilinos/packages/teuchos/kokkoscomm/src -I~/Downloads/Trilinos/build/packages/teuchos/kokkoscompat/src -I~/Downloads/Trilinos/packages/teuchos/kokkoscompat/src -I~/Downloads/Trilinos/packages/teuchos/parameterlist/src -I~/Downloads/Trilinos/packages/teuchos/parser/src -I~/Downloads/Trilinos/build/packages/teuchos/core/src -I~/Downloads/Trilinos/packages/teuchos/core/src -I~/Downloads/Trilinos/packages/teuchos/comm/src -I~/Downloads/Trilinos/packages/teuchos/remainder/src -I~/Downloads/Trilinos/build/packages/teuchos/remainder/src -I~/Downloads/Trilinos/packages/teuchos/numerics/src -I/opt/petsc/include -I/opt/suitesparse/include -I~/Downloads/Trilinos/packages/tpetra/core/ext -I~/Downloads/Trilinos/build/packages/tpetra/core/ext -I~/Downloads/Trilinos/packages/tpetra/core/inout -I~/Downloads/Trilinos/build/packages/tpetra/core/inout -I~/Downloads/Trilinos/packages/tpetra/core/src -I~/Downloads/Trilinos/packages/tpetra/core/src/kokkos_refactor -I~/Downloads/Trilinos/build/packages/tpetra/core/src -I~/Downloads/Trilinos/packages/tpetra/tsqr/src -I~/Downloads/Trilinos/build/packages/tpetra/tsqr/src -I~/Downloads/Trilinos/packages/tpetra/classic/LinAlg -I~/Downloads/Trilinos/packages/tpetra/classic/NodeAPI -I~/Downloads/Trilinos/build/packages/tpetra/classic/NodeAPI -I~/Downloads/Trilinos/build/packages/tpetra/classic/src -I~/Downloads/Trilinos/packages/tpetra/classic/src -I/opt/intel/tbb/include -I~/Downloads/Trilinos/build/packages/kokkos-kernels/src -I~/Downloads/Trilinos/packages/kokkos-kernels/src -I~/Downloads/Trilinos/packages/kokkos-kernels/src/impl -I~/Downloads/Trilinos/packages/kokkos-kernels/src/impl/tpls -I~/Downloads/Trilinos/packages/kokkos-kernels/src/blas -I~/Downloads/Trilinos/packages/kokkos-kernels/src/blas/impl -I~/Downloads/Trilinos/packages/kokkos-kernels/src/sparse -I~/Downloads/Trilinos/packages/kokkos-kernels/src/sparse/impl -I~/Downloads/Trilinos/packages/kokkos-kernels/src/graph -I~/Downloads/Trilinos/packages/kokkos-kernels/src/graph/impl -I~/Downloads/Trilinos/packages/kokkos-kernels/src/batched -I~/Downloads/Trilinos/packages/kokkos-kernels/src/batched/impl -I~/Downloads/Trilinos/packages/kokkos-kernels/src/common -I/opt/superlu/include -I/opt/parmetis/include  -pedantic -Wall -Wno-long-long -Wwrite-strings   -fPIC -march=native -flto -std=c++11 -O3 -DNDEBUG   -o CMakeFiles/amesos2.dir/Amesos2_Details_registerLinearSolverFactory.cpp.o -c ~/Downloads/Trilinos/packages/amesos2/src/Amesos2_Details_registerLinearSolverFactory.cpp\n</code></pre>\n\n<p>I can now go through the files, but what do I have to look for?</p>\n"}, {"tags": ["c++", "linux", "sdl-2"], "comments": [{"owner": {"reputation": 31, "user_id": 8049726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15454cb882555e2e2fec0c061babd8e?s=128&d=identicon&r=PG", "display_name": "Vasilis Zoumpourlis", "link": "https://stackoverflow.com/users/8049726/vasilis-zoumpourlis"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1515593172, "post_id": 48189031, "comment_id": 83358210, "body": "I work on ubuntu 16.04, the values are 1920 and 1080"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 8049726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15454cb882555e2e2fec0c061babd8e?s=128&d=identicon&r=PG", "display_name": "Vasilis Zoumpourlis", "link": "https://stackoverflow.com/users/8049726/vasilis-zoumpourlis"}, "is_accepted": true, "score": 0, "last_activity_date": 1518729140, "last_edit_date": 1518729140, "creation_date": 1515787688, "answer_id": 48233316, "question_id": 48189031, "link": "https://stackoverflow.com/questions/48189031/sdl-setwindowdisplaymode-on-1920-x-1080/48233316#48233316", "title": "SDL SetWindowDisplayMode on 1920 x 1080", "body": "<p>I managed to make it work, I had to change the window creation call like that</p>\n\n<pre><code>auto sdlWindow = std::shared_ptr&lt;SDL_Window&gt;(SDL_CreateWindow(\n    \"My Window\",\n    SDL_WINDOWPOS_CENTERED,\n    SDL_WINDOWPOS_CENTERED,\n    20, 20,\n    SDL_WINDOW_FULLSCREEN_DESKTOP | SDL_WINDOW_OPENGL),\n    SDL_DestroyWindow\n);\n</code></pre>\n\n<p>In this call I shouldn't set the width and height bigger from the actual screen size (else SDL_SetWindowDisplayMode wont work) so I use small numbers.</p>\n\n<p>this code can be rewritten without small pointer like that:</p>\n\n<pre><code>SDL_Window* sdlWindow = SDL_CreateWindow(\n    \"My Window\",\n    SDL_WINDOWPOS_CENTERED,\n    SDL_WINDOWPOS_CENTERED,\n    20, 20,\n    SDL_WINDOW_FULLSCREEN_DESKTOP | SDL_WINDOW_OPENGL);\n\n...\n\nSDL_DestroyWindow(sdlWindow);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8049726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b15454cb882555e2e2fec0c061babd8e?s=128&d=identicon&r=PG", "display_name": "Vasilis Zoumpourlis", "link": "https://stackoverflow.com/users/8049726/vasilis-zoumpourlis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 48233316, "answer_count": 1, "score": 1, "last_activity_date": 1518729245, "creation_date": 1515592550, "last_edit_date": 1518729245, "question_id": 48189031, "link": "https://stackoverflow.com/questions/48189031/sdl-setwindowdisplaymode-on-1920-x-1080", "title": "SDL SetWindowDisplayMode on 1920 x 1080", "body": "<p>I have a program built with sdl2 and c++ and when while it runs I want to change the resolution in 1920 x 1080 if is supported.</p>\n\n<p>I make the tests with a TV and it outputs fine when my desktop is set to 1920x1080.</p>\n\n<p>But when is set to less resolution I try this:</p>\n\n<pre><code>int WIDTH = 1920;\nint HEIGHT = 1080;\n\nauto sdlWindow = std::shared_ptr&lt;SDL_Window&gt;(SDL_CreateWindow(\n        \"My Window\",\n        SDL_WINDOWPOS_CENTERED,\n        SDL_WINDOWPOS_CENTERED,\n        WIDTH, HEIGHT,\n        SDL_WINDOW_FULLSCREEN),\n        SDL_DestroyWindow\n);\n\nSDL_DisplayMode dm = { SDL_PIXELFORMAT_UNKNOWN,0, 0,0,0 };\ndm.w=WIDTH; dm.h=HEIGHT;\n\nSDL_SetWindowDisplayMode(sdlWindow.get(), &amp;dm);\n</code></pre>\n\n<p>The resolution changes but the window is not shown completely, leaving black space in the right and down of the screen, like the window can render until its previous desktop resolution </p>\n"}, {"tags": ["c++", "pointers", "language-lawyer", "c++17", "unions"], "comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515594097, "post_id": 48189026, "comment_id": 83358798, "body": "@AndyG Because the storage associated to short_str is <a href=\"https://timsong-cpp.github.io/cppwp/n4659/ptr.launder#3\" rel=\"nofollow noreferrer\">reachable</a> through the storage associated to <code>size_r</code> and that <code>size_r</code> is within its period of lifetime. I am almost sure of me. Unfortunatly I am oftenly wrong to be sure!"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515595199, "post_id": 48189026, "comment_id": 83359616, "body": "@Oliv: Indeed <code>large_str</code> and <code>short_str</code> have a common initial sequence, But initializing all of <code>large_str</code> will only initialize 9 bytes, so any access to the 10th byte and beyond of <code>short_str</code> is outside of the common initial sequence, and I was under the impression that this entered UB territory (though I&#39;m also often wrong, too :-))"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515595345, "post_id": 48189026, "comment_id": 83359688, "body": "I think the standard snippet you referenced is primarily aimed at usage of placement new in an <code>aligned_storage</code>"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515598597, "post_id": 48189026, "comment_id": 83361976, "body": "@AndyG, actualy I find that this use case fit well with the intent of std::launder exposed by the C++ standard editor (R.Smith) in <a href=\"https://groups.google.com/a/isocpp.org/forum/#!topic/std-discussion/ko5ceM4szIE\" rel=\"nofollow noreferrer\">groups.google.com/a/isocpp.org/forum/#!topic/std-discussion/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515598930, "post_id": 48189026, "comment_id": 83362227, "body": "@AndyG: Why would initializing all of <code>large_str</code> only initialize 9 bytes? It&#39;s a struct with a <code>char*</code> followed by <code>char[8]</code>; the pointer would be 4-8 bytes (depending on architecture), the <code>char[8]</code> eight bytes, so full initialization should initialize 12-16 bytes."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1515598990, "post_id": 48189026, "comment_id": 83362278, "body": "@ShadowRanger: Crap, you&#39;re right. I miscalculated the size of <code>large_str</code>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1515599529, "post_id": 48189026, "comment_id": 83362679, "body": "@AndyG, The rule about common initialization sequence does not apply here because it is &quot;descending&quot; (the first member must match, then the second,...) and do not apply to arrays. See in <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.mem#20\" rel=\"nofollow noreferrer\">&#91;class&#93;/20</a>."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1515599744, "post_id": 48189026, "comment_id": 83362843, "body": "@AndyG Actualy active realy mean within its lifetime: <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.union#1\" rel=\"nofollow noreferrer\">&#91;class.union&#93;</a> <i>In a union, a non-static data member is active if its name refers to an object whose lifetime has begun and has not ended.</i> active  do not mean more than &quot;the living object of a living union&quot;"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515602974, "post_id": 48189026, "comment_id": 83365020, "body": "@Oliv: So it&#39;s probably undefined behavior because you&#39;re not inspecting a common initial sequence when you access <code>short_str</code> if <code>long_str</code> is active."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515603340, "post_id": 48189026, "comment_id": 83365239, "body": "@AndyG Without <code>std::launder</code> this is indeed undefined behavior. But with <code>std::launder</code> since <code>long_str</code> is within its lifetime and all the storage <code>long_str</code> is accessible throw the storage of <code>short_str</code> (which is the array of short_str[0]) so it should not be UB. This seems to match exactly the definition of <code>std::launder</code> given in the standard. I believe that <code>launder(&amp;short_str)</code> return a pointer to <code>large_str</code> if it is the active member. (In practice, at assembly level, I am sure this is exactly what GCC is going to generate)"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515604959, "post_id": 48189026, "comment_id": 83366155, "body": "@Oliv: I think I follow what you&#39;re saying, and your logic makes sense. In my mind, whether the code is valid hinges on whether <code>short_str</code> is alive (within its lifetime), and since it does not share a common initial sequence with <code>long_str</code>, then if <code>long_str</code> is the active member, I would argue that <code>short_str</code> is not within its lifetime."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515608529, "post_id": 48189026, "comment_id": 83368126, "body": "@AndyG So basicaly, you are saying that std::launder does not change anything. I&#39;am expecting an explanation of why this would be the case."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515609513, "post_id": 48189026, "comment_id": 83368700, "body": "@Oliv: I don&#39;t believe myself to be versed well enough in std::launder yet to provide a definitive answer. It&#39;s my speculation that this is undefined behavior because you&#39;re accessing the non-active member of a union that doesn&#39;t share a common initialization sequence with the active member. std::launder is good for informing the compiler that we have a different object in place than before and does not implicitly activate otherwise-inactive members of a union."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1515658209, "post_id": 48189026, "comment_id": 83385611, "body": "@AndyG Activeness implies whether an object is within its lifetime. After staring at [basic.life] for some time, the snippet doesn&#39;t seem to violate anything there."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1515673837, "post_id": 48189026, "comment_id": 83395123, "body": "@PasserBy: But only one member of a union can be active at a time, and OP is saying that <code>short_str</code> is not active."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515677217, "post_id": 48189026, "comment_id": 83397205, "body": "@AndyG, This is why I use std::launder: to get a pointer to a living object from a pointer to a dead object."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1515677900, "post_id": 48189026, "comment_id": 83397622, "body": "@Oliv: I don&#39;t think that <code>std::launder</code> can implicitly activate a member of a union."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515689598, "post_id": 48189026, "comment_id": 83405627, "body": "@AndyG Me too, the point is <b>not to activate</b> a member union... This is about getting <b>access</b> to an already activated object. You are probably misconceiving C++17 pointers, they have actualy drastically changed the meaning of pointers in C++17. See this <a href=\"https://stackoverflow.com/questions/48062346/is-a-pointer-with-the-right-address-and-type-still-always-a-valid-pointer-since\">Q&amp;A</a>. ACtualy <code>std::launder</code> can be used to get back some of the pre C++17 pointer semantic, but in a somehow restricted fashion."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515690255, "post_id": 48189026, "comment_id": 83406051, "body": "@AndyG Before C++17, it would have been just fine without std::launder. Beause the pointer short_ptr+15 has the right address and type it can be used to access size_r[7]. But since C++17 this is not the case anymore. Now compiler actualy track to which object is actualy pointing a pointer, no matter if at the pointed address resides an other object. To change the object pointed to by the pointer (even if this does not change the pointer value and type) one should use std::launder."}, {"owner": {"reputation": 2332, "user_id": 6370128, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bab55197dff82f919cd8e4ddbdd81d79?s=128&d=identicon&r=PG&f=1", "display_name": "sandthorn", "link": "https://stackoverflow.com/users/6370128/sandthorn"}, "edited": false, "score": 0, "creation_date": 1533750004, "post_id": 48189026, "comment_id": 90465087, "body": "@Oliv Why can&#39;t we just <code>return *(reinterpret_cast&lt;std::byte*&gt;(this) + 15) == &#39;\\0&#39;;</code> ? Is the logic behind <code>bool is_short_str() const</code> only to check out a byte representation at certain position?"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 2332, "user_id": 6370128, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/bab55197dff82f919cd8e4ddbdd81d79?s=128&d=identicon&r=PG&f=1", "display_name": "sandthorn", "link": "https://stackoverflow.com/users/6370128/sandthorn"}, "edited": false, "score": 0, "creation_date": 1533802083, "post_id": 48189026, "comment_id": 90482602, "body": "@sandthorn Indeed, this is not UB. My question aimed at understanding std::launder, my intent was not to find a why to implement short string optimization without UB."}], "answers": [{"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1536612669, "post_id": 52264726, "comment_id": 91478634, "body": "I need an argumentation for the paragraph starting with &quot;As there is not object,...&quot; because [basic.types] does not say that a pointer must be generated when the object is in its life time period to be <i>pointer inter-convertible</i>."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1536609808, "creation_date": 1536609808, "answer_id": 52264726, "question_id": 48189026, "link": "https://stackoverflow.com/questions/48189026/using-stdlaunder-to-get-a-pointer-to-an-active-object-member-from-a-pointer-to/52264726#52264726", "title": "Using std::launder to get a pointer to an active object member from a pointer to an inactive object?", "body": "<blockquote>\n  <p>Let's consider that the ABI is well specified and that we know that size_r[7] is at the same address as short_str[15]</p>\n</blockquote>\n\n<p>It depends entirely on what that guarantee means exactly.</p>\n\n<p>A compiler is free to guarantee that</p>\n\n<pre><code>Sso.short_str[15]\n</code></pre>\n\n<p>can be accessed and modified and everything even when <code>Sso.large_str</code> is currently active, and get exactly the semantics you expect.</p>\n\n<p>Or it is free not to give that guarantee.</p>\n\n<p>There is no restriction on the behavior or programs that are ill-formed or exhibit undefined behavior.</p>\n\n<p>As there is no object there, <code>&amp;Sso.short_str[15]</code> isn't pointer-interconvertible with anything.  An object that isn't there doesn't have the \"same address\" as another object.</p>\n\n<p>Launder is defined in terms of a pointer to a pre-existing object.  That pointer is then destroyed, and a new object with the same address is created (which is well defined).  <code>std::launder</code> then lets you take the pointer to the object that no longer exists and get a pointer to the existing object.</p>\n\n<p>What you are doing is not that.  If you took <code>&amp;short_str[15]</code> when it <em>was</em> engaged, you'd have a pointer to an object.  And the ABI could say that this was at the same address as <code>size_r[7]</code>.  And now <code>std::launder</code> would be in the domain of validity.</p>\n\n<p>But the compiler could just go a step further and define that <code>short_str[15]</code> refers to the same object as <code>size_r[7]</code> even if it isn't active.</p>\n\n<p>The weakest ABI guarantee that I could see being consistent with your stuff would only work if you took the address of <code>short_str[15]</code> when it was active; later, you would engage the <code>large_str</code>, and then you could launder from <code>&amp;short_str[15]</code> to <code>&amp;size_r[7]</code>.  The strongest ABI guarantee that is consistent with your statement makes the call to <code>std::launder</code> not required.  Somewhere in the middle <code>std::launder</code> would be required.</p>\n"}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 1, "accepted_answer_id": 52264726, "answer_count": 1, "score": 10, "last_activity_date": 1538524086, "creation_date": 1515592540, "last_edit_date": 1538524086, "question_id": 48189026, "link": "https://stackoverflow.com/questions/48189026/using-stdlaunder-to-get-a-pointer-to-an-active-object-member-from-a-pointer-to", "title": "Using std::launder to get a pointer to an active object member from a pointer to an inactive object?", "body": "<p><sub> This question followes this <a href=\"https://stackoverflow.com/questions/48188737/is-pointer-arithmetic-on-inactive-member-of-a-union-ub\">one</a> </sub></p>\n\n<p>Let's consider this example code:</p>\n\n<pre><code>struct sso\n  {\n  union{\n    struct {\n      char* ptr;\n      char size_r[8];\n      } large_str;\n    char short_str[16];\n    };\n\n  bool is_short_str() const{\n    return *std::launder(short_str+15)=='\\0'; //UB?\n    }\n  };\n</code></pre>\n\n<p>If <code>short_str</code> is not the active member dereferencing the pointer without <code>std::launder</code> would be UB. Let's consider that the ABI is well specified and that we know that size_r[7] is at the same address as short_str[15]. Does <code>std::launder(short_str+15)</code> return a pointer to <code>size_r[7]</code> when <code>short_str</code> is not the active member of the union?</p>\n\n<hr>\n\n<p>Nota: I think this is the case because <a href=\"https://timsong-cpp.github.io/cppwp/n4659/ptr.launder#3\" rel=\"noreferrer\">[ptr.launder]/3</a></p>\n\n<blockquote>\n  <p>A byte of storage is reachable through a pointer value that points to an object Y if it is within the storage occupied by Y, an object that is pointer-interconvertible with Y, or the immediately-enclosing array object if Y is an array element. </p>\n</blockquote>\n"}, {"tags": ["c++", "json", "struct", "unreal-engine4"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 8746903, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0d0mepsWCZ4/AAAAAAAAAAI/AAAAAAAAAks/kCO3SUtA-Cg/photo.jpg?sz=128", "display_name": "Carles Gutierrez", "link": "https://stackoverflow.com/users/8746903/carles-gutierrez"}, "is_accepted": true, "score": 4, "last_activity_date": 1526490535, "last_edit_date": 1526490535, "creation_date": 1526490258, "answer_id": 50376462, "question_id": 48189024, "link": "https://stackoverflow.com/questions/48189024/how-can-i-convert-a-jsonobject-to-a-json-string/50376462#50376462", "title": "How can I convert a JsonObject to a JSON String?", "body": "<p>This will serialize the Json to OutputString which you are then free to do whatever you want.</p>\n\n<p>For more information, see <a href=\"http://www.wraiyth.com/?p=198\" rel=\"nofollow noreferrer\">Using Json in Unreal Engine 4</a>.</p>\n\n<pre><code>void  FStructToJsonString(FStructXXX _myStruct) {\n\n    TSharedPtr&lt;FJsonObject&gt; JsonObject = MakeShareable(new FJsonObject);\n\n    JsonObject-&gt;SetStringField(\"param1\", _myStruct.param1);\n    JsonObject-&gt;SetStringField(\"param2\", _myStruct.param2);\n\n    FString OutputString;\n    TSharedRef&lt; TJsonWriter&lt;&gt; &gt; Writer = TJsonWriterFactory&lt;&gt;::Create(&amp;OutputString);\n    FJsonSerializer::Serialize(JsonObject.ToSharedRef(), Writer);\n\n    UE_LOG(LogTemp, Warning, TEXT(\"resulting jsonString -&gt; %s\"), *OutputString);\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 3488393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09441e3128007078488880a5072fb9f4?s=128&d=identicon&r=PG&f=1", "display_name": "user3488393", "link": "https://stackoverflow.com/users/3488393/user3488393"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4216, "favorite_count": 1, "accepted_answer_id": 50376462, "answer_count": 1, "score": 2, "last_activity_date": 1526490535, "creation_date": 1515592531, "last_edit_date": 1526490264, "question_id": 48189024, "link": "https://stackoverflow.com/questions/48189024/how-can-i-convert-a-jsonobject-to-a-json-string", "title": "How can I convert a JsonObject to a JSON String?", "body": "<p>I'm trying to convert a struct and the data it contains into a legitimate JSON String. I work in Unreal Engine in C++.</p>\n\n<p>Struct I'm trying to convert:</p>\n\n<pre><code>USTRUCT()\nstruct DATALOGGING_API FGURaaSDataStruct\n{\n    GENERATED_USTRUCT_BODY()\npublic:\n    UPROPERTY()\n        FString id_session = \"test\";\n    UPROPERTY()\n        TArray&lt;FData&gt; data;\n};\n</code></pre>\n\n<p>Struct that is used in the previous struct:</p>\n\n<pre><code>USTRUCT()\nstruct DATALOGGING_API FData\n{\n    GENERATED_USTRUCT_BODY()\npublic:\n    UPROPERTY()\n        FString data;\n    UPROPERTY()\n        FString tag1;\n    UPROPERTY()\n        FString tag2;\n    UPROPERTY()\n        FString tag3;\n    UPROPERTY()\n        FString tag4;\n    UPROPERTY()\n        TArray&lt;FString&gt; additional_tags;\n    UPROPERTY()\n        FString time;\n};\n</code></pre>\n\n<p>Current aproach: (JsonObject - UE4 specific code)</p>\n\n<pre><code>FGURaaSDataStruct tObj = FGURaaSDataStruct();\n    TSharedPtr&lt;FJsonObject&gt; jsonObject = FJsonObjectConverter::UStructToJsonObject&lt;FGURaaSDataStruct&gt;(tObj);\n</code></pre>\n\n<p>The JsonObject generated here contains all the information necessary to create a Json String, ideally I would like to have a simple way to convert this JsonObject into an JSON String.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer", "pointer-arithmetic"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1515591734, "post_id": 48188737, "comment_id": 83357236, "body": "IIRC it&#39;s not UB until you actually try to dereference the resulting pointer."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1515592063, "post_id": 48188737, "comment_id": 83357437, "body": "@Someprogrammerdude No, pointer arithmetic itself can produce undefined behavior... see, for instance, the special-casing of the one-after-the-end pointer (which you can calculate but cannot dereference). Of course, it&#39;s the sort of pedantic UB which will never get you into trouble, but this question <i>is</i> tagged &quot;language-lawyer&quot;."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 1, "creation_date": 1515592804, "post_id": 48188737, "comment_id": 83357985, "body": "But, on that basis you are saying that a pointer taken when the member was active becomes UB when inactive (which I can live with) and stays UB when back into active scope? To be honest, I find the whole idea that the compiler might optimise a union as anything other than a single unit worrisome."}, {"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1515593095, "post_id": 48188737, "comment_id": 83358164, "body": "You should use <code>std::variant</code> instead of raw unions."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "reply_to_user": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1515593131, "post_id": 48188737, "comment_id": 83358181, "body": "@GemTaylor I was speaking in generalities, not specifically with respect to unions. Remember, though, that UB is about <i>behavior</i>, not <i>values</i>. Dereferencing a pointer to a valid object is fine, regardless of whether dereferencing it at some other point would have produced UB."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1515593196, "post_id": 48188737, "comment_id": 83358229, "body": "@DmitrySazanov Read the fowing question, my intention is not to have memory associated to a tag as is done by <code>std::any</code>. I was wondering if facebook::string could be implemented without UB and without implementation defined behavior."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "reply_to_user": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515598231, "post_id": 48188737, "comment_id": 83361721, "body": "@Sneftel Yes, but the concept of active and lifetime for anything else is (fairly) easy to understand, as it matches scope. Only unions have this concept of sub active states AFAICT. From the POV of anything else, it is OK (not good, but) to have a pointer to something after deleting it, even copy it, if you don&#39;t dereference it. It is intuitively /not/ OK to do pointer math on that stale pointer, though it is harmless in most (all) implementations. It would be valid for some interpreter to say &quot;I can&#39;t see the object any more, so I can&#39;t let you do that pointer math&quot;. And so we get to union."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1515601867, "post_id": 48188737, "comment_id": 83364317, "body": "Accessing an inactive union member is UB in C++. Also see <a href=\"https://stackoverflow.com/q/11373203/608639\">Accessing inactive union member and undefined behavior?</a> You also got an anonymous union, and I think that&#39;s UB too in C++. Also see <a href=\"https://stackoverflow.com/q/2253878/608639\">Why does C++ disallow anonymous structs?</a> In the end, it looks like a lot of C code pigeon-holed into C++."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1515602625, "post_id": 48188737, "comment_id": 83364808, "body": "@jww There are no union member <i>object</i> access here. See <a href=\"https://timsong-cpp.github.io/cppwp/n4659/intro.defs#defns.access\" rel=\"nofollow noreferrer\">&#91;intro.defs&#93;/access</a>. Actualy you are confusing [expr.ref] which is called &quot;class member access&quot;. And the access to the object value which is constrained in [basic.life]"}], "answers": [{"comments": [{"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 1, "creation_date": 1515593331, "post_id": 48189117, "comment_id": 83358290, "body": "I concur with all that. Might also want to mention from class.union &quot;Each non-static data member is allocated as if it were the sole member of a struct&quot;, meaning that all the union members&#39; storages are allocated even when they are not active."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1515593616, "post_id": 48189117, "comment_id": 83358452, "body": "So maybe you want to answer this <a href=\"https://stackoverflow.com/questions/48189026/using-stdlaunder-to-get-a-pointer-to-an-active-object-member-from-a-pointer-to\">related question</a>"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 2, "creation_date": 1515593692, "post_id": 48189117, "comment_id": 83358501, "body": "Are you sure <code>short_str+15</code> does &quot;use the pointer as if the pointer were of type <code>void*</code>&quot;?"}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1515594642, "post_id": 48189117, "comment_id": 83359194, "body": "The result of <code>short_str+15</code> depends on the type of <code>short_str</code>, so I don&#39;t think it is used &quot;as if the pointer were of type <code>void*</code>&quot;."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1523513441, "post_id": 48189117, "comment_id": 86593195, "body": "@xskxzr After some time to think twice, <code>short_str+15</code> depends on the <i>static</i> type of <code>short_str</code>, which is a known compilation-time information and is not impacted by run-time concept like the lifetime of the object it is pointing to."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": true, "score": 5, "last_activity_date": 1515593391, "last_edit_date": 1515593391, "creation_date": 1515592863, "answer_id": 48189117, "question_id": 48188737, "link": "https://stackoverflow.com/questions/48188737/is-pointer-arithmetic-on-inactive-member-of-a-union-ub/48189117#48189117", "title": "Is pointer arithmetic on inactive member of a union UB?", "body": "<p>Writing <code>return short_str+15;</code>, you take the address of an object whose lifetime may have not started, but this does not result in undefined behavior unless you dereference it.</p>\n\n<blockquote>\n  <h3><a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.life#1.2\" rel=\"nofollow noreferrer\"><code>[basic.life]/1.2</code></a></h3>\n  \n  <p>if the object is a union member or subobject thereof,\n  its lifetime only begins if that union member is the initialized\n  member in the union, or as described in <code>[class.union]</code>.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <h3><a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.union#1\" rel=\"nofollow noreferrer\"><code>[class.union]/1</code></a></h3>\n  \n  <p>In a union, a non-static data member is active if its\n  name refers to an object whose lifetime has begun and has not ended\n  (<code>[basic.life]</code>). At most one of the non-static data members of an object of\n  union type can be active at any time, that is, the value of at most\n  one of the non-static data members can be stored in a union at any\n  time.</p>\n</blockquote>\n\n<p>but</p>\n\n<blockquote>\n  <h3><a href=\"https://timsong-cpp.github.io/cppwp/n4659/basic.life#6\" rel=\"nofollow noreferrer\"><code>[basic.life]/6</code></a></h3>\n  \n  <p>Before the lifetime of an object has started but after the storage which the \n  object will occupy has been allocated or, after the lifetime of an\n  object has ended and before the storage which the object occupied is\n  reused or released, any pointer that represents the address of the\n  storage location where the object will be or was located may be used\n  but only in limited ways. For an object under construction or\n  destruction, see <code>[class.cdtor]</code>. Otherwise, such a pointer refers to allocated\n  storage (<code>[basic.stc.dynamic.allocation]</code>), and using the pointer as if the pointer were of\n  type void* , is well-defined. Indirection through such a pointer is\n  permitted but the resulting lvalue may only be used in limited ways,\n  as described below.<br>\n  - [list unrelated to unions]</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1536946409, "post_id": 52334884, "comment_id": 91620732, "body": "This is interesting, I did not take attention to that. To be fair with gcc, this behavior is documented (<a href=\"https://gcc.gnu.org/onlinedocs/gcc-8.2.0/gcc/Optimize-Options.html#Type-punning\" rel=\"nofollow noreferrer\">gcc documentation</a>)"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1536949893, "post_id": 52334884, "comment_id": 91622242, "body": "@Oliv: IMHO, the Standard should recognize a separate category of implementation for compilers like gcc and clang which require that any storage which is ever accessed using any particular non-character type never be written with any other type, nor read with any other non-character type, thus relieving gcc and clang of the burden of trying to comply with the unworkable corner cases of the Effective Type rules, but simultaneously recognizing the legitimacy of access patterns that gcc and clang can&#39;t support, but which other compilers can (even in <code>-fstrict-aliasing</code> mode)."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1536950530, "post_id": 52334884, "comment_id": 91622534, "body": "@Oliv: I think the wheels fell off for gcc when some authors wrote examples of &quot;potentially non-working&quot; code that don&#39;t involve aliasing, even though supporting non-aliasing cases would have been trivial.  This led to the adoption of intermediate representations which filter out the differences between all of the above except <code>noAliasing2</code>, and thus treat both other forms as equivalent to <code>aliasesUnlessDisjoint</code>."}], "tags": [], "owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "is_accepted": false, "score": 3, "last_activity_date": 1536939383, "last_edit_date": 1536939383, "creation_date": 1536938273, "answer_id": 52334884, "question_id": 48188737, "link": "https://stackoverflow.com/questions/48188737/is-pointer-arithmetic-on-inactive-member-of-a-union-ub/52334884#52334884", "title": "Is pointer arithmetic on inactive member of a union UB?", "body": "<p>Whether pointer arithmetic on union members will lead to aliasing depends upon how the pointers will end up being used.  On implementations which supplement the Standard with a guarantee that \"type-access\" rules will only be applied <em>in cases where there is actual aliasing</em>, or (for C++) in cases involving types with non-trivial semantics, the validity of pointer operations would have little to do with whether they are performed upon active or inactive members.</p>\n\n<p>Consider, for example:</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\nuint32_t readU(uint32_t *p) { return *p; }\nvoid writeD(double *p, double v) { *p = v; }\n\nunion udBlob { double dd[2]; uint32_t ww[4]; } udb;\n\nuint32_t noAliasing(int i, int j)\n{\n  if (readU(udb.ww+i))\n    writeD(udb.dd+j, 1.0);\n  return readU(udb.ww+i);\n}\n\nuint32_t aliasesUnlessDisjoint(int i, int j)\n{\n  uint32_t *up = udb.ww+i;\n  double *dp = udb.dd+j;\n\n  if (readU(up))\n    writeD(dp, 1.0);\n  return readU(up);\n}\n</code></pre>\n\n<p>During the execution of readU, no storage that is accessed via <code>*p</code> will be accessed via any other means, so there is no aliasing during the execution of that function.  Likewise during the execution of <code>writeD</code>.  During the execution of <code>noAliasing</code>, all operations that will affect any storage associated with <code>udb</code> are performed using pointers that are all derived from <code>udb</code> and clearly have active lifetimes that clearly do not overlap, so there is no aliasing there.</p>\n\n<p>During the execution of <code>aliasesUnlessDisjoint</code>, all accesses are performed using pointers which are derived from <code>udb</code>, but storage is accessed via <code>up</code> between the creation and use of <code>dp</code>, and storage is accessed via <code>dp</code> between the creation and use of <code>up</code>.  Consequently, <code>*dp</code> and <code>*up</code> will alias during the execution of <code>aliasesUnlessDisjoint</code> unless <code>udb.ww[i]</code> and <code>udb.dd[j]</code> occupy disjoint storage.</p>\n\n<p>Note that both gcc and clang apply type-access rules even in cases like the no-aliasing function above where there is no actual aliasing.  Despite the fact that the Standard explicitly says that an lvalue expression of the form <code>someArray[y]</code> is equivalent to <code>*(someArray+(y))</code>, gcc and clang will only allow reliable access to array members within a union if the <code>[]</code> syntax is used.  For example:</p>\n\n<pre><code>uint32_t noAliasing2(int i, int j)\n{\n  if (udb.ww[i])\n    udb.ww[j] = 1.0;\n  return udb.ww[i];\n}\nuint32_t noAliasing3(int i, int j)\n{\n  if (*(udb.ww+i))\n    *(udb.dd+j) = 1.0;\n  return *(udb.ww+i);\n}\n</code></pre>\n\n<p>Although the code produced by gcc or clang for <code>noAliasing2</code> will reload <code>udb.ww[i]</code> after the operation on <code>udb.dd[j]</code>, the code for <code>noAliasing3</code> will not.  This is technically allowable under the Standard (since the rules, as written, don't allow <code>udb.ww[i]</code> to be accessed under <em>any</em> circumstances!), but that in no way implies any judgment on the part of the authors that the behavior of gcc and clang is appropriate in a high-quality implementations.  Looking purely at the Standards, I see nothing to suggest that any particular one of the <code>noAliasing</code> forms should be more or less valid than any other, but programmers considering use of gcc or clang in <code>-fstrict-aliasing</code> mode should recognize that gcc and clang treat them differently.</p>\n"}], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 1, "accepted_answer_id": 48189117, "answer_count": 2, "score": 12, "last_activity_date": 1536939383, "creation_date": 1515591605, "last_edit_date": 1515592884, "question_id": 48188737, "link": "https://stackoverflow.com/questions/48188737/is-pointer-arithmetic-on-inactive-member-of-a-union-ub", "title": "Is pointer arithmetic on inactive member of a union UB?", "body": "<p>Let's consider this example code:</p>\n\n<pre><code>struct sso\n{\n    union {\n        struct {\n            char* ptr;\n            char size_r[8];\n        } large_str;\n        char short_str[16];\n    };\n\n    const char* get_tag_ptr() const {\n        return short_str+15;\n    }\n};\n</code></pre>\n\n<p>In <a href=\"https://timsong-cpp.github.io/cppwp/n4659/expr.add#4\" rel=\"noreferrer\">[basic.expr]</a> it is specified that pointer arithmetic is allowed as long as the result points to another element of the array (or past the end of an object or of the last element). Nevertheless it is not specified in this setion what happens if the array is an inactive member of a union. I believe it is not an issue <code>short_str+15</code> is never UB. Is it right?</p>\n\n<p><sub> <a href=\"https://stackoverflow.com/questions/48189026/using-stdlaunder-to-get-a-pointer-to-an-active-object-member-from-a-pointer-to\">The following question</a> clearly showes my intent</sub></p>\n"}, {"tags": ["c++", "visual-c++", "null", "codeblocks"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 2, "creation_date": 1515591721, "post_id": 48188735, "comment_id": 83357230, "body": "Are you sure that&#39;s java?  <code>cout &lt;&lt;</code> is definitely a c++ thing."}, {"owner": {"reputation": 185, "user_id": 4471085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09N3Q.jpg?s=128&g=1", "display_name": "FERNman", "link": "https://stackoverflow.com/users/4471085/fernman"}, "edited": false, "score": 0, "creation_date": 1515591764, "post_id": 48188735, "comment_id": 83357253, "body": "It&#39;d be great if you could provide at least a minimal example of how you&#39;d do it in C++, so that we can correct eventual errors. Stackoverflow is here to help you, not to do your work."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1515591774, "post_id": 48188735, "comment_id": 83357262, "body": "Java or C++? It can&#39;t be both, no matter what you try."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1515593384, "post_id": 48188735, "comment_id": 83358323, "body": "If you&#39;re going to ask questions like this, describe what you&#39;re trying to do instead of posting syntax and idioms from a language that is not C++."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515593400, "post_id": 48188735, "comment_id": 83358333, "body": "Are you sure it&#39;s C++? <code>Scanner s = new Scanner (System.in);</code>is not C++."}, {"owner": {"reputation": 27, "user_id": 8434231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00e6b633ed3b2a89e15122511ed7215f?s=128&d=identicon&r=PG&f=1", "display_name": "Syd Ahnaf", "link": "https://stackoverflow.com/users/8434231/syd-ahnaf"}, "edited": false, "score": 0, "creation_date": 1515596303, "post_id": 48188735, "comment_id": 83360370, "body": "sorry, at first i wrote cout &lt;&lt; by mistake... i edited that."}, {"owner": {"reputation": 27, "user_id": 8434231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00e6b633ed3b2a89e15122511ed7215f?s=128&d=identicon&r=PG&f=1", "display_name": "Syd Ahnaf", "link": "https://stackoverflow.com/users/8434231/syd-ahnaf"}, "edited": false, "score": 0, "creation_date": 1515596427, "post_id": 48188735, "comment_id": 83360456, "body": "@manni66 , that is not c++. that&#39;s an example of java."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1515601152, "post_id": 48188832, "comment_id": 83363809, "body": "The <code>more</code> variable is not needed. Use a <code>do..while</code> loop and <code>break</code> the loop when the input is not empty, eg: <code>do { getline(cin, something); if (!something.empty()) break; cout &lt;&lt; &quot;Please enter something: &quot;; } while (true);</code>"}], "tags": [], "owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "is_accepted": false, "score": 2, "last_activity_date": 1515591958, "creation_date": 1515591958, "answer_id": 48188832, "question_id": 48188735, "link": "https://stackoverflow.com/questions/48188735/how-to-handle-a-null-empty-string-input-in-c/48188832#48188832", "title": "How to handle a null/empty string input in C++?", "body": "<p>The equivalent in C++ is more-or-less:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::string;\n\nint main() {\n  string something;\n  bool more = true;\n  cout &lt;&lt; \"Enter something: \";\n\n  while (more) {\n    getline(cin, something);\n\n    if (something.empty()) {\n      cout &lt;&lt; \"Please enter something: \";\n    }\n    else {\n      more = false;\n    }\n  }\n\n  cout &lt;&lt; \"You entered '\" &lt;&lt; something &lt;&lt; \"'.\" &lt;&lt; endl;\n  return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 2, "last_activity_date": 1515593452, "creation_date": 1515593452, "answer_id": 48189284, "question_id": 48188735, "link": "https://stackoverflow.com/questions/48188735/how-to-handle-a-null-empty-string-input-in-c/48189284#48189284", "title": "How to handle a null/empty string input in C++?", "body": "<p>I believe <code>Scanner</code> parses whitespace-separated items.<br>\nIn C++, you need to first read an entire line and then take it apart.<br>\nSomething like this:</p>\n\n<pre><code>std::string x;\nwhile (std::getline(std::cin, x) &amp;&amp; x.empty())\n{\n    std::cout &lt;&lt; \"Please enter something\" &lt;&lt; std::endl;\n}\nstd::istringstream is(x);\nstd::string y;\nwhile (is &gt;&gt; y)\n{\n    // Do something with each \"part\".\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 8434231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00e6b633ed3b2a89e15122511ed7215f?s=128&d=identicon&r=PG&f=1", "display_name": "Syd Ahnaf", "link": "https://stackoverflow.com/users/8434231/syd-ahnaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3399, "favorite_count": 1, "answer_count": 2, "score": -3, "last_activity_date": 1515601031, "creation_date": 1515591596, "last_edit_date": 1515601031, "question_id": 48188735, "link": "https://stackoverflow.com/questions/48188735/how-to-handle-a-null-empty-string-input-in-c", "title": "How to handle a null/empty string input in C++?", "body": "<p>In Java, this can be used:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Scanner s = new Scanner (System.in);\nString x = s.next();\nif(x == null || x.length() == 0)\n     System.out.println(\"Please enter something\") ;\n</code></pre>\n\n<p>which says \"Please enter something\" if the user hits the <kbd>ENTER</kbd> key without typing anything.</p>\n\n<p>How to do this in C++ using Codeblocks or Visual Studio?</p>\n"}, {"tags": ["c++", "templates", "sfinae", "enable-if"], "comments": [{"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 3, "creation_date": 1515591006, "post_id": 48188515, "comment_id": 83356783, "body": "you may take a look at <a href=\"https://stackoverflow.com/questions/25245453/what-is-a-nondeduced-context/25245676#25245676\">what-is-a-nondeduced-context?</a>"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 0, "creation_date": 1515591132, "post_id": 48188515, "comment_id": 83356869, "body": "@MassimilianoJanes Why are the <code>int</code>s not deducible? Based on the error, I would think that the compiler deduced it very well."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "edited": false, "score": 4, "creation_date": 1515591183, "post_id": 48188515, "comment_id": 83356899, "body": "the int&#39;s are deducible, T is not, because it appears in a non-deduced context (ie std::enable_if&lt;&gt;::type)"}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1515591861, "post_id": 48188515, "comment_id": 83357320, "body": "Is this what you want? <a href=\"https://ideone.com/2h0ZHl\" rel=\"nofollow noreferrer\">ideone.com/2h0ZHl</a>"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "reply_to_user": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1515592030, "post_id": 48188515, "comment_id": 83357416, "body": "@KillzoneKid Yes, that works as well (so does <code>template &lt;typename T, size_t N, size_t M, typename Dummy = typename std::enable_if&lt;(M == 1 || N == 1), T&gt;::type&gt;</code>). But if my example in the parenthesis works, I don&#39;t see why it doesn&#39;t when in the parameter list. In both cases the compiler had to deduce the type of <code>T</code>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515592128, "post_id": 48188515, "comment_id": 83357495, "body": "@AviGinsburg: Yes but what Massimiliano has been trying to say is that in the case it doesn&#39;t work, you have made it so that <code>T</code> is in a non deduced context."}], "answers": [{"comments": [{"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1515592230, "post_id": 48188899, "comment_id": 83357562, "body": "I&#39;d avoid the <code>void*</code> stuff for now, whether it is legal or not has been up for debate. There&#39;s a defect report for it around here somewhere. Better to just make it an <code>int = 0</code> or something. Edit: Here: <a href=\"https://cplusplus.github.io/EWG/ewg-active.html#175\" rel=\"nofollow noreferrer\">cplusplus.github.io/EWG/ewg-active.html#175</a>"}, {"owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "edited": false, "score": 0, "creation_date": 1515592294, "post_id": 48188899, "comment_id": 83357601, "body": "The link is to the current draft, yes? Is it different for e.g. c++11?"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1515592632, "post_id": 48188899, "comment_id": 83357858, "body": "@AndyG - updated, thanks. AviGinsburg - this basic rule has always been there, as far as I know."}, {"owner": {"reputation": 930, "user_id": 8951473, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UTexO-HsNuo/AAAAAAAAAAI/AAAAAAAAAEg/tiZWCUU3W8w/photo.jpg?sz=128", "display_name": "oisyn", "link": "https://stackoverflow.com/users/8951473/oisyn"}, "edited": false, "score": 0, "creation_date": 1515594139, "post_id": 48188899, "comment_id": 83358829, "body": "<i>In other words, anything that contains :: cannot be deduced.</i> Unless that <code>::</code> is part of a poiner-to-member declaration ;)"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": true, "score": 3, "last_activity_date": 1515598357, "last_edit_date": 1515598357, "creation_date": 1515592147, "answer_id": 48188899, "question_id": 48188515, "link": "https://stackoverflow.com/questions/48188515/sfinae-works-as-return-type-but-not-parameter-type/48188899#48188899", "title": "SFINAE works as return type, but not parameter type", "body": "<p><code>std::enable_if&lt;..., T&gt;::type</code> is a nested name, and as such cannot be deduced:</p>\n\n<p>See <a href=\"https://timsong-cpp.github.io/cppwp/n3337/temp.deduct.type#5.1\" rel=\"nofollow noreferrer\">[temp.deduct.type]/5</a>:</p>\n\n<blockquote>\n  <p>The non-deduced contexts are:</p>\n  \n  <p>&mdash;\n      The <em>nested-name-specifier</em> of a type that was specified using a <em>qualified-id</em>.</p>\n  \n  <p>. . .</p>\n</blockquote>\n\n<p>As a workaround, move the <code>enable_if</code> to a separate template argument:</p>\n\n<pre><code>template &lt;typename T, size_t N, size_t M, typename std::enable_if&lt;(M == 1 || N == 1), int&gt;::type = 0&gt;\nstatic inline T Length(\n    const Matrix&lt;T, N, M&gt; &amp; input)\n</code></pre>\n"}], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 1, "accepted_answer_id": 48188899, "answer_count": 1, "score": 1, "last_activity_date": 1515598357, "creation_date": 1515590807, "question_id": 48188515, "link": "https://stackoverflow.com/questions/48188515/sfinae-works-as-return-type-but-not-parameter-type", "title": "SFINAE works as return type, but not parameter type", "body": "<p>I was trying to use <code>enable_if</code> to avoid duplicating code. It works fine as long as placed in the return type, but not if it's in the parameters. Before this gets closed as a dup of <a href=\"https://stackoverflow.com/questions/15427667/sfinae-working-in-return-type-but-not-as-template-parameter\">this</a>, the error I'm getting is not a redefinition, but a \"no matching function for call.\" Here's my MCVE (not so \"C\", or so \"M\" for that matter) using VS2015 and g++ 7.2.0 (mingw):</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;array&gt;\n#include &lt;algorithm&gt;\n\n\ntemplate &lt;typename T, size_t M, size_t N&gt;\nclass Matrix\n{\npublic:\n    static const size_t ROWS = M;\n    static const size_t COLS = N;\n    typedef T SCALAR;\n\n    SCALAR operator[](const size_t index) const\n    {\n        static_assert((COLS == 1 || ROWS == 1), \"operator[] is only for vectors (single row or column).\");\n        return m_elements.at(index);\n    }\n\n    SCALAR&amp; operator[](const size_t index)\n    {\n        static_assert((COLS == 1 || ROWS == 1), \"operator[] is only for vectors (single row or column).\");\n        return m_elements.at(index);\n    }\n\n    std::array&lt;T, M * N&gt; m_elements;\n};\n\ntemplate &lt;typename T, size_t N, size_t M&gt;\nstatic inline T Length(\n    const Matrix&lt;typename std::enable_if&lt;(M == 1 || N == 1), T&gt;::type, N, M&gt; &amp; input)\n{\n    T value = 0;\n    for (size_t i = 0; i &lt; std::max(N, M); ++i)\n    {\n        value += (input[i] * input[i]);\n    }\n    return std::sqrt(value);\n}\n\ntemplate &lt;typename T, size_t M, size_t N&gt;\nstatic inline \nMatrix&lt;typename std::enable_if&lt;(M == 3 &amp;&amp; N == 1) || (M == 1 &amp;&amp; N == 3), T&gt;::type , M, N&gt;\nCrossProduct(const Matrix&lt;T, M, N&gt; &amp; a, const Matrix&lt;T, M, N&gt; &amp; b)\n{\n    Matrix&lt;T, M, N&gt; result;\n    result[0] = a[1] * b[2] - a[2] * b[1];\n    result[1] = a[2] * b[0] - a[0] * b[2];\n    result[2] = a[0] * b[1] - a[1] * b[0];\n    return result;\n}\n\n\nMatrix&lt;double, 1, 1&gt; m11;\nMatrix&lt;double, 3, 1&gt; m31;\nMatrix&lt;double, 1, 3&gt; m13;\nMatrix&lt;double, 3, 3&gt; m33;\n\n\nauto l0 = Length(m11);  // Should work, but doesn't: no matching function for call to 'Length(Matrix&lt;double, 1, 1&gt;&amp;)'\nauto l1 = Length(m31);  // Should work, but doesn't: no matching function for call to 'Length(Matrix&lt;double, 3, 1&gt;&amp;)'\nauto l2 = Length(m13);  // Should work, but doesn't: no matching function for call to 'Length(Matrix&lt;double, 1, 3&gt;&amp;)'\n//auto l3 = Length(m33);    // Shouldn't work, and doesn't: no matching function for call to 'Length(Matrix&lt;double, 3, 3&gt;&amp;)'\n\nauto v1 = CrossProduct(m13, m13); //Works, as expected\n//auto v2 = CrossProduct(m11, m11); // As expected: enable_if.cpp:71:32: error: no matching function for\n                                    // call to 'CrossProduct(Matrix&lt;double, 1, 1&gt;&amp;, Matrix&lt;double, 1, 1&gt;&amp;)'\n</code></pre>\n\n<p>If I change the signature of <code>Length</code> to </p>\n\n<pre><code>static inline typename std::enable_if&lt;(M == 1 || N == 1), T&gt;::type \\\nLength(const math::Matrix&lt;T, N, M&gt; &amp; input)\n</code></pre>\n\n<p>it works fine. But the error it gives me seems to indicate that it was able to determine the correct signature (e.g. <code>Length(Matrix&lt;double, 3, 1&gt;&amp;)</code>).</p>\n\n<p>Why is the compiler unable to find a matching function if the <code>enable_if</code> is in the parameter list, but is able to if it's in the return type?</p>\n"}, {"tags": ["c#", "c++", "configuration-files"], "comments": [{"owner": {"reputation": 5911, "user_id": 1688785, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/07b2da937aa23792045dff6ff19556eb?s=128&d=identicon&r=PG", "display_name": "Caramiriel", "link": "https://stackoverflow.com/users/1688785/caramiriel"}, "edited": false, "score": 1, "creation_date": 1515590165, "post_id": 48188313, "comment_id": 83356233, "body": "Describe &#39;better&#39;. You&#39;ll see that this is an abstract term and is primarily opinion based."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 0, "creation_date": 1515590536, "post_id": 48188313, "comment_id": 83356488, "body": "What are you unhappy with regarding XML and JSON? Are you experiencing ease-of-use or efficiency problems?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1515590594, "post_id": 48188313, "comment_id": 83356534, "body": "Not human readable? SQLite?"}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1515590967, "post_id": 48188313, "comment_id": 83356766, "body": "You can simply use some hash map to store configuration in some simple text file, without imply some concepts of database structure. You can also encrypt values for key set, or could even encrypt all content."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 1, "creation_date": 1515591049, "post_id": 48188313, "comment_id": 83356820, "body": "Do you mean you want it to be difficult for humans to read? or do you mean you don&#39;t care whether or not it is easy for humans to read?"}, {"owner": {"reputation": 11092, "user_id": 982149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LdDoZ.png?s=128&g=1", "display_name": "Fildor", "link": "https://stackoverflow.com/users/982149/fildor"}, "edited": false, "score": 0, "creation_date": 1515591396, "post_id": 48188313, "comment_id": 83357028, "body": "Working on Windows, how about the good old &quot;.ini&quot; ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1515591631, "post_id": 48188313, "comment_id": 83357175, "body": "XML and JSON will be readable by humans. So will ini files."}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 9185797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJqOX.jpg?s=128&g=1", "display_name": "Phins", "link": "https://stackoverflow.com/users/9185797/phins"}, "edited": false, "score": 0, "creation_date": 1515591603, "post_id": 48188608, "comment_id": 83357160, "body": "Thanks, I think I&#39;ll create my own format with encoding."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6921302"}, "reply_to_user": {"reputation": 689, "user_id": 9185797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJqOX.jpg?s=128&g=1", "display_name": "Phins", "link": "https://stackoverflow.com/users/9185797/phins"}, "edited": false, "score": 0, "creation_date": 1515591784, "post_id": 48188608, "comment_id": 83357269, "body": "Yeah, thanks for the Answer-marking and good luck :)"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6921302"}, "is_accepted": true, "score": 0, "last_activity_date": 1515592621, "last_edit_date": 1515592621, "creation_date": 1515591132, "answer_id": 48188608, "question_id": 48188313, "link": "https://stackoverflow.com/questions/48188313/configuration-files-between-different-languages/48188608#48188608", "title": "Configuration files between different languages", "body": "<p>There is no \"best way\", its fully up to you.</p>\n\n<p>If you think XML (clean&amp;stable) is to hard or the implementation is to big, you could also use easy formats like CSV where you would have to know what Information is on which place:</p>\n\n<pre><code>C:\\Userspath;MyFavouriteColor;MyWindowSize;etc.\n</code></pre>\n\n<p>I think for you it would be good to create an own format.\nYou have multiple ways to format your data:</p>\n\n<ul>\n<li>Seperate it by characters</li>\n<li>Order it by numbers</li>\n<li>Create a tree structure (would be like XML)</li>\n</ul>\n\n<p>Some more Examples: <a href=\"https://en.wikipedia.org/wiki/Configuration_file\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Configuration_file</a></p>\n\n<p>Hope that helped ;)</p>\n"}], "owner": {"reputation": 689, "user_id": 9185797, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJqOX.jpg?s=128&g=1", "display_name": "Phins", "link": "https://stackoverflow.com/users/9185797/phins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1532334202, "accepted_answer_id": 48188608, "answer_count": 1, "score": -1, "last_activity_date": 1515592621, "creation_date": 1515590050, "last_edit_date": 1515590272, "question_id": 48188313, "link": "https://stackoverflow.com/questions/48188313/configuration-files-between-different-languages", "closed_reason": "Needs more focus", "title": "Configuration files between different languages", "body": "<p>What would be the best way to implement a configuration file between c# and c++? It has not to be readable by humans. </p>\n\n<p>I thougt about XML or JSON, are there easier or more efficient ways to do it?</p>\n"}, {"tags": ["c++", "forward-declaration"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1515589030, "post_id": 48187983, "comment_id": 83355627, "body": "Declarations of <i>objects</i>, of <i>instance</i> need the full definition of the class or structure. You can bypass it by using pointers or references. Or by modifying your design so you don&#39;t have the circular dependency."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 7, "creation_date": 1515589048, "post_id": 48187983, "comment_id": 83355640, "body": "If every <code>obj1</code> has an <code>obj2</code> inside it, and vice versa, how big do you expect <code>obj1</code> to be?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1515589184, "post_id": 48187983, "comment_id": 83355713, "body": "no offense, but neither <code>obj1</code> nor <code>obj2</code> make any sense as you wrote it. If it was possible what you wrote they both would use infinite amount of memory (sorry for the spoiler)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1515589242, "post_id": 48187983, "comment_id": 83355748, "body": "btw there is nothing that would require you to write such classes, so you need to fix your design, not try to force it somehow"}, {"owner": {"reputation": 668, "user_id": 1105735, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b0c52aa5f57710dedce160dea93e7d66?s=128&d=identicon&r=PG", "display_name": "Oliver Ciappara", "link": "https://stackoverflow.com/users/1105735/oliver-ciappara"}, "edited": false, "score": 3, "creation_date": 1515589256, "post_id": 48187983, "comment_id": 83355756, "body": "If you explained why this circular dependency is needed we might be able to suggest an alternative design. Circular dependencies hint to bad code design"}, {"owner": {"reputation": 65, "user_id": 8376572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4df8d9d00098be55fe73bdd0cfc1a617?s=128&d=identicon&r=PG&f=1", "display_name": "Popo Heche", "link": "https://stackoverflow.com/users/8376572/popo-heche"}, "edited": false, "score": 0, "creation_date": 1515591313, "post_id": 48187983, "comment_id": 83356973, "body": "ya, this was a stupid question , i just miss interpretae my problem , any ways thanks"}], "answers": [{"tags": [], "owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "is_accepted": false, "score": 2, "last_activity_date": 1515592502, "last_edit_date": 1515592502, "creation_date": 1515590696, "answer_id": 48188482, "question_id": 48187983, "link": "https://stackoverflow.com/questions/48187983/header-files-foward-declaration/48188482#48188482", "title": "Header files, foward declaration", "body": "<p>In this situation circular dependy make no sence. But if you remove it, problem with declarations would still be present. After you write a forward declaration, your original declaration from the header file is being <strong>redeclared</strong>.\nActually, forward declarations are used to <strong>avoid including</strong> file into another header. So you just need to write <code>class obj1;</code> before declaring obj2 and include obj1.hpp in obj2 source file (.cpp).\nStill, forward declaration works only if you use those objects by reference or a pointer. In your code</p>\n\n<pre><code>class obj1\n{\n    obj2 e;\n};\n</code></pre>\n\n<p>obj2 is composed by value, so it wouldn't compile with forward declaration. You need to remove it and leave only header inclusion.</p>\n\n<p>P.S. sorry for 'declaration' word which appears too often</p>\n"}], "owner": {"reputation": 65, "user_id": 8376572, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4df8d9d00098be55fe73bdd0cfc1a617?s=128&d=identicon&r=PG&f=1", "display_name": "Popo Heche", "link": "https://stackoverflow.com/users/8376572/popo-heche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1515592502, "creation_date": 1515588881, "question_id": 48187983, "link": "https://stackoverflow.com/questions/48187983/header-files-foward-declaration", "title": "Header files, foward declaration", "body": "<p>I was codding my project and i have come across this problem.\nI have 2 header, each one with a class, that needs the other, as you can see below.</p>\n\n<p>I thought that this was just needed the use of foward declaration, but still doesnt work.\nIm out of Ideas.</p>\n\n<p>Looking for Help :D</p>\n\n<p>Headers , Main , and compiler erros listed bellow: </p>\n\n<p>Header 1  </p>\n\n<pre><code>#ifndef OBJ2_H\n#define OBJ2_H\n#include \"obj1.h\"\nclass obj1;\n\nclass obj2{\npublic:\n    obj1 e;\n};\n\n#endif // OBJ2_H\n</code></pre>\n\n<p>Header 2</p>\n\n<pre><code>#ifndef OBJ1_H\n#define OBJ1_H\n#include \"obj2.h\"\nclass obj2;\n\nclass obj1\n{\n    obj2 e;\n};\n\n#endif // OBJ1_H\n</code></pre>\n\n<p>Main</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"obj1.h\"\n#include \"obj2.h\"\nusing namespace std;\n\nint main()\n{\n    obj1 class1;\n    obj2 class2;\n    cout &lt;&lt; \"Hello world!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Error:</p>\n\n<ul>\n<li>include\\obj2.h|8|error: field 'e' has incomplete type 'obj1'|</li>\n<li>include\\obj1.h|8|error: field 'e' has incomplete type 'obj2'|</li>\n</ul>\n"}, {"tags": ["c++", "arrays", "read-text"], "comments": [{"owner": {"reputation": 1935, "user_id": 2650325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1SJPZ.jpg?s=128&g=1", "display_name": "Victor M Herasme Perez", "link": "https://stackoverflow.com/users/2650325/victor-m-herasme-perez"}, "edited": false, "score": 0, "creation_date": 1515593547, "post_id": 48187948, "comment_id": 83358403, "body": "You should provide a small example of what you&#39;ve done so far to solve the problem. It is explained here <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9198534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71578e8ebdd894c406f4b00d5bb0325f?s=128&d=identicon&r=PG", "display_name": "Aron P.", "link": "https://stackoverflow.com/users/9198534/aron-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1515589487, "creation_date": 1515589487, "answer_id": 48188161, "question_id": 48187948, "link": "https://stackoverflow.com/questions/48187948/reading-tab-separated-values-from-text-file-into-array/48188161#48188161", "title": "Reading tab-separated values from text file into array", "body": "<p>You may consider to read the matrix line by line with a loop, and split the current line using a tokenizer (e.g. <code>std::strtok</code>) or a nested loop that splits the line at your delimiters.\nThere is a thread about <a href=\"https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c\">tokenizers</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1515591327, "post_id": 48188537, "comment_id": 83356983, "body": "A bit of explanation would be an incentive for me to upvote your answer ;) + OP&#39;s values are tab-separated (but this is a detail)."}, {"owner": {"reputation": 2298, "user_id": 1678247, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f8549f94187ef55f60933aea815d64ff?s=128&d=identicon&r=PG", "display_name": "Mayank Jain", "link": "https://stackoverflow.com/users/1678247/mayank-jain"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1515591609, "post_id": 48188537, "comment_id": 83357165, "body": "I added comments to code. If you have any specific question feel free to ask me."}], "tags": [], "owner": {"reputation": 2298, "user_id": 1678247, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/f8549f94187ef55f60933aea815d64ff?s=128&d=identicon&r=PG", "display_name": "Mayank Jain", "link": "https://stackoverflow.com/users/1678247/mayank-jain"}, "is_accepted": false, "score": 2, "last_activity_date": 1515591574, "last_edit_date": 1515591574, "creation_date": 1515590898, "answer_id": 48188537, "question_id": 48187948, "link": "https://stackoverflow.com/questions/48187948/reading-tab-separated-values-from-text-file-into-array/48188537#48188537", "title": "Reading tab-separated values from text file into array", "body": "<p>Something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\n// Assume input is 12,34,56. You can use \n// getline or something to read a line from\n// input file. \nstd::string input = \"12,34,56\";\n\n// Now convert the input line which is string\n//  to string stream. String stream is stream of \n// string just like cin and cout. \nstd::istringstream ss(input);\nstd::string token;\n\n// Now read from stream with \",\" as \n// delimiter and store text in token named variable.\nwhile(std::getline(ss, token, ',')) {\n    std::cout &lt;&lt; token &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9198228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8900063ba37128643ae1582159665332?s=128&d=identicon&r=PG&f=1", "display_name": "kleman", "link": "https://stackoverflow.com/users/9198228/kleman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1023, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1516104927, "creation_date": 1515588755, "last_edit_date": 1515591240, "question_id": 48187948, "link": "https://stackoverflow.com/questions/48187948/reading-tab-separated-values-from-text-file-into-array", "title": "Reading tab-separated values from text file into array", "body": "<p>Hey I am quite new to C++ and I am facing a problem:</p>\n\n<p>I have a textfile which looks like this:</p>\n\n<pre><code>500\n\n1120\n\n10\n\nnumber1,1 number1,2   ...   number1,500\n\nnumber2,1\n\n.\n\n.\n\nnumber1120,1\n</code></pre>\n\n<p>So the first two values on top of the text-file describe the dimensions of the matrix. I now want to write a code, which reads all the files from the matrix into an array or vector of <code>int</code> values. I can read the first three values (500, 1120,10) and write them into an integer value using <code>getline</code> and <code>stringstream</code>, but I can't figure out how to read the matrix tap separated with a loop.</p>\n"}, {"tags": ["c++", "c", "64-bit", "numerical-methods", "intel-ipp"], "comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1515589497, "post_id": 48187923, "comment_id": 83355886, "body": "If you&#39;re performing multiple operations on your data then you probably want to strip-mine it anyway, with a chunk size <i>much</i> smaller than 2^30 elements."}, {"owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "reply_to_user": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1515589922, "post_id": 48187923, "comment_id": 83356117, "body": "@PaulR got it. Does the advice for small chunks hold even if I won&#39;t be doing multiple-operations, i.e., just add or abs or conj on an array?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1515590095, "post_id": 48187923, "comment_id": 83356203, "body": "No, no need to strip-mine if it&#39;s just a single operation and there is no possibility of combining it with other operations. If this is the case with simple operations like add/abs though then you will most likely be memory bandwidth-limited and will not see a significant improvement from using optimised routines."}], "owner": {"reputation": 5909, "user_id": 500207, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DsvTT.jpg?s=128&g=1", "display_name": "Ahmed Fasih", "link": "https://stackoverflow.com/users/500207/ahmed-fasih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1515588678, "creation_date": 1515588678, "question_id": 48187923, "link": "https://stackoverflow.com/questions/48187923/intel-ipp-functions-for-arrays-beyond-32-bit-size-limits", "title": "Intel IPP functions for arrays beyond 32-bit size limits?", "body": "<p>I\u2019m evaluating <a href=\"https://software.intel.com/en-us/ipp-dev-reference\" rel=\"nofollow noreferrer\">Intel IPP</a> to speed up certain parts of our code, e.g.,</p>\n\n<ul>\n<li><a href=\"https://software.intel.com/en-us/ipp-dev-reference-add\" rel=\"nofollow noreferrer\">adding</a></li>\n<li><a href=\"https://software.intel.com/en-us/node/502108\" rel=\"nofollow noreferrer\">absolute value</a></li>\n<li><a href=\"https://software.intel.com/en-us/ipp-dev-reference-sortradixascend-sortradixdescend\" rel=\"nofollow noreferrer\">sorting</a></li>\n</ul>\n\n<p>among others. I note this <a href=\"https://software.intel.com/en-us/ipp-dev-guide-using-intel-integrated-performance-primitives-platform-aware-functions\" rel=\"nofollow noreferrer\">page in the manual</a>:</p>\n\n<blockquote>\n  <p>While the rest of Intel IPP functions support only signals or images of 32-bit integer size, Intel IPP platform-aware functions work with 64-bit object sizes if it is supported by the target platform. \u2026 You can distinguish Intel IPP platform-aware functions by the <code>L</code> suffix in the function name, for example, <code>ippiAdd_8u_C1RSfs_L</code>. With Intel IPP platform-aware functions you can overcome 32-bit size limitations.</p>\n</blockquote>\n\n<p>Of the three I mentioned above, it appears only <em>sorting</em> has 64-bit-aware functionality.</p>\n\n<p>So, questions: can this be right? Can IPP <em>not</em> accelerate addition/abs on arrays beyond 32-bit indexing? Is there a master list of functions that have \u201cplatform-aware\u201d (64-bit) alternatives in IPP? Do people hand-roll workarounds to the 32-bit limit, like calling the add/abs functions in a loop over 2^30-sized chunks?</p>\n"}, {"tags": ["c++", "sockets", "networking", "tcp", "winsock"], "comments": [{"owner": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1515589481, "post_id": 48187913, "comment_id": 83355879, "body": "UDP isn&#39;t connection based, <code>listen()</code> will fail and <code>accept()</code> will as well. Also, telnet is a TCP service."}, {"owner": {"reputation": 65, "user_id": 6248037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5V1aF.jpg?s=128&g=1", "display_name": "Pierre LAGOUTTE", "link": "https://stackoverflow.com/users/6248037/pierre-lagoutte"}, "reply_to_user": {"reputation": 32308, "user_id": 20270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37335856df5e5e73d82bca5a805bd647?s=128&d=identicon&r=PG", "display_name": "Hasturkun", "link": "https://stackoverflow.com/users/20270/hasturkun"}, "edited": false, "score": 0, "creation_date": 1515590310, "post_id": 48187913, "comment_id": 83356332, "body": "@Hasturkun I just checked with <code>netstat</code>, it&#39;s effectively a TCP connection. So I updated my post with a new code. Thank you"}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1515590852, "post_id": 48187913, "comment_id": 83356703, "body": "You got the &quot;listening&quot; concept backwards; your ADS-B process listens on port 47806, in your client app you just need to connect to localhost, port 47806 and you&#39;ll get your messages sent to you via that connection."}, {"owner": {"reputation": 65, "user_id": 6248037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5V1aF.jpg?s=128&g=1", "display_name": "Pierre LAGOUTTE", "link": "https://stackoverflow.com/users/6248037/pierre-lagoutte"}, "reply_to_user": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1515592788, "post_id": 48187913, "comment_id": 83357969, "body": "@RustyX It&#39;s my first use of sockets, so I&#39;m a little bit lost. So, I defined the ip address with <code>InetPton</code>, I use the <code>connect</code> function instead of <code>bind</code> and <code>recv</code> instead of <code>accept</code>. Thank you very much !"}], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 6248037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5V1aF.jpg?s=128&g=1", "display_name": "Pierre LAGOUTTE", "link": "https://stackoverflow.com/users/6248037/pierre-lagoutte"}, "is_accepted": true, "score": 2, "last_activity_date": 1515593010, "creation_date": 1515593010, "answer_id": 48189154, "question_id": 48187913, "link": "https://stackoverflow.com/questions/48187913/c-winsock-tcp-listening/48189154#48189154", "title": "C++ winsock TCP listening", "body": "<p>Here's the right code :</p>\n\n<pre><code>WSADATA WSAData;\nWSAStartup(MAKEWORD(2, 0), &amp; WSAData);\n\nSOCKET sock;\nSOCKADDR_IN socket_in;\nInetPton(AF_INET, \"127.0.0.1\", &amp; socket_in.sin_addr.s_addr);\nsocket_in.sin_family = AF_INET;\nsocket_in.sin_port = htons(47806);\nsock = socket(AF_INET, SOCK_STREAM, 0);\nconnect(sock, (SOCKADDR*)&amp; socket_in, sizeof(socket_in));\n\nint valid = 0;\nchar buffer[512] = \"\";\nwhile (TRUE) {\n    valid = recv(sock, buffer, sizeof(buffer), 0);\n\n    if (valid != INVALID_SOCKET) {\n        std::cout &lt;&lt; buffer;\n    }\n}\n</code></pre>\n\n<p>My program is a <strong>client</strong> and not a server. So I have to define an IP adress with <code>InetPton</code>, connect to the server with <code>connect</code> and receive the messages with <code>recv</code>.</p>\n\n<p>Thank you @Hasturkun and @RustyX for help and explanations.</p>\n"}], "owner": {"reputation": 65, "user_id": 6248037, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5V1aF.jpg?s=128&g=1", "display_name": "Pierre LAGOUTTE", "link": "https://stackoverflow.com/users/6248037/pierre-lagoutte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1891, "favorite_count": 0, "accepted_answer_id": 48189154, "answer_count": 1, "score": 0, "last_activity_date": 1515593010, "creation_date": 1515588650, "last_edit_date": 1515590372, "question_id": 48187913, "link": "https://stackoverflow.com/questions/48187913/c-winsock-tcp-listening", "title": "C++ winsock TCP listening", "body": "<p>I have a software that decodes ADS-B messages (from planes) and sends results in hexadecimal to a port (47806).</p>\n\n<p>I would like to listen to this port to show that data, so I wrote this :</p>\n\n<pre><code>WSADATA WSAData;\nWSAStartup(MAKEWORD(2, 0), &amp; WSAData);\n\nSOCKET sock;\nSOCKADDR_IN socket_in;\nsocket_in.sin_addr.s_addr = htonl(INADDR_ANY);\nsocket_in.sin_family = AF_INET;\nsocket_in.sin_port = htons(47806);\nsock = socket(AF_INET, SOCK_STREAM, 0);\nbind(sock, (SOCKADDR*)&amp; socket_in, sizeof(socket_in));\n\nlisten(sock, 0);\nint valid = 0;\nwhile (TRUE) {\n    int size_socket_in = sizeof(socket_in);\n    valid = accept(sock, (SOCKADDR*)&amp; socket_in, &amp; size_socket_in);\n\n    if (valid != INVALID_SOCKET) {\n        std::cout &lt;&lt; \"OK\";\n    }\n}\n</code></pre>\n\n<p>This code should display \"OK\" each time a message is received, but it doesn't.\nI can read data with a Telnet software, like PuTTY :\n<a href=\"https://i.stack.imgur.com/EgHCT.png\" rel=\"nofollow noreferrer\">PuTTY telnet on port 47806</a></p>\n\n<p>I don't understand why my code doesn't work.</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1515588810, "post_id": 48187910, "comment_id": 83355456, "body": "<a href=\"http://en.cppreference.com/w/cpp/experimental/future/then\" rel=\"nofollow noreferrer\"><code>std::future::then</code></a> maybe?"}, {"owner": {"reputation": 173, "user_id": 8681249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f6473eed1deafe1a41bc3466cd9f97?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8681249/john"}, "reply_to_user": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1515671807, "post_id": 48187910, "comment_id": 83393906, "body": "Very good point, havent considered it."}], "answers": [{"tags": [], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "is_accepted": false, "score": 1, "last_activity_date": 1515677155, "creation_date": 1515677155, "answer_id": 48208197, "question_id": 48187910, "link": "https://stackoverflow.com/questions/48187910/is-there-a-c-equivalent-of-a-logical-when/48208197#48208197", "title": "Is there a C++ equivalent of a logical when?", "body": "<p>The solution within MPI is to use <code>MPI_Test</code>.</p>\n\n<pre><code>int flag;\nMPI_Test(&amp;recv_request, &amp;flag, &amp;status);\nwhile (!flag) {\n    do_work();\n    MPI_Test(&amp;recv_request, &amp;flag, &amp;status);\n}\n// At this point, the request state is the same as for a completed MPI_Wait\n</code></pre>\n\n<p>The work granularity of <code>do_work</code> is a trade-off. If each call is too little work, the overhead of continuous testing will be large and little work will be done. If it is too much work in each call, the latency will be increased. The latency compared to <code>MPI_Wait</code> is always worse if you use <code>MPI_Test</code>.</p>\n\n<p>Now there are other ways to do this by using threads, but that can be more complicated and especially requires a MPI implementation that is compatible with the necessary thread level.</p>\n"}], "owner": {"reputation": 173, "user_id": 8681249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3f6473eed1deafe1a41bc3466cd9f97?s=128&d=identicon&r=PG&f=1", "display_name": "john", "link": "https://stackoverflow.com/users/8681249/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1515677223, "creation_date": 1515588647, "last_edit_date": 1515677223, "question_id": 48187910, "link": "https://stackoverflow.com/questions/48187910/is-there-a-c-equivalent-of-a-logical-when", "title": "Is there a C++ equivalent of a logical when?", "body": "<p>Is there a way to condition something with a trigger?\nSpecifically, I have an MPI Implementation and Want to send some data immediately after the receipt of some other.\nUntil now I have used:</p>\n\n<pre><code>MPI_Wait(&amp;recv_request,&amp;status)\nMPI_ISend(...)\n</code></pre>\n\n<p>I was wondering if there was a way to skip the waiting and do some computations and only come back when the <code>recv_request</code> has been triggered.</p>\n"}, {"tags": ["c++", "iterator", "set"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1515588657, "post_id": 48187851, "comment_id": 83355359, "body": "The iterators returned by <code>lower_bound</code> and <code>upper_bound</code> will always define a valid range: <code>[lower, upper)</code>. You don&#39;t need to check it. If the two are equal the range is empty, just like any other range."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1515590277, "post_id": 48187851, "comment_id": 83356302, "body": "unless you mean you have something akin to <code>auto [it1, it2] = set.equal_range(value); if (rand()%2) swap(it1, it2);</code>"}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515591560, "post_id": 48187851, "comment_id": 83357137, "body": "The iterators don&#39;t come from lower and upper bound on the same value, and the logic is somewhat involved, so the iterators could be in any order. Though, I could of course keep track of the values passed to the bound functions..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515592525, "post_id": 48187851, "comment_id": 83357784, "body": "&quot;Is there an elegant solution&quot; yes change logic so iterators always come in order"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515592878, "post_id": 48187851, "comment_id": 83358044, "body": "Obvious solution is to use sorted vector instead of <code>std::set&lt;&gt;</code> but there is no enough details to say if such solution is feasable"}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515599430, "post_id": 48187851, "comment_id": 83362608, "body": "Thanks for the sorted vector suggestion. I use the set for its reasonable trade-off between insert/delete and lookup complexity. In my case I may indeed be able to work with a sorted vector since there are more lookups than modifications."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515592629, "post_id": 48188868, "comment_id": 83357851, "body": "Nice solution but it is more expensive than dereferencing"}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1515592745, "post_id": 48188868, "comment_id": 83357934, "body": "@Slava you&#39;re totally right, but you&#39;d need to match the value type operator to the given set&lt;&gt; comparator ... ymmv; as said, the best way is to simply  fix the code the op didn&#39;t show"}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515599274, "post_id": 48188868, "comment_id": 83362497, "body": "Thanks for the suggestion, but I use the set in the first place to avoid linear complexity. Sorry for not showing the full code, but it seems to me that the question is of interest in its own right. Since the set is a tree, it should be possible to solve the problem in logarithmic time, but apparently this is not possible with the interfaces provided by the standard."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515599573, "post_id": 48188868, "comment_id": 83362713, "body": "@tglas the problem is that, as per question requirements, we cannot dereference the iterators; otherwise, a constant-time solution would be possible by simply using the &quot;set&lt;&gt;&quot; comparator directly ..."}, {"owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515599820, "post_id": 48188868, "comment_id": 83362898, "body": "@Massimiliano: The only iterators that cannot be dereferenced are end iterators, all others can. So testing for end() first and then dereferencing works. But since the set is a (rb or avl) tree under the hood, the problem should (in a perfect world) be solvable in logarithmic time using only the iterators."}, {"owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "reply_to_user": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "edited": false, "score": 0, "creation_date": 1515600155, "post_id": 48188868, "comment_id": 83363132, "body": "@tglas I know we can dereference them :), I was referring to <i>your</i> question requirements (&quot;Is there [...] based <b>purely on iterators and not involving the values</b>?)&quot; that said, I agree with you, in theory we could have an iterator category with the property that they can be compared in log time; but, they would dereference their values under the hood anyway, so who cares ?"}], "tags": [], "owner": {"reputation": 5334, "user_id": 8631381, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JMqAd.png?s=128&g=1", "display_name": "Massimiliano Janes", "link": "https://stackoverflow.com/users/8631381/massimiliano-janes"}, "is_accepted": true, "score": 3, "last_activity_date": 1515592386, "last_edit_date": 1515592386, "creation_date": 1515592066, "answer_id": 48188868, "question_id": 48187851, "link": "https://stackoverflow.com/questions/48187851/determine-order-of-set-iterators/48188868#48188868", "title": "Determine order of set iterators", "body": "<p>In my opinion, the best way is to fix your code logic and have <code>[it1,it2)</code> always be a valid range; if this turns out not possible (but how can it be ?), you may use something like</p>\n\n<pre><code>// O(N), forward iterators, it1, it2 should belong to range\ntemplate&lt;class Iter&gt;\nbool precedes_or_is_equal( Iter it1, Iter it2, Iter end )\n{\n  while( it1 != end &amp;&amp; it1 != it2 ) ++it1;\n\n  return it1 == it2;\n}\n</code></pre>\n"}], "owner": {"reputation": 811, "user_id": 4614700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9d40769c31a4629895c3d93278cc8ef?s=128&d=identicon&r=PG&f=1", "display_name": "tglas", "link": "https://stackoverflow.com/users/4614700/tglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 48188868, "answer_count": 1, "score": 0, "last_activity_date": 1515599609, "creation_date": 1515588452, "last_edit_date": 1515599609, "question_id": 48187851, "link": "https://stackoverflow.com/questions/48187851/determine-order-of-set-iterators", "title": "Determine order of set iterators", "body": "<p>I have two iterators (say <code>it1</code> and <code>it2</code>) into the same <code>std::set&lt;int&gt;</code>. They are obtained through <code>lower_bound</code> and <code>upper_bound</code>, therefore they are not safe to dereference (they could equal <code>end()</code>).\nIs there an easy and safe way of telling which one goes first?</p>\n\n<p>I could call <code>std::distance(it1, it2)</code> and <code>std::distance(it2, it1)</code>, but that does not seem to help since if <code>it1 != it2</code> then one of the calls is UB. I could test <code>*it1 &lt; *it2</code>, but only if no iterator points to the <code>end()</code>. Finally, I could first test for the end iterator and then do the above comparison on values.</p>\n\n<p>Is there an elegant solution based purely on iterators and not involving the values, i.e., dereferencing? I am willing to use up to c++14 and maybe boost.</p>\n\n<p><strong>EDIT</strong> (in reponse to comments):\nI use a set because I want fast lookup and insertion, in particular much faster than linear complexity. A sorted vector would be a possible alternative, it would trivially solve the problem, but insertion and removal are linear time operations.</p>\n"}, {"tags": ["c++", "iterator", "language-lawyer", "stdarray"], "answers": [{"comments": [{"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 2, "creation_date": 1515589894, "post_id": 48187891, "comment_id": 83356106, "body": "Huh, do you have a citation for that?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1515589962, "post_id": 48187891, "comment_id": 83356134, "body": "There&#39;s something here: <a href=\"https://stackoverflow.com/questions/5322104/how-portable-is-end-iterator-decrement\" title=\"how portable is end iterator decrement\">stackoverflow.com/questions/5322104/&hellip;</a>"}, {"owner": {"reputation": 767718, "user_id": 14860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vXG1F.png?s=128&g=1", "display_name": "paxdiablo", "link": "https://stackoverflow.com/users/14860/paxdiablo"}, "edited": false, "score": 0, "creation_date": 1515590107, "post_id": 48187891, "comment_id": 83356207, "body": "Interestingly, that table 68 which lists <code>vector&#47;list&#47;deque</code> and having that optional ability has been changed in C++14 (table 101 in <code>23.2.3 Sequence containers</code>) to <i>include</i> <code>array&#47;basic_string</code> as well. It would be interesting to see if OP gets the same problem with a C++14 or better compiler."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 3, "creation_date": 1515590582, "post_id": 48187891, "comment_id": 83356524, "body": "It looks like the most recent draft, N4713, has resolved DR355, removing the accidental implication that <code>--c.end()</code> needs to compile. So this answer is no longer correct for more recent C++ versions. You can decrement the end iterator still (for bi-directional sequences), but not necessarily if it&#39;s an rvalue."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1515590744, "post_id": 48187891, "comment_id": 83356632, "body": "@SebastianRedl: Looks like I&#39;ve stumbled on something more complex than I had originally thought. (I had it in my head from the when I learnt C++ formally - way back in C++03.) I&#39;ve wiki&#39;d if folk want to make contributions to the answer."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 0, "creation_date": 1515653862, "post_id": 48187891, "comment_id": 83383644, "body": "@SebastianRedl LWG DR355 was resolved <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1629.html\" rel=\"nofollow noreferrer\">in April 2004</a>, almost 14 years ago. Somebody is a little late to the party..."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1515590655, "last_edit_date": 1515590655, "creation_date": 1515588598, "answer_id": 48187891, "question_id": 48187786, "link": "https://stackoverflow.com/questions/48187786/why-cant-i-decrement-stdarrayend/48187891#48187891", "title": "Why can&#39;t I decrement std::array::end()?", "body": "<p>It's a fact of life from the C++ standard.</p>\n\n<p><code>--T.end()</code> is required to work if <code>T</code> is a <code>std::vector</code>, a <code>std::list</code>, or a <code>std::deque</code>. This was correct up to and including C++11; there have been relaxations subsequent to that.</p>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 5724813, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6adf2a98e5d6556ec5baec1f7b544e76?s=128&d=identicon&r=PG&f=1", "display_name": "Jersey", "link": "https://stackoverflow.com/users/5724813/jersey"}, "edited": false, "score": 0, "creation_date": 1516315439, "post_id": 48187974, "comment_id": 83648805, "body": "That was very instructive. Thanks a lot!"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 3, "last_activity_date": 1515594971, "last_edit_date": 1515594971, "creation_date": 1515588858, "answer_id": 48187974, "question_id": 48187786, "link": "https://stackoverflow.com/questions/48187786/why-cant-i-decrement-stdarrayend/48187974#48187974", "title": "Why can&#39;t I decrement std::array::end()?", "body": "<p>It depends on how the iterator is defined.</p>\n\n<p>It seems that for the class template <code>std::array</code> the iterator is defined as a pointer. So the functions begin, end. cbegin, cend return just the pointer. Thus as the pointer is returned by value you may not decrease it because an <code>lvalue</code> is required..</p>\n\n<p>For the class template <code>std::vector</code> the iterator is defined as a user-defined class for which the operator --() is defined.</p>\n\n<p>Consider the following demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Int\n{\npublic:\n    Int( int x = 0 ) : x ( x ) \n    {\n\n    }\n\n    Int &amp; operator --()\n    {\n        --x;\n        return *this;\n    }\n\n    friend std::ostream &amp; operator &lt;&lt;( std::ostream &amp;os, const Int &amp;i )\n    {\n        return os &lt;&lt; i.x;\n    }\nprivate:\n    int x;\n};\n\nint f( int x )\n{\n    return x;\n}\n\nInt f( Int x )\n{\n    return x;\n}\n\nint main() \n{\n    std::cout &lt;&lt; --f( Int( 10 ) ) &lt;&lt; std::endl;\n//  error: lvalue required as decrement operand\n//  std::cout &lt;&lt; --f( 10 ) &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Take into account that you can write</p>\n\n<pre><code>auto arrIt = std::prev( arr.end() );\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>auto arrIt = --arr.end();\n</code></pre>\n\n<p>provided that you include header <code>&lt;iterator&gt;</code>.</p>\n\n<p>You can use the operator with the reverse iterators of the class template <code>std::array</code> because the Standard defines them explicitly like</p>\n\n<pre><code>typedef std::reverse_iterator&lt;iterator&gt; reverse_iterator;\ntypedef std::reverse_iterator&lt;const_iterator&gt; const_reverse_iterator;\n</code></pre>\n\n<p>and the user-defined class <code>std::reverse_iterator</code> defines the <code>operator --()</code> .</p>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;array&gt;\n\nint main() \n{\n    std::array&lt;double, 2&gt; arr = { { 1, 2 } };\n\n    auto it = --arr.rend();\n\n    std::cout &lt;&lt; *it &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "is_accepted": false, "score": 7, "last_activity_date": 1515589874, "creation_date": 1515589874, "answer_id": 48188259, "question_id": 48187786, "link": "https://stackoverflow.com/questions/48187786/why-cant-i-decrement-stdarrayend/48188259#48188259", "title": "Why can&#39;t I decrement std::array::end()?", "body": "<p>Never decrement an rvalue, even if it happens to compile. It's unintuitive for readers of the code.</p>\n\n<p>Use <code>std::prev</code> instead.</p>\n\n<pre><code>auto it = std::prev(arr.end());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1515654074, "post_id": 48188665, "comment_id": 83383749, "body": "More basically, the iterator requirements do not require <code>--</code> to work on any iterator rvalue."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 15, "last_activity_date": 1515591682, "last_edit_date": 1515591682, "creation_date": 1515591356, "answer_id": 48188665, "question_id": 48187786, "link": "https://stackoverflow.com/questions/48187786/why-cant-i-decrement-stdarrayend/48188665#48188665", "title": "Why can&#39;t I decrement std::array::end()?", "body": "<p>Since this is <a href=\"/questions/tagged/language-lawyer\" class=\"post-tag\" title=\"show questions tagged &#39;language-lawyer&#39;\" rel=\"tag\">language-lawyer</a>, <a href=\"http://eel.is/c++draft/expr.pre.incr#1.sentence-2\" rel=\"noreferrer\">[expr.pre.increment]</a> and <a href=\"http://eel.is/c++draft/expr.post.incr#1.sentence-2\" rel=\"noreferrer\">[expr.post.increment]</a> both have the restriction that:</p>\n\n<blockquote>\n  <p>The operand shall be a modifiable lvalue. </p>\n</blockquote>\n\n<p>Now, neither <code>vec.end()</code> nor <code>arr.end()</code> are lvalues, but both of their types are implementation-defined (for <a href=\"http://eel.is/c++draft/array#overview-3\" rel=\"noreferrer\">array</a> and for <a href=\"http://eel.is/c++draft/vector#overview-2\" rel=\"noreferrer\">vector</a>). In both cases, a simple pointer would satisfy all the iterator requirements for those containers - and this would be a type that uses builtin prefix- and postfix-increment. In that case, <code>--c.end()</code> would be ill-formed due to the restriction cited. Howver, if the iterator type is a <em>class type</em>, the restriction above doesn't apply - since we're not using the builtin increment operators - and invoking <code>operator--()</code> on a class does not have this restriction on it (though it could, if the member function were lvalue-reference-qualified). </p>\n\n<p>So <code>--c.end()</code> for either vector or array isn't guaranteed to work, since if <code>end()</code> returns a pointer, this is ill-formed, and <code>end()</code> is allowed to return a pointer. On your particular implementation, <code>vector</code>'s <code>iterator</code> has class type but <code>array</code>'s <code>iterator</code> is just a pointer type, which is why the former works but the latter doesn't.</p>\n\n<p>Prefer <code>std::prev(c.end())</code>, which will work for both container types for all implementations.</p>\n"}], "owner": {"reputation": 383, "user_id": 5724813, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6adf2a98e5d6556ec5baec1f7b544e76?s=128&d=identicon&r=PG&f=1", "display_name": "Jersey", "link": "https://stackoverflow.com/users/5724813/jersey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 745, "favorite_count": 1, "accepted_answer_id": 48187974, "answer_count": 4, "score": 8, "last_activity_date": 1515594971, "creation_date": 1515588269, "last_edit_date": 1515589996, "question_id": 48187786, "link": "https://stackoverflow.com/questions/48187786/why-cant-i-decrement-stdarrayend", "title": "Why can&#39;t I decrement std::array::end()?", "body": "<p>I'm creating a convenient <code>display()</code> function template for container types. The output for the last element is different from the rest, thus I check when <code>myIterator != --cont.cend();</code>. This works for <code>std::vector</code>, but won't work for <code>std::array</code>. Why?</p>\n\n<p>Here's a MWE (not my actual code):</p>\n\n<pre><code>std::vector&lt;double&gt; vec({1,2});\nstd::array&lt;double, 2&gt; arr({{1,2}});\nauto vecIt = --vec.end(); // OK\nauto arrIt = --arr.end(); // error: lvalue required as decrement operand\n</code></pre>\n"}]