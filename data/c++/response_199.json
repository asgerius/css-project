[{"tags": ["c++", "shortest-path", "dijkstra"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541030726, "post_id": 53093453, "comment_id": 93083805, "body": "Use caution when tagging languages. This is clearly not C code and you don&#39;t want to bring a ravening horde of angry C programmers down upon your head."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1541030855, "post_id": 53093453, "comment_id": 93083830, "body": "Your question will receive more love if you adapt the code into a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> or something close to it. Often we need to see the code in context or compile and run it to assist yo properly."}], "owner": {"reputation": 69, "user_id": 9407478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4042a13b387fb3392d775e70acfb9dd1?s=128&d=identicon&r=PG&f=1", "display_name": "Diego", "link": "https://stackoverflow.com/users/9407478/diego"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541030880, "creation_date": 1541030144, "last_edit_date": 1541030880, "question_id": 53093453, "link": "https://stackoverflow.com/questions/53093453/problems-on-finding-the-shortest-path-using-dijkstra", "title": "Problems on finding the shortest path using Dijkstra", "body": "<p>I'm implementing Dijjkstra's algorithm to find the shortest path on a network. Starting from an origin node s, I need to calculate the shortest path to reach all the existed nodes on the network. But the algorithm is not doing it correctly.</p>\n\n<p>Here's the code (HEU is a struct of a Graph):</p>\n\n<pre><code>int dijkstra(GRAPHD &amp;HEU, int s) {\nHEU.d[s] = 0; \nfor (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n    if (i != s)\n        HEU.d[i] = INT_MAX; \n}\nfor (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n    HEU.S[i] = 0; \n    HEU.Q[i] = i; \n}\n\nwhile (!vazio(HEU)) {\n    int u = extract_mimimum(HEU);\n    HEU.S[u] = 1;\n    retira(HEU, u);\n    for (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n        if (HEU.qr[u][i] != -1) { //it's just to indicate that the position is not empty\n            if (HEU.qr[u][i] != -2) { //it's just to indicate that the position is not empty\n                if (HEU.d[HEU.qr[u][i]] &gt; HEU.d[u] + HEU.c[u][HEU.qr[u][i]])\n                    HEU.d[HEU.qr[u][i]] = HEU.d[u] + HEU.c[u][HEU.qr[u][i]];\n            }\n        }\n    }\n}\n\n\nreturn HEU.d;\n}\n</code></pre>\n\n<p>The problem is when starting from node 2.\nAll the distances on the matrix HEU.c[ ][ ] are 1 and the graph is as follows:</p>\n\n<pre><code>HEU.qr[1][1] = 5;\n\nHEU.qr[2][1] = 1;\n\nHEU.qr[2][2] = 3;\n\nHEU.qr[3][1] = 7;\n\nHEU.qr[3][2] = 4;\n\nHEU.qr[4][1] = 8;\n\nHEU.qr[5][1] = 9;\n\nHEU.qr[6][1] = 2;\n\nHEU.qr[6][2] = 5;\n\nHEU.qr[7][1] = 11;\n\nHEU.qr[7][2] = 6;\n\nHEU.qr[8][1] = 7;\n\nHEU.qr[9][1] = 10;\n\nHEU.qr[10][1] = 6;\n\nHEU.qr[10][2] = 11;\n\nHEU.qr[11][1] = 15;\n\nHEU.qr[12][1] = 8;\n\nHEU.qr[13][1] = 9;\n\nHEU.qr[14][1] = 10;\n\nHEU.qr[14][2] = 13;\n\nHEU.qr[15][1] = 14;\n\nHEU.qr[15][2] = 16;\n\nHEU.qr[16][1] = 12;\n</code></pre>\n\n<p>For example, HEU.qr[16][1] = 12 means that node 16 has only one neighbor and its node 12. Then, HEU.qr[15][1] = 14 and HEU.qr[15][2] = 16 node 15 has two neighbors that are 14 and 16.</p>\n\n<p>The auxiliar functions are as follows:</p>\n\n<pre><code>int vazio(GRAPHD &amp;HEU) {\nfor (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n    if (HEU.Q[i] != 0)\n        return 0;\n}\nreturn 1;\n}\n\nint extract_mimimum(GRAPHD &amp;HEU) {\nint min = INT_MAX;\nfor (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n    if (HEU.Q[i] != 0) {\n        if (HEU.d[i] &lt; min) {\n            min = i;                \n        }\n    }\n}\nreturn min;\n}\n\nvoid retira(GRAPHD &amp;HEU, int a) {\nfor (int i = 1; i &lt;= HEU.nb_nodes; i++) {\n    if (HEU.Q[i] == a) HEU.Q[i] = 0;\n}\n }\n</code></pre>\n\n<p>The distance vector starting from node 2 should be 1 0 1 2 2 3 2 3 3 4 3 6 6 5 4 5 but the algorithm finds 1 0 1 2 2 3 2 3 3 4 3 8 8 7 6 7. \nCan somebody please help me?</p>\n"}, {"tags": ["c++", "header-files"], "comments": [{"owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "edited": false, "score": 2, "creation_date": 1541029333, "post_id": 53093364, "comment_id": 93083523, "body": "suggest changing title to use phrase &quot;inclusion guard&quot; rather than &quot;pragma once&quot;, since the latter is a way of doing the former in a platform specific manner."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1541029458, "creation_date": 1541029458, "answer_id": 53093388, "question_id": 53093364, "link": "https://stackoverflow.com/questions/53093364/why-do-you-need-inclusion-guard-for-c-header-files/53093388#53093388", "title": "Why do you need inclusion guard for C++ header files?", "body": "<p>What's true today is not necessarily true when C came about and the C pre-processor, upon which the C++ one is based, was created.</p>\n\n<p><code>#pragma once</code> is just a step towards having proper <a href=\"https://medium.com/@wrongway4you/brief-article-on-c-modules-f58287a6c64\" rel=\"nofollow noreferrer\">C++ modules</a> so this annoying historical legacy is finally eliminated.</p>\n\n<p>Yes, it's valid to include a file multiple times, and yes, each time it's included it can behave in entirely different ways. This is why making pre-compiled headers is a huge headache for compiler developers.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 4, "last_activity_date": 1541029758, "creation_date": 1541029758, "answer_id": 53093419, "question_id": 53093364, "link": "https://stackoverflow.com/questions/53093364/why-do-you-need-inclusion-guard-for-c-header-files/53093419#53093419", "title": "Why do you need inclusion guard for C++ header files?", "body": "<p>Without include guards or #pragma once the compiler would have to maintain a list of included files. This is not easy, because of different possible paths to these files (and #pragma once doesn't completely solve this) and would be expecting a bit much of the original C compilers, which had to work with very limited memory.</p>\n"}, {"comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 1, "creation_date": 1541030224, "post_id": 53093420, "comment_id": 93083692, "body": "While you make a good point, this doesn&#39;t actually answer the question that was posed. Consider adding a paragraph explaining why <code>#pragma once</code> <i>or</i> include guards are necessary."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541031322, "post_id": 53093420, "comment_id": 93083932, "body": "Also worth noting a large degree of uniqueness is required in the identifier used in the <code>#ifndef</code>. The other day we had a question where some poor soul used the name of the class in the header resulting in the class name being macro substituted with an empty string. <code>#define myclass</code> and then later <code>class myclass { ... };</code> resulted in utter chaos as the compiler saw <code>class  { ... };</code>."}], "tags": [], "owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "is_accepted": false, "score": 2, "last_activity_date": 1541043338, "last_edit_date": 1541043338, "creation_date": 1541029773, "answer_id": 53093420, "question_id": 53093364, "link": "https://stackoverflow.com/questions/53093364/why-do-you-need-inclusion-guard-for-c-header-files/53093420#53093420", "title": "Why do you need inclusion guard for C++ header files?", "body": "<p>Guard blocks or <code>#pragma once</code> are included in order to prevent a file from being included multiple times.</p>\n\n<p><code>#pragma once</code>, while supported on most compilers, is not an official part of the c++ standard, and may not work on every compiler. You can use a guard block, which will work on any compiler. An example of a guard block in the file <code>MyClass.hpp</code> would be:</p>\n\n<pre><code>#ifndef MYCLASS_HPP\n#define MYCLASS_HPP\n\n//Code here\n\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": true, "score": 8, "last_activity_date": 1541291963, "last_edit_date": 1541291963, "creation_date": 1541030022, "answer_id": 53093443, "question_id": 53093364, "link": "https://stackoverflow.com/questions/53093364/why-do-you-need-inclusion-guard-for-c-header-files/53093443#53093443", "title": "Why do you need inclusion guard for C++ header files?", "body": "<p>The reason it's not the default is primarily historical these days -- when the C language was formalized, <code>#include</code> was specified that it must act exactly as if the user had copy-and-pasted the specified file's contents at the location of the <code>#include</code>-line; and C++ wanted (and wants) to remain as compatible as possible with C, so C++ inherited that behavior from C.</p>\n\n<p>As for a use-case where including the same header file more than once might be useful; one instance where I found it useful was for simulating a templated-container-class in C (because C doesn't support templates directly).  I had a container-implementation-header-file that looked something like this (but more elaborate; I'm showing a simplified version here for readability):</p>\n\n<pre><code>// MyContainerImplemention.h\n// be sure to #define MYTYPE and MYARRAYSIZE\n// before #include-ing this file!\n\nstruct ArrayOf##MYTYPE\n{\n   MYTYPE arrayOfItems[MYARRAYSIZE];\n};\n\ninline void Set##MYTYPE##Item(struct ArrayOf##MyType * container, int which, MYTYPE item) \n{\n   container[which] = item;\n}\n\n[... and so on for various other MYTYPE-specific methods ...]\n</code></pre>\n\n<p>... then my .c files could do something like:</p>\n\n<pre><code>#define MYTYPE int\n#define MYARRAYSIZE 10\n#include \"MyContainerImplementation.h\"\n#undef MYARRAYSIZE\n#undef MYTYPE\n\n#define MYTYPE short\n#define MYARRAYSIZE 15\n#include \"MyContainerImplementation.h\"\n#undef MYARRAYSIZE\n#undef MYTYPE\n\nstruct ArrayOfint myInts;\nstruct ArrayOfshort myShorts;\n\nSetintItem(&amp;myInts, 5, 12);\nSetshortItem(&amp;myShorts, 3, 2);\n[...]\n</code></pre>\n\n<p>... and end up with the container \"class\" and its associated methods implemented for each data-type, without having to manually write a new implementation of the container \"class\" each time.</p>\n\n<p>Yes, it was extremely ugly -- but not as ugly as having to manually write out thousands of lines of redundant container-code would have been.  (The real container-implementation-header-file implemented a hash table and was several hundred lines long)</p>\n"}], "owner": {"reputation": 296, "user_id": 115847, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/8b7e7f1faa61bd5ee38428b965bb057f?s=128&d=identicon&r=PG", "display_name": "Pratik", "link": "https://stackoverflow.com/users/115847/pratik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 53093443, "answer_count": 4, "score": 5, "last_activity_date": 1541291963, "creation_date": 1541029227, "last_edit_date": 1541044701, "question_id": 53093364, "link": "https://stackoverflow.com/questions/53093364/why-do-you-need-inclusion-guard-for-c-header-files", "title": "Why do you need inclusion guard for C++ header files?", "body": "<p>I get roughly what it does.  What I don't understand is why it's not the default?  What are the use cases where some header file would need to be included multiple times?</p>\n"}, {"tags": ["c++", "c", "fpga", "specifications"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541029359, "post_id": 53093362, "comment_id": 93083532, "body": "No, I don&#39;t believe that the C++ Standard guarantees any such thing. You might want to read up on the <code>volatile</code> qualifier, but I don&#39;t really see this as relevant."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1541029359, "post_id": 53093362, "comment_id": 93083534, "body": "I think <code>volatile</code> <i>might</i> guarantee this. But otherwise I&#39;m pretty sure it doesn&#39;t, since it has no effect on the abstract machine."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 1, "creation_date": 1541030258, "post_id": 53093362, "comment_id": 93083698, "body": "jeez, this got downvoted. Its a great question. Maybe the question would be better stated as &#39;best practice for reading and writing locations mapped to physical peripherals&#39;"}, {"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1541030441, "post_id": 53093362, "comment_id": 93083735, "body": "@pm100, changing the title would be good, but I&#39;m more interested in the best practices for designing registers into a peripheral.  Thanks for the suggestion"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1541032694, "post_id": 53093362, "comment_id": 93084188, "body": "There is standard extension <a href=\"http://www.open-std.org/JTC1/SC22/WG14/www/docs/n1021.pdf\" rel=\"nofollow noreferrer\">iohw.h</a>, but I haven&#39;t seen an implementation that implements it... As it is a standard, if you are designing your own interface, it&#39;s better to follow any kind of specification. In my practice with stm32 I use <a href=\"http://www.keil.com/pack/doc/CMSIS/Driver/html/index.html\" rel=\"nofollow noreferrer\">keil&#39;s cmsis</a> and they use macros and access bits with bit operations <code>&amp;</code> |`,  for example <a href=\"https://github.com/micropython/stm32lib/blob/vendor/CMSIS/STM32F0xx/Include/stm32f091xc.h#L707\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030096, "post_id": 53093424, "comment_id": 93083657, "body": "With no guarantees I wonder how embedded systems <i>ever</i> end up working."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030240, "post_id": 53093424, "comment_id": 93083694, "body": "@NXT There are several methods. The most common is to use a function or macro provided by the platform, typically through inline assembly code, that&#39;s guaranteed to provide the behavior you want. Some platforms have platform-specific guarantees about <code>volatile</code> or special types that are &quot;super-volatile&quot; and guarantee particular things you need. Obviously, people want to make usable platforms so they try to provide you easy ways to get the guaranteed semantics you&#39;re likely to need. (If this is reasonable on your platform, your compiler should provide you easy ways to get it.)"}, {"owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "edited": false, "score": 0, "creation_date": 1541030767, "post_id": 53093424, "comment_id": 93083811, "body": "make sense, I should write a macro to handle both read and write cases when given a random pointer.  Actually I&#39;m starting to think I should just give up on the idea of combining the read/write semantics into a single register location."}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1541030495, "last_edit_date": 1541030495, "creation_date": 1541029801, "answer_id": 53093424, "question_id": 53093362, "link": "https://stackoverflow.com/questions/53093362/best-practices-for-designing-registers-into-a-peripheral-that-will-be-accessed-b/53093424#53093424", "title": "Best practices for designing registers into a peripheral that will be accessed by C and C++?", "body": "<p>There is really no such thing as a write to a memory location in either C or C++. There's just code and memory with the compiler deciding whether to read or write to memory to make the code do what the code is required to do as it thinks is necessary. Your platform <em>might</em> make <code>volatile</code> do what you want or it might not, but that's a platform-specific question.</p>\n\n<p>If you write <code>j=1;</code> and you have a platform where constants other than zero are expensive but increments are cheap, the implementation is free to treat that as <code>j=0; ++j;</code> if it wants.</p>\n\n<p>There have even been real world cases where operations that looked like pure reads actually wrote to memory. Nothing in either the C nor C++ standards prohibit this.</p>\n\n<p>You can check your compiler's documentation around <code>volatile</code> to see if it does what you need. If not, look into inline assembly code. If this is something sensible to do on your platform, a decent compiler should provide a good way to do it.</p>\n"}], "owner": {"reputation": 1825, "user_id": 144680, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/58902166474c9e08f5345fc247c8a78e?s=128&d=identicon&r=PG", "display_name": "NXT", "link": "https://stackoverflow.com/users/144680/nxt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541030495, "creation_date": 1541029210, "last_edit_date": 1541030481, "question_id": 53093362, "link": "https://stackoverflow.com/questions/53093362/best-practices-for-designing-registers-into-a-peripheral-that-will-be-accessed-b", "title": "Best practices for designing registers into a peripheral that will be accessed by C and C++?", "body": "<p>I am designing a serial port peripheral in an FPGA that will have memory mapped registers visible to my processor.</p>\n\n<p>Does C/C++ (I use both) guarantee that writing to a memory location will not also result in a read from the same location?</p>\n\n<p>I ask because the read would read-back different data than was just written, and because the read has side effects (it pulls the next byte from the queue).</p>\n\n<p>I am trying to share a single memory location for TX and RX data, to minimize the size of my decoding logic.</p>\n\n<p>Related question: Does C/C++ guarantee that a single memory location read will always be a single read, and not somehow end up being multiple reads.  Long experience says yes, but I wonder what the spec says.</p>\n\n<p>Note: I always declare pointers to peripheral registers to be volatile, like this:\n    volatile uint32_t * p_reg;</p>\n"}, {"tags": ["c++", "string", "character"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1541028630, "post_id": 53093276, "comment_id": 93083339, "body": "How do you know they &quot; are ignored completely&quot;. Post an actual compilable program that illustrates your problem."}, {"owner": {"reputation": 19, "user_id": 6282499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55ad8c88272b91a524002ee3a8b235ae?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Jacksson", "link": "https://stackoverflow.com/users/6282499/joe-jacksson"}, "edited": false, "score": 0, "creation_date": 1541028718, "post_id": 53093276, "comment_id": 93083361, "body": "If I print str using cout after each statement or use the debugger I see that only the first 4 characters are added to the string."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1541028758, "post_id": 53093276, "comment_id": 93083370, "body": "Do not describe your code - post it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1541028762, "post_id": 53093276, "comment_id": 93083373, "body": "<a href=\"http://codepad.org/2RXPG5pc\" rel=\"nofollow noreferrer\">Works for me</a> even if it&#39;s filled with a bunch of UTF-8 junk characters. Your debugger might be confused by the zero byte in the stream which represents, normally, a C &quot;end of string&quot; delimiter. If you&#39;re converting to <code>c_str()</code> then this byte will be a huge problem. C strings are a whole different deal and cannot contain zero bytes."}, {"owner": {"reputation": 19, "user_id": 6282499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55ad8c88272b91a524002ee3a8b235ae?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Jacksson", "link": "https://stackoverflow.com/users/6282499/joe-jacksson"}, "edited": false, "score": 0, "creation_date": 1541028995, "post_id": 53093276, "comment_id": 93083430, "body": "I guess it must be my debugger&#39;s fault somehow. Still not sure what to do about it though since I really need to use my debugger to do this. Thanks for taking your time"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541029213, "post_id": 53093276, "comment_id": 93083493, "body": "@JoeJacksson <i>and the rest of the characters are ignored completely.</i> -- No they are not ignored. To convince yourself, print out <code>str.size()</code>.  You&#39;re using functions and/or tools that recognize the null terminator and stops processing the string at the null byte.  For debuggers, see if your debugger has some sort of &quot;memory watch&quot;, where you specify the memory to view."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1541029275, "post_id": 53093276, "comment_id": 93083508, "body": "It is a bad design decision of author to use <code>std::string</code> for encoded data. <code>std::vector&lt;char&gt;</code> should be used instead."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1541030133, "post_id": 53093276, "comment_id": 93083667, "body": "<i>I&#39;m creating a socket application in c++</i> -- Which underscores the point of staying clear away from any string functions that are affected by the null terminator.  Even constructing a <code>std::string</code> from the data needs to be done carefully, i.e. <code>char *data; int size; ... std::string s(data, size);</code> would be used instead of simply <code>std::string s = data;</code>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541028993, "post_id": 53093317, "comment_id": 93083429, "body": "Guessing what the problem is rarely works. If the OP cannot be bothered to produce some code that illustrates the problem you are really better off ignoring them."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 19, "user_id": 6282499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55ad8c88272b91a524002ee3a8b235ae?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Jacksson", "link": "https://stackoverflow.com/users/6282499/joe-jacksson"}, "edited": false, "score": 0, "creation_date": 1541029113, "post_id": 53093317, "comment_id": 93083464, "body": "@Joe You did not post code that we can compile, and did not say how you are diagnosing the problem."}, {"owner": {"reputation": 19, "user_id": 6282499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55ad8c88272b91a524002ee3a8b235ae?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Jacksson", "link": "https://stackoverflow.com/users/6282499/joe-jacksson"}, "edited": false, "score": 0, "creation_date": 1541029210, "post_id": 53093317, "comment_id": 93083491, "body": "Would really int main(){} have helped you understand the problem I&#39;m having? I didn&#39;t say how I diagnosed the problem because that&#39;s obvious."}], "tags": [], "owner": {"reputation": 11, "user_id": 4261231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5039236806759810c6c2a9c0bb6b5402?s=128&d=identicon&r=PG", "display_name": "Gary Munnelly", "link": "https://stackoverflow.com/users/4261231/gary-munnelly"}, "is_accepted": false, "score": 0, "last_activity_date": 1541028828, "creation_date": 1541028828, "answer_id": 53093317, "question_id": 53093276, "link": "https://stackoverflow.com/questions/53093276/can-only-add-a-certain-amount-of-characters-to-string-c/53093317#53093317", "title": "Can only add a certain amount of characters to string - C++", "body": "<p>Could the issue be the 0 in char5? C strings are null terminated, so if your string is ever cast to a C string I presume it would be truncated at that point. </p>\n\n<p>Note again that this is a C issue, not a C++ issue, but there could be a point in your case where this conversion is happening. </p>\n"}], "owner": {"reputation": 19, "user_id": 6282499, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55ad8c88272b91a524002ee3a8b235ae?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Jacksson", "link": "https://stackoverflow.com/users/6282499/joe-jacksson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1541028828, "creation_date": 1541028529, "question_id": 53093276, "link": "https://stackoverflow.com/questions/53093276/can-only-add-a-certain-amount-of-characters-to-string-c", "title": "Can only add a certain amount of characters to string - C++", "body": "<p>I'm creating a socket application in c++ where I have to decode base64 strings. I'm using Ren\u00e9 Nyffenegger's (<a href=\"https://renenyffenegger.ch/notes/development/Base64/Encoding-and-decoding-base-64-with-cpp\" rel=\"nofollow noreferrer\">https://renenyffenegger.ch/notes/development/Base64/Encoding-and-decoding-base-64-with-cpp</a>) code to do this. The <code>ret</code> string from the <code>base64_decode</code> function I've found is always only 4 characters long, and after I spent some time debugging I've realized it all boil down to this:</p>\n\n<pre><code>unsigned char1 = 255;\nunsigned char2 = 216;\nunsigned char3 = 255;\nunsigned char4 = 224;\nunsigned char5 = 0;\nunsigned char6 = 16;\nunsigned char7 = 74;\nunsigned char8 = 70;\nunsigned char9 = 73;\nstring str;\nstr += char1;\nstr += char2;\nstr += char3;\nstr += char4;\nstr += char5;\nstr += char6;\nstr += char7;\nstr += char8;\nstr += char9;\n</code></pre>\n\n<p>For some reason this code only adds <code>char1</code>, <code>char2</code>, <code>char3</code> and <code>char4</code> to <code>str</code>, and the rest of the characters are ignored completely. Why is that and what can I do to fix it?</p>\n"}, {"tags": ["c++", "heap", "priority-queue"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1541028191, "post_id": 53093227, "comment_id": 93083220, "body": "Are you sure you&#39;re never referencing an uninitialized or invalidated pointer? That&#39;s the #1 cause of those crashes. Step through in a debugger just prior to the point of failure to check. Stub in <code>assert()</code> if you must."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1541028245, "post_id": 53093227, "comment_id": 93083230, "body": "It should be <code>Priority_Queue() { ...}</code> as a constructor not <code>void Priority_Queue()</code> which is a function. You should also get into the habit of declaring your interface in a <code>.h</code> or <code>.hpp</code> file separate from the implementation in a <code>.cpp</code> one."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1541028260, "post_id": 53093227, "comment_id": 93083234, "body": "Instead of wasting a lot of time coding menus, you should test your <code>PriorityQueue</code> class by directly  calling functions to insert and delete.  Once you know the class works correctly, <i>then</i> introduce menus."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1541028414, "post_id": 53093227, "comment_id": 93083278, "body": "Can you write an ordinary, non-priority, FIFO queue?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1541028965, "post_id": 53093227, "comment_id": 93083427, "body": "@tadman Point completely valid, and I hope the OPs is reading that, but given the OPs code, it should be <code>PriorityQueue()</code>,  not <code>Priority_Queue()</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1541029063, "post_id": 53093227, "comment_id": 93083451, "body": "@WhozCraig Another good catch. This function isn&#39;t called at all, then, which leaves that property uninitialized."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1541029303, "post_id": 53093353, "comment_id": 93083514, "body": "@WhozCraig I keep stepping on the same rake!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1541029269, "last_edit_date": 1541029269, "creation_date": 1541029129, "answer_id": 53093353, "question_id": 53093227, "link": "https://stackoverflow.com/questions/53093227/segmentation-error-when-using-priority-queue-insert-display-functions/53093353#53093353", "title": "segmentation error when using priority queue insert/display functions", "body": "<p>The problem appears to be the class definition. As WhozCraig points out the name of the presumed constructor is wrong, so it never gets called. The corrected code:</p>\n\n<pre><code>class PriorityQueue {\nprivate:\n    node* front;\npublic:\n    PriorityQueue() : front(nullptr) {\n    }\n};\n</code></pre>\n\n<p>If you had a look in your debugger you'd probably see that <code>front</code> was never properly initialized. In C++ try and use <code>nullptr</code> to represent a \"null pointer\". In C use <code>NULL</code>. Using <code>0</code> creates a lot of ambiguity even if it \"works\" for historical reasons.</p>\n"}], "owner": {"reputation": 25, "user_id": 7405175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/558289f64f29520b991e043a875a7b51?s=128&d=identicon&r=PG&f=1", "display_name": "Nick B.", "link": "https://stackoverflow.com/users/7405175/nick-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541029269, "creation_date": 1541028105, "question_id": 53093227, "link": "https://stackoverflow.com/questions/53093227/segmentation-error-when-using-priority-queue-insert-display-functions", "title": "segmentation error when using priority queue insert/display functions", "body": "<p>I seem to keep get a \"Segmentation Error: 11\" whenever I run any function(insert and display, unable to tell if delete does it since i can't insert) in the program. I'm not totally sure what it means or where to begin looking to fix it. Any help would be greatly appreciated on where to begin. I understand that it has something to do with the memory and from what I was able to find it could mean that something is taking up too much memory.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;cstdlib&gt;\n#include \"priority_queue.h\"\n//#include &lt;heap.h&gt;\n\nusing namespace std;\n\nstruct node{\n    int priority;\n    int info;\n    struct node* link;\n};\n\nclass PriorityQueue{\nprivate:\n    node* front;\npublic:\n    void Priority_Queue(){\n        front = 0;\n    }\n    void insert(int item, int priority){\n        node* temp, *q;\n        temp = new node;\n        temp-&gt;info = item;\n        temp-&gt;priority = priority;\n        if(front == 0 || priority &lt; front-&gt;priority){\n            temp -&gt;link = front;\n            front = temp;\n        }\n        else{\n            q = front;\n            while(q-&gt;link != 0 &amp;&amp; q-&gt;link-&gt;priority &lt;= priority)\n                q = q-&gt;link;\n            temp-&gt;link = q-&gt;link;\n            q-&gt;link = temp;\n        }\n    }\n    void del(){\n        node* temp;\n        if(front == 0)\n            cout &lt;&lt; \"Underflow\" &lt;&lt; endl;\n        else{\n            temp = front;\n            cout &lt;&lt; \"Delete item is: \" &lt;&lt; temp-&gt;info &lt;&lt; endl;\n            front = front-&gt;link;\n            free(temp);\n        }\n    }\n    void display(){\n        node* ptr;\n        ptr = front;\n        if(front == 0)\n            cout &lt;&lt; \"Queue is empty\" &lt;&lt; endl;\n        else{\n            cout &lt;&lt; \"Queue is: \" &lt;&lt; endl;\n            cout &lt;&lt; \"Priority Item\" &lt;&lt; endl;\n            while(ptr != 0){\n                cout &lt;&lt; ptr-&gt;priority &lt;&lt; endl;\n                ptr = ptr-&gt;link;\n            }\n        }\n    }\n};\n    int main(){\n    int choice, item, priority;\n    PriorityQueue pq;\n    while(1){\n        cout &lt;&lt; \"1. Insert\" &lt;&lt; endl;\n        cout &lt;&lt; \"2. Delete\" &lt;&lt; endl;\n        cout &lt;&lt; \"3. Display\" &lt;&lt; endl;\n        cout &lt;&lt; \"4. Quit\" &lt;&lt; endl;\n        cout &lt;&lt; \"Enter Choice \" &lt;&lt; endl;\n        cin &gt;&gt; choice;\n        switch(choice){\n            case 1:\n            cout &lt;&lt; \"Input the item value to be added into the queue\" &lt;&lt; endl;\n            cin &gt;&gt; item;\n            cout &lt;&lt; \"Enter its priority \" &lt;&lt; endl;\n            cin &gt;&gt; priority;\n            pq.insert(item, priority);\n            break;\n            case 2:\n            pq.del();\n            break;\n            case 3:\n            pq.display();\n            break;\n            case 4:\n            break;\n            default:\n            cout &lt;&lt; \"That is not an option\" &lt;&lt; endl;\n        }\n    }\n    //while(choice != 4);\n        return 0;\n    }\n</code></pre>\n"}, {"tags": ["c++", "opengl", "quadtree"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541027906, "post_id": 53092915, "comment_id": 93083154, "body": "Have you proven the quadtree to be correct without graphics?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541028050, "post_id": 53092915, "comment_id": 93083192, "body": "Note: Lot of <code>new</code> in there and not a <code>delete</code> in sight. This is going to lead to some pretty nasty memory management woes. Might want to consider a destructor to clean up or, even better, no <code>new</code>s."}, {"owner": {"reputation": 157, "user_id": 6900853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2b2a53685b13af8a779eb2c68408839d?s=128&d=identicon&r=PG&f=1", "display_name": "JKawa", "link": "https://stackoverflow.com/users/6900853/jkawa"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541028941, "post_id": 53092915, "comment_id": 93083423, "body": "Well that&#39;s the thing, I believe that my logic is right in the sense that when I want to insert a point, I simply do 3 evaluations:  1. check if the current node contains a particle, if true, then return 2. if the node has no particles, store it there 3. otherwise recursively go back in the method and do the same steps"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1549112718, "post_id": 53092915, "comment_id": 95792172, "body": "@JKawa Did the answer solve your issue? Are there some remaining questions?"}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1541061203, "creation_date": 1541061203, "answer_id": 53097625, "question_id": 53092915, "link": "https://stackoverflow.com/questions/53092915/quadtree-only-draws-on-the-top-right-corner-of-the-window/53097625#53097625", "title": "QuadTree only draws on the top right corner of the window", "body": "<p>If you don't set a projection matrix, then the view volume which is projected to the view port is the normalized device space. This is a cube with a left bottom near of (-1, -1, -1) and a right top far of (1, 1, 1).</p>\n\n<p>Use <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glOrtho.xml\" rel=\"nofollow noreferrer\"><code>glOrtho</code></a> to define a cuboid view volume (orthographic projection) of your needs. </p>\n\n<p>Set the range from the let to the right to [0, 1] and the range from the bottom to the top too.<br>\nAdd the following lies of code right before the render loop:</p>\n\n<pre><code>glMatrixMode( GL_PROJECTION );\nglLoadIdentity();\nglOrtho( 0.0, 1.0, 0.0, 1.0, -1.0, 1.0 );\n\nwhile (!glfwWindowShouldClose(window))\n{\n    ....\n}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 6900853, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2b2a53685b13af8a779eb2c68408839d?s=128&d=identicon&r=PG&f=1", "display_name": "JKawa", "link": "https://stackoverflow.com/users/6900853/jkawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 53097625, "answer_count": 1, "score": 0, "last_activity_date": 1541061203, "creation_date": 1541025509, "question_id": 53092915, "link": "https://stackoverflow.com/questions/53092915/quadtree-only-draws-on-the-top-right-corner-of-the-window", "title": "QuadTree only draws on the top right corner of the window", "body": "<p>I wrote this program to display some dots that are stored in a quad tree. Essentially, I am trying to simulate a galaxy following the Barnes Hut algorithm. Before going further, I'm not quite sure if my quad tree is coded properly, and I want to display all the dots in a window using OpenGL. The only area that is being drawn on the screen is at the top right square and I can't seem to figure out why that is. </p>\n\n<p>Here is my code. Please let me know if clarifications are needed:</p>\n\n<p>quadtree.h</p>\n\n<pre><code>#pragma once\n#include &lt;vector&gt;\nusing namespace std;\n\nclass Point\n{\npublic:\n    Point(double x, double y);\n    double x;\n    double y;\n};\n\nclass Rectangle\n{\npublic:\n    Rectangle(double x, double y, double width, double height);\n    double x;\n    double y;\n    double width;\n    double height;\n    bool contains(Point* p);\n};\n\nclass QuadTree\n{\npublic:\n    QuadTree();\n    QuadTree(Rectangle* boundary, int capacity);\n    Rectangle* boundary;\n    int capacity;\n    vector&lt;Point*&gt; points;\n    QuadTree* NE;\n    QuadTree* NW;\n    QuadTree* SW;\n    QuadTree* SE;\n    bool divided;\n    void subdivide();\n    void buildTree();\n    bool insertToNode(Point* p);\n\n};\n</code></pre>\n\n<p>quadtree.cpp</p>\n\n<pre><code>#include \"quadtree.h\"\n#include &lt;random&gt;\n#include &lt;GLFW/glfw3.h&gt;\n#include &lt;iostream&gt;\n#include &lt;chrono&gt;\nusing namespace std;\n\nPoint::Point(double x, double y)\n{\n    this-&gt;x = x;\n    this-&gt;y = y;\n}\n\nRectangle::Rectangle(double x, double y, double width, double height)\n{\n    this-&gt;x = x;\n    this-&gt;y = y;\n    this-&gt;width = width;\n    this-&gt;height = height;\n}\n\nbool Rectangle::contains(Point* p)\n{\n    return (p-&gt;x &gt;= this-&gt;x - this-&gt;width &amp;&amp;\n        p-&gt;x &lt; this-&gt;x + this-&gt;width &amp;&amp;\n        p-&gt;y &gt;= this-&gt;y - this-&gt;height &amp;&amp;\n        p-&gt;y &lt; this-&gt;y + this-&gt;height);\n}\n\nQuadTree::QuadTree()\n{\n    this-&gt;boundary = new Rectangle(1, 1, 1, 1);\n    this-&gt;capacity = 5000;\n    this-&gt;divided = false;\n    Rectangle* ne = new Rectangle(this-&gt;boundary-&gt;x + (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y - (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* nw = new Rectangle(this-&gt;boundary-&gt;x - (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y - (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* sw = new Rectangle(this-&gt;boundary-&gt;x - (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y + (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* se = new Rectangle(this-&gt;boundary-&gt;x + (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y + (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\nthis-&gt;NE = new QuadTree(ne, this-&gt;capacity);\nthis-&gt;NW = new QuadTree(nw, this-&gt;capacity);\nthis-&gt;SW = new QuadTree(sw, this-&gt;capacity);\nthis-&gt;SE = new QuadTree(se, this-&gt;capacity);\nthis-&gt;divided = true;\n}\n\nQuadTree::QuadTree(Rectangle* boundary, int capacity)\n{\n    this-&gt;boundary = boundary;\n    this-&gt;capacity = 5000;\n    this-&gt;divided = false;\n}\n\nvoid QuadTree::subdivide()\n{\n    Rectangle* ne = new Rectangle(this-&gt;boundary-&gt;x + (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y - (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* nw = new Rectangle(this-&gt;boundary-&gt;x - (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y - (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* sw = new Rectangle(this-&gt;boundary-&gt;x - (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y + (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    Rectangle* se = new Rectangle(this-&gt;boundary-&gt;x + (this-&gt;boundary-&gt;width / 2), this-&gt;boundary-&gt;y + (this-&gt;boundary-&gt;height / 2), this-&gt;boundary-&gt;width / 2, this-&gt;boundary-&gt;height / 2);\n    this-&gt;NE = new QuadTree(ne, this-&gt;capacity);\n    this-&gt;NW = new QuadTree(nw, this-&gt;capacity);\n    this-&gt;SW = new QuadTree(sw, this-&gt;capacity);\n    this-&gt;SE = new QuadTree(se, this-&gt;capacity);\n    this-&gt;divided = true;\n}\n\nvoid QuadTree::buildTree()\n{\n    std::default_random_engine generator(std::chrono::system_clock::now().time_since_epoch().count());\n    std::uniform_real_distribution&lt;double&gt; distribution(-1.0, 1.0);\n    double x;\n    double y;\n\n    for (int i = 0; i &lt; 5000; i++)\n    {\n        x = distribution(generator);\n        y = distribution(generator);\n        this-&gt;insertToNode(new Point(x, y));\n    }\n}\n\nbool QuadTree::insertToNode(Point* p)\n{\n    if (!this-&gt;boundary-&gt;contains(p))\n    {\n        return false;\n    }\n\n    if (this-&gt;points.size() &lt; this-&gt;capacity)\n    {\n        this-&gt;points.push_back(p);\n        return true;\n    }\n\n    else\n    {\n        if (!this-&gt;divided)\n        {\n            this-&gt;subdivide();\n        }\n\n        if (this-&gt;NE-&gt;insertToNode(p))\n        {\n            return true;\n        }\n        else if (this-&gt;NW-&gt;insertToNode(p))\n        {\n            return true;\n        }\n        else if (this-&gt;SW-&gt;insertToNode(p))\n        {\n            return true;\n        }\n        else if (this-&gt;SE-&gt;insertToNode(p))\n        {\n            return true;\n        }\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"quadtree.h\"\n#include &lt;GLFW/glfw3.h&gt;\nusing namespace std;\n\nQuadTree* aTree = new QuadTree();\n\nvoid display() \n{\n    glColor3f(1.0, 1.0, 1.0);\n    glBegin(GL_POINTS);\n\n    for (int i = 0; i &lt; aTree-&gt;points.size(); i++)\n    {\n        glColor3f(0.8, 0.196078, 0.6);\n        glVertex2d(aTree-&gt;points[i]-&gt;x, aTree-&gt;points[i]-&gt;y);\n    }\n\n    glEnd();\n    glFlush();\n}\n\nint main()\n{\n    aTree-&gt;buildTree();\n    GLFWwindow* window;\n\n    if (!glfwInit()) {\n        cout &lt;&lt; \"Error initializing GLFW\" &lt;&lt; std::endl;\n        return -1;\n\n    }\n    window = glfwCreateWindow(800, 800, \"Barne's Hut\", NULL, NULL);\n    if (!window)\n    {\n        cout &lt;&lt; \"Error creating window\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n    glfwMakeContextCurrent(window);\n\n    while (!glfwWindowShouldClose(window))\n    {       \n        display();\n        glfwSwapBuffers(window);\n        glfwPollEvents();\n    }\n    glfwTerminate();\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541025486, "post_id": 53092885, "comment_id": 93082498, "body": "This is not a site for explaining the basic semantics of  a programming language - that&#39;s what textbooks are for. Which C++ textbook are you using?"}, {"owner": {"reputation": 75, "user_id": 4387652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e390e0d481144985db04bfd294691a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas ", "link": "https://stackoverflow.com/users/4387652/lucas"}, "edited": false, "score": 0, "creation_date": 1541028466, "post_id": 53092885, "comment_id": 93083287, "body": "Sorry, i know. But my english in sometimes missleading and im using this old book in pdf &quot;Object-Oriented Programming in C++, Fourth Edition&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 5228464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3425e3aa91f4e543f47873d7a7c3f240?s=128&d=identicon&r=PG&f=1", "display_name": "SloCompTech", "link": "https://stackoverflow.com/users/5228464/slocomptech"}, "is_accepted": true, "score": -2, "last_activity_date": 1541026201, "creation_date": 1541026201, "answer_id": 53092998, "question_id": 53092885, "link": "https://stackoverflow.com/questions/53092885/c-public-vs-private-inheritancce/53092998#53092998", "title": "c++ public vs private inheritancce", "body": "<p>Here is simple sheme (base class -> derived clas) how visibility of class members change with different types of inheritance:</p>\n\n<p>Public inheritance:</p>\n\n<ul>\n<li>public -> public</li>\n<li>protected -> protected</li>\n<li>private -> private</li>\n</ul>\n\n<p>Protected inheritance:</p>\n\n<ul>\n<li>public -> protected</li>\n<li>protected -> protected</li>\n<li>private -> private</li>\n</ul>\n\n<p>Private inheritance:</p>\n\n<ul>\n<li>public -> private</li>\n<li>protected -> private</li>\n<li>private -> private</li>\n</ul>\n\n<p>Here you have few simple examples <a href=\"https://www.tutorialspoint.com/cplusplus/cpp_inheritance.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_inheritance.htm</a></p>\n"}], "owner": {"reputation": 75, "user_id": 4387652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e390e0d481144985db04bfd294691a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas ", "link": "https://stackoverflow.com/users/4387652/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1541026200, "accepted_answer_id": 53092998, "answer_count": 1, "score": -3, "last_activity_date": 1541026201, "creation_date": 1541025333, "question_id": 53092885, "link": "https://stackoverflow.com/questions/53092885/c-public-vs-private-inheritancce", "closed_reason": "Duplicate", "title": "c++ public vs private inheritancce", "body": "<p>I don't understand and i really don't get public vs private inheritance in classes.\nSuppose we have the following code:</p>\n\n<pre><code>class A {\n    int A_a;\nprotected:\n    int A_b;\npublic:\n    int A_c;\n};\nclass B : public A {\n    int B_a;\nprotected:\n    int B_b;\npublic:\n    int B_c;\n};\n\nclass C : private A {\n    int C_a;\nprotected:\n    int C_b;\npublic:\n    int C_c;\n};\n</code></pre>\n\n<p>I know it has to be with access rights over vars and funcs, but doing all the tests i really can grasp it and i don't know when to apply public or private inheritance;</p>\n"}, {"tags": ["c++", "c", "sockets", "server", "client"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541026094, "post_id": 53092849, "comment_id": 93082668, "body": "<code>write(newsockfd, getFile.c_str(), 18);</code> will write 18 bytes to the socket. If the string is longer than this, you will not get the whole string. If the string is shorter, you still write 18 bytes and read past the end of the string. This is undefined behaviour and in this case will  likely result in either garbage being written to the stream or the program crashing. A common method for writing a string to a stream is to write the length of the string to the stream as an integer of known length and endian and then write length bytes of the string into the socket."}], "answers": [{"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1541027140, "creation_date": 1541027140, "answer_id": 53093122, "question_id": 53092849, "link": "https://stackoverflow.com/questions/53092849/how-to-send-contents-of-a-text-file-from-server-to-client-via-sockets/53093122#53093122", "title": "How to send contents of a text file from server to client via sockets?", "body": "<p>TCP is a stream-based, not a message based, protocol. That means you need to establish a protocol that separates individual messages if they are intended to be processed as individual messages. <code>read(sockfd, buffer, 255)</code> could easily read 255 bytes of data from the socket which contains multiple messages, possibly even the whole file, but the program  only treats it as a single message. </p>\n\n<p><a href=\"https://stackoverflow.com/a/18678024/4581301\">This answer contains a relatively simple protocol for sending strings over a socket</a></p>\n"}], "owner": {"reputation": 19, "user_id": 9933366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34a1b34b7479c2a62398df37e9ff3f74?s=128&d=identicon&r=PG&f=1", "display_name": "feedmecookies", "link": "https://stackoverflow.com/users/9933366/feedmecookies"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 695, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541027140, "creation_date": 1541025088, "question_id": 53092849, "link": "https://stackoverflow.com/questions/53092849/how-to-send-contents-of-a-text-file-from-server-to-client-via-sockets", "title": "How to send contents of a text file from server to client via sockets?", "body": "<p>I am working on an assignment that would allow the server to grab the contents of a text file via I/O redirection and send to the client line by line which I would then insert into a vector. I have tried using a while loop on both sides, but it isn't working. It only reads the first line of the file (which I was doing separately in order to get the size first) and that's it. Can anyone please advise me on how to fix this issue?</p>\n\n<p>Here's my server code:</p>\n\n<pre><code>listen(sockfd,5);\n clilen = sizeof(cli_addr);\n newsockfd = accept(sockfd, (struct sockaddr *) &amp;cli_addr, (socklen_t *)&amp;clilen);\n\n if (newsockfd &lt; 0){ \n      error(\"ERROR on accept\");\n }\n bzero(buffer,256);\n n = read(newsockfd,buffer,255);\n\n if (n &lt; 0){\n     error(\"ERROR reading from socket\");\n }\n\n printf(\"Here is the message: %s\\n\",buffer);\n std::getline(std::cin, getFile); // I/O Redirection\n n = write(newsockfd,getFile.c_str(),18); //grabs first line of the file which is 3 and sends it to the client\n\n while (std::getline(std::cin, getFile)) { \n     n = write(newsockfd, getFile.c_str(), 18); //supposed to write every line of the file to the client but isn't working? Should send 0 1 0 0 1 0 1 -1\n     if (n &lt; 0){\n         error(\"ERROR writing to socket\");\n     }\n }\n</code></pre>\n\n<p>My client code:</p>\n\n<pre><code>std::vector&lt;int&gt; input;\n\nprintf(\"Please enter the message: \");\nbzero(buffer,256);\nfgets(buffer,255,stdin);\nn = write(sockfd,buffer,strlen(buffer));\n\nif (n &lt; 0) {\n    error(\"ERROR writing to socket\");\n}\n\nprintf(\"The ring size is: \");\nbzero(buffer,256);\nn = read(sockfd,buffer,255); //received first line from server\nsize = std::atoi(buffer); //ring size converted from char* to int\n\nwhile (read(sockfd, buffer, 255) &gt; 0) {\n    input.push_back(std::atoi(buffer));\n    printf(\"Input contents: %s\\n\", buffer); //should print 0 1 0 0 1 0 1 -1\n}\n</code></pre>\n\n<p>My text file:</p>\n\n<pre><code>3\n0\n1\n0\n0\n1\n0\n1\n-1\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1541025271, "post_id": 53092826, "comment_id": 93082430, "body": "WRT your second question, are you saying that you wanted to modify a variable called <code>val</code> which is defined somewhere in <code>namespace std</code> or are you saying that you defined those variables in <code>namespace std</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541026620, "post_id": 53092826, "comment_id": 93082807, "body": "NEITHER <code>val</code> is in the <code>std</code> namespace.  The 1st <code>val</code> is in the global namespace, which also happens to have access to members of the <code>std</code> namespace. The 2nd <code>val</code> is local to <code>main()</code>."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 2, "last_activity_date": 1541025764, "last_edit_date": 1541025764, "creation_date": 1541025055, "answer_id": 53092844, "question_id": 53092826, "link": "https://stackoverflow.com/questions/53092826/can-i-have-operations-outside-a-function-body-in-c/53092844#53092844", "title": "can I have operations outside a function body in c++?", "body": "<p>You can initialise things, possibly via function calls, so you could say something like:</p>\n\n<pre><code>   ostream &amp; os = cout&lt;&lt; 42 &lt;&lt;endl;\n</code></pre>\n\n<p>but the utility of this is not obvious, and you would possibly run into problems with the order of instantiation of objects like <code>cout</code>.</p>\n\n<p>What you cannot do is write code such as:</p>\n\n<pre><code>  x = x + 1;\n  for ( int y = 0; y &lt; 10; y++ ) {}\n</code></pre>\n\n<p>outside of a function - that's the way the language is defined.</p>\n\n<p>And in your code neither <code>val</code> is in the <code>std</code> namespace, and it would be illegal to try to place them there. You need to read up on scope.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 2, "last_activity_date": 1541025547, "creation_date": 1541025547, "answer_id": 53092920, "question_id": 53092826, "link": "https://stackoverflow.com/questions/53092826/can-i-have-operations-outside-a-function-body-in-c/53092920#53092920", "title": "can I have operations outside a function body in c++?", "body": "<blockquote>\n  <p><code>cout&lt;&lt;val&lt;&lt;endl;</code> is not valid outside the main function body. Why is that?</p>\n</blockquote>\n\n<p>Because the standard says that expression statements can only be in block scope.</p>\n\n<blockquote>\n  <p>can I have operations outside a function body in c++?</p>\n</blockquote>\n\n<p>You can't have expression statements outside a function.</p>\n\n<p>However, declaration statements can have sub-expressions that have side-effects such as <code>cout&lt;&lt;val&lt;&lt;endl</code> (note the lack of semicolon) in which case those expressions will be executed during initialisation of whatever was declared. Neil Butterworth shows an example of this in their answer.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>I think the two vals are all defined in the namespace std</li>\n  </ol>\n</blockquote>\n\n<p>You think wrong. Neither is declared in the <code>std</code> namespace.</p>\n\n<p>One <code>val</code> is declared in the global namespace, while the other is declared in the function scope. Declaring one variable in a nested scope within potential  scope of another vairable with the same name is called shadowing i.e. <code>val</code> in the block scope shadows <code>val</code> in the namespace scope.</p>\n\n<blockquote>\n<pre><code>void main()\n</code></pre>\n</blockquote>\n\n<p>This is also not valid. <code>main</code> must return <code>int</code>.</p>\n"}], "owner": {"reputation": 406, "user_id": 4907188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5dc1020895c2f6aecf9480a995ec281e?s=128&d=identicon&r=PG&f=1", "display_name": "Terry Qiao", "link": "https://stackoverflow.com/users/4907188/terry-qiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 53092920, "answer_count": 2, "score": -4, "last_activity_date": 1541038035, "creation_date": 1541024906, "last_edit_date": 1541038035, "question_id": 53092826, "link": "https://stackoverflow.com/questions/53092826/can-i-have-operations-outside-a-function-body-in-c", "title": "can I have operations outside a function body in c++?", "body": "<pre><code>#include &lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nint val = 100;\n//cout&lt;&lt;val&lt;&lt;endl;    //this is not valid.\nint main(){\nint val=100;  //why this is valid?\nreturn 0;\n}\n</code></pre>\n\n<p>I found out these two things in the above code:</p>\n\n<ul>\n<li><code>cout&lt;&lt;val&lt;&lt;endl;</code> is not valid outside the main function body. Why is that?</li>\n<li>I think the two <code>val</code>s are all defined in the <code>namespace std</code>. But how come they are both valid?</li>\n</ul>\n"}, {"tags": ["c++", "c", "scanf"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541022906, "post_id": 53092489, "comment_id": 93081710, "body": "Read the input into something and then compare it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541023220, "post_id": 53092489, "comment_id": 93081811, "body": "Yea that is an option but what if the input can be in two possible formats and I have two scanf functions and I need to decide which one to use based on the format of the input?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541026734, "post_id": 53092489, "comment_id": 93082838, "body": "Read the input first regardless of its actual format, and then compare the contents of the input against the formats you need."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541027090, "post_id": 53092489, "comment_id": 93082936, "body": "Does the character between &quot;{&quot; and &quot;[&quot; need to be exactly 1 <code>&#39; &#39;</code> for <i>good</i> input?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "edited": false, "score": 0, "creation_date": 1541067730, "post_id": 53092489, "comment_id": 93094196, "body": "No for my purpose one space is enough important part is the order of the characters for example scanf(&quot;{ [ , :&quot;) and I want to compare it to lets say this scanf(&quot;{ [ : ,&quot;) and decide what to do next in my program based on the order of these characters"}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541026849, "post_id": 53092571, "comment_id": 93082877, "body": "The return  of <code>scanf()</code> is not needed here.  <code>pos = -1; scanf(&quot;{ [%n&quot;, &amp;pos); if (pos&gt;0) ...</code> is sufficient."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1541061579, "post_id": 53092571, "comment_id": 93091361, "body": "Only because I initialized <code>pos</code> to -1"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": false, "score": 3, "last_activity_date": 1541023682, "last_edit_date": 1541023682, "creation_date": 1541023377, "answer_id": 53092571, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53092571#53092571", "title": "Check scanf formating without conversions", "body": "<p>You might use the <code>%n</code> conversion of <a href=\"https://en.cppreference.com/w/c/io/fscanf\" rel=\"nofollow noreferrer\"><code>scanf</code></a> (it sets below into <code>pos</code> the number of characters read so far)</p>\n\n<pre><code>int pos= -1;\nif (scanf(\"{ [%n\", &amp;pos) &gt;=0 &amp;&amp; pos&gt;0) \n   printf(\"GOOD INPUT\\n\");\nelse \n   printf(\"BAD INPUT\");\n</code></pre>\n\n<p>Beware, the return count of <code>scanf</code> might be implementation specific (it probably stays at 0). But  <code>pos</code> get assigned to a positive offset of <code>scanf</code> did get <code>{</code> followed by some (zero or more) space-like characters followed by a <code>[</code>.</p>\n\n<p>However, what you probably want is some <a href=\"https://en.wikipedia.org/wiki/Lexical_analysis\" rel=\"nofollow noreferrer\">lexical analysis</a> and <a href=\"https://en.wikipedia.org/wiki/Parsing\" rel=\"nofollow noreferrer\">parsing</a>, then  <code>scanf</code> is not a good solution. You'll better read the entire line (e.g. with <code>fgets</code> or <a href=\"http://man7.org/linux/man-pages/man3/getline.3.html\" rel=\"nofollow noreferrer\">getline</a>) and parse it later.</p>\n\n<p>See also the <code>man</code> page of <a href=\"http://man7.org/linux/man-pages/man3/scanf.3.html\" rel=\"nofollow noreferrer\">scanf(3)</a></p>\n"}, {"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 2, "last_activity_date": 1541031544, "last_edit_date": 1541031544, "creation_date": 1541024563, "answer_id": 53092771, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53092771#53092771", "title": "Check scanf formating without conversions", "body": "<p><code>scanf</code> (and cousins) returns a count of the number of successful conversions. If you specify 0 conversions, then its return value will always be 0.</p>\n\n<p>To use <code>scanf</code> for this task, I'd probably use a couple of scanset conversions:</p>\n\n<pre><code>char a[2], b[2];\nif (scanf(\"%1[{] %1[[]\", &amp;a, &amp;b) == 2)\n    printf(\"Matched\");\n</code></pre>\n\n<p>Or, you could simplify this a little bit:</p>\n\n<pre><code>char a[2];\nif (scanf(\"{ %1[[]\", &amp;a) == 1)\n</code></pre>\n\n<p>Either way, we've specified each scan set to match only one specified character, but it's still a conversion, so we can see whether it succeeded or failed.</p>\n\n<p>Unfortunately, we still have to assign the result somewhere. <code>scanf</code> does support using <code>*</code> like this: \"%*s\", to tell it to read a string, but not store the result anywhere--but when you do so, that conversion doesn't get counted in the return value, so (much like before) we can't use it to determine whether we got a match or not.</p>\n"}, {"tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 2, "last_activity_date": 1541042560, "last_edit_date": 1541042560, "creation_date": 1541027561, "answer_id": 53093168, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions/53093168#53093168", "title": "Check scanf formating without conversions", "body": "<p>If <em>good</em> input needs to exactly 3 characters: <kbd>{</kbd> <kbd>space</kbd> <kbd>[</kbd>, use <code>\"%*1[ ]\"</code> to scan a space and <code>\"%n\"</code>, which saves the scan character count, to insure scanning reach the expected end.</p>\n\n<pre><code>int main(void) {\n  int n = -1;\n  scanf(\"{%*1[ ][%n\", *n);\n  if (n &gt;= 0) {\n    printf(\"GOOD INPUT\\n\");\n  } else {\n    printf(\"BAD INPUT\\n\");\n  }\n  return 0;\n} \n</code></pre>\n\n<p>I'd recommend to read a <em>line</em> of input with <code>fgets()</code> first and then parse the buffer.  That can leave <code>stdin</code> in a better known state when <em>bad</em> input happens.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6948903"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 53092771, "answer_count": 3, "score": -1, "last_activity_date": 1541042560, "creation_date": 1541022825, "question_id": 53092489, "link": "https://stackoverflow.com/questions/53092489/check-scanf-formating-without-conversions", "title": "Check scanf formating without conversions", "body": "<p>Is there a way how to check if some specific characters were given on input using scanf without using character conversions?</p>\n\n<pre><code>int main(void)\n{\nif(scanf(\"{ [\"))\n    printf(\"GOOD INPUT\\n\");\nelse\n    printf(\"BAD INPUT\\n\");\nreturn 0;\n}     \n</code></pre>\n\n<p>This code always gives the bad input option (it expects scanf return value to be 1) but interestingly if I enter other than the desired characters it gives the bad input imediately but if I enter it as its specified in the scanf it blows the bad input at me AFTER I enter the whole input.</p>\n\n<p>So it must be awaiting the input to be in that specified format but my question is: How can I check it, without any conversions, and make according action depending on wether the input was entered correctly or not?</p>\n"}, {"tags": ["c++", "base", "pow"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1541022834, "post_id": 53092429, "comment_id": 93081688, "body": "What does stepping through the code in a debugger tell you might be going wrong?"}, {"owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "reply_to_user": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1541023858, "post_id": 53092429, "comment_id": 93082002, "body": "I changed the cout to e but now, The result shows 81 though. I need the base of the number to be multiplied like 4*4*4*4 if it<code>s p.    Debugger doesn</code>t show me any error"}, {"owner": {"reputation": 8580, "user_id": 17772, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/620ed2c3129f0c0887efbc5a54d6125c?s=128&d=identicon&r=PG", "display_name": "Ron Klein", "link": "https://stackoverflow.com/users/17772/ron-klein"}, "edited": false, "score": 0, "creation_date": 1541024493, "post_id": 53092429, "comment_id": 93082193, "body": "It seems you either want to calculate 3^4 = 3*3*3*3 or 4^3 = 4*4*4. Please shed more light about your issue."}, {"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1541024714, "post_id": 53092429, "comment_id": 93082268, "body": "The debugger will show you exactly what&#39;s wrong if you step through the code and inspect the variables as each line executes."}, {"owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "edited": false, "score": 0, "creation_date": 1541032304, "post_id": 53092429, "comment_id": 93084118, "body": "I just need to do that I wrote in the initial question above. But I right now I<code>m getting 81 which is not the results for anything I</code>m looking for"}, {"owner": {"reputation": 1790, "user_id": 10263660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02f3119d15c8c155ff25968fdf5a145?s=128&d=identicon&r=PG&f=1", "display_name": "FalcoGer", "link": "https://stackoverflow.com/users/10263660/falcoger"}, "edited": false, "score": 0, "creation_date": 1552980292, "post_id": 53092429, "comment_id": 97204331, "body": "what&#39;s with the weird initialization? Also put your answer as an answer please."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "edited": false, "score": 0, "creation_date": 1541023805, "post_id": 53092526, "comment_id": 93081992, "body": "Fixed. Now, The result shows 81 though. I need the base of the number to be multiplied like 4*4*4*4 if it`s p"}, {"owner": {"reputation": 25894, "user_id": 4304, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5MIg7.jpg?s=128&g=1", "display_name": "zdan", "link": "https://stackoverflow.com/users/4304/zdan"}, "reply_to_user": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "edited": false, "score": 0, "creation_date": 1541024797, "post_id": 53092526, "comment_id": 93082301, "body": "@CryptoBoy um...  3^4 is 81 (you&#39;e  code computes n^p)"}, {"owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "edited": false, "score": 0, "creation_date": 1541032370, "post_id": 53092526, "comment_id": 93084130, "body": "Oh I see now. I think this will do it. Thank you very much"}], "tags": [], "owner": {"reputation": 129, "user_id": 10124466, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8prCaGhyr84/AAAAAAAAAAI/AAAAAAAAAJk/fK5BsrrIh4Q/photo.jpg?sz=128", "display_name": "Srivaishnav Gandhe", "link": "https://stackoverflow.com/users/10124466/srivaishnav-gandhe"}, "is_accepted": false, "score": 2, "last_activity_date": 1541023081, "creation_date": 1541023081, "answer_id": 53092526, "question_id": 53092429, "link": "https://stackoverflow.com/questions/53092429/how-to-do-base-calculations-without-pow-in-c/53092526#53092526", "title": "How to do base calculations without pow in C++?", "body": "<p>you need to cout&lt;&lt; e!\nYou are printing p which is always 4!</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "edited": false, "score": 0, "creation_date": 1541023801, "post_id": 53092548, "comment_id": 93081991, "body": "Fixed. Now, The result shows 81 though. I need the base of the number to be multiplied like 4*4*4*4 if it`s p"}], "tags": [], "owner": {"reputation": 1244, "user_id": 9822401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5fa63a04daa021f18c426c2e09428b8?s=128&d=identicon&r=PG&f=1", "display_name": "A_kat", "link": "https://stackoverflow.com/users/9822401/a-kat"}, "is_accepted": false, "score": 0, "last_activity_date": 1541023231, "creation_date": 1541023231, "answer_id": 53092548, "question_id": 53092429, "link": "https://stackoverflow.com/questions/53092429/how-to-do-base-calculations-without-pow-in-c/53092548#53092548", "title": "How to do base calculations without pow in C++?", "body": "<p>Well gonna take a wild guess but you should use</p>\n\n<pre><code>cout &lt;&lt; e;\n</code></pre>\n\n<p>You are priting the wrong variable :p. The code you have should work fine.</p>\n"}], "owner": {"reputation": 1, "user_id": 10428837, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KSIKg.jpg?s=128&g=1", "display_name": "CryptoBoy", "link": "https://stackoverflow.com/users/10428837/cryptoboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552979390, "creation_date": 1541022510, "last_edit_date": 1552979390, "question_id": 53092429, "link": "https://stackoverflow.com/questions/53092429/how-to-do-base-calculations-without-pow-in-c", "title": "How to do base calculations without pow in C++?", "body": "<p><strong>Below is the problem. But I can`t use pow or print. We learned only if, loops and cout so far.</strong></p>\n\n<p>Using a for loop, write code that will compute the result of an int raised to the power of another int. For example, your for loop should use two variables, one for the base and one for the exponent. It should then calculate the base raised to the exponent. 2 raised to the power of 2 should output 4, 2 raised to 8 should output 256, etc. Ensure your code meets these requirements and then paste it in the response section below:</p>\n\n<p>Contains a variable for the base\nContains a variable for the exponent\nUses a for loop to perform the power function\nOutputs the result to the console window</p>\n\n<p>I went as far as this but couldn`t figure out how to do base calculations. I just get 4 when I run it</p>\n\n<pre><code>int n = 3;\nint p = 4;\nint e = 1;\nint i = 1;\nfor (i = 1; i &lt;= p; i++)\n{\n    e = e * n;\n}\ncout &lt;&lt; p;\n</code></pre>\n\n<p>Edit: I figured it out and made it like this</p>\n\n<pre><code>int base {2};\nint exponent {10};\nint output {1};\n\nfor(int i=0; i&lt;exponent; i++)\n{\n    output *= base;\n}\nstd::cout &lt;&lt; output &lt;&lt; \"\\n\";\n</code></pre>\n"}, {"tags": ["c++", "arrays"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "edited": false, "score": 0, "creation_date": 1541024180, "post_id": 53092393, "comment_id": 93082081, "body": "Wow. Thank you. I&#39;ve never used a struct which is why I was hesitant to use one. I ran your cod eand it&#39;s giving me <code>invalid use of incomplete type &#39;struct NameValue&#39;</code>  in the main: <code>cout&lt;&lt;elems[0].name&lt;&lt;endl;</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1541024332, "post_id": 53092393, "comment_id": 93082139, "body": "Did you put <code>int main(){}</code> after <code>struct NameValue</code>"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1541026340, "last_edit_date": 1541026340, "creation_date": 1541022285, "answer_id": 53092393, "question_id": 53092260, "link": "https://stackoverflow.com/questions/53092260/returning-const-char-array-from-function/53092393#53092393", "title": "Returning const char* array from function", "body": "<p>You are writing a program in C++, not C, so you really should not be using raw pointers at all!  Just because the XML library returns values as <code>const char*</code> does not mean you have to do the same.  Especially since you are trying to return pointers owned by an XML document that is destroyed when your function exits, thus invalidating any pointers you store in the array.</p>\n\n<p>If you absolutely need to return an array of strings using raw pointers (which you don't in C++!), it would look something more like this instead:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;iostream&gt;\n#include &lt;tinyxml.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std; \n\nchar* myStrDup(const char *s)\n{\n    //return strdup(s);\n    int len = strlen(s);\n    char *ptr = new char[len+1];\n    memcpy(ptr, s, len);\n    ptr[len] = '\\0';\n    return ptr;\n}\n\nchar*** read(int *count)\n{\n    *count = 0;\n\n    //READING XML FILE\n    TiXmlDocument doc (\"Profile.xml\");\n    if (!doc.LoadFile())\n         return NULL;\n\n    TiXmlElement *pRoot = doc.FirstChildElement(\"PRO\");\n    if (pRoot) //parsing\n    {\n        TiXmlElement *pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n        while (pParm)\n        {\n            ++(*count);\n            pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n        }\n    }\n\n    char ***xmlread;\n    int i = 0;\n\n    try\n    {\n        xmlread = new char**[*count];\n        try\n        {\n            pRoot = doc.FirstChildElement(\"PRO\");\n            if (pRoot) //parsing\n            {\n                pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n                while (pParm)\n                {\n                    xmlread[i] = new char*[2];\n                    try\n                    {\n                        xmlread[i][0] = NULL;\n                        xmlread[i][1] = NULL;\n                        try\n                        {\n                            xmlread[i][0] = myStrDup(pParm-&gt;Attribute(\"name\"));\n                            xmlread[i][1] = myStrDup(pParm-&gt;Attribute(\"value\"));\n                        }\n                        catch (...)\n                        {\n                            delete[] xmlread[i][0];\n                            delete[] xmlread[i][1];\n                            throw;\n                        }\n                    }\n                    catch (...)\n                    {\n                        delete[] xmlread[i];\n                        throw;\n                    }\n\n                    ++i;\n                    pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n                }\n            }\n        }\n        catch (...)\n        {\n            for (int j = 0; j &lt; i; ++j)\n            {\n                delete[] xmlread[j][0];\n                delete[] xmlread[j][1];\n                delete[] xmlread[j];\n            }\n            delete[] xmlread;\n            throw;\n        }\n    }\n    catch (...)\n    {\n        return NULL;\n    }\n\n    return xmlread; \n}\n\nint main()\n{\n    int count;\n    char*** ptr = read(&amp;count);\n    if (ptr)\n    {\n        for(int i = 0; i &lt; count; ++)\n        {\n            cout &lt;&lt; ptr[i][0] &lt;&lt; endl;\n            cout &lt;&lt; ptr[i][1] &lt;&lt; endl;\n        }\n\n        for(int i = 0; i &lt; count; ++)\n        {\n            delete[] ptr[i][0];\n            delete[] ptr[i][1];\n            delete[] ptr[i];\n        }\n        delete[] ptr;\n    }\n\n    return 0;\n}       \n</code></pre>\n\n<p>Not so nice, is it?  You could make it slightly nicer by returning an array whose elements are a struct type to hold the string pointers:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;iostream&gt;\n#include &lt;tinyxml.h&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std; \n\nstruct NameValue\n{\n    char *name;\n    char *value;\n\n    NameValue() : name(NULL), value(NULL) {}\n    ~NameValue() { delete[] name; delete[] value; }\n};\n\nchar* myStrDup(const char *s)\n{\n    //return strdup(s);\n    int len = strlen(s);\n    char *ptr = new char[len+1];\n    memcpy(ptr, s, len);\n    ptr[len] = '\\0';\n    return ptr;\n}\n\nNameValue* read(int *count)\n{\n    *count = 0;\n\n    //READING XML FILE\n    TiXmlDocument doc (\"Profile.xml\");\n    if (!doc.LoadFile())\n         return NULL;\n\n    TiXmlElement *pRoot = doc.FirstChildElement(\"PRO\");\n    if (pRoot) //parsing\n    {\n        TiXmlElement *pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n        while (pParm)\n        {\n            ++(*count);\n            pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n        }\n    }\n\n    NameValue *xmlread;\n    int i = 0;\n\n    try\n    {\n        xmlread = new NameValue[*count];\n        try\n        {\n            pRoot = doc.FirstChildElement(\"PRO\");\n            if (pRoot) //parsing\n            {\n                pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n                while (pParm)\n                {\n                    xmlread[i].name = myStrDup(pParm-&gt;Attribute(\"name\"));\n                    xmlread[i].value = myStrDup(pParm-&gt;Attribute(\"value\"));\n\n                    ++i;\n                    pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n                }\n            }\n        }\n        catch (...)\n        {\n            delete[] xmlread;\n            throw;\n        }\n    }\n    catch (...)\n    {\n        return NULL;\n    }\n\n    return xmlread; \n}\n\nint main()\n{\n    int count;\n    NameValue* ptr = read(&amp;count);\n    if (ptr)\n    {\n        for (int i = 0; i &lt; count; ++i)\n        {\n            cout &lt;&lt; ptr[i].name &lt;&lt; endl;\n            cout &lt;&lt; ptr[i].value &lt;&lt; endl;\n        }\n\n        delete[] ptr;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>However, in C++, the best option is to have your function return a <code>std::vector</code> instead, where the struct type holds <code>std::string</code> members for the strings.  Let the C++ standard library handle all of the memory management for you:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;stdexcept&gt;\n#include &lt;tinyxml.h&gt;\n\nusing namespace std; \n\nstruct NameValue\n{\n    string name;\n    string value;\n};\n\nvector&lt;NameValue&gt; read()\n{\n    vector&lt;NameValue&gt; xmlread;\n\n    //READING XML FILE\n    TiXmlDocument doc (\"Profile.xml\");\n    if (doc.LoadFile())\n    {\n        TiXmlElement *pRoot = doc.FirstChildElement(\"PRO\");\n        if (pRoot) //parsing\n        {\n            TiXmlElement *pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n            while (pParm)\n            {\n                NameValue elem;\n                elem.name = pParm-&gt;Attribute(\"name\");\n                elem.value = pParm-&gt;Attribute(\"value\");\n                xmlread.push_back(elem);\n\n                pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n            }\n        }\n    }\n\n    return xmlread; \n}\n\nint main()\n{\n    try\n    {\n        vector&lt;NameValue&gt; elems = read();\n        for (vector&lt;NameValue&gt;::size_type i = 0; i &lt; elems.size(); ++i)\n        {\n            cout &lt;&lt; elems[i].name &lt;&lt; endl;\n            cout &lt;&lt; elems[i].value &lt;&lt; endl;\n        }\n\n        /* or:\n        for (vector&lt;NameValue&gt;::iterator iter = elems.begin(); iter != elems.end(); ++iter)\n        {\n            cout &lt;&lt; iter-&gt;name &lt;&lt; endl;\n            cout &lt;&lt; iter-&gt;value &lt;&lt; endl;\n        }\n        */\n\n        /* or:\n        for (auto &amp;elem : elems)\n        {\n            cout &lt;&lt; elem.name &lt;&lt; endl;\n            cout &lt;&lt; elem.value &lt;&lt; endl;\n        }\n        */\n    }\n    catch (const exception &amp;e)\n    {\n        cerr &lt;&lt; e.what() &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1541024256, "last_edit_date": 1541024256, "creation_date": 1541023189, "answer_id": 53092538, "question_id": 53092260, "link": "https://stackoverflow.com/questions/53092260/returning-const-char-array-from-function/53092538#53092538", "title": "Returning const char* array from function", "body": "<blockquote>\n<pre><code>const char* ptr;\n...\ncout&lt;&lt;ptr[0][0]&lt;&lt;endl;\n</code></pre>\n</blockquote>\n\n<p>This cannot possibly work. If <code>ptr</code> is pointer to a(n array of) character, then <code>ptr[0]</code> is a character object (specifically, the first character of the pointed array of characters). Further applying <code>[0]</code> on that character is ill-formed since there is no subscript operator for arguments <code>char</code> and <code>int</code>.</p>\n\n<blockquote>\n<pre><code>TiXmlDocument doc (pFilename);\n...\nxmlread[i][0] = pParm-&gt;Attribute(\"name\");\n...\nreturn xmlread;\n</code></pre>\n</blockquote>\n\n<p>You've declared <code>doc</code> as an automatic variable. Automatic variables are destroyed <em>automatically</em> at the end of the scope where they are declared. <code>Attribute</code> member function returns pointers to memory owned by the document. The destructor of <code>TiXmlDocument</code> will destroy the owned memory, and the pointers in the array <code>xmlread</code> will be dangling after the function has returned. The behaviour of accessing memory pointed by a dangling pointer is undefined.</p>\n\n<p>The <code>xmlread</code> array itself is also an automatic variable, and is destroyed at the end of <code>read</code> as well. It is not possible to return an array out of a function, and returning a pointer to an array would simply result in a dangling pointer.</p>\n\n<p>Finally there is the problem that the return type is \"pointer to char\", while you're attempting to return an array of arrays of pointers to char. That is simply ill-formed.</p>\n\n<hr>\n\n<p>You <em>can</em> return containers from a function such as <code>std::vector</code>. You can structure the \"rows\" of your 2d array into a readable form using a class that contains instances of <code>std::string</code>. Remy has shown you how to do this in practice in another answer.</p>\n\n<blockquote>\n  <p>Is there a way to use pointers correctly instead of having to change my array and add struct types?</p>\n</blockquote>\n\n<p>Well, if you can change where you keep the array, then a minimal fix to your code is to put the array into <code>main</code>, and pass a reference to it into <code>read</code>, so that <code>read</code> can fill it. You must also do the same for <code>TiXmlDocument</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 10526767, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LMX6ZKOGlqw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOA9wSK-u9wu1-xpY94pFF5--EOPQ/mo/photo.jpg?sz=128", "display_name": "miceandmon", "link": "https://stackoverflow.com/users/10526767/miceandmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "accepted_answer_id": 53092393, "answer_count": 2, "score": -1, "last_activity_date": 1541026340, "creation_date": 1541021693, "question_id": 53092260, "link": "https://stackoverflow.com/questions/53092260/returning-const-char-array-from-function", "title": "Returning const char* array from function", "body": "<p>So I am with some XML files and I want to make a function that reads an XML file and returns an array that includes things like parameters and their values. So far, I am able to read the correct values. My problem occurs when I make a const char* read() function and include the code that is in the bottom, and return const char*. It has to be const char* because the return value from parsing the XML file is a const char*. How do I make a fuction that returns an array that I am able to read in a different function?\nI tried using pointers from an example I read, but it gives me: <code>cannot convert 'const char*[3][2] to int* in assignement.</code></p>\n\n<p>How do I use these pointers to arrays properly without gtting a type error?</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;tinyxml.h&gt;\n#include &lt;sstream&gt;\n\nusing namespace std; \nint main (void)\n{\n    const char* ptr;\n    ptr = read();\n    cout&lt;&lt;ptr[0][0]&lt;&lt;endl;\n    return 1;\n}       \nconst char* read()\n{\n    //READING XML FILE\n    const char* pFilename = \"Profile.xml\";\n    TiXmlDocument doc (pFilename);\n    if(!doc.LoadFile()) return 1;\n    const char *xmlread [3][2] = {0};\n    TiXmlElement *pRoot, *pParm;\n    int i = 0;\n    pRoot = doc.FirstChildElement(\"PRO\");\n    if (pRoot) //parsing\n    {\n        pParm = pRoot-&gt;FirstChildElement(\"Parameter\");\n        while (pParm)\n        {\n            xmlread[i][0] = pParm-&gt;Attribute(\"name\");\n            xmlread[i][1] = pParm-&gt;Attribute(\"value\");\n            pParm = pParm-&gt;NextSiblingElement(\"Parameter\");\n            cout&lt;&lt;xmlread[i][0]&lt;&lt;endl;\n            cout&lt;&lt;xmlread[i][1]&lt;&lt;endl;\n            i++;\n        }\n    }\n    return xmlread; \n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "window", "mingw"], "answers": [{"comments": [{"owner": {"reputation": 265, "user_id": 5693377, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DNNY2.png?s=128&g=1", "display_name": "nico.user", "link": "https://stackoverflow.com/users/5693377/nico-user"}, "edited": false, "score": 0, "creation_date": 1541022909, "post_id": 53092461, "comment_id": 93081712, "body": "Hi RistoS, so you ar esaying that I have to manually include the file where the WinMain function is included right? So in these case, that would be the window.h?"}], "tags": [], "owner": {"reputation": 64, "user_id": 3288618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ZqJi.jpg?s=128&g=1", "display_name": "RistoS", "link": "https://stackoverflow.com/users/3288618/ristos"}, "is_accepted": false, "score": 1, "last_activity_date": 1541022666, "creation_date": 1541022666, "answer_id": 53092461, "question_id": 53092183, "link": "https://stackoverflow.com/questions/53092183/visual-studio-code-undefined-reference-to-winmain16/53092461#53092461", "title": "Visual Studio Code &quot;undefined reference to `WinMain@16&#39;&quot;", "body": "<p>WinMain@16 usually appears when you try to compile some files, which doesn't contain the <code>main()/WinMain()</code> function (starting point of the program). In your case, not including the source file with the <code>main()/WinMain()</code> function in it was causing your troubles.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 12807328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35c2c99f45faeb50f86d1cf6c883d2c1?s=128&d=identicon&r=PG&f=1", "display_name": "junpfeng", "link": "https://stackoverflow.com/users/12807328/junpfeng"}, "is_accepted": false, "score": 5, "last_activity_date": 1580312874, "creation_date": 1580312874, "answer_id": 59970735, "question_id": 53092183, "link": "https://stackoverflow.com/questions/53092183/visual-studio-code-undefined-reference-to-winmain16/59970735#59970735", "title": "Visual Studio Code &quot;undefined reference to `WinMain@16&#39;&quot;", "body": "<p>I had the similar question, save the file manually and complie it again.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 12383406, "user_type": "registered", "profile_image": "https://graph.facebook.com/696126907576155/picture?type=large", "display_name": "Shuvam Kumar Panda", "link": "https://stackoverflow.com/users/12383406/shuvam-kumar-panda"}, "is_accepted": false, "score": 3, "last_activity_date": 1607666092, "creation_date": 1607666092, "answer_id": 65246425, "question_id": 53092183, "link": "https://stackoverflow.com/questions/53092183/visual-studio-code-undefined-reference-to-winmain16/65246425#65246425", "title": "Visual Studio Code &quot;undefined reference to `WinMain@16&#39;&quot;", "body": "<p>Just include a main() function in your code and you will be good to go.\nIt's just that your program doesn't know where to start.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15054162, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/5bc0f19e7865c73e23af8818f54e4452?s=128&d=identicon&r=PG", "display_name": "Mannat", "link": "https://stackoverflow.com/users/15054162/mannat"}, "is_accepted": false, "score": 0, "last_activity_date": 1611252056, "last_edit_date": 1611252056, "creation_date": 1611251248, "answer_id": 65832988, "question_id": 53092183, "link": "https://stackoverflow.com/questions/53092183/visual-studio-code-undefined-reference-to-winmain16/65832988#65832988", "title": "Visual Studio Code &quot;undefined reference to `WinMain@16&#39;&quot;", "body": "<p>Change the code runner setting \u201csave file before run\u201d.</p>\n"}], "owner": {"reputation": 265, "user_id": 5693377, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/DNNY2.png?s=128&g=1", "display_name": "nico.user", "link": "https://stackoverflow.com/users/5693377/nico-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16258, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1611252056, "creation_date": 1541021174, "question_id": 53092183, "link": "https://stackoverflow.com/questions/53092183/visual-studio-code-undefined-reference-to-winmain16", "title": "Visual Studio Code &quot;undefined reference to `WinMain@16&#39;&quot;", "body": "<p>so I am trying to make a Windows Desktop Application with c++ in Visual Studio Code and using MinGW as my compiler.\nI have a file called <em>test.cpp</em> in a folder called <em>src</em>:</p>\n\n<pre><code>#ifndef UNICODE\n#define UNICODE\n#endif \n#include &lt;windows.h&gt;\n\nint wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PWSTR lpCmdLine, \nint nCmdShow){\n\n  const wchar_t name[] = L\"Test\";\n\n  WNDCLASS wc = {};\n  //wc.lpfnWndProc = WindowProc;\n  wc.hInstance = hInstance;\n  wc.lpszClassName = name;\n\n  RegisterClass(&amp;wc);\n\n  HWND hWnd = CreateWindowEx(\n    0, \n    name, \n    L\"Window\", \n    WS_BORDER, \n    CW_USEDEFAULT, \n    CW_USEDEFAULT, \n    1200, \n    720, \n    0, \n    0, \n    hInstance, \n    0);\n\n  if(hWnd == NULL){\n    return 0;\n  }\n\n  ShowWindow(hWnd, nCmdShow);\n}\n</code></pre>\n\n<p>But when I compile I get this error:</p>\n\n<pre><code>&gt; Executing task: g++ -g test.cpp -o test.exe &lt;\n\nc:/mingw/bin/../lib/gcc/mingw32/6.3.0/../../../libmingw32.a(main.o):(.text.startup+0xa0): undefined reference to `WinMain@16'\ncollect2.exe: error: ld returned 1 exit status\nThe terminal process terminated with exit code: 1\n</code></pre>\n\n<p>I also have a <em>tasks.json</em> and a <em>launch.json</em> in <em>.vscode folder</em>:</p>\n\n<p><strong>tasks.json</strong></p>\n\n<pre><code>\"version\": \"2.0.0\",\n\"tasks\": [\n  {\n    \"label\": \"test\",\n    \"type\": \"shell\",\n    \"command\": \"g++\",\n    \"options\": {\n      \"cwd\": \"${workspaceFolder}/src\"\n    },\n    \"args\": [\n      \"-g\", \"test.cpp\", \"-o\", \"test.exe\"\n    ],\n    \"group\": {\n      \"kind\": \"build\",\n      \"isDefault\": true\n    }\n  }\n]\n</code></pre>\n\n<p><strong>Launch.json</strong></p>\n\n<pre><code>\"version\": \"0.2.0\",\n  \"configurations\": [\n  {\n    \"name\": \"(Windows) Launch\",\n    \"type\": \"cppvsdbg\",\n    \"request\": \"launch\",\n    \"program\": \"${workspaceFolder}/src/test.exe\",\n    \"args\": [],\n    \"stopAtEntry\": false,\n    \"cwd\": \"${workspaceFolder}/src\",\n    \"environment\": [],\n    \"externalConsole\": true,\n    \"preLaunchTask\": \"test\"\n  }\n]\n</code></pre>\n\n<p>The problem is that when I build a file with a <em>main</em> function it compiles fine, but when it is done with <em>wWinMain</em> that error happens and I don't know how to fix it. I'll really appreciate if someone can help me with this.</p>\n"}, {"tags": ["c++", "python-3.x", "swig"], "answers": [{"tags": [], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "is_accepted": true, "score": 1, "last_activity_date": 1541238569, "last_edit_date": 1541238569, "creation_date": 1541022534, "answer_id": 53092432, "question_id": 53092086, "link": "https://stackoverflow.com/questions/53092086/swig-issues-with-python-3-7-and-excess-args/53092432#53092432", "title": "SWIG issues with Python 3.7 and excess_args", "body": "<p>After some more research I found <a href=\"https://github.com/swig/swig/issues/1321\" rel=\"nofollow noreferrer\">this issue</a> on SWIGs GitHub page. Apparently the problem has been fixed but no new version with the fix released.</p>\n\n<p><strong>Udpate</strong></p>\n\n<p>Apparently an update is not necessary. I replaced the <code>LIb\\python\\pyrun.swg</code> with the current version from <a href=\"https://github.com/swig/swig/blob/master/Lib/python/pyrun.swg\" rel=\"nofollow noreferrer\">github</a>. That solved my problems. In case someone finds that too risky, one can just patch the problematic code section in <code>SWIG_Python_NewShadowInstance</code>, replacing </p>\n\n<pre><code>SWIGRUNTIME PyObject* \nSWIG_Python_NewShadowInstance(SwigPyClientData *data, PyObject *swig_this)\n{\n     ...\n#if PY_VERSION_HEX &gt;= 0x03000000\n    inst = ((PyTypeObject*) data-&gt;newargs)-&gt;tp_new((PyTypeObject*) data-&gt;newargs, Py_None, Py_None);\n    ...\n}\n</code></pre>\n\n<p>with this</p>\n\n<pre><code>SWIGRUNTIME PyObject* \nSWIG_Python_NewShadowInstance(SwigPyClientData *data, PyObject *swig_this)\n{\n     ...\n#if PY_VERSION_HEX &gt;= 0x03000000\n    PyObject *empty_args = PyTuple_New(0);\n    if (empty_args) {\n      inst = ((PyTypeObject *)data-&gt;newargs)-&gt;tp_new((PyTypeObject *)data-&gt;newargs, empty_args, Py_None);\n      Py_DECREF(empty_args);\n      ...\n    }\n    ...\n}\n</code></pre>\n\n<p>or just replace the whole function with the fixed version.</p>\n"}], "owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 53092432, "answer_count": 1, "score": 1, "last_activity_date": 1541238569, "creation_date": 1541020690, "last_edit_date": 1541238519, "question_id": 53092086, "link": "https://stackoverflow.com/questions/53092086/swig-issues-with-python-3-7-and-excess-args", "title": "SWIG issues with Python 3.7 and excess_args", "body": "<p>I have some code C++ code for an extension module that I just upgraded from Python2.7.11 with an older SWIG to python3.7.1 with SWIG 3.0.12. I am experiencing an issue similar to <a href=\"https://bugs.python.org/issue34495\" rel=\"nofollow noreferrer\">https://bugs.python.org/issue34495</a>, only its <code>Py_None</code> and not <code>nullptr</code>. The generated code in <code>SWIG_Python_NewShadowInstance</code> calls <code>tp_new</code> with <code>Py_None</code> for the 2nd and 3rd argument.</p>\n\n<pre><code>SWIG_Python_NewShadowInstance(SwigPyClientData *data, PyObject *swig_this)\n{\n    ...\n    #if PY_VERSION_HEX &gt;= 0x03000000\n    inst = ((PyTypeObject*) data-&gt;newargs)-&gt;tp_new((PyTypeObject*) data-&gt;newargs, Py_None, Py_None); \n</code></pre>\n\n<p>which leads to a <code>object_new</code> call with both <code>args</code> and <code>kwds</code> pointing to <code>Py_None</code></p>\n\n<pre><code>object_new(PyTypeObject *type, PyObject *args, PyObject *kwds)\n{\n    if (excess_args(args, kwds)) {\n</code></pre>\n\n<p>and then calls <code>excess_args</code> with <code>args</code> and <code>kwds</code></p>\n\n<pre><code>excess_args(PyObject *args, PyObject *kwds)\n{\n    return PyTuple_GET_SIZE(args) ||\n        (kwds &amp;&amp; PyDict_Check(kwds) &amp;&amp; PyDict_GET_SIZE(kwds));\n</code></pre>\n\n<p>where <code>PyTuple_GET_SIZE(args)</code> chokes on the <code>Py_None</code>.</p>\n\n<p>Does anyone know how to work around this problem?</p>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1541019689, "post_id": 53091886, "comment_id": 93080584, "body": "Ask yourself: what actual object does <code>node&lt;myType&gt;* p;</code> point to?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1541019899, "post_id": 53091886, "comment_id": 93080658, "body": "<code>node&lt;myType&gt;* p;</code> you better allocate a node before you attempt to access its members."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541020022, "post_id": 53091886, "comment_id": 93080700, "body": "Pointers are like arrows drawn on a paper. If they don&#39;t point to anything they&#39;re kind of useless."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1541020771, "creation_date": 1541020771, "answer_id": 53092102, "question_id": 53091886, "link": "https://stackoverflow.com/questions/53091886/segmentation-fault-when-trying-to-use-a-set-function/53092102#53092102", "title": "Segmentation fault when trying to use a set function", "body": "<blockquote>\n<pre><code>node&lt;myType&gt;* p;\n</code></pre>\n</blockquote>\n\n<p>You've declared a pointer. You've not initialised the pointer, so it doesn't point to any node (neither does it point to null; the pointed memory address is indeterminate).</p>\n\n<blockquote>\n<pre><code>p-&gt;setData(d);\n</code></pre>\n</blockquote>\n\n<p>Here, you dereference <code>p</code> to call a member function on the pointed object. But there is no pointed object, because you haven't created any node, and <code>p</code> doesn't point to any node. The behaviour of calling a member function of an uninitialised pointer is undefined (more generally, reading any indeterminate value has undefined behaviour).</p>\n"}], "owner": {"reputation": 19, "user_id": 10548162, "user_type": "registered", "profile_image": "https://graph.facebook.com/2231495533589860/picture?type=large", "display_name": "Josh Timmers", "link": "https://stackoverflow.com/users/10548162/josh-timmers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53092102, "answer_count": 1, "score": -1, "last_activity_date": 1541020771, "creation_date": 1541019588, "question_id": 53091886, "link": "https://stackoverflow.com/questions/53091886/segmentation-fault-when-trying-to-use-a-set-function", "title": "Segmentation fault when trying to use a set function", "body": "<p>I am having an issue with attempting to set a private data member in a node class. Here is the file:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\ntemplate &lt;class myType&gt;\nclass node{\n    private:\n        myType data;\n        node&lt;myType&gt;* next;\n    public:\n\n        // other functions\n\n        void setData(myType p){\n            data = p;\n        }\n\n        // other functions\n\n};\n</code></pre>\n\n<p>Here is the class that attempts to use the node class:</p>\n\n<pre><code>template &lt;class myType&gt;\nclass LL{\n    private:\n        node&lt;myType&gt;* head;\n        int index;\n    public:\n\n        // other functions            \n\n        void addItem(myType d){\n            node&lt;myType&gt;* p;\n            p-&gt;setData(d);\n            p-&gt;setNext(NULL);\n            if(head == NULL){\n                head = p;\n            }\n            else{\n                node&lt;myType&gt; *temp;\n                temp = head;\n                head = p;\n                head-&gt;setNext(temp);\n            }\n        }\n\n        // other functions\n};\n</code></pre>\n\n<p>The problem happens when attempting to use the setData function in the first node class. In the addItem function from the LL class, when p->setData is called, I get a segmentation fault. Through debugging I found that the segmentation fault happens once the program attempts to set data = p in the setData function. Any tips? </p>\n"}, {"tags": ["c++", "quicksort"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541019249, "post_id": 53091796, "comment_id": 93080409, "body": "Only do <code>swapc++</code> if <code>*a</code> or <code>*b</code> is <code>17</code>?"}, {"owner": {"reputation": 64, "user_id": 3288618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ZqJi.jpg?s=128&g=1", "display_name": "RistoS", "link": "https://stackoverflow.com/users/3288618/ristos"}, "edited": false, "score": 0, "creation_date": 1541020135, "post_id": 53091796, "comment_id": 93080735, "body": "`    if ((*a == 17) || (*b == 17))         swapc++;` if you add this in your swap function i think it works great.. otherwise like your original code counts all the swaps called in the quicksort"}], "owner": {"reputation": 41, "user_id": 10552749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40cf2002f8932ac4021da23fc9b1fed?s=128&d=identicon&r=PG&f=1", "display_name": "Strath", "link": "https://stackoverflow.com/users/10552749/strath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 522, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541019161, "creation_date": 1541019161, "question_id": 53091796, "link": "https://stackoverflow.com/questions/53091796/quick-sort-determine-the-number-of-comparisons-and-swaps-required", "title": "Quick Sort - Determine the number of comparisons and swaps required", "body": "<p>I am trying to sort this list S = [17, -10, 7, 19, 21, 23, -13, 31, 59], using QuickSort.</p>\n\n<p>Currently, the below code outputs the total number of swaps that would be required to sort the entire list. </p>\n\n<p>How would I change it to find how many swaps and comparisons would be needed to move S[1] (17) to its correct position?</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include &lt;iostream&gt;\nusing namespace std; \n\nint swapc = 0;\n\nvoid swap(int* a, int* b)\n{\n    int t = *a;\n    *a = *b;\n    *b = t;\n    swapc++;\n}\n\nint partition(int arr[], int low, int high)\n{\n    int pivot = arr[high];  \n    int i = (low - 1);  \n\n    for (int j = low; j &lt;= high - 1; j++)\n    {\n        if (arr[j] &lt;= pivot)\n        {\n            i++;    \n            swap(&amp;arr[i], &amp;arr[j]);\n        }\n    }\n    swap(&amp;arr[i + 1], &amp;arr[high]);\n    return (i + 1);\n}\n\nvoid quickSort(int arr[], int low, int high)\n{\n    if (low &lt; high)\n    {\n        /* pi is partitioning index, arr[p] is now\n           at right place */\n        int pi = partition(arr, low, high);\n\n        quickSort(arr, low, pi - 1);\n        quickSort(arr, pi + 1, high);\n    }\n}\n\nvoid printArray(int arr[], int size)\n{\n    int i;\n    for (i = 0; i &lt; size; i++)\n        printf(\"%d \", arr[i]);\n    printf(\"n\");\n}\n\n// Driver program to test above functions\nint main()\n{\n    int arr[] = { 17, -10, 7, 19, 21, 23, -13, 31, 59 };\n    int n = sizeof(arr) / sizeof(arr[0]);\n    quickSort(arr, 0, n - 1);\n    printf(\"Sorted array: n\");\n    printArray(arr, n);\n    cout &lt;&lt; swapc;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "httprequest", "curlpp"], "comments": [{"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1541018740, "post_id": 53091611, "comment_id": 93080189, "body": "<code>curl</code> is a command line tool. You need to look at <code>libcurl</code> <a href=\"https://curl.haxx.se/libcurl/c/\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c</a>"}, {"owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1541021448, "post_id": 53091611, "comment_id": 93081224, "body": "I have found following example &quot;HTTP Multipart formpost with file upload and two additional parts.&quot; but I&#39;m sure the same ability is in curlpp too... I will try to use it."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 1, "creation_date": 1541021634, "post_id": 53091611, "comment_id": 93081287, "body": "@MartinYork <a href=\"http://www.curlpp.org/\" rel=\"nofollow noreferrer\">curlpp</a> is a C++ wrapper for libcurl (the <a href=\"https://curl.haxx.se/libcurl/bindings.html\" rel=\"nofollow noreferrer\">Bindings</a> page on the libcurl site even links to curlpp).  Yevgeny wants to replicate the <code>curl</code> command using curlpp."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541021793, "post_id": 53091611, "comment_id": 93081340, "body": "@YevgenyTaradayko rather than asking for examples (which is off-topic for StackOverflow), please show what you have tried so far, then someone can point out what is missing or needs to be changed"}, {"owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "edited": false, "score": 0, "creation_date": 1541022145, "post_id": 53091611, "comment_id": 93081473, "body": "I used example 21. I think pointless to post that code here. I think now I should try &quot;Example 19: Multipart/formdata HTTP POST example.&quot;"}, {"owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "edited": false, "score": 0, "creation_date": 1541035209, "post_id": 53091611, "comment_id": 93084691, "body": "Seems I have found solution. All of I need it&#39;s just add file&#39;s content after json part after ampersand. So question can be closed."}, {"owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "edited": false, "score": 0, "creation_date": 1541039687, "post_id": 53091611, "comment_id": 93085571, "body": "Tested and confirmed. It works."}], "answers": [{"tags": [], "owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "is_accepted": true, "score": 2, "last_activity_date": 1541161013, "last_edit_date": 1541161013, "creation_date": 1541087462, "answer_id": 53104759, "question_id": 53091611, "link": "https://stackoverflow.com/questions/53091611/how-to-upload-file-and-json-data-with-method-post-use-curlpp/53104759#53104759", "title": "How to upload file and json data with method POST use curlpp", "body": "<p>I decided to post answer here, perhaps it will help somebody like me</p>\n\n<pre><code>static string post_request(const string url,const string body1,const string path2file)\n{\n   const string field_divider=\"&amp;\";\n   stringstream result;\n   try\n   {\n      using namespace std;\n\n      // This block responsible for reading in the fastest way media file\n      //      and prepare it for sending on API server\n      ifstream is(path2file);\n      is.seekg(0, ios_base::end);\n      size_t size=is.tellg();\n      is.seekg(0, ios_base::beg);\n      vector&lt;char&gt; v(size/sizeof(char));\n      is.read((char*) &amp;v[0], size);\n      is.close();\n      string body2(v.begin(),v.end());\n\n      // Initialization\n      curlpp::Cleanup cleaner;\n      curlpp::Easy request;\n      list&lt; string &gt; headers;\n      headers.push_back(\"Content-Type: application/json\");\n      headers.push_back(\"User-Agent: curl/7.77.7\");\n\n      using namespace curlpp::Options;\n\n      request.setOpt(new Verbose(true));\n      request.setOpt(new HttpHeader(headers));\n      request.setOpt(new Url(url));\n      request.setOpt(new PostFields(body1+field_divider+body2));\n      request.setOpt(new PostFieldSize(body1.length()+field_divider.length()+body2.length()));\n      request.setOpt(new curlpp::options::SslEngineDefault());\n      request.setOpt(WriteStream(&amp;result));\n      request.perform();\n   }\n   catch ( curlpp::LogicError &amp; e )\n     {\n       cout &lt;&lt; e.what() &lt;&lt; endl;\n     }\n   catch ( curlpp::RuntimeError &amp; e )\n     {\n       cout &lt;&lt; e.what() &lt;&lt; endl;\n     }\n\n   return (result.str());\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 534, "user_id": 8550160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6bbfb0b370c147dd9c1ad1c6320e586?s=128&d=identicon&r=PG&f=1", "display_name": "jman", "link": "https://stackoverflow.com/users/8550160/jman"}, "is_accepted": false, "score": 1, "last_activity_date": 1555460199, "creation_date": 1555460199, "answer_id": 55718213, "question_id": 53091611, "link": "https://stackoverflow.com/questions/53091611/how-to-upload-file-and-json-data-with-method-post-use-curlpp/55718213#55718213", "title": "How to upload file and json data with method POST use curlpp", "body": "<p>I tried using the posted answer but found that it did not work well with express' json parser and it would give a bad request each time.  I think using curlpp's form data is most likely the best option. See the code below for a basic example of sending a json string and a file in the form:</p>\n\n<pre><code>std::string BasicFormDataPost(std::string url, std::string body1, std::string filename)\n{\n  std::ostringstream result;\n  try\n  {\n  // Initialization\n  curlpp::Cleanup cleaner;\n  curlpp::Easy request;\n  curlpp::Forms formParts;\n  formParts.push_back(new curlpp::FormParts::Content(\"formjson\",body1)); // One has to remember to JSON.parse on the server to use the body data.\n  formParts.push_back(new curlpp::FormParts::File(\"attachment\", filename));\n\n  using namespace curlpp::Options;\n\n  // request.setOpt(new Verbose(true));\n  request.setOpt(new Url(url));\n  request.setOpt(new HttpPost(formParts));\n  request.setOpt(WriteStream(&amp;result));\n  request.perform();\n  return std::string( result.str());  \n }\n catch ( curlpp::LogicError &amp; e )\n {\n   std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n }\n catch ( curlpp::RuntimeError &amp; e )\n {\n   std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n }\n\n}\n</code></pre>\n\n<p>This answer was pieced together from the previous answer and the curlpp examples located at: <a href=\"https://github.com/datacratic/curlpp/tree/master/examples\" rel=\"nofollow noreferrer\">https://github.com/datacratic/curlpp/tree/master/examples</a></p>\n"}], "owner": {"reputation": 144, "user_id": 4636582, "user_type": "registered", "profile_image": "https://graph.facebook.com/871829719545936/picture?type=large", "display_name": "Yevgen Taradayko", "link": "https://stackoverflow.com/users/4636582/yevgen-taradayko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 53104759, "answer_count": 2, "score": 1, "last_activity_date": 1555460199, "creation_date": 1541018330, "last_edit_date": 1541021859, "question_id": 53091611, "link": "https://stackoverflow.com/questions/53091611/how-to-upload-file-and-json-data-with-method-post-use-curlpp", "title": "How to upload file and json data with method POST use curlpp", "body": "<p>I want to write C++ code with using curlpp library which work exactly as following example on curl if it possible of course.</p>\n\n<pre><code>&gt; curl -H \"Content-Type: application/json\" -X POST -d '{\"param1\":\"val1\", \"param2\":\"val2\", \"param3\":\"val3\"}' --data-binary '@/tmp/somefolder/file.bin' https://my-api.somedomain.com:1024/my_command_url\n&gt;\n</code></pre>\n\n<p>I was able to write transfer json text with method POST but when I added upload command this library substitute PUT instead of POST.</p>\n"}, {"tags": ["c++", "qt", "combobox", "delegates", "qstandarditemmodel"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1541019969, "post_id": 53091435, "comment_id": 93080683, "body": "setModelData establishes the value that the editor obtains for the delegate, and as I understand you do the inverse, that is, you want to be notified when the model is modified and notifies the editor, in that the function that is called is setEditorData"}, {"owner": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 2, "creation_date": 1541020756, "post_id": 53091435, "comment_id": 93080968, "body": "You can&#39;t, the model doesn&#39;t know views, and the current item is a view-specific property. You can use the same model with different views, which can all have their own selection/current item independently of each other."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10587885"}, "reply_to_user": {"reputation": 23728, "user_id": 299399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1907f4968c4c5b5fedb8f7cba422a032?s=128&d=identicon&r=PG", "display_name": "Frank Osterfeld", "link": "https://stackoverflow.com/users/299399/frank-osterfeld"}, "edited": false, "score": 0, "creation_date": 1541085843, "post_id": 53091435, "comment_id": 93103835, "body": "@FrankOsterfeld you can answer the question to accept it, and if possible to provide a suggestion about what i supposed to do"}], "owner": {"user_type": "does_not_exist", "display_name": "user10587885"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541087618, "creation_date": 1541017549, "last_edit_date": 1541087618, "question_id": 53091435, "link": "https://stackoverflow.com/questions/53091435/how-to-programmatically-change-the-index-of-qcombobox-using-qstandarditemmodel", "title": "How to programmatically change the Index of QComboBox using QStandardItemModel?", "body": "<p>How to use the <code>QStandardItemModel::setData</code> function to set the current value for a <code>QComboBox</code>  that is found in a certain cell for example at index (0,0) that works as a <strong>delegate</strong> such that the <code>QStandardItemModel::setData</code> function calls the <code>ComboBoxItemDelegate::setModelData</code> function.  </p>\n\n<p>I know that <code>ComboBoxItemDelegate::setModelData</code> function is called when an item is selected from the <code>comboBox</code> but my problem is that <code>ComboBoxItemDelegate::setModelData</code> function is not called by calling the <code>comboBox::setData</code>.<br>\n So I want to call <code>comboBox::setData</code> or (any other function that) programatically that will call <code>ComboBoxItemDelegate::setModelData</code>  </p>\n\n<p><strong>What I have tried:</strong>  </p>\n\n<p>Here is the <code>setModelData</code> function that is called when an item from the <code>comboBox</code> is selected from the UI:</p>\n\n<pre><code>void ComboBoxItemDelegate::setModelData(QWidget *editor, QAbstractItemModel *model, const QModelIndex &amp;index) const\n{\n    if (QComboBox* cb = qobject_cast&lt;QComboBox*&gt;(editor)){\n         qDebug()&lt;&lt;\"hello, i have been called from the setModelData\";\n    }\n    else\n        QStyledItemDelegate::setModelData(editor, model, index);\n}\n</code></pre>\n\n<p>But when I tried to set the data of the <code>comboBox</code> (that is found in index (0,0)) to \"Item A\" by the following:</p>\n\n<pre><code>ui-&gt;tableView-&gt;model()-&gt;setData ( ui-&gt;tableView-&gt;model()-&gt;index(0,0), \"Item A, Qt::EditRole);\n</code></pre>\n\n<p>the <code>comboBox</code>'s value was set successfully, but the <code>ComboBoxItemDelegate::setModelData</code> function was not called, and this is my problem</p>\n"}, {"tags": ["c++", "cmake", "clang-tidy"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1541017199, "post_id": 53091344, "comment_id": 93079672, "body": "Did the version of clang-tidy change? You should expect clang-tidy to improve over time and add new checks"}, {"owner": {"reputation": 538, "user_id": 4875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea513cad32d33ca70db6369d6277875?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Losilla", "link": "https://stackoverflow.com/users/4875652/sergio-losilla"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1541022789, "post_id": 53091344, "comment_id": 93081675, "body": "Yes it did, but the check was already in place. I would not think that clang-tidy would change its exit code, but I might be wrong..."}, {"owner": {"reputation": 538, "user_id": 4875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea513cad32d33ca70db6369d6277875?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Losilla", "link": "https://stackoverflow.com/users/4875652/sergio-losilla"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1541079945, "post_id": 53091344, "comment_id": 93100612, "body": "Actually, you were right! clang-tidy now returns a different exit status. <a href=\"https://reviews.llvm.org/D45258\" rel=\"nofollow noreferrer\">reviews.llvm.org/D45258</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1541086150, "post_id": 53091344, "comment_id": 93104006, "body": "Rather than edit it into the question, that may be better as an answer, especially if you found a way to make it work with the changes to clang-tidy"}, {"owner": {"reputation": 538, "user_id": 4875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea513cad32d33ca70db6369d6277875?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Losilla", "link": "https://stackoverflow.com/users/4875652/sergio-losilla"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1541143727, "post_id": 53091344, "comment_id": 93123079, "body": "You are right, but it would be nice if someone could say if there is some way to have cmake ignore the exit status."}], "answers": [{"tags": [], "owner": {"reputation": 538, "user_id": 4875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea513cad32d33ca70db6369d6277875?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Losilla", "link": "https://stackoverflow.com/users/4875652/sergio-losilla"}, "is_accepted": false, "score": 1, "last_activity_date": 1541160248, "last_edit_date": 1541160248, "creation_date": 1541144871, "answer_id": 53114576, "question_id": 53091344, "link": "https://stackoverflow.com/questions/53091344/cmake-cxx-clang-tidy-avoid-clang-diagnostic-error-interrupting-build/53114576#53114576", "title": "CMAKE_CXX_CLANG_TIDY: avoid clang-diagnostic-error interrupting build", "body": "<p>Not sure if a solution or a workaround, but this does the trick (in my OS...):</p>\n\n<pre><code>cmake -DCMAKE_CXX_CLANG_TIDY=\"${PATH_TO_SCRIPT}/suppress_exit_status.sh;clang-tidy\"\n</code></pre>\n\n<p>PATH_TO_SCRIPT to script is the absolute path to suppress_exit_status.sh, which looks like:</p>\n\n<pre><code>#!/bin/sh\n$@||echo Command \\\"$@\\\" failed with exit code $?\n</code></pre>\n\n<p>|| is the \"or\" operator, the second operands is only executed if the first one fails. It seems that cmake captures standard error from the command and throws it way, hence the error message.</p>\n\n<p>I could not figure out a more elegant way to do this, it is not possible to throw <code>||</code> directly into CMAKE_CXX_CLANG_TIDY.</p>\n"}], "owner": {"reputation": 538, "user_id": 4875652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ea513cad32d33ca70db6369d6277875?s=128&d=identicon&r=PG&f=1", "display_name": "Sergio Losilla", "link": "https://stackoverflow.com/users/4875652/sergio-losilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1541160248, "creation_date": 1541017130, "last_edit_date": 1541080099, "question_id": 53091344, "link": "https://stackoverflow.com/questions/53091344/cmake-cxx-clang-tidy-avoid-clang-diagnostic-error-interrupting-build", "title": "CMAKE_CXX_CLANG_TIDY: avoid clang-diagnostic-error interrupting build", "body": "<p>I am building a C++ project using clang-tidy as linter (cmake -DCMAKE_CXX_CLANG_TIDY=clang-tidy).</p>\n\n<p>After updating my system (Fedora 28->29, cmake 3.11->3.12 I believe), I cannot build any more when clang-tidy reports some clang-diagnostic-error (which I cannot fix right now...). I am pretty sure that clang-diagnostic-error's did not interrupt the build earlier... But I cannot be hundred percent sure.</p>\n\n<p>Edit: The change happened in clang-tidy, now it returns a non-zero exit code when errors are found.</p>\n\n<p>Is it possible to suppress those errors, something like the opposite of \"-warnings-as-errors\"?</p>\n"}, {"tags": ["c++", "c++11", "arduino"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541085422, "post_id": 53091205, "comment_id": 93103600, "body": "What compiler error are you getting exactly? Please provide the actual error message."}], "answers": [{"comments": [{"owner": {"reputation": 566, "user_id": 1334742, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc8e8463d674ca24fef79c7f742488ab?s=128&d=identicon&r=PG", "display_name": "lg.lindstrom", "link": "https://stackoverflow.com/users/1334742/lg-lindstrom"}, "edited": false, "score": 0, "creation_date": 1541059563, "post_id": 53091325, "comment_id": 93090559, "body": "Case 1) Not working for me,,  &quot;error: no matching function for call to &#39;Ticker::attach_ms(int, Led::Led(Ticker*, uint8_t, int, int)::__lambda0)&#39;&quot; Case 2) ok;  Whats problem with first case ??"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 566, "user_id": 1334742, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc8e8463d674ca24fef79c7f742488ab?s=128&d=identicon&r=PG", "display_name": "lg.lindstrom", "link": "https://stackoverflow.com/users/1334742/lg-lindstrom"}, "edited": false, "score": 0, "creation_date": 1541085378, "post_id": 53091325, "comment_id": 93103572, "body": "@lg.lindstrom well, let&#39;s start with the most obvious. Does your version of <code>Ticker.h</code> even have the <code>std::function</code> overload of <code>attach_ms()</code> to begin with? What is the actual compiler error you get when you tried to use <code>std::bind()</code>?"}, {"owner": {"reputation": 566, "user_id": 1334742, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc8e8463d674ca24fef79c7f742488ab?s=128&d=identicon&r=PG", "display_name": "lg.lindstrom", "link": "https://stackoverflow.com/users/1334742/lg-lindstrom"}, "edited": false, "score": 0, "creation_date": 1541144226, "post_id": 53091325, "comment_id": 93123264, "body": "&quot;error: no matching function for call to &#39;Ticker::attach_ms(int, Led::Led(Ticker*, uint8_t, int, int)::__lambda0)&#39;&quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 566, "user_id": 1334742, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc8e8463d674ca24fef79c7f742488ab?s=128&d=identicon&r=PG", "display_name": "lg.lindstrom", "link": "https://stackoverflow.com/users/1334742/lg-lindstrom"}, "edited": false, "score": 1, "creation_date": 1541172649, "post_id": 53091325, "comment_id": 93137472, "body": "@lg.lindstrom Does your version of <code>Ticker.h</code> even have the <code>std::function</code> overload of <code>attach_ms()</code> to begin with? Yes or no?"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1541084894, "last_edit_date": 1541084894, "creation_date": 1541017056, "answer_id": 53091325, "question_id": 53091205, "link": "https://stackoverflow.com/questions/53091205/how-to-use-non-static-member-functions-as-callback-in-c/53091325#53091325", "title": "How to use non static member functions as callback in C++", "body": "<p>According to <a href=\"https://github.com/esp8266/Arduino/blob/master/libraries/Ticker/Ticker.h\" rel=\"nofollow noreferrer\">this version of <code>Ticker.h</code></a>, <code>Ticker::attach_ms()</code> is overloaded to accept either a <code>std::function&lt;void(void)&gt;</code> or a <code>void (*)(TArg)</code> as the callback:</p>\n\n<pre><code>typedef void (*callback_with_arg_t)(void*);\ntypedef std::function&lt;void(void)&gt; callback_function_t;\n\nvoid attach_ms(uint32_t milliseconds, callback_function_t callback)\n{\n        _callback_function = callback;\n        attach_ms(milliseconds, _static_callback, (void*)this);\n}\n\ntemplate&lt;typename TArg&gt;\nvoid attach_ms(uint32_t milliseconds, void (*callback)(TArg), TArg arg)\n{\n        static_assert(sizeof(TArg) &lt;= sizeof(uint32_t), \"attach_ms() callback argument size must be &lt;= 4 bytes\");\n        uint32_t arg32 = (uint32_t)arg;\n        _attach_ms(milliseconds, true, reinterpret_cast&lt;callback_with_arg_t&gt;(callback), arg32);\n}\n</code></pre>\n\n<p>In the first case, you can use a lambda with <code>std::function</code>, you don't need <code>std::bind()</code> at all:</p>\n\n<pre><code>tick-&gt;attach_ms(tickLength, [this](){ this-&gt;tickerCallbackLed(); });\n</code></pre>\n\n<p>In the second case, the <code>callback</code> takes a user-defined argument that is passed to <code>Ticker::attach_ms()</code>, so you can pass <code>this</code> as that argument (which, as you can see above, is exactly what the <code>std::function</code> version of <code>Ticker::attach_ms()</code> does internally):</p>\n\n<pre><code>class Led {\n...\nprivate:\n    ...\n    static void staticTickerCallbackLed(Led *pThis);\n    void tickerCallbackLed();\n    ...\n};\n\nvoid Led::staticTickerCallbackLed(Led *pThis)\n{\n    pThis-&gt;TickerCallbackLed();\n}\n\n...\n\ntick-&gt;attach_ms(tickLength, &amp;Led::staticTickerCallbackLed, this);\n</code></pre>\n\n<p>Do note, though, that <code>Ticker::attach_ms()</code> does not allow a callback argument that is > 4 bytes in size, which means either approach will not work when compiling for 64-bit, where pointers are 8 bytes!  IMHO, that seems like a bug in the implementation of the internal <code>Ticker::_attach_ms()</code> method, which takes in a callback argument as <code>uint32_t</code> instead of as <code>uintptr_t</code>:</p>\n\n<pre><code>void _attach_ms(uint32_t milliseconds, bool repeat, callback_with_arg_t callback, uint32_t arg);\n</code></pre>\n"}], "owner": {"reputation": 566, "user_id": 1334742, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc8e8463d674ca24fef79c7f742488ab?s=128&d=identicon&r=PG", "display_name": "lg.lindstrom", "link": "https://stackoverflow.com/users/1334742/lg-lindstrom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "accepted_answer_id": 53091325, "answer_count": 1, "score": 1, "last_activity_date": 1541085112, "creation_date": 1541016529, "last_edit_date": 1541085112, "question_id": 53091205, "link": "https://stackoverflow.com/questions/53091205/how-to-use-non-static-member-functions-as-callback-in-c", "title": "How to use non static member functions as callback in C++", "body": "<p>I am writing a small program for ESP8266 in C++ and run into trouble. \nI've created a Led class form handling leds. The idea is that the class should handle a blink function. For this I use a library called Ticker.</p>\n\n<p>A function in Ticker, attach_ms requires a callback and I cant get that to work with a non static member functions.</p>\n\n<p>This is my header file:</p>\n\n<pre><code>#ifndef led_h\n#define led_h\n\n#include &lt;Arduino.h&gt; \n#include &lt;Ticker.h&gt;\n#include \"debugutils.h\"\n\n#define tickLength 100\n\n\nenum class LedState {\n        OFF,\n        ON,\n        SLOW_BLINK,\n        FAST_BLINK\n};\n\n\nclass Led {\npublic:\n\n    Led(Ticker *tick, uint8_t ledPin, int slowBlinkTime, int fastBlinkTime);\n\n    void on();\n    void off();\n    void slowBlink( );\n    void fastBlink( );\n\nprivate:\n    uint8_t pin;\n    int counter;\n    int slowNoBlinkTicks;\n    int fastNoBlinkTicks;\n    LedState state;\n    void ledOn();\n    void ledOff();\n    void ledInvert();\n    void clean();\n    void blink(int par);\n    void tickerCallbackLed();\n};\n#endif\n</code></pre>\n\n<p>This is my code file:</p>\n\n<pre><code>#include \"led.h\"\n\n\nvoid Led::ledOn() {\n    digitalWrite(pin, HIGH);\n}\n\nvoid Led::ledOff() {\n     digitalWrite(pin, LOW);\n}\n\nvoid Led::ledInvert() {\n    digitalWrite(pin, !digitalRead(pin));\n}\n\nvoid Led::clean() {\n    counter = 0;\n}\n\nvoid Led::blink(int par) {\n    if (counter &gt; par) {\n        ledInvert();\n        counter = 0;\n    }\n    else {\n        counter++;\n    }\n}\n\nvoid Led::tickerCallbackLed() {\n\n    switch (state) {\n        case LedState::OFF : break;\n        case LedState::ON : break;\n        case LedState::SLOW_BLINK : blink(slowNoBlinkTicks); break;\n        case LedState::FAST_BLINK : blink (fastNoBlinkTicks);  break;\n        default : break;\n    };\n\n\n};\n\nvoid Led::on() {\n    ledOn();\n    state = LedState::ON;\n};\n\n\nvoid Led::off(){\n    ledOff();\n    state = LedState::OFF;\n};\n\nvoid Led::slowBlink(){\n    clean();\n    ledInvert();\n    state = LedState::SLOW_BLINK;\n};\n\nvoid Led::fastBlink(){\n    clean();\n    ledInvert();\n    state = LedState::FAST_BLINK;\n};\n\n\nLed::Led(Ticker *tick, uint8_t ledPin, int slowBlinkTime, int fastBlinkTime) {\n\n    tick-&gt;attach_ms(tickLength, std::bind(&amp;Led::tickerCallbackLed,this));\n\n    slowNoBlinkTicks = slowBlinkTime/tickLength;\n    fastNoBlinkTicks = fastBlinkTime/tickLength;\n\n    pinMode(ledPin,OUTPUT);\n\n    digitalWrite(ledPin,LOW);\n\n    pin = ledPin;\n    state = LedState::OFF;\n    counter = 0;\n\n}\n</code></pre>\n\n<p>This line gives a compile error and I dont know how to fix it. Have tried to follow all \"advice\" I have found on internet.</p>\n\n<pre><code> tick-&gt;attach_ms(tickLength, std::bind(&amp;Led::tickerCallbackLed,this));\n</code></pre>\n"}, {"tags": ["c++", "header", "include", "linkage"], "comments": [{"owner": {"reputation": 3975, "user_id": 8513665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c39368317b0749f5d8f09735796c470e?s=128&d=identicon&r=PG&f=1", "display_name": "Christian Gibbons", "link": "https://stackoverflow.com/users/8513665/christian-gibbons"}, "edited": false, "score": 0, "creation_date": 1541016574, "post_id": 53091194, "comment_id": 93079438, "body": "What happens when you try to compile?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 2, "creation_date": 1541016596, "post_id": 53091194, "comment_id": 93079452, "body": "You have a bigger problem, one symptom of which is that, if you were able to compile the code, calling either function would result in an unending sequence of calls back and forth until your system ran out of some resource\u2014probably stack memory.  I&#39;d say you need to think more about why you want two functions that depend on one another in that way."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1541016632, "post_id": 53091194, "comment_id": 93079466, "body": "Apart from the fact you haven&#39;t declared the <code>do_something</code> functions your code should compile."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1541016686, "post_id": 53091194, "comment_id": 93079488, "body": "@Tim Mutual recursion in applications such as parsers is a common thing."}, {"owner": {"reputation": 9, "user_id": 9742123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8ce6b27586dfc25f85bf06f2284cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Bluerain", "link": "https://stackoverflow.com/users/9742123/bluerain"}, "edited": false, "score": 0, "creation_date": 1541016803, "post_id": 53091194, "comment_id": 93079541, "body": "I said it wrong, the linkage doesnt see the reference to one of functions, when I use both of them in main. Is it because of some other problem?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541016813, "post_id": 53091194, "comment_id": 93079546, "body": "@Neil I accept that. I&#39;m trying to read between the lines here, and assuming that the OP has greatly simplified their code in order to post here (which I appreciate). So I&#39;m wondering what the real problem is. It certainly should be possible to declare the functions, and compile and run the code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1541016896, "post_id": 53091194, "comment_id": 93079574, "body": "Show us a <code>main</code> that exhibits the problem."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541016919, "post_id": 53091194, "comment_id": 93079583, "body": "@Bluerain that sounds like a problem setting up your build environment. Project settings, perhaps. Are both the CC files part of the program you&#39;re building?"}, {"owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "edited": false, "score": 0, "creation_date": 1541017123, "post_id": 53091194, "comment_id": 93079648, "body": "how are you compiling? what compiler and what options?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1541017129, "post_id": 53091194, "comment_id": 93079650, "body": "The problem is with how you&#39;re linking the files, not with compiling them."}, {"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1541017174, "post_id": 53091194, "comment_id": 93079665, "body": "Show us the full error"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1541017177, "post_id": 53091194, "comment_id": 93079667, "body": "The headers and source files you&#39;ve shown are just fine; that&#39;s exactly how you should do it. That&#39;s why people are saying (correctly) that the problem is in how you&#39;re building your application. You need to compile and link the source file that contains <code>main</code> and the two source files that you&#39;ve shown here. One possibility is <code>clang++ main.cpp file1.cpp file2.cpp</code>."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1541017273, "post_id": 53091194, "comment_id": 93079691, "body": "You should be able to compile the source code to object code (<code>.cc</code> to <code>.o</code>) without problem.  When you link, you need to specify both <code>file1.o</code> and <code>file2.o</code> on the link line, plus the object file(s) that provide the <code>do_something()</code> and <code>do_something_else()</code> functions, and the file that provides <code>main()</code>.  If you have <code>file1.o</code> in library <code>lib1.a</code> and <code>file2.o</code> in library <code>lib2.a</code>, then you have mutual dependencies between two libraries, which is more complex to solve unless you do the obvious and create one library for both sets of object files."}], "answers": [{"comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1541019636, "post_id": 53091627, "comment_id": 93080562, "body": "You could use #pragma once or include guards rather than coding differently"}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 1, "creation_date": 1541019991, "post_id": 53091627, "comment_id": 93080691, "body": "I think that the double recursion is the real issue here as @JohnHill has described.  The #pragma once (which I included in my answer) is only necessary if a .h file will include another .h file.  The OP did not claim to be doing that."}], "tags": [], "owner": {"reputation": 687, "user_id": 2370362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Cb2Y.jpg?s=128&g=1", "display_name": "jhill515", "link": "https://stackoverflow.com/users/2370362/jhill515"}, "is_accepted": false, "score": -2, "last_activity_date": 1541018390, "creation_date": 1541018390, "answer_id": 53091627, "question_id": 53091194, "link": "https://stackoverflow.com/questions/53091194/two-files-using-each-other-funtions-how-to-solve-it/53091627#53091627", "title": "Two files using each other funtions - how to solve it?", "body": "<p>The best answer is <strong>don't design your code like that!</strong> This introduces a \"<a href=\"https://en.wikipedia.org/wiki/Circular_dependency\" rel=\"nofollow noreferrer\">circular dependency</a>,\" which immediately makes your code fragile. Additionally, the way you have your example written describes a double-recursive function (A calls B which calls A), and since there is no terminating condition, is unbounded! As you can see, this can lead to some very unmanageable circumstances.</p>\n\n<p>Let's forego good engineering practices for a while. How you described both headers &amp; source files is adequate and can be built with the following command:</p>\n\n<p><code>g++ file1.cc file2.cc -o libCoupledRecursiveExample.so</code></p>\n\n<p>This is where things become difficult: through the build instructions alone, you can't actually detect the dependency! Good static code checkers can detect these circumstances and warn you, but when you use a lazy compiler (like <code>g++</code> without flags), it's easy to sneak by code like this that won't generate any warnings.</p>\n"}, {"comments": [{"owner": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 1, "creation_date": 1541020425, "post_id": 53091942, "comment_id": 93080829, "body": "Nice I was going to write something like that but you beat me!"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541022159, "post_id": 53091942, "comment_id": 93081477, "body": "Your points 1 and 2 are good generic advice, but they do not address the question, which is <b>explicitly</b> about managing the recursion. Removing the recursion of course makes the recursion problem go away."}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "reply_to_user": {"reputation": 1706, "user_id": 9005255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67457c27150ca6906c2d06b7a43fc3e5?s=128&d=identicon&r=PG&f=1", "display_name": "Jake Freeman", "link": "https://stackoverflow.com/users/9005255/jake-freeman"}, "edited": false, "score": 0, "creation_date": 1541022974, "post_id": 53091942, "comment_id": 93081737, "body": "JohnHill provided a good response.  I provided a working example.  I have tested it with and without the recursion.  Both compile.  So, I have answered the question.  Calling a recursive function without an exit condition is wrong, so I took that out.  I also agree with @JakeFreeman and have used a .h guard.  The key is likely the compiler command.  The OP has not provided a Minimal Compilable example.  I have provided a complete example that anyone can play with.  Not sure why I would get a downvote when I have provided exactly what was requested."}], "tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 1, "last_activity_date": 1541019874, "creation_date": 1541019874, "answer_id": 53091942, "question_id": 53091194, "link": "https://stackoverflow.com/questions/53091194/two-files-using-each-other-funtions-how-to-solve-it/53091942#53091942", "title": "Two files using each other funtions - how to solve it?", "body": "<ol>\n<li>Modify the files to remove the double recursion.</li>\n<li>Use some code to prevent double inclusion of your .h files (I have used <code>#pragma once</code> at the top of the .h files)</li>\n<li>optionally, add a main.cpp to call the functions</li>\n<li>provide code for do_something()</li>\n<li>compile using . <code>g++ *.cpp -o main</code></li>\n</ol>\n\n<p>Great question!</p>\n\n<p>Here are the files:</p>\n\n<pre><code>// main.cpp\n//\n\n#include &lt;iostream&gt;\n\n#include \"file1.h\"\n#include \"file2.h\"\n\nint main() {\n\n    test2();\n    std::cout &lt;&lt; \"Hello, World!\" &lt;&lt; std::endl;\n    return 0;\n}\n\n// file1.cpp\n\n#include \"file1.h\"\n#include \"file2.h\"\n#include &lt;iostream&gt;\n\nvoid do_something() {\n    std::cout &lt;&lt; \"Just hit do_something\" &lt;&lt; std::endl;\n}\nvoid test1() {\n    do_something();\n//    test2();  // Do not use double recursion.\n}\n\n// file1.h\n\n#pragma once\n\nvoid do_something();\nvoid test1();\n\n// file2.cpp\n\n#include \"file1.h\"\n#include \"file2.h\"\n\nvoid test2() {\n    do_something();\n    test1();\n}\n\n// file2.h\n\n#pragma once\n\nvoid test2();\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9742123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc8ce6b27586dfc25f85bf06f2284cdf?s=128&d=identicon&r=PG&f=1", "display_name": "Bluerain", "link": "https://stackoverflow.com/users/9742123/bluerain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1541027750, "creation_date": 1541016486, "last_edit_date": 1541027750, "question_id": 53091194, "link": "https://stackoverflow.com/questions/53091194/two-files-using-each-other-funtions-how-to-solve-it", "title": "Two files using each other funtions - how to solve it?", "body": "<p>I have two headers with source files, lets say <code>file1.h</code>, <code>file1.cc</code> and <code>file2.h</code>, <code>file2.cc</code>. They use each others functions, for example:</p>\n\n<p>file1.h:</p>\n\n<pre><code>void test1();\n</code></pre>\n\n<p>file2.h:</p>\n\n<pre><code>void test2();\n</code></pre>\n\n<p>file1.cc:</p>\n\n<pre><code>#include \"file1.h\"\n#include \"file2.h\"\n\nvoid test1() {\n  do_something();\n  test2();\n}\n</code></pre>\n\n<p>file2.cc:</p>\n\n<pre><code>#include \"file1.h\"\n#include \"file2.h\"\n\nvoid test2() {\n  do_something_else();\n  test1();\n}\n</code></pre>\n\n<p>I get the problem, the dependancy is mutual and we cant compile one file without having another compiled. How to solve this problem?</p>\n"}, {"tags": ["c++", "crash", "backtrace"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1541017046, "post_id": 53091160, "comment_id": 93079625, "body": "It&#39;s not safe to call <code>backtrace</code> nor <code>fprintf</code> nor <code>backtrace_symbols_fd</code> in a signal handler. Sure, if you&#39;re handling a terminal signal like <code>SIGSEGV</code> you probably won&#39;t care about your program crashing &quot;again&quot; within the handler, but also there is no guarantee that you would get your trace."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 1, "last_activity_date": 1541016657, "creation_date": 1541016657, "answer_id": 53091244, "question_id": 53091160, "link": "https://stackoverflow.com/questions/53091160/c-backtrace-doesnt-print-functions-and-so-files/53091244#53091244", "title": "C++ backtrace doesn&#39;t print functions and so files", "body": "<p>Compile your program (and libraries) with debug symbols enabled. <code>-g</code> or <code>-ggdb</code>. And you will get more useful backtraces - and yes, do that even for release builds. Your binaries will be larger but your runtime performance will not be impacted.</p>\n\n<p>Also look into the <code>addr2line</code> tool.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 4213849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/774557457/picture?type=large", "display_name": "Yaron Israeli", "link": "https://stackoverflow.com/users/4213849/yaron-israeli"}, "is_accepted": true, "score": 0, "last_activity_date": 1541322258, "creation_date": 1541322258, "answer_id": 53139213, "question_id": 53091160, "link": "https://stackoverflow.com/questions/53091160/c-backtrace-doesnt-print-functions-and-so-files/53139213#53139213", "title": "C++ backtrace doesn&#39;t print functions and so files", "body": "<p>OK, I found what was the problem.\nBecause I am using make file, I should also add -g -rdynamic to linker. like this:</p>\n\n<pre><code>all: main.o\n    g++ -Wall -g -rdynamic -o prog main.o\n\nmain.o: main.cpp \n    g++ -Wall -g -c -rdynamic main.cpp\n</code></pre>\n\n<p>Now it's working :)</p>\n"}], "owner": {"reputation": 131, "user_id": 4213849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/774557457/picture?type=large", "display_name": "Yaron Israeli", "link": "https://stackoverflow.com/users/4213849/yaron-israeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53139213, "answer_count": 2, "score": 0, "last_activity_date": 1541322258, "creation_date": 1541016327, "question_id": 53091160, "link": "https://stackoverflow.com/questions/53091160/c-backtrace-doesnt-print-functions-and-so-files", "title": "C++ backtrace doesn&#39;t print functions and so files", "body": "<p>I have multiple projects. each project create its own so file.\nFor some reason backtrace doesn't print function and so file on crash.</p>\n\n<p>I compiled with -rdynamic. for example:\n-std=c++14 -pthread -pedantic <strong>-rdynamic</strong> -fPIC -g -c -fmessage-length=0 -llibtcmalloc</p>\n\n<p>This is the backtrace that I'm getting on program crash:</p>\n\n<pre><code>Error: signal 11:\n./libs/BaseCppProjectRun[0x402a50]\n/lib/x86_64-linux-gnu/libc.so.6(+0x354b0)[0x7fb9aa1db4b0]\n./libs/BaseCppProjectRun[0x403013]\n./libs/BaseCppProjectRun[0x402b95]\n/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xf0)[0x7fb9aa1c6830]\n./libs/BaseCppProjectRun[0x402669]\n</code></pre>\n\n<p>backtrace function:</p>\n\n<pre><code>void PrintCallStackOnError(int sig)\n{\n    void *array[10];\n    size_t size;\n    size = backtrace(array, 10);\n    fprintf(stderr, \"Error: signal %d:\\n\", sig);\n    backtrace_symbols_fd(array, size, STDERR_FILENO);\n    exit(1);\n}\n</code></pre>\n\n<p>(this function will be call by: signal(SIGSEGV, PrintCallStackOnError) that defined on main function).</p>\n\n<p>Can someone please help to print the so file and the function name on backtrace please?</p>\n\n<p>thanks.</p>\n"}, {"tags": ["c++", "exception"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 7, "creation_date": 1541014388, "post_id": 53090718, "comment_id": 93078381, "body": "<code>&quot;something happened&quot;</code> is a <code>const char *</code>, not a <code>std::exception</code>."}, {"owner": {"reputation": 1303, "user_id": 4059893, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8fb863f713a74ea8d36f12f753210211?s=128&d=identicon&r=PG&f=1", "display_name": "BKS", "link": "https://stackoverflow.com/users/4059893/bks"}, "edited": false, "score": 0, "creation_date": 1541014696, "post_id": 53090718, "comment_id": 93078532, "body": "Thanks, Is there any concept of global exception handler that can catch any types of unhanded exceptions? Coming from a java background and new to c++"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541014823, "post_id": 53090718, "comment_id": 93078610, "body": "@BKS Not in C++.  The closest we have is <code>catch (...)</code> which will catch anything but you can&#39;t actually access whatever was thrown so you could only have a generic message like <code>something bad happened</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1541014832, "post_id": 53090718, "comment_id": 93078616, "body": "Yes - <code>catch(...)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541014941, "post_id": 53090718, "comment_id": 93078665, "body": "@Nathan To be pedantic, you can get at the type by re-throwing and re-catching."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1541014986, "post_id": 53090718, "comment_id": 93078689, "body": "afaik in java your throw exceptions all over the place when &quot;something happened&quot;. In c++ excpetions aren&#39;t really cheap and are for cases when &quot;something exceptional happened&quot;"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541015054, "post_id": 53090718, "comment_id": 93078728, "body": "@NeilButterworth In <code>catch(...)</code> how would you rethrow the caught exception?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541015079, "post_id": 53090718, "comment_id": 93078738, "body": "@Nathan <code>throw;</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541015161, "post_id": 53090718, "comment_id": 93078778, "body": "@NeilButterworth Awesome. Learned something new today \\o/"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541015288, "post_id": 53090718, "comment_id": 93078845, "body": "@NathanOliver <a href=\"https://stackoverflow.com/a/315967/4117728\">this</a> mentions some current_exception in c++11 that i never heard of before to get a handle on the exception in a <code>catch(...)</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1541015291, "post_id": 53090718, "comment_id": 93078847, "body": "@NathanOliver <a href=\"http://cppsecrets.blogspot.com/2013/12/using-lippincott-function-for.html?m=1\" rel=\"nofollow noreferrer\">Lippincott Function</a>"}, {"owner": {"reputation": 1303, "user_id": 4059893, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8fb863f713a74ea8d36f12f753210211?s=128&d=identicon&r=PG&f=1", "display_name": "BKS", "link": "https://stackoverflow.com/users/4059893/bks"}, "edited": false, "score": 1, "creation_date": 1541018471, "post_id": 53090718, "comment_id": 93080099, "body": "Any idea why question was down voted? Its very helpful to leave some suggestions so that people can learn and improve their questions."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1541019353, "post_id": 53090718, "comment_id": 93080452, "body": "@user463035818: They are cheaper than writing explicit error handling logic to unwind the stack manually (both in cost and maintainability). Throw exceptions when there is an error that can not be fixed locally."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "edited": false, "score": 0, "creation_date": 1541068581, "post_id": 53090718, "comment_id": 93094586, "body": "@MartinYork not sure what to say other than: You are right and my comment was silly :)"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1541014767, "post_id": 53090779, "comment_id": 93078569, "body": "or catch anything with <code>catch (...)</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1541014984, "post_id": 53090779, "comment_id": 93078687, "body": "@user463035818 Just added that after seeing the comment from the OP"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541016327, "post_id": 53090779, "comment_id": 93079324, "body": "Regarding <code>catch (...)</code>. You can use a Lippincott Function to rethrow the exception and catch specific ones to provide more detail (when possible). I have a <code>log_exception</code> function for just that. It is used in <code>try (...)</code> blocks and tries to catch my application specific exceptions and log those if it can, otherwise it catches <code>std::exception</code> and logs what it can. Finally it just gives up and does a <code>throw;</code> to rethrow the exception for anyone to handle better than just logging."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 10, "last_activity_date": 1541014972, "last_edit_date": 1541014972, "creation_date": 1541014591, "answer_id": 53090779, "question_id": 53090718, "link": "https://stackoverflow.com/questions/53090718/why-code-inside-catch-does-not-get-executed/53090779#53090779", "title": "Why code inside catch does not get executed", "body": "<p>When you do </p>\n\n<pre><code>throw \"something happened\"\n</code></pre>\n\n<p>You aren't throwing a <code>std::exception</code>.  You are throwing a string literal which has a type of <code>const char[N]</code>.  To catch it you would need a catch block like</p>\n\n<pre><code>catch (const char* e)\n{\n    std::cout &lt;&lt; e &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Alternatively you could throw something that derives from <code>std::exception</code> like a <a href=\"https://en.cppreference.com/w/cpp/error/runtime_error\" rel=\"noreferrer\"><code>std::runtime_error</code></a> and that would look like</p>\n\n<pre><code>void Foo::DoSomething()\n{\n    throw std::runtime_error(\"something happened\");\n}\n\n...\n\ncatch (const std::exception&amp; e) // catch by reference to const\n{\n    std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>You can also specify a default handler like</p>\n\n<pre><code>catch (...)\n{\n    std::cout &lt;&lt; \"something bad happened - cannot recover\" &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>which will catch any thrown exception but you wont be able to access whatever was thrown so you can only give a general message.</p>\n"}], "owner": {"reputation": 1303, "user_id": 4059893, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8fb863f713a74ea8d36f12f753210211?s=128&d=identicon&r=PG&f=1", "display_name": "BKS", "link": "https://stackoverflow.com/users/4059893/bks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 53090779, "answer_count": 1, "score": 1, "last_activity_date": 1541016172, "creation_date": 1541014293, "last_edit_date": 1541016172, "question_id": 53090718, "link": "https://stackoverflow.com/questions/53090718/why-code-inside-catch-does-not-get-executed", "title": "Why code inside catch does not get executed", "body": "<p>I have a Foo class as follows  </p>\n\n<p><code>Foo.h</code></p>\n\n<pre><code>#pragma once\nclass Foo\n{\npublic:\n    Foo() = default;\n    ~Foo() = default;\n\n    void DoSomething();\n};\n</code></pre>\n\n<p><code>Foo.cpp</code></p>\n\n<pre><code>#include \"Foo.h\"\n\nvoid Foo::DoSomething()\n{\n    throw \"something happened\";\n}\n</code></pre>\n\n<p>And I use the class like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Foo.h\"\n\nint main()\n{\n    try\n    {\n        Foo foo;\n        foo.DoSomething();\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cout &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I expect the code to go in the catch block. However, it never goes in there. What am I doing wrong here?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1541014007, "post_id": 53090559, "comment_id": 93078188, "body": "This seems right. What is your issue? BTW, <code>GL_POLYGON</code>  is for OpenGL &lt; 3.2 or using a <i>Compatibility Profile</i>. I recomend using OGL &gt;=3.2 <i>Core Profile</i>, which means you have to draw the polygons as lines."}, {"owner": {"reputation": 245, "user_id": 8184778, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/79e3c55a8afdefb698406af059dd97e8?s=128&d=identicon&r=PG&f=1", "display_name": "Workkkkk", "link": "https://stackoverflow.com/users/8184778/workkkkk"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1541014316, "post_id": 53090559, "comment_id": 93078342, "body": "Both these polygons are just rotating in the same spot. I want the left polygon to move to the right and the right polygon to move to the left where they will eventually overlap in the middle. So each polygon is performing 2 actions, the first is the rotation which works, and the second is the translation along x axis which doesn&#39;t work"}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 2, "creation_date": 1541014599, "post_id": 53090559, "comment_id": 93078488, "body": "Aha!  I thought this <a href=\"https://stackoverflow.com/questions/53089161\">looked familiar</a>."}], "answers": [{"tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1541015099, "creation_date": 1541015099, "answer_id": 53090884, "question_id": 53090559, "link": "https://stackoverflow.com/questions/53090559/opengl-move-polygons-across-screen/53090884#53090884", "title": "OpenGL Move Polygons across screen", "body": "<p>Say you have an object whose centre is <code>C{cx, cy}</code>. You want to draw that object rotated and translated to another point. So you have two transformations: rotation and translation.</p>\n\n<p>The point is those transformations are NOT commutative. Order matters.</p>\n\n<p>Rotating (2D, for simplicity) around a point depends on where the object is relative to the point. Earth rotates around Sun, but also around itself. The result for each rotation is different.</p>\n\n<p>If you want your polygon to rotate around its centre (again, for simple understanding) then you need:</p>\n\n<ol>\n<li>Translate the polygon to the center of rotation, this is <code>C{cx,cy}</code>.</li>\n<li>Then rotate it.</li>\n<li>Then translate to the point where it was before step 1, or to the new point you want (along the X-axis in your case).</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1541085370, "creation_date": 1541085370, "answer_id": 53104139, "question_id": 53090559, "link": "https://stackoverflow.com/questions/53090559/opengl-move-polygons-across-screen/53104139#53104139", "title": "OpenGL Move Polygons across screen", "body": "<blockquote>\n  <p>What I'm trying to do is have both these polygons move along the x axis as they are rotating and so eventually they will overlap in the middle but I'm not sure how to do this.</p>\n</blockquote>\n\n<p>To this you have to calculate the rotation and translation in dependence of the time. The rotation angle and the translation vector is a function of the time.</p>\n\n<p>To do so you have to know the period of time which is passed since the start of the animation, at every time point, when the scene is rendered.<br>\nOne possibility to calculate the passed time is to use <a href=\"http://www.cplusplus.com/reference/chrono/high_resolution_clock/now/\" rel=\"nofollow noreferrer\"><code>std::chrono::high_resolution_clock</code></a>. Store the current time point at the start of the animation. Calculate the difference of two time points in every frame to get the past period of time.</p>\n\n<p>e.g. The following code calculates a period of time in seconds as a value of type <code>double</code>, with an accuracy of milliseconds:</p>\n\n<pre><code>#include &lt;chrono&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>std::chrono::high_resolution_clock::time_point start_time =\n    std::chrono::high_resolution_clock::now();\n</code></pre>\n\n<p></p>\n\n<pre><code>std::chrono::high_resolution_clock::time_point current_time =\n    std::chrono::high_resolution_clock::now();\nauto delta_time = current_time - start_time;\ndouble time_s = \n    (double)std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(delta_time).count() / 1000.0;\n</code></pre>\n\n<p>To calculate an angle in dependent of the time you have to define the rotations per second. Divide the period of time by the number of seconds and multiply the result with <code>360</code> for degrees respectively <code>2*PI</code> for radians:</p>\n\n<pre><code>float rot_per_s = 10.0f; // 10 full rotations per second\nfloat angle_deg = (float)(360.0 * time_s / rot_per_s);\n</code></pre>\n\n<p>To create a uniform movement from one point to another and the way back, the start and the end point have to be defined and the period of time for the full way.<br>\nWith this information the translation vector at a time point can be linear interpolated between the start point and the end point pf the movement:</p>\n\n<pre><code>double    motiontime_s = 5.0f;  // from start to end and back in 5 seconds\nglm::vec3 start_pt1    = .....; // start point of the movement\nglm::vec3 end_pt1      = .....; // end point of the movement\n\ndouble times;\ndouble pos_rel   = modf(time_s / motiontime_s, &amp;times);\nfloat  w         = pos_rel &lt; 0.5 ? (float)pos_rel * 2.0f : (float)(1.0 - pos_rel) * 2.0f;\nglm::vec3 trans1 = start_pt1 * (w-1.0f) + end_pt1*w;\n</code></pre>\n\n<p>With the angle and the translation vector the model matrices for the objects can be computed and scene can be drawn:</p>\n\n<pre><code>float rot_per_s = 1.0f/5.0f; // 1 full rotations in 5 second\nfloat angle_deg = (float)(360.0 * time_s * rot_per_s);\n\ndouble    motiontime_s = 5.0f; // from start to end and back in 5 seconds\nglm::vec3 start_pt1    = .....;\nglm::vec3 end_pt1      = .....;\n\ndouble times;\ndouble pos_rel   = modf(time_s / motiontime_s, &amp;times);\nfloat  w         = pos_rel &lt; 0.5 ? (float)pos_rel * 2.0f : (float)(1.0 - pos_rel) * 2.0f;\nglm::vec3 trans1 = start_pt1 * (w-1.0f) + end_pt1*w;\n\nglm::vec3 start_pt2 = glm::vec3(  1.0f, 0.0f, 0.0f );\nglm::vec3 end_pt2   = glm::vec3(  0.0f, 0.0f, 0.0f );\nglm::vec3 trans2    = start_pt2 * (w-1.0f) + end_pt2*w;\n\nglm::mat4 model1( 1.0f );\nmodel1 = glm::translate( model1, trans1 );\nmodel1 = glm::rotate( model1, glm::radians(angle_deg), glm::vec3(0.0f, 0.0f, 1.0f) );\nmodel1 = glm::scale( model1, glm::vec3(....) );\n\nglm::mat4 model2( 1.0f );\nmodel2 = glm::translate( model2, trans2 );\nmodel2 = glm::rotate( model2, glm::radians(-angle_deg), glm::vec3(0.0f, 0.0f, 1.0f) );\nmodel2 = glm::scale( model2, glm::vec3(....) );\n\n// Object 1\nglUniformMatrix4fv(location, 1, GL_FALSE, glm::value_ptr(model1));\nglDrawArrays(GL_POLYGON, 0, NumVertices);\n\n// Object 2\nglUniformMatrix4fv(location, 1, GL_FALSE, glm::value_ptr(model2));\nglDrawArrays(GL_POLYGON, 0, NumVertices);\n</code></pre>\n\n<p>The result may look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0KVB8.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0KVB8.gif\" alt=\"\"></a></p>\n"}], "owner": {"reputation": 245, "user_id": 8184778, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/79e3c55a8afdefb698406af059dd97e8?s=128&d=identicon&r=PG&f=1", "display_name": "Workkkkk", "link": "https://stackoverflow.com/users/8184778/workkkkk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 53104139, "answer_count": 2, "score": 1, "last_activity_date": 1541085370, "creation_date": 1541013598, "question_id": 53090559, "link": "https://stackoverflow.com/questions/53090559/opengl-move-polygons-across-screen", "title": "OpenGL Move Polygons across screen", "body": "<p>I have 2 polygons on either side of the screen that are rotating in a circle. What I'm trying to do is have both these polygons move along the x axis as they are rotating and so eventually they will overlap in the middle but I'm not sure how to do this.</p>\n\n<pre><code>glm::mat4 model_view = glm::scale(glm::mat4(1.0), glm::vec3(0.2, 0.2, 0.8));\nmodel_view = glm::translate(model_view, glm::vec3(-3.0, 0.0, 0.0));\nmodel_view = glm::rotate(model_view, 5*rotate_value, glm::vec3(0.0f, 0.0, 1.0f));\n\nglUniformMatrix4fv(location, 1, GL_FALSE, &amp;model_view[0][0]);\n\nglDrawArrays(GL_POLYGON, 0, NumVertices);\n\n//Object 2\nglm::mat4 model_view2 = glm::scale(glm::mat4(1.0), glm::vec3(0.2, 0.2, 0.8));\nmodel_view2 = glm::translate(model_view2, glm::vec3(2.0, 0.0, 0.0));\nmodel_view2 = glm::rotate(model_view2, 5 * rotate_value, glm::vec3(0.0, 0.0, -1.0f));\n\nglUniformMatrix4fv(location, 1, GL_FALSE, &amp;model_view2[0][0]);\n\n//Starting the pipeline\nglDrawArrays(GL_POLYGON, 0, NumVertices);\n</code></pre>\n"}, {"tags": ["c++", "qt", "file", "serialization", "memcpy"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 2752503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae2ae39bc9ad7d2e43588ec9c7d689e1?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/2752503/django"}, "edited": false, "score": 1, "creation_date": 1541015207, "post_id": 53090561, "comment_id": 93078802, "body": "Thank you. As of now the application will only run on one platform so endianness is not super important right now.  This is perfect, exactly what I was looking for. I am not well versed in the low level mechanics of C++ so this was a learning exercise for me. Thank you!"}], "tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": true, "score": 3, "last_activity_date": 1541013616, "creation_date": 1541013616, "answer_id": 53090561, "question_id": 53090332, "link": "https://stackoverflow.com/questions/53090332/converting-data-types-to-add-to-qbytearray-for-writing-raw-data-to-file/53090561#53090561", "title": "Converting data types to add to QByteArray for writing raw data to file", "body": "<p>Generally you want to serialize your data streams while keeping note of the endianness of the data. </p>\n\n<p><code>uint8_t</code> variables can be converted to bytes with a simple <code>static_cast</code>. For larger integer types, you need to keep track of the endianness of the data, and push it byte by byte. </p>\n\n<p><code>float</code> data types are a little bit trickier. You first need to represent the bits of the float as an integral value (<code>uint32_t</code>), then serialize from there. An example can be shown below: </p>\n\n<pre><code>QByteArray data;\n\n//serialize a uint8_t\ndata.push_back(static_cast&lt;char&gt;(status));\n\n//serialize a uint32_t, little-endian\ndata.push_back(static_cast&lt;char&gt;((ticks) &amp; 0xFF); //lowest-order byte\ndata.push_back(static_cast&lt;char&gt;((ticks &gt;&gt; 8) &amp; 0xFF));\ndata.push_back(static_cast&lt;char&gt;((ticks &gt;&gt; 16) &amp; 0xFF));\ndata.push_back(static_cast&lt;char&gt;((ticks &gt;&gt; 24) &amp; 0xFF)); //highest-order byte\n\n//serialize a float, by first representing the bits as a uint32_t: \n\nstatic_assert(sizeof(float) == sizeof(uint32_t), \"Floats should be 4 bytes\");\nuint32_t rep;\nstd::memcpy(&amp;rep, &amp;source0, sizeof(float)); //using memcpy here so that we don't violate strict aliasing. \ndata.push_back(static_cast&lt;char&gt;((rep) &amp; 0xFF);\ndata.push_back(static_cast&lt;char&gt;((rep &gt;&gt; 8) &amp; 0xFF));\ndata.push_back(static_cast&lt;char&gt;((rep &gt;&gt; 16) &amp; 0xFF));\ndata.push_back(static_cast&lt;char&gt;((rep &gt;&gt; 24) &amp; 0xFF));\n\nthis-&gt;file.write(data);\n</code></pre>\n\n<p>A few things to keep in mind: </p>\n\n<ol>\n<li><p>The endianness of your data is important. Not all systems have the same endianness so you need to be explicit in your documentation about which way the bytes are oriented. </p></li>\n<li><p>Some people try to convert the bits of a <code>float</code> to a <code>uint32_t</code> by writing something like <code>uint32_t rep = *reinterpret_cast&lt;uint32_t*&gt;(&amp;source0);</code>. Don't do this -- it is a violation of the <a href=\"https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule\">Strict Aliasing Rule</a>. </p></li>\n<li><p>It may be a good idea to serialize a version number as the first part of your file so that you can make future changes to the data format and have it be backwards-compatible. </p></li>\n<li><p>A lot of this manual bit-packing can be written into template functions that will do it automatically. This is left as an exercise to the reader.</p></li>\n<li><p>If performance is important, you should figure out how large the data will be and <code>reserve()</code> the space in the byte array before pushing -- this will save the array from having to reallocate and grow over and over. </p></li>\n</ol>\n"}], "owner": {"reputation": 329, "user_id": 2752503, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ae2ae39bc9ad7d2e43588ec9c7d689e1?s=128&d=identicon&r=PG&f=1", "display_name": "Django", "link": "https://stackoverflow.com/users/2752503/django"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 487, "favorite_count": 0, "accepted_answer_id": 53090561, "answer_count": 1, "score": 0, "last_activity_date": 1590074141, "creation_date": 1541012593, "last_edit_date": 1590074141, "question_id": 53090332, "link": "https://stackoverflow.com/questions/53090332/converting-data-types-to-add-to-qbytearray-for-writing-raw-data-to-file", "title": "Converting data types to add to QByteArray for writing raw data to file", "body": "<p>I have some data types that I am trying to write to to a raw data file. I'm not using QDataStream because that writes some extra information about the data, like the length and order of data.  I simply want a file that is only the bytes that I write, and will only be interpreted by someone who knows the correct order and size of the data types being written.</p>\n\n<p>I am using QFile, with the write method <code>qint64 QIODevice::write(const QByteArray &amp;byteArray)</code>.</p>\n\n<p>I have a few uint8_t, uint32_t and floats to write to the file. How can I transform this data into a QByteArray with no extra bytes?</p>\n\n<p>Here is what I have so far:</p>\n\n<pre><code>void FileWriter::writeData(uint8_t status, uint8_t channel, uint32_t ticks, float source0, float source1){\n\n    QByteArray dataToWrite;\n\n    //some code to add the paramters to the dataToWrite array\n\n    this-&gt;file.write(dataToWrite);\n}\n</code></pre>\n\n<p>A regular old style cast to <code>char</code> gives me an <code>implicit conversion changes signedness</code> error, so that wouldn't store the value correctly.</p>\n\n<p>what is the proper way to copies these values into a QByteArray so I can write it to file?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "edited": false, "score": 2, "creation_date": 1541012572, "post_id": 53090292, "comment_id": 93077554, "body": "What do you think <code>if(input &gt; max != 0)</code> is checking?"}, {"owner": {"reputation": 37, "user_id": 10425880, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h4JOHstjMTk/AAAAAAAAAAI/AAAAAAAAASA/lrgi-NRcDOg/photo.jpg?sz=128", "display_name": "Mason penguin Holder", "link": "https://stackoverflow.com/users/10425880/mason-penguin-holder"}, "reply_to_user": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "edited": false, "score": 0, "creation_date": 1541012668, "post_id": 53090292, "comment_id": 93077597, "body": "@GBlodgett I emailed my prof. and he said and I quote &quot;set max to a small number means -10000000 input != 0 (and not low)  should be in the &quot;if&quot; part and do it also for the &quot;if&quot; part of max&quot;"}, {"owner": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "edited": false, "score": 0, "creation_date": 1541012749, "post_id": 53090292, "comment_id": 93077637, "body": "The first part (<code>input &gt; max</code>) will resolve to a bool (int value either 0 or 1), so you will be comparing whether <code>input</code> is more than <code>max</code>, which probably isnt what you want"}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1541012783, "post_id": 53090292, "comment_id": 93077654, "body": "usually, max set to the first number you get."}, {"owner": {"reputation": 12572, "user_id": 8534008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8f2af9937cac66f08b6ee6e4219cc0d?s=128&d=identicon&r=PG&f=1", "display_name": "GBlodgett", "link": "https://stackoverflow.com/users/8534008/gblodgett"}, "edited": false, "score": 0, "creation_date": 1541012797, "post_id": 53090292, "comment_id": 93077663, "body": "Instead first check to see if <code>input</code> is zero (<code>if(input == 0)</code>) and act accordingly to it. Then check to see if <code>input &gt; max</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1541013497, "post_id": 53090292, "comment_id": 93077957, "body": "Instead of using <i>magic</i> numbers (e.g. <code>-100000000, 100000000</code>) use the correct min and max for type, e.g. <code>int min = std::numeric_limits&lt;int&gt;::max(), max = std::numeric_limits&lt;int&gt;::min()</code>"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541013827, "post_id": 53090292, "comment_id": 93078088, "body": "Why not control your program with a <code>while ((cin &gt;&gt; input) &amp;&amp; input != 0) { &#47;* do your checks here *&#47; }</code> loop? Further, you need only <code>if (input &gt; max) max = input;</code> and <code>if (input &lt; min) min = input;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2007, "user_id": 5834077, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N7N3H.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/5834077/carl"}, "edited": false, "score": 0, "creation_date": 1541013152, "post_id": 53090381, "comment_id": 93077811, "body": "What is the reason you added a system call at the bottom, seems unnecessary for the situation. Also, the question clearly stated they did not want the solution, so perhaps it would be beneficial to edit your answer to be more &quot;hint-like&quot;?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541013614, "post_id": 53090381, "comment_id": 93078009, "body": "Or at least wrap it in preprocessor conditionals so it is only executed on windows, e.g. <code>#if defined (_WIN32) || defined (_WIN64) system (&quot;PAUSE&quot;); #endif</code> (note: that is 3 separate lines)"}], "tags": [], "owner": {"reputation": 64, "user_id": 3288618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ZqJi.jpg?s=128&g=1", "display_name": "RistoS", "link": "https://stackoverflow.com/users/3288618/ristos"}, "is_accepted": true, "score": 1, "last_activity_date": 1541014302, "last_edit_date": 1541014302, "creation_date": 1541012808, "answer_id": 53090381, "question_id": 53090292, "link": "https://stackoverflow.com/questions/53090292/how-can-i-return-the-lowest-value-inputted-without-using-an-array/53090381#53090381", "title": "How can I return the lowest value inputted without using an array", "body": "<p>Because I dont have points to give you comments for hints, here i will add hints:\nSo, the easiest way to get the right solution of any problem is to visualize it or write simple example on paper for example:\nuser inputs: </p>\n\n<blockquote>\n  <p>1,4,6,10,0</p>\n</blockquote>\n\n<p>Think to your self how do you find the smallest and the largest number if someone shows you this numbers in the same order? what will you do?\nSo, at start when you seen the first number <strong>1</strong> for you is the smallest and the largest because you don't have more inputs right? </p>\n\n<blockquote>\n  <p>min = 1 and max = 1</p>\n</blockquote>\n\n<p>That someone who is showing you the numbers in the given order now shows you the second number <strong>4</strong> What you will do at this moment ? For sure you are going to compare the if the <strong>input</strong> is smaller than the <strong>min</strong>(or <strong>1</strong>) in your current stage, and if the <strong>input</strong> is smaller than the <strong>min</strong> you save the <strong>input</strong> value to the <strong>min</strong> or same thing for <strong>max</strong>: if the <strong>input</strong> is greater than <strong>max</strong> you save input value to the <strong>max</strong>(or in this case because our second number is <strong>4</strong> and the value of <strong>input</strong> is greater than <strong>max</strong>)so </p>\n\n<blockquote>\n  <p><strong>max</strong> will take <strong>4</strong> and <strong>min</strong> will be <strong>1</strong></p>\n</blockquote>\n\n<p>. You repeat same thing for all the inputed numbers, or you can make <strong>while loop</strong> if the <strong>input</strong> is <strong>-1</strong> the loop will end.\nI think I give you the idea of what you need to do and help you with my hints. And sorry because I gave you the source code in my previous answer which I edited it now. :)</p>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1541013719, "post_id": 53090513, "comment_id": 93078048, "body": "Well -- you need to use the numeric limits. Currently if <code>min = -395;</code> and <code>max = -100;</code> you are kind of &quot;up a creek&quot;..."}], "tags": [], "owner": {"reputation": 394, "user_id": 5555395, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9f3e26c9d237262a91576f3bfbfd194?s=128&d=identicon&r=PG&f=1", "display_name": "D. Jones", "link": "https://stackoverflow.com/users/5555395/d-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1541013347, "creation_date": 1541013347, "answer_id": 53090513, "question_id": 53090292, "link": "https://stackoverflow.com/questions/53090292/how-can-i-return-the-lowest-value-inputted-without-using-an-array/53090513#53090513", "title": "How can I return the lowest value inputted without using an array", "body": "<p>C++ offers this mechanism to find out machine specific min and max values, so you don't put values like 100000 to your variables:</p>\n\n<pre><code>std::numeric_limits&lt;int&gt;::min();\nstd::numeric_limits&lt;int&gt;::max();\n</code></pre>\n\n<p>You could use them for your <code>min</code> and <code>max</code> variables. As an alternative, you could use the first number given and assign it to both <code>min</code> and <code>max</code>.</p>\n\n<p>So, in the end,</p>\n\n<pre><code>int number = 0, min = 0, max = 0;\nstd::cin &gt;&gt; number;\nmin = max = number;\nwhile (number != 0) {\n    if (number &lt; min)\n        min = number;\n    else if (number &gt; max)\n        max = number;\n    std::cin &gt;&gt; number;\n}\n</code></pre>\n\n<p>Something like this would be enough. Then, you could use the variables however you want. This way, you didn't have to use an array for storing all the variables. \nAlso, I suggest you to have a look at <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">The Definitive C++ Book Guide and List</a> if you are a beginner.</p>\n"}, {"tags": [], "owner": {"reputation": 831, "user_id": 2867337, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/fbf0273a08cfad4e5f1f1485d3618222?s=128&d=identicon&r=PG&f=1", "display_name": "vinayawsm", "link": "https://stackoverflow.com/users/2867337/vinayawsm"}, "is_accepted": false, "score": 0, "last_activity_date": 1541014132, "last_edit_date": 1541014132, "creation_date": 1541013789, "answer_id": 53090603, "question_id": 53090292, "link": "https://stackoverflow.com/questions/53090292/how-can-i-return-the-lowest-value-inputted-without-using-an-array/53090603#53090603", "title": "How can I return the lowest value inputted without using an array", "body": "<p>1) Use a <code>while(1)</code> instead of <code>for(int i = 0; i = input; ++i)</code>. This will be an infinite loop. You can add a break statement to come out of the loop using if condition. With <code>i = input</code> condition loop may never execute. </p>\n\n<p>2) Break condition in your case is when <code>input = 0</code>. So add an <code>if (input == 0) break;</code> statement in the loop.</p>\n\n<p>3) Modify the matching conditions to</p>\n\n<pre><code>if(input &gt; max) { max = input; }\nif (input &lt; low) { low = input; }\n</code></pre>\n\n<p>4) Read the new input after matching conditions.</p>\n\n<pre><code>while(1){\n    if (input == 0) { break; }\n    if(input &gt; max) { max = input; }\n    if (input &lt; low) { low = input; }\n    cout&lt;&lt;\"Enter Another Number:\";\n    cin&gt;&gt;input;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10587676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3a394cba83a8befd9a6ed5e1b0c1982?s=128&d=identicon&r=PG&f=1", "display_name": "Card1nal", "link": "https://stackoverflow.com/users/10587676/card1nal"}, "is_accepted": false, "score": 0, "last_activity_date": 1541014360, "creation_date": 1541014360, "answer_id": 53090736, "question_id": 53090292, "link": "https://stackoverflow.com/questions/53090292/how-can-i-return-the-lowest-value-inputted-without-using-an-array/53090736#53090736", "title": "How can I return the lowest value inputted without using an array", "body": "<p>It is better to use while here rather than for loop that you have used. Try this :</p>\n\n<pre><code>    int n, max, min;\n    std::cout &lt;&lt; \"Enter a No. : \";\n    std::cin &gt;&gt; n;\n    //Assign 1st input to max and min \n    max = min = n;\n    while(1){\n        std::cout &lt;&lt; \"Enter a No. :\";\n        std::cin &gt;&gt; n;\n        if(0 == n) //Terminating condition for loop\n            break;\n        if(n &gt; max)\n            max = n;\n        else if(n &lt; mi)\n            min = n;\n    }\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10425880, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-h4JOHstjMTk/AAAAAAAAAAI/AAAAAAAAASA/lrgi-NRcDOg/photo.jpg?sz=128", "display_name": "Mason penguin Holder", "link": "https://stackoverflow.com/users/10425880/mason-penguin-holder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53090381, "answer_count": 4, "score": 1, "last_activity_date": 1541014360, "creation_date": 1541012404, "question_id": 53090292, "link": "https://stackoverflow.com/questions/53090292/how-can-i-return-the-lowest-value-inputted-without-using-an-array", "title": "How can I return the lowest value inputted without using an array", "body": "<p>Notice this is a homework problem I am not looking for the answer, but rather hints to help me solve my issue. The goal of the program is to list min and max numbers inputted without using an array. The input of 0 should be inputted to exit the program, but should not be recorded as the \"low\" value. I attempted to set low to not equal zero in the if statement, but it returns a 0 regardless.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main(){\n    cout&lt;&lt;\"Enter a Number: \";\n    double input;\n    int max = -100000000;\n    int low = 100000000;\n    cin&gt;&gt;input;\n    for(int i = 0; i = input; i++){\n    cout&lt;&lt;\"Enter Another Number:\";\n    cin&gt;&gt;input;\n    if(input &gt; max != 0) { max = input; }\n    else if (input &lt; low != 0) { low = input; }\n    }\n    cout&lt;&lt;\"MAX NUMBER WAS: \"&lt;&lt; max &lt;&lt; endl;\n    cout&lt;&lt;\"LOWEST NUMBER WAS: \"&lt;&lt; low;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1541012636, "post_id": 53090285, "comment_id": 93077581, "body": "Well, what&#39;s listening on port 3000?  Are you sure anything is?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9661490"}, "reply_to_user": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1541012879, "post_id": 53090285, "comment_id": 93077700, "body": "port 3000 is free .. nothing is listening to it .. I chose it because I have no services on it .."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 1, "creation_date": 1541013248, "post_id": 53090285, "comment_id": 93077851, "body": "What are you connecting to, if nothing is listening? Makes no sense..."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9661490"}, "edited": false, "score": 0, "creation_date": 1541014093, "post_id": 53090466, "comment_id": 93078226, "body": "I forgot to mention that I have a reverse tunnel on this port and I want to get some info by listening to it. is this the suitable way to do it ?"}, {"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 0, "creation_date": 1541014160, "post_id": 53090466, "comment_id": 93078258, "body": "If you want to listen on port 3000, you need to use sock.listen() and sock.accept(), not sock.connect.  I do not know enough about boosts implementation to give you code for that."}], "tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1541013127, "creation_date": 1541013127, "answer_id": 53090466, "question_id": 53090285, "link": "https://stackoverflow.com/questions/53090285/how-do-i-fix-the-boost-asio-c-exception-error/53090466#53090466", "title": "How do I fix the boost/asio c++ exception error?", "body": "<p>You can't connect to a port with nothing listening to it.  That's what Connection Refused means: \"nothing is here to respond to your request.\"</p>\n\n<p>You will have to run or use some other server for a connect() to succeed.</p>\n\n<p>If you're using a unix like system, you can probably use a tool like <a href=\"http://www.dest-unreach.org/socat/\" rel=\"nofollow noreferrer\">socat</a> to quickly throw together a service to listen on a port that you can then connect to.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9661490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 53090466, "answer_count": 1, "score": 0, "last_activity_date": 1541013127, "creation_date": 1541012368, "last_edit_date": 1541012653, "question_id": 53090285, "link": "https://stackoverflow.com/questions/53090285/how-do-i-fix-the-boost-asio-c-exception-error", "title": "How do I fix the boost/asio c++ exception error?", "body": "<p>I am trying to connect to the localhost port and I am getting the following error, how can I fix this error ?</p>\n\n<p>\" terminate called after throwing an instance of 'boost::exception_detail::clone_impl >'\n  what():  connect: Connection refused \"</p>\n\n<pre><code>#include &lt;boost/asio.hpp&gt;\n#include &lt;iostream&gt;\n\nint main() {\nboost::system::error_code ec;\nusing namespace boost::asio;\n\nio_service svc;\nip::tcp::socket sock(svc);\nsock.connect({ {}, 3000 }); // localhost port\n\nstd::string response;\n\ndo {\n    char buf[2048];\n    size_t bytes_transferred = sock.receive(buffer(buf), {}, ec);\n    if (!ec) response.append(buf, buf + bytes_transferred);\n} while (!ec);\n\n// print and exit\nstd::cout &lt;&lt; response &lt;&lt;std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "regex", "perl"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541012386, "post_id": 53090240, "comment_id": 93077504, "body": "Most C++ standard library regex implementations are not known for their speed. Stick with Perl, or use a more optimized/better performing C++ regex library."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1541012579, "post_id": 53090240, "comment_id": 93077556, "body": "Are you compiling C++ with optimizations enabled? If you&#39;re matching the entire log line, try using <code>regex_match</code> instead of <code>regex_search</code>."}, {"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1541014477, "post_id": 53090240, "comment_id": 93078424, "body": "Do you know any optimized regex library? @Shawn No, I am just compiling <code>g++ log.cpp</code> @Praetorian Okay, let me try. But still, if I had to use regex_search only, is there any way to perform at par with perl?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 1, "creation_date": 1541018655, "post_id": 53090240, "comment_id": 93080168, "body": "@Praetorian If the bottleneck is the regexp matching, optimizing his code is not likely to make too much difference."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1541021044, "post_id": 53090240, "comment_id": 93081076, "body": "Your C++ code isn&#39;t valid."}, {"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1541053189, "post_id": 53090240, "comment_id": 93088324, "body": "@NetMage with due respect sir, this is just a part of the code to make things crisp and clear, and the code is running fine. :D"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 1, "creation_date": 1541106408, "post_id": 53090240, "comment_id": 93113973, "body": "Can you explain where the close brace for the <code>if</code> is in your sample code? What about the &quot;statement&quot; <code>count++</code> that doesn&#39;t end in a semicolon? Did you copy and paste it into a C++ compiler?"}, {"owner": {"reputation": 381, "user_id": 3380064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrmsH.jpg?s=128&g=1", "display_name": "interduo", "link": "https://stackoverflow.com/users/3380064/interduo"}, "edited": false, "score": 0, "creation_date": 1541110346, "post_id": 53090240, "comment_id": 93115381, "body": "Are you able to change the regex engine you&#39;re using? Something like <a href=\"https://www.pcre.org/original/doc/html/pcrecpp.html\" rel=\"nofollow noreferrer\">pcrecpp</a> which implements PCRE for C++ might make a difference. Keep in mind this type of data crunching is what Perl was built for, so matching Perl&#39;s speed vs making your C++ regex faster may be two different goals. Edit: this <a href=\"https://stackoverflow.com/questions/41481811/why-pcre-regex-is-much-faster-than-c11-regex\">stackoverflow question</a> may add some perspective."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "edited": false, "score": 0, "creation_date": 1541053617, "post_id": 53093811, "comment_id": 93088466, "body": "Okay, I need to look up on re2c or ragel tool. Kindly look in my edit, I have shared the time taken to read file and time taken to read and use regex. But the point is, I don&#39;t think reading the log file is a bottleneck here. Thanks !"}], "tags": [], "owner": {"reputation": 571, "user_id": 7560598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13db5a7a1175e286303bd4d79ca3d4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Sherlock", "link": "https://stackoverflow.com/users/7560598/kelvin-sherlock"}, "is_accepted": true, "score": 2, "last_activity_date": 1541033308, "creation_date": 1541033308, "answer_id": 53093811, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl/53093811#53093811", "title": "C++ regex_search vs regex matching in perl", "body": "<p>Use a code generator tool like <a href=\"http://re2c.org\" rel=\"nofollow noreferrer\">re2c</a> or <a href=\"http://www.colm.net/open-source/ragel/\" rel=\"nofollow noreferrer\">ragel</a> to compile your regular expression into C/C++ code (which can be optimized by the compiler).</p>\n\n<p>Alternatively, <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/regex/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost.Regex</a> -- which was the basis for std::regex -- may be faster than your std::regex implementation.</p>\n\n<p>Also, the bottleneck might be I/O rather than regular expressions.  <a href=\"https://stackoverflow.com/questions/9371238/why-is-reading-lines-from-stdin-much-slower-in-c-than-python?rq=1\">Why is reading lines from stdin much slower in C++ than Python?</a></p>\n"}, {"comments": [{"owner": {"reputation": 3133, "user_id": 3668462, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2Rj1.jpg?s=128&g=1", "display_name": "Johan", "link": "https://stackoverflow.com/users/3668462/johan"}, "edited": false, "score": 2, "creation_date": 1562237141, "post_id": 56885873, "comment_id": 100319569, "body": "This does not provide an answer to the question. Once you have sufficient reputation you will be able to comment on any post; instead, provide answers that don&#39;t require clarification from the asker."}], "tags": [], "owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "is_accepted": false, "score": 0, "last_activity_date": 1562235853, "creation_date": 1562235853, "answer_id": 56885873, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl/56885873#56885873", "title": "C++ regex_search vs regex matching in perl", "body": "<p>On using boost::regex c++ code flies like a jet. \nThe std::regex is not optimised and made for performance. </p>\n"}], "owner": {"reputation": 61, "user_id": 6561563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1143921315631248/picture?type=large", "display_name": "Shray", "link": "https://stackoverflow.com/users/6561563/shray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 1, "accepted_answer_id": 53093811, "answer_count": 2, "score": 1, "last_activity_date": 1562235853, "creation_date": 1541012150, "last_edit_date": 1541053522, "question_id": 53090240, "link": "https://stackoverflow.com/questions/53090240/c-regex-search-vs-regex-matching-in-perl", "title": "C++ regex_search vs regex matching in perl", "body": "<p>I have a log file, which consists of 400k log lines.\nI found out, that my c++ code is very slow in comparison to perl code. \nSo I made a simple iteration over my log file and used regex of c++ and of perl. Perl scripts executes very fast while on the other hand c++ is taking time. </p>\n\n<p>In c++ i have in use <code>#include&lt;regex&gt;</code> library. Whereas in perl, regex can be used directly. \nHow can I make c++ code as efficient as perl? Since perl's implementation is by C only.  </p>\n\n<pre><code>regex log_line(\"(\\\\d{1,2}\\\\/[A-Za-z]{3}\\\\/\\\\d{1,4}):(\\\\d{1,2}:\\\\d{1,2}:\\\\d{1,2}).*?\\\".*?[\\\\s]+(.*?)[\\\\s\\?].*?\\\"[\\\\s]+([\\\\d]{3})[\\\\s]+(\\\\d+)[\\\\s]+\\\"(.*?)\\\"[\\\\s]+\\\"(.*?)\\\"[\\\\s]+(\\\\d+)\");\nstring line;\nint count =0;\nsmatch match;\nwhile(getline(logFileHandle, line){\n    if(regex_search(line , match , log_line)==true){\n    count++\n}\n\n\nopen(N==LOG_FILE,\"&lt;$log_file_location\");\n        my $count=0;\n        while($thisLine = &lt;=LOG_FILE&gt;){\n            if((($datePart, $time, $requestUrl, $status, $bytesDelivered, $httpReferer, $httpUserAgent, $requestReceived) = $thisLine =~ /(\\d{1,2}\\/[A-Za-z]{3}\\/\\d{1,4}):(\\d{1,2}:\\d{1,2}:\\d{1,2}).*?\\\".*?[\\s]+(.*?)[\\s\\?].*?\\\"[\\s]+([\\d]{3})[\\s]+(\\d+)[\\s]+\\\"(.*?)\\\"[\\s]+\\\"(.*?)\\\"[\\s]+(\\d+)/o) == 8){\n                $count++;\n            }\n        }\n</code></pre>\n\n<p>I'm afraid, if my question is not in the right format or something is missing let me know. Thanks. </p>\n\n<p><strong>EDIT 1</strong>\nSo I used <em>chrono</em> library in c++ to find out the time taken. Below is the output result. I took a sample of log file to make things easy. \nSimply reading the log file and counting no. of lines takes 57 ms. When regex_search is used it takes a whopping 2462 ms for the same sample log file.</p>\n\n<pre><code>No of Lines27399\nWith regex + logfileRead\nTime taken by function: 2462 milliseconds\nNo of Lines27399\nWith just simple logfileRead\nTime taken by function: 57 milliseconds\n</code></pre>\n"}, {"tags": ["c++", "sockets", "file-handling"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1541012124, "post_id": 53090182, "comment_id": 93077402, "body": "You must debug :) - might help if you send the trailing zero for the string, though."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 4, "creation_date": 1541012292, "post_id": 53090182, "comment_id": 93077464, "body": "<code>char fname[]={0};</code> make <code>fname</code> an array of <b><i>one</i></b> character."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1541012772, "post_id": 53090182, "comment_id": 93077649, "body": "but the filename can exceed 1 char !!"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541013027, "post_id": 53090182, "comment_id": 93077758, "body": "Yes it will, and you tell <code>recv</code> that <code>fname</code> can be up to <code>1024</code>  characters, which is a big problem. Think a little bit on how to create an array of the wanted size... (And remember that <code>fname[x] = &#39;\\0&#39;</code> can write the 1025:th element!)"}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1541013459, "post_id": 53090182, "comment_id": 93077941, "body": "So, this is what I could think of : Make 2 arrays, <code>fname</code> of dynamic size depending on what <code>recv</code> returns and another of size 1024 and then transfer all the required characters of that array to <code>fname</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541013940, "post_id": 53090182, "comment_id": 93078143, "body": "Where possible in C++ one should prefer a <code>std::vector</code> or <code>std::string</code> to a dynamic array."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1541014104, "post_id": 53090182, "comment_id": 93078228, "body": "But, I am not able to understand why 1024 makes a difference when I&#39;m terminating the <code>fname[x]=&#39;\\0&#39;</code>, when the size of <code>fname</code> is less than 1024 and why is it affecting the next <code>send</code> ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541014126, "post_id": 53090182, "comment_id": 93078241, "body": "Remember that <code>recv</code> will return what is available and this may be less than what you asked for. In the case of something like <code>recv(sockid,&amp;fsize,sizeof(int),0)</code> this can be fatal because you may have an integer built from less than `sizeof(int) bytes."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541014246, "post_id": 53090182, "comment_id": 93078305, "body": "With a size of 1024, <code>fname</code> is valid for the indexes 0 through 1023. Access of <code>fname[1024]</code> is out of bounds and undefined behaviour."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541014594, "post_id": 53090182, "comment_id": 93078486, "body": "@user4581301 I&#39;m not able understand that which case is fatal, the one where the size of received data is less than 3rd parameter specified in <code>recv</code> OR the case where the size of received data is more. I hope the second one is fatal."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1541014903, "post_id": 53090182, "comment_id": 93078642, "body": "Say you send the number 123456789 as the file size and integer is 32 bit. If <code>recv</code> returns 3, only 3 of the 4 bytes of the integer were read. Since you don&#39;t check for this possibility, the length you use will be wrong and there will be some unexpected garbage, the last byte of the length, at the beginning of the file."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541015023, "post_id": 53090182, "comment_id": 93078702, "body": "TCP is stream-based, not message-based. If you are sending discrete messages, you have to make certain that the whole message was read before trying to interpret it."}, {"owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "edited": false, "score": 0, "creation_date": 1541015230, "post_id": 53090182, "comment_id": 93078812, "body": "I got you, thnx !!"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541103712, "post_id": 53108298, "comment_id": 93112909, "body": "@DavidSchwartz <code>send()</code> and <code>recv()</code> operate on bytes only, so <code>sendAll()</code> and <code>readAll()</code> take byte counts."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541103835, "post_id": 53108298, "comment_id": 93112975, "body": "@DavidSchwartz <code>sizeof(char)</code> is 1 byte on all platforms, this is dictated by the C++ standard. But a byte is not always 8 bits on all platforms, but that is uncommon nowadays (check <code>CHAR_BIT</code> if you need to handle platforms with non-standard byte sizes)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1541103928, "post_id": 53108298, "comment_id": 93113012, "body": "@DavidSchwartz <code>sizeof()</code> returns the number of bytes. That is also dictated by the C++ standard"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1541103124, "last_edit_date": 1541103124, "creation_date": 1541101249, "answer_id": 53108298, "question_id": 53090182, "link": "https://stackoverflow.com/questions/53090182/cannot-send-int-from-server-to-client-in-socket-programming/53108298#53108298", "title": "Cannot send int from Server to Client in Socket Programming", "body": "<p>TCP is a byte stream. <code>send()</code> and <code>recv()</code> can return fewer bytes than requested, so you need to call them in loops to ensure you send/recv all of the bytes you are expecting.</p>\n\n<p>Also, you need to frame your messages in such a way that you know where a message ends and the next message begins.</p>\n\n<p>Also, integers should always be transmitted using fixed-width integer types, and multi-byte integers should always be transmitted in network byte order (big endian), for consistency across platform boundaries.</p>\n\n<p>Try something like this:</p>\n\n<p>Server</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;limits&gt;\n#include &lt;cstdint&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n\nbool filesize(const std::string &amp;fname, std::uint32_t &amp;fsize)\n{\n    FILE *f = fopen(fname.c_str(), \"rb\");\n    if (!f)\n    {\n        std::cout &lt;&lt; \"Failed opening file\\n\";\n        return false;\n    }\n\n    if (fseek(f, 0, SEEK_END) != 0)\n    {\n        std::cout &lt;&lt; \"Failed seeking file\\n\";\n        fclose(f);\n        return false;\n    }\n\n    long len = ftell(f);\n    fclose(f);\n\n    if (len == -1L)\n    {\n        std::cout &lt;&lt; \"Failed getting file size\\n\";\n        return false;\n    }\n\n    if (sizeof(long) &gt; sizeof(std::uint32_t))\n    {\n        if (len &gt; std::numeric_limits&lt;std::uint32_t&gt;::max())\n        {\n            std::cout &lt;&lt; \"File size exceeds uint32_t max\\n\";\n            return false;\n        }\n    }\n\n    fsize = static_cast&lt;std::uint32_t&gt;(len);\n    return true;\n}\n\nint readAll(int sock, void *buffer, int buflen)\n{\n    char *ptr = static_cast&lt;char*&gt;(buffer);\n    int x;\n\n    while (buflen &gt; 0)\n    {\n        x = recv(sock, ptr, buflen, 0);\n        if (x &lt;= 0)\n        {\n            if (x == 0)\n                std::cout &lt;&lt; \"Client disconnected\\n\";\n            else\n                std::cout &lt;&lt; \"Failed reading socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n            return x;\n        }\n\n        ptr += x;\n        buflen -= x;\n    }\n\n    return 1;\n}\n\nint readUInt32(int sock, std::uint32_t &amp;value)\n{\n    int x = readAll(sock, &amp;value, sizeof(value));\n    if (x &lt;= 0) return x;\n    value = ntohl(value);\n    return 1;\n}\n\nint readString(int sock, std::string &amp;s)\n{\n    s.clear();\n\n    // approach 1: null-terminated string\n\n    char buffer[1024];\n    int x, offset = 0;\n\n    do\n    {\n        x = readAll(sock, &amp;buffer[offset], 1);\n        if (x &lt;= 0)\n            return x;\n\n        if (buffer[offset] == '\\0')\n            break;\n\n        if (++offset == sizeof(buffer))\n        {\n            s.append(buffer, offset);\n            offset = 0;\n        }\n    }\n    while (true);\n\n    if (offset &gt; 0)\n        s.append(buffer, offset);\n\n    return 1;\n\n    // approach 2: length-prefixed string\n\n    std::uint32_t size;\n    int x = readUInt32(sock, size);\n    if ((x &gt; 0) &amp;&amp; (size &gt; 0))\n    {\n        s.resize(size);\n        x = readAll(sock, &amp;s[0], size);\n    }\n\n    if (x &lt;= 0)\n        return x;\n\n    return 1;\n}\n\nbool sendAll(int sock, const void *buffer, int buflen)\n{\n    const char *ptr = static_cast&lt;const char*&gt;(buffer);\n    int x;\n\n    while (buflen &gt; 0)\n    {\n        x = send(sock, ptr, buflen, 0);\n        if (x &lt; 0)\n        {\n            std::cout &lt;&lt; \"Failed sending socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n            return false;\n        }\n\n        ptr += x;\n        buflen -= x;\n    }\n\n    return true;\n}\n\nbool sendBool(int sock, bool value)\n(\n    std::uint8_t temp = value;\n    return sendAll(sock, &amp;temp, sizeof(temp));\n}\n\nbool sendUInt32(int sock, std::uint32_t value)\n{\n    value = htonl(value);\n    return sendAll(sock, &amp;value, sizeof(value));\n}\n\nint main()\n{\n    int sockid = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockid &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed creating socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n        return 0;\n    }\n\n    int client_socket;\n    struct sockaddr_in server, client;\n    socklen_t client_size;\n\n    server.sin_family = AF_INET;\n    server.sin_port = htons(8791);\n    server.sin_addr.s_addr = htonl(INADDR_ANY);\n    socklen_t client_size;\n\n    if (bind(sockid, (struct sockaddr*)&amp;server, sizeof(server)) &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed binding socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n        close(sockid);\n        return 0;\n    }\n    std::cout &lt;&lt; \"Binded\";\n\n    if (listen(sockid, 4) &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed listening socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n        close(sockid);\n        return 0;\n    }\n    std::cout &lt;&lt; \"Listening....\\n\";\n\n    client_size = sizeof(client);\n    if ((client_socket = accept(sockid, (struct sockaddr*)&amp;client, &amp;client_size)) &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed accepting client socket\\n\";\n        close(sockid);\n        return 0;\n    }\n    std::cout &lt;&lt; \"Client connected\\n\";\n\n    std::string fname;\n    if (readString(client_socket, fname) &lt;= 0)\n    {\n        close(client_socket);\n        close(sockid);\n        return 0;\n    }\n\n    std::cout &lt;&lt; fname &lt;&lt; \"\\n\";\n\n    std::uint32_t fsize;\n    bool success = filesize(fname, fsize);\n\n    if (!sendBool(client_socket, success))\n    {\n        std::cout &lt;&lt; \"Failed sending file size reply\\n\";\n    }\n    else if (success)\n    {\n        std::cout &lt;&lt; \"FILE SIZE : \" &lt;&lt; fsize &lt;&lt; std::endl;      \n\n        if (!sendUInt32(client_socket, fsize))\n            std::cout &lt;&lt; \"Failed sending file size\\n\";\n    }\n\n    close(client_socket);\n    close(sockid);\n\n    return 0;\n}\n</code></pre>\n\n<p>Client</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cstdint&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;unistd.h&gt;\n\nint readAll(int sock, void *buffer, int buflen)\n{\n    char *ptr = static_cast&lt;char*&gt;(buffer);\n    int x;\n\n    while (buflen &gt; 0)\n    {\n        x = recv(sock, ptr, buflen, 0);\n        if (x &lt;= 0)\n        {\n            if (x == 0)\n                std::cout &lt;&lt; \"Server disconnected\\n\";\n            else\n                std::cout &lt;&lt; \"Failed reading socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n            return x;\n        }\n\n        ptr += x;\n        buflen -= x;\n    }\n\n    return 1;\n}\n\nint readBool(int sock, bool &amp;value)\n{\n    std::uint8_t temp;\n    int x = readAll(sock, &amp;temp, sizeof(temp));\n    if (x &lt;= 0) return x;\n    value = (temp != 0);\n    return 1;\n}\n\nint readUInt32(int sock, std::uint32_t &amp;value)\n{\n    int x = readAll(sock, &amp;value, sizeof(value));\n    if (x &lt;= 0) return x;\n    value = ntohl(value);\n    return 1;\n}\n\nbool sendAll(int sock, const void *buffer, int buflen)\n{\n    const char *ptr = static_cast&lt;const char*&gt;(buffer);\n    int x;\n\n    while (buflen &gt; 0)\n    {\n        x = send(sock, ptr, buflen, 0);\n        if (x &lt; 0)\n        {\n            std::cout &lt;&lt; \"Failed sending socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n            return false;\n        }\n\n        ptr += x;\n        buflen -= x;\n    }\n\n    return true;\n}\n\nbool sendString(int sock, const std::string &amp;s)\n{\n    // approach 1: null-terminated string\n\n    return sendAll(sock, s.c_str(), s.size()+1);\n\n    // approach 2: length-prefixed string\n\n    std::uint32_t size = s.size();\n    return sendUInt32(sock, size) &amp;&amp; sendAll(sock, s.c_str(), size);\n}\n\nint main()\n{\n    int sockid = socket(AF_INET, SOCK_STREAM, 0);\n    if (sockid &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed creating socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n        return 0;\n    }\n\n    struct sockaddr_in server;\n    server.sin_family = AF_INET;\n    server.sin_port = htons(8797);\n    server.sin_addr.s_addr = inet_addr(\"127.0.0.1\");\n\n    if (connect(sockid, (struct sockaddr*)&amp;server, sizeof(server)) &lt; 0)\n    {\n        std::cout &lt;&lt; \"Failed connecting socket, error \" &lt;&lt; errno &lt;&lt; \"\\n\";\n        close(sockid);\n        return 0;\n    }\n    std::cout &lt;&lt; \"Connected\\n\";\n\n    std::cout &lt;&lt; \"Enter File name : \";\n    std::string fname;\n    std::getline(std::cin, fname);\n\n    if (!sendString(sockid, fname))\n    {\n        std::cout &lt;&lt; \"Failed sending file name\\n\";\n        close(sockid);\n        return 0;\n    }\n\n    bool success;\n    if (readBool(sockid, success) &lt;= 0)\n    {\n        std::cout &lt;&lt; \"Failed receiving file size reply\\n\";\n        close(sockid);\n        return 0;\n    }\n\n    if (success)\n    {\n        std::uint32_t fsize;\n        if (readUInt32(sockid, fsize) &lt;= 0)\n        {\n            std::cout &lt;&lt; \"Failed receiving file size\\n\";\n            close(sockid);\n            return 0;\n        }\n\n        std::cout &lt;&lt; \"FILE-SIZE : \" &lt;&lt; fsize &lt;&lt; \"\\n\";   \n    }\n    else\n        std::cout &lt;&lt; \"FILE-SIZE error\\n\";\n\n    close(sockid);\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 1651, "user_id": 7547722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b982a43ca0f7d98ade0f03acc581d2bf?s=128&d=identicon&r=PG&f=1", "display_name": "ajaysinghnegi", "link": "https://stackoverflow.com/users/7547722/ajaysinghnegi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 53108298, "answer_count": 1, "score": 1, "last_activity_date": 1541103124, "creation_date": 1541011928, "question_id": 53090182, "link": "https://stackoverflow.com/questions/53090182/cannot-send-int-from-server-to-client-in-socket-programming", "title": "Cannot send int from Server to Client in Socket Programming", "body": "<p>I am new to Socket Programming and trying to make a Server-Client program in which the client first sends the name of a file and then the server opens that file and counts the size of the file and sends the size back to the client.</p>\n\n<p>Although on the Server side, I can calculate the size of the file but not able to send it back to the client.</p>\n\n<p>I'm getting the <code>filesize</code> as 0.</p>\n\n<p>Here are the codes : </p>\n\n<p>Server</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;unistd.h&gt;\nusing namespace std;\n\nint  filesize(char* fname){\n    FILE *f=fopen(fname,\"r\");\n    fseek(f,0,SEEK_END);\n    int len=ftell(f);\n    fclose(f);\n    //cout&lt;&lt;\"\\nlength= \"&lt;&lt;len;\n    return len;\n\n\n}\n\nint main(){\n    int sockid=socket(AF_INET,SOCK_STREAM,0);\n    if(sockid&lt;0){\n        cout&lt;&lt;\"Failed Creating socket\\n\";\n        return 0;\n    }\n\n    int client_socket;\n    struct sockaddr_in server, client;\n    int client_size=sizeof(client);\n    server.sin_family=AF_INET;\n    server.sin_port=htons(8791);\n    server.sin_addr.s_addr=htonl(INADDR_ANY);\n\n    if(bind(sockid,(struct sockaddr*)&amp;server,sizeof(server))&lt;0){\n        cout&lt;&lt;\"Failed binding\\n\";\n        return 0;\n    }\n    cout&lt;&lt;\"binded\";\n\n    if(listen(sockid,4)&lt;0){\n        cout&lt;&lt;\"Failed listening\\n\";\n        return 0;\n    }\n    cout&lt;&lt;\"Listening....\\n\";\n    if((client_socket=accept(sockid,(struct sockaddr*)&amp;client, (socklen_t*)&amp;(client_size)))&lt;0){\n        cout&lt;&lt;\"Failed accepting\\n\";\n        return 0;\n    }\n    cout&lt;&lt;\"Connecting\\n\";\n\n\n\n    char fname[]={0};\n\n    int x=recv(client_socket,fname,1024,0);\n\n    cout&lt;&lt;fname&lt;&lt;endl;\n\n    //char fname[]={\"a.txt\"};\n    fname[x]='\\0';\n\n    int fsize=filesize(fname);\n    cout&lt;&lt;\"FILE SIZE : \"&lt;&lt;fsize&lt;&lt;endl;\n\n    //int fsize=58;\n\n    if(send(client_socket,&amp;fsize,sizeof(int),0)&lt;0){\n        cout&lt;&lt;\"failed sending SIZE\\n\";\n        return 0;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Client code : </p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;netinet/in.h&gt;\n#include&lt;sys/types.h&gt;\n#include&lt;sys/socket.h&gt;\n#include&lt;unistd.h&gt;\nusing namespace std;\n\n\nint main(){\n\n    int sockid=socket(AF_INET,SOCK_STREAM,0);\n    if(sockid&lt;0){cout&lt;&lt;\"Failed creating socket\\n\";return 0;}\n\n\n    struct sockaddr_in client;\n    client.sin_family=AF_INET;\n    client.sin_port=htons(8797);\n    client.sin_addr.s_addr=htonl(INADDR_ANY);\n\n    if(connect(sockid,(struct sockaddr*)&amp;client,sizeof(client))&lt;0){\n        cout&lt;&lt;\"Failed connecting\\n\";\n        return 0;\n    }\n    cout&lt;&lt;\"Connected\\n\";\n\n    cout&lt;&lt;\"Enter File name : \";\n    char fname[1024];\n    cin&gt;&gt;fname;\n    if(send(sockid,fname,strlen(fname),0)&lt;0){\n        cout&lt;&lt;\"Failed receiving\\n\";\n    }\n\n\n    int  fsize;\n\n    if(recv(sockid,&amp;fsize,sizeof(int),0)&lt;0){\n        cout&lt;&lt;\"failed receiving file_size\\n\";\n        return 0;\n    }\n\n    cout&lt;&lt;\"\\nFILE-SIZE : \"&lt;&lt;fsize;  \n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-management", "cpu-cache"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1541011729, "post_id": 53090093, "comment_id": 93077242, "body": "There are several cache lines."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1541011850, "post_id": 53090093, "comment_id": 93077285, "body": "On a certain level, it all is very simple - every time you do read from memory, CPU prefetches (and postfetches) more than you actually read - the whole cache line is fetched. But more than one cache line exists in CPU, so reads from different memory addresses should populate different cache lines. I do not expect you to be penalized by this pattern, but it&#39;s always worth to verify with specialized tools."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541011909, "post_id": 53090093, "comment_id": 93077307, "body": "Depends a great deal on <i>what</i> CPU you are using and what its memory/cache hierarchy looks like (some have no cache at all and there exist also NUMA architectures). Different CPUs also have different prefetch mechanisms and different cache eviction strategies. There&#39;s no &quot;one true answer&quot;, it all depends on the hardware in question."}, {"owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "edited": false, "score": 0, "creation_date": 1541012634, "post_id": 53090093, "comment_id": 93077580, "body": "Thanks everyone, you were crystal clear. Just out of curiosity, how many lines are in a cache of a recent CPU?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1541012769, "post_id": 53090093, "comment_id": 93077646, "body": "<b>Which</b> CPU? It is very CPU specific."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541012832, "post_id": 53090093, "comment_id": 93077678, "body": "A typical cache line is 64 bytes which would give a 32KB L1 cache 512 cache lines"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541012882, "post_id": 53090093, "comment_id": 93077705, "body": "&quot;how many lines are in a cache of a recent CPU?&quot; - Depends on the CPU. For some 0, for some many. 64 is somewhat common. What CPU are you targeting x86? x86_64?, Arm? Power? Sparc? Mips?, Other? How recent/what model? Cache associativity is also a factor, as is level of cache. Inclusive/exclusive? Victim cache only? It <i>depends</i>. It&#39;s all <i>very</i> hardware specific."}, {"owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "edited": false, "score": 0, "creation_date": 1541013060, "post_id": 53090093, "comment_id": 93077776, "body": "Ah it&#39;s really small, so one memory access will populate only one line at a time? I know that each CPU is different, but it&#39;s just to get an idea"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541013536, "post_id": 53090093, "comment_id": 93077971, "body": "One other thing that often matters <i>a lot</i> is your access pattern. Row major vs Column major. Most CPU prefetchers are really good at dealing with row major traversals, buf fall flat on their face when dealing with column major access patterns."}, {"owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541013913, "post_id": 53090093, "comment_id": 93078122, "body": "@JesperJuhl I am targeting the most recent CPUs (x86_64 architectures), but I don&#39;t want to make tweaks that are too much hardware-dependent. I&#39;m only trying to get an idea so that I can design a cache-friendly application. The last question I&#39;ve in mind (the last, I promise): what if i had a container <code>std::vector&lt;VeryBigClass&gt;</code> in which <code>VeryBigClass</code> is bigger than a cache line? Will the nearby values be spread among more than one cache line or won&#39;t they be cached at all?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541014240, "post_id": 53090093, "comment_id": 93078301, "body": "They will <i>probably</i> populate multiple cache lines. But again; it depends on the specific hardware, the size of <code>VeryBigClass</code>, the size and type of cache, the overall  system architecture (NUMA vs UMA), what other processes are running on that CPU, etc. Profiling and benchmarking (optimized builds) is what you ought to be doing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541014566, "post_id": 53090093, "comment_id": 93078466, "body": "Best advice I can give: Try to access data in a way that is friendly to your CPUs prefetcher. Try to minimize the size of objects accessed in critical paths. Try to avoid false sharing (look it up). Try to minimize context switches and other things that cause cache flushes. And benchmark, profile and test - <i>always</i> on optimized binaries, <i>never</i> on unoptimized debug builds."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 1, "creation_date": 1541015543, "post_id": 53090093, "comment_id": 93078971, "body": "<a href=\"https://youtu.be/WDIkqP4JbkE\" rel=\"nofollow noreferrer\">youtu.be/WDIkqP4JbkE</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541015151, "post_id": 53090824, "comment_id": 93078773, "body": "recommendation: Move <code>const std::size_t BIG_SIZE = 20000000;</code> somewhere both benchmarks can use it. Really sucks if you only change only one and then try to puzzle out why the benchmarks are radically out of line with the expectations. Hmmm. On re-read I&#39;m not familiar enough with the benchmarking tool you are using to know if this is possible."}, {"owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "edited": false, "score": 0, "creation_date": 1541021642, "post_id": 53090824, "comment_id": 93081289, "body": "Thanks a lot for the thoroughly detailed answer, I\u2019ve learnt very useful things about how to improve the performance. But I\u2019m not sure I can mark it as the answer to the question, since the code I posted above is just an example to better understand how the cache works. The real answer is that the cache has multiple lines, thing I wasn\u2019t aware of."}], "tags": [], "owner": {"reputation": 21, "user_id": 10587824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a2c3b6f54673ad88bf6a3ec03e487ff?s=128&d=identicon&r=PG&f=1", "display_name": "user10587824", "link": "https://stackoverflow.com/users/10587824/user10587824"}, "is_accepted": false, "score": 2, "last_activity_date": 1541018113, "last_edit_date": 1541018113, "creation_date": 1541014800, "answer_id": 53090824, "question_id": 53090093, "link": "https://stackoverflow.com/questions/53090093/cache-locality-when-iterating-through-two-container-at-the-same-time/53090824#53090824", "title": "Cache locality when iterating through two container at the same time", "body": "<p>The easiest way to see what's faster is to benchmark. The answer will depend on: hardware, size of input, and other stuff (compiler, flags, etc.) However, for the purposes of this example, I will be using the website quick-bench.com with clang-6.0, C++17, -O3 and libstdc++. Here is the code for the comparison:</p>\n\n<pre><code>static void One(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    const std::size_t BIG_SIZE = 20000000;\n\n    std::vector&lt;int&gt; ivec(BIG_SIZE, 0);\n    benchmark::DoNotOptimize(ivec);\n    int start = 0;\n    for (auto&amp; i : ivec)\n        i = start++;\n\n    std::vector&lt;float&gt; fvec(BIG_SIZE, 0.f);\n    benchmark::DoNotOptimize(fvec);\n\n    auto iit = ivec.cbegin();\n    auto fit = fvec.begin();\n    for (; iit != ivec.cend() &amp;&amp; fit != fvec.end(); ++iit, ++fit) \n        *fit = *iit * 3.14;\n  }\n}\nBENCHMARK(One);\n\nstatic void Two(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    const std::size_t BIG_SIZE = 20000000;\n\n    std::vector&lt;int&gt; ivec(BIG_SIZE, 0);\n    std::vector&lt;float&gt; fvec(BIG_SIZE, 0.f);\n    benchmark::DoNotOptimize(ivec);\n    benchmark::DoNotOptimize(fvec);\n    int start = 0;\n    auto fit = fvec.begin();\n    for (auto&amp; i : ivec) {\n        i = start++;\n        *fit = i * 3.14;\n        ++fit;\n    }\n  }\n}\nBENCHMARK(Two);\n</code></pre>\n\n<p>The first function is your original code while the second function is a modified version. <code>benchmark::DoNotOptimize</code> simply prevents the two vectors from being optimized away. The results for an N of 2000:</p>\n\n<p><img src=\"https://i.stack.imgur.com/tWnb8.png\" alt=\"enter image description here\"></p>\n\n<p>The results for an N of 20000000:</p>\n\n<p><img src=\"https://i.stack.imgur.com/wgtPv.png\" alt=\"enter image description here\"></p>\n\n<p>As you can see, for large N, the second example suffers. You will need to craft your code carefully and conduct benchmarks, rather than making assumptions (Google benchmark is the underlying technology for quick-bench.com)</p>\n\n<hr />\n\n<p>You can actually gain a performance boost by using the standard library functions. Presumably, this is because they've optimized for different scenarios and delegate to better code than you can optimize by hand. Here's an example:</p>\n\n<pre><code>static void Three(benchmark::State&amp; state) {\n  for (auto _ : state) {\n    const std::size_t BIG_SIZE = 20000000;\n\n    std::vector&lt;int&gt; ivec(BIG_SIZE, 0);\n    std::vector&lt;float&gt; fvec(BIG_SIZE, 0.f);\n    benchmark::DoNotOptimize(ivec);\n    benchmark::DoNotOptimize(fvec);\n    int start = 0;\n    auto fit = fvec.begin();\n    std::iota(ivec.begin(), ivec.end(), 0);\n    std::transform(ivec.begin(), ivec.end(), \n      fvec.begin(),\n      [] (const auto a) {\n        return a * 3.14;\n      });\n  }\n}\nBENCHMARK(Three);\n</code></pre>\n\n<p>We've replaced your hand-rolled loop with <code>std::iota</code> and <code>std::transform</code>. The results for large N:</p>\n\n<p><img src=\"https://i.stack.imgur.com/KB5JI.png\" alt=\"enter image description here\"></p>\n\n<p>As you can see, version 3 is faster (albeit marginally) than #1 and #2. So use standard library functions first, and only hand-roll it if it's too slow.</p>\n"}], "owner": {"reputation": 559, "user_id": 9659683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249fe606f1c24c12c7b2356ea3c52dbd?s=128&d=identicon&r=PG&f=1", "display_name": "Tarquiscani", "link": "https://stackoverflow.com/users/9659683/tarquiscani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541018113, "creation_date": 1541011529, "last_edit_date": 1541011547, "question_id": 53090093, "link": "https://stackoverflow.com/questions/53090093/cache-locality-when-iterating-through-two-container-at-the-same-time", "title": "Cache locality when iterating through two container at the same time", "body": "<p>I got that, when doing some computations on each element of a container, the best performance is gained if the memory is contiguous.\nBut what if one have to work with two or more big containers (such that they won't fit completely the cache) at the same time?</p>\n\n<pre><code>int main()\n{\n    const std::size_t BIG_SIZE = 2000000;  // A number such that both ivec and fvec won't fit the cache\n\n    std::vector&lt;int&gt; ivec(BIG_SIZE, 0);\n    int start = 0;\n    for (auto&amp; i : ivec)\n        i = start++;\n\n\n    std::vector&lt;float&gt; fvec(BIG_SIZE, 0.f);\n\n\n    auto iit = ivec.cbegin();\n    auto fit = fvec.begin();\n    for (; iit != ivec.cend() &amp;&amp; fit != fvec.end(); ++iit, ++fit) \n        *fit = *iit * 3.14;  // What happens here?\n}\n</code></pre>\n\n<p>In the last loop, will the cache load both the memory blocks near <code>*iit</code> and those near <code>*fit</code>, or will I miss the cache every time I access <code>*iit</code> and then <code>*fit</code>?</p>\n\n<p>If the latter, should I customly allocate <code>ivec</code> and <code>fvec</code> with an interlaced pattern to prevent those misses?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1541011555, "post_id": 53090050, "comment_id": 93077162, "body": "<code>for (int i=1;i&lt;=size;i++)</code>. C++ uses 0 indexing."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1541011612, "post_id": 53090050, "comment_id": 93077195, "body": "You are calling <code>.join</code>. So of course your code stalls waiting for each thread to finish. That&#39;s what you <i>asked for</i> so that&#39;s what you got. The threads are started and <i>run</i> in parallel, but at the end you block waiting for each of them to <i>finish</i> in a specific order."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541011624, "post_id": 53090050, "comment_id": 93077203, "body": "And use a single loop for both creating and joining the threads."}, {"owner": {"reputation": 335, "user_id": 9529376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530666963697475/picture?type=large", "display_name": "Lyes", "link": "https://stackoverflow.com/users/9529376/lyes"}, "edited": false, "score": 0, "creation_date": 1541012113, "post_id": 53090050, "comment_id": 93077395, "body": "Jesper Juhl thanks , so how should i modify my code please"}], "owner": {"reputation": 335, "user_id": 9529376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530666963697475/picture?type=large", "display_name": "Lyes", "link": "https://stackoverflow.com/users/9529376/lyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541011342, "creation_date": 1541011342, "question_id": 53090050, "link": "https://stackoverflow.com/questions/53090050/how-can-i-launch-two-for-loop-witch-initialize-thread-in-the-same-time", "title": "how can i launch two for loop witch initialize thread in the same time?", "body": "<p>hi i want to launch my two for loops in the same time cause when i launch my program the loops are executing sequentially, the problem is to perform my task all threads must be executing in the same time,the threads communicate with each other.</p>\n\n<p>here is my main:</p>\n\n<pre><code>   int main(int argc, char* argv[])\n {\n  max_jobs =  std::atoi(argv[3]);\n int size = std::atoi(argv[1]);\n int size1 = std::atoi(argv[2]);\n std::vector&lt;std::thread&gt; prods(size);\n std::vector&lt;std::thread&gt; consos(size1);\n\n\n for (int i=1;i&lt;=size;i++){\n   prods[i] = \nstd::thread(producer,max_jobs);}\n  for (int j =1 ; j&lt;=size1;j++){\n  consos[j] = std::thread(consumer);}\n\n  for (int i=1;i&lt;=size;i++){\n   prods[i].join();}\n  for (int j =1 ; j&lt;=size1;j++){\n  consos[j].join();}\n\n\n\nreturn 0;\n }\n</code></pre>\n\n<p>and here is my producer and consumer functions</p>\n\n<pre><code>  void producer(int max){\nfor (int i = 0; i&lt;= max ; i++){\n    std::cout &lt;&lt; max;\n    std::unique_lock&lt;mutex&gt; lock(m);\n    std::cout &lt;&lt; \"production \"&lt;&lt; i &lt;&lt; endl;\n    produced_nums.push(i);\n    notified = true;\n    cond_var.notify_one();\n}\ndone = true;\ncond_var.notify_one();\n std::cout &lt;&lt; \"\\n nombre de thread dans la \npile est \" &lt;&lt; produced_nums.size() &lt;&lt; endl;\n  }\n\n\n  void consumer(){\n std::unique_lock&lt;mutex&gt; lock(m);\n while(!done){\n     while(!notified){\n         cond_var.wait(lock);\n     }\n\n while(!produced_nums.empty()){\n     cout &lt;&lt; \"consuming \" &lt;&lt; produced_nums.top() &lt;&lt; endl;\n     produced_nums.pop();\n }\n notified = false;\n }\n std::cout &lt;&lt; \"\\n nombre de thread dans la \npile est \" &lt;&lt; produced_nums.size() &lt;&lt; endl;\n }\n</code></pre>\n"}, {"tags": ["c++", "stl", "static-cast"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1541010852, "post_id": 53089914, "comment_id": 93076866, "body": "You can&#39;t.  A base class has no idea it is being used as a base class."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1541010890, "post_id": 53089914, "comment_id": 93076888, "body": "<i>&quot;Any simple method to redirect the attribution of a2b from b to bson?&quot;</i> Unless you use definite interfaces  no. Also an instance of <code>ason</code> never can be casted to <code>bson</code> correctly."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541011022, "post_id": 53089914, "comment_id": 93076946, "body": "I think it&#39;s how to access the members inside the objects stored inside <code>a2b</code>. Not casting <code>ason</code> to <code>bson</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541011098, "post_id": 53089914, "comment_id": 93076976, "body": "The original code won&#39;t compile, so you might just throw it away (or show the <i>real</i> code)."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1541011109, "post_id": 53089914, "comment_id": 93076984, "body": "Are you looking for <a href=\"https://en.cppreference.com/w/cpp/language/virtual\" rel=\"nofollow noreferrer\">virtual</a> functions??"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1541011258, "post_id": 53089914, "comment_id": 93077054, "body": "I think, the code is super convoluted for no reasons. I will edit to be less convoluted, but express the same idea."}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 0, "last_activity_date": 1541011308, "last_edit_date": 1541011308, "creation_date": 1541010865, "answer_id": 53089964, "question_id": 53089914, "link": "https://stackoverflow.com/questions/53089914/how-to-refer-to-a-base-classs-derived-class/53089964#53089964", "title": "how to refer to a base class&#39;s derived class?", "body": "<p>You have one option: you <em>know</em> that you have a <code>IndexElement</code> and not a <code>Element</code> in the vector, and then you can use <code>static_cast&lt;IndexElement*&gt;(elements[i]);</code>. Be aware that if you don't have only <code>IndexElement</code>, then this will utterly break.</p>\n\n<p>If you can modify b, then you have another option, by making b virtual. If you don't know, you may have <code>Element</code>s and <code>IndexElement</code>s, and in that case use <code>dynamic_cast&lt;IndexElement*&gt;(elements[i]);</code> and test it the result is <code>nullptr</code> or not. In this instance, b <em>must</em> be virtual (hence virtual destructor).</p>\n\n<p>(I assume we are in <code>Container</code>, so direct access its members)</p>\n\n<p>Full trial (that will break because no allocated <code>elements</code>) with the modified Elements:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Element{\npublic:\n    virtual ~Element() {}\n};\n\nclass Container{\n    public:\nvector&lt;Elements*&gt;elements;\n};\n\nclass IndexElement: public Element{\nint index;\n};\n\nint main()\n{\n    Container aa;\n    static_cast&lt;IndexElement*&gt;(aa.elements[0]);\n    dynamic_cast&lt;IndexElement*&gt;(aa.elements[0]);\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": false, "score": 0, "last_activity_date": 1541025460, "last_edit_date": 1541025460, "creation_date": 1541025005, "answer_id": 53092839, "question_id": 53089914, "link": "https://stackoverflow.com/questions/53089914/how-to-refer-to-a-base-classs-derived-class/53092839#53092839", "title": "how to refer to a base class&#39;s derived class?", "body": "<p>Well, even without virtual and RTTI (dynamic cast) you still have the option to track and check the <code>IndexElement</code> instances created, for example:</p>\n\n<pre><code>std::unordered_set&lt;Element *&gt; idxElemSet;\n\nclass IndexElement: public Element {\n    int b_index;\npublic:\n    IndexElement(int index) : b_index(index)\n    { idxElemSet.insert(this); }\n\n    IndexElement(const IndexElement&amp; other) : b_index(other.b_index)\n    { idxElemSet.insert(this); }\n\n    // might also need the move constructor in case of c++11\n\n    ~IndexElement()\n    { idxElemSet.erase(this); }\n\n};\n\nint main()\n{\n    Container c;\n    ...\n    Element* e = c.elements[0];\n\n    if (idxElemSet.find(e) != idxElemSet.end()) {\n        IndexElement* ie = static_cast&lt;IndexElement*&gt;(e);\n        // do something with ie-&gt;b_index\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>So you can basically keep the set of addresses of all the instances created and when checking the particular instance, just check if the current object address is in the set.</p>\n\n<p>The <code>idxElemSet</code> can be also static inside <code>IndexElement</code> and the class itself might just provide static conversion function which does the check and conversion internally, etc.</p>\n"}], "owner": {"reputation": 406, "user_id": 4907188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5dc1020895c2f6aecf9480a995ec281e?s=128&d=identicon&r=PG&f=1", "display_name": "Terry Qiao", "link": "https://stackoverflow.com/users/4907188/terry-qiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1541025460, "creation_date": 1541010665, "last_edit_date": 1541011428, "question_id": 53089914, "link": "https://stackoverflow.com/questions/53089914/how-to-refer-to-a-base-classs-derived-class", "title": "how to refer to a base class&#39;s derived class?", "body": "<pre><code>class Element { };\nclass Container {\n    vector&lt;Element*&gt; elements;\n};\n</code></pre>\n\n<p>The above is the original code. I was told not to change the above code. Now I have</p>\n\n<pre><code>class IndexElement: public Element {\n    int b_index;\n};\n\nclass Container* ctr;\n</code></pre>\n\n<p>Now I have <code>ctr-&gt;elements</code>. But <code>Element</code> has no member <code>b_index</code>. Any simple method to redirect the attribution of <code>elements</code> from <code>Element</code> to <code>IndexElement</code>? Thanks in advance!</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1541010652, "post_id": 53089850, "comment_id": 93076763, "body": "A function cannot be of struct type... Here, your function return a <code>foo</code>, not even a <code>foofoo</code>."}], "answers": [{"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541010721, "post_id": 53089915, "comment_id": 93076800, "body": "Yes, that&#39;s how you populate an Eigen object, they overloaded the comma operator."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541010730, "post_id": 53089915, "comment_id": 93076807, "body": "As an aside, it would be better to use clearer names, even for example purposes. <code>foo</code>, <code>FOO</code> and <code>foofoo</code> don&#39;t stand out next to each other."}, {"owner": {"reputation": 3, "user_id": 10587439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qf3fn-kjp_0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCoEmtqKuEccHPzblzpZGvUgmhe2Q/mo/photo.jpg?sz=128", "display_name": "as50075", "link": "https://stackoverflow.com/users/10587439/as50075"}, "edited": false, "score": 0, "creation_date": 1541011690, "post_id": 53089915, "comment_id": 93077230, "body": "thanks for the corrections and the answer i think this is what i needed. but i want to just ask what&#39;s the difference between using  typedef eigen::Matrix&lt;double,1,3&gt; foofoo; or using foofoo = eigen::Matrix&lt;double, 1, 3&gt;;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3, "user_id": 10587439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qf3fn-kjp_0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCoEmtqKuEccHPzblzpZGvUgmhe2Q/mo/photo.jpg?sz=128", "display_name": "as50075", "link": "https://stackoverflow.com/users/10587439/as50075"}, "edited": false, "score": 0, "creation_date": 1541068274, "post_id": 53089915, "comment_id": 93094438, "body": "@as50075 In this case nothing, but the latter is new C++11 syntax and is &quot;better&quot; in general (you can research why)"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 1, "last_activity_date": 1541010762, "last_edit_date": 1541010762, "creation_date": 1541010668, "answer_id": 53089915, "question_id": 53089850, "link": "https://stackoverflow.com/questions/53089850/eigenmatrixdouble-1-3-return-type-function-in-a-struct-type-function/53089915#53089915", "title": "Eigen::Matrix&lt;double,1,3&gt; return type function in a struct type function", "body": "<p>There is no such thing as \"a function of struct type\", and your struct declaration syntax is really weird. You seem to be confusing types with objects.</p>\n\n<p>Here's what I think you need, simply a function that returns an instance of your <code>eigen::Matrix</code> specialisation (which you've named <code>foofoo</code> via a type alias):</p>\n\n<pre><code>struct foo\n{\n   double a, b, c;\n};\n\nusing foofoo = eigen::Matrix&lt;double, 1, 3&gt;;\n\nfoofoo FOO()\n{\n   foofoo result;\n\n   foo f;\n   // ... populate members of f ...\n   result &lt;&lt; f.a, f.b, f.c;\n\n   return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10587439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Qf3fn-kjp_0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCoEmtqKuEccHPzblzpZGvUgmhe2Q/mo/photo.jpg?sz=128", "display_name": "as50075", "link": "https://stackoverflow.com/users/10587439/as50075"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 53089915, "answer_count": 1, "score": -1, "last_activity_date": 1541011279, "creation_date": 1541010346, "last_edit_date": 1541011279, "question_id": 53089850, "link": "https://stackoverflow.com/questions/53089850/eigenmatrixdouble-1-3-return-type-function-in-a-struct-type-function", "title": "Eigen::Matrix&lt;double,1,3&gt; return type function in a struct type function", "body": "<p>I want to write a function which is of <code>struct</code> type, but it returns <code>eigen::matrix</code> type vector (so to say...)<br></p>\n\n<p>For example: </p>\n\n<pre><code>struct foo (){ double a,b,c; };  \nfoo FOO(){  \n    typedef eigen::Matrix&lt;double,1,3&gt; foofoo;\n    foo f;\n    // .....                 // some expressions that generate some numerical values\n    f.a; f.b;f.c;         // numerical values are put in here\n    foofoo&lt;&lt;f.a, f.b,f.c; // assigned to the eigen::matrix\n    return foofoo;        // attempt to return eigen::matrix type vector\n}\n</code></pre>\n\n<p>I am unsure about where to declare the <code>eigen::matrix</code> type vector. Should it be inside the function or in the <code>struct</code> or should it be a separate <code>struct</code> of <code>eigen::matrix</code> type or any other way is preferred.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1541009735, "post_id": 53089645, "comment_id": 93076348, "body": "Can you show an example and the intended result?"}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1541009750, "post_id": 53089645, "comment_id": 93076357, "body": "I can&#39;t quite tell what you&#39;re asking here. Surely you can find the largest element? And you can check whether an element repeats?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1541009765, "post_id": 53089645, "comment_id": 93076367, "body": "You probably want <code>did=a[0];</code> to be outside the loop, otherwise you&#39;re just comparing the first element to every element every time..."}, {"owner": {"reputation": 11, "user_id": 10587480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vO5CXzwvl80/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAVh0myfBmDGy4riXDZAWppWwr7XQ/mo/photo.jpg?sz=128", "display_name": "Martynas Buiv", "link": "https://stackoverflow.com/users/10587480/martynas-buiv"}, "edited": false, "score": 0, "creation_date": 1541009779, "post_id": 53089645, "comment_id": 93076373, "body": "5 // how much elements   5 3 1 4 5 // elements   4 // biggest non repetitive"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 1, "creation_date": 1541009819, "post_id": 53089645, "comment_id": 93076395, "body": "See also <a href=\"https://www.geeksforgeeks.org/non-repeating-element/\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 1, "creation_date": 1541009822, "post_id": 53089645, "comment_id": 93076396, "body": "A couple things worth improving: use <code>std::vector</code> instead of arrays; put some spaces around binary operators and after commas/semicolons to make the code more readable; make use of <a href=\"https://en.cppreference.com/w/cpp/algorithm\" rel=\"nofollow noreferrer\">standard algorithms</a> instead of a bunch of for loops."}, {"owner": {"reputation": 11, "user_id": 10587480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vO5CXzwvl80/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAVh0myfBmDGy4riXDZAWppWwr7XQ/mo/photo.jpg?sz=128", "display_name": "Martynas Buiv", "link": "https://stackoverflow.com/users/10587480/martynas-buiv"}, "edited": false, "score": 0, "creation_date": 1541009940, "post_id": 53089645, "comment_id": 93076456, "body": "yes its duplication, but other one is way too advanced and I need better explanation.."}, {"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1541010856, "post_id": 53089645, "comment_id": 93076871, "body": "@MartynasBuiv I realize you&#39;re new here and I don&#39;t mean to be unkind, but SO isn&#39;t a homework-answering service. What specific problem, other than not having the answer, is stopping you from making progress? There must be 10 good solutions to this problem, and you&#39;ll learn a lot more if you give this problem your best shot. How would you solve this problem in real life if someone gave you a box of different-sized bolts and told you to find the largest unique one in the box?"}, {"owner": {"reputation": 11, "user_id": 10587480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vO5CXzwvl80/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAVh0myfBmDGy4riXDZAWppWwr7XQ/mo/photo.jpg?sz=128", "display_name": "Martynas Buiv", "link": "https://stackoverflow.com/users/10587480/martynas-buiv"}, "edited": false, "score": 0, "creation_date": 1541011129, "post_id": 53089645, "comment_id": 93076989, "body": "I am siting to this problem 2 hours, tried litteraly everything in my control and came here to seek help.."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10587480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vO5CXzwvl80/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAVh0myfBmDGy4riXDZAWppWwr7XQ/mo/photo.jpg?sz=128", "display_name": "Martynas Buiv", "link": "https://stackoverflow.com/users/10587480/martynas-buiv"}, "edited": false, "score": 0, "creation_date": 1541010390, "post_id": 53089811, "comment_id": 93076648, "body": "probably, but I need way more basic solution with explanation.. we yet to learn vector, and I am no talking about &lt;map&gt;"}], "tags": [], "owner": {"reputation": 1812, "user_id": 706055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59587d800e072afcecf5dfe8bc374957?s=128&d=identicon&r=PG&f=1", "display_name": "Amit G.", "link": "https://stackoverflow.com/users/706055/amit-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1541013594, "last_edit_date": 1541013594, "creation_date": 1541010182, "answer_id": 53089811, "question_id": 53089645, "link": "https://stackoverflow.com/questions/53089645/biggest-non-repetitive-element-in-array/53089811#53089811", "title": "biggest non-repetitive element in array", "body": "<p><em>(I assume that the array is not empty, &amp; has also non-repetitive positive values)</em></p>\n\n<p>Something like that?</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    std::map&lt;int, int&gt; m;\n\n    // The \"array\":\n    std::vector&lt;int&gt; ar{3, 3, 4, 6, 7, 800, 123, 245, 245, 700, 800, 800};\n\n    // Count number of repetitions for each element: \n    for (auto el : ar)\n        m[el]++;\n\n    // Extract the biggest that has only one appearance:\n    int result = 0;\n    for (auto iter = m.rbegin(); iter != m.rend(); ++iter) {\n        if (iter-&gt;second == 1) {\n            result = iter-&gt;first;\n            break;\n        }\n    }\n\n    return result; // 700 in this example\n}\n</code></pre>\n\n<p>.</p>\n\n<p>If you insist on C array (you can also use std::array):</p>\n\n<pre><code>std::map&lt;int, int&gt; m;\n\n// The array:\nconst size_t ARRAY_SIZE = 13;\nint ar[ARRAY_SIZE] { 3, 3, 4, 5, 6, 7, 800, 123, 245, 245, 700, 800, 800 };\n\n// Count number of repetitions for each element: \nfor (size_t i = 0; i &lt; ARRAY_SIZE; i++)\n    m[ar[i]]++;\n\n// From here is the same code as in the std::vector use example\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10587480, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vO5CXzwvl80/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAVh0myfBmDGy4riXDZAWppWwr7XQ/mo/photo.jpg?sz=128", "display_name": "Martynas Buiv", "link": "https://stackoverflow.com/users/10587480/martynas-buiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "closed_date": 1541009876, "answer_count": 1, "score": -1, "last_activity_date": 1541013594, "creation_date": 1541009476, "question_id": 53089645, "link": "https://stackoverflow.com/questions/53089645/biggest-non-repetitive-element-in-array", "closed_reason": "Duplicate", "title": "biggest non-repetitive element in array", "body": "<p>So I need to write program which calculates biggest non-repetitive element in given array. Currently I wrote program to calculate biggest one, but I can't write algorithm to sort non repetitive elements in new array.. MY CODE:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;algorithm&gt;\n\nusing namespace std;\nint main()\n{\nint n,a[20],b[20],did=0;\ncin &gt;&gt; n;\nfor(int i=0;i&lt;n;i++)\n {\n  cin &gt;&gt; a[i]; // reading input \n }\nfor(int i=0;i&lt;n;i++) // biggest\n {\n  did=a[0];\n   if(did&lt;a[i])\n   did=a[i];\n }\nfor(int i=0;i&lt;n;i++) // trying to write non repetitive ones in new array\n  {\n   for(int j=i+1;j&lt;n;j++)\n    {\n     if(a[i]!=a[j])\n     b[i]=a[j];\n    }\n  }\nfor(int i=0;i&lt;n;i++) // biggest from non-repetitive array\n  {\n   if(b[i]&gt;b[i-1] &amp;&amp; b[i]&gt;b[i+1] &amp;&amp; b[i]==did)\n   cout &lt;&lt; b[i];\n  }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1541008921, "post_id": 53089382, "comment_id": 93075967, "body": "In C++17 your last attempt works fine FYI :)"}], "owner": {"reputation": 8719, "user_id": 314722, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b0322a3a2a6536f4bc123eefb2a099a3?s=128&d=identicon&r=PG", "display_name": "Nicholas Wilson", "link": "https://stackoverflow.com/users/314722/nicholas-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1541010766, "answer_count": 0, "score": 1, "last_activity_date": 1541009886, "creation_date": 1541008472, "last_edit_date": 1541009208, "question_id": 53089382, "link": "https://stackoverflow.com/questions/53089382/how-to-initialise-explicit-constructor-in-array-initialiser-list", "closed_reason": "Duplicate", "title": "How to initialise explicit constructor in array initialiser list?", "body": "<p>This is a simple question... I've been given an object with an explicit constructor, and I want to initialise an array of them inside an another constructor. What's the syntax to do that?</p>\n\n<p>I have honestly tried to work it out... and I'm an experienced C++ developer, this is embarrassing!</p>\n\n<pre><code>class TestObj {\npublic:\n  explicit TestObj(int i) {}\n  TestObj(const TestObj&amp;) = delete;\n  TestObj&amp; operator=(const TestObj&amp;) = delete;\n};\n\nclass AnotherObj {\npublic:\n  // error: converting to \u2018TestObj\u2019 from initializer list would use explicit constructor \u2018TestObj::TestObj(int)\u2019\n  AnotherObj(int i) : objs{{1}, {i}} {}\n\n  // error: could not convert \u2018i\u2019 from \u2018int\u2019 to \u2018TestObj\u2019\n  AnotherObj(int i, int j) : objs{i, j} {}\n\n  // error: use of deleted function \u2018TestObj::TestObj(const TestObj&amp;)\u2019\n  AnotherObj(int i, int j, int k) : objs{TestObj{i}, TestObj{j}} {}\n\nprotected:\n  TestObj objs[2];\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1541007977, "post_id": 53089237, "comment_id": 93075492, "body": "Why on earth don&#39;t you start out by testing with <i>modern</i> compilers?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 2, "creation_date": 1541008019, "post_id": 53089237, "comment_id": 93075513, "body": "The &quot;C++11&quot; in VS 2012 is far from it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1541008029, "post_id": 53089237, "comment_id": 93075517, "body": "Most likely, bug in VS with different types for ternary operator. I had a similar one long long time ago in SunCC."}], "owner": {"reputation": 64, "user_id": 791722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57b63a1024f6695f8c55bfd6430edae7?s=128&d=identicon&r=PG", "display_name": "Anders K", "link": "https://stackoverflow.com/users/791722/anders-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1541007835, "creation_date": 1541007835, "question_id": 53089237, "link": "https://stackoverflow.com/questions/53089237/stdfunction-needs-address-to-function-on-vs2012", "title": "std::function needs address to function on vs2012?", "body": "<p>I found this strange behavior when working with std::function.\nThe code below compiles with no warnings on VS2012, but when executed there is a memory access violation in the type_traits function <code>forward</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef std::function&lt;void()&gt; Func;\n\nvoid defaultFunc() { /* no-op */ }\n\nint main(int argc, const char** argv)\n{\n  Func f = argc == 0 ? Func() : defaultFunc; // crash\n  return 0;\n}\n</code></pre>\n\n<p>I double checked on gnu g++ 4.9.2 which didn't reproduce the problem.</p>\n\n<p>If I add an ampersand to the defaultFunc everything works:</p>\n\n<pre><code>Func f = argc == 0 ? Func() : &amp;defaultFunc; // works\n</code></pre>\n\n<p>If I remove the ternary conditional it works as expected.</p>\n\n<pre><code>Func f = defaultFunc; // works\n</code></pre>\n\n<p>What is happening here?</p>\n"}, {"tags": ["android", "c++", "opencv"], "comments": [{"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1541009948, "post_id": 53088592, "comment_id": 93076460, "body": "Please add your code that you tried that worked/didn&#39;t work for JPG/PNG. The answer linked is generic for byte data and not specific to an encoding---presumably the issue is somewhere else in your code."}, {"owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1541011055, "post_id": 53088592, "comment_id": 93076957, "body": "Hi, I&#39;ve added the code. It&#39;s actually really similar to that answer. But the getTemplate() function returns an empty cv Mat when I use PNG. If I use JPG it works fine"}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1541017507, "post_id": 53088592, "comment_id": 93079771, "body": "Where is your code that reads an image and encodes it to base 64?"}, {"owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1541075644, "post_id": 53088592, "comment_id": 93098137, "body": "There isn&#39;t. We have the string only."}, {"owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "reply_to_user": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 0, "creation_date": 1541508964, "post_id": 53088592, "comment_id": 93234296, "body": "I found out that the opencv compiled for Android was different than the others and had no support for PNG. I recompiled it and it&#39;s working now."}], "owner": {"reputation": 73, "user_id": 8913565, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156791509199689/picture?type=large", "display_name": "Ana L&#237;via", "link": "https://stackoverflow.com/users/8913565/ana-l%c3%advia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1541007106, "answer_count": 0, "score": 0, "last_activity_date": 1541010967, "creation_date": 1541005220, "last_edit_date": 1541010967, "question_id": 53088592, "link": "https://stackoverflow.com/questions/53088592/issue-with-imdecode-opencv-c-decoding-a-base64-png-running-on-android-device", "closed_reason": "Duplicate", "title": "Issue with imdecode (OpenCV c++) decoding a base64 PNG running on Android devices", "body": "<p>I\u2019ve been facing an issue with imdecode (OpenCV c++) decoding a base64 PNG running on Android devices.</p>\n\n<p>I have an Android SDK that exposes an image processing pipeline built with OpenCV (c++). One of the pipeline steps consists of decoding a base64 PNG using imdecode. However, we create a vector buffer from the base64 using the code from <a href=\"https://stackoverflow.com/questions/180947/base64-decode-snippet-in-c?answertab=votes#tab-top\">this question</a>, and then use it as a parameter to imdecode. When running on Android, imdecode returns an empty cv Mat. If I change the PNG to JPG, it works, but it affects my results. Does anyone have any idea why this happens and how can I make it work? </p>\n\n<p>I also have a iOS SDK which uses the same pipeline and it works fine.</p>\n\n<p>Thanks!</p>\n\n<p><strong>Editing</strong></p>\n\n<p>This is not a duplicate of <a href=\"https://stackoverflow.com/questions/32264709/convert-the-base64string-or-byte-array-to-matimage-in-copencv\">Convert the Base64(String or Byte array) to mat(image) in c++(opencv)</a> because although the answer there is pretty similar the code I have, here I am using a PNG base 64 and the answer there uses JPG. Which fixes the issue, but I need to use PNG. </p>\n\n<p>Adding Code</p>\n\n<pre><code>#include \"utils/Base64Util.hpp\" \n\nconst std::string Base64Util::base64_chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\nbool Base64Util::is_base64(unsigned char c) {\n    return (std::isalnum(c) || (c == '+') || (c == '/'));\n}\n\nstd::string Base64Util::base64_decode(std::string const&amp; encoded_string) {\n    int in_len = encoded_string.size();\n    int i = 0;\n    int j = 0;\n    int in_ = 0;\n    unsigned char char_array_4[4], char_array_3[3];\n    std::string ret;\n\n    while (in_len-- &amp;&amp; (encoded_string[in_] != '=') &amp;&amp; is_base64(encoded_string[in_])) {\n        char_array_4[i++] = encoded_string[in_]; in_++;\n        if (i == 4) {\n            for (i = 0; i &lt; 4; i++)\n                char_array_4[i] = base64_chars.find(char_array_4[i]);\n\n            char_array_3[0] = (char_array_4[0] &lt;&lt; 2) + ((char_array_4[1] &amp; 0x30) &gt;&gt; 4);\n            char_array_3[1] = ((char_array_4[1] &amp; 0xf) &lt;&lt; 4) + ((char_array_4[2] &amp; 0x3c) &gt;&gt; 2);\n            char_array_3[2] = ((char_array_4[2] &amp; 0x3) &lt;&lt; 6) + char_array_4[3];\n\n            for (i = 0; (i &lt; 3); i++)\n                ret += char_array_3[i];\n            i = 0;\n        }\n    }\n\n    if (i) {\n        for (j = i; j &lt; 4; j++)\n            char_array_4[j] = 0;\n\n        for (j = 0; j &lt; 4; j++)\n            char_array_4[j] = base64_chars.find(char_array_4[j]);\n\n        char_array_3[0] = (char_array_4[0] &lt;&lt; 2) + ((char_array_4[1] &amp; 0x30) &gt;&gt; 4);\n        char_array_3[1] = ((char_array_4[1] &amp; 0xf) &lt;&lt; 4) + ((char_array_4[2] &amp; 0x3c) &gt;&gt; 2);\n        char_array_3[2] = ((char_array_4[2] &amp; 0x3) &lt;&lt; 6) + char_array_4[3];\n\n        for (j = 0; (j &lt; i - 1); j++) ret += char_array_3[j];\n    }\n\n    return ret;\n}\n</code></pre>\n\n<p>And the code that uses it </p>\n\n<pre><code>cv::Mat getTemplate(bool isInverted) {\n    std::string decoded_string;\n\n    if (isInverted) {\n        decoded_string = Base64Util::base64_decode(\"iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAAAAAAeW/F+AAACrklEQVQoFRXB4WuWVRgH4N/vvs85z3nf15U2tgURGuQsP/ihRmEYwci+1Z/mxHSbQfhXBEX5IYKaZUQfdCtsUCxTQt3Weve8zznnvqPr4nUl/udOEAGANRclq8PB60qJXticoCgErTUIQ5NK58cBknxwgyoFFhzoq2QprYXIDUKbEdAOCgh98N5VdYYaOm6KsbiLTjqwVXXp3U2IwU0TNwNqgUeZRJ3VodZOczXAi9UYuUka3DSNhuMnDx9PwwuLC3kuVfNhCIHXICoCYrp3b+egFA3Pv3Jh+URumPaIvKJKyV199tN3f2AOpUW2l98+Px/9cNDEtUiJQf+6++3T5+ZkZi3UAz9zaXk+TBsTr4bWjXz/xy+enepqqdDMoa9vvfnqXLOqXGPMMjz48jd2NqgUaRJLv3jxnfnUO3jNdBT3t746GsvMldoc7j4+98FS9tDziuTMvdtbbcSqJCulsUtLq+dGJjOuhS7a7mf3LCZS3FADak4Ll1byIM61NArDzucPmiYSKrUoSgoLK++Nohmvdjkf37+9U6KKOIIODjpPXr6YgxnXJYzr9tc/cBTdAYr1rgWLH70xciHX2eX2692twzyxo5g8+D8On5z58CxLAm+6RN/f/uZ3z1IUYDXzPHf+/Re9ivATZ4yz3TvfHwVIZ/BS8sROry5PZh6Nt5qFUXhy/84vh0hsqZScj09dfvfk8C+S8VZtMhnNHv+8vfeIWqGETFZWX2KtRvDTwSRl9o8e/rn9dBiMOjn9+oWF1GToPXDDq4pImMnh7t7+3wfjpbOvzY9K57H2HniDRqNkwlj7Y8snkgSdokOZMvGGmDfh2BTjZP2gpqEVJ9kGkhtoEKoEB6IXM9fgNgCMM1FuwEGKiBUS1RUE3KyJeCDXAYLC5mhojkiYA45YVOw/rMJ2s8LqhGkAAAAASUVORK5CYII=\");\n    } else {\n        decoded_string = Base64Util::base64_decode(\"iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAAAAADhgtq/AAACNUlEQVQoFQXBPWgUQRQA4HnvzezO7t3eJeflEtEcgmAXNKns7i4cwUOwErGxUOxEsdDG3kaxskgpBhRBaxuxsbKIgdhICKgJJBpjTHJ/s7Pz5/dBGyVCwbxlEvMRCfAYo9C/DbQgIrQhMJA4zmMWHItQum0NbceJwLsIeDQy5ShXRYIx2z2GVhEhUkBuVAKhWunv6SnP+WAPOpbI5CWh9TgJploe/2WzHoT7Bz0/nrQ7UihqnhttnCjtbJhmiRhXcBlcTW2VprNTF+dxLeMb79amqpLFHroR530635o5OcmtI3748eV3mUmJ0Eo9OzpztSeE6xvicXzw6sUwqyUEPd43/bm7CyEaHASfxDW7+uxzuZHFcMXsC9O6X3fheABaphPp1vOVeKaRQU8dQ/XaLaeV1mRClEz3Pyz/mDwdw6Jyg9l7l/Qw9455nWAN1fvXanIArZwG0w+641HhmCsgBYnZl8f71RF0dNDi5u1c90MwwYq0ROrN0+gsQZuZXHUf1eyeRxuKsqiy9Sef6s0Y2kGYncbDpbg/ss5nqa8crywfTk0IaAXJdoc37tSdya2QAu23R19lAxh0MNDg14Xr841IWO6PtjfX39qpui6gLawwu9ica1bSgvzP1U0VZL2sDHSCS91QFYwCOXTDcZKJpBSbArrOi4DM/hkpRRxkpZIVLKC3sGSAQlJy+4ppihNyxIPWnjFYNEwgT5k2ESJEblwwro1jCAuESCQImCRw3pmCCRvA4X+rIB1V6HjYsQAAAABJRU5ErkJggg==\");\n    }\n\n    std::vector&lt;uchar&gt; data(decoded_string.begin(), decoded_string.end());\n\n    return cv::imdecode(data, cv::IMREAD_UNCHANGED);\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "char"], "comments": [{"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 7, "creation_date": 1541005077, "post_id": 53088527, "comment_id": 93074004, "body": "<code>cnt</code> is not initialized and using <a href=\"https://stackoverflow.com/q/23415661/1708801\">unintialized values is undefined behavior</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 8, "creation_date": 1541005136, "post_id": 53088527, "comment_id": 93074032, "body": "You probably want a <code>std::map&lt;char,int&gt;</code> instead of <code>int cnt[1000];</code>. This should work as intended."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1541005147, "post_id": 53088527, "comment_id": 93074037, "body": "Post code that compiles, runs, and shows the problem. It&#39;s likely that <code>cnt</code> hasn&#39;t been initialized, so any results are simply unpredictable. But that&#39;s not clear from this code fragment."}, {"owner": {"reputation": 15257, "user_id": 648078, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9698c2f1c188de4ebf3c4496d9f07eb0?s=128&d=identicon&r=PG", "display_name": "Marius Bancila", "link": "https://stackoverflow.com/users/648078/marius-bancila"}, "edited": false, "score": 3, "creation_date": 1541005258, "post_id": 53088527, "comment_id": 93074108, "body": "Why do you allocate an array of 1000 integers, when your character set is probably ASCII and needs only 127? Use a <code>std::map&lt;char, int&gt;</code>. And make sure you initialize the counters with 0 before starting."}, {"owner": {"reputation": 19, "user_id": 10587017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5eqTw.jpg?s=128&g=1", "display_name": "Ganduras", "link": "https://stackoverflow.com/users/10587017/ganduras"}, "edited": false, "score": 0, "creation_date": 1541007162, "post_id": 53088527, "comment_id": 93075119, "body": "Big thanks to everybody. This really helped me."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541008129, "post_id": 53088527, "comment_id": 93075575, "body": "I don&#39;t think this deserves a separate answer, but to answer your first question, using a <code>char</code> to access an array (of <code>int</code> or any other type) makes sense because <code>char</code> is just an integer type. Now, it&#39;s a little tricky, in that there are only 128 values that are guaranteed not to trip you up, because a signed char can easily give you a negative array index."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1541009064, "post_id": 53088527, "comment_id": 93076044, "body": "@Ganduras Think twice before accepting an answer that seems to solve your problem ATM, but might cause other problems coming in at wider sight."}], "answers": [{"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 4, "last_activity_date": 1541008941, "last_edit_date": 1541008941, "creation_date": 1541006444, "answer_id": 53088920, "question_id": 53088527, "link": "https://stackoverflow.com/questions/53088527/accessing-an-array-of-ints-by-char-value/53088920#53088920", "title": "Accessing an array of ints by char value", "body": "<p>The simplest solution is to initialize all values in your array with zero:</p>\n\n<pre><code>int cnt[1000] = {0};\n</code></pre>\n\n<p>You have to do that explicitly, unless you're using global variables.</p>\n\n<p>But as mentioned in several comments, this might cause other problems, up to calling undefined behavior regarding <em>signed char</em> interpretation of the compiler with character values exceeding <code>126</code> in decimal representation.</p>\n\n<p>Exchanging <code>int cnt[1000];</code> with <code>std::map&lt;char,int&gt;</code> your code works perfectly fine:</p>\n\n<pre><code>std::map&lt;char,int&gt; cnt; // &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;\nstring s = \"fooooobar\";\nfor (char i : s) cnt[i]++;\ncout &lt;&lt; cnt['o'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['a'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['r'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['b'] &lt;&lt; '\\n';\n</code></pre>\n\n<p>See the working <a href=\"http://coliru.stacked-crooked.com/a/b3ceb4ca26b090a6\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n\n<p>With standard c++ this turns out as the <em>natural</em> and most convenient approach for your problem (unless you have to do <em>micro-optimizations</em> when running into use case specific performance problems).</p>\n"}, {"comments": [{"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 6, "creation_date": 1541006780, "post_id": 53088961, "comment_id": 93074870, "body": "You could just do <code>int cnt[1000] = {};</code> and the array will be initialized, no manual loop needed."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1541007603, "post_id": 53088961, "comment_id": 93075315, "body": "If <code>char</code> is signed bad things (Undefined Behavior) can happen with this approach."}], "tags": [], "owner": {"reputation": 64, "user_id": 3288618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ZqJi.jpg?s=128&g=1", "display_name": "RistoS", "link": "https://stackoverflow.com/users/3288618/ristos"}, "is_accepted": false, "score": 2, "last_activity_date": 1541007660, "last_edit_date": 1541007660, "creation_date": 1541006631, "answer_id": 53088961, "question_id": 53088527, "link": "https://stackoverflow.com/questions/53088527/accessing-an-array-of-ints-by-char-value/53088961#53088961", "title": "Accessing an array of ints by char value", "body": "<p>Your problem is that you forget to set your <code>cnt</code> array to <code>0</code> at all indexes, because you just declared it and didn't initialize every <code>cnt[i]=0</code> at every <code>i</code>th element, and by default, every <code>i</code>th element in <code>cnt</code> gets an unspecified (or random) value, and because of this, you are getting the wrong result. You just need to use your debugger to view of what is going on in your code, or just <code>cout</code> every value of <code>i</code> and <code>cnt[i]</code> before <code>cnt[i]++</code> and after, so you can see what is going on.</p>\n\n<p>Here is my fixed code:</p>\n\n<pre><code>int cnt[1000];\n\nstring s = \"fooooobar\";\nfor (int i = 0; i &lt; 1000; i++){\n    cnt[i] = 0;\n}\n\nfor (char i : s){\n    cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \"cnt[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; cnt[i] &lt;&lt; endl;\n    cnt[i]++;\n    cout &lt;&lt; \"i = \" &lt;&lt; i &lt;&lt; \"cnt[\" &lt;&lt; i &lt;&lt; \"] = \" &lt;&lt; cnt[i] &lt;&lt; endl;\n}\n\ncout &lt;&lt; cnt['o'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['a'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['r'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['b'] &lt;&lt; '\\n';\n</code></pre>\n\n<p>when you're done debugging, just delete the <code>cout</code> functions because you don't need them :)\nBest Regards</p>\n"}], "owner": {"reputation": 19, "user_id": 10587017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5eqTw.jpg?s=128&g=1", "display_name": "Ganduras", "link": "https://stackoverflow.com/users/10587017/ganduras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1541008941, "creation_date": 1541004970, "last_edit_date": 1541008566, "question_id": 53088527, "link": "https://stackoverflow.com/questions/53088527/accessing-an-array-of-ints-by-char-value", "title": "Accessing an array of ints by char value", "body": "<p>Here's the code to count occurencies of each character in a string:</p>\n\n<pre><code>int cnt[1000];\nstring s = \"fooooobar\";\nfor (char i : s) cnt[i]++;\ncout &lt;&lt; cnt['o'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['a'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['r'] &lt;&lt; '\\n';\ncout &lt;&lt; cnt['b'] &lt;&lt; '\\n';\n</code></pre>\n\n<p>Output 1:</p>\n\n<pre><code>5\n1\n33262\n129355441\n</code></pre>\n\n<p>Output 2:</p>\n\n<pre><code>5\n1\n33262\n328199857\n</code></pre>\n\n<p>Output 3:</p>\n\n<pre><code>5\n1\n33262\n-1913409871\n</code></pre>\n\n<p>Output 4:</p>\n\n<pre><code>5\n1\n33262\n-826184015\n</code></pre>\n\n<p>How can I access an array of <code>int</code> values indexing with a <code>char</code> values to count specific occurrences of a character?</p>\n\n<p>Why is the first 2 results are valid, the third one is invalid, and the fourth one is invalid and different every time?</p>\n\n<p>I use a g++ compiler as follows:</p>\n\n<pre><code>g++ -std=c++11 -Wall filename.cpp -o\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "edited": false, "score": 0, "creation_date": 1541009461, "post_id": 53088707, "comment_id": 93076216, "body": "This generally goes for all containers, when there&#39;s a member version of an algorithm it&#39;s for good reason and you should use that one instead of the non-member version."}], "tags": [], "owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "is_accepted": true, "score": 6, "last_activity_date": 1541009538, "last_edit_date": 1541009538, "creation_date": 1541005644, "answer_id": 53088707, "question_id": 53088504, "link": "https://stackoverflow.com/questions/53088504/lower-bound-complexity-of-associative-container-member-function-vs-non-member-f/53088707#53088707", "title": "lower_bound complexity of associative container: member function vs non-member function", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/lower_bound\" rel=\"nofollow noreferrer\"><code>std::lower_bound</code></a> is meant to be used on an sorted range defined by a pair of iterators, typically <code>begin</code> and <code>end</code> from some container. If you use it with the bidirectional (non-random-access) iterators from <code>std::set</code> or <code>std::map</code>, then it will have to traverse the range linearly, unlike with random-access iterators. The methods <a href=\"https://en.cppreference.com/w/cpp/container/set/lower_bound\" rel=\"nofollow noreferrer\"><code>std::set::lower_bound</code></a> and <a href=\"https://en.cppreference.com/w/cpp/container/map/lower_bound\" rel=\"nofollow noreferrer\"><code>std::map::lower_bound</code></a> exist because it can take advantage of the internal structure of the container to perform better than its free function counterpart. So yes, indeed, you should favor this method when working with <code>std::set</code> or <code>std::map</code>, if you can.</p>\n"}], "owner": {"reputation": 739, "user_id": 3237841, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9bf988fa14967bc4b975782a04ec92dd?s=128&d=identicon&r=PG&f=1", "display_name": "quantum_well", "link": "https://stackoverflow.com/users/3237841/quantum-well"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 53088707, "answer_count": 1, "score": 1, "last_activity_date": 1541009538, "creation_date": 1541004812, "question_id": 53088504, "link": "https://stackoverflow.com/questions/53088504/lower-bound-complexity-of-associative-container-member-function-vs-non-member-f", "title": "lower_bound complexity of associative container: member function vs non-member function", "body": "<p><em>set</em> and <em>map</em> have <em>lower_bound</em> (as well as <em>upper_bound</em> and <em>equal_range</em>) member function with Log(N) time complexity. There is also non-member <em>lower_bound</em> which is available by including <em>algorithm</em> header. As per description non-member function's complexity is Log(N) for random access iterators and linear otherwise. <em>set</em> and <em>map</em> iterators are not random access. Does it mean I should avoid non-member function?</p>\n"}, {"tags": ["c++", "winsock"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 3, "creation_date": 1541003890, "post_id": 53088219, "comment_id": 93073399, "body": "TCP and UDP are fundamentally different, you can&#39;t convert one into the other."}], "answers": [{"comments": [{"owner": {"reputation": 5181, "user_id": 5529197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6af647bacfb3f0b596c73b0e3b0dc4b1?s=128&d=identicon&r=PG&f=1", "display_name": "Afshin", "link": "https://stackoverflow.com/users/5529197/afshin"}, "edited": false, "score": 1, "creation_date": 1541004543, "post_id": 53088368, "comment_id": 93073730, "body": "I would bold <i>at least</i>. These are changes to get code work, not server :)"}, {"owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1541013154, "post_id": 53088368, "comment_id": 93077814, "body": "After doing all the changes you specified, I still can&#39;t get it to work. Updated code. The error code is <code>WSAEINVAL</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541056229, "post_id": 53088368, "comment_id": 93089374, "body": "Note that you can continue using <code>recv()</code> and <code>send()</code> in UDP if you call <code>connect()</code> first so the socket has a statically assigned peer IP:port."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541086303, "post_id": 53088368, "comment_id": 93104084, "body": "@RemyLebeau Note that <code>connect</code>ing a UDP socket discards datagrams from other sources."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1541086411, "post_id": 53088368, "comment_id": 93104148, "body": "@Habitate You did not remove <code>listen</code> call. And you do not check for errors."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "edited": false, "score": 0, "creation_date": 1541086980, "post_id": 53088368, "comment_id": 93104475, "body": "@Habitate you didn&#39;t specify which line is failing exactly."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541087093, "post_id": 53088368, "comment_id": 93104541, "body": "@MaximEgorushkin yes, I&#39;m aware of that. Once you receive the 1st packet from a new client, you could create a new UDP socket and <code>connect()</code> it to that client, then use that socket with <code>send()</code> and <code>recv()</code> to communicate with just that client. Similar to what the TCP server does when <code>accept()</code> returns a newly connected socket. I&#39;m not saying this is ideal for UDP, but it would be a shorter stepping stone when migrating from TCP to UDP without rewriting a bunch of code"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541088524, "post_id": 53088368, "comment_id": 93105409, "body": "@RemyLebeau In this case you would need a new UDP socket for each client, which is unnecessary."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1541089517, "post_id": 53088368, "comment_id": 93105951, "body": "@MaximEgorushkin I&#39;m not disagreeing with that, and I said as much in my previous comment. I&#39;m just saying this is an <i>option</i> to help maintain the <i>semantics</i> of the TCP server over UDP, until such time as the UDP server can be rewritten to use UDP more effectively."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1541004353, "creation_date": 1541004353, "answer_id": 53088368, "question_id": 53088219, "link": "https://stackoverflow.com/questions/53088219/convert-tcp-server-to-udp-server/53088368#53088368", "title": "Convert TCP server to UDP server", "body": "<p>To convert a TCP server into a UDP server at least the following changes must be done:</p>\n\n<ol>\n<li>Replace <code>SOCK_STREAM</code> with <code>SOCK_DGRAM</code>; <code>IPPROTO_TCP</code> with <code>IPPROTO_UDP</code>.</li>\n<li>Remove <code>listen</code> and <code>accept</code> calls.</li>\n<li>Replace <code>recv</code> with <code>recvfrom</code>.</li>\n<li>Replace <code>send</code> with <code>sendto</code>. </li>\n</ol>\n"}], "owner": {"reputation": 505, "user_id": 9957598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sDfEWpTibVk/AAAAAAAAAAI/AAAAAAAAAPI/NZ-1XBYt9Jg/photo.jpg?sz=128", "display_name": "Rokas Vi\u0161inskas", "link": "https://stackoverflow.com/users/9957598/rokas-vi%c5%a1inskas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1516, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1541013227, "creation_date": 1541003823, "last_edit_date": 1541013227, "question_id": 53088219, "link": "https://stackoverflow.com/questions/53088219/convert-tcp-server-to-udp-server", "title": "Convert TCP server to UDP server", "body": "<p>So I'm trying to create a Winsock UDP server out of a TCP server, but I just can't seem to get it to work. The official winsock documentation doesn't seem to cover UDP servers (atleast as far as I could find).</p>\n\n<p>The working TCP server is here:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ws2tcpip.h&gt;\n#include &lt;windows.h&gt;\n\nusing namespace std;\n\nint main()\n{\n    const char* port = \"888\";\n    char message[50] = {0};\n\n// Initialize WINSOCK\n    WSADATA wsaData;\n    WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n\n// Create the listening socket\n    SOCKET ListenSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP); \n    SOCKET DataSocket;\n\n// Initialize the sample struct and get another filled struct of the same type and old values\n    addrinfo hints, *result(0); ZeroMemory(&amp;hints, sizeof(hints));\n    hints.ai_family   = AF_INET;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n    hints.ai_flags    = AI_PASSIVE;\n\n    getaddrinfo(0, port, &amp;hints, &amp;result);\n\n// Bind the socket to the ip and port provided by the getaddrinfo and set the listen socket's type to listen\n    bind(ListenSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\n    listen(ListenSocket, SOMAXCONN); // Only sets the type to listen ( doesn't actually listen )\n\n// Free unused memory\n    freeaddrinfo(result);\n\n// Accept a connection\n    DataSocket = accept(ListenSocket, 0, 0);\n    cout &lt;&lt; \"Connected!\" &lt;&lt; endl &lt;&lt; endl;\n\n// Recieve data\n    while(true){\n        recv(DataSocket, message, 10, 0);\n        cout &lt;&lt; \"Recieved: \\n\\t\" &lt;&lt; message &lt;&lt; endl &lt;&lt; endl;\n        system(\"cls\");\n        Sleep(10);\n    }\n\n// Shutdown\n    shutdown(DataSocket, SD_BOTH);\n    shutdown(ListenSocket, SD_BOTH);\n    WSACleanup();\n    exit(0);\n    return 0;\n}\n</code></pre>\n\n<p>How could I convert it to a working UDP server?\nIn my experience just changing the protocol and socktype doesn't cut it.</p>\n\n<p>Code update:</p>\n\n<pre><code>const char* port = \"888\";\nchar message[50] = {0};\n\n// Initialize WINSOCK\nWSADATA wsaData;\nWSAStartup(MAKEWORD(2,2), &amp;wsaData);\n\n// Create the listening socket\nSOCKET DataSocket = socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP); \n\n// Initialize the sample struct and get another filled struct of the same type and old values\naddrinfo hints, *result(0); ZeroMemory(&amp;hints, sizeof(hints));\nhints.ai_family   = AF_INET;\nhints.ai_socktype = SOCK_DGRAM;\nhints.ai_protocol = IPPROTO_UDP;\nhints.ai_flags    = AI_PASSIVE;\n\ngetaddrinfo(0, port, &amp;hints, &amp;result);\n\n// Bind the socket to the ip and port provided by the getaddrinfo and set the listen socket's type to listen\nbind(DataSocket, result-&gt;ai_addr, (int)result-&gt;ai_addrlen);\nlisten(DataSocket, SOMAXCONN); // Only sets the type to listen ( doesn't actually listen )\n\n// Free unused memory\nfreeaddrinfo(result);\n\n// Recieve data\nwhile(true){\n    int bytes = recvfrom(DataSocket, message, 20, 0, 0, 0);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1541003908, "post_id": 53088209, "comment_id": 93073408, "body": "Maybe its the online compiler. If you tried it on some other compiler perhaps your window closed before you could see the output. Remember operating systems usually don&#39;t keep a window open after the program finishes."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1541003996, "post_id": 53088209, "comment_id": 93073457, "body": "Fyi, you&#39;re comparing against an unintiialized <code>KEYINPUT</code> in this loop. And since there is no code that actually changes it, unless you spun the wheel of undefined behavior and won (it happened to contain <code>27</code>), that loop is infinite. This just in: online compile+run sites don&#39;t bode well with infinite spin loops."}, {"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 1, "creation_date": 1541004112, "post_id": 53088209, "comment_id": 93073518, "body": "and you&#39;re never actually updating <code>KEYINPUT</code>, so this will sit in an infinite loop. I ran your code as is (<a href=\"https://onlinegdb.com/SkKBjLv2Q\" rel=\"nofollow noreferrer\">onlinegdb.com/SkKBjLv2Q</a>) and it prints just fine."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1541004155, "post_id": 53088209, "comment_id": 93073536, "body": "WHY THE SHOUTING? Tone down your variable names."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1541004296, "post_id": 53088209, "comment_id": 93073617, "body": "And decide on tge language you want to use. If it&#39;s C++, use C++ input/output facilities."}, {"owner": {"reputation": 4564, "user_id": 1908650, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/f316929a9cb85ac26281f87cae2f56f3?s=128&d=identicon&r=PG", "display_name": "Mohan", "link": "https://stackoverflow.com/users/1908650/mohan"}, "edited": false, "score": 0, "creation_date": 1541007194, "post_id": 53088209, "comment_id": 93075133, "body": "Try a simple program with just one printf statement in the <code>main</code>, and see if that works."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1541007502, "post_id": 53088209, "comment_id": 93075273, "body": "Traditionally ALLCAPS is used for constants. The casual reader of this code can be easily mislead."}], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "edited": false, "score": 0, "creation_date": 1541006238, "post_id": 53088685, "comment_id": 93074578, "body": "apparently keys like ESC are put into the input stream. But you still need to use a library especially when you do not want to press Return everytime you press a key since this is how input buffers work. You can use Console specific libraries as well like termios <a href=\"http://man7.org/linux/man-pages/man3/termios.3.html\" rel=\"nofollow noreferrer\">Link</a> to manipulate the buffers so that they do not need for a line ending character. Also not all shells have the same keycodes for those special keys."}, {"owner": {"reputation": 19, "user_id": 10587035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TAYj7u1y6RU/AAAAAAAAAAI/AAAAAAAAAp4/xslxR-rfK0k/photo.jpg?sz=128", "display_name": "Nicholas Dooley", "link": "https://stackoverflow.com/users/10587035/nicholas-dooley"}, "edited": false, "score": 0, "creation_date": 1541007081, "post_id": 53088685, "comment_id": 93075065, "body": "Thanks. Clearly I mixed up C with C++. I tried your code and it worked up to where I am so far. Thanks Yastanub, ALTR, and everyone else for the advice"}], "tags": [], "owner": {"reputation": 1189, "user_id": 9232218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb7ced53adbb0ba08d1cea65a43b124d?s=128&d=identicon&r=PG&f=1", "display_name": "Yastanub", "link": "https://stackoverflow.com/users/9232218/yastanub"}, "is_accepted": false, "score": 0, "last_activity_date": 1541007393, "last_edit_date": 1541007393, "creation_date": 1541005545, "answer_id": 53088685, "question_id": 53088209, "link": "https://stackoverflow.com/questions/53088209/the-print-statements-dont-show-up-in-the-c-game/53088685#53088685", "title": "The Print statements don&#39;t show up in the C++ game", "body": "<p>I tried a bit around and on my system with a local compiler the text also does not print. Now in the first place if you want to code in C++ you need to use C++. <code>printf</code> is actually a C function. You are not using any C++ specific code in your example. If you want to use C in your C++ application though, use the C++ equivalents of the C libraries which wourld be <code>&lt;cstdio&gt;</code> in your case. Now to the problem itself: i am using MSYS shell on windows and i assume you use something similar. There seems to be a problem with the output buffer when you use <code>printf</code>. Normally the output buffer is flushed with the <code>\\n</code> newline character at the end of the input. Apparently this does not seem to work in some cases. Adding an fflush(stdout) at the end of the output worked in my case and the text was printed from the buffer and also calling it directly from windows command line, without flushing the buffer, did the trick. So i think it is a problem how your shell handles the buffers. Now to the solutions. Either you flush the output buffer everytime you want to print or you start to use C++ IO. Also as mentioned you need to initialize and change the value from KEYINPUT while your program is running.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n\nint SCORE = 0;\nint LEVEL = 1;\nint COST = 50;\nint ADDSCORE = 10;\nchar KEYINPUT;\nbool GAMEON = true;\n/* Use cout instead of printf for output operations */\ncout &lt;&lt; \"Press space bar to gain points to your score.\" &lt;&lt; endl\n     &lt;&lt; \"Press z key to upgrade your score multiplyer.\" &lt;&lt; endl\n     &lt;&lt; \"Press the escape key (esc) to quit\" &lt;&lt; endl\n     &lt;&lt; \"Upgrade score multiplyer = \" &lt;&lt; COST &lt;&lt; endl\n     &lt;&lt; \"Score multiplyer = LV\" &lt;&lt; LEVEL &lt;&lt; endl\n     &lt;&lt; \"Score = \" &lt;&lt; SCORE &lt;&lt; endl;\n\nwhile (GAMEON == true) {\n    KEYINPUT = cin.get(); /* You need to initialize the value before using and change it in the loop */\n    if (KEYINPUT == 32) {\n\n        SCORE += ADDSCORE;\n\n    }\n\n    if (KEYINPUT == 122) {\n\n        ADDSCORE += 10;\n        SCORE -= COST;\n        COST *= 2;\n        LEVEL += 1;\n\n    }\n\n    if (KEYINPUT == 27) {\n\n        GAMEON = false;\n\n    }\n\n}\n\ncout &lt;&lt; \"Game has ended. You may now close out of the game\" &lt;&lt; endl;\n\nreturn 0;\n}\n</code></pre>\n\n<p>A little note at the end: Since i tried to do similar little games as i started, you will need to use a platform dependent library to capture those keystrokes like ESC or other keys which not directly get put into the input buffer. i know conio for windows and otherwise the winapi is well documented and relatively easy to use. There are also many examples of how to use the winapi to capture keystrokes from the command line window which can easily be found on google.</p>\n"}], "owner": {"reputation": 19, "user_id": 10587035, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TAYj7u1y6RU/AAAAAAAAAAI/AAAAAAAAAp4/xslxR-rfK0k/photo.jpg?sz=128", "display_name": "Nicholas Dooley", "link": "https://stackoverflow.com/users/10587035/nicholas-dooley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1541007393, "creation_date": 1541003783, "last_edit_date": 1541003900, "question_id": 53088209, "link": "https://stackoverflow.com/questions/53088209/the-print-statements-dont-show-up-in-the-c-game", "title": "The Print statements don&#39;t show up in the C++ game", "body": "<p>So I am trying to code a game using C++. I am using <a href=\"http://www.tutorialspoint.com/\" rel=\"nofollow noreferrer\">this</a> online compiler so I can also work on it at school. This program was just a simple clicker game that I starting making. When I tested it to see if the code worked so far, nothing showed up, which is strange considering I have print statements in the code that give the directions for the player.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\nusing namespace std;\n\nint main()\n{\n\n    int SCORE = 0;\n    int LEVEL = 1;\n    int COST = 50;\n    int ADDSCORE = 10;\n    char KEYINPUT;\n    bool GAMEON = true;\n\n    printf(\"Press space bar to gain points to your score.\\n\");\n    printf(\"Press z key to upgrade your score multiplyer.\\n\");\n    printf(\"Press the escape key (esc) to quit.\\n\");\n    printf(\"Upgrade score multiplyer = %d.\\n\", COST);\n    printf(\"Score multiplyer = LV%d.\\n\", LEVEL);\n    printf(\"Score = %d.\\n\", SCORE);\n\n    while (GAMEON == true) {\n\n        if (KEYINPUT == 32) {\n\n            SCORE += ADDSCORE;\n\n        }\n\n        if (KEYINPUT == 122) {\n\n            ADDSCORE += 10;\n            SCORE -= COST;\n            COST *= 2;\n            LEVEL += 1;\n\n        }\n\n        if (KEYINPUT == 27) {\n\n            GAMEON = false;\n\n        }\n\n    }\n\n    printf(\"Game has ended. You may now close out of the game\");\n\n    return 0;\n}\n</code></pre>\n\n<p>I am not sure if it is my code or if it is the online compiler, but I executed on a different compiler and got the same result. Nothing. Not exactly sure why this is happening, but if someone can spot what is wrong can you let me know.</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10444020"}, "edited": false, "score": 0, "creation_date": 1541005196, "post_id": 53088519, "comment_id": 93074069, "body": "The class B will be like class A (these are Simplified names to keep things simple) but it only adds a variable. If someone wants to use the original class A, then they just don&#39;t include the update_to_A.h, and things will like how A is supposed to be."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1541005369, "post_id": 53088519, "comment_id": 93074151, "body": "@ALTR even so, your program is almost guaranteed to crash when you include some headers in different orders in different places"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10444020"}, "edited": false, "score": 0, "creation_date": 1541005460, "post_id": 53088519, "comment_id": 93074206, "body": "I just want to add a variable in A (and a function to process the new variable), but you can&#39;t edit a class from somewhere outside the class (you can only define things from within the curly braces of the class), so I resulted to this (because I don&#39;t have editing access to the original class)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1541005598, "post_id": 53088519, "comment_id": 93074261, "body": "But why do you need the new class to also be called <code>A</code>? If you want <i>existing</i> code (that you won&#39;t change) to respect this change, it almost surely won&#39;t work. If it&#39;s only for your own code... Just write <code>B</code> instead of <code>A</code>?"}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1541005517, "last_edit_date": 1541005517, "creation_date": 1541004910, "answer_id": 53088519, "question_id": 53088207, "link": "https://stackoverflow.com/questions/53088207/define-on-a-specific-translation-unit-from-another/53088519#53088519", "title": "#define on a specific translation unit from another", "body": "<p>This is not a good idea for many reasons. In order of increasing importance:</p>\n\n<ul>\n<li><p>It is confusing to read. Why does <code>A</code> suddenly mean <code>B</code>?</p></li>\n<li><p>It most likely breaks single responsibility. <code>A</code> is supposed to do a specific thing, so wanting it to suddenly be a <code>B</code> is probably making it do things that it's not originally supposed to.</p></li>\n<li><p>If other code also uses <code>A</code> (the old one) and wants to interact with your code, it wouldn't know about this change in meaning, which will quickly lead to problems. For example, each <code>B</code> needs more space than an <code>A</code>, so you cannot put them into the same array.</p></li>\n<li><p>It is not possible to do this in C++ without resorting to <strong>extremely ugly and dangerous</strong> tricks. You can <code>#define A B</code> in <code>update_to_A.h</code> and work from there, but I must stress that <strong>this is the wrong way</strong>. You are headed for pain and suffering if you try that.</p></li>\n</ul>\n\n<p>Let me be abundantly clear: Any way in which you achieve what you described in the question will be a dirty hack. It's not maintainable, very brittle and will most likely cause unsolveable issues before it does whatever you wanted to really achieve.</p>\n\n<p>If you want to have a <code>B</code> in your <code>main</code>, why not use <code>B</code>? Why abuse <code>A</code> like that?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10444020"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541005517, "creation_date": 1541003779, "question_id": 53088207, "link": "https://stackoverflow.com/questions/53088207/define-on-a-specific-translation-unit-from-another", "title": "#define on a specific translation unit from another", "body": "<p>I would like to ask if it's possible to do this \nIf it is, how can it be done? \nI want to do this because I want to \"update\" a class but I don't have access to edit that class\n(class B simply adds a variable to class A) </p>\n\n<p>A.h</p>\n\n<pre><code>#pragma once\nclass A\n{\npublic:\nint x;\nA();\n};\n</code></pre>\n\n<p>A.cpp</p>\n\n<pre><code>#include \"A.h\"\nA::A():x(0){}\n</code></pre>\n\n<p>update_to_A.h</p>\n\n<pre><code>#pragma once\n#include \"A.h\"\nclass B: public A\n{\npublic:\nint y;\nB();\n};\n</code></pre>\n\n<p>update_to_A.cpp</p>\n\n<pre><code>#include \"update_to_A.h\"\nB::B():y(1){}\n</code></pre>\n\n<p>And the written in main would be like this</p>\n\n<p>main.cpp (written like this) </p>\n\n<pre><code>#include \"A.h\"\n#include \"update_to_A.h\"\nint main()\n{\nA object; //variables: x (supposed to be x, y) \n};\n</code></pre>\n\n<p>But I want it to act like this</p>\n\n<p>main.cpp (act like this)</p>\n\n<pre><code>#include \"A.h\"\n#include \"update_to_A.h\"\nint main()\n{\nB object; //variables: x, y\n};\n</code></pre>\n"}, {"tags": ["c++", "function", "c++11", "lambda", "functor"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1541003545, "post_id": 53088101, "comment_id": 93073230, "body": "Use <code>std::function</code>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1541004377, "post_id": 53088101, "comment_id": 93073653, "body": "Your function <code>string callFunctionByIndex(char index, float arg1, int arg2)</code> doesn&#39;t make too much sense: Your <code>functionCollection</code> only stores functions that take and return a string, not two floats. You also never mention this function in your application. Could you check if it should really be part of the example?"}, {"owner": {"reputation": 13, "user_id": 10586709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-asO83xruvh0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC7Xrchk5XAg3_5rukSixl_bA8HQA/mo/photo.jpg?sz=128", "display_name": "Exynym", "link": "https://stackoverflow.com/users/10586709/exynym"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1541154311, "post_id": 53088101, "comment_id": 93127846, "body": "@MaxLanghof Yes, you&#39;re completely right, that function was in there from before I finalized the question when I changed the code a little, and I just forgot to remove it. I edited the question accordingly, thanks for pointing it out!"}], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 0, "last_activity_date": 1541154993, "last_edit_date": 1541154993, "creation_date": 1541004148, "answer_id": 53088318, "question_id": 53088101, "link": "https://stackoverflow.com/questions/53088101/can-i-have-an-array-of-lambda-pointers-in-order-to-hold-functions-with-different/53088318#53088318", "title": "Can I have an array of lambda pointers in order to hold functions with different types of arguments/return values?", "body": "<p>The reason your lambda approach does not work is that you can only turn a lambda into a function pointer if the lambda has no captures. However, to use/wrap a (non-static) member function in a lambda, the lambda must capture (store) the specific object instance to call that member function on (<code>this</code>), and function pointers cannot have (non-global) stored state like that. If you add <code>this</code> to the capture list, then the lambdas themselves are valid but can no longer decay to a function pointer.</p>\n\n<p><code>std::function</code> allows you to store arbitrary callable objects - even those with captures. They also tend to be more readable (and higher level) than function pointers.</p>\n\n<pre><code>using MyFunctionType = std::function&lt;std::string(std::string)&gt;;\n\nclass MyCommandServer\n{\n  void addToCollection(MyFunctionType fnc){\n    functionCollection.push_back(fnc);\n  }\n\n  // ...\n\n  vector&lt;MyFunctionType&gt; functionCollection;\n}\n</code></pre>\n\n<p>Now <code>MyCommandServer</code> can accept and store your lambdas (if you pass them by value), since they can be called with a string argument and return a string.</p>\n"}], "owner": {"reputation": 13, "user_id": 10586709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-asO83xruvh0/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbC7Xrchk5XAg3_5rukSixl_bA8HQA/mo/photo.jpg?sz=128", "display_name": "Exynym", "link": "https://stackoverflow.com/users/10586709/exynym"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53088318, "answer_count": 1, "score": 1, "last_activity_date": 1541154993, "creation_date": 1541003419, "last_edit_date": 1541154796, "question_id": 53088101, "link": "https://stackoverflow.com/questions/53088101/can-i-have-an-array-of-lambda-pointers-in-order-to-hold-functions-with-different", "title": "Can I have an array of lambda pointers in order to hold functions with different types of arguments/return values?", "body": "<p>Let's assume I have a class with two member functions:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass MyClass{\n  MyClass(){\n    MyCommandServer server;\n    server.addToCollection(&amp;[](string a)-&gt;string{return helloWorld();});\n    server.addToCollection(&amp;[](string a)-&gt;string{return to_string(add(stoi(a[0]),stoi(a[1])));});\n\n    while(true){\n      server.pollForCommand();\n      doSomethingElse();\n    }\n  }\n\n  string helloWorld(){\n    return \"Hello World!\";\n  }\n\n  int add(int a, int b){\n    return a+b;\n  }\n};\n</code></pre>\n\n<p>And another Class that is instantiated in the first one:</p>\n\n<pre><code>typedef string (*MyFunctionPointer)(string);\n\nclass MyCommandServer{\n  MyCommandServer(){}\n\n  void addToCollection(MyFunctionPointer ptr){\n    functionCollection.push_back(ptr);\n  }\n\n  void pollForCommand(){\n    string newCommand = checkForCommand(&amp;args);\n    if(newCommand.size()&amp;&amp;isValidCommand(newCommand[0])){\n      sendResponseToClient(functionCollection[newCommand[0]](newCommand.substr(1)));\n    }\n  }\n\n  string checkForCommand();\n  bool isValidCommand(char);\n  void sendResponseToClient(string);\n  vector&lt;MyFunctionPointer&gt; functionCollection;\n};\n</code></pre>\n\n<p>How would I go about passing my first two methods to addToCollection(MyFunctionPointer)? I was wondering if something along the lines of the example was possible. My goal is to have a way to call the functions of MyClass with only their index in the container, and figuring out how to use the provided arguments, if at all, by means of the supplied lambda function. This is supposed to enable a Command Server class, where I get a char as the said index and the arguments, if any, as a string via UDP.</p>\n\n<p>However, the compiler won't let me pass a reference to a lambda.. </p>\n\n<p>Making a switch-case statement in the MyServerClass, where I manually enter the code I put in the lambdas in the example, is not feasible since the Server class does not know about its parents methods. </p>\n\n<p>Is something similar to the example given possible?</p>\n\n<p>Sorry if the post is not up to standards, its my first on here.</p>\n\n<p>Thanks for your help! </p>\n"}, {"tags": ["c++", "string", "stringstream"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541002818, "post_id": 53087890, "comment_id": 93072791, "body": "You could try to use the <code>rdbuf</code> inside the strings tream?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1541002919, "post_id": 53087890, "comment_id": 93072860, "body": "No, there is no way to directly access the individual character of stream buffer, this is not what it is for. But you can access the elements of string representation."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1541002955, "post_id": 53087890, "comment_id": 93072882, "body": "What are you trying to do?"}, {"owner": {"reputation": 53, "user_id": 10520553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATiOB.jpg?s=128&g=1", "display_name": "YoungA1", "link": "https://stackoverflow.com/users/10520553/younga1"}, "edited": false, "score": 0, "creation_date": 1541003243, "post_id": 53087890, "comment_id": 93073043, "body": "I&#39;m trying to sort individual words alphabetically in the string stream using a for loop."}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 4, "last_activity_date": 1541003641, "last_edit_date": 1541003641, "creation_date": 1541003317, "answer_id": 53088066, "question_id": 53087890, "link": "https://stackoverflow.com/questions/53087890/is-it-possible-to-address-individual-elements-in-a-stringstream-in-c/53088066#53088066", "title": "Is it possible to address individual elements in a stringstream in c++", "body": "<p>Stream elements are individual characters and they have positions. However, read and write parts of a stream are separate (<code>istream</code> vs <code>ostream</code>), so you cannot easily manipulate contents of a stream. And, generally, streams support reading/writing once, only some streams can be rewound.</p>\n\n<hr>\n\n<blockquote>\n  <p>I'm trying to sort individual words alphabetically in the string stream using a for loop.</p>\n</blockquote>\n\n<p>You can read all words into a vector and then sort the vector. E.g.:</p>\n\n<pre><code>std::vector&lt;std::string&gt; read_words_and_sort(std::istream&amp; s) {\n    std::vector&lt;std::string&gt; v(std::istream_iterator&lt;std::string&gt;{s},\n                               std::istream_iterator&lt;std::string&gt;{});\n    std::sort(v.begin(), v.end());\n    return v;\n}\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 10520553, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATiOB.jpg?s=128&g=1", "display_name": "YoungA1", "link": "https://stackoverflow.com/users/10520553/younga1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 53088066, "answer_count": 1, "score": 1, "last_activity_date": 1541003641, "creation_date": 1541002732, "question_id": 53087890, "link": "https://stackoverflow.com/questions/53087890/is-it-possible-to-address-individual-elements-in-a-stringstream-in-c", "title": "Is it possible to address individual elements in a stringstream in c++", "body": "<p>I am looking for a way to address individual elements in a string stream, such as would be done with an array, <code>arr[n]</code>. I realize I can simply assign a string with the string stream, <code>std::string gets  = ss.str()</code> and address the string, but this seems counter intuitive.</p>\n"}, {"tags": ["c++", "qt", "qml"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 2, "creation_date": 1541002492, "post_id": 53087727, "comment_id": 93072595, "body": "Looks like you execute your task in the GUI thread an so block it until end of execution. You should move the task to a different thread."}], "answers": [{"comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 1, "creation_date": 1541058302, "post_id": 53089601, "comment_id": 93090142, "body": "I would add that there is possibility to execute the task in QML only, without using C++ using <a href=\"http://doc.qt.io/qt-5/qtquick-threading-example.html#workerscript\" rel=\"nofollow noreferrer\">WorkerScript</a>"}, {"owner": {"reputation": 5455, "user_id": 2788674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e2eaf786e0c365b68573e38c4625ce3?s=128&d=identicon&r=PG&f=1", "display_name": "GrecKo", "link": "https://stackoverflow.com/users/2788674/grecko"}, "edited": false, "score": 0, "creation_date": 1541073531, "post_id": 53089601, "comment_id": 93097121, "body": "<a href=\"http://doc.qt.io/qt-5/qtconcurrent.html#run\" rel=\"nofollow noreferrer\"><code>QtConcurrent::run()</code></a> is a higher level API than <code>QThread</code> and may be more practical to use."}], "tags": [], "owner": {"reputation": 101, "user_id": 10566869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pUK4v.jpg?s=128&g=1", "display_name": "t4ggno", "link": "https://stackoverflow.com/users/10566869/t4ggno"}, "is_accepted": false, "score": 1, "last_activity_date": 1541069472, "last_edit_date": 1541069472, "creation_date": 1541009312, "answer_id": 53089601, "question_id": 53087727, "link": "https://stackoverflow.com/questions/53087727/qml-button-onclicked-function-execution-order/53089601#53089601", "title": "QML Button onClicked function execution order", "body": "<p>Your UI will repaint certain areas with the next call of the event loop. This never happen in your case, because the slot (your function) is called directly and blocks the application until it is finished. There are a few ways to avoid that blocking:</p>\n\n<ul>\n<li>Move your task to another thread (<a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">QThread</a>) and wait until finish</li>\n<li>Start your task with an timer (<a href=\"http://doc.qt.io/qt-5/qml-qtqml-timer.html\" rel=\"nofollow noreferrer\">QML-Timer</a>). You can redraw the button before starting the method, but your GUI will still block until the method has finished (the change of <em>enabled</em> will be useless).</li>\n<li>Call <a href=\"http://doc.qt.io/qt-5/qcoreapplication.html#processEvents\" rel=\"nofollow noreferrer\">processEvents()</a> within your method multiple times (<strong>not</strong> recommended, can cause problems).</li>\n</ul>\n\n<p>If the method needs some time, I would use a new thread. So your gui isn't blocking and your button wil still receive events (painting, mouse, ...).</p>\n\n<p><strong>Edit 1:</strong></p>\n\n<p>If your C++-Code is simple and can be translated to JavaScript-Code, you can also use <a href=\"http://doc.qt.io/qt-5/qtquick-threading-example.html#workerscript\" rel=\"nofollow noreferrer\">WorkerScript</a>. It's the QML-Version of <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">QThread</a>. But it has some limitations. You can only use JavaScript and you can't interact with the Worker while running.</p>\n\n<p>Thanks to <strong>folibis</strong> for the suggestion.</p>\n"}], "owner": {"reputation": 77, "user_id": 2874071, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hnfvv.jpg?s=128&g=1", "display_name": "Jakub Mat\u011bna", "link": "https://stackoverflow.com/users/2874071/jakub-mat%c4%9bna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541069472, "creation_date": 1541002183, "question_id": 53087727, "link": "https://stackoverflow.com/questions/53087727/qml-button-onclicked-function-execution-order", "title": "QML Button onClicked function execution order", "body": "<p>I have a button with function onClicked. There is a C++ class Middle with function search_connection connected via qmlRegisterType. </p>\n\n<p>What I want to do is to change the text of searchButton while the C++ function is calculating the return value and also disable the button for that time.</p>\n\n<p>What happens is nothing. The button is enabled for the whole time with text \"Search\". I believe that what actually happens is, that search_connection function is executed first and than all the rest happens so fast I can't notice the change from \"Search\" to \"Searching...\" and back again.</p>\n\n<pre><code>TextField {\n   id: startStop\n}\n\nTextField {\n   id: finishStop\n}\n\nButton {\n   id: searchButton\n   text: qsTr(\"Search\")\n\n   onClicked: {\n      text = qsTr(\"Searching...\")\n      enabled = false;\n      searchResult.text = middle.search_connection(startStop.text,finishStop.text)\n      enabled = true;\n      text = qsTr(\"Search\")\n   }\n}\n</code></pre>\n\n<p>Does anyone know how to make the Qt to call the function after it changes the text to \"Searching...\"?</p>\n"}, {"tags": ["c++", "glfw"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 3, "creation_date": 1541001508, "post_id": 53087464, "comment_id": 93071969, "body": "Is there any such file on your system? Where is it?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1541001578, "post_id": 53087464, "comment_id": 93072015, "body": "Exactly, your job as a programmer is to figure out why the compiler can not find the file in it&#39;s include paths. We don&#39;t know what is on your disk so its difficult to help.."}, {"owner": {"reputation": 12072, "user_id": 1630963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97c2d181ef6bbb9eee0c4033561c3891?s=128&d=identicon&r=PG", "display_name": "enhzflep", "link": "https://stackoverflow.com/users/1630963/enhzflep"}, "edited": false, "score": 0, "creation_date": 1541001801, "post_id": 53087464, "comment_id": 93072152, "body": "Sounds like you&#39;ll need to grab the .h file from here and put it somewhere the compiler can see it. <a href=\"https://github.com/datenwolf/linmath.h\" rel=\"nofollow noreferrer\">github.com/datenwolf/linmath.h</a>"}], "answers": [{"tags": [], "owner": {"reputation": 317, "user_id": 5690027, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RJPwTsRi1l4/AAAAAAAAAAI/AAAAAAAAAGI/HUtUfIROzfI/photo.jpg?sz=128", "display_name": "George Theodosiou", "link": "https://stackoverflow.com/users/5690027/george-theodosiou"}, "is_accepted": false, "score": 0, "last_activity_date": 1542622554, "creation_date": 1542622554, "answer_id": 53372433, "question_id": 53087464, "link": "https://stackoverflow.com/questions/53087464/cannot-open-include-file-linmath-h/53372433#53372433", "title": "Cannot open include file: &#39;linmath.h&#39;", "body": "<ol>\n<li>Add to project (by Solution Explorer > Source Files > Add > New Item > Header File) header file linmath.h. Go to <a href=\"https://github.com/glfw/glfw/blob/master/deps/linmath.h\" rel=\"nofollow noreferrer\">https://github.com/glfw/glfw/blob/master/deps/linmath.h</a> copy code and paste in linmath.h code area.</li>\n<li>Delete glad.c from project folder and add it to project by Solution Explorer > Source Files > Add > Existing Item. Regards.</li>\n</ol>\n"}], "owner": {"reputation": 317, "user_id": 5690027, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-RJPwTsRi1l4/AAAAAAAAAAI/AAAAAAAAAGI/HUtUfIROzfI/photo.jpg?sz=128", "display_name": "George Theodosiou", "link": "https://stackoverflow.com/users/5690027/george-theodosiou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1889, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542622554, "creation_date": 1541001317, "question_id": 53087464, "link": "https://stackoverflow.com/questions/53087464/cannot-open-include-file-linmath-h", "title": "Cannot open include file: &#39;linmath.h&#39;", "body": "<p>I have set up GLFW and GLAD in Visual Studio 2017 as follows:<br>\nI created in C: directory, folder GLFW-GLAD, and in V.S., Empty Project \"Project-0\" and Source file \"Main.cpp\".<br>\n1. In project GLFW-GLAD's \"Properties\", Configuration: [All Configurations], Platform: [Active(Win32)], Configuration Properties:<br>\n1.1. C/C++ > General > \"Additional Include Directories\" window  > \"C:\\GLFW-GLAD\\glfw\\include\" and \"C:\\GLFW-GLAD\\glad\\include\".<br>\n1.2. Linker > General > \"Additional Library Directories\" window > \"C:\\GLFW-GLAD\\glfw\\lib-vc2015\"<br>\n1.3. Linker > Input > \"Additional Dependencies\" window > \"opengl32.lib; glfw3.lib; glfw3dll.lib\".<br>\n1.4. Linker > System > Subsystem > Console (/SUBSYSTEM:CONSOLE)<br>\n2. In project folder \"Project-0\" I have pasted files: \"glad.c\" and \"glfw3.dll\".<br>\nI copied program from <a href=\"https://www.glfw.org/docs/latest/quick.html\" rel=\"nofollow noreferrer\">https://www.glfw.org/docs/latest/quick.html</a> and pasted in Main.cpp code area. I attempted run it but failed. Output is<br>\n\"fatal error C1083: Cannot open include file: 'linmath.h': No such file or directory\"<br>\nPlease help.</p>\n"}, {"tags": ["c++", "sdl"], "answers": [{"tags": [], "owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "is_accepted": true, "score": 2, "last_activity_date": 1541010136, "creation_date": 1541010136, "answer_id": 53089800, "question_id": 53087390, "link": "https://stackoverflow.com/questions/53087390/how-to-set-the-color-of-pixel-on-24-bit-sdl-surface/53089800#53089800", "title": "How to set the color of pixel on 24 bit SDL_Surface?", "body": "<p>You'll end up needing to mask 3 of the <code>Uint32</code> bytes in <code>pixel</code> while keeping the 4th byte of <code>target_pixel</code> unchanged (keep endianness in mind).</p>\n\n<p>something like this should be close, but doesn't account for endianness:</p>\n\n<pre><code>//assumes pixel has 0x00 for unused byte and assumes LSB is the unused byte\n*target_pixel = pixel | (*target_pixel &amp; 0xff)\n</code></pre>\n\n<p>Incidentally, your <code>target_pixel</code> calculation appears to be wrong. You should be multiplying by the number of bytes-per-pixel, not the <code>sizeof(Uint32)</code>.</p>\n"}], "owner": {"reputation": 130, "user_id": 6613728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sx3iZ.png?s=128&g=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/6613728/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 53089800, "answer_count": 1, "score": 0, "last_activity_date": 1541010136, "creation_date": 1541001095, "question_id": 53087390, "link": "https://stackoverflow.com/questions/53087390/how-to-set-the-color-of-pixel-on-24-bit-sdl-surface", "title": "How to set the color of pixel on 24 bit SDL_Surface?", "body": "<p>I tried to set the color of a pixel using this function:</p>\n\n<pre><code>void set_pixel(SDL_Surface *surface, SDL_Color, int x, int y)\n{\n    Uint32 pixel= SDL_MapRGB(surface-&gt;format, color.r, color.g, color.b);\n    Uint32 *target_pixel = (Uint8 *) surface-&gt;pixels + y * surface-&gt;pitch +\n                                                 x * sizeof *target_pixel;\n    *target_pixel = pixel;\n}\n</code></pre>\n\n<p>Unfortunately it's not working, I guess it's because my SDL_Surface has 24 bit per pixel but SDL_MapRGB returns a Uint32. Should I convert my SDL_Surface to 32 bit per pixel or is there a way to convert the Uint32 pixel to be 24 bit?  </p>\n"}, {"tags": ["c++", "algorithm", "debugging", "coding-efficiency"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 8, "creation_date": 1541002042, "post_id": 53087382, "comment_id": 93072299, "body": "Instead of just dumping the code here and hoping for the best, try and break the problem down into smaller chunks. Writing intricate mathematical code without unit tests is basically a fool&#39;s errand, so take the time to define some rigorous checks that can validate that this code is working correctly on a more modular level before integrating it. Each function should have one or more tests that verify it&#39;s working correctly for the expected range of inputs."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 4, "creation_date": 1541002061, "post_id": 53087382, "comment_id": 93072318, "body": "your defines dont make the code easier to read. Revoming them would be the first thing i would &quot;fix&quot;"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 3, "creation_date": 1541002233, "post_id": 53087382, "comment_id": 93072424, "body": "Please don&#39;t do this: <code>#define ll long long</code> in code you&#39;re sharing. It makes the code harder to read. (The same goes for the other defines.)"}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 1, "creation_date": 1541004794, "post_id": 53087382, "comment_id": 93073868, "body": "<a href=\"https://stackoverflow.com/questions/31816095/why-should-i-not-include-bits-stdc-h\" title=\"why should i not include bits stdc h\">stackoverflow.com/questions/31816095/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3224, "user_id": 6878708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/567e055e3d71ce025d8560333e48dfb9?s=128&d=identicon&r=PG&f=1", "display_name": "nightfury1204", "link": "https://stackoverflow.com/users/6878708/nightfury1204"}, "is_accepted": true, "score": 1, "last_activity_date": 1541005407, "creation_date": 1541005407, "answer_id": 53088652, "question_id": 53087382, "link": "https://stackoverflow.com/questions/53087382/efficiently-counting-divisors-of-a-number-in-on1-3-in-c/53088652#53088652", "title": "Efficiently Counting Divisors of a Number in O(n^(1/3)) in c++", "body": "<p>You set initial value of <code>prime</code> is 1 here <code>vector&lt;int&gt; prime(10000000, 1)</code>. Then update the value of <code>prime</code> upto <code>n</code> in <code>seive(ll n)</code> function. So for <code>n+1</code> to <code>10000000</code> <code>prime</code> value will remain 1. In your main function, you ran the <code>sieve(N)</code> for <code>ll N=cbrt(n)</code>. For this reason your <code>isPrime(n)</code> is incorrect, because <code>n</code> could be greater than <code>N=cbrt(n)</code>. Fix that your code is good to go.</p>\n\n<p>From the blog post, i understand that this algorithm is for finding factors of long long integer. They also mention that to check primality use Miller Rabin. The way you check <code>isPrime(n)</code> will not work for large integer.</p>\n\n<p>Also update this part (change <code>1000000</code> to <code>cbrt(n)</code>):</p>\n\n<pre><code>ll numberOfDivisors(ll n){\n    for(int i=0; i&lt;1000000; i++){\n        if(prime[i]==1) primeTable.pb(i);\n    }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9177454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a840608d0edc5913ae5f07bad68ab17?s=128&d=identicon&r=PG&f=1", "display_name": "ucchasgfrank", "link": "https://stackoverflow.com/users/9177454/ucchasgfrank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "accepted_answer_id": 53088652, "answer_count": 1, "score": 0, "last_activity_date": 1541005407, "creation_date": 1541001072, "last_edit_date": 1541001792, "question_id": 53087382, "link": "https://stackoverflow.com/questions/53087382/efficiently-counting-divisors-of-a-number-in-on1-3-in-c", "title": "Efficiently Counting Divisors of a Number in O(n^(1/3)) in c++", "body": "<p>I found an efficient algorithm to count divisors of a number in O(n^(1/3)) here: <a href=\"https://codeforces.com/blog/entry/22317\" rel=\"nofollow noreferrer\">https://codeforces.com/blog/entry/22317</a></p>\n\n<p>I've implemented the algorithm in the code below. But it doesn't work properly.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n\n#define ll long long\n#define pb push_back\n#define endl \"\\n\"\n#define pi 2*acos(0)\n\n#define debug(s) cout &lt;&lt; #s &lt;&lt; \" = \" &lt;&lt; s &lt;&lt; endl\n#define all(v) (v).begin(), (v).end()\n#define mem(a, val) memset(a, val, sizeof a)\n\nvector&lt;int&gt; prime(10000000, 1); // array size is 10^7\nvoid sieve(ll n){\n    prime[0]=prime[1]=0;\n    for(ll i=2; i&lt;=sqrt(n); i++){\n        if(prime[i]==1){\n            for(ll j=2; i*j&lt;=n; j++) prime[i*j]=0;\n        }\n    }\n}\nbool isPrime(ll n){\n    if(n&lt;2) return false;\n    return prime[n];\n}\n\nvector&lt;int&gt; primeTable;\nll numberOfDivisors(ll n){\n    for(int i=0; i&lt;1000000; i++){\n        if(prime[i]==1) primeTable.pb(i);\n    }\n    ll ans=1;\n    for(int i=0; ; i++){\n        if(primeTable[i]*primeTable[i]*primeTable[i]&gt;n) break;\n        ll cnt=1;\n        while(n%primeTable[i]==0){\n            n=n/primeTable[i];\n            cnt++;\n        }\n        ans*=cnt;\n    }\n    double sqn=sqrt(n);\n    if(isPrime(n)) ans*=2;\n    else if((sqn-floor(sqn))==0 and isPrime((ll)sqn)) ans*=3;\n    else if(n!=1) ans*=4;\n\n    return ans;\n}\n\nint main()\n{\n    ios_base::sync_with_stdio(false);cin.tie(NULL);\n    ll n;\n    cin &gt;&gt; n;\n    ll N=cbrt(n);\n    sieve(N);\n    cout &lt;&lt; numberOfDivisors(n) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>i.e for 15 it returns 2(should be 4), for 100 it returns 6(should be 9), for 999 it returns 8(which is correct), but again for 9999 it returns 6(should be 12). I think something is wrong in between line 42 and 45. But I'm unable to find the bug. Please help me find the bug.</p>\n"}, {"tags": ["c++", "macos", "qt"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4663883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152704088614599/picture?type=large", "display_name": "Sam Highfield", "link": "https://stackoverflow.com/users/4663883/sam-highfield"}, "edited": false, "score": 0, "creation_date": 1541000851, "post_id": 53087189, "comment_id": 93071554, "body": "Thanks for replying so quickly.... so to solve this problem, I need find an older Mac and then re-build the app on there?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 11, "user_id": 4663883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152704088614599/picture?type=large", "display_name": "Sam Highfield", "link": "https://stackoverflow.com/users/4663883/sam-highfield"}, "edited": false, "score": 0, "creation_date": 1541001232, "post_id": 53087189, "comment_id": 93071798, "body": "That&#39;s one option, but then the issue is that older XCode don&#39;t have access to newer C++ features. The proper way to do it is to change the deployment target OS in the XCode properties and set it to the earliest macOS you want to support."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 11, "user_id": 4663883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152704088614599/picture?type=large", "display_name": "Sam Highfield", "link": "https://stackoverflow.com/users/4663883/sam-highfield"}, "edited": false, "score": 0, "creation_date": 1541001311, "post_id": 53087189, "comment_id": 93071854, "body": "See also: <a href=\"https://stackoverflow.com/questions/6591988/best-practice-for-osx-10-x-backwards-compatability\" title=\"best practice for osx 10 x backwards compatability\">stackoverflow.com/questions/6591988/&hellip;</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 11, "user_id": 4663883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152704088614599/picture?type=large", "display_name": "Sam Highfield", "link": "https://stackoverflow.com/users/4663883/sam-highfield"}, "edited": false, "score": 0, "creation_date": 1541001430, "post_id": 53087189, "comment_id": 93071923, "body": "Also added a mention about instruction set which could trigger these errors as well."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1541001289, "last_edit_date": 1541001289, "creation_date": 1541000394, "answer_id": 53087189, "question_id": 53087105, "link": "https://stackoverflow.com/questions/53087105/deployed-mac-app-does-not-open-on-macs-older-than-late-2014/53087189#53087189", "title": "Deployed Mac app does not open on Macs older than late 2014", "body": "<p>The issue is that you compiled your code with a later XCode than what these computers have, and you didn't target the old versions of macOS/OS X.</p>\n\n<p>Do remember that older Mac cannot upgrade to the latest macOS, and even some people prefer to keep old versions. In that case, if you don't explicitly set the deployment target to say 10.11, everything below the default value (which is the current macOS you have) won't be able to execute your code.</p>\n\n<p>Newer compilers would also use instructions that are not compatible with old CPUs, so also verify that you are not using any \"new\" instruction set like AVX.</p>\n"}], "owner": {"reputation": 11, "user_id": 4663883, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152704088614599/picture?type=large", "display_name": "Sam Highfield", "link": "https://stackoverflow.com/users/4663883/sam-highfield"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1541001289, "creation_date": 1541000193, "last_edit_date": 1541000725, "question_id": 53087105, "link": "https://stackoverflow.com/questions/53087105/deployed-mac-app-does-not-open-on-macs-older-than-late-2014", "title": "Deployed Mac app does not open on Macs older than late 2014", "body": "<p>I've deployed a Mac app that runs fine on Macs made in late 2014 or later (the operating system seems to not matter as an old Mac running High Sierra will still not run the app), but with older Macs it always crashes with this error:</p>\n\n<p>ImagineyeFree quit unexpectedly</p>\n\n<p><img src=\"https://i.stack.imgur.com/wX2bE.png\" alt=\"\"></p>\n\n<p>Notes:                 Translocated Process</p>\n\n<pre><code>Crashed Thread:        0  Dispatch queue: com.apple.main-thread\n\nException Type:        EXC_BAD_INSTRUCTION (SIGILL)\nException Codes:       0x0000000000000001, 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nTermination Signal:    Illegal instruction: 4\nTermination Reason:    Namespace SIGNAL, Code 0x4\nTerminating Process:   exc handler [0]\n</code></pre>\n\n<p>how do I solve this problem? The app is written in QT and uses 64bit libraries....are all Mac's older than late 2014 all 32bit? So a 64bit app will not run on them?</p>\n\n<p>I have this line in my QT .pro file</p>\n\n<p>greaterThan(QT_MAJOR_VERSION, 4)</p>\n\n<p>...does this make a difference?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1541000003, "post_id": 53086969, "comment_id": 93070958, "body": "Try <code>cout &lt;&lt; std::dec &lt;&lt; decimal_to_binary(a)...</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 0, "creation_date": 1541001134, "post_id": 53087298, "comment_id": 93071732, "body": "result.insert (0,&#39;1&#39;); etc maybe easier than appending and then reversing."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 1, "creation_date": 1541001283, "post_id": 53087298, "comment_id": 93071828, "body": "@Owl -- there are lots of ways to write that code. I don&#39;t know what &quot;easier&quot; refers to in your comment, but inserting at the beginning, which certainly works, does a lot of thrashing because it has to move all the characters each time a new one is generated. The main purpose of this answer, though, is to point out that the primary concern is generating a text representation."}, {"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 0, "creation_date": 1541067598, "post_id": 53087298, "comment_id": 93094135, "body": "Yes, that&#39;s true, maybe in an ideal world you&#39;d calculate a base 2 log, to determine how many digits it has, then do an in placement character insert into an array of predetermined length."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 0, "creation_date": 1541077725, "post_id": 53087298, "comment_id": 93099328, "body": "@Owl -- using a C-style array is actually easier here. You know the maximum length that the result can have, because you know the size of the integer type. So you start at the end of the array, with a &#39;\\0&#39;`, and then fill in digits working backwards until the remaining value is 0. But that&#39;s too complicated to explain in an answer to a beginner, and either filling backwards then reversing, as I did, or inserting as you generate digits, as you suggested, is easier to understand."}, {"owner": {"reputation": 1127, "user_id": 1796858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c1b4f442048641cf0656ab4cdc4b6ec?s=128&d=identicon&r=PG", "display_name": "Owl", "link": "https://stackoverflow.com/users/1796858/owl"}, "edited": false, "score": 0, "creation_date": 1541085160, "post_id": 53087298, "comment_id": 93103435, "body": "Yes, i&#39;m totally knitpicking anyway :) But that&#39;s exactly what i did i used a sizeof and then worked backwards from there using bitshifts and &amp;s to get the digits."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 4, "last_activity_date": 1541000782, "creation_date": 1541000782, "answer_id": 53087298, "question_id": 53086969, "link": "https://stackoverflow.com/questions/53086969/c-decimal-to-binary-how-to-convert-it/53087298#53087298", "title": "C++ Decimal to Binary, how to convert it?", "body": "<p>In general, when someone is talking about \"decimal\" or \"binary\" they're talking about the <strong>text</strong> representation of a value, not the internal representation. While you can hack around with the value and maybe create an integer value that can be displayed so it looks like a binary value, that's not particularly useful. What you need to do is convert the integer value to <strong>text</strong> that represents its binary value:</p>\n\n<pre><code>std::string to_binary(unsigned i) {\n    std::string result;\n    while (i != 0) {\n        if (i % 2)\n            result.append(1, '1');\n        else\n            result.append(1, '0');\n        i /= 2;\n    }\n    std::reverse(result.begin(), result.end());\n    return result;\n}\n\nint main() {\n    std::cout &lt;&lt; to_binary(3) &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>If you need to display a value as decimal, octal, or hexadecimal, you can do that more directly with a stream manipulator:</p>\n\n<pre><code>std::cout &lt;&lt; std::hex &lt;&lt; 3 &lt;&lt; '\\n'; // display value as hex\nstd::cout &lt;&lt; std::dec &lt;&lt; 3 &lt;&lt; '\\n'; // display value as decimal\nstd::cout &lt;&lt; std::oct &lt;&lt; 3 &lt;&lt; '\\n'; // display value as octal\n</code></pre>\n\n<p>There's no manipulator for displaying values as binary, however, so you have to roll your own.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1541009926, "post_id": 53087402, "comment_id": 93076444, "body": "Ok, but the task is from HackerRank and my teacher said it must pass the test case. Yours didn&#39;t as it has &#39;0&#39; before the actual number."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1541066908, "post_id": 53087402, "comment_id": 93093783, "body": "@\u041d\u0435\u0434\u044f\u043b\u043a\u043e\u0410\u043d\u0433\u0435\u043b\u043e\u0432 you didn&#39;t specify that. It&#39;s easily corrected just by stripping leading zeroes of a string, i.e. <code>auto s = std::bitset&lt;32&gt;(n).to_string(); return s.substr(s.find(&#39;1&#39;));</code>: <a href=\"https://ideone.com/mx4ssc\" rel=\"nofollow noreferrer\">ideone.com/mx4ssc</a>"}], "tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1541001114, "creation_date": 1541001114, "answer_id": 53087402, "question_id": 53086969, "link": "https://stackoverflow.com/questions/53086969/c-decimal-to-binary-how-to-convert-it/53087402#53087402", "title": "C++ Decimal to Binary, how to convert it?", "body": "<p>You can just use <code>std::bitset</code> to get binary representation of a number as a string:</p>\n\n<pre><code>std::string decimal_to_binary(int n) {\n  return std::bitset&lt;32&gt;(n).to_string();\n}\n</code></pre>\n\n<p>Your current implementation will fail miserably on any somewhat big number (at least because <code>long long</code> wouldn't be able to hold more than ~18 decimal places or bits in your case).</p>\n\n<p>See how it works here: <a href=\"https://ideone.com/hDNWbe\" rel=\"nofollow noreferrer\">https://ideone.com/hDNWbe</a></p>\n"}], "owner": {"reputation": 29, "user_id": 9098443, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WE3DBebZcxY/AAAAAAAAAAI/AAAAAAAABlY/-aEZUDLV82Y/photo.jpg?sz=128", "display_name": "\u041d\u0435\u0434\u044f\u043b\u043a\u043e \u0410\u043d\u0433\u0435\u043b\u043e\u0432", "link": "https://stackoverflow.com/users/9098443/%d0%9d%d0%b5%d0%b4%d1%8f%d0%bb%d0%ba%d0%be-%d0%90%d0%bd%d0%b3%d0%b5%d0%bb%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1541004057, "creation_date": 1540999754, "question_id": 53086969, "link": "https://stackoverflow.com/questions/53086969/c-decimal-to-binary-how-to-convert-it", "title": "C++ Decimal to Binary, how to convert it?", "body": "<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nlong long decimal_to_binary(int n) {\n    long long bn = 0;\n    int rem, i = 1;\n\n    while (n != 0) {\n        rem = n % 2;\n        n /= 2;\n        bn += rem * i;\n        i *= 10; \n    }\n    return bn;\n}\n    int main(){\n    int a,b,c;\n    cin &gt;&gt; a &gt;&gt; b &gt;&gt; c;\n    cout &lt;&lt; decimal_to_binary(a) &lt;&lt; \" \" &lt;&lt; std::oct &lt;&lt; a &lt;&lt; \" \" &lt;&lt; std::hex &lt;&lt; a &lt;&lt; '\\n';\n    cout &lt;&lt; decimal_to_binary(b) &lt;&lt; \" \" &lt;&lt; std::oct &lt;&lt; b &lt;&lt; \" \" &lt;&lt; std::hex &lt;&lt; b &lt;&lt; '\\n';\n    cout &lt;&lt; decimal_to_binary(c) &lt;&lt; \" \" &lt;&lt; std::oct &lt;&lt; c &lt;&lt; \" \" &lt;&lt; std::hex &lt;&lt; c &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>You enter 3 decimal numbers and print them in binary, octal and hex.</p>\n\n<p>When I enter <strong>2,8,15</strong> it should print:</p>\n\n<blockquote>\n  <p>10 2 2</p>\n  \n  <p>1000 10 8</p>\n  \n  <p>1111 17 F</p>\n</blockquote>\n\n<p>but it prints</p>\n\n<blockquote>\n  <p>10 2 2</p>\n  \n  <p>3e8 10 8</p>\n  \n  <p>457 17 f</p>\n</blockquote>\n\n<p>Can you point out what i'm missing?</p>\n"}, {"tags": ["c++", "boost", "shared-ptr"], "comments": [{"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541000302, "post_id": 53086931, "comment_id": 93071156, "body": "Where does it crash? Show the stack trace."}, {"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 2, "creation_date": 1541000431, "post_id": 53086931, "comment_id": 93071249, "body": "<code>std::size_t i; </code> ? where is initial value ?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1541000879, "post_id": 53086931, "comment_id": 93071570, "body": "<b><i>I don&#39;t see anything obvious of why it would crash</i></b> This is where a debugger like the one in Visual Studio really helps. if you know how to use it. Although with that said I would expect the bug listed by @rafix07 to trigger a warning from your compiler."}, {"owner": {"reputation": 11, "user_id": 3993492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb84b06f500f76f2cf163d210d46af1?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Alejandro Vega", "link": "https://stackoverflow.com/users/3993492/luis-alejandro-vega"}, "reply_to_user": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1541007354, "post_id": 53086931, "comment_id": 93075203, "body": "@rafix07 thanks that was the problem."}], "owner": {"reputation": 11, "user_id": 3993492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8eb84b06f500f76f2cf163d210d46af1?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Alejandro Vega", "link": "https://stackoverflow.com/users/3993492/luis-alejandro-vega"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540999662, "creation_date": 1540999662, "question_id": 53086931, "link": "https://stackoverflow.com/questions/53086931/ucrtbase-dll-crash-whe-using-stdvectorpclpointcloudpclpointnormal", "title": "ucrtbase.dll crash whe using std::vector&lt;pcl::PointCloud&lt;pcl::PointNormal&gt;&gt;", "body": "<p>The following code crashes every time the code runs. I don't see anything obvious of why it would crash. Help would be appreciated.</p>\n\n<pre><code>std::vector&lt;boost::shared_ptr&lt;pcl::PointCloud&lt;pcl::PointNormal&gt;&gt;&gt; neighbor_count_filtered_clouds;\n\nneighbor_count_filtered_clouds.resize(27);\n    for (std::size_t i; i &lt; temp_pointclouds.size(); i++) {\n        temp_pointclouds[i].width = temp_pointclouds[i].points.size();\n        temp_pointclouds[i].height = 1;\n        neighbor_count_filtered_clouds[i] = boost::make_shared&lt;pcl::PointCloud&lt;pcl::PointNormal&gt;&gt;(std::move(temp_pointclouds[i]));\n        //*neighbor_count_filtered_clouds[i] = temp_pointclouds[i];\n    }\n\nfor (std::size_t i = 0; i &lt; neighbor_count_filtered_clouds.size(); i++) {\n        std::cout &lt;&lt; i &lt;&lt; \":\\t\" &lt;&lt; neighbor_count_filtered_clouds[i]-&gt;points.size() &lt;&lt; std::endl;\n    }\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zTBhY.png\" rel=\"nofollow noreferrer\">neighbor_count_filtered_clouds</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/dtpsC.png\" rel=\"nofollow noreferrer\">temp_pointclouds</a></p>\n"}, {"tags": ["c++", "for-loop", "codeblocks"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 4, "creation_date": 1540999563, "post_id": 53086829, "comment_id": 93070643, "body": "<code>cout &lt;&lt; abc &lt;&lt; (char)(abc+32) &lt;&lt; &quot;,&quot;;</code>"}, {"owner": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1540999766, "post_id": 53086829, "comment_id": 93070779, "body": "sorry bro but (abc+32) what is 32?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1540999832, "post_id": 53086829, "comment_id": 93070826, "body": "<a href=\"http://www.asciitable.com/index/asciifull.gif\" rel=\"nofollow noreferrer\">asciitable.com/index/asciifull.gif</a> If you add <code>32</code> to an uppercase character you get the respective lowercase character."}, {"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1541000801, "post_id": 53086829, "comment_id": 93071508, "body": "This is a homework question. First, see that you need a double loop."}, {"owner": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "edited": false, "score": 0, "creation_date": 1541000993, "post_id": 53086829, "comment_id": 93071642, "body": "very funny its an assignment :)"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1541001614, "post_id": 53086829, "comment_id": 93072040, "body": "@Blaze, only on a system that uses ASCII (or superset of ASCII).  C++ is a portable language, remember?"}], "answers": [{"comments": [{"owner": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "edited": false, "score": 0, "creation_date": 1541002825, "post_id": 53087465, "comment_id": 93072796, "body": "so how can i use static_cast in mine case?"}], "tags": [], "owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "is_accepted": false, "score": 2, "last_activity_date": 1541001318, "creation_date": 1541001318, "answer_id": 53087465, "question_id": 53086829, "link": "https://stackoverflow.com/questions/53086829/print-abc-upercase-and-lowercase-c-using-for-loop/53087465#53087465", "title": "print abc upercase and lowercase c++ using for loop", "body": "<p>Don't use <code>(char)(abc+32)</code> as an (sigh) upvoted comment suggests. There are several problems in such a small snippet of code:</p>\n\n<ul>\n<li><p>you should not use magic numbers. Here <code>32</code> is a magic number. What is it? Where does it come from? In ASCII encoding it's <code>'a' - 'A'</code>. If you ever need to write this number, don't write <code>32</code>, write <code>'a' - 'A'</code>. But as we'll see next, there is a problem with this number:</p></li>\n<li><p>using <code>'a' - 'A'</code> to convert between cases works only for ASCII encodings. <code>C++</code> doesn't specify that <code>char</code> uses ASCII, although it is the most used encoding. Bottom line: it's not portable. If you use it, make an assertion somewhere that the encoding used is ASCII</p></li>\n<li><p>in C++ you should avoid C-style cast, e.g. <code>(char)(...)</code>. Use <code>static_cast</code> instead.</p></li>\n</ul>\n\n<p>The simple portable way to convert between cases in C++ is to use <a href=\"https://en.cppreference.com/w/cpp/string/byte/toupper\" rel=\"nofollow noreferrer\"><code>std::toupper</code></a> and <a href=\"https://en.cppreference.com/w/cpp/string/byte/tolower\" rel=\"nofollow noreferrer\"><code>std::tolower</code></a>:</p>\n\n<pre><code>static_cast&lt;char&gt;(std::tolower(abc))\n</code></pre>\n\n<p>Unfortunately due to the legacy of <code>C</code> these functions work on <code>int</code> data type (although mostly they interpret it as <code>char</code>) so you need the cast.</p>\n"}, {"comments": [{"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "reply_to_user": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1541001641, "post_id": 53087474, "comment_id": 93072055, "body": "@bolov just trying to help the OP, and of course your answer is right."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541001642, "post_id": 53087474, "comment_id": 93072056, "body": "Your answer doesn&#39;t explain why you need two loops."}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1541001773, "post_id": 53087474, "comment_id": 93072133, "body": "@TimRandall As you can see the question of the OP, every letter should be re-written at each iteration. SO it need to be two loops"}, {"owner": {"reputation": 57966, "user_id": 2805305, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/442d249754d1725d9510cf06fa46b964?s=128&d=identicon&r=PG&f=1", "display_name": "bolov", "link": "https://stackoverflow.com/users/2805305/bolov"}, "edited": false, "score": 0, "creation_date": 1541001875, "post_id": 53087474, "comment_id": 93072202, "body": "@HelloWorld help is always appreciated. I am also trying to help you any anyone looking over your solution. Your code has several problems. You use 3 magic numbers. This is a serious problem. This alone will never pass a code review. Second you use C-style cast. Not as big of a problem but still, the fix is simple: use <code>static_cast</code>. Thirdly you use a non-portable formula."}, {"owner": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "edited": false, "score": 0, "creation_date": 1541002472, "post_id": 53087474, "comment_id": 93072577, "body": "so you used 65 because A = 65 and as i new to c++ what is 32  i dint get that"}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "reply_to_user": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "edited": false, "score": 0, "creation_date": 1541002743, "post_id": 53087474, "comment_id": 93072749, "body": "@SalmanhassanOkZ that where the gap between the upper and lower case. For example, A&#39;s ASCII is 65, whereas a&#39;s ASCII is 97 (i.e. 65 + 32). If you go till &#39;Z&#39; and &#39;z&#39; the gap remains 32."}], "tags": [], "owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "is_accepted": false, "score": 0, "last_activity_date": 1541001352, "creation_date": 1541001352, "answer_id": 53087474, "question_id": 53086829, "link": "https://stackoverflow.com/questions/53086829/print-abc-upercase-and-lowercase-c-using-for-loop/53087474#53087474", "title": "print abc upercase and lowercase c++ using for loop", "body": "<p>Its is actually a simple logic. You need to loops as follows:</p>\n\n<pre><code>#include&lt;iostream&gt;\n\nint main()\n{\n    for(int i = 0; i &lt; 26; i ++){\n        for(int j = 0; j &lt;= i; j++)\n            std::cout&lt;&lt;(char)(65 + j)&lt;&lt;(char)(65 + j + 32)&lt;&lt;\", \";\n        std::cout&lt;&lt;std::endl;\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7099637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hPrJ2.jpg?s=128&g=1", "display_name": "Wala Al Ramadhani", "link": "https://stackoverflow.com/users/7099637/wala-al-ramadhani"}, "is_accepted": true, "score": 1, "last_activity_date": 1541002946, "creation_date": 1541002946, "answer_id": 53087951, "question_id": 53086829, "link": "https://stackoverflow.com/questions/53086829/print-abc-upercase-and-lowercase-c-using-for-loop/53087951#53087951", "title": "print abc upercase and lowercase c++ using for loop", "body": "<p>Modifying on what you worked before I would suggest to have an outer loop which loops 26 times. And to use <code>tolower</code> which converts the uppercase to lowercase but since it returns an integer you should cast it to char.</p>\n\n<pre><code>char abc;\nint j;\nfor(int i = 0;i&lt;26;i++)\n{\n    j = 0;\n    for(abc = 'A'; abc &lt;= 'Z' &amp;&amp; j&lt;=i; abc++){\n        cout&lt;&lt; abc &lt;&lt;static_cast&lt;char&gt;(std::tolower(abc));\n        if(j+1 &lt;= i)\n            cout&lt;&lt;\", \";\n        j++;\n    }\n    cout&lt;&lt;endl&lt;&lt;endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 6479352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bu23f1OMAwY/AAAAAAAAAAI/AAAAAAAAALA/_74QtIhZ5Vk/photo.jpg?sz=128", "display_name": "Salman hassan", "link": "https://stackoverflow.com/users/6479352/salman-hassan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 0, "accepted_answer_id": 53087951, "answer_count": 3, "score": -2, "last_activity_date": 1541002946, "creation_date": 1540999374, "last_edit_date": 1541000474, "question_id": 53086829, "link": "https://stackoverflow.com/questions/53086829/print-abc-upercase-and-lowercase-c-using-for-loop", "title": "print abc upercase and lowercase c++ using for loop", "body": "<p>I am new to c++ and I want to print <code>\"abc\"</code> lower and upercase both like this using console app.</p>\n\n<pre><code>Aa \n\nAa, Bc \n\nAa, Bc, Cc \n\nAa, Bc, Cc, Dd  \n</code></pre>\n\n<p>and so on to Zz</p>\n\n<p>My simple code is:</p>\n\n<pre><code>{ \nchar abc;\nfor(abc = 'A'; abc &lt;= 'Z'; abc++){\n    cout&lt;&lt; abc &lt;&lt;\",\";\n}\nreturn 0;\n}  \n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "string", "winapi", "visual-studio-2017", "byte"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540999435, "post_id": 53086787, "comment_id": 93070542, "body": "So you want the function to be able to handle <i>hexa-decimal</i> numbers?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540999603, "post_id": 53086787, "comment_id": 93070666, "body": "By the way, a good start might be to learn about <a href=\"https://en.cppreference.com/w/cpp/string/byte#Character_classification\" rel=\"nofollow noreferrer\">the standard character classification functions</a>. More specifically <code>isxdigit</code> and <code>isdigit</code> (as well as e.g. <code>toupper</code>)."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1540999769, "post_id": 53086787, "comment_id": 93070782, "body": "For me the question is unclear. Please <a href=\"https://stackoverflow.com/posts/53086787/edit\">edit</a> your question and show us some examples of calls to <code>StrToByte2</code> with the expected result in the <code>dest</code> buffer."}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "edited": false, "score": 0, "creation_date": 1540999825, "post_id": 53086787, "comment_id": 93070821, "body": "Till now lets handle hexa decimal only , A111,B222,C333,D444,E555,F666"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540999870, "post_id": 53086787, "comment_id": 93070856, "body": "Oh and if you handle the difference between narrow and wide characters properly, there&#39;s no need for the temporary <code>count</code> and <code>string</code> variables."}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "reply_to_user": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541000682, "post_id": 53086787, "comment_id": 93071435, "body": "@Jabberwocky tried to add how i am using this function."}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541000759, "post_id": 53086787, "comment_id": 93071481, "body": "@Someprogrammerdude actually above code is already running on client side, now the entry done is hexadecimal and software is giving issues at client side,if you can help me with exact function that can work . Bcox current situation is no time to study :("}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1541001270, "post_id": 53086787, "comment_id": 93071826, "body": "Please show some examples of input and expected output for the <code>StrToByte2</code> function."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1541001891, "post_id": 53086787, "comment_id": 93072211, "body": "<i>&quot;If i call this function on &quot;1234&quot; ( any digits) , dest output shows 1234&quot;</i> That&#39;s not true, your function doesn&#39;t do that. First of all, tell us if you are using Unicode or not (check project settings -&gt; character set). Describe the problem and the solution you are thinking of. Put a <code>printf</code> function to display the output. My guess is that you are trying to <a href=\"https://stackoverflow.com/q/46870603/4603670\">convert hexadecimal string to bytes</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1541002843, "post_id": 53086787, "comment_id": 93072808, "body": "Whatever you do, that <code>union</code> is the precursor to undefined behavior. Have a look at <a href=\"https://stackoverflow.com/q/11373203/1889329\">this Q&amp;A</a>."}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1541003152, "post_id": 53086787, "comment_id": 93072987, "body": "@BarmakShemirani project us UNICODE character set"}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "edited": false, "score": 0, "creation_date": 1541003302, "post_id": 53086787, "comment_id": 93073084, "body": "Guys this function is not wrriten by me , but i just want this to support for hexadecimal as well"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1541003554, "post_id": 53086787, "comment_id": 93073235, "body": "There&#39;s a big red flag with the union you use: It seems to attempt <a href=\"https://en.wikipedia.org/wiki/Type_punning\" rel=\"nofollow noreferrer\"><i>type punning</i></a> between the array and the <code>WORD</code> variable. In C++ that&#39;s not allowed and leads to <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\"><i>undefined behavior</i></a>. In C++ you <i>must</i> read the union member that was last written to."}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541003698, "post_id": 53086787, "comment_id": 93073326, "body": "@Someprogrammerdude that we can look into later also, but how can i get this function support for what we want to achieve ??"}, {"owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "reply_to_user": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1541004534, "post_id": 53086787, "comment_id": 93073727, "body": "@BarmakShemirani yes out put for 1234 was 12814 , i mention 1234 bcox in UI i could actually see 1234 , but when enter A123 , always 0000"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1541011548, "post_id": 53086787, "comment_id": 93077160, "body": "We don&#39;t know, <i>what</i> you are trying to achieve. Your problem statement is dubious at best. Be a developer and produce a succinct problem statement. You&#39;ll find that the solution is beyond trivial once you have done that."}], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1541009104, "post_id": 53089163, "comment_id": 93076067, "body": "I suggest to replace <code>CString</code> with <code>CStringW</code> to match the type of string literals."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1541012906, "post_id": 53089163, "comment_id": 93077713, "body": "@pushE are you trying to fit 4 bytes in to 2 bytes?"}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 1, "last_activity_date": 1541012795, "last_edit_date": 1541012795, "creation_date": 1541007462, "answer_id": 53089163, "question_id": 53086787, "link": "https://stackoverflow.com/questions/53086787/convert-lpctstr-hexadecimal-to-byte-in-vs-c/53089163#53089163", "title": "Convert LPCTSTR HEXADECIMAL to BYTE in VS C++", "body": "<blockquote>\n<pre><code>PTR ptr(new st);\n</code></pre>\n</blockquote>\n\n<p>This is a memory leak in C++, because <code>new st</code> allocates memory and there is no way to release it. </p>\n\n<blockquote>\n<pre><code>UINT count = _ttoi(str);\n...\nsprintf_s(string, 10, \"%04d\", count);\n</code></pre>\n</blockquote>\n\n<p>This is converting string to integer, then converts integer back to string. It doesn't seem to have a real purpose.</p>\n\n<p>For example, <code>\"1234\"</code> is converted to <code>1234</code>, and back to <code>\"1234\"</code>. But <code>\"A123\"</code> is not a valid number so it is converted to <code>0</code>, then converted to <code>\"0000\"</code>. So this method fails. You can just work with the original string.</p>\n\n<p>It seems this function tries to fit 2 integers in to 1 byte. This can be done as long as each value is less than <code>16</code> or <code>0xF</code> (I don't know what purpose this might have) It can be fixed as follows:</p>\n\n<pre><code>void StrToByte2(const wchar_t* str, BYTE *dest)\n{\n    int len = wcslen(str);\n    if(len != 4)\n        return; //handle error\n    char buf[4] = { 0 };\n    for(int i = 0; i &lt; 4; ++i)\n        if(str[i] &gt;= L'0' &amp;&amp; str[i] &lt;= L'9')\n            buf[i] = (BYTE)(str[i] - L'0');\n    dest[0] = (buf[0] &lt;&lt; 4) + buf[1];\n    dest[1] = (buf[2] &lt;&lt; 4) + buf[3];\n}\n\nCStringW Byte2_To_Str(BYTE *dest)\n{\n    CStringW str;\n    str.AppendFormat(L\"%X\", 0xF &amp; (dest[0] &gt;&gt; 4));\n    str.AppendFormat(L\"%X\", 0xF &amp; (dest[0]));\n    str.AppendFormat(L\"%X\", 0xF &amp; (dest[1] &gt;&gt; 4));\n    str.AppendFormat(L\"%X\", 0xF &amp; (dest[1]));\n    return str;\n}\n\nint main()\n{\n    BYTE dest[2] = { 0 };\n    StrToByte2(L\"1234\", dest);\n    OutputDebugStringW(Byte2_To_Str(dest));\n    OutputDebugStringW(L\"\\n\");\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>If the string is hexadecimal, you can use <code>sscanf</code> to convert each pair of character to bytes.</p>\n\n<p>Basically, <code>\"1234\"</code> changes to <code>12</code> <code>34</code><br>\n<code>\"A123\"</code> changes to <code>A1</code> <code>23</code></p>\n\n<pre><code>bool hexstring_to_bytes(const wchar_t* str, BYTE *dest, int dest_size = 2)\n{\n    int len = wcslen(str);\n\n    if((len / 2) &gt; dest_size)\n    {\n        //error\n        return false;\n    }\n\n    for(int i = 0; i &lt; len / 2; i++)\n    {\n        int v;\n        if(swscanf_s(str + i * 2, L\"%2x\", &amp;v) != 1) \n            break;\n        dest[i] = (unsigned char)v;\n    }\n\n    return true;\n}\n\nCStringW bytes_to_hexstring(const BYTE* bytes, int byte_size = 2)\n{\n    CString str;\n    for(int i = 0; i &lt; byte_size; i++)\n        str.AppendFormat(L\"%02X \", bytes[i] &amp; 0xFF);\n    return str;\n}\n\nint main()\n{\n    CStringW str;\n    CStringW new_string;\n\n    BYTE dest[2] = { 0 };\n\n    str = L\"1234\";\n    hexstring_to_bytes(str, dest);\n    new_string = bytes_to_hexstring(dest);\n    OutputDebugString(new_string);\n    OutputDebugString(L\"\\n\");\n\n    str = L\"A123\";\n    hexstring_to_bytes(str, dest);\n    new_string = bytes_to_hexstring(dest);\n    OutputDebugStringW(new_string);\n    OutputDebugStringW(L\"\\n\");\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 1314987, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/dfa1da20e1b90c7852e6b6fa22361354?s=128&d=identicon&r=PG", "display_name": "pushE", "link": "https://stackoverflow.com/users/1314987/pushe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541012795, "creation_date": 1540999228, "last_edit_date": 1541005446, "question_id": 53086787, "link": "https://stackoverflow.com/questions/53086787/convert-lpctstr-hexadecimal-to-byte-in-vs-c", "title": "Convert LPCTSTR HEXADECIMAL to BYTE in VS C++", "body": "<p>I have below function that supports for conversion of LPCTSTR to BYTE , but the input str only support digits as of now.</p>\n\n<pre><code>void StrToByte2(LPCTSTR str, BYTE *dest)\n{\n    UINT count = _ttoi(str);\n    BYTE buf[4] = { 0 };\n    char string[10] = { 0 };\n    sprintf_s(string, 10, \"%04d\", count);\n    for (int i = 0; i &lt; 4; ++i)\n    {\n        if ((string[i] &gt;= '0') &amp;&amp; (string[i] &lt;= '9'))\n            buf[i] = string[i] - '0';\n    }\n    dest[0] = (BYTE)(buf[0] &lt;&lt; 4) | buf[1];\n    dest[1] = (BYTE)(buf[2] &lt;&lt; 4) | buf[3];\n}\n</code></pre>\n\n<p>If i call this function on \"1234\" ( any digits) , dest output some 12814, </p>\n\n<pre><code>struct st               \n{\n    byte    btID[2];\n    int     nID;\n};\n\nPTR ptr(new st);\nStrToByte2(strCode, ptr-&gt;btID);\n</code></pre>\n\n<p>but when i call this function on any hexadecimal ex A123 , it outputs 0000 always.</p>\n\n<p>Below function is used to convert back the dest code to str</p>\n\n<pre><code>CString Byte2ToStr(const byte* pbuf)\n{\n    CString str;\n    str.Format(_T(\"%02X%02X\"), pbuf[0], pbuf[1]);\n    return str;\n}\n</code></pre>\n\n<p>How can i get A123 to converted to bytes and than back to str to display A123??\nPlease help!!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540999720, "post_id": 53086772, "comment_id": 93070747, "body": "I do not think it is possible. An overload can only be done based on type, and NULL is just not a specific type. SFINAE won&#39;t help here either."}, {"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540999942, "post_id": 53086772, "comment_id": 93070904, "body": "but the type of NULL is known (decltype(NULL)). I wonder if I can resolve based on a constexpr value of that type"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1541000013, "post_id": 53086772, "comment_id": 93070967, "body": "@IlBeldus No its not. Its not <code>#define NULL (int)0</code>. It is just <code>#define NULL 0</code>. <code>0</code> has no type, it depends in which context it is used. And when it is substituded by the pre-processor in this case there is no way to tell what type it is because 0 can implicitly convert to both."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1541000542, "post_id": 53086772, "comment_id": 93071334, "body": "@FantasticMrFox strictly speaking, this is not correct. First of, <code>0</code>, of course, has a type, as any other literal. It&#39;s type is <code>int</code>. Second, NULL can be anything, see <a href=\"https://en.cppreference.com/w/c/types/NULL\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/types/NULL</a>. It can be <code>void*(0)</code>, or plain 0, or something else. In CLang, for example, it is built-in <code>__null</code>, so likely to be the same as <code>nullptr</code>. All this ambiguity makes overloading on nullptr impossible.  For example, on implementations which use 0L as <code>NULL</code>, you can catch it in <code>foo(long int)</code> - but of course, it will accept any long int."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1541005700, "post_id": 53086772, "comment_id": 93074305, "body": "Re: &quot;for the life of me I can&#39;t think of one&quot; -- that&#39;s why <code>nullptr</code> was introduced. &lt;g&gt;"}, {"owner": {"reputation": 43188, "user_id": 273767, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/363e49843e26763a496164190940ece4?s=128&d=identicon&r=PG", "display_name": "Cubbi", "link": "https://stackoverflow.com/users/273767/cubbi"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1541599941, "post_id": 53086772, "comment_id": 93271062, "body": "@SergeyA you linked C NULL. The C++ NULL is defined differently"}], "answers": [{"comments": [{"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 1, "creation_date": 1540999525, "post_id": 53086847, "comment_id": 93070611, "body": "Yes but calling Foo(NULL) is ambiguous as it can bind to both int* and nullptr. i want to solve the ambiguity"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 0, "creation_date": 1541000096, "post_id": 53086847, "comment_id": 93071010, "body": "@IlBeldus - Disambiguation is also possible. Though now it&#39;s less pretty."}, {"owner": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 0, "creation_date": 1541000310, "post_id": 53086847, "comment_id": 93071161, "body": "&quot;less pretty&quot;? Call it for what it is. That&#39;s ugly :D."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 4783, "user_id": 3854787, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WRLaI.jpg?s=128&g=1", "display_name": "C&#225;ssio Renan", "link": "https://stackoverflow.com/users/3854787/c%c3%a1ssio-renan"}, "edited": false, "score": 1, "creation_date": 1541000526, "post_id": 53086847, "comment_id": 93071318, "body": "@C&#225;ssioRenan - Have you ever seen a C++ library not chalk full of ugliness? So long as user code can be oblivious to it and simply write <code>foo(&#47;*whatever*&#47;)</code> with expected semantics, we can be happy :)"}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1541000072, "last_edit_date": 1541000072, "creation_date": 1540999416, "answer_id": 53086847, "question_id": 53086772, "link": "https://stackoverflow.com/questions/53086772/argument-resolution-specific-to-null/53086847#53086847", "title": "Argument resolution specific to NULL", "body": "<p>The same <code>Foo(std::nullptr_t)</code> overload will work with <code>NULL</code> too. There's an implicit conversion from <em>any</em> null pointer constant to <code>std::nullptr_t</code>. That includes <code>0</code>, <code>0UL</code>, whatever <code>NULL</code> is defined as, and of course <code>nullptr</code> itself.</p>\n\n<p>If your only wish to disambiguate the <code>int*</code> from <code>nullptr_t</code>, then we can just tinker with the rules of overload resolution. For instance, make <code>Foo(int*)</code> a template:</p>\n\n<pre><code>template&lt;int = 0&gt;\nvoid Foo(int*); \nvoid Foo(std::nullptr_t); \n</code></pre>\n\n<p>A non-template is always a better match to to a template when overloading.</p>\n"}, {"comments": [{"owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 0, "creation_date": 1540999734, "post_id": 53086938, "comment_id": 93070758, "body": "Sorry, bigger picture: I have Foo(int*); and Foo(const int*); that do 2 different things. Now I want to solve my compiler shouting at me if I call Foo(nullptr) or Foo(NULL)"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "edited": false, "score": 0, "creation_date": 1540999952, "post_id": 53086938, "comment_id": 93070915, "body": "@IlBeldus Then why didn&#39;t you just ask that question?"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 0, "last_activity_date": 1540999795, "last_edit_date": 1540999795, "creation_date": 1540999688, "answer_id": 53086938, "question_id": 53086772, "link": "https://stackoverflow.com/questions/53086772/argument-resolution-specific-to-null/53086938#53086938", "title": "Argument resolution specific to NULL", "body": "<blockquote>\n  <p>C++11 introduced std::nullptr_t to allow explicit overloading of methods where the nullptr constant is passed.</p>\n</blockquote>\n\n<p>Not exactly. It was introduced so you can have a type-safe <em>null</em>. This doesn't work the way you expect:</p>\n\n<pre><code>foo (int a);\nfoo (int *a);\n...\nfoo (NULL); // Calls the overload with `int` not `int*`!\n</code></pre>\n\n<p>What is the point of this function:</p>\n\n<pre><code>Foo(std::nullptr_t a);\n</code></pre>\n\n<p>It couldn't possibly do anything useful that <code>Foo()</code> couldn't do. In your example, passing <code>NULL</code>, shouldn't be the concern. You should be considering why you are not using <code>#define NULL nullptr</code>. Or just using <code>nullptr</code> directly.</p>\n\n<p>To answer the overall question: <strong>Argument resolution specific to NULL</strong></p>\n\n<p>I don't think this is possible. NULL is not a specific type, you can't use type detection methods to choose the correct overload. </p>\n"}], "owner": {"reputation": 971, "user_id": 4124855, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zkqyU.jpg?s=128&g=1", "display_name": "IlBeldus", "link": "https://stackoverflow.com/users/4124855/ilbeldus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53086847, "answer_count": 2, "score": 0, "last_activity_date": 1541000072, "creation_date": 1540999168, "last_edit_date": 1540999633, "question_id": 53086772, "link": "https://stackoverflow.com/questions/53086772/argument-resolution-specific-to-null", "title": "Argument resolution specific to NULL", "body": "<p>C++11 introduced <code>std::nullptr_t</code> to allow explicit overloading of methods where the <code>nullptr</code> constant is passed. What I'd like is the same thing but with the old <code>NULL</code> (aka 0).\nI feel like there should be a solution maybe leveraging SFINAE but for the life of me I can't think of one.</p>\n\n<p>To be even more clear I would like to have 3 methods:</p>\n\n<pre><code>Foo(int*); //binds to an int pointer\nFoo(std::nullptr_t); //binds to a nullptr constant\nFoo(something); //should bind to NULL\n</code></pre>\n\n<p>What should <code>something</code> be so that a call to <code>Foo(NULL)</code> would not be ambiguous?</p>\n\n<p>I wouldn't want the method overload for NULL to bind to arbitrary integers</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1540999279, "post_id": 53086751, "comment_id": 93070432, "body": "Makes very little difference as long as your class makes the ownership clear"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540999796, "post_id": 53086751, "comment_id": 93070801, "body": "No difference whatsoever"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1540999316, "creation_date": 1540999316, "answer_id": 53086807, "question_id": 53086751, "link": "https://stackoverflow.com/questions/53086751/returning-owned-pointers-by-reference/53086807#53086807", "title": "Returning owned pointers by reference", "body": "<blockquote>\n  <p>B has a pointer to an instance of A, and is responsible for managing the lifetime of that instance.</p>\n</blockquote>\n\n<p>Is <code>B</code> an implementation of a unique pointer? There is an implementation of unique pointer provided by the standard: <code>std::unique_ptr</code>. I suggest using it instead of <code>B</code>.</p>\n\n<blockquote>\n  <p>Would it be more appropriate for the method B::get_a to return a constant reference:</p>\n</blockquote>\n\n<p>Depends on whether it <code>m_a == nullptr</code> is valid state for <code>B</code>. If it is, then you would need to throw in that case if you wanted to return a reference.</p>\n"}, {"tags": [], "owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "is_accepted": false, "score": 0, "last_activity_date": 1540999376, "creation_date": 1540999376, "answer_id": 53086830, "question_id": 53086751, "link": "https://stackoverflow.com/questions/53086751/returning-owned-pointers-by-reference/53086830#53086830", "title": "Returning owned pointers by reference", "body": "<p>Semantically, the difference between a pointer and a reference is that a pointer can be NULL. It basically comes down to whether the A* in your B class can ever be NULL. If yes, leave the code as is and return a pointer. If not, change the B ctor to take in the arguments for an A object, create the A object on the heap inside the B ctor and return a reference.</p>\n"}], "owner": {"reputation": 33, "user_id": 3971757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5700f163e62cab49c34902f4fa7b502?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua Scott", "link": "https://stackoverflow.com/users/3971757/joshua-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540999376, "creation_date": 1540999101, "question_id": 53086751, "link": "https://stackoverflow.com/questions/53086751/returning-owned-pointers-by-reference", "title": "Returning owned pointers by reference", "body": "<p>Suppose you are defining two classes, A and B, and B has a pointer to an instance of A, and is responsible for managing the lifetime of that instance. Like so:</p>\n\n<pre><code>class A;\n\nclass B\n{\npublic:\n    B(A *a);\n    ~B() { delete m_a; }\nprivate:\n    A *m_a;\n};\n</code></pre>\n\n<p>Would it be more appropriate for the method <code>B::get_a</code> to return a constant reference:</p>\n\n<pre><code>const A &amp;get_a() const\n{\n    return *m_a;\n}\n</code></pre>\n\n<p>or just return the pointer:</p>\n\n<pre><code>const A *get_a() const\n{\n    return m_a;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 335, "user_id": 9529376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530666963697475/picture?type=large", "display_name": "Lyes", "link": "https://stackoverflow.com/users/9529376/lyes"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540999173, "post_id": 53086680, "comment_id": 93070358, "body": "i just edited the post the number of producer threads will be given as main argument"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1540999200, "post_id": 53086680, "comment_id": 93070375, "body": "<code>std::thread prods[argv[1]];</code> is not standard C++ (VLAs are a compiler extension) and you cannot use a <code>char*</code> as a size either. Use a <code>std::vector&lt;std::thread&gt;</code>"}, {"owner": {"reputation": 335, "user_id": 9529376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530666963697475/picture?type=large", "display_name": "Lyes", "link": "https://stackoverflow.com/users/9529376/lyes"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1540999753, "post_id": 53086680, "comment_id": 93070769, "body": "same error : no match call        to:  <code>\u2018(__gnu_cxx::__alloc_traits&lt;std::allocator&lt;std::thread&gt; &gt;::value_type {aka std::thread}) (void (&amp;)())\u2019 </code>"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 0, "last_activity_date": 1540999599, "creation_date": 1540999599, "answer_id": 53086906, "question_id": 53086680, "link": "https://stackoverflow.com/questions/53086680/error-no-match-for-call-when-calling-a-function-by-a-thread/53086906#53086906", "title": "error: no match for call when calling a function by a thread", "body": "<p>You have a few problems.  The first is that</p>\n\n<pre><code>std::thread prods[argv[1]];\n</code></pre>\n\n<p>is non standard.  It is a variable length array (VLA) and is not part of the C++ standard.  If you want an array but won't know its size until run-time then you should use a <code>std::vector</code>.</p>\n\n<p>Your second issue is that</p>\n\n<pre><code>prods[i](producer,i);\n</code></pre>\n\n<p>is not how you would assign a thread to each element of the array.  What you arr syntactically tryin to do is call the fucntion call operator (<code>operator ()</code>) on each thread in the array.  What you need is</p>\n\n<pre><code>prods[i] = std::thread(producer,i);\n</code></pre>\n\n<p>which will actually assign a thread to each array element.</p>\n\n<p>The last issue is that</p>\n\n<pre><code>argv[1]\n</code></pre>\n\n<p>cannot be used as the size of the array/container as it is a <code>char*</code>.  If it holds the number of threads to create you need to convert it to a number with something like <code>std::stoi</code>.</p>\n\n<p>That said, since you should be using a <code>std::vecotr</code>, you actual code should become something like</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    std::vector&lt;std::thread&gt; prods;\n    prods.reserve(size_you_want)\n    for (int i = 0; i &lt; size_you_want; i++){\n        prods.push_back(std::thread(producer,i));\n    } \n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 2, "last_activity_date": 1541004294, "last_edit_date": 1541004294, "creation_date": 1540999643, "answer_id": 53086925, "question_id": 53086680, "link": "https://stackoverflow.com/questions/53086680/error-no-match-for-call-when-calling-a-function-by-a-thread/53086925#53086925", "title": "error: no match for call when calling a function by a thread", "body": "<p>Threads aren't callable, you need to explicitly call the thread constructor to create a thread:</p>\n\n<pre><code>int main(int argc, char* argv[])\n{\n    const size_t n = 4;\n    std::vector&lt; std::thread &gt; prods( n );\n    for (int i = 0; i &lt;= n;i++)\n    {\n        prods[i] = std::thread(producer,i);\n    } \n    return 0;\n}\n</code></pre>\n\n<p>I've also replaced the non-standard variable length array with a <code>std::vector</code> and hard coded the thread count as your handling of command line arguments was also incorrect.</p>\n"}], "owner": {"reputation": 335, "user_id": 9529376, "user_type": "registered", "profile_image": "https://graph.facebook.com/1530666963697475/picture?type=large", "display_name": "Lyes", "link": "https://stackoverflow.com/users/9529376/lyes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 53086925, "answer_count": 2, "score": 0, "last_activity_date": 1541004294, "creation_date": 1540998881, "last_edit_date": 1592644375, "question_id": 53086680, "link": "https://stackoverflow.com/questions/53086680/error-no-match-for-call-when-calling-a-function-by-a-thread", "title": "error: no match for call when calling a function by a thread", "body": "<p>i'm trying to make the producer/consumer design in c++ but actually i'm stuck.\ni'm getting this error</p>\n<blockquote>\n<p>error: no match for call to</p>\n<p>\u2018(std::thread) (void (&amp;)())\u2019  prods[i]&gt;(producer,i);</p>\n</blockquote>\n<p>when i call the producer function from a loop\nhere is my main:</p>\n<pre><code> int main(int argc, char* argv[])\n{\n \n std::thread prods[argv[1]];\n  for (int i = 0; i &lt;= argc;i++){\n    prods[i](producer,i);\n    } \n\n  return 0;\n }\n</code></pre>\n<p>and here my producer function</p>\n<pre><code>  void producer(int i){\n  std::unique_lock&lt;std::mutex&gt; lock(m);\n  std::cout &lt;&lt; &quot;(1) produit 20&quot;;\n  jobs.push(20);\n  notified = true;\n  cond_var.notify_one();\n  done = true;\n  \n  }\n</code></pre>\n<p>has someone an idea how to solve that ? thanks in advance.</p>\n"}, {"tags": ["c++", "linker", "g++", "libtool"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540999474, "post_id": 53086636, "comment_id": 93070566, "body": "I am not following your line of thought. If you <code>...will not use the symbols from the static library...</code> why do you need it linked in?"}, {"owner": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540999685, "post_id": 53086636, "comment_id": 93070722, "body": "@SergeyA The static library is only used in an interface defined in the object files that are linked together with the static lib into the shared lib. I only access the static lib via this interface. And the question is if in this case I can avoid <code>-fPIC</code> for the static lib."}], "answers": [{"comments": [{"owner": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "edited": false, "score": 0, "creation_date": 1540999549, "post_id": 53086721, "comment_id": 93070635, "body": "Of course I can do with <code>fPIC</code> but I did not want to slow down my high-performance code from the static library. I thought it is OK to avoid <code>-fPIC</code> if I do not need the position independent code from outside (when using the shared library), only via an interface that is defined in the object files which are compiled with <code>-fPIC</code>. So this is not true and I still need it even for the static library whose functions will not be called from the user of the shared lib directly?"}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "edited": false, "score": 3, "creation_date": 1540999637, "post_id": 53086721, "comment_id": 93070684, "body": "Are you sure that <code>-fPIC</code> slows down your code on <code>x86-64</code> ? Did you benchmark? What is the measured slowdown? The x86-64 ISA was designed to facilitate PIC"}, {"owner": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "edited": false, "score": 0, "creation_date": 1540999810, "post_id": 53086721, "comment_id": 93070811, "body": "No, but I read about <code>-fPIC</code> that some optimizations are disabled. Yes, I know that one should not try to optimize without benchmarking..."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "reply_to_user": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "edited": false, "score": 0, "creation_date": 1540999852, "post_id": 53086721, "comment_id": 93070843, "body": "Where did you read that? For what ISA? I tend to believe that your source is wrong."}, {"owner": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "edited": false, "score": 0, "creation_date": 1541000000, "post_id": 53086721, "comment_id": 93070953, "body": "The second answer of <a href=\"https://stackoverflow.com/questions/15861759/how-much-overhead-can-the-fpic-flag-add\" title=\"how much overhead can the fpic flag add\">stackoverflow.com/questions/15861759/&hellip;</a>"}], "tags": [], "owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "is_accepted": true, "score": 8, "last_activity_date": 1541000488, "last_edit_date": 1541000488, "creation_date": 1540999013, "answer_id": 53086721, "question_id": 53086636, "link": "https://stackoverflow.com/questions/53086636/linking-a-static-library-into-a-shared-library-without-fpic/53086721#53086721", "title": "Linking a static library into a shared library without -fPIC", "body": "<p><strong>You cannot</strong> (or at least you should not) <strong>link a static library into a shared library</strong>.</p>\n\n<p>Even if you happen to apparently succeed in linking a non-PIC static library <code>libX.a</code> into a shared library <code>libY.so</code>, the resulting thing won't have position-independent code (so would have a lot of \"useless\" or \"annoying\" relocations).</p>\n\n<p>A shared library needs to contain only position-independent code (in practice); but a static library does not contain PIC.</p>\n\n<blockquote>\n  <p>I do not want to compile static.cpp with -fPIC</p>\n</blockquote>\n\n<p>But you really should.</p>\n\n<p>Read Drepper's <a href=\"https://www.akkadia.org/drepper/dsohowto.pdf\" rel=\"noreferrer\"><em>How to Write Shared Libraries</em></a> for details.</p>\n\n<p>BTW, some Linux distributions (e.g. Debian) provide a <code>libc6-pic</code> package giving files such as <code>/usr/lib/x86_64-linux-gnu/libc_pic.a</code> which are a static library of position-independent code. This might be used to extend your system's <code>libc.so.6</code> with e.g. your own function (or your own <code>malloc</code>, etc...).</p>\n\n<p>In practice, you'll better recompile your static library code with <code>-fPIC</code>; BTW the x86-64 ISA was designed to facilitate PIC.</p>\n\n<p>At last, if you care about optimizations, there are <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html\" rel=\"noreferrer\">many</a> of them. Did you consider compiling and <em>linking</em> with <code>gcc -O3 -fPIC -flto</code> ? In some cases, you might consider <code>-ffast-math</code> (which enables optimizations against the C standard), or replacing <code>-O3</code> with <code>-Ofast</code>.</p>\n\n<p>And you surely should use a recent GCC or Clang compiler (or a recent proprietary <code>icc</code>). <a href=\"https://stackoverflow.com/q/15861759/841108\">This old</a> question (mentioned in your comments) is about 4.7. Current GCC in fall 2018 is <a href=\"https://gcc.gnu.org/gcc-8/\" rel=\"noreferrer\">GCC 8</a>, and <a href=\"https://gcc.gnu.org/gcc-9/changes.html\" rel=\"noreferrer\">GCC 9</a> is worked upon (so should appear in spring 2019). Current Clang is <a href=\"http://releases.llvm.org/download.html\" rel=\"noreferrer\">Clang 7</a>. \nCompilers are continuously making progress on optimizations. </p>\n\n<p>You might want to download the <em>source</em> tarball of the latest release of GCC or of Clang and build that on your computer. This is a good way to have a recent version of these compilers, since distribution makers often prefer an older variant of them (which is compatible even with non-standard compliant code).</p>\n"}], "owner": {"reputation": 794, "user_id": 6212870, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b276a1b6c3833803e0b40994e46e617c?s=128&d=identicon&r=PG", "display_name": "phinz", "link": "https://stackoverflow.com/users/6212870/phinz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4592, "favorite_count": 2, "accepted_answer_id": 53086721, "answer_count": 1, "score": 2, "last_activity_date": 1541000488, "creation_date": 1540998761, "question_id": 53086636, "link": "https://stackoverflow.com/questions/53086636/linking-a-static-library-into-a-shared-library-without-fpic", "title": "Linking a static library into a shared library without -fPIC", "body": "<p>I want to combine object files and a static library into a shared library but the static library shall not be exposed, it is only referred in the object files that go into the shared library. I think that in this case, I do not need to compile the static library with <code>-fPIC</code> but I do not know how to tell the linker that the fact that I will not use the symbols from the static library. As an illustration of my problem, take the following files:</p>\n\n<p>File <code>foo.cpp</code>:</p>\n\n<pre><code>#include \"static.h\"\nusing namespace std;\n\nstring version_info()\n{\n    return static_version_info();\n}\n</code></pre>\n\n<p>File <code>static.cpp</code>:</p>\n\n<pre><code>#include\"static.h\"\n#include &lt;vector&gt;\nusing namespace std;\nstring static_version_info()\n{\n    std::vector&lt;int&gt; ivec;\n    return to_string(ivec.size());\n}\n</code></pre>\n\n<p>File <code>static.h</code>:</p>\n\n<pre><code>#ifndef STATIC_H\n#define STATIC_H\n#include&lt;iostream&gt;\nusing namespace std;\nstd::string static_version_info();\n#endif \n</code></pre>\n\n<p>Then do</p>\n\n<pre><code>$ g++ -c foo.cpp -o foo.o -fPIC\n$ g++ -c static.cpp -o static.o\n$ gcc-ar rcs static.a static.o\n$ g++ -shared foo.o static.a\n/usr/bin/ld: static.a(static.o): relocation R_X86_64_PC32 against symbol `_ZNSt6vectorIiSaIiEEC1Ev' can not be used when making a shared object; recompile with -fPIC\n/usr/bin/ld: final link failed: Bad value\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><strong>Question:</strong>\nHow can I adjust the last command such I do not get an error? Is this possible?</p>\n\n<p><em>Note that I do not want to compile</em> <code>static.cpp</code> <em>with</em> <code>-fPIC</code> <em>and I do not need the symbols (here</em> <code>return_static_version_info()</code><em>) in the shared library.</em> </p>\n"}, {"tags": ["c++", "macos", "metal"], "comments": [{"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1541017340, "post_id": 53086635, "comment_id": 93079713, "body": "Uh, what&#39;s with the bizarre <code>reinterpret_cast</code>s? Are you running with validation enabled? Also, is there a reason you&#39;re waiting for the command buffer to complete after dispatching each compute shader?"}, {"owner": {"reputation": 13, "user_id": 7585723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b218e4b9a9e5ee6b4989de93501118?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Huczek", "link": "https://stackoverflow.com/users/7585723/tomasz-huczek"}, "reply_to_user": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1541082603, "post_id": 53086635, "comment_id": 93101989, "body": "I tried without the call to &quot;waitUntilCompleted&quot; but nothing changed. First kernel takes 1-4ms and the second 40-60ms..."}, {"owner": {"reputation": 5711, "user_id": 680519, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2cc8408cef2441e188c6ae1255098584?s=128&d=identicon&r=PG", "display_name": "harism", "link": "https://stackoverflow.com/users/680519/harism"}, "edited": false, "score": 0, "creation_date": 1541534703, "post_id": 53086635, "comment_id": 93248440, "body": "You don&#39;t need &#39;waitUntilCompleted&#39; and &#39;commit&#39; after first kernel, it&#39;s enough call commit and wait once only after encoding both kernels."}], "owner": {"reputation": 13, "user_id": 7585723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b218e4b9a9e5ee6b4989de93501118?s=128&d=identicon&r=PG&f=1", "display_name": "Tomasz Huczek", "link": "https://stackoverflow.com/users/7585723/tomasz-huczek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540998758, "creation_date": 1540998758, "question_id": 53086635, "link": "https://stackoverflow.com/questions/53086635/calling-second-metal-kernel-in-a-render-frame-is-slow", "title": "Calling second Metal kernel in a render frame is slow", "body": "<p>I have an animation which calls Metal kernels to calculate some data for me. </p>\n\n<p>If I call just one simple kernel the avg. time of the kernel call is 4ms. But when I call the second kernel after the first one (a very similar, simple kernel) the 2nd kernel call is 40ms or more... Is it something fundamentally wrong with my code?</p>\n\n<p>I set up the device, queue, library once before animation starts. I also create pipeline state for each kernel in front.</p>\n\n<pre><code>// globals created once in the beginning\nid&lt;MTLDevice&gt; device = MTLCreateSystemDefaultDevice();\nid&lt;MTLCommandQueue&gt; queue = [device newCommandQueueWithMaxCommandBufferCount:1];\n\nMTLCompileOptions *options = [MTLCompileOptions new];\noptions.fastMathEnabled = YES;\nid&lt;MTLLibrary&gt; metal_library = [device newLibraryWithSource:@(MetalKernel_code) options:options error:&amp;err]\n[options release];\n\nid&lt;MTLFunction&gt; kernel1 = [[metal_library newFunctionWithName:[NSString stringWithUTF8String:@\"kernel1\"]/* constantValues : constantValues */] autorelease]);\n\nid&lt;MTLComputePipelineState&gt; pipeline_state_1 = [device newComputePipelineStateWithFunction:kernel1 error:&amp;err];\n\nid&lt;MTLFunction&gt; kernel2 = [[metal_library newFunctionWithName:[NSString stringWithUTF8String:@\"kernel2\"]/* constantValues : constantValues */] autorelease];\nid&lt;MTLComputePipelineState&gt; pipeline_state_2 = [device newComputePipelineStateWithFunction:kernel2 error:&amp;err];\n</code></pre>\n\n<p>And now every frame I call the kernels like this:</p>\n\n<pre><code>// invoking first kernel:\n\nid&lt;MTLBuffer&gt; srcDeviceBuf = reinterpret_cast&lt;id&lt;MTLBuffer&gt; &gt;(const_cast&lt;float *&gt;(src));\nid&lt;MTLBuffer&gt; dstDeviceBuf = reinterpret_cast&lt;id&lt;MTLBuffer&gt; &gt;(dst);\n\nKernel1Params params{w, h};\nid&lt;MTLBuffer&gt; paramBuf = [[device newBufferWithBytes:&amp;params length:sizeof(Kernel1Params) options:MTLResourceStorageModeManaged]\n    autorelease];\n\nid&lt;MTLCommandBuffer&gt; commandBuffer = [queue commandBuffer];\ncommandBuffer.label = [NSString stringWithFormat:@\"kernel1\"];\n\nid&lt;MTLComputeCommandEncoder&gt; computeEncoder = [commandBuffer computeCommandEncoder];\n[computeEncoder setComputePipelineState:pipeline_state_1];\n\nauto exeWidth = [pipeline_state_1 threadExecutionWidth];\nMTLSize threadGroupCount = MTLSizeMake(exeWidth, 1, 1);\nMTLSize threadGroups = MTLSizeMake((w + exeWidth - 1) / exeWidth, static_cast&lt;uint32_t&gt;(h), 1);\n\n[computeEncoder setBuffer:srcDeviceBuf offset:0 atIndex:0];\n[computeEncoder setBuffer:dstDeviceBuf offset:0 atIndex:1];\n[computeEncoder setBuffer:paramBuf offset:0 atIndex:2];\n\n[computeEncoder dispatchThreadgroups:threadGroups threadsPerThreadgroup:threadGroupCount];\n[computeEncoder endEncoding];\n[commandBuffer commit];\n[commandBuffer waitUntilCompleted];\n\n\n// invoking second kernel\n\nKernel2Params params{w_small, h_small, w_big, h_big};\nid&lt;MTLBuffer&gt; srcDeviceBuf = reinterpret_cast&lt;id&lt;MTLBuffer&gt; &gt;(const_cast&lt;float *&gt;(src));\nid&lt;MTLBuffer&gt; dstDeviceBuf = reinterpret_cast&lt;id&lt;MTLBuffer&gt; &gt;(const_cast&lt;float *&gt;(dst));\nid&lt;MTLBuffer&gt; paramBuf = [[device newBufferWithBytes:&amp;params length:sizeof(Kernel2Params) options:MTLResourceStorageModeManaged] autorelease];\n\nid&lt;MTLCommandBuffer&gt; commandBuffer = [queue commandBuffer];\ncommandBuffer.label = [NSString stringWithFormat:@\"Kernel2\"];\n\nid&lt;MTLComputeCommandEncoder&gt; computeEncoder = [commandBuffer computeCommandEncoder];\n[computeEncoder setComputePipelineState:pipeline_state_2];\n\nauto exeWidth = [pipeline_state_2 threadExecutionWidth];\nMTLSize threadGroupCount = MTLSizeMake(exeWidth, 1, 1);\nMTLSize threadGroups = MTLSizeMake((w_small + exeWidth - 1) / exeWidth, static_cast&lt;uint32_t&gt;(h_small), 1);\n\n[computeEncoder setBuffer:srcDeviceBuf offset:0 atIndex:0];\n[computeEncoder setBuffer:dstDeviceBuf offset:0 atIndex:1];\n[computeEncoder setBuffer:paramBuf offset:0 atIndex:2];\n\n[computeEncoder dispatchThreadgroups:threadGroups threadsPerThreadgroup:threadGroupCount];\n[computeEncoder endEncoding];\n[commandBuffer commit];\n[commandBuffer waitUntilCompleted];\n\n// copy from GPU to CPU\nNSData *outdata = [NSData dataWithBytesNoCopy:[dstDeviceBuf contents] length:(size_t) (w_small * h_small * 3) freeWhenDone:false];\n\n[outdata getBytes:dst length:(size_t) (w_small * h_small * 3)];\n</code></pre>\n\n<p>Both kernels can be as simple as copying the input buffer to the output buffer (1) and simple image resize (2):</p>\n\n<pre><code>// kernel 1\nkernel void Kernel1( device float const* src, device float* dst, device Kernel1Params *inValues, uint2 inXY [[ thread_position_in_grid ]])\n{\n    if ((inXY.x &gt;= w) || (inXY.y &gt;= h)) {\n        return;\n    }\n    const int index = ((inXY.y * inValues-&gt;w) + inXY.x) * 4;\n\n    dst[index + 0] = src[index + 0];\n    dst[index + 1] = src[index + 1];\n    dst[index + 2] = src[index + 2];\n    dst[index + 3] = src[index + 3];\n}\n\n// kernel 2\nkernel void Kernel2( device float const* src, device unsigned char* dst, device Kernel2Params *inValues, uint2 inXY [[ thread_position_in_grid ]])\n{\n    if ((inXY.x &gt;= w_small) || (inXY.y &gt;= h_small)) {\n        return;\n    }\n    const int index = ((inXY.y * inValues-&gt;w_small) + inXY.x) * 3;\n    int index2;\n\n    if(inValues-&gt;w_small == inValues-&gt;w_big &amp;&amp; inValues-&gt;h_small == inValues-&gt;h_big) {\n        index2 = ((inXY.y * inValues-&gt;w_big) + inXY.x) * 4;\n    } else {\n        const unsigned int x_big = (int)((float)(inXY.x * inValues-&gt;w_big) / (float)inValues-&gt;w_small);\n        const unsigned int y_big = inValues-&gt;h_big - (int)((float)(inXY.y * inValues-&gt;h_big) / (float)inValues-&gt;h_small) - 1;\n\n        index2 = (y_big * inValues-&gt;w_big + x_big) * 4;\n    }\n\n    dst[index + 0] = (unsigned char)(src[index2 + 2] * 255.0f);\n    dst[index + 1] = (unsigned char)(src[index2 + 1] * 255.0f);\n    dst[index + 2] = (unsigned char)(src[index2 + 0] * 255.0f);\n}\n</code></pre>\n"}, {"tags": ["c++", "neural-network", "backpropagation", "gradient-descent", "multi-layer"], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "edited": false, "score": 0, "creation_date": 1541003061, "post_id": 53087476, "comment_id": 93072946, "body": "I can&#39;t believe I made such a naive mistake. Let me train again. Hopefully, it runs :)"}, {"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "reply_to_user": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "edited": false, "score": 0, "creation_date": 1541003169, "post_id": 53087476, "comment_id": 93072996, "body": "Hope it will give you a nice SGD :). Please remember to upvote and/or accept the answer if it worked."}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "edited": false, "score": 0, "creation_date": 1541005986, "post_id": 53087476, "comment_id": 93074457, "body": "Do you think that if I change sigmoid to softmax in last layer, it will also help with accuracy ? What other measures should I take"}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1541001358, "creation_date": 1541001358, "answer_id": 53087476, "question_id": 53086561, "link": "https://stackoverflow.com/questions/53086561/how-to-increase-accuracy-of-network-running-on-mnist/53087476#53087476", "title": "How to increase accuracy of network running on MNIST", "body": "<p>Did you forget to add backpropagation to the thetha2 parameter from layer 3 to 2 ? </p>\n\n<pre><code>for (int i = 1; i &lt;= n2; ++i) {\n    sum = 0.0;\n    for (int j = 1; j &lt;= n3; ++j) {\n       sum += w2[i][j] * theta3[j];\n    }\n    theta2[i] = out2[i] * (1 - out2[i]) * sum;\n}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1541315069, "creation_date": 1540998553, "last_edit_date": 1541315069, "question_id": 53086561, "link": "https://stackoverflow.com/questions/53086561/how-to-increase-accuracy-of-network-running-on-mnist", "title": "How to increase accuracy of network running on MNIST", "body": "<p>I followed this code:\n<a href=\"https://github.com/HyTruongSon/Neural-Network-MNIST-CPP\" rel=\"nofollow noreferrer\">https://github.com/HyTruongSon/Neural-Network-MNIST-CPP</a></p>\n\n<p>It is quite easy to understand. It produces 94% accuracy. I have to convert it to a network with deeper layers(ranging from 5 to 10). In order to make my self comfortable, I only added one more layer. However, no matter how much I train it, accuracy doesn't go beyond 50%. I added 256 neuron in each hidden layer. \nHere is how I modified my code:\nI added extra layer like this:</p>\n\n<pre><code>// From layer 1 to layer 2. Or: Input layer - Hidden layer\ndouble *w1[n1 + 1], *delta1[n1 + 1], *out1;\n\n// From layer 2 to layer 3. Or; Hidden layer - 2Hidden layer\ndouble *w2[n2 + 1], *delta2[n2 + 1], *in2, *out2, *theta2;\n\n// From layer 3 to layer 4. Or; Hidden layer - Output layer\ndouble *w3[n3 + 1], *delta3[n3 + 1], *in3, *out3, *theta3;\n\n// Layer 3 - Output layer\ndouble *in4, *out4, *theta4;\ndouble expected[n4 + 1];\n</code></pre>\n\n<p>Feedforward part is modified this way:</p>\n\n<pre><code>void perceptron() {\n    for (int i = 1; i &lt;= n2; ++i) {\n        in2[i] = 0.0;\n    }\n\n    for (int i = 1; i &lt;= n3; ++i) {\n        in3[i] = 0.0;\n    }\n    for (int i = 1; i &lt;= n4; ++i) {\n        in4[i] = 0.0;\n    }\n\n    for (int i = 1; i &lt;= n1; ++i) {\n        for (int j = 1; j &lt;= n2; ++j) {\n            in2[j] += out1[i] * w1[i][j];\n        }\n    }\n\n    for (int i = 1; i &lt;= n2; ++i) {\n        out2[i] = sigmoid(in2[i]);\n    }\n\n  /////\n     for (int i = 1; i &lt;= n2; ++i) {\n        for (int j = 1; j &lt;= n3; ++j) {\n            in3[j] += out2[i] * w2[i][j];\n        }\n    }\n\n    for (int i = 1; i &lt;= 3; ++i) {\n        out3[i] = sigmoid(in3[i]);\n    }\n\n  ////\n    for (int i = 1; i &lt;= n3; ++i) {\n        for (int j = 1; j &lt;= n4; ++j) {\n            in4[j] += out3[i] * w3[i][j];\n        }\n    }\n\n    for (int i = 1; i &lt;= n4; ++i) {\n        out4[i] = sigmoid(in4[i]);\n    }\n}\n</code></pre>\n\n<p>Backpropogation is changed this way:</p>\n\n<pre><code>void back_propagation() {\n    double sum;\n\n    for (int i = 1; i &lt;= n4; ++i) {\n        theta4[i] = out4[i] * (1 - out4[i]) * (expected[i] - out4[i]);\n    }\n\n    for (int i = 1; i &lt;= n3; ++i) {\n        sum = 0.0;\n        for (int j = 1; j &lt;= n4; ++j) {\n            sum += w3[i][j] * theta4[j];\n        }\n        theta3[i] = out3[i] * (1 - out3[i]) * sum;\n    }\n\n    for (int i = 1; i &lt;= n3; ++i) {\n        for (int j = 1; j &lt;= n4; ++j) {\n            delta3[i][j] = (learning_rate * theta4[j] * out3[i]) + (momentum * delta3[i][j]);\n            w3[i][j] += delta3[i][j];\n        }\n    }\n\n    /////////////\n\n       for (int i = 1; i &lt;= n2; ++i) {\n        for (int j = 1; j &lt;= n3; ++j) {\n            delta2[i][j] = (learning_rate * theta3[j] * out2[i]) + (momentum * delta2[i][j]);\n            w2[i][j] += delta2[i][j];\n        }\n    }\n   /////////////////\n\n    for (int i = 1; i &lt;= n1; ++i) {\n        for (int j = 1 ; j &lt;= n2 ; j++ ) {\n            delta1[i][j] = (learning_rate * theta2[j] * out1[i]) + (momentum * delta1[i][j]);\n            w1[i][j] += delta1[i][j];\n        }\n    }\n}\n</code></pre>\n\n<p>I am posting my modifications as well because I might be wrong somewhere here. Once I set epochs variable to 1000 and let it train for 24 hours, still no progress :( . I am quite frustrated with it and I don't know where I might be wrong. </p>\n"}, {"tags": ["c++", "casting", "llvm", "llvm-ir"], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 10586552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4be942db65a3292babcedd6a15f3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/10586552/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1541149479, "creation_date": 1541149479, "answer_id": 53115524, "question_id": 53086557, "link": "https://stackoverflow.com/questions/53086557/casting-tail-call-void-i32-bitcast-to-an-llvmfunction-to-get-the-fnattr/53115524#53115524", "title": "Casting tail call void (i32, ...) bitcast to an llvm::Function to get the FnAttribute", "body": "<p>So after some searching I found the solution to my own problem.</p>\n\n<p>For those looking for the answer here it is. Also I found a way to get the type. It is included in the code below.</p>\n\n<pre><code>for (llvm::Instruction&amp; inst : BB)\n{\n    llvm::CallInst * callInst = llvm::dyn_cast&lt;llvm::CallInst&gt;(&amp;inst);\n\n    if (callInst == nullptr)\n           continue;\n\n    //this prints out \"normal functions\"\n    if (llvm::Function *calledFunction = callInst-&gt;getCalledFunction()) {\n                    llvm::outs() &lt;&lt; \"Call to =&gt; \" &lt;&lt; calledFunction-&gt;getName().str() &lt;&lt; \"\\n\";\n    }\n    //this prints out the void bitcasted functions\n    else if (llvm::Function *voidFunc = llvm::dyn_cast&lt;llvm::Function&gt;(callInst-&gt;getCalledValue()-&gt;stripPointerCasts())) {\n                     llvm::outs() &lt;&lt; \"Call to =&gt; \" &lt;&lt; voidFunc -&gt;getName().str() &lt;&lt; \"\\n\";\n    }\n\n    llvm::Type* t = callInst-&gt;getCalledValue()-&gt;getType();\n    if (llvm::FunctionType* ft = llvm::cast&lt;llvm::FunctionType&gt;(llvm::cast&lt;llvm::PointerType&gt;(t)-&gt;getElementType()))\n    { \n    //here is your function type\n    }\n\n}\n</code></pre>\n\n<p><strong>Explanation:</strong><br></p>\n\n<ol>\n<li>First we cast the instruction to a Callinstruction (Callinst).</li>\n<li>If it is a nullptr continue to the next iteration.</li>\n<li>Try to cast it to a Function pointer.</li>\n<li>Try to cast it if it is a bitcasted pointer. (this solves my issue).</li>\n<li>To get the type you can use the getCalledValue()->getType() function\nand cast it to a FunctionType</li>\n</ol>\n"}], "owner": {"reputation": 33, "user_id": 10586552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4be942db65a3292babcedd6a15f3a9?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/10586552/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1541149479, "creation_date": 1540998541, "last_edit_date": 1541024006, "question_id": 53086557, "link": "https://stackoverflow.com/questions/53086557/casting-tail-call-void-i32-bitcast-to-an-llvmfunction-to-get-the-fnattr", "title": "Casting tail call void (i32, ...) bitcast to an llvm::Function to get the FnAttribute", "body": "<p>I have the following LLVM IR code:</p>\n\n<pre><code> //Code snippet #1\n; &lt;label&gt;:30:                                     ; preds = %30, %18\n  tail call void (i32, ...) bitcast (void (...)* @delay to void (i32, ...)*)(i32 5) #3\n  %31 = tail call zeroext i1 (...) @testFunc() #3\n  br i1 %31, label %30, label %32\n</code></pre>\n\n<p>The first is a function call to the function Delay. It is a void function but I added FnAttributes to it. I did the same to testFunc but this one is returning a 1 bit integer (boolean).</p>\n\n<p>When traversing the code like so:</p>\n\n<pre><code>//Code snippet #2\nfor (llvm::Instruction&amp; inst : BB)\n{\n   llvm::CallInst * callInst = llvm::dyn_cast&lt;llvm::CallInst&gt;(&amp;inst);\n\n    if (callInst == nullptr)\n        continue;\n\n    if (llvm::Function *calledFunction = callInst-&gt;getCalledFunction()) {\n        if (calledFunction-&gt;hasFnAttribute(\"MyAttr\")) {\n            llvm::outs() &lt;&lt; calledFunction.getFnAttribute(\"MyAttr\").getValueAsString().str() &lt;&lt; \"\\n\";\n        } \n    }\n</code></pre>\n\n<p>Getting the attribute (and printing it to the console) in the above code works for the testFunc but not for the void function. I need to be able to cast the void function to a llvm::Function to be able to get the FnAttribute.</p>\n\n<p>Using something like</p>\n\n<pre><code>callInst-&gt;getCalledValue()\n</code></pre>\n\n<p>Gives me the value but I cannot cast it to an llvm::Function. </p>\n\n<p>If I go through all functions by using the following code:</p>\n\n<pre><code>//Code snippet #3\nfor (llvm::Function&amp; F : M)\n{\n    if (F.hasFnAttribute(\"MyAttr\"))\n        {\n            llvm::outs() &lt;&lt; F.getFnAttribute(\"MyAttr\").getValueAsString().str() &lt;&lt; \"\\n\";\n        }\n}\n</code></pre>\n\n<p>I get the FnAttribute of the delay function just fine.</p>\n\n<p>My question is: How can I get the \"delay\" function in this code casted to an llvm::Function so I can get the FnAttribute in code snippet #2?</p>\n\n<p>Many thanks in advance!</p>\n"}, {"tags": ["c++", "iterator", "set", "next"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1540998532, "post_id": 53086526, "comment_id": 93069891, "body": "Why not instead keep track of <code>current</code> and <code>previous</code>?"}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "reply_to_user": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1540998547, "post_id": 53086526, "comment_id": 93069902, "body": "Great idea, how ?"}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 2, "creation_date": 1540998561, "post_id": 53086526, "comment_id": 93069913, "body": "Is this homework? Please explain what you&#39;re doing."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1540998814, "post_id": 53086526, "comment_id": 93070104, "body": "If you want to peek ahead, you&#39;d need to increment the iterator, make sure it is still not <code>end</code> and dereference it. Also, keep in mind that your current for loop is endless."}, {"owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1541000452, "post_id": 53086526, "comment_id": 93071259, "body": "I call a method which takes as parameters current object and next object. but when I am doing *next(it), it is nullprt ..."}], "answers": [{"comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 2, "creation_date": 1540998797, "post_id": 53086627, "comment_id": 93070094, "body": "Won&#39;t work if <code>it</code> is not <code>RandomAccessIterator</code>, e.g. for <code>std::map</code>"}], "tags": [], "owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "is_accepted": false, "score": -1, "last_activity_date": 1540998722, "creation_date": 1540998722, "answer_id": 53086627, "question_id": 53086526, "link": "https://stackoverflow.com/questions/53086526/for-loop-on-set-get-next-element-iterator/53086627#53086627", "title": "For loop on set - get next element iterator", "body": "<p>Iterators can be examined in the same manner as pointer arithmetic, as below</p>\n\n<pre><code>auto next = *(it + 1);\n</code></pre>\n\n<p>Note, that this will require some handling of the case where current is the last element so you don't overstep the iterator</p>\n"}, {"tags": [], "owner": {"reputation": 152, "user_id": 7047338, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6g46Q.jpg?s=128&g=1", "display_name": "Muhammad Magdi", "link": "https://stackoverflow.com/users/7047338/muhammad-magdi"}, "is_accepted": false, "score": 0, "last_activity_date": 1541004868, "creation_date": 1541004868, "answer_id": 53088513, "question_id": 53086526, "link": "https://stackoverflow.com/questions/53086526/for-loop-on-set-get-next-element-iterator/53088513#53088513", "title": "For loop on set - get next element iterator", "body": "<p>I think you only need to add another iterator <code>prev</code> to your code and the logic will be:</p>\n\n<pre><code>set&lt;int&gt; setOfObjects;\nfor(auto it = setOfObjects.begin(), previt = it++ ; it != setOfObjects.end(); ++it, ++previt){\n  auto prev = *previt;  //which is current\n  auto current = *it;   //and this was next\n}\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1541004868, "creation_date": 1540998465, "question_id": 53086526, "link": "https://stackoverflow.com/questions/53086526/for-loop-on-set-get-next-element-iterator", "title": "For loop on set - get next element iterator", "body": "<p>If I loop on a set, and I would like to get current element iterator and next element iterator, how can I do that without using <em>next()</em> ?</p>\n\n<pre><code>for(auto it = setOfObjects().begin(); it != setOfObjects().end(); ){\n            auto current = *it;\n            auto next = // ?\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt5", "qtreewidget", "qicon"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10586586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ab4a42ba882b444ad73a084ad6ae03?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisHBaker", "link": "https://stackoverflow.com/users/10586586/chrishbaker"}, "edited": false, "score": 0, "creation_date": 1541067287, "post_id": 53087976, "comment_id": 93093975, "body": "That worked perfect thanks, but strangely  \tQIcon dir_open_icon = QApplication::style()-&gt;standardIcon(QStyle::SP_DirOpenIcon);  just gave the normal closed dir icon."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 7, "user_id": 10586586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ab4a42ba882b444ad73a084ad6ae03?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisHBaker", "link": "https://stackoverflow.com/users/10586586/chrishbaker"}, "edited": false, "score": 0, "creation_date": 1541076568, "post_id": 53087976, "comment_id": 93098605, "body": "@ChrisHBaker the nomenclature may be strange to you, so do not necessarily follow the names as it is not regulated. On the other hand if my answer helps you do not forget to mark it as correct, if you do not know how to do it then review the <a href=\"https://stackoverflow.com/tour\">tour</a>, that is the best way to thank."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 3, "last_activity_date": 1541003958, "last_edit_date": 1541003958, "creation_date": 1541003028, "answer_id": 53087976, "question_id": 53086321, "link": "https://stackoverflow.com/questions/53086321/are-there-default-icons-for-use-in-a-qtreewidget/53087976#53087976", "title": "Are there default icons for use in a QTreeWidget?", "body": "<p>There are several icons by default, for example:</p>\n\n<p>With <a href=\"https://http://doc.qt.io/qt-5/qstyle.html#standardIcon\" rel=\"nofollow noreferrer\"><code>QStyle::standardIcon(...)</code></a>:</p>\n\n<pre><code>QIcon dir_icon = QApplication::style()-&gt;standardIcon(QStyle::SP_DirIcon);\nQIcon file_icon = QApplication::style()-&gt;standardIcon(QStyle::SP_FileIcon);\n</code></pre>\n\n<p>with <a href=\"https://http://doc.qt.io/qt-5/qfileiconprovider.html#icon\" rel=\"nofollow noreferrer\"><code>QFileIconProvider::icon(...)</code></a> </p>\n\n<pre><code>QFileIconProvider provider;\nQIcon dir_icon = provider.icon(QFileIconProvider::Folder);\nQIcon file_icon = provider.icon(QFileIconProvider::File);\n</code></pre>\n\n<p>If your OS uses freedesktop then you can use <a href=\"http://doc.qt.io/qt-5/qicon.html#fromTheme\" rel=\"nofollow noreferrer\"><code>QIcon::fromTheme(...)</code></a>:</p>\n\n<pre><code>QIcon dir_icon = QIcon::fromTheme(\"folder\");\nQIcon file_icon = QIcon::fromTheme(\"text-x-generic\")\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10586586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ab4a42ba882b444ad73a084ad6ae03?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisHBaker", "link": "https://stackoverflow.com/users/10586586/chrishbaker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 353, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555824288, "creation_date": 1540997871, "last_edit_date": 1555824288, "question_id": 53086321, "link": "https://stackoverflow.com/questions/53086321/are-there-default-icons-for-use-in-a-qtreewidget", "title": "Are there default icons for use in a QTreeWidget?", "body": "<p>I have a QTreeWidget and I want to add icons, are there a default set to pick from such as the file folder in explorer and a blank piece of paper icon?</p>\n"}, {"tags": ["c++", "vector", "signal-processing"], "comments": [{"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540997597, "post_id": 53086063, "comment_id": 93069256, "body": "Remove <code>using namespace std;</code> and add <code>std::</code> where necessary.  Who knows what you&#39;re opening yourself up to there!"}, {"owner": {"reputation": 23, "user_id": 9417329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503ac50b256b68257ce4d37747754a71?s=128&d=identicon&r=PG&f=1", "display_name": "T. Aalbaek", "link": "https://stackoverflow.com/users/9417329/t-aalbaek"}, "reply_to_user": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540998078, "post_id": 53086063, "comment_id": 93069585, "body": "@Ian good idea for a solution! But unfortunately it didn&#39;t work.."}, {"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540998192, "post_id": 53086063, "comment_id": 93069667, "body": "Ok T.  Nevertheless, it&#39;s generally advised you don&#39;t add <code>using namespace std;</code>  See <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\">why is using namespace std considered bad?</a> for further info."}, {"owner": {"reputation": 23, "user_id": 9417329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503ac50b256b68257ce4d37747754a71?s=128&d=identicon&r=PG&f=1", "display_name": "T. Aalbaek", "link": "https://stackoverflow.com/users/9417329/t-aalbaek"}, "reply_to_user": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540998225, "post_id": 53086063, "comment_id": 93069686, "body": "Oh okay! Thanks for the advice! :) Yeah, I am kinda of a rookie"}, {"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540998744, "post_id": 53086063, "comment_id": 93070053, "body": "Surely you need <code>&amp;&amp;</code> instead of <code>||</code> to terminate the for-loops?  You need both conditions to be true while looping, so if one goes false, it should terminate."}, {"owner": {"reputation": 23, "user_id": 9417329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503ac50b256b68257ce4d37747754a71?s=128&d=identicon&r=PG&f=1", "display_name": "T. Aalbaek", "link": "https://stackoverflow.com/users/9417329/t-aalbaek"}, "reply_to_user": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540998846, "post_id": 53086063, "comment_id": 93070129, "body": "You&#39;re right @Ian incidently that fixed it! Thanks man! You&#39;re a champ!"}, {"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1540999261, "post_id": 53086063, "comment_id": 93070418, "body": "Always pass on the thanks by up-voting and accepting ;)"}], "answers": [{"tags": [], "owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "is_accepted": true, "score": 0, "last_activity_date": 1540999212, "creation_date": 1540999212, "answer_id": 53086784, "question_id": 53086063, "link": "https://stackoverflow.com/questions/53086063/xutility-stack-overflow-in-get-second/53086784#53086784", "title": "xutility stack overflow in _get_second()", "body": "<p>Each of your for-loops should use <code>&amp;&amp;</code> instead of <code>||</code> as you need both conditions to be met in order to continue accessing the arrays safely.  E.g.:</p>\n\n<pre><code>for (unsigned int i = 1; (i &lt; n &amp;&amp; i &lt; inputXFunction.size()); i++)\n{\n    sum -= inputXFunction[i] * wOfNFunction(n - i);\n}\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>for (unsigned int i = 1; (i &lt; n || i &lt; inputXFunction.size()); i++)\n{\n    sum -= inputXFunction[i] * wOfNFunction(n - i);\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9417329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503ac50b256b68257ce4d37747754a71?s=128&d=identicon&r=PG&f=1", "display_name": "T. Aalbaek", "link": "https://stackoverflow.com/users/9417329/t-aalbaek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 53086784, "answer_count": 1, "score": 0, "last_activity_date": 1540999212, "creation_date": 1540997105, "last_edit_date": 1540998477, "question_id": 53086063, "link": "https://stackoverflow.com/questions/53086063/xutility-stack-overflow-in-get-second", "title": "xutility stack overflow in _get_second()", "body": "<p>I'm trying to make a code to implement the direct type 2 realisation structure from Digital Signal Processing in C++.</p>\n\n<p>So what I have is this for a class and of course a header that belongs to it:</p>\n\n<pre><code>#include \"DirectType2.h\"\n\nDirectType2::DirectType2()\n{\n}\n\nDirectType2::DirectType2(vector&lt;double&gt; inputBCoefficients, vector&lt;double&gt; inputACoefficients)\n{\n    inputXFunction = inputACoefficients;\n    inputYFunction = inputBCoefficients;\n}\n\nvoid DirectType2::setInputFunctions(vector&lt;double&gt; inputA, vector&lt;double&gt; inputB)\n{\n    inputXFunction = inputA;\n    inputYFunction = inputB;\n}\n\nvector&lt;double&gt; DirectType2::getInputXFunction()\n{\n    return inputXFunction;\n}\n\nvector&lt;double&gt; DirectType2::getInputYFunction()\n{\n     return inputYFunction;\n}\n\ndouble DirectType2::xOfNFunction(unsigned int n)\n{\n    double sum = 0;\n\n    for (unsigned int i = 1; i &lt;= n || i &lt; inputXFunction.size(); i++)\n    {\n        sum += inputXFunction[i] * xOfNFunction(n - i);\n    }\n\n    double x = inputXFunction[0] + sum;\n\n    return x;\n}\n\ndouble DirectType2::wOfNFunction(unsigned int n)\n{\n    double w = 0;\n\n    double sum = 0;\n\n    for (unsigned int i = 1; (i &lt; n || i &lt; inputXFunction.size()); i++)\n    {\n        sum -= inputXFunction[i] * wOfNFunction(n - i);\n    }\n\n    w = inputXFunction[1] - sum;\n\n\n    return w;\n}\n\ndouble DirectType2::yOfNFunction(unsigned int n)\n{\n    double y = 0;\n\nfor (unsigned int i = 0; i &lt; n || i &lt; inputYFunction.size(); i++)\n{\n    y += inputYFunction[i] * wOfNFunction(n - i);\n}\n\n    return y;\n}\n\n\nDirectType2::~DirectType2()\n{\n}\n</code></pre>\n\n<p>My source file looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"DirectType2.h\"\n\nusing namespace std;\n\nint main()\n{\n    double myDoubleY[] = { 0.01031, 0.06188, 0.1547, 0.2063, 0.1547, 0.06188, 0.01031 };\n    double myDoubleX[] = { 1, -1.188, 1.305, -0.6743, 0.2635, -0.05175, 0.005023 };\n    vector&lt;double&gt; yFunction(myDoubleY, myDoubleY + sizeof(myDoubleY) / sizeof(double));\n    vector&lt;double&gt; xFunction(myDoubleX, myDoubleX + sizeof(myDoubleX) / sizeof(double));\n\n    DirectType2 port(yFunction, xFunction);\n    cout &lt;&lt; \"y(n) med n = 6 bliver: \" &lt;&lt; port.yOfNFunction(6) &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>Now my issue is that when I run this code, a file called \"xutility\" pops up and throws this exception:</p>\n\n<pre><code>Unhandled exception at 0x01284B77 in Portef\u00f8lje 2 - fors\u00f8g 2.exe: 0xC00000FD: Stack overflow (parameters: 0x00000001, 0x00E02F64).\n</code></pre>\n\n<p>Now of course I understand that it is a stack overflow that happens, but I dont understand why it opens this file and throws an exception from it, seeings as I don't really feel like I ever use this file..</p>\n\n<p>The code snippet that throws the exception is:</p>\n\n<pre><code>const _Ty2&amp; _Get_second() const noexcept\n        {   // return const reference to second\n        return (_Myval2);\n        }\n</code></pre>\n\n<p>and if I try to let the code continue it says this:</p>\n\n<pre><code>Exception thrown at 0x01284B77 in Portef\u00f8lje 2 - fors\u00f8g 2.exe: 0xC0000005:\nAccess violation writing location 0x00E00FB4.\n</code></pre>\n\n<p>Edit:</p>\n\n<p>In the header I have defined two vectors called <code>inputXFunction</code> and <code>inputYFunction</code> both set to contain doubles.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540997077, "post_id": 53086016, "comment_id": 93068873, "body": "Can you just compile this function in its own compilation unit?"}, {"owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540997260, "post_id": 53086016, "comment_id": 93068997, "body": "I&#39;d prefer not to if I can avoid it"}, {"owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1540998019, "post_id": 53086016, "comment_id": 93069547, "body": "You write only that function in assembly if it is small enough, then you don&#39;t need <code>x86intrin.h</code> file only."}, {"owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "reply_to_user": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "edited": false, "score": 0, "creation_date": 1540998463, "post_id": 53086016, "comment_id": 93069843, "body": "@yadhu Yeah thought about that but I&#39;m probably going to have several intrinsic functions and don&#39;t want to have to inline the assembly for all of them.  I think I&#39;m screwed, which is disappointing because Intel and more recent GCC versions let you do this."}], "owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540996971, "creation_date": 1540996971, "question_id": 53086016, "link": "https://stackoverflow.com/questions/53086016/enable-avx-intrinsics-in-gcc-4-8-2-without-mavx", "title": "Enable AVX intrinsics in GCC 4.8.2 without -mavx", "body": "<p>Is there anyways to get the AVX intrinsics included via x86intrin.h in GCC 4.8.2 without turning on -mavx for the whole compilation unit?  I only want to <em>use</em> them in a function that I've marked target(\"avx\").  More recent versions of gcc seem to do this correctly.   But with 4.8.2 even if I manually <code>#define __AVX__</code> (ew), it complains about the __builtin* functions not being defined...</p>\n"}, {"tags": ["c++", "c++17", "implicit-conversion", "unique-ptr"], "answers": [{"tags": [], "owner": {"reputation": 956, "user_id": 6449949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a920ba06a595d7137a076ab1de7425?s=128&d=identicon&r=PG&f=1", "display_name": "paler123", "link": "https://stackoverflow.com/users/6449949/paler123"}, "is_accepted": false, "score": 4, "last_activity_date": 1540996729, "creation_date": 1540996729, "answer_id": 53085943, "question_id": 53085773, "link": "https://stackoverflow.com/questions/53085773/understanding-copy-initialisation-and-implicit-conversions/53085943#53085943", "title": "Understanding copy-initialisation and implicit conversions", "body": "<p>Pretty sure that only single implicit conversion is allowed to be considered by the compiler. In first case only conversion from <code>std::unique_ptr&lt;derived&gt;&amp;&amp;</code> to <code>std::unique_ptr&lt;base&gt;&amp;&amp;</code> is required, in the second case the base pointer would also need to be converted to <code>test</code> (for default move constructor to work). \nSo for example converting the derived pointer to base: <code>std::unique_ptr&lt;base&gt; bd = std::move(pd)</code> and then move assigning it would work as well.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 20, "last_activity_date": 1541003227, "last_edit_date": 1541003227, "creation_date": 1540996834, "answer_id": 53085971, "question_id": 53085773, "link": "https://stackoverflow.com/questions/53085773/understanding-copy-initialisation-and-implicit-conversions/53085971#53085971", "title": "Understanding copy-initialisation and implicit conversions", "body": "<p>A <code>std::unique_ptr&lt;base&gt;</code> is not the same type as a <code>std::unique_ptr&lt;derived&gt;</code>.  When you do</p>\n\n<pre><code>test t(std::move(pd));\n</code></pre>\n\n<p>You call <code>std::unique_ptr&lt;base&gt;</code>'s conversion constructor to convert <code>pd</code> into a <code>std::unique_ptr&lt;base&gt;</code>.  This is fine as you are allowed a single user defined conversion.</p>\n\n<p>In</p>\n\n<pre><code>test t = std::move(pd);\n</code></pre>\n\n<p>You are doing copy initialization so so you need to convert <code>pd</code> into a <code>test</code>.  That requires 2 user defined conversions though and you can't do that.  You first have to convert <code>pd</code> to a <code>std::unique_ptr&lt;base&gt;</code> and then you need to convert it to a <code>test</code>.  It's not very intuitive but when you have</p>\n\n<pre><code>type name = something;\n</code></pre>\n\n<p>whatever <code>something</code> is needs to be only a single user defined conversion from the source type.  In your case that means you need</p>\n\n<pre><code>test t = test{std::move(pd)};\n</code></pre>\n\n<p>which only uses a single implicit user defined like the first case does.</p>\n\n<hr>\n\n<p>Lets remove the <code>std::unique_ptr</code> and look at in a general case.  Since <code>std::unique_ptr&lt;base&gt;</code> is not the same type as a <code>std::unique_ptr&lt;derived&gt;</code> we essentially have</p>\n\n<pre><code>struct bar {};\nstruct foo\n{ \n    foo(bar) {} \n};\n\nstruct test\n{\n    test(foo){}\n};\n\nint main()\n{\n    test t = bar{};\n}\n</code></pre>\n\n<p>and <a href=\"https://wandbox.org/permlink/IhBJveU6iCskLHiH\" rel=\"noreferrer\">we get the same error</a> because we need to go from <code>bar -&gt; foo -&gt; test</code> and that has one user defined conversion too many.</p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1540997333, "creation_date": 1540997333, "answer_id": 53086128, "question_id": 53085773, "link": "https://stackoverflow.com/questions/53085773/understanding-copy-initialisation-and-implicit-conversions/53086128#53086128", "title": "Understanding copy-initialisation and implicit conversions", "body": "<p>The semantics of initializers are described in <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init#17\" rel=\"noreferrer\">[dcl.init] \u00b617</a>. The choice of direct initialization vs copy initialization takes us into one of two different bullets:</p>\n\n<blockquote>\n  <p>If the destination type is a (possibly cv-qualified) class type:</p>\n  \n  <ul>\n  <li><p>[...]</p></li>\n  <li><p>Otherwise, if the initialization is direct-initialization, or if it is copy-initialization where the cv-unqualified version of the source\n  type is the same class as, or a derived class of, the class of the\n  destination, constructors are considered. The applicable constructors\n  are enumerated ([over.match.ctor]), and the best one is chosen through\n  overload resolution. The constructor so selected is called to\n  initialize the object, with the initializer expression or\n  expression-list as its argument(s). If no constructor applies, or the\n  overload resolution is ambiguous, the initialization is ill-formed.</p></li>\n  <li><p>Otherwise (i.e., for the remaining copy-initialization cases), user-defined conversion sequences that can convert from the source\n  type to the destination type or (when a conversion function is used)\n  to a derived class thereof are enumerated as described in\n  [over.match.copy], and the best one is chosen through overload\n  resolution. If the conversion cannot be done or is ambiguous, the\n  initialization is ill-formed. The function selected is called with the\n  initializer expression as its argument; if the function is a\n  constructor, the call is a prvalue of the cv-unqualified version of\n  the destination type whose result object is initialized by the\n  constructor. The call is used to direct-initialize, according to the\n  rules above, the object that is the destination of the\n  copy-initialization.</p></li>\n  </ul>\n</blockquote>\n\n<p>In the direct initialization case, we enter the first quoted bullet. As detailed there, constructors are considered and enumerated directly. The implicit conversion sequence that is required is therefore only to convert <code>unique_ptr&lt;derived&gt;</code> to a <code>unique_ptr&lt;base&gt;</code> as a constructor argument.</p>\n\n<p>In the copy initialization case, we are not directly considering constructors anymore, but rather trying to see which implicit conversion sequence is possible. The only one available is <code>unique_ptr&lt;derived&gt;</code> to a <code>unique_ptr&lt;base&gt;</code> to a <code>test</code>. Since an implicit conversion sequence can contain only one user defined conversion, this is not allowed. As such the initialization is ill-formed.</p>\n\n<p>One could say that using direct initialization sort of \"bypasses\" one implicit conversion.</p>\n"}], "owner": {"reputation": 3142, "user_id": 1598163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131731839e6abf47e73673d7bf7990c6?s=128&d=identicon&r=PG", "display_name": "linuxfever", "link": "https://stackoverflow.com/users/1598163/linuxfever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 995, "favorite_count": 3, "accepted_answer_id": 53085971, "answer_count": 3, "score": 23, "last_activity_date": 1541006423, "creation_date": 1540996190, "last_edit_date": 1541006423, "question_id": 53085773, "link": "https://stackoverflow.com/questions/53085773/understanding-copy-initialisation-and-implicit-conversions", "title": "Understanding copy-initialisation and implicit conversions", "body": "<p>I am having trouble understanding why the following copy-initialization doesn't compile:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstruct base{};\nstruct derived : base{};\n\nstruct test\n{\n    test(std::unique_ptr&lt;base&gt;){}\n};\n\nint main()\n{\n    auto pd = std::make_unique&lt;derived&gt;();\n    //test t(std::move(pd)); // this works;\n    test t = std::move(pd); // this doesn't\n}\n</code></pre>\n\n<p>A <code>unique_ptr&lt;derived&gt;</code> can be moved into a <code>unique_ptr&lt;base&gt;</code>, so why does the second statement work but the last does not?  Are non-explicit constructors not considered when performing a copy-initialization?</p>\n\n<p>The error from gcc-8.2.0 is:</p>\n\n<pre><code>conversion from 'std::remove_reference&lt;std::unique_ptr&lt;derived, std::default_delete&lt;derived&gt; &gt;&amp;&gt;::type' \n{aka 'std::unique_ptr&lt;derived, std::default_delete&lt;derived&gt; &gt;'} to non-scalar type 'test' requested\n</code></pre>\n\n<p>and from clang-7.0.0 is</p>\n\n<pre><code>candidate constructor not viable: no known conversion from 'unique_ptr&lt;derived, default_delete&lt;derived&gt;&gt;' \nto 'unique_ptr&lt;base, default_delete&lt;base&gt;&gt;' for 1st argument\n</code></pre>\n\n<p>Live code is available <a href=\"https://wandbox.org/permlink/fVMj3mc848GCuMyC\" rel=\"noreferrer\">here</a>.</p>\n"}, {"tags": ["c++", "visual-studio", "cmake", "vtk"], "comments": [{"owner": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 2, "creation_date": 1540996607, "post_id": 53085761, "comment_id": 93068561, "body": "<a href=\"http://vtk.1045678.n5.nabble.com/Static-Link-VTK-td5717493.html\" rel=\"nofollow noreferrer\">vtk.1045678.n5.nabble.com/Static-Link-VTK-td5717493.html</a> You need to build VTK with BUILD_SHARED_LIBS=OFF"}, {"owner": {"reputation": 2306, "user_id": 3288123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ZTvj.jpg?s=128&g=1", "display_name": "Anees Hikmat Abu Hmiad", "link": "https://stackoverflow.com/users/3288123/anees-hikmat-abu-hmiad"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1540996780, "post_id": 53085761, "comment_id": 93068667, "body": "I will try that now Alex, thanks"}, {"owner": {"reputation": 2306, "user_id": 3288123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ZTvj.jpg?s=128&g=1", "display_name": "Anees Hikmat Abu Hmiad", "link": "https://stackoverflow.com/users/3288123/anees-hikmat-abu-hmiad"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1540996835, "post_id": 53085761, "comment_id": 93068704, "body": "set(CMAKE_EXE_LINKER_FLAGS ${CMAKE_EXE_LINKER_FLAGS} &quot;-static&quot;) is need to set too or no?"}, {"owner": {"reputation": 2306, "user_id": 3288123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ZTvj.jpg?s=128&g=1", "display_name": "Anees Hikmat Abu Hmiad", "link": "https://stackoverflow.com/users/3288123/anees-hikmat-abu-hmiad"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1540997897, "post_id": 53085761, "comment_id": 93069469, "body": "BUILD_SHARED_LIBS=OFF in my cmakeLists but its not work too.... its same, its work locally but not work in other device ..."}, {"owner": {"reputation": 2306, "user_id": 3288123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ZTvj.jpg?s=128&g=1", "display_name": "Anees Hikmat Abu Hmiad", "link": "https://stackoverflow.com/users/3288123/anees-hikmat-abu-hmiad"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1540998629, "post_id": 53085761, "comment_id": 93069964, "body": "Thank you @Alex F, I will check it now"}], "owner": {"reputation": 2306, "user_id": 3288123, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/2ZTvj.jpg?s=128&g=1", "display_name": "Anees Hikmat Abu Hmiad", "link": "https://stackoverflow.com/users/3288123/anees-hikmat-abu-hmiad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1541061352, "creation_date": 1540996163, "last_edit_date": 1541061352, "question_id": 53085761, "link": "https://stackoverflow.com/questions/53085761/how-to-make-exe-file-contain-vtk-that-can-be-used-by-other-users-device", "title": "How to make exe file contain VTK that can be used by other users device", "body": "<p>Im build an c++ application, and this app use VTK, I generate exe file and its work nice in my local computer, but If I try to share this exe file to other user I got an error like <code>vtk*.dll</code> not found. </p>\n\n<p>Note: My VTK-build is located in other directory, if its most be move with my exe, how I can configure it.</p>\n\n<p>VTK ver: 8.1.1</p>\n\n<p>Visual Studio: 17</p>\n\n<p>Thanks</p>\n\n<blockquote>\n  <p>Note: I found a none optimal solution but its work, I put all dll file\n  in current exe file location, and this resolve issue!</p>\n</blockquote>\n"}, {"tags": ["c++", "macos", "lldb"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540995992, "post_id": 53085694, "comment_id": 93068152, "body": "C++ tag naughtily added for attention-seeking. The application <i>is</i> C++, though ;)"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541005578, "post_id": 53086539, "comment_id": 93074248, "body": "Pretty good! Only weakness I&#39;ve seen so far is that the exit code doesn&#39;t appear to reflect that of the target. So my test harness doesn&#39;t quite know what&#39;s going on. Putting &#39;quit 1&#39; in the batch file gets me partially there."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541005732, "post_id": 53086539, "comment_id": 93074324, "body": "I guess the ideal solution would be, instead of <code>-batch</code>, a <code>--source-on-graceful-quit</code> with a batch file I can put <code>quit $exitCode</code> in or something"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541005935, "post_id": 53086539, "comment_id": 93074423, "body": "Maybe I should be using the Python bindings as a launcher"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541013398, "post_id": 53086539, "comment_id": 93077917, "body": "I&#39;m afraid I can&#39;t really achieve anything more without resorting to python.  Also, can you clarify what you mean by <code>&quot;Putting &#39;quit 1&#39; in the batch file gets me partially there.&quot;</code>?  Using <code>quit 1</code> doesn&#39;t affect the exit code of <code>lldb</code> itself for me (<code>lldb</code> version 6.0.1) -- in fact, anything I type after <code>quit</code> appears to be completely ignored."}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1541027783, "post_id": 53086539, "comment_id": 93083117, "body": "The ability to set lldb&#39;s exit value is a recent addition.  It will be in the 7 open source release."}, {"owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "edited": false, "score": 0, "creation_date": 1541027870, "post_id": 53086539, "comment_id": 93083144, "body": "There was a request recently for a --source-on-exit to go along with --source-on-crash.  Specific to this problem, however: batch mode is really set up to just debug one process - I&#39;m not really sure what would happen if you started up more than one.  So it would make sense in batch mode to just automatically set lldb&#39;s exit code to that of the process that successfully exited.  Feel free to file feature requests for this and if you really want it, it should be pretty easy to hack in."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1541068156, "post_id": 53086539, "comment_id": 93094377, "body": "@G.M. Regarding <code>quit 1</code> admittedly I saw it discussed online and didn&#39;t actually try it yet ^_^"}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1540998953, "last_edit_date": 1540998953, "creation_date": 1540998485, "answer_id": 53086539, "question_id": 53085694, "link": "https://stackoverflow.com/questions/53085694/how-to-make-lldb-quit-on-success-wait-on-failure/53086539#53086539", "title": "How to make LLDB quit on success, wait on failure?", "body": "<p>I'm having difficulty finding an online command reference but it looks like the <code>-batch</code> command line option will get you the basic \"exit on success/prompt on fail\" behaviour.</p>\n\n<p>For a backtrace <em>and</em> auto-quit on failure I think you need the <code>--source-on-crash</code> option...</p>\n\n<pre><code>-K &lt;filename&gt;  \n--source-on-crash &lt;filename&gt;  \n    When in batch mode, tells the debugger to source this file of lldb\n    commands if the target crashes.\n</code></pre>\n\n<p>So, create the command file with something like...</p>\n\n<pre><code>echo -e 'bt\\nquit' &gt; lldb.batch\n</code></pre>\n\n<p>and then invoke as...</p>\n\n<pre><code>lldb --batch -K lldb.batch -o run -f $CMD -- $ARGS\n</code></pre>\n"}], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540998953, "creation_date": 1540995978, "question_id": 53085694, "link": "https://stackoverflow.com/questions/53085694/how-to-make-lldb-quit-on-success-wait-on-failure", "title": "How to make LLDB quit on success, wait on failure?", "body": "<p>This is the Clang version of:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/3740754/560648\">Make gdb quit automatically on successful termination?</a></li>\n<li><a href=\"https://stackoverflow.com/q/8657648/560648\">How to have gdb exit if program succeeds, break if program crashes?</a></li>\n</ul>\n\n<hr>\n\n<p>Running my application many times, programmatically, over a large number of possible inputs, I've occasionally encountered a segmentation fault.</p>\n\n<p>I'd like each test invocation to be run under <code>lldb</code> so that I can get a backtrace for further debugging. If an invocation exits without a crash, I'd like <code>lldb</code> to automatically quit so that the test harness progresses to the next iteration. This way I can set the whole thing off over lunchtime and only have the suite interrupted when something crashes.</p>\n\n<p>Bonus points for having <code>lldb</code> auto-quit in all cases, but first print a backtrace if the program crashed.</p>\n\n<p>I'm currently able to automate at least the initial <code>run</code> command:</p>\n\n<pre><code>lldb -o run -f $CMD -- $ARGS\n</code></pre>\n"}, {"tags": ["c++", "gcc", "g++", "shared-libraries"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1540995726, "post_id": 53085524, "comment_id": 93067984, "body": "isn&#39;t it the work of the build-system to determine which libs are available and whether to link them? Not sure how it&#39;s done in Makefiles but it&#39;s rather simple in CMake, so I&#39;m sure it can be done there too."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540995798, "post_id": 53085524, "comment_id": 93068039, "body": "Typically, when the library is linked to the application, it is done so for a reason. If it is unused by the code (so that not linking against a library will make the code to compile) - it can be removed altogether. If it is used by the code, and you remove such linker directive: you would get unresolved external symbol errors, making it not compile for another reason."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1540995818, "post_id": 53085524, "comment_id": 93068058, "body": "@DanM. Yes you are right. But as I was saying - I can fix the makefile but it needs a lot of work in many areas.... I was just asking the question (as a quick hack) if it can be done via gcc :)"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1540995927, "post_id": 53085524, "comment_id": 93068121, "body": "@code_fodder you are going to change gcc invocation anyway. So you could just replace <code>somelibrary</code> with <code>$SOMELIB</code> var, and only set it if the check that such lib exists succeeds."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1540996048, "post_id": 53085524, "comment_id": 93068196, "body": "@DanM. ah, sorry - I see what you mean, yeah that could work :)"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1540996769, "post_id": 53085524, "comment_id": 93068655, "body": "&quot; I want it to continue in this case without linking.&quot; Unclear. Do you mean without linking <i>that library</i>, or without linking <i>at all</i>."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 0, "creation_date": 1540997184, "post_id": 53085524, "comment_id": 93068942, "body": "@MikeKinghan yes, sorry without linking &quot;that&quot; library, but linking all the others and continueing to produce an executable"}], "answers": [{"tags": [], "owner": {"reputation": 607, "user_id": 8225336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418c2e0a00933c6e12a63c1bca55ea27?s=128&d=identicon&r=PG&f=1", "display_name": "tangoal", "link": "https://stackoverflow.com/users/8225336/tangoal"}, "is_accepted": false, "score": 0, "last_activity_date": 1541196268, "last_edit_date": 1541196268, "creation_date": 1540995852, "answer_id": 53085646, "question_id": 53085524, "link": "https://stackoverflow.com/questions/53085524/with-gcc-is-it-possible-to-link-library-but-only-if-it-exists/53085646#53085646", "title": "With gcc is it possible to link library but only if it exists?", "body": "<p>The <code>make</code> program reacts on the return value of the program called (in this case gcc). If it returns 0, then it is successful. All other values are considered as error. So you could just call a bash script doing the linking as intermediate solution. Just let the bash script return 0 in any case. </p>\n"}, {"tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 1, "last_activity_date": 1541185712, "last_edit_date": 1541185712, "creation_date": 1540999049, "answer_id": 53086735, "question_id": 53085524, "link": "https://stackoverflow.com/questions/53085524/with-gcc-is-it-possible-to-link-library-but-only-if-it-exists/53086735#53086735", "title": "With gcc is it possible to link library but only if it exists?", "body": "<p>You can replace</p>\n\n<pre><code>gcc &lt;...other options...&gt; -L ./some/path -l somelibrary\n</code></pre>\n\n<p>in Makefile with</p>\n\n<pre><code>gcc &lt;...other options...&gt; -L ./some/path -l somelibrary || gcc &lt;...other options...&gt; -Wl,--unresolved-symbols=ignore-in-object-files\n</code></pre>\n\n<p>As a side note, instead of <code>-L ./some/path -l somelibrary</code> you can simply do <code>./some/path/libsomelibrary.so</code>.</p>\n"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1541196268, "creation_date": 1540995506, "question_id": 53085524, "link": "https://stackoverflow.com/questions/53085524/with-gcc-is-it-possible-to-link-library-but-only-if-it-exists", "title": "With gcc is it possible to link library but only if it exists?", "body": "<p>We have a bit of a messed up makefile system which we are going to fix up. But in the mean time I need to add a workaround, and I am wandering if you can ask the compiler (or linker) to link a library, but only if it exists. I know how to fix the makefile but that will take some time and in the meantime I want a quick hack...</p>\n\n<p>So I have somthng like:</p>\n\n<p><code>gcc &lt;...other options...&gt; -L ./some/path -l somelibrary</code></p>\n\n<p>When <code>libsomelibrary.so</code> does not exist this gives an error. I want it to continue in this case without linking. Is that possible? - some linker option?</p>\n"}, {"tags": ["c++", "dll"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540994716, "post_id": 53085246, "comment_id": 93067316, "body": "<b><i>If a DLL is linked explicitly to the application and both are dynamically linked to CRT heap with a guarantee that they have the same CRT version, is it safe to allocate/release memory as per normal?</i></b> Yes you are fine as long as you don&#39;t mix Debug and Release."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1540994903, "post_id": 53085246, "comment_id": 93067426, "body": "It may be safe, but it&#39;&#39;s not good design to allocate and delete in different layers."}], "answers": [{"tags": [], "owner": {"reputation": 4579, "user_id": 459565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cc92778353971733be88d04c26603ec7?s=128&d=identicon&r=PG", "display_name": "Eugene", "link": "https://stackoverflow.com/users/459565/eugene"}, "is_accepted": false, "score": 0, "last_activity_date": 1540995144, "creation_date": 1540995144, "answer_id": 53085401, "question_id": 53085246, "link": "https://stackoverflow.com/questions/53085246/releasing-memory-for-dll-dynamically-linked-to-crt-heap-with-the-same-version-af/53085401#53085401", "title": "Releasing memory for DLL dynamically linked to CRT heap with the same version after calling FreeLibrary", "body": "<p>In addition to version, it also matters if the main program and the DLL share the same <em>copy</em> of the heap. </p>\n\n<p>In Visual Studio, to ensure that, you have to specify in the project config: Runtime Library = Multi-threaded DLL or Multi-threaded Debug DLL (/MD or /MDd) - in <em>both</em> DLL project and the main program project.</p>\n"}], "owner": {"reputation": 176, "user_id": 7530723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26d5bda41bea595a390bf8ed0d500f83?s=128&d=identicon&r=PG&f=1", "display_name": "Nyque", "link": "https://stackoverflow.com/users/7530723/nyque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540995144, "creation_date": 1540994572, "question_id": 53085246, "link": "https://stackoverflow.com/questions/53085246/releasing-memory-for-dll-dynamically-linked-to-crt-heap-with-the-same-version-af", "title": "Releasing memory for DLL dynamically linked to CRT heap with the same version after calling FreeLibrary", "body": "<p>From what I've read so far, it is generally recommended to use <code>std::shared_ptr</code>, process heap or a wrapper function in the DLL itself to release memory allocated in the DLL. This is, however, built on the assumption that the application and the DLL may not be sharing the same CRT version which can potentially cause the program to crash when the application releases the memory that the DLL allocated. </p>\n\n<p>If a DLL is linked explicitly to the application and both are dynamically linked to CRT heap with a guarantee that they have the same CRT version, is it safe to allocate/release memory as per normal? (i.e. just the usual <code>new</code>/<code>delete</code> without any extra stuff) </p>\n\n<p>Also, by extension, is it safe to release memory that is allocated by the DLL in the application after the DLL has been released? (i.e. after calling <code>FreeLibrary</code>)</p>\n"}, {"tags": ["c++", "cmake", "mysql-connector"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540994547, "post_id": 53085181, "comment_id": 93067183, "body": "is gcc 8.1 compatible with your arm libraries?"}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540995158, "post_id": 53085181, "comment_id": 93067593, "body": "@MatthieuBrucher I&#39;m not sure, I am new to C++ and want to create a project with C++17 which requires a more recent compiler than the preinstalled gcc-4.9 and also want to be able to access my MySQL database."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540995255, "post_id": 53085181, "comment_id": 93067659, "body": "It&#39;s not always possible. You need to compile with the latest compiler compatible with your arm libraries, and I fear that&#39;s not gcc 8 (or any C++17 compiler)."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540995827, "post_id": 53085181, "comment_id": 93068062, "body": "@MatthieuBrucher Well it was tested with gcc-8.1.1 and I have gcc-8.0.13 but don&#39;t know where I can get any other gcc version for Raspberry Pis :( (I&#39;ve updated my question)"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540996011, "post_id": 53085181, "comment_id": 93068169, "body": "Well, the connector may be compatible with 8.1, but not the arm libraries."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540996198, "post_id": 53085181, "comment_id": 93068292, "body": "@MatthieuBrucher I don&#39;t understand which arm libraries, but the MySQL Connector package from apt for gcc-4.9 works on my Raspberry, but I can&#39;t use C++17 with gcc-4.9."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540996954, "post_id": 53085181, "comment_id": 93068790, "body": "/usr/include/arm-linux-gnueabihf/ That&#39;s the arm libraries, these have to be compatible with gcc 8. These are the cause of the errors, and these show that the arm libraries are not compatible with gcc 8."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540997320, "post_id": 53085181, "comment_id": 93069042, "body": "@MatthieuBrucher Okay, thank you. There is still one thing I don&#39;t get though: Why can I compile and run my program with gcc-8.1.0 and it runs (when not using the MySQL Connector). Shouldn&#39;t it be incompatible as well?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540997388, "post_id": 53085181, "comment_id": 93069092, "body": "It may depend on what headers are included :/ But perhaps someone will have a better answer."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541001380, "post_id": 53085181, "comment_id": 93071895, "body": "Seems like gcc-8 should be compatible: &quot;I&#39;ve compiled GCC 8.1.0 for Raspberry Pi, enabled languages C and C++. The compilers should work with all current versions of Pi.&quot; - <a href=\"https://bitbucket.org/sol_prog/raspberry-pi-gcc-binary.git\" rel=\"nofollow noreferrer\">Solarian Programmer</a>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541001552, "post_id": 53085181, "comment_id": 93071998, "body": "Have you used these libraries instead of the default ones at /usr/include/arm-linux-gnueabihf/? Seems like there are headers in /usr/bin/gcc-8.1.0/include/c++/8.1.0/arm-linux-gnueabihf/ as well, the first ones coming fromt he system and too old and the new ones coming with gcc 8."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541002072, "post_id": 53085181, "comment_id": 93072322, "body": "I&#39;ve only replaced gcc and g++ itself in /usr/bin and libstdc++.so.6.0.25 in /usr/lib/arm-linux-gnueabihf since I got an error without it. I didn&#39;t touch anything else because there are confusingly many files in there and I didn&#39;t want to mess up my system. (It also seemed to work fine) But if you could tell me how to properly &quot;install&quot; those, that would be great."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541002269, "post_id": 53085181, "comment_id": 93072447, "body": "I followed <a href=\"https://solarianprogrammer.com/2017/12/08/raspberry-pi-raspbian-install-gcc-compile-cpp-17-programs/\" rel=\"nofollow noreferrer\">this</a> blog (by Solarian Programmer) to install gcc-8, but I did it a little differently than he. I described my steps <a href=\"https://stackoverflow.com/questions/53071286/mysql-connector-c-crashes-with-g8-1-0-and-c17\">in this question</a>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541002331, "post_id": 53085181, "comment_id": 93072490, "body": "You shouldn&#39;t use /usr/unclude/arm-linux-gnueabihf, it is not compatible with your gcc (I think it&#39;s the tenth time I&#39;m repeating myself)."}, {"owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1541002476, "post_id": 53085181, "comment_id": 93072581, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/182884/discussion-between-minding-and-matthieu-brucher\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "is_accepted": true, "score": 0, "last_activity_date": 1541440437, "last_edit_date": 1541440437, "creation_date": 1541440132, "answer_id": 53159585, "question_id": 53085181, "link": "https://stackoverflow.com/questions/53085181/building-mysql-connector-c-from-source-with-cmake-fails-conflicts-with-a-prev/53159585#53159585", "title": "Building MySQL Connector/C++ from source with cmake fails (conflicts with a previous declaration)", "body": "<p>The solution was to install gcc properly using this command:</p>\n\n<pre><code>cp -a gcc-*version*/bin/. /usr/bin/\ncp -a gcc-*version*/lib/. /usr/lib/\n # ... (for all sub directories)\n</code></pre>\n\n<p>Which just copies all files of the source folder to the destination folder.</p>\n\n<p>Thanks to @Matthieu Brucher for telling me that I installed it wrong and how to install it properly.</p>\n"}], "owner": {"reputation": 1102, "user_id": 4180937, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/UGfj0.png?s=128&g=1", "display_name": "Minding", "link": "https://stackoverflow.com/users/4180937/minding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 53159585, "answer_count": 1, "score": -1, "last_activity_date": 1541440437, "creation_date": 1540994346, "last_edit_date": 1540996473, "question_id": 53085181, "link": "https://stackoverflow.com/questions/53085181/building-mysql-connector-c-from-source-with-cmake-fails-conflicts-with-a-prev", "title": "Building MySQL Connector/C++ from source with cmake fails (conflicts with a previous declaration)", "body": "<p>I'm trying to compile the MySQL Connector/C++ 8.0.12 using gcc-8.1.0 and cmake 3.6.2, since the apt package seems to be compiled for gcc-4.9 and crashes when used with gcc-8.1.0 compiled programs (but works with gcc-4.9 compiled programs).</p>\n\n<p>From the <a href=\"https://dev.mysql.com/doc/connector-cpp/8.0/en/connector-cpp-bugs.html\" rel=\"nofollow noreferrer\">MySQL Documentation</a>:</p>\n\n<blockquote>\n  <p>Even a small change in the compiler version can cause problems. If you obtain error messages that you suspect are related to binary incompatibilities, build Connector/C++ from source, using the same compiler and linker that you use to build and link your application.</p>\n</blockquote>\n\n<p>When I try to build the connector from source as described <a href=\"https://dev.mysql.com/doc/connector-cpp/8.0/en/connector-cpp-installation-source-cpp.html\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>git clone https://github.com/mysql/mysql-connector-cpp.git\nmkdir cppconn\ncd cppconn\n\ncmake /home/pi/mysql-connector-cpp\n # Everything looks fine except for:\nProtobuf include path: /home/pi/mysql-connector-cpp/cdk/protobuf/protobuf-2.6.1/src\n...\n-- Performing Test HAVE_IS_SAME - Failed\n\ncmake --build . --target install --config Debug\n # All lot of warings come up and then:\nScanning dependencies of target protobuf\n...\n[ 34%] Building CXX object CMakeFiles/protobuf.dir/protobuf-2.6.1/src/google/protobuf/text_format.cc.o\nIn file included from /home/pi/mysql-connector-cpp/cdk/protobuf/protobuf-2.6.1/src/google/protobuf/text_format.cc:37:\n/usr/bin/gcc-8.1.0/include/c++/8.1.0/math.h:65:12: error: \u2018constexpr bool std::isinf(double)\u2019 conflicts with a previous declaration\n using std::isinf;\n            ^~~~~\nIn file included from /usr/include/features.h:374,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/arm-linux-gnueabihf/bits/os_defines.h:39,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/arm-linux-gnueabihf/bits/c++config.h:508,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/utility:68,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/algorithm:60,\n                 from /home/pi/mysql-connector-cpp/cdk/protobuf/protobuf-2.6.1/src/google/protobuf/text_format.cc:35:\n/usr/include/arm-linux-gnueabihf/bits/mathcalls.h:201:1: note: previous declaration \u2018int isinf(double)\u2019\n __MATHDECL_1 (int,isinf,, (_Mdouble_ __value)) __attribute__ ((__const__));\n ^~~~~~~~~~~~\nIn file included from /home/pi/mysql-connector-cpp/cdk/protobuf/protobuf-2.6.1/src/google/protobuf/text_format.cc:37:\n/usr/bin/gcc-8.1.0/include/c++/8.1.0/math.h:66:12: error: \u2018constexpr bool std::isnan(double)\u2019 conflicts with a previous declaration\n using std::isnan;\n            ^~~~~\nIn file included from /usr/include/features.h:374,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/arm-linux-gnueabihf/bits/os_defines.h:39,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/arm-linux-gnueabihf/bits/c++config.h:508,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/utility:68,\n                 from /usr/bin/gcc-8.1.0/include/c++/8.1.0/algorithm:60,\n                 from /home/pi/mysql-connector-cpp/cdk/protobuf/protobuf-2.6.1/src/google/protobuf/text_format.cc:35:\n/usr/include/arm-linux-gnueabihf/bits/mathcalls.h:234:1: note: previous declaration \u2018int isnan(double)\u2019\n __MATHDECL_1 (int,isnan,, (_Mdouble_ __value)) __attribute__ ((__const__));\n</code></pre>\n\n<p><strong>The requirements stated by the <a href=\"https://dev.mysql.com/doc/dev/connector-cpp/8.0/building.html\" rel=\"nofollow noreferrer\">documentation</a>:</strong></p>\n\n<ul>\n<li>A C++ compiler that supports C++11. In case of gcc it must be at least version 4.8. These compilers have been tested: gcc 4.8.5, 5.4.0, 6.3.0, 6.3.1, 7.2.1, 7.3.0, 8.1.1, clang 9.0.0, MS Visual Studio 2015. <strong>(present ~ 8.1.0)</strong></li>\n<li>CMake 2.8.12 or later. <strong>(present - 3.6.2)</strong></li>\n<li>Boost 1.59 or later if the version of the C++ standard library used does not implement the UTF8 converter (codecvt_utf8). Boost is also required when building the legacy connector (see below). <strong>(libstdc++.so.6.0.25 supports codecvt_utf8 to my knowledge)</strong></li>\n<li>OpenSSL version 1.0.x if connector is built with OpenSSL. Instead of OpenSSL the Connector/C++ can be build using WolfSSL 3.14.0 or newer. <strong>(present - 1.0.1)</strong></li>\n<li>MySQL 8.0 client library if building the legacy connector (see below). <strong>(not necessary)</strong></li>\n</ul>\n\n<p><strong>Additional information:</strong></p>\n\n<ul>\n<li>using a Raspberry Pi 2b running Raspbian</li>\n<li>libstdc++ version is 6.0.25</li>\n<li>Protobuf version seems to be 2.6.1 (to be build)</li>\n</ul>\n\n<p>Thanks in advance. <em>-Minding</em></p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540994275, "post_id": 53085055, "comment_id": 93067009, "body": "<b><i>I ended up in an endless loop.</i></b> That is likely because you did not allow for more events. I don&#39;t see the while loop you describe however."}], "answers": [{"tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": false, "score": 3, "last_activity_date": 1541000753, "last_edit_date": 1541000753, "creation_date": 1540999198, "answer_id": 53086781, "question_id": 53085055, "link": "https://stackoverflow.com/questions/53085055/using-sfml-to-draw-stuff/53086781#53086781", "title": "Using SFML to draw stuff", "body": "<p>While you can modify a <code>sf::VertexArray</code> on the fly (basically building a vector drawing app), you can also use a <code>sf::RenderTexture</code> as an actual drawing canvas.</p>\n\n<p>Considering you tried drawing lots of small points, I'd assume you're aiming for the latter. What's important here is the fact that  you don't necessarily have to clear render textures between drawing calls and can therefore preserve whatever has been drawn before.</p>\n\n<p>Combined with the original goal \u2013 drawing \u2013 this becomes very easy.</p>\n\n<p>All you have to do is draw the changes (e.g. when moving the cursor), finalize the render texture (by calling <code>display()</code>), and then presenting it using any drawable (like <code>sf::Sprite</code>.</p>\n\n<p>I've quickly scribbled together the following example, which should show the concept rather well (and you won't run into an endless loop other than the actual main loop):</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;vector&gt;\n\nint main(int argc, char **argv) {\n    sf::RenderWindow window(sf::VideoMode(800, 600), L\"SFML Drawing \u2013 C to clear, PageUp/PageDown to pick colors\", sf::Style::Default);\n    // Set a specific frame rate, since we don't want to\n    // worry about vsync or the time between drawing iterations\n    window.setVerticalSyncEnabled(false);\n    window.setFramerateLimit(100);\n\n    // First we'll use a canvas to basically store our image\n    sf::RenderTexture canvas;\n    canvas.create(800, 600);\n    canvas.clear(sf::Color::White);\n\n    // Next we'll need a sprite as a helper to draw our canvas\n    sf::Sprite sprite;\n    sprite.setTexture(canvas.getTexture(), true);\n\n    // Define some colors to use\n    // These are all with very low alpha so we\n    // can (over-)draw based on how fast we move the cursor\n    const std::vector&lt;sf::Color&gt; colors = {\n        sf::Color(255, 0, 0, 8),\n        sf::Color(255, 255, 0, 8),\n        sf::Color(0, 255, 0, 8),\n        sf::Color(0, 255, 255, 8),\n        sf::Color(0, 0, 255, 8),\n        sf::Color(255, 0, 255, 8)\n    };\n\n    // We'll need something to actually draw\n    // For simplicity, I'm just drawing a circle shape\n    // but you could also draw a line, rectangle, or something more complex\n    const float brush_size = 25;\n    sf::CircleShape brush(brush_size, 24);\n    brush.setOrigin(brush_size, brush_size); // Center on the circle's center\n\n    sf::Vector2f lastPos;\n    bool isDrawing = false;\n    unsigned int color = 0;\n\n    // Apply some default color\n    brush.setFillColor(colors[color]);\n\n    while (window.isOpen()) {\n        sf::Event event;\n        while (window.pollEvent(event)) {\n            switch (event.type) {\n            case sf::Event::Closed:\n                window.close();\n                break;\n            case sf::Event::KeyPressed:\n                switch (event.key.code) {\n                    case sf::Keyboard::C:\n                        // Clear our canvas\n                        canvas.clear(sf::Color::White);\n                        canvas.display();\n                        break;\n                    case sf::Keyboard::PageUp:\n                        // Get next color\n                        color = (color + 1) % colors.size();\n                        // Apply it\n                        brush.setFillColor(colors[color]);\n                        break;\n                    case sf::Keyboard::PageDown:\n                        // Get previous color\n                        color = (color - 1) % colors.size();\n                        // Apply it\n                        brush.setFillColor(colors[color]);\n                        break;\n                }\n                break;\n            case sf::Event::Resized:\n                {\n                    // Window got resized, update the view to the new size\n                    sf::View view(window.getView());\n                    const sf::Vector2f size(window.getSize().x, window.getSize().y);\n                    view.setSize(size); // Set the size\n                    view.setCenter(size / 2.f); // Set the center, moving our drawing to the top left\n                    window.setView(view); // Apply the view\n                    break;\n                }\n            case sf::Event::MouseButtonPressed:\n                // Only care for the left button\n                if (event.mouseButton.button == sf::Mouse::Left) {\n                    isDrawing = true;\n                    // Store the cursor position relative to the canvas\n                    lastPos = window.mapPixelToCoords({event.mouseButton.x, event.mouseButton.y});\n\n                    // Now let's draw our brush once, so we can\n                    // draw dots without actually draging the mouse\n                    brush.setPosition(lastPos);\n\n                    // Draw our \"brush\"\n                    canvas.draw(brush);\n\n                    // Finalize the texture\n                    canvas.display();\n                }\n                break;\n            case sf::Event::MouseButtonReleased:\n                // Only care for the left button\n                if (event.mouseButton.button == sf::Mouse::Left)\n                    isDrawing = false;\n                break;\n            case sf::Event::MouseMoved:\n                if (isDrawing)\n                {\n                    // Calculate the cursor position relative to the canvas\n                    const sf::Vector2f newPos(window.mapPixelToCoords(sf::Vector2i(event.mouseMove.x, event.mouseMove.y)));\n\n                    // I'm only using the new position here\n                    // but you could also use `lastPos` to draw a\n                    // line or rectangle instead\n                    brush.setPosition(newPos);\n\n                    // Draw our \"brush\"\n                    canvas.draw(brush);\n\n                    // Finalize the texture\n                    canvas.display();\n                    break;\n                }\n            }\n        }\n\n        // Clear the window\n        window.clear(sf::Color(64, 64, 64));\n\n        // Draw our canvas\n        window.draw(sprite);\n\n        // Show the window\n        window.display();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Once running, you can start drawing using the left mouse button. <kbd>C</kbd> will clear the canvas and <kbd>Page Up</kbd> and <kbd>Page Down</kbd> allow you to pick a different color:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OTgHV.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OTgHV.jpg\" alt=\"Screenshot of the example running\"></a></p>\n\n<p><strong>Edit:</strong> And just to mention it, in the example above, rather than drawing  a circle, you can just draw a <code>sf::VertexArray</code> with <code>sf::Lines</code> and two vertices: <code>lastPos</code> and <code>newPos</code>. This way you'll always draw a continuous line. (But you'd obviously have to save/update <code>lastPos</code> with the value of <code>newPos</code> once you're done.)</p>\n"}], "owner": {"reputation": 31, "user_id": 5264598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-IBdYxq5dfVQ/AAAAAAAAAAI/AAAAAAAAAKU/45SX_NWJV2U/photo.jpg?sz=128", "display_name": "Nexitis", "link": "https://stackoverflow.com/users/5264598/nexitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "closed_date": 1541039265, "answer_count": 1, "score": -2, "last_activity_date": 1541000753, "creation_date": 1540994006, "last_edit_date": 1540994717, "question_id": 53085055, "link": "https://stackoverflow.com/questions/53085055/using-sfml-to-draw-stuff", "closed_reason": "Needs more focus", "title": "Using SFML to draw stuff", "body": "<p>I'm trying to create a scribble clone for a uni project.</p>\n\n<p>My lines are basically a lot of dots. If I draw too quick, the line breaks and I have single dots.\nAlso, I can't figure out how to draw lines ONLY when a mouse button is pressed.\nI tried to put <code>mouseMoved</code> into a while loop until <code>mouseButton</code> is released but that didn't seem to work. I ended up in an infinite loop.</p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>    while (window.isOpen())\n    {\n\n        while (window.pollEvent(event))\n        {\n\n            int mouseButtonX = event.mouseButton.x;\n            int mouseButtonY = event.mouseButton.y;\n\n            int mouseMoveX = event.mouseMove.x;\n            int mouseMoveY = event.mouseMove.y;\n\n            setBrushSize(5);\n\n            brush.setRadius(brushSize);\n            brush.setPosition(mouseMoveX - brushSize, mouseMoveY - brushSize);\n            brush.setFillColor(sf::Color::Transparent);\n            brush.setOutlineColor(sf::Color::Green);\n            brush.setOutlineThickness(2);\n\n            switch (event.type) {\n            case (sf::Event::Closed):\n                window.close();\n                break;\n\n            case (sf::Event::KeyPressed):\n                if (event.key.control &amp;&amp; event.key.code == sf::Keyboard::X) {\n                    cout &lt;&lt; \"closing\";\n\n                    window.close();\n                }\n\n                if (event.key.code == sf::Keyboard::R) {\n                    cout &lt;&lt; \"printed\";\n                    brushColor = setBrushColor(255, 0, 0);\n                }\n                if (event.key.code == sf::Keyboard::G) {\n                    brushColor = setBrushColor(0, 255, 0);\n                }\n                if (event.key.code == sf::Keyboard::B) {\n                    brushColor = setBrushColor(0, 0, 255);\n                }\n                if (event.key.code == sf::Keyboard::C) {\n                    for (int i = 0; i &lt; points.size(); i++) {\n                        points.clear();\n                    }\n                    it = 0;\n                }\n                break;\n\n            case(sf::Event::MouseButtonPressed):\n                points.push_back(point);\n                points[it].setRadius(brushSize);\n                points[it].setFillColor(brushColor);\n                points[it].setPosition(mouseButtonX - brushSize, mouseButtonY - brushSize);\n                it++;\n                cout &lt;&lt; \"drawPoint: Pressed X = \" &lt;&lt; mouseButtonX &lt;&lt; \" Y = \" &lt;&lt; mouseButtonY &lt;&lt; endl;\n\n                break;\n\n            case(sf::Event::MouseMoved):\n                points.push_back(point);\n                points[it].setRadius(brushSize);\n                points[it].setFillColor(brushColor);\n                points[it].setPosition(mouseMoveX - brushSize, mouseMoveY - brushSize);\n                it++;\n                cout &lt;&lt; \"drawPoint: Moved X = \" &lt;&lt; mouseMoveX &lt;&lt; \" Y = \" &lt;&lt; mouseMoveY &lt;&lt; endl;\n                break;\n            }\n        }\n\n\n        window.clear(sf::Color(255, 247, 204));\n        window.draw(SkechyT);\n        window.draw(close);\n        window.draw(brush);\n        window.draw(color);\n        window.draw(clear);\n\n\n        for (int i = 0; i &lt; points.size(); i++) {\n            window.draw(points[i]);\n        }\n\n        //window.draw(point);\n\n        window.display();\n    }\n}\n\n\nint getBrushSize() {\n    return brushSize;\n}\n\nvoid setBrushSize(int num) {\n    brushSize = num;\n\n}\n\nsf::Color setBrushColor(int r, int g, int b) {\n    return sf::Color(r, g, b);\n}\n\n~Visualizer();\n</code></pre>\n\n<p>};</p>\n"}, {"tags": ["c++", "qt", "hover", "transition", "qwidget"], "comments": [{"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 2, "creation_date": 1540995052, "post_id": 53084981, "comment_id": 93067530, "body": "QSS is not CSS. There is no <code>transition</code> property. <a href=\"http://doc.qt.io/qt-5/stylesheet-reference.html#list-of-properties\" rel=\"nofollow noreferrer\">Here</a> is a list of all available properties."}, {"owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "edited": false, "score": 0, "creation_date": 1541582010, "post_id": 53084981, "comment_id": 93262228, "body": "There are already two answers to this question. May I ask you to provide feedback and accept one of them."}], "answers": [{"tags": [], "owner": {"reputation": 879, "user_id": 10384826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b5eCIz3fk9U/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOTRIfnFbGzOcKLPms4zg6nAaZvgA/mo/photo.jpg?sz=128", "display_name": "Serhiy Kulish", "link": "https://stackoverflow.com/users/10384826/serhiy-kulish"}, "is_accepted": false, "score": 2, "last_activity_date": 1540999317, "creation_date": 1540999317, "answer_id": 53086808, "question_id": 53084981, "link": "https://stackoverflow.com/questions/53084981/how-to-add-a-hover-transition-to-qpushbutton/53086808#53086808", "title": "How to add a hover transition to QPushButton?", "body": "<p>You can use <a href=\"http://doc.qt.io/qt-5/animation-overview.html\" rel=\"nofollow noreferrer\">Animation</a>.</p>\n\n<p><strong>MyButton.h</strong></p>\n\n<pre><code>#include &lt;QPushButton&gt;\n#include &lt;QColor&gt;\n#include &lt;QPropertyAnimation&gt;\n\nclass MyButton : public QPushButton\n{\n    Q_OBJECT\n    Q_PROPERTY(QColor color READ GetColor WRITE SetColor)\n\npublic:\n    explicit MyButton(QWidget *parent = 0);\n\n    void SetColor(const QColor&amp; color);\n    const QColor&amp; GetColor() const;\n\nprotected:\n    bool eventFilter(QObject *obj, QEvent *e);\n\nprivate:\n    QColor m_currentColor;\n\n    QPropertyAnimation m_colorAnimation;\n\n    void StartHoverEnterAnimation();\n    void StartHoverLeaveAnimation();\n};\n</code></pre>\n\n<p><strong>MyButton.cpp</strong> </p>\n\n<pre><code>#include \"MyButton.h\"\n\n#include &lt;QEvent&gt;\n#include &lt;QDebug&gt;\n\nMyButton::MyButton(QWidget *parent) :\n    QPushButton(parent),\n    m_colorAnimation(this, \"color\")\n{\n    this-&gt;installEventFilter(this);\n}\n\nvoid MyButton::SetColor(const QColor&amp; color)\n{\n    m_currentColor = color;\n    QString css = \"QPushButton { border-radius: 5px; \";\n    css.append(\"border: 1.5px solid rgb(91,231,255); \");\n    QString strColor = QString(\"rgb(%1, %2, %3)\").arg(color.red()).arg(color.green()).arg(color.blue());\n    css.append(\"background-color: \" + strColor + \"; }\");\n    setStyleSheet(css);\n}\n\nconst QColor&amp; MyButton::GetColor() const\n{\n    return m_currentColor;\n}\n\nbool MyButton::eventFilter(QObject *obj, QEvent *e)\n{\n    if (e-&gt;type() == QEvent::HoverEnter) {\n        StartHoverEnterAnimation();\n    }\n\n    if (e-&gt;type() == QEvent::HoverLeave) {\n        StartHoverLeaveAnimation();\n    }\n\n    return false;\n}\n\nvoid MyButton::StartHoverEnterAnimation()\n{\n    m_colorAnimation.stop();\n\n    m_colorAnimation.setDuration(900); //set your transition\n    m_colorAnimation.setStartValue(GetColor()); //starts from current color\n    m_colorAnimation.setEndValue(QColor(100, 100, 100));//set your hover color\n\n    m_colorAnimation.setEasingCurve(QEasingCurve::Linear);//animation style\n\n    m_colorAnimation.start();\n}\n\nvoid MyButton::StartHoverLeaveAnimation()\n{\n    m_colorAnimation.stop();\n\n    m_colorAnimation.setDuration(900); //set your transition\n    m_colorAnimation.setStartValue(GetColor()); //starts from current color\n    m_colorAnimation.setEndValue(QColor(255, 0, 0));//set your regular color\n\n    m_colorAnimation.setEasingCurve(QEasingCurve::Linear);//animation style\n\n    m_colorAnimation.start();\n}\n</code></pre>\n\n<p>It will conflict with external qss setting. So set all qss in <code>SetColor</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 6908, "user_id": 5366641, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/71e9ba6e3cdac2461999d9c32ad9d507?s=128&d=identicon&r=PG", "display_name": "scopchanov", "link": "https://stackoverflow.com/users/5366641/scopchanov"}, "is_accepted": true, "score": 10, "last_activity_date": 1541008450, "last_edit_date": 1541008450, "creation_date": 1541007676, "answer_id": 53089207, "question_id": 53084981, "link": "https://stackoverflow.com/questions/53084981/how-to-add-a-hover-transition-to-qpushbutton/53089207#53089207", "title": "How to add a hover transition to QPushButton?", "body": "<h1>Cause</h1>\n\n<p><em>QSS</em> is not <em>CSS</em>. There is no transition property. <a href=\"http://doc.qt.io/qt-5/stylesheet-reference.html#list-of-properties\" rel=\"noreferrer\">Here</a> is a list of all available properties.</p>\n\n<h1>Solution</h1>\n\n<p>Instead of using stylesheets, I would suggest you to take another path, which is longer, but gives you more flexibility. Here is the solution:</p>\n\n<ol>\n<li><p>Create a subclass of <code>QPushButton</code>, e.g. <code>AnimatedHoverButton</code></p></li>\n<li><p>Get notified about <code>QEvent::HoverEnter</code> and <code>QEvent::HoverLeave</code> <a href=\"http://doc.qt.io/qt-5/qevent.html#Type-enum\" rel=\"noreferrer\">events</a> by reimplementing <code>QPushButton::event</code></p>\n\n<pre><code>bool AnimatedHoverButton::event(QEvent *event)\n{\n    switch (event-&gt;type()) {\n    case QEvent::HoverEnter:\n        animateHover(true);\n        break;\n    case QEvent::HoverLeave:\n        animateHover(false);\n        break;\n    }\n\n    return QPushButton::event(event);\n}\n</code></pre></li>\n<li><p>Create the <code>in</code> and <code>out</code> transition by using <a href=\"http://doc.qt.io/qt-5/qvariantanimation.html\" rel=\"noreferrer\"><code>QVariantAnimation</code></a></p>\n\n<pre><code>void AnimatedHoverButton::animateHover(bool in)\n{\n    const QColor &amp;baseColor(palette().brush(QPalette::Button).color());\n    const QColor &amp;highlightColor(palette().brush(QPalette::Highlight).color());\n    QColor startValue(in ? baseColor : highlightColor);\n\n    if (m_transition) {\n        startValue = m_transition-&gt;currentValue().value&lt;QColor&gt;();\n        m_transition-&gt;stop();\n    }\n\n    m_transition = new QVariantAnimation(this);\n\n    m_transition-&gt;setStartValue(startValue);\n    m_transition-&gt;setEndValue(in ? highlightColor : baseColor);\n    m_transition-&gt;setDuration(m_duration);\n\n    connect(m_transition, &amp;QVariantAnimation::valueChanged, [this](const QVariant &amp;value){\n        m_currentColor = value.value&lt;QColor&gt;();\n        repaint();\n    });\n\n    connect(m_transition, &amp;QVariantAnimation::destroyed, [this](){\n        m_transition = nullptr;\n    });\n\n    m_transition-&gt;start(QAbstractAnimation::DeleteWhenStopped);\n}\n</code></pre></li>\n<li><p>Paint the button by reimplementing the <code>QPushButton::paintEvent</code> event handler and taking into account the current value of the animation</p>\n\n<pre><code>void AnimatedHoverButton::paintEvent(QPaintEvent * /*event*/)\n{\n    QStylePainter painter(this);\n    QStyleOptionButton option;\n    QPalette p(palette());\n\n    initStyleOption(&amp;option);\n\n    p.setBrush(QPalette::Button, m_currentColor);\n\n    option.palette = p;\n    option.state |= QStyle::State_MouseOver;\n\n    painter.drawControl(QStyle::CE_PushButton, option);\n}\n</code></pre></li>\n</ol>\n\n<p><strong>Note:</strong> This solution uses the widget's palette to set the start and end values of the animation.</p>\n\n<h1>Example</h1>\n\n<p>The solution might seem complicated, but fortunatelly I have prepared a working example for you of how to implement and use the <code>AnimatedHoverButton</code> class.</p>\n\n<p>The following code fragment uses the <code>AnimatedHoverButton</code> class to produce a result, similar to the <em>CSS</em> example you have provided:</p>\n\n<pre><code>auto *button = new AnimatedHoverButton(tr(\"Hover Over Me\"), this);\n\nQPalette p(button-&gt;palette());\n\np.setBrush(QPalette::Button, QColor(\"#F89778\"));\np.setBrush(QPalette::ButtonText, QColor(\"#FFFFFF\"));\np.setBrush(QPalette::Highlight, QColor(\"#F4511E\"));\n\nbutton-&gt;setPalette(p);\nbutton-&gt;setTransitionDuration(300);\n\nsetCentralWidget(button);\nsetContentsMargins(10, 10, 10, 10);\n</code></pre>\n\n<p>The full code of the example is available on <a href=\"https://github.com/scopchanov/SO-AnimatedHoverButton\" rel=\"noreferrer\">GitHub</a>.</p>\n\n<h1>Result</h1>\n\n<p>The given example produces the following result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nw3kT.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nw3kT.png\" alt=\"Window with a highlighted custom button\"></a></p>\n"}], "owner": {"reputation": 57, "user_id": 9457368, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Bastien Cuenot", "link": "https://stackoverflow.com/users/9457368/bastien-cuenot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5299, "favorite_count": 2, "accepted_answer_id": 53089207, "answer_count": 2, "score": 3, "last_activity_date": 1541008450, "creation_date": 1540993773, "last_edit_date": 1541007919, "question_id": 53084981, "link": "https://stackoverflow.com/questions/53084981/how-to-add-a-hover-transition-to-qpushbutton", "title": "How to add a hover transition to QPushButton?", "body": "<p>I try to make a custom <code>QPushButton</code> with a stylesheet. I want to custom color of button when we mouse over it. It works, but I want to put a transition duration.\nBut in Qt this option is not available.</p>\n\n<p>Here is my custom button:</p>\n\n<pre><code>#include \"bouton.h\"\n\nBouton::Bouton(QString title, QWidget *parent) : QPushButton()\n{\n  setGeometry(50,50,120,40);\n  setText(title);\n  setMinimumHeight(30);\n  setParent(parent);\n  setStyleSheet(\" QPushButton {\"\n              \"border-radius: 5px; \"\n              \"border: 1.5px solid rgb(91,231,255); \"\n              \"background-color: white; }\"\n              \"QPushButton:pressed {\"\n              \"border: 1.4px solid rgb(73,186,205); }\"\n              \"QPushButton:hover {\"\n              \"font-size: 16px;\"\n              \"transition: 0.9s; }\");\n}\n</code></pre>\n\n<p>The argument \"transition 0.9s\" doesn't work.</p>\n\n<p>Here is an <a href=\"https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_buttons_fade1\" rel=\"nofollow noreferrer\">example in CSS</a>.</p>\n\n<p>Are there other ways to do this?</p>\n"}, {"tags": ["c++", "visual-studio"], "answers": [{"comments": [{"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1541020010, "post_id": 53085052, "comment_id": 93080697, "body": "<code>__builtin_FUNCTION</code> is GCC support for <code>source_location</code> implementation! That is a really funny answer for a direct question!"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1541020177, "post_id": 53085052, "comment_id": 93080752, "body": "@Oliv sorry I don&#39;t understand your comment? The OP was looking for a visual studio solution"}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1541020735, "post_id": 53085052, "comment_id": 93080955, "body": "Do you mean  source_location is implemented in MSVC?"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 7, "last_activity_date": 1540993994, "creation_date": 1540993994, "answer_id": 53085052, "question_id": 53084780, "link": "https://stackoverflow.com/questions/53084780/is-there-msvc-equivalent-for-builtin-function/53085052#53085052", "title": "Is there MSVC equivalent for __builtin__FUNCTION()?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/experimental/source_location\" rel=\"noreferrer\"><code>std::source_location</code></a>\n will be the cross platform solution in the future allowing you to do:</p>\n\n<pre><code>void log(const std::string&amp; message, const std::experimental::source_location&amp; location = std::experimental::source_location::current())\n{\n    std::cout &lt;&lt; location.function_name() &lt;&lt; \": \" &lt;&lt; message &lt;&lt; \"\\n\";\n}\n\nint main()\n{\n   log(\"test\");\n}\n</code></pre>\n\n<p>Until this is available the best solution I am aware of is to use macros to capture the value of <code>__FUNCTION__</code> and pass it to your function. For example something like this:</p>\n\n<pre><code>void log(const std::string&amp; message, const std::string&amp; function)\n{\n}\n\n#define LOG(message) log(message, __FUNCTION__)\n\nint main()\n{\n  LOG(\"test\");\n}\n</code></pre>\n"}], "owner": {"reputation": 2070, "user_id": 4806882, "user_type": "registered", "accept_rate": 93, "profile_image": "https://lh4.googleusercontent.com/-WMwvS3DOZZ0/AAAAAAAAAAI/AAAAAAAAAkA/Az2QxF6B3WU/photo.jpg?sz=128", "display_name": "Alexandru Irimiea", "link": "https://stackoverflow.com/users/4806882/alexandru-irimiea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 1, "accepted_answer_id": 53085052, "answer_count": 1, "score": 6, "last_activity_date": 1540993994, "creation_date": 1540993202, "question_id": 53084780, "link": "https://stackoverflow.com/questions/53084780/is-there-msvc-equivalent-for-builtin-function", "title": "Is there MSVC equivalent for __builtin__FUNCTION()?", "body": "<p>According to this <a href=\"https://stackoverflow.com/a/43970783/4806882\">answer</a> we can find the name of the calling function using <code>__builtin__FUNCTION()</code> in GCC. Is there MSVC equivalent for this?</p>\n"}, {"tags": ["c++", "linux", "visual-studio-code"], "comments": [{"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 0, "creation_date": 1540994219, "post_id": 53084759, "comment_id": 93066971, "body": "Hello, welcome to SO. Please provide more content from your tasks.json and of the makefile. What you give is not enough information for us to know what might be going wrong."}, {"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1540994650, "post_id": 53084759, "comment_id": 93067257, "body": "Have you already installed <a href=\"https://askubuntu.com/a/839163\">libc6-dev</a>?"}, {"owner": {"reputation": 19, "user_id": 10586046, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940526135994955/picture?type=large", "display_name": "Artem", "link": "https://stackoverflow.com/users/10586046/artem"}, "edited": false, "score": 0, "creation_date": 1540994962, "post_id": 53084759, "comment_id": 93067465, "body": "Tezirg - please see my updated post. Ayak973 - obviously not installed but from command line all is ok."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10586046, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940526135994955/picture?type=large", "display_name": "Artem", "link": "https://stackoverflow.com/users/10586046/artem"}, "edited": false, "score": 0, "creation_date": 1541155148, "post_id": 53086765, "comment_id": 93128310, "body": "Unfortunately it does not help, everything is correct with directories. The VS Code displays at the first line <code>&gt; Executing task in folder ClanLib: make QUIET=0 &lt;</code> and this is the correct directory."}], "tags": [], "owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "is_accepted": false, "score": 0, "last_activity_date": 1540999147, "creation_date": 1540999147, "answer_id": 53086765, "question_id": 53084759, "link": "https://stackoverflow.com/questions/53084759/vs-code-command-make-differs-from-command-line-make-in-terminal-window/53086765#53086765", "title": "VS Code &quot;command&quot;: &quot;make&quot; differs from command line `make` in terminal window", "body": "<p>It looks like you try build manually with your makefile within a directory, and vscode from another.\nIf it is the case, you can tell your tasks to run from a specific directory with the <code>cwd</code> option - <a href=\"https://code.visualstudio.com/docs/editor/tasks\" rel=\"nofollow noreferrer\">doc</a>:</p>\n\n<pre><code>{\n// See https://go.microsoft.com/fwlink/?LinkId=733558\n// for the documentation about the tasks.json format\n\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"ClanLib\",\n            \"type\": \"shell\",\n            \"command\": \"make\",\n\n            \"options\": {\n                \"cwd\": \"${workspaceRoot}/&lt;DIR_WITH_MAKEFILE&gt;\"\n            }\n            ...\n}]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 10586046, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940526135994955/picture?type=large", "display_name": "Artem", "link": "https://stackoverflow.com/users/10586046/artem"}, "is_accepted": false, "score": 0, "last_activity_date": 1541302947, "last_edit_date": 1541302947, "creation_date": 1541301533, "answer_id": 53137465, "question_id": 53084759, "link": "https://stackoverflow.com/questions/53084759/vs-code-command-make-differs-from-command-line-make-in-terminal-window/53137465#53137465", "title": "VS Code &quot;command&quot;: &quot;make&quot; differs from command line `make` in terminal window", "body": "<p>It seems I felt something. In the terminal window inside VSCode I see</p>\n\n<pre><code> sh-4.4$ help\n GNU bash, \u0432\u0435\u0440\u0441\u0438\u044f 4.4.19(1)-release (x86_64-unknown-linux-gnu)\n</code></pre>\n\n<p>But in the OS terminal:</p>\n\n<pre><code>art@artPC:~/git/ClanLib$ help\nGNU bash, \u0432\u0435\u0440\u0441\u0438\u044f 4.4.19(1)-release (x86_64-pc-linux-gnu)\n</code></pre>\n\n<p>The difference is <strong>-unknown-</strong> and <strong>-pc-</strong>. Result of <code>whoami</code> is the same on both terminals.</p>\n\n<p>And finally in VSCode terminal:</p>\n\n<pre><code>sh-4.4$ ls\nx86_64-unknown-linux-gnu\n</code></pre>\n\n<p>Name of symbolic-link <code>x86_64-unknown-linux-gnu</code> is defferent between OS and VSCode. Bug of VSCode? </p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 10586046, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940526135994955/picture?type=large", "display_name": "Artem", "link": "https://stackoverflow.com/users/10586046/artem"}, "is_accepted": true, "score": 0, "last_activity_date": 1541565944, "creation_date": 1541565944, "answer_id": 53183692, "question_id": 53084759, "link": "https://stackoverflow.com/questions/53084759/vs-code-command-make-differs-from-command-line-make-in-terminal-window/53183692#53183692", "title": "VS Code &quot;command&quot;: &quot;make&quot; differs from command line `make` in terminal window", "body": "<p>The solution is here\n<a href=\"https://github.com/Microsoft/vscode/issues/62532\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/vscode/issues/62532</a></p>\n\n<p>Thanks for mr. @jerch</p>\n\n<blockquote>\n  <p>you have different build sets installed, see \"GNU Make 4.1\" vs. \"GNU Make 4.2.1\". For some reason /bin/sh defaults to the other one. To fix that you have to consult your distro's help (in Ubuntu you can switch buildsets with the update-alternatives command).</p>\n</blockquote>\n"}], "owner": {"reputation": 19, "user_id": 10586046, "user_type": "registered", "profile_image": "https://graph.facebook.com/1940526135994955/picture?type=large", "display_name": "Artem", "link": "https://stackoverflow.com/users/10586046/artem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 53183692, "answer_count": 3, "score": 1, "last_activity_date": 1541565944, "creation_date": 1540993137, "last_edit_date": 1540994853, "question_id": 53084759, "link": "https://stackoverflow.com/questions/53084759/vs-code-command-make-differs-from-command-line-make-in-terminal-window", "title": "VS Code &quot;command&quot;: &quot;make&quot; differs from command line `make` in terminal window", "body": "<p>I installed VS Code for Linux some time ago, opened a C ++ project in the workspace, created <code>tasks.json</code> - in general I did everything according to Google.</p>\n\n<p>When I run the <code>make</code> command in a terminal window, everything is OK. But when I do the same (Ctrl+Shift+B) from VS Code I get an error.</p>\n\n<p>Processing my <code>Makefile</code> terminates after the command <code>libtool: link: c++  -fPIC -DPIC -shared -nostdlib /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../x86_64-linux-gnu/crti.o ....</code></p>\n\n<p>with message\n<code>c++: error: /usr/bin/../lib/gcc/x86_64-linux-gnu/7.3.0/../../../x86_64-linux-gnu/crti.o: No such file or directory</code>.</p>\n\n<p>Of course, the path is correct (and is good when I use the command line <code>make</code> in a terminal window).</p>\n\n<p>Contents of <code>tasks.json</code> is trivial (same as in microsoft.com):</p>\n\n<pre><code>{\n// See https://go.microsoft.com/fwlink/?LinkId=733558\n// for the documentation about the tasks.json format\n\"version\": \"2.0.0\",\n\"tasks\": [\n    {\n        \"label\": \"ClanLib\",\n        \"type\": \"shell\",\n        \"command\": \"make\",\n        // start the build without prompting for task selection, use \"group\": \"build\" otherwise\n        \"group\": {\n            \"kind\": \"build\",\n            \"isDefault\": true\n        },\n        \"presentation\": {\n            \"echo\": true,\n            \"reveal\": \"always\",\n            \"focus\": false,\n            \"panel\": \"shared\"\n        },\n        // arg passing example: in this case is executed make QUIET=0\n        \"args\": [\"QUIET=0\"],\n        // Use the standard less compilation problem matcher.\n        \"problemMatcher\": {\n            \"owner\": \"cpp\",\n            \"fileLocation\": [\"absolute\"],\n            \"pattern\": {\n                \"regexp\": \"^(.*):(\\\\d+):(\\\\d+):\\\\s+(warning|error):\\\\s+(.*)$\",\n                \"file\": 1,\n                \"line\": 2,\n                \"column\": 3,\n                \"severity\": 4,\n                \"message\": 5\n            }\n        }\n    }\n]\n}\n</code></pre>\n\n<p>I can't post <code>Makefile</code>, it consists of thousands of lines of code after autogeneration from <a href=\"https://github.com/sphair/ClanLib\" rel=\"nofollow noreferrer\">https://github.com/sphair/ClanLib</a>...</p>\n\n<p>Please help with setting up Visual Studio Code (Linux Mint).</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 1, "creation_date": 1540993005, "post_id": 53084703, "comment_id": 93066116, "body": "Why is not <code>std::array</code> sufficient for Your use case?"}, {"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "reply_to_user": {"reputation": 8857, "user_id": 3414900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/KlvbC.jpg?s=128&g=1", "display_name": "bartop", "link": "https://stackoverflow.com/users/3414900/bartop"}, "edited": false, "score": 0, "creation_date": 1540993145, "post_id": 53084703, "comment_id": 93066222, "body": "My use case is to implement a <code>static_vector&lt;T, 10&gt;</code> where 10 would be the capacity, and the vector itself keeps track of current count of entries. <code>std::array</code> alone cannot leave some entries with the constructor of <code>T</code> not run."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540993205, "post_id": 53084703, "comment_id": 93066258, "body": "<code>std::array&lt;optional&lt;T&gt;, 10&gt;</code> ?"}, {"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540993330, "post_id": 53084703, "comment_id": 93066345, "body": "@Jarod42 I tried the approach of making my <code>static_vector</code> be a wrapper of <code>std::array&lt;std::optional&lt;T&gt;, 10&gt;</code> along with a count, but <code>std::optional</code> is only partially constexpr enabled. for example, <code>operator=</code> or <code>.emplace</code> or any other way of setting the value that is not initialisation is not constexpr"}, {"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "edited": false, "score": 0, "creation_date": 1540993375, "post_id": 53084703, "comment_id": 93066372, "body": "@Someprogrammerdude Please read the post before answering. placement-new (and reinterpret_cast for the matter) are not available in constexpr contexts"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540993650, "post_id": 53084703, "comment_id": 93066562, "body": "I see some conflicting goals here: First of all you want the array to create objects dynamically, i.e. at run-time. But you also want to use <code>constexpr</code> which seems to indicate you want object creation to happen at compile-time? Can you please elaborate on the actual problem you&#39;re trying to solve with a solution like that? What is the use-case?"}, {"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540994025, "post_id": 53084703, "comment_id": 93066844, "body": "@Someprogrammerdude The memory is meant to be statically allocated and known at compile time. The objects are meant to be initialized only when added to the container, which might be in runtime, or in compile time inside a constexpr factory function for example: <code>constexpr static_vector&lt;T, 10&gt; vec = make_vec(...);</code> where <code>make_vec</code> is a constexpr function."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1540994394, "post_id": 53084703, "comment_id": 93067072, "body": "@Tobias AFAIK, the only way to change the active member of a union where the member is not trivial is to use placement new.  The reason is that the constructor needs to be called on that storage to start it&#39;s lifetime and you can&#39;t do that without the placement new expression."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540995272, "post_id": 53084703, "comment_id": 93067671, "body": "Does it <i>have</i> to be <code>constexpr</code>? Can&#39;t it be just plain <code>const</code>? And I still fail to see why you need a dynamic-size-but-fixed-capacity container that you can&#39;t actually add new elements to (the dynamic part). Why can&#39;t you use e.g. <code>constexpr auto vec = make_vec&lt;int, 10&gt;(...);</code> (where <code>make_vec</code> is something like <code>template&lt;typename T, size_t N&gt; constexpr std::array&lt;T, N&gt; make_vec(...) { ... }</code>)?"}, {"owner": {"reputation": 26039, "user_id": 245265, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/416db680915c487cfe3349aeb498ce44?s=128&d=identicon&r=PG", "display_name": "Emile Cormier", "link": "https://stackoverflow.com/users/245265/emile-cormier"}, "edited": false, "score": 0, "creation_date": 1603327597, "post_id": 53084703, "comment_id": 114005277, "body": "If you can live without compile-time assignment, your compile-time container may still be &quot;write-once&quot; for trivially destructible types using Andrzej&#39;s dual base class technique in <a href=\"https://github.com/akrzemi1/Optional/blob/master/optional.hpp\" rel=\"nofollow noreferrer\">github.com/akrzemi1/Optional/blob/master/optional.hpp</a>"}], "answers": [{"comments": [{"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "edited": false, "score": 0, "creation_date": 1540993912, "post_id": 53084973, "comment_id": 93066751, "body": "I am not sure I understand, how will that const array of non-const objects not mean that the constructor of T is called on every item initially?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540993978, "post_id": 53084973, "comment_id": 93066805, "body": "If you make an <code>array&lt;remove_const_t&lt;T&gt;, Capacity&gt;&gt;</code> it&#39;s going to initialize the members which the OP doesn&#39;t want"}, {"owner": {"reputation": 1, "user_id": 10586264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2986fbc5f927ead7370b1846be1139?s=128&d=identicon&r=PG&f=1", "display_name": "user10586264", "link": "https://stackoverflow.com/users/10586264/user10586264"}, "reply_to_user": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "edited": false, "score": 0, "creation_date": 1540994142, "post_id": 53084973, "comment_id": 93066910, "body": "@Tobias You said that you want to be able to use it at runtime. For non-trivial objects, you will need to use non-constexpr emplace_back which will use placement new."}, {"owner": {"reputation": 1, "user_id": 10586264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2986fbc5f927ead7370b1846be1139?s=128&d=identicon&r=PG&f=1", "display_name": "user10586264", "link": "https://stackoverflow.com/users/10586264/user10586264"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540994342, "post_id": 53084973, "comment_id": 93067046, "body": "@NathanOliver You can&#39;t have your cake and eat it too. It&#39;s possible to have uninitialized storage at compile time, but you can&#39;t also construct those objects (using placement new) at compile-time. My code is only showing the case for <i>trivial</i> objects."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540994562, "post_id": 53084973, "comment_id": 93067193, "body": "But <code>data_t data_{}</code> does initialize trivial objects since <code>array</code> is an aggregate.  They will all be zero initialized."}, {"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "edited": false, "score": 0, "creation_date": 1540995627, "post_id": 53084973, "comment_id": 93067917, "body": "@user10586264 as described in my post, you can <i>almost</i> do what i want using unions, and it works leaving the items uninitialized in compile time, with exception for the assignment operator problem"}], "tags": [], "owner": {"reputation": 1, "user_id": 10586264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa2986fbc5f927ead7370b1846be1139?s=128&d=identicon&r=PG&f=1", "display_name": "user10586264", "link": "https://stackoverflow.com/users/10586264/user10586264"}, "is_accepted": false, "score": -2, "last_activity_date": 1540994623, "last_edit_date": 1540994623, "creation_date": 1540993745, "answer_id": 53084973, "question_id": 53084703, "link": "https://stackoverflow.com/questions/53084703/constexpr-alternative-to-placement-new-to-be-able-to-leave-objects-in-memory-uni/53084973#53084973", "title": "Constexpr alternative to placement new to be able to leave objects in memory uninitialized?", "body": "<p>Your storage can look something like this:</p>\n\n<pre><code>// For trivial objects\nusing data_t = const array&lt;remove_const_t&lt;T&gt;, Capacity&gt;&gt;;\nalignas(alignof(T)) data_t data_{};\n// For non-trivial objects\nalignas(alignof(T)) aligned_storage_t&lt;T&gt; data_[Capacity]{};\n</code></pre>\n\n<p>This will allow you to create a <code>const</code> array of <em>non</em>-<code>const</code> objects. Then constructing objects will look something like this:</p>\n\n<pre><code>// Not real code, for trivial objects\ndata_[idx] = T(forward&lt;Args&gt;(args)...);\n// For non-trivial objects\nnew (end()) T(forward&lt;Args&gt;(args)...);\n</code></pre>\n\n<p>Placement new is mandatory here. You will be able to have the storage at compile-time, but you cannot <strong>construct</strong> it at compile-time for non-trivial objects.</p>\n\n<p>You will also need to take into account whether or not your container is zero-sized, etc. I suggest you look at existing implementations for fixed sized vectors and there are even some proposals for <code>constexpr</code> fixed sized vectors like <a href=\"http://open-std.org/JTC1/SC22/WG21/docs/papers/2018/p0843r1.html\" rel=\"nofollow noreferrer\">p0843r1</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "edited": false, "score": 0, "creation_date": 1541000774, "post_id": 53087000, "comment_id": 93071490, "body": "Thanks for a comprehensive answer. Too bad c++ doesn&#39;t provide a clean way to do this but at least it will be at all possible in c++20."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 2, "creation_date": 1541066315, "post_id": 53087000, "comment_id": 93093509, "body": "This deserves to be &quot;answer of the month&quot;."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1540999839, "last_edit_date": 1592644375, "creation_date": 1540999839, "answer_id": 53087000, "question_id": 53084703, "link": "https://stackoverflow.com/questions/53084703/constexpr-alternative-to-placement-new-to-be-able-to-leave-objects-in-memory-uni/53087000#53087000", "title": "Constexpr alternative to placement new to be able to leave objects in memory uninitialized?", "body": "<p>In C++17, you can't.</p>\n<p>The <a href=\"http://eel.is/c++draft/expr.const#2.20\" rel=\"noreferrer\">current restrictions</a> on what you cannot do in constant expressions include:</p>\n<blockquote>\n<ul>\n<li><p>an assignment expression ([expr.ass]) or invocation of an assignment operator ([class.copy.assign]) that would change the active member of a union;</p>\n</li>\n<li><p>a <em>new-expression</em>;</p>\n</li>\n</ul>\n</blockquote>\n<p>There really is no way around that.</p>\n<hr />\n<p>In C++20, you will be able to, but probably not the way you think. The latter restriction is going to be relaxed in C++20 as a result of <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0784r4.html\" rel=\"noreferrer\">P0784</a> to something like:</p>\n<blockquote>\n<ul>\n<li>a <em>new-expression</em> (8.3.4), unless the selected allocation function is a replaceable global allocation function (21.6.2.1, 21.6.2.2);</li>\n</ul>\n</blockquote>\n<p>That is, <code>new T</code> will become fine but <code>new (ptr) T</code> will still not be allowed. As part of making <code>std::vector</code> <code>constexpr</code>-friendly, we need to be able to manage &quot;raw&quot; memory - but we still can't actually manage truly <em>raw</em> memory. Everything still has to be typed. Dealing with raw bytes is not going to work.</p>\n<p>But <code>std::allocator</code> doesn't <em>entirely</em> deal in raw bytes. <code>allocate(n)</code> gives you a <code>T*</code> and <code>construct</code> takes a <code>T*</code> as a location and a bunch of arguments and creates a new object at that location. You may be wondering at this point how this is any different from placement new - and the only difference is that sticking with <code>std::allocator</code>, we stay in the land of <code>T*</code> - but placement new uses <code>void*</code>. That distinction turns out to be critical.</p>\n<p>Unfortunately, this has the interesting consequence of your <code>constexpr</code> version &quot;allocates&quot; memory (but it allocates compiler memory, which will get elevated to static storage as necessary - so this does what you want) - but your pure runtime version surely does not want to allocate memory, indeed the whole point would be that it does not. To that end, you will have to use <code>is_constant_evaluated()</code> to switch between the allocating at constant evaluation time and non-allocating at runtime. This is admittedly not beautiful, but it should work.</p>\n"}], "owner": {"reputation": 824, "user_id": 2164642, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/093eaa03106e4783fe918b36dcff1453?s=128&d=identicon&r=PG", "display_name": "Tobias", "link": "https://stackoverflow.com/users/2164642/tobias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 3, "accepted_answer_id": 53087000, "answer_count": 2, "score": 7, "last_activity_date": 1540999839, "creation_date": 1540992951, "last_edit_date": 1540999104, "question_id": 53084703, "link": "https://stackoverflow.com/questions/53084703/constexpr-alternative-to-placement-new-to-be-able-to-leave-objects-in-memory-uni", "title": "Constexpr alternative to placement new to be able to leave objects in memory uninitialized?", "body": "<p>I am trying to create a static container which has stack based memory and can hold N instances of T. Much alike <code>std::vector</code> I want currently unused memory to not contain initialized items of T. This is usually solved with placement new but that's not possible to use in constexpr.</p>\n\n<p><strong>Using unions</strong>\nI found a trick that you can use a union for this as follows:</p>\n\n<pre><code>template &lt;typename value_type&gt;\nunion container_storage_type\n{\n    struct empty{};\n    constexpr container_storage_type(): uninitialized{}{}\n    constexpr container_storage_type(value_type v): value(v){}\n    constexpr void set(value_type v)\n    {\n        *this = literal_container_storage_type{v};\n    }\n\n    empty uninitialized;\n    value_type value;\n};\n</code></pre>\n\n<p>This lets you store items uninitialized by setting the <code>empty</code> member and this works around the limitation that all members in constexpr have to be initialized.</p>\n\n<p>Now the problem with this approach is that if <code>value_type</code>is a type that implements <code>operator=</code>, the <a href=\"https://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow noreferrer\">rule for unions says</a>:</p>\n\n<blockquote>\n  <p>If a union contains a non-static data member with a non-trivial special member function (copy/move constructor, copy/move assignment, or destructor), that function is deleted by default in the union and needs to be defined explicitly by the programmer.</p>\n</blockquote>\n\n<p>This means that to be able to use this trick, I need to implement <code>operator=</code> in the union too, but how would that look?</p>\n\n<pre><code>constexpr container_storage_type&amp; operator=(const container_storage_type&amp; other)\n{           \n    value = other.value; //ATTEMPT #1\n    //*this = container_storage_type(other.value);ATTEMPT #2\n\n    return *this;\n}\n</code></pre>\n\n<p>Attempt #1: This does not seem possible as the compiler complains that changing the active member of a union is simply disallowed in constant expressions.\nAttempt #2: This works in the <code>set()</code> method from the previous snippet, as it doesn't change the active member per se, but reassigns the whole union. This trick seems unable to be used in the assignment operator however since that causes endless recursion...</p>\n\n<p>Am I missing something here, or is this truly a dead end for using unions as a placement-new alternative in constexpr?</p>\n\n<p>Are there other alternatives to placement new that I have completely missed?</p>\n\n<p><a href=\"https://godbolt.org/z/km0nTY\" rel=\"nofollow noreferrer\">https://godbolt.org/z/km0nTY</a> Code that illustrates the problem</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 9, "creation_date": 1540991877, "post_id": 53084261, "comment_id": 93065269, "body": "You can have whitespace in filenames (in some OSs at least). Maybe it would be clearer if you think about the case where you use quotes: <code>#include &quot; myfile.h &quot;</code>. Using <code>&lt;&gt;</code> instead of quotes just tells the compiler to check a different location for the file first."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 3, "creation_date": 1540992013, "post_id": 53084261, "comment_id": 93065378, "body": "Having white spaces is just purely bad practice and invitation to all kinds of problems. I don&#39;t think any professional dev cares. We&#39;re programmed to eliminate spaces in file names, either with camel case or snake case."}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1540992396, "post_id": 53084261, "comment_id": 93065668, "body": "You can use white spaces. It just includes files. &quot;file.h&quot;, &quot; file.h&quot;, &quot;file 1.h&quot;, file.h &quot; are all different files. As a good practice, avoid white spaces. Its better to replace it with underscore."}, {"owner": {"reputation": 3906, "user_id": 9153448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWbA0.jpg?s=128&g=1", "display_name": "SAM", "link": "https://stackoverflow.com/users/9153448/sam"}, "reply_to_user": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1540992656, "post_id": 53084261, "comment_id": 93065853, "body": "@HelloWorld thank you for helping me sir but if I&#39;m including white spaces in file name. My code doesn&#39;t compile"}, {"owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "edited": false, "score": 0, "creation_date": 1540992818, "post_id": 53084261, "comment_id": 93065977, "body": "@PraveenKumar as I/we said &quot; iostream&quot; and &quot;iostream&quot; are different files. You must create &quot; iostream&quot; header in order to use it."}], "answers": [{"comments": [{"owner": {"reputation": 3906, "user_id": 9153448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWbA0.jpg?s=128&g=1", "display_name": "SAM", "link": "https://stackoverflow.com/users/9153448/sam"}, "edited": false, "score": 0, "creation_date": 1540993050, "post_id": 53084674, "comment_id": 93066147, "body": "Thank you so much, sir. Completely understood."}], "tags": [], "owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "is_accepted": true, "score": 9, "last_activity_date": 1540992892, "creation_date": 1540992892, "answer_id": 53084674, "question_id": 53084261, "link": "https://stackoverflow.com/questions/53084261/why-white-spaces-are-not-considered-as-white-spaces-when-we-declare-header-file/53084674#53084674", "title": "Why white spaces are not considered as white spaces when we declare header file in c++?", "body": "<p>There's no header file named iostream that begins and ends with a space character, so that's why you get an error.</p>\n\n<p>The name, all of the characters, inside the <code>&lt;&gt;</code> or \"\" when you use #include designates a header name (with most implementations it refers to a physical file name)</p>\n\n<p>If you include one of your own header files with e.g.</p>\n\n<pre><code>#include \" file.h \"\n</code></pre>\n\n<p>it will look for a file with the name file.h (that begins and ends with a space).</p>\n\n<p>That's a different filename than any of these two:</p>\n\n<pre><code>#include \"file.h \"\n#include \"file.h\"\n</code></pre>\n"}], "owner": {"reputation": 3906, "user_id": 9153448, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWbA0.jpg?s=128&g=1", "display_name": "SAM", "link": "https://stackoverflow.com/users/9153448/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 292, "favorite_count": 0, "accepted_answer_id": 53084674, "answer_count": 1, "score": 3, "last_activity_date": 1540992892, "creation_date": 1540991728, "question_id": 53084261, "link": "https://stackoverflow.com/questions/53084261/why-white-spaces-are-not-considered-as-white-spaces-when-we-declare-header-file", "title": "Why white spaces are not considered as white spaces when we declare header file in c++?", "body": "<p>When we declare header file in c++. It is not recommended to insert white spaces between angular braces '&lt;' '>'  and header file name.  If we insert it comes out with an error.\nI have tried in Xcode and various other IDE's</p>\n\n<pre><code>// It is perfectly valid ( in c++ )\n#include &lt;iostream&gt; \n\nbut \n\n// It is invalid\n#include &lt; iostream &gt;\n</code></pre>\n"}, {"tags": ["c++", "opencv", "camera", "lossless-compression", "video-compression"], "comments": [{"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1540993136, "post_id": 53083948, "comment_id": 93066209, "body": "Maybe these will help: <a href=\"https://stackoverflow.com/questions/768999/what-is-a-good-lossless-video-codec\">What is a good lossless video codec</a>, <a href=\"https://www.quora.com/What-is-the-best-lossless-video-compression-technique-with-the-best-compression-ratio\" rel=\"nofollow noreferrer\">What is the best lossless video compression technique</a>"}, {"owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1540998466, "post_id": 53083948, "comment_id": 93069844, "body": "I am looking to keep the exact timestamp of each frame in the video, not only the video compression settings. I am setting the timestamp with the OS clock."}, {"owner": {"reputation": 1022, "user_id": 154911, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/jYIPt.gif?s=128&g=1", "display_name": "ollydbg23", "link": "https://stackoverflow.com/users/154911/ollydbg23"}, "edited": false, "score": 0, "creation_date": 1618888782, "post_id": 53083948, "comment_id": 118732861, "body": "I basically have the same feature request as you. I&#39;m still not sure what kind of library can do this."}], "answers": [{"comments": [{"owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1540997904, "post_id": 53084492, "comment_id": 93069471, "body": "This looks like more like a post-processing method. I would like to create the video as soon a new frame arrives. The important thing here is not the compression, the important issue here is to store the exact timestamp in the video. The timestamp is given by the OS in this case."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541002632, "post_id": 53084492, "comment_id": 93072680, "body": "In that case, won&#39;t compression on file system-level suffice?"}, {"owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541079597, "post_id": 53084492, "comment_id": 93100419, "body": "no, because I need to do it on the fly. One option that I have is too record the frames as a video and save in a separate txt file the timestamp for each stored frame in the video but I do not like this option too much"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541080429, "post_id": 53084492, "comment_id": 93100846, "body": "If you use filesystem compression you will get each frame compressed and stored (with its timestamp) on the fly.  If you need need better compression, use a lossless 2D image compressor.  If that doesn&#39;t compress enough, you need a chunk of frames before you can make use of any similarities between the frames by using a lossless 3D image compressor, so on the fly becomes &quot;with only a chunk of frames delay&quot;, right?"}, {"owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541080876, "post_id": 53084492, "comment_id": 93101099, "body": "What do you mean with &quot;use filesystem compression&quot; to store the images as png (and not like a video)? I have already done that and it is too heavy."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541081313, "post_id": 53084492, "comment_id": 93101315, "body": "Yes, that was my first option. Since you use png I guess the pictures are already compressed and then the filesystem compression won&#39;t help. That leaves you with option three and I can&#39;t see how that can be done without a chunk of frames delay."}, {"owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541083258, "post_id": 53084492, "comment_id": 93102372, "body": "I do not know exactly the meaning of &quot;lossless 3D image compressor&quot;, does it mean compress the sequence of images taking their similarity, right? Do you know any lossless 3D image compressor software or c++ library?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "edited": false, "score": 0, "creation_date": 1541086541, "post_id": 53084492, "comment_id": 93104223, "body": "Yes, that&#39;s what I meant. I don&#39;t know of any free libraries unfortunately but there are many papers written on the topic, mostly for compressing 3D images in medical applications."}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1541007676, "last_edit_date": 1541007676, "creation_date": 1540992402, "answer_id": 53084492, "question_id": 53083948, "link": "https://stackoverflow.com/questions/53083948/how-to-record-video-with-exact-frames-timestamp-in-c/53084492#53084492", "title": "How to record video with exact frames timestamp in c++", "body": "<p>Does the format have to be portable?</p>\n\n<p>If not, here's an idea: Interleave the pixels from a bunch of pictures (the number can vary over time depending on how big the changes are).</p>\n\n<p>So, a chunk with N pictures in your file will contain:</p>\n\n<pre><code>N: the number of pictures in the chunk\ntimestamp 1: from picture 1\ntimestamp 2: from picture 2\n...\ntimestamp N: from picture N\npixel 1: from picture 1, pixel 0,0\npixel 2: from picture 2, pixel 0,0\n...\npixel N: from picture N, pixel 0,0\npixel N+1: from picture 1, pixel 0,1\npixel N+2: from picture 2, pixel 0,1\n...\npixel N*X*Y: from picture N, pixel X-1,Y-1\n</code></pre>\n\n<p>Then use a lossless compression library to compress the chunk (now containing a 3D image) and get on with the next chunk.</p>\n\n<p>Perhaps there are already wavelet/fft libraries capable of something similar.</p>\n"}], "owner": {"reputation": 62, "user_id": 6098763, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GCHanMO0dRc/AAAAAAAAAAI/AAAAAAAAAwM/4AnbX3Hc5IM/photo.jpg?sz=128", "display_name": "taihu", "link": "https://stackoverflow.com/users/6098763/taihu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 1, "closed_date": 1540995191, "answer_count": 1, "score": -2, "last_activity_date": 1541080935, "creation_date": 1540990782, "last_edit_date": 1541080935, "question_id": 53083948, "link": "https://stackoverflow.com/questions/53083948/how-to-record-video-with-exact-frames-timestamp-in-c", "closed_reason": "Needs more focus", "title": "How to record video with exact frames timestamp in c++", "body": "<p>I would like to record frames from a camera in c++. The camera frame-rate is not constant, and I need to store each image with its timestamp (I am using OS clock, and storing the image milliseconds precision). I have already stored the captured images as a sequence of images files but the images stored independently (as .png) are too heavy (because I am working with long sequences and they are a lot). So, I would like to take advantage of the similarity between consecutive images (as video compression techniques) and create a lossless video that exploits this fact. Then, I would like to use this video to extract the images individually conserving the timestamp.</p>\n\n<p>In other words, I am only using the video format to compress the image sequence (without lose information) but I need to keep track of the exact timestamp when the images were captured.</p>\n\n<p>So my question is:\n<strong>How can I record the streaming of the camera in a video using the exact timestamp of each frame in a lossless format?</strong></p>\n\n<p>I have been trying with OpenCV library, in particular with the <a href=\"https://docs.opencv.org/3.4.3/dd/d9e/classcv_1_1VideoWriter.html\" rel=\"nofollow noreferrer\">VideoWriter</a> class. However the VideoWriter interface does not provide any method that takes the frame and timestamp as input.</p>\n\n<p>Another option that I have, is to store, along with the video recorded, the timestamp of each frame in a separately txt file. Then, I could use the timestamp to retrieve the frames from the video. However, I am not sure if I would retrieve the exact frame, this is without any information interpolation.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "c++11", "linked-list", "stl", "erase-remove-idiom"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1540991573, "post_id": 53083911, "comment_id": 93065050, "body": "Performance is probably not the most appropriate reason in this scenario; a) because it&#39;s probably wrong and b) because the performance of <code>std::list</code> is notoriously poor anyway (depending on the usecase of course). What sounds more relevant is that one approach invalidates pointers and references to the elements you don&#39;t remove, while the other doesn&#39;t. And after all, such guarantees are usually the reason for using a linked list to begin with."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1540992086, "post_id": 53083911, "comment_id": 93065425, "body": "<code>int</code> are very small and easy to copy. The difference between the two methods might be different if copying the values were more costly than just delinking nodes."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 1, "creation_date": 1540992191, "post_id": 53083911, "comment_id": 93065503, "body": "@Blastfurnace The values usually don&#39;t get copied though, only swapped. That&#39;s commonly very cheap too. Especially compared to the list traversal."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540992303, "post_id": 53083911, "comment_id": 93065585, "body": "Did you measure the performance in a debug build or an optimized one?"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1540992351, "post_id": 53083911, "comment_id": 93065629, "body": "@BaummitAugen I don&#39;t think <code>std::remove</code> swaps the values (they might be moved)."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1540992450, "post_id": 53083911, "comment_id": 93065710, "body": "@Blastfurnace True, it only move assigns. Still, the point stands."}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1540993451, "post_id": 53083911, "comment_id": 93066425, "body": "@BaummitAugen The member function is faster when the type is expensive to copy: <a href=\"http://coliru.stacked-crooked.com/a/efcf94fde4887777\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/efcf94fde4887777</a>"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "edited": false, "score": 0, "creation_date": 1540993713, "post_id": 53083911, "comment_id": 93066594, "body": "@Blastfurnace Sure. As I said, that&#39;s <i>commonly</i> cheap. If, for whatever reason, you have a list of those big objects, different factors can certainly become relevant or even dominant in the individual case. Note how the original example does use <code>int</code> though, and still applied its performance claim."}], "answers": [{"comments": [{"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540993052, "post_id": 53084581, "comment_id": 93066149, "body": "I simply commented out <code>my_list1.push_back(random);</code> . This prevented the code from allocating memory from different locations for different parts of the list and increased caching efficiency."}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540993234, "post_id": 53084581, "comment_id": 93066281, "body": "As I increase x, the efficiency of the erase increases and surpasses the remove, but the caching still has a large efffect."}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540993431, "post_id": 53084581, "comment_id": 93066413, "body": "By multiplying x by 8 and then switching the order of the erases to be first and the removes to be second, I get an execution time for the erases of 617 and the removes of 689.  Remember, the Removes were &quot;faster&quot; in the original test.  However, no attempt was made to run the removes second.  By running the removes second and by remove the front and back inserts, the removes are slower."}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540993527, "post_id": 53084581, "comment_id": 93066489, "body": "If you don&#39;t believe that this could be a caching issue, then you need to watch this:  <a href=\"https://www.youtube.com/watch?v=WDIkqP4JbkE&amp;t=1898s\" rel=\"nofollow noreferrer\">Scott Myers on Caching</a>"}], "tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 1, "last_activity_date": 1540993969, "last_edit_date": 1540993969, "creation_date": 1540992674, "answer_id": 53084581, "question_id": 53083911, "link": "https://stackoverflow.com/questions/53083911/generic-function-remove-vs-member-function-remove-for-linked-list/53084581#53084581", "title": "Generic Function remove() vs Member Function remove() for linked list", "body": "<p>This is a caching issue.  Most performance issues are caching issues.  We always want to think that the algorithm is the first thing to look at.  However, if you purposely force the compiler to use memory from different locations in one run and memory all from the next location on the next run, you will see a caching issue.</p>\n\n<p>By commenting out the <code>push_back</code> or the <code>push_front</code> when building the original list, I forced the compiler to create code to build a list with contiguous memory elements in <code>my_list1</code>.</p>\n\n<p><code>my_list2</code> is always in contiguous memory because it is allocated in a single copy.</p>\n\n<p>Run output:</p>\n\n<pre><code>Execution time while using member function remove: 121\n\nExecution time while using generic algorithm remove: 125\n\n\nProcess finished with exit code 0\n</code></pre>\n\n<p>Here is my code with one of the push's commented out.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;list&gt;\n#include &lt;algorithm&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n{\n    srand(time(nullptr));\n    list&lt;int&gt;my_list1;\n//    list&lt;int&gt;my_list2;\n    int x = 2000 * 2000;\n\n    for (auto i = 0; i &lt; x; ++i)\n    {\n        auto random = rand() % 10;\n//        my_list1.push_back(random);  // avoid pushing to front and back to avoid cache misses.\n        my_list1.push_front(random);\n    }\n\n    list&lt;int&gt;my_list2(my_list1);\n\n    auto started1 = std::chrono::high_resolution_clock::now();\n    my_list1.remove(5);\n    auto done1 = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Execution time while using member function remove: \" &lt;&lt; chrono::duration_cast&lt;chrono::milliseconds&gt;(done1 - started1).count();\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n\n    auto started2 = std::chrono::high_resolution_clock::now();\n    my_list2.erase(remove(my_list2.begin(), my_list2.end(),5), my_list2.end());\n    auto done2 = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Execution time while using generic algorithm erase: \" &lt;&lt; chrono::duration_cast&lt;chrono::milliseconds&gt;(done2 - started2).count();\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n}\n</code></pre>\n\n\n\n<p>By increasing the number of elements and reversing the order of the calls to make erase happen first and remove happen second, the removes take longer.  Again, this is more about caching than about the algorithm or the amount of work being done.  If you are running another program that dirties the cache, checking the internet, or moving your mouse, your 32 KB L1 cache will be dirtied, and performance drops for that run.</p>\n"}], "owner": {"reputation": 9, "user_id": 10414298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ae3ef626effbab522ce88ae2b1d8bd?s=128&d=identicon&r=PG&f=1", "display_name": "hma_hma", "link": "https://stackoverflow.com/users/10414298/hma-hma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1540993969, "creation_date": 1540990685, "last_edit_date": 1540991376, "question_id": 53083911, "link": "https://stackoverflow.com/questions/53083911/generic-function-remove-vs-member-function-remove-for-linked-list", "title": "Generic Function remove() vs Member Function remove() for linked list", "body": "<p>I'm reading book \"The C++ STL. A Tutorial and References\" written by Nicolai M.Josuttis and in one of the chapters devoted to STL algorithms author states the following:\n<em>If you call remove() for\nelements of a list, the algorithm doesn\u2019t know that it is operating on a list and thus does what it\ndoes for any container: reorder the elements by changing their values. If, for example, the algorithm\nremoves the first element, all the following elements are assigned to their previous elements. This\nbehavior contradicts the main advantage of lists: the ability to insert, move, and remove elements by\nmodifying the links instead of the values.To avoid bad performance, lists provide special member functions for all manipulating algorithms. You should always prefer them. Furthermore, these member functions really remove \u201cremoved\u201d elements, as this example shows:</em></p>\n\n<pre><code>#include &lt;list&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nint main()\n{\nlist&lt;int&gt; coll;\n// insert elements from 6 to 1 and 1 to 6\nfor (int i=1; i&lt;=6; ++i) {\ncoll.push_front(i);\ncoll.push_back(i);\n}\n// remove all elements with value 3 (poor performance)\ncoll.erase (remove(coll.begin(),coll.end(),\n3),\ncoll.end());\n// remove all elements with value 4 (good performance)\ncoll.remove (4);\n}\n</code></pre>\n\n<p>Of course this seems enough convincing for further considerations but anyway, I decided to see the result running similar code in my PC, particularly in MSVC 2013 Environment.\nHere is my code improvised:</p>\n\n<pre><code>int main()\n{\n    srand(time(nullptr));\n    list&lt;int&gt;my_list1;\n    list&lt;int&gt;my_list2;\n    int x = 2000 * 2000;\n\n    for (auto i = 0; i &lt; x; ++i)\n    {\n        auto random = rand() % 10;\n        my_list1.push_back(random);\n        my_list1.push_front(random);\n    }\n\n    list&lt;int&gt;my_list2(my_list1);\n\n    auto started1 = std::chrono::high_resolution_clock::now();\n    my_list1.remove(5);\n    auto done1 = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Execution time while using member function remove: \" &lt;&lt; chrono::duration_cast&lt;chrono::milliseconds&gt;(done1 - started1).count();\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n\n    auto started2 = std::chrono::high_resolution_clock::now();\n    my_list2.erase(remove(my_list2.begin(), my_list2.end(),5), my_list2.end());\n    auto done2 = std::chrono::high_resolution_clock::now();\n    cout &lt;&lt; \"Execution time while using generic algorithm remove: \" &lt;&lt; chrono::duration_cast&lt;chrono::milliseconds&gt;(done2 - started2).count();\n\n    cout &lt;&lt; endl &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I was surprised when saw the following output:</p>\n\n<pre><code>Execution time while using member function remove: 10773\n\nExecution time while using generic algorithm remove: 7459 \n</code></pre>\n\n<p><strong>Could you please explain what can be the reason of such contradicting behavior?</strong></p>\n"}, {"tags": ["c++", "visual-studio", "gcc", "compiler-errors", "compilation"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1540990741, "post_id": 53083909, "comment_id": 93064426, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the complete error message. What is <code>Container</code> ?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540990779, "post_id": 53083909, "comment_id": 93064446, "body": "..and the version of the compilers you used"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540990856, "post_id": 53083909, "comment_id": 93064505, "body": "<b><i>but when using Visual Studio 2017 i get a E0153 expression must have class type error</i></b> Please post the exact text of the error message. Copy it from the Output Tab instead of the errors list. Also create a minimal example code."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1540990936, "post_id": 53083909, "comment_id": 93064562, "body": "What gcc are you using?  It doesn&#39;t compile here: <a href=\"http://coliru.stacked-crooked.com/a/f8fd9762c2b67506\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/f8fd9762c2b67506</a>"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1540991131, "post_id": 53083909, "comment_id": 93064709, "body": "It doesn&#39;t compile on <a href=\"https://wandbox.org/permlink/GDjapJQ18RBsldjP\" rel=\"nofollow noreferrer\">gcc</a>."}, {"owner": {"reputation": 17, "user_id": 10585925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daaf0c97f8f78621dde0286fd24ffa4d?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 T\u0119gi", "link": "https://stackoverflow.com/users/10585925/micha%c5%82-t%c4%99gi"}, "edited": false, "score": 0, "creation_date": 1540991160, "post_id": 53083909, "comment_id": 93064730, "body": "Container is another object, but that&#39;s irrelevant as the issue concerns .capacity() and .size() functions. I used gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)"}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1540991212, "post_id": 53083909, "comment_id": 93064777, "body": "@Micha\u0142T\u0119gi Errors do not complain about missing <code>Containter</code> so your example do not compile on any compiler."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1540991587, "post_id": 53083909, "comment_id": 93065063, "body": "and after removing obsolete parenthesis it compiles properly on <a href=\"https://wandbox.org/permlink/EfbRuB4XhTHwhrs7\" rel=\"nofollow noreferrer\">gcc</a>."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10585925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daaf0c97f8f78621dde0286fd24ffa4d?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 T\u0119gi", "link": "https://stackoverflow.com/users/10585925/micha%c5%82-t%c4%99gi"}, "edited": false, "score": 0, "creation_date": 1540991519, "post_id": 53083960, "comment_id": 93065010, "body": "This was the issue, thanks for help. Somehow my defintion got mesed up between 2 projects."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 17, "user_id": 10585925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daaf0c97f8f78621dde0286fd24ffa4d?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 T\u0119gi", "link": "https://stackoverflow.com/users/10585925/micha%c5%82-t%c4%99gi"}, "edited": false, "score": 4, "creation_date": 1540991566, "post_id": 53083960, "comment_id": 93065046, "body": "@Micha\u0142T\u0119gi Better than saying &quot;thank you&quot;, you can click the checkmark under the answer&#39;s score to mark it as accepted. Happy to help."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1540992197, "post_id": 53083960, "comment_id": 93065509, "body": "<b><i>Somehow my defintion got mesed up between 2 projects</i></b> version control (like git) helps with this."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 5, "last_activity_date": 1540991265, "last_edit_date": 1540991265, "creation_date": 1540990821, "answer_id": 53083960, "question_id": 53083909, "link": "https://stackoverflow.com/questions/53083909/why-does-gcc-compile-this-and-msvc-doesnt/53083960#53083960", "title": "Why does gcc compile this and msvc doesn&#39;t", "body": "<p>You defined <code>containers</code> as <em>a function</em> returning a vector:</p>\n\n<pre><code>std::vector&lt;Container&gt; containers();\n</code></pre>\n\n<p>Fix it to:</p>\n\n<pre><code>std::vector&lt;Container&gt; containers;\n</code></pre>\n\n<blockquote>\n  <p>Why does gcc compile this and msvc doesn't</p>\n</blockquote>\n\n<p>I suspect you messed up when porting the code from gcc to msvc <a href=\"http://coliru.stacked-crooked.com/a/f8fd9762c2b67506\" rel=\"nofollow noreferrer\">as NathanOliver spotted</a>.</p>\n"}], "owner": {"reputation": 17, "user_id": 10585925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/daaf0c97f8f78621dde0286fd24ffa4d?s=128&d=identicon&r=PG&f=1", "display_name": "Micha\u0142 T\u0119gi", "link": "https://stackoverflow.com/users/10585925/micha%c5%82-t%c4%99gi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "closed_date": 1540992342, "answer_count": 1, "score": -1, "last_activity_date": 1540991265, "creation_date": 1540990677, "question_id": 53083909, "link": "https://stackoverflow.com/questions/53083909/why-does-gcc-compile-this-and-msvc-doesnt", "closed_reason": "Not suitable for this site", "title": "Why does gcc compile this and msvc doesn&#39;t", "body": "<p>Here is my class</p>\n\n<pre><code>class ContainerStack{\npublic:\n    int getCapacity();\n    int getSize();\n    const Container&amp; at(int height);\n    void take(Container aContainer);\n    Container give();\n\nprivate:\n    std::vector&lt;Container&gt; containers();\n};\n</code></pre>\n\n<p>Here are getCapacity() and getSize() methods</p>\n\n<pre><code>int ContainerStack::getCapacity(){\n    return containers.capacity();\n}\n\nint ContainerStack::getSize(){\n    return containers.size();\n}\n</code></pre>\n\n<p>GCC compiles everything without issues, but when using Visual Studio 2017 i get a <em>E0153 expression must have class type</em> error. Any way to fix this?</p>\n"}, {"tags": ["c++", "log4cpp"], "comments": [{"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 1, "creation_date": 1540991583, "post_id": 53083829, "comment_id": 93065058, "body": "A few moments ago I was playing arround with log4cpp, log4cxx, boost.log and a few others. If you aren&#39;t forced to use log4cpp I would not recomend it. boost.log does support multithreaded/interprocess backends called: <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/log/doc/html/log/detailed/sink_backends.html#log.detailed.sink_backends.text_ipc_message_queue\" rel=\"nofollow noreferrer\">IPC message queue backend</a>, has better documentation and it&#39;s possible to extend it to have other backends (like network to syslog)."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1540994291, "post_id": 53083829, "comment_id": 93067020, "body": "@user1810087 thanks for that, I&#39;ll certainly consider it... we are a little way committed into log4cpp, and it would be a little bit of a pain to switch, but we have wrapped it into our own API so maybe its not so bad - I&#39;ll take a look. But do you know if log4cpp supports inter-process properly?"}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1540998339, "post_id": 53083829, "comment_id": 93069764, "body": "I highly doubt it. Looking into the code, it seems they use a (regular) mutex or a recursive mutex (as default). Both result in one of: 1) A C++11 mutex - does not supprt IPC, 2) a pthread mutex- <a href=\"https://stackoverflow.com/questions/6477525/interprocess-mutex-with-pthreads\">kinda support IPC</a> 3) windows cirtical section - does support IPC or 4) a poor mans mutex (selfimplemented) - Does not support IPC. Plus they seem to lock the files."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "reply_to_user": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 0, "creation_date": 1541015368, "post_id": 53083829, "comment_id": 93078883, "body": "@user1810087 My testing suggested that it supports IPC (only in that I did not lose any data or get any mangled data lines)... so maybe the file locking is what synchronises it... probably good enough for what I need... but not very efficient I guess! - thanks for that update"}], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1540990422, "creation_date": 1540990422, "question_id": 53083829, "link": "https://stackoverflow.com/questions/53083829/is-log4cpp-inter-process-safe-for-writing-to-the-same-file", "title": "is log4cpp inter-process safe for writing to the same file?", "body": "<p>I have started to use log4cpp. I ran some tests on it because I want to have multiple processes all writing to the same files.</p>\n\n<p>I know its thread safe, and I did some testing on inter-process writing, it seemed to work. But then I read this:</p>\n\n<blockquote>\n  <p>3.2. Is log4cpp thread-safe?\n  The same instance of the log4cpp::Category object (a logger) can be used from different threads simultaneously without explicit synchronization. Concurrent access to the appenders will be prevented by the logger object itself. It will lock internal mutex each time when it comes to writing into appenders. So, it is safe, for example, to write from the multiple threads to the same logger which appends to the same file. <strong>Although, log4cpp is configured in such a way that two different loggers append to the same appender (it may be a file), then there will be no way for the logging framework to arrange proper addition and things can get mixed up. So this way of configuration is not recommended.</strong></p>\n</blockquote>\n\n<p>From <a href=\"http://log4cpp.sourceforge.net/\" rel=\"nofollow noreferrer\">here</a>, and now I have a doubt about that...</p>\n\n<p>Does anyone have any experience with this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540990537, "post_id": 53083822, "comment_id": 93064298, "body": "its a bit backwards to make the base class aware of the subclasses. Anyhow, can you show a small example of what you want to do? (see also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 2, "creation_date": 1540990631, "post_id": 53083822, "comment_id": 93064360, "body": "describe your initial problem which supposed to be solved by returning subclass object, since this looks like <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY problem</a>."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "edited": false, "score": 0, "creation_date": 1540990821, "post_id": 53083822, "comment_id": 93064484, "body": "Any method can return whatever type you declare, yet you can&#39;t pretend that an object created as &quot;Member&quot; (i.e. = new Member()) is a subclass of member; i.e. any static/dynamic/reinterpret-cast will either fail or yield undefined behaviour"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540991099, "post_id": 53083922, "comment_id": 93064687, "body": "look at the other answer. The parent does not need to know what members or methods the inheriting class has but still it can provide a method to return a subclass instance"}], "tags": [], "owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "is_accepted": false, "score": 1, "last_activity_date": 1540990723, "creation_date": 1540990723, "answer_id": 53083922, "question_id": 53083822, "link": "https://stackoverflow.com/questions/53083822/returning-a-subclass-object-from-a-parent-class-method/53083922#53083922", "title": "Returning a subclass object from a parent class method", "body": "<p>The parent class has no way of knowing the extra methods and members of the inheriting class.</p>\n\n<p>An object from child class can be casted to the parent but not the other way around. </p>\n\n<p>Now depending on what you are trying to do, I'm guessing there should be a way of returning a value from the parent class that may help you build an object from the child class.<br>\nAgain, it depends on the problem you're trying to solve.</p>\n"}, {"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540991262, "post_id": 53083975, "comment_id": 93064824, "body": "from the question its not really clear if OP wants a cast (your answer) or some kind of conversion (creating a new <code>Voter</code> from a <code>Member</code> somehow). Your answer assumes that the <code>Element</code> actually is a <code>Elementype</code>, but given just an <code>Element</code> simply casting it to an <code>ElementType</code> is in general not correct"}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540991375, "post_id": 53083975, "comment_id": 93064896, "body": "@user463035818 He clearly says his <code>Voter</code> is a subclass of <code>Member</code> (my original <code>Element</code>)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540992384, "post_id": 53083975, "comment_id": 93065655, "body": "yes its a subclass, but if you have <code>Member&lt;VoterA&gt; x; x.asChild()-&gt;vote();</code> the cast will fail, or do i miss something?"}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540992658, "post_id": 53083975, "comment_id": 93065857, "body": "@user463035818 Why would it? You are allowed to cast to yourself. <code>static_cast</code> is compile time thing."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540992802, "post_id": 53083975, "comment_id": 93065963, "body": "because <code>x</code> is not a <code>VoterA</code>"}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540992886, "post_id": 53083975, "comment_id": 93066024, "body": "@user463035818 Oh, right. That is of course programmer&#39;s responsibility to not do things like that. :-)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540992978, "post_id": 53083975, "comment_id": 93066092, "body": "yes thats more or less what I was trying to say ;). It would certainly also be possible to enable <code>Member&lt;VoterA&gt; x; x.asChild()-&gt;vote();</code> but we dont really know what OP wants"}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540993259, "post_id": 53083975, "comment_id": 93066295, "body": "@user463035818 One could also make use of SFINAE and <code>std::is_base_of</code> to only enable <code>Member</code> if <code>MemberType</code> is derived from it. However I find such things to be an overkill in most contexts. And of course, the OP was too vague to know the exact requirements and use case."}], "tags": [], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "is_accepted": false, "score": 1, "last_activity_date": 1540992554, "last_edit_date": 1540992554, "creation_date": 1540990851, "answer_id": 53083975, "question_id": 53083822, "link": "https://stackoverflow.com/questions/53083822/returning-a-subclass-object-from-a-parent-class-method/53083975#53083975", "title": "Returning a subclass object from a parent class method", "body": "<p>I am sometimes using something similar, typically it looks like this:</p>\n\n<pre><code>template&lt;typename MemberType&gt;\nclass Member\n{\npublic:\n    MemberType *asChild() { return static_cast&lt;MemberType*&gt;(this); }\n};\n\nclass VoterA : public Member&lt;VoterA&gt; {};\nclass VoterB : public Member&lt;VoterB&gt; {};\n</code></pre>\n\n<p>You can put it as whatever, for example overriding <code>operator*</code> so that dereferencing <code>Member</code> yields it as the given template type. Typical usage, consider:</p>\n\n<pre><code>class Elections\n{\npublic:\n    void vote(VoterA obj);\n    void vote(VoterB obj);\n};\n</code></pre>\n\n<p>You can also make the element do the voting:</p>\n\n<pre><code>template&lt;typename MemberType&gt;\nclass Member\n{\npublic:\n    Member(Voter *voter) : mVoter(voter) {}\n\n    void vote()\n    {\n        mVoter-&gt;vote(*static_cast&lt;MemberType*&gt;(this));\n    } \n\nprivate:\n    Voter *mVoter = nullptr;\n};\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10585971, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-172hPZJB3-M/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbA2HOmu7C2NgIp7Hh5L9Z3Y74IgDg/mo/photo.jpg?sz=128", "display_name": "justanewb", "link": "https://stackoverflow.com/users/10585971/justanewb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540992554, "creation_date": 1540990406, "question_id": 53083822, "link": "https://stackoverflow.com/questions/53083822/returning-a-subclass-object-from-a-parent-class-method", "title": "Returning a subclass object from a parent class method", "body": "<p>Is it possible to return a subclass instance of an object inside a parent class method? What I'm trying to do is I have a Member class as parent and a Voter subclass, and I want the member to have a method to turn itself into a voter object.</p>\n"}, {"tags": ["c++", "matrix", "dynamic-memory-allocation", "access-violation"], "comments": [{"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 7, "creation_date": 1540989093, "post_id": 53083248, "comment_id": 93063456, "body": "You allocate and then <i>immediately</i> free the array in <code>input_matrix</code>. Once you&#39;ve free&#39;d the array you should not touch/use it. But then at the end of that function you <i>use</i> the array which has been free&#39;d."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1540989186, "post_id": 53083248, "comment_id": 93063498, "body": "You should free the memory of <code>dynamicArray</code> in <code>main</code>, after you are done with it."}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "edited": false, "score": 1, "creation_date": 1540989258, "post_id": 53083248, "comment_id": 93063529, "body": "You have a bunch of other minor issues: Why not use <code>vector</code>? Don&#39;t use global variables. <code>using namespace std</code> is considered bad. In <code>print_matrix</code> <code>m</code> will never equal <code>COLUMNS</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1540990281, "post_id": 53083248, "comment_id": 93064131, "body": "The only reason I can come up with why the error is not obvious to you is that you do not realize what &quot;freeing the memory&quot; does -- you even have a comment in your code saying &quot;free the allocated memory&quot;.  Yes, you populated the matrix, but that doesn&#39;t mean &quot;now I don&#39;t need the memory anymore, since the matrix is populated and is now holding my values&quot;.  If I&#39;m wrong, so be it, but again, that&#39;s the only plausible reason why you would believe that deallocating the memory before actually using the matrix would work."}], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1540990174, "post_id": 53083719, "comment_id": 93064056, "body": "This should be a comment not an answer."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1540990230, "post_id": 53083719, "comment_id": 93064100, "body": "I think it&#39;s a perfect answer. OP is even asking &#39;What should I do?&#39;"}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 1, "creation_date": 1540990368, "post_id": 53083719, "comment_id": 93064188, "body": "Still a suggestion, since we don&#39;t know if he is allowed to use <code>std::vector</code> or 3rd party libraries."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1540991158, "post_id": 53083719, "comment_id": 93064727, "body": "Yes we do, since the question was tagged c++."}, {"owner": {"reputation": 11, "user_id": 10450020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZcLf.jpg?s=128&g=1", "display_name": "Arman Nikkhah", "link": "https://stackoverflow.com/users/10450020/arman-nikkhah"}, "edited": false, "score": 0, "creation_date": 1540993015, "post_id": 53083719, "comment_id": 93066122, "body": "Everybody thanks a lot because of your responses to this question. I don&#39;t know  how to use vector instead(also I don&#39;t know what is the vector at all :) )"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540994736, "post_id": 53083719, "comment_id": 93067329, "body": "This does not provide an answer to the question. To critique or request clarification from an author, leave a comment below their post. - <a href=\"/review/low-quality-posts/21288155\">From Review</a>"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1541067137, "post_id": 53083719, "comment_id": 93093903, "body": "@TobySpeight It does answer the OPs question - within the same level of detail as the OP has asked his question. SO is not a coding or teaching service - I am giving a full answer that if used will solve the OPs issue 100%. He is even asking broadly: &quot;What should I do ?&quot; Please provide some more detail of why you think this fails to answer the OPs question ?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 1, "creation_date": 1541067587, "post_id": 53083719, "comment_id": 93094126, "body": "I&#39;m sure it&#39;s good advice, but it&#39;s a bit short as an explanation of what was wrong.  (Actually, the question is better than many - it actually compiles if you remove the local include.  Admittedly, it just blocks waiting for input, but you can&#39;t have everything!).  This looks more like a good comment than an answer to me."}], "tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": false, "score": 1, "last_activity_date": 1540990106, "creation_date": 1540990106, "answer_id": 53083719, "question_id": 53083248, "link": "https://stackoverflow.com/questions/53083248/exception-thrown-read-access-violation-dynamicarray-was-0x1118235-occurre/53083719#53083719", "title": "Exception thrown: read access violation. **dynamicArray** was 0x1118235. occurred", "body": "<p>There is no reason to hand-roll your memory-management in this case. Use <code>std::vector</code> (which is a dynamic array) instead or even an actual Matrix library for example 'Eigen'.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10450020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZcLf.jpg?s=128&g=1", "display_name": "Arman Nikkhah", "link": "https://stackoverflow.com/users/10450020/arman-nikkhah"}, "edited": false, "score": 0, "creation_date": 1540992929, "post_id": 53084215, "comment_id": 93066052, "body": "Thanks a lot, you are great."}], "tags": [], "owner": {"reputation": 1033, "user_id": 3410010, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFRd3.jpg?s=128&g=1", "display_name": "yadhu", "link": "https://stackoverflow.com/users/3410010/yadhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1540991930, "last_edit_date": 1540991930, "creation_date": 1540991584, "answer_id": 53084215, "question_id": 53083248, "link": "https://stackoverflow.com/questions/53083248/exception-thrown-read-access-violation-dynamicarray-was-0x1118235-occurre/53084215#53084215", "title": "Exception thrown: read access violation. **dynamicArray** was 0x1118235. occurred", "body": "<p>There are multiple issues with your program. Let me list all of them one by one.</p>\n\n<ol>\n<li>As mentioned in one of the comments, You are immediately\ndeallocating memory just after you allocated it. Definitely this\nwill result in a segmentation fault or memory access violation when\nyou access deallocated memory. </li>\n<li>When you allocate the memory you are not\nassigning the allocated memory pointers to global pointer\n<code>dynamicArray</code> instead you are creating a local variable with the\nsame name inside the function <code>input_matrix</code>. As this pointer\nvariable scope ends inside the function you are losing the memory\nallocated. Hence again you will face segmentation fault or memory\naccess violation inside <code>print_matrix</code> function.</li>\n<li>Inside <code>print_matrix</code> function in inner for loop you are checking if <code>m==COLUMNS</code> to print new line, this will never happen since m is always less than <code>COLUMNS</code>.</li>\n<li>Finally, as the previous answer suggests when you are using C++, using a vector with smart pointers is a better choice than using array and raw pointers for better memory management.</li>\n</ol>\n\n<p>Following snippet resolves those issues.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint **dynamicArray ;\nint ROWS, COLUMNS;\n\n//---------------------------------\nint input_matrix(int ROWS, int COLUMNS)\n{\n    //---------------------------------------\n    //memory allocated for elements of rows.\n    dynamicArray = new int *[ROWS];\n\n    //memory allocated for  elements of each column.\n    for (int i = 0; i &lt; ROWS; i++)\n        dynamicArray[i] = new int [COLUMNS];\n\n//    cout&lt;&lt;\"Input array values\\n\";\n\n    for (int i = 0; i &lt; ROWS; i++)\n    {\n        for (int j = 0; j &lt; COLUMNS; j++)\n        {\n            cin&gt;&gt;dynamicArray[i][j];\n        }\n    }\n    return 0;\n}\n\nvoid free_matrix_memory()\n{\n    cout&lt;&lt;\"freeing allocated memory\\n\";\n    //free the allocated memory\n    for (int i = 0; i &lt; ROWS; i++)\n        delete[] dynamicArray[i];\n    delete[] dynamicArray;\n    //-------------------------------------\n}\n\n//---------------------------------------------\nint print_matrix(int **Array)\n{\n    cout&lt;&lt;\"printing matrix\\n\";\n    for (int k = 0; k &lt; ROWS; k++)\n    {\n        for (int m = 0; m &lt; COLUMNS; m++)\n            cout &lt;&lt; Array[k][m];\n        cout &lt;&lt; \"\\n\";\n    }\n    return 0;\n}\n\n//---------------------------------\nint main()\n{\n    cout&lt;&lt;\"Row and column values\\n\";\n    cin&gt;&gt; ROWS;\n    cin&gt;&gt; COLUMNS;\n    input_matrix(ROWS, COLUMNS);\n    print_matrix(dynamicArray);\n    free_matrix_memory();\n}\n</code></pre>\n\n<p>Still many improvements can be done for your such as avoiding global variables etc., I am leaving it up to you to do those improvements.</p>\n"}, {"tags": [], "owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "is_accepted": false, "score": 0, "last_activity_date": 1541068095, "creation_date": 1541068095, "answer_id": 53099387, "question_id": 53083248, "link": "https://stackoverflow.com/questions/53083248/exception-thrown-read-access-violation-dynamicarray-was-0x1118235-occurre/53099387#53099387", "title": "Exception thrown: read access violation. **dynamicArray** was 0x1118235. occurred", "body": "<p>If you run the program under Valgrind, it tells you exactly what's wrong:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>==6939== Invalid read of size 8\n==6939==    at 0x1092C9: input_matrix(int, int) (53083248.cpp:30)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939==  Address 0x4d7ecc0 is 0 bytes inside a block of size 16 free'd\n==6939==    at 0x48373EB: operator delete[](void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==6939==    by 0x109296: input_matrix(int, int) (53083248.cpp:23)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939==  Block was alloc'd at\n==6939==    at 0x483654F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==6939==    by 0x1091D3: input_matrix(int, int) (53083248.cpp:14)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939== \n==6939== Invalid write of size 4\n==6939==    at 0x496FFF0: std::istream::operator&gt;&gt;(int&amp;) (istream.tcc:194)\n==6939==    by 0x1092EA: input_matrix(int, int) (53083248.cpp:30)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939==  Address 0x4d7ed10 is 0 bytes inside a block of size 8 free'd\n==6939==    at 0x48373EB: operator delete[](void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==6939==    by 0x10927D: input_matrix(int, int) (53083248.cpp:22)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939==  Block was alloc'd at\n==6939==    at 0x483654F: operator new[](unsigned long) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==6939==    by 0x10922A: input_matrix(int, int) (53083248.cpp:18)\n==6939==    by 0x1093FA: main (53083248.cpp:59)\n==6939== \n==6939== Invalid read of size 8\n==6939==    at 0x10934D: print_matrix(int**) (53083248.cpp:42)\n==6939==    by 0x10940C: main (53083248.cpp:60)\n==6939==  Address 0x0 is not stack'd, malloc'd or (recently) free'd\n==6939== \n==6939== \n==6939== Process terminating with default action of signal 11 (SIGSEGV)\n==6939==  Access not within mapped region at address 0x0\n==6939==    at 0x10934D: print_matrix(int**) (53083248.cpp:42)\n==6939==    by 0x10940C: main (53083248.cpp:60)\n</code></pre>\n\n<p>There's both read and write to memory that's been freed, and a dereference of <code>dynamicArray</code> that was never assigned.</p>\n\n<p>To fix these, you'll need to ensure that your memory lifetimes are appropriate for when you use them, and avoid shadowing <code>dynamicArray</code> within <code>input_matrix()</code>.</p>\n\n<p>I advise you to avoid raw <code>new[]</code> and <code>delete[]</code> - prefer to use containers and smart pointers that own resources for you, and automatically release it from their destructors.</p>\n"}], "owner": {"reputation": 11, "user_id": 10450020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JZcLf.jpg?s=128&g=1", "display_name": "Arman Nikkhah", "link": "https://stackoverflow.com/users/10450020/arman-nikkhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1601, "favorite_count": 0, "accepted_answer_id": 53084215, "answer_count": 3, "score": -4, "last_activity_date": 1541068095, "creation_date": 1540988541, "question_id": 53083248, "link": "https://stackoverflow.com/questions/53083248/exception-thrown-read-access-violation-dynamicarray-was-0x1118235-occurre", "title": "Exception thrown: read access violation. **dynamicArray** was 0x1118235. occurred", "body": "<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nint **dynamicArray ;\nint ROWS, COLUMNS;\n\n//---------------------------------\nint input_matrix(int ROWS, int COLUMNS)\n{\n\n    //---------------------------------------\n    //memory allocated for elements of rows.\n    int **dynamicArray = new int *[ROWS];\n\n    //memory allocated for  elements of each column.\n    for (int i = 0; i &lt; ROWS; i++)\n        dynamicArray[i] = new int [COLUMNS];\n\n    //free the allocated memory\n    for (int i = 0; i &lt; ROWS; i++)\n        delete[] dynamicArray[i];\n    delete[] dynamicArray;\n    //-------------------------------------\n\n    for (int i = 0; i &lt; ROWS; i++)\n    {\n        for (int j = 0; j &lt; COLUMNS; j++)\n        {\n            cin &gt;&gt; dynamicArray[i][j];\n        }\n    }\n    return 0;\n}\n//---------------------------------------------\nint print_matrix(int **Array)\n{\n    for (int k = 0; k &lt; ROWS; k++)\n    {\n        for (int m = 0; m &lt; COLUMNS; m++)\n        {\n            cout &lt;&lt; Array[k][m];\n            if (m == COLUMNS)\n            {\n                cout &lt;&lt; \"\\n\";\n            }\n        }\n    }\n\n    return 0;\n\n}\n\n//---------------------------------\nint main()\n{\n    cin &gt;&gt; ROWS;\n    cin &gt;&gt; COLUMNS;\n    input_matrix(ROWS, COLUMNS);\n    print_matrix(dynamicArray);\n\n}\n</code></pre>\n\n<p>This code defines a matrix and get inputs and puts them in the members of the matrix but Every time I run this code I get read access violation error on the line:</p>\n\n<pre><code>cin &gt;&gt; dynamicArray[i][j];\n</code></pre>\n\n<p>here are the full details:\nException thrown: read access violation.\n<strong>dynamicArray</strong> was 0x1118235. occurred</p>\n\n<p>What should I do?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["c++", "templates", "constants"], "comments": [{"owner": {"reputation": 436, "user_id": 10448683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pY2C.jpg?s=128&g=1", "display_name": "Cortex", "link": "https://stackoverflow.com/users/10448683/cortex"}, "edited": false, "score": 0, "creation_date": 1540988241, "post_id": 53083113, "comment_id": 93062989, "body": "Please show us the actual class."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 6, "creation_date": 1540988280, "post_id": 53083113, "comment_id": 93063009, "body": "you may want to take a look at <a href=\"https://en.cppreference.com/w/cpp/types/conditional\" rel=\"nofollow noreferrer\"><code>std::conditional</code></a> and <a href=\"https://en.cppreference.com/w/cpp/types/is_same\" rel=\"nofollow noreferrer\"><code>std::is_same</code></a>. To get a more concrete answer, please consider to add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1540988326, "post_id": 53083113, "comment_id": 93063036, "body": "I&#39;d also add <a href=\"https://en.cppreference.com/w/cpp/types/is_const\" rel=\"nofollow noreferrer\">std::is_const</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1540988373, "post_id": 53083113, "comment_id": 93063071, "body": "though I would recommend to reconsider if having an implementation with <code>const</code> and one without for two different types is really best realized as a template"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1540988396, "creation_date": 1540988396, "answer_id": 53083201, "question_id": 53083113, "link": "https://stackoverflow.com/questions/53083113/how-to-deal-with-variable-const-in-templated-code/53083201#53083201", "title": "How to deal with variable const in templated code?", "body": "<p>Use a type_traits class.</p>\n\n<p>Start with an empty typetraits class, then specialize it for your first type. Place there all the types you need with the const.</p>\n\n<p>Then specialize it again for your second type, and place there the types without const.</p>\n\n<p>Finally, in your templated class, use the type traits with the template type to select the types you need.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 4, "last_activity_date": 1540989816, "last_edit_date": 1540989816, "creation_date": 1540989469, "answer_id": 53083518, "question_id": 53083113, "link": "https://stackoverflow.com/questions/53083113/how-to-deal-with-variable-const-in-templated-code/53083518#53083518", "title": "How to deal with variable const in templated code?", "body": "<p>Let's assume you have these two arbitrary types you want to instantiate your template class with, the first of which should trigger <code>const</code>ness for your members:</p>\n\n<pre><code>struct RequiresConst\n{};\n\nstruct OtherStruct\n{};\n</code></pre>\n\n<p>You can then write some convenience templates like this:</p>\n\n<pre><code>template&lt;class T, bool B&gt;\nusing conditional_const = typename std::conditional&lt;B, const T, T&gt;::type;\n\ntemplate&lt;class T&gt;\nconstexpr bool needsConst = std::is_same_v&lt;T, RequiresConst&gt;;\n</code></pre>\n\n<p>This allows you to naturally spell out what you want:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct MyClass\n{\n    conditional_const&lt;int, needsConst&lt;T&gt;&gt; member;\n};\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/rcpvLn\" rel=\"nofollow noreferrer\">Demo</a> (including test).</p>\n\n<p>Note that this only works for member variables. I'm not aware of a way to make functions <code>const</code> or non-<code>const</code> in a similarly convenient way. But you could write a const and non-const version for each function and enable exactly one of each pair via <code>std::enable_if</code> (or some other SFINAE).</p>\n\n<p>It should also be mentioned that \"this member should be const if the template parameter is <em>this</em> exact class\" is a pretty odd requirement - not necessarily wrong but smelly. There is probably some specific trait <em>that</em> class has that you should check instead. But maybe your use case really only ever has the template instantiated for those two classes and the above will be sufficient.</p>\n"}], "owner": {"reputation": 21, "user_id": 10583222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e2fd5557d204b71a4846e9d362f63a9?s=128&d=identicon&r=PG&f=1", "display_name": "doaoow", "link": "https://stackoverflow.com/users/10583222/doaoow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1540989816, "creation_date": 1540988094, "question_id": 53083113, "link": "https://stackoverflow.com/questions/53083113/how-to-deal-with-variable-const-in-templated-code", "title": "How to deal with variable const in templated code?", "body": "<p>I have a class <code>myClass</code> that is templated, and I have it in mind to use it for two particular types. </p>\n\n<p>The trouble is that whether or not something should be <code>const</code> in <code>myClass</code> depends on whether it is instantiated with the first type (in which pretty much everything is <code>const</code>) or the second type (in which pretty much everything is non-const).</p>\n\n<p>How do I solve this problem? It seems there are two possible approaches.</p>\n\n<p>I could write <code>const</code> in the templated code as if it were for the first type (the one that actually is const), and then somehow \"throw away\" all those consts once I instantiate with the second type? Is this possible?</p>\n\n<p>The second approach is to not write const at all, and then when I instantiate <code>myClass</code> with the first type, I make the entire object itself <code>const</code>. This seems to make up a bit for the lack of const-correctness in the class implementation itself...</p>\n\n<p>Or maybe I can do something else?</p>\n\n<p>EDIT: Wait, no, the last approach wouldn't work, as I then wouldn't be able to call non-const methods....</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": true, "score": 2, "last_activity_date": 1540996827, "last_edit_date": 1540996827, "creation_date": 1540988471, "answer_id": 53083226, "question_id": 53082456, "link": "https://stackoverflow.com/questions/53082456/when-i-try-to-convert-boost-time-duration-to-string-by-using-a-sstream-and-facet/53083226#53083226", "title": "when I try to convert Boost Time_duration to string by using a sstream and facet i don&#39;t get the desired format", "body": "<p>You are outputting time duration so you need to alter time duration format. Just creating time facet with default time duration format is not enough. IOW modifying your code like that ...: </p>\n\n<pre><code>std::string convert_duration_to_string(Duration           duration,\n                                       const std::string &amp;format) {\n    std::ostringstream os;\n    auto f = new boost::posix_time::time_facet(format.c_str());\n    f-&gt;time_duration_format(format.c_str());\n    os.imbue(std::locale(std::locale::classic(), f));\n    os &lt;&lt; duration;\n    return os.str();\n}\n</code></pre>\n\n<p>... seems to <a href=\"http://coliru.stacked-crooked.com/a/8f84f5f3a5fab32c\" rel=\"nofollow noreferrer\">work</a>.</p>\n"}], "owner": {"reputation": 311, "user_id": 10219752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c0ca2b3af780817516d42a4da7f6c3?s=128&d=identicon&r=PG&f=1", "display_name": "gringo", "link": "https://stackoverflow.com/users/10219752/gringo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "accepted_answer_id": 53083226, "answer_count": 1, "score": 1, "last_activity_date": 1540996827, "creation_date": 1540985874, "last_edit_date": 1540987263, "question_id": 53082456, "link": "https://stackoverflow.com/questions/53082456/when-i-try-to-convert-boost-time-duration-to-string-by-using-a-sstream-and-facet", "title": "when I try to convert Boost Time_duration to string by using a sstream and facet i don&#39;t get the desired format", "body": "<p>I am trying to convert a <code>boost::posix_time::time_duration</code> object into a <strong>string</strong> of the form \"%H%M. The problem is that the conversation is not working its as if it doesn't exist.</p>\n\n<ul>\n<li>The function that I use to convert Duration to string is <code>convert_duration_to_string</code></li>\n</ul>\n\n<p>I tried this way also as illustrated in the below function. It can solve the problem. But it is so ugly. Suppose in the future we have to change the date format. In that case we will have to change the code inside the function too.</p>\n\n<pre><code>std::string convert_duration_to_string(Duration duration) {\n  std::ostringstream os;\n  os &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; duration.hours()\n     &lt;&lt; std::setfill('0') &lt;&lt; std::setw(2) &lt;&lt; duration.minutes();\n  return os.str();\n}\n</code></pre>\n\n<hr>\n\n<pre><code>#include &lt;boost/date_time/local_time/local_time.hpp&gt;\n#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;\n#include \"boost/date_time/gregorian/gregorian.hpp\"\n\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\ntypedef boost::posix_time::time_duration Duration;\n\nboost::posix_time::ptime parse_time_object(const std::string &amp;time,\n                                           const std::string &amp;format) {\n  std::stringstream ss;\n  ss &lt;&lt; time.c_str();\n  ss.imbue(std::locale(\n      std::locale::classic(),\n      new boost::local_time::local_time_input_facet(format.c_str())));\n  boost::posix_time::ptime time_object;\n  ss &gt;&gt; time_object;\n\n  return time_object;\n}\n\n\nstd::string convert_duration_to_string(Duration           duration,\n                                       const std::string &amp;format) {\n  std::ostringstream os;\n  os.imbue(std::locale(std::locale::classic(),\n                       new boost::posix_time::time_facet(format.c_str())));\n  os &lt;&lt; duration;\n  return os.str();\n}\n\n\nint main (){\n    Duration duration = parse_time_object(\"0740\", \"%H%M\").time_of_day();\n    //[...] PLENTY OF THINGS CAN HAPPEN IN HERE THE DATE CAN GO through A \n    // WHOLE PIPELINE AND COME BACK\n    std::cout &lt;&lt; convert_duration_to_string(duration,\"%H%M\") &lt;&lt; std::endl; //Should Pring 0740. instead it is printing 07:40:00\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1540985232, "post_id": 53082254, "comment_id": 93061396, "body": "There are errors before that are more relevant than make failure."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 1, "creation_date": 1540985327, "post_id": 53082254, "comment_id": 93061434, "body": "For <code>cmake</code>, see <a href=\"https://stackoverflow.com/a/7859663/841108\">this</a>. For GNU <code>make</code>, read <a href=\"https://www.gnu.org/software/make/manual/html_node/index.html\" rel=\"nofollow noreferrer\">its documentation</a>. For <code>gcc</code> and <code>g++</code>, read about <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Invoking-GCC.html\" rel=\"nofollow noreferrer\">Invoking GCC</a>"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540985946, "post_id": 53082254, "comment_id": 93061752, "body": "@MatthieuBrucher I have edited my question and added more (the ones at the start). Couldn&#39;t scroll further than this. All the errors are similar to this one. Do you think that I should use conda to build my project too? since xtensor was installed using conda"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1540986165, "post_id": 53082254, "comment_id": 93061844, "body": "You may need to add the proper C++ flag for the new standards (-std=c++11 or the highest your gcc can give you),"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540986261, "post_id": 53082254, "comment_id": 93061901, "body": "@MatthieuBrucher please elaborate on how to do this."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540986301, "post_id": 53082254, "comment_id": 93061921, "body": "Which gcc version do you have?"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "edited": false, "score": 0, "creation_date": 1540986502, "post_id": 53082254, "comment_id": 93062030, "body": "I updated it to 7 on ubuntu 16"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540987020, "post_id": 53082254, "comment_id": 93062313, "body": "How do I set the flag in make command @MatthieuBrucher?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1540987093, "post_id": 53082254, "comment_id": 93062358, "body": "Actually, the cmake file requires C++14, so if you do VERBOSE=1 make, you should see a -std=c++14 ont he command line. Can you confirm this?"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540987362, "post_id": 53082254, "comment_id": 93062532, "body": "@MatthieuBrucher Tried again, got this : /home/fatima/anaconda2/bin/c++    -I/home/fatima/Downloads/xnet-master/lib  -std=gnu++1y -o CMakeFiles/test_xNet.dir/src/FullLayer.cpp.o -c /home/fatima/Downloads/xnet-master/src/FullLayer.cpp"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540987556, "post_id": 53082254, "comment_id": 93062618, "body": "It uses the wrong compiler, you should use /usr/bin/g++-7.something. Find the proper name of gcc-7 and g++-7 in the /usr/bin folder, set CC to the gcc one (/usr/bin/gcc-7xxxx) and CXX to the g++ one, clean your build folder and start again."}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540989986, "post_id": 53082254, "comment_id": 93063931, "body": "@MatthieuBrucher Where do I set it? like this : make CC=my_compiler ?"}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "edited": false, "score": 0, "creation_date": 1540990208, "post_id": 53082254, "comment_id": 93064084, "body": "I added this statement :  make CXX=/usr/bin/g++-7 and now the errors are :[  6%] Building CXX object CMakeFiles/test_xNet.dir/src/FullLayer.cpp.o In file included from /home/fatima/anaconda2/include/xtensor/xarray.hpp:16:0,  from /home/fatima/Downloads/xnet-master/src/mat.hpp:3,                  from /home/fatima/Downloads/xnet-master/src/FullLayer.hpp:6,                  from /home/fatima/Downloads/xnet-master/src/FullLayer.cpp:1: /home/fatima/anaconda2/include/xtl/xsequence.hpp:29:14: error: expected primary-expression before \u2018auto\u2019      decltype(auto) forward_sequence(A&amp;&amp; s);"}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540992030, "post_id": 53082254, "comment_id": 93065389, "body": "@Matthieu Brucher c++14 is enabled in <code>CMakeLists.txt</code> for this project. The problem must be somewhere else."}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1540993329, "post_id": 53082254, "comment_id": 93066344, "body": "@Micha\u0142Walenciak Is there a workaround for this? I really need to get it up and running by tomorrow"}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1540993555, "post_id": 53082254, "comment_id": 93066508, "body": "@NerdGiraffe: I cannot take a look now, but I can do it later today (6 hours from now)."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1540994175, "post_id": 53082254, "comment_id": 93066930, "body": "@Micha\u0142Walenciak She&#39;s using a C++ compiler that has <b>partial</b> C++14 support (see the -std=c++1y), but she has access to gcc 7, so that&#39;s the bug."}, {"owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "reply_to_user": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1540998599, "post_id": 53082254, "comment_id": 93069944, "body": "@Micha\u0142Walenciak Thank you! :D"}, {"owner": {"reputation": 3837, "user_id": 1749713, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PqPOy.png?s=128&g=1", "display_name": "Micha\u0142 Walenciak", "link": "https://stackoverflow.com/users/1749713/micha%c5%82-walenciak"}, "edited": false, "score": 0, "creation_date": 1541005422, "post_id": 53082254, "comment_id": 93074183, "body": "@NerdGiraffe:  Matthieu Brucher is right. You should use a proper compiler as suggested. I&#39;m not an ubuntu user, so I cannot recommend you the proper path."}], "owner": {"reputation": 81, "user_id": 10445598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6AUJjYo0rl8/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DX4oUr3MB8T7dbGiOzXepR0Y3KH_w/mo/photo.jpg?sz=128", "display_name": "Nerd Giraffe", "link": "https://stackoverflow.com/users/10445598/nerd-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540985883, "creation_date": 1540985126, "last_edit_date": 1540985883, "question_id": 53082254, "link": "https://stackoverflow.com/questions/53082254/how-to-use-make-command", "title": "How to use make command", "body": "<p>I am trying to install this library :\n<a href=\"https://github.com/sfdodge/xnet\" rel=\"nofollow noreferrer\">https://github.com/sfdodge/xnet</a></p>\n\n<p>I have successfully installed xtensor and xtensor blas using conda. Now, when I make this library (as mentioned in read me), it generates the following error:</p>\n\n<pre><code>CMakeFiles/test_xNet.dir/build.make:62: recipe for target 'CMakeFiles/test_xNet.dir/src/FullLayer.cpp.o' failed\nmake[2]: *** [CMakeFiles/test_xNet.dir/src/FullLayer.cpp.o] Error 1\nCMakeFiles/Makefile2:67: recipe for target 'CMakeFiles/test_xNet.dir/all' failed\nmake[1]: *** [CMakeFiles/test_xNet.dir/all] Error 2\nMakefile:83: recipe for target 'all' failed\nmake: *** [all] Error 2\n</code></pre>\n\n<p>Edit:</p>\n\n<p>Error:</p>\n\n<pre><code>In file included from /home/fatima/anaconda2/gcc/include/c++/string:48:0,\n                 from /home/fatima/Downloads/xnet-master/src/FullLayer.hpp:4,\n                 from /home/fatima/Downloads/xnet-master/src/FullLayer.cpp:1:\n/home/fatima/anaconda2/gcc/include/c++/bits/stl_function.h:158:12: error: provided for \u2018template&lt;class _Tp&gt; struct std::multiplies\u2019\n     struct multiplies : public binary_function&lt;_Tp, _Tp, _Tp&gt;\n            ^\nIn file included from /home/fatima/Downloads/xnet-master/src/mat.hpp:5:0,\n                 from /home/fatima/Downloads/xnet-master/src/FullLayer.hpp:6,\n                 from /home/fatima/Downloads/xnet-master/src/FullLayer.cpp:1:\n/home/fatima/anaconda2/include/xtensor/xsort.hpp: In function \u2018auto xt::sort(const xt::xexpression&lt;E&gt;&amp;, std::ptrdiff_t)\u2019:\n/home/fatima/anaconda2/include/xtensor/xsort.hpp:190:43: error: \u2018decay_t\u2019 is not a member of \u2018std\u2019\n             return detail::flat_sort_impl&lt;std::decay_t&lt;decltype(de)&gt;, eval_type&gt;(de);\n</code></pre>\n"}, {"tags": ["c++", "amazon-web-services", "compilation", "raspberry-pi"], "answers": [{"tags": [], "owner": {"reputation": 5944, "user_id": 646173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23cb9ef472d0c9c24f216dc6c19af696?s=128&d=identicon&r=PG", "display_name": "Markus Schumann", "link": "https://stackoverflow.com/users/646173/markus-schumann"}, "is_accepted": true, "score": 0, "last_activity_date": 1540999152, "creation_date": 1540999152, "answer_id": 53086767, "question_id": 53082147, "link": "https://stackoverflow.com/questions/53082147/pre-compile-amazon-kinesis-video-streams-producer-sdk-cpp-for-raspberry-pi-2/53086767#53086767", "title": "Pre compile amazon-kinesis-video-streams-producer-sdk-cpp for Raspberry pi 2", "body": "<p>You could consider cross compiling your library - for example on a Linux PC. Cross compiling is very common. Think about App development targeting phones. You don't compile your code on the phone. You cross compile on a Mac or PC and then push your executable to the phone.\nYou can do the same with Raspberry Pi. Here are a couple links:</p>\n\n<p><a href=\"https://medium.com/@au42/the-useful-raspberrypi-cross-compile-guide-ea56054de187\" rel=\"nofollow noreferrer\">https://medium.com/@au42/the-useful-raspberrypi-cross-compile-guide-ea56054de187</a>\n<a href=\"https://hackaday.com/2016/02/03/code-craft-cross-compiling-for-the-raspberry-pi/\" rel=\"nofollow noreferrer\">https://hackaday.com/2016/02/03/code-craft-cross-compiling-for-the-raspberry-pi/</a>\n<a href=\"https://visualgdb.com/tutorials/raspberry/crosscompiler/\" rel=\"nofollow noreferrer\">https://visualgdb.com/tutorials/raspberry/crosscompiler/</a></p>\n"}], "owner": {"reputation": 35, "user_id": 4745532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3MWxR.png?s=128&g=1", "display_name": "Yuri", "link": "https://stackoverflow.com/users/4745532/yuri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "accepted_answer_id": 53086767, "answer_count": 1, "score": 1, "last_activity_date": 1540999152, "creation_date": 1540984689, "question_id": 53082147, "link": "https://stackoverflow.com/questions/53082147/pre-compile-amazon-kinesis-video-streams-producer-sdk-cpp-for-raspberry-pi-2", "title": "Pre compile amazon-kinesis-video-streams-producer-sdk-cpp for Raspberry pi 2", "body": "<p>i've a Raspberry pi 2 with the Amazon Kinesis Stream SDK (<a href=\"https://github.com/awslabs/amazon-kinesis-video-streams-producer-sdk-cpp\" rel=\"nofollow noreferrer\">https://github.com/awslabs/amazon-kinesis-video-streams-producer-sdk-cpp</a>) correctly running on board.</p>\n\n<p>The compilation of the library was too long on the Raspberry pi 2, about 3H.</p>\n\n<p>So the question, is there a way to pre-compile this library on a more powerful server and then copy the files on the Raspberry?</p>\n\n<p>If it's possible i'd like to try this library also on Raspberry Pi Zero W (smaller in terms of size).</p>\n\n<p>The installer instructions are here <a href=\"https://github.com/awslabs/amazon-kinesis-video-streams-producer-sdk-cpp/blob/master/install-instructions-linux.md\" rel=\"nofollow noreferrer\">https://github.com/awslabs/amazon-kinesis-video-streams-producer-sdk-cpp/blob/master/install-instructions-linux.md</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "visual-c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1540984900, "post_id": 53081986, "comment_id": 93061204, "body": "You should probably submit a bug report."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540985194, "post_id": 53081986, "comment_id": 93061374, "body": "Seems like a bug indeed."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540989224, "post_id": 53081986, "comment_id": 93063513, "body": "FWIW, icc 18 and 19 also both fail to compile on godbolt"}], "answers": [{"tags": [], "owner": {"reputation": 2857, "user_id": 997527, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8d85e69468a00b418516425577e313d0?s=128&d=identicon&r=PG", "display_name": "Mac", "link": "https://stackoverflow.com/users/997527/mac"}, "is_accepted": false, "score": 0, "last_activity_date": 1542954144, "creation_date": 1542954144, "answer_id": 53441524, "question_id": 53081986, "link": "https://stackoverflow.com/questions/53081986/ambiguous-user-defined-conversion-in-visual-c-vs2017/53441524#53441524", "title": "Ambiguous user-defined-conversion in Visual C++ (VS2017)", "body": "<p>This seems like a compiler bug. I reported it here: <a href=\"https://developercommunity.visualstudio.com/content/problem/390055/fails-to-find-user-defined-conversion-in-virtual-i.html\" rel=\"nofollow noreferrer\">fails to find user-defined-conversion in virtual inheritance</a></p>\n\n<p>Feel free to up vote it so it gets prioritized for fixing</p>\n"}], "owner": {"reputation": 9, "user_id": 10585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f030a1f23da4481d45c294790412b79c?s=128&d=identicon&r=PG&f=1", "display_name": "Artem Diatlov", "link": "https://stackoverflow.com/users/10585135/artem-diatlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542954144, "creation_date": 1540984203, "question_id": 53081986, "link": "https://stackoverflow.com/questions/53081986/ambiguous-user-defined-conversion-in-visual-c-vs2017", "title": "Ambiguous user-defined-conversion in Visual C++ (VS2017)", "body": "<p>VS2017 (15.8.7/15.8.8) fails to compile code like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass A\n{\npublic:\n    operator int() const { std::cout &lt;&lt; \"int() 1\" &lt;&lt; std::endl; return 0; }\n    operator int() { std::cout &lt;&lt; \"int() 2\" &lt;&lt; std::endl; return 0; }\n};\n\nclass B : virtual public A {};\nclass C : virtual public A {};\nclass D : public B, public C {};\n\nint main()\n{\n    // Compiles when const version is defined before non-const.\n    // The assignment calls const version of course.\n    const D cobj;\n    int i = cobj;\n\n    // Compiles when non-const version is defined before const.\n    // The assignment calls non-const version.\n    D obj;\n    int j = obj;\n\n    return 0;\n}\n</code></pre>\n\n<p>Errors:</p>\n\n<ol>\n<li>error C2440: 'initializing': cannot convert from 'D' to 'int'</li>\n<li>note: Ambiguous user-defined-conversion</li>\n</ol>\n\n<p>g++ 7.3 (by default and with std=c++11/14/17) and VS2013 (update 5)\ncompiles this without any warnings/errors related to conversion functions\n(even with -Wall).</p>\n\n<p>Why the code is ambiguous? Is this a VC++ bug?</p>\n"}, {"tags": ["c++", "c++11", "reference", "placement-new"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 1, "creation_date": 1540983879, "post_id": 53081832, "comment_id": 93060649, "body": "The problems here are numerous. Besides <code>Storage</code> violating the Rule Of Three itself, if <code>setObject</code> never gets called, the destructor attempts to <code>delete</code> something that wasn&#39;t constructed as an instance of the object. Kaboom."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540983904, "post_id": 53081832, "comment_id": 93060665, "body": "You need to allocate your object somewhere, and there is no reason why the object from <code>setObject</code> was allocated on the stack and there is no way for you to retrieve it as it&#39;s const. So you can&#39;t assign it to your pointer. Use a unique_ptr to store the object and create a new one when you have a call to setObject. If you don&#39;t want to create a new obe, pass in a unique_ptr. Be explicit about your memory management."}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540984138, "post_id": 53081832, "comment_id": 93060788, "body": "Sam, I know that but thanks for pointing that out. The program is not finished yet. And that is why I decided to ask the specific question first: how to fill method setObject(). I know that I have to call destructor explicitly later."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "edited": false, "score": 0, "creation_date": 1540984627, "post_id": 53081832, "comment_id": 93061051, "body": "Are you limited to c++11?"}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540984884, "post_id": 53081832, "comment_id": 93061194, "body": "No, I am not limited. As I understand this can&#39;t be done in C++ 11 right?"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540985560, "post_id": 53082298, "comment_id": 93061558, "body": "Thanks, yes that I was suppose to do afterwards."}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540985828, "post_id": 53082298, "comment_id": 93061694, "body": "@Oleg, it would still be better just to use <code>std::optional</code>, but if you want to do it yourself you can get rid of the dynamic allocation using a buffer <code>char buffer[sizeof(Object)]</code> or a more elegant solution would be to use a one member <code>union { Object obj; }</code>."}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540986809, "post_id": 53082298, "comment_id": 93062197, "body": "Am I correct that if I use the setObject that you have wrote I need to do next: if (constructed)             (*object).~Object(); in the destructor?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540987070, "post_id": 53082298, "comment_id": 93062347, "body": "@Oleg, yes and you can use <code>object-&gt;~Object();</code> for better readability."}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540987753, "post_id": 53082298, "comment_id": 93062728, "body": "Is there a way to do the same thing if copy constructor is deleted?"}, {"owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "reply_to_user": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540987923, "post_id": 53082298, "comment_id": 93062816, "body": "@Oleg, you can use move constructor if it&#39;s available. You&#39;ll need to change the signature of <code>setObject</code> to accept rvalue reference or accept by-value and then use <code>std::move</code> in the body."}, {"owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "edited": false, "score": 0, "creation_date": 1540988647, "post_id": 53082298, "comment_id": 93063213, "body": "Thanks, I wanted to understand memory management more deeply. But for sure I will use C++ 17 (std::optional) for this kind of problem."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1540989833, "post_id": 53082298, "comment_id": 93063861, "body": "@r3musn0x <code>char buffer[sizeof(Object)]</code> is incorrect, since it does not guarantee proper alignment. Use, e.g., <code>std::aligned_storage</code> instead."}], "tags": [], "owner": {"reputation": 5360, "user_id": 9435815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xaQWU.jpg?s=128&g=1", "display_name": "r3mus n0x", "link": "https://stackoverflow.com/users/9435815/r3mus-n0x"}, "is_accepted": true, "score": 2, "last_activity_date": 1540988100, "last_edit_date": 1540988100, "creation_date": 1540985286, "answer_id": 53082298, "question_id": 53081832, "link": "https://stackoverflow.com/questions/53081832/is-there-a-way-to-assign-a-stacked-object-to-the-allocated-memory-using-placemen/53082298#53082298", "title": "Is there a way to assign a stacked object to the allocated memory using placement new?", "body": "<p>The simplest way to achieve the behavior you are trying to implement would be to use <code>std::optional</code> from C++17. It will allow you to \"reserve\" the memory for your <code>Object</code> without constructing it and <strong>without using the heap</strong>. It will also handle all the constructor and destructor calls.</p>\n\n<p>This also can be done without <code>std::optional</code>, but you will essentially have to implement a similar solution yourself. In any case you will need an additional member to specify whether object constructed or not, so you can properly handle the destruction and assignment.</p>\n\n<p>Then your <code>setObject</code> method will look something like this:</p>\n\n<pre><code>void setObject(const Object&amp; obj) {\n    if (constructed) {\n        *object = obj;\n    } else {\n        new (object) Object(obj);\n        constructed = true;\n    }\n}\n</code></pre>\n\n<p>To make use of move semantics you can modify your method like this:</p>\n\n<pre><code>void setObject(Object obj) {\n    if (constructed) {\n        *object = std::move(obj);\n    } else {\n        new (object) Object(std::move(obj));\n        constructed = true;\n    }\n}\n</code></pre>\n\n<p>Note that now <code>setObject</code> accepts it parameter by-value so it can be used with both lvalue and rvalue references to construct the parameter which is then will be moved into the member.</p>\n"}, {"tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1540986234, "last_edit_date": 1540986234, "creation_date": 1540985656, "answer_id": 53082392, "question_id": 53081832, "link": "https://stackoverflow.com/questions/53081832/is-there-a-way-to-assign-a-stacked-object-to-the-allocated-memory-using-placemen/53082392#53082392", "title": "Is there a way to assign a stacked object to the allocated memory using placement new?", "body": "<p>Placement new is a pretty advanced construct, and the thought of having an <code>Object*</code> that actually points to uninitialized memory is rather terrifying. May I suggest you make your life easier?</p>\n\n<pre><code>class Storage {\n    void setObject(const Object&amp; obj) {\n        if (object) {\n            *object = obj;\n        } else {\n            object.reset(new Object(obj));\n        }\n    }\nprivate:\n    std::unique_ptr&lt;Object&gt; object;\n};\n</code></pre>\n\n<p>This requires a copy constructor and assignment operator on the <code>Object</code> class, but is much more idiomatic C++. And in the <code>Object</code> implementation as shown, the default, compiler-provided implementations are already fine.</p>\n"}, {"tags": [], "owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "is_accepted": false, "score": 0, "last_activity_date": 1540990371, "last_edit_date": 1540990371, "creation_date": 1540990068, "answer_id": 53083706, "question_id": 53081832, "link": "https://stackoverflow.com/questions/53081832/is-there-a-way-to-assign-a-stacked-object-to-the-allocated-memory-using-placemen/53083706#53083706", "title": "Is there a way to assign a stacked object to the allocated memory using placement new?", "body": "<p>Just to clarify:</p>\n\n<blockquote>\n  <p>But can I put in the memory an object that is already created?</p>\n</blockquote>\n\n<p>No, you cannot. There is no way how to move objects in memory in C++. For <em>trivially copyable</em> types, you can copy (e.g, by <code>memcpy</code> or <code>memmove</code>) their memory representations. But this actually does not move anything. Moreover, your <code>Object</code> class is not trivially copyable.</p>\n\n<p>What you can <em>move</em> is the contents of objects, which is what move semantics is for.</p>\n"}], "owner": {"reputation": 897, "user_id": 894525, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/927cf5d1f6bb1a6ba75fcc548d5e5194?s=128&d=identicon&r=PG", "display_name": "Oleg", "link": "https://stackoverflow.com/users/894525/oleg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53082298, "answer_count": 3, "score": -1, "last_activity_date": 1540990371, "creation_date": 1540983665, "question_id": 53081832, "link": "https://stackoverflow.com/questions/53081832/is-there-a-way-to-assign-a-stacked-object-to-the-allocated-memory-using-placemen", "title": "Is there a way to assign a stacked object to the allocated memory using placement new?", "body": "<p>Here is my program:\n</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Object {\npublic:\n    Object() { cout &lt;&lt; \"Object constructor!\" &lt;&lt; endl; }\n    ~Object() { cout &lt;&lt; \"Object destructor!\" &lt;&lt; endl; }\n    Object(const Object&amp; obj) { information = obj.information; cout &lt;&lt; \"Copy constructor!\" &lt;&lt; endl; }\n    void setInformation(const string info) { information = info; }\n    string getInformation() const { return information; }\nprivate:\n    string information;\n};\n\nclass Storage {\npublic:\n    Storage() { object = static_cast&lt;Object*&gt;(operator new(sizeof(Object))); }\n    ~Storage() { operator delete(object); }\n\n    void setObject(const Object&amp; obj) {\n        // Todo: assign obj to the allocated space of the pointer object\n    }\nprivate:\n    Object* object;\n};\n\nint main()\n{\n    Object o;\n    o.setInformation(\"Engine\");\n    Storage storage;\n    storage.setObject(o);\n    return 0;\n}\n</code></pre>\n\n<p>In Storage I am allocating space to store one object of type Object without creating it. I am using placement new for that which allocates a memory, and freeing it in the destructor. I know that I can use \n</p>\n\n<pre><code>object = new(object) Object()\n</code></pre>\n\n<p>to construct an object. But can I put in the memory an object that is already created? In my case call method setObject(). If yes what problems I can encounter with such memory management? Thanks in advance.</p>\n"}, {"tags": ["c++", "qlineedit", "qtreewidget"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1540984883, "post_id": 53081738, "comment_id": 93061193, "body": "one question per post please."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "edited": false, "score": 0, "creation_date": 1540986051, "post_id": 53081738, "comment_id": 93061797, "body": "Learn <a href=\"http://doc.qt.io/qt-5/model-view-programming.html\" rel=\"nofollow noreferrer\">Qt model-view programming</a> and <a href=\"http://doc.qt.io/qt-5/signalsandslots.html\" rel=\"nofollow noreferrer\">signals and slots</a>"}], "owner": {"reputation": 47, "user_id": 9735024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ec1a398b0aa4716b4895cc3594aa7c?s=128&d=identicon&r=PG&f=1", "display_name": "Minikornio", "link": "https://stackoverflow.com/users/9735024/minikornio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540984893, "creation_date": 1540983431, "last_edit_date": 1540984893, "question_id": 53081738, "link": "https://stackoverflow.com/questions/53081738/problems-with-qtreewidget", "title": "Problems with QTreeWidget", "body": "<p>Good morning, I am learning about programming and GUI in Qt c++ and I have some doubts:</p>\n\n<p><img src=\"https://i.stack.imgur.com/VchM9.png\" alt=\"picture here\"></p>\n\n<p>Let's suppose you have this GUI shown in the picture. No worries about how has it been created. It has:</p>\n\n<ul>\n<li><p>QTreeWidget</p></li>\n<li><p>QLineEdit</p></li>\n<li><p>QPushButton1</p></li>\n<li><p>QPushButton2</p></li>\n</ul>\n\n<p>How would you make the following things?</p>\n\n<ol>\n<li><p>When clicking on a name or in a value, to make that only the value of this row appear in the QLineEdit</p>\n\n<p>In the next example, I have been able to show the name or the value, but I only want the value to be shown, even if the name has been clicked.</p>\n\n<pre><code>void MainWindow::on_treeView_activated(const QModelIndex &amp;index)\n{\n    QString val = ui-&gt;treeView-&gt;model()-&gt;data(index).toString();\n    ui-&gt;lineEdit-&gt;setText(val);\n}\n</code></pre></li>\n<li><p>If I change the value of the QLineEdit and then click the QPushButton1, the QTreeWidget should be updated with this new value.</p></li>\n<li><p>If I click the QPushButton2, save \"the names = the values\" into a .txt file</p></li>\n<li><p>(FUTURE) I want to have these 3 point clear first. Then, my goal is to make the same with this picture:</p>\n\n<p><img src=\"https://i.stack.imgur.com/QZyma.png\" alt=\"picture2 here\"></p></li>\n</ol>\n\n<p>Thanks a lot in advance!</p>\n"}, {"tags": ["c++", "debugging", "opengl"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1540984581, "post_id": 53081562, "comment_id": 93061027, "body": "<code>glEnableVertexAttribArray(verticesVboId_);</code>: The parameter should be the location of the attribute in the shader, not the VBO.  <code>glEnableVertexAttribArray(indicesVboId_);</code> same, but in addition index buffers are not attributes."}, {"owner": {"reputation": 47, "user_id": 5925367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5bf7d121ecceb8c12f8cd1dd7f5b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/5925367/stuart"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1540985092, "post_id": 53081562, "comment_id": 93061322, "body": "That solved it! Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 3, "last_activity_date": 1540989566, "creation_date": 1540989566, "answer_id": 53083548, "question_id": 53081562, "link": "https://stackoverflow.com/questions/53081562/generic-vertex-attribute-array-n-uses-a-pointer-with-small-value0x0000000000000/53083548#53083548", "title": "Generic vertex attribute array N uses a pointer with small value(0x0000000000000000)?", "body": "<p>This error messages happen because wrong vertex attributes get enabled.</p>\n\n<p>The two lines </p>\n\n<pre><code>glEnableVertexAttribArray(verticesVboId_);\nglEnableVertexAttribArray(indicesVboId_);\n</code></pre>\n\n<p>are wrong because the parameter should specify the location of the attribute in the shader and not a buffer id.</p>\n"}], "owner": {"reputation": 47, "user_id": 5925367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5bf7d121ecceb8c12f8cd1dd7f5b7f?s=128&d=identicon&r=PG&f=1", "display_name": "Stuart", "link": "https://stackoverflow.com/users/5925367/stuart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 1, "accepted_answer_id": 53083548, "answer_count": 1, "score": 0, "last_activity_date": 1540989586, "creation_date": 1540982875, "last_edit_date": 1540989586, "question_id": 53081562, "link": "https://stackoverflow.com/questions/53081562/generic-vertex-attribute-array-n-uses-a-pointer-with-small-value0x0000000000000", "title": "Generic vertex attribute array N uses a pointer with small value(0x0000000000000000)?", "body": "<p>Getting this output from my OpenGl debug callback everytime glDrawElements is called:</p>\n\n<blockquote>\n  <p>[OPENGL][SEVERITY_LOW][API][OTHER]Usage warning: Generic vertex\n  attribute array 1 uses a pointer with a small value\n  (0x0000000000000000). Is this intended to be used as an offset into a\n  buffer object?</p>\n  \n  <p>[OPENGL][SEVERITY_LOW][API][OTHER]Usage warning: Generic vertex\n  attribute array 2 uses a pointer with a small value\n  (0x0000000000000000). Is this intended to be used as an offset into a\n  buffer object?</p>\n</blockquote>\n\n<p>Code for setting up VAO/VBO:</p>\n\n<pre><code>inline void Mesh::CreateMesh(std::vector&lt;int&gt; _indices, std::vector&lt;float&gt; _verts, std::vector&lt;float&gt; _norms, std::vector&lt;float&gt; _texCoords) {\n    indices_ = _indices;\n    vertices_ = _verts;\n    normals_ = _norms;\n    texCoords_ = _texCoords;\n\n    glGenVertexArrays(1, &amp;vaoId_);\n    glBindVertexArray(vaoId_);\n\n    std::cout &lt;&lt; \"Mesh::SetupAttribBuffer::Vertex Array Created: \" &lt;&lt; vaoId_ &lt;&lt; std::endl;\n\n    glGenBuffers(1, &amp;indicesVboId_);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indicesVboId_);\n    glBufferData(GL_ELEMENT_ARRAY_BUFFER, indices_.size() * sizeof(int), indices_.data(), GL_STATIC_DRAW);\n\n    std::cout &lt;&lt; \"Mesh::SetupAttribBuffer::Indices Buffer Created: \" &lt;&lt; indicesVboId_ &lt;&lt; std::endl;\n\n    verticesVboId_ = SetupAttribBuffer(0, 3, vertices_.data());\n    //normalsVboId_ = SetupAttribBuffer(1, 3, normals_);\n    //texCoordsVboId_ = SetupAttribBuffer(2, 2, texCoords_);\n\n    glEnableVertexAttribArray(verticesVboId_);\n    //glEnableVertexAttribArray(normalsVboId_);\n    //glEnableVertexAttribArray(texCoordsVboId_);\n    glEnableVertexAttribArray(indicesVboId_);\n\n    glBindBuffer(GL_ARRAY_BUFFER, 0);\n    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, 0);\n    glBindVertexArray(0);\n}\n\ninline int Mesh::SetupAttribBuffer(int _location, int _components, float _data[]) {\n    unsigned int bufferId;\n    glGenBuffers(1, &amp;bufferId);\n    glBindBuffer(GL_ARRAY_BUFFER, bufferId);\n    glBufferData(GL_ARRAY_BUFFER, sizeof(_data) * sizeof(float), _data, GL_STATIC_DRAW);\n    glEnableVertexAttribArray(_location);\n    glVertexAttribPointer(_location, _components, GL_FLOAT, GL_FALSE, 0, 0);\n\n    std::cout &lt;&lt; \"Mesh::SetupAttribBuffer::Attribute Buffer Created: \" &lt;&lt; bufferId &lt;&lt; std::endl;\n\n    return bufferId;\n}\n</code></pre>\n\n<p>How i am calling glDrawElements:</p>\n\n<pre><code>glBindVertexArray(mesh-&gt;vaoId_);\nglBindBuffer(GL_ELEMENT_ARRAY_BUFFER, mesh-&gt;indicesVboId_);\nglDrawElements(GL_TRIANGLES, mesh-&gt;indicesCount(), GL_UNSIGNED_INT, nullptr);\n\nglBindVertexArray(0);\n</code></pre>\n\n<p>Even though I am getting the callback output(at top), my mesh(triangle) still manages to get rendered fine. My question is, \"Is there something I need to change when setting up my VAO/VBO's to stop those errors? Or should I just make my callback method ignore those types of errors?\" </p>\n"}, {"tags": ["c++", "windows", "winapi", "webcam", "ms-media-foundation"], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1541498057, "post_id": 53096887, "comment_id": 93228567, "body": "<code>EnumProcessModulesEx</code>, as the name suggests, enumerates <b>modules</b> in a process. It doesn&#39;t enumerate <i>&quot;all open handles&quot;</i>."}], "tags": [], "owner": {"reputation": 32, "user_id": 10417364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/492bc2cc4232249f86c7c9e6cfef1ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Baron", "link": "https://stackoverflow.com/users/10417364/baron"}, "is_accepted": false, "score": -2, "last_activity_date": 1541057431, "creation_date": 1541057431, "answer_id": 53096887, "question_id": 53081413, "link": "https://stackoverflow.com/questions/53081413/windows-10-camera-frame-server-identify-actual-app-using-webcam/53096887#53096887", "title": "Windows 10 Camera frame server, identify actual app using webcam", "body": "<p>As far as I know, there has no existing APIs which could help you directly. You may could use process explorer to get the WebCam's handle value, then use like <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/psapi/nf-psapi-enumprocessmodulesex\" rel=\"nofollow noreferrer\">EnumProcessModulesEx</a>  to enumerate all open handles of the process and check which app is using this WebCam.</p>\n\n<p>Here is an example about open file finding, you could refer to it.\n<a href=\"https://www.codeproject.com/Articles/18975/Listing-Used-Files\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/18975/Listing-Used-Files</a></p>\n\n<p>Best Regards,\nBaron</p>\n"}, {"tags": [], "owner": {"reputation": 64286, "user_id": 868014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PoaTp.png?s=128&g=1", "display_name": "Roman R.", "link": "https://stackoverflow.com/users/868014/roman-r"}, "is_accepted": true, "score": 2, "last_activity_date": 1541842036, "last_edit_date": 1541842036, "creation_date": 1541617135, "answer_id": 53196050, "question_id": 53081413, "link": "https://stackoverflow.com/questions/53081413/windows-10-camera-frame-server-identify-actual-app-using-webcam/53196050#53196050", "title": "Windows 10 Camera frame server, identify actual app using webcam", "body": "<p>I doubt you can identify the applications capturing video using frame server (well, actually the same applies to those applications not using frame server in current or older versions of Windows). </p>\n\n<p>Microsoft added frame server to insert a proxy between video capture applications and actual drivers implementing such capture. Even though the declared intention is to share video camera device between applications, I don't think it is operational and frame server is at all remains almost undocumented. My personal understanding is that Microsoft needed to hook in in the convenient way to enable access to video cameras for their Windows Hello technology and so they tee'd the media pipeline. No further steps were done to offer any new options to user applications.</p>\n\n<p>Minimalistic desktop video capture applications trying to share a webcam still receive a failure suggesting that sharing is impossible for general purpose applications (I guess Microsoft's like Hello are likely to have an undocumented backdoor in frame server for camera sharing purposes, or alternatively sharing is enabled for specific class of clients such as using Capture Engine API or alike):</p>\n\n<p><a href=\"https://i.stack.imgur.com/8fuNb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8fuNb.png\" alt=\"enter image description here\"></a></p>\n\n<p>That is, there is no API to enumerate frame server clients, and overall application are not even aware of whether they are talking to real driver or frame server proxy.</p>\n\n<p>I think that attempts to obtain related information indirectly, such as by checking which applications use video related modules, is not reliable and even more confusing in case of multiple video capture devices, including virtual ones.</p>\n"}], "owner": {"reputation": 551, "user_id": 3819404, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9a13f1a16feb74da624196650a7151ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3819404", "link": "https://stackoverflow.com/users/3819404/user3819404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2383, "favorite_count": 0, "accepted_answer_id": 53196050, "answer_count": 2, "score": 5, "last_activity_date": 1541842036, "creation_date": 1540982362, "last_edit_date": 1541617237, "question_id": 53081413, "link": "https://stackoverflow.com/questions/53081413/windows-10-camera-frame-server-identify-actual-app-using-webcam", "title": "Windows 10 Camera frame server, identify actual app using webcam", "body": "<p>On windows 10, apps that need access to webcam, communicate with <code>frame server</code> which is a service that runs under <code>svchost</code>.</p>\n\n<p>I filter out the webcam stream and the process id i get is of <code>svchost</code>. I want to identify the actual process that is using the webcam.</p>\n\n<p>Is there a definite way to identify programmatically what is the actual app that is using the webcam?\nI have looked into enumerating handles of processes(have to deal with <code>NtQueryObject()</code> hang as well), but i am looking for a better definite solution.</p>\n"}, {"tags": ["c++", "arrays", "initialization", "warnings"], "comments": [{"owner": {"reputation": 568, "user_id": 3523471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09ebad2262d496c7850b9324d97116a5?s=128&d=identicon&r=PG&f=1", "display_name": "BluesSolo", "link": "https://stackoverflow.com/users/3523471/bluessolo"}, "edited": false, "score": 1, "creation_date": 1540981151, "post_id": 53080957, "comment_id": 93059156, "body": "Please provide a full example which shows the actual warning. Both your snippets together are fine if you place them in the right order."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540981240, "post_id": 53080957, "comment_id": 93059208, "body": "What is MISRA 2012 Rule 9.1, mandatory?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1540981385, "post_id": 53080957, "comment_id": 93059298, "body": "This code is far from a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  Missing is <code>MONTHS_IN_A_YEAR</code> and the declaration of <code>list_index</code>.  We also have no context as to where, when, or how these two pieces of code are situated in your program.  You could have a global array, and then a local array with the same name (by mistake).  Post a complete program, not two disjointed snippets."}, {"owner": {"reputation": 1, "user_id": 3975177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7ODKj.jpg?s=128&g=1", "display_name": "Swordfish", "link": "https://stackoverflow.com/users/3975177/swordfish"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540981386, "post_id": 53080957, "comment_id": 93059300, "body": "@MatthieuBrucher MISRA is a coding standard. 9.1 wants initialized variables."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1540981573, "post_id": 53080957, "comment_id": 93059408, "body": "@AreebTariq:  Is this warning given by a static analyser?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1540996272, "post_id": 53080957, "comment_id": 93068350, "body": "Remove the quantity when defining an array; let the compiler determine the size."}], "answers": [{"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1540983486, "last_edit_date": 1540983486, "creation_date": 1540982923, "answer_id": 53081578, "question_id": 53080957, "link": "https://stackoverflow.com/questions/53080957/variable-may-not-have-been-initialized-misra-2012-rule-9-1-mandatory/53081578#53081578", "title": "Variable may not have been initialized [MISRA 2012 Rule 9.1, mandatory]", "body": "<p>This is most probably a bug in your static analyser which detects a false positive on both lines you have mentioned.<br>\nThis is a common problem in static analysis and there is even an IEEE paper on <a href=\"https://ieeexplore.ieee.org/document/7381820\" rel=\"nofollow noreferrer\">elimination of such false positives</a>. </p>\n\n<p>In the Related questions on the right side, I can see at least one question related to a <a href=\"https://stackoverflow.com/questions/43206493/misra-c-rule-5-0-3-false-positive-warning?rq=1\">MISRA C++ false positive warning</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 3109050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebb2c6a47bab480c2c2d880c0f3e9773?s=128&d=identicon&r=PG&f=1", "display_name": "enigma", "link": "https://stackoverflow.com/users/3109050/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1540983486, "creation_date": 1540980802, "question_id": 53080957, "link": "https://stackoverflow.com/questions/53080957/variable-may-not-have-been-initialized-misra-2012-rule-9-1-mandatory", "title": "Variable may not have been initialized [MISRA 2012 Rule 9.1, mandatory]", "body": "<p>I've a function which takes seconds as input and convert it into into time and date. However I'm experiencing warning about Array Variable 'cumDaysInMonths' may not have been initialized [MISRA 2012 Rule 9.1, mandatory]. I've initialized it and then updated in a loop. The warnings are on both lines and linked. </p>\n\n<p>The initialization is as follows:</p>\n\n<pre><code>unsigned short cumDaysInMonths[MONTHS_IN_A_YEAR] = {0,31,59,90,120,151,181,212,243,273,304,334};\n</code></pre>\n\n<p>And the usage within loop is as follows:</p>\n\n<pre><code>for(list_index = 2; list_index &lt; MONTHS_IN_A_YEAR; list_index++)\n{\n    cumDaysInMonths[list_index]++;\n}\n</code></pre>\n\n<p>I'm not able to understand the reason of this warning and how to fix it?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 0, "creation_date": 1540980388, "post_id": 53080781, "comment_id": 93058747, "body": "Have you ever heard of inheritance?"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1540980511, "post_id": 53080781, "comment_id": 93058826, "body": "If the definition of <code>SendData</code> will be essentially the same in both, a template sounds like a good answer - could you expand on what troubles you had using a class template? If the functions are rather different, polymorphism is probably the way to go."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1540981241, "post_id": 53080781, "comment_id": 93059210, "body": "Templates. Same routine with same member variables, different types. That&#39;s exactly what templates are for. The whole of C++ is built on that. If you don&#39;t like it, perhaps you need a different language."}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 5, "last_activity_date": 1540980491, "creation_date": 1540980491, "answer_id": 53080867, "question_id": 53080781, "link": "https://stackoverflow.com/questions/53080781/c-class-declaration-when-same-routine-different-member-variable-type/53080867#53080867", "title": "c++ class declaration when same routine, different member variable type", "body": "<p>You can use a templated class:</p>\n\n<pre><code>template &lt;typename NetworkType&gt;\nclass NetworkClass\n{\n    NetworkType tcp_socket_{io_service_};\n};\n</code></pre>\n\n<p>and then use:</p>\n\n<pre><code>using IPclass = NetworkClass&lt;tcp::socket&gt;;\n</code></pre>\n\n<p>If you need more than this, you can use type traits to define more advanced behaviors without dynamic polymorphism.</p>\n"}], "owner": {"reputation": 55, "user_id": 9460589, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "StudyNPractice", "link": "https://stackoverflow.com/users/9460589/studynpractice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53080867, "answer_count": 1, "score": 0, "last_activity_date": 1540980491, "creation_date": 1540980214, "question_id": 53080781, "link": "https://stackoverflow.com/questions/53080781/c-class-declaration-when-same-routine-different-member-variable-type", "title": "c++ class declaration when same routine, different member variable type", "body": "<p>I'm trying to make a class something like this </p>\n\n<pre><code>class IPclass {\n  void SendData();\n\n  io_service io_service_;\n  tcp::socket tcp_socket_{io_service_};\n};\n\nclass UDSclass {\n  void SendData();\n\n  io_service io_service_;\n  local::stream_protocol::socket tcp_socket_{io_service_};\n};\n</code></pre>\n\n<p>The thing is, IPclass and UDSclass have same routine with same member variables with one difference: socket type.</p>\n\n<p>I want to make one class named SessionClass instead of these two classes.</p>\n\n<p>These are options I tried and reasons of failure.</p>\n\n<ul>\n<li>Union: Cannot use same variable name. (I want to use <strong>var</strong> rather than <strong>u.var1</strong> on methods)</li>\n<li>Template: Have to define template typename on each constructor.</li>\n<li>Using 2 different variable in one class: Have to use method with different parameters</li>\n</ul>\n\n<p>Is there any suggestion or known solution for this problem?\nThanks a lot.</p>\n"}, {"tags": ["c++", "c++11", "reflection", "runtime", "compile-time"], "comments": [{"owner": {"reputation": 422, "user_id": 5975842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea7a9edae7429a03c76b073b1fd6a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistree", "link": "https://stackoverflow.com/users/5975842/chemistree"}, "edited": false, "score": 0, "creation_date": 1540980594, "post_id": 53080705, "comment_id": 93058863, "body": "If you can use c++17, you might want to look at std::variant"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540980619, "post_id": 53080705, "comment_id": 93058883, "body": "Yeah, I was gonna point out this can be reduced to a variant of vectors. Unless I&#39;m missing something."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 422, "user_id": 5975842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fea7a9edae7429a03c76b073b1fd6a8e?s=128&d=identicon&r=PG&f=1", "display_name": "Chemistree", "link": "https://stackoverflow.com/users/5975842/chemistree"}, "edited": false, "score": 0, "creation_date": 1540981994, "post_id": 53080705, "comment_id": 93059645, "body": "@Chemistree: This doesn&#39;t help, because I don&#39;t get to change the API (see edit)."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540982006, "post_id": 53080705, "comment_id": 93059652, "body": "@StoryTeller: See edit."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1541550763, "post_id": 53080705, "comment_id": 93254317, "body": "A possibly-related old question of mine, not about variants: <a href=\"https://stackoverflow.com/questions/38914655/idiom-for-simulating-run-time-numeric-template-parameters\">Idiom for simulating run-time numeric template parameters?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 1, "creation_date": 1540981716, "post_id": 53080842, "comment_id": 93059483, "body": "In order to use type traits, you need to know the enum value at compile time. I only know it at run ti.e"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 1, "last_activity_date": 1540983360, "last_edit_date": 1540983360, "creation_date": 1540980393, "answer_id": 53080842, "question_id": 53080705, "link": "https://stackoverflow.com/questions/53080705/handing-type-erased-data-at-runtime-how-not-to-reinvent-the-wheel/53080842#53080842", "title": "Handing type-erased data at runtime - how not to reinvent the wheel?", "body": "<p>This seems to be what type_traits are used for (<a href=\"https://en.cppreference.com/w/cpp/types\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/types</a>).</p>\n\n<p>Basically, you define a templated structure, by default it's empty, and you specialize it for each enum you have. Then in your code you use <code>MyTypeTraits&lt;MyEnumValue&gt;::type</code> to get the type associated to the enum you want.</p>\n\n<p>And everything is defined at compile time. If you need runtime information, you can always do some dispatch based on the value of the template (for instance if you store the enum as well).</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1540984307, "post_id": 53081695, "comment_id": 93060872, "body": "1. I was asking about how to avoid writing this kind of stuff... 2. I also need to translate back. 3. The actual buffers are more complicated than that, and a single switch won&#39;t do. 4. This works for a single buffer. But I have multiple functions which take several buffers, and if that&#39;s not enough - functions which take a variable number of buffers: <code>void foo(buffer* buffers, int num_buffers);</code>."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1540987131, "post_id": 53081695, "comment_id": 93062374, "body": "@einpoklum 1. Getting back into the type system requires exactly this kind of stuff. 2. With what you asked, it&#39;s trivial to have each <code>TypedBuffer</code> have a conversion function to <code>buffer</code>. We can&#39;t give you good code/abstractions for that if we don&#39;t know what is different/same between those though. 3. We can&#39;t give you code for an unspecific &quot;it&#39;s more complicated&quot;. 4. Loop over the buffers and treat each one as above. Use polymorphy (as hinted in the answer) if you have to (e.g. for storing the resulting typed buffers in the same container)."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1540987324, "post_id": 53081695, "comment_id": 93062506, "body": "@einpoklum More generally: If your API is fully outside the C++ type system (as you show) then the only way to get back into C++&#39;s type system is to bridge that gap in each API function somehow. The way to do this with minimal effort depends on how your API looks like. For example, you could have a type &lt;-&gt; number mapping somewhere and loop over that, or a variety of other things. It would be a lot easier to discuss this if the question had representative examples of it. It&#39;s probably too broad otherwise."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 4, "last_activity_date": 1540983299, "creation_date": 1540983299, "answer_id": 53081695, "question_id": 53080705, "link": "https://stackoverflow.com/questions/53080705/handing-type-erased-data-at-runtime-how-not-to-reinvent-the-wheel/53081695#53081695", "title": "Handing type-erased data at runtime - how not to reinvent the wheel?", "body": "<p>The goal here should be to get back into the C++ type system as fast as possible. To do this, there should be one central function that switches based on the (runtime) <code>data_type</code> and then hands off each case to a (compile-time) template version.</p>\n\n<p>You have not indicated how the associated functions look like, but here is an example:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct TypedBuffer\n{\n  TypedBuffer(void* data, size_t elementCount) { /* ... */ }\n  // ...\n};\n\ntemplate&lt;typename T&gt;\nvoid handleBufferTyped(void* data, size_t elementCount)\n{\n  TypedBuffer&lt;T&gt; buf(data, elementCount);\n  // Do whatever you want - you're back in the type system.\n}\n\nvoid handleBuffer(buffer buf)\n{\n  switch (buf.element_type)\n  {\n  case INT16:     handleBufferTyped&lt;int16_t&gt;(buf.data, buf.size); break;\n  case INT32:     handleBufferTyped&lt;int32_t&gt;(buf.data, buf.size); break;\n  case UINT64:    handleBufferTyped&lt;uint64_t&gt;(buf.data, buf.size); break;\n  case FLOAT:     handleBufferTyped&lt;float&gt;(buf.data, buf.size); break;\n  case TIMESTAMP: handleBufferTyped&lt;std::time_t&gt;(buf.data, buf.size); break;\n  }\n}\n</code></pre>\n\n<p>If needed, you can also have <code>TypedBuffer</code> inherit from a non-templated base class so you can return from <code>handleBuffer</code> polymorphically, but that's mixing a lot of paradigms and probably unnecessary.</p>\n"}, {"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": false, "score": 2, "last_activity_date": 1540990321, "last_edit_date": 1540990321, "creation_date": 1540989779, "answer_id": 53083620, "question_id": 53080705, "link": "https://stackoverflow.com/questions/53080705/handing-type-erased-data-at-runtime-how-not-to-reinvent-the-wheel/53083620#53083620", "title": "Handing type-erased data at runtime - how not to reinvent the wheel?", "body": "<blockquote>\n  <p>how not to reinvent the wheel?</p>\n</blockquote>\n\n<p>Simply, use <code>std::variant</code> along with conversions back and forth. It's in the standard library for a reason.</p>\n\n<p>On to reinventing the wheel, visiting is the simplest generic mechanism to handle type-erased data</p>\n\n<pre><code>enum data_type { INT16 = 0, INT32, UINT64, FLOAT, TIMESTAMP, size };\n\ntemplate&lt;data_type d&gt;\nstruct data\n{\n    using type = void;\n};\ntemplate&lt;&gt;\nstruct data&lt;INT16&gt;\n{\n    using type = int16_t;\n};\n// and so on\n\ntemplate&lt;data_type d&gt;\nusing data_t = typename data&lt;d&gt;::type;\n\n\ntemplate&lt;typename F, typename T&gt;\nvoid indirect(void* f, void* t, int n)\n{\n    (*(F*)f)((T*)t, n);\n}\n\ntemplate&lt;typename F, size_t... Is&gt;\nvoid visit_(F&amp;&amp; f, buffer* bufs, int n, std::index_sequence&lt;Is...&gt;)\n{\n    using rF = typename std::remove_reference&lt;F&gt;::type;\n    using f_t = void(*)(void*, void*, int);\n    static constexpr f_t fs[] = {indirect&lt;rF, data_t&lt;data_type(Is)&gt;&gt;...};\n    for(int i = 0; i &lt; n; i++)\n        fs[bufs[i].element_type](&amp;f, bufs[i].data, bufs[i].size);\n}\n\ntemplate&lt;typename F&gt;\nvoid visit(F&amp;&amp; f, buffer* bufs, int n)\n{\n    visit_(std::forward&lt;F&gt;(f), bufs, n, std::make_index_sequence&lt;data_type::size&gt;{});\n}\n</code></pre>\n\n<p><code>std::index_sequence</code> and friends can be implemented relatively easily in C++11. Use as</p>\n\n<pre><code>struct printer\n{\n    template&lt;typename T&gt;\n    void operator()(T* t, int n)\n    {\n        for(int i = 0; i &lt; n; i++)\n            std::cout &lt;&lt; t[i] &lt;&lt; ' ';\n        std::cout &lt;&lt; '\\n';\n    }\n};\n\nvoid foo()\n{\n    visit(printer{}, nullptr, 0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1541012318, "creation_date": 1541012318, "answer_id": 53090276, "question_id": 53080705, "link": "https://stackoverflow.com/questions/53080705/handing-type-erased-data-at-runtime-how-not-to-reinvent-the-wheel/53090276#53090276", "title": "Handing type-erased data at runtime - how not to reinvent the wheel?", "body": "<p>Use <code>boost::variant</code> and <code>gsl::span</code>.</p>\n\n<pre><code>enum data_type { INT16 = 0, INT32, UINT64, FLOAT, TIMESTAMP };\nstruct buffer {\n  data_type element_type;\n  size_t    size; // in elements of element_type, not bytes\n  void*     data;\n};\n\ntemplate&lt;class...Ts&gt;\nusing var_span = boost::variant&lt; gsl::span&lt; Ts &gt; ... &gt;;\n\nusing buffer_span = var_span&lt; std::int16_t, std::int32_t, std::uint64_t, float, ??? &gt;;\n\nbuffer_span to_span( buffer buff ) {\n  switch (buff.element_type) {\n    case INT16: return gsl::span&lt;std::int16_t&gt;( (std::int16_t*)buff.data, buff.size );\n    // etc\n  }\n}\n</code></pre>\n\n<p>now you can</p>\n\n<pre><code>auto span = to_span( buff );\n</code></pre>\n\n<p>and then visit the span to type-safe access the buffer of data.</p>\n\n<p>Writing visitors is less painful in <a href=\"/questions/tagged/c%2b%2b14\" class=\"post-tag\" title=\"show questions tagged &#39;c++14&#39;\" rel=\"tag\">c++14</a> due to <code>[](auto&amp;&amp;)</code> lambdas, but doable in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>.</p>\n\n<p>Writing <code>template&lt;class...Fs&gt; struct overloaded</code> can also make it easier to write visitors.  There are a myriad of implementations out there.</p>\n\n<p>If you cannot use <code>boost</code> you can convert <code>to_span</code> to <code>visit_span</code> and have it take a visitor.</p>\n\n<p>If you cannot use <code>gsl</code>, writing your own <code>span</code> is trivial.</p>\n\n<pre><code>visit_span( buff, overload(\n  [](span&lt;int16_t&gt; span) { /* code */ },\n  [](span&lt;int32_t&gt; span) { /* code */ },\n  // ...\n ));\n</code></pre>\n\n<p>or</p>\n\n<pre><code> struct do_foo {\n   template&lt;class T&gt;\n   void operator()(span&lt;T&gt; span) { /* code */ }\n };\n visit_span( buff, do_foo{captures} );\n</code></pre>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1541013003, "creation_date": 1540979959, "last_edit_date": 1541013003, "question_id": 53080705, "link": "https://stackoverflow.com/questions/53080705/handing-type-erased-data-at-runtime-how-not-to-reinvent-the-wheel", "title": "Handing type-erased data at runtime - how not to reinvent the wheel?", "body": "<p>I'm working on some code which gets data that looks like this:</p>\n\n<pre><code>enum data_type { INT16 = 0, INT32, UINT64, FLOAT, TIMESTAMP };\nstruct buffer {\n    data_type element_type;\n    size_t    size; // in elements of element_type, not bytes\n    void*     data;\n}\n</code></pre>\n\n<p>(this is simplified; in actuality there are quite a few more types, more fields in this struct etc.)</p>\n\n<p>Now, I find myself writing a bunch of utility code to \"convert\" enum values to actual types and vice-versa, at compile time. Then I realize I need to do some of that I need to do the same at run-time as well, and with a variable number of buffers... so now, in addition to type-traits-based lookup of values and enum-template-parameter-based lookup of types - I'm writing code which looks up <code>std::type_info</code>s. It's kind of a mess.</p>\n\n<p>But really - I should <em>not</em> be doing this. It's repetitive and I am absolutely sure I'm reinventing the wheel - implementing something which has already been written many times already: Compilers, DBMSes, data file parsers, serialization libraries and so on.</p>\n\n<p>What can I do to minimize my wasted effort on this endeavor?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>I get these buffers at run time, and cannot just un-erase the type at compile time (e.g. using a type_traits).</li>\n<li>I can't change the API. Or rather, I could change whatever I wanted in my code, but I still get data in this layout in memory.</li>\n<li>I don't just take such buffers as input, I also need to produce them as output.</li>\n<li>I occasionally need to handle many buffers of different at once - even a variable number of them (e.g. <code>foo(buffer* buffers, int num_buffers);</code>.</li>\n<li>C++11 solutions are preferred over newer-standard-version ones.</li>\n<li>I actually use <code>gsl</code> a lot, so you can use it in your answers if you like. As for Boost - that may be politically difficult to depend on, but for the purposes of a StackOverflow question, it's fine, I guess.</li>\n</ul>\n"}, {"tags": ["c++", "exception-handling"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1540980300, "post_id": 53080658, "comment_id": 93058713, "body": "If an exception has occurred, it is necessary to fix the cause.  Catching the exception, continuing on as if it hadn&#39;t happened, and then rethrowing is completely at odds with that.    And what would you expect to do if two of the functions throw?"}, {"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1540982016, "post_id": 53080658, "comment_id": 93059660, "body": "An exception should indicate something exceptional that needs to be fixed. You should not use exceptions for controlling program flow, this is considered bad programming style."}], "answers": [{"comments": [{"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 2, "creation_date": 1540980961, "post_id": 53080890, "comment_id": 93059050, "body": "Possibly worth pointing out the major difference between using <code>std::exception_ptr</code> and copying the <code>MyException</code>: if anyone ever defines a class that derives from <code>MyException</code> and throws that, <code>exception_ptr</code> will preserve that derived information, but the copy method will slice it off."}], "tags": [], "owner": {"reputation": 2120, "user_id": 9167702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7936df8ed092bb16463bde29df803d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Tobi", "link": "https://stackoverflow.com/users/9167702/tobi"}, "is_accepted": true, "score": 3, "last_activity_date": 1540980555, "creation_date": 1540980555, "answer_id": 53080890, "question_id": 53080658, "link": "https://stackoverflow.com/questions/53080658/is-there-a-pattern-for-executing-multiple-throwing-functions-after-each-other/53080890#53080890", "title": "Is there a pattern for executing multiple throwing functions after each other?", "body": "<p>Use a lambda and <code>std::exception_ptr</code>:</p>\n\n<pre><code>void ClearAllCaches() {\n    std::exception_ptr eptr;\n    auto CallAndStoreException = [&amp;](auto func) {\n        try {\n            func();\n        } catch (...) {\n            eptr = std::current_exception();\n        }\n    };\n\n    CallAndStoreException(&amp;ClearPersistentCache);\n    CallAndStoreException(&amp;ClearTransientCache);\n    CallAndStoreException(&amp;ClearRemoteCache);\n\n    if (eptr) {\n        std::rethrow_exception(eptr);\n    }\n}\n</code></pre>\n\n<p>But are you sure exceptions are the right way if you throw away the information of those thrown first? If you are sure you have to go this way, maybe also have a look at <a href=\"https://en.cppreference.com/w/cpp/error/nested_exception\" rel=\"nofollow noreferrer\"><code>std::nested_exception</code></a></p>\n"}], "owner": {"reputation": 11371, "user_id": 481061, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c4876d67fda212cee59d97ac5a676c2d?s=128&d=identicon&r=PG", "display_name": "Felix Dombek", "link": "https://stackoverflow.com/users/481061/felix-dombek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 53080890, "answer_count": 1, "score": 1, "last_activity_date": 1540984995, "creation_date": 1540979826, "last_edit_date": 1540984995, "question_id": 53080658, "link": "https://stackoverflow.com/questions/53080658/is-there-a-pattern-for-executing-multiple-throwing-functions-after-each-other", "title": "Is there a pattern for executing multiple throwing functions after each other?", "body": "<p>I'm looking for a nice way to write code with exceptions if I want to ignore them in a piece of code.</p>\n\n<p>Consider</p>\n\n<pre><code>bool ClearAllCaches() {\n    bool success = ClearPersistentCache();\n    success &amp;= ClearTransientCache();\n    success &amp;= ClearRemoteCache();\n    return success;\n}\n</code></pre>\n\n<p>If these functions were throwing instead of returning a success value, and I also want to re-throw any exception that one of these throws, but only after all are done, is there a cleaner solution than this?</p>\n\n<pre><code>void ClearAllCaches() {\n    MyException persistentException = MyException(ErrorCode::None);\n    try {\n        ClearPersistentCache();\n    } catch (const MyException&amp; e) {\n        persistentException = e;\n    }\n    //...same for ClearTransientCache()\n    ClearRemoteCache(); // &lt;- does not have to be caught.\n    if (persistentException.getCode() != ErrorCode::None) {\n        throw persistentException;\n    }\n    //...same for ClearTransientCache()\n}\n</code></pre>\n\n<p>Is it possible to write this in a readable and not overly ugly manner?</p>\n"}, {"tags": ["c++", "ios", "qt", "audio", "wav"], "comments": [{"owner": {"reputation": 1152, "user_id": 4078718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7090024e46e43bf86eace985087357e0?s=128&d=identicon&r=PG&f=1", "display_name": "Ian", "link": "https://stackoverflow.com/users/4078718/ian"}, "edited": false, "score": 0, "creation_date": 1541269272, "post_id": 53080608, "comment_id": 93161777, "body": "Have you tried playing a &#39;standard&#39; WAV file?  E.g., one recorded by other software."}], "owner": {"reputation": 913, "user_id": 2063921, "user_type": "registered", "accept_rate": 37, "profile_image": "https://i.stack.imgur.com/lrqCM.jpg?s=128&g=1", "display_name": "peter70", "link": "https://stackoverflow.com/users/2063921/peter70"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 144, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540979627, "creation_date": 1540979627, "question_id": 53080608, "link": "https://stackoverflow.com/questions/53080608/playing-wav-on-ios-with-qt-c", "title": "Playing wav on iOS (with Qt C++)", "body": "<p>I have an audio recorder on iOS, implemented within QT's C++\nI can record wav files and play them for example with Quick Time Player (after downloading container via Xcode)\nThe recorded wav files are ok, and they play the right sounds!</p>\n\n<p>Now I'm trying to play them with an audio player, but this doesn't want work.\nI have tried C++</p>\n\n<pre><code>QMediaPlayer player(this);\nplayer.setVolume(70);\n\nQMediaContent content(QUrl::fromLocalFile(fileName));\nplayer.setMedia(content);\nplayer.play();\n</code></pre>\n\n<p>or QML</p>\n\n<pre><code>Rectangle {\n    width: 200\n    height: 100\n    color: \"red\"\n\n    Text {\n        anchors.centerIn: parent\n        text: \"Play\"\n        color: \"yellow\"\n    }\n    MediaPlayer {\n        id: playMusic\n        source: \"/private/var/mobile/Containers/Data/Application/..long path../tmp/test.tmp.wav\"\n        volume: 70\n        onError: {\n            console.log(error)\n        }\n    }\n    MouseArea {\n        anchors.fill: parent\n        onClicked: {\n            playMusic.play()\n        }\n    }\n}\n</code></pre>\n\n<p>None of it wants to play the sound!</p>\n\n<p>I have tried to load and read this file with QFile and this works well!\nThe file is there and can be readed, but the sound don't plays.</p>\n\n<p>In my PRO File I have the following settings:</p>\n\n<pre><code>QT += widgets multimedia\n\nQTPLUGIN += qtaudio_coreaudio\nQTPLUGIN += qtmedia_audioengine\nQTPLUGIN += qavfcamera\nQTPLUGIN += qavfmediaplayer\n</code></pre>\n\n<p>In my PLIST I have:</p>\n\n<pre><code>&lt;key&gt;NSCameraUsageDescription&lt;/key&gt;\n&lt;string&gt;Qt Multimedia Example&lt;/string&gt;\n&lt;key&gt;NSMicrophoneUsageDescription&lt;/key&gt;\n&lt;string&gt;Qt Multimedia Example&lt;/string&gt;\n</code></pre>\n\n<p>I have tried some other examples from the web, but nothing works.\nI have no more ideas.\nDo you maybe?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "pointers", "mutex"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 8, "creation_date": 1540978882, "post_id": 53080338, "comment_id": 93057925, "body": "Please elaborate how it&#39;s &quot;not working.&quot; Is that perhaps related to the type of <code>lock</code> being <code>const std::mutex*</code> while the set stores <code>std::mutex*</code>?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1540979042, "post_id": 53080338, "comment_id": 93058008, "body": "I&#39;m still trying to fathom the uselessness of a const mutex pointer in the first place."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 2, "creation_date": 1540979102, "post_id": 53080338, "comment_id": 93058047, "body": "Probably meant to be a const pointer to a non-const mutex."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540984886, "post_id": 53080338, "comment_id": 93061195, "body": "is it not possible to have a <code>std::set&lt;std::mutex&gt;</code> ? What is not working?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540984993, "post_id": 53080338, "comment_id": 93061268, "body": "why do you want to store them in a <code>set</code> anyhow? To avoid having the same mutex twice in the container? What would be the use of the set? I can hardly imagine a use case other than locking all the mutexes in the set (otherwise how do you know which one to lock?), which would be kind of equivalent to having only a single mutex."}], "answers": [{"tags": [], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "is_accepted": true, "score": 0, "last_activity_date": 1540991105, "creation_date": 1540991105, "answer_id": 53084047, "question_id": 53080338, "link": "https://stackoverflow.com/questions/53080338/set-of-mutex-pointers/53084047#53084047", "title": "Set of mutex pointers", "body": "<p>Your issue is probably caused by <code>const</code>. Code that compiles:</p>\n\n<pre><code>std::set&lt;std::mutex*&gt; mutex_set;    \n\nvoid addLock(std::mutex* lock)\n{\n  mutex_set.insert(lock);\n}\n</code></pre>\n\n<p>You might also consider to avoid using raw pointers - since there is no ownership semantic (ie. who owns and can delete the pointed to object - a mutex in this case).</p>\n"}], "owner": {"reputation": 7, "user_id": 9281100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d7a36dde62fa3bec92040facd6b14b?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian Pobaschnig", "link": "https://stackoverflow.com/users/9281100/sebastian-pobaschnig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 53084047, "answer_count": 1, "score": -1, "last_activity_date": 1540991105, "creation_date": 1540978723, "question_id": 53080338, "link": "https://stackoverflow.com/questions/53080338/set-of-mutex-pointers", "title": "Set of mutex pointers", "body": "<p>I am trying to store several mutex (pointers) into a set.</p>\n\n<pre><code>std::set&lt;std::mutex*&gt; mutex_set;    \n\naddLock(const std::mutex* lock)\n{\n  mutex_set.insert(lock)\n}\n</code></pre>\n\n<p>Since that is not working I tried lock guards and unique pointers, but did not have any success. What is the best way to store mutex into a set?</p>\n"}, {"tags": ["javascript", "c++", "post", "httprequest", "sfml"], "comments": [{"owner": {"reputation": 546, "user_id": 2154099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hJZcV.jpg?s=128&g=1", "display_name": "clueless007", "link": "https://stackoverflow.com/users/2154099/clueless007"}, "edited": false, "score": 1, "creation_date": 1540978965, "post_id": 53080328, "comment_id": 93057968, "body": "Hi, Probably the <code>index.html</code> does no exist in the root of the web server in the address <code>192.168.2.100</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8705939"}, "edited": false, "score": 0, "creation_date": 1540980270, "post_id": 53080328, "comment_id": 93058695, "body": "try <code>request.setUri(&quot;&#47;&quot;);</code>"}, {"owner": {"reputation": 29, "user_id": 10584541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f11d548a7cc57a5e98983832844957?s=128&d=identicon&r=PG&f=1", "display_name": "David9472", "link": "https://stackoverflow.com/users/10584541/david9472"}, "reply_to_user": {"reputation": 546, "user_id": 2154099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hJZcV.jpg?s=128&g=1", "display_name": "clueless007", "link": "https://stackoverflow.com/users/2154099/clueless007"}, "edited": false, "score": 0, "creation_date": 1540986993, "post_id": 53080328, "comment_id": 93062293, "body": "@inaliahgle thank you so much. Works perfectly fine. case closed"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10584541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f11d548a7cc57a5e98983832844957?s=128&d=identicon&r=PG&f=1", "display_name": "David9472", "link": "https://stackoverflow.com/users/10584541/david9472"}, "edited": false, "score": 0, "creation_date": 1540987141, "post_id": 53082601, "comment_id": 93062379, "body": "Makes sense. However the problem was, as mentioned in the comment above, the URI. I had to set it to &quot;/&quot; in order to get the response I want. But still thank you, cause I didn&#39;t know how an URL was constructed."}, {"owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "reply_to_user": {"reputation": 29, "user_id": 10584541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f11d548a7cc57a5e98983832844957?s=128&d=identicon&r=PG&f=1", "display_name": "David9472", "link": "https://stackoverflow.com/users/10584541/david9472"}, "edited": false, "score": 0, "creation_date": 1540999511, "post_id": 53082601, "comment_id": 93070603, "body": "@David9472 Ah, okay, That might be a configuration thing then. Most servers will server an <code>&#47;index.html</code> as <code>&#47;</code> as well, but it&#39;s also possible the actual file is called <code>&#47;index.htm</code> or similar. This would be on a case by case basis."}], "tags": [], "owner": {"reputation": 33251, "user_id": 409744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b055a62302498782454622c61e44aa51?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/409744/mario"}, "is_accepted": false, "score": 0, "last_activity_date": 1540986364, "creation_date": 1540986364, "answer_id": 53082601, "question_id": 53080328, "link": "https://stackoverflow.com/questions/53080328/sfml-library-http-request/53082601#53082601", "title": "SFML library: http request", "body": "<p>Your problem is rather simple. The \"host\" for the server is only the server name, not the protocol. The field is used by the server to actually determine which host your tried to reach (since a single server could serve multiple sites with different domain names).</p>\n\n<p>You can skip the call to <code>sf::Http::setHost()</code> completely by just using the constructor:</p>\n\n<pre><code>sf::Http http(\"192.168.2.100\");\n</code></pre>\n\n<p>Or if you really want to call it, just do so:</p>\n\n<pre><code>http.setHost(\"192.168.2.100\");\n</code></pre>\n\n<p>If this doesn't solve the problem, check your server's log files. There should be the requests, if they've reached it.</p>\n\n<hr>\n\n<p>Just for reference, how an URL/URI is constructed:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>http://192.168.2.100:8000/index.html\n|-----| &lt;- Protocol (you define this by specifically using sf::Http over sf::Ftp for example)\n\nhttp://192.168.2.100:8000/index.html\n       |-----------| &lt;- Host\n\nhttp://192.168.2.100:8000/index.html\n                    |---| &lt;- Port (optional)\n\nhttp://192.168.2.100:8000/index.html\n                          |--------| &lt;- URI/document (optional and might serve a server dependent default, if empty)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10584541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3f11d548a7cc57a5e98983832844957?s=128&d=identicon&r=PG&f=1", "display_name": "David9472", "link": "https://stackoverflow.com/users/10584541/david9472"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540986364, "creation_date": 1540978669, "question_id": 53080328, "link": "https://stackoverflow.com/questions/53080328/sfml-library-http-request", "title": "SFML library: http request", "body": "<p>I want to send an HTTP Post Request to a server. First I followed an YT tutorial which explained everything very well. So out of this tutorial I created the following code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const xhr = new XMLHttpRequest();\r\n\r\n    xhr.onreadystatechange = function() {\r\n      if(xhr.readyState == 4){\r\n        if(xhr.status == 200){\r\n          document.getElementById('show_data').textContent = xhr.responseText;\r\n        }\r\n        if (xhr.status == 404){\r\n          console.log(\"ERROR 404. File not found\");\r\n        }\r\n      }\r\n    };\r\n\t\r\n\tvar mode = JSON.stringify({\"mode\":\"JSON\"});\r\n\tvar enumerate = JSON.stringify({\"device\":[{\"command\":\"enumerate\"}]});\r\n\r\n    xhr.open('post', 'http://192.168.2.100', true);\r\n    xhr.setRequestHeader(\"Content-type\", \"application//x-www-form-urlencoded\");\r\n    xhr.send(enumerate);</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But now the project requieres to be written in C++. After some research I found the SFML Library. I want to send the same Request as above. However the only response I get is \"404\". Can anybody help me with this issue? </p>\n\n<p>C++ Code:</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;SFML/Network.hpp&gt;\n\nusing namespace std;\n\nint main()\n{\n    string json_mode = \"{\\\"mode\\\":\\\"JSON\\\"}\";\n    string enumerate = \"{\\\"device\\\":[{\\\"command\\\":\\\"enumerate\\\"}]}\";\n\n    // +++DOESN'T WORK+++\n    //Request:\n    sf::Http http;\n    http.setHost(\"http://192.168.2.100\");\n    sf::Http::Request request;\n    request.setMethod(sf::Http::Request::Post);\n    request.setUri(\"/index.html\");\n    request.setBody(enumerate);\n    //Response:\n    sf::Http::Response response = http.sendRequest(request);\n    if (response.getStatus() == sf::Http::Response::Ok)\n    {\n    cout &lt;&lt; response.getStatus() &lt;&lt; endl;\n    cout &lt;&lt; response.getMajorHttpVersion() &lt;&lt; endl;\n    cout &lt;&lt; response.getMinorHttpVersion() &lt;&lt; endl;\n    cout &lt;&lt; response.getBody() &lt;&lt;endl;\n    //Here I only get \"404\" as an answer.\n    }\n    else\n    {\n        cout &lt;&lt; \"error: \" &lt;&lt; response.getStatus() &lt;&lt; endl;\n    }\n\n\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm greatful with every piece of advice or tip. Or if you have ideas to make it easier/better let me know.\nThank you in advance.</p>\n"}, {"tags": ["c++", "c++11", "inheritance", "constructor"], "answers": [{"comments": [{"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540981629, "post_id": 53080302, "comment_id": 93059437, "body": "@LightnessRacesinOrbit True, but knowing you can can&#39;t hurt... probably? Anyway, it could be used for heavier types."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540981666, "post_id": 53080302, "comment_id": 93059455, "body": "I&#39;ll rephrase - you can&#39;t move doubles."}, {"owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540981919, "post_id": 53080302, "comment_id": 93059609, "body": "Sure, I meant &quot;apply <code>std::move</code> to the elements&quot;, whatever their type is."}, {"owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "edited": false, "score": 0, "creation_date": 1541000947, "post_id": 53080302, "comment_id": 93071615, "body": "Excellent ! Thanks"}], "tags": [], "owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "is_accepted": true, "score": 6, "last_activity_date": 1540981845, "last_edit_date": 1540981845, "creation_date": 1540978587, "answer_id": 53080302, "question_id": 53080148, "link": "https://stackoverflow.com/questions/53080148/inheritance-constructor-initialize-c-like-array-member-of-base-class-in-c11/53080302#53080302", "title": "Inheritance: constructor, initialize C like array member of base class in c++11", "body": "<p>In <code>Child</code>'s constructor, <code>bb</code> is not an array: because of <a href=\"https://stackoverflow.com/questions/1461432/what-is-array-decaying\">decay</a>, it's just a pointer. And you can't initialize an array (<code>b</code> in <code>Base</code>) with a pointer.</p>\n\n<p>Using <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array</code></a> in both classes instead of raw arrays would solve your problem:</p>\n\n<pre><code>struct Base\n{\n    int a;\n    std::array&lt;double, 10&gt; b;\n};\n\nstruct Child : Base\n{\n    Child(int aa, std::array&lt;double, 10&gt; bb) : Base{aa, bb} {}\n};\n</code></pre>\n\n<p>However, since you mention that <code>Base</code> cannot be modified, you will have to copy the elements manually (in the general case, you can also <a href=\"https://en.cppreference.com/w/cpp/algorithm/move\" rel=\"nofollow noreferrer\">move</a> them, although there is no point with fundamental types):</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nstruct Base {\n    int a;\n    double b[10];\n};\n\nstruct Child : Base {\n    Child(int aa, std::array&lt;double, 10&gt; bb) : Base{aa} {\n        std::copy(bb.begin(), bb.end(), b);\n    }\n};\n\nint main() {\n    auto child = Child(3, {2, 3, 4});\n\n    for (auto it : child.b) {\n        std::cout &lt;&lt; it &lt;&lt; \" \";\n    }\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/7f7b131ac079edea\" rel=\"nofollow noreferrer\">Live on Coliru</a></p>\n\n<p>You can also do that using a reference instead of <code>std::array</code>, but the syntax is a bit convoluted:</p>\n\n<pre><code>Child(int aa, double const (&amp;bb)[10]) : Base{aa} {\n    std::copy(&amp;bb[0], &amp;bb[10], b);\n}\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 7340306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd32b68e03c772583ca2fe0f524c3825?s=128&d=identicon&r=PG&f=1", "display_name": "Gaetan", "link": "https://stackoverflow.com/users/7340306/gaetan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53080302, "answer_count": 1, "score": 3, "last_activity_date": 1540981845, "creation_date": 1540978084, "last_edit_date": 1540979272, "question_id": 53080148, "link": "https://stackoverflow.com/questions/53080148/inheritance-constructor-initialize-c-like-array-member-of-base-class-in-c11", "title": "Inheritance: constructor, initialize C like array member of base class in c++11", "body": "<p>Consider following code:</p>\n\n<pre><code>struct Base //in my real scenario Base class can not be changed\n{\n    int a;\n    double b[10];\n};\n\nstruct Child : Base\n{\n    Child(int aa, double bb[10]) : Base{aa} {}     //This works fine\n    Child(int aa, double bb[10]) : Base{aa, bb} {} //this is not working\n};\n</code></pre>\n\n<p>The second constructor of child is not working. I get the error \"array must be initialized with a brace-enclosed initializer\". \nHow can I initialize <code>b</code> in <code>Child</code> without changing Base class (for example using vector instead of c-like array, i am not allowed to do that)</p>\n"}, {"tags": ["c++", "linux", "multithreading", "visual-studio", "compiler-errors"], "comments": [{"owner": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1540978284, "post_id": 53079941, "comment_id": 93057603, "body": "@chris Alright, done."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1540978497, "post_id": 53079941, "comment_id": 93057727, "body": "You&#39;re fiddling with the linker, but your error is a compiler error. I think your header paths are wrong."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540978616, "post_id": 53079941, "comment_id": 93057797, "body": "@Quentin, Perhaps I should have kept this half of my original comment, but the first error is Intellisense and the rest is the linker output, which means the compiler was fine with it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1540978686, "post_id": 53079941, "comment_id": 93057828, "body": "@chris oh, alright. I don&#39;t have a better suggestion then :)"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1540979032, "post_id": 53079941, "comment_id": 93058002, "body": "Check that you really have -pthread at the link stage, that the error you have."}, {"owner": {"reputation": 86, "user_id": 6886765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bce09b33a9542646e42dc44247d7e56?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Rasulov", "link": "https://stackoverflow.com/users/6886765/amir-rasulov"}, "edited": false, "score": 0, "creation_date": 1540979997, "post_id": 53079941, "comment_id": 93058538, "body": "That error usually shows up if you didn&#39;t add <code>-pthread</code> key in build stage. Maybe you just missed with settings"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 1, "creation_date": 1540980771, "post_id": 53079941, "comment_id": 93058964, "body": "@Kordnak:  Is the <code>-pthread</code> last in the link command line after all of your object and library files?"}, {"owner": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "reply_to_user": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1540985659, "post_id": 53079941, "comment_id": 93061609, "body": "@P.W that fixed my problem! I&#39;m must have missed it somehow."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1540985857, "post_id": 53079941, "comment_id": 93061704, "body": "@Kordnak: Added that as an answer so that it can be helpful to others."}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "edited": false, "score": 0, "creation_date": 1540986252, "post_id": 53082438, "comment_id": 93061894, "body": "What do you mean &quot;It is not enough&quot;? I just tested with a new Linux Empty Project and adding <code>-pthread</code> to Linker&#39;s Additional Options was all I needed to do."}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "reply_to_user": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "edited": false, "score": 0, "creation_date": 1540986826, "post_id": 53082438, "comment_id": 93062207, "body": "You said in your comment, that is what solved your issue, right? If it works irrespective of its position, please confirm and I will delete this answer."}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": true, "score": 2, "last_activity_date": 1540992666, "last_edit_date": 1540992666, "creation_date": 1540985817, "answer_id": 53082438, "question_id": 53079941, "link": "https://stackoverflow.com/questions/53079941/visual-studio-2017-linux-cant-compile-if-theres-stdthread/53082438#53082438", "title": "Visual Studio 2017 linux can&#39;t compile if there&#39;s std::thread", "body": "<p>Put <code>-pthread</code> option to <code>Linker -&gt; Command Line -&gt; Additional Options</code>, it should also be the last in the link command line after all of your object and library files.</p>\n\n<p>The order is important.</p>\n"}, {"comments": [{"owner": {"reputation": 2915, "user_id": 5136580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42efea573d72921a6de90bef052c4879?s=128&d=identicon&r=PG&f=1", "display_name": "Mikel Rychliski", "link": "https://stackoverflow.com/users/5136580/mikel-rychliski"}, "edited": false, "score": 1, "creation_date": 1586355720, "post_id": 61102646, "comment_id": 108098623, "body": "Hi arimaknp, Welcome to StackOverflow. If another answer solved the problem for you, please consider up-voting that answer instead of adding a duplicate. This will help other users find answers quickly and with less confusion"}], "tags": [], "owner": {"reputation": 1, "user_id": 13259928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uP7mi.jpg?s=128&g=1", "display_name": "arimaknp", "link": "https://stackoverflow.com/users/13259928/arimaknp"}, "is_accepted": false, "score": 0, "last_activity_date": 1586354730, "creation_date": 1586354730, "answer_id": 61102646, "question_id": 53079941, "link": "https://stackoverflow.com/questions/53079941/visual-studio-2017-linux-cant-compile-if-theres-stdthread/61102646#61102646", "title": "Visual Studio 2017 linux can&#39;t compile if there&#39;s std::thread", "body": "<p>Putting -pthread in Linker -> Command Line -> Additional Options worked. Even if you are using using linux project then also you need to select the project properties in visual studio.</p>\n\n<p>Thank You!!</p>\n"}], "owner": {"reputation": 135, "user_id": 9307341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1a282cc5d0295589a14d1b72274ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kordnak", "link": "https://stackoverflow.com/users/9307341/kordnak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 53082438, "answer_count": 2, "score": 4, "last_activity_date": 1586354730, "creation_date": 1540977416, "last_edit_date": 1540978907, "question_id": 53079941, "link": "https://stackoverflow.com/questions/53079941/visual-studio-2017-linux-cant-compile-if-theres-stdthread", "title": "Visual Studio 2017 linux can&#39;t compile if there&#39;s std::thread", "body": "<p>So I'm trying to use Visual Studio 2017 to create a Linux project.\nI started out with an Empty Linux Project (as the project template), and so far everything is fine.</p>\n\n<p>However, if I have</p>\n\n<pre><code>// Create a new thread for the connection to avoid clutter\nstd::thread newConnectionHandler(connectionHandler, iNewConnection);\nnewConnectionHandler.detach();\n</code></pre>\n\n<p>in my code, it won't compile. These are the errors that I get:</p>\n\n<pre><code>Error       E0020   identifier \"__float128\" is undefined\nError       In function `std::thread::thread&lt;void(&amp;)(int), int&amp;&gt;(void(&amp;)(int), int&amp;)':\nError       undefined reference to `pthread_create'\nError       ld returned 1 exit status\n</code></pre>\n\n<p>But as soon as I comment out the <code>std::thread</code> stuff, it compiles.</p>\n\n<p><strong>Here's what I've tried so far:</strong></p>\n\n<ul>\n<li>C/C++ -> Additional Options -> Added <code>-pthread -lpthread</code> or just <code>-pthread</code></li>\n<li>Linker -> Additional Options -> Added <code>-pthread -lpthread</code> or just <code>-pthread</code></li>\n<li>Linker -> Library Dependencies -> Added <code>thread</code></li>\n<li>Switching C++ Language standard between C++17 and C++11</li>\n</ul>\n\n<p>And of course I've tried multiple variations of those changes, but I always get the same error.</p>\n\n<p>And my includes are:</p>\n\n<pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;netinet/in.h&gt;\n#include &lt;arpa/inet.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;thread&gt;\n</code></pre>\n\n<p>EDIT:\nHere's also the declaration of <code>connectionHandler</code>:</p>\n\n<pre><code>void connectionHandler(int iConnection)\n</code></pre>\n\n<p>And when passing <code>iNewConnection</code>, the datatype is an <code>int</code>.</p>\n"}]