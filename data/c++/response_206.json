[{"tags": ["c++", "c++11", "reference"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1545264508, "post_id": 53860775, "comment_id": 94569692, "body": "&quot;rvalue reference&quot; means that it binds to an rvalue, not that it is an rvalue"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545269359, "post_id": 53860775, "comment_id": 94570676, "body": "The parameter has a name, <code>k</code>, so it isn&#39;t an rvalue unless you cast it to being an rvalue via <code>std::move</code>."}, {"owner": {"reputation": 196, "user_id": 9906422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I5AxYpG7Rlk/AAAAAAAAAAI/AAAAAAAAAAA/XHtwEioVLm0/photo.jpg?sz=128", "display_name": "eprom", "link": "https://stackoverflow.com/users/9906422/eprom"}, "edited": false, "score": 0, "creation_date": 1545285120, "post_id": 53860775, "comment_id": 94573917, "body": "A variable is an lvalue; we cannot directly bind an rvalue reference to a variable even if that variable was defined as an rvalue reference type."}, {"owner": {"reputation": 196, "user_id": 9906422, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-I5AxYpG7Rlk/AAAAAAAAAAI/AAAAAAAAAAA/XHtwEioVLm0/photo.jpg?sz=128", "display_name": "eprom", "link": "https://stackoverflow.com/users/9906422/eprom"}, "edited": false, "score": 0, "creation_date": 1545285590, "post_id": 53860775, "comment_id": 94574035, "body": "A variable is an lvalue; we cannot directly bind an rvalue reference to a variable even if that variable was defined as an rvalue reference type. The above is selected from the book &#39;C++ primer&#39;(13.6.1) \uff0cso\uff0cthe value &#39;rvalue&#39; is an lvalue, you can call the correct function as follows: reference_fun(std::move(rvalue)); Just like you did with the value k in the function test2."}], "owner": {"reputation": 13, "user_id": 7281270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f0ba55b92c93e87269f73316f4c7029?s=128&d=identicon&r=PG&f=1", "display_name": "adrex123", "link": "https://stackoverflow.com/users/7281270/adrex123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "closed_date": 1545264497, "answer_count": 0, "score": 0, "last_activity_date": 1545264470, "creation_date": 1545263914, "last_edit_date": 1545264470, "question_id": 53860775, "link": "https://stackoverflow.com/questions/53860775/i-used-int-and-used-is-function-for-lvalue-not-for-rvalue", "closed_reason": "Duplicate", "title": "i used int &amp;&amp; and used is function for lvalue not for rvalue", "body": "<p>I started to learn about reference to rvalue. I am trying to understand my code, but I do not understand one line, why is used function for lvalue, not rvalue.</p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid reference_fun(int &amp;k) {\n  std::cout &lt;&lt; \"reference to lvalue (object) = \" &lt;&lt; k &lt;&lt; std::endl;\n}\n\nvoid reference_fun(int &amp;&amp;k) {\n  std::cout &lt;&lt; \"reference to rvalue (temporary) = \" &lt;&lt; k &lt;&lt; std::endl;\n}\n\nvoid test2(int &amp;&amp;k) {\n\n  //rvalue in the body of the function becomes lvalue\n  reference_fun(k);\n  reference_fun(std::move(k));\n}\n\nint main() {\n  int obj = 10;\n  int &amp;&amp;rvalue = 10 + 10;\n  reference_fun(obj);                                                     /* result as function to lvalue */\n  reference_fun(321);                                                     /* result as function to rvalue */\n  reference_fun(321 + 3);                                                 /* result as function to rvalue */\n  reference_fun(rvalue); // I don't understand the result of this line, why is used function to lvalue, when rvalue is int &amp;&amp; ?\n  test2(14 + 10);                                                         /* result as function to lvalue and rvalue */\n  // test2(rvalue); //compilation error\n  return 0;\n} \n</code></pre>\n\n<p>This is my output:</p>\n\n<pre><code>reference to lvalue (object) = 10\nreference to rvalue (temporary) = 321\nreference to rvalue (temporary) = 324\nreference to lvalue (object) = 20 //this line ?\nreference to lvalue (object) = 24\nreference to rvalue (temporary) = 24\n</code></pre>\n\n<p>I have a question about this line : <code>reference_fun(rvalue);</code> \nWhy is used <code>void reference_fun(int &amp;k);</code> but not <code>void reference_fun(int &amp;&amp;k);</code>, when I defined <code>rvalue</code> as <code>int&amp;&amp;</code> ?</p>\n"}, {"tags": ["c++", "string", "literals", "suffix"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1545265341, "post_id": 53860644, "comment_id": 94569854, "body": "Please post a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> and explain what you mean by &quot;compiles normally on C++98 or 00&quot;.  C++98 is a language standard, not a compiler"}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 9622755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698286d2c0836825e92c1d3c20c485f0?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9622755/j-doe"}, "edited": false, "score": 0, "creation_date": 1569901978, "post_id": 53861015, "comment_id": 102736066, "body": "I was wondering what this <code>L</code> is too.  Clearly part of MSFT&#39;s Embrace, Extend, Extinguish strategy."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 421, "user_id": 9622755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/698286d2c0836825e92c1d3c20c485f0?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/9622755/j-doe"}, "edited": false, "score": 1, "creation_date": 1569970018, "post_id": 53861015, "comment_id": 102765525, "body": "@J.Doe the first <code>L</code> is part of Standard C++, it means the string literal is an array of <code>const wchar_t</code>. The combination <code>L#</code> is the Microsoft extension"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1545266014, "creation_date": 1545266014, "answer_id": 53861015, "question_id": 53860644, "link": "https://stackoverflow.com/questions/53860644/what-is-this-ldlgctrl-ldialog-control-id/53861015#53861015", "title": "What is this: L&quot;DLGCTRL_&quot;L#dialog_control_id", "body": "<p>I assume this occurs inside a preprocessor macro otherwise the question makes no sense at all, e.g.:</p>\n\n<pre><code>#define X(dialog_control_id)  L\"DLGCTRL_\"L#dialog_control_id\n</code></pre>\n\n<p>where it is intended that <code>X(foo)</code> expands to <code>L\"DLGCTRL_foo\"</code>.</p>\n\n<hr>\n\n<p>The code <em>should</em> be:</p>\n\n<pre><code>#define X(dialog_control_id)  L\"DLGCTRL_\" #dialog_control_id\n</code></pre>\n\n<p>There are several problems in the original code:</p>\n\n<ul>\n<li><code>L#</code> is not allowed in ISO C++, it is an extension of the Microsoft preprocessor to produce a wide string literal.</li>\n<li>In the C++11 preprocessor, a letter directly after a closing quote (without whitespace in between) is tokenized as a user-defined string literal.</li>\n<li>The last <code>L</code> was never necessary anyway, because a wide string literal can be concatenated with a narrow string literal (producing a wide string literal)</li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 4576528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f51dfb3d34c85bb38854f09a6b33f4a?s=128&d=identicon&r=PG&f=1", "display_name": "user4576528", "link": "https://stackoverflow.com/users/4576528/user4576528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545266014, "creation_date": 1545262663, "last_edit_date": 1545264019, "question_id": 53860644, "link": "https://stackoverflow.com/questions/53860644/what-is-this-ldlgctrl-ldialog-control-id", "title": "What is this: L&quot;DLGCTRL_&quot;L#dialog_control_id", "body": "<p>I've found this in some C++_11 code:</p>\n\n<p><code>L\"DLGCTRL_\"L#dialog_control_id</code></p>\n\n<p>What is a \"L#\" here? There is no # operator or concatenation so.\nYes, there is nothing between the \" and the L. How can be this allowed?</p>\n\n<p>I get the error: </p>\n\n<blockquote>\n  <p>error C3688: invalid literal suffix 'L'; literal operator or literal operator template 'operator \"\"L' not found</p>\n</blockquote>\n\n<p>I have Visual Studio 2015 and 2017 on Windows 10.\nIt compiles normally on C++98 or 00</p>\n"}, {"tags": ["c++", "directx-9", "freetype2"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 680724, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/07iAb.png?s=128&g=1", "display_name": "tetsuoii", "link": "https://stackoverflow.com/users/680724/tetsuoii"}, "is_accepted": false, "score": 0, "last_activity_date": 1545272584, "last_edit_date": 1545272584, "creation_date": 1545272204, "answer_id": 53861619, "question_id": 53860575, "link": "https://stackoverflow.com/questions/53860575/issue-rendering-freetype-bitmap-glyphs/53861619#53861619", "title": "Issue Rendering FreeType Bitmap Glyphs", "body": "<p>Try convert your characters into wchar_t, that fixed it for me.</p>\n\n<p>Here's a piece of code that renders colored text into a 32 bit image buffer, with alpha transparency:</p>\n\n<pre><code>void DrawTxt(char *txt, int x, int y, int w, int h, uint32_t col, uint8_t *buf) {\n\n    int origx = x;\n    wchar_t wstr[512];\n\n    int len = MultiByteToWideChar(CP_ACP, MB_USEGLYPHCHARS|MB_PRECOMPOSED, txt, -1, wstr, 512);\n\n    for(int n=0; n&lt;len; n++) {\n        wchar_t wc = wstr[n];\n\n        if(wc=='\\0') { continue; }\n        if(wc=='\\r') { x = origx; continue; }\n        if(wc=='\\n') { y += _ph; x = origx; continue; } // line spacing\n        if(wc==' ' &amp;&amp; x&gt;w) { y += _ph; x = origx; } // word break\n\n        FT_Load_Char(_face, wc, FT_LOAD_RENDER);\n        FT_GlyphSlot g = _face-&gt;glyph;\n\n        x += g-&gt;bitmap_left; // horizontal adjust\n\n        uint8_t *src = g-&gt;bitmap.buffer;\n        uint8_t *end = buf + w*h*4 - 1;\n\n        uint32_t *dst = (uint32_t*)buf+x + y*w;\n\n        dst += w * (_ph - g-&gt;bitmap_top); // adjust to baseline\n\n        for(int gy=0; gy&lt;g-&gt;bitmap.rows; gy++) {\n            for(int gx=0; gx&lt;g-&gt;bitmap.width; gx++) {\n\n                if(x+gx&gt;=w) break; // out right edge in pixmap\n\n                uint8_t *c = (uint8_t *)&amp;col;\n                uint8_t *d = (uint8_t *)&amp;dst[gx];\n\n                if(d&lt;buf || d&gt;end) continue; // avoid under/overflow\n\n                uint32_t alpha = *src; // premultiply alpha\n                d[0] |= unsigned char((alpha * c[2]) / 255);\n                d[1] |= unsigned char((alpha * c[1]) / 255);\n                d[2] |= unsigned char((alpha * c[0]) / 255);\n                d[3] |= unsigned char(alpha);\n\n                src++;\n            }\n            dst += w;\n        }\n        x -= g-&gt;bitmap_left;\n        x += g-&gt;advance.x &gt;&gt; 6;\n    }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6821023"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 541, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545272584, "creation_date": 1545262089, "question_id": 53860575, "link": "https://stackoverflow.com/questions/53860575/issue-rendering-freetype-bitmap-glyphs", "title": "Issue Rendering FreeType Bitmap Glyphs", "body": "<p>I'm trying to load glyphs into bitmaps with freetype and then load that into a d3d9 texture for each glyph, but for some reason the texture isn't being set properly.</p>\n\n<p>I want to load each glyph into its own texture, so that I can draw each character separately.</p>\n\n<p>How I'm creating the glyph textures for a font: </p>\n\n<pre><code>new_font_t::new_font_t( const char* szFontFilename, int iHeight, std::size_t _sRangeBegin, std::size_t _sRangeEnd ): sRangeBegin( _sRangeBegin ), sRangeEnd( _sRangeEnd )\n{\n    assert( !FT_New_Face( _RenderContext.ftLibrary, ( std::string( R\"(C:\\Windows\\Fonts\\)\" ) + szFontFilename ).c_str( ), 0, &amp;fFont ) );\n    FT_Set_Char_Size( fFont, 0, iHeight * 64, 96, 96 );\n    pGlyphs = new IDirect3DTexture9*[ sRangeEnd - sRangeBegin ];\n\n    for( auto u = sRangeBegin; u &lt;= sRangeEnd; u++ )\n    {\n        const auto iIndex = FT_Get_Char_Index( fFont, u );\n        D3DLOCKED_RECT recGlyph;\n\n        FT_Load_Glyph( fFont, iIndex, FT_LOAD_DEFAULT );\n        FT_Render_Glyph( fFont-&gt;glyph, FT_RENDER_MODE_NORMAL );\n        const auto uWidth = fFont-&gt;glyph-&gt;bitmap.width;\n        D3DXCreateTexture( _RenderContext.pDevice, uWidth, iHeight, 1, D3DUSAGE_DYNAMIC, D3DFMT_A8R8G8B8, D3DPOOL_DEFAULT, &amp;pGlyphs[ u ] );\n        pGlyphs[ u ]-&gt;LockRect( 0, &amp;recGlyph, nullptr, 0 );\n\n        for ( auto i = 0; i &lt; int( uWidth ); i++ )\n        {\n            for ( auto j = 0; j &lt; iHeight; j++ )\n                if( fFont-&gt;glyph-&gt;bitmap.buffer[ i + j * uWidth ] &gt; 0 )\n                    reinterpret_cast&lt; DWORD* &gt;( recGlyph.pBits )[ i + j * uWidth ] = 0xFFFFFFFF;\n        }\n\n        pGlyphs[ u ]-&gt;UnlockRect( 0 );\n    }\n}\n</code></pre>\n\n<p>This is how I'm rendering text: </p>\n\n<pre><code>void new_font_t::RenderText( const char* szText )\n{\n    if( _RenderContext.pSprite-&gt;Begin( D3DXSPRITE_ALPHABLEND ) == D3D_OK )\n    {\n        auto loc = D3DXVECTOR3( 50, 100, 0 );\n\n        for ( auto u = 0u; u &lt; strlen( szText ); u++ )\n            _RenderContext.pSprite-&gt;Draw( pGlyphs[ szText[ u ] ], nullptr, nullptr, &amp;loc, 0xFFFFFFFF );\n        _RenderContext.pSprite-&gt;End( );\n    }\n}\n</code></pre>\n\n<p>I create a font struct as so:</p>\n\n<pre><code>test_font = new new_font_t( \"arial.ttf\", 32, 0, 0xFF );\n</code></pre>\n\n<p>Then I call the render function:</p>\n\n<pre><code>test_font-&gt;RenderText( \"!\" );\n</code></pre>\n\n<p>As you can see, it should render an exclamation mark, but instead, this is rendered: <a href=\"https://i.imgur.com/Chqnltt.png\" rel=\"nofollow noreferrer\">https://i.imgur.com/Chqnltt.png</a> </p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1545261993, "post_id": 53860544, "comment_id": 94569072, "body": "You can make your own: <code>using bytes = std::vector&lt;std::byte&gt;;</code>."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 5, "creation_date": 1545262252, "post_id": 53860544, "comment_id": 94569140, "body": "&quot;<i>everybody using my code needs to use my alias</i>&quot; Why should they? Maybe that&#39;s the problem you should be looking into: why you&#39;re passing around <code>vector&lt;byte&gt;</code> everywhere, instead of something less heavy-weight. Like a <code>gsl::span&lt;byte&gt;</code>, so that users aren&#39;t required to use <code>vector</code> just to talk to your code."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1545263725, "post_id": 53860544, "comment_id": 94569504, "body": "You could consider following the <code>STL</code> design model and provide an <code>API</code> using <i>beginning</i> and <i>ending</i> iterators rather than containers."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1545266916, "post_id": 53860544, "comment_id": 94570188, "body": "@NicolBolas - people also read source, not just compilers"}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545266939, "post_id": 53860544, "comment_id": 94570193, "body": "@Galik no I do not intent to follow defective STL design that passes around begin and end."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1545269180, "post_id": 53860544, "comment_id": 94570638, "body": "@NoSenseEtAl: &quot;<i>people also read source, not just compilers</i>&quot;. And if someone sees &quot;<code>bytes</code>&quot;, they&#39;re probably going to want to know a bit more than &quot;it&#39;s a thing that has bytes.&quot; Like, how does it store them? How can I access them? And so forth. <code>std::vector&lt;std::byte&gt;</code> tells the story; <code>bytes</code> does not. <code>std::array&lt;std::byte, N&gt;</code> tells a different story. Brevity is not always best when it comes to reading and understanding a piece of code."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1545269381, "post_id": 53860544, "comment_id": 94570679, "body": "@NoSenseEtAl: &quot;<i>no I do not intent to follow defective STL design that passes around begin and end.</i>&quot; Um, are you sure you want to use C++ then? Because that&#39;s kinda how we do things here. We even baked it into the language with range-based <code>for</code>. C++20 is going to have a ton of range facilities (including <code>span</code>)."}, {"owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1545271708, "post_id": 53860544, "comment_id": 94571168, "body": "@NicolBolas I know C++ way of doing things, it is just defective... Ranges will fix a lot of it..."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545272612, "post_id": 53860544, "comment_id": 94571326, "body": "@NoSenseEtAl Ranges are just an improvement on some aspects of <code>STL</code> design.. But STL philosophy was a revolutionary improvement in certain design problems allowing a very high degree of decoupling, along with a much safer approach to using pointers. Ranges are another logical step, but we would not have them without <code>STL</code> philosophy. And they are not entirely unproblematic."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 3, "last_activity_date": 1545262171, "creation_date": 1545262171, "answer_id": 53860585, "question_id": 53860544, "link": "https://stackoverflow.com/questions/53860544/is-there-a-stdbytes/53860585#53860585", "title": "Is there a std::bytes?", "body": "<p>No it does not.</p>\n\n<p>Much of the time you are using bytes you won't want heap allocation in a buffer you don't control anyhow.</p>\n"}], "owner": {"reputation": 23279, "user_id": 700825, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6aea6e2f57f2a7b1cd6870375fbdc42f?s=128&d=identicon&r=PG", "display_name": "NoSenseEtAl", "link": "https://stackoverflow.com/users/700825/nosenseetal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 53860585, "answer_count": 1, "score": -4, "last_activity_date": 1545263727, "creation_date": 1545261839, "last_edit_date": 1545263727, "question_id": 53860544, "link": "https://stackoverflow.com/questions/53860544/is-there-a-stdbytes", "title": "Is there a std::bytes?", "body": "<p>I like <code>std::byte</code>, but I dislike that it seems that it does not have its own container, since <code>std::vector&lt;std::byte&gt;</code> is quite verbose...\nI know I could use using but for header files it is tricky since everybody using my code needs to use my alias and it is tricky for large projects that use many libraries to agree on one alias.</p>\n\n<p>So does C++ standard or boost provide some nice <code>typedef</code> for vector of <code>std::byte</code>.</p>\n"}, {"tags": ["android", "c++", "juce", "oboe"], "comments": [{"owner": {"reputation": 29876, "user_id": 476716, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4e325890903afc8269eb2c1aa57587b3?s=128&d=identicon&r=PG", "display_name": "OrangeDog", "link": "https://stackoverflow.com/users/476716/orangedog"}, "edited": false, "score": 0, "creation_date": 1545316300, "post_id": 53860502, "comment_id": 94588353, "body": "Have you tried on a different S9? Perhaps there&#39;s a hardware fault with just that one."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10813366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iIAb77E1rqY/AAAAAAAAAAI/AAAAAAAAAAc/n85Lf5o1cJQ/photo.jpg?sz=128", "display_name": "Mark Watt", "link": "https://stackoverflow.com/users/10813366/mark-watt"}, "edited": false, "score": 0, "creation_date": 1545938484, "post_id": 53874432, "comment_id": 94738268, "body": "Thanks @donturner for the answer. 1. Didn&#39;t solve the issue unfortunately.  2. Sounds promising, do you have any suggestions of how to go about implement this in a JUCE app? I&#39;m struggling to find any info on StabilizedCallback."}, {"owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "reply_to_user": {"reputation": 11, "user_id": 10813366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iIAb77E1rqY/AAAAAAAAAAI/AAAAAAAAAAc/n85Lf5o1cJQ/photo.jpg?sz=128", "display_name": "Mark Watt", "link": "https://stackoverflow.com/users/10813366/mark-watt"}, "edited": false, "score": 0, "creation_date": 1546207836, "post_id": 53874432, "comment_id": 94801018, "body": "You&#39;ll need to modify the JUCE source (somewhere around here: <a href=\"https://github.com/WeAreROLI/JUCE/blob/master/modules/juce_audio_devices/native/juce_android_Oboe.cpp#L389\" rel=\"nofollow noreferrer\">github.com/WeAreROLI/JUCE/blob/master/modules/&hellip;</a>) to wrap the existing callback in an <code>oboe::StabilizedCallback</code>. There&#39;s an example here: <a href=\"https://github.com/google/oboe/blob/master/samples/MegaDrone/src/main/cpp/AudioEngine.cpp#L29\" rel=\"nofollow noreferrer\">github.com/google/oboe/blob/master/samples/MegaDrone/src/mai&zwnj;&#8203;n/&hellip;</a>"}], "tags": [], "owner": {"reputation": 12122, "user_id": 824903, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b0903f3a872eef8fded8e48257fde823?s=128&d=identicon&r=PG", "display_name": "donturner", "link": "https://stackoverflow.com/users/824903/donturner"}, "is_accepted": false, "score": 0, "last_activity_date": 1545331793, "creation_date": 1545331793, "answer_id": 53874432, "question_id": 53860502, "link": "https://stackoverflow.com/questions/53860502/android-juce-performance-issues-when-not-touching-screen/53874432#53874432", "title": "Android (JUCE) performance issues when NOT touching screen", "body": "<p>What you are experiencing is likely to be the CPU frequency scaler on the Galaxy S9 which is aggressively scaling down the CPU frequency when the screen is not being touched. This leads to insufficient computational bandwidth causing your app to take too long inside the audio callback leading to underruns/glitches. </p>\n\n<p>To verify this <a href=\"https://youtu.be/tWBojmBpS74?t=1670\" rel=\"nofollow noreferrer\">use systrace and the Android Studio profiler</a>. The systrace will show you both audio underruns and the CPU frequency. </p>\n\n<p>Tap on the screen during the trace and you should see the CPU frequency increase, and then drop soon after. </p>\n\n<p>If this is the case there are few things you can try: </p>\n\n<ol>\n<li>Ensure that you're using the most optimal compiler flags <code>-Ofast</code> or <code>-O3</code></li>\n<li>Use the recently released <a href=\"https://github.com/google/oboe/blob/master/src/common/StabilizedCallback.cpp\" rel=\"nofollow noreferrer\"><code>StabilizedCallback</code> class</a> in Oboe which was designed for exactly this purpose - it will attempt to keep the CPU spinning to avoid it being scaled down. </li>\n<li>Monitor the underruns (obtainable through <code>AudioStream::getUnderruns()</code>) and scale back your computational load until you stop getting them. </li>\n</ol>\n\n<p>If you still get issues publish your code, or atleast enough of it to reproduce the issue, on github and I'll try to take a look. </p>\n\n<p>CPU frequency scaling is a pain for real-time apps which have significant cpu bandwidth requirements. </p>\n"}], "owner": {"reputation": 11, "user_id": 10813366, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iIAb77E1rqY/AAAAAAAAAAI/AAAAAAAAAAc/n85Lf5o1cJQ/photo.jpg?sz=128", "display_name": "Mark Watt", "link": "https://stackoverflow.com/users/10813366/mark-watt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 266, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545331793, "creation_date": 1545261541, "last_edit_date": 1545262261, "question_id": 53860502, "link": "https://stackoverflow.com/questions/53860502/android-juce-performance-issues-when-not-touching-screen", "title": "Android (JUCE) performance issues when NOT touching screen", "body": "<p>I'm porting an iOS app made in JUCE over to Android (currently in Beta).  I have some strange behaviour where I get audio glitches and GUI frame drops which only appear when NOT touching the screen.  </p>\n\n<p>The app uses OBOE with JUCE 5.4.0 and is compiled for Android 8.0 and above only. Strangely this issue only occurs on a Galaxy S9 (tests are ok on Note 8, Note 9, Xiaomi mi A1 and some other devices). I've tried with a fresh factory reset on the Galaxy S9.</p>\n\n<p>I'm new to Android development.</p>\n"}, {"tags": ["c++", "stdvector", "openacc"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7593365, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/23e98eb6b35fb1951cd7133e4dc91883?s=128&d=identicon&r=PG&f=1", "display_name": "R. Fomba", "link": "https://stackoverflow.com/users/7593365/r-fomba"}, "edited": false, "score": 0, "creation_date": 1546380898, "post_id": 53874312, "comment_id": 94835687, "body": "Thanks for your response @Mat Colgrove. Please, I need an example."}], "tags": [], "owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "is_accepted": false, "score": 1, "last_activity_date": 1545331166, "creation_date": 1545331166, "answer_id": 53874312, "question_id": 53860467, "link": "https://stackoverflow.com/questions/53860467/how-to-copy-on-gpu-a-vector-of-vector-pointer-memory-allocated-in-openacc/53874312#53874312", "title": "How to copy on GPU a vector-of-vector-pointer-memory-allocated in OpenACC", "body": "<p>OpenACC data clauses only perform shallow copies of an object.  Since a \"vector\" is a collection of three pointers, this means that putting the vector in a copyin clause will only copy the pointers, not the data it's pointing to.</p>\n\n<p>Assuming you're using PGI, the easiest thing to do is use CUDA Unified Memory (i.e. add the flag \"-ta=tesla:managed\"), and have the CUDA runtime manage the data movement for you.</p>\n\n<p>Otherwise, you need to perform a manual deep copy of the vector.  This can be a bit tricky, especially with vectors, so let me know if you need an example.</p>\n"}, {"tags": [], "owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "is_accepted": false, "score": 1, "last_activity_date": 1546537729, "creation_date": 1546537729, "answer_id": 54027319, "question_id": 53860467, "link": "https://stackoverflow.com/questions/53860467/how-to-copy-on-gpu-a-vector-of-vector-pointer-memory-allocated-in-openacc/54027319#54027319", "title": "How to copy on GPU a vector-of-vector-pointer-memory-allocated in OpenACC", "body": "<p>Again, I strongly advise using CUDA Unified Memory (managed) when using C++ vectors on the device.  Vectors are a container type with three private pointers.  Given an OpenACC copy or update does a shallow copy, when putting a vector in a data region you'll be copying the pointers, not the data they point to.  Worse, since the pointers are private, they can't be updated with a device pointer.</p>\n\n<p>Instead, you'll need to create an array of temp pointers to shadow the vector array's data and then use this temp variable on the device.  Something like the following:</p>\n\n<pre><code>% cat vector.data.cpp\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\n\nusing namespace std;\n\nint main() {\n   const int bin_num = 1024;\n   long sum = 0;\n\n   vector&lt;int32_t&gt; *k1p = new vector&lt;int32_t&gt;[bin_num];\n   for (int i = 0; i &lt; bin_num; i++) {\n       k1p[i].push_back(i);\n   }\n\n   int32_t ** temp = new int32_t*[bin_num];\n   int * sizes = new int[bin_num];\n   #pragma acc enter data create(temp[0:bin_num][0:0])\n   for (int i = 0; i &lt; bin_num; i++) {\n      int sze = k1p[i].size();\n      sizes[i] = sze;\n      temp[i] = k1p[i].data();\n      #pragma acc enter data copyin(temp[i:1][:sze])\n   }\n   #pragma acc enter data copyin(sizes[:bin_num])\n\n  #pragma acc parallel loop gang vector reduction(+:sum) present(temp,sizes)\n  for (int i = 0; i &lt; bin_num; i++) {\n     for (int j=0; j&lt; sizes[i]; ++j) {\n         sum += temp[i][j];\n     }\n  }\n  cout &lt;&lt; \"Sum: \" &lt;&lt; sum &lt;&lt; endl;\n  #pragma acc exit data delete(sizes)\n  #pragma acc exit data delete(temp)\n  delete [] sizes;\n  delete [] k1p;\n}\n\n% pgc++ vector.data.cpp --c++11 -ta=tesla  -V18.10\n% a.out\nSum: 523776\n</code></pre>\n\n<p>When using managed memory, the addresses are in a unified memory space which is accessible to both the host and device.  Hence when you access \"begin\" and \"end\", the addresses they return on the device are valid.  For example:</p>\n\n<pre><code>% cat vector.cpp\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;cstdint&gt;\nusing namespace std;\n\nint main() {\n   const int bin_num = 1024;\n   long sum = 0;\n   vector&lt;int32_t&gt;::const_iterator i2_it;\n\n   vector&lt;int32_t&gt; *k1p = new vector&lt;int32_t&gt;[bin_num];\n   for (int i = 0; i &lt; bin_num; i++) {\n       k1p[i].push_back(i);\n   }\n\n#pragma acc parallel loop reduction(+:sum) private(i2_it)\n  for (int i = 0; i &lt; bin_num; i++) {\n    for (i2_it=k1p[i].begin(); i2_it!=k1p[i].end(); i2_it++) {\n         sum += *i2_it;\n     }\n  }\n  cout &lt;&lt; \"Sum: \" &lt;&lt; sum &lt;&lt; endl;\n}\n\n% pgc++ vector.cpp --c++11 -ta=tesla:managed -V18.10\n% a.out\nSum: 523776\n</code></pre>\n\n<p>Another alternative is to write you're own vector like class.  I wrote a basic example of how to do this as part of Chapter 5 of <a href=\"https://www.elsevier.com/books/parallel-programming-with-openacc/farber/978-0-12-410397-9\" rel=\"nofollow noreferrer\">Parallel Programming with OpenACC</a>.  Code samples can be found at <a href=\"https://github.com/rmfarber/ParallelProgrammingWithOpenACC\" rel=\"nofollow noreferrer\">https://github.com/rmfarber/ParallelProgrammingWithOpenACC</a></p>\n"}], "owner": {"reputation": 79, "user_id": 7593365, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/23e98eb6b35fb1951cd7133e4dc91883?s=128&d=identicon&r=PG&f=1", "display_name": "R. Fomba", "link": "https://stackoverflow.com/users/7593365/r-fomba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 609, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1546537729, "creation_date": 1545261257, "question_id": 53860467, "link": "https://stackoverflow.com/questions/53860467/how-to-copy-on-gpu-a-vector-of-vector-pointer-memory-allocated-in-openacc", "title": "How to copy on GPU a vector-of-vector-pointer-memory-allocated in OpenACC", "body": "<p>I'm trying to copy on GPU a vector of vector array. </p>\n\n<p>I tried with OpenACC  copyin clause. The copyin clause does not copie all underlying data of my array. When I try to access to underlying vector data, I get an \"illegal adress access\" error at runtime.</p>\n\n<pre><code>vector&lt;int32_t&gt; *k1p = new vector&lt;int32_t&gt;[bin_num];\nfor (int i = 0; i &lt; bin_mum; i++) {\n  //......\n  k1p[i].push_back(i);\n}\n#pragma acc kernels loop independent copyin(k1p[0:bin_num])\nfor (int i = 0; i &lt; bin_mum; i++) {\n  //........\n  for (vector&lt;int32_t&gt;::const_iterator i2_it=k1p[i].begin(); i2_it!=k1p[i].end(); i2_it++) {\n    //.......\n  }\n  //..........\n}\n</code></pre>\n\n<p>I want to access to element of underlying vector k1p[i], but actually this code compile with pgi compiler, but when I run this code, I get</p>\n\n<blockquote>\n  <p>call to cuStreamSynchronize returned error 700: Illegal address during kernel execution</p>\n</blockquote>\n"}, {"tags": ["c++", "operator-overloading", "evaluation"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545260341, "post_id": 53860318, "comment_id": 94568625, "body": "You mean the conversion operation to bool?"}, {"owner": {"reputation": 31, "user_id": 9932301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03af168f0a613aff886dbf4792521f04?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Thornton", "link": "https://stackoverflow.com/users/9932301/eamon-thornton"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545260394, "post_id": 53860318, "comment_id": 94568640, "body": "Oh wow, now I feel stupid"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545260425, "post_id": 53860318, "comment_id": 94568648, "body": "Don&#39;t, it&#39;s fine to learn ;)"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 4, "creation_date": 1545260434, "post_id": 53860318, "comment_id": 94568653, "body": "<code>Object foo();</code> is not an object. Will always evaluate to <code>true</code> in this context."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1545260504, "post_id": 53860318, "comment_id": 94568668, "body": "<code>Object foo;</code> creates an object.  <code>Object foo();</code> declares a function."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545260537, "post_id": 53860318, "comment_id": 94568676, "body": "Added a duplicate that explains user defined operator, how to implement them..."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545261307, "post_id": 53860318, "comment_id": 94568896, "body": "Added more relevant dupes"}], "owner": {"reputation": 31, "user_id": 9932301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03af168f0a613aff886dbf4792521f04?s=128&d=identicon&r=PG&f=1", "display_name": "Eamon Thornton", "link": "https://stackoverflow.com/users/9932301/eamon-thornton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "closed_date": 1545260512, "answer_count": 0, "score": 2, "last_activity_date": 1545282494, "creation_date": 1545260268, "last_edit_date": 1545261215, "question_id": 53860318, "link": "https://stackoverflow.com/questions/53860318/is-it-possible-to-overload-the-evaluation-operator", "closed_reason": "Duplicate", "title": "Is it possible to overload the &quot;evaluation operator&quot;?", "body": "<p>I am familiar with operator overloading, but a question popped up in my mind.</p>\n\n<p>Is it possible to overload how an object behaves upon evaluating it without any operator? Such as:</p>\n\n<pre><code>Object foo;\nif(foo){...}\n</code></pre>\n\n<p>So i can overload the evaluation with something like:</p>\n\n<pre><code>bool operator evaluation(){\n    bool isValid=false;\n    //Some instructions and conditions\n    return isValid;\n}\n</code></pre>\n\n<p>There's probably little to no reason to do something like this, but I'm a bit new to C++ and I'm just exploring all nooks and crannies of it.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "sdl", "game-engine", "sdl-2"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1545258622, "post_id": 53860018, "comment_id": 94568061, "body": "I do not understand your question. <code>event.button.button</code> has no call and it has nothing to do with the way you are getting <code>x</code> and <code>y</code>. You use <code>event.button.button</code> only to get the mouse button clicked. As for why <code>button</code> appears twice in there, that&#39;s just the libraries design. <code>event.button</code> represent a button event and <code>event.button.button</code> represent the button for which the event happened."}, {"owner": {"reputation": 741, "user_id": 7203593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7878692d7cd70f58789c26307334d346?s=128&d=identicon&r=PG&f=1", "display_name": "SlowRaise", "link": "https://stackoverflow.com/users/7203593/slowraise"}, "edited": false, "score": 0, "creation_date": 1545260252, "post_id": 53860018, "comment_id": 94568598, "body": "Okay I just worded the question wrong by saying I was calling event.button...I was just trying to understand why you needed .button.button instead of just one .button, the second half of your comment and the two answers below clear that up for me."}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 4, "last_activity_date": 1545258795, "creation_date": 1545258795, "answer_id": 53860094, "question_id": 53860018, "link": "https://stackoverflow.com/questions/53860018/double-button-sdl-event-member-access/53860094#53860094", "title": "Double &#39;button&#39; SDL_Event member access?", "body": "<p><a href=\"https://hg.libsdl.org/SDL/file/10fc11bbc967/include/SDL_events.h#l557\" rel=\"nofollow noreferrer\"><code>SDL_Event</code></a> is a big 'ole <a href=\"https://en.cppreference.com/w/cpp/language/union\" rel=\"nofollow noreferrer\">union</a>:</p>\n\n<pre><code>typedef union SDL_Event\n{\n    Uint32 type;                    /**&lt; Event type, shared with all events */\n    SDL_CommonEvent common;         /**&lt; Common event data */\n    SDL_DisplayEvent display;       /**&lt; Window event data */\n    SDL_WindowEvent window;         /**&lt; Window event data */\n    SDL_KeyboardEvent key;          /**&lt; Keyboard event data */\n    SDL_TextEditingEvent edit;      /**&lt; Text editing event data */\n    SDL_TextInputEvent text;        /**&lt; Text input event data */\n    SDL_MouseMotionEvent motion;    /**&lt; Mouse motion event data */\n    SDL_MouseButtonEvent button;    /**&lt; Mouse button event data */\n    SDL_MouseWheelEvent wheel;      /**&lt; Mouse wheel event data */\n    SDL_JoyAxisEvent jaxis;         /**&lt; Joystick axis event data */\n    SDL_JoyBallEvent jball;         /**&lt; Joystick ball event data */\n    SDL_JoyHatEvent jhat;           /**&lt; Joystick hat event data */\n    SDL_JoyButtonEvent jbutton;     /**&lt; Joystick button event data */\n    SDL_JoyDeviceEvent jdevice;     /**&lt; Joystick device change event data */\n    SDL_ControllerAxisEvent caxis;      /**&lt; Game Controller axis event data */\n    SDL_ControllerButtonEvent cbutton;  /**&lt; Game Controller button event data */\n    SDL_ControllerDeviceEvent cdevice;  /**&lt; Game Controller device event data */\n    SDL_AudioDeviceEvent adevice;   /**&lt; Audio device event data */\n    SDL_SensorEvent sensor;         /**&lt; Sensor event data */\n    SDL_QuitEvent quit;             /**&lt; Quit request event data */\n    SDL_UserEvent user;             /**&lt; Custom event data */\n    SDL_SysWMEvent syswm;           /**&lt; System dependent window event data */\n    SDL_TouchFingerEvent tfinger;   /**&lt; Touch finger event data */\n    SDL_MultiGestureEvent mgesture; /**&lt; Gesture event data */\n    SDL_DollarGestureEvent dgesture; /**&lt; Gesture event data */\n    SDL_DropEvent drop;             /**&lt; Drag and drop event data */\n\n    /* This is necessary for ABI compatibility between Visual C++ and GCC\n       Visual C++ will respect the push pack pragma and use 52 bytes for\n       this structure, and GCC will use the alignment of the largest datatype\n       within the union, which is 8 bytes.\n\n       So... we'll add padding to force the size to be 56 bytes for both.\n    */\n    Uint8 padding[56];\n} SDL_Event;\n</code></pre>\n\n<p>The first <code>button</code> selects the <code>SDL_MouseButtonEvent</code> member:</p>\n\n<pre><code>typedef struct SDL_MouseButtonEvent\n{\n    Uint32 type;        /**&lt; ::SDL_MOUSEBUTTONDOWN or ::SDL_MOUSEBUTTONUP */\n    Uint32 timestamp;   /**&lt; In milliseconds, populated using SDL_GetTicks() */\n    Uint32 windowID;    /**&lt; The window with mouse focus, if any */\n    Uint32 which;       /**&lt; The mouse instance id, or SDL_TOUCH_MOUSEID */\n    Uint8 button;       /**&lt; The mouse button index */\n    Uint8 state;        /**&lt; ::SDL_PRESSED or ::SDL_RELEASED */\n    Uint8 clicks;       /**&lt; 1 for single-click, 2 for double-click, etc. */\n    Uint8 padding1;\n    Sint32 x;           /**&lt; X coordinate, relative to window */\n    Sint32 y;           /**&lt; Y coordinate, relative to window */\n} SDL_MouseButtonEvent;\n</code></pre>\n\n<p>The second <code>button</code> is the actual mouse button index in <code>SDL_MouseButtonEvent</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1762, "user_id": 1417451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82853d54858f517eb31723db2ca4704?s=128&d=identicon&r=PG", "display_name": "s3cur3", "link": "https://stackoverflow.com/users/1417451/s3cur3"}, "is_accepted": false, "score": 1, "last_activity_date": 1545258869, "creation_date": 1545258869, "answer_id": 53860107, "question_id": 53860018, "link": "https://stackoverflow.com/questions/53860018/double-button-sdl-event-member-access/53860107#53860107", "title": "Double &#39;button&#39; SDL_Event member access?", "body": "<p><code>SDL_Event</code> is <a href=\"https://www.libsdl.org/release/SDL-1.2.15/docs/html/sdlevent.html\" rel=\"nofollow noreferrer\">defined as a union</a>, so saying <code>event.button</code> is the way you access the event data as an <code>SDL_MouseButtonEvent</code>. Then, <code>SDL_MouseButtonEvent::button</code> gives you the actual mouse button index.</p>\n\n<p>You could clarify this a bit like so:</p>\n\n<pre><code>SDL_Event = event;   \nSDL_PollEvent(&amp;event); //get the event\n\nswitch (event.type) {\n    . . .\n    case SDL_MOUSEBUTTONDOWN:\n    {\n        const SDL_MouseButtonEvent &amp;mouse_event = event.button;\n        int x, y;\n        if (mouse_event.button == SDL_BUTTON_LEFT) {\n            SDL_GetMouseState(&amp;x, &amp;y);\n            std::cout &lt;&lt; \"Xpos is: \" &lt;&lt; x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Ypos is: \" &lt;&lt; y &lt;&lt; std::endl;\n        }\n        break;\n    }\n    . . .\n}\n</code></pre>\n"}], "owner": {"reputation": 741, "user_id": 7203593, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7878692d7cd70f58789c26307334d346?s=128&d=identicon&r=PG&f=1", "display_name": "SlowRaise", "link": "https://stackoverflow.com/users/7203593/slowraise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 53860094, "answer_count": 2, "score": 2, "last_activity_date": 1545260267, "creation_date": 1545258381, "last_edit_date": 1545260267, "question_id": 53860018, "link": "https://stackoverflow.com/questions/53860018/double-button-sdl-event-member-access", "title": "Double &#39;button&#39; SDL_Event member access?", "body": "<p>Say I have this simple event handling code and I want to get the X &amp; Y value of a left click:</p>\n\n<pre><code>SDL_Event = event;   \nSDL_PollEvent(&amp;event); //get the event\n\nswitch (event.type) {\n    case SDL_QUIT://if the X is pressed then end the game\n        isRunning = false;\n        break;\n    case SDL_MOUSEBUTTONDOWN:\n        int x, y;\n        if (event.button.button == SDL_BUTTON_LEFT) {\n            SDL_GetMouseState(&amp;x, &amp;y);\n            std::cout &lt;&lt; \"Xpos is: \" &lt;&lt; x &lt;&lt; std::endl;\n            std::cout &lt;&lt; \"Ypos is: \" &lt;&lt; y &lt;&lt; std::endl;\n        }\n    default:\n        break;\n}\n</code></pre>\n\n<p>Why do I have to call <code>.button</code> twice on <code>event.button.button</code> to be able to read the X and Y coordinate?</p>\n"}, {"tags": ["c++", "ios", "avfoundation", "avcapturesession", "objective-c++"], "comments": [{"owner": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "edited": false, "score": 0, "creation_date": 1545257343, "post_id": 53859491, "comment_id": 94567599, "body": "Some impressions: there&#39;s a lot going on here - what&#39;s wrong with the AAC coming from the <code>AudioConverter</code>? You shouldn&#39;t sleep in <code>didOutputSamples</code>, <code>asbdIn</code> should be gotten from the first sample buffer you see. <code>AVAudioConverter</code> can be a little friendlier (but doesn&#39;t work with sample buffers) &amp; finally, it&#39;s not raw tcp but something like <a href=\"https://github.com/shogo4405/HaishinKit.swift\" rel=\"nofollow noreferrer\">github.com/shogo4405/HaishinKit.swift</a> can stream microphone audio from your phone."}, {"owner": {"reputation": 71, "user_id": 4595094, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48a24752e138d2d00683f613b8b388c7?s=128&d=identicon&r=PG&f=1", "display_name": "Ezra Knobloch", "link": "https://stackoverflow.com/users/4595094/ezra-knobloch"}, "reply_to_user": {"reputation": 30089, "user_id": 22147, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/x74x2.png?s=128&g=1", "display_name": "Rhythmic Fistman", "link": "https://stackoverflow.com/users/22147/rhythmic-fistman"}, "edited": false, "score": 0, "creation_date": 1545283598, "post_id": 53859491, "comment_id": 94573520, "body": "First of all thanks for your response! FFmpeg and ffplay can&#39;t decode the AAC that comes out, instead it states <code>invalid data found</code>. I sleep in didOutputSamples to not work on the <code>std::vector</code> while frames stored in there are processed for conversion, but I see that this may not be a good practice like it is at the moment. Do you mean that <code>AVAudioConverter</code> does not work with the output of <code>CMSampleBufferRef</code> from step 3? Can you describe how <code>AVAudioConverter</code> can be friendlier? What does that mean?"}], "owner": {"reputation": 71, "user_id": 4595094, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/48a24752e138d2d00683f613b8b388c7?s=128&d=identicon&r=PG&f=1", "display_name": "Ezra Knobloch", "link": "https://stackoverflow.com/users/4595094/ezra-knobloch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545255359, "creation_date": 1545255359, "question_id": 53859491, "link": "https://stackoverflow.com/questions/53859491/ios-avcapturesession-stream-micro-audio-objective-c", "title": "iOS AVCaptureSession stream micro audio Objective-C++", "body": "<p><em>I am currently messing the first time with iOS and Objective-C++. Im coming from C/C++ so please excuse my bad coding in the below examples.</em></p>\n\n<p><strong>I am trying to live stream the microphone audio of my iOS device over tcp, the iOS device is acting as server and sends the data to all clients that connect.</strong></p>\n\n<ol>\n<li><p>To do so, I am first using <code>AVCaptureDevice</code> and <code>requestAccessForMediaType:AVMediaTypeAudio</code> to request access to the microphone (along with the needed entry in the Info.plist).</p></li>\n<li><p>Then I create a <code>AVCaptureSession*</code> using the below function:</p>\n\n<pre><code>AVCaptureSession* createBasicARecordingSession(aReceiver* ObjectReceivingAudioFrames){\n\n  AVCaptureSession* s = [[AVCaptureSession alloc] init];\n\n  AVCaptureDevice* aDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];\n  AVCaptureDeviceInput* aInput = NULL;\n  if([aDevice lockForConfiguration:NULL] == YES &amp;&amp; aDevice){\n      aInput = [AVCaptureDeviceInput deviceInputWithDevice:aDevice error:nil];\n      [aDevice unlockForConfiguration];\n  }\n  else if(!aDevice){\n      fprintf(stderr, \"[d] could not create device. (%p)\\n\", aDevice);\n      return NULL;\n  }\n  else{\n      fprintf(stderr, \"[d] could not lock device.\\n\");\n      return NULL;\n  }\n\n  if(!aInput){\n      fprintf(stderr, \"[d] could not create input.\\n\");\n      return NULL;\n  }\n\n  AVCaptureAudioDataOutput* aOutput = [[AVCaptureAudioDataOutput alloc] init];\n  dispatch_queue_t aQueue = dispatch_queue_create(\"aQueue\", NULL);\n\n  if(!aOutput){\n      fprintf(stderr, \"[d] could not create output.\\n\");\n      return NULL;\n  }\n\n  [aOutput setSampleBufferDelegate:ObjectReceivingAudioFrames queue:aQueue];\n  // the below line does only work on macOS\n  //aOutput.audioSettings = settings;\n\n  [s beginConfiguration];\n  if([s canAddInput:aInput]){\n      [s addInput:aInput];\n  }\n  else{\n      fprintf(stderr, \"[d] could not add input.\\n\");\n      return NULL;\n  }\n  if([s canAddOutput:aOutput]){\n      [s addOutput:aOutput];\n  }\n  else{\n      fprintf(stderr, \"[d] could not add output.\\n\");\n      return NULL;\n  }\n  [s commitConfiguration];\n\n  return s;\n\n}\n</code></pre></li>\n<li><p>The <code>aReceiver*</code> class (?) is defined below and receives the audio frames provided by the <code>AVCaptureAudioDataOutput*</code> object. The frames are stored inside a <code>std::vector</code>.</p></li>\n</ol>\n\n<p><em>(im adding the code as image as I could not get it formatted right...)</em>\n<a href=\"https://i.stack.imgur.com/zHuVl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zHuVl.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/QgZ4l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QgZ4l.png\" alt=\"enter image description here\"></a></p>\n\n<ol start=\"4\">\n<li><p>Then I start the <code>AVCaptureSession*</code> using <code>[audioSession start]</code></p></li>\n<li><p>When a tcp client connects I first create a <code>AudioConverterRef</code> and two <code>AudioStreamBasicDescription</code> to convert the audio frames to AAC, see below:</p>\n\n<pre><code>AudioStreamBasicDescription asbdIn, asbdOut;\nAudioConverterRef converter;\n\nasbdIn.mFormatID = kAudioFormatLinearPCM;\n//asbdIn.mFormatFlags = kLinearPCMFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;\nasbdIn.mFormatFlags = 12;\nasbdIn.mSampleRate = 44100;\nasbdIn.mChannelsPerFrame = 1;\nasbdIn.mFramesPerPacket = 1;\nasbdIn.mBitsPerChannel = 16;\n//asbdIn.mBytesPerFrame = (asbdIn.mBitsPerChannel / 8) * asbdIn.mBitsPerChannel;\nasbdIn.mBytesPerFrame = 2;\nasbdIn.mBytesPerPacket = asbdIn.mBytesPerFrame;\nasbdIn.mReserved = 0;\n\nasbdOut.mFormatID = kAudioFormatMPEG4AAC;\nasbdOut.mFormatFlags = 0;\nasbdOut.mSampleRate = 44100;\nasbdOut.mChannelsPerFrame = 1;\nasbdOut.mFramesPerPacket = 1024;\nasbdOut.mBitsPerChannel = 0;\n//asbdOut.mBytesPerFrame = (asbdOut.mBitsPerChannel / 8) * asbdOut.mBitsPerChannel;\nasbdOut.mBytesPerFrame = 0;\nasbdOut.mBytesPerPacket = asbdOut.mBytesPerFrame;\nasbdOut.mReserved = 0;\n\nOSStatus err = AudioConverterNew(&amp;asbdIn, &amp;asbdOut, &amp;converter);\n</code></pre></li>\n<li><p>Then I create a <code>AudioBufferList*</code> to store the encoded frames:</p>\n\n<pre><code>while(audioInput.locked){ // audioInput is my aReceiver*\n    usleep(0.2 * 1000000);\n}\naudioInput.locked = true;\n\nUInt32 RequestedPackets = 8192;\n//AudioBufferList* aBufferList = (AudioBufferList*)malloc(sizeof(AudioBufferList));\nAudioBufferList* aBufferList = static_cast&lt;AudioBufferList*&gt;(calloc(1, offsetof(AudioBufferList, mBuffers) + (sizeof(AudioBuffer) * 1)));\naBufferList-&gt;mNumberBuffers = 1;\n\naBufferList-&gt;mBuffers[0].mNumberChannels = asbdIn.mChannelsPerFrame;\naBufferList-&gt;mBuffers[0].mData = static_cast&lt;void*&gt;(calloc(RequestedPackets, asbdIn.mBytesPerFrame));\naBufferList-&gt;mBuffers[0].mDataByteSize = asbdIn.mBytesPerFrame * RequestedPackets;\n</code></pre></li>\n<li><p>Then I go through the frames stored in the <code>std::vector</code> mentioned earlier and pass them to <code>AudioConverterFillComplexBuffer()</code>. After conversion, i concat all encoded frames into one <code>NSMutableData</code> which I then <code>write()</code> to the socket connected to the client.</p>\n\n<pre><code>long aBufferListSize = audioInput.aBufferList.size();\n\nwhile(aBufferListSize &gt; 0){\n\n   err = AudioConverterFillComplexBuffer(converter, feedAFrames, static_cast&lt;void*&gt;(&amp;audioInput.aBufferList[audioInput.aBufferList.size() - aBufferListSize]), &amp;RequestedPackets, aBufferList, NULL);\n\n   NSMutableData* encodedData = [[NSMutableData alloc] init];\n   long encodedDataLen = 0;\n\n   for(int i = 0; i &lt; aBufferList-&gt;mNumberBuffers; i++){\n\n       Float32* frame = (Float32*)aBufferList-&gt;mBuffers[i].mData;\n       [encodedData appendBytes:frame length:aBufferList-&gt;mBuffers[i].mDataByteSize];\n       encodedDataLen += aBufferList-&gt;mBuffers[i].mDataByteSize;\n\n   }\n\n   unsigned char* encodedDataBytes = (unsigned char*)[encodedData bytes];\n\n   fprintf(stderr, \"[d] got %li encoded bytes to send...\\n\", encodedDataLen);\n   long bytes = write(Client-&gt;GetFD(), encodedDataBytes, encodedDataLen);\n   fprintf(stderr, \"[d] written %li of %li bytes.\\n\", bytes, encodedDataLen);\n\n   usleep(0.2 * 1000000);\n\n   aBufferListSize--;\n\n}\n\naudioInput.aBufferList.clear();\n\naudioInput.locked = false;\n</code></pre></li>\n<li><p>Below is the <code>feedAFrames()</code> callback used in the <code>AudioConverterFillComplexBuffer()</code> call:</p></li>\n</ol>\n\n<p><em>(again this is an image of the code, same reason as above)</em>\n<a href=\"https://i.stack.imgur.com/uC1SD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uC1SD.png\" alt=\"enter image description here\"></a></p>\n\n<p>Step 5 to 7 are repeated until the tcp connection is closed.</p>\n\n<hr>\n\n<p>Each step runs without any noticeable error (I know I could include way better error handling here), and I do get data out of step 3 and 7. However it does not seem to be AAC what comes out at the end.</p>\n\n<p>As im rather new to all of this, im really not sure what my error is, im sure there are several things I made wrong. It is kind of hard to find suitable example code of what I am trying to do, and the above is the best I could come up with until now with all that I have found paired with the apple dev documentation.</p>\n\n<p>I hope someone might take some time to explain me what I did wrong and how I can get this to work. Thanks for reading until here! </p>\n"}, {"tags": ["c++", "cmake", "cuda"], "answers": [{"comments": [{"owner": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "edited": false, "score": 0, "creation_date": 1545255317, "post_id": 53859386, "comment_id": 94566801, "body": "I see, thanks! If it&#39;s not too much to ask, can you share a link how to add libraries in cmake? Also, do I still need to specify the compiler to <code>nvcc</code> after adding libraries?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "edited": false, "score": 0, "creation_date": 1545255612, "post_id": 53859386, "comment_id": 94566933, "body": "Have a look at <a href=\"https://cliutils.gitlab.io/modern-cmake/chapters/packages/CUDA.html\" rel=\"nofollow noreferrer\">cliutils.gitlab.io/modern-cmake/chapters/packages/CUDA.html</a> which explains both ways."}, {"owner": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "edited": false, "score": 0, "creation_date": 1545255990, "post_id": 53859386, "comment_id": 94567090, "body": "Thanks so much, this looks like a very nice tutorial."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 2, "last_activity_date": 1545254841, "creation_date": 1545254841, "answer_id": 53859386, "question_id": 53859271, "link": "https://stackoverflow.com/questions/53859271/cmake-cannot-find-cuda-could-not-find-cmake-module-file-cmakedeterminecudacom/53859386#53859386", "title": "CMake cannot find CUDA: &quot;Could not find cmake module file: CMakeDetermineCUDACompiler.cmake&quot;", "body": "<p>Actually, you need CMake 3.8 on Linux to use <code>project(train LANGUAGES CUDA)</code>. Before, you need the old way with:</p>\n\n<pre><code>FindPackage(CUDA)\n</code></pre>\n\n<p>And manually add the libraries.</p>\n\n<p>The failure is because there is no native support for CUDA in your CMake version, use the old method.</p>\n"}, {"tags": [], "owner": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "is_accepted": false, "score": 1, "last_activity_date": 1545261597, "creation_date": 1545261597, "answer_id": 53860512, "question_id": 53859271, "link": "https://stackoverflow.com/questions/53859271/cmake-cannot-find-cuda-could-not-find-cmake-module-file-cmakedeterminecudacom/53860512#53860512", "title": "CMake cannot find CUDA: &quot;Could not find cmake module file: CMakeDetermineCUDACompiler.cmake&quot;", "body": "<p>For anyone stumbled upon this question, here is the final CMakeLists.txt file I've used:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5.1)\nset(CMAKE_CUDA_COMPILER  /usr/local/cuda-9.2/bin/nvcc)\n\nproject(train)\ninclude(FindCUDA)\n\nset(CMAKE_CXX_STANDARD 14)\nfind_package( OpenCV REQUIRED )\nfind_package(CUDA REQUIRED)\nset(CUDA_NVCC_FLAGS ${CUDA_NVCC_FLAGS} -gencode arch=compute_30,code=sm_30)\n\ninclude_directories( ${OpenCV_INCLUDE_DIRS} )\n\ncuda_add_executable(train train.cu)\ntarget_link_libraries( train ${OpenCV_LIBS} )\n</code></pre>\n"}], "owner": {"reputation": 2643, "user_id": 3736306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b04e15baa8fe1cfac912948db67b919d?s=128&d=identicon&r=PG&f=1", "display_name": "yuqli", "link": "https://stackoverflow.com/users/3736306/yuqli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3535, "favorite_count": 0, "accepted_answer_id": 53859386, "answer_count": 2, "score": 0, "last_activity_date": 1545292856, "creation_date": 1545254391, "last_edit_date": 1545292856, "question_id": 53859271, "link": "https://stackoverflow.com/questions/53859271/cmake-cannot-find-cuda-could-not-find-cmake-module-file-cmakedeterminecudacom", "title": "CMake cannot find CUDA: &quot;Could not find cmake module file: CMakeDetermineCUDACompiler.cmake&quot;", "body": "<p>I'm trying to write a CMake file which needs cuda functionalities. Consulting <a href=\"https://stackoverflow.com/questions/32801638/cmake-error-at-cmakelists-txt30-project-no-cmake-c-compiler-could-be-found\">this answer</a>, I added this line to my CMakeLists.txt:</p>\n\n<pre><code>set(CMAKE_CUDA_COMPILER  /usr/local/cuda-9.2/bin/nvcc)\n</code></pre>\n\n<p>But when using <code>cmake</code> command it still complains:</p>\n\n<pre><code>yuqiong@yuqiong-G7-7588:/media/yuqiong/DATA/alexnet/src/cpp/train$ cmake .\nCMake Error: Could not find cmake module file: CMakeDetermineCUDACompiler.cmake\nCMake Error: Error required internal CMake variable not set, cmake may be not be built correctly.\nMissing variable is:\nCMAKE_CUDA_COMPILER_ENV_VAR\nCMake Error: Could not find cmake module file: /media/yuqiong/DATA/alexnet/src/cpp/train/CMakeFiles/3.5.1/CMakeCUDACompiler.cmake\nCMake Error: Could not find cmake module file: CMakeCUDAInformation.cmake\nCMake Error: Could not find cmake module file: CMakeTestCUDACompiler.cmake\n-- Configuring incomplete, errors occurred!\nSee also \"/media/yuqiong/DATA/alexnet/src/cpp/train/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n\n<p>Which seems confusing, as I don't know where else to set the environment variable? Any idea why the <code>set</code> command does not help cmake find the nvcc compiler? </p>\n\n<p>Just in case helpful, here is my <code>CMakeLists.txt</code>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.5.1)\nset(CMAKE_CUDA_COMPILER  /usr/local/cuda-9.2/bin/nvcc)\n\nproject(train LANGUAGES CXX CUDA)\n\nset(CMAKE_CXX_STANDARD 14)\nfind_package( OpenCV REQUIRED )\ninclude_directories( ${OpenCV_INCLUDE_DIRS} )\n\n\nadd_executable(train train.cu)\ntarget_link_libraries( train ${OpenCV_LIBS} )\n</code></pre>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 1324, "user_id": 8147455, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/c0f9204eec46dea673aa01464b496362?s=128&d=identicon&r=PG&f=1", "display_name": "Xatyrian", "link": "https://stackoverflow.com/users/8147455/xatyrian"}, "edited": false, "score": 0, "creation_date": 1545254567, "post_id": 53859246, "comment_id": 94566493, "body": "have you tried defining <code>min</code> and <code>max</code> as <code>constexpr</code> ?"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1545254690, "post_id": 53859246, "comment_id": 94566543, "body": "What is the definition of &quot;real value&quot;?"}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "edited": false, "score": 0, "creation_date": 1545256644, "post_id": 53859368, "comment_id": 94567323, "body": "Thanks for info.  I need to study templates more.  C++17 is unavailable to me.  As an aside, if I include iostream, using namespace std, and add a main routine that uses foo and prints the output, compilation again fails.  Excluding the using namespace std fixes the issue.  I wonder why?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "edited": false, "score": 0, "creation_date": 1545256717, "post_id": 53859368, "comment_id": 94567353, "body": "@fuse117 I wouldn&#39;t be able to tell unless you gave an MCVE. For instance, a Compiler Explorer link. However, it seems likely that the <code>min</code> and <code>max</code> constants are conflicting with <code>std::min</code> and <code>std::max</code>"}, {"owner": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "edited": false, "score": 0, "creation_date": 1545319455, "post_id": 53859368, "comment_id": 94590131, "body": "That sounds reasonable.  Its only really an issue in some toy/test code, so I am not concerned about it.  It won&#39;t effect my real application.  Thanks again."}], "tags": [], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "is_accepted": true, "score": 5, "last_activity_date": 1545254778, "creation_date": 1545254778, "answer_id": 53859368, "question_id": 53859246, "link": "https://stackoverflow.com/questions/53859246/how-to-get-compile-time-error-checking-with-real-valued-function-arguments/53859368#53859368", "title": "How to get compile time error checking with real valued function arguments?", "body": "<p>While <code>float</code>s cannot be used as template parameters, <code>float const&amp;</code>s can. Thus, you can pass <code>min</code> and <code>max</code> as template parameters:</p>\n\n<pre><code>template &lt;typename real_t, real_t const&amp; min, real_t const&amp; max, typename counts_t&gt;\nreal_t counts2real(counts_t c)\n{\n  constexpr real_t cmin = std::numeric_limits&lt;counts_t&gt;::min();\n  constexpr real_t cmax = std::numeric_limits&lt;counts_t&gt;::max();\n  constexpr real_t cdelta = (cmax - cmin);\n\n  static_assert(max &gt; min, \"max &gt; min\");\n\n  real_t delta = (max - min);\n  real_t p = (c - cmin) / cdelta;\n\n  return (p * delta + min);\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>constexpr float min = 10.0;\nconstexpr float max = 50.0;\n\nfloat foo(int16_t x) {\n    return counts2real&lt;float, min, max&gt;(x);\n}\n</code></pre>\n\n<p>Changing <code>max</code> to <code>5.0</code> results in a diagnostic as desired:</p>\n\n<pre><code>&lt;source&gt;:13:21: error: static assertion failed: max &gt; min\n   static_assert(max &gt; min, \"max &gt; min\");\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/i5cX1-\" rel=\"noreferrer\">Demo</a></p>\n\n<hr>\n\n<p>In C++17, you can avoid having to specify the type of <code>min</code> and <code>max</code>:</p>\n\n<pre><code>template &lt;auto const&amp; min, auto const&amp; max, typename counts_t&gt;\nconstexpr auto counts2real(counts_t c)\n{\n  ...\n}\n\n// ...\nfloat foo(int16_t x) {\n    return counts2real&lt;min, max&gt;(x);\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6388163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41d34a9839bacbfca83e7908a90c48d6?s=128&d=identicon&r=PG&f=1", "display_name": "fuse117", "link": "https://stackoverflow.com/users/6388163/fuse117"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 53859368, "answer_count": 1, "score": 3, "last_activity_date": 1545254778, "creation_date": 1545254236, "question_id": 53859246, "link": "https://stackoverflow.com/questions/53859246/how-to-get-compile-time-error-checking-with-real-valued-function-arguments", "title": "How to get compile time error checking with real valued function arguments?", "body": "<p>Is it possible use static_assert (or something similar) with function arguments that are real valued?  What I am trying to do is the following. The arguments <strong>min</strong> and <strong>max</strong> will always be constant in my application.  Ideally, I would like to use them as template parameters, but doing so isn't possible because they are real valued.  The motivation for using static_assert is that I would like to get compile time error checking. </p>\n\n<pre><code>template &lt;typename counts_t, typename real_t&gt;\nreal_t counts2real(counts_t c, real_t min, real_t max)\n{\n  constexpr real_t cmin = std::numeric_limits&lt;counts_t&gt;::min();\n  constexpr real_t cmax = std::numeric_limits&lt;counts_t&gt;::max();\n  constexpr real_t cdelta = (cmax - cmin);\n\n  // ERROR: non-constant condition for static assertion.\n  static_assert(max &gt; min, \"max &gt; min\");\n\n  real_t delta = (max - min);\n  real_t p = (c - cmin) / cdelta;\n\n  return (p * delta + min);\n}\n\nint16_t x = 0;\nconst float min = 10.0;\nconst float max = 5.0;\n\nfloat xf = counts2real&lt;int16_t,float&gt;(x, min, max);\n</code></pre>\n"}, {"tags": ["c++", "performance", "search", "binary-search"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545254034, "post_id": 53859204, "comment_id": 94566286, "body": "What is the big O complexity of your function?"}, {"owner": {"reputation": 30138, "user_id": 71141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1f5d1bd28627ad2f5a9b47ef63a2dc8?s=128&d=identicon&r=PG", "display_name": "Etienne de Martel", "link": "https://stackoverflow.com/users/71141/etienne-de-martel"}, "edited": false, "score": 2, "creation_date": 1545254112, "post_id": 53859204, "comment_id": 94566316, "body": "Vectors always hold values, so yes, it&#39;s going to copy everything. In this case you don&#39;t need a vector, you can just do <code>std::binary_search (ints, ints + size, k)</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1545254141, "post_id": 53859204, "comment_id": 94566328, "body": "<i>&quot;Does it involve copying all of the items in a new location in memory?&quot;</i> Yes of course it does."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545254161, "post_id": 53859204, "comment_id": 94566334, "body": "You are copying N elements for nothing. Why would you do this? You can apply <code>std::binary_search</code> to the array given to function arguments."}, {"owner": {"reputation": 13, "user_id": 10699208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9808fe527f3c7601102d424578ec991?s=128&d=identicon&r=PG&f=1", "display_name": "D H", "link": "https://stackoverflow.com/users/10699208/d-h"}, "edited": false, "score": 0, "creation_date": 1545254234, "post_id": 53859204, "comment_id": 94566362, "body": "<i>edited</i> Ah, I get it. I had a few issues with binary search given array was decayed as pointer, and passing by reference somehow threw an error as well. Was a quick-think solution"}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1545254237, "post_id": 53859204, "comment_id": 94566369, "body": "The search is O(log(n)). The copy is O(n) ..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545254253, "post_id": 53859204, "comment_id": 94566377, "body": "@DariusHente You failed to realize that many of the STL algorithms work with regular old arrays as well as STL containers.  There was no need to create a vector."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 8, "last_activity_date": 1545254838, "last_edit_date": 1545254838, "creation_date": 1545254242, "answer_id": 53859249, "question_id": 53859204, "link": "https://stackoverflow.com/questions/53859204/binary-search-code-fails-efficiency-check/53859249#53859249", "title": "Binary search code fails efficiency check", "body": "<p><code>std::vector&lt;int&gt; v(ints,ints+size);</code> is going to make a copy of your array.  You really don't want to do this in a binary search function since it is an O(N) operation.  That totally dominates the O(logN) of a binary search and makes you algorithm equivalent to a linear search (only worse since you are also consuming O(N) space).  You should be using the array directly in your call to <code>binary_search</code> like you do to create the vector with:</p>\n\n<pre><code>static bool exists(int ints[], int size, int k)\n{\n    return std::binary_search(ints, ints+size, k);\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10699208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9808fe527f3c7601102d424578ec991?s=128&d=identicon&r=PG&f=1", "display_name": "D H", "link": "https://stackoverflow.com/users/10699208/d-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 53859249, "answer_count": 1, "score": 0, "last_activity_date": 1545254838, "creation_date": 1545253957, "last_edit_date": 1545254575, "question_id": 53859204, "link": "https://stackoverflow.com/questions/53859204/binary-search-code-fails-efficiency-check", "title": "Binary search code fails efficiency check", "body": "<p>I have been tasked to complete a technical assessment for a position involving a simple C++ coding exercise. The problem was to check if a number exists in a sorted array, where:</p>\n\n<ul>\n<li><code>ints[]</code> is the array to be sorted</li>\n<li><code>size</code> is the size of the array</li>\n<li><code>k</code> is the number to be checked</li>\n</ul>\n\n<p>The requirement was to implement a solution that uses as few CPU cycles as possible. My solution was as follows:</p>\n\n\n\n<pre class=\"lang-cpp prettyprint-override\"><code>static bool exists(int ints[], int size, int k)\n{\n    std::vector&lt;int&gt; v(ints,ints+size);\n\n    if (std::binary_search (v.begin(), v.end(), k))\n        return true;\n\n    return false;\n}\n</code></pre>\n\n<p>This failed the performance test with a million items in the array. I am a bit confused as to why. Is it the fact that I am creating a new structure from the vector? Does it involve copying all of the items in a new location in memory? </p>\n"}, {"tags": ["c++", "opengl", "textures"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10809571"}, "edited": false, "score": 0, "creation_date": 1545252897, "post_id": 53858975, "comment_id": 94572036, "body": "May be the problem is glBindtexture. try to write it out the loop. And I think the normal coord must been clamped between -1 and 1."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1545253144, "post_id": 53858975, "comment_id": 94565911, "body": "What&#39;s up with that double <code>glTexCoord2f()</code> call in the middle?"}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": false, "score": 4, "last_activity_date": 1545260318, "last_edit_date": 1545260318, "creation_date": 1545253122, "answer_id": 53859061, "question_id": 53858975, "link": "https://stackoverflow.com/questions/53858975/legacy-opengl-textures-not-working-correctly/53859061#53859061", "title": "Legacy OpenGL Textures not working correctly", "body": "<p><a href=\"http://www.opengl.org/sdk/docs/man2/xhtml/glBegin.xml\" rel=\"nofollow noreferrer\">You can't call <code>glBindTexture()</code> inside a <code>glBegin()</code>/<code>glEnd()</code> pair:</a></p>\n\n<blockquote>\n  <p>Only a subset of GL commands can be used between glBegin and glEnd.\n              The commands are\n              glVertex,\n              glColor,\n              glSecondaryColor,\n              glIndex,\n              glNormal,\n              glFogCoord,\n              glTexCoord,\n              glMultiTexCoord,\n              glVertexAttrib,\n              glEvalCoord,\n              glEvalPoint,\n              glArrayElement,\n              glMaterial, and\n              glEdgeFlag.\n              Also,\n              it is acceptable to use\n              glCallList or\n              glCallLists to execute\n              display lists that include only the preceding commands.\n              <strong>If any other GL command is executed between glBegin and glEnd,\n              the error flag is set and the command is ignored.</strong></p>\n</blockquote>\n\n<p>So move that <code>glBindTexture()</code> call a couple lines up to before <code>glBegin()</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 7889861, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "callum perks", "link": "https://stackoverflow.com/users/7889861/callum-perks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545260318, "creation_date": 1545252647, "question_id": 53858975, "link": "https://stackoverflow.com/questions/53858975/legacy-opengl-textures-not-working-correctly", "title": "Legacy OpenGL Textures not working correctly", "body": "<p>I am usign legacy openGL. I am drawing multiple objects in a scene. I want the sphere that is being drawn to be textured but all other objects to be solid colours. However, if I try to disable the texture after drawing the sphere, everything else is black.</p>\n\n<p>This is the code where I create the texture</p>\n\n<pre><code>    glGenTextures(1, &amp;textures);\n    glBindTexture(GL_TEXTURE_2D, textures);\n\n    glEnable(GL_TEXTURE_2D);\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, image-&gt;Width(), image-&gt;Height(), 0, GL_RGB, GL_UNSIGNED_BYTE, image-&gt;imageField());\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);  \n</code></pre>\n\n<p>This is where i draw the sphere:</p>\n\n<pre><code>id Objects::sphere(float xPos, float yPos, float zPos){\n    const int NR_PHI = 20;\n    const int NR_THETA = 20;\n\n    glColor3f(1, 1, 1);\n\n  for(int longitude = 0; longitude &lt; NR_PHI; longitude++)\n    for(int latitude = 0; latitude &lt; NR_THETA; latitude++){\n      float d_phi   = 2*M_PI/NR_PHI;\n      float d_theta = M_PI/NR_THETA; \n      glBegin(GL_TRIANGLES);\n      glBindTexture(GL_TEXTURE_2D, textures);\n      double x, y, z;\n\n      x = cos(longitude*d_phi)*sin(latitude*d_theta) + xPos;\n      y = sin(longitude*d_phi)*sin(latitude*d_theta) + yPos;\n      z = cos(latitude*d_theta) + zPos;\n      glNormal3f(x, y, z);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude)/NR_PHI, static_cast&lt;float&gt;(latitude)/NR_THETA);\n      glVertex3f(x, y, z);\n      x = cos((longitude+1)*d_phi)*sin(latitude*d_theta) + xPos;\n      y = sin((longitude+1)*d_phi)*sin(latitude*d_theta) + yPos;\n      z = cos(latitude*d_theta) + zPos;\n      glNormal3f(x, y, z);\n      glTexCoord2f(d_phi,0);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude+1)/NR_PHI, static_cast&lt;float&gt;(latitude)/NR_THETA);\n      glVertex3f(x, y, z);\n      x = cos((longitude+1)*d_phi)*sin((latitude+1)*d_theta) + xPos;\n      y = sin((longitude+1)*d_phi)*sin((latitude+1)*d_theta) + yPos;\n      z = cos((latitude+1)*d_theta) + zPos;\n      glNormal3f(x, y, z);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude+1)/NR_PHI, static_cast&lt;float&gt;(latitude+1)/NR_THETA);\n      glVertex3f(x, y, z);      \n\n      x = cos(longitude*d_phi)*sin(latitude*d_theta) + xPos;\n      y = sin(longitude*d_phi)*sin(latitude*d_theta) + yPos;\n      z = cos(latitude*d_theta) + zPos; \n      glNormal3f(x, y, z);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude)/NR_PHI, static_cast&lt;float&gt;(latitude)/NR_THETA);\n      glVertex3f(x, y, z);\n      x = cos((longitude+1)*d_phi)*sin((latitude+1)*d_theta) + xPos;\n      y = sin((longitude+1)*d_phi)*sin((latitude+1)*d_theta) + yPos;\n      z = cos((latitude+1)*d_theta) + zPos;\n      glNormal3f(x, y, z);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude+1)/NR_PHI, static_cast&lt;float&gt;(latitude+1)/NR_THETA);\n      glVertex3f(x, y, z);\n      x = cos((longitude)*d_phi)*sin((latitude+1)*d_theta) + xPos;\n      y = sin((longitude)*d_phi)*sin((latitude+1)*d_theta) + yPos;\n      z = cos((latitude+1)*d_theta) + zPos;\n      glNormal3f(x, y, z);\n      glTexCoord2f(static_cast&lt;float&gt;(longitude)/NR_PHI, static_cast&lt;float&gt;(latitude+1)/NR_THETA);\n      glVertex3f(x, y, z);      \n\n      glBindTexture(GL_TEXTURE_2D, 0);     \n      glEnd();\n  } \n}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "static-libraries", "static-initialization"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1545251657, "post_id": 53858726, "comment_id": 94565295, "body": "C++ does initialize static variables in shared libraries. Are you sure it&#39;s not a static library?"}, {"owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545251795, "post_id": 53858726, "comment_id": 94565348, "body": "Ah yes it is a static library. I&#39;ll edit"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545251850, "post_id": 53858726, "comment_id": 94565368, "body": "If you have a static library, then the problem is that the symbol is not integrated in your application."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1545251868, "post_id": 53858726, "comment_id": 94565377, "body": "<i>&quot;However it doesn&#39;t seem to work, and I don&#39;t know why.&quot;</i> Can you elaborate more about the <i>doesn&#39;t work</i> point please. <i>&quot;Doesn&#39;t work&quot;</i> is a pretty poor problem description."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545253852, "post_id": 53858726, "comment_id": 94566219, "body": "@MatthieuBrucher this is a good point. I missed this, you also need to use it. I will remove my comment."}], "answers": [{"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1545252165, "post_id": 53858850, "comment_id": 94565512, "body": "That might have a very detrimental effect of getting unnecessary symbols pulled in, which triggers code bloat."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1545252211, "post_id": 53858850, "comment_id": 94565528, "body": "Oh yes, most definitely."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545252340, "post_id": 53858850, "comment_id": 94565589, "body": "@SergeyA Adding a mention to tell that&#39;s it&#39;s the easy way, the longer way being referencing all of them explicitly."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545252454, "post_id": 53858850, "comment_id": 94565636, "body": "To manually refer to each registration function would be tricky and defeat the purpose of using <code>static</code>s to perform registration in the first place. At that point you might as well just call the register functions directly in <code>main</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545252528, "post_id": 53858850, "comment_id": 94565674, "body": "That&#39;s why each time I use plugin-like mechanisms like that, I always use a shared library."}, {"owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545252559, "post_id": 53858850, "comment_id": 94565688, "body": "@Fran&#231;oisAndrieux yea I was trying to avoid just that case. I&#39;d like the convienence of not having to do that. I just tried WHOLEARCHIVE and it fails because of duplicate symbols in other parts of the project. So I guess that&#39;s out."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545253563, "post_id": 53858850, "comment_id": 94566098, "body": "Maybe the duplicate symbols should be in another library is &quot;accessed&quot; by this static library and the executable?"}, {"owner": {"reputation": 1242, "user_id": 1776597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1162afb0084be07da6ed9db091c396e9?s=128&d=identicon&r=PG", "display_name": "Lorenzo Gatti", "link": "https://stackoverflow.com/users/1776597/lorenzo-gatti"}, "edited": false, "score": 0, "creation_date": 1545295785, "post_id": 53858850, "comment_id": 94577676, "body": "Since &quot;normal&quot; static library linking takes care of discarding unneeded symbols and choosing between duplicate ones, can you use whole archive linking with one or more minimal static libraries that contain your registrations and little more, and have them depend on static libraries with normal linking that contain all potentially duplicate symbols and most potentially unneeded ones?"}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 2, "last_activity_date": 1545252489, "last_edit_date": 1545252489, "creation_date": 1545252066, "answer_id": 53858850, "question_id": 53858726, "link": "https://stackoverflow.com/questions/53858726/calling-function-before-main-in-static-libraries/53858850#53858850", "title": "Calling function before main in static libraries", "body": "<p>As you have a static library, the problem is that by default, only the required symbols will be linked into your executable or library. By definition, these won't be your register static objects.</p>\n\n<p>On Linux, use <code>--whole-archive</code> to tell gcc (or clang) to integrate the full library in the final output file.</p>\n\n<p>On Windows, use <code>/WHOLEARCHIVE</code>.</p>\n\n<p>The other option is to reference these objects from somewhere in your executable/shared library to force their integration.</p>\n\n<p>So two options:</p>\n\n<ul>\n<li>whole archive, easy, but integrates everything from the static library</li>\n<li>manually reference the register functions inside say <code>main</code> (just having <code>object;</code> will be enough)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "is_accepted": true, "score": 2, "last_activity_date": 1545330102, "creation_date": 1545330102, "answer_id": 53874121, "question_id": 53858726, "link": "https://stackoverflow.com/questions/53858726/calling-function-before-main-in-static-libraries/53874121#53874121", "title": "Calling function before main in static libraries", "body": "<p>I ended up finding a solution to this in a game engine called <a href=\"https://github.com/volcoma/EtherealEngine\" rel=\"nofollow noreferrer\">Ethereal</a>. Credit goes to that guy for this code.</p>\n\n<p>Instead of having the one register function I have two:</p>\n\n<pre><code>#define CAT_IMPL(a, b) a##b\n#define CAT(a, b) CAT_IMPL(a, b)\n\n#define REGISTER_EXTERN(cls)\\\n    template &lt;typename T&gt;\\\n    extern void register_func();\\\n    template &lt;&gt;\\\n    void register_func&lt;cls&gt;();\\\n    static const int CAT(temp, __LINE__) =\\\n        reg_helper::call&lt;cls&gt;(&amp;register_func&lt;cls&gt;)\n\n#define REGISTER(cls)\\\n    template &lt;&gt; \\\n    void register_func&lt;cls&gt;()\n</code></pre>\n\n<p>And then I have this helper function:</p>\n\n<pre><code>namespace reg_helper\n{\n    template &lt;typename T&gt;\n    inline int call(void(*f)())\n    {\n        static const int s = [&amp;f]() {\n            f();\n            return 0;\n        }();\n        return s;\n    }\n}\n</code></pre>\n\n<p>In header functions I define <code>REGISTER_EXTERN(SomeClass);</code>, and then in a cpp filesomewhere I use the register macro like before:</p>\n\n<pre><code>REGISTER(SomeClass)\n{\n    // This code will run before main\n}\n</code></pre>\n\n<p>If you make a header file that lists all your <code>REGISTER_EXTERN</code> calls you can actually specify the order in which the the register functions will be run, since the first time the static is hit, it'll initialize and call the function. The helper ensures that the <code>REGISTER</code> function is only called once, since including the header in different places will re-initialize the static variable in each translation unit.</p>\n\n<p>This solves the problem of static libraries, since the headers will be included and the symbols will exist. And secondly it ensures I can initialize things in the right order.</p>\n"}], "owner": {"reputation": 7407, "user_id": 906367, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/DoXKz.jpg?s=128&g=1", "display_name": "DavidColson", "link": "https://stackoverflow.com/users/906367/davidcolson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 867, "favorite_count": 0, "accepted_answer_id": 53874121, "answer_count": 2, "score": 4, "last_activity_date": 1545330102, "creation_date": 1545251425, "last_edit_date": 1545253964, "question_id": 53858726, "link": "https://stackoverflow.com/questions/53858726/calling-function-before-main-in-static-libraries", "title": "Calling function before main in static libraries", "body": "<p>I have a type registration system for a custom form of runtime type information. Up until now I've used the following macro to call a registration function before main and register the types:</p>\n\n<pre><code>#define REGISTRATION                                    \\\nstatic void _register();                                \\\nnamespace { struct temp { temp() { _register(); } }; }  \\\nstatic const temp CAT(temp, __LINE__);                  \\\nstatic void _register()\n</code></pre>\n\n<p>That way I can do this in lots of different cpp files:</p>\n\n<pre><code>REGISTRATION()\n{\n    RegisterNewType(vec2)\n    -&gt;RegisterMember(\"x\", &amp;vec2::x)\n    -&gt;RegisterMember(\"y\", &amp;vec2::y);\n}\n</code></pre>\n\n<p>This works great. However this falls apart when I try and do this in a static library. It appears that this because C++ does not initialize static variables in static libraries. </p>\n\n<p>I went googling for a solution and found this:</p>\n\n<pre><code>#define REGISTRATION                                  \\\nstatic void _register() __attribute__((constructor)); \\\nstatic void _register()\n</code></pre>\n\n<p>Which might solve my problem, but it turns out that I can only do that in clang and gcc. I am using msvc. </p>\n\n<p>Is there a way to get this to work so I can have pre-main functions in libraries?</p>\n\n<p><strong>EDIT:</strong> Some more googling brought me to this:</p>\n\n<pre><code>#if defined(_MSC_VER)\n#pragma section(\".CRT$XCU\",read)\n#define EXT_REGISTRATION_(f,p) \\\n        static void __cdecl f(void); \\\n        __declspec(allocate(\".CRT$XCU\")) void (__cdecl*f##_)(void) = f; \\\n        __pragma(comment(linker,\"/include:\" p #f \"_\")) \\\n        static void __cdecl f(void)\n#ifdef _WIN64\n#define EXT_REGISTRATION(f) EXT_REGISTRATION_(f,\"\")\n#else\n#define EXT_REGISTRATION(f) EXT_REGISTRATION_(f,\"_\")\n#endif\n#else\n#define EXT_REGISTRATION(f) \\\n        static void f(void) __attribute__((constructor)); \\\n        static void f(void)\n#endif\n</code></pre>\n\n<p>However the registration function is still not called. The debugger states that <code>No symbols have been loaded</code>.</p>\n"}, {"tags": ["python", "c++", "cmake", "installation", "diplib"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545251553, "post_id": 53858593, "comment_id": 94565247, "body": "Can you show the error? And are you sure you pick up the proper location for your packages?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547997967, "post_id": 53858593, "comment_id": 95377738, "body": "This issue was solved here: <a href=\"https://github.com/DIPlib/diplib/issues/16\" rel=\"nofollow noreferrer\">github.com/DIPlib/diplib/issues/16</a>"}], "owner": {"reputation": 1, "user_id": 10812901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a500057cc9a7eedfd97eda5ec9dc60?s=128&d=identicon&r=PG&f=1", "display_name": "dpksrndrn", "link": "https://stackoverflow.com/users/10812901/dpksrndrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 675, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1587573587, "creation_date": 1545250740, "last_edit_date": 1587573587, "question_id": 53858593, "link": "https://stackoverflow.com/questions/53858593/unable-to-use-pydip-module", "title": "Unable to use PyDIP Module", "body": "<p>I am trying to install PyDIP for quantitative image analysis. From the source code available online (<a href=\"https://github.com/DIPlib/diplib\" rel=\"nofollow noreferrer\">https://github.com/DIPlib/diplib</a>), I built the library using CMake and a Visual Studio 15 2017 generator. I ran the resulting install files generated on Visual studio and got the following output: </p>\n\n<pre><code>1&gt;------ Build started: Project: INSTALL, Configuration: Debug x64 ------\n1&gt;-- Install configuration: \"Debug\"\n1&gt;-- Installing: C:/Users/Deepak.Surendran/Anaconda3/pkgs/python-3.7.0-hea74fb7_0/Lib/site-packages/PyDIP/PyDIP_bin.cp37-win_amd64.pyd\n1&gt;-- Installing: C:/Users/Deepak.Surendran/Anaconda3/pkgs/python-3.7.0-hea74fb7_0/Lib/site-packages/PyDIP/PyDIP_py.py\n1&gt;-- Installing: C:/Users/Deepak.Surendran/Anaconda3/pkgs/python-3.7.0-hea74fb7_0/Lib/site-packages/PyDIP/__init__.py\n========== Build: 1 succeeded, 0 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n\n<p>I can see three installed files <code>__init__.py</code>, <code>PyDIP_bin.cp37-win_amd64</code>, <code>PyDIP_py</code> at the  ...Anaconda3\\pkgs\\python-3.7.0-hea74fb7_0\\Lib\\site-packages\\PyDIP file location. </p>\n\n<p>However when I try to import the library in python, I get a module not found error. \nI have also tried to modify the path environment variable to add \"C:\\Program Files\\DipLib\\lib\" to the Python environment. </p>\n\n<p>I would appreciate any help.</p>\n"}, {"tags": ["c++", "pointers", "destructor", "delete-operator"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 9, "creation_date": 1545248845, "post_id": 53858227, "comment_id": 94564179, "body": "It&#39;s not because you didn&#39;t see a problem that it&#39;s fine. Both of these cases are undefined behavior."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545248860, "post_id": 53858227, "comment_id": 94564182, "body": "Yes indeed, both are wrong. Always initialize your objects."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545248871, "post_id": 53858227, "comment_id": 94564184, "body": "Because the compiler didn&#39;t detect the Undefined Behavior in the case where it allows it. There is no requirement for a compiler to issue a warning in either case even though they are both wrong."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1545248960, "post_id": 53858227, "comment_id": 94564221, "body": "<i>&quot;I know that there&#39;s no point in deleting the pointer because there is no dynamically allocated memory.&quot;</i> It&#39;s not that there is no point. It&#39;s that you are not allowed to <code>delete</code> a pointer that doesn&#39;t point to something that was <code>new</code>ed (with the exception of deleting <code>nullptr</code> which doesn&#39;t do anything). Though in this case, since the pointers are uninitialized, you can&#39;t even get to the point of breaking that rule."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1545248986, "post_id": 53858227, "comment_id": 94564235, "body": "It doesn&#39;t <i>runs fine</i>.  It&#39;s undefined behavior and you got lucky/unlucky that it didn&#39;t crash."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1545249001, "post_id": 53858227, "comment_id": 94564243, "body": "Deleting a random pointer leads to undefined behavior. Sometimes compilers can see through this and warn you, sometimes they don&#39;t.  It is still the problem."}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1545249445, "post_id": 53858227, "comment_id": 94564438, "body": "@Vegeta good question!!! but you did not specifically call destructor."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1545249456, "post_id": 53858227, "comment_id": 94564443, "body": "The compiler can see that in <code>main</code> there is no way that <code>p</code> was initialized before <code>delete p</code> and can notify you. That&#39;s a no-brainer, but because in <code>foo</code> <code>p</code> is left uninitialized as a member variable and the compiler later could find a constructor or other method that does initialize it, tracking that it&#39;s uninitialized is murkier, and would require a fairly large amount of extra work and book keeping that most compilers wouldn&#39;t bother with."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 1, "creation_date": 1545249526, "post_id": 53858227, "comment_id": 94564467, "body": "@Gox No need. Destructor call is implied when <code>test</code> goes out of scope."}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545250020, "post_id": 53858227, "comment_id": 94564670, "body": "@user4581301 thanks for the answer"}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1545251057, "post_id": 53858227, "comment_id": 94565074, "body": "I don&#39;t think the OP talks about a warning here. Problem an actual crash. My compiler/platform reproes this behaviour. Crash on int pointer delete, but UB &quot;no failure&quot; on the object delete."}, {"owner": {"reputation": 117, "user_id": 3153229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3de1bcb54b2f243444b602a2bb6c5f0d?s=128&d=identicon&r=PG&f=1", "display_name": "Vegeta", "link": "https://stackoverflow.com/users/3153229/vegeta"}, "edited": false, "score": 0, "creation_date": 1545253305, "post_id": 53858227, "comment_id": 94565980, "body": "Why all the dislikes though? Is the question not clear?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1545256871, "post_id": 53858227, "comment_id": 94567420, "body": "I guess not. Made sense to me though. Why does the compiler generate an error for flawed code type 1 but not for flawed code type 2. People fixated on the fact that it was flawed code instead of what you asked. Maybe add a header proclaiming that <i>I know this is Terrible, Horrible, No Good, Very Bad Code, but the question is &quot;Why does one case generate an error and the other doesn&#39;t?&quot;</i>"}], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1545249263, "post_id": 53858296, "comment_id": 94564358, "body": "Note that the <code>test</code> object is <i>not</i> heap-allocated. It&#39;s also a stack variable."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1545249674, "post_id": 53858296, "comment_id": 94564540, "body": "@justin darn good point."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 2, "last_activity_date": 1545250944, "last_edit_date": 1545250944, "creation_date": 1545249161, "answer_id": 53858296, "question_id": 53858227, "link": "https://stackoverflow.com/questions/53858227/why-is-it-possible-to-delete-an-uninitialized-pointer-in-a-destructor-but-not-i/53858296#53858296", "title": "Why is it possible to delete an uninitialized pointer in a destructor, but not in main?", "body": "<p>The comment from Fran\u00e7ois Andrieux is good:</p>\n\n<blockquote>\n  <p>It's not because you didn't see a problem that it's fine. Both of these cases are undefined behavior. \u2013 Fran\u00e7ois Andrieux 3 mins ago</p>\n</blockquote>\n\n<p>The reason why it passes, in practice, is that a popular compiler/platform has the dynamic memory (heap) zero'ed out before you allocate from it. So, your <em>p</em> happens to be 0, which can be deleted safely. This compiler/platform doesn't do it for stack variables.</p>\n\n<p>EDIT:\nA more likely scenario, given the comment, is that the int variable gets put into a register. Which is definitely not initialized to anything meaningfull. But the stack memory, where the object will reside, might (just might) be initialiazed to 0.</p>\n\n<p>But yeah, don't rely on UB.</p>\n"}, {"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 4, "creation_date": 1545249624, "post_id": 53858362, "comment_id": 94564512, "body": "I think this is the point. The OP is not really clear about compile time vs. run time and is complaining about the differences in compiler diagnostics."}], "tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 9, "last_activity_date": 1545249515, "creation_date": 1545249515, "answer_id": 53858362, "question_id": 53858227, "link": "https://stackoverflow.com/questions/53858227/why-is-it-possible-to-delete-an-uninitialized-pointer-in-a-destructor-but-not-i/53858362#53858362", "title": "Why is it possible to delete an uninitialized pointer in a destructor, but not in main?", "body": "<p>In both cases, the pointer in question contains an <em>indeterminate value</em>. Accessing that value, even just to read it (never mind passing it to <code>delete</code>), causes undefined behaviour. It's not ok when it's a local variable, and it's not ok when it's a class member either. It simply happens that the compiler was clever enough to catch it in the case of the local variable. For the class member, it's harder for the compiler to figure out that nothing in the program can give the pointer a determinate value.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 3, "last_activity_date": 1545251204, "creation_date": 1545251204, "answer_id": 53858682, "question_id": 53858227, "link": "https://stackoverflow.com/questions/53858227/why-is-it-possible-to-delete-an-uninitialized-pointer-in-a-destructor-but-not-i/53858682#53858682", "title": "Why is it possible to delete an uninitialized pointer in a destructor, but not in main?", "body": "<blockquote>\n  <p>please check the destructor of the foo function below. If I delete the p pointer then it runs fine. But if I do the same in main program then I get an error. Why does it allow me to do this in a destructor?</p>\n</blockquote>\n\n<p>It is not that it is allowed in one place and not another.  It is <strong>undefined</strong> behavior** in both cases.</p>\n\n<p>The real issue is just that the compiler DOESN'T KNOW that the <code>foo::p</code> member is uninitialized inside the <code>~foo()</code> destructor, since the declaration of <code>p</code> and the call to <code>delete p</code> are in different scopes.  <code>foo::p</code> could be assigned anytime after a <code>foo</code> object is constructor and before it is destructed.  The compiler CAN'T verify that condition.</p>\n\n<p>Whereas inside of <code>main()</code>, the declaration of the local <code>p</code> variable and the call to <code>delete p</code> are in the same scope, and the compiler can easily see that <code>p</code> is never initialized.</p>\n"}], "owner": {"reputation": 117, "user_id": 3153229, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/3de1bcb54b2f243444b602a2bb6c5f0d?s=128&d=identicon&r=PG&f=1", "display_name": "Vegeta", "link": "https://stackoverflow.com/users/3153229/vegeta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "closed_date": 1545253321, "answer_count": 3, "score": -6, "last_activity_date": 1545252316, "creation_date": 1545248817, "last_edit_date": 1545249027, "question_id": 53858227, "link": "https://stackoverflow.com/questions/53858227/why-is-it-possible-to-delete-an-uninitialized-pointer-in-a-destructor-but-not-i", "closed_reason": "Not suitable for this site", "title": "Why is it possible to delete an uninitialized pointer in a destructor, but not in main?", "body": "<p>please check the destructor of the foo function below. If I delete the p pointer then it runs fine. But if I do the same in main program then I get an error. Why does it allow me to do this in a destructor?</p>\n\n<p>P.S. I know that there's no point in deleting the pointer because there is no dynamically allocated memory.</p>\n\n<pre><code>class foo\n{\n  int* p;\n\npublic:\n  ~foo()\n  {\n    delete p; // runs fine\n    cout &lt;&lt; \"Destructor run \\n\";\n  }\n};\n\n\nint main()\n{\n\nint* p;\ndelete p; // This will cause error \"uninitialized local variable 'p' used \"\n\nfoo test; // destructor runs fine at the end of the program\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "variadic-templates", "decltype"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 5, "creation_date": 1545248122, "post_id": 53858034, "comment_id": 94563865, "body": "<code>std::index_sequence_for&lt;Fs...&gt;{}</code>"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1545248283, "post_id": 53858034, "comment_id": 94563916, "body": "<code>std::index_sequence_for&lt;Fs...&gt;</code> is a type, you need to pass an object"}, {"owner": {"reputation": 11, "user_id": 4408963, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Qwg_6AQyTCc/AAAAAAAAAAI/AAAAAAAAAHY/AfqajrMJ6XA/photo.jpg?sz=128", "display_name": "johnkrat", "link": "https://stackoverflow.com/users/4408963/johnkrat"}, "edited": false, "score": 0, "creation_date": 1545419619, "post_id": 53858034, "comment_id": 94626387, "body": "yup. I feel really dumb now. Thanks for the responses!"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1545248683, "creation_date": 1545248683, "answer_id": 53858196, "question_id": 53858034, "link": "https://stackoverflow.com/questions/53858034/template-deduction-substitution-error-with-decltype-return/53858196#53858196", "title": "Template deduction/substitution error with decltype return", "body": "<p>Here:</p>\n\n<pre><code>return bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;);\n</code></pre>\n\n<p><code>std::index_sequence_for&lt;Fs...&gt;</code> is just a type. You need to instantiate it:</p>\n\n<pre><code>return bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;{});\n</code></pre>\n\n<p>Make the same change in your <code>decltype</code> (or just get rid of the trailing return type and let <code>auto</code> do its job!).</p>\n"}], "owner": {"reputation": 11, "user_id": 4408963, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Qwg_6AQyTCc/AAAAAAAAAAI/AAAAAAAAAHY/AfqajrMJ6XA/photo.jpg?sz=128", "display_name": "johnkrat", "link": "https://stackoverflow.com/users/4408963/johnkrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "closed_date": 1545249398, "answer_count": 1, "score": 0, "last_activity_date": 1545248683, "creation_date": 1545247935, "last_edit_date": 1545248346, "question_id": 53858034, "link": "https://stackoverflow.com/questions/53858034/template-deduction-substitution-error-with-decltype-return", "closed_reason": "Not suitable for this site", "title": "Template deduction/substitution error with decltype return", "body": "<p>I have this code snippet here that takes a tuple of function pointers and a tuple of values and then binds the values to the function pointer and returns a new tuple with the bound functions. </p>\n\n<p>When I call the bind_tuple_impl directly I don't have any errors, but it isn't really a practical way to call this routine. I also need to delay execution after the bind so just calling the function with the given parameter isn't an option.</p>\n\n<p>Am I approaching this all wrong? Am I missing something obvious </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class Fs, class Ts, std::size_t... Is&gt;\nauto bind_tuple_impl(std::tuple&lt;Fs&gt; f, std::tuple&lt;Ts&gt; t, std::index_sequence&lt;Is...&gt;)\n   -&gt; decltype(std::make_tuple(std::bind(std::get&lt;Is&gt;(f),std::get&lt;Is&gt;(t))...))\n{\n   return std::make_tuple(std::bind(std::get&lt;Is&gt;(f),std::get&lt;Is&gt;(t))...);\n}\n\ntemplate &lt;class... Fs, class... Ts&gt;\nauto bind_tuple(std::tuple&lt;Fs...&gt; f, std::tuple&lt;Ts...&gt; t)\n   -&gt; decltype(bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;))\n{\n   return bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;);\n}\n\nint main()\n{\n    std::tuple&lt;std::function&lt;void(double)&gt;&gt; f;\n    std::tuple&lt;double&gt; t;\n\n    auto f_bound = bind_tuple(f,t);\n}\n</code></pre>\n\n<p>The error:</p>\n\n<pre><code>main.cpp:91:68: error: expected primary-expression before ')' token    \n    -&gt; decltype(bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;))    \n                                                                    ^    \nmain.cpp: In function 'decltype (bind_tuple_impl(f, t, &lt;expression error&gt;)) bind_tuple(std::tuple&lt;_Tps ...&gt;, std::tuple&lt;_Elements ...&gt;)':\n\nmain.cpp:94:63: error: expected primary-expression before ')' token    \n    return bind_tuple_impl(f, t, std::index_sequence_for&lt;Fs...&gt;);    \n                                                               ^    \nmain.cpp: In function 'int main()':    \nmain.cpp:102:34: error: no matching function for call to 'bind_tuple(std::tuple&lt;std::function&lt;void(double)&gt; &gt;&amp;, std::tuple&lt;double&gt;&amp;)'    \n     auto f_bound = bind_tuple(f,t);    \n                                  ^    \nmain.cpp:89:6: note: candidate: 'template&lt;class ... Fs, class ... Ts&gt; decltype (bind_tuple_impl(f, t, &lt;expression error&gt;)) bind_tuple(std::tuple&lt;_Tps ...&gt;, std::tuple&lt;_Elements ...&gt;)'    \n auto bind_tuple(std::tuple&lt;Fs...&gt; f, std::tuple&lt;Ts...&gt; t)    \n      ^~~~~~~~~~    \nmain.cpp:89:6: note:   template argument deduction/substitution failed:\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1545248439, "post_id": 53858005, "comment_id": 94563985, "body": "In the member initialiser list of your <code>DownloadManager</code> ctor try changing <code>m_manager(NULL)</code> to <code>m_manager(this)</code>."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 4, "creation_date": 1545249283, "post_id": 53858005, "comment_id": 94564367, "body": "Your bug is here <code>patcher.startPatching();</code> this forces the code to block the GUI. Make <code>startPatching()</code> a slot and emit a signal to that slot. Make sure your connection from your signal to this slot uses <code>Qt::QueuedConnection</code>."}, {"owner": {"reputation": 77, "user_id": 10812840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNcZadZq6Ys/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iPU6OOHMY1b5ddQmPHjEWkGTPPhA/mo/photo.jpg?sz=128", "display_name": "Rick", "link": "https://stackoverflow.com/users/10812840/rick"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545250213, "post_id": 53858005, "comment_id": 94564739, "body": "@drescherjm how would I create a connection.. I&#39;m assuming something like this... but not sure what that first parameter should be. connect(what goes here?, Qt::QueuedConnection, patcher, &amp;PatchManager::startPatching);"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545250358, "post_id": 53858005, "comment_id": 94564788, "body": "You could add a signal to MainWindow. Also <code>Qt::QueuedConnection</code> is the last parameter to connect()."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1545259579, "post_id": 53858005, "comment_id": 94568400, "body": "A way to call startPatching is to use invoke methode : <code>QMetaObject::invokeMethod(&amp;patcher, &quot;startPatching&quot;, Qt::QueuedConnection )</code>"}], "owner": {"reputation": 77, "user_id": 10812840, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lNcZadZq6Ys/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iPU6OOHMY1b5ddQmPHjEWkGTPPhA/mo/photo.jpg?sz=128", "display_name": "Rick", "link": "https://stackoverflow.com/users/10812840/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545247822, "creation_date": 1545247822, "question_id": 53858005, "link": "https://stackoverflow.com/questions/53858005/qt-downloadmanager-on-separate-thread-blocks-main-gui", "title": "Qt DownloadManager On Separate Thread Blocks Main GUI", "body": "<p>I'm trying to make a program patch system that doesn't block the main gui of my qt application. (This is just to play around with Qt). For testing sake, the PatchManager is set to run an infinite loop to make sure it doesn't block.</p>\n\n<p>I'm not understanding why my program is still blocking, even though my PatchManager/DownloadManager was sectioned off into a new thread (different from the GUI thread).</p>\n\n<p>Can anybody help me here? Here's my code...</p>\n\n<p><strong>downloadmanager.h</strong></p>\n\n<pre><code>#ifndef DOWNLOADMANAGER_H\n#define DOWNLOADMANAGER_H\n\n#include &lt;QObject&gt;\n#include &lt;QtCore&gt;\n#include &lt;QtNetwork&gt;\n\nclass DownloadManager : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit DownloadManager(\n            QObject* parent = nullptr);\n\n    void connectProgressSlot(\n            std::function&lt;void(qint64, qint64)&gt;&amp; progress_slot);\n\n    static bool isHttpRedirect(\n            QNetworkReply *reply);\n\nsignals:\n    void progressChanged(\n            const int&amp; current,\n            const int&amp; maximum);\n\npublic slots:\n    void startDownloading();\n    void downloadFinished(\n            QNetworkReply* reply);\n    void sslErrors(\n            const QList&lt;QSslError&gt; &amp;errors);\n\nprotected:\n    QQueue&lt;QString&gt; m_remaining_urls;\n\nprivate:\n    QNetworkAccessManager m_manager;\n    std::function&lt;void(qint64, qint64)&gt;* m_progress_slot;\n};\n\n#endif // DOWNLOADMANAGER_H\n</code></pre>\n\n<p><strong>downloadmanager.cpp</strong></p>\n\n<pre><code>#include \"downloadmanager.h\"\n\nDownloadManager::DownloadManager(\n        QObject* parent) :\n    QObject(parent),\n    m_manager(NULL),\n    m_progress_slot(NULL)\n{\n    connect(&amp;m_manager, SIGNAL(finished(QNetworkReply*)), SLOT(downloadFinished(QNetworkReply*)));\n}\n\nbool DownloadManager::isHttpRedirect(\n        QNetworkReply *reply)\n{\n    int statusCode = reply-&gt;attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();\n    return statusCode == 301 || statusCode == 302 || statusCode == 303\n           || statusCode == 305 || statusCode == 307 || statusCode == 308;\n}\n\nvoid DownloadManager::connectProgressSlot(\n        std::function&lt;void(qint64, qint64)&gt;&amp; progress_slot)\n{\n    m_progress_slot = &amp;progress_slot;\n}\n\nvoid DownloadManager::startDownloading()\n{\n    // Download the file at the top of the queue...\n    if(!m_remaining_urls.isEmpty())\n    {\n        QString download_url = m_remaining_urls.dequeue();\n\n        QNetworkRequest request(download_url);\n        QNetworkReply* reply = m_manager.get(request);\n\n        #if QT_CONFIG(ssl)\n            connect(reply, SIGNAL(sslErrors(QList&lt;QSslError&gt;)), SLOT(sslErrors(QList&lt;QSslError&gt;)));\n        #endif\n\n        if(m_progress_slot)\n        {\n            connect(reply, &amp;QNetworkReply::downloadProgress, *m_progress_slot);\n        }\n    }\n    else {\n        // FL: Emit download finished\n    }\n}\n\nvoid DownloadManager::downloadFinished(\n        QNetworkReply* reply)\n{\n    QUrl url = reply-&gt;url();\n    if (reply-&gt;error()) {\n        fprintf(stderr, \"Download of %s failed: %s\\n\",\n                url.toEncoded().constData(),\n                qPrintable(reply-&gt;errorString()));\n    } else {\n        if (isHttpRedirect(reply)) {\n            fputs(\"Request was redirected.\\n\", stderr);\n        } else {\n            //QString filename = saveFileName(url);\n            //if (saveToDisk(filename, reply)) {\n                qDebug() &lt;&lt; \"Download of \" &lt;&lt; url &lt;&lt; \"succeeded\";\n            //}\n        }\n    }\n\n    reply-&gt;deleteLater();\n\n    startDownloading();\n}\n\nvoid DownloadManager::sslErrors(\n        const QList&lt;QSslError&gt;&amp; errors)\n{\n#if QT_CONFIG(ssl)\n    for (const QSslError &amp;error : errors)\n        fprintf(stderr, \"SSL error: %s\\n\", qPrintable(error.errorString()));\n#else\n    Q_UNUSED(sslErrors);\n#endif\n}\n</code></pre>\n\n<p><strong>patchmanager.h</strong></p>\n\n<pre><code>#ifndef PATCHMANAGER_H\n#define PATCHMANAGER_H\n\n#include \"downloadmanager.h\"\n\nclass PatchManager : public DownloadManager\n{\npublic:\n    explicit PatchManager(\n            QObject* parent = 0);\n\n    void startPatching();\n\nsignals:\n    void progressChanged(\n            const int&amp; current,\n            const int&amp; maximum);\n\npublic slots:\n    void downloadFinished(\n            QNetworkReply* reply);\n\nprivate:\n    QVector&lt;QString&gt; m_files_to_download;\n};\n\n#endif // PATCHMANAGER_H\n</code></pre>\n\n<p><strong>patchmanager.cpp</strong></p>\n\n<pre><code>#include \"patchmanager.h\"\n\nPatchManager::PatchManager(\n        QObject* parent) :\n    DownloadManager(parent)\n{\n\n}\n\nvoid PatchManager::startPatching()\n{\n    // This loop should NOT block because we were placed into a different thread...\n    while(true)\n    {\n    // Just for testing, give sample URLs.\n    const QString patch_server_url = \"https://www.w3.org/\";\n    const QList&lt;QString&gt; files_to_patch = {\"TR/PNG/iso_8859-1.txt\"};\n\n    for(int i = 0; i &lt; files_to_patch.size(); i++)\n    {\n        m_remaining_urls.enqueue(patch_server_url + files_to_patch[i]);\n    }\n\n    startDownloading();\n    }\n}\n</code></pre>\n\n<p><strong>mainwindow.h</strong></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    explicit MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><strong>mainwindow.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n\n#include \"patchmanager.h\"\n\nint main(int argc, char *argv[])\n{   \n    QApplication a(argc, argv);\n\n    MainWindow w;\n    w.show();\n\n    PatchManager patcher;\n\n    QThread patch_thread;\n    patch_thread.start();\n\n    patcher.moveToThread(&amp;patch_thread);\n\n    patcher.startPatching();\n\n    return a.exec();\n}\n</code></pre>\n\n<p><strong>mainwindow.ui</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;ui version=\"4.0\"&gt;\n &lt;class&gt;MainWindow&lt;/class&gt;\n &lt;widget class=\"QMainWindow\" name=\"MainWindow\"&gt;\n  &lt;property name=\"geometry\"&gt;\n   &lt;rect&gt;\n    &lt;x&gt;0&lt;/x&gt;\n    &lt;y&gt;0&lt;/y&gt;\n    &lt;width&gt;526&lt;/width&gt;\n    &lt;height&gt;245&lt;/height&gt;\n   &lt;/rect&gt;\n  &lt;/property&gt;\n  &lt;property name=\"windowTitle\"&gt;\n   &lt;string&gt;MainWindow&lt;/string&gt;\n  &lt;/property&gt;\n  &lt;widget class=\"QWidget\" name=\"centralWidget\"&gt;\n   &lt;widget class=\"QPushButton\" name=\"pushButton\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;20&lt;/x&gt;\n      &lt;y&gt;160&lt;/y&gt;\n      &lt;width&gt;491&lt;/width&gt;\n      &lt;height&gt;21&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n    &lt;property name=\"text\"&gt;\n     &lt;string&gt;PushButton&lt;/string&gt;\n    &lt;/property&gt;\n   &lt;/widget&gt;\n   &lt;widget class=\"QPlainTextEdit\" name=\"plainTextEdit\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;20&lt;/x&gt;\n      &lt;y&gt;10&lt;/y&gt;\n      &lt;width&gt;491&lt;/width&gt;\n      &lt;height&gt;101&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n   &lt;/widget&gt;\n   &lt;widget class=\"QPlainTextEdit\" name=\"plainTextEdit_2\"&gt;\n    &lt;property name=\"geometry\"&gt;\n     &lt;rect&gt;\n      &lt;x&gt;20&lt;/x&gt;\n      &lt;y&gt;120&lt;/y&gt;\n      &lt;width&gt;491&lt;/width&gt;\n      &lt;height&gt;31&lt;/height&gt;\n     &lt;/rect&gt;\n    &lt;/property&gt;\n   &lt;/widget&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QMenuBar\" name=\"menuBar\"&gt;\n   &lt;property name=\"geometry\"&gt;\n    &lt;rect&gt;\n     &lt;x&gt;0&lt;/x&gt;\n     &lt;y&gt;0&lt;/y&gt;\n     &lt;width&gt;526&lt;/width&gt;\n     &lt;height&gt;20&lt;/height&gt;\n    &lt;/rect&gt;\n   &lt;/property&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QToolBar\" name=\"mainToolBar\"&gt;\n   &lt;attribute name=\"toolBarArea\"&gt;\n    &lt;enum&gt;TopToolBarArea&lt;/enum&gt;\n   &lt;/attribute&gt;\n   &lt;attribute name=\"toolBarBreak\"&gt;\n    &lt;bool&gt;false&lt;/bool&gt;\n   &lt;/attribute&gt;\n  &lt;/widget&gt;\n  &lt;widget class=\"QStatusBar\" name=\"statusBar\"/&gt;\n &lt;/widget&gt;\n &lt;layoutdefault spacing=\"6\" margin=\"11\"/&gt;\n &lt;resources/&gt;\n &lt;connections/&gt;\n&lt;/ui&gt;\n</code></pre>\n"}, {"tags": ["c++", "qt", "opengl", "selection", "framebuffer"], "comments": [{"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1545283972, "post_id": 53857935, "comment_id": 94573612, "body": "take a look at this <a href=\"https://stackoverflow.com/a/51764105/2521214\">OpenGL 3D-raypicking with high poly meshes</a> it might help a bit"}, {"owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "reply_to_user": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 0, "creation_date": 1545308707, "post_id": 53857935, "comment_id": 94584266, "body": "@Spektre thanks for the link! ;) I found out the (silly) mistake I was making. I explained it in the answer below."}, {"owner": {"reputation": 41485, "user_id": 2521214, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/nd58V.jpg?s=128&g=1", "display_name": "Spektre", "link": "https://stackoverflow.com/users/2521214/spektre"}, "edited": false, "score": 1, "creation_date": 1545315805, "post_id": 53857935, "comment_id": 94588069, "body": "Heh I did exactly the same one before :) took me a while to spot it ..."}], "answers": [{"tags": [], "owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "is_accepted": true, "score": 0, "last_activity_date": 1545308673, "creation_date": 1545308673, "answer_id": 53868648, "question_id": 53857935, "link": "https://stackoverflow.com/questions/53857935/opengl-object-selection/53868648#53868648", "title": "OpenGL : object selection", "body": "<p>I discovered the (silly) mistake I was making.</p>\n\n<p>The pixel coordinates returned by <a href=\"http://doc.qt.io/qt-5/qmouseevent.html#pos\" rel=\"nofollow noreferrer\">QMouseEvent::pos()</a> start at the upper left corner, while those accepted by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glReadPixels.xhtml\" rel=\"nofollow noreferrer\">glReadPixels</a> start at the lower left corner.</p>\n\n<p>So, changing the call to <code>glReadPixels</code> in <code>mousePressEvent</code> this way</p>\n\n<pre><code>glReadPixels(lastX, geometry().height() - lastY, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, &amp;(pixel[0]));\n</code></pre>\n\n<p>solved the problem.</p>\n"}], "owner": {"reputation": 479, "user_id": 7576339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07e1c1e72ce01b67cd9055df7db5e3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Arctic Pi", "link": "https://stackoverflow.com/users/7576339/arctic-pi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 786, "favorite_count": 0, "accepted_answer_id": 53868648, "answer_count": 1, "score": -3, "last_activity_date": 1545314738, "creation_date": 1545247450, "last_edit_date": 1545314738, "question_id": 53857935, "link": "https://stackoverflow.com/questions/53857935/opengl-object-selection", "title": "OpenGL : object selection", "body": "<p>I'm trying to implement object selection in OpenGL, but I have some problems.</p>\n\n<p><a href=\"https://i.stack.imgur.com/2eEwv.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2eEwv.gif\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see from the figure, the selection works well in the first view, but when you rotate the camera, the object is not selected correctly.</p>\n\n<p>I implemented the selection this way. At the click of the mouse, I draw the scene in a framebuffer, each object depicted with a different color (and also different from the background color), and then check if the pixel clicked has the color of some objects.</p>\n\n<p>These are the relevant code snippets.</p>\n\n<pre><code>struct CubeData\n{\n    QMatrix4x4 model;\n    bool selected;\n};\n\nQMap&lt;QString, CubeData&gt; cubes;\n</code></pre>\n\n<p><strong>initializeGL</strong></p>\n\n<pre><code>void initializeGL()\n{\n    /* ... */\n\n    auto FindColor = [=] ()\n    {\n        QVector&lt;GLubyte&gt; color;\n        bool flag = true;\n\n        while (flag)\n        {\n            color = RandomColor();\n            flag = false;\n\n            if (color == RgbFromColorToByte(background))\n            {\n                flag = true;\n                continue;\n            }\n\n            if (cubes.contains(RgbFromByteToString(color)))\n            {\n                flag = true;\n                continue;\n            }\n        }\n\n        return color;\n    };\n\n    // cubes\n    float offset = 3.0f;\n    float x = -1.0f;\n    while (cubes.size() &lt; 3)\n    {\n        CubeData cube;\n        cube.model.translate(x++ * offset, 0, 0);\n        cube.selected = false;\n        auto color = FindColor();\n        cubes[RgbFromByteToString(color)] = cube;\n    }\n}\n</code></pre>\n\n<p><strong>paintGL</strong></p>\n\n<pre><code>void paintGL()\n{\n    /* ... */\n\n    // enable depth test\n    glEnable(GL_DEPTH_TEST);\n    // clear buffers\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    // draw cubes\n    for (auto cube : cubes)\n    {\n        DrawCube(cube);\n    }\n\n    update();\n}\n</code></pre>\n\n<p><strong>mousePressEvent</strong></p>\n\n<pre><code>void mousePressEvent(QMouseEvent *event)\n{\n    if (event-&gt;button() == Qt::LeftButton)\n    {\n        makeCurrent();\n        glBindFramebuffer(GL_FRAMEBUFFER, addFBO(FBOIndex::TEST));\n        {\n            // enable depth test\n            glEnable(GL_DEPTH_TEST);\n            // clear buffers\n            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n            // draw test cubes\n            DrawTest();\n\n            // test pixel\n\n            QVector&lt;GLubyte&gt; pixel;\n            pixel.resize(3);\n\n            glReadPixels(lastX, lastY, 1, 1, GL_RGB, GL_UNSIGNED_BYTE, &amp;(pixel[0]));\n\n            for (auto key : cubes.keys())\n            {\n                cubes[key].selected = false;\n            }\n\n            QString key = RgbFromByteToString(pixel);\n            if (cubes.contains(key))\n            {\n                cubes[key].selected = true;\n            }\n        }\n        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebufferObject());\n        doneCurrent();\n    }\n}\n</code></pre>\n\n<p><strong>DrawCube</strong></p>\n\n<pre><code>void DrawCube(CubeData cube)\n{\n    GLuint program = addProgram(ProgramIndex::CUBE);\n    glUseProgram(program);\n\n    glUniformMatrix4fv(glGetUniformLocation(program, \"model\"), 1, GL_FALSE, cube.model.constData());\n    glUniformMatrix4fv(glGetUniformLocation(program, \"view\"), 1, GL_FALSE, view.constData());\n    glUniformMatrix4fv(glGetUniformLocation(program, \"projection\"), 1, GL_FALSE, projection.constData());\n\n    glUniform1i(glGetUniformLocation(program, \"cube.selected\"), cube.selected);\n\n    glDrawArrays(GL_POINTS, 0, 1);\n}\n</code></pre>\n\n<p><strong>DrawTest</strong></p>\n\n<pre><code>void DrawTest()\n{\n    GLuint program = addProgram(ProgramIndex::TEST);\n    glUseProgram(program);\n\n    glUniformMatrix4fv(glGetUniformLocation(program, \"view\"), 1, GL_FALSE, view.constData());\n    glUniformMatrix4fv(glGetUniformLocation(program, \"projection\"), 1, GL_FALSE, projection.constData());\n\n    for (auto key : cubes.keys())\n    {\n        glUniformMatrix4fv(glGetUniformLocation(program, \"model\"), 1, GL_FALSE, cubes[key].model.constData());\n        glUniform3fv(glGetUniformLocation(program, \"cube.TestColor\"), 1, RgbFromStringToFloat(key).constData());\n\n        glDrawArrays(GL_POINTS, 0, 1);\n    }\n}\n</code></pre>\n\n<p><strong>cube geometry shader</strong></p>\n\n<pre><code>#version 450 core\n\nstruct Cube\n{\n    bool selected;\n};\n\nlayout (points) in;\nlayout (triangle_strip, max_vertices = 14) out;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nuniform Cube cube;\n\nout FragData\n{\n    smooth vec3 color;\n} frag;\n\nvoid main()\n{\n    vec3 offset[14];\n    offset[0x0] = vec3(-1.0f, +1.0f, +1.0f);\n    offset[0x1] = vec3(+1.0f, +1.0f, +1.0f);\n    offset[0x2] = vec3(-1.0f, -1.0f, +1.0f);\n    offset[0x3] = vec3(+1.0f, -1.0f, +1.0f);\n    offset[0x4] = vec3(+1.0f, -1.0f, -1.0f);\n    offset[0x5] = vec3(+1.0f, +1.0f, +1.0f);\n    offset[0x6] = vec3(+1.0f, +1.0f, -1.0f);\n    offset[0x7] = vec3(-1.0f, +1.0f, +1.0f);\n    offset[0x8] = vec3(-1.0f, +1.0f, -1.0f);\n    offset[0x9] = vec3(-1.0f, -1.0f, +1.0f);\n    offset[0xA] = vec3(-1.0f, -1.0f, -1.0f);\n    offset[0xB] = vec3(+1.0f, -1.0f, -1.0f);\n    offset[0xC] = vec3(-1.0f, +1.0f, -1.0f);\n    offset[0xD] = vec3(+1.0f, +1.0f, -1.0f);\n\n    mat4 MVP = projection * view * model;\n\n    vec3 albedo = cube.selected ? vec3(1.0f, 0.0f, 0.0f) : vec3(1.0f);\n    // grayscale weights\n    vec3 weight = vec3(0.2126f, 0.7152f, 0.0722f);\n    // shade power\n    float power = 0.5f;\n\n    for (int i = 0; i &lt; 14; i++)\n    {\n        gl_Position = MVP * vec4(offset[i], 1.0f);\n\n        float shade = dot((normalize(offset[i]) + 1.0f) * 0.5f, weight);\n        frag.color = albedo * (shade + (1.0f - shade) * power);\n\n        EmitVertex();\n    }\n\n    EndPrimitive();\n}\n</code></pre>\n\n<p><strong>test geometry shader</strong></p>\n\n<pre><code>#version 450 core\n\nstruct Cube\n{\n    vec3 TestColor;\n};\n\nlayout (points) in;\nlayout (triangle_strip, max_vertices = 14) out;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nuniform Cube cube;\n\nout FragData\n{\n    flat vec3 color;\n} frag;\n\nvoid main()\n{\n    vec3 offset[14];\n    offset[0x0] = vec3(-1.0f, +1.0f, +1.0f);\n    offset[0x1] = vec3(+1.0f, +1.0f, +1.0f);\n    offset[0x2] = vec3(-1.0f, -1.0f, +1.0f);\n    offset[0x3] = vec3(+1.0f, -1.0f, +1.0f);\n    offset[0x4] = vec3(+1.0f, -1.0f, -1.0f);\n    offset[0x5] = vec3(+1.0f, +1.0f, +1.0f);\n    offset[0x6] = vec3(+1.0f, +1.0f, -1.0f);\n    offset[0x7] = vec3(-1.0f, +1.0f, +1.0f);\n    offset[0x8] = vec3(-1.0f, +1.0f, -1.0f);\n    offset[0x9] = vec3(-1.0f, -1.0f, +1.0f);\n    offset[0xA] = vec3(-1.0f, -1.0f, -1.0f);\n    offset[0xB] = vec3(+1.0f, -1.0f, -1.0f);\n    offset[0xC] = vec3(-1.0f, +1.0f, -1.0f);\n    offset[0xD] = vec3(+1.0f, +1.0f, -1.0f);\n\n    mat4 MVP = projection * view * model;\n\n    for (int i = 0; i &lt; 14; i++)\n    {\n        gl_Position = MVP * vec4(offset[i], 1.0f);\n        frag.color = cube.TestColor;\n        EmitVertex();\n    }\n\n    EndPrimitive();\n}\n</code></pre>\n\n<p>I also tried to view the entire test framebuffer by saving its contents in PPM format, but this is what I get.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qymbU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qymbU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's how I generated the PPM image.</p>\n\n<p><strong>mousePressEvent</strong></p>\n\n<pre><code>void mousePressEvent(QMouseEvent *event)\n{\n    if (event-&gt;button() == Qt::LeftButton)\n    {\n        makeCurrent();\n        glBindFramebuffer(GL_FRAMEBUFFER, addFBO(FBOIndex::TEST));\n        {\n            /* ... */\n\n            int w = geometry().width();\n            int h = geometry().height();\n\n            QVector&lt;GLubyte&gt; frame;\n            frame.resize(w * h * 3);\n\n            glReadPixels(0, 0, w, h, GL_RGB, GL_UNSIGNED_BYTE, &amp;(frame[0]));\n\n            QString name = \"test.ppm\";\n            QFile file(name);\n            file.open(QIODevice::WriteOnly);\n            {\n                QTextStream stream(&amp;file);\n                stream &lt;&lt; \"P3\" &lt;&lt; endl;\n                stream &lt;&lt; w &lt;&lt; \" \" &lt;&lt; h &lt;&lt; endl;\n                stream &lt;&lt; \"255\" &lt;&lt; endl;\n\n                int i = 0;\n                QVector&lt;GLubyte&gt; pixel;\n\n                while (!(pixel = frame.mid(i++ * 3, 3)).isEmpty())\n                {\n                    stream &lt;&lt; pixel[0] &lt;&lt; \" \" &lt;&lt; pixel[1] &lt;&lt; \" \" &lt;&lt; pixel[2] &lt;&lt; endl;\n                }\n            }\n            file.close();\n        }\n        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebufferObject());\n        doneCurrent();\n    }\n}\n</code></pre>\n\n<p>Thanks for any suggestion.</p>\n"}, {"tags": ["c++", "memory-leaks", "linked-list", "valgrind", "doubly-linked-list"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1545247790, "post_id": 53857931, "comment_id": 94563746, "body": "What catches the eye is the violation of the rule of three."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1545247868, "post_id": 53857931, "comment_id": 94563765, "body": "IOW, you are missing a copy constructor and copy assignment operator.  And in fact, this code is clearly using C++11 or later, so you need to follow the rule of five, which includes adding a move constructor and move assignment operator as well."}, {"owner": {"reputation": 617, "user_id": 8334739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da68d0fab50ac2fe0a3ed321d3161a03?s=128&d=identicon&r=PG&f=1", "display_name": "claytonjwong", "link": "https://stackoverflow.com/users/8334739/claytonjwong"}, "edited": false, "score": 2, "creation_date": 1545247955, "post_id": 53857931, "comment_id": 94563800, "body": "Maybe use smart pointers instead of raw pointers?  Or use the std::list instead of implementing your own doubly linked list?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545248059, "post_id": 53857931, "comment_id": 94563842, "body": "One of the best ways to grasp the linked list (or any other pointer-driven structure) is to draw pictures. Draw what you want the list to look like. If you find yourself drawing stuff you didn&#39;t code, that&#39;s a bug. Then follow your code to the letter and try to draw the same list. If you can&#39;t, that&#39;s a bug and you probably know where it is."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1545248086, "post_id": 53857931, "comment_id": 94563851, "body": "@Slava &quot;<i>Now look into your code - do you do all 3 things? No you do not</i>&quot; - actually, it does."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545248454, "post_id": 53857931, "comment_id": 94563990, "body": "Could we trouble you for a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I recommend focusing the MCVE on one of <code>push_back</code> or <code>push_front</code> because the solution for one will likely apply to the other."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545253631, "post_id": 53857931, "comment_id": 94566125, "body": "@JanVanke your use of <code>this-&gt;~list();</code> inside of <code>operator=(list&amp;&amp;)</code> is illegal. You can&#39;t call a destructor explicitly like that, unless you use <a href=\"https://en.cppreference.com/w/cpp/language/new#Placement_new\" rel=\"nofollow noreferrer\">placement-new</a> to allocate the object being destroyed (which you are not doing). If you want to clear the list explicitly, implement a <code>clear()</code> method for that purpose, which you can then call when needed, like inside of <code>~list</code> and <code>operator=</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545253635, "post_id": 53857931, "comment_id": 94566127, "body": "@JanVanke However, after adding the new code to your question, you haven&#39;t indicated whether the memory leak is still occurring or not. And you still have not provided any code showing how you are using your <code>list</code> class in the rest of your project. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that produces a memory leak."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545253734, "post_id": 53858316, "comment_id": 94566170, "body": "Since this code is using C++11 or later, it should really follow the Rule of Five instead."}], "tags": [], "owner": {"reputation": 423, "user_id": 9746273, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c9hgs.png?s=128&g=1", "display_name": "L. Kue", "link": "https://stackoverflow.com/users/9746273/l-kue"}, "is_accepted": false, "score": 0, "last_activity_date": 1545249272, "creation_date": 1545249272, "answer_id": 53858316, "question_id": 53857931, "link": "https://stackoverflow.com/questions/53857931/c-memory-leak-in-linked-list-push-front-and-push-back/53858316#53858316", "title": "C++ memory leak in linked-list push_front and push_back", "body": "<p>Maybe this will help you:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass List {\nprivate:\n    Node&lt;T&gt;* head = nullptr;\n    Node&lt;T&gt;* tail = nullptr;\n\n    std::size_t _size = 0;\n\npublic:\n\n    List() = default;\n\n    // copy constructor\n    List(const List&lt;T&gt;&amp; l) {\n        _size = l._size;\n        Node&lt;T&gt;* current = nullptr;\n        Node&lt;T&gt;* previous = nullptr;\n        for (std::size_t i = 0; i &lt; l._size; ++i) {\n            current = new Node&lt;T&gt;(l[i].data);\n            current-&gt;prev = previous;\n            if (previous) {\n                previous-&gt;next = current;\n            } else {\n                head = current;\n            }\n            previous = current;\n        }\n        tail = current;\n    }\n\n    // assignment operator\n    List&lt;T&gt;&amp; operator=(const List&lt;T&gt;&amp; l) {\n        if (l.isEmpty()) {\n            this-&gt;clear();\n            return *this;\n        }\n\n        // keeps existing nodes intact, and only changes their value\n        while (_size &gt; l.size()) {\n            Node&lt;T&gt;* prev = tail-&gt;prev;\n            delete tail;\n            prev-&gt;next = nullptr;\n            tail = prev;\n            --_size;\n        }\n\n        Node&lt;T&gt;* temp = head;\n        Node&lt;T&gt;* tempL = l.head;\n        for (std::size_t i = 0; i &lt; _size; ++i) {\n            temp-&gt;data = tempL-&gt;data;\n            temp = temp-&gt;next;\n            tempL = tempL-&gt;next;\n        }\n\n        while (_size &lt; l._size) {\n            this-&gt;append(tempL-&gt;data);\n            tempL = tempL-&gt;next;\n            ++_size;\n        }\n\n        return *this;\n    }\n\n    ~List() {\n        Node&lt;T&gt;* temp = head;\n        while (temp) {\n            Node&lt;T&gt;* next = temp-&gt;next;\n            delete temp;\n            temp = next;\n        }\n    }\n\n    void append(const T&amp; value) {\n        auto* temp = new Node&lt;T&gt;(value);\n        if (!head) {\n            // no head also means no tail\n            head = temp;\n            tail = temp;\n        } else {\n            tail-&gt;next = temp;\n            temp-&gt;prev = tail;\n            tail = temp;\n        }\n        ++_size;\n    }\n\n    void prepend(const T&amp; value) {\n        auto* temp = new Node&lt;T&gt;(value);\n        temp-&gt;next = head;\n        if (head) {\n            head-&gt;prev = temp;\n        }\n        head = temp;\n        ++_size;\n    }\n};\n</code></pre>\n\n<p>That said, you should probably follow the Rule of Three and implement a copy constructor and assignment operator.</p>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1545253724, "post_id": 53858332, "comment_id": 94566164, "body": "@WhozCraig done"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1545253132, "last_edit_date": 1545253132, "creation_date": 1545249346, "answer_id": 53858332, "question_id": 53857931, "link": "https://stackoverflow.com/questions/53857931/c-memory-leak-in-linked-list-push-front-and-push-back/53858332#53858332", "title": "C++ memory leak in linked-list push_front and push_back", "body": "<p>I see nothing in the code you have shown that leaks, but you have not shown all of your relevant code.</p>\n\n<p>For instance, HOW you use <code>list</code> objects may be contributing to the cause of the leak.  For instance, if you are not following the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Rule of 3/5/0</a> by implementing proper copy and move constructors, and copy and move assignment operators, then you can leak memory when copying/moving <code>list</code> objects.  But you did not show that code, so we can't tell if you are doing things correctly or not.</p>\n\n<p>That being said, your destructor does have an extra <code>delete</code> that does not belong, and your <code>push_back()</code> and <code>push_front()</code> methods can be simplified.</p>\n\n<p>The safest option is to simply use <a href=\"https://en.cppreference.com/w/cpp/container/list\" rel=\"nofollow noreferrer\"><code>std::list</code></a> and let it manage memory for you.  But, if you want to do it manually, then try this:</p>\n\n<pre><code>class list\n{\nprivate:\n    struct node\n    {\n        double val;\n        node* prev = nullptr;\n        node* next = nullptr;\n\n        node(double value = 0) : val(value) {}\n    };\n\n    node* head = nullptr;\n    node* tail = nullptr;\n    size_t num_elements = 0;\n\npublic:\n    list() = default;\n    list(const list &amp;src);\n    list(list &amp;&amp;src);\n    ~list();\n\n    list&amp; operator=(const list &amp;rhs);\n    list&amp; operator=(list &amp;&amp;rhs);\n\n    void push_back(double elem);\n    void push_front(double elem);\n\n    void swap(list &amp;other)\n};\n</code></pre>\n\n<p></p>\n\n<pre><code>list::list(const list &amp;src)\n    : list()\n{\n    for(node *n = src.head; n != nullptr; n = n-&gt;next)\n        push_back(n-&gt;val);\n}\n\nlist::list(list &amp;&amp;src)\n    : list()\n{\n    src.swap(*this);\n}\n\nlist::~list()\n{\n    node *n = head;\n    while (n)\n    {\n        node *next = n-&gt;next;\n        delete n;\n        n = next;\n    }\n}\n\nlist&amp; list::operator=(const list &amp;rhs)\n{\n    if (this != &amp;rhs)\n        list(rhs).swap(*this);\n    return *this;\n}\n\nlist&amp; operator=(list &amp;&amp;rhs)\n{\n    list(std::move(rhs)).swap(*this);\n    return *this;\n}\n\nvoid list::push_back(double elem)\n{\n    node *n = new node(elem);\n    if (tail)\n    {\n        tail-&gt;next = n;\n        n-&gt;prev = tail;\n    }\n    else\n        head = n;\n    tail = n;\n    ++num_elements;\n}\n\nvoid list::push_front(double elem)\n{\n    node *n = new node(elem);\n    if (head)\n    {\n        head-&gt;prev = n;\n        n-&gt;next = head;\n    }\n    else\n        tail = n;\n    head = n;\n    ++num_elements;\n}\n\nvoid list::swap(list &amp;other)\n{\n    std::swap(head, other.head);\n    std::swap(tail, other.tail);\n    std::swap(num_elements, other.num_elements);\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9752394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jan Vanke", "link": "https://stackoverflow.com/users/9752394/jan-vanke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 0, "closed_date": 1545253424, "accepted_answer_id": 53858332, "answer_count": 2, "score": -3, "last_activity_date": 1545253132, "creation_date": 1545247443, "last_edit_date": 1545249933, "question_id": 53857931, "link": "https://stackoverflow.com/questions/53857931/c-memory-leak-in-linked-list-push-front-and-push-back", "closed_reason": "Not suitable for this site", "title": "C++ memory leak in linked-list push_front and push_back", "body": "<p>I'm getting this memory leak error by valgrind:</p>\n\n<pre><code> 24 bytes in 1 blocks are definitely lost in loss record 1 of 11        \n at 0x4C2C21F: operator new(unsigned long) (vg_replace_malloc.c:334)\n   by 0x413E47: pjc::list::push_back(double) (list.cpp:33)\n   by 0x416371: ____C_A_T_C_H____T_E_S_T____4() (tests-list-01.cpp:86)\n\n24 bytes in 1 blocks are definitely lost in loss record 2 of 11\n   at 0x4C2C21F: operator new(unsigned long) (vg_replace_malloc.c:334)\n   by 0x414047: pjc::list::push_front(double) (list.cpp:66)\n   by 0x4192C1: ____C_A_T_C_H____T_E_S_T____10() (tests-list-01.cpp:146)\n</code></pre>\n\n<p>My <code>.hpp</code> file for linked list looks like this:</p>\n\n<pre><code>using std::size_t;\n\nnamespace pjc {\n\nclass list {\nprivate:\n    struct node {\n        double val = 0;\n        node* prev = nullptr;\n        node* next = nullptr;\n    };\n\n    node* head = nullptr;\n    node* tail = nullptr;\n    size_t num_elements = 0;\n\npublic:\n    list() = default;\n    list(const list&amp; rhs);\n    list&amp; operator=(const list&amp; rhs);\n    list(list&amp;&amp; rhs);\n    list&amp; operator=(list&amp;&amp; rhs);\n    ~list();\n\n    void push_back(double elem);\n\n    void push_front(double elem); \n};\n</code></pre>\n\n<p>And definitions of <code>push_back()</code>, <code>push_front()</code> and the destructor of the linked-list look like this:</p>\n\n<pre><code>list::list(const list &amp;rhs) {\n    head = tail = nullptr;\n    for(node* tmp = rhs.head; tmp!=NULL; tmp=tmp-&gt;next) {\n        push_back(tmp-&gt;val);\n    }\n    num_elements = rhs.num_elements;\n}\n\nlist::~list() {\n    node *T = head;\n    while(T != nullptr)\n    {\n        node *T2 = T;\n        T = T-&gt;next;\n        delete T2;\n    }\n    head = nullptr;\n    tail = nullptr;\n    num_elements = 0;\n}\n\nvoid list::push_back(double elem) {\n    node *n = new node;\n    n-&gt;val = elem;\n    if(tail == nullptr)\n    {\n        head = n;\n        tail = head;\n    }\n    else\n    {\n        tail-&gt;next = n;\n        n-&gt;prev = tail;\n        tail = n;\n    }\n    num_elements++;\n}\n\nvoid list::push_front(double elem) {\n    node *n = new node;\n    n-&gt;val = elem;\n    if(head == nullptr)\n    {\n        head = n;\n        tail = head;\n    }\n    else\n    {\n        head-&gt;prev = n;\n        n-&gt;next = head;\n        head = n;\n    }\n    num_elements++;\n}\nlist &amp;list::operator=(const list &amp;rhs) {\n    list temp(rhs);\n    std::swap(head, temp.head);\n    std::swap(tail, temp.tail);\n    std::swap(num_elements, temp.num_elements);\n    return *this;\n}\n\nlist::list(list &amp;&amp;rhs) {\n    head = rhs.head;\n    tail = rhs.tail;\n    num_elements = rhs.num_elements;\n\n    rhs.head = nullptr;\n    rhs.tail = nullptr;\n    rhs.num_elements = 0;\n}\n\nlist &amp;list::operator=(list &amp;&amp;rhs) {\n    this-&gt;~list(); // Destroy our current contents\n    std::swap(head, rhs.head);\n    std::swap(tail, rhs.tail);\n    std::swap(num_elements, rhs.num_elements);\n    return *this;\n}\n</code></pre>\n\n<p>I tried to change the destructor, but it seem to be OK. I really don't have and ideas whatsoever where the leak happens.</p>\n\n<p>EDIT: Sorry, i left out some important parts of the code for the first time. Now it should follow the rule of 5. </p>\n"}, {"tags": ["c++", "mongodb", "cmake", "c++14", "mongo-cxx-driver"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545248894, "post_id": 53857863, "comment_id": 94564197, "body": "The error message doesn&#39;t correspond to the <code>CMakeLists.txt</code> you show. Using <code>find_package</code> you search for &quot;libbsoncxx&quot;, but the error message corresponds to searched package &quot;libbsoncxx-static&quot;. Please, show the <b>actual code</b> and the <b>error message</b> it produces."}, {"owner": {"reputation": 11, "user_id": 8771907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyyc.png?s=128&g=1", "display_name": "ugitho", "link": "https://stackoverflow.com/users/8771907/ugitho"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545253166, "post_id": 53857863, "comment_id": 94565919, "body": "Thank you for you comment. I&#39;ve updated the error message."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545291463, "post_id": 53857863, "comment_id": 94575954, "body": "<a href=\"https://github.com/EOSIO/eos/issues/966#issuecomment-352666948\" rel=\"nofollow noreferrer\">They said</a> <code>libbsoncxx</code> is a part of MongoDB. Probably, you need to hint CMake about MongoDB installation directory, e.g. by setting <code>CMAKE_PREFIX_PATH</code> <i>environment</i> variable to <code>${Devfolder}&#47;sdk&#47;mongodb</code>. If this doesn&#39;t help, try to find one of the files, listed in the error message (<code>libbsoncxxConfig.cmake</code> or <code>libbsoncxx-config.cmake</code>) under your MongoDB installation directory."}, {"owner": {"reputation": 11, "user_id": 8771907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyyc.png?s=128&g=1", "display_name": "ugitho", "link": "https://stackoverflow.com/users/8771907/ugitho"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545300239, "post_id": 53857863, "comment_id": 94580110, "body": "Adding   set(CMAKE_PREFIX_PATH ${Devfolser}sdk/mongodb)   and trying to logs: message(&quot;LIBMONGOCXX_INCLUDE_DIRS = ${LIBMONGOCXX_INCLUDE_DIRS}&quot;) message(&quot;LIBMONGOCXX_LIBRARIES = ${LIBMONGOCXX_LIBRARIES}&quot;)   message(&quot;LIBBSONCXX_INCLUDE_DIRS = ${LIBBSONCXX_INCLUDE_DIRS}&quot;) message(&quot;LIBBSONCXX_LIBRARIES = ${LIBBSONCXX_LIBRARIES}&quot;)  but apparently, it doesn&#39;t work:"}, {"owner": {"reputation": 11, "user_id": 8771907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyyc.png?s=128&g=1", "display_name": "ugitho", "link": "https://stackoverflow.com/users/8771907/ugitho"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545300514, "post_id": 53857863, "comment_id": 94580249, "body": "LIBMONGOCXX_INCLUDE_DIRS = ${Devfolder}/sdk/mongodb/include/mongocxx/v_noabi;${Devfolde&zwnj;&#8203;r}/sdk/mongodb/inclu&zwnj;&#8203;de/bsoncxx/v_noabi LIBMONGOCXX_LIBRARIES = LIBMONGOCXX_LIBRARY_PATH-NOTFOUND;LIBBSONCXX_LIBRARY_PATH-NO&zwnj;&#8203;TFOUND LIBBSONCXX_INCLUDE_DIRS = ${Devfolder}/sdk/mongodb/include/bsoncxx/v_noabi LIBBSONCXX_LIBRARIES = LIBBSONCXX_LIBRARY_PATH-NOTFOUND"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545301846, "post_id": 53857863, "comment_id": 94580908, "body": "Comments a badly suited for multiline code. Better, update the question post with additional info. So, setting <code>CMAKE_PREFIX_PATH</code> helps at least partially - it finds include directories, but not the libraries. BTW, in your original code you use <code>LIBMONGOCXX_STATIC_LIBRARIES</code> - probably, you should examine value of that variable instead of <code>LIBMONGOCXX_LIBRARIES</code> one. (I don&#39;t know which variable should be used actually)."}, {"owner": {"reputation": 11, "user_id": 8771907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyyc.png?s=128&g=1", "display_name": "ugitho", "link": "https://stackoverflow.com/users/8771907/ugitho"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545303204, "post_id": 53857863, "comment_id": 94581588, "body": "Sorry @Tsyvarev! I updated the CmakeLists.txt and the logs."}, {"owner": {"reputation": 1072, "user_id": 774658, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90141eaca871b4745eb99bd2f18fb858?s=128&d=identicon&r=PG", "display_name": "kevinAlbs", "link": "https://stackoverflow.com/users/774658/kevinalbs"}, "edited": false, "score": 0, "creation_date": 1546363675, "post_id": 53857863, "comment_id": 94832156, "body": "For future reference, after you added the <code>CMAKE_PREFIX_PATH</code> but still got the linker error: <code>unable to find library -lbsoncxx</code>, this was because the linker did not know the path to bsoncxx. You could have used the <code>{LIBBSON_CXX_LINKER}</code> variable, which includes the absolute path <a href=\"https://cmake.org/cmake/help/latest/module/FindPkgConfig.html?highlight=s\" rel=\"nofollow noreferrer\">see here</a>. That being said, using <code>find_package</code> as you did, seems preferable to using PkgConfig anyway."}], "owner": {"reputation": 11, "user_id": 8771907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qeyyc.png?s=128&g=1", "display_name": "ugitho", "link": "https://stackoverflow.com/users/8771907/ugitho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1546000851, "creation_date": 1545247158, "last_edit_date": 1546000851, "question_id": 53857863, "link": "https://stackoverflow.com/questions/53857863/mongodb-c-driver-on-ubuntu", "title": "mongodb c++ driver on ubuntu", "body": "<p>I am trying to test mongodb c++ driver on Ubuntu 16.04.</p>\n\n<p>The driver is installed in <code>${Devfolder}/sdk/mongodb/</code>\nand the test is in <code>${Devfolder}/testMongoDb/</code>.</p>\n\n<p>The code was compliled and tested using:</p>\n\n<pre><code>export PKG_CONFIG_PATH=${Devfolder}/sdk/mongodb/lib/pkgconfig\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${Devfolder}/sdk/mongodb/lib\nc++ --std=c++11 test.cpp -o test $(pkg-config --cflags --libs libmongocxx)\n</code></pre>\n\n<p>Then I want to use mongodb driver in my CMake project.</p>\n\n<pre><code>ugitho@ugitho:projects$ tree -L 3\n.\n\u251c\u2500\u2500 sdk\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 mongodb\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 bin\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 include\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 lib\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 share\n\u251c\u2500\u2500 testMongo\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 a.out\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeCache.txt\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeFiles\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cmake_install.cmake\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 cmongodb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 Makefile\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 CMakeLists.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 test\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 test.cpp\n</code></pre>\n\n<p>But I got the following error:</p>\n\n<pre><code>    ugitho@ugitho:build$ cmake ..\n    LIBMONGOCXX_INCLUDE_DIRS = /home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/mongocxx/v_noabi;/home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/bsoncxx/v_noabi\n    LIBMONGOCXX_LIBRARIES = LIBMONGOCXX_LIBRARY_PATH-NOTFOUND;LIBBSONCXX_LIBRARY_PATH-NOTFOUND\n    LIBBSONCXX_INCLUDE_DIRS = /home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/bsoncxx/v_noabi\n    LIBBSONCXX_LIBRARIES = LIBBSONCXX_LIBRARY_PATH-NOTFOUND\n    CMake Error: The following variables are used in this project, but they are set to NOTFOUND.\n    Please set them or make sure they are set and tested correctly in the CMake files:\n    LIBBSONCXX_LIBRARY_PATH\n        linked by target \"cmongodb\" in directory \n/home/ugitho/NGUYENKHAC/projects/testMongoDb\n        linked by target \"cmongodb\" in directory \n/home/ugitho/NGUYENKHAC/projects/testMongoDb\n    LIBMONGOCXX_LIBRARY_PATH\n        linked by target \"cmongodb\" in directory \n/home/ugitho/NGUYENKHAC/projects/testMongoDb\n\n    -- Configuring incomplete, errors occurred!\n    See also \"/home/ugitho/NGUYENKHAC/projects/testMongoDb/build/CMakeFiles/CMakeOutput.log\".\n</code></pre>\n\n<p>edited*:</p>\n\n<p>Here are <code>CMakeLists.txt</code> and <code>test.cpp</code>.</p>\n\n<p><strong>CMakeLists.txt</strong>:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(cmongodb)\n\nset(CMAKE_CXX_STANDARD 14)\n\nset(CMAKE_PREFIX_PATH /home/ugitho/NGUYENKHAC/projects/sdk/mongodb)\n\n#find_package(libmongocxx REQUIRED)\n#find_package(libbsoncxx REQUIRED)\n\nfind_package(PkgConfig REQUIRED)\n\npkg_check_modules(LIBMONGOCXX REQUIRED libmongocxx)\npkg_check_modules(LIBBSONCXX REQUIRED libbsoncxx)\nmessage(\"LIBMONGOCXX_INCLUDE_DIRS = ${LIBMONGOCXX_INCLUDE_DIRS}\")\nmessage(\"LIBMONGOCXX_LIBRARIES = ${LIBMONGOCXX_LIBRARIES}\")\n\nmessage(\"LIBBSONCXX_INCLUDE_DIRS = ${LIBBSONCXX_INCLUDE_DIRS}\")\nmessage(\"LIBBSONCXX_LIBRARIES = ${LIBBSONCXX_LIBRARIES}\")\n\nset(COMMON_LIBRARIES ${LIBMONGOCXX_LIBRARIES} ${LIBBSONCXX_LIBRARIES})\n\nset(SOURCE_FILES test.cpp)\n\nadd_executable(cmongodb ${SOURCE_FILES})\ntarget_include_directories(cmongodb PUBLIC ${LIBMONGOCXX_INCLUDE_DIRS})\ntarget_include_directories(cmongodb PUBLIC ${LIBBSONCXX_INCLUDE_DIRS})\ntarget_link_libraries(cmongodb ${COMMON_LIBRARIES})\n</code></pre>\n\n<p><strong>test.cpp</strong>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;bsoncxx/builder/stream/document.hpp&gt;\n#include &lt;bsoncxx/json.hpp&gt;\n#include &lt;mongocxx/client.hpp&gt;\n#include &lt;mongocxx/instance.hpp&gt;\n\nint main(int, char **) {\n  std::cout &lt;&lt; \"1\" &lt;&lt; std::endl;\n  mongocxx::instance inst{};\n  mongocxx::client conn{mongocxx::uri{}};\n\n  bsoncxx::builder::stream::document document{};\n\n  auto collection = conn[\"testdb\"][\"testcollection\"];\n  document &lt;&lt; \"hello\"\n           &lt;&lt; \"world\";\n\n  collection.insert_one(document.view());\n  auto cursor = collection.find({});\n\n  for (auto &amp;&amp;doc : cursor) {\n    std::cout &lt;&lt; bsoncxx::to_json(doc) &lt;&lt; std::endl;\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Do you have any idea about what I missed here?</p>\n\n<p>Updates:</p>\n\n<p>with the new CMakeLists.txt, there are no more cmake errors.</p>\n\n<pre><code>ugitho@ugitho:build$ cmake ..\n-- Checking for module 'libmongocxx'\n--   Found libmongocxx, version 3.4.0\n-- Checking for module 'libbsoncxx'\n--   Found libbsoncxx, version 3.4.0\nCMAKE_PREFIX_PATH = /home/ugitho/NGUYENKHAC/projects/sdk/mongodb/shared\nLIBMONGOCXX_INCLUDE_DIRS = /home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/mongocxx/v_noabi;/home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/bsoncxx/v_noabi\nLIBMONGOCXX_LIBRARIES = mongocxx;bsoncxx\nLIBBSONCXX_INCLUDE_DIRS = /home/ugitho/NGUYENKHAC/projects/sdk/mongodb/include/bsoncxx/v_noabi\nLIBBSONCXX_LIBRARIES = bsoncxx\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/ugitho/NGUYENKHAC/projects/testMongoDb/build\n[1]+  Done                    gedit /home/ugitho/NGUYENKHAC/projects/testMongoDb/build/CMakeFiles/CMakeOutput.log\n</code></pre>\n\n<p>The errors are now on make level:</p>\n\n<pre><code>ugitho@ugitho:build$ make\nScanning dependencies of target cmongodb\n[ 50%] Building CXX object CMakeFiles/cmongodb.dir/test.cpp.o\n[100%] Linking CXX executable cmongodb\n/opt/llvm/x86_64/6.0.0.g631a/bin/ld: error: unable to find library -lmongocxx\n/opt/llvm/x86_64/6.0.0.g631a/bin/ld: error: unable to find library -lbsoncxx\n/opt/llvm/x86_64/6.0.0.g631a/bin/ld: error: unable to find library -lbsoncxx\ncollect2: error: ld returned 1 exit status\nmake[2]: *** [cmongodb] Error 1\nmake[1]: *** [CMakeFiles/cmongodb.dir/all] Error 2\nmake: *** [all] Error 2\n</code></pre>\n\n<p>UPDATE *** 27/12/2018</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.2)\nproject(cmongodb)\n\nset(CMAKE_CXX_STANDARD 14)\nget_filename_component(PARENT_DIR ${CMAKE_CURRENT_SOURCE_DIR} DIRECTORY)\n\nset(CMAKE_PREFIX_PATH ${PARENT_DIR}/sdk/mongodb)\nmessage(\"CMAKE_PREFIX_PATH = ${CMAKE_PREFIX_PATH}\")\nfind_package(libmongocxx REQUIRED)\nfind_package(libbsoncxx REQUIRED)\nset(MongoDb_INCLUDE_DIR ${PARENT_DIR}/sdk/mongodb/include)\ninclude_directories(${MongoDb_INCLUDE_DIR}/mongocxx/v_noabi \n                    ${MongoDb_INCLUDE_DIR}/bsoncxx/v_noabi)\n\nset(SOURCE_FILES test.cpp)\nadd_executable(cmongodb ${SOURCE_FILES})\n\ntarget_link_libraries(cmongodb  ${LIBMONGOCXX_LIBRARIES} \n                                ${LIBBSONCXX_LIBRARIES})\n</code></pre>\n\n<p>I managed to compile using this CMakeLists.txt.</p>\n\n<p>new project config will be coming soon.\n{GTest &amp; Boost &amp; MongoDb C++ Driver}</p>\n\n<p>Thank you!!</p>\n"}, {"tags": ["c++", "uwp"], "answers": [{"tags": [], "owner": {"reputation": 12794, "user_id": 686985, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nE56D.jpg?s=128&g=1", "display_name": "Stefan Wick  MSFT", "link": "https://stackoverflow.com/users/686985/stefan-wick-msft"}, "is_accepted": true, "score": 0, "last_activity_date": 1545264838, "creation_date": 1545264838, "answer_id": 53860879, "question_id": 53857804, "link": "https://stackoverflow.com/questions/53857804/multiple-partial-results-in-a-uwp-app-service/53860879#53860879", "title": "Multiple partial results in a UWP app service", "body": "<p>The AppServiceConnection is a bi-directional communication pipe, so you can use it to communicate progress updates from the service to the client. No need for polling. Just retain a reference to the AppServiceConnection instance in your service implementation once the client has connected and then call <a href=\"https://docs.microsoft.com/en-us/uwp/api/windows.applicationmodel.appservice.appserviceconnection.sendmessageasync\" rel=\"nofollow noreferrer\">SendMessageAsync</a> to send progress updates to client whenever you want.</p>\n"}], "owner": {"reputation": 1073, "user_id": 668344, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e53ada29b78f8e16882bda441cc10404?s=128&d=identicon&r=PG", "display_name": "An Hoa", "link": "https://stackoverflow.com/users/668344/an-hoa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53860879, "answer_count": 1, "score": 0, "last_activity_date": 1545264838, "creation_date": 1545246851, "last_edit_date": 1545247514, "question_id": 53857804, "link": "https://stackoverflow.com/questions/53857804/multiple-partial-results-in-a-uwp-app-service", "title": "Multiple partial results in a UWP app service", "body": "<p>I am trying to use an <a href=\"https://docs.microsoft.com/en-us/windows/uwp/launch-resume/how-to-create-and-consume-an-app-service\" rel=\"nofollow noreferrer\">UWP app service</a> to provide some non-UI processing service to other app <em>including the host app</em>. For responsiveness, I want to return the result progressively. Think about <code>grep</code>-ping a folder for files containing a certain string: It would be better to report the files as we found it instead of reporting everything at the end.</p>\n\n<p>So my question is: Can this scenario be achieved with the current UWP technology? (I think it is probably possible via polling using the multiple app instances approach. I want to know if there's an easier method with app service.)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 5, "creation_date": 1545246569, "post_id": 53857719, "comment_id": 94563246, "body": "<code>sqrt</code> is square root and not square"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1545246635, "post_id": 53857719, "comment_id": 94563266, "body": "The function you&#39;re looking for is <code>pow().</code> And there&#39;s no recursion you are using BTW."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1545249284, "post_id": 53857719, "comment_id": 94564369, "body": "The function <code>pow</code> returns a floating point value.  You may incur some loss of precision when converting from float to integer to float."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1545249387, "post_id": 53857719, "comment_id": 94564410, "body": "BTW, a more efficient method to square a number is: <code>x  * x</code>.  No function calls, load a register, use multiplication processor instruction."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1545249588, "post_id": 53857719, "comment_id": 94564494, "body": "You could also try: ` x^2 = (x + 1) * (x - 1);`  Note that this doesn&#39;t involve any square root functions and may give more accurate results.  I still believe you should use <code>x * x</code> instead.  This form may be more efficient than the simplified version."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1545249657, "post_id": 53857719, "comment_id": 94564530, "body": "So, why do you need recursion?  The equation doesn&#39;t involve recursion."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545254163, "post_id": 53857719, "comment_id": 94566335, "body": "This is a typo :  <code>sqrt</code> should be <code>sq</code>."}], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 10657262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P6ZN4OmWUjA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAuWSuzp6wUJObaRiokx8T5shGB2g/mo/photo.jpg?sz=128", "display_name": "Adam Dadvar", "link": "https://stackoverflow.com/users/10657262/adam-dadvar"}, "is_accepted": false, "score": 2, "last_activity_date": 1545247052, "last_edit_date": 1545247052, "creation_date": 1545246656, "answer_id": 53857758, "question_id": 53857719, "link": "https://stackoverflow.com/questions/53857719/how-to-define-a-recursive-function-which-will-square-a-positive-integer/53857758#53857758", "title": "How to define a recursive function which will square a positive integer", "body": "<p>You've used <code>sqrt</code> instead of your function <code>sq</code>, this worked by chance when you entered 2 as <code>sqrt(2-1) = (2-1)^2 = 1</code>.</p>\n\n<p>So changing your line <code>return (sqrt(x-1)) + (2*x) - 1;</code> to <code>return ((sq(x-1)) + (2*x) - 1);</code></p>\n\n<p>Should fix your problem! This solution will stick with your idea of making a recursive function but also solve the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1545251919, "post_id": 53858012, "comment_id": 94565395, "body": "You need to make a recursive call in your recursive function? It&#39;s a world gone mad =P"}, {"owner": {"reputation": 244, "user_id": 10657262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-P6ZN4OmWUjA/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAuWSuzp6wUJObaRiokx8T5shGB2g/mo/photo.jpg?sz=128", "display_name": "Adam Dadvar", "link": "https://stackoverflow.com/users/10657262/adam-dadvar"}, "edited": false, "score": 0, "creation_date": 1545387359, "post_id": 53858012, "comment_id": 94612350, "body": "@Walter he was being sarcastic."}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 3, "last_activity_date": 1545247841, "creation_date": 1545247841, "answer_id": 53858012, "question_id": 53857719, "link": "https://stackoverflow.com/questions/53857719/how-to-define-a-recursive-function-which-will-square-a-positive-integer/53858012#53858012", "title": "How to define a recursive function which will square a positive integer", "body": "<p>You must, of course, actually make the recursive call.</p>\n\n<pre><code>inline constexpr unsigned recursive_square(unsigned x)\n{\n    return x &lt;= 1? x : recursive_square(x-1) + x+x - 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10809761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a67d30301da133a3b739dc50a7d2443f?s=128&d=identicon&r=PG&f=1", "display_name": "pizzasteve", "link": "https://stackoverflow.com/users/10809761/pizzasteve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1545248650, "creation_date": 1545246449, "last_edit_date": 1545246561, "question_id": 53857719, "link": "https://stackoverflow.com/questions/53857719/how-to-define-a-recursive-function-which-will-square-a-positive-integer", "title": "How to define a recursive function which will square a positive integer", "body": "<p>I am trying to write a program that creates a recursive function which will square a positive integer using this occurrence: x^2 = (x-1)^2 + 2x - 1. I thought I had something going, I typed in 2 and 4 was printed, however, once I started typing in other numbers such as 5, the value that was returned was 11 instead of the 25 I wanted. I am new to recursion and just wanted to write a simple program but it's clear I'm not comprehending the math portion, I could be wrong and my whole program is off but I think I have a fairly ok understanding on the main foundation of recursion. Any suggestions that could help me understand this better? Thank you!</p>\n\n<p>I haven't done much with the base condition because I'm not sure what to do with it, but in the else statement, I've typed in different algorithms I thought would work such as sq(sqrt(x-1)) + (2*x) - 1; but that returned 13 when I typed in 5. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint sq(int x) {\n\n    if (x &lt;= 0)\n        return 0;\n    else\n        return (sqrt(x-1)) + (2*x) - 1;\n }\n\nint main() {\n    int squarenum;\n    cout &lt;&lt; \"Enter a number: \";\n    cin &gt;&gt; squarenum;\n    cout &lt;&lt;\"Square of number: \" &lt;&lt;  sq(squarenum) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The program has to create a recursive function which will square a positive integer using this occurrence: x^2 = (x-1)^2 + 2x - 1.</p>\n\n<p>So when I typed in 5, the output should be the 25, which is 5 squared, but instead, 11 is returned. </p>\n"}, {"tags": ["c++", "syntax", "most-vexing-parse"], "comments": [{"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 1, "creation_date": 1545246644, "post_id": 53857698, "comment_id": 94563270, "body": "Use {} instead of (). Or don&#39;t use unnamed temporaries. You&#39;ve stumbled on C++&#39;s notorious <i>most vexing parse</i>."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1545246654, "post_id": 53857698, "comment_id": 94563275, "body": "<a href=\"https://en.wikipedia.org/wiki/Most_vexing_parse\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Most_vexing_parse</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1545246716, "post_id": 53857698, "comment_id": 94563297, "body": "Welcome to C++.  Prepare to be vexed ;)"}, {"owner": {"reputation": 1150, "user_id": 4211238, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WMEEpDw_3Do/AAAAAAAAAAI/AAAAAAAAFgA/fbflf6laU8A/photo.jpg?sz=128", "display_name": "Charles Gueunet", "link": "https://stackoverflow.com/users/4211238/charles-gueunet"}, "edited": false, "score": 2, "creation_date": 1545246868, "post_id": 53857698, "comment_id": 94563359, "body": "you can use <code>auto bar = Bar(Foo(x), Foo(y))</code> if you use at least c++11"}, {"owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545247029, "post_id": 53857698, "comment_id": 94563420, "body": "@NathanOliver, thanks, the duplicate link was exactly what I was looking for! &quot;This declarator syntax was inherited from C, and I think even the inventor of C (Ken Thompson?) described it as a mistake.&quot; Lol."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1545256946, "post_id": 53857698, "comment_id": 94567446, "body": "<code>(Foo)x</code> has exactly the same meaning as <code>Foo(x)</code> , other than the parsing issue"}], "owner": {"reputation": 17775, "user_id": 810671, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/0a2131c899b918a6bfae126ddb1e2bbf?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/810671/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1545246658, "answer_count": 0, "score": 4, "last_activity_date": 1545246799, "creation_date": 1545246375, "last_edit_date": 1545246799, "question_id": 53857698, "link": "https://stackoverflow.com/questions/53857698/class-initialization-seems-to-be-mistaken-for-function-declaration", "closed_reason": "Duplicate", "title": "Class initialization seems to be mistaken for function declaration", "body": "<p>Take the following sample code:</p>\n\n<pre><code>class Foo {\npublic:\n    Foo(int x) {}\n};\n\nclass Bar {\npublic:\n    Bar(const Foo &amp;foo1, const Foo &amp;foo2) {}\n};\n\nvoid barfunc(const Bar &amp;bar) {}\n\nvoid func()\n{\n    int x = 1, y = 2;\n    Bar bar(Foo(x), Foo(y));\n    barfunc(bar);\n}\n</code></pre>\n\n<p>The compiler complains:</p>\n\n<pre><code>test.cpp:17:16: error: invalid initialization of reference of type \u2018const Bar&amp;\u2019 from expression of type \u2018Bar(Foo, Foo)\u2019\n     barfunc(bar);\n                ^\ntest.cpp:11:6: note: in passing argument 1 of \u2018void barfunc(const Bar&amp;)\u2019\n void barfunc(const Bar &amp;bar) {}\n      ^~~~~~~\n</code></pre>\n\n<p>It seems that it has mistaken <code>Bar bar(Foo(x), Foo(y));</code> for a function declaration. The tooltip in Visual Studio when I hover over <code>bar</code> gives me its type as <code>Bar bar(Foo x, Foo y)</code> rather than the intended <code>Bar bar</code>. This seems odd to me since I never knew a function declaration can have parentheses around the parameter names.</p>\n\n<p>Doing either of the following fixes the issue:</p>\n\n<pre><code>    Bar bar = Bar(Foo(x), Foo(y));\n</code></pre>\n\n<p>or</p>\n\n<pre><code>    Bar bar((Foo)Foo(x), (Foo)Foo(y)); // though really only one cast is enough\n</code></pre>\n\n<p>But I'm wondering if there is a better more conventional way to fix it?</p>\n"}, {"tags": ["c++", "c", "eclipse", "arduino", "avr"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1545246559, "post_id": 53857673, "comment_id": 94563237, "body": "Maybe you want this? <code>Right Click on &quot;project&quot;</code>-&gt;<code>Properties</code>-&gt;<code>C&#47;C++ General</code>-&gt;<code>Processor Include Paths, Macros etc..</code>-&gt;<code>GNU C++</code>-&gt;<code>CDT User Settings</code>-&gt;<code>Add</code>"}, {"owner": {"reputation": 137, "user_id": 4058766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f8f6a2b8375b9f0de9f96578ff4b9?s=128&d=identicon&r=PG&f=1", "display_name": "James Kl", "link": "https://stackoverflow.com/users/4058766/james-kl"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545247093, "post_id": 53857673, "comment_id": 94563452, "body": "I am not seeing Processor Include Paths anywhere. I did find add PATH under the Linked Resources tab. However, I am still uncertain why parts mentioned in the official documentation are missing."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1545248564, "post_id": 53857673, "comment_id": 94564030, "body": "You should have &quot;C/C++ Build&quot; tab as well. It looks like you have some wrong or unsupported project type."}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1545249369, "post_id": 53857673, "comment_id": 94564407, "body": "Which eclipse version are you using? And on which platform is it?"}, {"owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "edited": false, "score": 0, "creation_date": 1545249427, "post_id": 53857673, "comment_id": 94564429, "body": "Also, make sure you right click on the MAIN project then go to properties from the bottom of the list."}, {"owner": {"reputation": 137, "user_id": 4058766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f8f6a2b8375b9f0de9f96578ff4b9?s=128&d=identicon&r=PG&f=1", "display_name": "James Kl", "link": "https://stackoverflow.com/users/4058766/james-kl"}, "edited": false, "score": 0, "creation_date": 1545250270, "post_id": 53857673, "comment_id": 94564760, "body": "I am using Oxygen.3a Release (4.7.3a) and was looking at the main."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1545251475, "post_id": 53857673, "comment_id": 94565217, "body": "You are likely missing some plugins installed"}, {"owner": {"reputation": 137, "user_id": 4058766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f8f6a2b8375b9f0de9f96578ff4b9?s=128&d=identicon&r=PG&f=1", "display_name": "James Kl", "link": "https://stackoverflow.com/users/4058766/james-kl"}, "edited": false, "score": 0, "creation_date": 1545252297, "post_id": 53857673, "comment_id": 94567095, "body": "I am really new to C++ so I don&#39;t understand this entirely. What appears to be the problem is that I am using a default template (specifically the Arduino Plugin). This does not include the Cross GCC toolchain. Therefore when looking through the project properties many things are missing. This includes &quot;C/C++ Build&quot; and the PATH variables. If I create a normal C++ project I am able to see everything as expected and amend the PATH."}], "answers": [{"tags": [], "owner": {"reputation": 992, "user_id": 5446276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKM0T.jpg?s=128&g=1", "display_name": "John", "link": "https://stackoverflow.com/users/5446276/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1545254127, "creation_date": 1545254127, "answer_id": 53859230, "question_id": 53857673, "link": "https://stackoverflow.com/questions/53857673/how-do-i-the-add-path-to-a-3rd-party-library-eclipse-arduino/53859230#53859230", "title": "How do I the add path to a 3rd party library? - Eclipse/Arduino", "body": "<p>So here is the solution, I've installed oxygen 3a and here are the steps:</p>\n\n<ol>\n<li><a href=\"https://imgur.com/AKkW815\" rel=\"nofollow noreferrer\">https://imgur.com/AKkW815</a></li>\n<li><a href=\"https://imgur.com/dV0GqZQ\" rel=\"nofollow noreferrer\">https://imgur.com/dV0GqZQ</a></li>\n<li><a href=\"https://imgur.com/fM6NRwL\" rel=\"nofollow noreferrer\">https://imgur.com/fM6NRwL</a></li>\n<li><a href=\"https://imgur.com/861wM1W\" rel=\"nofollow noreferrer\">https://imgur.com/861wM1W</a></li>\n<li><a href=\"https://imgur.com/MsMCaPu\" rel=\"nofollow noreferrer\">https://imgur.com/MsMCaPu</a></li>\n</ol>\n\n<p>I'm sure you can take over from here.</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 4058766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f8f6a2b8375b9f0de9f96578ff4b9?s=128&d=identicon&r=PG&f=1", "display_name": "James Kl", "link": "https://stackoverflow.com/users/4058766/james-kl"}, "is_accepted": true, "score": 0, "last_activity_date": 1546464781, "creation_date": 1546464781, "answer_id": 54013436, "question_id": 53857673, "link": "https://stackoverflow.com/questions/53857673/how-do-i-the-add-path-to-a-3rd-party-library-eclipse-arduino/54013436#54013436", "title": "How do I the add path to a 3rd party library? - Eclipse/Arduino", "body": "<p>Turned out to be really simple. In short you do not need to add the path of the library to eclipse.</p>\n\n<pre><code>//If you use:\n&lt;header.hpp&gt; //Eclipse looks at the current directory\n//but you could instead say\n&lt;path-to-header/header.hpp&gt;\n</code></pre>\n\n<p>This eliminates the need to add the path to eclipse via the methods mentioned by everyone else</p>\n"}], "owner": {"reputation": 137, "user_id": 4058766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/255f8f6a2b8375b9f0de9f96578ff4b9?s=128&d=identicon&r=PG&f=1", "display_name": "James Kl", "link": "https://stackoverflow.com/users/4058766/james-kl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 54013436, "answer_count": 2, "score": 1, "last_activity_date": 1546464781, "creation_date": 1545246223, "last_edit_date": 1545347147, "question_id": 53857673, "link": "https://stackoverflow.com/questions/53857673/how-do-i-the-add-path-to-a-3rd-party-library-eclipse-arduino", "title": "How do I the add path to a 3rd party library? - Eclipse/Arduino", "body": "<p>This is my first time coding in C++ and I have no experience with compiler languages. </p>\n\n<p>I am creating an Arduino project using Eclipse. I want include a 3rd party library. I need to add the path of the library in Eclipse but don't know how. The documentation I found said that I should look at the following:</p>\n\n<p>Project --> Properties --> C/C++ General --> Paths and Symbols </p>\n\n<p>but as you can see in the image Paths and Symbols does not exist. I used the the filter bar to search for Paths and did not get any relevant results. The libraries tab also does not let me add the package in any manner. </p>\n\n<p>I think this is because Arduino uses an AVR compiler and not the cross gcc toolchain. If I create a normal C++ package I can add the path to another library. However, I have not yet figured out how to get it to compile for the Arduino.  </p>\n\n<p>How can I add the path to the Arduino project direct eclipse to the 3rd party library that I am using?</p>\n\n<p><a href=\"https://i.stack.imgur.com/oVzd0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oVzd0.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "stl", "time-complexity"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545246053, "post_id": 53857542, "comment_id": 94562976, "body": "Time complexity of operations on the various c++ standard container implementations is well <a href=\"https://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">documented</a> already, and you rather should refer  there first, befor asking here."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1545246324, "post_id": 53857542, "comment_id": 94563120, "body": "The problem statement is very vague. What is the limiting variable to optimize for? The total number of packages? Only packages without any dependencies at all shall be counted as <code>independent</code>? Do packages without dependencies appear in the input map&#39;s keys or must their names/numbers be collected from the dependencies of other packages? Do outputs need to be sorted by package name/number? Can I really choose any input structure at all? I could just demand the input to be a <code>map</code>-like container that can list all values in <code>O(n)</code> time together with whether they appear as key or not."}, {"owner": {"reputation": 1, "user_id": 10775754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2b5c9449a067f4aedd944b5454e29e?s=128&d=identicon&r=PG&f=1", "display_name": "aj_test", "link": "https://stackoverflow.com/users/10775754/aj-test"}, "edited": false, "score": 0, "creation_date": 1545251550, "post_id": 53857542, "comment_id": 94565246, "body": "To answer user10605163&#39;s valid questions - The total number of packages? - assume to be in 100s Only packages without any dependencies at all shall be counted as independent? - Yes Do packages without dependencies appear in the input map&#39;s keys or must their names/numbers be collected from the dependencies of other packages? Yes, packages without dependencies must be collected from the dependencies. The essence is to select an optimal input data structure as well."}, {"owner": {"reputation": 1, "user_id": 10775754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2b5c9449a067f4aedd944b5454e29e?s=128&d=identicon&r=PG&f=1", "display_name": "aj_test", "link": "https://stackoverflow.com/users/10775754/aj-test"}, "edited": false, "score": 0, "creation_date": 1545251821, "post_id": 53857542, "comment_id": 94565357, "body": "Do outputs need to be sorted by package name/number? No Can I really choose any input structure at all? I could just demand the input to be a map-like container that can list all values in O(n) time together with whether they appear as key or not. -Yes, its your function, so you can chose and publish the signature. I chose std::map as well."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1545254862, "post_id": 53857542, "comment_id": 94566609, "body": "Your code is actually <code>O(n*m*ln m)</code> worst-case where n is the number of <i>total</i> packages and m the number of dependent packages if all dependent packages depend on all other packages. Then <code>potential_independent_packages</code> will be of size <code>n*m</code> and you are going to check <code>dependent_packages</code> for each of them for a factor of <code>ln(m)</code>. You are also potentially printing packages multiple times."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10605163"}, "edited": false, "score": 0, "creation_date": 1545256022, "post_id": 53857542, "comment_id": 94567112, "body": "Still questions: Are you going for average- or worst-case time complexity? Are package numbers guaranteed to be consecutive (i.e. the highest package number is the total package count minus one)? Did I understand you correctly that all input containers from the standard library are fine? Because again I could just use an input container that has a <code>O(r)</code> function returning a list of independent packages where <code>r</code> is the number of such and that would obviously be optimal."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1545265094, "post_id": 53857542, "comment_id": 94569795, "body": "<a href=\"https://en.cppreference.com/w/cpp/algorithm/set_difference\" rel=\"nofollow noreferrer\"><code>std::set_difference</code></a> might help."}], "answers": [{"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1545301717, "last_edit_date": 1545301717, "creation_date": 1545301373, "answer_id": 53866726, "question_id": 53857542, "link": "https://stackoverflow.com/questions/53857542/c-optimal-complexity-function/53866726#53866726", "title": "C++ : Optimal Complexity function", "body": "<p>It was not clearly stated in the description but I presume you meant that package cannot be compiled if some of the packages it is dependent upon haven't been compiled yet. </p>\n\n<p>With this assumption, there is a fairly simple code that optimizes the compilation order. Compute depth of dependency for each package and then compile in parallel packages\nof the same depth starting with packages of lowest depth. </p>\n\n<p>(What is \"depth of dependency\"? Think of the dependency as a directed tree,\nthen the depth of the element is the longest path from the element to the leaves it depends upon. Formally, if package has no dependencies then its depth is zero and for others Depth[package] = max(Depth[depends_of_the_package])+1. Note that packages of the same depth are necessarily independent of each other)</p>\n\n<p>I would use following code</p>\n\n<pre><code>class PackageOptimizer\n{\n    public:\n    struct PackageDependency\n    {  \n        size_t Count() const\n        {\n            return m_end - m_begin;\n        }\n        size_t m_begin;\n        size_t m_end;\n    };\n\n    vector&lt;size_t&gt; FindLeaves()\n    {\n        vector&lt;size_t&gt; leaves;\n        for(size_t i = 0; i&lt;m_deps.size(); i++)\n        {\n            if(m_deps[i].m_begin == m_deps[i].m_end)\n                leaves.push_back(i);\n        }\n\n        return leaves;\n    }\n\n    vector&lt;int&gt; ComputeDepthMap()\n    {\n        vector&lt;int&gt; Depth(m_deps.size());\n        vector&lt;int&gt; Count(m_deps.size(),0);\n        vector&lt;size_t&gt; currSet = FindLeaves();\n        vector&lt;size_t&gt; nextSet;\n\n        int currDepth = 0;\n        while(!currSet.empty())\n        {\n           for(size_t elem : currSet)\n           {\n               Depth[elem] = currDepth;\n\n               for( size_t  upPackage = m_depsInv[elem].m_begin;\n                            upPackage &lt; m_depsInv[elem].m_end; \n                            upPackage++)\n                {\n                    Count[upPackage]++;\n\n                    if(Count[upPackage] == m_deps[upPackage].Count())\n                    {\n                        nextSet.push_back(upPackage);\n                    }\n                }\n           } \n           swap(nextSet, currSet);\n           currDepth++;\n           nextSet.clear();\n        }\n\n        return Depth;\n    }\n\n    private:\n    // package i is dependent on\n    // m_indices[m_deps[i].m_begin], m_indices[m_deps[i].m_begin+1], ... m_indices[m_deps[i].m_end-1]\n    vector&lt;PackageDependency&gt;   m_deps; \n    vector&lt;size_t&gt;              m_indices;\n\n    // following packages are dependant on package i\n    // m_indicesInv[m_depsInv[i].m_begin], m_indicesInv[m_depsInv[i].m_begin+1], ... m_indicesInv[m_deps[i].m_end-1]\n    vector&lt;PackageDependency&gt;   m_depsInv; \n    vector&lt;size_t&gt;              m_indicesInv;\n};\n</code></pre>\n\n<p>It just lacks methods to initiate <code>m_deps, m_indices, m_depsInv, m_indicesInv</code>,\nbut those aren't hard. With <code>Depth</code> computed you can easily organize packages appropriate to the order of execution. Also, you do need to ensure that there are no loops of dependency in the packages else this code will never finish.</p>\n\n<p>In terms of performance this algorithm takes around <code>O(n + m)</code>,\nwhere is <code>n</code> is the number of packages and <code>m</code> is the total number of dependencies. Creation of <code>m_deps, m_indices, m_depsInv, m_indicesInv</code> should take around the same amount of time.</p>\n\n<p>Although, in real life, different packages require different amount of time to compile\nand you always have a limit to the number of packages you can compile at the same time efficiently.</p>\n"}], "owner": {"reputation": 1, "user_id": 10775754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d2b5c9449a067f4aedd944b5454e29e?s=128&d=identicon&r=PG&f=1", "display_name": "aj_test", "link": "https://stackoverflow.com/users/10775754/aj-test"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545301717, "creation_date": 1545245629, "last_edit_date": 1545252475, "question_id": 53857542, "link": "https://stackoverflow.com/questions/53857542/c-optimal-complexity-function", "title": "C++ : Optimal Complexity function", "body": "<p>I have been asked a question in an interview :</p>\n\n<p>We have packages as below (packages as in components of a software system) -</p>\n\n<p>pkg1 -> pkg2, pkg3, pkg4</p>\n\n<p>pkg2 -> pkg5, pkg6</p>\n\n<p>pkg7 -> pkg8, pkg9</p>\n\n<p>pkg9 -> pkg10, pkg11</p>\n\n<p>Where, Pkg1 has dependency on pkg2, 3, 4.</p>\n\n<p>pkg2 has dependency on pkg5, 6 and so on.</p>\n\n<p>These packages are to be built (compiled). Independent packages can be built parallely for fastest compilation.</p>\n\n<p>Write a C++ function to list independent packages and dependent packages, with time complexity as better as possible. Its upto you to design the function signature, so you can chose what container will your input package data be.</p>\n\n<p>Output (on the stdout) - \nIndependent Packages - pkg3, pkg4, pkg5, pkg6, pkg8, pkg10, pkg11\nDependent Packages - pkg1, pkg2, pkg7, pkg9</p>\n\n<hr>\n\n<p>In my solution, I used a std::map for input packages, and used std::set and std::vector for the Dependent and Independent Packages respectively.</p>\n\n<p>The time complexity I could achieve was O(mn) where m is number of dependent packages and n is number of independent packages.\nCan we achieve more than that? How? Any help/guidance appreciated.</p>\n\n<p>Thanks in advance.</p>\n\n<p>Edit 1:\nThought, I will give my implementation here - </p>\n\n<pre><code>#include &lt;iostream&gt;\nvoid filterPackages(const std::map&lt;int, std::vector&lt;int&gt; &gt; &amp;packages)\n{\n    std::vector&lt;int&gt; potential_independent_packages;\n    std::set&lt;int&gt; dependent_packages;\n\n    for(auto iter : packages)\n    {\n        dependent_packages.insert(iter.first);\n        for(auto iter1 : iter.second)\n        {\n            potential_independent_packages.push_back(iter1);\n        }\n    }\n\n    std::cout&lt;&lt;\"Independent package - \";\n    for( auto iter2 : potential_independent_packages)\n    {\n        if(dependent_packages.found(iter2) == std::set::end)\n        {\n            std::cout&lt;&lt;iter2;\n        }\n    }\n\n    std::cout&lt;&lt;std::endl&lt;&lt;\"Dependent packages - \";\n    for( auto iter3 : dependent_packages)\n    {\n        std::cout&lt;&lt;iter3;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "menu", "ncurses"], "owner": {"reputation": 423, "user_id": 1440199, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/398947621a6de909901e0e1c636c078b?s=128&d=identicon&r=PG", "display_name": "tgunnoe", "link": "https://stackoverflow.com/users/1440199/tgunnoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1545256603, "creation_date": 1545245620, "last_edit_date": 1545256603, "question_id": 53857540, "link": "https://stackoverflow.com/questions/53857540/using-native-c-wrappers-for-ncurses-how-can-i-create-a-menu-submenu-system", "title": "Using native c++ wrappers for ncurses, How can I create a menu/submenu system?", "body": "<p>I spent the last year learning C++ (using C++ Primer as the recommended material from <a href=\"https://stackoverflow.com/a/388282/1440199\">https://stackoverflow.com/a/388282/1440199</a>). I wanted to learn to use ncurses to make my first flying-solo program. Even though NCurses is C-based, it is more or less not well known that <a href=\"https://github.com/mirror/ncurses/tree/master/c%2B%2B\" rel=\"nofollow noreferrer\">native ncurses C++ wrappers exist</a>. However, the documentation for them are almost nonexistent; there's a demo.cc file Ive been using as a basis, and a <a href=\"https://reversed.top/2016-04-24/ncurses-for-cpp/\" rel=\"nofollow noreferrer\">few places around the web</a>. Anyways, Ive made it my final exam, so to speak, to understand and use these wrappers.</p>\n\n<p>The problem I am encountering is of the \"best programming practices\" type: Because of the lack of documented examples, I'm unsure of the best way to create a submenu from the demo's <a href=\"https://github.com/mirror/ncurses/blob/master/c%2B%2B/demo.cc#L432\" rel=\"nofollow noreferrer\">initial menu system</a>. </p>\n\n<p>The best idea I can come up with is to use the <a href=\"https://github.com/mirror/ncurses/blob/master/c%2B%2B/demo.cc#L449\" rel=\"nofollow noreferrer\">example way</a> to <a href=\"https://github.com/mirror/ncurses/blob/master/c%2B%2B/cursesm.h#L592\" rel=\"nofollow noreferrer\">attach ncurses++'s NCursesUserItem to a menu item</a>. Would the <a href=\"http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/menus.html#MENUUSERPTR\" rel=\"nofollow noreferrer\">User Pointer</a> be a pointer to the previous menu class? In NCurses, you can post and unpost menus, so I am also assuming I want to 'unpost' the previous menu when the new one 'posts', thats why I wanted a pointer to the previous menu upon showing the new one.</p>\n\n<p>The typesafe example way to attach userdata(for set_item_userptr) to a menu item:</p>\n\n<pre><code>template&lt;class T&gt; class SubMenu : public NCursesUserItem&lt;T&gt;\n{\n  public:\n    SubMenu (const char* p_name,\n             const T* p_UserData)\n            : NCursesUserItem&lt;T&gt;(p_name, static_cast&lt;const char*&gt;(0), p_UserData){}\n\n    virtual ~SubMenu() {}\n\n    bool action() {\n        // I believe I want to unpost the previous menu here\n        //  before posting the new submenu?\n        NCursesUserItem&lt;T&gt;::UserData()-&gt;prev_menu()-&gt;unpost();\n        //This doesn't work, but its kind of what I want to do.\n        NCursesUserItem&lt;T&gt;::UserData()-&gt;post();\n        return FALSE;\n    }\n};\n</code></pre>\n\n<p>The Main menu object. I created the Submenu object here and passed 'this' (the main menu pointer) as an argument to it.</p>\n\n<pre><code>class MainMenu : public NCursesMenu\n{\n  private:\n    NCursesMenuItem** I;\n    Choice0Menu* u;\n#define n_items 3\n  public:\n    MainMenu ()\n    : NCursesMenu (n_items+2, 25, (lines()-5)/2, (cols()-23)/2), I(0), u(0)\n    {\n        u = new Choice0Menu(this);\n        I = new NCursesMenuItem*[1+n_items];\n        I[0] = new SubMenu&lt;Choice0Menu&gt; (\"Choice 0\", u);\n        I[1] = new PadAction(\"Choice 1\");\n        I[2] = new QuitItem();\n        I[3] = new NCursesMenuItem();\n\n        InitMenu(I, TRUE, TRUE);\n    }\n};\n</code></pre>\n\n<p>Choice0Menu class, which should contain a back button for returning to the Main Menu (I[2])</p>\n\n<pre><code>class Choice0Menu : public NCursesMenu\n{\n  private:\n    NCursesMenuItem** I;\n    MainMenu* w;\n#define n_items 3\n\n  public:\n    Choice0Menu (MainMenu* prev)\n    : NCursesMenu (n_items+2, 25, (lines()-5)/2, (cols()-23)/2), I(0), w(prev)\n{\n    I = new NCursesMenuItem*[1+n_items];\n    I[0] = new ScanAction(\"Submenu Choice 0\");\n    I[1] = new PadAction(\"Submenu Choice 1\");\n    I[2] = new MainMenuAction(\"Go Back\");\n    I[3] = new NCursesMenuItem();\n\n    InitMenu(I, TRUE, TRUE);\n\n    // returns the pointer to the prev object\n    MainMenu* prev_menu() const{\n        return w;\n    }\n};\n</code></pre>\n\n<p>I just have a lot of doubts about this way of doing it, for example, maybe I dont have to pass the entire 'this' pointer to the main menu when creating the submenu, just the post and unpost members. And MainMenu and Choice0Menu classes are very similar in function, so maybe even make it into one template class? As Choice0Menu takes a MainMenu as an argument, maybe it should be T* to take any menu type..</p>\n\n<p>My method doesn't seem the 'clean' way to program the problem.</p>\n\n<p>Thanks for the help. I have been studying this problem for almost 2 weeks now...</p>\n"}, {"tags": ["c++", "c++17", "variadic-templates", "template-meta-programming", "sfinae"], "comments": [{"owner": {"reputation": 34313, "user_id": 121309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a620f1f95441b8bde0e6c2c5140581d?s=128&d=identicon&r=PG", "display_name": "Hans Ke\ufb06ing", "link": "https://stackoverflow.com/users/121309/hans-ke%ef%ac%86ing"}, "edited": false, "score": 0, "creation_date": 1566371605, "post_id": 53857527, "comment_id": 101630361, "body": "I&#39;m voting to close this question as off-topic because apparently the OP doesn&#39;t want it around anymore?"}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "reply_to_user": {"reputation": 34313, "user_id": 121309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a620f1f95441b8bde0e6c2c5140581d?s=128&d=identicon&r=PG", "display_name": "Hans Ke\ufb06ing", "link": "https://stackoverflow.com/users/121309/hans-ke%ef%ac%86ing"}, "edited": false, "score": 0, "creation_date": 1566375110, "post_id": 53857527, "comment_id": 101631961, "body": "@Hans, that&#39;s not how SO works.  If the question is on-topic, then it belongs to the SO community.  We don&#39;t delete good content like that."}, {"owner": {"reputation": 34313, "user_id": 121309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6a620f1f95441b8bde0e6c2c5140581d?s=128&d=identicon&r=PG", "display_name": "Hans Ke\ufb06ing", "link": "https://stackoverflow.com/users/121309/hans-ke%ef%ac%86ing"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1566376895, "post_id": 53857527, "comment_id": 101632826, "body": "@TobySpeight I wasn&#39;t sure whether to rollback the OP&#39;s deletion of the question or VTC - I&#39;ll rollback next time"}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1545247005, "post_id": 53857663, "comment_id": 94563409, "body": "Can drop the <code>decay_t&lt;T&gt;</code> since you&#39;re taking by value (<code>decay_t&lt;T&gt;</code> will just be <code>T</code>)"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1545260106, "post_id": 53857663, "comment_id": 94568556, "body": "@Barry: fixed, also added possible C++20 solution."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1545260190, "post_id": 53857663, "comment_id": 94568583, "body": "lol I&#39;m tempted to remove my upvote for seriously suggesting that one ;-)"}, {"owner": {"reputation": 5184, "user_id": 6350078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcbd9246215586c3ff1b5c338570dd8d?s=128&d=identicon&r=PG&f=1", "display_name": "metalfox", "link": "https://stackoverflow.com/users/6350078/metalfox"}, "edited": false, "score": 0, "creation_date": 1545378829, "post_id": 53857663, "comment_id": 94608730, "body": "<code>std::tuple</code> can be used imaginatively very much like this hypothetical <code>std::pack</code>."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 4, "last_activity_date": 1545259950, "last_edit_date": 1545259950, "creation_date": 1545246174, "answer_id": 53857663, "question_id": 53857527, "link": "https://stackoverflow.com/questions/53857527/create-foldable-template-parameter-pack/53857663#53857663", "title": "Create foldable template parameter pack", "body": "<blockquote>\n  <p>Is it possible to create template parameter pack that can be folded to avoid writing same fragment of code multiple times?</p>\n</blockquote>\n\n<p>In place? Not in C++17. You would have to wrap your types into some sort of <code>template &lt;typename...&gt; struct typelist;</code> and then unwrap them somewhere else. This requires one layer of indirection.</p>\n\n<p>There's no way to write anything like <code>std::pack</code> as far as I know.</p>\n\n<hr>\n\n<blockquote>\n  <p>I've tried to solve the problem using T pack and aliasing single L and R. [...]</p>\n</blockquote>\n\n<p>In your code, <code>T...</code> will always be empty as it's not being deduced by anything. <code>L</code> and <code>R</code>'s default template parameter values are ignored, as they are being deduced by the function call.</p>\n\n<p>You need something like:</p>\n\n<pre><code>template&lt;\n    typename... T,\n    typename = std::enable_if_t&lt;(... &amp;&amp; std::is_same_v&lt;int, T&gt;)&gt;\n&gt;\nint F(T...){\n    return 0x70D0;\n}\n</code></pre>\n\n<hr>\n\n<p>In C++20, you should be able to use a lambda as follows:</p>\n\n<pre><code>template&lt;\n    typename L,\n    typename R,\n    typename = std::enable_if_t&lt;[]&lt;typename... Ts&gt;(){\n        return (... &amp;&amp; std::is_same_v&lt;int, Ts&gt;)\n    }.operator()&lt;L, R&gt;()&gt;\n&gt;\nint F(L Left, R Right){\n    return 0x70D0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1545253131, "post_id": 53858130, "comment_id": 94565906, "body": "This pattern works a lot better if you define <code>isSameList</code> to return that object, so you can change <code>decltype(f()){}</code> to just <code>f()</code>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1545254222, "post_id": 53858130, "comment_id": 94566359, "body": "@Barry - Are you right: so is more simple and elegant. Thanks!"}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1545254174, "last_edit_date": 1545254174, "creation_date": 1545248396, "answer_id": 53858130, "question_id": 53857527, "link": "https://stackoverflow.com/questions/53857527/create-foldable-template-parameter-pack/53858130#53858130", "title": "Create foldable template parameter pack", "body": "<p>Is too late to play ?</p>\n\n<blockquote>\n  <p>Is it possible to create template parameter pack that can be folded to avoid writing same fragment of code multiple times?</p>\n</blockquote>\n\n<p>Not in <code>F()</code> itself, as far I know.</p>\n\n<p>But you can repack the types, by example, in a list of a called function.</p>\n\n<p>I mean... if you <s>declare</s> define <s>(declare only: there isn't need of define it because is used only in a <code>decltype()</code>)</s> the following function [Edit: as suggested by Barry (thanks) defining the function simplify the use]</p>\n\n<pre><code>template &lt;typename T, typename ... Ts&gt;\nconstexpr auto isSameList ()\n   -&gt; std::bool_constant&lt;(... &amp;&amp; std::is_same_v&lt;T, std::decay_t&lt;Ts&gt;&gt;)&gt;\n { return {}; } \n</code></pre>\n\n<p>where you can use template folding, you can SFINAE to enable/disable <code>F()</code> as follows</p>\n\n<pre><code>template &lt;typename L, typename R,\n          std::enable_if_t&lt;isSameList&lt;int, L, R&gt;(), bool&gt; = true&gt;\nint F(L Left, R Right)\n { return 0x70D0; }\n</code></pre>\n\n<p>The following is a full compiling example</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate &lt;typename T, typename ... Ts&gt;\nconstexpr auto isSameList ()\n   -&gt; std::bool_constant&lt;(... &amp;&amp; std::is_same_v&lt;T, std::decay_t&lt;Ts&gt;&gt;)&gt;\n { return {}; } \n\ntemplate &lt;typename L, typename R,\n          std::enable_if_t&lt;isSameList&lt;int, L, R&gt;(), bool&gt; = true&gt;\nint F(L Left, R Right)\n { return 0x70D0; }\n\nint main ()\n {\n    F(3, 5);   // compile\n    //F(3, \"5\"); // compilation error\n }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5184, "user_id": 6350078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcbd9246215586c3ff1b5c338570dd8d?s=128&d=identicon&r=PG&f=1", "display_name": "metalfox", "link": "https://stackoverflow.com/users/6350078/metalfox"}, "is_accepted": false, "score": 2, "last_activity_date": 1545374103, "creation_date": 1545374103, "answer_id": 53880216, "question_id": 53857527, "link": "https://stackoverflow.com/questions/53857527/create-foldable-template-parameter-pack/53880216#53880216", "title": "Create foldable template parameter pack", "body": "<p>You almost had it:</p>\n\n<pre><code>template &lt;typename L,typename R,\n  typename = std::enable_if_t&lt;std::is_same_v&lt;std::tuple&lt;int,L,R&gt;,std::tuple&lt;L,R,int&gt;&gt;&gt;&gt;\nint F(L Left, R Right){\n    return 0x70D0;\n}\n\nint main(){\n    F(3, 5);   // OK\n    F(3, \"5\"); // Does not compile\n    F(\"5\", 3); // Does not compile\n}\n</code></pre>\n\n<p>or the variadic version:</p>\n\n<pre><code>template &lt;typename... T,\n  typename = std::enable_if_t&lt;std::is_same_v&lt;std::tuple&lt;int,T...&gt;,std::tuple&lt;T...,int&gt;&gt;&gt;&gt;\nint F(T... args){\n    return 0x70D0;\n}\n\nint main(){\n    F(3, 5);   // OK\n    F(3, \"5\"); // Does not compile\n    F(\"5\", 3); // Does not compile\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1180790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 53857663, "answer_count": 3, "score": 2, "last_activity_date": 1566373382, "creation_date": 1545245548, "last_edit_date": 1566373382, "question_id": 53857527, "link": "https://stackoverflow.com/questions/53857527/create-foldable-template-parameter-pack", "title": "Create foldable template parameter pack", "body": "<h2>Question</h2>\n\n<p>Is it possible to create foldable (\u203b <a href=\"https://en.cppreference.com/w/cpp/language/fold\" rel=\"nofollow noreferrer\">fold expression</a>) template <a href=\"https://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow noreferrer\">parameter pack</a>?</p>\n\n<h3>Example</h3>\n\n<p>Consider the following example (function that takes two arguments of type <code>int</code> (<a href=\"https://en.cppreference.com/w/cpp/types/decay\" rel=\"nofollow noreferrer\">decayed</a>)).</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;\n    typename L,\n    typename R,\n    typename = std::enable_if_t&lt;\n            std::is_same_v&lt;int, std::decay_t&lt;L&gt;&gt;\n        &amp;&amp;  std::is_same_v&lt;int, std::decay_t&lt;R&gt;&gt;\n    &gt;\n&gt;\nint F(L Left, R Right){\n    return 0x70D0;\n}\n</code></pre>\n\n<p>Is it possible to create template parameter pack that can be folded to avoid writing same fragment of code multiple times (<em>ie</em> <code>std::is_same_v</code>)?</p>\n\n<p>Something that represented as <code>std::pack</code> below could simplify using SFINAE?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typename = std::enable_if_t&lt;(... &amp;&amp; std::is_same_v&lt;int, std::decay_t&lt;std::pack&lt;L, R&gt;&gt;&gt;)&gt;\n</code></pre>\n\n<h3>What I've tried</h3>\n\n<p>I've tried to solve the problem using <code>T</code> pack and aliasing single <code>L</code> and <code>R</code>.\nBut for some reaon the following code compiles and runs without an error (second argument of second <code>F</code> function call, decayed, does not equal <code>int</code>) on MSVC 15.9.4+28307.222:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;\n    typename... T,\n    typename L = std::tuple_element_t&lt;0, std::tuple&lt;T...&gt;&gt;,\n    typename R = std::tuple_element_t&lt;1, std::tuple&lt;T...&gt;&gt;,\n    typename = std::enable_if_t&lt;(... &amp;&amp; std::is_same_v&lt;int, std::decay_t&lt;T&gt;&gt;)&gt;\n&gt;\nint F(L Left, R Right){\n    return 0x70D0;\n}\n\nint main(){\n    F(3, 5);   // OK\n    F(3, \"5\"); // OK, but should not compile\n}\n</code></pre>\n\n<p>PS Also, did I miss something in the above code to make SFINAE work properly (filter functions with <code>int, int</code> (decayed) arguments only)?</p>\n"}, {"tags": ["c++", "qt", "c++11", "multiple-inheritance"], "comments": [{"owner": {"reputation": 2754, "user_id": 9134576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIuMX.jpg?s=128&g=1", "display_name": "Letsintegreat", "link": "https://stackoverflow.com/users/9134576/letsintegreat"}, "edited": false, "score": 1, "creation_date": 1545245258, "post_id": 53857413, "comment_id": 94562603, "body": ".....TL; DR...."}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "reply_to_user": {"reputation": 2754, "user_id": 9134576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nIuMX.jpg?s=128&g=1", "display_name": "Letsintegreat", "link": "https://stackoverflow.com/users/9134576/letsintegreat"}, "edited": false, "score": 0, "creation_date": 1545245965, "post_id": 53857413, "comment_id": 94562942, "body": "@Zlytherin I&#39;ve found that the longer my questions become, the less my questions become inundated with spam/people that really don&#39;t quite get the complexities of Qt. I&#39;d rather have one really good, well-fitting answer than 15 terribly formatted ones that don&#39;t even come close to solving my problem and get my question locked. I&#39;m sure you can understand this sentiment. I can add a tl;dr anyway, but I&#39;m of the opinion it won&#39;t be to my benefit."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545248595, "post_id": 53857413, "comment_id": 94564042, "body": "Not sure I entirely understand what you are doing but it sounds a little bit like something <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">std::variant</a> might be useful for?"}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1545248927, "post_id": 53857413, "comment_id": 94564216, "body": "@Galik My hard requirement here is more so that I would like my connections to be distinct. i.e. int message and char message don&#39;t call the same function on the same object. So one function call for each type, because I have around 50 types in some cases and checking if they are convertible 50 times, maybe even multiple times a second seems like it goes downhill fast (think multiple classes communicating with multiple &quot;bags&quot;). I may be able to use the variant as a replacement for the base message class though."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1545253785, "post_id": 53859158, "comment_id": 94566195, "body": "Idk why template &lt;typename _Tb&gt;  won&#39;t add but thats above the class declaration."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "edited": false, "score": 0, "creation_date": 1545253827, "post_id": 53859158, "comment_id": 94566207, "body": "-- meaning _Tb is the template, NOT _Ts."}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545253905, "post_id": 53859158, "comment_id": 94566245, "body": "Hey @Mike, I changed the formatting a bit so it&#39;s easier for me to read. Do you think you could come up with a sample implementation?"}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545254030, "post_id": 53859158, "comment_id": 94566283, "body": "Is my understanding correct that you want an api that sends messages to a central dispatch from all over, but you want a common template to connect everything... including signals and slots with differe t parameters?"}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545254303, "post_id": 53859158, "comment_id": 94566403, "body": "You get the gist of it yeah. I&#39;d like to provide only one definition for a signal, and have all my slots receive (empty) base class parameter and do upcasting so that signals can be generic. My biggest problem I had when first trying to solve this was that signal_baseMsg(Message) connected to a slot of the same fashioned, wouldn&#39;t work because calling with TMessage&lt;int&gt; after connecting both TMessage&lt;int&gt; and TMessage&lt;char&gt; forced it to try and convert, which obviously failed. Does that make sense?"}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545259857, "post_id": 53859158, "comment_id": 94568480, "body": "So i just got what you want to work i think...you must inheirt from template. Any type use use in the template place must have a common named signal. I connected to a global derivative of QObject (to avoid having to make a bunch of classes with the same named slot"}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545343213, "post_id": 53859158, "comment_id": 94600578, "body": "And to answer how to do this with multiple parameter types... there are many ways to do so, but how i personally would to it is with a union. Have a union that can hold each type of variable, and assign to that variable for the object going into the signal and pull the required variable from the parameter in the slot."}, {"owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545371146, "post_id": 53859158, "comment_id": 94606375, "body": "As I suspected I&#39;d still need to define each signal. I could probably do it in a macro though, which isn&#39;t too bad."}, {"owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "reply_to_user": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "edited": false, "score": 0, "creation_date": 1545372208, "post_id": 53859158, "comment_id": 94606652, "body": "If you wanted too... unions can be used like templates in this sense. The catch tho is the slot object in the connect. You need a global/static/extern which supports the connection with union argument. In your case it would be your handler/manager. Have a global instance (perhaps singleton) to ug into your template subclass constructor connect statement. It actually sounds like an int we resting concept for qt app framework. Sorry i cant be of code oroviding help... like i said, im doing this from my phone."}], "tags": [], "owner": {"reputation": 154, "user_id": 5908973, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d49e8e2ae710bd689ad93c48cd31260?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5908973/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1545264429, "last_edit_date": 1545264429, "creation_date": 1545253692, "answer_id": 53859158, "question_id": 53857413, "link": "https://stackoverflow.com/questions/53857413/complexities-of-multiple-inheritance-of-qobject-for-template-type-deduction/53859158#53859158", "title": "Complexities of multiple inheritance of QObject for template type deduction", "body": "<p>Just taking a shot at this...</p>\n\n<pre><code>template&lt;typename _Tb&gt;\nclass _Ts : public _Tb \n{\n\npublic:\n_Ts() {\n\n// your connects\n\n}\n\n// any extensions to the qobject classes you are using\n// note that you will need a common interface in your qobject subclasses... \n// meaning same named slots with different implementations \n\n};\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 8976784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1a0508537033e1de7730459dbd3405a?s=128&d=identicon&r=PG&f=1", "display_name": "jfh", "link": "https://stackoverflow.com/users/8976784/jfh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545264429, "creation_date": 1545245024, "last_edit_date": 1545246454, "question_id": 53857413, "link": "https://stackoverflow.com/questions/53857413/complexities-of-multiple-inheritance-of-qobject-for-template-type-deduction", "title": "Complexities of multiple inheritance of QObject for template type deduction", "body": "<h1>Background</h1>\n\n<p>I believe I have come up with a solution to the infamous problem of template signals and slot within Qt. For starters, I have defined an empty base <code>Message</code> class, whose sole purpose is to be inherited from and create concrete <code>TMessage</code> implementations. In Qt, while it is possible to connect a signal to a functor (as opposed to a Qt slot), a signal cannot be a template function, so my solution was to model the relation of the <code>Message</code> class as well, creating an abstract <code>Messenger</code> class, with a <code>void signal_Message(Message)</code> signal and a <code>template &lt;typename T&gt; void slot_T(TMessage&lt;T&gt;)</code>. I then came across <a href=\"https://stackoverflow.com/questions/3422106/how-do-i-select-a-member-variable-with-a-type-parameter\">this question</a> and this question, and realized this was a much more maintanable solution, and I created essentially what is a bag of <code>Messenger</code>s. When using an unsupported type, the even code fails at compile time with a nice, readable error message:\n<code>invalid initialization of reference of type Messenger&lt;double&gt;&amp; from expression of type MessengerBag&lt;int, char&gt;</code></p>\n\n<h1>Problem</h1>\n\n<p>Consider we use 6 distinct types, <code>int</code>, <code>float</code>, <code>char</code>, <code>double</code>, some <code>enum</code>, and a <code>struct</code>. This yields a <code>sizeof</code> 96 bytes! However, given that the desired usage is for places with upwards of 50 user defined types, each with their own separately maintained containers of signals and slots, it looks as though my solution can perform the same task with around the same overhead, but next to none of the maintenance costs. Aside from the obvious benefits of no longer having to maintain 24 separate functions, possibly even more in the case of convoluted inheritance schemes, is there a downside to this approach? After doing some initial testing I found that The <code>MessengerBag</code> is essentially the opposite of a diamond pattern. Each destructor is called accordingly, so I see practically no disadvantages when compared to a composite structure, which would require another level of (what I consider to be needless and obfuscating) indirection. Qt essentially despises virtual inheritance, and disallows it in a class that directly inherits QObject: as such I cannot make Mock virtual as I would have preferred.</p>\n\n<h1>Example</h1>\n\n<pre><code>// Message.h\nstruct Message {};\ntemplate &lt;typename T&gt; struct TMessage {\n    T t\n};\n\n// Messenger.h\nstruct Messenger : public QObject {\n    Q_OBJECT\npublic:\n    template &lt;typename T&gt; void slot_doSomethingWithMsg(const Message&amp; msg){\n        const auto&amp; tmsg = static_cast&lt;const TMessage&lt;T&gt;&amp;&gt;(msg);\n        qDebug() &lt;&lt; tmsg.t;\n        // do something else... this is just example usage\n    }\nsignals:\n    void signal_sendMsg(const BaseMsg&amp; msg);\n\n// MessengerBag.h\n\ntemplate &lt;typename T, typename... Args&gt;\nstruct MessengerBag : TMessenger&lt;T&gt;, MessengerBag&lt;Args...&gt;{};\n\ntemplate &lt;typename T&gt; struct MessengerBag&lt;T&gt; : TMessenger&lt;T&gt;{};\n\n// Manager.h\n\nMessengerBag&lt;int, char&gt; messengerBag;\n\nManager(){\n    QObject::connect(static_cast&lt;TMock&lt;int&gt;*&gt;(messengerBag),\n                     &amp;Mock::signal_sendMsg, \n                     static_cast&lt;TMock&lt;int&gt;*&gt;(messengerBag),\n                     &amp;Mock::slot_doSomethingWithMsg&lt;int&gt;);\n\n    QObject::connect(static_cast&lt;TMock&lt;char&gt;*&gt;(messengerBag),\n                     &amp;Mock::signal_sendMsg, \n                     static_cast&lt;TMock&lt;char&gt;*&gt;(messengerBag),\n                     &amp;Mock::slot_doSomethingWithMsg&lt;char&gt;);\n\ntemplate &lt;typename T&gt; void slot_sendMsg(const TMessage&lt;T&gt;&amp; msg){\n    TMessenger&lt;T&gt;&amp; messenger = messengerBag;\n    messenger.signal_sendMsg(msg);\n}\n\n// main.cpp\n\nauto* manager = new Manager();\n\nTMessage&lt;int&gt; imsg{5};\nTMessage&lt;char&gt; cmsg{'f'};\n\nmanager-&gt;slot_sendMsg(imsg);\nmanager-&gt;slot_sendMsg(cmsg);\n</code></pre>\n\n<p>As expected, the above example prints 5 and 'f', thus subverting the issue with template signals and slots. However, I am having a little trouble seeing any possible issues in the future. One issue is of course that <code>QObject</code> is inaccessible because which <code>QObject</code> remains unknown, which a compositional solution could potentially mediate (make <code>TMessenger</code> delegate to <code>Messenger</code>, and <code>MessengerBag</code> inherit <code>QObject</code> in empty <code>Args</code> specialization. I hesitate to commit to this solution without first understanding its possible shortcomings. Also, feel free to leave comments on the code itself.</p>\n\n<h2>tl;dr</h2>\n\n<p>Qt signals call functors, but signals cant be templates. Are there any downsides to having an object inherit multiple template classes that derived from <code>QObject</code>, in order to create template style signals by use of a base <code>Message</code>class? This <code>Message</code> is a parameter to the signal (so that the signal and template functor have the base version (after which the functor casts it to the correct type T). A struct will serve like a bag of these template classes, inheriting all of them in order to allow for upcasting to the right template class at any time.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer", "c++17"], "answers": [{"comments": [{"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545253174, "post_id": 53858379, "comment_id": 94565925, "body": "Interesting that the SFINAE constructor checks fail. This is one argument to avoid the conditionally invalid member functions."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545253651, "post_id": 53858379, "comment_id": 94566133, "body": "My toy example was not ideal, sorry. The pattern of either a <code>SingleSink</code> or a <code>DoubleSink</code> member evolved because I wanted to specialize some of the functionality of <code>SuperSink</code>. A <code>SuperSink</code> is supposed to do much more than what the <code>Sink</code> member does. Instead of partially specializing the whole class template I am trying to externalize the relevant behavior to that member (in order to avoid code duplication for common functionality). Thus the inverted design does not help in the &quot;real&quot; case I have in mind. I added some code comments to my toy example to explain that."}, {"owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "reply_to_user": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545254954, "post_id": 53858379, "comment_id": 94566643, "body": "Yeah, it&#39;s interesting. I had to check it, too."}, {"owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "reply_to_user": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545255052, "post_id": 53858379, "comment_id": 94566684, "body": "if understand you correctly, you could derive the <code>SingleSink</code> and <code>DoubleSink</code> from <code>SuperSink</code> then. See my updated example."}, {"owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545256040, "post_id": 53858379, "comment_id": 94567121, "body": "I have the opposite in mind: <code>SuperSink</code> shall provide lots of functionality. The behavior can be customized by template parameters, but the user code should only interact with <code>SuperSink</code>s. <code>SingleSink</code> and <code>DoubleSink</code> customize a small part of the internal functionality of <code>SuperSink</code>. Anyway, my question is just about the &quot;conditionally invalid constructor&quot;. In practice, it is a bit more difficult to <code>std::enable_if</code> them according to the specific <code>Sink</code> (and I considered not to use SFINAE here). Sorry again for my imperfect example. Probably too late to correct(=rewrite) now."}, {"owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "reply_to_user": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "edited": false, "score": 0, "creation_date": 1545257286, "post_id": 53858379, "comment_id": 94567568, "body": "OK, I see. Of course I don&#39;t know all the details of your use-case, but what you write smells like CRTP could be what you want."}], "tags": [], "owner": {"reputation": 3213, "user_id": 8494588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d35d4ad4186f4415eb43175b481cb2bd?s=128&d=identicon&r=PG&f=1", "display_name": "florestan", "link": "https://stackoverflow.com/users/8494588/florestan"}, "is_accepted": false, "score": 1, "last_activity_date": 1545254835, "last_edit_date": 1545254835, "creation_date": 1545249648, "answer_id": 53858379, "question_id": 53857298, "link": "https://stackoverflow.com/questions/53857298/conditionally-invalid-member-function-of-class-template-implicit-instantiation/53858379#53858379", "title": "Conditionally invalid member function of class template (implicit instantiation works; explicit instantiation fails)", "body": "<p>I see at least the problem, that the design breaks type traits like the following, so you will probably get problems when SFINAE is used to decide which constructors will be called.</p>\n\n<pre><code>static_assert(!std::is_constructible&lt;SuperSink&lt;int, 1&gt;, int, int&gt;::value);\n\nstatic_assert(!std::is_constructible&lt;SuperSink&lt;int, 2&gt;, int&gt;::value);\n</code></pre>\n\n<p>You could fix this by inverting the design: Define <code>SingleSink</code> and <code>DoubleSink</code> as special cases (or if needed: specialisations) of a generic <code>SuperSink</code>.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;class T, int arity&gt;\nstruct SuperSink {\n\n template&lt;typename... Ts, typename = std::enable_if_t&lt;sizeof...(Ts) == arity&gt; &gt;\n  SuperSink(Ts... is) {\n       std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n  }\n\n};\n\n\ntemplate&lt;typename T&gt;\nstruct SingleSink : SuperSink&lt;T, 1&gt; {\n    using Base = SuperSink&lt;T, 1&gt;;\n    using Base::Base; // inherit constructor\n    // implement special functionality here\n};\n\n\ntemplate&lt;typename T&gt;\nstruct DoubleSink : SuperSink&lt;T, 2&gt; {\n    // follow same pattern as in SingleSink.\n}\n\n\nint main() {\n    // implicit instantiation works\n    SuperSink&lt;int, 1&gt;{5};\n    SuperSink&lt;int, 2&gt;{5, 6};\n\n    // Now, these work as desired\n    static_assert(!std::is_constructible&lt;SuperSink&lt;int, 1&gt;, int, int&gt;::value);\n\n    static_assert(!std::is_constructible&lt;SuperSink&lt;int, 2&gt;, int&gt;::value);\n\n    // these yield a compile error (as desired)\n    //  SuperSink&lt;int, 1&gt;{5, 6};\n    // SuperSink&lt;int, 2&gt;{5};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1545264107, "creation_date": 1545264107, "answer_id": 53860792, "question_id": 53857298, "link": "https://stackoverflow.com/questions/53857298/conditionally-invalid-member-function-of-class-template-implicit-instantiation/53860792#53860792", "title": "Conditionally invalid member function of class template (implicit instantiation works; explicit instantiation fails)", "body": "<blockquote>\n  <p>Are these conditionally invalid member functions a problem if I never need explicit instantiation?</p>\n</blockquote>\n\n<p>Even templates from STL have \"invalid\" methods, for example: <code>std::vector&lt;T&gt;::resize(std::size_t)</code> with non default constructible <code>T</code>.</p>\n\n<p>So, with \"invalid\" methods, your class is usable normally. Document your requirement is an option.</p>\n\n<p>But then, those methods are not SFINAE friendly, as error would not appear in immediate context, but in instatntiation.</p>\n\n<p>You might use SFINAE on your own to remove them when invalid, for example:</p>\n\n<pre><code>template &lt;std::size_t N = arity, std::enable_if_t&lt;N == 1, int&gt; = 0&gt;\nSuperSink(T i) : sink_{i} {}\n\ntemplate &lt;std::size_t N = arity, std::enable_if_t&lt;N != 1, int&gt; = 0&gt;\nSuperSink(T i, T j) : sink_{i, j} {}\n</code></pre>\n\n<p>In C++2a, you might specify some condition to include methods in the class (Similar to above SFINAE, but with a nicer syntax and no extra template):</p>\n\n<pre><code>SuperSink(T i) requires (arity == 1) : sink_{i} {}\n\nSuperSink(T i, T j) requires (arity != 1) : sink_{i, j} {}\n</code></pre>\n"}], "owner": {"reputation": 1686, "user_id": 2615118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c15506113bb2e6d1ebf17502d71a1c?s=128&d=identicon&r=PG", "display_name": "Julius", "link": "https://stackoverflow.com/users/2615118/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53860792, "answer_count": 2, "score": 0, "last_activity_date": 1545264107, "creation_date": 1545244478, "last_edit_date": 1545252981, "question_id": 53857298, "link": "https://stackoverflow.com/questions/53857298/conditionally-invalid-member-function-of-class-template-implicit-instantiation", "title": "Conditionally invalid member function of class template (implicit instantiation works; explicit instantiation fails)", "body": "<p>I created a class template. Depending on its template arguments it supports different operations. The class template shall be (<em>implicitly</em>) instantiated for several combinations of template arguments. For some of those combinations there may be member functions that do not make sense (and also do not compile). However, as long as I do not enforce <em>explicit</em> instantiation, everything seems to work as desired.</p>\n\n<p>Now, there are these scary cases called \"unspecified\", \"undefined\", \"ill-formed; no diagnostic required\", \u2026. I definitely want to avoid any of those things. So I am asking for an advice how to deal with this situation.</p>\n\n<p>Here is an example that shows the same observation. Please note that I am not so much interested in how to fix this exact toy example.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;class T&gt;\nstruct SingleSink {\n  SingleSink(T) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n  }\n};\n\ntemplate&lt;class T&gt;\nstruct DoubleSink {\n  DoubleSink(T, T) {\n    std::cout &lt;&lt; __PRETTY_FUNCTION__ &lt;&lt; std::endl;\n  }\n};\n\ntemplate&lt;class T, int arity /*, some other stuff */&gt;\nstruct SuperSink {\n// This class shall do something special depending on, say, `arity`.\n// Instead of partially specializing the whole class template (and introducing\n// code duplication for the remaining functionality), let us externalize the \n// `arity`-dependent behavior to a special member.\n\n  using Sink = std::conditional_t&lt;\n    arity == 1,\n    SingleSink&lt;T&gt;,\n    DoubleSink&lt;T&gt;\n  &gt;;\n\n  Sink sink_;\n\n// [some more data members that do not depend on `arity`]\n\n// for a fixed `Sink` one of the following constructors should fail to compile\n  SuperSink(T i) : sink_{i} {}\n  SuperSink(T i, T j) : sink_{i, j} {}\n// ... so these are what I call \"conditionally invalid member functions\".\n};\n\n// explicit instantiation yields error (deactivated by comments):\n// template struct SuperSink&lt;int, 1&gt;;\n// template struct SuperSink&lt;int, 2&gt;;\n\nint main() {\n// implicit instantiation works\n  SuperSink&lt;int, 1&gt;{5};\n  SuperSink&lt;int, 2&gt;{5, 6};\n\n// these yield a compile error (as desired)\n// SuperSink&lt;int, 1&gt;{5, 6};\n// SuperSink&lt;int, 2&gt;{5};\n}\n</code></pre>\n\n<ol>\n<li>Are these conditionally invalid member functions a problem if I never\nneed explicit instantiation?</li>\n<li>If yes: is it good practice to check that explicit instantiation works?</li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 4, "creation_date": 1545244207, "post_id": 53857188, "comment_id": 94562178, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1545244459, "post_id": 53857188, "comment_id": 94562295, "body": "I don&#39;t think <code>validPosition</code> is a good name for a function that modifies the map. You should decide whether the function is just going to <i>look</i> at the map, and return true/false based on what it sees, or <i>change</i> the map (assuming it&#39;s okay to do so) in which case its name should reflect its more complex task. Also, decide whether you&#39;re going to access the map with <code>map[x][y]</code> or with <code>map[y][x]</code>. You shouldn&#39;t do both."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1545245746, "post_id": 53857188, "comment_id": 94562845, "body": "Whenever you see a section of code that looks like something identical that&#39;s been cut and pasted a few times with only some parameters changed, look for an opportunity to eliminate the redundancy."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1545246760, "post_id": 53857188, "comment_id": 94563313, "body": "You can simplify your program by using <code>switch</code>.  You could also simplify by using math:  <code>int row = (box_number - 1) &#47; 3; int column = (box_number - 1) % 3;</code>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1545247037, "post_id": 53857188, "comment_id": 94563426, "body": "Also, try an initialization loop:  <code>char id = &#39;1&#39;; for (int row = 0; row &lt; 3; ++row) { for (int column = 0; column &lt; 3; ++ column) {map[row][column] = id; ++id;} }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10812609, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aw-SFtzE4ik/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hGnt2Y9PwnCw0wWrPI4p2MuextBQ/mo/photo.jpg?sz=128", "display_name": "winston mcnair", "link": "https://stackoverflow.com/users/10812609/winston-mcnair"}, "edited": false, "score": 0, "creation_date": 1545244894, "post_id": 53857256, "comment_id": 94562459, "body": "When I call the function above the settings the code builds and ends immediately."}, {"owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "edited": false, "score": 1, "creation_date": 1545251146, "post_id": 53857256, "comment_id": 94565100, "body": "my bet is that you didn&#39;t set x and y to anything"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545252323, "post_id": 53857256, "comment_id": 94565580, "body": "That is a good point <code>x</code> and <code>y</code> need to be correctly initialized depending on the move. This probably should be a function. something like <code>void getXYPositionFromMove(int move, int &amp; x, int &amp; y)</code> or just use the row  &amp; column formulas from @ThomasMatthews"}], "tags": [], "owner": {"reputation": 4425, "user_id": 6277831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c21010f99314f291650d4cd9e3b2735?s=128&d=identicon&r=PG", "display_name": "lostbard", "link": "https://stackoverflow.com/users/6277831/lostbard"}, "is_accepted": false, "score": 1, "last_activity_date": 1545244264, "creation_date": 1545244264, "answer_id": 53857256, "question_id": 53857188, "link": "https://stackoverflow.com/questions/53857188/c-tic-tac-toe-game-switches-space-instead-of-error-message/53857256#53857256", "title": "C++ tic tac toe game. Switches space instead of error message", "body": "<p>That appears to be the very thing the validPosition function does - why not move it above the setting parts and show the error, rather than setting the value and then checking ?</p>\n\n<p>In addition, the validPosition sets the value for you - as long as you give it the correct x,y</p>\n"}], "owner": {"reputation": 33, "user_id": 10812609, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aw-SFtzE4ik/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hGnt2Y9PwnCw0wWrPI4p2MuextBQ/mo/photo.jpg?sz=128", "display_name": "winston mcnair", "link": "https://stackoverflow.com/users/10812609/winston-mcnair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1545244264, "creation_date": 1545243928, "last_edit_date": 1545244091, "question_id": 53857188, "link": "https://stackoverflow.com/questions/53857188/c-tic-tac-toe-game-switches-space-instead-of-error-message", "title": "C++ tic tac toe game. Switches space instead of error message", "body": "<p>I'm new to coding and I am trying to make a tic tac toe game. I am not finished yet. But I am stuck, I want the program to print an error when a space is already taken. But now it just switches the original token with the new token. Like if there is an X in one space and player two goes in the same space, the O will replace the X. I have the declarations of the functions in a separate header file. Any criticism is greatly appreciated, good and bad.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"TicTacToe.h\"\n\n\n    bool TicTacToe::validPosition(int x, int y, int currentplayer){\n        if(map[x][y] != ' '){\n            return false;\n        }\n        map[y][x] = currentplayer;\n        return true;\n\n    }\n\n    void TicTacToe::playgame() {\n        int player1move;\n        int player2move;\n        int currentplayer;\n        generateGrid();\n\n        int x, y;\n\n        while(gameover == false) {\n            tictacToeMap();\n\n                std::cout &lt;&lt; \"Go player one\" &lt;&lt; std::endl;\n                std::cin &gt;&gt; player1move;\n\n\n                if (player1move == 1) {\n                    map[0][0] = 'x';\n                } else if (player1move == 2) {\n                    map[0][1] = 'x';\n                } else if (player1move == 3) {\n                    map[0][2] = 'x';\n                } else if (player1move == 4) {\n                    map[1][0] = 'x';\n                } else if (player1move == 5) {\n                    map[1][1] = 'x';\n                } else if (player1move == 6) {\n                    map[1][2] = 'x';\n                } else if (player1move == 7) {\n                    map[2][0] = 'x';\n                } else if (player1move == 8) {\n                    map[2][1] = 'x';\n                } else if (player1move == 9) {\n                    map[2][2] = 'x';\n                }\n                tictacToeMap();\n\n\n                std::cout &lt;&lt; \"Go player two\" &lt;&lt; std::endl;\n                std::cin &gt;&gt; player2move;\n                if (player2move == 1) {\n                    map[0][0] = 'o';\n                } else if (player2move == 2) {\n                    map[0][1] = 'o';\n                } else if (player2move == 3) {\n                    map[0][2] = 'o';\n                } else if (player2move == 4) {\n                    map[1][0] = 'o';\n                } else if (player2move == 5) {\n                    map[1][1] = 'o';\n                } else if (player2move == 6) {\n                    map[1][2] = 'o';\n                } else if (player2move == 7) {\n                    map[2][0] = 'o';\n                } else if (player2move == 8) {\n                    map[2][1] = 'o';\n                } else if (player2move == 9) {\n                    map[2][2] = 'o';\n                }\n\n            }\n\n            if (validPosition(x, y, currentplayer) == true) {\n                std::cout &lt;&lt; \"Cant go there\" &lt;&lt; std::endl;\n            } else {\n                if (currentplayer == player1move) {\n                    currentplayer = player2move;\n                } else {\n                    currentplayer = player1move;\n                }\n        }\n\n\n    }\n\n\n\n    void TicTacToe::generateGrid() {\n        int number = 1;\n\n        for(int x = 0; x &lt; GRID_SIZE; x++){\n            for(int y = 0; y &lt; GRID_SIZE; y++){\n                map[x] [y] = std::to_string(number).c_str()[0];\n                number += 1;\n            }\n        }\n    }\n\n\n\n\n    void TicTacToe::tictacToeMap(){\n\n\n\n        std::cout &lt;&lt; std:: endl;\n\n        for(int x = 0; x &lt; GRID_SIZE; x++){\n            for(int y = 0; y &lt; GRID_SIZE; y++){\n                std::printf(\" %c \",  map[x][y]) ;\n            }\n            std::cout &lt;&lt; std:: endl;\n        }\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 4, "creation_date": 1545243852, "post_id": 53857169, "comment_id": 94562019, "body": "To give it what it is expecting..."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1545243914, "post_id": 53857169, "comment_id": 94562044, "body": "When asking about the error messages: Please copy-paste the whole message, without paraphrasing it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 1, "creation_date": 1545244398, "post_id": 53857169, "comment_id": 94562265, "body": "@Achal &quot;<i><code>date birth;</code> ? It should be <code>struct date birth;</code> or typedef the structure.</i>&quot; No it shouldn&#39;t. This is C++, not C."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545244504, "post_id": 53857169, "comment_id": 94562317, "body": "<code>#include&lt;iostream.h&gt;</code> and <code>#include&lt;conio.h&gt;</code> mean this is likely an ancient prestandard <code>c++</code> implementation."}, {"owner": {"reputation": 1, "user_id": 10812580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cMtrpwJsXZQ/AAAAAAAAAAI/AAAAAAAAIlo/BwjypUkwxZo/photo.jpg?sz=128", "display_name": "Ashmita Saha", "link": "https://stackoverflow.com/users/10812580/ashmita-saha"}, "edited": false, "score": 0, "creation_date": 1545244604, "post_id": 53857169, "comment_id": 94562356, "body": "so how do I fix this"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1545244628, "post_id": 53857169, "comment_id": 94562366, "body": "This is a fundamental misunderstanding of how to pass structures into functions. I recommend reviewing your programming text or some other <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good book</a>."}, {"owner": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1545244737, "post_id": 53857169, "comment_id": 94562404, "body": "@AlgirdasPreid\u017eius True. I misread the tag."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 11619, "user_id": 5346306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BsACH.jpg?s=128&g=1", "display_name": "Achal", "link": "https://stackoverflow.com/users/5346306/achal"}, "edited": false, "score": 2, "creation_date": 1545244807, "post_id": 53857169, "comment_id": 94562427, "body": "To be brutally honest, @Achal the C++  variant in use here is closer to C than it is to Modern C++."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545244929, "post_id": 53857169, "comment_id": 94562470, "body": "Semi-related: <a href=\"https://stackoverflow.com/questions/44863062/why-doesnt-a-simple-hello-world-style-program-compile-with-turbo-c\">Why doesn&#39;t a simple \u201cHello World\u201d-style program compile with Turbo C++?</a> outlines some of the problems you will run into, Ashmita. The tools you are using are 30-or-so  years out of date."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1545245005, "post_id": 53857169, "comment_id": 94562501, "body": "... and they force you to use an operating system (i.e. DOS via DOSBox) that is 30-or-so years out of date, which is the bigger problem."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245107, "post_id": 53857366, "comment_id": 94562536, "body": "True but misses the crux of it, which is that the OP seems to have misunderstood how variables work when passed to a function. Not only is the name within the function different from the name at the callsite, so it can be spelt differently, but it certainly <i>can&#39;t</i> take the form of an arbitrary expression like <code>birth.month</code>. Your solution is correct though, just needs a bit more explanation."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1545245220, "post_id": 53857366, "comment_id": 94562585, "body": "If you&#39;re going to pass in all six items individually, what&#39;s the point of declaring a structure to hold the three parts of a date? The structure should be passed to the function, not its members"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245222, "post_id": 53857366, "comment_id": 94562587, "body": "@LightnessRacesinOrbit I don&#39;t undertand why needs more explanation, is just the same syntax error several times, the guy supposed it is valid to have a dot in a name, that&#39;s all, no ?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1545245278, "post_id": 53857366, "comment_id": 94562616, "body": "@TimRandall absolutely, I did not understood myself why :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245327, "post_id": 53857366, "comment_id": 94562635, "body": "@bruno: I&#39;m saying I don&#39;t think the OP just randomly decided to name variables with dots in them, it looks more like they think the parameters <i>have</i> to look like the way the function is called, which is (a) not true, and (b) not possible here -- for the best answer I think you should dispel this misunderstanding."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1545245352, "post_id": 53857366, "comment_id": 94562651, "body": "@bruno I think that a good, useful answer is one that sees past the immediate problem the OP is having, and guides them along the path to better coding. I realize it can be difficult to do so without being patronizing, but I think it&#39;s worth a try"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245459, "post_id": 53857366, "comment_id": 94562701, "body": "@LightnessRacesinOrbit I think also the error is coming from the use of the struct, when I written the answer I started to say he reused a call of the function to make the function definition, but after I see the body of the function also having the same problem. Perhaps the function was added after and he just copy paste the body from the main code"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1545245590, "post_id": 53857366, "comment_id": 94562767, "body": "@TimRandall the problem he having is &#39;syntax error&#39;, my answer about it, no ? If not I am lost :)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245784, "post_id": 53857366, "comment_id": 94562866, "body": "Just because your answer isn&#39;t wrong doesn&#39;t mean it can&#39;t be even better ;)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545246478, "post_id": 53857366, "comment_id": 94563205, "body": "ok I added more material, hope it is good because I am late to diner and I go :)))"}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": false, "score": 0, "last_activity_date": 1545246379, "last_edit_date": 1545246379, "creation_date": 1545244788, "answer_id": 53857366, "question_id": 53857169, "link": "https://stackoverflow.com/questions/53857169/how-to-fix-expected-errors-in-c/53857366#53857366", "title": "How to fix &quot;expected&quot; errors in c++", "body": "<p>probably the error is from the line <code>void calculate(int birth.day,int birth.month,int birth.year,int   current.day,int current.month,int current.year)</code></p>\n\n<p>just replace the '.' by '_' or something like including in its body</p>\n\n<p>[edit]</p>\n\n<p>Except that point I encourage you modify your function to receive in parameter only the birth date and the current date, it is useless and extract their fields while this can be made by the function itself.</p>\n\n<p>Warning because you modify <em>current</em> into, you have to receive it <em>current</em> by value while you can receive <em>birth</em> by a const reference. Of course you can also use a local variable rather than to modify <em>current</em> ...</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545244937, "post_id": 53857375, "comment_id": 94562472, "body": "This is C++ so your first point is incorrect and the declaration is exactly as it should be."}, {"owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245126, "post_id": 53857375, "comment_id": 94562542, "body": "@LightnessRacesinOrbit Good catch. Also, unless the formatting is <i>way</i> off, it&#39;s unlikely that the variable declaration in question is on line 33. Fixed."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1545245139, "post_id": 53857375, "comment_id": 94562547, "body": "The formerly second point (now the first) is also incorrect. If the formatting were clearer, I think you&#39;d see that."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245143, "post_id": 53857375, "comment_id": 94562548, "body": "Better now just add an explanation around why the OP chose those parameter names in the first place and how they should work instead"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 1, "creation_date": 1545245258, "post_id": 53857375, "comment_id": 94562604, "body": "@TimRandall Don&#39;t think the formatting would hurt/help (if you already know that the declaration is inside <code>main</code> then there&#39;s nothing further to be learnt) but presumably Craig doesn&#39;t realise that this works properly as a declaration of a namespace-scope function. And, to be fair, that&#39;s a weird language feature!"}, {"owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "reply_to_user": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1545245274, "post_id": 53857375, "comment_id": 94562612, "body": "@TimRandall It&#39;d be more than just whitespace difference then. What I see is <code>void main() { void calculate...</code>, modulo some whitespace, which puts <code>calculate</code> inside <code>main</code>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1545245389, "post_id": 53857375, "comment_id": 94562669, "body": "@CraigMeier Right, but <a href=\"http://coliru.stacked-crooked.com/a/3cec9c6ebd9e2411\" rel=\"nofollow noreferrer\">that&#39;s fine</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545245802, "post_id": 53857375, "comment_id": 94562871, "body": "@CraigMeier Yeah me too tbh."}], "tags": [], "owner": {"reputation": 1631, "user_id": 10730242, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YTo3N.jpg?s=128&g=1", "display_name": "manveti", "link": "https://stackoverflow.com/users/10730242/manveti"}, "is_accepted": false, "score": 0, "last_activity_date": 1545245955, "last_edit_date": 1545245955, "creation_date": 1545244807, "answer_id": 53857375, "question_id": 53857169, "link": "https://stackoverflow.com/questions/53857169/how-to-fix-expected-errors-in-c/53857375#53857375", "title": "How to fix &quot;expected&quot; errors in c++", "body": "<p>While it's hard to tell what the error means without seeing the error, and hard to correlate its line number with the posted code given the formatting, the likeliest cause of the error is that '.' is not a valid character for an identifier, so all the parameter names in the definition of the <code>calculate</code> function are invalid identifiers. This could lead to an error message containing the word \"expected\" (e.g. \"expected an identifier).</p>\n\n<p>Consider using '_' or camelCase for your parameter names instead, if you must pass them all individually. However, you have declared this convenient <code>date</code> structure to pass around, so you can just have your function take parameters <code>date birth</code> and <code>date current</code> instead of each member of each of the two <code>date</code> instances.</p>\n"}, {"comments": [{"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545249904, "post_id": 53857882, "comment_id": 94564635, "body": "I take the risk to up vote, you used more time than me to explain :) I hope the very silent Ashmita Saha will read and all of that wasn&#39;t for nothing. I do not understand the down votes in a lot of cases, for me it would be better if an explanation was mandatory and it was not anonymous ..."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545261347, "post_id": 53857882, "comment_id": 94568907, "body": "@bruno all of the downvotage seems to have been cleared up, but yeah. It was looking toxic in here for a while."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545261717, "post_id": 53857882, "comment_id": 94569012, "body": "@user4581301 Downvotes are not &quot;toxic&quot;, they are a core part of the quality control mechanisms here and shouldn&#39;t be taken personally."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262151, "post_id": 53857882, "comment_id": 94569104, "body": "Toxic was a poor word choice, @LightnessRacesinOrbit but anytime I hesitate about making an answer because I&#39;m worried it&#39;ll be instantly downvoted, it&#39;s something."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262559, "post_id": 53857882, "comment_id": 94569217, "body": "@user4581301 If you&#39;re so unsure of your answer that you think it&#39;ll be instantly downvoted, then it&#39;s probably best not to post it - the system works! :)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262798, "post_id": 53857882, "comment_id": 94569284, "body": "@LightnessRacesinOrbit I was sure of the answer. Not so sure of the people. People not always logical."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262842, "post_id": 53857882, "comment_id": 94569297, "body": "@user4581301 Then, considering this answer has no downvotes and some upvotes, I suggest casting fewer aspersions against &quot;the people&quot; and assume good faith!!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262889, "post_id": 53857882, "comment_id": 94569313, "body": "@LightnessRacesinOrbit answer&#39;s here, isn&#39;t it? Faith in humanity won out."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545262983, "post_id": 53857882, "comment_id": 94569340, "body": "@user4581301 Yep! Good times!"}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1545261275, "last_edit_date": 1545261275, "creation_date": 1545247235, "answer_id": 53857882, "question_id": 53857169, "link": "https://stackoverflow.com/questions/53857169/how-to-fix-expected-errors-in-c/53857882#53857882", "title": "How to fix &quot;expected&quot; errors in c++", "body": "<p>In C++ one cannot pass parameters as member variables of a class. In </p>\n\n<pre><code>void calculate(int birth.day, ...\n</code></pre>\n\n<p><code>birth.day</code> is not valid.</p>\n\n<p>One can, however, pass the whole class and then use the member variables.</p>\n\n<p>Change </p>\n\n<pre><code>void calculate(int,int,int,int,int,int);\n</code></pre>\n\n<p>into </p>\n\n<pre><code>void calculate(date, date); \n</code></pre>\n\n<p>and then </p>\n\n<pre><code>calculate       (birth.day,birth.month,birth.year,current.day,current.month,current.year);\n</code></pre>\n\n<p>into </p>\n\n<pre><code>calculate(birth, current);\n</code></pre>\n\n<p>and finally </p>\n\n<pre><code>void calculate(int birth.day,int birth.month,int birth.year,int   current.day,int current.month,int current.year)\n</code></pre>\n\n<p>into</p>\n\n<pre><code>void calculate(date birth, date current)\n</code></pre>\n\n<p>There are number of ways to improve upon this, passing by reference </p>\n\n<pre><code>void calculate(const date &amp; birth, date current) \n</code></pre>\n\n<p>(Note that <code>current</code> is not a reference because it will be modified in the function) and cleaning up a couple typos in <code>calculate</code></p>\n\n<pre><code>current.day=current.day=monthdays[birth.month-1]; \n</code></pre>\n\n<p>should probably be </p>\n\n<pre><code>current.day=current.day+monthdays[birth.month-1];\n</code></pre>\n\n<p>or </p>\n\n<pre><code>current.day+=monthdays[birth.month-1];\n</code></pre>\n\n<p>and </p>\n\n<pre><code>int calculated_date=current.date-birth.date;\n</code></pre>\n\n<p>should be more like </p>\n\n<pre><code>int calculated_day=current.day-birth.day;\n</code></pre>\n\n<p>The compiler will catch the second typo, but probably not the first. I'm also not sold on the logic used in <code>calculate</code>, but fortunately TurboC++ came with Turbo Debugger, one of the best debuggers available at the time and, in my opinion, it still holds up well.</p>\n"}], "owner": {"reputation": 1, "user_id": 10812580, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-cMtrpwJsXZQ/AAAAAAAAAAI/AAAAAAAAIlo/BwjypUkwxZo/photo.jpg?sz=128", "display_name": "Ashmita Saha", "link": "https://stackoverflow.com/users/10812580/ashmita-saha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 3, "score": -6, "last_activity_date": 1545337249, "creation_date": 1545243817, "last_edit_date": 1545245704, "question_id": 53857169, "link": "https://stackoverflow.com/questions/53857169/how-to-fix-expected-errors-in-c", "title": "How to fix &quot;expected&quot; errors in c++", "body": "<p>This is a program to find age of a person .C++ is showing me an \"expected\" error in line 33. Error is present function definition of calculate().  Can you please help me fix it. I can't understand what is the error.</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\nstruct date\n{\n    int day;\n    int month;\n    int year;\n};\ndate birth;\ndate current;\n\nvoid main()\n{\n    void calculate(int,int,int,int,int,int);\n    cout&lt;&lt;\"\\nEnter your date of birth\";\n    cout&lt;&lt;\"\\nDay: \";\n    cin&gt;&gt;birth.day;\n    cout&lt;&lt;\"\\nMonth: \";\n    cin&gt;&gt;birth.month;\n    cout&lt;&lt;\"\\nYear: \";\n    cin&gt;&gt;birth.year;\n    cout&lt;&lt;\"\\nEnter current date\";\n    cout&lt;&lt;\"\\nDay: \";\n    cin&gt;&gt;current.day;\n    cout&lt;&lt;\"\\nMonth: \";\n    cin&gt;&gt;current.month;\n    cout&lt;&lt;\"\\nYear: \";\n    cin&gt;&gt;current.year;\n    calculate     (birth.day,birth.month,birth.year,current.day,current.month,current.year);\n    getch();\n}\n\n// Error on line below\nvoid calculate(int birth.day,int birth.month,int birth.year,int   current.day,int current.month,int current.year)\n{\n    int monthdays[]={31,28,31,30,31,30,31,31,30,31,30,31};\n    if(birth.day&gt;current.day)\n    {\n        current.day=current.day=monthdays[birth.month-1];\n        current.month=current.month-1;\n    }\n    else if(birth.month&gt;current.month)\n    {\n        current.year=current.year-1;\n        current.month=current.month+12;\n    }\n    int calculated_date=current.date-birth.date;\n    int calculated_month=current.month-birth.month;\n    int calculated_year=current.year=birth.year;\n\n    cout&lt;&lt;\"Present age= \"&lt;&lt;calculated_date&lt;&lt;calculated_month&lt;&lt;calculated_year;\n}\n</code></pre>\n\n<p>There is error in (33,27) </p>\n"}, {"tags": ["c++", "exception", "visual-c++", "try-catch", "stdstring"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1545243266, "post_id": 53857024, "comment_id": 94561784, "body": "Why are you using a raw array of strings at all?"}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1545243336, "post_id": 53857024, "comment_id": 94561809, "body": "First of all, it is not my code and secondly why not?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1545243395, "post_id": 53857024, "comment_id": 94561835, "body": "Sounds like a compiler bug. <code>std::array&lt;std::string, 3&gt;</code> might get around the problem."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1545243428, "post_id": 53857024, "comment_id": 94561851, "body": "Does it happen if you don&#39;t use default member initializers?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545243552, "post_id": 53857024, "comment_id": 94561901, "body": "<i>&quot;this is never reached while std::string myStrings is not uncommented&quot;</i> Too many negatives; broke my brain :D"}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545243718, "post_id": 53857024, "comment_id": 94561972, "body": "@Fran&#231;oisAndrieux It seems to work correctly when not using default initializers... but why?!"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545243961, "post_id": 53857024, "comment_id": 94562063, "body": "@Thomas Cos they broke :D (I had a very similar issue in GCC with <code>{}</code> as default value for a function argument <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=60367\" rel=\"nofollow noreferrer\">[ref</a>])"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1545243962, "post_id": 53857024, "comment_id": 94562064, "body": "Could not make it work with member initializer list. Same error."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1545243989, "post_id": 53857024, "comment_id": 94562072, "body": "@Thomas If you are asking why your compiler has a bug, it&#39;s likely because nobody has reported it or the implementer hasn&#39;t invested the resources necessary to fix it. Though there are newer version of Visual Studio and it might be fixed in newer versions."}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545244143, "post_id": 53857024, "comment_id": 94562144, "body": "@Fran&#231;oisAndrieux I am merely asking if there is any possibilty that i did sth wrong and by some rule i must not use default initializers in this way/with std::string/on wednesdays. If everyone agrees its a compiler bug at least i can sleep well and work around it ;)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1545244237, "post_id": 53857024, "comment_id": 94562191, "body": "If you&#39;re breaking a rule somewhere, I can&#39;t see it. I duplicate the problem with MSVC 2015 Update 3. Don&#39;t have 2017 spun up anywhere I can try it out."}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "edited": false, "score": 0, "creation_date": 1545244367, "post_id": 53857024, "comment_id": 94562248, "body": "Okay, thanks for the help. I hate std:string anyway, using const char* is better."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545244376, "post_id": 53857024, "comment_id": 94562254, "body": "Is <code>std::exception(&quot;TestException&quot;)</code> a new kind of constructor for std::exception?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 1, "creation_date": 1545244423, "post_id": 53857024, "comment_id": 94562276, "body": "@Eljay Not new, but <a href=\"https://docs.microsoft.com/en-us/cpp/standard-library/exception-class?view=vs-2017\" rel=\"nofollow noreferrer\">a VS extension</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545244498, "post_id": 53857024, "comment_id": 94562316, "body": "@Thomas That&#39;s an extremely unpopular opinion with regards to c++. This isn&#39;t a bug with <code>std::string</code>. If you <i>just</i> mean for representing string literals, then <code>const char*</code> isn&#39;t so bad."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545244843, "post_id": 53857024, "comment_id": 94562442, "body": "@Fran&#231;oisAndrieux Actually <code>std::string</code> is quite unpopular overall, although granted for more than storing a literal I&#39;m not sure many would recommend C-strings over it :D Mind you, now that we have <code>std::string_view</code>, I&#39;m enjoying good old-fashioned <code>char</code> buffers more and more."}, {"owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545244983, "post_id": 53857024, "comment_id": 94562487, "body": "@Fran&#231;oisAndrieux What i meant was not that i hate C++, the std or std::string in general, but for this use case i would prefer const char* as nothing string-related is done with those strings anyway (they&#39;re just passed on). My comment was a little unspecific there."}, {"owner": {"reputation": 866, "user_id": 7607594, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OyzH_J0Nigs/AAAAAAAAAAI/AAAAAAAAAFg/tWm2BVaSBwY/photo.jpg?sz=128", "display_name": "Jorge Omar Medra", "link": "https://stackoverflow.com/users/7607594/jorge-omar-medra"}, "edited": false, "score": 0, "creation_date": 1545246686, "post_id": 53857024, "comment_id": 94563285, "body": "@Thomas, it looks like a bug in compile. I test in in XCode and works. It seems that the problem is at the moment to release the local memory, in this case the array of strings <code>myStrings</code> which is create before the constructor is invoked. Due to the constructor is not ended successfully, the  instance of the class was not created. So, the question is: What happened with the compiler at the moment to release the memory, of <code>myStrings</code>, in this case?"}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1545245101, "creation_date": 1545245101, "answer_id": 53857432, "question_id": 53857024, "link": "https://stackoverflow.com/questions/53857024/stdstring-member-deallocation-fails-during-exception-thrown-from-constructor/53857432#53857432", "title": "std::string[] member deallocation fails during exception thrown from constructor", "body": "<p>With the help of the commenters this turned out to most likely be a problem with default member initializers and Visual Studio 2015.</p>\n\n<p>Without default initializers it works.</p>\n"}], "owner": {"reputation": 696, "user_id": 3967585, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a870c8c88c4aa792cbdfdccb00a79d85?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/3967585/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1545245101, "creation_date": 1545243222, "question_id": 53857024, "link": "https://stackoverflow.com/questions/53857024/stdstring-member-deallocation-fails-during-exception-thrown-from-constructor", "title": "std::string[] member deallocation fails during exception thrown from constructor", "body": "<p>Using Visual Studio 2015 (update 3) I have a problem in a larger project which i boiled down to the minimal example down below.</p>\n\n<p>Therein i have a class Test containing a std::string[3]. It may so happen, that the constructor of Test throws an exception, which i would like to deal with at the top level (main). However, when throwing from the constructor, an assertion in xmemory fails - it seems to me while trying to unwind and deallocate the std::string[3] (see console output and stack trace below). The catch statement is never reached and in a release built it just crashes.</p>\n\n<p>When i replace the std::string[3] by a single std::string, the catch statement is correctly reached. Also, when throwing an exception from another member function called externally after construction is finished the catch block is reached as expected if using std::string[3]. </p>\n\n<p><strong>What is going on here?</strong>\nAny help appreciated.</p>\n\n<p>The minimal example:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;vcruntime_exception.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n\n\nclass Test {\npublic:\n    Test() {\n        // throw exception from constructor\n        throw std::exception(\"TestException\");\n    }\n\n    ~Test() {\n        std::cout &lt;&lt; \"Destruction\" &lt;&lt; std::endl;\n    }\n\n    //std::string mySingleString = \"SingleTestString\";\n    std::string myStrings[3] = { \"String1\", \"TestString2\", \"AnotherTestString\" };\n};\n\n\nint main()\n{\n    try\n    {\n        Test* t = new Test();\n    }\n    catch (std::exception&amp; e)\n    {\n        // this is never reached while std::string myStrings is not uncommented\n        std::cout &lt;&lt; \"Caught:\" &lt;&lt; e.what() &lt;&lt; std::endl;\n    }\n    catch (...) {\n        std::cout &lt;&lt; \"Caught an alien!\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The console output:</p>\n\n<pre><code>Ausnahme ausgel\u00f6st bei 0x773CDDC2 in ConsoleApplication1.exe: Microsoft C++-Ausnahme: std::exception bei Speicherort 0x0019FB8C.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\kernel.appcore.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\msvcrt.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\rpcrt4.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\sspicli.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\cryptbase.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\bcryptprimitives.dll\" geladen. Symbole wurden geladen.\n\"ConsoleApplication1.exe\" (Win32): \"C:\\Windows\\SysWOW64\\sechost.dll\" geladen. Symbole wurden geladen.\nDebug Assertion Failed!\n\nProgram: ...15\\Projects\\ConsoleApplication1\\Debug\\ConsoleApplication1.exe\nFile: c:\\program files (x86)\\microsoft visual studio 14.0\\vc\\include\\xmemory0\nLine: 100\n\nExpression: \"(_Ptr_user &amp; (_BIG_ALLOCATION_ALIGNMENT - 1)) == 0\" &amp;&amp; 0\n</code></pre>\n\n<p>The stack trace:</p>\n\n<pre><code>ConsoleApplication1.exe!std::_Deallocate(void * _Ptr, unsigned int _Count, unsigned int _Sz) Zeile 99   C++\nConsoleApplication1.exe!std::allocator&lt;char&gt;::deallocate(char * _Ptr, unsigned int _Count) Zeile 720    C++\nConsoleApplication1.exe!std::_Wrap_alloc&lt;std::allocator&lt;char&gt; &gt;::deallocate(char * _Ptr, unsigned int _Count) Zeile 988 C++\nConsoleApplication1.exe!std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;::_Tidy(bool _Built, unsigned int _Newsize) Zeile 2260  C++\nConsoleApplication1.exe!std::basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;::~basic_string&lt;char,std::char_traits&lt;char&gt;,std::allocator&lt;char&gt; &gt;() Zeile 1018 C++\nConsoleApplication1.exe!`eh vector destructor iterator'(void * ptr, unsigned int size, unsigned int count, void(*)(void *) destructor)  C++\nConsoleApplication1.exe!_main() C++\nConsoleApplication1.exe!main() Zeile 27 C++\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 8779004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gLi3z.jpg?s=128&g=1", "display_name": "Muddy", "link": "https://stackoverflow.com/users/8779004/muddy"}, "edited": false, "score": 0, "creation_date": 1545244423, "post_id": 53857179, "comment_id": 94562275, "body": "How do I put the balloon in front of the fire?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "reply_to_user": {"reputation": 592, "user_id": 8779004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gLi3z.jpg?s=128&g=1", "display_name": "Muddy", "link": "https://stackoverflow.com/users/8779004/muddy"}, "edited": false, "score": 1, "creation_date": 1545244477, "post_id": 53857179, "comment_id": 94562303, "body": "@Muddy swap <code>drawSpray</code> and <code>drawAirBalloon</code>. I swapped it in the answer, just now."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1545244505, "last_edit_date": 1545244505, "creation_date": 1545243875, "answer_id": 53857179, "question_id": 53856876, "link": "https://stackoverflow.com/questions/53856876/make-fire-float-up/53857179#53857179", "title": "Make fire float up", "body": "<p>This is because you set the model view matrix to the identity matrix in the function <code>circle</code>. </p>\n\n<p>Replace <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glLoadIdentity.xml\" rel=\"nofollow noreferrer\"><code>glLoadIdentity</code></a> by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glPushMatrix.xml\" rel=\"nofollow noreferrer\"><code>glPushMatrix()</code>/<code>glPopMatrix()</code></a> in the function <code>circle()</code>:</p>\n\n<pre><code>void circle(double radius, double xc, double yc) {\n      int i;\n      double angle = 2 * 3.1415 / 20;   // circle is drawn using 20 line.\n      double circle_xy[100][40];\n      circle_xy[0][0] = radius + xc;\n      circle_xy[0][1] = yc;\n      glMatrixMode(GL_MODELVIEW); \n      glPushMatrix();\n      // set fire position\n      glTranslatef(-40.0, 60.0, 0.0);\n      glBegin(GL_POLYGON);\n      for (i = 1; i &lt; 20; i++) {\n          circle_xy[i][0] = radius * cos(i * angle) + xc;\n          circle_xy[i][1] = radius * sin(i * angle) + yc;\n          glVertex2f(circle_xy[i - 1][0], circle_xy[i - 1][1]);\n          glVertex2f(circle_xy[i][0], circle_xy[i][1]);\n      }\n      glEnd();\n    glPopMatrix();\n}\n</code></pre>\n\n<p>To make the code more comprehensible, I recommend to remove <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glTranslate.xml\" rel=\"nofollow noreferrer\"><code>glTranslatef</code></a> for <code>drawAirBalloon</code>, but to do it in <code>display</code>:</p>\n\n<pre><code>void drawAirBalloon(void) {\n    // glTranslatef(squareX, squareY, squareZ); &lt;--- remove\n\n    // ....\n} \n\nvoid display() {\n    glClear(GL_COLOR_BUFFER_BIT);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    // draw background \n    drawBackground();\n\n    glPushMatrix();\n    glTranslatef(squareX, squareY, squareZ); // &lt;--- insert\n    // draw spray\n    drawSpray();\n    // draw hot air balloon\n    drawAirBalloon();\n    glPopMatrix();\n\n    // draw rain\n    drawRain();\n    calcFPS();\n    counter++;\n    glFlush();\n    glutSwapBuffers();\n    glutPostRedisplay();\n}\n</code></pre>\n\n<hr>\n\n<p>You do a lot of effort and you write a lot of tricky and well structured code. I relay recommend, to read about <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\" rel=\"nofollow noreferrer\">Vertex Specification</a> and <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a>. Go on, but start to get rid of the deprecated fixed function pipeline and switch to a moder way of rendering. </p>\n"}], "owner": {"reputation": 592, "user_id": 8779004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/gLi3z.jpg?s=128&g=1", "display_name": "Muddy", "link": "https://stackoverflow.com/users/8779004/muddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 53857179, "answer_count": 1, "score": 1, "last_activity_date": 1545647463, "creation_date": 1545242525, "last_edit_date": 1545647463, "question_id": 53856876, "link": "https://stackoverflow.com/questions/53856876/make-fire-float-up", "title": "Make fire float up", "body": "<pre><code>// this is the display function it is called when ever you want to draw something all drawing should be called form here\nvoid display() {\n    glClear(GL_COLOR_BUFFER_BIT);\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n    // draw background \n    drawBackground();\n    glPushMatrix();\n    // draw hot air balloon\n    drawAirBalloon();\n    // draw spray\n    drawSpray();\n    glPopMatrix();\n    // draw rain\n    drawRain();\n    // draw fire\n    drawSpray();\n    calcFPS();\n    counter++;\n    glFlush();\n    glutSwapBuffers();\n    glutPostRedisplay();\n}\n</code></pre>\n\n<p>The problem is that I can't make the fire go up with my hot air balloon. The reason why I only put the code above (display) is because I think the problem is to do with this particular code.</p>\n\n<p>To see the full code, click on the link below:</p>\n\n<p><a href=\"http://cpp.sh/3ag5i\" rel=\"nofollow noreferrer\">hot air balloon code</a></p>\n\n<p>This is the problem:\n<a href=\"https://i.stack.imgur.com/FTsaJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FTsaJ.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["android", "c++", "qt", "amazon-web-services", "aws-sdk"], "comments": [{"owner": {"reputation": 6709, "user_id": 447438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ffdc5279fd70540799b762c14e66665?s=128&d=identicon&r=PG", "display_name": "jwernerny", "link": "https://stackoverflow.com/users/447438/jwernerny"}, "edited": false, "score": 0, "creation_date": 1545247565, "post_id": 53856765, "comment_id": 94563662, "body": "This <a href=\"https://bugreports.qt.io/browse/QTBUG-57909\" rel=\"nofollow noreferrer\">Qt Bug Report</a>, while not identical may help. It shows the same &quot;unsupported flags DT_FLAGS_1=0x81&quot; message.  It also suggests a fix in the list of bug comments."}, {"owner": {"reputation": 6147, "user_id": 3767076, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/64707b213de57fb785081ba23aaea2cd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/3767076/felix"}, "edited": false, "score": 0, "creation_date": 1545249676, "post_id": 53856765, "comment_id": 94564541, "body": "try to get the full stracktrace from logcat (run <code>abd logcat</code> and search for the stacktrace there). Since the actual trace is reported by a different process, it is not displayed by default"}], "owner": {"reputation": 9, "user_id": 9693044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f1f80856eea9e29680453687aebb0f?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamin B", "link": "https://stackoverflow.com/users/9693044/benjamin-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545242083, "creation_date": 1545242083, "question_id": 53856765, "link": "https://stackoverflow.com/questions/53856765/android-application-developed-with-qt-5-and-incorporating-the-aws-c-library-c", "title": "Android application developed with Qt 5 and incorporating the AWS C ++ library crashes", "body": "<p>I'm trying to develop an <strong>Android Application</strong>. This software use the AWS services. The compilation and link work but <strong>it crashes at the very beginning of the execution.</strong></p>\n\n<ul>\n<li>I'm using <strong>Qt 5.11</strong> and I think that the configuration is good (I'm using the <strong>last Android SDK and the NDK 10e</strong>) because I can run a simple Android application </li>\n<li>I'm using the last <strong>AWS C++ library</strong>. I compiled this library using this cake command : <code>cmake  -DBUILD_ONLY=\"email;cognito-identity;lambda;core;cognito-idp;identity-management\" -DNDK_DIR=\"/Downloads/android-ndk-r10e\" -DANDROID_STL=gnustl_shared -DTARGET_ARCH=ANDROID -DCMAKE_BUILD_TYPE=\"Release\" -DCMAKE_INSTALL_PREFIX=\"/aws-sdk-cpp/aws_build_android/build_dynamic_output\" /aws-sdk-cpp/aws_build_android/aws-sdk-cpp-master</code></li>\n</ul>\n\n<p>A s I said, the application crashes with this ultimate debug message:\n <strong>F libc    : Fatal signal 6 (SIGABRT), code -6 in tid 8731 (qtMainLoopThrea)</strong></p>\n\n<p>Here you are the complete list of application debug messages :</p>\n\n<pre><code>E Zygote  : isWhitelistProcess - Process is Whitelisted\nE libpersona: scanKnoxPersonas\nE libpersona: Couldn't open the File - /data/system/users/0/personalist.xml - No such file or directory\nW SELinux : SELinux selinux_android_compute_policy_index : Policy Index[2],  Con:u:r:zygote:s0 RAM:SEPF_SM-G930F_8.0.0_0018, [-1 -1 -1 -1 0 1]\nI SELinux : SELinux: seapp_context_lookup: seinfo=untrusted, level=s0:c512,c768, pkgname=org.qtproject.example.crio_Android\nI zygote  : Late-enabling -Xcheck:jni\nD TimaKeyStoreProvider: TimaKeyStore is not enabled: cannot add TimaSignature Service and generateKeyPair Service\nD ActivityThread: Added TimaKeyStore provider\nI zygote  : no shared libraies, dex_files: 1\nI zygote  : Do partial code cache collection, code=31KB, data=27KB\nI zygote  : After code cache collection, code=31KB, data=27KB\nI zygote  : Increasing code cache capacity to 128KB\nW System  : ClassLoader referenced unknown path:\nI QtCore  : Start\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Network.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Qml.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Gui.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Quick.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Widgets.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5Charts.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5QuickParticles.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5QuickTemplates2.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/app/org.qtproject.example.crio_Android-YwAVQhCj0m2GFmkjJTkxTg==/lib/arm/libQt5QuickControls2.so\" has unsupported flags DT_FLAGS_1=0x81\nW linker  : \"/data/data/org.qtproject.example.crio_Android/qt-reserved-files/plugins/platforms/android/libqtforandroid.so\" has unsupported flags DT_FLAGS_1=0x81\nI Qt      : qt started\nW linker  : \"/data/data/org.qtproject.example.crio_Android/qt-reserved-files/plugins/bearer/libqandroidbearer.so\" has unsupported flags DT_FLAGS_1=0x81\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        674 us, width=30, height=30\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :       1560 us, width=66, height=96\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :       1363 us, width=66, height=96\nI zygote  : Do partial code cache collection, code=59KB, data=54KB\nI zygote  : After code cache collection, code=59KB, data=54KB\nI zygote  : Increasing code cache capacity to 256KB\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        413 us, width=5, height=5\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        527 us, width=30, height=30\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        593 us, width=30, height=30\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        412 us, width=5, height=5\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        461 us, width=12, height=48\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        457 us, width=12, height=48\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :       1234 us, width=66, height=48\nD skia    : Encode PNG Singlethread processname=org.qtproject.example.crio_Android :        375 us, width=2, height=2\nD OpenGLRenderer: HWUI GL Pipeline\nD ViewRootImpl@12633f4[QtActivity]: setView = DecorView@3d0a71d[QtActivity] TM=true MM=false\nD ViewRootImpl@12633f4[QtActivity]: dispatchAttachedToWindow\nV Surface : sf_framedrop debug : 0x4f4c, game : false, logging : 0\nD ViewRootImpl@12633f4[QtActivity]: Relayout returned: old=[0,0][0,0] new=[0,0][1080,1920] result=0x7 surface={valid=true 3761723392} changed=true\nI OpenGLRenderer: Initialized EGL, version 1.4\nD OpenGLRenderer: Swap behavior 2\nD libGLESv1: STS_GLApi : DTS, ODTC are not allowed for Package : org.qtproject.example.crio_Android\nD mali_winsys: EGLint new_window_surface(egl_winsys_display *, void *, EGLSurface, EGLConfig, egl_winsys_surface **, egl_color_buffer_format *, EGLBoolean) returns 0x3000,  [1080x1920]-format:1\nD OpenGLRenderer: eglCreateWindowSurface = 0xe7b37918\nD ViewRootImpl@12633f4[QtActivity]: MSG_RESIZED_REPORT: frame=Rect(0, 0 - 1080, 1920) ci=Rect(0, 72 - 0, 0) vi=Rect(0, 72 - 0, 0) or=1\nD ViewRootImpl@12633f4[QtActivity]: MSG_WINDOW_FOCUS_CHANGED 1\nV InputMethodManager: Starting input: tba=android.view.inputmethod.EditorInfo@d6c9b60 nm : org.qtproject.example.crio_Android ic=null\nI InputMethodManager: startInputInner - mService.startInputOrWindowGainedFocus\nV InputMethodManager: Starting input: tba=android.view.inputmethod.EditorInfo@ad59819 nm : org.qtproject.example.crio_Android ic=null\nW linker  : \"/data/data/org.qtproject.example.crio_Android/qt-reserved-files/plugins/styles/libqandroidstyle.so\" has unsupported flags DT_FLAGS_1=0x81\n**F libc    : Fatal signal 6 (SIGABRT), code -6 in tid 8731 (qtMainLoopThrea)**\n</code></pre>\n\n<p>Thank you very much for your help!</p>\n"}, {"tags": ["c++", "regex", "qt", "qregularexpression"], "comments": [{"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1545241440, "post_id": 53856603, "comment_id": 94561007, "body": "You should use <code>regExp(&quot;goToNetPage\\\\s*\\&quot;[^\\&quot;]+\\&quot;&quot;)</code>. Or, <code>regExp(&quot;goToNetPage\\\\s*\\&quot;([^\\&quot;]+)&quot;)</code> and then access the value in Group 1 using <code>match.captured(1)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1545243540, "creation_date": 1545243540, "answer_id": 53857095, "question_id": 53856603, "link": "https://stackoverflow.com/questions/53856603/extract-urls-from-a-string-by-using-qregularexpression/53857095#53857095", "title": "Extract URLs from a string by using QRegularExpression", "body": "<p>You may use</p>\n\n<pre><code>QRegExp regExp(\"goToNetPage\\\\s*\\\"([^\\\"]+)\");\nQStringList MyList;\nint pos = 0;\n\nwhile ((pos = regExp.indexIn(handler, pos)) != -1) {\n    MyList &lt;&lt; regExp.cap(1);\n    pos += regExp.matchedLength();\n}\n</code></pre>\n\n<p>The pattern is</p>\n\n<pre><code>goToNetPage\\s*\"([^\"]+)\n</code></pre>\n\n<p>It matches <code>goToNetPage</code>, 0 or more whitespace chars, <code>\"</code> and then captures into Group 1 any 1+ chars other than <code>\"</code> - the required value is accessed  using <code>regExp.cap(1)</code>.</p>\n"}], "owner": {"reputation": 987, "user_id": 2029960, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/de66cac08607f4a8f77e2ae6bbc5e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Mosi", "link": "https://stackoverflow.com/users/2029960/mosi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53857095, "answer_count": 1, "score": 1, "last_activity_date": 1545243540, "creation_date": 1545241356, "question_id": 53856603, "link": "https://stackoverflow.com/questions/53856603/extract-urls-from-a-string-by-using-qregularexpression", "title": "Extract URLs from a string by using QRegularExpression", "body": "<p>I have a string like below:</p>\n\n<pre><code>on prepareFrame\n  go to frame 10\n    goToNetPage \"http://www.apple.com\"\n    goToNetPage \"http://www.cnn.com\"\n    etc..\nend \n</code></pre>\n\n<p>I want to extract all the urls from this string by using QRegularExpression. I've already tried:</p>\n\n<pre><code>QRegularExpression regExp(\"goToNetPage \\\"\\\\w+\\\"\");\nQRegularExpressionMatchIterator i = regExp.globalMatch(handler);\nwhile (i.hasNext()) {\n    QRegularExpressionMatch match = i.next();\n    QString handler = match.captured(0);\n}\n</code></pre>\n\n<p>But this not working. </p>\n"}, {"tags": ["c++", "pointers", "arduino"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 1, "creation_date": 1545241278, "post_id": 53856579, "comment_id": 94560932, "body": "What is wrong? The first snippet looks fine to me. Up to a possible overflow. The second makes a little sense, as your <code>avgs</code> is not a string, so checking for null-termination is meaningless."}, {"owner": {"reputation": 5, "user_id": 7136893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnczR.jpg?s=128&g=1", "display_name": "Daniel Falk", "link": "https://stackoverflow.com/users/7136893/daniel-falk"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1545241440, "post_id": 53856579, "comment_id": 94561008, "body": "I&#39;m using the average to calculate, if the input from sound module is high or low. When I tried writing it with pointers, it generates all sound as high. :( Without my bit of code it works perfectly fine.."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1545241506, "post_id": 53856579, "comment_id": 94561042, "body": "I have no idea what you are talking about. The first code is correct, but might produce an overflow in <code>sum</code>. Maybe that is what you observe? Try defining <code>sum</code> as larger integer type."}, {"owner": {"reputation": 5781, "user_id": 8746007, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Wr8CIbEqJ4w/AAAAAAAAAAI/AAAAAAAAAFE/Ym-NjswzViM/photo.jpg?sz=128", "display_name": "Killzone Kid", "link": "https://stackoverflow.com/users/8746007/killzone-kid"}, "edited": false, "score": 0, "creation_date": 1545258717, "post_id": 53856579, "comment_id": 94568108, "body": "You perform integer division the result will be int even without you casting it to int, and it won\u2019t be average. Say you have {1,2} array the average is 1.5 but your code will return 1, is this what you want?"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1545242638, "post_id": 53856640, "comment_id": 94561530, "body": "How is this different from the OPs first snippet? What problem does it solve?"}, {"owner": {"reputation": 5, "user_id": 7136893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnczR.jpg?s=128&g=1", "display_name": "Daniel Falk", "link": "https://stackoverflow.com/users/7136893/daniel-falk"}, "edited": false, "score": 0, "creation_date": 1545243598, "post_id": 53856640, "comment_id": 94561920, "body": "It is very similar, isn&#39;t it... But somehow this works perfectly, but my try didn&#39;t."}, {"owner": {"reputation": 2199, "user_id": 1762556, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/10LnU.jpg?s=128&g=1", "display_name": "Ki J&#233;y", "link": "https://stackoverflow.com/users/1762556/ki-j%c3%a9y"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1545558695, "post_id": 53856640, "comment_id": 94650171, "body": "@EugeneSh. If I understood correctly, the question was how to make a function work exactly like the first one but using pointer arithmetics to move through the array."}], "tags": [], "owner": {"reputation": 2199, "user_id": 1762556, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/10LnU.jpg?s=128&g=1", "display_name": "Ki J&#233;y", "link": "https://stackoverflow.com/users/1762556/ki-j%c3%a9y"}, "is_accepted": true, "score": -2, "last_activity_date": 1545241529, "creation_date": 1545241529, "answer_id": 53856640, "question_id": 53856579, "link": "https://stackoverflow.com/questions/53856579/how-to-correctly-use-pointers-to-compute-average/53856640#53856640", "title": "How to correctly use pointers to compute average", "body": "<p>Testing that your pointer doesn't point into a <code>\\0</code> is fine when you work with strings. Here you have an array of ints and a length so you can't really use a destination point to stop incrementing the pointer. You need to use that <code>len</code> just like in your first snippet but instead of accessing the <code>i</code>th element of your array, you can still increment the pointer. Something like this :</p>\n\n<pre><code>int compute_average(int *avgs, int len) {\n  int sum = 0;\n  for (int i = 0; i &lt; len; i++)\n    sum += *(avgs++);\n  return (int)(sum / len);\n}\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7136893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnczR.jpg?s=128&g=1", "display_name": "Daniel Falk", "link": "https://stackoverflow.com/users/7136893/daniel-falk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 53856640, "answer_count": 1, "score": -2, "last_activity_date": 1545256074, "creation_date": 1545241224, "last_edit_date": 1545256074, "question_id": 53856579, "link": "https://stackoverflow.com/questions/53856579/how-to-correctly-use-pointers-to-compute-average", "title": "How to correctly use pointers to compute average", "body": "<p>I want to use avgs as a pointer, but how would I modify the code below to use it correctly? I am computing the average of an int array, given the starting pointer and the length..</p>\n\n<pre><code>int compute_average(int *avgs, int len) {\n  int sum = 0;\n  for (int i = 0; i &lt; len; i++)\n  sum += avgs[i];\n  return (int)(sum / len);\n}\n</code></pre>\n\n<p>I tried writing it like this, but it didn't work correctly:</p>\n\n<pre><code>  do {sum += *avgs;} \n  while(*(avgs++)!='\\0');\n</code></pre>\n"}, {"tags": ["c++", "templates", "constexpr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545240348, "post_id": 53856314, "comment_id": 94560476, "body": "TL;DR of the dupe: function parameters are not compile time constant expressions, and can&#39;t be used as template parameters."}, {"owner": {"reputation": 138, "user_id": 931750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5a96ca4da75988b24caece757a556b?s=128&d=identicon&r=PG", "display_name": "ashlaban", "link": "https://stackoverflow.com/users/931750/ashlaban"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545241344, "post_id": 53856314, "comment_id": 94560963, "body": "Thanks @NathanOliver!"}], "owner": {"reputation": 138, "user_id": 931750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f5a96ca4da75988b24caece757a556b?s=128&d=identicon&r=PG", "display_name": "ashlaban", "link": "https://stackoverflow.com/users/931750/ashlaban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1545240301, "answer_count": 0, "score": 0, "last_activity_date": 1545240124, "creation_date": 1545240124, "question_id": 53856314, "link": "https://stackoverflow.com/questions/53856314/template-constexpr-deduction", "closed_reason": "Duplicate", "title": "Template constexpr deduction", "body": "<p>In the code below, why is <code>a</code> in <code>fn4</code> not considered a compile-time constant, when it is in <code>fn1</code>, <code>fn2</code> and <code>fn3</code>?\nCompiled with <code>clang++ -std=c++17 file.cxx</code></p>\n\n<pre><code>template&lt;typename T&gt;      constexpr T fn1(T a) {return a;}\ntemplate&lt;typename T, T a&gt; constexpr T fn2()    {return a;}\ntemplate&lt;typename T&gt;      constexpr T fn3(T a) {return fn1&lt;T&gt;(a);}\ntemplate&lt;typename T&gt;      constexpr T fn4(T a) {return fn2&lt;T, a&gt;();}\n\nint main() {\n    auto constexpr a = fn1&lt;int&gt;(1);\n    auto constexpr b = fn2&lt;int, 2&gt;();\n    auto constexpr c = fn3&lt;int&gt;(3);\n    auto constexpr d = fn4&lt;int&gt;(4);\n    return 0;\n}\n</code></pre>\n\n<p>Output using clang-7.0:</p>\n\n<pre><code>file.cxx:9:56: error: no matching function for call to 'fn2'\ntemplate&lt;typename T&gt;      constexpr T fn4(T a) {return fn2&lt;T, a&gt;();}\n                                                       ^~~~~~~~~\nfile.cxx:15:21: note: in instantiation of function template specialization 'fn4&lt;int&gt;' requested here\n        auto constexpr d = fn4&lt;int&gt;(4);\n                           ^\nfile.cxx:7:39: note: candidate template ignored: invalid explicitly-specified argument for template parameter 'a'\ntemplate&lt;typename T, T a&gt; constexpr T fn2()    {return a;}\n                                      ^\nfile.cxx:15:17: error: constexpr variable 'd' must be initialized by a constant expression\n        auto constexpr d = fn4&lt;int&gt;(4);\n                       ^   ~~~~~~~~~~~\n2 errors generated.\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545239652, "post_id": 53856164, "comment_id": 94560099, "body": "Please include the output and expected output in the question"}, {"owner": {"reputation": 89, "user_id": 10792316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9a9e156283d243d6072c2a44adba06?s=128&d=identicon&r=PG&f=1", "display_name": "snzm", "link": "https://stackoverflow.com/users/10792316/snzm"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545239843, "post_id": 53856164, "comment_id": 94560217, "body": "@PaulMcKenzie But when first declaring l2, and then using the same operator on a separate line it works. Why?  <code>List l2 = { size, new int[size] }; \tl2 = l1;</code>"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1545239878, "post_id": 53856164, "comment_id": 94560235, "body": "@snzm: Cuz <code>l2</code> exists at the point of the assignment."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545239957, "post_id": 53856164, "comment_id": 94560277, "body": "@snzm -- I suggest you follow the answers and links to the rule of 3.  Your assumptions about when, where (and even how) to properly copy an object are seriously flawed."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1545240456, "last_edit_date": 1545240456, "creation_date": 1545239651, "answer_id": 53856189, "question_id": 53856164, "link": "https://stackoverflow.com/questions/53856164/operator-overloading-modifies-original-object/53856189#53856189", "title": "operator overloading = modifies original object", "body": "<p><code>List l2 = l1;</code> calls the compiler-generated <em>copy constructor</em>, which does not deep copy the pointer member.</p>\n\n<p>If you were to use a <code>std::vector</code> for <code>items</code> then you could leave the constructors and assignment operator to the compiler. (You don't have any <code>delete[]</code> calls in your code which means that your class will leak memory like a colander leaks water.)</p>\n"}, {"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1545240056, "post_id": 53856229, "comment_id": 94560337, "body": "@Bathsheba I&#39;ve dared.  I even mentioned the rule of zero for completeness sake."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545240383, "post_id": 53856229, "comment_id": 94560495, "body": "OP, also make sure to read about the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\"><i>copy&amp;swap idiom</i></a>. It&#39;s makes writing copy/move assignment operator a no-brainer in 99% cases, as long as you already have a copy/move constructor."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 8, "last_activity_date": 1545240539, "last_edit_date": 1545240539, "creation_date": 1545239814, "answer_id": 53856229, "question_id": 53856164, "link": "https://stackoverflow.com/questions/53856164/operator-overloading-modifies-original-object/53856229#53856229", "title": "operator overloading = modifies original object", "body": "<p><code>List l2 = l1;</code> does not call the copy assignment operator (<code>operator=(const List&amp; l)</code>).  Since the \"assignment\" happens during a variable declaration you are instead initializing <code>l2</code> via copy initialization which is calling the compiler generated default copy  constructor.  Since it does a shallow copy both objects will point to the same data.</p>\n\n<p>If you are going to be writing your own classes that manage memory/resources you need to at least provide your own copy constructor, copy assignment operator and destrcutor.  This is known as <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">the rule of three</a>.  If you want to include move semantics then you need to provide a move constructor and move assignment operator, which is known as the rule of 5.  There is also the rule of zero, where use use types that already \"do the right thing\" (like using a <code>std::vector</code>) allowing the compiler generated defaults to work for you and you can read about all it at <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">The rule of three/five/zero</a></p>\n"}, {"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1545239922, "last_edit_date": 1545239922, "creation_date": 1545239869, "answer_id": 53856238, "question_id": 53856164, "link": "https://stackoverflow.com/questions/53856164/operator-overloading-modifies-original-object/53856238#53856238", "title": "operator overloading = modifies original object", "body": "<pre><code>List l2 = l1;\n</code></pre>\n\n<p>Despite the <code>=</code>, because this is a <em>declaration</em> you're performing copy construction (formally \"copy-initialisation\"), which has nothing to do with the assignment operator.</p>\n\n<p>You didn't define a copy constructor (which should look much like your copy assignment operator), so the pointers are indeed shared.</p>\n\n<p>The results would have been what you expected, had you written:</p>\n\n<pre><code>List l2{};\nl2 = l1;\n</code></pre>\n\n<p>By the way, I'd give <code>size</code> and <code>items</code> defaults (<code>0</code> and <code>nullptr</code> respectively), if I were you. Otherwise, when you forget that <code>{}</code>, the members have unspecified values and all hell breaks loose. This could be done with a nice default constructor, or by forgetting this whole enterprise and using a <code>std::vector</code> instead ;)</p>\n"}], "owner": {"reputation": 89, "user_id": 10792316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9a9e156283d243d6072c2a44adba06?s=128&d=identicon&r=PG&f=1", "display_name": "snzm", "link": "https://stackoverflow.com/users/10792316/snzm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 53856238, "answer_count": 3, "score": 4, "last_activity_date": 1545240539, "creation_date": 1545239556, "question_id": 53856164, "link": "https://stackoverflow.com/questions/53856164/operator-overloading-modifies-original-object", "title": "operator overloading = modifies original object", "body": "<pre><code>struct List {\n    int size;\n    int* items;\n    List&amp; operator=(const List&amp; l);\n};\n\nList&amp; List::operator=(const List&amp; l)\n{\n    delete[] items;\n    size = l.size;\n    items = new int[20];\n\n    for (int i = 0; i &lt; size; i++)\n        items[i] = l.items[i];\n\n    return *this;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; out, const List&amp; l)\n{\n    out &lt;&lt; \"Size: \" &lt;&lt; l.size &lt;&lt; \"\\t {\";\n    for (int i = 0; i &lt; l.size; i++)\n        out &lt;&lt; l.items[i] &lt;&lt; \" \";\n\n    return (out &lt;&lt; \"}\");\n}\n\nint main()\n{\n    int size = 6;\n    List l1 = { size, new int[size]{ 0, 1, 2, 3, 4, 5 } };\n    List l2 = l1;\n\n    l2.items[1] = 50;\n\n    cout &lt;&lt; l1 &lt;&lt; endl;\n    cout &lt;&lt; l2 &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm confused since when I assign <strong>l2 = l1</strong> by using an overloaded operator, why does the contents of l1 change, when altering l2 later on? Especially since l1 is passed as a const. They somehow point to the same object in memory instead of being a copy.</p>\n"}, {"tags": ["c++", "c++14"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1545239442, "post_id": 53856098, "comment_id": 94559983, "body": "a lambda with a capture is fundamentally different from a free function, try <code>std::function</code> which works basically with any callable"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545239510, "post_id": 53856098, "comment_id": 94560023, "body": "if you are not allowed to change <code>HANDLER</code> you are out of luck"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1545239515, "post_id": 53856098, "comment_id": 94560024, "body": "A capture-less lambda has no data it needs to store and so is safely convertible to a function pointer, but a lambda with a capture needs to store the captured data somewhere, and so can&#39;t be represented by just a function pointer. Use <code>std::function&lt;int(char*,int)&gt;</code>."}, {"owner": {"reputation": 2043, "user_id": 1053577, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/504273631/picture?type=large", "display_name": "John S", "link": "https://stackoverflow.com/users/1053577/john-s"}, "edited": false, "score": 0, "creation_date": 1545241682, "post_id": 53856098, "comment_id": 94561111, "body": "HANDLER is from someone else&#39;s code, I can&#39;t change it. Should I be able to use <code>std::bind</code> here, or will I run into the same problem?"}], "owner": {"reputation": 2043, "user_id": 1053577, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/504273631/picture?type=large", "display_name": "John S", "link": "https://stackoverflow.com/users/1053577/john-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1545239506, "answer_count": 0, "score": 0, "last_activity_date": 1545239358, "creation_date": 1545239358, "question_id": 53856098, "link": "https://stackoverflow.com/questions/53856098/defining-a-lambda-and-capturing-this-leads-to-confusing-compiler-error", "closed_reason": "Duplicate", "title": "defining a lambda and capturing this leads to confusing compiler error", "body": "<p>I'm getting a compiler error when trying to define a lambda capturing <code>this</code> in the constructor of an object. It looks like this:</p>\n\n<pre><code>typedef int (*HANDLER)(char*, int);\nstruct Foo {\nbool member;\nFoo() {\n     HANDLER h1 = [](char* one, int two)-&gt;int {\n         return 0;         // fine\n     };\n     HANDLER h2 = [](char* one, int two)-&gt;int {\n         member = false;   // error: 'this' was not captured - understood\n         return 0;\n      };\n     HANDLER h3 = [this](char* one, int two)-&gt;int {\n         member = false;   // ok now but other error as below\n         return 0;\n      };\n   }\n};\n</code></pre>\n\n<p><code>h1</code> is trivial and compiles fine. <code>h2</code> doesn't compile, because the member variable <code>member</code> is not captured. This also makes sense. But when I add <code>this</code> to the capture to get access to <code>member</code>, I get an error message that I'm struggling to parse:</p>\n\n<pre><code>mcve.cpp: In constructor \u2018Foo::Foo()\u2019:\nmcve.cpp:16:11: error: cannot convert \u2018Foo::Foo()::&lt;lambda(char*, int)&gt;\u2019 to \u2018HANDLER {aka int (*)(char*, int)}\u2019 in initialization\n       };\n       ^\n</code></pre>\n\n<p>This is using gcc 4.9.1 with -std=c++14, though I get the same error with clang-1000.11.45.5 on a Mac. Note that the <code>HANDLER</code> function pointer typedef is something I'm working with from an external library.</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "edited": false, "score": 0, "creation_date": 1545243566, "post_id": 53855922, "comment_id": 94561906, "body": "What is the value of <code>sigma</code> when <code>lorenz</code> instance is created?"}], "answers": [{"tags": [], "owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "is_accepted": false, "score": 0, "last_activity_date": 1545285065, "creation_date": 1545285065, "answer_id": 53863077, "question_id": 53855922, "link": "https://stackoverflow.com/questions/53855922/pass-parameter-to-boost-integrator/53863077#53863077", "title": "pass parameter to boost integrator", "body": "<p>After some struggling, I finally corrected that, post it here if somebody probably is interested:</p>\n\n<pre><code>class lorenz\n{\npublic:\n    void operator()(const dim1 &amp;x, dim1 &amp;dxdt, double t) const\n    {\n        dxdt[0] = sigma * (x[1] - x[0]);\n        dxdt[1] = R * x[0] - x[1] - x[0] * x[2];\n        dxdt[2] = -b * x[2] + x[0] * x[1];\n    }\n};\n\nclass lorenz_with_lyap \n{\n    const double sig;\npublic:\n    lorenz_with_lyap(double si) : sig(si) { }\n    void operator()(const dim1 &amp;x, dim1 &amp;dxdt, double t) const\n    {\n        dxdt[0] = sig * (x[1] - x[0]);\n        dxdt[1] = R * x[0] - x[1] - x[0] * x[2];\n        dxdt[2] = -b * x[2] + x[0] * x[1];\n        for (int l = 0; l &lt; num_of_lyap; ++l)\n        {\n            const double *pert = &amp;x[3 + l * 3];\n            double *dpert = &amp;dxdt[3 + l * 3];\n            dpert[0] = -sig * pert[0] + 10.0 * pert[1];\n            dpert[1] = (R - x[2]) * pert[0] - pert[1] - x[0] * pert[2];\n            dpert[2] = x[1] * pert[0] + x[0] * pert[1] - b * pert[2];\n        }\n    }\n};\n//------------------------------------------------------------------------\n// in main\n        lorenz_with_lyap lo(10.0);\n        t = integrate_n_steps(rk4, lo, x, t, dt, 100);\n        ...\n</code></pre>\n"}], "owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545285065, "creation_date": 1545238727, "last_edit_date": 1545239385, "question_id": 53855922, "link": "https://stackoverflow.com/questions/53855922/pass-parameter-to-boost-integrator", "title": "pass parameter to boost integrator", "body": "<p>I have read these answers <a href=\"https://stackoverflow.com/questions/33856910/passing-runtime-parameters-to-odeint-integrator/\">1</a>, <a href=\"https://stackoverflow.com/questions/40773530/passed-parameters-to-boost-odeint-in-c\">2</a> about passing parameter to odeint (Boost). \nI tried here to do the same process. but  the code give wrong answer.\nHere is my try:\nThis is simplified  code of boost calculation of lyapunov exponent of Lorenz oscillator.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/array.hpp&gt;\n#include &lt;boost/numeric/odeint.hpp&gt;\n#include \"gram_schmidt.hpp\"\n\nusing namespace std;\nusing namespace boost::numeric::odeint;\n\ntypedef vector&lt;double&gt; dim1;\n\nconst double sigma = 10.0;\nconst double R = 28.0;\nconst double b = 8.0 / 3.0;\nconst size_t n = 3;\nconst size_t num_of_lyap = 3;\nconst size_t N = n + n * num_of_lyap;\n\n\n// system with out perturbation\nstruct lorenz\n{\n    void operator()( const dim1 &amp;x , dim1 &amp;dxdt , double t ) const\n    {\n        dxdt[0] = sigma * ( x[1] - x[0] );\n        dxdt[1] = R * x[0] - x[1] - x[0] * x[2];\n        dxdt[2] = -b * x[2] + x[0] * x[1];\n    }\n};\n\n// system with perturbation\nvoid lorenz_with_lyap( const dim1 &amp;x , dim1 &amp;dxdt , double t )\n{\n    lorenz()( x , dxdt , t );\n\n    for( int l=0 ; l&lt;num_of_lyap ; ++l )\n    {\n        const double *pert = &amp;x[3 + l * 3]; \n        double *dpert = &amp;dxdt[3 + l * 3]; \n        dpert[0] = - sigma * pert[0] + 10.0 * pert[1];\n        dpert[1] = ( R - x[2] ) * pert[0] - pert[1] - x[0] * pert[2];\n        dpert[2] = x[1] * pert[0] + x[0] * pert[1] - b * pert[2];\n    }\n}\n\n//------------------------------------------------------------------------\n\nint main( int argc , char **argv )\n{\n    const double dt = 0.01;\n\n    dim1 x(N); \n    x[0] = 10.; x[1] = 10.0; x[2] = 5.0; // initial condition\n    dim1 lyap(3);\n\n    runge_kutta4&lt;dim1, double, dim1, double, range_algebra&gt; rk4;\n    // perform 10000 transient steps\n    integrate_n_steps(rk4, lorenz(), x, 0.0, dt, 10000);\n\n    fill( x.begin()+n , x.end() , 0.0 );\n    for( size_t i=0 ; i&lt;num_of_lyap ; ++i ) x[n+n*i+i] = 1.0;\n    fill( lyap.begin() , lyap.end() , 0.0 );\n\n    double t = 0.0;\n    size_t count = 0;\n    while( true )\n    {\n\n        t = integrate_n_steps( rk4 , lorenz_with_lyap , x , t , dt , 100 );\n        gram_schmidt&lt; num_of_lyap &gt;( x , lyap , n );\n        ++count;\n\n        if( !(count % 1000) )\n        {\n            cout &lt;&lt; t;\n            for( size_t i=0 ; i&lt;num_of_lyap ; ++i ) cout &lt;&lt; \"\\t\" &lt;&lt; lyap[i] / t ;\n            cout &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>first I defined these classes</p>\n\n<pre><code>class lorenz\n{\npublic:\n    void operator()...\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class lorenz_with_lyap\n{\npublic:\n    void operator()(const dim1 &amp;x, dim1 &amp;dxdt, double t) const\n    {\n        dxdt[0] = sigma * (x[1] - x[0]);\n        dxdt[1] = R * x[0] - x[1] - x[0] * x[2];\n        dxdt[2] = -b * x[2] + x[0] * x[1];\n        for (int l = 0; l &lt; num_of_lyap; ++l)\n        {\n            const double *pert = &amp;x[3 + l * 3];\n            double *dpert = &amp;dxdt[3 + l * 3];\n            dpert[0] = -sigma * pert[0] + sigma * pert[1];\n            dpert[1] = (R - x[2]) * pert[0] - pert[1] - x[0] * pert[2];\n            dpert[2] = x[1] * pert[0] + x[0] * pert[1] - b * pert[2];\n        }\n    }\n};\n</code></pre>\n\n<p>then I can change it a little to define a parameter:</p>\n\n<pre><code>class lorenz\n{\n    double sigma;\npublic:\n    lorenz(double si) : sigma(si) { }\n    void operator()...\n</code></pre>\n\n<p>but defining the <code>lorenz_with_lyap</code> class change the result, and I don't know where I am doing something wrong.</p>\n\n<p>Do you have any idea?\n(This is now a homework and I am going to check the result of this code with another method).\nThank you.</p>\n"}, {"tags": ["c++", "cgal"], "owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1548951076, "creation_date": 1545238587, "question_id": 53855874, "link": "https://stackoverflow.com/questions/53855874/circulating-through-points-of-alpha-shape-2", "title": "Circulating through points of alpha_shape_2", "body": "<p>I made a test for circulating through output points of alpha_shape_2. There is a square at vertices (0 0), (10 0), (10 10), (0 10).</p>\n\n<p>Obviously, <code>A.alpha_shape_vertices_begin()</code> begins with (10 0) and the incident vertex chosen by <code>incident_vertices</code> was (10, 10). Circulation was going good until I got a weird output (0.5 0.5) which should have been (10 0).</p>\n\n<p>I thought that (0.5 0.5) is past-end-value although circulators have no such thing. Thats why I tried <code>--vccopy</code> to stop circulation earlier and avoid (0.5 0.5). This cheap trick works for this specific case but not in general.</p>\n\n<p>I also checked edges. The same weird number (0.5 0.5) appears again. </p>\n\n<p>My ultimate goal is to make a simple polygon from points returned by alpha_shape_2. Purpose of circulating is to get ordered points.</p>\n\n<p>Anyone has idea why I get this weird number?</p>\n\n<pre><code>#include &lt;CGAL/Exact_predicates_exact_constructions_kernel.h&gt;\n#include &lt;CGAL/Alpha_shape_2.h&gt;\n#include &lt;CGAL/Alpha_shape_vertex_base_2.h&gt;\n#include &lt;CGAL/Alpha_shape_face_base_2.h&gt;\n#include &lt;CGAL/Polygon_2.h&gt;\n#include &lt;CGAL/Iso_rectangle_2.h&gt;\n#include &lt;CGAL/Delaunay_triangulation_2.h&gt;\ntypedef CGAL::Exact_predicates_exact_constructions_kernel CGAL_kernel;\ntypedef CGAL_kernel::Point_2 CGAL_Point;\ntypedef CGAL::Alpha_shape_vertex_base_2&lt;CGAL_kernel&gt; Vb;\ntypedef CGAL::Alpha_shape_face_base_2&lt;CGAL_kernel&gt; Fb;\ntypedef CGAL::Triangulation_data_structure_2&lt;Vb,Fb&gt; Tds;\ntypedef CGAL::Delaunay_triangulation_2&lt;CGAL_kernel,Tds&gt; Triangulation_2;\ntypedef CGAL::Alpha_shape_2&lt;Triangulation_2&gt; Alpha_shape_2;\ntypedef CGAL_kernel::FT FT;\ntypedef CGAL::Polygon_2&lt;CGAL_kernel&gt; Polygon_2;\n\nint main()\n{\n    std::deque&lt;Polygon_2&gt; pols;\n\n    std::vector&lt;CGAL_Point&gt; ptscgal;\n    ptscgal.push_back(CGAL_Point(0,0));\n    ptscgal.push_back(CGAL_Point(10,0));\n    ptscgal.push_back(CGAL_Point(10,10));\n    ptscgal.push_back(CGAL_Point(0,10));\n\n    Alpha_shape_2 A(ptscgal.begin(), ptscgal.end(), FT(10000), Alpha_shape_2::REGULARIZED);\n\n    Alpha_shape_2::Alpha_shape_vertices_iterator vit = A.alpha_shape_vertices_begin(),\n        vend = A.alpha_shape_vertices_end();\n\n    Alpha_shape_2::Alpha_shape_edges_iterator it = A.alpha_shape_edges_begin(),\n        end = A.alpha_shape_edges_end();\n\n    Triangulation_2::Vertex_circulator vc = A.incident_vertices(*vit);\n    Triangulation_2::Vertex_circulator vccopy = vc;\n    // --vccopy;\n\n    Triangulation_2::Edge_circulator ec = A.incident_edges(*vit);\n    Triangulation_2::Edge_circulator eccopy = ec;     \n\n    do\n    {\n        std::cout &lt;&lt; vc-&gt;point() &lt;&lt; std::endl;\n    }\n    while(++vc != vccopy);\n\n    do\n    {\n        std::cout &lt;&lt; *(ec-&gt;first-&gt;vertex(0)) &lt;&lt; \" \" &lt;&lt; *(ec-&gt;first-&gt;vertex(1)) &lt;&lt; std::endl;\n    }\n    while(++ec != eccopy);\n\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>10 10\n0 10\n0 0\n0.5 0.5 // ??\n\n10 0 10 10\n10 0 0 10\n0.5 0.5 10 0 // ??\n10 10 10 0\n</code></pre>\n"}, {"tags": ["c++", "class", "templates", "typedef"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545238464, "post_id": 53855786, "comment_id": 94559488, "body": "<code>typename T::test_t</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1545238479, "post_id": 53855786, "comment_id": 94559498, "body": "TL;DR of the dupe: You need <code>B(typename T::test_t obj)</code> in both cases."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545238516, "post_id": 53855786, "comment_id": 94559521, "body": "And also make <code>test_t</code> public."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1545238527, "post_id": 53855786, "comment_id": 94559525, "body": "All the members in your classes are private"}, {"owner": {"reputation": 11, "user_id": 9003697, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ghNCRFD9NfE/AAAAAAAAAAI/AAAAAAAAD7w/wMu2eI0BnKQ/photo.jpg?sz=128", "display_name": "Thomas Jespersen", "link": "https://stackoverflow.com/users/9003697/thomas-jespersen"}, "edited": false, "score": 0, "creation_date": 1545329822, "post_id": 53855786, "comment_id": 94595307, "body": "Thank you. That did it!"}], "owner": {"reputation": 11, "user_id": 9003697, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ghNCRFD9NfE/AAAAAAAAAAI/AAAAAAAAD7w/wMu2eI0BnKQ/photo.jpg?sz=128", "display_name": "Thomas Jespersen", "link": "https://stackoverflow.com/users/9003697/thomas-jespersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "closed_date": 1545238447, "answer_count": 0, "score": 1, "last_activity_date": 1545238294, "creation_date": 1545238294, "question_id": 53855786, "link": "https://stackoverflow.com/questions/53855786/use-typedefinition-from-other-class-in-constructor-of-templated-class", "closed_reason": "Duplicate", "title": "Use typedefinition from other class in constructor of templated class", "body": "<p>I am trying to make a class where the constructor takes in a parameter of a type corresponding to a typedefinition defined in the templated class.\nPlease see the following illustrational snippet which does not compile.</p>\n\n<pre><code>class A\n{\n    typedef enum test_t {\n        a1,\n        a2,\n        a3\n    } test_t;\n};\n\ntemplate &lt;class T&gt;\nclass B\n{\n    B(T::test_t obj);\n};\n\ntemplate &lt;class T&gt;\nB&lt;T&gt;::B(T::test_t obj)\n{\n\n}\n\n// Explicit definition to let compiler know a template instantiation\ntemplate class B&lt;A&gt;;\n</code></pre>\n\n<p>When compiling this code I get the following errors:</p>\n\n<blockquote>\n  <p>TemplatedClassTest.cpp:13:14: error: expected \u2018)\u2019 before \u2018obj\u2019</p>\n  \n  <p>TemplatedClassTest.cpp:17:8: error: expected constructor, destructor, or type conversion before \u2018(\u2019 token</p>\n</blockquote>\n"}, {"tags": ["c++", "c++17", "preprocessor"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 2, "creation_date": 1545237773, "post_id": 53855582, "comment_id": 94559080, "body": "The preprocessor runs before the compiler. The preprocessor doesn&#39;t know what a function call is, the compiler runs too late to intervene. Preprocessor functions/macros are evaluated the moment they&#39;re read, usually because of an <code>#include</code>."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 2, "creation_date": 1545237913, "post_id": 53855582, "comment_id": 94559169, "body": "What do you mean by &quot;evaluate the associated preprocessor functions in the order the functions are called in&quot;? What does the example code have to do with the question?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1545238516, "post_id": 53855582, "comment_id": 94559520, "body": "@bathsheba I do <code>#include</code> myself whenever I&#39;m not invited to a party and crash it, that&#39;s true"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1545238891, "post_id": 53855582, "comment_id": 94559714, "body": "@SombreroChicken: Do you crash it because of undefined behaviour, or due to a failed penetration test?"}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1545239204, "post_id": 53855582, "comment_id": 94559870, "body": "@bathsheba Aren&#39;t all successful penetration tests undefined behavior? Resulting in spawning a child process or not depending or the architecture?"}], "answers": [{"tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1545238830, "creation_date": 1545238830, "answer_id": 53855950, "question_id": 53855582, "link": "https://stackoverflow.com/questions/53855582/cpp-enforcing-a-preprocessor-evaluation-order/53855950#53855950", "title": "Cpp, enforcing a preprocessor evaluation order", "body": "<blockquote>\n  <p>Can I enforce Foo.h, Foo.cpp, Bar.h and Bar.cpp are evaluated before\n  Qux.h by the preprocessor?</p>\n</blockquote>\n\n<p>Not via the preprocessor, no.  The usual way to enforce a parse-ordering like that is via <code>#include</code> directives -- for example, if you want to guarantee that <code>Foo.h</code> and <code>Bar.h</code> are always parsed before <code>Qux.h</code>, then add <code>#include</code> lines at the top of <code>Qux.h</code> to guarantee it:</p>\n\n<pre><code>// Qux.h\n#ifndef QUX_H\n#define QUX_H\n\n#include \"Foo.h\"\n#include \"Bar.h\"\n\n[...]\n\n#endif\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 1, "last_activity_date": 1545238923, "creation_date": 1545238923, "answer_id": 53855978, "question_id": 53855582, "link": "https://stackoverflow.com/questions/53855582/cpp-enforcing-a-preprocessor-evaluation-order/53855978#53855978", "title": "Cpp, enforcing a preprocessor evaluation order", "body": "<blockquote>\n  <p>Can I enforce Foo.h, Foo.cpp, Bar.h and Bar.cpp are evaluated before\n  Qux.h</p>\n</blockquote>\n\n<p>You can enforce inclusion of <code>Foo.h</code> and <code>Bar.h</code> before <code>Qux.h</code>, one way of doing that:</p>\n\n<p>1) Put at the beginning (or even end) <code>Foo.h</code>:</p>\n\n<pre><code>#ifndef FOO_H_INCLUDED\n#define FOO_H_INCLUDED\n#endif\n</code></pre>\n\n<p>2) Put at the beginning (or end) <code>Bar.h</code>:</p>\n\n<pre><code>#ifndef BAR_H_INCLUDED\n#define BAR_H_INCLUDED\n#endif\n</code></pre>\n\n<p>(the above can actually also serve as inclusion guard, if you want to have it)</p>\n\n<p>3) Check in the <code>Qux.h</code>:</p>\n\n<pre><code>#ifndef FOO_H_INCLUDED\n#error Please include Foo.h before Qux.h!\n#endif\n\n#ifndef BAR_H_INCLUDED\n#error Please include Bar.h before Qux.h!\n#endif\n</code></pre>\n\n<p>The other way - simply add to beginning of <code>Qux.h</code>:</p>\n\n<pre><code>#include \"Foo.h\"\n#include \"Bar.h\"\n</code></pre>\n\n<p>That enforces that <code>Foo.h</code> and <code>Bar.h</code> are always processed before the rest of <code>Qux.h</code> (without having to check for the inclusion defs).</p>\n\n<p><code>Foo.cpp</code> and <code>Bar.cpp</code> have nothing to do with that, those are separate translation units build in a separate compiler (and preprocessor) run.</p>\n"}], "owner": {"reputation": 523, "user_id": 3512949, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4fc59f6dacd014ebd5d514d9425f5991?s=128&d=identicon&r=PG&f=1", "display_name": "blipman17", "link": "https://stackoverflow.com/users/3512949/blipman17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53855978, "answer_count": 2, "score": -2, "last_activity_date": 1545353401, "creation_date": 1545237606, "last_edit_date": 1545353401, "question_id": 53855582, "link": "https://stackoverflow.com/questions/53855582/cpp-enforcing-a-preprocessor-evaluation-order", "title": "Cpp, enforcing a preprocessor evaluation order", "body": "<p>Given the following snippet of code, with preprocessor trickery in every .h and .cpp file, is it possible to evaluate the associated preprocessor functions in the order the functions are called in? How could I enforce that whitout a lot of difficulty for the programmer who has to maintain this?</p>\n\n<pre><code>#include \"Foo.h\"\n#include \"Bar.h\"\n#include \"Qux.h\"\n\nint main()\n{\n    Foo foo = Foo();\n    Bar bar{};\n    foo.doFoo();\n    Qux::doQux();\n    return 0;\n}\n</code></pre>\n\n<p>Edit: \nSome clarification, let's assume Foo, Bar, Qux .cpp and .h declare preprocessor defenitions.\nCan I enforce Foo.h, Foo.cpp, Bar.h and Bar.cpp are evaluated before Qux.h by the preprocessor?</p>\n"}, {"tags": ["c++", "templates", "standards"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1545237625, "post_id": 53855546, "comment_id": 94559008, "body": "Unless someone has made a rejected proposal to implement what you are asking about, it&#39;s very difficult to objectively answer why that feature doesn&#39;t exist."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545237627, "post_id": 53855546, "comment_id": 94559010, "body": "For what it&#39;s worth, Rust does things like this, while C++ does not. If you&#39;d like C++ to do this, might want to join a committee."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545237688, "post_id": 53855546, "comment_id": 94559042, "body": "offtopic: storing amount of money in a bank account as flaoting point is not a good idea"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1545237783, "post_id": 53855546, "comment_id": 94559089, "body": "Could you refactor <code>showMeTheMoney()</code> into a non-member function which you can then specialize to operate on specific <code>BankAccount&lt;T&gt;</code> types?"}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1545238176, "post_id": 53855546, "comment_id": 94559321, "body": "@TypeIA That could be possible, but that&#39;s actually why I used the example of a bank account. I&#39;d like to assume that the implementation details should be internal and that the &#39;money&#39; member would normally not be accessible outside."}, {"owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545238294, "post_id": 53855546, "comment_id": 94559398, "body": "@user463035818 I assumed there was an issue with that. I used the example of a bank account because it was easy and trivial to do while implying that access to the field &#39;money&#39; should not be publicly available. Out of curiosity, (this is again offtopic) how should money be stored in a bank account? Encrypted with a 2 way encryption?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545238405, "post_id": 53855546, "comment_id": 94559457, "body": "I dont know the details, but for sure it should be a type with exact arithmetics (which floating point types are not)"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1545238561, "post_id": 53855546, "comment_id": 94559545, "body": "@MichaelChoi Use an integer type and store the cents: <a href=\"https://stackoverflow.com/questions/149033/best-way-to-store-currency-values-in-c\" title=\"best way to store currency values in c\">stackoverflow.com/questions/149033/&hellip;</a>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1545238983, "post_id": 53855546, "comment_id": 94559756, "body": "@MichaelChoi and it should probably be <i>stored</i> as a sequence of <code>Transaction</code> objects"}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545241468, "post_id": 53855546, "comment_id": 94561027, "body": "@nathanoliver Or likely even tenths or hundredths (thousandths?) of whatever your smallest denomination is. Otherwise doing e.g. interests will be inaccurate."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1545244415, "post_id": 53855546, "comment_id": 94562272, "body": "This is the language telling you these functions shouldn&#39;t be member functions."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545258130, "post_id": 53855546, "comment_id": 94567897, "body": "@Fran&#231;oisAndrieux Because it is sufficiently complex for some compilers (clang) to be confused by the rule. For example if you declare a specialization for a member of a class template, and latter declare a partial specialization of that class template in such a way that the previously declared specialization appears to be a specialization of a member of the partial specialization, then Clang will fail to recognize it (there is an open language issue about that). Clearly if you reached that point, it appears clearly it is sufficiently complex!"}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 10806577, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X9waOdRLeRU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gciJQJ0xxYgfog5PPqo8ljLBt2JA/mo/photo.jpg?sz=128", "display_name": "J&#252;rgen", "link": "https://stackoverflow.com/users/10806577/j%c3%bcrgen"}, "is_accepted": false, "score": 1, "last_activity_date": 1545243199, "creation_date": 1545243199, "answer_id": 53857019, "question_id": 53855546, "link": "https://stackoverflow.com/questions/53855546/why-is-template-specialization-of-member-functions-not-allowed/53857019#53857019", "title": "Why is template specialization of member functions not allowed?", "body": "<p>Because it is not a template specialization of a member function that you have written. It is specialization of the class. Hence, the code should look like this (I added a common base class that you don not have to define the members for all specifications):</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nclass BankAccountBase\n{\nprotected:\n    T money;\n    U interestRate;\n\npublic:\n    BankAccountBase(T money, U interestRate) :\n        money(money), interestRate(interestRate)\n    {}\n};\n\ntemplate &lt;typename T, typename U&gt;\nclass BankAccount\n{\n    T money;\n    U interestRate;\npublic:\n    BankAccount(T money, U interestRate) :\n        money(money), interestRate(interestRate)\n    {}\n\n    void showMeTheMoney();\n};\n\ntemplate &lt;typename U&gt;\nclass BankAccount &lt;int, U&gt; : public BankAccountBase &lt;int, U&gt;\n{\npublic:\n    BankAccount(int money, U interestRate) :BankAccountBase(money, interestRate) { }\n    void showMeTheMoney();\n};\n\ntemplate &lt;typename U&gt;\nclass BankAccount &lt;long, U&gt; : public BankAccountBase &lt;long, U&gt;\n{\npublic:\n    BankAccount(long money, U interestRate) :BankAccountBase(money, interestRate) { }\n    void showMeTheMoney();\n};\ntemplate &lt;typename U&gt;\nclass BankAccount &lt;float, U&gt; : public BankAccountBase &lt;float, U&gt;\n{\n    BankAccount(float money, U interestRate) :BankAccountBase(money, interestRate) { }\npublic:\n    void showMeTheMoney();\n};\ntemplate &lt;typename U&gt;\nclass BankAccount &lt;double, U&gt; : public BankAccountBase &lt;double, U&gt;\n{\npublic:\n    BankAccount(double money, U interestRate) :BankAccountBase(money, interestRate) { }\n    void showMeTheMoney();\n};\n\ntemplate &lt;typename U&gt;\nclass BankAccount &lt;long long, U&gt; : public BankAccountBase &lt;long long, U&gt;\n{\npublic:\n    BankAccount(long long money, U interestRate) :BankAccountBase(money, interestRate) { }\n    void showMeTheMoney();\n};\n\n\n// invalid code\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;int, U&gt;::showMeTheMoney()\n{\n    printf(\"$%d.00 interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;long, U&gt;::showMeTheMoney()\n{\n    printf(\"$%l.00 interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;long long, U&gt;::showMeTheMoney()\n{\n    printf(\"$%l.00 interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;float, U&gt;::showMeTheMoney()\n{\n    printf(\"$%.2f interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;double, U&gt;::showMeTheMoney()\n{\n    printf(\"$%.2f interest: %f\\n\", money, interestRate);\n}\n\nint main(int argc, char *argv[])\n{\n    BankAccount&lt;double, float&gt; b(500, 0.03);\n    b.showMeTheMoney();\n    BankAccount&lt;long long, float&gt; c(1234, 0.01);\n    c.showMeTheMoney();\n}\n</code></pre>\n"}], "owner": {"reputation": 590, "user_id": 4260902, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100000665496061/picture?type=large", "display_name": "Michael Choi", "link": "https://stackoverflow.com/users/4260902/michael-choi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1545243199, "creation_date": 1545237466, "last_edit_date": 1545239073, "question_id": 53855546, "link": "https://stackoverflow.com/questions/53855546/why-is-template-specialization-of-member-functions-not-allowed", "title": "Why is template specialization of member functions not allowed?", "body": "<p>If I had something trivial such as (and to clarify, I am not suggesting this is a good implementation, simply an example to demonstrate partial template specialization failure on member functions):</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nclass BankAccount\n{\n  T money;\n  U interestRate;\npublic:\n  BankAccount(T money, U interestRate) :\n    money(money), interestRate(interestRate)\n  {}\n\n  void showMeTheMoney();\n};\n</code></pre>\n\n<p>I would <strong>not</strong> be able to specialize each function by doing:</p>\n\n<pre><code>// invalid code\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;int, U&gt;::showMeTheMoney()\n{\n  printf(\"$%d.00 interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;long, U&gt;::showMeTheMoney()\n{\n  printf(\"$%l.00 interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;float, U&gt;::showMeTheMoney()\n{\n  printf(\"$%.2f interest: %f\\n\", money, interestRate);\n}\n\ntemplate &lt;typename U&gt;\nvoid BankAccount &lt;double, U&gt;::showMeTheMoney()\n{\n  printf(\"$%.2f interest: %f\\n\", money, interestRate);\n}\n\nint main(int argc, char *argv[])\n{\n  BankAccount&lt;double, float&gt; b(500, 0.03);\n  b.showMeTheMoney();\n  BankAccount&lt;std::uint64_t, float&gt; c(1234, 0.01);\n  c.showMeTheMoney();\n}\n</code></pre>\n\n<p>etc. Unfortunately C++ standards do not allow this:</p>\n\n<blockquote>\n  <p>14.5.5.3.1. The template parameter list of a member of a class template partial specialization shall match the template parameter list of the class template partial specialization. The template argument list of a member of a class template partial specialization shall match the template argument list of the class template partial specialization.</p>\n</blockquote>\n\n<p>So instead the only solutions (that I know of) are to use type traits or reproduce the entire class with boilerplate code. Is there a rationale behind this decision, or is this something that simply does not exist in C++ because there isn't enough demand, or some other reason?</p>\n"}, {"tags": ["c++", "class", "inheritance", "polymorphism", "stdvector"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 3, "creation_date": 1545237117, "post_id": 53855279, "comment_id": 94558730, "body": "<i>people are saying to do it the way I am doing it</i> Alas, they are wrong."}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1545237217, "post_id": 53855279, "comment_id": 94558782, "body": "It&#39;s very much possibly to safely do what you&#39;re trying to do without ugly <code>reinterpret_cast</code>s, and the language offers a variety of tools to do this. One is <a href=\"https://stackoverflow.com/questions/2391679/why-do-we-need-virtual-functions-in-c\"><code>virtual</code> methods</a>. But this question would be better answerable if you mentioned if you told us <i>what</i> you want to achieve, being as general as possible."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545241832, "post_id": 53855279, "comment_id": 94561181, "body": "Handy supplementary reading since you are learning inheritance: <a href=\"https://stackoverflow.com/questions/56860/what-is-an-example-of-the-liskov-substitution-principle\">The Lyskov Substitution Principle.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1545237496, "post_id": 53855522, "comment_id": 94558927, "body": "If you want, you can discard the <code>virtual</code>s on the derived class overrides. once a function becomes virtual it stays virtual"}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 2, "creation_date": 1545237656, "post_id": 53855522, "comment_id": 94559024, "body": "And the base class should have a virtual destructor. Also make sure that you delete the objects in the vector after done with it, because that is not performed by the vector destructor thus you&#39;ll have memory leaks otherwise."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1545237914, "post_id": 53855522, "comment_id": 94559171, "body": "@axalis added the virtual destructor; that was a good point. I have made a suggestion for smart pointers, and of course, your comment should direct the OP right path. ;)"}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": false, "score": 5, "last_activity_date": 1545237672, "last_edit_date": 1545237672, "creation_date": 1545237375, "answer_id": 53855522, "question_id": 53855279, "link": "https://stackoverflow.com/questions/53855279/base-class-vector-filled-with-sub-classes-not-working/53855522#53855522", "title": "Base class vector filled with sub-classes not working", "body": "<p>Usually, this is achieved by virtual functions. In the given case it should be a virtual getter function which returns the <code>char</code> members of each class.</p>\n\n<pre><code>class Base {\n    char A = 'A';\npublic:\n    virtual char getChar()const /*noexcept*/ { return A; }\n    virtual Base () = default;\n};\n\nclass Sub : public Base {\n    char B = 'B';\npublic:\n    char getChar()const /*noexcept*/ override { return B; }\n};\n\nclass Sub2 : public Base {\n    char C = 'C';\npublic:\n    char getChar()const /*noexcept*/ override { return C; }\n};\n</code></pre>\n\n<p>now in the main</p>\n\n<pre><code>std::cout &lt;&lt; List[0]-&gt;getChar() &lt;&lt; std::endl;\n</code></pre>\n\n<hr>\n\n<p>As a side note, I suggest you to have a look at <a href=\"https://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">smart pointers</a>, instead of the row pointers, by which you can avoid manual memory management.</p>\n\n<p>A good starting would be:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nstd::vector&lt;std::unique_ptr&lt;Base&gt;&gt; List;\nList.emplace_back(std::make_unique&lt;Sub&gt;());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "is_accepted": false, "score": 3, "last_activity_date": 1545238441, "last_edit_date": 1545238441, "creation_date": 1545237976, "answer_id": 53855684, "question_id": 53855279, "link": "https://stackoverflow.com/questions/53855279/base-class-vector-filled-with-sub-classes-not-working/53855684#53855684", "title": "Base class vector filled with sub-classes not working", "body": "<p>So you want this to work:</p>\n\n<pre><code>// your code version 1\nstd::cout&lt;&lt; List[0]-&gt;B &lt;&lt; std::endl; //it should be able to print B            \nstd::cout&lt;&lt; List[1]-&gt;C &lt;&lt; std::endl; //but it is being set as a base class \n</code></pre>\n\n<p>But what should happen if you write this instead?</p>\n\n<pre><code>// your code version 2\nstd::cout&lt;&lt; List[0]-&gt;C &lt;&lt; std::endl;\nstd::cout&lt;&lt; List[1]-&gt;B &lt;&lt; std::endl;\n</code></pre>\n\n<p><code>List[0]</code> doesn't have any <code>C</code> and <code>List[1]</code> doesn't have any <code>B</code>. How do you propose to treat this code?</p>\n\n<p>There are several ways to approach this.</p>\n\n<ol>\n<li>The <em>compiler</em> should know at <em>compilation time</em> that version 1 is right, and version 2 is wrong. Unfortuantely this is generally impossible because the compiler cannot keep track of what object pointer goes to which slot in the array. So this has to be dismissed.</li>\n<li>The <em>run time system</em> should detect the error at <em>run time</em>. This is a possible approach, but not one taken by C++. C++ is a <em>statically typed</em> language. Dynamically typed languages can handle this case. If you want a dynamically typed language, try e.g. Python.</li>\n<li>The compiler should not try to detect anything, and the runtime system should not try to detect anything either, but go ahead and perforrm the operation anyway, and let it produce wrong results or crash. This is also a possible approach, but not one taken by any modern high-level programming language. C++ and other modern languages are <em>typed</em>. It is possible to circumvent the type system of C++ by using <code>reinterpret_cast</code> and the like, but this is very dangerous and is not recommended.</li>\n<li>The compiler should treat both versions as wrong. This is what C++ does.</li>\n</ol>\n\n<p>As others have mentioned, the (only) right way to extend functionality of a class is via virtual functions. This requires some planning ahead. The base should at least declare <em>which</em> operations are needed, though it doesn't need to know <em>how</em> derived classes will implement them. </p>\n"}], "owner": {"reputation": 21, "user_id": 8315650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed5ec7d37d4fa243e1862467c41009a5?s=128&d=identicon&r=PG&f=1", "display_name": "Cubing Miner", "link": "https://stackoverflow.com/users/8315650/cubing-miner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1545246307, "creation_date": 1545236513, "last_edit_date": 1545246307, "question_id": 53855279, "link": "https://stackoverflow.com/questions/53855279/base-class-vector-filled-with-sub-classes-not-working", "title": "Base class vector filled with sub-classes not working", "body": "<p>I'm trying to have a vector of different subclass pointers that have a common base class. The vector is set to the base class pointer but anything that is added to the vector doesn't get the full functionality of the subclass it is.\nIt can be seen in the error log it is being treated as a base class so not getting the extended functionality.</p>\n\n<p>I've looked on loads of questions and people are saying to do it the way I am doing it, but for whatever reason, it's not working.</p>\n\n<p>The code is on a public repo.it:</p>\n\n<p><a href=\"https://repl.it/@cubingminer8/inheritance-with-vectors-testing\" rel=\"nofollow noreferrer\">https://repl.it/@cubingminer8/inheritance-with-vectors-testing</a></p>\n\n<p>Any help would be greatly appreciated!</p>\n\n<p>edit: ok so I'm going to use this for a sprite group system in a c++ sdl2 game engine. There will be a base sprite class that has some basic things like render and move, while any sprites I need will be their own classes that inherit from Sprite, they will have their own unique behaviors so virtual functions would be impractical. There will be a sprite group object, that objects that inherit from Sprite can be stored in. So they can all be rendered at once and such.</p>\n\n<p>If you have ever used <em>pygame</em> then it is almost identical to the sprite and spritegroup system used there.\n<a href=\"https://www.pygame.org/docs/tut/SpriteIntro.html\" rel=\"nofollow noreferrer\">https://www.pygame.org/docs/tut/SpriteIntro.html</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Base {\npublic:\n    char A = 'A';\n};\n\nclass Sub : public Base {\npublic:\n    char B = 'B';\n};\n\nclass Sub2 : public Base {\npublic:\n    char C = 'C';\n};\n\nint main() {\n    std::vector&lt;Base*&gt; List;\n    List.push_back(new Sub());\n    List.push_back(new Sub2());\n\n    std::cout &lt;&lt; List[0]-&gt;B &lt;&lt; std::endl; // it should be able to print B\n    std::cout &lt;&lt; List[1]-&gt;C &lt;&lt; std::endl; // but it is being set as a base class and\n                                          // not getting the functionality of the subclass it is.\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "uwp", "windows-runtime"], "answers": [{"tags": [], "owner": {"reputation": 34657, "user_id": 732221, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/C5p6I.jpg?s=128&g=1", "display_name": "Martin Zikmund", "link": "https://stackoverflow.com/users/732221/martin-zikmund"}, "is_accepted": false, "score": 0, "last_activity_date": 1545237562, "creation_date": 1545237562, "answer_id": 53855564, "question_id": 53855266, "link": "https://stackoverflow.com/questions/53855266/windows-runtime-component-c-struct-classes-returned-to-uwp/53855564#53855564", "title": "Windows Runtime Component C++ Struct/Classes Returned to UWP", "body": "<p>For a struct to be allowed as a public member of a class, you should mark it <code>public value struct</code>.</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/uwp/winrt-components/creating-windows-runtime-components-in-cpp#method-that-returns-a-custom-value-struct\" rel=\"nofollow noreferrer\">Here</a> is an example of returning custom struct.</p>\n\n<pre><code>namespace CppComponent\n{\n    // Custom struct\n    public value struct PlayerData\n    {\n        Platform::String^ Name;\n        int Number;\n        double ScoringAverage;\n    };\n\n    public ref class Player sealed\n    {\n    private:\n        PlayerData m_player;\n    public:\n        property PlayerData PlayerStats\n        {\n            PlayerData get(){ return m_player; }\n            void set(PlayerData data) {m_player = data;}\n        }\n    };\n}\n</code></pre>\n\n<p>The <a href=\"https://docs.microsoft.com/en-us/windows/uwp/winrt-components/creating-windows-runtime-components-in-cpp#ccx-built-in-types-library-types-and-windows-runtime-types\" rel=\"nofollow noreferrer\">documentation</a> has a lot of info, so it might be worth browsing for more info.</p>\n"}], "owner": {"reputation": 117, "user_id": 6432804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5395f7611c35e721b30f92da04f65b03?s=128&d=identicon&r=PG&f=1", "display_name": "Tim B", "link": "https://stackoverflow.com/users/6432804/tim-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 135, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545237581, "creation_date": 1545236473, "last_edit_date": 1545237581, "question_id": 53855266, "link": "https://stackoverflow.com/questions/53855266/windows-runtime-component-c-struct-classes-returned-to-uwp", "title": "Windows Runtime Component C++ Struct/Classes Returned to UWP", "body": "<p>I have inherited a C++ code base and need to create a new front end.  I was hoping to use Windows Universal Runtime Component to combine the UWP to the C++ code.  I have had a some success with primitive types and returning them from C++ to the C# code behind.  However when i attempt anything non primitive I get this error:</p>\n\n<blockquote>\n  <p>Severity  Code    Description Project File    Line    Suppression State\n  Error C3986   'functionName': signature of public member contains native\n  type 'C++Class::Struct' (compiling source file\n  Class.cpp)    WRC wrc1\\class.h</p>\n</blockquote>\n\n<p>Is there any way to decorate the C++ classes/structs in a way they would be returnable to the UWP projects C# code behind?</p>\n"}, {"tags": ["c++", "winforms", "visual-studio-2010", "clr"], "comments": [{"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1545237823, "post_id": 53855257, "comment_id": 94559118, "body": "Still linking with some library (static or dynamic) being 32-bit instead of 64-bit?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1545237956, "post_id": 53855257, "comment_id": 94559190, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11990095/lnk2022-metadata-operation-inconsistent-layout-information-in-duplicated-types\">LNK2022 metadata operation: Inconsistent layout information in duplicated types</a>"}, {"owner": {"reputation": 11, "user_id": 10811946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d36baa2beb3dbe4905cfb3c34f8b55?s=128&d=identicon&r=PG&f=1", "display_name": "DisDon", "link": "https://stackoverflow.com/users/10811946/disdon"}, "edited": false, "score": 0, "creation_date": 1545238490, "post_id": 53855257, "comment_id": 94559507, "body": "Alan, Thanks that was a good link.  One of the suggestions in that link recommended changing the Struct Member Alignment to 16 bytes.  Doing so allowed it to link properly... now I just have to figure out how/if that affects my code."}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 1667479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8179ce1301e77f01853d4eb7556c66e?s=128&d=identicon&r=PG", "display_name": "Vishnu Prasanth", "link": "https://stackoverflow.com/users/1667479/vishnu-prasanth"}, "is_accepted": false, "score": 0, "last_activity_date": 1605808368, "creation_date": 1605808368, "answer_id": 64917282, "question_id": 53855257, "link": "https://stackoverflow.com/questions/53855257/lnk2022-when-converting-vs2010-project-from-32-bit-to-64-bit/64917282#64917282", "title": "LNK2022 when converting VS2010 project from 32-bit to 64-bit", "body": "<p>Change Struct Member Alignment to &quot;bytes&quot; in Project settings-&gt; configuration Properties -&gt; C/C++ -&gt; Code generation.</p>\n<p>This is because 4 byte struct alignment is not supported in 64 bit. It needs to be at least 8 bytes (8x8 =64). You can change this option in settings to get through the compilation errors. it does not mean your program will be working.</p>\n<p><a href=\"https://i.stack.imgur.com/STi2C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/STi2C.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 11, "user_id": 10811946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12d36baa2beb3dbe4905cfb3c34f8b55?s=128&d=identicon&r=PG&f=1", "display_name": "DisDon", "link": "https://stackoverflow.com/users/10811946/disdon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1605808368, "creation_date": 1545236432, "question_id": 53855257, "link": "https://stackoverflow.com/questions/53855257/lnk2022-when-converting-vs2010-project-from-32-bit-to-64-bit", "title": "LNK2022 when converting VS2010 project from 32-bit to 64-bit", "body": "<p>I am converting a VS2010 project from 32-bit to 64-bit.  Compiles fine, but when it attempts to link, I get the following errors:</p>\n\n<pre><code> 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x040000bc).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x020000bc).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x040000c0).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x020000c0).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x040000c1).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x020000c1).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x040000c9).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x020000c6).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x040000ca).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x020000c7).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x040000de).\n 1&gt;MSVCURTD.lib(mstartup.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x020000d3).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000036).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000037).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000037).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000038).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x04000038).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x02000039).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x0400003b).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x0200003b).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x0400003c).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x0200003c).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x04000044).\n 1&gt;MSVCURTD.lib(dbgdel.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x0200003d).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000034).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000035).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000035).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000036).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x04000036).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x02000037).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x04000039).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x02000039).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x0400003a).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x0200003a).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x04000042).\n 1&gt;MSVCURTD.lib(delete2.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x0200003b).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000033).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000034).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000035).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000036).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x04000036).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x02000037).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x04000039).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x02000039).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x0400003a).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x0200003a).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x04000042).\n 1&gt;MSVCURTD.lib(mehvecdtr.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x0200003b).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000049).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x0200005e).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x0400004f).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000065).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x04000050).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x02000066).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x04000067).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x02000070).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x04000068).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x02000071).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x04000083).\n 1&gt;MSVCURTD.lib(xmutex.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x02000077).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000033).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000034).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x0400003a).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x0200003b).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x0400003b).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x0200003c).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x04000040).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x02000040).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x04000041).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x02000041).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x0400004b).\n 1&gt;MSVCURTD.lib(managdeh.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x02000044).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000035).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000036).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000039).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x0200003a).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x0400003a).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x0200003b).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x0400003f).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x02000040).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x04000040).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x02000041).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x0400004c).\n 1&gt;MSVCURTD.lib(_tolower.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x02000046).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000034).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000035).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000038).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000039).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HWND__; fields: &lt;alignment member&gt;): (0x04000039).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HWND__): (0x0200003a).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagRECT; fields: &lt;alignment member&gt;): (0x0400003e).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagRECT): (0x0200003f).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: HDC__; fields: &lt;alignment member&gt;): (0x0400003f).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (HDC__): (0x02000040).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _SECURITY_ATTRIBUTES; fields: &lt;alignment member&gt;): (0x0400004b).\n 1&gt;MSVCURTD.lib(xwctomb.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_SECURITY_ATTRIBUTES): (0x02000045).\n 1&gt;MSVCURTD.lib(_toupper.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: _GUID; fields: &lt;alignment member&gt;): (0x04000034).\n 1&gt;MSVCURTD.lib(_toupper.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (_GUID): (0x02000035).\n 1&gt;MSVCURTD.lib(_toupper.obj) : error LNK2022: metadata operation failed (80131188) : Inconsistent field declarations in duplicated types (types: tagMSG; fields: &lt;alignment member&gt;): (0x04000037).\n 1&gt;MSVCURTD.lib(_toupper.obj) : error LNK2022: metadata operation failed (801311D7) : Differing number of fields in duplicated types (tagMSG): (0x02000038).\n 1&gt;LINK : fatal error LNK1255: link failed because of metadata errors\n</code></pre>\n\n<p>This project is primarily a Windows Forms GUI that is interfacing to a .dll.  The .dll, which is a separate VS2010 project has compiled and linked fine.</p>\n\n<p>I have been beating my head against the wall for 2 days on the problem and am at a loss of where to look next.</p>\n\n<p>Please let me know of any other details that may be useful.</p>\n"}, {"tags": ["c++", "casting", "floating-point", "type-conversion", "precision"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545236199, "post_id": 53855167, "comment_id": 94558165, "body": "What is the size of <code>n</code>?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1545236236, "post_id": 53855167, "comment_id": 94558183, "body": "Please post code and results as text, not images."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545236297, "post_id": 53855167, "comment_id": 94558213, "body": "what&#39;s <code>type_t</code>?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1545236327, "post_id": 53855167, "comment_id": 94558233, "body": "@NathanOliver how do you suggest posting formulas as text? I&#39;d like to learn how to do this!"}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545236395, "post_id": 53855167, "comment_id": 94558281, "body": "@SergeyA ough, I messed up. size_t"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 3, "creation_date": 1545236567, "post_id": 53855167, "comment_id": 94558396, "body": "@SergeyA Well the first could just be written as <code>pi(n) &lt; 1.25506n &#47; ln n</code>.  The scond one would be <code>ceil(1.25506n &#47; ln n)</code>.  It&#39;s not perfect but now people that can&#39;t see or have imgur blocked can at least understand what the Q is asking."}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545236571, "post_id": 53855167, "comment_id": 94558401, "body": "@NathanOliver I followed this anser <a href=\"https://meta.stackexchange.com/a/60020\">meta.stackexchange.com/a/60020</a> . How to write formulas as text? E: Oh, OK, I see."}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545237046, "post_id": 53855167, "comment_id": 94558697, "body": "@MatthieuBrucher n should be as large that result of ceil( 1.25506n / ln n) &lt;= SIZE_MAX, where SIZE_MAX is maximal integer value size_t can represent."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1545237117, "post_id": 53855167, "comment_id": 94558729, "body": "The maximal size of your array is probably limited by the maximal amount of money you can spend on RAM. On 64-bit platforms <code>size_t</code> is going to be 2^64 elements, a huge number indeed, <code>UINT_MAX</code> is going to be massive, like 18446744073709551615."}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545237308, "post_id": 53855167, "comment_id": 94558818, "body": "@tadman OK, but let&#39;s reformulate question: I&#39;m want to do conversion from result of floating point operation with real numbers to size_t. I want to get number which is not smaller than actual result. How to do it? Also, is it ok to go with long double or it can produce problems?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545237409, "post_id": 53855167, "comment_id": 94558881, "body": "Can you better qualify what you want in terms of actual C++ code? You can cast a <code>double</code> to an unsigned int if you want, but you&#39;ll lose the decimal component and the upper bound of double is a lot higher than the upper bound of integers."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1545237513, "post_id": 53855167, "comment_id": 94558940, "body": "Perhaps this is a problem better suited for <a href=\"http://www.wolfram.com/mathematica/\" rel=\"nofollow noreferrer\">Mathematica</a> than C++."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545237579, "post_id": 53855167, "comment_id": 94558974, "body": "Provided that your number fit as an precise integer in a double (that 2**53 IIRC?), then use std::lround to get the value you want (<a href=\"https://en.cppreference.com/w/cpp/numeric/math/round\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/numeric/math/round</a>)"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1545237639, "post_id": 53855167, "comment_id": 94559014, "body": "You can simply do this with double arithmetic (maybe setting round mode to round upwards). And maybe add one to the result, just to be absolutely safe. I bet that you don&#39;t have that much RAM that the precision that double offers is not enough. And even, this upper bound is likely not tight, so it doesn&#39;t matter too much, whether you have floating point inaccuracies, or not."}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 1, "creation_date": 1545238442, "post_id": 53855167, "comment_id": 94559474, "body": "This question simplifies nicely to &quot;how to find the smallest <code>size_t</code> which is greater than or equal to 1.25506 * <i>n</i> / ln <i>n</i> (or detect if no such <code>size_t</code> value exists) where <i>n</i> is a <code>size_t</code>."}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545238847, "post_id": 53855167, "comment_id": 94559688, "body": "@tadman thanks, but I&#39;m doing this to refresh my C++ and learn how to solve similar data-type problems (and it is not my first time I&#39;m having this kind of trouble).  @ others - I want it to work for numbers representable with size_t, so I don&#39;t worry about overflow. I worry about lost of precision for big doubles and rounding it to wrong (smaller) value, though. So it is THEORETICALLY OK to do it  std::const_cast&lt;size_t&gt;(std::lround(std::ceil( 1.25506n / ln n)+1.0)) ?"}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545238863, "post_id": 53855167, "comment_id": 94559700, "body": "@tadman thanks, but I&#39;m doing this to refresh my C++ and learn how to solve similar data-type problems (and it is not my first time I&#39;m having this kind of trouble).  @ others - I want it to work for numbers representable with size_t, so I don&#39;t worry about overflow. I worry about lost of precision for big doubles and rounding it to wrong (smaller) value, though. So it is THEORETICALLY OK to do it  std::const_cast&lt;size_t&gt;(std::lround(std::ceil( 1.25506n / ln n)+1.0)) ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1545238926, "post_id": 53855167, "comment_id": 94559729, "body": "The best way to find out if it works for you is to actually execute that code and find out. That&#39;s not quite C++ code yet, but it&#39;s close."}, {"owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1545239179, "post_id": 53855167, "comment_id": 94559859, "body": "@tadman Thank you. I can &quot;get it done&quot; to work on my PC without this question. I want to learn &quot;doing it in the most correct way&quot; and why is it the right way. (after I get it compile-able by changing ln n to log(n) and adding * operators, is it allright?)"}], "answers": [{"comments": [{"owner": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 0, "creation_date": 1545341813, "post_id": 53857184, "comment_id": 94600030, "body": "When you write <code>1.25506</code>, you don&#39;t get 125506/100000. Most C++ compilation platforms give you the <code>double</code> closest to the rational, which can be below it. In the same spirit, you may want to write <code>nextafter(1.25506, DBL_MAX)</code>."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "reply_to_user": {"reputation": 75299, "user_id": 139746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BhJLC.png?s=128&g=1", "display_name": "Pascal Cuoq", "link": "https://stackoverflow.com/users/139746/pascal-cuoq"}, "edited": false, "score": 1, "creation_date": 1545342239, "post_id": 53857184, "comment_id": 94600194, "body": "@PascalCuoq: fortunately, the closest number is above it :) But you are right, I&#39;ll edit my answer, thanks!"}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": false, "score": 0, "last_activity_date": 1545342265, "last_edit_date": 1545342265, "creation_date": 1545243914, "answer_id": 53857184, "question_id": 53855167, "link": "https://stackoverflow.com/questions/53855167/casting-from-longdouble-to-size-t/53857184#53857184", "title": "Casting from (long)double to size_t", "body": "<p>Here's a way to do this:</p>\n\n<pre><code>#include &lt;cstddef&gt;\n#include &lt;cfloat&gt;\n#include &lt;cmath&gt;\n\nstd::size_t piUpperBound(std::size_t n) {\n    double x = n;\n    double num = nextafter(x, DBL_MAX);\n\n    x = log(x);\n    double den = nextafter(x, -DBL_MAX);\n\n    double result = num/den;\n    result = nextafter(1.25506, DBL_MAX)*nextafter(result, DBL_MAX);\n    result = nextafter(result, DBL_MAX);\n\n    return ceil(result);\n}\n</code></pre>\n\n<p>This code supposes that <code>log</code> has at most 1 ulp error.</p>\n\n<p>The basic idea is to use <code>nextafter</code>, which provides us the next possible floating point number. After each operation I call <code>nextafter</code>, to modify the number in a way so the resulting expression keeps being an upper bound.</p>\n\n<p>A better bound could be created, if we suppose, that division, multiplication is correctly rounded (true for IEEE-754), and instead of <code>nextafter</code>, we could adjust rounding mode (to always round up or down).</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>Using <code>ceil</code> for the original expression may be conservative. For example, if pi(...)=12.2, there are 12 primes number at most, not 13.</li>\n<li>This formula is very conservative, as you can see <a href=\"https://www.wolframalpha.com/input/?i=pi(x),+1.25506*x%2Fln(x)+for+x%3D100000..1000000\" rel=\"nofollow noreferrer\">here</a>. So, actually, this whole floating-point business is not required. Even if the code miscalculates a little bit, it will still be an upper bound by a large margin.</li>\n</ul>\n"}], "owner": {"reputation": 177, "user_id": 3865098, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w38uA.jpg?s=128&g=1", "display_name": "tbukic", "link": "https://stackoverflow.com/users/3865098/tbukic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1545342265, "creation_date": 1545236082, "last_edit_date": 1545244051, "question_id": 53855167, "link": "https://stackoverflow.com/questions/53855167/casting-from-longdouble-to-size-t", "title": "Casting from (long)double to size_t", "body": "<p>I'm trying to implement Sieve of Eratosthenes as efficient as possible. I'd like to set length of my prime array to upper bond of\n<code>pi(n) &lt; 1.25506n / ln n</code> \nbut I'm not sure how to proceed with conversions to do it safely, nor which combination of types is the best for this.</p>\n\n<p>Maximal length of my list would be limited by maximal size of array.</p>\n\n<p>My guess is that ideal combination depends of how size_t is implemented internally and it's upper limit.</p>\n\n<p>I'd like to get result as close to\n<code>ceil( 1.25506n / ln n)</code> without ever getting smaller number.</p>\n\n<p>Any advises on how to do that?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017", "sfml"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1545234715, "post_id": 53854740, "comment_id": 94557235, "body": "<b><i>The application was unable to start correctly</i></b> That means you don&#39;t have the required dlls in any of the folders listed in your  windows <code>PATH</code> environment variable or in the same location as your executable. The <code>0xc000007b</code> code also tells you that if you google it."}, {"owner": {"reputation": 35, "user_id": 8754241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08321a6997395b8c3402069cd8cfed74?s=128&d=identicon&r=PG&f=1", "display_name": "Deja", "link": "https://stackoverflow.com/users/8754241/deja"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545234868, "post_id": 53854740, "comment_id": 94557336, "body": "Well, what I did was just add all the .dll files (just to be safe) from the folder SFML gave me to the project folder. Could they be in the wrong spot or maybe I am just missing one?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545234928, "post_id": 53854740, "comment_id": 94557366, "body": "They need to be in the same place as the executable (which is not the project folder) it should be in the Debug or Release subfolder of the project. Also make sure you don&#39;t mix debug and release as these are incompatible with each other."}, {"owner": {"reputation": 35, "user_id": 8754241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08321a6997395b8c3402069cd8cfed74?s=128&d=identicon&r=PG&f=1", "display_name": "Deja", "link": "https://stackoverflow.com/users/8754241/deja"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545234931, "post_id": 53854740, "comment_id": 94557371, "body": "Okay thank you. I will google the error and see if I can move the files around to the correct spot. I appreciate your help!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545235230, "post_id": 53854740, "comment_id": 94557596, "body": "Also make sure you are not mixing 32 and 64 bit. If your dlls are 64 bit your application has to be 64bit same goes for 32 bit."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545235278, "post_id": 53854740, "comment_id": 94557635, "body": "Also, the DLL&#39;s have to be the same &quot;bitness&quot; as your application.  If you&#39;re mixing up 32-bit DLLs with a 64-bit app or vice-versa, that exception can also show up."}, {"owner": {"reputation": 35, "user_id": 8754241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08321a6997395b8c3402069cd8cfed74?s=128&d=identicon&r=PG&f=1", "display_name": "Deja", "link": "https://stackoverflow.com/users/8754241/deja"}, "edited": false, "score": 1, "creation_date": 1545235868, "post_id": 53854740, "comment_id": 94557977, "body": "Thank you all so much... I got it to work. After I put in the .dll to the correct folder I got an error saying &quot;module x64 not compatible with machine x86&quot; so I switched to the 32 bit .dll and it works perfect. Again, I appreciate all your help!"}], "answers": [{"tags": [], "owner": {"reputation": 482, "user_id": 4760674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tMvVK.jpg?s=128&g=1", "display_name": "Major", "link": "https://stackoverflow.com/users/4760674/major"}, "is_accepted": false, "score": 0, "last_activity_date": 1545238538, "creation_date": 1545238538, "answer_id": 53855860, "question_id": 53854740, "link": "https://stackoverflow.com/questions/53854740/while-using-sfml-i-am-getting-a-memory-or-out-of-bounds-exception-what-is-the-i/53855860#53855860", "title": "While using SFML I am getting a memory or out of bounds exception, what is the issue?", "body": "<p>The answer is already mentioned in the comments, but I will put an actual answer here so it's more visible.</p>\n\n<p>The error code <code>0xc000007b</code> means that the required <code>.dll</code> files are not in located in <code>PATH</code> or the local directory.  To fix this issue, either place your required <code>.dll</code>s in a directory in the system <code>PATH</code>, or in the executable directory.</p>\n\n<p>Also, you need to make sure that you do not mix 32 bit and 64 bit libraries, they are incompatible with each other.</p>\n\n<p>Thank you <a href=\"https://stackoverflow.com/users/487892/drescherjm\">drescherjm</a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 8754241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08321a6997395b8c3402069cd8cfed74?s=128&d=identicon&r=PG&f=1", "display_name": "Deja", "link": "https://stackoverflow.com/users/8754241/deja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545238538, "creation_date": 1545234491, "question_id": 53854740, "link": "https://stackoverflow.com/questions/53854740/while-using-sfml-i-am-getting-a-memory-or-out-of-bounds-exception-what-is-the-i", "title": "While using SFML I am getting a memory or out of bounds exception, what is the issue?", "body": "<p>I am learning how to link SFML so I can use the window tools. My ultimate goal is to write some sort of Chess or Asteroid game just to practice getting better at programming. I used the SFML tutorial to get all of my linking straightened out, and I am doing it dynamically with the .dll files. Everything in this code compiles on Visual Studio 2017, but when the console comes up the error I get is , \"The application was unable to start correctly (0xc000007b).\" </p>\n\n<p>I am assuming this is some sort of memory error? It took me a while to learn the linking and now I am stuck. Thanks for any help!</p>\n\n<p>PS. This is just suppose to be a simple display a window with a green circle inside of it. </p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/Window.hpp&gt;\n#include &lt;time.h&gt;\n\nusing namespace sf;\n\nint main()\n{\n    RenderWindow window(VideoMode(200,200), \"My First Window\");\n    CircleShape shape(100.f);\n    shape.setFillColor(Color::Green);\n\n    while (window.isOpen())\n    {\n      Event event;\n    while (window.pollEvent(event))\n    {\n      if (event.type == Event::Closed)\n      {\n        window.close();\n      }\n      window.clear();\n      window.draw(shape);\n      window.display();\n    }\n  }\n  return EXIT_SUCCESS;\n  }\n</code></pre>\n"}, {"tags": ["c++", "design-patterns"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545235192, "post_id": 53854704, "comment_id": 94557568, "body": "there are probably millions of design practices, whether they are good is a matter of debate. Usually, what works is good ;)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1545235666, "post_id": 53854704, "comment_id": 94557858, "body": "You shouldn&#39;t be thinking in terms of concrete things such as &quot;memory&quot; or &quot;CPU&quot; and instead in more abstract terms like &quot;component&quot; or &quot;connector&quot;. For example, a CPU is just a component that fits into a particular socket, and a motherboard is a component that has that socket. As a socket is just a type of connector it all works out. When it comes to &quot;functions&quot; that&#39;s entirely subjective. Can a computer without a CPU play a game? No. What about without a hard drive? Yes!"}, {"owner": {"reputation": 3, "user_id": 10811918, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hYWGUS-SKMU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g2UugFpZLkC_GiKo4x0FRfnHc0GA/mo/photo.jpg?sz=128", "display_name": "ForcieTV", "link": "https://stackoverflow.com/users/10811918/forcietv"}, "edited": false, "score": 0, "creation_date": 1545239709, "post_id": 53854704, "comment_id": 94560143, "body": "Why what is the difference? An object can either be abstract or concrete Component is akin is saying object. You can still have concrete component and abstract component..."}], "answers": [{"tags": [], "owner": {"reputation": 910, "user_id": 3332581, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fa1d0b48d4ec4d535c0e7a48882c2eb3?s=128&d=identicon&r=PG", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/3332581/ashkan"}, "is_accepted": true, "score": 1, "last_activity_date": 1545235435, "creation_date": 1545235435, "answer_id": 53854985, "question_id": 53854704, "link": "https://stackoverflow.com/questions/53854704/correct-way-to-design-classes/53854985#53854985", "title": "Correct way to design classes", "body": "<p>The topic you are looking for is \"Design patterns\".</p>\n\n<p>Basically any code that you can compile and run is \"OK\" as far as the system is concerned. </p>\n\n<p>You have to define your problem, define the restrictions, find all the tool you have at your hand and then decide what is the best design for you.</p>\n\n<p>For a usual system I think what you are looking for is the composite design pattern. </p>\n\n<p>In the composite pattern you provide a general enough interface to present the operations that are the same for all the components, further more each composite object may have children that are also composite. This you could think of as breaking down the structure. In your example, </p>\n\n<pre><code>                 computer\n                /   |   \\\n              HDD  RAM  GPU\n</code></pre>\n\n<p>Each of these sub-parts may have their own sub parts as well.</p>\n\n<p>This pattern is very well described in various places so I will not go any deeper into it.</p>\n\n<p><a href=\"https://sourcemaking.com/design_patterns/composite\" rel=\"nofollow noreferrer\">Here</a> is one link to a description (the first one I found)</p>\n\n<p>Also the book <a href=\"https://rads.stackoverflow.com/amzn/click/com/0201633612\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Design patterns: elements of reusable object-oriented software</a> is a must read in my mind.</p>\n"}], "owner": {"reputation": 3, "user_id": 10811918, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hYWGUS-SKMU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g2UugFpZLkC_GiKo4x0FRfnHc0GA/mo/photo.jpg?sz=128", "display_name": "ForcieTV", "link": "https://stackoverflow.com/users/10811918/forcietv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1545235508, "accepted_answer_id": 53854985, "answer_count": 1, "score": -3, "last_activity_date": 1545245226, "creation_date": 1545234409, "last_edit_date": 1545245226, "question_id": 53854704, "link": "https://stackoverflow.com/questions/53854704/correct-way-to-design-classes", "closed_reason": "Opinion-based", "title": "Correct way to design classes", "body": "<p>How should you design classes?\nSay for example you want to use a class to design a computer.\nMy approach would be to store objects in the class:\nRAM, HARD DISK, CPU, MOTHERBOARD</p>\n\n<p>Provide functions to build the computer:</p>\n\n<p>OBTAIN MOTHERBAORD func</p>\n\n<p>ADD HARD DISK to MOTHERBOARD func</p>\n\n<p>ADD CPU to MOTHERBOARD func</p>\n\n<p>ADD RAM to MOTHERBOARD func</p>\n\n<p>Provide other functions the computer can do:\nPlAY MARIO KART func</p>\n\n<p>Is there any problem with this approach?\nIs there any good class design practices one should follow?</p>\n"}, {"tags": ["c++", "null"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1545234338, "post_id": 53854676, "comment_id": 94556953, "body": "Please provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545234398, "post_id": 53854676, "comment_id": 94557007, "body": "&quot;It seems like the pointer changes from 0 to 0x4&quot; how do you know? There are two <code>cout</code>s in the method and they print values of two different pointers. What is the output, what did you expect?"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1545234444, "post_id": 53854676, "comment_id": 94557044, "body": "I&#39;m seeing a definition for your <code>Tree</code>&#39;s constructor outside the class but I don&#39;t see it&#39;s corresponding declaration? \ud83e\udd14 Perhaps you forgot to change a few words?"}, {"owner": {"reputation": 35, "user_id": 9218917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yl0MYIs_knw/AAAAAAAAAAI/AAAAAAAAACQ/lRTbNiaI0iA/photo.jpg?sz=128", "display_name": "No Name", "link": "https://stackoverflow.com/users/9218917/no-name"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545234721, "post_id": 53854676, "comment_id": 94557242, "body": "@user463035818 I left wrong part of the code, I changed it to how it suppose to be like."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1545234798, "post_id": 53854676, "comment_id": 94557300, "body": "@NoName . Now include a <code>main</code> that exercises this, as well as whatever the mysterious <code>&#47;&#47; do something</code> actually does, along with the expected output and actual output, and we may have something to work with."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545234809, "post_id": 53854676, "comment_id": 94557301, "body": "still not clear how you get the idea that the value changes from <code>0</code> to <code>0x4</code>. You&#39;d need at least two <code>cout</code>s to see that, or use a debugger"}, {"owner": {"reputation": 7130, "user_id": 10239789, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YeHJm.png?s=128&g=1", "display_name": "TrebledJ", "link": "https://stackoverflow.com/users/10239789/trebledj"}, "edited": false, "score": 0, "creation_date": 1545234928, "post_id": 53854676, "comment_id": 94557367, "body": "Also side note: use <code>nullptr</code> instead of <code>NULL</code> for pointers."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545235023, "post_id": 53854676, "comment_id": 94557446, "body": "to expand on WhozCraig comment: We actually dont really care what is the real code you are working at (maybe we do, but usually your real code is out of scope and too much to be discussed here). What we need is code that does exactly expose the behaviour you describe, because if you tell us the code prints something when in fact it cannot compile then we cannot help you. Best is if you prepare a small example, compile it to see it does and only then post it"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 3, "creation_date": 1545235058, "post_id": 53854676, "comment_id": 94557469, "body": "Fyi, <code>Tree tree = tree();</code> isn&#39;t valid C++. If anything that line should just be <code>Tree tree;</code> Going to ask again: Post a <b>real</b> <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that produces your problem, with clear explanation of expected vs actual operation, or this question is destined to be closed."}, {"owner": {"reputation": 35, "user_id": 9218917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yl0MYIs_knw/AAAAAAAAAAI/AAAAAAAAACQ/lRTbNiaI0iA/photo.jpg?sz=128", "display_name": "No Name", "link": "https://stackoverflow.com/users/9218917/no-name"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545235837, "post_id": 53854676, "comment_id": 94557958, "body": "@user463035818 now it should what my problem is."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545236080, "post_id": 53854676, "comment_id": 94558089, "body": "how do you know it enters the while loop? maybe it does not. using a debugger &gt;&gt; guessing"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545236119, "post_id": 53854676, "comment_id": 94558117, "body": "@user463035818 In fact it <i>should</i> not, because <code>temp == root == NULL</code> (and the OP, in fairness, does say this)."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545236531, "post_id": 53854676, "comment_id": 94558373, "body": "@LightnessRacesinOrbit memory could be corrupted in a way that causes the while loop to be executed, we dont know (and OP also states that while is entered). Anyhow, case is closed and its pointless to discuss details in presence of UB"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545237419, "post_id": 53854676, "comment_id": 94558886, "body": "@user463035818 That is true!"}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1545236084, "post_id": 53855148, "comment_id": 94558093, "body": "Notice how this problematic code was hidden by you until revision #5; please next time present a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> up-front (i.e. the <i>first</i> time) so that we can avoid this drawn-out procedure!"}, {"owner": {"reputation": 35, "user_id": 9218917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yl0MYIs_knw/AAAAAAAAAAI/AAAAAAAAACQ/lRTbNiaI0iA/photo.jpg?sz=128", "display_name": "No Name", "link": "https://stackoverflow.com/users/9218917/no-name"}, "edited": false, "score": 0, "creation_date": 1545236622, "post_id": 53855148, "comment_id": 94558436, "body": "That was a mistake it should not be a pointer but normal structure. I changed it to how it suppose to be and now everything works flawlessy. This pointer that doesn&#39;t point to anything was the cause of this issue. It somehow changed the value of root pointer."}, {"owner": {"reputation": 1007, "user_id": 2826535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e8ad4f5da7e39c0839d9eb6012bf6fc?s=128&d=identicon&r=PG&f=1", "display_name": "Julo", "link": "https://stackoverflow.com/users/2826535/julo"}, "reply_to_user": {"reputation": 35, "user_id": 9218917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yl0MYIs_knw/AAAAAAAAAAI/AAAAAAAAACQ/lRTbNiaI0iA/photo.jpg?sz=128", "display_name": "No Name", "link": "https://stackoverflow.com/users/9218917/no-name"}, "edited": false, "score": 0, "creation_date": 1545237167, "post_id": 53855148, "comment_id": 94558755, "body": "@NoName no, it can not be a normal structure and it must be a pointer <i>(and you must initialise the pointer)</i>. Because normal structure will be created on stack and changed/deleted after the function ends. Then the pointer points to some part of memory, that was already overridden by other functions."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545237468, "post_id": 53855148, "comment_id": 94558910, "body": "What Julo said. If you&#39;re going to store a pointer to it, you&#39;ll need to dynamically allocate it. From the sounds of it, you&#39;ve made a slight improvement but now have a dangling pointer in your tree, effectively only <i>moving</i> the problem elsewhere."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1545237576, "last_edit_date": 1545237576, "creation_date": 1545236029, "answer_id": 53855148, "question_id": 53854676, "link": "https://stackoverflow.com/questions/53854676/pointer-of-struct-changes/53855148#53855148", "title": "Pointer of struct changes", "body": "<p>What does <code>wst</code> point to?</p>\n\n<pre><code>tree *wst;\nwst-&gt;val = x;\nwst-&gt;lChild = NULL;\nwst-&gt;rChild = NULL;\n// [...]\nwst-&gt;Parent = p;\n</code></pre>\n\n<p>Whoops! Your program has undefined behaviour. No wonder it crashes. :)</p>\n\n<p>You probably need <code>tree* wst = new tree();</code> there. Don't forget to <code>delete</code> your nodes in the <code>Tree</code> destructor, too!</p>\n\n<p>And I'd advise against having a type <code>Tree</code> plus a type <code>tree</code>; perhaps call the latter <code>Node</code> instead?</p>\n"}], "owner": {"reputation": 35, "user_id": 9218917, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-yl0MYIs_knw/AAAAAAAAAAI/AAAAAAAAACQ/lRTbNiaI0iA/photo.jpg?sz=128", "display_name": "No Name", "link": "https://stackoverflow.com/users/9218917/no-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53855148, "answer_count": 1, "score": -1, "last_activity_date": 1545237576, "creation_date": 1545234297, "last_edit_date": 1545235898, "question_id": 53854676, "link": "https://stackoverflow.com/questions/53854676/pointer-of-struct-changes", "title": "Pointer of struct changes", "body": "<pre><code>#include&lt;stack&gt;\n#include&lt;iostream&gt;\n\nclass Tree{\n    private:\n        struct tree{\n            int val;\n            tree * lChild;\n            tree * rChild;\n            tree * Parent;\n        };\n        tree *root;\n    public:\n        Tree();\n        void insert(int x);\n};\n\nTree::Tree(){\n    root = NULL;\n    std::cout&lt;&lt;\"ROOT inside constructor : \"&lt;&lt;root&lt;&lt;std::endl;\n}\n\nvoid Tree::insert(int x){\n    tree *wst;\n    wst-&gt;val = x;\n    wst-&gt;lChild = NULL;\n    wst-&gt;rChild = NULL;\n\n    tree *temp = root;\n    tree *p = NULL;\n\n\n    std::cout&lt;&lt;\"ROOT inside insert : \"&lt;&lt;root&lt;&lt;std::endl;\n\n    while(temp != NULL){\n        p = temp;\n        if(x &lt; temp-&gt;val)\n            temp = temp-&gt;lChild;\n        else\n            temp = temp-&gt;rChild;\n    }\n\n    std::cout&lt;&lt;x&lt;&lt;std::endl;\n\n    wst-&gt;Parent = p;\n\n    if(p == NULL){\n        root = wst;\n    }\n    else{\n        if(x &lt; p-&gt;val)\n            p-&gt;lChild = wst;\n        else\n            p-&gt;rChild = wst;\n    }\n\n}\n\n\nint main(){\n    Tree tree;\n\n    tree.insert(404);\n\n}\n</code></pre>\n\n<p>I want to check if pointer root is equal to NULL, but it does not seems too work. It seems like the pointer changes from 0 to 0x4 when I am inside the method insert. How can I check if pointer of struct is equal NULL? </p>\n\n<p>EDIT In the insert method if tree doesn't have any nodes it should not enter first while loop, as root should be equall NULL. And my problem is that it enters this loop anyway and crashes when it checks for temp childrens(that are still not defined). </p>\n"}, {"tags": ["c++", "qt", "embedded-linux"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1545234791, "post_id": 53854586, "comment_id": 94557296, "body": "If somebody can read your binary, they can work out the credentials. QStringLiteral will probably just store it as a UTF-16 string. Does your embedded platform have some kind of secure enclave you can use?"}], "answers": [{"comments": [{"owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1545235016, "post_id": 53854849, "comment_id": 94557438, "body": "And how does the OP&#39;s program get the password back?"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1545235041, "post_id": 53854849, "comment_id": 94557459, "body": "I wouldn&#39;t recommend MD5 anymore. SHA1 perhaps since it&#39;s an embedded system, otherwise SHA256, but +1."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1545235059, "post_id": 53854849, "comment_id": 94557470, "body": "It shouldn&#39;t be able to get the password back itself. Noone should. Whenever it&#39;s about to verify someones password, it&#39;ll use the salt+the provided password and then compare the two hashed results."}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 1, "creation_date": 1545235182, "post_id": 53854849, "comment_id": 94557563, "body": "@manuell Have a look at the comment from Ted Lyngmo: The program should never be able to get the password back! No one should ever be able to do this."}, {"owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1545235287, "post_id": 53854849, "comment_id": 94557639, "body": "@TedLyngmo You are right, MD5 is not that secure anymore and I also would prefer SHA1. I will edit my answer."}, {"owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1545236593, "post_id": 53854849, "comment_id": 94558419, "body": "AFAIK SHA is also not good for hashing paswords, as it is a &quot;fast hash&quot; algorithm (which eases the attacks). You should use hashing schemes suitable for passwords, like bcrypt."}, {"owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1545241686, "post_id": 53854849, "comment_id": 94561113, "body": "@xMutzelx Then, maybe, just maybe, your answer is not an answer to the OP&#39;s question..."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "edited": false, "score": 0, "creation_date": 1545244231, "post_id": 53854849, "comment_id": 94562189, "body": "@axalis yes, bcrypt could perhaps be an even safer alternative."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1545244371, "post_id": 53854849, "comment_id": 94562251, "body": "@manuell I don&#39;t see anything in OP&#39;s question demanding that the passwords should be retrievable in cleartext once they have been stored.&quot;<i>sensitive information</i>&quot;, &quot;<i>Is this safe</i>&quot; and &quot;<i>SqlCipher</i>&quot; makes me think OP actually wants to store the passwords in a reasonably safe manner. Even if that had not been the case, pointing out the errors in cases like this is just the right thing to do."}], "tags": [], "owner": {"reputation": 489, "user_id": 7684979, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/55dee8eaddd0b1bef61d118334acefb9?s=128&d=identicon&r=PG&f=1", "display_name": "xMutzelx", "link": "https://stackoverflow.com/users/7684979/xmutzelx"}, "is_accepted": false, "score": 2, "last_activity_date": 1545235371, "last_edit_date": 1545235371, "creation_date": 1545234813, "answer_id": 53854849, "question_id": 53854586, "link": "https://stackoverflow.com/questions/53854586/saving-password-in-cpp-application/53854849#53854849", "title": "saving password in cpp application", "body": "<p>You should never store passwords! There is no way to do that securely, not in Qt nor in anywhere else! <br><br>\nI would recommend you to generate a random number/salt, add the password from the user and run a secure hash on that data. For example MD5, or even better SHA1 (thanks to Ted Lyngmo). Store the result. Then you can even take a plain text file as it is very hard to get from that data back to the original password.</p>\n\n<p>If security is not that big for you, you could use something like:</p>\n\n<pre><code>QString result = QString(QCryptographicHash::hash((password+salt),QCryptographicHash::Md5).toHex());\n</code></pre>\n\n<p>and safe the result in QSettings.</p>\n"}], "owner": {"reputation": 1827, "user_id": 785691, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/COsAp.jpg?s=128&g=1", "display_name": "ramtheconqueror", "link": "https://stackoverflow.com/users/785691/ramtheconqueror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545235371, "creation_date": 1545234004, "question_id": 53854586, "link": "https://stackoverflow.com/questions/53854586/saving-password-in-cpp-application", "title": "saving password in cpp application", "body": "<p>Working on a <code>Qt</code> application on embedded linux which requires to store the username, password kind of sensitive information. </p>\n\n<p>I'm currently using <code>QStringLiteral</code> to store this info. Is this safe to do? These aren't visible when ran against <code>strings</code> binary. What are the available options / solutions?</p>\n\n<p><code>SqlCipher</code> is available but again it needs a password / key. Any suggestions </p>\n"}, {"tags": ["c++", "stdvector", "stdmap", "c++-standard-library", "std-pair"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 1, "creation_date": 1545233875, "post_id": 53854468, "comment_id": 94556615, "body": "@Lorand - The sort happens on the <code>second</code> item in the pair, which is not the key."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "reply_to_user": {"reputation": 893, "user_id": 6361694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62b808f24204076dfdb2fc9afa27a8b8?s=128&d=identicon&r=PG&f=1", "display_name": "Petok Lorand", "link": "https://stackoverflow.com/users/6361694/petok-lorand"}, "edited": false, "score": 1, "creation_date": 1545233880, "post_id": 53854468, "comment_id": 94556627, "body": "@Lorand It seems that OP wants to perform the sort based on the values, not the keys."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1545233961, "post_id": 53854468, "comment_id": 94556691, "body": "Exact duplicate, I think.  <a href=\"https://stackoverflow.com/questions/684475\">stackoverflow.com/questions/684475</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1545234022, "post_id": 53854468, "comment_id": 94556732, "body": "Seems like that question should be flagged as a duplicate of this one, since the answer provided by @NathanOliver is way better than any of the answers to that question. Edit : Though that question includes sorting the result."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1545234096, "post_id": 53854468, "comment_id": 94556777, "body": "@Fran&#231;oisAndrieux I agree, these answers are much higher quality.  Is there precedent for flagging an old question as a duplicate of a new one?  <b>Edit</b>: <a href=\"https://meta.stackoverflow.com/questions/251938\">There is.</a>  I have marked the older question as a duplicate.  The answers seemed to be of poorer quality."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1545234218, "post_id": 53854468, "comment_id": 94556867, "body": "Note: when you pass lambda write <code>[]</code> instead of <code>[=]</code> - the way you use it, it technically causes a huge performance blunder as it passes all available variables by copy (in Release compling it should factor out unnecessary copying, but it might destroy Debug runtime)."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1545234364, "post_id": 53854468, "comment_id": 94556980, "body": "@DrewDormann I don&#39;t think there&#39;s anything about flagging duplicates that says newer questions have to be the ones that point to older ones. But I&#39;m not confident enough with site policy to do it myself, I might have missed something."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 1, "creation_date": 1545234368, "post_id": 53854468, "comment_id": 94556983, "body": "@ALX23z - I agree that <code>[=]</code> should not be present. But just because it&#39;s there doesn&#39;t mean <i>everything</i> gets copied. The lambda has to <i>use</i> something from the surrounding scope to capture it."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 1, "creation_date": 1545234381, "post_id": 53854468, "comment_id": 94556993, "body": "@ALX23z Actually, it will only copy a variable is you use it in the lambda body.  There is no performance penalty to use <code>[=]</code> if you don&#39;t use any of the variables in scope."}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 7, "last_activity_date": 1545233794, "last_edit_date": 1545233794, "creation_date": 1545233749, "answer_id": 53854510, "question_id": 53854468, "link": "https://stackoverflow.com/questions/53854468/copy-stdmap-into-stdvector-of-pairs/53854510#53854510", "title": "Copy std::map into std::vector of pairs", "body": "<p>You can use <code>std::copy</code> and <code>std::back_inserter</code>:</p>\n\n<pre><code>std::copy(mappedWordsList.begin(), \n          mappedWordsList.end(), \n          std::back_inserter(vectorWordsList));\n</code></pre>\n\n<p>Honestly, I think that a range-<code>for</code> loop is clearer:</p>\n\n<pre><code>for(const auto&amp; kv : mappedWordsList) \n     vectorWordsList.emplace_back(kv);\n</code></pre>\n\n<p>Regardless, you can use <code>std::vector::reserve</code> to preallocate memory on your target <code>vector</code>, avoiding unnecessary reallocations.</p>\n"}, {"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1545234106, "post_id": 53854560, "comment_id": 94556782, "body": "I would hope that <code>assign</code> would essentially <code>reserve</code> internally."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 10, "creation_date": 1545234180, "post_id": 53854560, "comment_id": 94556831, "body": "@Fran&#231;oisAndrieux It most likely would if you passed random access iterators but since <code>map</code> has bidirectional iterators it requires a traversal to known how many elements to allocate space for so it isn&#39;t going to do that."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1545248638, "post_id": 53854560, "comment_id": 94564065, "body": "@NathanOliver libstdc++ actually does essentially <code>reserve</code> internally. For any ForwardIterator, it will call <code>std::distance</code>, paying for a traversal for anything less than a RandomAccessIterator. You can trace <a href=\"https://github.com/gcc-mirror/gcc/blob/2e0303d60a97ddfcdd8340184bb5dc45e0433327/libstdc%2B%2B-v3/include/bits/stl_vector.h#L719\" rel=\"nofollow noreferrer\"><code>std::vector::assign</code></a> to <a href=\"https://github.com/gcc-mirror/gcc/blob/2e0303d60a97ddfcdd8340184bb5dc45e0433327/libstdc%2B%2B-v3/include/bits/vector.tcc#L289\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1545248851, "post_id": 53854560, "comment_id": 94564180, "body": "@Justin Cool.  Thanks for finding that.  I still like to be explicit, in case other implementations don&#39;t do this."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1545252407, "post_id": 53854560, "comment_id": 94565623, "body": "Putting a <code>.resize(0)</code> before <code>.reserve()</code> might be an optimization if the elements should be replaced."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545307086, "post_id": 53854560, "comment_id": 94583450, "body": "Since <code>assign</code> doesn&#39;t require MoveInsertable if the iterator is forward or stronger, it must reserve and mustn&#39;t reallocate when given such iterators. Additionally, for the second case, <code>reserve</code> is an antipattern (it prevents exponential growth and can lead to quadratic behavior)."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545354880, "post_id": 53854560, "comment_id": 94603372, "body": "<code>reserve</code> is still not advisable in the second case unless you know that you are not extending the vector further. If I run the second code fragment in a loop, it would reallocate <i>every iteration</i>, whereas if I just used <code>insert</code> without <code>reserve</code>, the exponential growth behavior would kick in and you&#39;ll only reallocate O(logN) times. Moreover, high quality implementations should pre-compute the size of the inserted range when given forward or stronger iterators, so the <code>reserve</code> provide no actual benefit."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 24, "last_activity_date": 1545313160, "last_edit_date": 1545313160, "creation_date": 1545233922, "answer_id": 53854560, "question_id": 53854468, "link": "https://stackoverflow.com/questions/53854468/copy-stdmap-into-stdvector-of-pairs/53854560#53854560", "title": "Copy std::map into std::vector of pairs", "body": "<p>Just use <code>std::vector</code>'s <a href=\"https://en.cppreference.com/w/cpp/container/vector/assign\" rel=\"nofollow noreferrer\"><code>assign</code></a> member function.</p>\n\n<pre><code>//no need to call reserve, bidirectional iterators or better will compute the size and reserve internally.\nvectorWordsList.assign(mappedWordsList.begin(), mappedWordsList.end());\n</code></pre>\n\n<p>If you have existing values in the vector that you don't want overwritten then use <a href=\"https://en.cppreference.com/w/cpp/container/vector/insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> instead like</p>\n\n<pre><code>vectorWordsList.reserve(vectorWordsList.size() + mappedWordsList.size()); // make sure we only have a single memory allocation\nvectorWordsList.insert(vectorWordsList.end(), mappedWordsList.begin(), mappedWordsList.end());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545307219, "post_id": 53859261, "comment_id": 94583515, "body": "Unless you want to create a vector of iterators, you need parens."}], "tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 8, "last_activity_date": 1545322765, "last_edit_date": 1545322765, "creation_date": 1545254324, "answer_id": 53859261, "question_id": 53854468, "link": "https://stackoverflow.com/questions/53854468/copy-stdmap-into-stdvector-of-pairs/53859261#53859261", "title": "Copy std::map into std::vector of pairs", "body": "<p>It's worth noting that if you are <em>creating a vector for this purpose</em>, you may use the vector's constructor directly:</p>\n\n<pre><code>std::vector&lt;std::pair&lt;FirstType,SecondType&gt;&gt; vectorWordsList( mappedWordsList.begin(), mappedWordsList.end() );\n</code></pre>\n\n<p>In C++17, you may also omit the vector's template arguments to have the compiler deduce them:</p>\n\n<pre><code>std::vector vectorWordsList( mappedWordsList.begin(), mappedWordsList.end() );\n</code></pre>\n"}], "owner": {"reputation": 201, "user_id": 10811840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91c9e9ba4e733ca266c8f291ea3c1076?s=128&d=identicon&r=PG&f=1", "display_name": "Victor", "link": "https://stackoverflow.com/users/10811840/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 0, "answer_count": 3, "score": 20, "last_activity_date": 1545322765, "creation_date": 1545233613, "last_edit_date": 1545252579, "question_id": 53854468, "link": "https://stackoverflow.com/questions/53854468/copy-stdmap-into-stdvector-of-pairs", "title": "Copy std::map into std::vector of pairs", "body": "<p>I'm trying to copy a map into a vector of pair, so I can then sort the vector by the <code>second</code> data member of the pairs. I have resolved this doing like this:</p>\n\n<pre><code>void mappedWordsListSorter(){\n  for (auto itr = mappedWordsList.begin(); itr != mappedWordsList.end(); ++itr){\n    vectorWordsList.push_back(*itr);\n  }\n  sort(vectorWordsList.begin(), vectorWordsList.end(), [=](pair&lt;string, int&gt;&amp; a, pair&lt;string, int&gt;&amp; b){return a.second &gt; b.second;});\n}\n</code></pre>\n\n<p>I need to find a way to do this without using a raw loop, using the standard library instead. I have come across a lot of examples doing this by only transferring either the keys or the values of the map. I need to copy into a vector of <code>pairs&lt;string, int&gt;</code>. What is the best way to do it?</p>\n"}, {"tags": ["c++", "c", "eclipse", "path", "include"], "comments": [{"owner": {"reputation": 7421, "user_id": 6782754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99008d0e4c4c15ab03d77938ad9e345b?s=128&d=identicon&r=PG", "display_name": "Gerhardh", "link": "https://stackoverflow.com/users/6782754/gerhardh"}, "edited": false, "score": 1, "creation_date": 1545233219, "post_id": 53854318, "comment_id": 94556166, "body": "If you have a &quot;project with makefile&quot; doesn&#39;t that mean that you don&#39;t want Eclipse to mess around with settings and just use make instead?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1545233254, "post_id": 53854318, "comment_id": 94556197, "body": "Are you using Eclipse internal build, external build with Eclipse-generated makefiles, or some other build type?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1545233335, "post_id": 53854318, "comment_id": 94556249, "body": "And is Eclipse able to find and index your <code>cheddar.h</code> file?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1545233337, "post_id": 53854318, "comment_id": 94556251, "body": "^^^ External build with Eclipse-generated makefile, which I edited with the -I option."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1545233419, "post_id": 53854318, "comment_id": 94556323, "body": "@FredLarson, perhaps I misunderstand. If I specify a Makefile, does this sidestep and invalidate <code>Properties</code> settings described above?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1545233437, "post_id": 53854318, "comment_id": 94556336, "body": "Adding the include path as your Research 1 and 2 suggested is the right way. Did you make sure you specified it for the build configuration your actually using? Do you have multiple build configurations specified?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1545233499, "post_id": 53854318, "comment_id": 94556369, "body": "If you&#39;re using a makefile not generated by Eclipse, adding the path within Eclipse will not affect the include path used to build. It will affect the indexer."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1545233659, "post_id": 53854318, "comment_id": 94556465, "body": "Build Configuration is set to <code>Default [Active]</code> as shown in <code>Properties -&gt; C&#47;C++ Build</code> screen."}], "answers": [{"comments": [{"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1545419042, "post_id": 53860367, "comment_id": 94626202, "body": "If you must know, the <code>X</code> in this XY problem is the use of <b>VIM</b> as the primary editor. Don&#39;t get me wrong, VIM has it&#39;s place, and is great for a quick look at files, but there&#39;s only so much <code>gdb</code> I can take before I want a modern IDE, so I&#39;m trying to nurture us onto <b>Eclipse</b>. Think notepad++ vs Visual Studio in Windows, or TextWrangler vs Xcode on a Mac."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1545419279, "post_id": 53860367, "comment_id": 94626271, "body": "<b>Anyway</b>, it seems that I have three (3) solutions here: 1. Use a Makefile <i>not</i> generated by Eclipse with the <code>-I</code> option to specify target directories; 2. Use the Eclipse build system, and specify paths therein. 3. Set environment variables (<i>gasp</i>), as you suggest. The problem with (3) is that this code will be committed to source control, and I want User to be able to build with minimal environment setup. I suppose I could ask them to set up their environment variables, and/or write a little script to do so... but I fear that it&#39;s too much to ask."}, {"owner": {"reputation": 146, "user_id": 10587057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff297a4081a475da78e663c3475bf8e?s=128&d=identicon&r=PG&f=1", "display_name": "user6f6e65", "link": "https://stackoverflow.com/users/10587057/user6f6e65"}, "reply_to_user": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1545478078, "post_id": 53860367, "comment_id": 94636414, "body": "Are you generating the makefile with cmake? You can do the CXX_COMPILER_FLAGS option if you are, or you can use it in your makefile. if they aren&#39;t libraries that already exist you&#39;re going to want to put them in the same project so the users can get the code to compile. If not you&#39;ll have them as dependencies and they&#39;ll compile to their respective locations."}], "tags": [], "owner": {"reputation": 146, "user_id": 10587057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ff297a4081a475da78e663c3475bf8e?s=128&d=identicon&r=PG&f=1", "display_name": "user6f6e65", "link": "https://stackoverflow.com/users/10587057/user6f6e65"}, "is_accepted": false, "score": 1, "last_activity_date": 1545260608, "creation_date": 1545260608, "answer_id": 53860367, "question_id": 53854318, "link": "https://stackoverflow.com/questions/53854318/eclipse-c-fatal-error-cheddar-h-no-such-file-or-directory/53860367#53860367", "title": "Eclipse C++: fatal error: cheddar.h: no such file or directory", "body": "<h1>What is wrong with CMake/Makefile?</h1>\n\n<p>I don\u2019t know, but this just sounds like an XY problem. But what\u2019s even more confusing is how you\u2019re so reluctant to use a solution that you\u2019ve already got (as in it\u2019s bugging me).</p>\n\n<h2><strong><em>Anyway</em></strong></h2>\n\n<p>What may aid you in this is to ditch eclipse\u2019s settings and just use the compiler\u2019s. Eclipse uses (GCC/G++ (probably)). What you can do is set some <em>environment variables DUN DUN DUHH</em>!</p>\n\n<p>These environment variables are aptly named: <code>C_INCLUDE_PATH</code> and <code>CPLUS_INCLUDE_PATH</code>. If, however, you want the same for both (you want to use it for both languages) you can just set <code>CPATH</code>.</p>\n\n<p>You\u2019re probably thinking: what else can I do with this marvel... and for that I direct you to <a href=\"http://gcc.gnu.org/onlinedocs/gcc-4.8.1/gcc/Environment-Variables.html#Environment-Variables\" rel=\"nofollow noreferrer\">the official GCC website</a>.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1545260608, "creation_date": 1545233110, "last_edit_date": 1545234740, "question_id": 53854318, "link": "https://stackoverflow.com/questions/53854318/eclipse-c-fatal-error-cheddar-h-no-such-file-or-directory", "title": "Eclipse C++: fatal error: cheddar.h: no such file or directory", "body": "<p>[RHEL v7.3, Eclipse Photon, C/C++ Project with Eclipse-generated Makefile]</p>\n\n<p>Attempting to include a custom library named <code>cheddar.h</code> results in \n<code>Fatal Error: cheddar.h: no such file or directory</code></p>\n\n<p>Research <a href=\"https://help.eclipse.org/kepler/index.jsp?topic=/org.eclipse.cdt.doc.user/tasks/cdt_t_proj_paths.htm\" rel=\"nofollow noreferrer\">1</a> and <a href=\"https://www.eclipse.org/forums/index.php/t/263075/\" rel=\"nofollow noreferrer\">2</a> suggests manually adding the include path by first alt-clicking the project in Project Explorer, and then manually adding the path :<br>\n<code>Properties -&gt; C/C++ General -&gt; Paths and Symbols : Includes : Languages, GNU C++</code> </p>\n\n<p>No luck.</p>\n\n<p>It works if I do things the old-fashioned way, and add the path to the makefile with a -I option, like so\n<code>-I/home/kmiklas/lib/</code></p>\n\n<p>..but I feel like I'm working-around the issue, and I want this set up properly; the way it <strong>should</strong> be set up. </p>\n\n<p>How do I correctly specify a custom include path in Eclipse? Tyvm :^)</p>\n"}, {"tags": ["c++", "server", "client", "calculator"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545233001, "post_id": 53854264, "comment_id": 94556021, "body": "please dont spam tags, this is not c"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1545233096, "post_id": 53854264, "comment_id": 94556075, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Especially it is not clear how you know that the server always receives a <code>0</code> when you never inspect the received value"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545233207, "post_id": 53854264, "comment_id": 94556158, "body": "...or maybe you expect the parameter you passed to <code>recezione_interi</code> to hold the received value after you called that function? If thats the &quot;problem&quot; the code you show is already enough ;) (but still you should add a just a  bit more)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545233566, "post_id": 53854264, "comment_id": 94556412, "body": "@user463035818 while yes in theory, very much unlikely in practice. Given the code, it is almost impossible from practical standpoint to get partial read."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1545233645, "post_id": 53854264, "comment_id": 94556459, "body": "@SergeyA not sure if you maybe misread my comment. OP passes a parameter by value, assigns something to it in the function and (my guess) expects that the argument passed will hold the value that was set in the function"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545234416, "post_id": 53854264, "comment_id": 94557022, "body": "@user463035818, oh, I see. Yes, I misread, I thought you meant that OP doesn&#39;t check for partial reads."}, {"owner": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545237682, "post_id": 53854264, "comment_id": 94559038, "body": "@user463035818 Yes, I would like that the parameter i passed to ricezione_interi to hold the received value but this doesn&#39;t happen."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545237776, "post_id": 53854264, "comment_id": 94559083, "body": "@Riccardo It doesnt happen because you pass the parameter by value. If you want the function to modify the argument passed to it you need to pass it by reference, basically what I wrote in my answer"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "edited": false, "score": 0, "creation_date": 1545237221, "post_id": 53854543, "comment_id": 94558785, "body": "I&#39;m so sorry, this is my first answer. I know that it&#39;s 0 because after the function I&#39;m using cout to display the value."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "edited": false, "score": 0, "creation_date": 1545237291, "post_id": 53854543, "comment_id": 94558813, "body": "@Riccardo no worries. Read the <a href=\"https://stackoverflow.com/tour\">tour</a> and the <a href=\"https://stackoverflow.com/help\">help center</a>, there is plenty of information on how to write a good question"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "edited": false, "score": 0, "creation_date": 1545237322, "post_id": 53854543, "comment_id": 94558832, "body": "@Riccardo &quot;after the function I&#39;m using cout to display the value&quot; this should have been part of the code in your question"}, {"owner": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "edited": false, "score": 0, "creation_date": 1545237329, "post_id": 53854543, "comment_id": 94558836, "body": "I will do as soon as possible. Thank you very much."}, {"owner": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "edited": false, "score": 0, "creation_date": 1545237890, "post_id": 53854543, "comment_id": 94559156, "body": "This solved my problem. Thank you very much for the help and the patience."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 0, "last_activity_date": 1545233873, "creation_date": 1545233873, "answer_id": 53854543, "question_id": 53854264, "link": "https://stackoverflow.com/questions/53854264/having-trouble-with-client-server-calculator-c/53854543#53854543", "title": "Having trouble with client/server calculator C++", "body": "<blockquote>\n  <p>The problem is that whatever number I send from the client, to the\n  server only arrives 0.</p>\n</blockquote>\n\n<p>Without a MCVE I can only guess what is the problem. So here is my guess...</p>\n\n<p>What your receiver function does is more or less the same as</p>\n\n<pre><code>void foo(int x) {\n    x = 24;\n}\n</code></pre>\n\n<p>When you call it </p>\n\n<pre><code>int main() {\n    int y = 0;\n    foo(y);\n    std::cout &lt;&lt; y;\n}\n</code></pre>\n\n<p>then you will get <code>0</code> as output. The reason is that <code>x</code> is passed by value. If you want the function to modify its argument you have to pass it by reference:</p>\n\n<pre><code>void foo(int&amp; x) {   // note the &amp;\n     x = 24;\n}\nint main() {\n    y = 0;\n    foo(y);\n    std::cout &lt;&lt; y;\n}\n</code></pre>\n\n<p>This will print <code>24</code>.</p>\n\n<p>PS: Please note that this answer is purely based on guessing. I dont know how you know that the value is always <code>0</code> and I had to guess. When asking questions about code it is important to include a minimal complete and verifiable example and the expected output along with the actual output in the question.</p>\n"}], "owner": {"reputation": 3, "user_id": 10811681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9727067743b805936e3b51091060b04a?s=128&d=identicon&r=PG&f=1", "display_name": "Riccardo", "link": "https://stackoverflow.com/users/10811681/riccardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 53854543, "answer_count": 1, "score": -2, "last_activity_date": 1545237503, "creation_date": 1545232962, "last_edit_date": 1545237503, "question_id": 53854264, "link": "https://stackoverflow.com/questions/53854264/having-trouble-with-client-server-calculator-c", "title": "Having trouble with client/server calculator C++", "body": "<p>I'm new to coding and I have to do this client/server calculator for an exam for my university course. \nUnfortunately my professor did explain us quite nothing so I have to do all the work myself. </p>\n\n<p>I already coded the connection part of the programs and it works fine, infact the client can connect to the server. </p>\n\n<p>The problem I'm facing is with the function in the server that should receive integers from the client.\nThe problem is that whatever number I send from the client, to the server only arrives 0. \nI know that because I'm using cout to display the value after the function. </p>\n\n<p>Server side function: </p>\n\n<pre><code>void ricezione_interi(int intero, int csock){\nint bytesRecv = recv(csock, &amp;intero, sizeof(int), 0);\nif (bytesRecv == -1)\n{\n    cout &lt;&lt; \"Connection issue.\" &lt;&lt; endl;\n    close(csock);\n    exit(1);\n}\nif (bytesRecv == 0)\n{\n    cout &lt;&lt; \"Client disconnected.\" &lt;&lt; endl;\n    close(csock);\n    exit(1); \n}\n\nreturn; }\n</code></pre>\n\n<p>Client side code: </p>\n\n<pre><code>int bytesSent = send(sock, &amp;intero, sizeof(int), 0); \n\n    if (bytesSent == -1)\n    {\n        cerr &lt;&lt; \"There was a connection issue.\" &lt;&lt; endl;\n        break;\n    }\n    if (bytesSent == 0)\n    {\n        cout &lt;&lt; \"Disconnected.\" &lt;&lt; endl; \n        break;\n    } \n</code></pre>\n\n<p>What is the problem with this code ? \nThank is advance for the attention.</p>\n\n<p>Best regards. </p>\n"}, {"tags": ["python", "c++", "pip", "leveldb"], "comments": [{"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1545231583, "post_id": 53853802, "comment_id": 94555115, "body": "you need a c compiler"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1545823275, "post_id": 53853802, "comment_id": 94703198, "body": "No, you need the installer to use a C++ compiler instead. File a bug report on the program you&#39;re trying to install (unless of course if the according bug report already exists)."}, {"owner": {"reputation": 406, "user_id": 5838189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d833feaf4bcb27f85029427160797c?s=128&d=identicon&r=PG&f=1", "display_name": "KamKam", "link": "https://stackoverflow.com/users/5838189/kamkam"}, "edited": false, "score": 0, "creation_date": 1585214025, "post_id": 53853802, "comment_id": 107684492, "body": "If you are using <code>macos</code> I recommend taking a look here: <a href=\"https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave\" title=\"cant compile c program on a mac after upgrade to mojave\">stackoverflow.com/questions/52509602/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6142893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F1Tfk.jpg?s=128&g=1", "display_name": "Clown", "link": "https://stackoverflow.com/users/6142893/clown"}, "edited": false, "score": 0, "creation_date": 1545272510, "post_id": 53853934, "comment_id": 94571305, "body": "The issue is still on. I am agitated. Could any help with."}], "tags": [], "owner": {"reputation": 5321, "user_id": 157726, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PY0sR.png?s=128&g=1", "display_name": "Juan Leni", "link": "https://stackoverflow.com/users/157726/juan-leni"}, "is_accepted": false, "score": 1, "last_activity_date": 1545231812, "creation_date": 1545231812, "answer_id": 53853934, "question_id": 53853802, "link": "https://stackoverflow.com/questions/53853802/i-got-error-when-using-pip-install-leveldb/53853934#53853934", "title": "I got error when using pip install leveldb", "body": "<p>Some people have been able to fix this kind of issues by running</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>It is probably something related to your C++ installation. Here is a hint: </p>\n\n<blockquote>\n  <p>warning: include path for stdlibc++</p>\n</blockquote>\n\n<p>Here you can find a similar discussion\n<a href=\"https://github.com/WebAssembly/wabt/issues/716\" rel=\"nofollow noreferrer\">https://github.com/WebAssembly/wabt/issues/716</a></p>\n"}, {"tags": [], "owner": {"reputation": 406, "user_id": 5838189, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d833feaf4bcb27f85029427160797c?s=128&d=identicon&r=PG&f=1", "display_name": "KamKam", "link": "https://stackoverflow.com/users/5838189/kamkam"}, "is_accepted": false, "score": 3, "last_activity_date": 1585236940, "creation_date": 1585236940, "answer_id": 60870807, "question_id": 53853802, "link": "https://stackoverflow.com/questions/53853802/i-got-error-when-using-pip-install-leveldb/60870807#60870807", "title": "I got error when using pip install leveldb", "body": "<p>As you can see from the error message, the <code>stdlibc++</code> implementation of the standard library cannot be found. One can 'resolve' this issue by instead using the <code>stdc++</code> implementation. One way of doing this is by amending the flag <code>CPPFLAG</code> prior to your <code>pip install</code>:</p>\n\n<pre><code>export CPPFLAGS=\"-stdlib=libc++\"\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6142893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F1Tfk.jpg?s=128&g=1", "display_name": "Clown", "link": "https://stackoverflow.com/users/6142893/clown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 875, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1585236940, "creation_date": 1545231312, "last_edit_date": 1545822109, "question_id": 53853802, "link": "https://stackoverflow.com/questions/53853802/i-got-error-when-using-pip-install-leveldb", "title": "I got error when using pip install leveldb", "body": "<p>When I used pip install leveldb in my MAC I got the error below, I searched the whole internet without any reply I could take with, my python env is 2.7, what made me upset is I could use Homebrew install is successfully, anyone can help me on that will be helpful.</p>\n\n<pre><code>Collecting leveldb\n  Downloading https://files.pythonhosted.org/packages/ec/c1/ca3b4199bd4073e6430076f1edd8061f2f548e831eeddc3cbc077ebaa0ca/leveldb-0.194.tar.gz (228kB)\n    100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 235kB 377kB/s\nInstalling collected packages: leveldb\n  Running setup.py install for leveldb ... error\n    Complete output from command /Users/crowncao/anaconda3/bin/python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-install-0duq9nmj/leveldb/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/tmp/pip-record-q32ow6u8/install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_ext\n    building 'leveldb' extension\n    creating build\n    creating build/temp.macosx-10.7-x86_64-3.7\n    creating build/temp.macosx-10.7-x86_64-3.7/snappy\n    creating build/temp.macosx-10.7-x86_64-3.7/leveldb\n    creating build/temp.macosx-10.7-x86_64-3.7/leveldb/db\n    creating build/temp.macosx-10.7-x86_64-3.7/leveldb/table\n    creating build/temp.macosx-10.7-x86_64-3.7/leveldb/util\n    creating build/temp.macosx-10.7-x86_64-3.7/leveldb/port\n    gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/crowncao/anaconda3/include -arch x86_64 -I/Users/crowncao/anaconda3/include -arch x86_64 -I/Users/crowncao/anaconda3/include/python3.7m -c ./snappy/snappy.cc -o build/temp.macosx-10.7-x86_64-3.7/./snappy/snappy.o -I./leveldb/include -I./leveldb -I./snappy -I. -fno-builtin-memcmp -O2 -fPIC -DNDEBUG -DSNAPPY -DOS_MACOSX -DLEVELDB_PLATFORM_POSIX -Wno-error=unused-command-line-argument-hard-error-in-future\n    warning: unknown warning option '-Werror=unused-command-line-argument-hard-error-in-future'; did you mean '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]\n    warning: include path for stdlibc++ headers not found; pass '-std=libc++' on the command line to use the libc++ standard library instead [-Wstdlibcxx-not-found]\n    In file included from ./snappy/snappy.cc:29:\n    ./snappy/snappy.h:43:10: fatal error: 'string' file not found\n    #include &lt;string&gt;\n             ^~~~~~~~\n    2 warnings and 1 error generated.\n    error: command 'gcc' failed with exit status 1\n\n    ----------------------------------------\nCommand \"/Users/crowncao/anaconda3/bin/python -u -c \"import setuptools, tokenize;__file__='/private/tmp/pip-install-0duq9nmj/leveldb/setup.py';f=getattr(tokenize, 'open', open)(__file__);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, __file__, 'exec'))\" install --record /private/tmp/pip-record-q32ow6u8/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/tmp/pip-install-0duq9nmj/leveldb/\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1545231413, "post_id": 53853781, "comment_id": 94555020, "body": "If you want to use relative paths, know that by default in VS the <i>Working Directory</i> for your executable is $(ProjectDir) (I always change it to $(OutDir), which is the directory of the exe itself). You can change this by going to the Project properties in the &quot;Debugging&quot; section."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 2, "creation_date": 1545231424, "post_id": 53853781, "comment_id": 94555026, "body": "where is &quot;rooms.txt&quot; stored? Where are you running your program from? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545231426, "post_id": 53853781, "comment_id": 94555030, "body": "It&#39;s not about the txt file being at the location than the cpp file, but as the exe. Change the run location for debug."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 1, "creation_date": 1545232038, "post_id": 53853781, "comment_id": 94555388, "body": "try full path to file."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1545232678, "post_id": 53853781, "comment_id": 94555790, "body": "<i>There&#39;s nothing that solves this problem</i> -- Just supply the <i>full path</i> of the file to open.  If the file exists, you will see it open the file.  Then from there, figure out why supplying just the name does not work.  As others already pointed out, using a relative file name means different things to different environments."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545236029, "post_id": 53853781, "comment_id": 94558051, "body": "In Visual Studio the default working directory when debugging or just executing in the IDE is the location of the project not the location of executable like it is on many other IDEs."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 10811515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83961aa748f422d9aa9123ea5a1d994a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanya", "link": "https://stackoverflow.com/users/10811515/sanya"}, "edited": false, "score": 0, "creation_date": 1545248205, "post_id": 53854792, "comment_id": 94563886, "body": "IT WORKED! I didn&#39;t know you had to put double backslash for the path. I was using single because that&#39;s what I saw on another site. Thank you."}], "tags": [], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "is_accepted": true, "score": 0, "last_activity_date": 1545234658, "creation_date": 1545234658, "answer_id": 53854792, "question_id": 53853781, "link": "https://stackoverflow.com/questions/53853781/text-file-not-opening-on-visual-studio-2017-it-opens-on-dev-c-though/53854792#53854792", "title": "Text file not opening on Visual Studio 2017. It opens on Dev C++ though", "body": "<p>Please add the directory where the mentioned file is present:</p>\n\n<pre><code>room_type.open(\"C:\\\\which_directory\\\\rooms.txt\", ios::in);\n</code></pre>\n\n<p>You might run it without mentioning the directory, but in that case the executable should be located in the same directory as the file itself, which might depend on your development environment.</p>\n"}], "owner": {"reputation": 17, "user_id": 10811515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83961aa748f422d9aa9123ea5a1d994a?s=128&d=identicon&r=PG&f=1", "display_name": "Sanya", "link": "https://stackoverflow.com/users/10811515/sanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 53854792, "answer_count": 1, "score": -1, "last_activity_date": 1545234658, "creation_date": 1545231241, "question_id": 53853781, "link": "https://stackoverflow.com/questions/53853781/text-file-not-opening-on-visual-studio-2017-it-opens-on-dev-c-though", "title": "Text file not opening on Visual Studio 2017. It opens on Dev C++ though", "body": "<pre><code>#include \"stdafx.h\"\n#include \"iostream\"\n#include \"fstream\"\n#include \"string\"\nusing namespace std;\nint main()\n{\n   fstream room_type;\n   string line;\n   room_type.open(\"rooms.txt\", ios::in);\n   while (!room_type.eof())\n   {\n      getline(room_type, line);\n      cout &lt;&lt; line &lt;&lt; endl;\n   }\n    room_type.close();\n}\n</code></pre>\n\n<p>I have tried giving the path.\nI've tried saving both .cpp file and .text file in the same location.\nI've tried everything I can with my knowledge + googled a lot. There's nothing that solves this problem.</p>\n"}, {"tags": ["c++", "mysql", "mysql-udf"], "comments": [{"owner": {"reputation": 10803, "user_id": 2548147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cfKie.jpg?s=128&g=1", "display_name": "Raymond Nijland", "link": "https://stackoverflow.com/users/2548147/raymond-nijland"}, "edited": false, "score": 0, "creation_date": 1545231359, "post_id": 53853618, "comment_id": 94554992, "body": "i added the C++ tag to the question it might help to get answers."}], "answers": [{"tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 1, "last_activity_date": 1545232497, "creation_date": 1545232497, "answer_id": 53854124, "question_id": 53853618, "link": "https://stackoverflow.com/questions/53853618/mysql-udf-returning-string-overlaps-the-data/53854124#53854124", "title": "MySQL UDF returning STRING overlaps the data", "body": "<p>The strings passed to your function are not necessarily null terminated, from <a href=\"https://dev.mysql.com/doc/refman/8.0/en/udf-arguments.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/udf-arguments.html</a>:</p>\n\n<blockquote>\n  <p>Do not assume that the string is null-terminated. </p>\n</blockquote>\n\n<p>Constructing a <code>std::string</code> from a non-null terminated character string is undefined behaviour, in this case I guess the buffer was initially 0 filled so the string ends at the end of the longest string which has ever been put into the buffer.</p>\n\n<p>The correct code is:</p>\n\n<pre><code>std::string str( args-&gt;args[0], args-&gt;lengths[0] );\n</code></pre>\n\n<p>Or skip creating the unnecessary copy in the <code>std::string</code>:</p>\n\n<pre><code>memcpy(result, args-&gt;args[0], args-&gt;lengths[0]);\n*length = args-&gt;lengths[0];\n</code></pre>\n"}], "owner": {"reputation": 4190, "user_id": 1629242, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/A9il9.jpg?s=128&g=1", "display_name": "Amogh", "link": "https://stackoverflow.com/users/1629242/amogh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 53854124, "answer_count": 1, "score": 0, "last_activity_date": 1545232497, "creation_date": 1545230740, "last_edit_date": 1545231503, "question_id": 53853618, "link": "https://stackoverflow.com/questions/53853618/mysql-udf-returning-string-overlaps-the-data", "title": "MySQL UDF returning STRING overlaps the data", "body": "<p>As it's my first time to write UDF so I tried to write simple UDF to return the same argument which is passed to UDF.</p>\n\n<p>code as below:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;cstring&gt;\n#include &lt;mysql.h&gt;\n#include &lt;ctype.h&gt;\n#include &lt;my_global.h&gt;\n#include &lt;my_sys.h&gt;\nusing namespace std;\n\n\nextern \"C\" my_bool get_arg_init(UDF_INIT *initid, UDF_ARGS *args,\n                               char *message)\n{\n    if ( ( args-&gt;arg_count != 1 ) || ( args-&gt;arg_type[0] != STRING_RESULT ) )\n     {\n      strcpy( message, \"Wrong argument type.\" );\n      return 1;\n     }\n\n    return 0;\n}\n\nextern \"C\" void get_arg_deinit(UDF_INIT *initid)\n{\n    //nothing to free here\n}\n\nextern \"C\" char *get_arg(UDF_INIT *initid, UDF_ARGS *args,\n          char *result, unsigned long *length,\n          char *is_null, char *error)\n{\n    std::string str = args-&gt;args[0]; // get the first argument passed\n    memcpy(result, str.c_str(), str.size()); // copy argument value into result buffer\n    *length = str.size(); // set length\n\n    return result;//return the same argument\n}\n</code></pre>\n\n<p>My table having data as;</p>\n\n<p><code>SELECT c_name FROM tbl;</code></p>\n\n<p>This will return data as:</p>\n\n<pre><code># c_name\namogh bharat shah\nviraj\n</code></pre>\n\n<p>If I execute query using UDF :</p>\n\n<p><code>SELECT get_arg(c_name) FROM tbl;</code></p>\n\n<p>This returns:</p>\n\n<pre><code># get_arg(c_name)\namogh bharat shah\nviraj bharat shah\n</code></pre>\n\n<p>It looks like while second row first 5 characters are replaced with actual row data other part of string is garbage from first row.</p>\n\n<p>Why this happens? and what should I change in function to avoid overlapping of string?</p>\n"}, {"tags": ["c++", "c", "bit-fields", "signed-integer", "implementation-defined-behavior"], "comments": [{"owner": {"reputation": 2723, "user_id": 9017315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3229c3b31dc467c858d3d27f88c41c11?s=128&d=identicon&r=PG&f=1", "display_name": "Osiris", "link": "https://stackoverflow.com/users/9017315/osiris"}, "edited": false, "score": 46, "creation_date": 1545230729, "post_id": 53853540, "comment_id": 94554594, "body": "Since the bitfield is declared as <code>int</code> i think it only can hold the values <code>0</code> and <code>-1</code>."}, {"owner": {"reputation": 76, "user_id": 10806577, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X9waOdRLeRU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gciJQJ0xxYgfog5PPqo8ljLBt2JA/mo/photo.jpg?sz=128", "display_name": "J&#252;rgen", "link": "https://stackoverflow.com/users/10806577/j%c3%bcrgen"}, "edited": false, "score": 6, "creation_date": 1545232191, "post_id": 53853540, "comment_id": 94555481, "body": "just think of it how int stores -1. All bits are set to 1. Hence, if you only have one bit it clearly has to be -1. So 1 and -1 in the 1 bit int are the same. Change the check to &#39;if (s.enabled != 0)&#39; and it works. Because 0 it can&#39;t be."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 3, "creation_date": 1545235584, "post_id": 53853540, "comment_id": 94557813, "body": "It is true that these rules are the same in C and C++. But according to the <a href=\"https://stackoverflow.com/tags/c%2b%2b/info\">tag usage</a> policies, we should only tag this as C and refrain from cross-tagging when not needed. I&#39;ll remove the C++ part, it should not affect any posted answers."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 8, "creation_date": 1545235691, "post_id": 53853540, "comment_id": 94557877, "body": "Have you tried changing it to <code>struct mystruct { unsigned int enabled:1; };</code>?"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 4, "creation_date": 1545293095, "post_id": 53853540, "comment_id": 94576588, "body": "Kindly read the <a href=\"https://stackoverflow.com/tags/c%2b%2b/info\">C and C++ tag policies</a>, particularly the part regarding cross-tagging C and C++ both, established through community consensus <a href=\"https://meta.stackoverflow.com/questions/374306/proposed-update-to-c-and-c-tag-usage-wikis\">here</a>. I&#39;m not going into some rollback war, but this question is incorrectly tagged C++. Even if the languages happen to have some slight difference because of various TC, then make a separate question about the difference between C and C++."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545301152, "post_id": 53853540, "comment_id": 94580572, "body": "Thanks @Lundin for the tag policy link. Both the C &amp; C++ have different standard specifications for the bit fields. Hence I am interested in knowing the output results from both the perspectives."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545301587, "post_id": 53853540, "comment_id": 94580776, "body": "@iammilind They don&#39;t, until apparently after some TC of C++11. It seems to be that comparing C vs C++ vs C++11 TC:x is a separate question."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545303174, "post_id": 53853540, "comment_id": 94581575, "body": "Been reading C++11 and C++17. I find no evidence anywhere that C++ bit-fields behave differently than C ones. Multiple cases of implementation-defined behavior are the same for both languages. If anything, they are even more poorly defined in C++17 than in for example C90. Wouldn&#39;t have thought such a thing possible."}, {"owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545304921, "post_id": 53853540, "comment_id": 94582458, "body": "@Lundin, C++ defines the bit-fields more clearly and coincidentally they have taken an example, which matches the code in Qn. You may refer <a href=\"https://stackoverflow.com/a/53867011/514235\">my answer</a>. It&#39;s indeed good to have both the perspectives of C and C++ for this feature."}, {"owner": {"reputation": 18530, "user_id": 3344003, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/988af95d5692ee66b1fc2fe725ba738e?s=128&d=identicon&r=PG&f=1", "display_name": "user3344003", "link": "https://stackoverflow.com/users/3344003/user3344003"}, "edited": false, "score": 0, "creation_date": 1545313406, "post_id": 53853540, "comment_id": 94586708, "body": "Bitfields and throw specifications are the two most useless features of C++. Bitfields serve no purpose whatsoever."}], "answers": [{"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 15, "creation_date": 1545231638, "post_id": 53853610, "comment_id": 94555143, "body": "The authors of the standard were on holidays the day the bit-field chapter was designed. So the janitor had to do it. There is no rationale about <i>anything</i> regarding how bit-fields are designed."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 9, "creation_date": 1545232857, "post_id": 53853610, "comment_id": 94555919, "body": "There is no coherent <i>technical</i> rationale.  But that leads me to conclude that there was a <i>political</i> rationale: to avoid making any of the existing code or implementations incorrect.  But the result is that there&#39;s very little about bitfields that you can rely upon."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 6, "creation_date": 1545233191, "post_id": 53853610, "comment_id": 94556141, "body": "@JohnBollinger There was definitely politics in place, that caused a lot of damage to C90. I once spoke with a member of the committee who explained the source of lots of the crap - the ISO standard could not be allowed to favour certain existing technologies. This is why we are stuck with moronic things like support for 1&#39;s complement and signed magnitude, implementation-defined signedness of <code>char</code>, support for bytes that aren&#39;t 8 bits etc etc. They weren&#39;t allowed to give moronic computers a market disadvantage."}, {"owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1545233393, "post_id": 53853610, "comment_id": 94556300, "body": "@Lundin It would be interesting to see a collection of writeups and post-mortems from people who believed tradeoffs had been made in error, and why.  I wonder how much study of these <i>&quot;we did that last time, and it did/didn&#39;t work out&quot;</i> has become institutional knowledge to inform the next such case, vs. just stories in people&#39;s heads."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 1, "creation_date": 1545235217, "post_id": 53853610, "comment_id": 94557590, "body": "This is still listed as point no. 1 of the original principles of C in the C2x Charter: &quot;Existing code is important, existing implementations are not.&quot; ... &quot;no one implementation was held up as the exemplar by which to define C: It is assumed that all existing implementations must change somewhat to conform to the Standard.&quot;"}], "tags": [], "owner": {"reputation": 31218, "user_id": 211160, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Z2fk7.png?s=128&g=1", "display_name": "HostileFork says dont trust SE", "link": "https://stackoverflow.com/users/211160/hostilefork-says-dont-trust-se"}, "is_accepted": false, "score": 58, "last_activity_date": 1545245794, "last_edit_date": 1545245794, "creation_date": 1545230713, "answer_id": 53853610, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/53853610#53853610", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<blockquote>\n  <p>I am unable to understand, how is it possible that we set something and then it doesn't show up as it is.</p>\n</blockquote>\n\n<p>Are you asking why it compiles vs. gives you an error?</p>\n\n<p>Yes, it should ideally give you an error.  And it does, if you use your compiler's warnings.  In GCC, with <code>-Werror -Wall -pedantic</code>:</p>\n\n<pre><code>main.cpp: In function 'int main()':\nmain.cpp:7:15: error: overflow in conversion from 'int' to 'signed char:1' \nchanges value from '1' to '-1' [-Werror=overflow]\n   s.enabled = 1;\n           ^\n</code></pre>\n\n<p>The reasoning for why this is left up to being implementation-defined vs. an error may have more to do with historical usages, where requiring a cast would mean breaking old code.  The authors of the standard may believe warnings were enough to pick up the slack for those concerned.</p>\n\n<p>To throw in some prescriptivism, I'll echo @Lundin's statement: <strong>\"Never use bit-fields for any purpose.\"</strong>  If you have the kind of good reasons to get low-level and specific about your memory layout details that would get you to thinking you needed bitfields in the first place, the other associated requirements you almost certainly have will run up against their underspecification.</p>\n\n<p><em>(TL;DR - If you're sophisticated enough to legitimately \"need\" bit-fields, they're not well-defined enough to serve you.)</em></p>\n"}, {"comments": [{"owner": {"reputation": 101, "user_id": 4930268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3ea484fa5cd555cbee3a579a106f76?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4930268/michael"}, "edited": false, "score": 5, "creation_date": 1545248296, "post_id": 53853737, "comment_id": 94563921, "body": "At work we have static_asserts on the size and address of bitfields just to make sure that they are not padded. We use bitfields for hardware registers in our firmware."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1545291992, "post_id": 53853737, "comment_id": 94576162, "body": "C++ doesn&#39;t have the last part after <a href=\"https://wg21.link/CWG739\" rel=\"nofollow noreferrer\">CWG 739</a>; it&#39;s always signed."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 101, "user_id": 4930268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3ea484fa5cd555cbee3a579a106f76?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4930268/michael"}, "edited": false, "score": 1, "creation_date": 1545292305, "post_id": 53853737, "comment_id": 94576278, "body": "@Michael At one time I used bit-fields too, one of those usual sloppily-written register maps you get from the compiler vendor. Then tried to port the code to another compiler for the same MCU. Of course everything went haywire, because the register map was utterly non-portable. Sure, bit-fields was not the only problem, but a major one. The solution was to roll out your own register map. I wrote little a program which grabbed the register names and bit masks from the MCU manual and made an ISO/MISRA C register map header out of it. Based on <i>bit masks</i> to be used with the bit-wise operators."}, {"owner": {"reputation": 101, "user_id": 4930268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3ea484fa5cd555cbee3a579a106f76?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4930268/michael"}, "edited": false, "score": 4, "creation_date": 1545294321, "post_id": 53853737, "comment_id": 94577032, "body": "@Lundin: The ugly thing with #define-d masks and offsets is that your code gets littered with shifts and bit-wise AND/OR operators. With bitfields the compiler takes care of that for you."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545301882, "post_id": 53853737, "comment_id": 94580925, "body": "@T.C. That link doesn&#39;t change the behavior, you seem to have misinterpreted it. It says that if a type is &quot;plain&quot; such as <code>int</code> then it has implementation-defined signedness just like C. Basically that TC says &quot;can we clarify just how stupid bit-fields are defined by the standard&quot;."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545303010, "post_id": 53853737, "comment_id": 94581488, "body": "@T.C. They have also apparently entirely removed the part you linked in the C++17 draft, so it is no longer just implementation-defined... but as I read it, using a bit-field of <code>int</code> type is undefined behavior in C++17, as the behavior and signedness of the different integer types is not covered by the standard. Or at least I can&#39;t find it."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 101, "user_id": 4930268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3ea484fa5cd555cbee3a579a106f76?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4930268/michael"}, "edited": false, "score": 4, "creation_date": 1545303401, "post_id": 53853737, "comment_id": 94581698, "body": "@Michael <i>With bitfields the compiler takes care of that for you.</i> Well, that&#39;s OK if your standards for &quot;takes care of that&quot; are &quot;non-portable&quot; and &quot;unpredictable&quot;.  Mine are higher than that."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1545305212, "post_id": 53853737, "comment_id": 94582573, "body": "The final resolution of CWG739 (you need to scroll down to the February 2012 PR, not the August 2011 one) removes the implementation-definedness entirely. Plain <code>int</code> therefore has the same meaning it has everywhere else (which is, of course, signed)."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1545313797, "post_id": 53853737, "comment_id": 94586910, "body": "@AndrewHenle these properties are all implementation-defined, i.e. a conforming implementation is <i>required</i> to do something predictable, and document it. I&#39;m not completely convinced the problem is substantially worse than for struct members in general: the alignment and padding of fields is also still implementation-defined (although they can&#39;t be reordered or straddle storage units), which makes a &quot;simple&quot; struct&#39;s layout technically non-portable between separately compiled binaries as well."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1545315976, "post_id": 53853737, "comment_id": 94588157, "body": "@Leushenko The requirements on structures are much, much stricter than on bit fields.  There are many C standard functions such as <a href=\"https://port70.net/~nsz/c/c11/n1570.html#7.11.2.1\" rel=\"nofollow noreferrer\"><code>localconv()</code></a> that pass structures, so structure layout requirements are stronger than &quot;implementation-defined&quot;.  I suspect structure layout is <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow noreferrer\">ABI</a>-controlled.  (Someone with more expertise can comment...)  Bit fields are completely controlled by the compiler chosen, and can and do change between different compilers on the same platform."}, {"owner": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1545316240, "post_id": 53853737, "comment_id": 94588319, "body": "@AndrewHenle ABI is 100% beyond the scope of the standard. It doesn&#39;t and can&#39;t mandate that data structures (or even primitive types) are in <i>any way</i> compatible with those produced by a different compiler on the same system; how the standard library is made available to a program by an implementation is out of scope too. Implementations choosing to all di the same thing because it&#39;s sensible and because sharing a stdlib is practical doesn&#39;t make it not-implementation-defined."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 101, "user_id": 4930268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3ea484fa5cd555cbee3a579a106f76?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/4930268/michael"}, "edited": false, "score": 0, "creation_date": 1545320392, "post_id": 53853737, "comment_id": 94590674, "body": "@Michael Lets compare <code>reg.bit0 = 1;</code> with <code>reg |= bit0;</code>. In the former case we have something like <code>typedef struct { int bit0:1; } reg_t;</code>, in the latter <code>#define bit0 (1u &lt;&lt; 0)</code>. The main difference is that <code>reg |= bit0;</code> actually sets bit 0, portably, independtly of compiler and endianess. Wheras <code>reg.bit0 = 1;</code> could set bit 0, or bit 31 or a padding bit, or a padding byte."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 11533, "user_id": 1366431, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/YBopF.png?s=128&g=1", "display_name": "Leushenko", "link": "https://stackoverflow.com/users/1366431/leushenko"}, "edited": false, "score": 0, "creation_date": 1545322030, "post_id": 53853737, "comment_id": 94591609, "body": "@Leushenko <i>ABI is 100% beyond the scope of the standard. It doesn&#39;t and can&#39;t mandate that data structures (or even primitive types) are in any way compatible with those produced by a different compiler on the same system</i> Not true.  The <a href=\"https://software.intel.com/sites/default/files/article/402129/mpx-linux64-abi.pdf\" rel=\"nofollow noreferrer\">x86_64 ABI</a>, for example, strictly specifies structure layout while leaving bit field implementations a great deal of freedom.  Strict compliance with the ABI would result in different compilers having to create identical structures while having wildly different bit-fields."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1545345684, "post_id": 53853737, "comment_id": 94601368, "body": "@AndrewHenle Leushenko is saying that from the perspective of <i>just the C standard itself</i>, it is up to the implementation whether or not it chooses to follow the x86-64 ABI or not."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "edited": false, "score": 0, "creation_date": 1545346772, "post_id": 53853737, "comment_id": 94601662, "body": "@mtraceur First, I&#39;d say a compiler that doesn&#39;t follow a platform&#39;s ABI is perverse and deliberately non-portable.  Second, I&#39;m saying that even given strict adherence to an ABI, the C standard bit field &quot;specifications&quot; still leave so much unspecified that different compilers - that each strictly follow an ABI - can easily use wildly incompatible bit field layouts on the exact same platform."}, {"owner": {"reputation": 1744, "user_id": 4372452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/OlDV3.png?s=128&g=1", "display_name": "mtraceur", "link": "https://stackoverflow.com/users/4372452/mtraceur"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1545348008, "post_id": 53853737, "comment_id": 94601979, "body": "@AndrewHenle Right, I agree on both points. My point was that I think your disagreement with Leushenko boils down to the fact that you&#39;re using &quot;implementation defined&quot; to refer only to things neither strictly defined by the C standard nor strictly defined by the platform ABI, and he&#39;s using it to refer to anything not strictly defined by just the C standard."}], "tags": [], "owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "is_accepted": false, "score": 78, "last_activity_date": 1545231907, "last_edit_date": 1545231907, "creation_date": 1545231112, "answer_id": 53853737, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/53853737#53853737", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>Bit-fields are incredibly poorly defined by the standard. Given this code <code>struct mystruct {int enabled:1;};</code>, then we <em>don't</em> know:</p>\n\n<ul>\n<li>How much space this occupies - if there are padding bits/bytes and where they are located in memory.</li>\n<li>Where the bit is located in memory. Not defined and also depends on endianess.</li>\n<li>Whether an <code>int:n</code> bitfield is to be regarded as signed or unsigned.</li>\n</ul>\n\n<p>Regarding the last part, C17 6.7.2.1/10 says:</p>\n\n<blockquote>\n  <p>A bit-field is interpreted as having a signed or unsigned integer type consisting of the\n  specified number of bits <sup>125)</sup></p>\n</blockquote>\n\n<p>Non-normative note explaining the above:</p>\n\n<blockquote>\n  <p><sup>125)</sup> As specified in 6.7.2 above, if the actual type specifier used is <code>int</code> or a typedef-name defined as <code>int</code>,\n  then it is implementation-defined whether the bit-field is signed or unsigned.</p>\n</blockquote>\n\n<p>In case the bitfield is to be regarded as <code>signed int</code> and you make a bit of size <code>1</code>, then there is no room for data, only for the sign bit. This is the reason why your program might give weird results on some compilers.</p>\n\n<p>Good practice:</p>\n\n<ul>\n<li>Never use bit-fields for any purpose.</li>\n<li>Avoid using signed <code>int</code> type for any form of bit manipulation.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545231361, "post_id": 53853744, "comment_id": 94554993, "body": "&quot;ince it is signed, the valid values are -1 and 0&quot;. Who said it is signed? It&#39;s not defined but implementation-defined behavior. If it is signed, then the valid values are <code>-</code> and <code>+</code>. 2&#39;s complement doesn&#39;t matter."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 5, "creation_date": 1545231628, "post_id": 53853744, "comment_id": 94555138, "body": "@Lundin A 1 bit twos compliment number only has two possible values.  If the bit is set, then since it is the sign bit, it is -1.  If it isn&#39;t set then it is &quot;positive&quot; 0.  I know this is implementation defined, I&#39;m just explaining the results using the most common implantation"}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1545231783, "post_id": 53853744, "comment_id": 94555235, "body": "The key here is rather that 2&#39;s complement or any other signed form cannot function with a single bit available."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545231896, "post_id": 53853744, "comment_id": 94555305, "body": "@Lundin What do you mean it cannot function?  <a href=\"http://coliru.stacked-crooked.com/a/41fa5d5c6fe4f85c\" rel=\"nofollow noreferrer\">It works fine here</a>, you just have know the domain you are working with."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1545231941, "post_id": 53853744, "comment_id": 94555330, "body": "@NathanOliver, a possible point of contention arises here from the wording of the standard, which does not seem specifically to require that bitfields of type <code>int</code> in fact represent signed types.  I do think it&#39;s the intent that such bitfields should be signed, however."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 1, "creation_date": 1545232096, "post_id": 53853744, "comment_id": 94555428, "body": "@JohnBollinger I understand that.  That&#39;s why I have the discliamer that this is implementation defined.  At least for the big 3 they all treat <code>int</code> as signed in this case.  It is a shame that bit-fields are so under specified. It&#39;s basically here is this feature, consult your compiler on how to use it."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 1, "creation_date": 1545232101, "post_id": 53853744, "comment_id": 94555433, "body": "@Lundin, the standard&#39;s wording for the representation of signed integers can perfectly well handle the case where there are zero value bits, at least in two of the three allowed alternatives.  This works because it assigns (negative) <i>place values</i> to sign bits, rather than giving them an algorithmic interpretation."}, {"owner": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1545232933, "post_id": 53853744, "comment_id": 94555967, "body": "@JohnBollinger In the line <code>s.enabled = 1;</code>, the rule of simple assignment applies. We have a conversion from <code>int</code> to &quot;sign bit&quot;. <code>Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised.</code> This is what happens, and it is not necessarily &quot;place values in sign bit&quot;."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 153119, "user_id": 584518, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Lundin", "link": "https://stackoverflow.com/users/584518/lundin"}, "edited": false, "score": 0, "creation_date": 1545233232, "post_id": 53853744, "comment_id": 94556174, "body": "Agreed, @Lundin, that the result of the assignment is implementation-defined, and in particular that it does not have to correspond in any way to placing a value in the sign bit.  All I&#39;m saying is that C&#39;s rules for integer representation <i>do</i> afford meaningful and well-defined interpretations for 1-bit signed integers.  I say &quot;afford&quot; rather than &quot;specify&quot; only because there are two viable alternatives and one wobbly one."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 23, "last_activity_date": 1545235224, "last_edit_date": 1545235224, "creation_date": 1545231125, "answer_id": 53853744, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/53853744#53853744", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>This is implementation defined behavior.  I am making the assumption that the machines you are running this on use twos-compliment signed integers and treat <code>int</code> in this case as a signed integer to explain why you don't enter if true part of the if statement.</p>\n\n<pre><code>struct mystruct { int enabled:1; };\n</code></pre>\n\n<p>declares <code>enable</code> as a 1 bit bit-field.  Since it is signed, the valid values are <code>-1</code> and <code>0</code>.  Setting the field to <code>1</code> overflows that bit going back to <code>-1</code> (this is undefined behavior) </p>\n\n<p>Essentially when dealing with a signed bit-field the max value is <code>2^(bits - 1) - 1</code> which is <code>0</code> in this case.</p>\n"}, {"tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 10, "last_activity_date": 1545231469, "creation_date": 1545231469, "answer_id": 53853835, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/53853835#53853835", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>You could think of it as that in the 2's complement system, the left-most bit is the sign bit. Any signed integer with the left-most bit set is thus a negative value.</p>\n\n<p>If you have a 1-bit signed integer, it has only the sign bit. So assigning <code>1</code> to that single bit can only set the sign bit. So, when reading it back, the value is interpreted as negative and so is -1.</p>\n\n<p>The values a 1 bit signed integer can hold is <code>-2^(n-1)= -2^(1-1)= -2^0= -1</code> and <code>2^n-1= 2^1-1=0</code></p>\n"}, {"tags": [], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "is_accepted": true, "score": 8, "last_activity_date": 1545313110, "last_edit_date": 1545313110, "creation_date": 1545302408, "answer_id": 53867011, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/53867011#53867011", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>As per the <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2017/n4713.pdf\" rel=\"noreferrer\">C++ standard n4713</a>, a very similar code snippet is provided. The type used is <code>BOOL</code> (custom), but it can apply to any type.</p>\n\n<blockquote>\n  <h3>12.2.4</h3>\n  \n  <p><sup><strong>4</strong></sup> If the value true or false is stored into a bit-field of type <code>bool</code> of any size (including a one bit bit-field), the original <code>bool</code> value and the value of the bit-field shall compare equal. <strong>If the value of an enumerator is stored into a bit-field of the same enumeration type and the number of bits in the bit-field is large enough to hold\n  all the values of that enumeration type (10.2), the original enumerator value and the value of the bit-field\n  shall compare equal</strong>. \n  [ Example:</p>\n\n<pre><code>enum BOOL { FALSE=0, TRUE=1 };\nstruct A {\n  BOOL b:1;\n};\nA a;\nvoid f() {\n  a.b = TRUE;\n  if (a.b == TRUE)    // yields true\n    { /* ... */ }\n}\n</code></pre>\n  \n  <p>\u2014 end example ]</p>\n</blockquote>\n\n<hr>\n\n<p>At 1st glance, the bold part appears open for interpretation. However, the correct intent becomes clear when the <code>enum BOOL</code> is derived from the <code>int</code>.</p>\n\n<pre><code>enum BOOL : int { FALSE=0, TRUE=1 }; // ***this line\nstruct mystruct { BOOL enabled:1; };\nint main()\n{\n  struct mystruct s;\n  s.enabled = TRUE;\n  if(s.enabled == TRUE)\n    printf(\"Is enabled\\n\"); // --&gt; we think this to be printed\n  else\n    printf(\"Is disabled !!\\n\");\n}\n</code></pre>\n\n<p>With above code it gives a warning without <code>-Wall -pedantic</code>:</p>\n\n<blockquote>\n  <p>warning: \u2018mystruct::enabled\u2019 is too small to hold all values of \u2018enum BOOL\u2019\n   <code>struct mystruct { BOOL enabled:1; };</code></p>\n</blockquote>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>Is disabled !!  (when using <code>enum BOOL : int</code>)</p>\n</blockquote>\n\n<p>If <code>enum BOOL : int</code> is made simple <code>enum BOOL</code>, then the output is as the above standard pasage specifies:</p>\n\n<blockquote>\n  <p>Is enabled  (when using <code>enum BOOL</code>)</p>\n</blockquote>\n\n<hr>\n\n<p>Hence, it can be concluded, also as few other answers  have, that <strong><code>int</code> type is not big enough to store value \"1\" in just a single bit bit-field.</strong></p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 6147643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PteZ2.jpg?s=128&g=1", "display_name": "ar18", "link": "https://stackoverflow.com/users/6147643/ar18"}, "is_accepted": false, "score": 0, "last_activity_date": 1546566452, "creation_date": 1546566452, "answer_id": 54032174, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back/54032174#54032174", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>There is nothing wrong with your understanding of bitfields that I can see. What I see is that you redefined mystruct first as <strong>struct mystruct { int enabled:1; }</strong> and then as <strong>struct mystruct s;</strong>. What you should have coded was:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct mystruct { int enabled:1; };\nint main()\n{\n    mystruct s; &lt;-- Get rid of \"struct\" type declaration\n    s.enabled = 1;\n    if(s.enabled == 1)\n        printf(\"Is enabled\\n\"); // --&gt; we think this to be printed\n    else\n        printf(\"Is disabled !!\\n\");\n}\n</code></pre>\n"}], "owner": {"reputation": 62009, "user_id": 514235, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73c478b60c371abe43bb7ac15ff3666d?s=128&d=identicon&r=PG", "display_name": "iammilind", "link": "https://stackoverflow.com/users/514235/iammilind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6122, "favorite_count": 15, "accepted_answer_id": 53867011, "answer_count": 6, "score": 96, "last_activity_date": 1547791951, "creation_date": 1545230430, "last_edit_date": 1547791951, "question_id": 53853540, "link": "https://stackoverflow.com/questions/53853540/why-is-assigning-a-value-to-a-bit-field-not-giving-the-same-value-back", "title": "Why is assigning a value to a bit field not giving the same value back?", "body": "<p>I saw the below code in <a href=\"https://www.quora.com/What-is-something-that-almost-nobody-knows-about-the-C-coding-language/answer/%C3%81lvaro-Lopes\" rel=\"nofollow noreferrer\">this Quora post</a>:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nstruct mystruct { int enabled:1; };\nint main()\n{\n  struct mystruct s;\n  s.enabled = 1;\n  if(s.enabled == 1)\n    printf(\"Is enabled\\n\"); // --&gt; we think this to be printed\n  else\n    printf(\"Is disabled !!\\n\");\n}\n</code></pre>\n\n<p>In both C &amp; C++, the output of the code is <em>unexpected</em>, </p>\n\n<blockquote>\n  <p>Is disabled  !!</p>\n</blockquote>\n\n<p>Though the \"sign bit\" related explanation is given in that post, I am unable to understand, how it is possible that we set something and then it doesn't reflect as it is.</p>\n\n<p>Can someone give a more elaborate explanation?</p>\n\n<hr>\n\n<p><strong>Note</strong>: Both the tags <a href=\"/questions/tagged/c\" class=\"post-tag\" title=\"show questions tagged &#39;c&#39;\" rel=\"tag\">c</a> &amp; <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> are required, because their standards slightly differ for describing the bit-fields. See answers for <a href=\"https://stackoverflow.com/a/53853737/514235\">C specification</a> and <a href=\"https://stackoverflow.com/a/53867011/514235\">C++ specification</a>.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 17871, "user_id": 1171191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e7708869e2b3234fbf0e34c9506742?s=128&d=identicon&r=PG", "display_name": "BoBTFish", "link": "https://stackoverflow.com/users/1171191/bobtfish"}, "edited": false, "score": 6, "creation_date": 1545230348, "post_id": 53853487, "comment_id": 94554337, "body": "<a href=\"https://en.cppreference.com/w/cpp/io/manip/hex#Example\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/io/manip/hex#Example</a>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1545230422, "post_id": 53853487, "comment_id": 94554383, "body": "There is no way to figure out if a enum constant was initialized with hex value or in some other way. Thus printing a enum value in hex is no different from printing an arbitrary variable in hex."}, {"owner": {"reputation": 45, "user_id": 10811524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4nsrnJT7wOI/AAAAAAAAAAI/AAAAAAAACC4/C7UtGI97Dy0/photo.jpg?sz=128", "display_name": "Anshika Verma", "link": "https://stackoverflow.com/users/10811524/anshika-verma"}, "edited": false, "score": 0, "creation_date": 1545230568, "post_id": 53853487, "comment_id": 94554483, "body": "sorry I corrected it ...56 as per the sequence"}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 4, "creation_date": 1545230834, "post_id": 53853487, "comment_id": 94554662, "body": "Whether you assign a value in decimal (84), hex (0x54) or octal (0124), the value will be stored the same internally. You can only choose to display this value in different ways."}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 1, "creation_date": 1545232004, "post_id": 53853487, "comment_id": 94555369, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/479373/c-cout-hex-values\">c++ cout hex values?</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1545232293, "post_id": 53853487, "comment_id": 94555540, "body": "Hexadecimal 56 and decimal 86 (and octal 126, and binary 01010110, and Roman LXXXVI...) denote the same value, the only difference is in their textual form."}, {"owner": {"reputation": 45, "user_id": 10811524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4nsrnJT7wOI/AAAAAAAAAAI/AAAAAAAACC4/C7UtGI97Dy0/photo.jpg?sz=128", "display_name": "Anshika Verma", "link": "https://stackoverflow.com/users/10811524/anshika-verma"}, "edited": false, "score": 0, "creation_date": 1545234283, "post_id": 53853487, "comment_id": 94556918, "body": "I can print the value in hex or octal with cout. how do I store (hex value) it in a variable to use further?"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "edited": false, "score": 0, "creation_date": 1545234767, "post_id": 53853487, "comment_id": 94557274, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5100718/integer-to-hex-string-in-c\">Integer to hex string in C++</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 10811524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4nsrnJT7wOI/AAAAAAAAAAI/AAAAAAAACC4/C7UtGI97Dy0/photo.jpg?sz=128", "display_name": "Anshika Verma", "link": "https://stackoverflow.com/users/10811524/anshika-verma"}, "edited": false, "score": 0, "creation_date": 1545234363, "post_id": 53854608, "comment_id": 94556979, "body": "how do I store (hex value) it in a variable to use further?"}, {"owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "reply_to_user": {"reputation": 45, "user_id": 10811524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4nsrnJT7wOI/AAAAAAAAAAI/AAAAAAAACC4/C7UtGI97Dy0/photo.jpg?sz=128", "display_name": "Anshika Verma", "link": "https://stackoverflow.com/users/10811524/anshika-verma"}, "edited": false, "score": 0, "creation_date": 1545234586, "post_id": 53854608, "comment_id": 94557140, "body": "e is a variable.  When I write <code>e = a</code> the value of the enum <code>a</code> is stored in variable <code>e</code>.  You can then use e sometime later. Please understand that you don&#39;t store a &#39;hex&#39; value.  When you write <code>a = 0x54</code> it is the same as writing <code>a =84</code>. The computer has only one way of storing it. What do you want to do with this number later on?"}], "tags": [], "owner": {"reputation": 27886, "user_id": 158285, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/53f7def58ca1dfdc13369dfd5e2aaace?s=128&d=identicon&r=PG", "display_name": "bradgonesurfing", "link": "https://stackoverflow.com/users/158285/bradgonesurfing"}, "is_accepted": true, "score": 1, "last_activity_date": 1545234081, "creation_date": 1545234081, "answer_id": 53854608, "question_id": 53853487, "link": "https://stackoverflow.com/questions/53853487/how-to-print-hex-value-of-an-enum-to-a-string-in-c/53854608#53854608", "title": "how to print hex value of an enum to a string in c++", "body": "<p>If you want to print the hex value of an enum you can use printf with the <code>%x</code> placeholder. For example</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nenum Foo {\n    a      = 0x54,\n    b      = 0xA6,\n    c      = 0xFF\n};\n\nint main() {\n    Foo e;\n\n    e = a;\n    printf(\"%x\\n\",e);\n\n    e = b;\n    printf(\"%x\\n\",e);\n\n    e = c;\n    printf(\"%x\\n\",e);\n\n}\n</code></pre>\n\n<p>the output of the program is</p>\n\n<pre><code>54\na6\nff\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3596, "user_id": 1753435, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b81cf3b8c8432e0bcac7322120a09b56?s=128&d=identicon&r=PG", "display_name": "andreee", "link": "https://stackoverflow.com/users/1753435/andreee"}, "is_accepted": false, "score": 0, "last_activity_date": 1545236035, "creation_date": 1545236035, "answer_id": 53855150, "question_id": 53853487, "link": "https://stackoverflow.com/questions/53853487/how-to-print-hex-value-of-an-enum-to-a-string-in-c/53855150#53855150", "title": "how to print hex value of an enum to a string in c++", "body": "<p>How about the following solution?</p>\n\n<pre><code>std::ostringstream str;\nstr &lt;&lt; std::hex &lt;&lt; a;\nauto x = str.str();\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "is_accepted": false, "score": 0, "last_activity_date": 1545236836, "creation_date": 1545236836, "answer_id": 53855370, "question_id": 53853487, "link": "https://stackoverflow.com/questions/53853487/how-to-print-hex-value-of-an-enum-to-a-string-in-c/53855370#53855370", "title": "how to print hex value of an enum to a string in c++", "body": "<p>You could write your <code>to_hex</code> function to store the hex representation of the value in a string using stringstreams and IO manipulation :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n\nstd::string to_hex(const unsigned a) {\n    std::stringstream ss;\n    ss &lt;&lt; \"0x\" &lt;&lt; std::hex &lt;&lt; a;\n    return ss.str();\n}\n\nint main() {\n    unsigned value = 0x1234;\n    std::string value_as_hex = to_hex(value);\n\n    std::cout &lt;&lt; value_as_hex &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>0x1234\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 10811524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4nsrnJT7wOI/AAAAAAAAAAI/AAAAAAAACC4/C7UtGI97Dy0/photo.jpg?sz=128", "display_name": "Anshika Verma", "link": "https://stackoverflow.com/users/10811524/anshika-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 53854608, "answer_count": 3, "score": 0, "last_activity_date": 1545236836, "creation_date": 1545230285, "last_edit_date": 1545235432, "question_id": 53853487, "link": "https://stackoverflow.com/questions/53853487/how-to-print-hex-value-of-an-enum-to-a-string-in-c", "title": "how to print hex value of an enum to a string in c++", "body": "<p>How do I convert the hex value of the below <code>enum</code> to a string and store it in a variable.</p>\n\n<pre><code>enum {\n    a      = 0x54,\n    b,\n    c\n};\n</code></pre>\n\n<p>For example</p>\n\n<pre><code>auto value = a;\nstd::string value_as_hex = to_hex(a);\n</code></pre>\n\n<p>How do I write <code>to_hex</code></p>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"reputation": 25518, "user_id": 6401656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jtwou.jpg?s=128&g=1", "display_name": "RbMm", "link": "https://stackoverflow.com/users/6401656/rbmm"}, "edited": false, "score": 5, "creation_date": 1545230248, "post_id": 53853415, "comment_id": 94554287, "body": "console is window, but it belong to another process, not your. so no mistake here"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1545231895, "post_id": 53853415, "comment_id": 94555303, "body": "Deadlock is a high probability here, I had no trouble getting one from the posted code on my machine.  A program that listens for automation events needs to advertise that it is going to be nice to various components that can generate such events.  You have to explicitly announce that you are going to pump a message loop to keep such components thread-safe.  Add <code>CoInitializeEx(NULL, COINIT_APARTMENTTHREADED);</code> to the setup() function.  Not getting a lot of messages in a console mode app is expected, it is conhost.exe that maintains the console window"}, {"owner": {"reputation": 2339, "user_id": 1433559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/sDfWE.png?s=128&g=1", "display_name": "MadeOfAir", "link": "https://stackoverflow.com/users/1433559/madeofair"}, "edited": false, "score": 0, "creation_date": 1545239653, "post_id": 53853415, "comment_id": 94560101, "body": "I tried <code>CoInitializeEx(NULL, COINIT_APARTMENTTHREADED)</code> but it didn&#39;t do it&#39;s magic. The program still locks up when I focus the console."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545254295, "post_id": 53853415, "comment_id": 94566399, "body": "There is no use of COM objects in this code, so <code>CoInitialize&#47;Ex()</code> is not necessary or useful."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545254661, "post_id": 53853415, "comment_id": 94566536, "body": "Do you have the same problem if you replace <code>GetWindowText&#47;Length()</code> with <a href=\"https://docs.microsoft.com/en-us/windows/console/getconsoletitle\" rel=\"nofollow noreferrer\"><code>GetConsoleTitle()</code></a> when the reported <code>HWND</code> is the same one returned by <a href=\"https://docs.microsoft.com/en-us/windows/console/getconsolewindow\" rel=\"nofollow noreferrer\"><code>GetConsoleWindow()</code></a>? <code>if (hwnd == GetConsoleWindow()) { use GetConsoleTitle(); ... } else { use GetWindowText(); ...}</code>"}, {"owner": {"reputation": 2339, "user_id": 1433559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/sDfWE.png?s=128&g=1", "display_name": "MadeOfAir", "link": "https://stackoverflow.com/users/1433559/madeofair"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1545310276, "post_id": 53853415, "comment_id": 94585084, "body": "@RemyLebeau I&#39;m not really interested in the console window title here so I just used if <code>(hwnd != GetConsoleWindow) {my.old.stuff}</code> and the issue remains."}], "owner": {"reputation": 2339, "user_id": 1433559, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/sDfWE.png?s=128&g=1", "display_name": "MadeOfAir", "link": "https://stackoverflow.com/users/1433559/madeofair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545299954, "creation_date": 1545230075, "last_edit_date": 1545230279, "question_id": 53853415, "link": "https://stackoverflow.com/questions/53853415/setwineventhooks-winevent-skipownprocess-not-really-working", "title": "SetWinEventHook&#39;s WINEVENT_SKIPOWNPROCESS not really working", "body": "<p>I'm interested in the window title of the currently focused window. I now have this code which basically works:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;Windows.h&gt;\n\nusing namespace std;\n\n\nvoid CALLBACK myCallback(HWINEVENTHOOK hWinEventHook,\n      DWORD event,\n      HWND hwnd,\n      LONG idObject,\n      LONG idChild,\n      DWORD idEventThread,\n      DWORD dwmsEventTime) {\n    int windowTitleLength = GetWindowTextLengthA(hwnd);\n    const int bufferSize = windowTitleLength + 2;\n    LPSTR windowTitleBuffer = new char[bufferSize];\n    GetWindowTextA(hwnd, windowTitleBuffer, bufferSize);\n    cout &lt;&lt; \"Title: \" &lt;&lt; windowTitleBuffer &lt;&lt; endl;\n    delete[] windowTitleBuffer;\n}\n\nvoid setup() {\n    SetWinEventHook(EVENT_SYSTEM_FOREGROUND, EVENT_SYSTEM_FOREGROUND, NULL, myCallback, 0, 0,\n        WINEVENT_OUTOFCONTEXT | WINEVENT_SKIPOWNPROCESS);\n}\n\nint main()\n{\n    bool bRet;\n    MSG myMsg;\n    setup();\n    while (bRet = GetMessage(&amp;myMsg, NULL, 0, 0) != 0)\n    {\n        if (bRet == -1) {\n            cout &lt;&lt; \"ABANDON SHIP!\" &lt;&lt; endl;\n        }\n        cout &lt;&lt; \"Got a message!\" &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>And btw this is my attempt to achieve in c++ what I failed to achieve in nodejs <a href=\"https://stackoverflow.com/questions/53772437/call-windows-setwineventhook-from-nodejs\">here</a>.</p>\n\n<p>The window titles get printed as expected until I explicitly focus the terminal window of my little program. It prints it's own title then freezes. Focusing other windows does not print anything until I press <kbd>Ctrl</kbd>+<kbd>C </kbd> in my console then all the stored energy in my program's memory is released and starts working again.</p>\n\n<p>Now I don't know why the callback is being called for my own program console window when I have specified <code>WINEVENT_SKIPOWNPROCESS</code> flag to <code>SetWinEventHook</code>. Maybe because the console is not really a <em>window</em>?</p>\n\n<p>The second question I have about this code is the <code>GetMessage</code> function which gets called only once no matter how many events my program receives which doesn't make sense to me because I expect it to be called once for each event received.</p>\n\n<p>Also, maybe as a consequence to the above, the <code>while</code> loop body never executes.</p>\n\n<p>How to get this program to not choke on it's own events?</p>\n"}, {"tags": ["c++", "file", "dll"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1545231704, "post_id": 53853333, "comment_id": 94555189, "body": "Could you clarify your exact issue and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1545232482, "post_id": 53853333, "comment_id": 94555643, "body": "Its depends. what do you want to read?"}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "edited": false, "score": 0, "creation_date": 1545233201, "post_id": 53853333, "comment_id": 94556152, "body": "Now I see code that opens the file and then closer. You do need code that actually reads the file. Futhermore <code>data</code> won&#39;t output anything as I explained in my answer."}], "answers": [{"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 0, "last_activity_date": 1545232875, "creation_date": 1545232875, "answer_id": 53854240, "question_id": 53853333, "link": "https://stackoverflow.com/questions/53853333/how-to-read-from-a-file-through-a-static-link-library-in-visual-studio/53854240#53854240", "title": "How to read from a file through a Static Link library? in visual studio", "body": "<p>To load data into array use <code>std::vector&lt;int&gt;</code> to instantiate the variable and <code>std::vector&lt;int&gt;&amp;</code> to let the function edit it. <code>int data[]</code> accepts copy of the input variable and not the variable itself - so editing it is pointless.</p>\n\n<pre><code>void fun(int a[])\n{\na[0]=1;\na[1]=2;\n}\n\nint main()\n{\nint a[2] = {5,7};\nfun(a);\ncout&lt;&lt;a[0] &lt;&lt; a[1];\nreturn 0;\n}\n</code></pre>\n\n<p>This code prints <code>57</code> as <code>fun</code> changes nothing. While the following code will print <code>12</code>:</p>\n\n<pre><code>void fun(vector&lt;int&gt;&amp; a)\n{\na[0]=1;\na[1]=2;\n}\n\nint main()\n{\nvector&lt;int&gt; a = {5,7};\nfun(a);\ncout&lt;&lt;a[0] &lt;&lt; a[1];\nreturn 0;\n}\n</code></pre>\n\n<p>Adding &amp; to <code>fun</code>'s input causes it get the variable itself and not a copy of it. While vector allows one to change the size of the container dynamically which is extremely useful in general.</p>\n"}], "owner": {"reputation": 1, "user_id": 9714764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7337555c165a6b8d4b44ee58d4ab3a6?s=128&d=identicon&r=PG&f=1", "display_name": "Brown", "link": "https://stackoverflow.com/users/9714764/brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545660149, "creation_date": 1545229829, "last_edit_date": 1545660149, "question_id": 53853333, "link": "https://stackoverflow.com/questions/53853333/how-to-read-from-a-file-through-a-static-link-library-in-visual-studio", "title": "How to read from a file through a Static Link library? in visual studio", "body": "<p>I am relatively new to programming and I want to know this. I have tried all the ways possible but I am stuck at this point.</p>\n\n<p>Please Help me if possible.</p>\n\n<p>Below is the my SLL to get in order to access the contents in the file and store it in an array:</p>\n\n<pre><code>        #pragma once\n#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n\nnamespace std {\n\n    class SLL\n    {\n\n    private:\n        ifstream inputFile();\n\n    public:\n        //this is where the functions go\n        int LoadMeasurements(wchar_t* inputFile, int data[], int maxSize) { \n            ifstream inputFile();\n\n            inputFile.open(\"inputFile.txt\");\n\n            inputFile.close();\n        }\n    };\n}\n</code></pre>\n\n<p>Thank You in Advance</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545229894, "post_id": 53853193, "comment_id": 94554065, "body": "what do you want to achive? The caller should pick the type? Or should the caller just pass the <code>name</code> of the global and get the correct type returned?"}, {"owner": {"reputation": 214, "user_id": 1928698, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/116805737f2656423e0a6dde999d546a?s=128&d=identicon&r=PG", "display_name": "PixelArtDragon", "link": "https://stackoverflow.com/users/1928698/pixelartdragon"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545230015, "post_id": 53853193, "comment_id": 94554146, "body": "@user463035818 The caller would use GetGlobal&lt;int&gt;(name) to get an int, GetGlobal&lt;float&gt; to get a float, etc."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545230407, "post_id": 53853193, "comment_id": 94554376, "body": "ok then you are almost there. give me a second to write an answer ;)"}, {"owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 0, "creation_date": 1545230517, "post_id": 53853193, "comment_id": 94554443, "body": "The question is not tagged as C++17, but do you maybe still have access to C++17 features?"}, {"owner": {"reputation": 214, "user_id": 1928698, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/116805737f2656423e0a6dde999d546a?s=128&d=identicon&r=PG", "display_name": "PixelArtDragon", "link": "https://stackoverflow.com/users/1928698/pixelartdragon"}, "reply_to_user": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "edited": false, "score": 0, "creation_date": 1545230561, "post_id": 53853193, "comment_id": 94554477, "body": "@sebrockm I&#39;m not sure. I definitely have C++11 features, but I&#39;m not sure what VS2017 has."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545230727, "post_id": 53853193, "comment_id": 94554592, "body": "sorry misread the question, will have to fix my already written answer, but dont have time now"}], "answers": [{"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545230731, "post_id": 53853569, "comment_id": 94554596, "body": "This can be way less tedious with variable templates, but is the right approach :)"}], "tags": [], "owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1545230543, "creation_date": 1545230543, "answer_id": 53853569, "question_id": 53853193, "link": "https://stackoverflow.com/questions/53853193/templating-for-specific-line-in-function/53853569#53853569", "title": "Templating for specific line in function", "body": "<p>The declaration should just be:</p>\n\n<pre><code>template&lt;class T&gt;\nT GetGlobal(const std::string&amp; name);\n</code></pre>\n\n<p>And for the implementation, I would create a struct template, and use the specialisations as a map from type to function.</p>\n\n<pre><code>#include &lt;type_traits&gt;\n\ntemplate&lt;class&gt;\nstruct lua_to;\n\ntemplate&lt;&gt;\nstruct lua_to&lt;int&gt; {\n    typedef int(*type)(decltype(luaState), int);\n    static constexpr const type value = lua_to_int;\n};\n\n\ntemplate&lt;&gt;\nstruct lua_to&lt;std::string&gt; {\n    typedef std::string(*type)(decltype(luaState), int);\n    static constexpr const type value = lua_to_string;\n};\n\n// In this case, since this is so tedious, I would use a macro\n#define MY_MODULE_DEFINE_LUA_TO(ctype, luatype) \\\ntemplate&lt;&gt; \\\nstruct lua_to&lt;ctype&gt; { \\\n    typedef ctype(*type)(decltype(luaState), int); \\\n    static constexpr const type value = lua_to_  ## luatype; \\\n};\n\n\nMY_MODULE_DEFINE_LUA_TO(std::map, table);\nMY_MODULE_DEFINE_LUA_TO(double, float);\n\n#undef MY_MODULE_DEFINE_LUA_TO\n\n\ntemplate&lt;class T&gt;\nT GetGlobal(const std::string&amp; name) {\n    lua_getglobal(luaState, name); //push the global to the top of the stack\n    T value = lua_to&lt;T&gt;::value(luaState, -1); //store the value for return\n    lua_pop(luaState, 1); //return the stack to empty\n    return value;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4966, "user_id": 9883438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9176c9238126b88b11234a86f45cbe?s=128&d=identicon&r=PG&f=1", "display_name": "sebrockm", "link": "https://stackoverflow.com/users/9883438/sebrockm"}, "is_accepted": false, "score": 1, "last_activity_date": 1545232647, "last_edit_date": 1545232647, "creation_date": 1545230885, "answer_id": 53853668, "question_id": 53853193, "link": "https://stackoverflow.com/questions/53853193/templating-for-specific-line-in-function/53853668#53853668", "title": "Templating for specific line in function", "body": "<p>If your compiler supports C++17, you can use <code>if constexpr</code>:</p>\n\n<pre><code>template&lt;typename T&gt;\nT LuaManager::GetGlobal(const std::string &amp; name)\n{\n    lua_getglobal(luaState, name);\n    T value;\n    if constexpr (std::is_same_v&lt;T, std::string&gt;)\n        value = lua_to_string(luaState, -1); // I don't know the actual name of this function\n    else if (std::is_same_v&lt;T, int&gt;)\n        value = lua_to_int(luaState, -1);\n    else if (std::is_same_v&lt;T, whatever&gt;)\n        value = lua_to_whatever(luaState, -1);\n        // some other arbitrary type dependent code\n    else ... // other types \n    lua_pop(luaState, 1);\n    return value;\n}\n</code></pre>\n\n<p>Note: To enable C++17 in Visual Studio, right click on your project and click on Properties. Then go to C/C++ -> Language -> C++ Language Standard and select <code>/std:c++17</code> or <code>/std:c++latest</code>.</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>If you cannot or don't want to use C++17, here is another approach that doesn't use any \"new\" features, even without templates:</p>\n\n<pre><code>void get_lua_value(string&amp; value)\n{\n    value = lua_to_string(luaState, -1);\n}\n\nvoid get_lua_value(int&amp; value)\n{\n    value = lua_to_int(luaState, -1);\n}\n</code></pre>\n\n<p>Add one of these overloads for each type. Then you can just call <code>get_lua_value()</code> and overload resolution will do the job for you:</p>\n\n<pre><code>template&lt;typename T&gt;\nT LuaManager::GetGlobal(const std::string&amp; name)\n{\n    lua_getglobal(luaState, name);\n    T value;\n    get_lua_value(value); \n    lua_pop(luaState, 1);\n    return value;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 5626878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96bdc1d189273a0c313e17037e85a2e?s=128&d=identicon&r=PG&f=1", "display_name": "dzikakulka", "link": "https://stackoverflow.com/users/5626878/dzikakulka"}, "is_accepted": false, "score": 0, "last_activity_date": 1545230908, "creation_date": 1545230908, "answer_id": 53853674, "question_id": 53853193, "link": "https://stackoverflow.com/questions/53853193/templating-for-specific-line-in-function/53853674#53853674", "title": "Templating for specific line in function", "body": "<p>I think you should have a generic declaration and specialized implementations in that case. You can't just \"switch the function\" based on T on that one line. Consider this example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// Generic declaration\ntemplate &lt;typename T&gt;\nT doStuff(int arg);\n\n// Specific definitions\ntemplate&lt;&gt;\nint doStuff(int arg){\n    return arg + 1;\n}\ntemplate&lt;&gt;\nfloat doStuff(int arg){\n    return arg - 1;\n}\n\nint main(){\n    // Our templated function varies in return type,\n    //  so you always have to explicitly specify which variant to use\n\n    // This WOULD NOT let compile infer what you want:\n    /* float test = doStuff(10) */ // ambiguous call\n\n    // This is OK\n    std::cout &lt;&lt; doStuff&lt;int&gt;(10) &lt;&lt; \" \" &lt;&lt; doStuff&lt;float&gt;(10) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>You will have an almost-identical GetGlobal function differing in just this one line. If you want to cut the repetition down, you could have a template for a conversion to a C++ type alone (taking a luaState as an arg), and then maybe templated GetGlobal that calls appropriate template variant</p>\n"}, {"tags": [], "owner": {"reputation": 214, "user_id": 1928698, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/116805737f2656423e0a6dde999d546a?s=128&d=identicon&r=PG", "display_name": "PixelArtDragon", "link": "https://stackoverflow.com/users/1928698/pixelartdragon"}, "is_accepted": true, "score": 0, "last_activity_date": 1545308708, "creation_date": 1545308708, "answer_id": 53868660, "question_id": 53853193, "link": "https://stackoverflow.com/questions/53853193/templating-for-specific-line-in-function/53868660#53868660", "title": "Templating for specific line in function", "body": "<p>So turns out I was trying to make this a bit more complicated than I needed to:\nI made the GetGlobal function not care at all about what type it was trying to get:</p>\n\n<pre><code>template&lt;typename T&gt;\nT GetGlobal(const std::string &amp; name)\n{\n    lua_getglobal(luaState, name.c_str());\n    T value = lua_to&lt;T&gt;(-1);\n    lua_pop(luaState, 1);\n    return value;\n}\n</code></pre>\n\n<p>And then I defined a template for <code>lua_to&lt;T&gt;(int stack_index)</code> and made each specialization for it use a different function:</p>\n\n<pre><code>template&lt;typename T&gt;\nT lua_to(int stack_index);\ntemplate&lt;&gt;\nint lua_to(int stack_index) {\n    return lua_tointeger(luaState, stack_index);\n}\ntemplate&lt;&gt;\nstd::string lua_to(int stack_index) {\n    return std::string(lua_tostring(luaState, stack_index));\n}\n</code></pre>\n\n<p>So far it works for both <code>std::string</code> and <code>int</code>, which seems to imply it will work for other types as well.</p>\n"}], "owner": {"reputation": 214, "user_id": 1928698, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/116805737f2656423e0a6dde999d546a?s=128&d=identicon&r=PG", "display_name": "PixelArtDragon", "link": "https://stackoverflow.com/users/1928698/pixelartdragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53868660, "answer_count": 4, "score": 1, "last_activity_date": 1545308708, "creation_date": 1545229292, "last_edit_date": 1545230731, "question_id": 53853193, "link": "https://stackoverflow.com/questions/53853193/templating-for-specific-line-in-function", "title": "Templating for specific line in function", "body": "<p>I'm writing a wrapper for embedded Lua, and I have a series of functions to retrieve global values from a lua_State. Since the function does almost the exact same thing for each (gets the global name with <code>lua_getglobal(L, name)</code>, calls the appropriate <code>lua_to___()</code> function, and then pops the stack to return the lua_State to its original status), I figured there should be some way to do this with templates.</p>\n\n<p>However, I can't seem to find a way to have that one specific line where the type matters be dependent on the type without writing completely separate functions for each type. While right now this function would only be three lines long, there are other similar functions that might be more complicated but with the same issue.</p>\n\n<p>As of now, the functions look like this (this is within a class called LuaManager, which has a lua_State* member):</p>\n\n<pre><code>//Declaration\ntemplate&lt;std::string&gt;\nstd::string GetGlobal(const std::string &amp; name);\ntemplate&lt;int&gt;\nint GetGlobal(const std::string &amp; name);\ntemplate&lt;float&gt;\nfloat GetGlobal(const std::string &amp; name);\ntemplate&lt;bool&gt;\nbool GetGlobal(const std::string &amp; name);\n\n//Implementation\ntemplate&lt;typename T&gt;\nT LuaManager::GetGlobal(const std::string &amp; name)\n{\n    lua_getglobal(luaState, name.c_str()); //push the global to the top of the stack\n    T value = lua_to____(luaState, -1); //store the value for return\n    lua_pop(luaState, 1); //return the stack to empty\n    return value;\n}\n</code></pre>\n\n<p>Is there a way to be able to, for individual lines of code, specialize a template? Or am I misunderstanding what I should be using templates for?</p>\n"}, {"tags": ["c++", "vulkan", "yuv"], "answers": [{"comments": [{"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "edited": false, "score": 0, "creation_date": 1592474000, "post_id": 54108963, "comment_id": 110440528, "body": "For those who copy paste the code from the question: There is an error there. sampler address mode must be VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE and not REPEAT. I edited the question with the fix."}], "tags": [], "owner": {"reputation": 441, "user_id": 6035664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5653b350ee0c5cd1730901299a3e80?s=128&d=identicon&r=PG&f=1", "display_name": "MulattoKid", "link": "https://stackoverflow.com/users/6035664/mulattokid"}, "is_accepted": true, "score": 5, "last_activity_date": 1547032764, "creation_date": 1547032764, "answer_id": 54108963, "question_id": 53853046, "link": "https://stackoverflow.com/questions/53853046/ycbcr-sampler-in-vulkan/54108963#54108963", "title": "YCbCr Sampler in Vulkan", "body": "<p>Solution: according to the spec, sec. 12.1, <em>Conversion must be fixed at pipeline creation time, through use of a combined image sampler with an immutable sampler in VkDescriptorSetLayoutBinding.</em></p>\n\n<p>By adding the <em>ycbcr_sampler</em> to <em>pImmutableSamplers</em> when setting up the descriptor set layout binding it now works:</p>\n\n<pre><code>VkDescriptorSetLayoutBinding image_binding = {};\nimage_binding.binding = 0;\nimage_binding.descriptorType = VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER;\nimage_binding.descriptorCount = 1;\nimage_binding.stageFlags = VK_SHADER_STAGE_FRAGMENT_BIT;\nimage_binding.pImmutableSamplers = &amp;ycbcr_sampler;\n</code></pre>\n"}], "owner": {"reputation": 441, "user_id": 6035664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5653b350ee0c5cd1730901299a3e80?s=128&d=identicon&r=PG&f=1", "display_name": "MulattoKid", "link": "https://stackoverflow.com/users/6035664/mulattokid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 1, "accepted_answer_id": 54108963, "answer_count": 1, "score": 6, "last_activity_date": 1592597645, "creation_date": 1545228729, "last_edit_date": 1592597645, "question_id": 53853046, "link": "https://stackoverflow.com/questions/53853046/ycbcr-sampler-in-vulkan", "title": "YCbCr Sampler in Vulkan", "body": "<p>I've been trying to sample a YCbCr image in Vulkan but I keep getting incorrect results, and I was hoping someone might be able to spot my mistake.</p>\n\n<p>I have a NV12 YCbCr image which I want to render onto two triangles forming a quad. If i understand correctly, the VkFormat that corresponds to NV12 is VK_FORMAT_G8_B8R8_2PLANE_420_UNORM. Below is the code that I would expect to work, but I'll try to explain what I'm trying to do as well:</p>\n\n<ol>\n<li>Create a VkSampler with a VkSamplerYcbcrConversion (with the correct format) in pNext</li>\n<li>Read NV12 data into staging buffer</li>\n<li>Create VkImage with the correct format and specify that the planes are disjoint</li>\n<li>Get memory requirements (and offset for plane 1) for each plane (0 and 1)</li>\n<li>Allocate device local memory for the image data</li>\n<li>Bind each plane to the correct location in memory</li>\n<li>Copy staging buffer to image memory</li>\n<li>Create VkImageView with the same format as the VkImage and the same VkSamplerYcbcrConversionInfo as the VkSampler in pNext.</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>VkSamplerYcbcrConversion ycbcr_sampler_conversion;\nVkSamplerYcbcrConversionInfo ycbcr_info;\nVkSampler ycbcr_sampler;\nVkImage image;\nVkDeviceMemory image_memory;\nVkDeviceSize memory_offset_plane0, memory_offset_plane1;\nVkImageView image_view;\n\nenum YCbCrStorageFormat\n{\n    NV12\n};\n\nunsigned char* ReadYCbCrFile(const std::string&amp; filename, YCbCrStorageFormat storage_format, VkFormat vulkan_format, uint32_t* buffer_size, uint32_t* buffer_offset_plane1, uint32_t* buffer_offset_plane2)\n{\n    std::ifstream file;\n    file.open(filename.c_str(), std::ios::in | std::ios::binary | std::ios::ate);\n    if (!file.is_open()) { ELOG(\"Failed to open YCbCr image\"); }\n    *buffer_size = file.tellg();\n    file.seekg(0);\n\n    unsigned char* data;\n    switch (storage_format)\n    {\n        case NV12:\n        {\n            if (vulkan_format != VK_FORMAT_G8_B8R8_2PLANE_420_UNORM)\n            {\n                ILOG(\"A 1:1 relationship doesn't exist between NV12 and 420, exiting\");\n                exit(1);\n            }\n            *buffer_offset_plane1 = (*buffer_size / 3) * 2;\n            *buffer_offset_plane2 = 0; //Not used\n            data = new unsigned char[*buffer_size];\n            file.read((char*)(data), *buffer_size);\n            break;\n        }\n        default:\n            ELOG(\"A YCbCr storage format is required\");\n            break;\n    }\n\n    file.close();\n    return data;\n}\n\nVkFormatProperties format_properties;\nvkGetPhysicalDeviceFormatProperties(physical_device, VK_FORMAT_G8_B8R8_2PLANE_420_UNORM, &amp;format_properties);\nbool cosited = false, midpoint = false;\nif (format_properties.optimalTilingFeatures &amp; VK_FORMAT_FEATURE_COSITED_CHROMA_SAMPLES_BIT)\n{\n    cosited = true;\n}\nelse if (format_properties.optimalTilingFeatures &amp; VK_FORMAT_FEATURE_MIDPOINT_CHROMA_SAMPLES_BIT)\n{\n    midpoint = true;\n}\nif (!cosited &amp;&amp; !midpoint)\n{\n    ELOG(\"Nither VK_FORMAT_FEATURE_COSITED_CHROMA_SAMPLES_BIT nor VK_FORMAT_FEATURE_MIDPOINT_CHROMA_SAMPLES_BIT is supported for VK_FORMAT_G8_B8R8_2PLANE_420_UNORM\");\n}\n\nVkSamplerYcbcrConversionCreateInfo conversion_info = {};\nconversion_info.sType = VK_STRUCTURE_TYPE_SAMPLER_YCBCR_CONVERSION_CREATE_INFO;\nconversion_info.pNext = NULL;\nconversion_info.format = VK_FORMAT_G8_B8R8_2PLANE_420_UNORM;\nconversion_info.ycbcrModel = VK_SAMPLER_YCBCR_MODEL_CONVERSION_YCBCR_709;\nconversion_info.ycbcrRange = VK_SAMPLER_YCBCR_RANGE_ITU_FULL;\nconversion_info.components.r = VK_COMPONENT_SWIZZLE_IDENTITY;\nconversion_info.components.g = VK_COMPONENT_SWIZZLE_IDENTITY;\nconversion_info.components.b = VK_COMPONENT_SWIZZLE_IDENTITY;\nconversion_info.components.a = VK_COMPONENT_SWIZZLE_IDENTITY;\nif (cosited)\n{\n    conversion_info.xChromaOffset = VK_CHROMA_LOCATION_COSITED_EVEN;\n    conversion_info.yChromaOffset = VK_CHROMA_LOCATION_COSITED_EVEN;\n}\nelse\n{\n    conversion_info.xChromaOffset = VK_CHROMA_LOCATION_MIDPOINT;\n    conversion_info.yChromaOffset = VK_CHROMA_LOCATION_MIDPOINT;\n}\nconversion_info.chromaFilter = VK_FILTER_LINEAR;\nconversion_info.forceExplicitReconstruction = VK_FALSE;\nVkResult res = vkCreateSamplerYcbcrConversion(logical_device, &amp;conversion_info, NULL, &amp;ycbcr_sampler_conversion);\nCHECK_VK_RESULT(res, \"Failed to create YCbCr conversion sampler\");\nILOG(\"Successfully created YCbCr conversion\");\n\nycbcr_info.sType = VK_STRUCTURE_TYPE_SAMPLER_YCBCR_CONVERSION_INFO;\nycbcr_info.pNext = NULL;\nycbcr_info.conversion = ycbcr_sampler_conversion;\n\nVkSamplerCreateInfo sampler_info = {};\nsampler_info.sType = VK_STRUCTURE_TYPE_SAMPLER_CREATE_INFO;\nsampler_info.pNext = &amp;ycbcr_info;\nsampler_info.flags = 0;\nsampler_info.magFilter = VK_FILTER_LINEAR;\nsampler_info.minFilter = VK_FILTER_LINEAR;\nsampler_info.mipmapMode = VK_SAMPLER_MIPMAP_MODE_LINEAR;\nsampler_info.addressModeU = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE;\nsampler_info.addressModeV = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE;\nsampler_info.addressModeW = VK_SAMPLER_ADDRESS_MODE_CLAMP_TO_EDGE;\nsampler_info.mipLodBias = 0.0f;\nsampler_info.anisotropyEnable = VK_FALSE;\n//sampler_info.maxAnisotropy IGNORED\nsampler_info.compareEnable = VK_FALSE;\n//sampler_info.compareOp =  IGNORED\nsampler_info.minLod = 0.0f;\nsampler_info.maxLod = 1.0f;\nsampler_info.borderColor = VK_BORDER_COLOR_FLOAT_OPAQUE_BLACK;\nsampler_info.unnormalizedCoordinates = VK_FALSE;\nres = vkCreateSampler(logical_device, &amp;sampler_info, NULL, &amp;ycbcr_sampler);\nCHECK_VK_RESULT(res, \"Failed to create YUV sampler\");\nILOG(\"Successfully created sampler with YCbCr in pNext\");\n\nstd::string filename = \"tree_nv12_1920x1080.yuv\";\nuint32_t width = 1920, height = 1080;\nVkFormat format = VK_FORMAT_G8_B8R8_2PLANE_420_UNORM;\nuint32_t buffer_size, buffer_offset_plane1, buffer_offset_plane2;\nunsigned char* ycbcr_data = ReadYCbCrFile(filename, NV12, VK_FORMAT_G8_B8R8_2PLANE_420_UNORM, &amp;buffer_size, &amp;buffer_offset_plane1, &amp;buffer_offset_plane2);\n\n//Load image into staging buffer\nVkDeviceMemory stage_buffer_memory;\nVkBuffer stage_buffer = create_vk_buffer(buffer_size, VK_BUFFER_USAGE_TRANSFER_SRC_BIT, VK_MEMORY_PROPERTY_HOST_VISIBLE_BIT | VK_MEMORY_PROPERTY_HOST_COHERENT_BIT, stage_buffer_memory);\nvoid* stage_memory_ptr;\nvkMapMemory(logical_device, stage_buffer_memory, 0, buffer_size, 0, &amp;stage_memory_ptr);\nmemcpy(stage_memory_ptr, ycbcr_data, buffer_size);\nvkUnmapMemory(logical_device, stage_buffer_memory);\ndelete[] ycbcr_data;\n\n//Create image\nVkImageCreateInfo img_info = {};\nimg_info.sType = VK_STRUCTURE_TYPE_IMAGE_CREATE_INFO;\nimg_info.flags = VK_IMAGE_CREATE_DISJOINT_BIT;\nimg_info.imageType = VK_IMAGE_TYPE_2D;\nimg_info.extent.width = width;\nimg_info.extent.height = height;\nimg_info.extent.depth = 1;\nimg_info.mipLevels = 1;\nimg_info.arrayLayers = 1;\nimg_info.format = format;\nimg_info.tiling = VK_IMAGE_TILING_LINEAR;//VK_IMAGE_TILING_OPTIMAL;\nimg_info.initialLayout = VK_IMAGE_LAYOUT_PREINITIALIZED;\nimg_info.usage = VK_BUFFER_USAGE_TRANSFER_DST_BIT | VK_IMAGE_USAGE_SAMPLED_BIT;\nimg_info.samples = VK_SAMPLE_COUNT_1_BIT;\nimg_info.sharingMode = VK_SHARING_MODE_EXCLUSIVE;\nVkResult result = vkCreateImage(logical_device, &amp;img_info, NULL, &amp;image);\nCHECK_VK_RESULT(result, \"vkCreateImage failed to create image handle\");\nILOG(\"Image created!\");\n\n//Get memory requirements for each plane and combine\n//Plane 0\nVkImagePlaneMemoryRequirementsInfo image_plane_info = {};\nimage_plane_info.sType = VK_STRUCTURE_TYPE_IMAGE_PLANE_MEMORY_REQUIREMENTS_INFO;\nimage_plane_info.pNext = NULL;\nimage_plane_info.planeAspect = VK_IMAGE_ASPECT_PLANE_0_BIT;\nVkImageMemoryRequirementsInfo2 image_info2 = {};\nimage_info2.sType = VK_STRUCTURE_TYPE_IMAGE_MEMORY_REQUIREMENTS_INFO_2;\nimage_info2.pNext = &amp;image_plane_info;\nimage_info2.image = image;\nVkImagePlaneMemoryRequirementsInfo memory_plane_requirements = {};\nmemory_plane_requirements.sType = VK_STRUCTURE_TYPE_IMAGE_PLANE_MEMORY_REQUIREMENTS_INFO;\nmemory_plane_requirements.pNext = NULL;\nmemory_plane_requirements.planeAspect = VK_IMAGE_ASPECT_PLANE_0_BIT;\nVkMemoryRequirements2 memory_requirements2 = {};\nmemory_requirements2.sType = VK_STRUCTURE_TYPE_MEMORY_REQUIREMENTS_2;\nmemory_requirements2.pNext = &amp;memory_plane_requirements;\nvkGetImageMemoryRequirements2(logical_device, &amp;image_info2, &amp;memory_requirements2);\nVkDeviceSize image_size = memory_requirements2.memoryRequirements.size;\nuint32_t image_bits = memory_requirements2.memoryRequirements.memoryTypeBits;\n//Set offsets\nmemory_offset_plane0 = 0;\nmemory_offset_plane1 = image_size;\n//Plane 1\nimage_plane_info.planeAspect = VK_IMAGE_ASPECT_PLANE_1_BIT;\nmemory_plane_requirements.planeAspect = VK_IMAGE_ASPECT_PLANE_1_BIT;\nvkGetImageMemoryRequirements2(logical_device, &amp;image_info2, &amp;memory_requirements2);\nimage_size += memory_requirements2.memoryRequirements.size;\nimage_bits = image_bits | memory_requirements2.memoryRequirements.memoryTypeBits;\n\n//Allocate image memory\nVkMemoryAllocateInfo allocate_info = {};\nallocate_info.sType = VK_STRUCTURE_TYPE_MEMORY_ALLOCATE_INFO;\nallocate_info.allocationSize = image_size;\nallocate_info.memoryTypeIndex = get_device_memory_type(image_bits, VK_MEMORY_PROPERTY_DEVICE_LOCAL_BIT);\nresult = vkAllocateMemory(logical_device, &amp;allocate_info, NULL, &amp;image_memory);\nCHECK_VK_RESULT(result, \"vkAllocateMemory failed to allocate image memory\");\n\n//Bind each image plane to memory\nstd::vector&lt;VkBindImageMemoryInfo&gt; bind_image_memory_infos(2);\n//Plane 0\nVkBindImagePlaneMemoryInfo bind_image_plane0_info = {};\nbind_image_plane0_info.sType = VK_STRUCTURE_TYPE_BIND_IMAGE_PLANE_MEMORY_INFO;\nbind_image_plane0_info.pNext = NULL;\nbind_image_plane0_info.planeAspect = VK_IMAGE_ASPECT_PLANE_0_BIT;\nVkBindImageMemoryInfo&amp; bind_image_memory_plane0_info = bind_image_memory_infos[0];\nbind_image_memory_plane0_info.sType = VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO;\nbind_image_memory_plane0_info.pNext = &amp;bind_image_plane0_info;\nbind_image_memory_plane0_info.image = image;\nbind_image_memory_plane0_info.memory = image_memory;\nbind_image_memory_plane0_info.memoryOffset = memory_offset_plane0;\n//Plane 1\nVkBindImagePlaneMemoryInfo bind_image_plane1_info = {};\nbind_image_plane1_info.sType = VK_STRUCTURE_TYPE_BIND_IMAGE_PLANE_MEMORY_INFO;\nbind_image_plane1_info.pNext = NULL;\nbind_image_plane1_info.planeAspect = VK_IMAGE_ASPECT_PLANE_1_BIT;\nVkBindImageMemoryInfo&amp; bind_image_memory_plane1_info = bind_image_memory_infos[1];\nbind_image_memory_plane1_info.sType = VK_STRUCTURE_TYPE_BIND_IMAGE_MEMORY_INFO;\nbind_image_memory_plane1_info.pNext = &amp;bind_image_plane1_info;\nbind_image_memory_plane1_info.image = image;\nbind_image_memory_plane1_info.memory = image_memory;\nbind_image_memory_plane1_info.memoryOffset = memory_offset_plane1;\nvkBindImageMemory2(logical_device, bind_image_memory_infos.size(), bind_image_memory_infos.data());\n\ncontext.transition_vk_image_layout(image, format, VK_IMAGE_ASPECT_COLOR_BIT, VK_IMAGE_LAYOUT_PREINITIALIZED, VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL);\n\n//Copy staging buffer to device local buffer\nVkCommandBuffer tmp_cmd_buffer = begin_tmp_vk_cmd_buffer();\nstd::vector&lt;VkBufferImageCopy&gt; plane_regions(2);\nplane_regions[0].bufferOffset = 0;\nplane_regions[0].bufferRowLength = 0;\nplane_regions[0].bufferImageHeight = 0;\nplane_regions[0].imageSubresource.aspectMask = VK_IMAGE_ASPECT_PLANE_0_BIT;\nplane_regions[0].imageSubresource.mipLevel = 0;\nplane_regions[0].imageSubresource.baseArrayLayer = 0;\nplane_regions[0].imageSubresource.layerCount = 1;\nplane_regions[0].imageOffset = { 0, 0, 0 };\nplane_regions[0].imageExtent = { width, height, 1 };\nplane_regions[1].bufferOffset = buffer_offset_plane1;\nplane_regions[1].bufferRowLength = 0;\nplane_regions[1].bufferImageHeight = 0;\nplane_regions[1].imageSubresource.aspectMask = VK_IMAGE_ASPECT_PLANE_1_BIT;\nplane_regions[1].imageSubresource.mipLevel = 0;\nplane_regions[1].imageSubresource.baseArrayLayer = 0;\nplane_regions[1].imageSubresource.layerCount = 1;\nplane_regions[1].imageOffset = { 0, 0, 0 };\nplane_regions[1].imageExtent = { width / 2, height / 2, 1 };\nvkCmdCopyBufferToImage(tmp_cmd_buffer, stage_buffer, image, VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, plane_regions.size(), plane_regions.data());\nend_tmp_vk_cmd_buffer(tmp_cmd_buffer); //Submit and waits\n\nvkFreeMemory(logical_device, stage_buffer_memory, NULL);\nvkDestroyBuffer(logical_device, stage_buffer, NULL);\n\ntransition_vk_image_layout(image, format, VK_IMAGE_ASPECT_COLOR_BIT, VK_IMAGE_LAYOUT_TRANSFER_DST_OPTIMAL, VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL);\n\nVkImageViewCreateInfo image_view_info = {};\nimage_view_info.sType = VK_STRUCTURE_TYPE_IMAGE_VIEW_CREATE_INFO;\nimage_view_info.pNext = &amp;ycbcr_info;\nimage_view_info.flags = 0;\nimage_view_info.image = image;\nimage_view_info.viewType = VK_IMAGE_VIEW_TYPE_2D;\nimage_view_info.format = format;\nimage_view_info.components.r = VK_COMPONENT_SWIZZLE_IDENTITY;\nimage_view_info.components.b = VK_COMPONENT_SWIZZLE_IDENTITY;\nimage_view_info.components.g = VK_COMPONENT_SWIZZLE_IDENTITY;\nimage_view_info.components.a = VK_COMPONENT_SWIZZLE_IDENTITY;\nimage_view_info.subresourceRange.aspectMask = VK_IMAGE_ASPECT_COLOR_BIT;\nimage_view_info.subresourceRange.baseMipLevel = 0;\nimage_view_info.subresourceRange.levelCount = 1;\nimage_view_info.subresourceRange.baseArrayLayer = 0;\nimage_view_info.subresourceRange.layerCount = 1;\nVkResult res = vkCreateImageView(logical_device, &amp;image_view_info, NULL, &amp;.image_view);\nCHECK_VK_RESULT(res, \"Failed to create image view\");\n\nILOG(\"Successfully created image, allocated image memory and created image view\");\n</code></pre>\n\n<p>I receive one validation error: <code>vkCmdCopyBufferToImage() parameter, VkImageAspect pRegions-&gt;imageSubresource.aspectMask, is an unrecognized enumerator</code>, but from inspecting the validation code, it seems that it's just a bit outdated and this shouldn't be an issue.</p>\n\n<p>The rest of the code just sets up regular descriptor layouts/pools and allocated and updates accordingly (I've verified with a regular RGB texture).</p>\n\n<p>The fragment shader is as follows:</p>\n\n<pre><code>vec2 uv = vec2(gl_FragCoord.x / 1024.0, 1.0 - (gl_FragCoord.y / 1024.0));\nout_color = vec4(texture(ycbcr_image, uv).rgb, 1.0f);\n</code></pre>\n\n<p>When I run my program I only get a red components (the image is essentially a greyscale image). from a little testing, it seems that the VkSamplerYcbcrconversion setup as removing it from both the VkSamplerCreateInfo.pNext and VkImageViewCreateInfo.pNext doesn't change anything.</p>\n\n<p>I've also looked here, <a href=\"https://github.com/KhronosGroup/VK-GL-CTS/blob/cd3bb68f8501cb96a4f92136c430f9fd23c0ec56/external/vulkancts/modules/vulkan/ycbcr/vktYCbCrConversionTests.cpp\" rel=\"nofollow noreferrer\">Khronos YCbCr tests</a>, but I can't find any real mistake.</p>\n"}, {"tags": ["c++", "eclipse", "parsing"], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 1, "last_activity_date": 1545230167, "last_edit_date": 1545230167, "creation_date": 1545228768, "answer_id": 53853059, "question_id": 53852848, "link": "https://stackoverflow.com/questions/53852848/eclipse-c-how-to-turn-on-off-define-for-online-parsint/53853059#53853059", "title": "Eclipse, C++, how to turn on/off #define for online parsint", "body": "<p>You can use different <em>build configurations</em>.</p>\n\n<p><code>Right Click on \"project\"</code>-><code>Build Configurations</code>-><code>Manage</code>.</p>\n\n<p>Set up a different build configuration for each set of macros, include paths etc...</p>\n\n<p>Then add your macros etc... to each build configuration here:</p>\n\n<p><code>Right Click on \"project\"</code>-><code>Properties</code>-><code>C/C++ General</code>-><code>Processor Include Paths, Macros etc..</code>-><code>GNU C++</code>-><code>CDT User Settings</code>-><code>Add</code>.</p>\n\n<p>Add a set of macros to each configuration (selectable from a drop down list at the top).</p>\n"}], "owner": {"reputation": 287, "user_id": 562368, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/62a911a048ef06f06b31a91920b50e56?s=128&d=identicon&r=PG", "display_name": "Adam K\u0142obukowski", "link": "https://stackoverflow.com/users/562368/adam-k%c5%82obukowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545230167, "creation_date": 1545228119, "last_edit_date": 1545228848, "question_id": 53852848, "link": "https://stackoverflow.com/questions/53852848/eclipse-c-how-to-turn-on-off-define-for-online-parsint", "title": "Eclipse, C++, how to turn on/off #define for online parsint", "body": "<p>I have a huge codebase in <code>C++</code> with a lot of <code>#define</code>s and plenty of <code>#if</code>/<code>#elif</code>/<code>#endif</code> statements. Without changing <code>#define</code>s, is there an easy way to 'switch' what is <code>#define</code>'d and what is not for the purpose of online parser?</p>\n"}, {"tags": ["c++", "c++11", "c++14", "stdstring", "allocator"], "comments": [{"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1545228287, "post_id": 53852753, "comment_id": 94553153, "body": "the code does not even compile on my machine with -std=c++17"}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "reply_to_user": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1545229191, "post_id": 53852753, "comment_id": 94553667, "body": "@Artyer: Does not change the behavior, but I added the operators."}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "reply_to_user": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1545229212, "post_id": 53852753, "comment_id": 94553678, "body": "@CSPei: What error do you get?"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1545229322, "post_id": 53852753, "comment_id": 94553749, "body": "Tons of errros, including the missing operator== and !="}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1545229356, "post_id": 53852753, "comment_id": 94553765, "body": "What compiler are you using?"}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1545229450, "post_id": 53852753, "comment_id": 94553817, "body": "Works fine on <code>gcc version 7.3.0 (Ubuntu 18.0.4)</code> and <code>gcc version 8.2.0 (Ubuntu 18.0.4)</code> with glibc 7. (As in &quot;COPY THROW!!!&quot; is printed if i get rid of <code>auto vv = v;</code>, and if I get rid of <code>auto ss = s;</code>). What version of gcc are you using?"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1545229495, "post_id": 53852753, "comment_id": 94553841, "body": "usr/include/c++/8/bits/basic_string.h:3097:63: error: no class template named \u2018rebind\u2019 in \u2018class Allocator&lt;char&gt;\u2019        typedef typename _Alloc::template rebind&lt;_CharT&gt;::other _CharT_alloc_type;"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "edited": false, "score": 0, "creation_date": 1545229525, "post_id": 53852753, "comment_id": 94553861, "body": "gcc 8.2.1 is what I am using. RH"}, {"owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "edited": false, "score": 0, "creation_date": 1545229588, "post_id": 53852753, "comment_id": 94553890, "body": "works for me <a href=\"https://ideone.com/vRVviK\" rel=\"nofollow noreferrer\">ideone.com/vRVviK</a> ,have you checked your libraries std::string implementation to see if std::allocator_triats::select_on_container_copy_construction is used?"}, {"owner": {"reputation": 15724, "user_id": 5754656, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7jfX3.png?s=128&g=1", "display_name": "Artyer", "link": "https://stackoverflow.com/users/5754656/artyer"}, "edited": false, "score": 0, "creation_date": 1545229819, "post_id": 53852753, "comment_id": 94554021, "body": "@AndreasPasternak You might want to use gdb and break <code>std::basic_string&lt;char, std::char_traits&lt;char&gt;, allocator&lt;char&gt;&gt;::basic_string(const basic_string&amp;)</code> to see why it bypasses <code>select_on_container_copy_construction</code>"}, {"owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "edited": false, "score": 0, "creation_date": 1545230591, "post_id": 53852753, "comment_id": 94554503, "body": "Thanks, everyone for the help. it is actually a compiler bug (<a href=\"https://cplusplus.github.io/LWG/issue2402\" rel=\"nofollow noreferrer\">cplusplus.github.io/LWG/issue2402</a>) as I posted in the answer."}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 1, "last_activity_date": 1545234133, "creation_date": 1545234133, "answer_id": 53854630, "question_id": 53852753, "link": "https://stackoverflow.com/questions/53852753/select-on-container-copy-construction-not-called-for-stdstring/53854630#53854630", "title": "select_on_container_copy_construction not called for std::string", "body": "<p>This was a bug in libstdc++ that was resolved in the 6.1 release by <a href=\"https://github.com/gcc-mirror/gcc/commit/b7aaabf0829d9d3633e7e7a821885173aa0849c0\" rel=\"nofollow noreferrer\">this PR</a>. </p>\n\n<p>The specific relevant change was from:</p>\n\n<pre><code>basic_string(const basic_string&amp; __str)\n: _M_dataplus(_M_local_data(), __str._M_get_allocator()) // TODO A traits\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>basic_string(const basic_string&amp; __str)\n: _M_dataplus(_M_local_data(),\n    _Alloc_traits::_S_select_on_copy(__str._M_get_allocator()))\n</code></pre>\n\n<p>I'm not sure if there was an open bug report. I can't find one and the commit message doesn't reference one.</p>\n"}], "owner": {"reputation": 1186, "user_id": 2934305, "user_type": "registered", "profile_image": "https://graph.facebook.com/1425206215/picture?type=large", "display_name": "Andreas Pasternak", "link": "https://stackoverflow.com/users/2934305/andreas-pasternak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 53854630, "answer_count": 1, "score": 0, "last_activity_date": 1545234408, "creation_date": 1545227734, "last_edit_date": 1545234408, "question_id": 53852753, "link": "https://stackoverflow.com/questions/53852753/select-on-container-copy-construction-not-called-for-stdstring", "title": "select_on_container_copy_construction not called for std::string", "body": "<p><code>select_on_container_copy_construction</code> in my allocator is not called for <code>std:::string</code>. It works fine when used with a <code>vector</code> tough. Why is the behavior different? Is this a bug in GCC?</p>\n\n<p>I am using gcc version 5.4.0.</p>\n\n<p>Code example with a minimal allocator:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntemplate&lt;class T&gt;\nclass allocator {\npublic:\n  typedef T value_type;\n\n  using propagate_on_container_copy_assignment = std::true_type; // for consistency\n  using propagate_on_container_move_assignment = std::true_type; // to avoid the pessimization\n  using propagate_on_container_swap = std::true_type; // to avoid the undefined behavior\n\n  allocator&lt;T&gt; select_on_container_copy_construction() const {\n    throw std::bad_alloc();\n  }\n\n  T *allocate(const std::size_t n) {\n    return static_cast&lt;T *&gt;(::operator new(n * sizeof(T)));\n  }\n\n  void deallocate(T *, const std::size_t) { }\n};\n\ntemplate&lt; class T1, class T2 &gt;\nbool operator==(const allocator&lt;T1&gt;&amp;, const allocator&lt;T2&gt;&amp;) noexcept {\n  return true;\n}\n\ntemplate&lt; class T1, class T2 &gt;\nbool operator!=(const allocator&lt;T1&gt;&amp;, const allocator&lt;T2&gt;&amp;) noexcept {\n  return false;\n}\n\nint main()\n{\n  try {\n    std::basic_string&lt;char, std::char_traits&lt;char&gt;, allocator&lt;char&gt;&gt; s;\n    auto ss = s;\n  } catch (std::bad_alloc const&amp;) {\n    std::cout &lt;&lt; \"string worked\\n\";\n  }\n\n  try {\n    std::vector&lt;int, allocator&lt;int&gt;&gt; v;\n    auto vv = v;\n  } catch (std::bad_alloc const&amp;) {\n    std::cout &lt;&lt; \"vector worked\\n\";\n  }\n}\n</code></pre>\n\n<p>The program should print both \"string worked\" and \"vector worked\", but it only prints the latter. </p>\n"}, {"tags": ["c++", "integer-division"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 5173211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fd4b3645ca7e76c3f3b438862f2ded4?s=128&d=identicon&r=PG&f=1", "display_name": "Araeos", "link": "https://stackoverflow.com/users/5173211/araeos"}, "edited": false, "score": 0, "creation_date": 1545233892, "post_id": 53852979, "comment_id": 94556637, "body": "I used this pattern in my project multiple times recently and (as a beginner) found it curious, therefore the questions. While I have an intuition for <code>a&#47;b</code> to mean how many times does <code>b</code> fully fit in <code>a</code>, the question how many <code>b</code> are needed to fit <code>a</code> in this case is not as readable <code>(a+ (b-1))&#47;b</code>. You in essence have answered my questions, thanks."}], "tags": [], "owner": {"reputation": 1158, "user_id": 4956078, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44600007f35ab98b7badbf1110df0687?s=128&d=identicon&r=PG&f=1", "display_name": "JMAA", "link": "https://stackoverflow.com/users/4956078/jmaa"}, "is_accepted": true, "score": 2, "last_activity_date": 1545228513, "creation_date": 1545228513, "answer_id": 53852979, "question_id": 53852738, "link": "https://stackoverflow.com/questions/53852738/adjusting-quotient-of-integer-division-in-c/53852979#53852979", "title": "Adjusting quotient of integer division in C++", "body": "<p><code>(N + d - 1) / d</code> is a perfectly normal way of writing an integer expression in C++. All of the terms in this expression are of integer type so, in particular, both numerator and denominator of the division <code>/</code> are also <code>int</code>. Therefore, C++ will apply <code>/</code> as the division operator on <code>int</code> types.</p>\n\n<p>I'm not entirely sure exactly what you're asking in either of your questions. This \"pattern\" doesn't have a particular name that I'm aware of, but I'm not sure why you think it should have one. It's simply a mathematical expression.</p>\n\n<p>As for making it \"easier to understand\", that is of course subjective, but (aside from the fact that variables don't have informative names) I find it perfectly readable. If you're looking for an algebraic simplification of the expression, then I'd warn you against it. While <code>(N/d) + (1/d) - 1</code>, for example, looks mathematically equivalent it is not in this case in general. This is mainly because of the aforementioned fact that these are integer divisions, but also because the <code>int</code> type has finite precision which may affect the result in some cases (with integer overflow, for example).</p>\n"}], "owner": {"reputation": 151, "user_id": 5173211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4fd4b3645ca7e76c3f3b438862f2ded4?s=128&d=identicon&r=PG&f=1", "display_name": "Araeos", "link": "https://stackoverflow.com/users/5173211/araeos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53852979, "answer_count": 1, "score": -1, "last_activity_date": 1545228513, "creation_date": 1545227685, "question_id": 53852738, "link": "https://stackoverflow.com/questions/53852738/adjusting-quotient-of-integer-division-in-c", "title": "Adjusting quotient of integer division in C++", "body": "<h2>Example: B+ Trees</h2>\n\n<p>Given N tuples in the tree, at most <code>di</code> children per inner node and at most <code>dl</code> values per leaf, the minimum height of a B+ Tree would be <code>h = ceil(log_di((N + dl - 1) / dl))</code> if I am not mistaken.\nThis is only true if <code>/</code> denotes the integer division and I could probably replace <code>(N + dl - 1) / dl</code> with <code>static_cast&lt;double&gt;(N) / dl</code>.</p>\n\n<pre><code>#include &lt;cmath&gt;\nint minHeight(int N)\n{\n    constexpr int di = 256;\n    constexpr int dl = 255;\n    return std::lround(std::ceil(log((N + (dl - 1)) / dl) / log(di)));\n}\n</code></pre>\n\n<p>My interest lies in the pattern: <code>(N + d - 1) /d</code>. This seems to be used when calculating the smallest multiple of the divisor (d) that is greater or equal to the dividend (N).</p>\n\n<h2>Questions</h2>\n\n<ol>\n<li>Does this pattern have any name associated with it? How common is it when designing data structures and algorithms?</li>\n<li>Is there another way to write this code in c++ to be easier to understand, if it is uncommon?</li>\n</ol>\n"}, {"tags": ["c++", "linux", "gcc", "g++", "c++17"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545228162, "post_id": 53852684, "comment_id": 94553076, "body": "As this duplicate has libstdc++ and libc++ answers."}, {"owner": {"reputation": 5184, "user_id": 6350078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fcbd9246215586c3ff1b5c338570dd8d?s=128&d=identicon&r=PG&f=1", "display_name": "metalfox", "link": "https://stackoverflow.com/users/6350078/metalfox"}, "edited": false, "score": 4, "creation_date": 1545228163, "post_id": 53852684, "comment_id": 94553078, "body": "GCC 8 still needs <code>-lstdc++fs</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1545228401, "post_id": 53852684, "comment_id": 94553212, "body": "They will probably require it until C++20."}], "answers": [{"tags": [], "owner": {"reputation": 2634, "user_id": 5138909, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qBvCy.png?s=128&g=1", "display_name": "KiYugadgeter", "link": "https://stackoverflow.com/users/5138909/kiyugadgeter"}, "is_accepted": false, "score": 14, "last_activity_date": 1545228546, "creation_date": 1545228546, "answer_id": 53852988, "question_id": 53852684, "link": "https://stackoverflow.com/questions/53852684/stdfilesystem-link-error-on-ubuntu-18-10/53852988#53852988", "title": "std::filesystem link error on ubuntu 18.10", "body": "<p>It need to add <code>-lstdc++fs</code> to option.</p>\n\n<pre><code>g++ -lstdc++fs -std=c++17 -o fs fs.cpp -lstdc++fs\n</code></pre>\n"}], "owner": {"reputation": 2634, "user_id": 5138909, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/qBvCy.png?s=128&g=1", "display_name": "KiYugadgeter", "link": "https://stackoverflow.com/users/5138909/kiyugadgeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6587, "favorite_count": 0, "closed_date": 1545232467, "answer_count": 1, "score": 0, "last_activity_date": 1545232300, "creation_date": 1545227509, "last_edit_date": 1545232300, "question_id": 53852684, "link": "https://stackoverflow.com/questions/53852684/stdfilesystem-link-error-on-ubuntu-18-10", "closed_reason": "Duplicate", "title": "std::filesystem link error on ubuntu 18.10", "body": "<p>I learning usage of C++ filesystem library (<code>std::filesystem</code>). The following code cause linker error.</p>\n\n<p>How I can fix it?</p>\n\n<p>Code for <code>fs.cpp</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;filesystem&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\nint main() {\n    using namespace std::filesystem;\n\n    directory_iterator iter{\".\"};\n    for (auto&amp; ent: iter) {\n        std::cout &lt;&lt; ent.path() &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Error output:</p>\n\n<pre><code>/usr/bin/ld: /tmp/cc7vhf9X.o: in function `main':\nfs.cpp:(.text+0x10b): undefined reference to `std::filesystem::__cxx11::directory_iterator::operator*() const'\n/usr/bin/ld: fs.cpp:(.text+0x151): undefined reference to `std::filesystem::__cxx11::directory_iterator::operator++()'\n/usr/bin/ld: /tmp/cc7vhf9X.o: in function `std::filesystem::__cxx11::directory_iterator::directory_iterator(std::filesystem::__cxx11::path const&amp;)':\nfs.cpp:(.text._ZNSt10filesystem7__cxx1118directory_iteratorC2ERKNS0_4pathE[_ZNSt10filesystem7__cxx1118directory_iteratorC5ERKNS0_4pathE]+0x26): undefined reference to `std::filesystem::__cxx11::directory_iterator::directory_iterator(std::filesystem::__cxx11::path\nconst&amp;, std::filesystem::directory_options, std::error_code*)'\n/usr/bin/ld: /tmp/cc7vhf9X.o: in function `std::filesystem::__cxx11::path::path&lt;char [2], std::filesystem::__cxx11::path&gt;(char const (&amp;) [2], std::filesystem::__cxx11::path::format)':\nfs.cpp:(.text._ZNSt10filesystem7__cxx114pathC2IA2_cS1_EERKT_NS1_6formatE[_ZNSt10filesystem7__cxx114pathC5IA2_cS1_EERKT_NS1_6formatE]+0x6d): undefined reference to `std::filesystem::__cxx11::path::_M_split_cmpts()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Environment:</p>\n\n<ul>\n<li>Ubuntu 18.10  </li>\n<li>g++ 8.2.0  </li>\n<li>compile options: <code>g++ -std=c++17 -o fs fs.cpp</code></li>\n</ul>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1545228327, "post_id": 53852667, "comment_id": 94553175, "body": "Heads-up: you have UB here through the pointer cast, but also from the conflicting definitions of <code>_BAR</code> which violate ODR. I think you&#39;re knee-deep in a solution which won&#39;t pan out."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545228358, "post_id": 53852667, "comment_id": 94553190, "body": "each implementation defines its own struct? <code>_BAR</code> has to be always the same type, and you cannot define the same type more than once"}, {"owner": {"reputation": 897, "user_id": 1755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqzKa.jpg?s=128&g=1", "display_name": "bartavelle", "link": "https://stackoverflow.com/users/1755520/bartavelle"}, "edited": false, "score": 0, "creation_date": 1545232786, "post_id": 53852667, "comment_id": 94555869, "body": "Alright, I went with a distinct solution. Is this question useful or should I just delete it?"}], "answers": [{"comments": [{"owner": {"reputation": 897, "user_id": 1755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqzKa.jpg?s=128&g=1", "display_name": "bartavelle", "link": "https://stackoverflow.com/users/1755520/bartavelle"}, "edited": false, "score": 0, "creation_date": 1545230764, "post_id": 53853029, "comment_id": 94554625, "body": "Ah I see. I can perhaps use templates, although I am not sure how to solve this. I could make the structures public, and have them have a single <code>void *</code> member to ensure &quot;type safetyness&quot; on the caller side."}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": false, "score": 1, "last_activity_date": 1545228684, "creation_date": 1545228684, "answer_id": 53853029, "question_id": 53852667, "link": "https://stackoverflow.com/questions/53852667/using-single-member-structs-as-the-member-itself/53853029#53853029", "title": "Using single-member structs as the member itself", "body": "<p>As mentioned in the comments by @Quentin, this is a violation of ODR (one definition rule). I am not sure what your purpose is, but you can consider 2 things to meet your need. One is using a template. The other one is to use <code>void *</code>. but I am just guessing and hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "is_accepted": false, "score": 1, "last_activity_date": 1546332958, "creation_date": 1546332958, "answer_id": 53994182, "question_id": 53852667, "link": "https://stackoverflow.com/questions/53852667/using-single-member-structs-as-the-member-itself/53994182#53994182", "title": "Using single-member structs as the member itself", "body": "<p>I would make an empty structure as a base:</p>\n\n<pre><code>// For base interface\nstruct _BAR {};\n\n// For an implementation\nstruct Baz : BAR { ... };\n</code></pre>\n\n<p>In this case static_cast would do, and it will be legal C++</p>\n"}], "owner": {"reputation": 897, "user_id": 1755520, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mqzKa.jpg?s=128&g=1", "display_name": "bartavelle", "link": "https://stackoverflow.com/users/1755520/bartavelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1546332958, "creation_date": 1545227460, "question_id": 53852667, "link": "https://stackoverflow.com/questions/53852667/using-single-member-structs-as-the-member-itself", "title": "Using single-member structs as the member itself", "body": "<p>I use structs to expose a typesafish interface, like:</p>\n\n<pre><code>class IFoo\n{\n  virtual HRESULT bar(struct _BAR * arg) = 0;\n}\n</code></pre>\n\n<p>Behind the scene, each implementation of this interface defines its own struct:</p>\n\n<pre><code>struct _BAR { Baz baz };\n</code></pre>\n\n<p>I currently call many allocation functions this way:</p>\n\n<pre><code>HRESULT allocate(Baz ** baz);\n_BAR * bar;\nret = allocate( (Baz **) &amp;bar );\n</code></pre>\n\n<p>Is it possible to call them with a more type-safe cast, like <code>static_cast</code>, by adding data in the <code>struct _BAR</code> definition?</p>\n"}, {"tags": ["c++", "sfinae"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545228041, "post_id": 53852645, "comment_id": 94553006, "body": "<code>constexpr bool myCondition(...)</code>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1545228139, "post_id": 53852645, "comment_id": 94553059, "body": "<code>template&lt;std::size_t N&gt; std::enable_if_t&lt;N &lt; 10&gt; foo( char (&amp;)[N]);</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1545228871, "post_id": 53852861, "comment_id": 94553506, "body": "The default value of a template parameter is not part of the signature, so using your last example will give an ambiguous error if you have function templates with &quot;competing&quot; SFINAE."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1545229112, "post_id": 53852861, "comment_id": 94553635, "body": "@super Good point.  I haven&#39;t used it so long I forgot why.  I&#39;ve added that into the answer."}, {"owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "edited": false, "score": 0, "creation_date": 1545229359, "post_id": 53852861, "comment_id": 94553767, "body": "Now I understand what I did miss. Thank you."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 4, "last_activity_date": 1545229082, "last_edit_date": 1545229082, "creation_date": 1545228171, "answer_id": 53852861, "question_id": 53852645, "link": "https://stackoverflow.com/questions/53852645/why-do-sfinae-stdenable-if-uses-bool-literals-instead-of-true-t-false/53852861#53852861", "title": "Why do `SFINAE` (std::enable_if) uses bool literals instead of `true_t` / `false_t` tag classes?", "body": "<blockquote>\n  <p>The very 1st thing I have a \"problem\" with, is <code>bool</code> literal (<code>true</code>/<code>false</code>). I understand they are correct and templates can accept compile-time constant values of primitive data types (plain-old-data types) but if I were tasked to design the <code>enable_if</code> \"mechanisms\" instead of using <code>true</code>/<code>false</code> I would create a tag classes <code>true_t</code>(or <code>True</code>) and <code>false_t</code> (or <code>False</code>) as follows</p>\n</blockquote>\n\n<p>The issue with use a tag type instead of just a bool is that you have to add extra complexity to the code.  If you want to check a compile time condition, like <code>sizeof</code> for instance, you couldn't just do <code>sizeof(T) == 8</code>.  You would have to make an abstraction that does the check and the returns the appropriate tag type.</p>\n\n<blockquote>\n  <p>The second thing I find redundant is the need to specify <code>typename T</code> template parameter. Wouldn't it be easier / better to just implement <code>enable_if</code> as follows</p>\n</blockquote>\n\n<p>Not really.  What if you want to use the SFINAE for the return type?  You would only be able to have a void function then, which is unnecessarily limiting.  Instead what you can do is use what was later added in C++14 and C++17 and make  aliases. This makes the names non dependent and lets you drop the <code>typename</code></p>\n\n<pre><code>template&lt; bool B, class T = void &gt;\nusing enable_if_t = typename enable_if&lt;B,T&gt;::type;\ntemplate&lt; class T &gt;\ninline constexpr bool is_integral_v = is_integral&lt;T&gt;::value;\n</code></pre>\n\n<p>This allows you to rewrite</p>\n\n<pre><code>template &lt;class T,\n         typename std::enable_if&lt;std::is_integral&lt;T&gt;::value,T&gt;::type* = nullptr&gt;\nvoid do_stuff(T&amp; t) { /* do stuff */ };\n</code></pre>\n\n<p>to</p>\n\n<pre><code>template &lt;class T,\n         std::enable_if_t&lt;std::is_integral_v&lt;T&gt;,T&gt;* = nullptr&gt;\nvoid do_stuff(T&amp; t) { /* do stuff */ };\n</code></pre>\n\n<p>although I prefer to use a bool for the type of <code>enable_if_t</code> like</p>\n\n<pre><code>template &lt;class T,\n         std::enable_if_t&lt;std::is_integral_v&lt;T&gt;, bool&gt; = true&gt;\nvoid do_stuff(T&amp; t) { /* do stuff */ };\n</code></pre>\n\n<blockquote>\n  <p>I know that, on this site, I am obligated to ask a single question within a... single \"question-post-like\" format, but if you find it acceptable could I also ask what will this syntax:</p>\n\n<pre><code>std::enable_if&lt;/* ... */&gt;::type* = nullptr\n</code></pre>\n  \n  <p>accomplish? </p>\n</blockquote>\n\n<p>It makes a pointer to the type that <code>std::enable_if</code> \"returns\" and sets it to null pointer.  The goal here is to make a template parameter that will only exist if the condition is true.  You could rewrite it to</p>\n\n<pre><code>typename = typename std::enable_if&lt;/* ... */&gt;::type\n</code></pre>\n\n<p>so instead of having a non type parameter you have a type parameter.  They both accomplish the same thing but the latter wont work with overloading the function for different <code>enable_if</code>'s since default template parameters are not part of the signature.  The first version which uses non type parameters is included in the function signature and does allow you to overload the <code>enable_if</code>'s.</p>\n"}, {"tags": [], "owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "is_accepted": false, "score": 3, "last_activity_date": 1545228226, "creation_date": 1545228226, "answer_id": 53852882, "question_id": 53852645, "link": "https://stackoverflow.com/questions/53852645/why-do-sfinae-stdenable-if-uses-bool-literals-instead-of-true-t-false/53852882#53852882", "title": "Why do `SFINAE` (std::enable_if) uses bool literals instead of `true_t` / `false_t` tag classes?", "body": "<p>First off there exists tag-types for <code>true</code> and <code>false</code>, namely <code>std::true_type</code> and <code>std::false_type</code>.</p>\n\n<p>Let's say we made the <code>enable_if</code> work with this instead of a bool parameter. You could then no longer do things like <code>std::enable_if&lt;1 == 1&gt;::type</code> since <code>1 == 1</code> evaluates to a bool. So does most things you will want to test here.</p>\n\n<p>On the other hand, the existing tag types can be used in a <code>enable_if</code> since they contain a <code>value</code> and have a <code>operator()</code> that return said value.</p>\n\n<p>So it seems to me that a lot of convenience would be lost in doing it your way, and from what I can see nothing would be gained.</p>\n\n<p>For point 2, it's simply a convenience to be able to specify what type you want <code>enable_if</code> to hold if it's true. It defaults to <code>void</code>, but if you want you can easily have it deduce an <code>int</code>, <code>double</code> ect. which can be useful sometimes.</p>\n"}], "owner": {"reputation": 1259, "user_id": 5098833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e50aaf2731b3fa8c472766615e63faa0?s=128&d=identicon&r=PG&f=1", "display_name": "PatrykB", "link": "https://stackoverflow.com/users/5098833/patrykb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 53852861, "answer_count": 2, "score": 1, "last_activity_date": 1545229082, "creation_date": 1545227393, "last_edit_date": 1545228244, "question_id": 53852645, "link": "https://stackoverflow.com/questions/53852645/why-do-sfinae-stdenable-if-uses-bool-literals-instead-of-true-t-false", "title": "Why do `SFINAE` (std::enable_if) uses bool literals instead of `true_t` / `false_t` tag classes?", "body": "<p>I am trying to learn about <code>SFINAE</code> (i am following this <a href=\"https://eli.thegreenplace.net/2014/sfinae-and-enable_if/#id5\" rel=\"nofollow noreferrer\">tutorial</a>), but there are some... \"design choices\" I do not understand and, as such, I find them confusing.</p>\n\n<p>Let's assume I have a situation like this (included re-implementation of <code>std::enable_if</code> is there just to demonstrate how I understand <code>enable_if</code>)</p>\n\n<pre><code>// A default class (class type) declaration. Nothing unusual.\ntemplate &lt;bool, typename T = void&gt;\nstruct enable_if\n{}; \n\n// A specialisation for &lt;true, T&gt; case. I understand 'why-s' of this. \n// -- 'why-s': if I attempt to access 'enable_if&lt;false, T&gt;::type' (which does not exist) I will get a substitution failure and compiler will just \"move-on\" trying to match \"other cases\".\ntemplate &lt;typename T&gt;\nstruct enable_if&lt;true, T&gt; {\n    typedef T type;\n};\n\n// Here lies my problem:\ntemplate &lt;class T,\n         typename std::enable_if&lt;std::is_integral&lt;T&gt;::value,T&gt;::type* = nullptr&gt;\nvoid do_stuff(T&amp; t) { /* do stuff */ };\n</code></pre>\n\n<p><br><strong>(1)</strong> The very 1st thing I have a \"problem\" with, is <code>bool</code> literal (<code>true</code>/<code>false</code>). I understand they are correct and templates can accept compile-time constant values of primitive data types (plain-old-data types) but if I were tasked to design the <code>enable_if</code> \"mechanisms\" instead of using <code>true</code>/<code>false</code> I would create a tag classes <code>true_t</code>(or <code>True</code>) and <code>false_t</code> (or <code>False</code>) as follows:</p>\n\n<pre><code>class true_t {}; // or True\n\nclass false_t {}; // or False\n\ntemplate&lt;typename T&gt;\nclass is_integral // just to have \"something\" to use with \"enable_if\"\n{\n    using result = false_t;\n};\n\ntemplate&lt;&gt;\nclass is_integral&lt;int32_t&gt; // same with all other int types\n{\n    using result = true_t;\n};\n\ntemplate &lt;typename B, typename T = void&gt;\nstruct enable_if\n{}; \n\ntemplate &lt;typename T&gt;\nstruct enable_if&lt;true_t, T&gt;\n{\n    using type = T;\n};\n</code></pre>\n\n<p><br><strong>(2)</strong> The second thing I find redundant is the need to specify <code>typename T</code> template parameter. Wouldn't it be easier / better to just implement <code>enable_if</code> as follows:</p>\n\n<pre><code>template &lt;typename B&gt;\nstruct enable_if\n{}; \n\ntemplate &lt;&gt;\nstruct enable_if&lt;true_t&gt;\n{\n    using type = void; // the 'type' exists therefore substitution failure will not occur. \n};\n</code></pre>\n\n<p><br><strong>I am well aware that all my propositions are extremely inferior to the currently existing solutions</strong>, but I don't understand why... What portion of the functionality (important functionality) of current <code>SFINAE</code> did i shave off? (Not even realizing it...)</p>\n\n<hr>\n\n<p>I know that, on this site, I am obligated to ask a single question within a... single \"question-post-like\" format, but if you find it acceptable could I also ask what will this syntax:</p>\n\n<pre><code>std::enable_if&lt;/* ... */&gt;::type* = nullptr\n</code></pre>\n\n<p>accomplish? It's beyond my understanding right now...</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1545226841, "post_id": 53852462, "comment_id": 94552260, "body": "ask youself, how long does <code>newNode</code> live in each function."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1545226888, "post_id": 53852462, "comment_id": 94552286, "body": "If one dereferences the value stored by <code>addValue2</code>, it would invoke undefined behavior, due to dereferencing the dangling pointer."}], "answers": [{"comments": [{"owner": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 0, "creation_date": 1545227167, "post_id": 53852492, "comment_id": 94552463, "body": "sorry, i did not understand. the print() function is printing the linked list correctly. when will addValue2 cause problem then?"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 3, "creation_date": 1545227264, "post_id": 53852492, "comment_id": 94552531, "body": "@user87466 Dereferencing dangling pointers is undefined behavior. Always. It might <i>seem</i> to work for one particular case, but is not guaranteed to. One cannot learn C++ by trial and error, due to multitude of possible use cases, which invoke undefined behavior."}, {"owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "reply_to_user": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 1, "creation_date": 1545227622, "post_id": 53852492, "comment_id": 94552753, "body": "@user87466  Whenever the application exits from <code>addValue2</code> destructor of  <code>Node newNode</code> is evoked - thus, any other data can be randomly stored in its place. So the pointer to it that you stored will cause undefined behavior on use."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1545227781, "post_id": 53852492, "comment_id": 94552860, "body": "<b><i>i did not understand. the print() function is printing the linked list correctly.</i></b> Sometimes you get unlucky with Undefined Behavior and it produces the result you expect only to randomly crash or produce some other weird result."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 6, "last_activity_date": 1545227199, "last_edit_date": 1545227199, "creation_date": 1545226840, "answer_id": 53852492, "question_id": 53852462, "link": "https://stackoverflow.com/questions/53852462/linked-list-c-class-what-is-the-diffence-between-these-two-add-node-implementa/53852492#53852492", "title": "Linked List C++ Class What is the diffence between these two add node implementations?", "body": "<p><code>addValue2</code> will wreak havoc since you're storing a pointer to a node <code>newNode</code> which has <em>automatic storage duration</em>. The pointer <code>&amp;newNode</code> will <em>dangle</em> once that goes out of scope.</p>\n\n<p><strong>Boom!</strong></p>\n\n<p>Note that it's also unfashionable to write the destructor out explicitly if that's what the compiler would do for you anyway. If you need to introduce the destructor in order to make it <code>virtual</code> then write</p>\n\n<pre><code>virtual ~linkedList() = default;\n</code></pre>\n\n<p>In your case though you will need to <code>delete</code> the nodes allocated with <code>new</code> else your class will leak memory.</p>\n\n<p>Finally, if you don't want to worry about memory at all then use</p>\n\n<pre><code>typedef linkedList std::list;\n</code></pre>\n\n<p>and head off to the pub.</p>\n"}, {"comments": [{"owner": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 0, "creation_date": 1545261118, "post_id": 53852768, "comment_id": 94568851, "body": "Why are you deleting newNode when we wanted to add a new node to the list? Wouldn&#39;t deleting it mean that linked list does not have an additional node?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 0, "creation_date": 1545262197, "post_id": 53852768, "comment_id": 94569118, "body": "@user87466 i am deleting it to demonstrate the problem in OPs code. The first snippet is a line by line translation of OPs <code>addValue2</code> (where also <code>newNode</code> is destroyed at the end of the function)"}, {"owner": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "edited": false, "score": 0, "creation_date": 1545268054, "post_id": 53852768, "comment_id": 94570410, "body": "oh. does that mean that you are not deleting the node, but deleting only the pointer to it? (by doing <code>delete newNode</code>)?"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 3, "last_activity_date": 1545229130, "last_edit_date": 1545229130, "creation_date": 1545227776, "answer_id": 53852768, "question_id": 53852462, "link": "https://stackoverflow.com/questions/53852462/linked-list-c-class-what-is-the-diffence-between-these-two-add-node-implementa/53852768#53852768", "title": "Linked List C++ Class What is the diffence between these two add node implementations?", "body": "<p>The two are very different. If one would rewrite your <code>addNode2</code> to use manual allocations instead of automatic it would look like this (original code as comments):</p>\n\n<pre><code>void addValue2(int n) {\n    Node* newNode = Node();   // Node newNode;\n    newNode-&gt;data = n;        // newNode.data = n;\n    newNode-&gt;next = head;     // newNode.next = head;\n    this-&gt;head = newNode;     // this-&gt;head = &amp;newNode;\n    delete newNode;           // (newNode is deleted automatically !)\n}\n</code></pre>\n\n<p>When you use automatic storage, objects get destroyed as soon as they go out of scope. The method alone does not do much harm, but it leaves <code>this-&gt;head</code> as an invalid pointer (the object <code>newNode</code> was pointing to no longer exists when the method returns). Dereferencing an invalid pointer is undefinded behaviour, hence in all other methods that use the pointer anything could happen (including just what you expect, which is actually the worst incarnation of undefined behaviour, because you wont spot it until it is too late).</p>\n\n<p>More in line with the original code, but much simplified, this is wrong for the same reason:</p>\n\n<pre><code>int* return_invalid_pointer() {\n    int x = 3;\n    return &amp;x; \n}                      // &lt;--- x's lifetime ends here\n</code></pre>\n\n<p>Here <code>x</code> lifetime is bound to the body of the function. You can return a pointer to a local variable, but this pointer has no meaning whatsoever outside of the function, because the value it pointed to no longer exists.</p>\n"}], "owner": {"reputation": 206, "user_id": 6330393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dd649eaae2edd32730d8d2cbf2a17fc?s=128&d=identicon&r=PG", "display_name": "xxx374562", "link": "https://stackoverflow.com/users/6330393/xxx374562"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1545229130, "creation_date": 1545226750, "question_id": 53852462, "link": "https://stackoverflow.com/questions/53852462/linked-list-c-class-what-is-the-diffence-between-these-two-add-node-implementa", "title": "Linked List C++ Class What is the diffence between these two add node implementations?", "body": "<p>I have written following class for linked list. There are two separate functions for adding new node (<code>addValue1</code> and <code>addValue2</code>). One uses pointer to node, another does not.</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;iostream&gt;\n\nclass linkedList{\nprivate:\n    struct Node {\n        int data;\n        Node* next;\n    };\n    Node* head;\n\npublic:\n    linkedList(){\n       //constructor\n        this-&gt;head = NULL;\n    }\n\n    ~linkedList(){\n        //destructor\n    }\n\n    void addValue1(int n) {\n        Node* newNode = new Node();\n        newNode-&gt;data = n;\n        newNode-&gt;next = head;\n        this-&gt;head = newNode;\n    }\n\n    void addValue2(int n) {\n        Node newNode;\n        newNode.data = n;\n        newNode.next = head;\n        this-&gt;head = &amp;newNode;\n    }\n\n    void print(){\n        Node* curNode = this-&gt;head;\n        while(this-&gt;head != NULL) {\n            std::cout &lt;&lt; curNode-&gt;data &lt;&lt; \" \"&lt;&lt; std::endl;\n            curNode = curNode-&gt;next;\n        }\n    }\n\n};\n\nint main() {\n\n\n    linkedList llist;\n\n    llist.addValue2(5);\n    llist.addValue1(4);\n    llist.addValue1(9);\n    llist.print();\n\n}\n</code></pre>\n\n<p>Which one of these two is recommended and why? Is there any difference between these two? If we don't use new operator, we don't need to use the delete operator later on. This seems like an advantage to me. Is it really?</p>\n"}, {"tags": ["c++", "azure", "messaging", "azureservicebus", "azure-servicebus-topics"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1545291931, "post_id": 53861760, "comment_id": 94576136, "body": "Thanks for the answer, I was checking this site before but as I understood its a paid library where future support is unclear."}, {"owner": {"reputation": 10995, "user_id": 10383250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86977ed7f8c387560ffd1c75bc41bedc?s=128&d=identicon&r=PG&f=1", "display_name": "George Chen", "link": "https://stackoverflow.com/users/10383250/george-chen"}, "reply_to_user": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1545292655, "post_id": 53861760, "comment_id": 94576423, "body": "@Bezousek I think i have found what you want. This is link is about Storage Client Library for C++ <a href=\"http://azure.github.io/azure-storage-cpp/\" rel=\"nofollow noreferrer\">azure.github.io/azure-storage-cpp</a>"}, {"owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1545292823, "post_id": 53861760, "comment_id": 94576499, "body": "This is storage library which can handles blobs, files, tables and queues. We are actually using this, but it doesn&#39;t solve service bus messaging."}, {"owner": {"reputation": 10995, "user_id": 10383250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86977ed7f8c387560ffd1c75bc41bedc?s=128&d=identicon&r=PG&f=1", "display_name": "George Chen", "link": "https://stackoverflow.com/users/10383250/george-chen"}, "reply_to_user": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1545295425, "post_id": 53861760, "comment_id": 94577523, "body": "Qpid Proton C++ API has some sample codes, maybe this could help you.<a href=\"https://qpid.apache.org/releases/qpid-proton-0.24.0/proton/cpp/api/simple_recv_8cpp-example.html\" rel=\"nofollow noreferrer\">qpid.apache.org/releases/qpid-proton-0.24.0/proton/cpp/a&zwnj;&#8203;pi/&hellip;</a>"}, {"owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1545297863, "post_id": 53861760, "comment_id": 94578763, "body": "I will give it a try"}, {"owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1546938252, "post_id": 53861760, "comment_id": 95009098, "body": "Not yet, we were discussing this topic again and it seems we will rather use storage queue for our messaging system in C++. If we return back to service bus and proton library I will post feedback here."}, {"owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "edited": false, "score": 0, "creation_date": 1547541784, "post_id": 53861760, "comment_id": 95217452, "body": "Actually I found out that this library is just for messaging itself. I would need support to create subscriptions on service bus dynamically from code."}], "tags": [], "owner": {"reputation": 10995, "user_id": 10383250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86977ed7f8c387560ffd1c75bc41bedc?s=128&d=identicon&r=PG&f=1", "display_name": "George Chen", "link": "https://stackoverflow.com/users/10383250/george-chen"}, "is_accepted": false, "score": 1, "last_activity_date": 1545273813, "creation_date": 1545273813, "answer_id": 53861760, "question_id": 53852224, "link": "https://stackoverflow.com/questions/53852224/azure-service-bus-sdk-for-c/53861760#53861760", "title": "Azure Service Bus SDK for C++", "body": "<p>As far as I know, there is not Service Bus SDK for cpp. </p>\n\n<p>If you want sample codes about Service Bus with cpp, you could go to this <a href=\"https://www.example-code.com/cpp/azureServiceBus.asp\" rel=\"nofollow noreferrer\">site</a> , there are most Service Bus Function codes in this site.</p>\n\n<p>If you still have other questions, please let me know.</p>\n"}], "owner": {"reputation": 179, "user_id": 1774598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa65b5d33efe2785cbaf7253173c963?s=128&d=identicon&r=PG", "display_name": "Bezousek", "link": "https://stackoverflow.com/users/1774598/bezousek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545273813, "creation_date": 1545225970, "question_id": 53852224, "link": "https://stackoverflow.com/questions/53852224/azure-service-bus-sdk-for-c", "title": "Azure Service Bus SDK for C++", "body": "<p>is there any SDK or some library which implements azure service bus messaging in C++?</p>\n\n<p>Something similar like <strong>Microsoft.Azure.Storage.CPP</strong> for Azure Storage?</p>\n\n<p>My goal is to send/receive message to/from topic (queue). </p>\n\n<p>I know that <strong>Microsoft.Azure.Storage.CPP</strong> is built upon <strong>CPPRestSDK</strong> which probably can be used for service bus messaging as well. </p>\n\n<p>Unfortunately I am not aware of any documentation what exactly and in what format should be send over CPPRestSDK to correctly send a service bus message. </p>\n\n<p>Therefore would be quite complicated to develop it from scratch.</p>\n\n<p>Is there any example built upon CPPRestSDK I could take inspiration from? </p>\n\n<p>There must be someone who already used service bus messaging in C++ world :-)</p>\n\n<p>Thanks for any advice.</p>\n"}, {"tags": ["c++", "encryption"], "comments": [{"owner": {"reputation": 3791, "user_id": 1820553, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NZb6uZzo4Gg/AAAAAAAAAAI/AAAAAAAAAo0/xTr6RvgMTRw/photo.jpg?sz=128", "display_name": "kelalaka", "link": "https://stackoverflow.com/users/1820553/kelalaka"}, "edited": false, "score": 2, "creation_date": 1545226367, "post_id": 53852222, "comment_id": 94551960, "body": "<code>keytext[i]</code> should be <code>keytext[i % len(key) ]</code>"}, {"owner": {"reputation": 221, "user_id": 1368278, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/64d5c23a71a6e9f8b99e5befcdfc8615?s=128&d=identicon&r=PG", "display_name": "Luisjomen2a", "link": "https://stackoverflow.com/users/1368278/luisjomen2a"}, "edited": false, "score": 0, "creation_date": 1545227034, "post_id": 53852222, "comment_id": 94552373, "body": "Or he could&#39;ve repeated it as many times as needed in the code before that, we don&#39;t know..."}, {"owner": {"reputation": 23, "user_id": 10523769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9391beb023a1f7b243b7b2c4a7bee3ff?s=128&d=identicon&r=PG&f=1", "display_name": "muadgra", "link": "https://stackoverflow.com/users/10523769/muadgra"}, "edited": false, "score": 0, "creation_date": 1545227200, "post_id": 53852222, "comment_id": 94552482, "body": "nothing has changed. result is the same"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10523769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9391beb023a1f7b243b7b2c4a7bee3ff?s=128&d=identicon&r=PG&f=1", "display_name": "muadgra", "link": "https://stackoverflow.com/users/10523769/muadgra"}, "edited": false, "score": 1, "creation_date": 1545228080, "post_id": 53852742, "comment_id": 94553023, "body": "Yes, keyText is repetition of my keyword. Sorry for not pointing it out. I thought about creating my own alphabet map but wanted a short cut too but if there isn&#39;t any, then i have to do it..."}], "tags": [], "owner": {"reputation": 221, "user_id": 1368278, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/64d5c23a71a6e9f8b99e5befcdfc8615?s=128&d=identicon&r=PG", "display_name": "Luisjomen2a", "link": "https://stackoverflow.com/users/1368278/luisjomen2a"}, "is_accepted": true, "score": 0, "last_activity_date": 1545227693, "creation_date": 1545227693, "answer_id": 53852742, "question_id": 53852222, "link": "https://stackoverflow.com/questions/53852222/vigenere-encription-with-different-mod/53852742#53852742", "title": "Vigenere Encription with different mod", "body": "<p>Let's analyse what's going on with your code here for the first letter 'M' for example.</p>\n\n<p>I'll replace it in your first line of code. <em>By the way, I suppose that <code>keyText</code> contains a repetition of your keyword as many times as needed in order to contain the same number of characters as your example : <code>KAIJGKAIJGKAIJGKA...</code>.</em>   </p>\n\n<p><code>encryptedtext[i] = ((text[i] + keytext[i]) % alphabetlength) + 'A' + 1;</code></p>\n\n<p>This would look something like this :</p>\n\n<p><code>encryptedtext[i] = (('M' + 'K')% 25) + 'A' + 1</code></p>\n\n<p>By replacing values with the <a href=\"https://en.cppreference.com/w/cpp/language/ascii\" rel=\"nofollow noreferrer\">ascii table</a> you get :</p>\n\n<p><code>encryptedtext[i] = ((77 + 75)% 25) + 65 + 1</code> which means <code>encryptedtext[i] = 67</code> </p>\n\n<p>Which is indeed C. </p>\n\n<p><strong>In summary</strong> : ASCII has a 26 character alphabet table, which is possibly not the same as your own <code>alphabetlength</code>. Create your own alphabet map, do not rely on ASCII to int translations, that's just asking for trouble.</p>\n"}], "owner": {"reputation": 23, "user_id": 10523769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9391beb023a1f7b243b7b2c4a7bee3ff?s=128&d=identicon&r=PG&f=1", "display_name": "muadgra", "link": "https://stackoverflow.com/users/10523769/muadgra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 53852742, "answer_count": 1, "score": 0, "last_activity_date": 1545232144, "creation_date": 1545225969, "last_edit_date": 1545232144, "question_id": 53852222, "link": "https://stackoverflow.com/questions/53852222/vigenere-encription-with-different-mod", "title": "Vigenere Encription with different mod", "body": "<p>I've been trying to write a C++ program which can encrypt the given letters into Vigenere-encrypted ones. It works if the alphabet is 26-letters long but when I try to make them work with different sized alphabet (lets say 25 for this example), I get irrelevant codes.</p>\n\n<p><br/>For example:</p>\n\n<blockquote>\n  <p>ALPHABET: ABCDEFGHIJKLMNOPQRSTUVWXY (alphabet length is 25)<br/>\n  TEXT : MUADGRATRYINGTOMAKEITWORK<br/>\n  KEY: KAIJG<br/>\n  ENCRYPTEDTEXT: CANRRHFHGKXSTIACFXSTJCCGV<br/>\n  DECRYPTEDTEXT: RAFILWFYWENSLYTRFPJNYCTWP<br/></p>\n</blockquote>\n\n<p>My current formula is for encryption is:</p>\n\n<pre><code>    for (i = 0; i &lt; lengthoftext; i++) {\n\n        encryptedtext[i] = ((text[i] + keytext[i]) % alphabetlength) + 'A' + 1;\n        if (encryptedtext[i] &lt; 65) {\n            encryptedtext[i] = encryptedtext[i] + alphabetlength;\n        }\n        if (encryptedtext[i] &gt; 90) {\n            encryptedtext[i] -= alphabetlength;\n        }\n</code></pre>\n\n<p>And formula for decryption is:</p>\n\n<pre><code>    for (i = 0; i &lt; lengthoftext; i++) {\n          decryptedtext[i] = (((decryptedtext[i] - keytext[i]) + alphabetlength) % alphabetlength) + 'A' - 1 - (5 * (26 - alphabetlength));\n        if (decryptedtext[i] &lt; 65) {\n            decryptedtext[i] = decryptedtext[i] + alphabetlength;\n        }\n\n        if (decryptedtext[i] &gt; 90)\n            decryptedtext[i] = decryptedtext[i] - alphabetlength;\n    }\n</code></pre>\n\n<p>So, it works for mod 26 with no problems but when I try to change my alphabet into, lets say, ABCDEFGH and then try to return it to its decrypted form, I get irrelevant results. I couldn't find any pattern while changing the length of alphabet. I'd like to know how to change my formulas or a new way to do the encrytion.</p>\n"}, {"tags": ["c++", "refactoring"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 1, "creation_date": 1545225677, "post_id": 53852102, "comment_id": 94551546, "body": "If it&#39;s internal to the class, then there is no good reason at all. A handle is a nebulous concept."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 2, "creation_date": 1545225723, "post_id": 53852102, "comment_id": 94551576, "body": "<code>hSomeSdk</code> is a member of a class by any chance? Some programmers just aren&#39;t aware they can forward declare classes in order to define pointer to them. The colleague may have wanted to avoid including a header they otherwise don&#39;t need in your own header file."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545226032, "post_id": 53852102, "comment_id": 94551765, "body": "I think the easiest way to understand the reason for the void pointer in this case would be to ask your colleague why they are using a void pointer there.  Stands out like a sore thumb."}, {"owner": {"reputation": 229, "user_id": 1437684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb030b6fe09a0702c0b133bceccfbccf?s=128&d=identicon&r=PG", "display_name": "Alex Millette", "link": "https://stackoverflow.com/users/1437684/alex-millette"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1545226254, "post_id": 53852102, "comment_id": 94551882, "body": "@StoryTeller It is indeed a member."}, {"owner": {"reputation": 229, "user_id": 1437684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb030b6fe09a0702c0b133bceccfbccf?s=128&d=identicon&r=PG", "display_name": "Alex Millette", "link": "https://stackoverflow.com/users/1437684/alex-millette"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1545226258, "post_id": 53852102, "comment_id": 94551886, "body": "@Eljay Sadly the colleague left the company."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1545226292, "post_id": 53852102, "comment_id": 94551905, "body": "Based solely on the shown code there is no reason for it, and it simply offers fertile breeding grounds for bugs. There maybe other reasons for it, such as interfacing with a C library. But, in general, pure, modern C++ code never has any need for void pointers."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545226294, "post_id": 53852102, "comment_id": 94551906, "body": "also in the situation you describe you need to know what is the actual type, otherwise you cannot do much with the <code>void*</code>. I dont think there is any reason to use <code>void*</code> other than interfacing legacy / c apis"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 2, "creation_date": 1545226761, "post_id": 53852102, "comment_id": 94552210, "body": "@AlexMillette Based solely on the shown code, it&#39;s not so sad."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1545226712, "creation_date": 1545226712, "answer_id": 53852449, "question_id": 53852102, "link": "https://stackoverflow.com/questions/53852102/pertinence-of-void-pointers/53852449#53852449", "title": "Pertinence of void pointers", "body": "<p>Nope.</p>\n\n<p>If I had to guess, the ex-colleague was unfamiliar with <em>forward declarations</em> and thus didn't know they could still do <code>SomeSDK*</code> in the header without including the entire <code>SomeSDK</code> definition.</p>\n\n<p>Given the constraints you've mentioned, the only thing this pattern achieves is to eliminate some type safety, make the code harder to read/maintain, and generate a Stack Overflow question.</p>\n"}, {"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1545226801, "creation_date": 1545226801, "answer_id": 53852477, "question_id": 53852102, "link": "https://stackoverflow.com/questions/53852102/pertinence-of-void-pointers/53852477#53852477", "title": "Pertinence of void pointers", "body": "<p>Since this is a member variable, I'm gonna go out on a limb and say your colleague wanted to minimize dependencies. Including the header for <code>SomeSDK</code> is probably undesirable just to define a pointer. The colleague may have had one of two reasons as far as I can see from the code you show:</p>\n\n<ol>\n<li>They just didn't know they can add a forward declarations like <code>class SomeSDK;</code> to allow defining pointers. Some programmers just aren't aware of it.</li>\n<li>They <em>couldn't</em> forward declare it. If <code>SomeSDK</code> is not a class, but a type alias (aka <code>typedef</code>), then it's not possible to forward declare it exactly. One can only declare the class it aliases, but that in turn may be an implementation detail that's hard to keep track of. Even the standard library has a similar problem, that is why it provides <a href=\"https://en.cppreference.com/w/cpp/header/iosfwd\" rel=\"nofollow noreferrer\"><code>iosfwd</code></a> to make forward declaring standard stream types easier.</li>\n</ol>\n\n<p>If the code is peppered with casts of this handle, then the design should have been reworked ages ago. Otherwise, if it's in one place (or a few at most) only, I can see why the people maintaining it could live with it peacefully. </p>\n"}, {"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 1, "last_activity_date": 1545226884, "creation_date": 1545226884, "answer_id": 53852502, "question_id": 53852102, "link": "https://stackoverflow.com/questions/53852102/pertinence-of-void-pointers/53852502#53852502", "title": "Pertinence of void pointers", "body": "<p><code>void*</code> were popular and needed back in C. They are convenient in the sense that they can be easily cast to anything. If you need to cast from <code>double*</code> to <code>char*</code>, you have to make a mid cast to <code>void*</code>.</p>\n\n<p>The problem with <code>void*</code> is that they are too flexible: they do not convey intentions of the writer, making them very unsafe especially in big projects.</p>\n\n<p>In Object Oriented Design it is popular to create abstract interface classes (all members are virtual and not implemented) and make pointers to such classes and then instantiate various possible implementation depending on the usage.</p>\n\n<p>However, nowadays, it is more recommended to work with templates (main advantage of C++ over other languages), as those are much faster and enable more compile-time optimization than OOD allowed. Unfortunately, working with templates is still a huge hassle - they have more complicated syntax and it is difficult to convey intentions of the writer to users about restrictions and demands of the template parameters (Concepts TS that solves this problem decently will be available in C++20 - currently there is only SFINAE, a horrible temporary solution from 20 years ago; while Reflection TS, that will greatly enhance generic programming in C++, is unlikely to be available even in C++23).</p>\n"}], "owner": {"reputation": 229, "user_id": 1437684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb030b6fe09a0702c0b133bceccfbccf?s=128&d=identicon&r=PG", "display_name": "Alex Millette", "link": "https://stackoverflow.com/users/1437684/alex-millette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53852477, "answer_count": 3, "score": 0, "last_activity_date": 1545226884, "creation_date": 1545225529, "last_edit_date": 1545226358, "question_id": 53852102, "link": "https://stackoverflow.com/questions/53852102/pertinence-of-void-pointers", "title": "Pertinence of void pointers", "body": "<p>Looking through a colleague's code, I see that some of its handles are stored as void pointers.</p>\n\n<pre><code>// Class header\nvoid* hSomeSdk;\n\n// Class implementation\nhSomeSdk = new SomeSDK(...);\n((SomeSDK*)hSomeSdk)-&gt;DoSomeWork();\n</code></pre>\n\n<p>Now I know that sometimes handles are void pointers because it may be unknown before runtime what will be the actual type of the handle. Or that it can help when we need to share the pointer without revealing its actual structure. But this does not seem to be the case in my situation: it will always be SomeSDK and it is not shared outside the class where it is created. Also the author of this code is gone from the company.</p>\n\n<p>Are there other reasons why it would make sense to have it be a void pointer?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "edited": false, "score": 0, "creation_date": 1545224725, "post_id": 53851839, "comment_id": 94551050, "body": "What do you mean, a QStringList with 32 positions?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1545224873, "post_id": 53851839, "comment_id": 94551133, "body": "No, QStringList is an object, unsigned char[32] is an array of 32 characters.  I think what you are actually meaning is how to I get an array from a string list?"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1545225063, "post_id": 53851839, "comment_id": 94551230, "body": "I guess you can start looking here: <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/stol</a>"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "reply_to_user": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1545225355, "post_id": 53851839, "comment_id": 94551387, "body": "@SPlatten yes! that is what I want to do"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545225499, "post_id": 53851839, "comment_id": 94551457, "body": "@LaionCamargo you have to say more, do you want concatenate the strings from the QStringList into the <code>char32]</code> ? with/without separators between ? What about the non ascii char ?"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545225692, "post_id": 53851839, "comment_id": 94551556, "body": "@bruno I fix my question to give more info ;)"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1545225775, "post_id": 53851839, "comment_id": 94551607, "body": "This code makes nosense. It is invalid"}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "edited": false, "score": 0, "creation_date": 1545225822, "post_id": 53851839, "comment_id": 94551635, "body": "Do you mean your QStringList[0] contains the string &quot;70&quot;  ?  And you want to convert that to a single byte with the value 70 ? Do all the strings in your list contain a string representation of a number that fits in an unsigned char ?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545225904, "post_id": 53851839, "comment_id": 94551692, "body": "@LaionCamargo each QString into the QStringList has always 1 character ?"}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545226016, "post_id": 53851839, "comment_id": 94551755, "body": "@bruno, If each values of the <code>QStringList</code> is a <code>QString</code> of length 1, why do you not use <code>QList&lt;QChar&gt;</code> ?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "edited": false, "score": 0, "creation_date": 1545226344, "post_id": 53851839, "comment_id": 94551943, "body": "@ThibautB. this is the more probable thing looking at the description given by Laion Camargo but I/we wait for confirmation :)"}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545226459, "post_id": 53851839, "comment_id": 94552019, "body": "@bruno Yep sorry, I wanted to notify Laion Camargo, but I do a mistake ;)"}, {"owner": {"reputation": 18971, "user_id": 2674506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QvQN8.jpg?s=128&g=1", "display_name": "vahancho", "link": "https://stackoverflow.com/users/2674506/vahancho"}, "edited": false, "score": 1, "creation_date": 1545226479, "post_id": 53851839, "comment_id": 94552039, "body": "<code>for (const auto &amp;s, stringList) int i = s.toInt();</code>, assuming that each element in the string list can be converted to an integer value."}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "edited": false, "score": 0, "creation_date": 1545227315, "post_id": 53851839, "comment_id": 94552553, "body": "I give more example to help understand what I want, sorry for the bad information before ;)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545227444, "post_id": 53851839, "comment_id": 94552624, "body": "ok, so queryPK[0] is not 70, nor &quot;70&quot; but &quot;0x46&quot; ! etc"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545227573, "post_id": 53851839, "comment_id": 94552705, "body": "@bruno yep! I just left 70 because its the real value in Int"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545227813, "post_id": 53851839, "comment_id": 94552884, "body": "@LaionCamargo from  vahancho proposal <code>char * ppk = pk;  for (const auto &amp;s, stringList) *ppk++ = s.toInt(0, 16);</code> or something like, probably adding test of length etc"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "reply_to_user": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 0, "creation_date": 1545227830, "post_id": 53851839, "comment_id": 94552891, "body": "@Amadeus I fixed the example ;)"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545228037, "post_id": 53851839, "comment_id": 94553004, "body": "@LaionCamargo no, replace <code>queryPK[0] &gt;&gt; 0x46</code> by <code>queryPK[0] is &quot;0x46&quot;</code> etc else is very confusing. To say <i>publicKey</i> is a <i>QString</i> is also useful"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545228272, "post_id": 53851839, "comment_id": 94553145, "body": "@bruno maybe has some mistake... pk is the result I want to have after send my stringList into a unsigned char pk"}], "answers": [{"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545228552, "post_id": 53852835, "comment_id": 94553299, "body": "Wrong sizeof and in general not what OP is trying to achieve."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545229619, "post_id": 53852835, "comment_id": 94553913, "body": "Better, but the second parameter of <code>toUInt</code> should be 0 (as you want it to parse the <code>0x</code> prefix); also, you should check if the conversion succeeded through the first parameter..."}, {"owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545229972, "post_id": 53852835, "comment_id": 94554114, "body": "@MatteoItalia Fixed ;)"}, {"owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "edited": false, "score": 0, "creation_date": 1545231205, "post_id": 53852835, "comment_id": 94554899, "body": "@ThibautB. tks Sir... that fix my problem!!"}], "tags": [], "owner": {"reputation": 3000, "user_id": 7611028, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/070114bcdaeea4fc70434718b584f0e0?s=128&d=identicon&r=PG&f=1", "display_name": "thibsc", "link": "https://stackoverflow.com/users/7611028/thibsc"}, "is_accepted": true, "score": 2, "last_activity_date": 1545229839, "last_edit_date": 1545229839, "creation_date": 1545228068, "answer_id": 53852835, "question_id": 53851839, "link": "https://stackoverflow.com/questions/53851839/is-possible-convert-qstringlist-to-unsigned-char/53852835#53852835", "title": "Is possible convert \u2018QStringList\u2019 to \u2018unsigned char\u2019?", "body": "<p>Assuming your QStringList contains something like that:</p>\n\n<pre><code>QStringList sl = QStringList() &lt;&lt; \"0x46\" &lt;&lt; \"0x9e\";\n</code></pre>\n\n<p>A possible solution is:</p>\n\n<pre><code>unsigned char pk[32];\nint idx = 0;\nfor (const QString&amp; s : sl){\n    // transform to uint\n    bool converted = false;\n    unsigned char uc = static_cast&lt;unsigned char&gt;(s.toUInt(&amp;converted, 0));\n    if (converted){\n        pk[idx] = uc;\n    }\n    idx++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545229641, "post_id": 53853028, "comment_id": 94553924, "body": "Not what he is trying to achieve."}, {"owner": {"reputation": 1199, "user_id": 6893660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tzc8b.png?s=128&g=1", "display_name": "MrMaavin", "link": "https://stackoverflow.com/users/6893660/mrmaavin"}, "reply_to_user": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1545288702, "post_id": 53853028, "comment_id": 94574903, "body": "But it is a part of what he want&#39;s to achieve, i also mentioned that in my answere."}], "tags": [], "owner": {"reputation": 1199, "user_id": 6893660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tzc8b.png?s=128&g=1", "display_name": "MrMaavin", "link": "https://stackoverflow.com/users/6893660/mrmaavin"}, "is_accepted": false, "score": -1, "last_activity_date": 1545229011, "last_edit_date": 1545229011, "creation_date": 1545228677, "answer_id": 53853028, "question_id": 53851839, "link": "https://stackoverflow.com/questions/53851839/is-possible-convert-qstringlist-to-unsigned-char/53853028#53853028", "title": "Is possible convert \u2018QStringList\u2019 to \u2018unsigned char\u2019?", "body": "<p>Try it with <code>toAscii().constData()</code>.</p>\n\n<pre><code>QString str = \"ABCD\";\nint length = str.length();\nunsigned char *sequence = NULL;\nsequence = (unsigned char*)qstrdup(str.toAscii().constData());\n</code></pre>\n\n<p>be aware, that you have to delete the sequence with the following code:</p>\n\n<pre><code>delete [] sequence\n</code></pre>\n\n<p>You have to add the split logic and a loop to have your full solution.</p>\n"}, {"tags": [], "owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "is_accepted": false, "score": 1, "last_activity_date": 1545229489, "creation_date": 1545229489, "answer_id": 53853248, "question_id": 53851839, "link": "https://stackoverflow.com/questions/53851839/is-possible-convert-qstringlist-to-unsigned-char/53853248#53853248", "title": "Is possible convert \u2018QStringList\u2019 to \u2018unsigned char\u2019?", "body": "<p>You can iterate over your list as described in <a href=\"http://doc.qt.io/qt-5/qstringlist.html#iterating-over-the-strings\" rel=\"nofollow noreferrer\">Qt documentation</a>.</p>\n\n<p>So, basically you need something like this (assuming that <code>queryPK</code> is your <code>QStringList</code> object):</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; v;\n\nQStringList::const_iterator constIterator;\nfor (constIterator = queryPK.constBegin(); constIterator != querypk.constEnd();\n       ++constIterator)\n    v.emplace_back(std::stoul(constIterator));\n</code></pre>\n\n<p>but you must ensure that <code>constIterator</code> is 1 byte long or you will get narrowing conversion</p>\n"}], "owner": {"reputation": 105, "user_id": 9624979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1495113880617079/picture?type=large", "display_name": "Laion Camargo", "link": "https://stackoverflow.com/users/9624979/laion-camargo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 578, "favorite_count": 0, "accepted_answer_id": 53852835, "answer_count": 3, "score": -2, "last_activity_date": 1545229839, "creation_date": 1545224507, "last_edit_date": 1545228319, "question_id": 53851839, "link": "https://stackoverflow.com/questions/53851839/is-possible-convert-qstringlist-to-unsigned-char", "title": "Is possible convert \u2018QStringList\u2019 to \u2018unsigned char\u2019?", "body": "<p>I have a QStringList and I want to convert it to unsigned char[32].</p>\n\n<p>Is possible? And how do I do that?</p>\n\n<p>Example:</p>\n\n<pre><code>publicKey = \"0x46,0x9e,...\"\nauto queryPK = publicKey.split(',');\n</code></pre>\n\n<p>so that is my qDebug()</p>\n\n<pre><code>queryPK[0] is 0x46\n\nqueryPK[1] is 0x9e\n</code></pre>\n\n<p>And that is what I want to have after conversion:</p>\n\n<pre><code>unsigned char pk = {0x46,0x9e,...}\n</code></pre>\n"}, {"tags": ["c++", "clang", "code-analysis", "llvm-clang"], "answers": [{"tags": [], "owner": {"reputation": 1504, "user_id": 1173521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e53bbfee240b8cbd7af6e5629968a48b?s=128&d=identicon&r=PG", "display_name": "samvv", "link": "https://stackoverflow.com/users/1173521/samvv"}, "is_accepted": true, "score": 1, "last_activity_date": 1545224773, "creation_date": 1545224773, "answer_id": 53851918, "question_id": 53851704, "link": "https://stackoverflow.com/questions/53851704/in-clang-can-i-access-the-sourcemanager-when-writing-a-custom-astmatcher/53851918#53851918", "title": "In Clang, can I access the SourceManager when writing a custom ASTMatcher?", "body": "<p>Never mind, I've found the answer by looking at the source of <code>isExpansionInMainFile</code>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>AST_POLYMORPHIC_MATCHER(isExpansionInMainFile,\n                        AST_POLYMORPHIC_SUPPORTED_TYPES(Decl, Stmt, TypeLoc)) {\n  auto &amp;SourceManager = Finder-&gt;getASTContext().getSourceManager();\n  return SourceManager.isInMainFile(\n      SourceManager.getExpansionLoc(Node.getBeginLoc()));\n}\n</code></pre>\n\n<p>Turns out I missed the <code>getASTContext</code> in <code>MatchFinder</code>, which holds on to the source manager.</p>\n"}], "owner": {"reputation": 1504, "user_id": 1173521, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e53bbfee240b8cbd7af6e5629968a48b?s=128&d=identicon&r=PG", "display_name": "samvv", "link": "https://stackoverflow.com/users/1173521/samvv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 53851918, "answer_count": 1, "score": 1, "last_activity_date": 1545224773, "creation_date": 1545224054, "question_id": 53851704, "link": "https://stackoverflow.com/questions/53851704/in-clang-can-i-access-the-sourcemanager-when-writing-a-custom-astmatcher", "title": "In Clang, can I access the SourceManager when writing a custom ASTMatcher?", "body": "<p>I'm trying to upgrade my <a href=\"https://github.com/AutoFFI/AutoFFI\" rel=\"nofollow noreferrer\">AutoFFI</a> project by making it more elegant and use Clang's <a href=\"https://clang.llvm.org/docs/LibASTMatchersReference.html\" rel=\"nofollow noreferrer\">ASTMatchers</a> more extensively. I'd like to create a matcher that filters on the file path that was specified. Is it possible to do such a thing, or do I need to add custom logic outside of the matcher for this to work? As far as I can see, there's no way to get the <code>SourceManager</code> and use it to create a <code>FullSourceLoc</code>, but maybe I'm missing something.</p>\n\n<p>Some relevant links:</p>\n\n<ul>\n<li><a href=\"https://clang.llvm.org/doxygen/classclang_1_1FullSourceLoc.html\" rel=\"nofollow noreferrer\">https://clang.llvm.org/doxygen/classclang_1_1FullSourceLoc.html</a></li>\n<li><a href=\"https://github.com/llvm-mirror/clang/blob/f3b7928366f63b51ffc97e74f8afcff497c57e8d/include/clang/ASTMatchers/ASTMatchersMacros.h#L28\" rel=\"nofollow noreferrer\">https://github.com/llvm-mirror/clang/blob/f3b7928366f63b51ffc97e74f8afcff497c57e8d/include/clang/ASTMatchers/ASTMatchersMacros.h#L28</a></li>\n</ul>\n\n<p>If someone could tell me whether this is a limitation to Clang's ASTMatcher API or not I'd be very grateful!</p>\n"}, {"tags": ["c++", "math", "graphics"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 1, "creation_date": 1545223590, "post_id": 53851544, "comment_id": 94550378, "body": "<i>&quot;I tried to rotate 4\u03c0 degrees&quot;</i> You mean 4\u03c0 radians? <code>sin</code> and <code>cos</code> take radians, not degrees."}, {"owner": {"reputation": 53, "user_id": 6103353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc544f50e4445f87d110c5f8d9d804c7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Zhao", "link": "https://stackoverflow.com/users/6103353/m-zhao"}, "edited": false, "score": 0, "creation_date": 1545223863, "post_id": 53851544, "comment_id": 94550529, "body": "Yes, I mean radians. Sorry I&#39;m not good at English."}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1545225319, "post_id": 53851544, "comment_id": 94551373, "body": "Btw., it is unusual what you&#39;re trying to do. Suppose, that you have two rotations (A, B). Both have a large rotation (&gt;360) around some axis. What do you expect, how can one interpolate between them, if not the trivial one (ignoring the &quot;excess&quot; rotation, and treat the rotation something like &quot;mod 360&quot;, I mean use just the end-pose of the rotation)?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6103353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc544f50e4445f87d110c5f8d9d804c7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Zhao", "link": "https://stackoverflow.com/users/6103353/m-zhao"}, "edited": false, "score": 0, "creation_date": 1545224145, "post_id": 53851599, "comment_id": 94550717, "body": "But with animation it&#39;s different.It works well when I use the euler angle."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 53, "user_id": 6103353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc544f50e4445f87d110c5f8d9d804c7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Zhao", "link": "https://stackoverflow.com/users/6103353/m-zhao"}, "edited": false, "score": 0, "creation_date": 1545224216, "post_id": 53851599, "comment_id": 94550760, "body": "@M.Zhao what is missing actually is a case where it does not work well. What you describe in your question is not really a problem, but what you get is just expected"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 1, "last_activity_date": 1545224163, "last_edit_date": 1545224163, "creation_date": 1545223629, "answer_id": 53851599, "question_id": 53851544, "link": "https://stackoverflow.com/questions/53851544/how-to-use-quaternions-to-describe-a-rotation-angle-which-is-more-than-360-degre/53851599#53851599", "title": "How to use quaternions to describe a rotation angle which is more than 360 degrees\uff1f", "body": "<p>Rotating be 360 degrees <strong>is</strong> the same as rotating by 0 degrees. To rotate by an angle <code>alpha</code> bigger than 360 simply rotate by <code>alpha-360</code> or more general by <code>alpha % 360</code>.</p>\n\n<p>(360 used as synonym for <code>2pi</code>, you need to take care about degree vs radians of course. And not sure if thats a typo, but <code>360</code> degree is <code>2pi</code> not <code>4pi</code>)</p>\n\n<p>PS: Actually I think there is nothing wrong with your code, and maybe you dont have to change anything. It's just your expectations that were wrong: You should get the same for a rotation by 4pi as for a rotation by 0.</p>\n"}, {"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1545229790, "post_id": 53851814, "comment_id": 94554001, "body": "Another possibility is to split the rotation into circle sectors all of which below the supremum angle."}, {"owner": {"reputation": 53, "user_id": 6103353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc544f50e4445f87d110c5f8d9d804c7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Zhao", "link": "https://stackoverflow.com/users/6103353/m-zhao"}, "edited": false, "score": 0, "creation_date": 1545312256, "post_id": 53851814, "comment_id": 94586047, "body": "Thanks for your help. I will try to use axis-angle to do the animation."}], "tags": [], "owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "is_accepted": true, "score": 5, "last_activity_date": 1545224425, "creation_date": 1545224425, "answer_id": 53851814, "question_id": 53851544, "link": "https://stackoverflow.com/questions/53851544/how-to-use-quaternions-to-describe-a-rotation-angle-which-is-more-than-360-degre/53851814#53851814", "title": "How to use quaternions to describe a rotation angle which is more than 360 degrees\uff1f", "body": "<blockquote>\n  <p>I wonder if quaternions can represent rotations over 360 degrees?</p>\n</blockquote>\n\n<p>No, it can not.</p>\n\n<p>Quaternions between the range [360;720] will treated as rotations at the other direction: [-360;0].</p>\n\n<p>And quaternions between the range [720*k; 720*(k+1)] will be treated as rotations [0;720].</p>\n\n<p>If you use slerp for this kind of animation, quaternions are not good for them.</p>\n\n<p>Quaternions can only slerp between angles which are smaller than 360.</p>\n\n<p>If you still want to do this, use a different representation, like axis-angle.</p>\n"}, {"tags": [], "owner": {"reputation": 2990, "user_id": 10803671, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mt-5s4Zqfyk/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i_80atK5hWxwK60_Ren7qQV1TVuQ/mo/photo.jpg?sz=128", "display_name": "ALX23z", "link": "https://stackoverflow.com/users/10803671/alx23z"}, "is_accepted": false, "score": 1, "last_activity_date": 1545229882, "last_edit_date": 1545229882, "creation_date": 1545228374, "answer_id": 53852933, "question_id": 53851544, "link": "https://stackoverflow.com/questions/53851544/how-to-use-quaternions-to-describe-a-rotation-angle-which-is-more-than-360-degre/53852933#53852933", "title": "How to use quaternions to describe a rotation angle which is more than 360 degrees\uff1f", "body": "<p>Think of quaternions as instant rotations - rotating by 4\u03c0 radians instantly is the same as doing nothing.</p>\n\n<p>This is not what you want when you animate rotation of 4\u03c0 radians over 20 seconds. You can solve it by creating an Euler Vector (a 3D vector whose direction represents the axis of rotation, same as in quaternion, while its length represents the speed/angle of the rotation), see <a href=\"https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Axis%E2%80%93angle_representation</a>. Later, multiply it by time passed and convert it into quaternion or 3D matrix depending on what your graphics wants.</p>\n"}], "owner": {"reputation": 53, "user_id": 6103353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc544f50e4445f87d110c5f8d9d804c7?s=128&d=identicon&r=PG&f=1", "display_name": "M.Zhao", "link": "https://stackoverflow.com/users/6103353/m-zhao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "accepted_answer_id": 53851814, "answer_count": 3, "score": 5, "last_activity_date": 1545327612, "creation_date": 1545223449, "last_edit_date": 1545327612, "question_id": 53851544, "link": "https://stackoverflow.com/questions/53851544/how-to-use-quaternions-to-describe-a-rotation-angle-which-is-more-than-360-degre", "title": "How to use quaternions to describe a rotation angle which is more than 360 degrees\uff1f", "body": "<p>I'm trying to use quaternions to do rotation animation.\nMy algorithm creates Quaternions, and slerps every frame.\nHere is my code to construct a quaternion by the axis and the rotation angle.</p>\n\n<pre><code>template &lt;typename U&gt;\nQuaternion(Vector3&lt;U&gt; vec, const float&amp; angle)\n{\n    vec.normalize();\n    float cosa = cos(angle/2);\n    float sina = sin(angle/2);\n    w = cosa;\n    x = sina * vec.x;\n    y = sina * vec.y;\n    z = sina * vec.z;\n}\n</code></pre>\n\n<p>Then I found that when I tried to rotate 4\u03c0 radians, the animation does not work because the quaternion I created is equivalent to 0 degrees.\nI wonder if quaternions can represent rotations over 360 degrees? Or is my animation algorithm in need of improvement? </p>\n"}, {"tags": ["c++", "boost", "cmake", "boost-python"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545223403, "post_id": 53851463, "comment_id": 94550274, "body": "You don&#39;t need <code>if(Boost_FOUND)</code>, you set <code>REQUIRED</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545223466, "post_id": 53851463, "comment_id": 94550309, "body": "<code>set(BOOST_LIBRARYDIR &quot;&#47;usr&#47;lib&#47;x86_64-linux-gnu&quot;)</code> was added where in the file?"}, {"owner": {"reputation": 992, "user_id": 3444956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45650f2170663c203fd5d87b44580c64?s=128&d=identicon&r=PG&f=1", "display_name": "harmands", "link": "https://stackoverflow.com/users/3444956/harmands"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1545223662, "post_id": 53851463, "comment_id": 94550420, "body": "Right before the <code>find_package</code> line"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545224204, "post_id": 53851463, "comment_id": 94550753, "body": "Run <code>cmake</code> with <code>-DBoost_DEBUG=ON</code> and see which files are actually searched."}, {"owner": {"reputation": 992, "user_id": 3444956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45650f2170663c203fd5d87b44580c64?s=128&d=identicon&r=PG&f=1", "display_name": "harmands", "link": "https://stackoverflow.com/users/3444956/harmands"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545226168, "post_id": 53851463, "comment_id": 94551823, "body": "@Tsyvarev: I have got a huge list of flags and their corresponding value, is there any specific that I have to check? Some contain the path that I have added in <code>BOOST_LIBRARYDIR</code>"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1545227266, "post_id": 53851463, "comment_id": 94552532, "body": "It should be a list of files (without directories, but with extensions) which are searched for <code>python37</code> component. Check that the list contains a file which you have (<code>libboost_python37.so.1.67.0</code>). Also it should be a list of directories, where the file is searched. Check that the directories list contains your directory (<code>&#47;usr&#47;lib&#47;x86_64-linux-gnu</code>)."}], "answers": [{"comments": [{"owner": {"reputation": 992, "user_id": 3444956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45650f2170663c203fd5d87b44580c64?s=128&d=identicon&r=PG&f=1", "display_name": "harmands", "link": "https://stackoverflow.com/users/3444956/harmands"}, "edited": false, "score": 0, "creation_date": 1545227916, "post_id": 53852731, "comment_id": 94552934, "body": "Yes, it worked, I was using <code>libboost-python1.67.0</code> instead of one that you have mentioned"}], "tags": [], "owner": {"reputation": 3822, "user_id": 792456, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6706944a2a8b4e2d37b330dd64cf9c69?s=128&d=identicon&r=PG", "display_name": "arved", "link": "https://stackoverflow.com/users/792456/arved"}, "is_accepted": true, "score": 0, "last_activity_date": 1545227672, "creation_date": 1545227672, "answer_id": 53852731, "question_id": 53851463, "link": "https://stackoverflow.com/questions/53851463/building-basic-c-project-with-boost-python-v1-67-and-cmake-on-ubuntu/53852731#53852731", "title": "Building basic C++ project with boost python v1.67 and cmake on Ubuntu", "body": "<p>It looks like you are missing the dev package, as there is no <code>/usr/lib/x86_64-linux-</code>gnu/libboost_python27.so</p>\n\n<p>Fix:</p>\n\n<pre><code>apt-get install libboost-python1.67-dev \n</code></pre>\n"}], "owner": {"reputation": 992, "user_id": 3444956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45650f2170663c203fd5d87b44580c64?s=128&d=identicon&r=PG&f=1", "display_name": "harmands", "link": "https://stackoverflow.com/users/3444956/harmands"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 53852731, "answer_count": 1, "score": 1, "last_activity_date": 1545227672, "creation_date": 1545223121, "last_edit_date": 1545225794, "question_id": 53851463, "link": "https://stackoverflow.com/questions/53851463/building-basic-c-project-with-boost-python-v1-67-and-cmake-on-ubuntu", "title": "Building basic C++ project with boost python v1.67 and cmake on Ubuntu", "body": "<p>This is my first attempt to write a cmake file for a production level project, I'm just trying to locate the boost python(v 1.67.0) package using cmake.</p>\n\n<p>I have a very small <code>CMakeLists.txt</code>.</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.13)\nfind_package(Boost 1.67.0 REQUIRED COMPONENTS system python37)\nif(Boost_FOUND)   \n    message(\"Boost_FOUND\")\nendif()\n</code></pre>\n\n<p>It works fine if I just try to find <code>system</code> but fails when I add <code>python37</code>. As per the FindBoost <a href=\"https://cmake.org/cmake/help/latest/module/FindBoost.html\" rel=\"nofollow noreferrer\">documentation</a>, I need to mention it the way I have mentioned it. This is the output that I get:</p>\n\n<pre><code>CMake Error at /usr/share/cmake-3.13/Modules/FindBoost.cmake:2100 (message):\n  Unable to find the requested Boost libraries.\n\n  Boost version: 1.67.0\n\n  Boost include path: /usr/include\n\n  Could not find the following Boost libraries:\n\n          boost_python37\n\n  Some (but not all) of the required Boost libraries were found.  You may\n  need to install these additional Boost libraries.  Alternatively, set\n  BOOST_LIBRARYDIR to the directory containing Boost libraries or BOOST_ROOT\n  to the location of Boost.\nCall Stack (most recent call first):\n  CMakeLists.txt:2 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\n</code></pre>\n\n<p>When I run <code>$ locate libboost_python</code> I get the following output:</p>\n\n<pre><code>/usr/lib/x86_64-linux-gnu/libboost_python-py27.so.1.65.1\n/usr/lib/x86_64-linux-gnu/libboost_python27.so.1.67.0\n/usr/lib/x86_64-linux-gnu/libboost_python3-py37.so.1.65.1\n/usr/lib/x86_64-linux-gnu/libboost_python37.so.1.67.0\n</code></pre>\n\n<p>Given this output, I assume that the package/library is present.\nSo, I tried to add the following line in <code>CMakeLists.txt</code>:</p>\n\n<pre><code>set(BOOST_LIBRARYDIR \"/usr/lib/x86_64-linux-gnu\")\n</code></pre>\n\n<p>But the error remained. What am I missing here?</p>\n"}, {"tags": ["c++", "netbeans", "compiler-errors", "dev-c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545222581, "post_id": 53851231, "comment_id": 94549856, "body": "<code>ttmath::Int&lt;1024*1024&gt;</code> , really? I didnt fully understand how big those ints can be, but did you? It would take a user hours to type a number with that many digits..."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1545222620, "post_id": 53851231, "comment_id": 94549875, "body": "Have you seen the faq section? &quot;Which compiler can I use?  At the moment only two compilers are supported: GCC from 3.4 and Microsoft Visual C++ from 7.0. Another compilers were not tested. But if you&#39;re using this library on 64bit platforms you can only use GCC (Microsoft doesn&#39;t provide the inline assembler in its 64bit compiler). &quot;"}, {"owner": {"reputation": 11, "user_id": 10810859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcaef118660127573aef4ae24e4a012?s=128&d=identicon&r=PG&f=1", "display_name": "Elbennix", "link": "https://stackoverflow.com/users/10810859/elbennix"}, "edited": false, "score": 0, "creation_date": 1545223100, "post_id": 53851231, "comment_id": 94550124, "body": "Yes, i read that, in Dev-c++ i&#39;m using gcc 4.9.2 and it doesn&#39;t work unfortunately"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545228138, "post_id": 53851231, "comment_id": 94553058, "body": "Raise issues on the ttmath project issues list (after searching for duplicates), not here"}], "owner": {"reputation": 11, "user_id": 10810859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcaef118660127573aef4ae24e4a012?s=128&d=identicon&r=PG&f=1", "display_name": "Elbennix", "link": "https://stackoverflow.com/users/10810859/elbennix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1545239418, "creation_date": 1545222318, "last_edit_date": 1545239418, "question_id": 53851231, "link": "https://stackoverflow.com/questions/53851231/problem-with-all-ides-an-compilers-using-ttmath-library-c", "title": "Problem with all ides an compilers using ttmath library (c++)", "body": "<p>I have created a program that factorizes, in prime numbers, a number received as input.\nI tried to compile with dev c++ first and it gave me these errors:</p>\n\n<pre><code>Error: operand type mismatch for `movq`\nError: incorrect register `%edx' used with `q' suffix\n</code></pre>\n\n<p>Netbeans throws this:</p>\n\n<pre><code>cd 'C:\\Users\\Frank\\Desktop\\Riemann\\Riemann'\nC:\\cygwin64\\bin\\make.exe -f Makefile CONF=Release\n\"/usr/bin/make\" -f nbproject/Makefile-Release.mk QMAKE= SUBPROJECTS= .build-conf\nmake[1]: Entering directory '/cygdrive/c/Users/Frank/Desktop/Riemann/Riemann'\n\"/usr/bin/make\"  -f nbproject/Makefile-Release.mk dist/Release/Cygwin_1-Windows/riemann.exe\nmake[2]: Entering directory '/cygdrive/c/Users/Frank/Desktop/Riemann/Riemann'\nmake[2]: *** No rule to make target '../../ttmath-0.9.3/ttmath/ttmathuint_x86_64_msvc.asm', needed by 'build/Release/Cygwin_1-Windows/_ext/88761bfc/ttmathuint_x86_64_msvc.o'.  Stop.\nmake[2]: Leaving directory '/cygdrive/c/Users/Frank/Desktop/Riemann/Riemann'\nmake[1]: *** [nbproject/Makefile-Release.mk:60: .build-conf] Error 2\nmake[1]: Leaving directory '/cygdrive/c/Users/Frank/Desktop/Riemann/Riemann'\nmake: *** [nbproject/Makefile-impl.mk:40: .build-impl] Error 2\nBUILD FAILED (exit value 2, total time: 657ms)\n</code></pre>\n\n<p>This is my source file:</p>\n\n<pre><code>#include \"ttmath.h\"\n#include \"sstream\"\n#include \"iostream\"\nusing namespace std;\n\n//Prototipi:\nstring inttostr(ttmath::Int&lt;1024*1024&gt; toCast);\nvoid FattorNumPrimi(ttmath::Int&lt;1024*1024&gt; n);\n\nint main()\n{\n    ttmath::Int&lt;1024*1024&gt; n;\n    cout&lt;&lt;\"Choose your number: \";\n    cin&gt;&gt;n; \n    FattorNumPrimi(n);\n    cout&lt;&lt;endl;\n    system(\"pause\");\n    return 0;\n}\n\n//Funzioni:\nstring inttostr(ttmath::Int&lt;1024*1024&gt; toCast)\n{\n    ostringstream converter;\n    converter.seekp(0);\n    converter &lt;&lt;toCast;\n    return converter.str();\n}\n\nvoid FattorNumPrimi(ttmath::Int&lt;1024*1024&gt; n)\n{\n    string prec=\"This is your number's factorization: \"+inttostr(1);\n    //unsigned long long int i=0;\n    //unsigned long long int j=0;\n    int x;\n        ttmath::Int&lt;1024*1024&gt; h=(1/2);//exponent for the pow function\n\n        for (ttmath::Int&lt;1024*1024&gt; s=2; s&lt;=n; s++)\n        { \n           for (ttmath::Int&lt;1024*1024&gt; t=2; t*t&lt;=s; t++)\n           { x=0;\n               if (s % t == 0)\n               {\n                   break;\n                }else if (t+1 &gt; s.Pow(h)) {\n\n               while(x!=1)\n               {   \n                   if(n%2==0&amp;&amp;n!=0)//Added because the prime number generation skips 2 and 3\n                   {\n                      n=n/2;                  \n                      prec=prec+\" x \"+inttostr(2);\n                   }else if(n%3==0&amp;&amp;n!=0)//Added because the prime number generation skips 2 and 3\n                   {\n                      n=n/3;                  \n                      prec=prec+\" x \"+inttostr(3);\n                   }else if(n%s==0&amp;&amp;n!=0)//If n can be divided by the prime number\n                   {\n                      n=n/s;                  \n                      prec=prec+\" x \"+inttostr(s);\n                   if(n==s)//If n is equal to the current prime number\n                   {\n                      prec=prec+\" x \"+inttostr(n);\n                      n=0;\n                   }                                  \n                   }else\n                   {\n                     x=1;\n                   }     \n               }\n            }\n        }\n    }\n        cout&lt;&lt;prec;\n}\n</code></pre>\n\n<p>Visual studio doesn't compile too.</p>\n\n<p>p.s.:The program works if I use unsigned long long int and I don't include the ttmath library, but I need it to work with huge numbers.</p>\n"}, {"tags": ["c++", "qt", "boost"], "comments": [{"owner": {"reputation": 2120, "user_id": 3110695, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSZkk.jpg?s=128&g=1", "display_name": "FortyTwo", "link": "https://stackoverflow.com/users/3110695/fortytwo"}, "edited": false, "score": 1, "creation_date": 1545222515, "post_id": 53851227, "comment_id": 94549824, "body": "Welcome to Stackoverflow. Read <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> to get better responses for your problem."}, {"owner": {"reputation": 1550, "user_id": 8394915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb437a787174e7b83efa53f1a6901006?s=128&d=identicon&r=PG&f=1", "display_name": "cheersmate", "link": "https://stackoverflow.com/users/8394915/cheersmate"}, "edited": false, "score": 1, "creation_date": 1545224336, "post_id": 53851227, "comment_id": 94550841, "body": "In particular, it is expected that you post your code as text (not as image)."}, {"owner": {"reputation": 864, "user_id": 10320907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a781c80933f17fa87d97b70e3fca260?s=128&d=identicon&r=PG", "display_name": "tunglt", "link": "https://stackoverflow.com/users/10320907/tunglt"}, "edited": false, "score": 0, "creation_date": 1545224846, "post_id": 53851227, "comment_id": 94551114, "body": "You should add <code>INCLUDEPATH += YOUR_BOOST_PATH</code> into your .pro file."}, {"owner": {"reputation": 29, "user_id": 10809754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8724014ce47f8e20bbf84a1934545dd?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/10809754/charles"}, "edited": false, "score": 0, "creation_date": 1545301131, "post_id": 53851227, "comment_id": 94580562, "body": "Thanks! I solved the problem by switching off the CLang code model and amend the C++11 -&gt; C++ 14 in my project file I will follow the rules next time. Sorry for that"}], "answers": [{"comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 1, "creation_date": 1596029760, "post_id": 63154244, "comment_id": 111678474, "body": "I appreciate your effort to make an answer for this from OPs comment. But please restrict to the answering part."}, {"owner": {"reputation": 21, "user_id": 4118300, "user_type": "registered", "profile_image": "https://graph.facebook.com/740325604/picture?type=large", "display_name": "Rome", "link": "https://stackoverflow.com/users/4118300/rome"}, "reply_to_user": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1596032554, "post_id": 63154244, "comment_id": 111680290, "body": "I just cited the guy above, to make clear  how he solved it. So other users have it easier to see the direct answer! Not everybody is looking through the comments.  Downvote is very uncool for this, in my opinion."}, {"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1596032978, "post_id": 63154244, "comment_id": 111680587, "body": "Downvote is not by me. When I &quot;appreciate&quot; I do not downvote."}], "tags": [], "owner": {"reputation": 21, "user_id": 4118300, "user_type": "registered", "profile_image": "https://graph.facebook.com/740325604/picture?type=large", "display_name": "Rome", "link": "https://stackoverflow.com/users/4118300/rome"}, "is_accepted": false, "score": 0, "last_activity_date": 1596029721, "last_edit_date": 1596029721, "creation_date": 1596027769, "answer_id": 63154244, "question_id": 53851227, "link": "https://stackoverflow.com/questions/53851227/qt-creator-error-when-include-boost-c-header/63154244#63154244", "title": "Qt Creator error when include boost C++ header", "body": "<p>I solved the problem by switching off the CLang code model and amend the C++11 -&gt; C++ 14 in my project file</p>\n<p>Charles Dec 20 '18 at 10:18</p>\n"}], "owner": {"reputation": 29, "user_id": 10809754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8724014ce47f8e20bbf84a1934545dd?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/10809754/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 312, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1596029721, "creation_date": 1545222299, "last_edit_date": 1592644375, "question_id": 53851227, "link": "https://stackoverflow.com/questions/53851227/qt-creator-error-when-include-boost-c-header", "title": "Qt Creator error when include boost C++ header", "body": "<p>I am new to Qt.\nI have a simple Widget application, and I try to link to boost C++,\nMy boost lib was built with MSVC all libboost files has &quot;msvc-140/141&quot; names\nI add the include path and lib path as shown in the graph below\n<img src=\"https://i.stack.imgur.com/AOjk3.jpg\" alt=\"my pro file\" />\nthen I go to my header file of the mainwindow and include the boost thread and signals headers, then the Qt creator pop up an warning:\n&quot;The code model could not parse an included file, which might....&quot;\nBut strange thing happens from here\nafter I added the include files and turn back to source file\nI found <img src=\"https://i.stack.imgur.com/SAvtQ.jpg\" alt=\"mainwindow.cpp\" />\nI have never encountered this issue and I couldn't find solutions online.\nIs this due to the dynamic linking problem with boost C++?\n(I need boost because some of external dlls use boost signals/slots mechanism and I encountered the same issue when trying link with them. So I decided to make things simple to check if the link with boost fails in Qt)\nDoes anyone encounter this problem?</p>\n"}, {"tags": ["c++", "exception"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 3, "creation_date": 1545221629, "post_id": 53851000, "comment_id": 94549359, "body": "An exception is not the right choice for this issue."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545221867, "post_id": 53851000, "comment_id": 94549488, "body": "what you describe sound like a complete normal unexceptional case (wrong input - ask user again), exceptions are for exceptional cases (specifically cases where the code where the error occurs cannot recover from the error). Though your question is either too broad or opinion based"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1545226228, "post_id": 53851000, "comment_id": 94551861, "body": "The canonical approach: <a href=\"https://stackoverflow.com/questions/10828937/how-to-make-cin-take-only-numbers\" title=\"how to make cin take only numbers\">stackoverflow.com/questions/10828937/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1457, "user_id": 8815948, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b0f69dcdff68cb3df3bb410569cd49f3?s=128&d=identicon&r=PG&f=1", "display_name": "RAM", "link": "https://stackoverflow.com/users/8815948/ram"}, "is_accepted": true, "score": 0, "last_activity_date": 1545222723, "creation_date": 1545222723, "answer_id": 53851340, "question_id": 53851000, "link": "https://stackoverflow.com/questions/53851000/c-check-user-input/53851340#53851340", "title": "C++ check user input", "body": "<p>An exception is not a good solution. Exceptions are designed to handle exceptional events by allowing developers to brush their control flow below the proverbial rug while ensuring that any objects are destroyed in the process. </p>\n\n<p>Based on your scenario, you're only trying to handle events that are expected. More importantly, those events are a key part of your control flow.  Therefore, it makes no sense to try to hide an important part of your happy path.</p>\n\n<p>Nevertheless, standard C++ does include standard exceptions designed to represent exceptions caused by logic errors (i.e., <code>std::logic_error</code>), which include specializations for out of bounds values (i.e., <code>std::domain_error</code>, <code>std::length_error</code> and <code>std::out_of_range</code>) and also invalid arguments (i.e., <code>std::invalid_error</code>).  However, keep in mind that these exceptions are designed to be used to represent exceptional events, and not your main control flow.</p>\n"}, {"tags": [], "owner": {"reputation": 85, "user_id": 7857238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aw76M.jpg?s=128&g=1", "display_name": "Giacomo Pellicci", "link": "https://stackoverflow.com/users/7857238/giacomo-pellicci"}, "is_accepted": false, "score": -1, "last_activity_date": 1545225519, "creation_date": 1545225519, "answer_id": 53852093, "question_id": 53851000, "link": "https://stackoverflow.com/questions/53851000/c-check-user-input/53852093#53852093", "title": "C++ check user input", "body": "<p>I think you can find this answer interesting:\n<a href=\"https://stackoverflow.com/questions/11310898/how-do-i-get-the-type-of-a-variable\">Similar question</a></p>\n\n<p>Just check if the type is the one you desire, and then do the necessary operation i.e. re-asking the user to insert data.</p>\n"}], "owner": {"reputation": 13, "user_id": 9614022, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb0c31285aa87da0761b043a6d623ca?s=128&d=identicon&r=PG&f=1", "display_name": "Elad", "link": "https://stackoverflow.com/users/9614022/elad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 53851340, "answer_count": 2, "score": -4, "last_activity_date": 1545225519, "creation_date": 1545221501, "question_id": 53851000, "link": "https://stackoverflow.com/questions/53851000/c-check-user-input", "title": "C++ check user input", "body": "<p>I would like to receive two ints, one after the other, \nand make sure the user input is an int. If they aren't ints, \nI would like to allow the user to enter new input.\nIs an Exception a good solution here? If so, what exception should I use?</p>\n"}, {"tags": ["c++", "pthreads"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1545221315, "post_id": 53850888, "comment_id": 94549204, "body": "No, &quot;if decrypted&quot; it means &quot;<code>std::thread</code>&#39;s destructor was called while the execution thread was still running&quot;."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545221352, "post_id": 53850888, "comment_id": 94549224, "body": "I can&#39;t quite follow this. Can you show us the actual problematic code? It appears that you&#39;ve posted working code then vaguely described two ways of breaking it but it would be better if you presented a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that clearly shows the problem and asks a question about it."}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "edited": false, "score": 0, "creation_date": 1545221481, "post_id": 53850888, "comment_id": 94549287, "body": "Yes I realise it, see the last paragraph. But the error message is spotty, the code above can also work well by itself. I would just want to know the meaning of the message, I am not a C++ library writer, I do not know the lingo."}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1545221584, "post_id": 53850888, "comment_id": 94549337, "body": "@Sam Varshavchik, thanks for the hint, I am analysing it now. I will post later."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545221796, "post_id": 53850888, "comment_id": 94549446, "body": "You should reset the shared_ptr in <code>unspin</code> and detect a call to <code>unspin</code> without a prior call to <code>spin</code>."}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1545222101, "post_id": 53850888, "comment_id": 94549603, "body": "@Sam, how can <code>std::thread</code>&#39;s destructor be called within a method of <code>Timer</code>, if <code>shared_ptr&lt;thread&gt; loop</code> is a field of <code>Timer</code>, and I do not nullify the pointer in any way?"}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545222529, "post_id": 53850888, "comment_id": 94549830, "body": "@DavidSchwartz, resetting it causes <code>terminate called without an active exception</code>. By the way, why should I do this?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545222618, "post_id": 53850888, "comment_id": 94549874, "body": "@scriptfoo Because if you don&#39;t, two consecutive calls to <code>unspin</code> will cause the very problem you&#39;re describing. Same with two consecutive calls to <code>spin</code>. I hope your real code has checks for these kinds of things because if not this code will be impossible to debug. If code calls <code>spin</code> and then calls <code>spin</code> again without calling <code>unspin</code>, what happens to the thread created in the first call to <code>spin</code>?"}, {"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1545222919, "post_id": 53850888, "comment_id": 94550035, "body": "@DavidSchwartz Yes, there are two consecutive calls to <code>unspin</code>, an effect of another bug. So the error is an effect of calling join() twice. Thanks David!"}], "answers": [{"comments": [{"owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "edited": false, "score": 0, "creation_date": 1545221861, "post_id": 53850979, "comment_id": 94549483, "body": "Yes, I guess they are not cryptic if you know the C++ lingo. But I don&#39;t, and my debugger introduces an &quot;error of measurement&quot;, that is, the error message is probably an effect of some spotty race condition."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "edited": false, "score": 0, "creation_date": 1545221997, "post_id": 53850979, "comment_id": 94549543, "body": "@scriptfoo Naturally, anything is cryptic before you know what it means, but I mean in the context of C++ it&#39;s actually a sensible output and you&#39;ll realise that when you do know what it means ;) And, yes, using the debugger isn&#39;t foolproof but it&#39;s always a good start, and in this case will point you to the problematic line of code reliably within seconds (then you confirm with documentation). Don&#39;t assume that it won&#39;t be able to help you until you find that it can&#39;t."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1545221753, "last_edit_date": 1545221753, "creation_date": 1545221429, "answer_id": 53850979, "question_id": 53850888, "link": "https://stackoverflow.com/questions/53850888/meaning-of-c-pthread-join-error-message-what-invalid-argument/53850979#53850979", "title": "Meaning of C++/pthread/join error message &quot;what(): Invalid argument&quot;", "body": "<p>The possible causes for something to throw <code>std::system_error</code> (with <code>EINVAL</code>, as here, or with some other value) are numerous.</p>\n\n<p>You could either:</p>\n\n<ol>\n<li>Google for instances of <code>std::system_error</code> on cppreference.com, or</li>\n<li>Instruct your debugger to break on throw, then you can see exactly what's caused an exception to be thrown &mdash; then go to the documentation for that thing and read why it would throw.</li>\n</ol>\n\n<p>These messages aren't cryptic <em>per se</em>, they're just indirect oweing to the way the whole C++ ecosystem works. Could it have been designed to call some specific \"terminate\" function solely reserved for the case where you forget to join a thread? Sure.</p>\n\n<p>But that would be really unwieldy, bulking up the size of the runtime module, for not really any gain. As you write more code you will gain experience and start just remembering or \"feeling\" what sort of things can cause what sort of problems. Anything about <code>std::system_error</code> or <code>std::terminate</code> in multi-threaded code is <em>almost certainly</em> something to do with improper handling of said threads. You just get to know that after a while.</p>\n\n<p>In this case you can memorise the two following explanations:</p>\n\n<blockquote>\n  <p>terminate called without an active exception</p>\n</blockquote>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/thread/thread/~thread\" rel=\"nofollow noreferrer\">Something</a> called <code>std::terminate</code> directly. Again, you can search for utterances of this in library documentation and find out possible causes that relate to your code.</p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of 'std::system_error'</p>\n</blockquote>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow noreferrer\">An exception was thrown</a>, but you have no <code>try</code>/<code>catch</code> in your program that caught it, so <code>std::terminate</code> was invoked by the exceptions system. Again, you can research what features you're using can throw <code>std::system_error</code>, and also consider adding some exception safety to your code while you're at it.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1545244119, "creation_date": 1545244119, "answer_id": 53857226, "question_id": 53850888, "link": "https://stackoverflow.com/questions/53850888/meaning-of-c-pthread-join-error-message-what-invalid-argument/53857226#53857226", "title": "Meaning of C++/pthread/join error message &quot;what(): Invalid argument&quot;", "body": "<p>This code, in its current form, cannot reasonably be debugged. This is because it has interface rules (such as not calling <code>spin</code> twice in a row) that are not detected by the code. This makes the code very hard to test, debug, and maintain. </p>\n\n<p>It can even make the code hard to understand because these requirements probably aren't documented anywhere in code or in text. For the future:</p>\n\n<ol>\n<li><p>Make your code detect these kinds of violations of its interface requirements so that you can easily find and fix them. This is easy here. The <code>unspin</code> function can <code>reset</code> the <code>shared_ptr</code>. The <code>spin</code> function can check that the <code>shared_ptr</code> is unseated.</p></li>\n<li><p>Make unit tests that test all the correct and incorrect interface accesses so you can debug this code on its own and also make sure the detection of incorrect access patterns works right. One of the unit tests should call <code>spin</code> twice in a row and make sure it returns the right error or throws the right exception. This also serves as code that documents what will and won't work with the interface to the class.</p></li>\n<li><p>If you encounter a problem you can't fix, the code and unit test can then stand alone to show the issue, and you'll know exactly what aspect of the code is failing.</p></li>\n</ol>\n\n<p>This also makes the code maintainable. If someone wants to re-implement this code, add a feature, or optimize it, they have the unit test to make sure they didn't break any of its behavior that other code is expected to rely on.</p>\n"}, {"tags": [], "owner": {"reputation": 154, "user_id": 4329358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65e091afbd41cbcbe0f0f81392e571ae?s=128&d=identicon&r=PG", "display_name": "Daisuke Aramaki", "link": "https://stackoverflow.com/users/4329358/daisuke-aramaki"}, "is_accepted": true, "score": 1, "last_activity_date": 1605016539, "creation_date": 1605016539, "answer_id": 64770290, "question_id": 53850888, "link": "https://stackoverflow.com/questions/53850888/meaning-of-c-pthread-join-error-message-what-invalid-argument/64770290#64770290", "title": "Meaning of C++/pthread/join error message &quot;what(): Invalid argument&quot;", "body": "<p>In my particular case, the exception was thrown because the thread had already been joined. Check <a href=\"https://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow noreferrer\">joinable</a> before joining.</p>\n"}], "owner": {"reputation": 343, "user_id": 8564676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88800e660ef09b501bc5fdc939ae75ea?s=128&d=identicon&r=PG&f=1", "display_name": "scriptfoo", "link": "https://stackoverflow.com/users/8564676/scriptfoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2782, "favorite_count": 0, "accepted_answer_id": 64770290, "answer_count": 3, "score": 0, "last_activity_date": 1605016539, "creation_date": 1545221129, "last_edit_date": 1565633597, "question_id": 53850888, "link": "https://stackoverflow.com/questions/53850888/meaning-of-c-pthread-join-error-message-what-invalid-argument", "title": "Meaning of C++/pthread/join error message &quot;what(): Invalid argument&quot;", "body": "<p>It is a part of a larger application, a simple timer thread, which works correctly before an attempt to finish it:</p>\n\n<pre><code>boost::asio::io_service io_service;\nshared_ptr&lt;thread&gt; loop;\n// it is not initialised here, just shows the idea\nboost::asio::deadline_timer timer(io_service, interval);\n\nvoid Timer::spin() {\n    loop = make_shared&lt;thread&gt;(&amp;Timer::run, this);\n}\nvoid Timer::unspin() {\n    io_service.stop();\n    loop.get()-&gt;join();\n}\nvoid run() {\n   timer.async_wait(bind(&amp;Timer::callbackWrapper, this, _1));\n   // restart\n   io_service.run();    \n}\n</code></pre>\n\n<p>The thread created in <code>spin</code> is in theory terminated and joined in <code>unspin()</code>. In case when the application ends with <code>join()</code> commented out, there in an error message</p>\n\n<pre><code>terminate called without an active exception\n</code></pre>\n\n<p>which, if I \"decrypted\" it well, means \"main thread finished when some other threads are still running\" (I do not know the C++ lingo.)</p>\n\n<p>If, in turn, <code>unspin()</code> is called, the following <em>spotty</em> error message may show:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::system_error'\n  what():  Invalid argument\n</code></pre>\n\n<p>which is most probably thrown by <code>thread.join()</code>. The problem is, I searched around Stackexchange, but could not explain the other message. I realise that the problem can be outside the small fragment of code (the application is rather large, so I do not include it). But even if it is so, I would just ask for the meaning of the second error message and its <em>possible</em> causes.</p>\n"}, {"tags": ["c++", "networking"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545220490, "post_id": 53850484, "comment_id": 94548744, "body": "What sort of packets?"}, {"owner": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545221897, "post_id": 53850484, "comment_id": 94549500, "body": "TCP connection and custom binary data"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545222367, "post_id": 53850484, "comment_id": 94549743, "body": "Please be less vague. <i>What sort of packets?</i> Hand-constructed TCP packets? Individual TCP/IP packets with a flat payload? Or &quot;packets&quot; in some proprietary protocol that sits on top of TCP/IP? What? This is important because if you&#39;re not literally sending &quot;a TCP/IP packet&quot; but have some other notion of &quot;packet&quot; then TCP/IP may not be behaving the way you think it does. Don&#39;t forget, it wants to form full TCP/IP packets and it wants to use buffering to maximise overall throughput."}, {"owner": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545231330, "post_id": 53850484, "comment_id": 94554977, "body": "Hi, sorry. I will try to be more specific. I have protobuf over TCP/IP I&#39;m sending packets in two steps: header and body (not TCP, but header and body of my protocol&#39;s meassge)."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1545234577, "post_id": 53850484, "comment_id": 94557134, "body": "Okay, so there&#39;s no particular relationship to TCP/IP packets, and David is probably correct."}], "answers": [{"comments": [{"owner": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "edited": false, "score": 0, "creation_date": 1545232252, "post_id": 53851247, "comment_id": 94555521, "body": "Thank you for answer. But in this case my handmade-RTT should be increased as well. But it&#39;s about 1 ms. Also this TCP RTT have a direct correlation with count of packets that I&#39;m sending. So If I will send 80 packets I will have about 20 ms TCP RTT. So I can&#39;t clearly state that this is certainly delayed ACK. Nagle algorithm is off. Buf when I&#39;m turning it on I can see that TCP RTT dropping on half to 20 ms."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "edited": false, "score": 0, "creation_date": 1545234590, "post_id": 53851247, "comment_id": 94557145, "body": "@AlanirAlonedaw How is this handmade RTT constructed? How do you know it&#39;s reliable?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "edited": false, "score": 0, "creation_date": 1545234618, "post_id": 53851247, "comment_id": 94557164, "body": "@AlanirAlonedaw The 40ms delay isn&#39;t for all packets ever. It&#39;s for when there is an underflow. If you send enough data to fill a TCP/IP packet, you don&#39;t underflow. This is a feature!"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1545222379, "creation_date": 1545222379, "answer_id": 53851247, "question_id": 53850484, "link": "https://stackoverflow.com/questions/53850484/small-count-of-packets-leading-to-high-rtt-values/53851247#53851247", "title": "Small count of packets leading to high RTT values", "body": "<p>40ms is the ACK delay on Linux. Here's what's happening:</p>\n\n<ol>\n<li>Side A sends a packet with less data than the packet can hold.</li>\n<li>Side B receives it and sets a 40ms ACK timer.</li>\n<li>Side A's application calls <code>send</code>. But a packet is not sent because it is less data than the packet can hold and the last packet contains less data than the packet can hold. So the implementation waits to see if it can fit more data in the packet to avoid wasting network bandwidth.</li>\n<li>The 40ms timer expires and side B sends an ACK.</li>\n<li>Side A responds to the ACK by aborting its delay and sending the data it delayed now.</li>\n</ol>\n\n<p>There are probably very good ways around this, but we'd need to know a lot more about your protocol and your actual requirements to make useful suggestions. Do not disable Nagle. That's almost always the worst \"solution\".</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1547496171, "creation_date": 1547496171, "answer_id": 54188384, "question_id": 53850484, "link": "https://stackoverflow.com/questions/53850484/small-count-of-packets-leading-to-high-rtt-values/54188384#54188384", "title": "Small count of packets leading to high RTT values", "body": "<p>Delayed acknowledgment of packets is the answer. Less packets you will get.</p>\n"}], "owner": {"reputation": 132, "user_id": 927209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/119d1c0177d8ccf081fc169c376ad32d?s=128&d=identicon&r=PG", "display_name": "Alanir Alonedaw", "link": "https://stackoverflow.com/users/927209/alanir-alonedaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547496171, "creation_date": 1545219647, "last_edit_date": 1545221861, "question_id": 53850484, "link": "https://stackoverflow.com/questions/53850484/small-count-of-packets-leading-to-high-rtt-values", "title": "Small count of packets leading to high RTT values", "body": "<p>I have a pretty simple client/server application (TCP). 1 instance is sending 40 packets (smoothly distributed through 1 second) with around 1500 bytes data (part of data is timestamp). 2 instance is receiving these packets and sending back another packets with initial timestamp.\nNow in 1 instance I'm measuring difference between current timestamp and timestamp from packets. So I'm getting somekind of handmade-RTT.\nAlso additionally I'm taking TCP RTT value for sockets with getsockopt and I see clearly:</p>\n\n<ul>\n<li><p>My RTT showing me values around 1 ms (which is expected at such low rate of packets)</p></li>\n<li><p>TCP RTT showing me ~40ms\nAnd I don't get it why. I know exactly that I'm receiving my packets early than 40 ms.</p></li>\n</ul>\n\n<p>Also, If I will increase packets count from 40 to 600 for example, I will catch TCP RTT as ~150 mcs which is expected for my configuration.</p>\n\n<p>Can anyone explain me this 40 ms from kernel side on low packets count?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "qt", "delete-file"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545219426, "post_id": 53850342, "comment_id": 94548192, "body": "<i>Basically I have a directory in which I want X elements at most to be stored, and after that every files added must trigger the removal of the oldest stored element</i> -- In other words, an <a href=\"https://stackoverflow.com/questions/2504178/lru-cache-design\">LRU Cache</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545219428, "post_id": 53850342, "comment_id": 94548193, "body": "why is sorting the files system time dependent? earlier time should be earlier, no matter what is the current time"}, {"owner": {"reputation": 54, "user_id": 4422181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faa078e329c55a712ae7332d453bc4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/4422181/ice"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545219733, "post_id": 53850342, "comment_id": 94548336, "body": "@user463035818: I am on a linux embedded system and I think that time information in the file inodes are system time dependent since they are chaning accordingly to that."}, {"owner": {"reputation": 54, "user_id": 4422181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faa078e329c55a712ae7332d453bc4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/4422181/ice"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1545228652, "post_id": 53850342, "comment_id": 94553359, "body": "@PaulMcKenzie: this might actually be a very good pointer, thank you."}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "edited": false, "score": 0, "creation_date": 1545238927, "post_id": 53850342, "comment_id": 94559730, "body": "if you have the logrotate package on your embedded Linux it can be useful."}], "answers": [{"tags": [], "owner": {"reputation": 189, "user_id": 5245916, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/889acd29350258819c1485cda3c06f50?s=128&d=identicon&r=PG&f=1", "display_name": "Naumann", "link": "https://stackoverflow.com/users/5245916/naumann"}, "is_accepted": false, "score": 0, "last_activity_date": 1550597294, "last_edit_date": 1550597294, "creation_date": 1549383340, "answer_id": 54538636, "question_id": 53850342, "link": "https://stackoverflow.com/questions/53850342/deleting-items-in-a-folder-after-x-elements-from-oldest-in-qt/54538636#54538636", "title": "Deleting items in a folder after X elements, from oldest, in Qt", "body": "<p>1) You may use epoch time as part of your file name instead of using an arbitrary increment variable that will never resets or reused obviously.</p>\n\n<p>2) You may use QFileInfo, like you may change your existing logic as</p>\n\n<pre><code>QFileInfoList files = dir.entryInfoList(QDir::Files | QDir::NoDotAndDotDot, QDir::Time | QDir::Reversed);\nconst int  MAX_NUM_FILES_TO_RETAIN = 10\n\nfor(int index = files.size(); index &gt; MAX_NUM_FILES_TO_RETAIN; --index)\n{\n     const QFileInfo&amp; info = files.at(index -1);\n     QFile::remove(info.absoluteFilePath());\n}\n</code></pre>\n\n<p>The code will remove the older files while keeping the recent 10 files.</p>\n"}], "owner": {"reputation": 54, "user_id": 4422181, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faa078e329c55a712ae7332d453bc4c5?s=128&d=identicon&r=PG&f=1", "display_name": "Ice", "link": "https://stackoverflow.com/users/4422181/ice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550597294, "creation_date": 1545219168, "question_id": 53850342, "link": "https://stackoverflow.com/questions/53850342/deleting-items-in-a-folder-after-x-elements-from-oldest-in-qt", "title": "Deleting items in a folder after X elements, from oldest, in Qt", "body": "<p>Basically I have a directory in which I want X elements at most to be stored, and after that every files added must trigger the removal of the oldest stored element. So I thought to order them by Time in QFileInfoList but sadly this becomes system time dependent (if the user turns the clock by Y hours the latest files added will be considered th oldest and thus removed). This is what I've written so far with the problem of system time in it:</p>\n\n<pre><code>void namespace::cleanStationLogoDir()\n{\n    QDir dir(DIR);\n    if(!dir.exists())\n    {\n        //Create directory\n        if(dir.mkpath(DIR))\n        {\n            //Ok result\n        }\n        else\n        {\n            qDebug() &lt;&lt; \"Unable to create dir.\";\n        }\n    }\n\n    QFileInfoList files = dir.entryInfoList(QDir::Files | QDir::NoDotAndDotDot, QDir::Time);\n    qDebug() &lt;&lt; \"files size: \" &lt;&lt; files.size();\n\n    while(files.size() &gt; X)\n    {\n        qDebug() &lt;&lt; \"Removed last element\" &lt;&lt; files.last().filePath();\n        dir.remove(files.takeLast().filePath());\n        qDebug() &lt;&lt; \"files size: \" &lt;&lt; logo_files.size();\n    }\n}\n</code></pre>\n\n<p>Do you know any other way to do this? I considered adding an incremental ID to the name of the files while I store them but after max_INT files this could turn out to be a roblem, or if I wrap the IDs to X elements then I'm not sure which to remove on the next file received.</p>\n"}, {"tags": ["c++", "c", "linux", "multithreading", "signals"], "comments": [{"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 3, "creation_date": 1545218993, "post_id": 53850202, "comment_id": 94547985, "body": "Your code invokes undefined behavior.  Per <a href=\"https://port70.net/~nsz/c/c11/n1570.html#note188\" rel=\"nofollow noreferrer\">footnote 183 of the C standard</a>: &quot;Thus, a signal handler cannot, in general, call standard library functions.&quot;  <a href=\"http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04_03\" rel=\"nofollow noreferrer\">POSIX allows the calling of async-signal-safe functions from within a signal handler</a>.  Using <code>cout</code> and calling <code>sleep()</code> are not async-signal-safe."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1545219812, "post_id": 53850202, "comment_id": 94548383, "body": "You don&#39;t want to have to handle signals that way. Not ever."}, {"owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 1, "creation_date": 1545220786, "post_id": 53850202, "comment_id": 94548916, "body": "<a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man7/signal.7.html</a>"}, {"owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1545268599, "post_id": 53850202, "comment_id": 94570521, "body": "@AndrewHenle  Yes, you are right. But I need to print something to debug, so I think I have no choice. Using non-reentrant functions in signal handler can be undefined behavior. At least for the code above, it works as expected."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 1, "creation_date": 1545301980, "post_id": 53850202, "comment_id": 94580979, "body": "@Yves On a POSIX system: <code>write( STDOUT_FILENO, buffer, strlen( buffer ) );</code>  Or <code>STDERR_FILENO</code>, if you prefer.  Build a C-style string, then use <code>write()</code>."}, {"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1546431093, "post_id": 53850202, "comment_id": 94848764, "body": "On Linux specifically, you might consider <a href=\"http://man7.org/linux/man-pages/man2/signalfd.2.html\" rel=\"nofollow noreferrer\">signalfd(2)</a>. However, it does have shortcomings (STFW)"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1545219980, "last_edit_date": 1545219980, "creation_date": 1545218756, "answer_id": 53850246, "question_id": 53850202, "link": "https://stackoverflow.com/questions/53850202/signal-handler-and-multithreading/53850246#53850246", "title": "signal handler and multithreading", "body": "<blockquote>\n  <p>So signal only interrupt thread instead of the whole process if there are multi-threading?</p>\n</blockquote>\n\n<p>Yes. A signal interrupts a single thread of execution. At least according to the POSIX standard. C standard itself doesn't specify behaviour of processes or threads.</p>\n\n<p>If a signal is generated for a multi threaded process as opposed to being generated for particular thread, the signal will be delivered to exactly one of the threads belonging to that process (unless the signal is blocked by all threads).</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 2, "last_activity_date": 1545218756, "creation_date": 1545218756, "answer_id": 53850247, "question_id": 53850202, "link": "https://stackoverflow.com/questions/53850202/signal-handler-and-multithreading/53850247#53850247", "title": "signal handler and multithreading", "body": "<p>No matter how many threads the process has, some thread catches the signal and runs the signal handler while the other threads (if any) go on about their business. The signal is sent to the process, but what the process does when it gets the signal is dependent on how the process, and the threads in, configured its signal handlers.</p>\n\n<p>The full rules are quite complicated and I think it's safe to say that very few programmers bother to full understand them and generally avoid signals except for very limited purposes. See <a href=\"https://docs.oracle.com/cd/E19455-01/806-5257/6je9h033a/index.html\" rel=\"nofollow noreferrer\">here</a> for more details.</p>\n"}, {"comments": [{"owner": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "edited": false, "score": 0, "creation_date": 1545923082, "post_id": 53851378, "comment_id": 94732422, "body": "+1 on your answer. Here&#39;s a couple ideas for improvements: mentioning the async-signal-safe <a href=\"http://man7.org/linux/man-pages/man2/getpid.2.html\" rel=\"nofollow noreferrer\"><code>getpid(2)</code></a> or <a href=\"http://man7.org/linux/man-pages/man3/pthread_self.3.html\" rel=\"nofollow noreferrer\"><code>pthread_self</code></a> functions to get idea of thread handler is being invoked for; mentioning how Ctrl-C is typically handled by a shell, process groups, and the <a href=\"http://man7.org/linux/man-pages/man2/kill.2.html\" rel=\"nofollow noreferrer\"><code>kill(2)</code></a> function with negative PIDs."}, {"owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "reply_to_user": {"reputation": 2361, "user_id": 7410358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b241c8238988d25da76f83adf9071201?s=128&d=identicon&r=PG&f=1", "display_name": "Louis Langholtz", "link": "https://stackoverflow.com/users/7410358/louis-langholtz"}, "edited": false, "score": 0, "creation_date": 1545924646, "post_id": 53851378, "comment_id": 94733057, "body": "Thanks... I will check them and see if I can improve it."}], "tags": [], "owner": {"reputation": 5339, "user_id": 1714692, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/bd72cbc200eb7c9aa507624f154b21a7?s=128&d=identicon&r=PG", "display_name": "Francesco Boi", "link": "https://stackoverflow.com/users/1714692/francesco-boi"}, "is_accepted": true, "score": 6, "last_activity_date": 1564760705, "last_edit_date": 1564760705, "creation_date": 1545222836, "answer_id": 53851378, "question_id": 53850202, "link": "https://stackoverflow.com/questions/53850202/signal-handler-and-multithreading/53851378#53851378", "title": "signal handler and multithreading", "body": "<p><strong>INTRODUCTION</strong></p>\n\n<p>First of all each thread has its own mask that specifies which signals it is listening to. When a thread is created it inherits the mask of the thread that is creating it (let me call it the <em>parent thread)</em> that is active when <code>pthread_create</code> is called. </p>\n\n<p>Generally it is better that if a thread is listening to a signal then the others should not, unless you want to have many threads that do the same stuff (for example when processing a connection request in a server to process many requests simultaneously). In this way you always know which thread is processing the signal. Otherwise you do not have any idea which thread is receiving the signal and which part of the program is executing: it becomes impossible to debug (an example is your own question). </p>\n\n<p>To <strong>change the mask</strong> of the <em>child thread</em> that is being created from the <em>parent thread</em> you create a new mask, you set it active, create a new thread with <code>pthread_create</code> and then in the <em>parent thread</em> set the previous mask active again (see the code at the end of the answer).</p>\n\n<p><strong>EDIT</strong>: According to <a href=\"https://stackoverflow.com/questions/231912/what-is-the-difference-between-sigaction-and-signal\">this post</a> it is better to use <code>sigaction()</code> instead of <code>signal</code>. In modern systems <code>signal()</code> is implemented with <code>sigaction()</code> so there should not be any difference. However if its old implementation is used, problems might arise.</p>\n\n<p><strong>ANSWER</strong></p>\n\n<blockquote>\n  <p>So signal only interrupt thread instead of the whole process if there\n  are multi-threading?</p>\n</blockquote>\n\n<p><strong>NO</strong>: Signals are just signals, they do not do anything. Actions associated to signals have the power to do stuff, including stopping the program or terminating the thread. Each signal has a default action associated and the default action for <code>SIGINT</code> is to interrupt the process.</p>\n\n<p>With you handler you are overwriting the default action. So it will not stop the program anymore but it will do what you have specified in the thread function.</p>\n\n<p>In the first case you have only one thread, the main one, which is an infinite loop, it always catches the signal as long as he is alive so that's why the behavior. If you resend the signal, the signal is momentarily blocked until the signal handler ends the execution. Nevertheless if many signals are sent while the handler is executing, you can loose some signals.\nIn fact as explained <a href=\"https://stackoverflow.com/questions/18442102/what-happens-when-a-signal-is-received-while-already-in-a-signal-handler\">here</a>, blocked signals are set to pending, but not queued. The term <em>pending</em> means that the operating system remembers that there is a signal waiting to be delivered at the next opportunity by setting a flag, and <em>not queued</em> means that it does this by setting a flag somewhere, but not by keeping an exact record of how many signals have arrived.\nSo if the signals is sent once, 5 times or more (try to press CTRL+C more times with your program: I have tried) while the signal handler is executing it produces the exactly same behaviour.</p>\n\n<p>In your second case you have 3 threads: the <code>main</code> one, <code>t1</code>, and <code>t2</code>: all of them are enabled to see the signal <code>SIGINT</code> and all of them have associated the same signal handler. If you press 3 times one after the other all three of them will execute the handler: that is why you don't see any delay. If you press very very fast though and more than 3 times (the number of threads listening to that signal) I think you will see something similar to the first behaviour.</p>\n\n<p>I will end my answer with <a href=\"https://stackoverflow.com/questions/48612546/how-to-terminate-threads-cleanly-in-c\">the code I posted in a question</a> where I was setting masks so that some signals were caught only by the main thread:</p>\n\n<pre><code>int main()\n{\n    int err;\n    sigset_t omask, mask;\n    pthread_t thread_motionSensor;\n    pthread_t thread_tempReading;\n    pthread_t thread_platformPost;\n\n    printf(\"Created threads IDs\\n\");\n\n    ...\n    if (signal(SIGINT, sig_handler)==SIG_ERR)\n        printf(\"Error on recording SIGINT HANDLER\\n\");\n\n    /*Create a new mask to block all signals for the following thread*/\n    sigfillset(&amp;mask);\n    pthread_sigmask(SIG_SETMASK, &amp;mask, &amp;omask);\n    printf(\"Trying to create threads\\n\");\n    if ((err = pthread_create (&amp;thread_motionSensor, NULL, task1, NULL))!=0)\n    {\n    printf(\"Thread 1 not created: error %d\\n\", err);\n        err_exit((const char)err, \"pthread_create error\");\n    }\n    printf(\"Thread 1 created. Trying to create Thread 2\\n\");\n    if((err = pthread_create (&amp;thread_tempReading,   NULL, task2, NULL))!=0)\n    {\n    printf(\"Thread 2 not created: error %d\\n\", err);\n        err_exit((const char)err, \"pthread_create error\");\n    }\n    printf(\"Thread 2 created. Trying to create Thread 3\\n\");\n    if ((err = pthread_create (&amp;thread_platformPost, NULL, task3, NULL))!=0)\n    {\n     printf(\"Thread 3 not created: error %d %d\\n\", err);\n         err_exit((const char)err, \"pthread_create error\");\n    }\n    printf(\"Thread 3 created\\n\");\n    /*The main thread must block the SIGALRM but catch SIGINT\n    SIGQUIT, SIGTERM, SIgkILL*/\n    /*empty the omask set from all signals */\n    sigemptyset(&amp;omask);\n    /*add the signals to the omask*/\n    sigaddset(&amp;omask, SIGINT);\n    sigaddset(&amp;omask, SIGQUIT);\n    sigaddset(&amp;omask, SIGKILL);\n    sigaddset(&amp;omask, SIGTERM);\n    /*unblock all signals in omask*/\n    pthread_sigmask(SIG_UNBLOCK, &amp;omask, NULL);\n    printf(\"Main thread waiting for signal\\n\");\n    /*pause will stop the main thread until any signal not blocked by omask will be received*/\n    pause();\n    printf(\"Exit signal received: cancelling threads\\n\");\n\n    pthread_cancel(thread_motionSensor);\n    pthread_cancel(thread_tempReading);\n    pthread_cancel(thread_platformPost);\n    pthread_join(thread_motionSensor, NULL);\n    pthread_join(thread_tempReading,  NULL);\n    pthread_join(thread_platformPost, NULL);\n    printf(\"Exiting from main thread and process\\n\");\n    exit(0);\n}\n</code></pre>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1371, "favorite_count": 1, "accepted_answer_id": 53851378, "answer_count": 3, "score": 2, "last_activity_date": 1564760705, "creation_date": 1545218541, "question_id": 53850202, "link": "https://stackoverflow.com/questions/53850202/signal-handler-and-multithreading", "title": "signal handler and multithreading", "body": "<p>I know that signal is a way of communication between CPU and OS kernel. A signal can interrupt the sequence of instructions, execute the handler and go back to the sequence of instructions.</p>\n\n<p>Here is a piece of description of this <a href=\"https://www.ibm.com/developerworks/library/l-reent/index.html\" rel=\"nofollow noreferrer\">link</a>:</p>\n\n<blockquote>\n  <p>When a signal that is being caught is handled by a process, the normal\n  sequence of instructions being executed by the process is temporarily\n  interrupted by the signal handler. The process then continues\n  executing, but the instructions in the signal handler are now\n  executed. If the signal handler returns, the process continues\n  executing the normal sequence of instructions it was executing when\n  the signal was caught.</p>\n</blockquote>\n\n<p>Here is my test:</p>\n\n<pre><code>void func(int p)\n{\n    cout&lt;&lt;\"int\"&lt;&lt;endl;\n    sleep(5);\n}\n\nint main()\n{\n    signal(SIGINT, func);\n    while(1)\n    {\n        cout&lt;&lt;\"main\"&lt;&lt;endl;\n        sleep(2);\n    }   \n    return 0;\n}\n</code></pre>\n\n<p>I execute it and if I press <code>ctrl+C</code>, <code>int</code> will be printed and then I have to wait for 5 seconds, no matter how many times <code>ctrl+C</code> I pressed while waiting for the 5 seconds, nothing happened.</p>\n\n<p>Then I make another test:</p>\n\n<pre><code>void func(int p)\n{\n    cout&lt;&lt;\"int\"&lt;&lt;endl;\n    sleep(5);\n}\n\nint main()\n{\n    signal(SIGINT, func);\n    thread t1([](){while(1){cout&lt;&lt;\"t1\"&lt;&lt;endl; sleep(2);}});\n    thread t2([](){while(1){cout&lt;&lt;\"t2\"&lt;&lt;endl; sleep(2);}});\n    t1.join();\n    t2.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>For this code, I found that I could press <code>ctrl+C</code> three times continually and three <code>int</code> would be printed, then I have to wait for about 5 seconds.</p>\n\n<p>So it seems that the first <code>ctrl+C</code> interrupts the <code>t1</code> thread, the second interrupts the <code>t2</code> thread and the third interrupts the main thread.</p>\n\n<p>So signal only interrupt thread instead of the whole process if there are multi-threading?</p>\n"}, {"tags": ["c++", "stream"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1545218787, "post_id": 53850176, "comment_id": 94547879, "body": "the file format does not match the code. You first read the <code>[error]</code> but the file has first a date"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545219884, "post_id": 53850176, "comment_id": 94548423, "body": "a,b and c are not read, nor initialized, there are your &#39;random&#39; numbers"}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545220529, "post_id": 53850685, "comment_id": 94548765, "body": "string until whitespace is &quot;Wed&quot; only, no?"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545220658, "post_id": 53850685, "comment_id": 94548834, "body": "yes &gt;&gt; string reads up to a separator. It is not the best way to do because at the end of the line the number of word is variable, better to read all the line in a string then extract  expected sub strings"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545220707, "post_id": 53850685, "comment_id": 94548866, "body": "@bruno disagree whith what you say. Simply use <code>]</code> as seperator and it should work"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1545221038, "post_id": 53850685, "comment_id": 94549052, "body": "@user463035818 we cannot agree all the time, we have each our preferences :)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "edited": false, "score": 0, "creation_date": 1545221643, "post_id": 53850685, "comment_id": 94549365, "body": "@bruno sure, some ppl think disagreement is something bad. imho it would be terrible if everybody would agree on everything all the time ;)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1545222164, "post_id": 53850685, "comment_id": 94549635, "body": "Technically they&#39;re not just &quot;random numbers&quot;, the values are unspecified (not arbitrary, unspecified!) and reading them has undefined behaviour and thus the entire thing is literally meaningless. But you&#39;re right that in practice you&#39;re just going to see &quot;gumpf&quot; as a result with no other side effects"}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 0, "last_activity_date": 1545222089, "last_edit_date": 1545222089, "creation_date": 1545220426, "answer_id": 53850685, "question_id": 53850176, "link": "https://stackoverflow.com/questions/53850176/printing-out-selected-data-from-a-txt-file-in-c/53850685#53850685", "title": "Printing out selected data from a .txt file in c++", "body": "<p>Your variables are not initialized. At the beginning each variable can contain each possible value. In line </p>\n\n<pre><code>in &gt;&gt; ch &gt;&gt; er &gt;&gt; ch;\n</code></pre>\n\n<p>you read one char, one string and one char again.</p>\n\n<p>The first line of your file is </p>\n\n<pre><code>[Wed Oct 11 2017] [error] [127.0.0.1] -client denied.\n</code></pre>\n\n<p>So first you read the first char <code>ch = '[</code> and set the cursor to the next position. Next you read a string until whitespace: <code>er = \"Wed\"</code>. Next you read again a char <code>ch = 'O'</code></p>\n\n<p>The cursor now points to</p>\n\n<pre><code>[Wed Oct 11 2017] [error] [127.0.0.1] -client denied.\n      ^\n</code></pre>\n\n<p>Then you print your data. As you didn't read the variables you get random numbers.</p>\n\n<p>The output of</p>\n\n<pre><code>cout &lt;&lt; ch &lt;&lt; er &lt;&lt; ch &lt;&lt; ch &lt;&lt; a &lt;&lt; x &lt;&lt; b &lt;&lt; x &lt;&lt; b &lt;&lt; c &lt;&lt; ch;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>OWedOOXCYCYZO\n</code></pre>\n\n<p>where X Y and Z are random interger numbers and C is a random character.</p>\n\n<p>You should instead read the whole line and parse it (e.g. split at ']'). You should initialize and/or read all your variables. <code>x, a, b, c</code> are not set. It is not possible to say which values they contain.</p>\n\n<p>This is a possible solution to read the log entry.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;sstream&gt;\n\nusing namespace std;\n\nint main (){\n    stringstream in(\"[Wed Oct 11 2017] [error] [127.0.0.1] -client denied.\\n[Thu Oct 12 2017] [alert] [127.0.0.2] -user name not found.\");\n    string line;\n    getline(in, line);\n    int startpos = line.find('[') + 1;\n    int endpos = line.find(']');\n    string date(line.substr(startpos, endpos-startpos));\n    cout &lt;&lt; \"Date:\\t\\t\" &lt;&lt; date &lt;&lt; endl;\n    startpos = line.find('[', endpos) + 1;\n    endpos = line.find(']', startpos);\n    string type(line.substr(startpos, endpos-startpos));\n    cout &lt;&lt; \"Type:\\t\\t\" &lt;&lt; type &lt;&lt; endl;\n    startpos = line.find('[', endpos) + 1;\n    endpos = line.find(']', startpos);\n    string ip(line.substr(startpos, endpos-startpos));\n    cout &lt;&lt; \"IP:\\t\\t\" &lt;&lt; ip &lt;&lt; endl;\n    string message(line.substr(endpos + 2));\n    cout &lt;&lt; \"Message:\\t\" &lt;&lt; message &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>Date:       Wed Oct 11 2017\nType:       error\nIP:         127.0.0.1\nMessage:    -client denied.\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10715793, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GPgvoJQ8EJw/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-g_01RgWGBZgOsioTXWgMydvMpDZg/mo/photo.jpg?sz=128", "display_name": "Jhazaline Johny", "link": "https://stackoverflow.com/users/10715793/jhazaline-johny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1545222089, "creation_date": 1545218426, "last_edit_date": 1545218969, "question_id": 53850176, "link": "https://stackoverflow.com/questions/53850176/printing-out-selected-data-from-a-txt-file-in-c", "title": "Printing out selected data from a .txt file in c++", "body": "<p>I wonder how can print out a selected data from a <code>.txt</code> file. </p>\n\n<p>For example this is my <code>input.txt</code> file content. The following sample data is in the form of <code>[date] [error_type] [ip_address]</code></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>[Wed Oct 11 2017] [error] [127.0.0.1] -client denied.\n[Thu Oct 12 2017] [alert] [127.0.0.2] -user name not found.\n</code></pre>\n\n<p>I was asked to write a code fragment that will printout the error_type and ip_address from file.\nThis is my code.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n\nusing namespace std;\n\nint main (){\n    ifstream in;\n    in.open(\"input.txt\");\n    char ch,x;   //ch=[ , x=.\n    string er;  //er=error\n    int a,b,c;  //a=127,b=0,c=1\n    in&gt;&gt;ch&gt;&gt;er&gt;&gt;ch;\n    cout&lt;&lt;ch&lt;&lt;er&lt;&lt;ch&lt;&lt;ch&lt;&lt;a&lt;&lt;x&lt;&lt;b&lt;&lt;x&lt;&lt;b&lt;&lt;c&lt;&lt;ch;\n    return 0;\n}\n</code></pre>\n\n<p>The problem with this code is it doesn't read the right data and only gave me random numbers.</p>\n\n<p>I hope anyone would lend me a hand cause I just learnt to code for 4 months. So,everything seems complicated to me.</p>\n"}, {"tags": ["c++", "c++11", "memory-layout"], "comments": [{"owner": {"reputation": 1721, "user_id": 5034140, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-H4LtHEu4ABU/AAAAAAAAAAI/AAAAAAAABfc/vgbjnSLypvo/photo.jpg?sz=128", "display_name": "Guillaume Gris", "link": "https://stackoverflow.com/users/5034140/guillaume-gris"}, "edited": false, "score": 0, "creation_date": 1545218904, "post_id": 53850100, "comment_id": 94547942, "body": "Your setup does not seem to match the definition of Standard layout. But maybe it&#39;s a case of the XY problem (<a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\" title=\"what is the xy problem\">meta.stackexchange.com/questions/66377/what-is-the-xy-probl&zwnj;&#8203;em</a>) What are you trying to achieve?"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": false, "score": 5, "last_activity_date": 1545218971, "last_edit_date": 1592644375, "creation_date": 1545218587, "answer_id": 53850211, "question_id": 53850100, "link": "https://stackoverflow.com/questions/53850100/warning-offset-of-on-non-standard-layout-type-derivedclass/53850211#53850211", "title": "warning: offset of on non-standard-layout type &#39;DerivedClass&#39;", "body": "<p>These are the requirements for standard layout type:</p>\n<blockquote>\n<p>All non-static data members have the same access control</p>\n<p>Has no virtual functions or virtual base classes</p>\n<p>Has no non-static data members of reference type</p>\n<p>All non-static data members and base classes are themselves standard layout types</p>\n</blockquote>\n<p>Until C++14:</p>\n<blockquote>\n<p>Either</p>\n<p>has no base classes with non-static data members, or</p>\n<p>has no non-static data members in the most derived class and at most one base class with non-static data members</p>\n<p>Has no base classes of the same type as the first non-static data member (see empty base optimization)</p>\n</blockquote>\n<p>This part applies to this example:</p>\n<pre><code>has no base classes with non-static data members,\n</code></pre>\n<p>In your case you have a base class with non static data members. Removing <code>a</code>  removes the warning.</p>\n<p>After C++14, there are similar constraints, you cannot have members in the two classes, only one:</p>\n<blockquote>\n<p>Has all non-static data members and bit-fields declared in the same class (either all in the derived or all in some base)</p>\n</blockquote>\n"}], "owner": {"reputation": 98, "user_id": 9652160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24559dd60c90ea7bc5da34497ec5c4e?s=128&d=identicon&r=PG&f=1", "display_name": "chm", "link": "https://stackoverflow.com/users/9652160/chm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1738, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1545219474, "creation_date": 1545218174, "last_edit_date": 1545219474, "question_id": 53850100, "link": "https://stackoverflow.com/questions/53850100/warning-offset-of-on-non-standard-layout-type-derivedclass", "title": "warning: offset of on non-standard-layout type &#39;DerivedClass&#39;", "body": "<p>I need to get rid of this warning. As far as I understand, it appears because DerivedClass is not considered as Plain Old Data. I read cppreference about <a href=\"https://en.cppreference.com/w/cpp/named_req/PODType\" rel=\"nofollow noreferrer\">POD</a> and <a href=\"https://en.cppreference.com/w/cpp/named_req/StandardLayoutType\" rel=\"nofollow noreferrer\">Standard Layout Type</a> but I still do not understand why DerivedClass is not a POD. If I put members of BaseClass into DerivedClass and do not use inheritance - then everything is OK. I use C++11</p>\n\n<p>Here is an example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass BaseClass\n{\npublic:\n    int a;\n};\n\nclass DerivedClass : public BaseClass\n{\npublic:\n    int b;\n};\n\nint main(int argc, char *argv[])\n{\n    // warning: offset of on non-standard-layout type 'DerivedClass'\n    int offset = offsetof(DerivedClass, b);\n\n    cout &lt;&lt; offset;\n}\n</code></pre>\n\n<p>I appreciate any help.</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1545216319, "post_id": 53849516, "comment_id": 94546567, "body": "You need to check if the file exists first and either append or not overwrite"}, {"owner": {"reputation": 2071, "user_id": 7478530, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cGr5i.png?s=128&g=1", "display_name": "Dragonthoughts", "link": "https://stackoverflow.com/users/7478530/dragonthoughts"}, "edited": false, "score": 1, "creation_date": 1545216337, "post_id": 53849516, "comment_id": 94546583, "body": "Welcome to SO. Please provide a Minimal, Complete, and Verifiable example. <b>Show us the code for your latest attempt</b> and where you got stuck. and explain why the result is not what you expected.  Edit your question to include the code, please don&#39;t add it in a comment, as it will probably be unreadable. <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>  It is better to show what is actually happening, rather than describing what you expect to happen.  Please include code and output as content for your question, not as pictures or external links."}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1545216329, "creation_date": 1545216329, "answer_id": 53849549, "question_id": 53849516, "link": "https://stackoverflow.com/questions/53849516/possible-to-store-data-into-text-file-permanently-in-c/53849549#53849549", "title": "Possible to store data into text file permanently in c++", "body": "<p>The behavior you are describing is called overwriting a file.</p>\n\n<p>You have two choices, if the file already exists:</p>\n\n<ol>\n<li>Append to already existing file. Read more in <a href=\"https://stackoverflow.com/questions/2393345/how-to-append-text-to-a-text-file-in-c\">How to append text to a text file in C++?</a></li>\n<li>Write the data to a different file.</li>\n</ol>\n"}], "owner": {"reputation": 1024, "user_id": 7240783, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7bb86a843e3ea85f3fc225c53bfd1117?s=128&d=identicon&r=PG&f=1", "display_name": "jose", "link": "https://stackoverflow.com/users/7240783/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1545217886, "creation_date": 1545216220, "last_edit_date": 1545217886, "question_id": 53849516, "link": "https://stackoverflow.com/questions/53849516/possible-to-store-data-into-text-file-permanently-in-c", "title": "Possible to store data into text file permanently in c++", "body": "<p>all I have a one small program in c++.I need to store some text in the .txt file it stored and file also created but again i run with some other data the previous data is deleted in .txt file, help anyone how to solve that problem i ask doubt is it possible in c++ yes/no.someone help!</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545217663, "post_id": 53849450, "comment_id": 94547333, "body": "Concerning Arduino and RTC, I googled <a href=\"https://www.google.com/search?q=arduino+rtc+precision\" rel=\"nofollow noreferrer\">arduino rtc precision</a> and found e.g. a discussion in the arduino forum <a href=\"https://forum.arduino.cc/index.php?topic=87846.0\" rel=\"nofollow noreferrer\">Accuracy of DS1307 Real Time Clock module</a>. At the first glance, it looks like you are not the only one with this issue. May be, the Arduino forum is the better place to ask for your issue."}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545217938, "post_id": 53849450, "comment_id": 94547461, "body": "My board is an MKR 1300 with an integrated RTC so I would assume that problem was not actually a problem here, +- accuracy every time would be okay by me, but to me this looks like it might be a coding issue, I just have no idea where. Also will edit post to add the board. Either way will also add a question to the arduino forum to see how well it fares."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545218503, "post_id": 53849450, "comment_id": 94547734, "body": "A possible programming issue could be floating point accuracy - your time values are all <code>byte</code> i.e. integral. Another issue could be that you lose periodically milliseconds by adding durations. If I understood your code right you increment the alarm time (by a certain amount) and set it to RTC again (for next &quot;wake up&quot;) i.e. working with time points. TLDR, the whole code looks (to me) not quite bad. If the alarms drift over time then I would bet on RTC inaccuracy."}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545218820, "post_id": 53849450, "comment_id": 94547896, "body": "Oh well, will keep on trying to figure this out, thanks for the help."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545218855, "post_id": 53849450, "comment_id": 94547917, "body": "How did you realize the time drift? Became it visible in the reported time stamps? Did you report the time stamps of the Arduino RTC? I just realized: Assuming that RTC has a certain inaccuracy, it still should wake-up at the correct time points (as described in your question) indepedently how these time points differ from wall clock time. If this is not the case (RTC reported time stamps drift to xx4xx/xx9xx), then you are right and something might be wrong in your incrementation (or something else)."}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545219619, "post_id": 53849450, "comment_id": 94548297, "body": "@Scheff I send the data to a database from a server, that once it reaches the server adds a timestamp with milliseconds. How did I notice it it&#39;s because the milliseconds gradually get reduced and the second got reduced by 1 after eight hours. I have another work that uses the arduino cpu and delay() but that one is off by 8/7 ms each minute (1 second reduce every 2 hours) because of the cpu&#39;s frequency but I managed to get it working by adding a random 7-8 ms every 1 minute, but that&#39;s an unreliable way to do this and so I wanted to get the RTC working."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545219676, "post_id": 53849450, "comment_id": 94548315, "body": "I watched a bit closer onto your <code>setAlarm()</code>. I don&#39;t think it&#39;s wrong but IMHO not very maintenance friendly. Changing <code>INTERVAL</code> to anything else than 60 might break this code. I would suggest instead: <code>second_alarm += INTERVAL; minute_alarm += second_alarm &#47; 60; second_alarm %= 60; hour_alarm += minute_alarm &#47; 60; minute_alarm %= 60; hour_alarm %= 24;</code> There is no more <code>if</code> necessary what&#39;s usually a performance plus (even with some more arithmetic operations which are on most modern CPUs much faster than potential branches)."}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545219795, "post_id": 53849450, "comment_id": 94548370, "body": "Good point will give it a try. Thanks."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545219835, "post_id": 53849450, "comment_id": 94548395, "body": "If you send data triggered by Arduino RTC and store them with time-stamp of server, this really smells like RTC inaccuracy. To become sure, you could send periodically time-stamps of RTC to server and compare it with server wall clock time."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545219991, "post_id": 53849450, "comment_id": 94548489, "body": "This brings me to a possible solution. The server may recognize Arduino RTC drift and send back values to correct it. (I assume the server can correct its own RTC via e.g. Internet time service or something similar.)"}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545220167, "post_id": 53849450, "comment_id": 94548575, "body": "It&#39;s LoRa and it&#39;s inside an internal network so yes that is one solution but damn it&#39;s a pain in the ass one because I can only access the network from the inside and there are a s***ton of security protocols that I will need to look on the API both because of the internal network and the actual LoRa gateway access. This will be my last resort though."}, {"owner": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545220519, "post_id": 53849450, "comment_id": 94548761, "body": "Oha. LoRa (just learned something new). ;-) So, alternatively, you could try to quantify the drift of Arduino RTC and correct it periodically. (This is, of course, fruitless if it becomes more or less over time e.g. depending on outside temperature...) May be, even some Inc./Dec. buttons on the Arduino box for long time maintenance... ;-)"}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 16265, "user_id": 7478597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yBOIj.jpg?s=128&g=1", "display_name": "Scheff", "link": "https://stackoverflow.com/users/7478597/scheff"}, "edited": false, "score": 0, "creation_date": 1545220820, "post_id": 53849450, "comment_id": 94548939, "body": "Yep that&#39;s what I did when using delay() with the arduino&#39;s actual cpu frequency. Oh well let&#39;s see, for one thing that other one with the 7-8ms delay that i corrected is still running at the same second interval for 24 hours so that might just be the solution."}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1545228293, "post_id": 53849450, "comment_id": 94553157, "body": "There should be register <code>FREQCORR</code>, positive value speeds up the RTC oscillator and negative slow it down. I&#39;d give a shot with that. But if everything you&#39;ve tried is slower, maybe the other side is running too fast. And if you have the internet available, you can use NTP (network time protocol) to get current time."}, {"owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "reply_to_user": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1545230786, "post_id": 53849450, "comment_id": 94554636, "body": "@KIIV For a second that&#39;s what I thought too, I&#39;m using a Raspberry PI as a server so maybe that was the problem but nope, the times in both the RPi and my usual desktop are exactly the same second by second. I will see if I can mess with that <code>FREQCORR</code>. Either way my other arduino running on delays with random 7 to 8ms increments seems to be working fine so I might just use that option."}], "owner": {"reputation": 539, "user_id": 5608999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a4b6e8b2d2bff386c5e3315de2734b97?s=128&d=identicon&r=PG&f=1", "display_name": "BryceSoker", "link": "https://stackoverflow.com/users/5608999/brycesoker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545217959, "creation_date": 1545216016, "last_edit_date": 1545217959, "question_id": 53849450, "link": "https://stackoverflow.com/questions/53849450/arduino-rtc-subtracting-1-second-every-8-hours", "title": "Arduino RTC subtracting 1 second every 8 hours", "body": "<p>I used the RTC, from an Arduino MKR 1300 with integrated RTC, as an alarm that will trigger a \"boolean\"(it's an integer) that will tell the loop to run a certain method every minute and then send some data every 5 minutes. It's on an active loop but the method to send data ONLY WORKS if it's inside the loop (no idea why). The problem is the RTC apparently is subtracting 1 second at every 8 hours or so after a few days the timing might come off and instead of sending data every xx:10:xx-xx:15:xx it might send data xx:09:xx-xx:14:xx.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>#include &lt;EmonLib.h&gt;\n#include &lt;RTCZero.h&gt;\n#include &lt;MKRWAN.h&gt;\n\n\nEnergyMonitor emon1;\nEnergyMonitor emon2;\nEnergyMonitor emon3;\nRTCZero rtc;\nLoRaModem modem;\n\nString appEui = \"1234567891011121\";\nString appKey = \"ffffffffffffffffffffffffffffffff\";\n\n/* INITIAL_TIME */\nconst byte seconds = 0;\nconst byte minutes = 0;\nconst byte hours = 0;\nconst byte day = 17;\nconst byte month = 12;\nconst byte year = 18;\n\n\nbyte second_alarm = 0;\nbyte minute_alarm = 0;\nbyte hour_alarm = 0;\nbyte INTERVAL = 60;\nint SEND_LOOP = 5;\n\nint totalKW;\nint counter= 0;\nint alarm_Triggered = 0;\n\nvoid setup()\n{\n  Serial.begin(115200);\n  if (!modem.begin(EU868)) {\n    Serial.println(\"Failed to start module\");\n    while (1) {}\n  };\n  Serial.print(\"Your module version is: \");\n  Serial.println(modem.version());\n  Serial.print(\"Your device EUI is: \");\n  Serial.println(modem.deviceEUI());\n\n  Serial.println(\"Connecting\");\n  int connected = modem.joinOTAA(appEui, appKey);\n  if (!connected) {\n    Serial.println(\"Something went wrong; are you indoor? Move near a window and retry\");\n    while (1) {}\n  }\n  Serial.println(\"Connected\");\n\n  // Set poll interval to 60 secs.\n  modem.minPollInterval(60);\n\n  analogReadResolution(9);\n  emon1.current(1, 53);\n  emon2.current(2, 53);\n  emon3.current(3, 53);\n  counter= 0;\n\n  rtc.begin(); // initialize RTC\n\n  rtc.setAlarmTime(hour_alarm, minute_alarm, second_alarm);\n  rtc.enableAlarm(rtc.MATCH_HHMMSS);\n  rtc.attachInterrupt(triggerAlarm);\n\n  // Set the time\n  rtc.setHours(hours);\n  rtc.setMinutes(minutes);\n  rtc.setSeconds(seconds);\n\n  // Set the date\n  rtc.setDay(day);\n  rtc.setMonth(month);\n  rtc.setYear(year);\n\n\n}\n\nvoid loop() {\n  if (alarm_Triggered == 1) {\n    dataMonitor();\n    alarm_Triggered = 0;\n  }\n}\n\nvoid dataMonitor() {\n\n  int totalWatt = 0;\n  unsigned long delay_send = 0;\n  int sending = 0;\n\n  double Irms1 = emon1.calcIrms(600);\n  if (Irms1 &lt; 0.3) Irms1 = 0;\n  double Watt1 = Irms1 * 230;\n\n  double Irms2 = emon2.calcIrms(600);\n  if (Irms2 &lt; 0.3) Irms2 = 0;\n  double Watt2 = Irms2 * 230;\n\n  double Irms3 = emon3.calcIrms(600);\n  if (Irms3 &lt; 0.3) Irms3 = 0;\n  double Watt3 = Irms3 * 230;\n\n  totalWatt = Watt1 + Watt2 + Watt3;\n  totalKW = totalKW + totalWatt / 1000;\n  Serial.println(counter);\n\n  sendDataChecker(Irms1, Irms2, Irms3);\n  setAlarm();\n  counter= counter+ 1;\n\n}\n\nvoid sendDataChecker(double Irms1, double Irms2, double Irms3) {\n  if (counter== SEND_LOOP) {\n    double IrmsTotal = Irms1 + Irms2 + Irms3;\n    String msg = \"{\\\"id\\\":\\\"avac_aud2\\\",\\\"kW\\\":\" + String(totalKW) + \", \\\"current\\\":\" + String(IrmsTotal) + \"}\";\n    int err;\n    Serial.println(\"Ready to Send\");\n    modem.beginPacket();\n    modem.print(msg);\n    err = modem.endPacket(true);\n    Serial.println(\"Sent1\");\n    if (err &gt; 0) {\n      //message sent correctly\n      Serial.println(\"Sent\");\n      counter= 0;\n      totalKW = 0;\n    } else {\n      Serial.println(\"ERR\");\n      counter= 0;\n    }\n  }\n}\n\n\nvoid setAlarm() {\n  second_alarm += INTERVAL;\n  if (second_alarm &gt;= 60) {\n    minute_alarm++;\n    second_alarm = 0;\n  }\n  if (minute_alarm &gt;= 60) {\n    hour_alarm++;\n    minute_alarm = 0;\n  }\n  if (hour_alarm &gt;= 24) {\n    hour_alarm = 0;\n  }\n\n  rtc.setAlarmTime(hour_alarm, minute_alarm, second_alarm);\n}\n\nvoid triggerAlarm() {\n  alarm_Triggered = 1;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 0, "creation_date": 1545215314, "post_id": 53849123, "comment_id": 94546001, "body": "Could you indicate  <code>String_solver</code> return value for each line ?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545215332, "post_id": 53849123, "comment_id": 94546009, "body": "Why aren&#39;t you using <code>long long</code>?   Unlike <code>_int_64_t</code> it is standard, and supports (at least) the same range of values as a 64-bit signed integer.   In any event, the last value in your file is too large (in magnitude) to be represented using a 64-bit type.   Which means, among other things that <code>strtoull()</code> is not guaranteed to handle that line correctly."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545215419, "post_id": 53849123, "comment_id": 94546053, "body": "@Peter: note that <code>long long</code> <i>might</i> have one fewer negative number if it&#39;s not 2&#39;s complement. Cf. the standard <code>int64_t</code> which must be 2&#39;s complement. <code>-_int_64_t</code> is of course not defined by the standards."}, {"owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "edited": false, "score": 1, "creation_date": 1545215665, "post_id": 53849123, "comment_id": 94546194, "body": "You are only interested in the final modulo 256 value. Therefore, you can read the digit one by one and calculate recursively the modulo 256 value, something like <code>x = (10*x + newdigit) %256;</code>."}, {"owner": {"reputation": 27, "user_id": 9302648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b63ce9c2fb0f60ea569a3875d43c5c1?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432 \u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/9302648/%d0%a1%d1%82%d0%b0%d0%bd%d0%b8%d1%81%d0%bb%d0%b0%d0%b2-%d0%98%d0%b2%d0%b0%d0%bd%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1545215797, "post_id": 53849123, "comment_id": 94546278, "body": "long long also not helpful, it&#39;s return 48 but must be 252"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1545217932, "post_id": 53849123, "comment_id": 94547457, "body": "@\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432\u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432  - as I said, your input value will NOT fit in a 64-bit int, and there is also no guarantee that a <code>long long</code> will represent it.     If you expect your code to work with large values, you need to use an approach that can handle such large values correctly.   You are not."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1545228897, "post_id": 53849123, "comment_id": 94553513, "body": "<code>const char * c = str.substr (j,i-j).c_str();</code> -- this line creates a temporary string object (<code>substr</code>), takes a pointer to its internal storage (<code>c_str()</code>), and then destroys the temporary object. <code>c</code> is a dangling pointer. If this code &quot;works&quot; it&#39;s only by accident."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 1368278, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/64d5c23a71a6e9f8b99e5befcdfc8615?s=128&d=identicon&r=PG", "display_name": "Luisjomen2a", "link": "https://stackoverflow.com/users/1368278/luisjomen2a"}, "reply_to_user": {"reputation": 27, "user_id": 9302648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b63ce9c2fb0f60ea569a3875d43c5c1?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432 \u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/9302648/%d0%a1%d1%82%d0%b0%d0%bd%d0%b8%d1%81%d0%bb%d0%b0%d0%b2-%d0%98%d0%b2%d0%b0%d0%bd%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1545216562, "post_id": 53849406, "comment_id": 94546696, "body": "You could try to implement a sort of scientific notation class (<a href=\"https://en.wikipedia.org/wiki/Scientific_notation\" rel=\"nofollow noreferrer\">such as this</a> ) you&#39;d have 2 attributes, exponent and coefficient. But that would mean you&#39;d have to re-implement addition and modulo operator. I really do not think that is worth it. As stated in the comments, since you are interested <b>only</b> on modulo 256 values a workaround is preferable."}, {"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "reply_to_user": {"reputation": 27, "user_id": 9302648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b63ce9c2fb0f60ea569a3875d43c5c1?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432 \u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/9302648/%d0%a1%d1%82%d0%b0%d0%bd%d0%b8%d1%81%d0%bb%d0%b0%d0%b2-%d0%98%d0%b2%d0%b0%d0%bd%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"}, "edited": false, "score": 1, "creation_date": 1545225724, "post_id": 53849406, "comment_id": 94551578, "body": "@\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432\u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432 You may want to look at <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/multiprecision/doc/html/index.html\" rel=\"nofollow noreferrer\">Boost.Multiprecision</a>. It provides an arbitrary precision integer that can do what you want. Of course, that flexibility comes at a (runtime) cost, so you&#39;ll have to determine whether this is acceptable for your use-case."}], "tags": [], "owner": {"reputation": 221, "user_id": 1368278, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/64d5c23a71a6e9f8b99e5befcdfc8615?s=128&d=identicon&r=PG", "display_name": "Luisjomen2a", "link": "https://stackoverflow.com/users/1368278/luisjomen2a"}, "is_accepted": false, "score": 2, "last_activity_date": 1545215851, "creation_date": 1545215851, "answer_id": 53849406, "question_id": 53849123, "link": "https://stackoverflow.com/questions/53849123/%d0%a1reating-your-own-class-of-integers/53849406#53849406", "title": "\u0421reating your own class of integers", "body": "<blockquote>\n  <p>I do not understand why _int_64_t is not a suitable type.</p>\n</blockquote>\n\n<p>If you look at what is the biggest value you can store in a _int64_t : \n<code>2^64 = 18446744073709551616</code> which you'll have to divide by 2 so that you can get negative values <code>18446744073709551616/2 = 9223372036854775808</code>. Which means that the maximal value you can get is <code>9223372036854775808</code> and minimal value is <code>-9223372036854775808</code> however your lowest value is <code>-2134234234234287492847923847</code>. That's why _int64_t is not suitable.</p>\n\n<p>That said, as we don't really know what's wrong with your output it's hard to say if this is the real problem.</p>\n"}, {"tags": [], "owner": {"reputation": 3531, "user_id": 10553341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba6a76c909bfdb760607076ee5aad83c?s=128&d=identicon&r=PG&f=1", "display_name": "Damien", "link": "https://stackoverflow.com/users/10553341/damien"}, "is_accepted": false, "score": 0, "last_activity_date": 1545216024, "creation_date": 1545216024, "answer_id": 53849455, "question_id": 53849123, "link": "https://stackoverflow.com/questions/53849123/%d0%a1reating-your-own-class-of-integers/53849455#53849455", "title": "\u0421reating your own class of integers", "body": "<p>As stated in the comments and the first answer, your type is not long enough for your large inputs.</p>\n\n<p>You are only interested in the final modulo 256 value. Therefore, you can read the digit one by one and calculate recursively the modulo 256 value, something like <code>x = (10*x + newdigit) %256;</code></p>\n\n<p>Just pay attention to deal with the sign for first affection of <code>x</code>. </p>\n"}], "owner": {"reputation": 27, "user_id": 9302648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b63ce9c2fb0f60ea569a3875d43c5c1?s=128&d=identicon&r=PG&f=1", "display_name": "\u0421\u0442\u0430\u043d\u0438\u0441\u043b\u0430\u0432 \u0418\u0432\u0430\u043d\u043d\u0438\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/9302648/%d0%a1%d1%82%d0%b0%d0%bd%d0%b8%d1%81%d0%bb%d0%b0%d0%b2-%d0%98%d0%b2%d0%b0%d0%bd%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1545631921, "creation_date": 1545214874, "last_edit_date": 1545631921, "question_id": 53849123, "link": "https://stackoverflow.com/questions/53849123/%d0%a1reating-your-own-class-of-integers", "title": "\u0421reating your own class of integers", "body": "<p>I have written a function that finds numbers in the substitutions and sums them modulo 256.</p>\n\n<pre><code>__int64_t String_solver(string str){\n    __int64_t i_a = 0;\n    for(int i = 0 ; i &lt; str.size(); i++){\n        int j = 0;\n        if(isdigit(str[i])){\n            j=i;\n            while(isdigit(str[i])){\n                i++;\n            }\n            const char * c = str.substr (j,i-j).c_str();\n            i_a+= strtoll(c, nullptr,10);\n        }\n        else if((str[i]=='-')&amp;&amp;(isdigit(str[i+1]))){\n            j=i;\n            i++;\n            while(isdigit(str[i])){\n                i++;\n            }\n            const char * c = str.substr (j,i-j).c_str();\n            i_a+= strtoll(c, nullptr,10);\n        }\n    }\n    return i_a;\n}\n\nint main() {\n    __int64_t arg=0;\n    string string1;\n    std::ifstream in(\"text.txt\");\n    if (in.is_open())\n    {\n        while (getline(in, string1))\n        {\n            arg+=String_solver(string1);\n        }\n    }\n    in.close();\n    if(arg&lt;0){\n        cout &lt;&lt; (arg % 256 + 256) % 256;\n    }\n    else{\n        cout &lt;&lt; arg%256;}\n    return 0;\n}\n</code></pre>\n\n<p>But this program does not work correctly with the following file\ntext.txt</p>\n\n<pre><code>12123\n123123\n123124234345\n23423453465467345234\n234234234234234\n234234234234\n-234234234234\n-2134234234234287492847923847\n</code></pre>\n\n<p>I do not understand why _int_64_t is not a suitable type.</p>\n"}, {"tags": ["c++", "c++11", "static-initialization"], "comments": [{"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545213949, "post_id": 53848716, "comment_id": 94545191, "body": "how about making insert a private function that is called with the constructor and making the map const?"}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545214064, "post_id": 53848716, "comment_id": 94545279, "body": "@AdamZahran Other translation units should, in principle, be allowed to add information to the map (so long as they do it before main)."}, {"owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "edited": false, "score": 0, "creation_date": 1545214087, "post_id": 53848716, "comment_id": 94545294, "body": "If I understand the scenario correctly, the insert function shall be called from the outside. Otherwise, initialization of the <code>std::map&lt;std::string, std::string&gt; m_map = {{&quot;hello&quot;, &quot;world&quot;}};</code> would be enough anyway, and there was no need for <code>Singleton::insert</code>."}, {"owner": {"reputation": 956, "user_id": 6449949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a920ba06a595d7137a076ab1de7425?s=128&d=identicon&r=PG&f=1", "display_name": "paler123", "link": "https://stackoverflow.com/users/6449949/paler123"}, "edited": false, "score": 4, "creation_date": 1545214412, "post_id": 53848716, "comment_id": 94545463, "body": "That does not seem to be a very good design choice, as the map contents are a bit unpredictable in that case, e.g. if two distinct values are inserted with same key in two separate compilation units, which one will end up in map?"}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 956, "user_id": 6449949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a920ba06a595d7137a076ab1de7425?s=128&d=identicon&r=PG&f=1", "display_name": "paler123", "link": "https://stackoverflow.com/users/6449949/paler123"}, "edited": false, "score": 0, "creation_date": 1545214888, "post_id": 53848716, "comment_id": 94545764, "body": "@paler123 Yeah - there are definite risks with this approach and I have to have things in place to ensure that keys are always unique. However the number of different pieces of information to be stored in this map is fairly limited and in practice it should be possible to ensure that users use unique keys."}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545215294, "post_id": 53848716, "comment_id": 94545991, "body": "@AdamZahran unless I&#39;m missing something that solution cannot work if the information is to be provided in separate translation units - the template specializations would not be visible to the compiler."}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545215596, "post_id": 53848716, "comment_id": 94546154, "body": "why wouldn&#39;t the template specializations be visible to the compiler?"}, {"owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1545215784, "post_id": 53848716, "comment_id": 94546271, "body": "By &quot;ensure&quot; do you mean that there should be compiler errors if <code>insert</code> is called elsewhere?"}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545215861, "post_id": 53848716, "comment_id": 94546319, "body": "@AdamZahran Say I have two translation units. One (in static initialization) loads a value into the map, another (during the main function) tries to read this value. With a static map this behaviour works, with a template specialization the second translation unit would need to know at compile time that the specialization exists."}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "edited": false, "score": 0, "creation_date": 1545215965, "post_id": 53848716, "comment_id": 94546379, "body": "@P.W if it&#39;s possible to enforce a compiler error if <code>insert</code> is called outside of static initialization then that would be great - I don&#39;t know of any piece of the language that would allow that however."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1545216245, "post_id": 53848716, "comment_id": 94546526, "body": "Will you *read&quot; the map before it&#39;s fully initialized? in other words, will the <code>at</code> method be called before main?"}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "edited": false, "score": 1, "creation_date": 1545216377, "post_id": 53848716, "comment_id": 94546603, "body": "@liliscent <code>at</code> should not be called before main (or at least I cannot see any reason why it would be + I can make this a requirement if necessary). I <i>can</i> guarantee that no <code>insert</code> call should depend on any <code>at</code> call."}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545216644, "post_id": 53848716, "comment_id": 94546733, "body": "maybe have your inserts in a header and include it in all TUs that needs them? Of course have your header guards in place to avoid multiple definitions."}, {"owner": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545216854, "post_id": 53848716, "comment_id": 94546862, "body": "The deal breaker here is that you need the key and value to be strings. Which is really hard to do at compile time. I don&#39;t even think it&#39;s possible, because strings are basically pointers, so even if you have a pointer for the key it has to be identical to that which was used for the template specialization, which is silly, we need the value of the string not its address."}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "reply_to_user": {"reputation": 1474, "user_id": 3659011, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/8aLi8.jpg?s=128&g=1", "display_name": "Adam Zahran", "link": "https://stackoverflow.com/users/3659011/adam-zahran"}, "edited": false, "score": 0, "creation_date": 1545217161, "post_id": 53848716, "comment_id": 94547049, "body": "@AdamZahran Yes, adding information to the map is impossible during compile time which is why I want to do it during static initialization. I want it to be possible for users to add their own information into the map <i>without</i> editing some central file (and requiring that they take responsibility for not defining conflicting keys)."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1545219490, "post_id": 53848716, "comment_id": 94548225, "body": "Is it an option to add a <code>status</code> member variable in the singleton that would be statically initialized to <code>INSERT_OK</code>, that would be set to <code>INSERT_NO</code> in main (before multithreading is initialized) and that would be tested in <code>insert</code>? BTW the read method could also test it and throw if called before initialization is finished."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1545223712, "post_id": 53848716, "comment_id": 94550439, "body": "While this isn&#39;t portable, you may find GCC&#39;s <a href=\"https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Attributes.html#C_002b_002b-Attributes\" rel=\"nofollow noreferrer\"><code>init_priority</code> attribute</a> interesting. This can remove the need to call <code>lock</code> at the beginning of <code>main()</code> based on J&#252;rgen&#39;s answer. Instead, you could have an static initializer with high priority value (which ironically means that this initializer will run later than others). Caveat: the documentation is IMO ambiguous over whether this will work across translation units."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1545224833, "post_id": 53848716, "comment_id": 94551107, "body": "A <i>truly</i> misguided user will create a thread before <code>main</code> and defeat the whole exercise."}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "edited": false, "score": 0, "creation_date": 1545221279, "post_id": 53849815, "comment_id": 94549178, "body": "Can a race condition occur during static initialization (i.e. can there be multiple threads at this point)?"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "reply_to_user": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "edited": false, "score": 0, "creation_date": 1545223271, "post_id": 53849815, "comment_id": 94550205, "body": "@extiam From how I read the standard, it is legal to create another thread prior to the execution of <code>main()</code> (i.e. from within a static initializer). If anyone were to do it, I&#39;d question the wisdom of the design though."}, {"owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "edited": false, "score": 0, "creation_date": 1545223716, "post_id": 53849815, "comment_id": 94550445, "body": "It&#39;s not too expensive to protect against, unwise as it might be. I&#39;m not anticipating a huge number of insert calls so adding a mutex isn&#39;t painful."}, {"owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "reply_to_user": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "edited": false, "score": 0, "creation_date": 1545226083, "post_id": 53849815, "comment_id": 94551787, "body": "@Oliv That&#39;s true. Put it in another function as static local variable, the rest is the same."}], "tags": [], "owner": {"reputation": 15050, "user_id": 8605791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ae3be140b26db13a86d624dba4ef1c8?s=128&d=identicon&r=PG&f=1", "display_name": "llllllllll", "link": "https://stackoverflow.com/users/8605791/llllllllll"}, "is_accepted": false, "score": 2, "last_activity_date": 1545227933, "last_edit_date": 1545227933, "creation_date": 1545217153, "answer_id": 53849815, "question_id": 53848716, "link": "https://stackoverflow.com/questions/53848716/is-it-possible-to-ensure-that-a-function-is-only-called-during-the-static-initi/53849815#53849815", "title": "Is it possible to ensure that a function is only called during the &#39;static initialization&#39; step", "body": "<p>If you can guarantee that user won't read the map before <code>main()</code> in the initialization stage, one solution is to construct a static map only for initialization, then move it to the singleton when the singleton is being constructed.</p>\n\n<p>Since the construction happens the first time <code>instance()</code> is called, you can be sure that map is correctly initialized.</p>\n\n<p>Then other call to <code>insert</code> won't have effect on the singleton. You can also add mutex to protect <code>insert</code> to avoid UB from race condition.</p>\n\n<pre><code>class Singleton {\n  private:\n    std::map&lt;std::string, std::string&gt; m_map;\n    static auto&amp; init_map() {\n        static std::map&lt;std::string, std::string&gt; m;\n        return m;\n    }\n    Singleton() {\n        m_map = std::move(init_map());\n        init_map().clear();\n    }\n  public:\n    static Singleton&amp; instance() {\n      static Singleton theSingleton;\n      return theSingleton;\n    }\n    static bool insert(const std::string&amp; key, const std::string&amp; value) {\n      // you can also add mutex to protect here,\n      // because calling insert from different threads without\n      // protection will screw up its internal state, even if\n      // the init_map becomes useless after main\n      return init_map().insert(std::make_pair(key, value) ).second;\n    }\n    static std::string at(const std::string&amp; key) {\n      return instance().m_map.at(key);\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 76, "user_id": 10806577, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-X9waOdRLeRU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gciJQJ0xxYgfog5PPqo8ljLBt2JA/mo/photo.jpg?sz=128", "display_name": "J&#252;rgen", "link": "https://stackoverflow.com/users/10806577/j%c3%bcrgen"}, "is_accepted": true, "score": 4, "last_activity_date": 1545219955, "creation_date": 1545219955, "answer_id": 53850551, "question_id": 53848716, "link": "https://stackoverflow.com/questions/53848716/is-it-possible-to-ensure-that-a-function-is-only-called-during-the-static-initi/53850551#53850551", "title": "Is it possible to ensure that a function is only called during the &#39;static initialization&#39; step", "body": "<p>I guess you also want to use the 'at' method in setting up your application.\nWhy not add a 'lock' method and call that simple as first function in the main? </p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;string&gt;\n\nclass Singleton {\nprivate:\n    std::map&lt;std::string, std::string&gt; m_map;\n    bool m_locked;\n    Singleton() : m_locked(false) { }\n\npublic:\n    static Singleton&amp; instance() {\n        static Singleton theSingleton;\n        return theSingleton;\n    }\n\n    static void lock() {\n        instance().m_locked = true;\n    }\n\n    static bool insert(const std::string&amp; key, const std::string&amp; value) {\n        if (instance().m_locked) { return false; }\n        return instance().m_map.insert(std::make_pair(key, value)).second;\n    }\n    static std::string at(const std::string&amp; key) {\n        return instance().m_map.at(key);\n    }\n};\n\nstatic bool inserted = Singleton::insert(\"Hello\", \"World\"); // fine\n\nbool addItem(const std::string&amp; key, const std::string&amp; value) {\n    return Singleton::insert(key, value); // not OK\n}\n\nint main(int argc, char** argv)\n{\n    Singleton::lock();\n    Singleton::insert(\"Hello2\", \"World2\"); // fails\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": false, "score": 1, "last_activity_date": 1545228655, "last_edit_date": 1545228655, "creation_date": 1545223638, "answer_id": 53851603, "question_id": 53848716, "link": "https://stackoverflow.com/questions/53848716/is-it-possible-to-ensure-that-a-function-is-only-called-during-the-static-initi/53851603#53851603", "title": "Is it possible to ensure that a function is only called during the &#39;static initialization&#39; step", "body": "<p>Just like J\u00fcrgen with the non-Java way but c/c++ way of creating a singleton (ie a namespace).</p>\n\n<p><em>Why doing this way</em>:</p>\n\n<ul>\n<li>it is much more efficient and easier to optimize at link time because there is no need to dereference <code>this</code> to access the state;</li>\n<li>there is no need to maintain code to ensure uniqueness: uniqueness is ensured by the linker.</li>\n</ul>\n\n<p><strong>singleton.hpp</strong></p>\n\n<pre><code>namespace singleton{\n  void lock();\n  bool instert(const std::string&amp; key, const std::string&amp; value);\n  std::string at(const std::string&amp; key)\n  }\n</code></pre>\n\n<p><strong>singleton.cpp</strong></p>\n\n<pre><code>namespace singleton{\n  namespace{\n    inline decltype(auto) \n    get_map(){\n      static std::map&lt;std::string, std::string&gt; m_map;\n      return m_map;\n      }\n    bool m_locked=false; //OK guarenteed to happen before any dynamic initialization [basic.start.static]\n    }\n\n  void lock() {\n    m_locked = true;\n    }\n\n  bool insert(const std::string&amp; key, const std::string&amp; value) {\n    if (m_locked) { return false; }\n    return get_map().insert(std::make_pair(key, value)).second;\n    }\n\n  std::string at(const std::string&amp; key) {\n    return get_map().at(key);\n    }\n  }\n</code></pre>\n\n<p>Also if the singleton must be used in a generic code a struct can be used for that:</p>\n\n<pre><code>struct singleton_type{\n  static void lock() {singleton::lock();}\n  static auto insert(const std::string&amp; key, const std::string&amp; value) {\n      return singleton::insert(key,value);\n      }\n  static auto at(const std::string&amp; key) {\n      return singleton::at(key,value);\n      }\n  };\nauto x = singleton_type{};\nauto y = singleton_type{}; \n// x and y refers to the same and unique object file!!!\n</code></pre>\n\n<p>Tomorrow, stop coding in java :).</p>\n"}], "owner": {"reputation": 95, "user_id": 8434292, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f8a0b628d7c051e105d9f49c9d5f43?s=128&d=identicon&r=PG&f=1", "display_name": "extiam", "link": "https://stackoverflow.com/users/8434292/extiam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 53850551, "answer_count": 3, "score": 7, "last_activity_date": 1545230719, "creation_date": 1545213533, "last_edit_date": 1545230719, "question_id": 53848716, "link": "https://stackoverflow.com/questions/53848716/is-it-possible-to-ensure-that-a-function-is-only-called-during-the-static-initi", "title": "Is it possible to ensure that a function is only called during the &#39;static initialization&#39; step", "body": "<p>I was wondering if it is possible to ensure that a function is only called during the static initialization step of a program?</p>\n\n<p>As an example, say that I have some singleton class that contains a <code>std::map</code> object and exposes the <code>insert</code> and <code>at</code> methods of it. I would like to ensure that reading data from it (the <code>at</code> method) is thread-safe which, to my understanding, requires ensuring that nothing is modifying the data (i.e. using the <code>insert</code> method).</p>\n\n<p>The map is intended to be filled <em>only</em> during static initialization, at which time I'm assuming there is only one thread. Is there any way that I can ensure no misguided user calls <code>insert</code> once <code>main()</code> has begun?</p>\n\n<hr>\n\n<p>Example code</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;string&gt;\n\nclass Singleton {\n  private:\n    std::map&lt;std::string, std::string&gt; m_map;\n  public:\n    static Singleton&amp; instance() {\n      static Singleton theSingleton;\n      return theSingleton;\n    }\n    static bool insert(const std::string&amp; key, const std::string&amp; value) {\n      return instance().m_map.insert(std::make_pair(key, value) ).second;\n    }\n    static std::string at(const std::string&amp; key) {\n      return instance().m_map.at(key);\n    }\n};\n\nstatic bool inserted = Singleton::insert(\"Hello\", \"World\"); // fine\n\nbool addItem(const std::string&amp; key, const std::string&amp; value) {\n  return Singleton::insert(key, value); // not OK\n}\n</code></pre>\n\n<hr>\n\n<p>Needless(?) to say the actual code is a good deal more complex than this simple example.</p>\n\n<hr>\n\n<p><strong>Edit after solution:</strong> It looks like the best way to make this as safe as possible is to maintain a <code>status</code> variable that records whether the singleton is in 'insert' or 'read' mode and act accordingly. Thanks to all for their ideas and suggestions!</p>\n"}, {"tags": ["c++", "debugging", "windbg", "locks"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1545213088, "post_id": 53848511, "comment_id": 94544668, "body": "You can try <code>!cs -s -l -o</code> but you probably will see the same thing, you may need to enable user mode stack trace using glags <code>!gflag +ust</code>"}, {"owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1545213463, "post_id": 53848511, "comment_id": 94544905, "body": "@EdChum: thanks for your quick reply. Please write it as an answer, I&#39;ll accept it. Apparently <code>!locks</code> is a summary of <code>!cs -s -l -o</code> command."}], "answers": [{"comments": [{"owner": {"reputation": 293, "user_id": 1054539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/75a605a624f74230b5f0e6b58d193a0a?s=128&d=identicon&r=PG", "display_name": "GBrookman", "link": "https://stackoverflow.com/users/1054539/gbrookman"}, "edited": false, "score": 0, "creation_date": 1615403177, "post_id": 53848787, "comment_id": 117682486, "body": "Thank you. Actually !cs -l is closer to !locks, and then you can display the call stack with whatever options you want."}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 3, "last_activity_date": 1545213784, "creation_date": 1545213784, "answer_id": 53848787, "question_id": 53848511, "link": "https://stackoverflow.com/questions/53848511/windbg-locks-command-doesnt-work-can-i-get-information-anyway/53848787#53848787", "title": "Windbg &quot;!locks&quot; command doesn&#39;t work, can I get information anyway?", "body": "<p>A better alternative to <code>!locks</code> is to use <code>!cs -s -l -o</code> see <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/-cs\" rel=\"nofollow noreferrer\"><code>!cs</code></a> this will display all locked critical sections, the owner stack trace and the critical section stack trace, you can omit the <code>-l</code> if you want all critical sections. You may need to enable the user mode stack trace using <code>gflags</code> <code>!gflag +ust</code> remember to remove it when it isn't needed <code>!glag -ust</code>.</p>\n\n<p>To display critical section info, you can do this if you have the address: <a href=\"https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/displaying-a-critical-section\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/displaying-a-critical-section</a></p>\n\n<p>so <code>!critsec ADDRESS</code> or using display type command <code>dt</code> <code>dt RTL_CRITICAL_SECTION ADDRESS</code> will work if you have the address.</p>\n"}], "owner": {"reputation": 8351, "user_id": 4279155, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/841b7391f3f7873bec1a8d9d8d2dc759?s=128&d=identicon&r=PG&f=1", "display_name": "Dominique", "link": "https://stackoverflow.com/users/4279155/dominique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "accepted_answer_id": 53848787, "answer_count": 1, "score": 4, "last_activity_date": 1545213784, "creation_date": 1545212933, "question_id": 53848511, "link": "https://stackoverflow.com/questions/53848511/windbg-locks-command-doesnt-work-can-i-get-information-anyway", "title": "Windbg &quot;!locks&quot; command doesn&#39;t work, can I get information anyway?", "body": "<p>While debugging dump files, regularly I need to check for locks, for which I use the <code>windbg</code> extension command <code>!locks</code>. When everything goes well, this provides an output like the following:</p>\n\n<pre><code>CritSec +54a8a8 at 0054a8a8\nWaiterWoken        No\nLockCount          0\nRecursionCount     1\nOwningThread       13d8\nEntryCount         0\nContentionCount    0\n*** Locked\n\nCritSec +b73a8d at 00135e8d\nWaiterWoken        No\nLockCount          0\nRecursionCount     1\nOwningThread       55f3\nEntryCount         0\nContentionCount    0\n*** Locked\n\n...\n\nScanned 662 critical sections\n</code></pre>\n\n<p>Sometimes, however, I get following error message:</p>\n\n<pre><code>Stopped scanning because of problem reading critical section debug info\n\nScanned 7 critical sections\n</code></pre>\n\n<p>Is it possible to have some information anyway? (E.g. where is that <code>critical section debug info</code>, how can I read it without the <code>!locks</code> command, ...)</p>\n"}, {"tags": ["c++", "directx", "directx-9"], "answers": [{"tags": [], "owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 0, "last_activity_date": 1545412780, "last_edit_date": 1545412780, "creation_date": 1545247858, "answer_id": 53858017, "question_id": 53848210, "link": "https://stackoverflow.com/questions/53848210/how-to-efficiently-and-correctly-resize-id3dxfont/53858017#53858017", "title": "How to efficiently and correctly resize ID3DXFont", "body": "<p>The problem you are encountering is a fundamental limitation of 'raster bitmap' fonts as opposed to 'vector' fonts like TrueType. D3DXFont is a 'raster bitmap' solution that captures a TrueType font into a bitmap at a specific size. This can be scaled/rotated somewhat and still holds up, but you get artifacts if you change the size a lot as you have seen.</p>\n\n<p>It is extremely fast, however, because it's just drawing textures. You can also capture fonts at a few different sizes and pick one based on the resolution.</p>\n\n<blockquote>\n  <p>D3DXFont is part of D3DX9 which means it is <a href=\"https://docs.microsoft.com/en-us/windows/desktop/directx-sdk--august-2009-\" rel=\"nofollow noreferrer\">deprecated</a>. Of course Direct3D 9 is legacy too, so you should look at Direct3D 11 and <code>SpriteFont/SpriteBatch</code> in the <a href=\"https://github.com/Microsoft/DirectXTK/wiki/Getting-Started\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a> for a modern 'raster bitmap' font solution.</p>\n</blockquote>\n\n<p>The correct solution for high-quality, highly scalable text drawing is to use a 'vector font' drawing system like <a href=\"https://docs.microsoft.com/en-us/windows/desktop/DirectWrite/direct-write-portal\" rel=\"nofollow noreferrer\">DirectWrite</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 10092591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6ea100b4dbb713dc6696669ddb69be6?s=128&d=identicon&r=PG&f=1", "display_name": "john tope", "link": "https://stackoverflow.com/users/10092591/john-tope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 0, "accepted_answer_id": 53858017, "answer_count": 1, "score": -1, "last_activity_date": 1545412780, "creation_date": 1545211913, "question_id": 53848210, "link": "https://stackoverflow.com/questions/53848210/how-to-efficiently-and-correctly-resize-id3dxfont", "title": "How to efficiently and correctly resize ID3DXFont", "body": "<p>I am looking to resize a DirectX font object in a for loop. See below for an example:</p>\n\n<pre><code>for ( int i = 1; i &lt; 20; i++ ) {\n    // font size should be i\n}\n</code></pre>\n\n<p>It would be inefficient to create a font for every single possible size so I was wondering if I could create some sort of wrapper or my own font renderer that allows me to do so with good performance?</p>\n\n<p>If I don't make much sense, then see the another example below:</p>\n\n<pre><code>// DirectX9\n// calling D3DXCreateFont every loop would be incredibly inefficient.\n\nID3DXFont *example_font;\nD3DXCreateFont( device, 14 /* font size - we want this to change */, ..., &amp;example_font );\n</code></pre>\n\n<p>How can I achieve this? I tried using scale/rotate/transform to simply change the size but the font becomes blurry so I'm looking for a more \"correct\" solution.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "arrays", "function"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1545211545, "post_id": 53848095, "comment_id": 94543703, "body": "<i>&quot;how to do it&quot;</i> How do do <i>what</i>? Your code already seems to pass the array to the function."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1545211645, "post_id": 53848095, "comment_id": 94543760, "body": "Also note that you don&#39;t need to return the <code>int *</code> in this case. You could change the return type to <code>void</code>, remove <code>return a;</code> and replace <code>a = modArray(a, size);</code> with <code>modArray(a, size);</code> without any change in behavior."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1545211696, "post_id": 53848095, "comment_id": 94543794, "body": "You already done it with <code>modArray</code>, do the same with <code>modAddition</code>"}, {"owner": {"reputation": 3, "user_id": 5301107, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039494949416481/picture?type=large", "display_name": "Luboslav Kakanakov", "link": "https://stackoverflow.com/users/5301107/luboslav-kakanakov"}, "edited": false, "score": 0, "creation_date": 1545213651, "post_id": 53848095, "comment_id": 94545004, "body": "Well, thank you for the help, I thought that when I have an array in the main it is a local and I cannot use it in another function, with just typing int* a, because it is going to make a new array. I am still a beginner so that confused me."}, {"owner": {"reputation": 3183, "user_id": 3063, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94037fcc56672e711673c00feba9d62a?s=128&d=identicon&r=PG", "display_name": "palotasb", "link": "https://stackoverflow.com/users/3063/palotasb"}, "edited": false, "score": 0, "creation_date": 1545240561, "post_id": 53848095, "comment_id": 94560594, "body": "You made the array when typing <code>new int[size]</code>. While <code>int* a =</code> just made a pointer. That pointer will point to the array&#39;s first element, and it will till point there even if you pass it to a function. The array itself will live until you call <code>delete[]</code> passing a pointer pointing to the array. Until then, you can use it from any function if you have a pointer or reference to the array."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9155771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c1ec532ccf27a50fad8537827a24b?s=128&d=identicon&r=PG&f=1", "display_name": "Mart&#237; Ferret", "link": "https://stackoverflow.com/users/9155771/mart%c3%ad-ferret"}, "is_accepted": false, "score": 0, "last_activity_date": 1545211973, "creation_date": 1545211973, "answer_id": 53848230, "question_id": 53848095, "link": "https://stackoverflow.com/questions/53848095/use-an-array-in-main-in-another-function-in-c/53848230#53848230", "title": "Use an array in main() in another function in c++", "body": "<p>Your modArray works, and the return steatment is not needed in this case. You can just do the same in your modAddition. Rembemer that if they don't have a return, they will be void methods.</p>\n"}], "owner": {"reputation": 3, "user_id": 5301107, "user_type": "registered", "profile_image": "https://graph.facebook.com/1039494949416481/picture?type=large", "display_name": "Luboslav Kakanakov", "link": "https://stackoverflow.com/users/5301107/luboslav-kakanakov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1545213213, "creation_date": 1545211438, "last_edit_date": 1545213213, "question_id": 53848095, "link": "https://stackoverflow.com/questions/53848095/use-an-array-in-main-in-another-function-in-c", "title": "Use an array in main() in another function in c++", "body": "<p>Hello I have a task to make a function that fills an array, made in main(), and then use the array in another function, where I should make some calculations with it. I already have some code, could you please assist me how to do it? Thank you in advance</p>\n\n<pre><code>#include &lt;iostream&gt;;\nusing namespace std;\n\nint* modArray(int* a, int size) {\n\n    for (int i = 0; i &lt; size ; i++) {\n        a[i] = i;\n    }\n    return a;\n}\n\nint modAddition() {} // This is the function, where I want to use, the \"a\" array\n\nint main() {\n\n    int size = 7;\n    int* a = new int[size];\n\n    a = modArray(a, size);\n\n    system(\"pause\");\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "file-upload", "ftp", "vsftpd"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1545211737, "post_id": 53848062, "comment_id": 94543812, "body": "What do you mean by &quot;segmented way&quot;? Do you want to upload the file by parts?"}, {"owner": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1545211995, "post_id": 53848062, "comment_id": 94543988, "body": "yes @MartinPrikryl"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "edited": false, "score": 0, "creation_date": 1545213476, "post_id": 53848400, "comment_id": 94544912, "body": "many thanks for the information. but, is it possible simultaneously? I mean, instead of restarting one failed upload, can we do this multipart upload simultaneously ?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "edited": false, "score": 1, "creation_date": 1545214080, "post_id": 53848400, "comment_id": 94545288, "body": "I do not think so. Nor do I think that your question is clear that you want this."}, {"owner": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "edited": false, "score": 0, "creation_date": 1545239253, "post_id": 53848400, "comment_id": 94559892, "body": "my question is, can we upload a single file in multiple parts or segments into ftp ? assuming mutiple simultaneous uploads can speed up, resulting less upload time for a single file."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "reply_to_user": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "edited": false, "score": 0, "creation_date": 1545239399, "post_id": 53848400, "comment_id": 94559967, "body": "As I wrote: I do not think it&#39;s possible."}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": 1, "last_activity_date": 1545212543, "creation_date": 1545212543, "answer_id": 53848400, "question_id": 53848062, "link": "https://stackoverflow.com/questions/53848062/segmented-ftp-upload/53848400#53848400", "title": "Segmented FTP upload", "body": "<p>In FTP protocol, you can implement a transfer by parts using <a href=\"https://tools.ietf.org/html/rfc3659#section-5\" rel=\"nofollow noreferrer\"><code>REST</code> command</a>.</p>\n\n<p>The <code>REST</code> command defines offset in a file, where transfer starts. You then transfer as many bytes as you want. And then you can restart the transfer again from a further offset. </p>\n\n<p>vsftpd server supports <code>REST</code> command.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 1053203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f05f26d8095164c851a9dbded48c8b?s=128&d=identicon&r=PG", "display_name": "James Gardiner", "link": "https://stackoverflow.com/users/1053203/james-gardiner"}, "is_accepted": false, "score": 0, "last_activity_date": 1574127559, "creation_date": 1574127559, "answer_id": 58925422, "question_id": 53848062, "link": "https://stackoverflow.com/questions/53848062/segmented-ftp-upload/58925422#58925422", "title": "Segmented FTP upload", "body": "<p>The first thing to consider is that segmented transfers are not considered to be good net citizen behaviour. (i.e. you are gaming the system by setting up multi downloads on a shared link, gaining more than your fair share of bandwidth) As such, the protocol definitions do not support specifically segmented upload. (Or download for that matter)  Resume yes.</p>\n\n<p>Segmented DOWNLOAD is a hack by some tools that use the RESUME function of the protocol to transfer different parts of the same file at the same time..  this behaviour has a \"NON-STANDARD\" and not the intention of the protocol specifications.</p>\n\n<p>Segmented UPLOAD is possible but the client AND ftpd server (or whatever protocol server your using) would need to support this NO-STANDARD and frowned upon implementation.</p>\n\n<p>Again, this is not supported specifically in any standards as such poor behaviour is not encouraged by an open standard.</p>\n\n<p>HOWEVER, you will find tools like lftp that support segmented ftp downloads.  But currently, I have not seen any implementation of segmented upload that uses common open protocols like ftp.</p>\n\n<p>I did find a java (Custom open source) based udp tool that did this, but udp needs tcp fallback if you want reliability in the internet. (udp is dropped by some internet gateways)</p>\n"}], "owner": {"reputation": 93, "user_id": 7854334, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/d6ea3075e240485306dc6b20d66936aa?s=128&d=identicon&r=PG&f=1", "display_name": "sourav", "link": "https://stackoverflow.com/users/7854334/sourav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1574127559, "creation_date": 1545211307, "question_id": 53848062, "link": "https://stackoverflow.com/questions/53848062/segmented-ftp-upload", "title": "Segmented FTP upload", "body": "<p>How can I upload a file in FTP in segmented way ? Is there any open source tool/library so that I can use it?.\nIs there any server side change needed to combine the uploads? Currently I am using vsftpd.</p>\n"}, {"tags": ["c++", "console-application"], "comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 6, "creation_date": 1545211542, "post_id": 53848055, "comment_id": 94543702, "body": "This appears to be an <b>XY Problem</b>. See: <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\"><b>What is the XY problem?</b></a> What is it you are trying to do to begin with. You may not need <code>system</code> at all. C++ generally provides everything you need."}, {"owner": {"reputation": 33, "user_id": 10804471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b89773256e46bb12cd506826df8f?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos P.", "link": "https://stackoverflow.com/users/10804471/konstantinos-p"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1545211847, "post_id": 53848055, "comment_id": 94543900, "body": "@DavidC.Rankin It is true, the way I phrased the question makes it seem that it&#39;s an XY problem. I am using system(&quot;cls&quot;) and have found other alternatives, but I want to understand better how console apps work."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 1, "creation_date": 1545212019, "post_id": 53848055, "comment_id": 94543998, "body": "Well, <code>&quot;cls&quot;</code> is more of a cludge than a tool. Yes it works, but if you are wanting to do text console manipulation, you really need a library like <code>ncurses</code>, etc.. I avoid the use of <code>system</code> like the plague. (it has is convenience uses -- but those should be view as &quot;few and far between&quot;)"}, {"owner": {"reputation": 33, "user_id": 10804471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b89773256e46bb12cd506826df8f?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos P.", "link": "https://stackoverflow.com/users/10804471/konstantinos-p"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1545212861, "post_id": 53848055, "comment_id": 94544531, "body": "Thanks for the answer. I just edited the question so it&#39;s more focused. My question is on the command processor rather than whether  <code>system</code> should be used or not."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1545212928, "post_id": 53848055, "comment_id": 94544565, "body": "what OS? cls is a Windows-only command, linux misses it (some distrs have macro which emulates the behaviour). Thing is windows cannot  missing command processor that way, &quot;system&quot; there is a compatibility wrapper around CreateProcess to call command processor.&quot;"}, {"owner": {"reputation": 33, "user_id": 10804471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b89773256e46bb12cd506826df8f?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos P.", "link": "https://stackoverflow.com/users/10804471/konstantinos-p"}, "edited": false, "score": 0, "creation_date": 1545213238, "post_id": 53848055, "comment_id": 94544762, "body": "Windows. So like, can a console app work without having a command processor attached to it?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 1, "creation_date": 1545214853, "post_id": 53848055, "comment_id": 94545741, "body": "Console application may work without opening a visible command console. You have to have command processor to execute a console application. The <code>system</code> call executes a &quot;shell command&quot; on the running operation system and is completely os dependent. Are you asking about C? About why windows <code>system</code> call opens new console window? If windows needs console window to run a &quot;console&quot; applications? What is a console application? Command processor is used to process a command, console window is used to display the result."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1545215532, "post_id": 53848055, "comment_id": 94546124, "body": "The command processor is merely another program that also happens to use a console.  Cmd.exe on Windows.  Otherwise indistinguishable from any program that was built to avoid GUI features.  That the system() function has special knowledge of it is wonkiness that goes back to early Unix.  Checking if it is &quot;available&quot; is pretty pointless, it is always available and if not then your user would have a hard time getting your program started in the first place and have decided that reinstalling the OS is warranted."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1545215567, "post_id": 53848055, "comment_id": 94546138, "body": "A command processor is not attached to anything. It is either available to your program or not. &quot;Console&quot; is not something the C++ standard mentions so we cannot talk about it in standard terms. If talking in OS-apecific terms, then yes, most operating systems that have consoles do let you set up things in a way that makes the command processor unavailable to your console application."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1545216236, "post_id": 53848055, "comment_id": 94546521, "body": "@DavidC.Rankin It&#39;s a reasonable question asking a specific thing about a specific feature"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1545216831, "last_edit_date": 1545216831, "creation_date": 1545216427, "answer_id": 53849579, "question_id": 53848055, "link": "https://stackoverflow.com/questions/53848055/command-processor-vs-console-in-c/53849579#53849579", "title": "Command processor vs Console in C++", "body": "<p>If you have a console application, then you're going to be running your program from inside a command processor. Therefore, a command processor is available in the context of your program.</p>\n\n<p>It is probably possible with some trickery to \"hide\" said processor from your process, but I don't know how to do so on any OS.</p>\n\n<p>More generally, though, since C++ is an abstract \"multi-purpose\" language, in theory it is conceivable that for some given program <em>P</em> in some environment <em>E</em> a command processor is not available, but in practice I can't think of an example. Perhaps when, say, writing a kernel module?</p>\n\n<p>Overall I would probably not bother with this check unless you already had reason to believe that there may be something \"unusual\" about the execution environment &mdash; you need to handle errors generated by your \"real\" <code>system</code> calls anyway.</p>\n\n<p>Still, can't hurt.</p>\n"}], "owner": {"reputation": 33, "user_id": 10804471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9221b89773256e46bb12cd506826df8f?s=128&d=identicon&r=PG&f=1", "display_name": "Konstantinos P.", "link": "https://stackoverflow.com/users/10804471/konstantinos-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 0, "accepted_answer_id": 53849579, "answer_count": 1, "score": 2, "last_activity_date": 1545216831, "creation_date": 1545211292, "last_edit_date": 1545214305, "question_id": 53848055, "link": "https://stackoverflow.com/questions/53848055/command-processor-vs-console-in-c", "title": "Command processor vs Console in C++", "body": "<p>I am creating a C++ console application and want to check whether the command processor is available:</p>\n\n<pre><code>if (!system(NULL))  //check to see if command processor is available\n{\n    fprintf(stderr, \"Error: Command processor not available\\n\");\n    exit(EXIT_FAILURE);\n}\n</code></pre>\n\n<p>My question is, can a console app exist or work without having a command processor attached to it? If when a console is created, it is always paired somehow with a command processor, then the code above would be redundant.\nOtherwise, the console window will appear, the program will run normally, but I just can't use system().</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1545211281, "post_id": 53848007, "comment_id": 94543561, "body": "You want <code>&quot;&#47;home&#47;ryan&#47;PCN-FaceDetection&#47;predictions&#47;&quot; + std::to_string(i) + &quot;.jpg&quot;</code>."}, {"owner": {"reputation": 4197, "user_id": 8176285, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8d627cb69cbceed874a485cd7cb3fa86?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan ", "link": "https://stackoverflow.com/users/8176285/ryan"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545211306, "post_id": 53848007, "comment_id": 94543568, "body": "Amazing , let me try this"}, {"owner": {"reputation": 4197, "user_id": 8176285, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8d627cb69cbceed874a485cd7cb3fa86?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan ", "link": "https://stackoverflow.com/users/8176285/ryan"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1545211439, "post_id": 53848007, "comment_id": 94543650, "body": "This worked .Thanks for the help"}], "answers": [{"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 2, "last_activity_date": 1545211312, "creation_date": 1545211312, "answer_id": 53848065, "question_id": 53848007, "link": "https://stackoverflow.com/questions/53848007/loop-and-use-the-index-of-the-number-as-filename/53848065#53848065", "title": "loop and use the index of the number as filename", "body": "<p>Just use the overloaded string addition symbol, while converting the numerical <code>i</code> to a string, with the help of <a href=\"http://www.cplusplus.com/reference/string/to_string/\" rel=\"nofollow noreferrer\"><code>std::to_string</code></a>, like this:</p>\n\n<pre><code>\"/home/ryan/PCN-FaceDetection/predictions/\" + std::to_string(i) + \".jpg\"\n</code></pre>\n\n<p><kbd><a href=\"https://wandbox.org/permlink/EDNxrzlAc6ijmgpp\" rel=\"nofollow noreferrer\">Live demo</a></kbd></p>\n"}], "owner": {"reputation": 4197, "user_id": 8176285, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/8d627cb69cbceed874a485cd7cb3fa86?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan ", "link": "https://stackoverflow.com/users/8176285/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53848065, "answer_count": 1, "score": 0, "last_activity_date": 1545211527, "creation_date": 1545211138, "last_edit_date": 1545211527, "question_id": 53848007, "link": "https://stackoverflow.com/questions/53848007/loop-and-use-the-index-of-the-number-as-filename", "title": "loop and use the index of the number as filename", "body": "<p>I am not very well versed in c++, what i wanted is in the line</p>\n\n<pre><code>cv::imwrite(\"/home/ryan/PCN-FaceDetection/predictions/j.jpg\", img);\n</code></pre>\n\n<p>i wanted to string format the i variable which is being looped and make it the filename.</p>\n\n<p>In python it would be like </p>\n\n<pre><code>for i in range(0, 26):\n   imwrite(\"/home/ryan/PCN-FaceDetection/predictions/{}.jpg\".format(i), img)\n</code></pre>\n\n<p>How do i do this in C++?\nThanks in advance.</p>\n\n<pre><code>for (int i = 0; i &lt;= 26; i++)\n{\n    cv::Mat img =\n        cv::imread(\"../imgs/\" + std::to_string(i) + \".jpg\");\n    cv::TickMeter tm;\n    tm.reset();\n    tm.start();\n    std::vector&lt;Window&gt; faces = detector.DetectFace(img);\n    tm.stop();\n    std::cout &lt;&lt; \"Image: \" &lt;&lt; i &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"Time Cost: \"&lt;&lt;\n              tm.getTimeMilli() &lt;&lt; \" ms\" &lt;&lt; std::endl;\n    for (int j = 0; j &lt; faces.size(); j++)\n    {\n        DrawFace(img, faces[j]);\n    }\n    cv::imwrite(\"/home/ryan/PCN-FaceDetection/predictions/i.jpg\", img); // A JPG FILE IS BEING SAVED  \n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 1431, "user_id": 8531215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b6f1842cca99191b2e148564e4cc53?s=128&d=identicon&r=PG&f=1", "display_name": "TaQuangTu", "link": "https://stackoverflow.com/users/8531215/taquangtu"}, "edited": false, "score": 0, "creation_date": 1545211524, "post_id": 53848024, "comment_id": 94543696, "body": "I try with this code and get memory leak error, <a href=\"https://ideone.com/G3GX1y\" rel=\"nofollow noreferrer\">ideone.com/G3GX1y</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545211569, "post_id": 53848024, "comment_id": 94543717, "body": "How does it being reachable change the fact that it leaks?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1431, "user_id": 8531215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b6f1842cca99191b2e148564e4cc53?s=128&d=identicon&r=PG&f=1", "display_name": "TaQuangTu", "link": "https://stackoverflow.com/users/8531215/taquangtu"}, "edited": false, "score": 1, "creation_date": 1545211626, "post_id": 53848024, "comment_id": 94543750, "body": "@TaQuangTu that isn&#39;t a leak. That&#39;s use-after-free undefined behaviour"}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 0, "creation_date": 1545211646, "post_id": 53848024, "comment_id": 94543762, "body": "That makes sense... Dynamic allocated memory not in local scope should not be worried about memory leak..."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 1431, "user_id": 8531215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b6f1842cca99191b2e148564e4cc53?s=128&d=identicon&r=PG&f=1", "display_name": "TaQuangTu", "link": "https://stackoverflow.com/users/8531215/taquangtu"}, "edited": false, "score": 0, "creation_date": 1545211652, "post_id": 53848024, "comment_id": 94543766, "body": "@TaQuangTu your code writes into a de allocated memory, this is invalid"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1545211680, "post_id": 53848024, "comment_id": 94543784, "body": "@Quentin it&#39;s reachable for the entire lifetime of the program, and then collected by the OS"}, {"owner": {"reputation": 1431, "user_id": 8531215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30b6f1842cca99191b2e148564e4cc53?s=128&d=identicon&r=PG&f=1", "display_name": "TaQuangTu", "link": "https://stackoverflow.com/users/8531215/taquangtu"}, "edited": false, "score": 0, "creation_date": 1545211691, "post_id": 53848024, "comment_id": 94543791, "body": "OK, I understand now, Thank all!"}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545211859, "post_id": 53848024, "comment_id": 94543912, "body": "@Quentin an allocated memory is leak when there is no way to reach it directly or indirectly."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545211918, "post_id": 53848024, "comment_id": 94543945, "body": "@bruno whether you could reach it or not is irrelevant if there&#39;s no code to release it anyway."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1545212215, "post_id": 53848024, "comment_id": 94544149, "body": "@quentin when an allocated memory stop to be reachable =&gt; you have no way to de allocate it =&gt; memory leak. Else there is no memory leak. The fact there is or not somewhere a piece of code de-allocated the memory is not relevant, only the execution counts."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545212565, "post_id": 53848024, "comment_id": 94544355, "body": "@bruno how exactly could an execution path release the memory if there&#39;s no code to be executed in the first place? If we&#39;re talking memory resources only, your whole process&#39; memory is freed by the OS upon exit regardless of whether it contains unreachable objects or not. If we&#39;re talking general resources, not destructing them properly is always a leak, reachable or not."}, {"owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545213343, "post_id": 53848024, "comment_id": 94544829, "body": "@quentin the rule is very simple. Supposing the memory leaks are search after the execution, so there is no thread so no stack, but the global variables/class attributes still exist, so the detector marks all the allocated memory blocks directly or indirectly reachable from the  global variables/class attributes, when this is done all the allocated memory blocks not marked are a memory leak."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545213556, "post_id": 53848024, "comment_id": 94544962, "body": "@Quentin But since the OS would collect it, it&#39;s not a problem at all... I mean, don&#39;t we care memory leak only when the program is running? Btw, thank you for reminding me using <code>std::vector</code>. Thank you guys."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545213977, "post_id": 53848024, "comment_id": 94545222, "body": "@bruno I&#39;m sorry but that wouldn&#39;t make any sense. Marking reachable objects is just a QoL feature so that you know to search for either a missing <code>delete</code> or a lost pointer."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "edited": false, "score": 1, "creation_date": 1545214112, "post_id": 53848024, "comment_id": 94545311, "body": "@Rick no we don&#39;t. Memory is a single resource type among many, and the OS won&#39;t help you with much else. Shared memory handles, database connections, specific driver state, etc. are all resources that won&#39;t be cleaned up if you just let them leak. Unless you desperately need to save a few milliseconds on program exit, there&#39;s no point in special-casing what your specific OS can or can&#39;t clean up."}, {"owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1545214305, "post_id": 53848024, "comment_id": 94545416, "body": "@Quentin Yes, for those resource that OS won&#39;t help you clean up even if the program has terminated, release is indeed needed."}], "tags": [], "owner": {"reputation": 31685, "user_id": 2458991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WWDzI.jpg?s=128&g=1", "display_name": "bruno", "link": "https://stackoverflow.com/users/2458991/bruno"}, "is_accepted": true, "score": 3, "last_activity_date": 1545211212, "creation_date": 1545211212, "answer_id": 53848024, "question_id": 53847957, "link": "https://stackoverflow.com/questions/53847957/why-no-memory-leak-error-for-static-class-member/53848024#53848024", "title": "Why no memory leak error for static class member?", "body": "<p>The allocated int[] is not lost in static/global case because it is reachable, why do you expect a memory leak ?</p>\n"}, {"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 1, "last_activity_date": 1545211708, "creation_date": 1545211708, "answer_id": 53848161, "question_id": 53847957, "link": "https://stackoverflow.com/questions/53847957/why-no-memory-leak-error-for-static-class-member/53848161#53848161", "title": "Why no memory leak error for static class member?", "body": "<p>Heap sanitizers frequently have trouble tracking allocations during the initialization of static objects, and this is what's happening here. There's no exception for global pointers, and your dynamically-allocated array leaks.</p>\n\n<p>The only way to correctly release a global resource is the destructor of the object that manages it. In other words, use <code>std::vector</code> as usual.</p>\n"}], "owner": {"reputation": 4425, "user_id": 5983841, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/GHJxG.jpg?s=128&g=1", "display_name": "Rick", "link": "https://stackoverflow.com/users/5983841/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53848024, "answer_count": 2, "score": -1, "last_activity_date": 1545211708, "creation_date": 1545210961, "question_id": 53847957, "link": "https://stackoverflow.com/questions/53847957/why-no-memory-leak-error-for-static-class-member", "title": "Why no memory leak error for static class member?", "body": "<p>I want to encapsulate a sorting class with some static functions, along with an auxiliary dynamic allocated array. And I was thinking where to <code>delete[]</code> the dynamic array lately. But I found that I got no memory leak error for it, neither for dynamic allocatd array in global scope. Why? What's rule here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Foo{\n    static int *j;\n};\n\nint* Foo::j = new int[10]; //no memory leak error\n\n// int *q = new int[10]; //no memory leak error\nint main(){\n    // int *q = new int[10]; //memory leak error\n    return 0;\n}\n</code></pre>\n\n<p>I use <code>clang++ -fsanitize=address -g -Wall main.cpp; ASAN_OPTIONS=detect_leaks=1 ./a.out</code> to detect memory leak.</p>\n"}, {"tags": ["android", "c++", "android-studio", "cmake", "build-variant"], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 4412885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d90736d0a68e2f6d38c021fafb76b85?s=128&d=identicon&r=PG&f=1", "display_name": "mihca", "link": "https://stackoverflow.com/users/4412885/mihca"}, "edited": false, "score": 0, "creation_date": 1546440913, "post_id": 53861448, "comment_id": 94853453, "body": "How do I include only the <code>release</code> version? So far I use <code>android.variantFilter</code> to tell Android Studio not to build everything. This works for me and it looks super promising! Thx"}], "tags": [], "owner": {"reputation": 10161, "user_id": 8034839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N8r2x.jpg?s=128&g=1", "display_name": "shizhen", "link": "https://stackoverflow.com/users/8034839/shizhen"}, "is_accepted": true, "score": 2, "last_activity_date": 1545270368, "creation_date": 1545270368, "answer_id": 53861448, "question_id": 53847619, "link": "https://stackoverflow.com/questions/53847619/android-studio-cmake-build-once-for-all-build-variants/53861448#53861448", "title": "Android Studio CMake build once for all build variants", "body": "<p>By default, Android Studio IDE together with CMake and Gradle will generate a series of native build tasks named with <code>externalNative&lt;BuildVariant&gt;Build</code> according to your build types and flavours. If you want to twist this behaviour, some workaround is as below: </p>\n\n<ol>\n<li>Create an Android Studio module project which only builds your native code, e.g. <code>shared-native</code>. </li>\n<li>Let the rest of your modules dependent on this project. </li>\n</ol>\n\n<p>For this solution, you need to consider below points: </p>\n\n<ol>\n<li>Put your <code>.so</code> files into a proper location that other projects can see and link with. </li>\n<li>You can only include <code>debug</code> and <code>release</code> build types for this <code>shared-native</code> module project to avoid too many times of re-build. Or you can simply to let your other projects depends on the release type so that it will be built only <strong>ONCE</strong>. </li>\n</ol>\n"}], "owner": {"reputation": 563, "user_id": 4412885, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d90736d0a68e2f6d38c021fafb76b85?s=128&d=identicon&r=PG&f=1", "display_name": "mihca", "link": "https://stackoverflow.com/users/4412885/mihca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 2, "accepted_answer_id": 53861448, "answer_count": 1, "score": 3, "last_activity_date": 1550809959, "creation_date": 1545209627, "last_edit_date": 1550809959, "question_id": 53847619, "link": "https://stackoverflow.com/questions/53847619/android-studio-cmake-build-once-for-all-build-variants", "title": "Android Studio CMake build once for all build variants", "body": "<p>I have a project with C++ code (JNI) and lots of build variants and combinations. These are used to implement different brandings / flavors of the app (i.e. colors, styles, icons, ...). </p>\n\n<p>For example there could be build variants for n customers : </p>\n\n<ul>\n<li><code>customerNDebug</code></li>\n<li><code>customerNDebugproguard</code> </li>\n<li><code>customerNRelease</code>. </li>\n</ul>\n\n<p>Anyway, the C/C++ layer is <strong>the same for each product flavor</strong>.</p>\n\n<p>Normally <strong>CMake</strong> in Android Studio compiles C code for every build variant. This makes sense if you have build variants like \"<code>debug</code>\" and \"<code>release</code>\" where the resulting code actually differs. However, for the build variants I have, the compiled output is always the same.</p>\n\n<p>At the moment the compilation of C/C++ code is done using an external tool in our project and I want to compile using <strong>CMake</strong> in Android Studio only for proper IDE support of C/C++ code. So for me a single build would suffice.</p>\n\n<p>Is it possible to tell Android Studio to build C/C++ code only once, no matter the build variants and flavors?</p>\n"}]